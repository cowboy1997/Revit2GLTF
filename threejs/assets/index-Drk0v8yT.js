const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./AttributeView-CgBCpW3M.js","./AttributeView-DE0tT-tK.css","./CarouselMenu-Cf89NcYP.js","./CarouselMenu-DycsaLFE.css","./ProjectViewComponent-BI_I_6N4.js","./ProjectViewComponent-0VgMWgLW.css","./Toolbar-ucW5KBW8.js","./Toolbar-ClRP2eKp.css","./View3D-BzqH_FlQ.js","./View3D-CpHussJT.css"])))=>i.map(i=>d[i]);
var d8=Object.defineProperty;var h8=(n,e,t)=>e in n?d8(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var J=(n,e,t)=>h8(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();/**
* @vue/shared v3.4.36
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function oE(n,e){const t=new Set(n.split(","));return i=>t.has(i)}const Mi={},Cf=[],mn=()=>{},f8=()=>!1,u1=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),aE=n=>n.startsWith("onUpdate:"),ls=Object.assign,lE=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},p8=Object.prototype.hasOwnProperty,Qt=(n,e)=>p8.call(n,e),rt=Array.isArray,Mf=n=>Tv(n)==="[object Map]",d1=n=>Tv(n)==="[object Set]",Fd=n=>Tv(n)==="[object Date]",xt=n=>typeof n=="function",Rt=n=>typeof n=="string",Ua=n=>typeof n=="symbol",$t=n=>n!==null&&typeof n=="object",yg=n=>($t(n)||xt(n))&&xt(n.then)&&xt(n.catch),qk=Object.prototype.toString,Tv=n=>qk.call(n),jy=n=>Tv(n).slice(8,-1),P_=n=>Tv(n)==="[object Object]",cE=n=>Rt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Nm=oE(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),h1=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},m8=/-(\w)/g,Jr=h1(n=>n.replace(m8,(e,t)=>t?t.toUpperCase():"")),g8=/\B([A-Z])/g,Gl=h1(n=>n.replace(g8,"-$1").toLowerCase()),Av=h1(n=>n.charAt(0).toUpperCase()+n.slice(1)),Fm=h1(n=>n?`on${Av(n)}`:""),jc=(n,e)=>!Object.is(n,e),qy=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},Zk=(n,e,t,i=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:i,value:t})},KS=n=>{const e=parseFloat(n);return isNaN(e)?n:e},v8=n=>{const e=Rt(n)?Number(n):NaN;return isNaN(e)?n:e};let TA;const Jk=()=>TA||(TA=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function pt(n){if(rt(n)){const e={};for(let t=0;t<n.length;t++){const i=n[t],s=Rt(i)?w8(i):pt(i);if(s)for(const r in s)e[r]=s[r]}return e}else if(Rt(n)||$t(n))return n}const y8=/;(?![^(]*\))/g,_8=/:([^]+)/,b8=/\/\*[^]*?\*\//g;function w8(n){const e={};return n.replace(b8,"").split(y8).forEach(t=>{if(t){const i=t.split(_8);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function z(n){let e="";if(Rt(n))e=n;else if(rt(n))for(let t=0;t<n.length;t++){const i=z(n[t]);i&&(e+=i+" ")}else if($t(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}function wl(n){if(!n)return null;let{class:e,style:t}=n;return e&&!Rt(e)&&(n.class=z(e)),t&&(n.style=pt(t)),n}const x8="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",S8=oE(x8);function Qk(n){return!!n||n===""}function C8(n,e){if(n.length!==e.length)return!1;let t=!0;for(let i=0;t&&i<n.length;i++)t=Hf(n[i],e[i]);return t}function Hf(n,e){if(n===e)return!0;let t=Fd(n),i=Fd(e);if(t||i)return t&&i?n.getTime()===e.getTime():!1;if(t=Ua(n),i=Ua(e),t||i)return n===e;if(t=rt(n),i=rt(e),t||i)return t&&i?C8(n,e):!1;if(t=$t(n),i=$t(e),t||i){if(!t||!i)return!1;const s=Object.keys(n).length,r=Object.keys(e).length;if(s!==r)return!1;for(const o in n){const a=n.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Hf(n[o],e[o]))return!1}}return String(n)===String(e)}function eO(n,e){return n.findIndex(t=>Hf(t,e))}const tO=n=>!!(n&&n.__v_isRef===!0),Je=n=>Rt(n)?n:n==null?"":rt(n)||$t(n)&&(n.toString===qk||!xt(n.toString))?tO(n)?Je(n.value):JSON.stringify(n,nO,2):String(n),nO=(n,e)=>tO(e)?nO(n,e.value):Mf(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,s],r)=>(t[Uw(i,r)+" =>"]=s,t),{})}:d1(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Uw(t))}:Ua(e)?Uw(e):$t(e)&&!rt(e)&&!P_(e)?String(e):e,Uw=(n,e="")=>{var t;return Ua(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.4.36
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Br;class iO{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Br,!e&&Br&&(this.index=(Br.scopes||(Br.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=Br;try{return Br=this,e()}finally{Br=t}}}on(){Br=this}off(){Br=this.parent}stop(e){if(this._active){let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function M8(n){return new iO(n)}function E8(n,e=Br){e&&e.active&&e.effects.push(n)}function sO(){return Br}function rO(n){Br&&Br.cleanups.push(n)}let gd;class uE{constructor(e,t,i,s){this.fn=e,this.trigger=t,this.scheduler=i,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,E8(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,du();for(let e=0;e<this._depsLength;e++){const t=this.deps[e];if(t.computed&&(T8(t.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),hu()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=$c,t=gd;try{return $c=!0,gd=this,this._runnings++,AA(this),this.fn()}finally{IA(this),this._runnings--,gd=t,$c=e}}stop(){this.active&&(AA(this),IA(this),this.onStop&&this.onStop(),this.active=!1)}}function T8(n){return n.value}function AA(n){n._trackId++,n._depsLength=0}function IA(n){if(n.deps.length>n._depsLength){for(let e=n._depsLength;e<n.deps.length;e++)oO(n.deps[e],n);n.deps.length=n._depsLength}}function oO(n,e){const t=n.get(e);t!==void 0&&e._trackId!==t&&(n.delete(e),n.size===0&&n.cleanup())}let $c=!0,YS=0;const aO=[];function du(){aO.push($c),$c=!1}function hu(){const n=aO.pop();$c=n===void 0?!0:n}function dE(){YS++}function hE(){for(YS--;!YS&&XS.length;)XS.shift()()}function lO(n,e,t){if(e.get(n)!==n._trackId){e.set(n,n._trackId);const i=n.deps[n._depsLength];i!==e?(i&&oO(i,n),n.deps[n._depsLength++]=e):n._depsLength++}}const XS=[];function cO(n,e,t){dE();for(const i of n.keys()){let s;i._dirtyLevel<e&&(s??(s=n.get(i)===i._trackId))&&(i._shouldSchedule||(i._shouldSchedule=i._dirtyLevel===0),i._dirtyLevel=e),i._shouldSchedule&&(s??(s=n.get(i)===i._trackId))&&(i.trigger(),(!i._runnings||i.allowRecurse)&&i._dirtyLevel!==2&&(i._shouldSchedule=!1,i.scheduler&&XS.push(i.scheduler)))}hE()}const uO=(n,e)=>{const t=new Map;return t.cleanup=n,t.computed=e,t},L_=new WeakMap,vd=Symbol(""),jS=Symbol("");function Pr(n,e,t){if($c&&gd){let i=L_.get(n);i||L_.set(n,i=new Map);let s=i.get(t);s||i.set(t,s=uO(()=>i.delete(t))),lO(gd,s)}}function Ml(n,e,t,i,s,r){const o=L_.get(n);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(t==="length"&&rt(n)){const l=Number(i);o.forEach((c,u)=>{(u==="length"||!Ua(u)&&u>=l)&&a.push(c)})}else switch(t!==void 0&&a.push(o.get(t)),e){case"add":rt(n)?cE(t)&&a.push(o.get("length")):(a.push(o.get(vd)),Mf(n)&&a.push(o.get(jS)));break;case"delete":rt(n)||(a.push(o.get(vd)),Mf(n)&&a.push(o.get(jS)));break;case"set":Mf(n)&&a.push(o.get(vd));break}dE();for(const l of a)l&&cO(l,4);hE()}function A8(n,e){const t=L_.get(n);return t&&t.get(e)}const I8=oE("__proto__,__v_isRef,__isVue"),dO=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Ua)),RA=R8();function R8(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...t){const i=yn(this);for(let r=0,o=this.length;r<o;r++)Pr(i,"get",r+"");const s=i[e](...t);return s===-1||s===!1?i[e](...t.map(yn)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...t){du(),dE();const i=yn(this)[e].apply(this,t);return hE(),hu(),i}}),n}function P8(n){Ua(n)||(n=String(n));const e=yn(this);return Pr(e,"has",n),e.hasOwnProperty(n)}class hO{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,i){const s=this._isReadonly,r=this._isShallow;if(t==="__v_isReactive")return!s;if(t==="__v_isReadonly")return s;if(t==="__v_isShallow")return r;if(t==="__v_raw")return i===(s?r?G8:gO:r?mO:pO).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const o=rt(e);if(!s){if(o&&Qt(RA,t))return Reflect.get(RA,t,i);if(t==="hasOwnProperty")return P8}const a=Reflect.get(e,t,i);return(Ua(t)?dO.has(t):I8(t))||(s||Pr(e,"get",t),r)?a:Gn(a)?o&&cE(t)?a:a.value:$t(a)?s?oh(a):un(a):a}}class fO extends hO{constructor(e=!1){super(!1,e)}set(e,t,i,s){let r=e[t];if(!this._isShallow){const l=Bd(r);if(!Vf(i)&&!Bd(i)&&(r=yn(r),i=yn(i)),!rt(e)&&Gn(r)&&!Gn(i))return l?!1:(r.value=i,!0)}const o=rt(e)&&cE(t)?Number(t)<e.length:Qt(e,t),a=Reflect.set(e,t,i,s);return e===yn(s)&&(o?jc(i,r)&&Ml(e,"set",t,i):Ml(e,"add",t,i)),a}deleteProperty(e,t){const i=Qt(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&i&&Ml(e,"delete",t,void 0),s}has(e,t){const i=Reflect.has(e,t);return(!Ua(t)||!dO.has(t))&&Pr(e,"has",t),i}ownKeys(e){return Pr(e,"iterate",rt(e)?"length":vd),Reflect.ownKeys(e)}}class L8 extends hO{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const k8=new fO,O8=new L8,D8=new fO(!0);const fE=n=>n,f1=n=>Reflect.getPrototypeOf(n);function h0(n,e,t=!1,i=!1){n=n.__v_raw;const s=yn(n),r=yn(e);t||(jc(e,r)&&Pr(s,"get",e),Pr(s,"get",r));const{has:o}=f1(s),a=i?fE:t?gE:_g;if(o.call(s,e))return a(n.get(e));if(o.call(s,r))return a(n.get(r));n!==s&&n.get(e)}function f0(n,e=!1){const t=this.__v_raw,i=yn(t),s=yn(n);return e||(jc(n,s)&&Pr(i,"has",n),Pr(i,"has",s)),n===s?t.has(n):t.has(n)||t.has(s)}function p0(n,e=!1){return n=n.__v_raw,!e&&Pr(yn(n),"iterate",vd),Reflect.get(n,"size",n)}function PA(n,e=!1){!e&&!Vf(n)&&!Bd(n)&&(n=yn(n));const t=yn(this);return f1(t).has.call(t,n)||(t.add(n),Ml(t,"add",n,n)),this}function LA(n,e,t=!1){!t&&!Vf(e)&&!Bd(e)&&(e=yn(e));const i=yn(this),{has:s,get:r}=f1(i);let o=s.call(i,n);o||(n=yn(n),o=s.call(i,n));const a=r.call(i,n);return i.set(n,e),o?jc(e,a)&&Ml(i,"set",n,e):Ml(i,"add",n,e),this}function kA(n){const e=yn(this),{has:t,get:i}=f1(e);let s=t.call(e,n);s||(n=yn(n),s=t.call(e,n)),i&&i.call(e,n);const r=e.delete(n);return s&&Ml(e,"delete",n,void 0),r}function OA(){const n=yn(this),e=n.size!==0,t=n.clear();return e&&Ml(n,"clear",void 0,void 0),t}function m0(n,e){return function(i,s){const r=this,o=r.__v_raw,a=yn(o),l=e?fE:n?gE:_g;return!n&&Pr(a,"iterate",vd),o.forEach((c,u)=>i.call(s,l(c),l(u),r))}}function g0(n,e,t){return function(...i){const s=this.__v_raw,r=yn(s),o=Mf(r),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=s[n](...i),u=t?fE:e?gE:_g;return!e&&Pr(r,"iterate",l?jS:vd),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:a?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function tc(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function N8(){const n={get(r){return h0(this,r)},get size(){return p0(this)},has:f0,add:PA,set:LA,delete:kA,clear:OA,forEach:m0(!1,!1)},e={get(r){return h0(this,r,!1,!0)},get size(){return p0(this)},has:f0,add(r){return PA.call(this,r,!0)},set(r,o){return LA.call(this,r,o,!0)},delete:kA,clear:OA,forEach:m0(!1,!0)},t={get(r){return h0(this,r,!0)},get size(){return p0(this,!0)},has(r){return f0.call(this,r,!0)},add:tc("add"),set:tc("set"),delete:tc("delete"),clear:tc("clear"),forEach:m0(!0,!1)},i={get(r){return h0(this,r,!0,!0)},get size(){return p0(this,!0)},has(r){return f0.call(this,r,!0)},add:tc("add"),set:tc("set"),delete:tc("delete"),clear:tc("clear"),forEach:m0(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=g0(r,!1,!1),t[r]=g0(r,!0,!1),e[r]=g0(r,!1,!0),i[r]=g0(r,!0,!0)}),[n,t,e,i]}const[F8,B8,U8,z8]=N8();function pE(n,e){const t=e?n?z8:U8:n?B8:F8;return(i,s,r)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?i:Reflect.get(Qt(t,s)&&s in i?t:i,s,r)}const H8={get:pE(!1,!1)},V8={get:pE(!1,!0)},$8={get:pE(!0,!1)};const pO=new WeakMap,mO=new WeakMap,gO=new WeakMap,G8=new WeakMap;function W8(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function K8(n){return n.__v_skip||!Object.isExtensible(n)?0:W8(jy(n))}function un(n){return Bd(n)?n:mE(n,!1,k8,H8,pO)}function vO(n){return mE(n,!1,D8,V8,mO)}function oh(n){return mE(n,!0,O8,$8,gO)}function mE(n,e,t,i,s){if(!$t(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const r=s.get(n);if(r)return r;const o=K8(n);if(o===0)return n;const a=new Proxy(n,o===2?i:t);return s.set(n,a),a}function Bm(n){return Bd(n)?Bm(n.__v_raw):!!(n&&n.__v_isReactive)}function Bd(n){return!!(n&&n.__v_isReadonly)}function Vf(n){return!!(n&&n.__v_isShallow)}function yO(n){return n?!!n.__v_raw:!1}function yn(n){const e=n&&n.__v_raw;return e?yn(e):n}function El(n){return Object.isExtensible(n)&&Zk(n,"__v_skip",!0),n}const _g=n=>$t(n)?un(n):n,gE=n=>$t(n)?oh(n):n;class _O{constructor(e,t,i,s){this.getter=e,this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new uE(()=>e(this._value),()=>Um(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){const e=yn(this);return(!e._cacheable||e.effect.dirty)&&jc(e._value,e._value=e.effect.run())&&Um(e,4),vE(e),e.effect._dirtyLevel>=2&&Um(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function Y8(n,e,t=!1){let i,s;const r=xt(n);return r?(i=n,s=mn):(i=n.get,s=n.set),new _O(i,s,r||!s,t)}function vE(n){var e;$c&&gd&&(n=yn(n),lO(gd,(e=n.dep)!=null?e:n.dep=uO(()=>n.dep=void 0,n instanceof _O?n:void 0)))}function Um(n,e=4,t,i){n=yn(n);const s=n.dep;s&&cO(s,e)}function Gn(n){return!!(n&&n.__v_isRef===!0)}function V(n){return bO(n,!1)}function Vn(n){return bO(n,!0)}function bO(n,e){return Gn(n)?n:new X8(n,e)}class X8{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:yn(e),this._value=t?e:_g(e)}get value(){return vE(this),this._value}set value(e){const t=this.__v_isShallow||Vf(e)||Bd(e);e=t?e:yn(e),jc(e,this._rawValue)&&(this._rawValue,this._rawValue=e,this._value=t?e:_g(e),Um(this,4))}}function g(n){return Gn(n)?n.value:n}const j8={get:(n,e,t)=>g(Reflect.get(n,e,t)),set:(n,e,t,i)=>{const s=n[e];return Gn(s)&&!Gn(t)?(s.value=t,!0):Reflect.set(n,e,t,i)}};function wO(n){return Bm(n)?n:new Proxy(n,j8)}class q8{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:t,set:i}=e(()=>vE(this),()=>Um(this));this._get=t,this._set=i}get value(){return this._get()}set value(e){this._set(e)}}function Z8(n){return new q8(n)}function ws(n){const e=rt(n)?new Array(n.length):{};for(const t in n)e[t]=xO(n,t);return e}class J8{constructor(e,t,i){this._object=e,this._key=t,this._defaultValue=i,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return A8(yn(this._object),this._key)}}class Q8{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function vn(n,e,t){return Gn(n)?n:xt(n)?new Q8(n):$t(n)&&arguments.length>1?xO(n,e,t):V(n)}function xO(n,e,t){const i=n[e];return Gn(i)?i:new J8(n,e,t)}/**
* @vue/runtime-core v3.4.36
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Gc(n,e,t,i){try{return i?n(...i):n()}catch(s){Iv(s,e,t)}}function Ao(n,e,t,i){if(xt(n)){const s=Gc(n,e,t,i);return s&&yg(s)&&s.catch(r=>{Iv(r,e,t)}),s}if(rt(n)){const s=[];for(let r=0;r<n.length;r++)s.push(Ao(n[r],e,t,i));return s}}function Iv(n,e,t,i=!0){const s=e?e.vnode:null;if(e){let r=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${t}`;for(;r;){const c=r.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](n,o,a)===!1)return}r=r.parent}const l=e.appContext.config.errorHandler;if(l){du(),Gc(l,null,10,[n,o,a]),hu();return}}e6(n,t,s,i)}function e6(n,e,t,i=!0){console.error(n)}let bg=!1,qS=!1;const Gs=[];let Ca=0;const Ef=[];let Mc=null,qu=0;const SO=Promise.resolve();let yE=null;function vt(n){const e=yE||SO;return n?e.then(this?n.bind(this):n):e}function t6(n){let e=Ca+1,t=Gs.length;for(;e<t;){const i=e+t>>>1,s=Gs[i],r=wg(s);r<n||r===n&&s.pre?e=i+1:t=i}return e}function p1(n){(!Gs.length||!Gs.includes(n,bg&&n.allowRecurse?Ca+1:Ca))&&(n.id==null?Gs.push(n):Gs.splice(t6(n.id),0,n),CO())}function CO(){!bg&&!qS&&(qS=!0,yE=SO.then(EO))}function n6(n){const e=Gs.indexOf(n);e>Ca&&Gs.splice(e,1)}function i6(n){rt(n)?Ef.push(...n):(!Mc||!Mc.includes(n,n.allowRecurse?qu+1:qu))&&Ef.push(n),CO()}function DA(n,e,t=bg?Ca+1:0){for(;t<Gs.length;t++){const i=Gs[t];if(i&&i.pre){if(n&&i.id!==n.uid)continue;Gs.splice(t,1),t--,i()}}}function MO(n){if(Ef.length){const e=[...new Set(Ef)].sort((t,i)=>wg(t)-wg(i));if(Ef.length=0,Mc){Mc.push(...e);return}for(Mc=e,qu=0;qu<Mc.length;qu++){const t=Mc[qu];t.active!==!1&&t()}Mc=null,qu=0}}const wg=n=>n.id==null?1/0:n.id,s6=(n,e)=>{const t=wg(n)-wg(e);if(t===0){if(n.pre&&!e.pre)return-1;if(e.pre&&!n.pre)return 1}return t};function EO(n){qS=!1,bg=!0,Gs.sort(s6);try{for(Ca=0;Ca<Gs.length;Ca++){const e=Gs[Ca];e&&e.active!==!1&&Gc(e,e.i,e.i?15:14)}}finally{Ca=0,Gs.length=0,MO(),bg=!1,yE=null,(Gs.length||Ef.length)&&EO()}}let _s=null,m1=null;function k_(n){const e=_s;return _s=n,m1=n&&n.type.__scopeId||null,e}function yRe(n){m1=n}function _Re(){m1=null}function pe(n,e=_s,t){if(!e||n._n)return n;const i=(...s)=>{i._d&&YA(-1);const r=k_(e);let o;try{o=n(...s)}finally{k_(r),i._d&&YA(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function Bt(n,e){if(_s===null)return n;const t=b1(_s),i=n.dirs||(n.dirs=[]);for(let s=0;s<e.length;s++){let[r,o,a,l=Mi]=e[s];r&&(xt(r)&&(r={mounted:r,updated:r}),r.deep&&Ic(o),i.push({dir:r,instance:t,value:o,oldValue:void 0,arg:a,modifiers:l}))}return n}function wu(n,e,t,i){const s=n.dirs,r=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[i];l&&(du(),Ao(l,t,8,[n.el,a,n,e]),hu())}}const Ec=Symbol("_leaveCb"),v0=Symbol("_enterCb");function TO(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ft(()=>{n.isMounted=!0}),kn(()=>{n.isUnmounting=!0}),n}const so=[Function,Array],AO={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:so,onEnter:so,onAfterEnter:so,onEnterCancelled:so,onBeforeLeave:so,onLeave:so,onAfterLeave:so,onLeaveCancelled:so,onBeforeAppear:so,onAppear:so,onAfterAppear:so,onAppearCancelled:so},IO=n=>{const e=n.subTree;return e.component?IO(e.component):e},r6={name:"BaseTransition",props:AO,setup(n,{slots:e}){const t=zt(),i=TO();return()=>{const s=e.default&&_E(e.default(),!0);if(!s||!s.length)return;let r=s[0];if(s.length>1){for(const h of s)if(h.type!==Es){r=h;break}}const o=yn(n),{mode:a}=o;if(i.isLeaving)return zw(r);const l=NA(r);if(!l)return zw(r);let c=xg(l,o,i,t,h=>c=h);$f(l,c);const u=t.subTree,d=u&&NA(u);if(d&&d.type!==Es&&!Zu(l,d)&&IO(t).type!==Es){const h=xg(d,o,i,t);if($f(d,h),a==="out-in"&&l.type!==Es)return i.isLeaving=!0,h.afterLeave=()=>{i.isLeaving=!1,t.update.active!==!1&&(t.effect.dirty=!0,t.update())},zw(r);a==="in-out"&&l.type!==Es&&(h.delayLeave=(f,m,p)=>{const y=RO(i,d);y[String(d.key)]=d,f[Ec]=()=>{m(),f[Ec]=void 0,delete c.delayedLeave},c.delayedLeave=p})}return r}}},o6=r6;function RO(n,e){const{leavingVNodes:t}=n;let i=t.get(e.type);return i||(i=Object.create(null),t.set(e.type,i)),i}function xg(n,e,t,i,s){const{appear:r,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:h,onLeave:f,onAfterLeave:m,onLeaveCancelled:p,onBeforeAppear:y,onAppear:v,onAfterAppear:_,onAppearCancelled:b}=e,w=String(n.key),x=RO(t,n),S=(M,E)=>{M&&Ao(M,i,9,E)},C=(M,E)=>{const A=E[1];S(M,E),rt(M)?M.every(I=>I.length<=1)&&A():M.length<=1&&A()},T={mode:o,persisted:a,beforeEnter(M){let E=l;if(!t.isMounted)if(r)E=y||l;else return;M[Ec]&&M[Ec](!0);const A=x[w];A&&Zu(n,A)&&A.el[Ec]&&A.el[Ec](),S(E,[M])},enter(M){let E=c,A=u,I=d;if(!t.isMounted)if(r)E=v||c,A=_||u,I=b||d;else return;let B=!1;const F=M[v0]=U=>{B||(B=!0,U?S(I,[M]):S(A,[M]),T.delayedLeave&&T.delayedLeave(),M[v0]=void 0)};E?C(E,[M,F]):F()},leave(M,E){const A=String(n.key);if(M[v0]&&M[v0](!0),t.isUnmounting)return E();S(h,[M]);let I=!1;const B=M[Ec]=F=>{I||(I=!0,E(),F?S(p,[M]):S(m,[M]),M[Ec]=void 0,x[A]===n&&delete x[A])};x[A]=n,f?C(f,[M,B]):B()},clone(M){const E=xg(M,e,t,i,s);return s&&s(E),E}};return T}function zw(n){if(Rv(n))return n=Rl(n),n.children=null,n}function NA(n){if(!Rv(n))return n;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&xt(t.default))return t.default()}}function $f(n,e){n.shapeFlag&6&&n.component?$f(n.component.subTree,e):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function _E(n,e=!1,t){let i=[],s=0;for(let r=0;r<n.length;r++){let o=n[r];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:r);o.type===mt?(o.patchFlag&128&&s++,i=i.concat(_E(o.children,e,a))):(e||o.type!==Es)&&i.push(a!=null?Rl(o,{key:a}):o)}if(s>1)for(let r=0;r<i.length;r++)i[r].patchFlag=-2;return i}/*! #__NO_SIDE_EFFECTS__ */function se(n,e){return xt(n)?ls({name:n.name},e,{setup:n}):n}const zm=n=>!!n.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function a6(n){xt(n)&&(n={loader:n});const{loader:e,loadingComponent:t,errorComponent:i,delay:s=200,timeout:r,suspensible:o=!0,onError:a}=n;let l=null,c,u=0;const d=()=>(u++,l=null,h()),h=()=>{let f;return l||(f=l=e().catch(m=>{if(m=m instanceof Error?m:new Error(String(m)),a)return new Promise((p,y)=>{a(m,()=>p(d()),()=>y(m),u+1)});throw m}).then(m=>f!==l&&l?l:(m&&(m.__esModule||m[Symbol.toStringTag]==="Module")&&(m=m.default),c=m,m)))};return se({name:"AsyncComponentWrapper",__asyncLoader:h,get __asyncResolved(){return c},setup(){const f=ys;if(c)return()=>Hw(c,f);const m=_=>{l=null,Iv(_,f,13,!i)};if(o&&f.suspense||Lv)return h().then(_=>()=>Hw(_,f)).catch(_=>(m(_),()=>i?le(i,{error:_}):null));const p=V(!1),y=V(),v=V(!!s);return s&&setTimeout(()=>{v.value=!1},s),r!=null&&setTimeout(()=>{if(!p.value&&!y.value){const _=new Error(`Async component timed out after ${r}ms.`);m(_),y.value=_}},r),h().then(()=>{p.value=!0,f.parent&&Rv(f.parent.vnode)&&(f.parent.effect.dirty=!0,p1(f.parent.update))}).catch(_=>{m(_),y.value=_}),()=>{if(p.value&&c)return Hw(c,f);if(y.value&&i)return le(i,{error:y.value});if(t&&!v.value)return le(t)}}})}function Hw(n,e){const{ref:t,props:i,children:s,ce:r}=e.vnode,o=le(n,i,s);return o.ref=t,o.ce=r,delete e.vnode.ce,o}const Rv=n=>n.type.__isKeepAlive;function PO(n,e){kO(n,"a",e)}function LO(n,e){kO(n,"da",e)}function kO(n,e,t=ys){const i=n.__wdc||(n.__wdc=()=>{let s=t;for(;s;){if(s.isDeactivated)return;s=s.parent}return n()});if(g1(e,i,t),t){let s=t.parent;for(;s&&s.parent;)Rv(s.parent.vnode)&&l6(i,e,t,s),s=s.parent}}function l6(n,e,t,i){const s=g1(e,n,i,!0);fu(()=>{lE(i[e],s)},t)}function g1(n,e,t=ys,i=!1){if(t){const s=t[n]||(t[n]=[]),r=e.__weh||(e.__weh=(...o)=>{du();const a=Pv(t),l=Ao(e,t,n,o);return a(),hu(),l});return i?s.unshift(r):s.push(r),r}}const Wl=n=>(e,t=ys)=>{(!Lv||n==="sp")&&g1(n,(...i)=>e(...i),t)},v1=Wl("bm"),Ft=Wl("m"),OO=Wl("bu"),Kl=Wl("u"),kn=Wl("bum"),fu=Wl("um"),c6=Wl("sp"),u6=Wl("rtg"),d6=Wl("rtc");function h6(n,e=ys){g1("ec",n,e)}const bE="components",f6="directives";function Ut(n,e){return wE(bE,n,!0,e)||n}const DO=Symbol.for("v-ndc");function Wt(n){return Rt(n)?wE(bE,n,!1)||n:n||DO}function y1(n){return wE(f6,n)}function wE(n,e,t=!0,i=!1){const s=_s||ys;if(s){const r=s.type;if(n===bE){const a=tV(r,!1);if(a&&(a===e||a===Jr(e)||a===Av(Jr(e))))return r}const o=FA(s[n]||r[n],e)||FA(s.appContext[n],e);return!o&&i?r:o}}function FA(n,e){return n&&(n[e]||n[Jr(e)]||n[Av(Jr(e))])}function Zt(n,e,t,i){let s;const r=t;if(rt(n)||Rt(n)){s=new Array(n.length);for(let o=0,a=n.length;o<a;o++)s[o]=e(n[o],o,void 0,r)}else if(typeof n=="number"){s=new Array(n);for(let o=0;o<n;o++)s[o]=e(o+1,o,void 0,r)}else if($t(n))if(n[Symbol.iterator])s=Array.from(n,(o,a)=>e(o,a,void 0,r));else{const o=Object.keys(n);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];s[a]=e(n[c],c,a,r)}}else s=[];return s}function Il(n,e){for(let t=0;t<e.length;t++){const i=e[t];if(rt(i))for(let s=0;s<i.length;s++)n[i[s].name]=i[s].fn;else i&&(n[i.name]=i.key?(...s)=>{const r=i.fn(...s);return r&&(r.key=i.key),r}:i.fn)}return n}function ke(n,e,t={},i,s){if(_s.isCE||_s.parent&&zm(_s.parent)&&_s.parent.isCE)return e!=="default"&&(t.name=e),le("slot",t,i&&i());let r=n[e];r&&r._c&&(r._d=!1),k();const o=r&&NO(r(t)),a=Re(mt,{key:(t.key||o&&o.key||`_${e}`)+(!o&&i?"_fb":"")},o||(i?i():[]),o&&n._===1?64:-2);return a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function NO(n){return n.some(e=>Jn(e)?!(e.type===Es||e.type===mt&&!NO(e.children)):!0)?n:null}function p6(n,e){const t={};for(const i in n)t[Fm(i)]=n[i];return t}const ZS=n=>n?iD(n)?b1(n):ZS(n.parent):null,Hm=ls(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>ZS(n.parent),$root:n=>ZS(n.root),$emit:n=>n.emit,$options:n=>xE(n),$forceUpdate:n=>n.f||(n.f=()=>{n.effect.dirty=!0,p1(n.update)}),$nextTick:n=>n.n||(n.n=vt.bind(n.proxy)),$watch:n=>B6.bind(n)}),Vw=(n,e)=>n!==Mi&&!n.__isScriptSetup&&Qt(n,e),m6={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:i,data:s,props:r,accessCache:o,type:a,appContext:l}=n;let c;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return i[e];case 2:return s[e];case 4:return t[e];case 3:return r[e]}else{if(Vw(i,e))return o[e]=1,i[e];if(s!==Mi&&Qt(s,e))return o[e]=2,s[e];if((c=n.propsOptions[0])&&Qt(c,e))return o[e]=3,r[e];if(t!==Mi&&Qt(t,e))return o[e]=4,t[e];JS&&(o[e]=0)}}const u=Hm[e];let d,h;if(u)return e==="$attrs"&&Pr(n.attrs,"get",""),u(n);if((d=a.__cssModules)&&(d=d[e]))return d;if(t!==Mi&&Qt(t,e))return o[e]=4,t[e];if(h=l.config.globalProperties,Qt(h,e))return h[e]},set({_:n},e,t){const{data:i,setupState:s,ctx:r}=n;return Vw(s,e)?(s[e]=t,!0):i!==Mi&&Qt(i,e)?(i[e]=t,!0):Qt(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(r[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:i,appContext:s,propsOptions:r}},o){let a;return!!t[o]||n!==Mi&&Qt(n,o)||Vw(e,o)||(a=r[0])&&Qt(a,o)||Qt(i,o)||Qt(Hm,o)||Qt(s.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:Qt(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function hs(){return FO().slots}function ah(){return FO().attrs}function FO(){const n=zt();return n.setupContext||(n.setupContext=rD(n))}function BA(n){return rt(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let JS=!0;function g6(n){const e=xE(n),t=n.proxy,i=n.ctx;JS=!1,e.beforeCreate&&UA(e.beforeCreate,n,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:f,updated:m,activated:p,deactivated:y,beforeDestroy:v,beforeUnmount:_,destroyed:b,unmounted:w,render:x,renderTracked:S,renderTriggered:C,errorCaptured:T,serverPrefetch:M,expose:E,inheritAttrs:A,components:I,directives:B,filters:F}=e;if(c&&v6(c,i,null),o)for(const O in o){const D=o[O];xt(D)&&(i[O]=D.bind(t))}if(s){const O=s.call(t,t);$t(O)&&(n.data=un(O))}if(JS=!0,r)for(const O in r){const D=r[O],L=xt(D)?D.bind(t,t):xt(D.get)?D.get.bind(t,t):mn,H=!xt(D)&&xt(D.set)?D.set.bind(t):mn,X=R({get:L,set:H});Object.defineProperty(i,O,{enumerable:!0,configurable:!0,get:()=>X.value,set:ne=>X.value=ne})}if(a)for(const O in a)BO(a[O],i,t,O);if(l){const O=xt(l)?l.call(t):l;Reflect.ownKeys(O).forEach(D=>{Xt(D,O[D])})}u&&UA(u,n,"c");function P(O,D){rt(D)?D.forEach(L=>O(L.bind(t))):D&&O(D.bind(t))}if(P(v1,d),P(Ft,h),P(OO,f),P(Kl,m),P(PO,p),P(LO,y),P(h6,T),P(d6,S),P(u6,C),P(kn,_),P(fu,w),P(c6,M),rt(E))if(E.length){const O=n.exposed||(n.exposed={});E.forEach(D=>{Object.defineProperty(O,D,{get:()=>t[D],set:L=>t[D]=L})})}else n.exposed||(n.exposed={});x&&n.render===mn&&(n.render=x),A!=null&&(n.inheritAttrs=A),I&&(n.components=I),B&&(n.directives=B)}function v6(n,e,t=mn){rt(n)&&(n=QS(n));for(const i in n){const s=n[i];let r;$t(s)?"default"in s?r=ct(s.from||i,s.default,!0):r=ct(s.from||i):r=ct(s),Gn(r)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[i]=r}}function UA(n,e,t){Ao(rt(n)?n.map(i=>i.bind(e.proxy)):n.bind(e.proxy),e,t)}function BO(n,e,t,i){const s=i.includes(".")?QO(t,i):()=>t[i];if(Rt(n)){const r=e[n];xt(r)&&ze(s,r)}else if(xt(n))ze(s,n.bind(t));else if($t(n))if(rt(n))n.forEach(r=>BO(r,e,t,i));else{const r=xt(n.handler)?n.handler.bind(t):e[n.handler];xt(r)&&ze(s,r,n)}}function xE(n){const e=n.type,{mixins:t,extends:i}=e,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=n.appContext,a=r.get(e);let l;return a?l=a:!s.length&&!t&&!i?l=e:(l={},s.length&&s.forEach(c=>O_(l,c,o,!0)),O_(l,e,o)),$t(e)&&r.set(e,l),l}function O_(n,e,t,i=!1){const{mixins:s,extends:r}=e;r&&O_(n,r,t,!0),s&&s.forEach(o=>O_(n,o,t,!0));for(const o in e)if(!(i&&o==="expose")){const a=y6[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const y6={data:zA,props:HA,emits:HA,methods:xm,computed:xm,beforeCreate:sr,created:sr,beforeMount:sr,mounted:sr,beforeUpdate:sr,updated:sr,beforeDestroy:sr,beforeUnmount:sr,destroyed:sr,unmounted:sr,activated:sr,deactivated:sr,errorCaptured:sr,serverPrefetch:sr,components:xm,directives:xm,watch:b6,provide:zA,inject:_6};function zA(n,e){return e?n?function(){return ls(xt(n)?n.call(this,this):n,xt(e)?e.call(this,this):e)}:e:n}function _6(n,e){return xm(QS(n),QS(e))}function QS(n){if(rt(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function sr(n,e){return n?[...new Set([].concat(n,e))]:e}function xm(n,e){return n?ls(Object.create(null),n,e):e}function HA(n,e){return n?rt(n)&&rt(e)?[...new Set([...n,...e])]:ls(Object.create(null),BA(n),BA(e??{})):e}function b6(n,e){if(!n)return e;if(!e)return n;const t=ls(Object.create(null),n);for(const i in e)t[i]=sr(n[i],e[i]);return t}function UO(){return{app:null,config:{isNativeTag:f8,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let w6=0;function x6(n,e){return function(i,s=null){xt(i)||(i=ls({},i)),s!=null&&!$t(s)&&(s=null);const r=UO(),o=new WeakSet;let a=!1;const l=r.app={_uid:w6++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:iV,get config(){return r.config},set config(c){},use(c,...u){return o.has(c)||(c&&xt(c.install)?(o.add(c),c.install(l,...u)):xt(c)&&(o.add(c),c(l,...u))),l},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),l},component(c,u){return u?(r.components[c]=u,l):r.components[c]},directive(c,u){return u?(r.directives[c]=u,l):r.directives[c]},mount(c,u,d){if(!a){const h=le(i,s);return h.appContext=r,d===!0?d="svg":d===!1&&(d=void 0),u&&e?e(h,c):n(h,c,d),a=!0,l._container=c,c.__vue_app__=l,b1(h.component)}},unmount(){a&&(n(null,l._container),delete l._container.__vue_app__)},provide(c,u){return r.provides[c]=u,l},runWithContext(c){const u=Vm;Vm=l;try{return c()}finally{Vm=u}}};return l}}let Vm=null;function Xt(n,e){if(ys){let t=ys.provides;const i=ys.parent&&ys.parent.provides;i===t&&(t=ys.provides=Object.create(i)),t[n]=e}}function ct(n,e,t=!1){const i=ys||_s;if(i||Vm){const s=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:Vm._context.provides;if(s&&n in s)return s[n];if(arguments.length>1)return t&&xt(e)?e.call(i&&i.proxy):e}}const zO={},HO=()=>Object.create(zO),VO=n=>Object.getPrototypeOf(n)===zO;function S6(n,e,t,i=!1){const s={},r=HO();n.propsDefaults=Object.create(null),$O(n,e,s,r);for(const o in n.propsOptions[0])o in s||(s[o]=void 0);t?n.props=i?s:vO(s):n.type.props?n.props=s:n.props=r,n.attrs=r}function C6(n,e,t,i){const{props:s,attrs:r,vnode:{patchFlag:o}}=n,a=yn(s),[l]=n.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=n.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(_1(n.emitsOptions,h))continue;const f=e[h];if(l)if(Qt(r,h))f!==r[h]&&(r[h]=f,c=!0);else{const m=Jr(h);s[m]=eC(l,a,m,f,n,!1)}else f!==r[h]&&(r[h]=f,c=!0)}}}else{$O(n,e,s,r)&&(c=!0);let u;for(const d in a)(!e||!Qt(e,d)&&((u=Gl(d))===d||!Qt(e,u)))&&(l?t&&(t[d]!==void 0||t[u]!==void 0)&&(s[d]=eC(l,a,d,void 0,n,!0)):delete s[d]);if(r!==a)for(const d in r)(!e||!Qt(e,d))&&(delete r[d],c=!0)}c&&Ml(n.attrs,"set","")}function $O(n,e,t,i){const[s,r]=n.propsOptions;let o=!1,a;if(e)for(let l in e){if(Nm(l))continue;const c=e[l];let u;s&&Qt(s,u=Jr(l))?!r||!r.includes(u)?t[u]=c:(a||(a={}))[u]=c:_1(n.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(r){const l=yn(t),c=a||Mi;for(let u=0;u<r.length;u++){const d=r[u];t[d]=eC(s,l,d,c[d],n,!Qt(c,d))}}return o}function eC(n,e,t,i,s,r){const o=n[t];if(o!=null){const a=Qt(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&xt(l)){const{propsDefaults:c}=s;if(t in c)i=c[t];else{const u=Pv(s);i=c[t]=l.call(null,e),u()}}else i=l}o[0]&&(r&&!a?i=!1:o[1]&&(i===""||i===Gl(t))&&(i=!0))}return i}const M6=new WeakMap;function GO(n,e,t=!1){const i=t?M6:e.propsCache,s=i.get(n);if(s)return s;const r=n.props,o={},a=[];let l=!1;if(!xt(n)){const u=d=>{l=!0;const[h,f]=GO(d,e,!0);ls(o,h),f&&a.push(...f)};!t&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!r&&!l)return $t(n)&&i.set(n,Cf),Cf;if(rt(r))for(let u=0;u<r.length;u++){const d=Jr(r[u]);VA(d)&&(o[d]=Mi)}else if(r)for(const u in r){const d=Jr(u);if(VA(d)){const h=r[u],f=o[d]=rt(h)||xt(h)?{type:h}:ls({},h),m=f.type;let p=!1,y=!0;if(rt(m))for(let v=0;v<m.length;++v){const _=m[v],b=xt(_)&&_.name;if(b==="Boolean"){p=!0;break}else b==="String"&&(y=!1)}else p=xt(m)&&m.name==="Boolean";f[0]=p,f[1]=y,(p||Qt(f,"default"))&&a.push(d)}}const c=[o,a];return $t(n)&&i.set(n,c),c}function VA(n){return n[0]!=="$"&&!Nm(n)}const WO=n=>n[0]==="_"||n==="$stable",SE=n=>rt(n)?n.map(wa):[wa(n)],E6=(n,e,t)=>{if(e._n)return e;const i=pe((...s)=>SE(e(...s)),t);return i._c=!1,i},KO=(n,e,t)=>{const i=n._ctx;for(const s in n){if(WO(s))continue;const r=n[s];if(xt(r))e[s]=E6(s,r,i);else if(r!=null){const o=SE(r);e[s]=()=>o}}},YO=(n,e)=>{const t=SE(e);n.slots.default=()=>t},XO=(n,e,t)=>{for(const i in e)(t||i!=="_")&&(n[i]=e[i])},T6=(n,e,t)=>{const i=n.slots=HO();if(n.vnode.shapeFlag&32){const s=e._;s?(XO(i,e,t),t&&Zk(i,"_",s,!0)):KO(e,i)}else e&&YO(n,e)},A6=(n,e,t)=>{const{vnode:i,slots:s}=n;let r=!0,o=Mi;if(i.shapeFlag&32){const a=e._;a?t&&a===1?r=!1:XO(s,e,t):(r=!e.$stable,KO(e,s)),o=e}else e&&(YO(n,e),o={default:1});if(r)for(const a in s)!WO(a)&&o[a]==null&&delete s[a]};function tC(n,e,t,i,s=!1){if(rt(n)){n.forEach((h,f)=>tC(h,e&&(rt(e)?e[f]:e),t,i,s));return}if(zm(i)&&!s)return;const r=i.shapeFlag&4?b1(i.component):i.el,o=s?null:r,{i:a,r:l}=n,c=e&&e.r,u=a.refs===Mi?a.refs={}:a.refs,d=a.setupState;if(c!=null&&c!==l&&(Rt(c)?(u[c]=null,Qt(d,c)&&(d[c]=null)):Gn(c)&&(c.value=null)),xt(l))Gc(l,a,12,[o,u]);else{const h=Rt(l),f=Gn(l);if(h||f){const m=()=>{if(n.f){const p=h?Qt(d,l)?d[l]:u[l]:l.value;s?rt(p)&&lE(p,r):rt(p)?p.includes(r)||p.push(r):h?(u[l]=[r],Qt(d,l)&&(d[l]=u[l])):(l.value=[r],n.k&&(u[n.k]=l.value))}else h?(u[l]=o,Qt(d,l)&&(d[l]=o)):f&&(l.value=o,n.k&&(u[n.k]=o))};o?(m.id=-1,wr(m,t)):m()}}}const jO=Symbol("_vte"),I6=n=>n.__isTeleport,$m=n=>n&&(n.disabled||n.disabled===""),$A=n=>typeof SVGElement<"u"&&n instanceof SVGElement,GA=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,nC=(n,e)=>{const t=n&&n.to;return Rt(t)?e?e(t):null:t},R6={name:"Teleport",__isTeleport:!0,process(n,e,t,i,s,r,o,a,l,c){const{mc:u,pc:d,pbc:h,o:{insert:f,querySelector:m,createText:p,createComment:y}}=c,v=$m(e.props);let{shapeFlag:_,children:b,dynamicChildren:w}=e;if(n==null){const x=e.el=p(""),S=e.anchor=p("");f(x,t,i),f(S,t,i);const C=e.target=nC(e.props,m),T=ZO(C,e,p,f);C&&(o==="svg"||$A(C)?o="svg":(o==="mathml"||GA(C))&&(o="mathml"));const M=(E,A)=>{_&16&&u(b,E,A,s,r,o,a,l)};v?M(t,S):C&&M(C,T)}else{e.el=n.el,e.targetStart=n.targetStart;const x=e.anchor=n.anchor,S=e.target=n.target,C=e.targetAnchor=n.targetAnchor,T=$m(n.props),M=T?t:S,E=T?x:C;if(o==="svg"||$A(S)?o="svg":(o==="mathml"||GA(S))&&(o="mathml"),w?(h(n.dynamicChildren,w,M,s,r,o,a),CE(n,e,!0)):l||d(n,e,M,E,s,r,o,a,!1),v)T?e.props&&n.props&&e.props.to!==n.props.to&&(e.props.to=n.props.to):y0(e,t,x,c,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const A=e.target=nC(e.props,m);A&&y0(e,A,null,c,0)}else T&&y0(e,S,C,c,1)}qO(e)},remove(n,e,t,{um:i,o:{remove:s}},r){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:u,target:d,props:h}=n;if(d&&(s(c),s(u)),r&&s(l),o&16){const f=r||!$m(h);for(let m=0;m<a.length;m++){const p=a[m];i(p,e,t,f,!!p.dynamicChildren)}}},move:y0,hydrate:P6};function y0(n,e,t,{o:{insert:i},m:s},r=2){r===0&&i(n.targetAnchor,e,t);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=n,d=r===2;if(d&&i(o,e,t),(!d||$m(u))&&l&16)for(let h=0;h<c.length;h++)s(c[h],e,t,2);d&&i(a,e,t)}function P6(n,e,t,i,s,r,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:u}},d){const h=e.target=nC(e.props,l);if(h){const f=h._lpa||h.firstChild;if(e.shapeFlag&16)if($m(e.props))e.anchor=d(o(n),e,a(n),t,i,s,r),e.targetStart=f,e.targetAnchor=f&&o(f);else{e.anchor=o(n);let m=f;for(;m;){if(m&&m.nodeType===8){if(m.data==="teleport start anchor")e.targetStart=m;else if(m.data==="teleport anchor"){e.targetAnchor=m,h._lpa=e.targetAnchor&&o(e.targetAnchor);break}}m=o(m)}e.targetAnchor||ZO(h,e,u,c),d(f&&o(f),e,h,t,i,s,r)}qO(e)}return e.anchor&&o(e.anchor)}const Sp=R6;function qO(n){const e=n.ctx;if(e&&e.ut){let t=n.children[0].el;for(;t&&t!==n.targetAnchor;)t.nodeType===1&&t.setAttribute("data-v-owner",e.uid),t=t.nextSibling;e.ut()}}function ZO(n,e,t,i){const s=e.targetStart=t(""),r=e.targetAnchor=t("");return s[jO]=r,n&&(i(s,n),i(r,n)),r}const wr=K6;function L6(n){return k6(n)}function k6(n,e){const t=Jk();t.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:f=mn,insertStaticContent:m}=n,p=(j,ie,ve,ye=null,me=null,be=null,Pe=void 0,Z=null,$=!!ie.dynamicChildren)=>{if(j===ie)return;j&&!Zu(j,ie)&&(ye=xe(j),ne(j,me,be,!0),j=null),ie.patchFlag===-2&&($=!1,ie.dynamicChildren=null);const{type:de,ref:Ae,shapeFlag:De}=ie;switch(de){case Cp:y(j,ie,ve,ye);break;case Es:v(j,ie,ve,ye);break;case Ww:j==null&&_(ie,ve,ye,Pe);break;case mt:I(j,ie,ve,ye,me,be,Pe,Z,$);break;default:De&1?x(j,ie,ve,ye,me,be,Pe,Z,$):De&6?B(j,ie,ve,ye,me,be,Pe,Z,$):(De&64||De&128)&&de.process(j,ie,ve,ye,me,be,Pe,Z,$,Ce)}Ae!=null&&me&&tC(Ae,j&&j.ref,be,ie||j,!ie)},y=(j,ie,ve,ye)=>{if(j==null)i(ie.el=a(ie.children),ve,ye);else{const me=ie.el=j.el;ie.children!==j.children&&c(me,ie.children)}},v=(j,ie,ve,ye)=>{j==null?i(ie.el=l(ie.children||""),ve,ye):ie.el=j.el},_=(j,ie,ve,ye)=>{[j.el,j.anchor]=m(j.children,ie,ve,ye,j.el,j.anchor)},b=({el:j,anchor:ie},ve,ye)=>{let me;for(;j&&j!==ie;)me=h(j),i(j,ve,ye),j=me;i(ie,ve,ye)},w=({el:j,anchor:ie})=>{let ve;for(;j&&j!==ie;)ve=h(j),s(j),j=ve;s(ie)},x=(j,ie,ve,ye,me,be,Pe,Z,$)=>{ie.type==="svg"?Pe="svg":ie.type==="math"&&(Pe="mathml"),j==null?S(ie,ve,ye,me,be,Pe,Z,$):M(j,ie,me,be,Pe,Z,$)},S=(j,ie,ve,ye,me,be,Pe,Z)=>{let $,de;const{props:Ae,shapeFlag:De,transition:fe,dirs:Ge}=j;if($=j.el=o(j.type,be,Ae&&Ae.is,Ae),De&8?u($,j.children):De&16&&T(j.children,$,null,ye,me,$w(j,be),Pe,Z),Ge&&wu(j,null,ye,"created"),C($,j,j.scopeId,Pe,ye),Ae){for(const je in Ae)je!=="value"&&!Nm(je)&&r($,je,null,Ae[je],be,ye);"value"in Ae&&r($,"value",null,Ae.value,be),(de=Ae.onVnodeBeforeMount)&&ma(de,ye,j)}Ge&&wu(j,null,ye,"beforeMount");const We=O6(me,fe);We&&fe.beforeEnter($),i($,ie,ve),((de=Ae&&Ae.onVnodeMounted)||We||Ge)&&wr(()=>{de&&ma(de,ye,j),We&&fe.enter($),Ge&&wu(j,null,ye,"mounted")},me)},C=(j,ie,ve,ye,me)=>{if(ve&&f(j,ve),ye)for(let be=0;be<ye.length;be++)f(j,ye[be]);if(me){let be=me.subTree;if(ie===be){const Pe=me.vnode;C(j,Pe,Pe.scopeId,Pe.slotScopeIds,me.parent)}}},T=(j,ie,ve,ye,me,be,Pe,Z,$=0)=>{for(let de=$;de<j.length;de++){const Ae=j[de]=Z?Tc(j[de]):wa(j[de]);p(null,Ae,ie,ve,ye,me,be,Pe,Z)}},M=(j,ie,ve,ye,me,be,Pe)=>{const Z=ie.el=j.el;let{patchFlag:$,dynamicChildren:de,dirs:Ae}=ie;$|=j.patchFlag&16;const De=j.props||Mi,fe=ie.props||Mi;let Ge;if(ve&&xu(ve,!1),(Ge=fe.onVnodeBeforeUpdate)&&ma(Ge,ve,ie,j),Ae&&wu(ie,j,ve,"beforeUpdate"),ve&&xu(ve,!0),(De.innerHTML&&fe.innerHTML==null||De.textContent&&fe.textContent==null)&&u(Z,""),de?E(j.dynamicChildren,de,Z,ve,ye,$w(ie,me),be):Pe||D(j,ie,Z,null,ve,ye,$w(ie,me),be,!1),$>0){if($&16)A(Z,De,fe,ve,me);else if($&2&&De.class!==fe.class&&r(Z,"class",null,fe.class,me),$&4&&r(Z,"style",De.style,fe.style,me),$&8){const We=ie.dynamicProps;for(let je=0;je<We.length;je++){const at=We[je],Ue=De[at],qe=fe[at];(qe!==Ue||at==="value")&&r(Z,at,Ue,qe,me,ve)}}$&1&&j.children!==ie.children&&u(Z,ie.children)}else!Pe&&de==null&&A(Z,De,fe,ve,me);((Ge=fe.onVnodeUpdated)||Ae)&&wr(()=>{Ge&&ma(Ge,ve,ie,j),Ae&&wu(ie,j,ve,"updated")},ye)},E=(j,ie,ve,ye,me,be,Pe)=>{for(let Z=0;Z<ie.length;Z++){const $=j[Z],de=ie[Z],Ae=$.el&&($.type===mt||!Zu($,de)||$.shapeFlag&70)?d($.el):ve;p($,de,Ae,null,ye,me,be,Pe,!0)}},A=(j,ie,ve,ye,me)=>{if(ie!==ve){if(ie!==Mi)for(const be in ie)!Nm(be)&&!(be in ve)&&r(j,be,ie[be],null,me,ye);for(const be in ve){if(Nm(be))continue;const Pe=ve[be],Z=ie[be];Pe!==Z&&be!=="value"&&r(j,be,Z,Pe,me,ye)}"value"in ve&&r(j,"value",ie.value,ve.value,me)}},I=(j,ie,ve,ye,me,be,Pe,Z,$)=>{const de=ie.el=j?j.el:a(""),Ae=ie.anchor=j?j.anchor:a("");let{patchFlag:De,dynamicChildren:fe,slotScopeIds:Ge}=ie;Ge&&(Z=Z?Z.concat(Ge):Ge),j==null?(i(de,ve,ye),i(Ae,ve,ye),T(ie.children||[],ve,Ae,me,be,Pe,Z,$)):De>0&&De&64&&fe&&j.dynamicChildren?(E(j.dynamicChildren,fe,ve,me,be,Pe,Z),(ie.key!=null||me&&ie===me.subTree)&&CE(j,ie,!0)):D(j,ie,ve,Ae,me,be,Pe,Z,$)},B=(j,ie,ve,ye,me,be,Pe,Z,$)=>{ie.slotScopeIds=Z,j==null?ie.shapeFlag&512?me.ctx.activate(ie,ve,ye,Pe,$):F(ie,ve,ye,me,be,Pe,$):U(j,ie,$)},F=(j,ie,ve,ye,me,be,Pe)=>{const Z=j.component=Z6(j,ye,me);if(Rv(j)&&(Z.ctx.renderer=Ce),J6(Z,!1,Pe),Z.asyncDep){if(me&&me.registerDep(Z,P,Pe),!j.el){const $=Z.subTree=le(Es);v(null,$,ie,ve)}}else P(Z,j,ie,ve,me,be,Pe)},U=(j,ie,ve)=>{const ye=ie.component=j.component;if($6(j,ie,ve))if(ye.asyncDep&&!ye.asyncResolved){O(ye,ie,ve);return}else ye.next=ie,n6(ye.update),ye.effect.dirty=!0,ye.update();else ie.el=j.el,ye.vnode=ie},P=(j,ie,ve,ye,me,be,Pe)=>{const Z=()=>{if(j.isMounted){let{next:Ae,bu:De,u:fe,parent:Ge,vnode:We}=j;{const Fe=JO(j);if(Fe){Ae&&(Ae.el=We.el,O(j,Ae,Pe)),Fe.asyncDep.then(()=>{j.isUnmounted||Z()});return}}let je=Ae,at;xu(j,!1),Ae?(Ae.el=We.el,O(j,Ae,Pe)):Ae=We,De&&qy(De),(at=Ae.props&&Ae.props.onVnodeBeforeUpdate)&&ma(at,Ge,Ae,We),xu(j,!0);const Ue=Gw(j),qe=j.subTree;j.subTree=Ue,p(qe,Ue,d(qe.el),xe(qe),j,me,be),Ae.el=Ue.el,je===null&&G6(j,Ue.el),fe&&wr(fe,me),(at=Ae.props&&Ae.props.onVnodeUpdated)&&wr(()=>ma(at,Ge,Ae,We),me)}else{let Ae;const{el:De,props:fe}=ie,{bm:Ge,m:We,parent:je}=j,at=zm(ie);if(xu(j,!1),Ge&&qy(Ge),!at&&(Ae=fe&&fe.onVnodeBeforeMount)&&ma(Ae,je,ie),xu(j,!0),De&&K){const Ue=()=>{j.subTree=Gw(j),K(De,j.subTree,j,me,null)};at?ie.type.__asyncLoader().then(()=>!j.isUnmounted&&Ue()):Ue()}else{const Ue=j.subTree=Gw(j);p(null,Ue,ve,ye,j,me,be),ie.el=Ue.el}if(We&&wr(We,me),!at&&(Ae=fe&&fe.onVnodeMounted)){const Ue=ie;wr(()=>ma(Ae,je,Ue),me)}(ie.shapeFlag&256||je&&zm(je.vnode)&&je.vnode.shapeFlag&256)&&j.a&&wr(j.a,me),j.isMounted=!0,ie=ve=ye=null}},$=j.effect=new uE(Z,mn,()=>p1(de),j.scope),de=j.update=()=>{$.dirty&&$.run()};de.i=j,de.id=j.uid,xu(j,!0),de()},O=(j,ie,ve)=>{ie.component=j;const ye=j.vnode.props;j.vnode=ie,j.next=null,C6(j,ie.props,ye,ve),A6(j,ie.children,ve),du(),DA(j),hu()},D=(j,ie,ve,ye,me,be,Pe,Z,$=!1)=>{const de=j&&j.children,Ae=j?j.shapeFlag:0,De=ie.children,{patchFlag:fe,shapeFlag:Ge}=ie;if(fe>0){if(fe&128){H(de,De,ve,ye,me,be,Pe,Z,$);return}else if(fe&256){L(de,De,ve,ye,me,be,Pe,Z,$);return}}Ge&8?(Ae&16&&re(de,me,be),De!==de&&u(ve,De)):Ae&16?Ge&16?H(de,De,ve,ye,me,be,Pe,Z,$):re(de,me,be,!0):(Ae&8&&u(ve,""),Ge&16&&T(De,ve,ye,me,be,Pe,Z,$))},L=(j,ie,ve,ye,me,be,Pe,Z,$)=>{j=j||Cf,ie=ie||Cf;const de=j.length,Ae=ie.length,De=Math.min(de,Ae);let fe;for(fe=0;fe<De;fe++){const Ge=ie[fe]=$?Tc(ie[fe]):wa(ie[fe]);p(j[fe],Ge,ve,null,me,be,Pe,Z,$)}de>Ae?re(j,me,be,!0,!1,De):T(ie,ve,ye,me,be,Pe,Z,$,De)},H=(j,ie,ve,ye,me,be,Pe,Z,$)=>{let de=0;const Ae=ie.length;let De=j.length-1,fe=Ae-1;for(;de<=De&&de<=fe;){const Ge=j[de],We=ie[de]=$?Tc(ie[de]):wa(ie[de]);if(Zu(Ge,We))p(Ge,We,ve,null,me,be,Pe,Z,$);else break;de++}for(;de<=De&&de<=fe;){const Ge=j[De],We=ie[fe]=$?Tc(ie[fe]):wa(ie[fe]);if(Zu(Ge,We))p(Ge,We,ve,null,me,be,Pe,Z,$);else break;De--,fe--}if(de>De){if(de<=fe){const Ge=fe+1,We=Ge<Ae?ie[Ge].el:ye;for(;de<=fe;)p(null,ie[de]=$?Tc(ie[de]):wa(ie[de]),ve,We,me,be,Pe,Z,$),de++}}else if(de>fe)for(;de<=De;)ne(j[de],me,be,!0),de++;else{const Ge=de,We=de,je=new Map;for(de=We;de<=fe;de++){const Ke=ie[de]=$?Tc(ie[de]):wa(ie[de]);Ke.key!=null&&je.set(Ke.key,de)}let at,Ue=0;const qe=fe-We+1;let Fe=!1,Ie=0;const oe=new Array(qe);for(de=0;de<qe;de++)oe[de]=0;for(de=Ge;de<=De;de++){const Ke=j[de];if(Ue>=qe){ne(Ke,me,be,!0);continue}let ft;if(Ke.key!=null)ft=je.get(Ke.key);else for(at=We;at<=fe;at++)if(oe[at-We]===0&&Zu(Ke,ie[at])){ft=at;break}ft===void 0?ne(Ke,me,be,!0):(oe[ft-We]=de+1,ft>=Ie?Ie=ft:Fe=!0,p(Ke,ie[ft],ve,null,me,be,Pe,Z,$),Ue++)}const Le=Fe?D6(oe):Cf;for(at=Le.length-1,de=qe-1;de>=0;de--){const Ke=We+de,ft=ie[Ke],Q=Ke+1<Ae?ie[Ke+1].el:ye;oe[de]===0?p(null,ft,ve,Q,me,be,Pe,Z,$):Fe&&(at<0||de!==Le[at]?X(ft,ve,Q,2):at--)}}},X=(j,ie,ve,ye,me=null)=>{const{el:be,type:Pe,transition:Z,children:$,shapeFlag:de}=j;if(de&6){X(j.component.subTree,ie,ve,ye);return}if(de&128){j.suspense.move(ie,ve,ye);return}if(de&64){Pe.move(j,ie,ve,Ce);return}if(Pe===mt){i(be,ie,ve);for(let De=0;De<$.length;De++)X($[De],ie,ve,ye);i(j.anchor,ie,ve);return}if(Pe===Ww){b(j,ie,ve);return}if(ye!==2&&de&1&&Z)if(ye===0)Z.beforeEnter(be),i(be,ie,ve),wr(()=>Z.enter(be),me);else{const{leave:De,delayLeave:fe,afterLeave:Ge}=Z,We=()=>i(be,ie,ve),je=()=>{De(be,()=>{We(),Ge&&Ge()})};fe?fe(be,We,je):je()}else i(be,ie,ve)},ne=(j,ie,ve,ye=!1,me=!1)=>{const{type:be,props:Pe,ref:Z,children:$,dynamicChildren:de,shapeFlag:Ae,patchFlag:De,dirs:fe,cacheIndex:Ge}=j;if(De===-2&&(me=!1),Z!=null&&tC(Z,null,ve,j,!0),Ge!=null&&(ie.renderCache[Ge]=void 0),Ae&256){ie.ctx.deactivate(j);return}const We=Ae&1&&fe,je=!zm(j);let at;if(je&&(at=Pe&&Pe.onVnodeBeforeUnmount)&&ma(at,ie,j),Ae&6)_e(j.component,ve,ye);else{if(Ae&128){j.suspense.unmount(ve,ye);return}We&&wu(j,null,ie,"beforeUnmount"),Ae&64?j.type.remove(j,ie,ve,Ce,ye):de&&!de.hasOnce&&(be!==mt||De>0&&De&64)?re(de,ie,ve,!1,!0):(be===mt&&De&384||!me&&Ae&16)&&re($,ie,ve),ye&&ce(j)}(je&&(at=Pe&&Pe.onVnodeUnmounted)||We)&&wr(()=>{at&&ma(at,ie,j),We&&wu(j,null,ie,"unmounted")},ve)},ce=j=>{const{type:ie,el:ve,anchor:ye,transition:me}=j;if(ie===mt){ae(ve,ye);return}if(ie===Ww){w(j);return}const be=()=>{s(ve),me&&!me.persisted&&me.afterLeave&&me.afterLeave()};if(j.shapeFlag&1&&me&&!me.persisted){const{leave:Pe,delayLeave:Z}=me,$=()=>Pe(ve,be);Z?Z(j.el,be,$):$()}else be()},ae=(j,ie)=>{let ve;for(;j!==ie;)ve=h(j),s(j),j=ve;s(ie)},_e=(j,ie,ve)=>{const{bum:ye,scope:me,update:be,subTree:Pe,um:Z,m:$,a:de}=j;WA($),WA(de),ye&&qy(ye),me.stop(),be&&(be.active=!1,ne(Pe,j,ie,ve)),Z&&wr(Z,ie),wr(()=>{j.isUnmounted=!0},ie),ie&&ie.pendingBranch&&!ie.isUnmounted&&j.asyncDep&&!j.asyncResolved&&j.suspenseId===ie.pendingId&&(ie.deps--,ie.deps===0&&ie.resolve())},re=(j,ie,ve,ye=!1,me=!1,be=0)=>{for(let Pe=be;Pe<j.length;Pe++)ne(j[Pe],ie,ve,ye,me)},xe=j=>{if(j.shapeFlag&6)return xe(j.component.subTree);if(j.shapeFlag&128)return j.suspense.next();const ie=h(j.anchor||j.el),ve=ie&&ie[jO];return ve?h(ve):ie};let he=!1;const Te=(j,ie,ve)=>{j==null?ie._vnode&&ne(ie._vnode,null,null,!0):p(ie._vnode||null,j,ie,null,null,null,ve),he||(he=!0,DA(),MO(),he=!1),ie._vnode=j},Ce={p,um:ne,m:X,r:ce,mt:F,mc:T,pc:D,pbc:E,n:xe,o:n};let we,K;return{render:Te,hydrate:we,createApp:x6(Te,we)}}function $w({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function xu({effect:n,update:e},t){n.allowRecurse=e.allowRecurse=t}function O6(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function CE(n,e,t=!1){const i=n.children,s=e.children;if(rt(i)&&rt(s))for(let r=0;r<i.length;r++){const o=i[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=Tc(s[r]),a.el=o.el),!t&&a.patchFlag!==-2&&CE(o,a)),a.type===Cp&&(a.el=o.el)}}function D6(n){const e=n.slice(),t=[0];let i,s,r,o,a;const l=n.length;for(i=0;i<l;i++){const c=n[i];if(c!==0){if(s=t[t.length-1],n[s]<c){e[i]=s,t.push(i);continue}for(r=0,o=t.length-1;r<o;)a=r+o>>1,n[t[a]]<c?r=a+1:o=a;c<n[t[r]]&&(r>0&&(e[i]=t[r-1]),t[r]=i)}}for(r=t.length,o=t[r-1];r-- >0;)t[r]=o,o=e[o];return t}function JO(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:JO(e)}function WA(n){if(n)for(let e=0;e<n.length;e++)n[e].active=!1}const N6=Symbol.for("v-scx"),F6=()=>ct(N6);function Is(n,e){return ME(n,null,e)}const _0={};function ze(n,e,t){return ME(n,e,t)}function ME(n,e,{immediate:t,deep:i,flush:s,once:r,onTrack:o,onTrigger:a}=Mi){if(e&&r){const S=e;e=(...C)=>{S(...C),x()}}const l=ys,c=S=>i===!0?S:Ic(S,i===!1?1:void 0);let u,d=!1,h=!1;if(Gn(n)?(u=()=>n.value,d=Vf(n)):Bm(n)?(u=()=>c(n),d=!0):rt(n)?(h=!0,d=n.some(S=>Bm(S)||Vf(S)),u=()=>n.map(S=>{if(Gn(S))return S.value;if(Bm(S))return c(S);if(xt(S))return Gc(S,l,2)})):xt(n)?e?u=()=>Gc(n,l,2):u=()=>(f&&f(),Ao(n,l,3,[m])):u=mn,e&&i){const S=u;u=()=>Ic(S())}let f,m=S=>{f=b.onStop=()=>{Gc(S,l,4),f=b.onStop=void 0}},p;if(Lv)if(m=mn,e?t&&Ao(e,l,3,[u(),h?[]:void 0,m]):u(),s==="sync"){const S=F6();p=S.__watcherHandles||(S.__watcherHandles=[])}else return mn;let y=h?new Array(n.length).fill(_0):_0;const v=()=>{if(!(!b.active||!b.dirty))if(e){const S=b.run();(i||d||(h?S.some((C,T)=>jc(C,y[T])):jc(S,y)))&&(f&&f(),Ao(e,l,3,[S,y===_0?void 0:h&&y[0]===_0?[]:y,m]),y=S)}else b.run()};v.allowRecurse=!!e;let _;s==="sync"?_=v:s==="post"?_=()=>wr(v,l&&l.suspense):(v.pre=!0,l&&(v.id=l.uid),_=()=>p1(v));const b=new uE(u,mn,_),w=sO(),x=()=>{b.stop(),w&&lE(w.effects,b)};return e?t?v():y=b.run():s==="post"?wr(b.run.bind(b),l&&l.suspense):b.run(),p&&p.push(x),x}function B6(n,e,t){const i=this.proxy,s=Rt(n)?n.includes(".")?QO(i,n):()=>i[n]:n.bind(i,i);let r;xt(e)?r=e:(r=e.handler,t=e);const o=Pv(this),a=ME(s,r.bind(i),t);return o(),a}function QO(n,e){const t=e.split(".");return()=>{let i=n;for(let s=0;s<t.length&&i;s++)i=i[t[s]];return i}}function Ic(n,e=1/0,t){if(e<=0||!$t(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,Gn(n))Ic(n.value,e,t);else if(rt(n))for(let i=0;i<n.length;i++)Ic(n[i],e,t);else if(d1(n)||Mf(n))n.forEach(i=>{Ic(i,e,t)});else if(P_(n)){for(const i in n)Ic(n[i],e,t);for(const i of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,i)&&Ic(n[i],e,t)}return n}const U6=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${Jr(e)}Modifiers`]||n[`${Gl(e)}Modifiers`];function z6(n,e,...t){if(n.isUnmounted)return;const i=n.vnode.props||Mi;let s=t;const r=e.startsWith("update:"),o=r&&U6(i,e.slice(7));o&&(o.trim&&(s=t.map(u=>Rt(u)?u.trim():u)),o.number&&(s=t.map(KS)));let a,l=i[a=Fm(e)]||i[a=Fm(Jr(e))];!l&&r&&(l=i[a=Fm(Gl(e))]),l&&Ao(l,n,6,s);const c=i[a+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,Ao(c,n,6,s)}}function eD(n,e,t=!1){const i=e.emitsCache,s=i.get(n);if(s!==void 0)return s;const r=n.emits;let o={},a=!1;if(!xt(n)){const l=c=>{const u=eD(c,e,!0);u&&(a=!0,ls(o,u))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!r&&!a?($t(n)&&i.set(n,null),null):(rt(r)?r.forEach(l=>o[l]=null):ls(o,r),$t(n)&&i.set(n,o),o)}function _1(n,e){return!n||!u1(e)?!1:(e=e.slice(2).replace(/Once$/,""),Qt(n,e[0].toLowerCase()+e.slice(1))||Qt(n,Gl(e))||Qt(n,e))}function Gw(n){const{type:e,vnode:t,proxy:i,withProxy:s,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:d,data:h,setupState:f,ctx:m,inheritAttrs:p}=n,y=k_(n);let v,_;try{if(t.shapeFlag&4){const w=s||i,x=w;v=wa(c.call(x,w,u,d,f,h,m)),_=a}else{const w=e;v=wa(w.length>1?w(d,{attrs:a,slots:o,emit:l}):w(d,null)),_=e.props?a:H6(a)}}catch(w){Gm.length=0,Iv(w,n,1),v=le(Es)}let b=v;if(_&&p!==!1){const w=Object.keys(_),{shapeFlag:x}=b;w.length&&x&7&&(r&&w.some(aE)&&(_=V6(_,r)),b=Rl(b,_,!1,!0))}return t.dirs&&(b=Rl(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(t.dirs):t.dirs),t.transition&&(b.transition=t.transition),v=b,k_(y),v}const H6=n=>{let e;for(const t in n)(t==="class"||t==="style"||u1(t))&&((e||(e={}))[t]=n[t]);return e},V6=(n,e)=>{const t={};for(const i in n)(!aE(i)||!(i.slice(9)in e))&&(t[i]=n[i]);return t};function $6(n,e,t){const{props:i,children:s,component:r}=n,{props:o,children:a,patchFlag:l}=e,c=r.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return i?KA(i,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(o[h]!==i[h]&&!_1(c,h))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?KA(i,o,c):!0:!!o;return!1}function KA(n,e,t){const i=Object.keys(e);if(i.length!==Object.keys(n).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(e[r]!==n[r]&&!_1(t,r))return!0}return!1}function G6({vnode:n,parent:e},t){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===n&&(i.el=n.el),i===n)(n=e.vnode).el=t,e=e.parent;else break}}const W6=n=>n.__isSuspense;function K6(n,e){e&&e.pendingBranch?rt(n)?e.effects.push(...n):e.effects.push(n):i6(n)}const mt=Symbol.for("v-fgt"),Cp=Symbol.for("v-txt"),Es=Symbol.for("v-cmt"),Ww=Symbol.for("v-stc"),Gm=[];let Gr=null;function k(n=!1){Gm.push(Gr=n?null:[])}function Y6(){Gm.pop(),Gr=Gm[Gm.length-1]||null}let Sg=1;function YA(n){Sg+=n,n<0&&Gr&&(Gr.hasOnce=!0)}function tD(n){return n.dynamicChildren=Sg>0?Gr||Cf:null,Y6(),Sg>0&&Gr&&Gr.push(n),n}function Y(n,e,t,i,s,r){return tD(te(n,e,t,i,s,r,!0))}function Re(n,e,t,i,s){return tD(le(n,e,t,i,s,!0))}function Jn(n){return n?n.__v_isVNode===!0:!1}function Zu(n,e){return n.type===e.type&&n.key===e.key}const nD=({key:n})=>n??null,Zy=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?Rt(n)||Gn(n)||xt(n)?{i:_s,r:n,k:e,f:!!t}:n:null);function te(n,e=null,t=null,i=0,s=null,r=n===mt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&nD(e),ref:e&&Zy(e),scopeId:m1,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:_s};return a?(EE(l,t),r&128&&n.normalize(l)):t&&(l.shapeFlag|=Rt(t)?8:16),Sg>0&&!o&&Gr&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Gr.push(l),l}const le=X6;function X6(n,e=null,t=null,i=0,s=null,r=!1){if((!n||n===DO)&&(n=Es),Jn(n)){const a=Rl(n,e,!0);return t&&EE(a,t),Sg>0&&!r&&Gr&&(a.shapeFlag&6?Gr[Gr.indexOf(n)]=a:Gr.push(a)),a.patchFlag=-2,a}if(nV(n)&&(n=n.__vccOpts),e){e=Gf(e);let{class:a,style:l}=e;a&&!Rt(a)&&(e.class=z(a)),$t(l)&&(yO(l)&&!rt(l)&&(l=ls({},l)),e.style=pt(l))}const o=Rt(n)?1:W6(n)?128:I6(n)?64:$t(n)?4:xt(n)?2:0;return te(n,e,t,i,s,o,r,!0)}function Gf(n){return n?yO(n)||VO(n)?ls({},n):n:null}function Rl(n,e,t=!1,i=!1){const{props:s,ref:r,patchFlag:o,children:a,transition:l}=n,c=e?Kt(s||{},e):s,u={__v_isVNode:!0,__v_skip:!0,type:n.type,props:c,key:c&&nD(c),ref:e&&e.ref?t&&r?rt(r)?r.concat(Zy(e)):[r,Zy(e)]:Zy(e):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==mt?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Rl(n.ssContent),ssFallback:n.ssFallback&&Rl(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&i&&$f(u,l.clone(u)),u}function Yt(n=" ",e=0){return le(Cp,null,n,e)}function Ee(n="",e=!1){return e?(k(),Re(Es,null,n)):le(Es,null,n)}function wa(n){return n==null||typeof n=="boolean"?le(Es):rt(n)?le(mt,null,n.slice()):typeof n=="object"?Tc(n):le(Cp,null,String(n))}function Tc(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Rl(n)}function EE(n,e){let t=0;const{shapeFlag:i}=n;if(e==null)e=null;else if(rt(e))t=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),EE(n,s()),s._c&&(s._d=!0));return}else{t=32;const s=e._;!s&&!VO(e)?e._ctx=_s:s===3&&_s&&(_s.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else xt(e)?(e={default:e,_ctx:_s},t=32):(e=String(e),i&64?(t=16,e=[Yt(e)]):t=8);n.children=e,n.shapeFlag|=t}function Kt(...n){const e={};for(let t=0;t<n.length;t++){const i=n[t];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=z([e.class,i.class]));else if(s==="style")e.style=pt([e.style,i.style]);else if(u1(s)){const r=e[s],o=i[s];o&&r!==o&&!(rt(r)&&r.includes(o))&&(e[s]=r?[].concat(r,o):o)}else s!==""&&(e[s]=i[s])}return e}function ma(n,e,t,i=null){Ao(n,e,7,[t,i])}const j6=UO();let q6=0;function Z6(n,e,t){const i=n.type,s=(e?e.appContext:n.appContext)||j6,r={uid:q6++,vnode:n,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new iO(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:GO(i,s),emitsOptions:eD(i,s),emit:null,emitted:null,propsDefaults:Mi,inheritAttrs:i.inheritAttrs,ctx:Mi,data:Mi,props:Mi,attrs:Mi,slots:Mi,refs:Mi,setupState:Mi,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=z6.bind(null,r),n.ce&&n.ce(r),r}let ys=null;const zt=()=>ys||_s;let D_,iC;{const n=Jk(),e=(t,i)=>{let s;return(s=n[t])||(s=n[t]=[]),s.push(i),r=>{s.length>1?s.forEach(o=>o(r)):s[0](r)}};D_=e("__VUE_INSTANCE_SETTERS__",t=>ys=t),iC=e("__VUE_SSR_SETTERS__",t=>Lv=t)}const Pv=n=>{const e=ys;return D_(n),n.scope.on(),()=>{n.scope.off(),D_(e)}},XA=()=>{ys&&ys.scope.off(),D_(null)};function iD(n){return n.vnode.shapeFlag&4}let Lv=!1;function J6(n,e=!1,t=!1){e&&iC(e);const{props:i,children:s}=n.vnode,r=iD(n);S6(n,i,r,e),T6(n,s,t);const o=r?Q6(n,e):void 0;return e&&iC(!1),o}function Q6(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,m6);const{setup:i}=t;if(i){const s=n.setupContext=i.length>1?rD(n):null,r=Pv(n);du();const o=Gc(i,n,0,[n.props,s]);if(hu(),r(),yg(o)){if(o.then(XA,XA),e)return o.then(a=>{jA(n,a,e)}).catch(a=>{Iv(a,n,0)});n.asyncDep=o}else jA(n,o,e)}else sD(n,e)}function jA(n,e,t){xt(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:$t(e)&&(n.setupState=wO(e)),sD(n,t)}let qA;function sD(n,e,t){const i=n.type;if(!n.render){if(!e&&qA&&!i.render){const s=i.template||xE(n).template;if(s){const{isCustomElement:r,compilerOptions:o}=n.appContext.config,{delimiters:a,compilerOptions:l}=i,c=ls(ls({isCustomElement:r,delimiters:a},o),l);i.render=qA(s,c)}}n.render=i.render||mn}{const s=Pv(n);du();try{g6(n)}finally{hu(),s()}}}const eV={get(n,e){return Pr(n,"get",""),n[e]}};function rD(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,eV),slots:n.slots,emit:n.emit,expose:e}}function b1(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(wO(El(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in Hm)return Hm[t](n)},has(e,t){return t in e||t in Hm}})):n.proxy}function tV(n,e=!0){return xt(n)?n.displayName||n.name:n.name||e&&n.__name}function nV(n){return xt(n)&&"__vccOpts"in n}const R=(n,e)=>Y8(n,e,Lv);function _t(n,e,t){const i=arguments.length;return i===2?$t(e)&&!rt(e)?Jn(e)?le(n,null,[e]):le(n,e):le(n,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&Jn(t)&&(t=[t]),le(n,e,t))}const iV="3.4.36",sV=mn;/**
* @vue/runtime-dom v3.4.36
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const rV="http://www.w3.org/2000/svg",oV="http://www.w3.org/1998/Math/MathML",dl=typeof document<"u"?document:null,ZA=dl&&dl.createElement("template"),aV={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,i)=>{const s=e==="svg"?dl.createElementNS(rV,n):e==="mathml"?dl.createElementNS(oV,n):t?dl.createElement(n,{is:t}):dl.createElement(n);return n==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:n=>dl.createTextNode(n),createComment:n=>dl.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>dl.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,i,s,r){const o=t?t.previousSibling:e.lastChild;if(s&&(s===r||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),t),!(s===r||!(s=s.nextSibling)););else{ZA.innerHTML=i==="svg"?`<svg>${n}</svg>`:i==="mathml"?`<math>${n}</math>`:n;const a=ZA.content;if(i==="svg"||i==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},nc="transition",$p="animation",Wf=Symbol("_vtc"),ji=(n,{slots:e})=>_t(o6,aD(n),e);ji.displayName="Transition";const oD={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},lV=ji.props=ls({},AO,oD),Su=(n,e=[])=>{rt(n)?n.forEach(t=>t(...e)):n&&n(...e)},JA=n=>n?rt(n)?n.some(e=>e.length>1):n.length>1:!1;function aD(n){const e={};for(const I in n)I in oD||(e[I]=n[I]);if(n.css===!1)return e;const{name:t="v",type:i,duration:s,enterFromClass:r=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:l=r,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:d=`${t}-leave-from`,leaveActiveClass:h=`${t}-leave-active`,leaveToClass:f=`${t}-leave-to`}=n,m=cV(s),p=m&&m[0],y=m&&m[1],{onBeforeEnter:v,onEnter:_,onEnterCancelled:b,onLeave:w,onLeaveCancelled:x,onBeforeAppear:S=v,onAppear:C=_,onAppearCancelled:T=b}=e,M=(I,B,F)=>{_c(I,B?u:a),_c(I,B?c:o),F&&F()},E=(I,B)=>{I._isLeaving=!1,_c(I,d),_c(I,f),_c(I,h),B&&B()},A=I=>(B,F)=>{const U=I?C:_,P=()=>M(B,I,F);Su(U,[B,P]),QA(()=>{_c(B,I?l:r),cl(B,I?u:a),JA(U)||eI(B,i,p,P)})};return ls(e,{onBeforeEnter(I){Su(v,[I]),cl(I,r),cl(I,o)},onBeforeAppear(I){Su(S,[I]),cl(I,l),cl(I,c)},onEnter:A(!1),onAppear:A(!0),onLeave(I,B){I._isLeaving=!0;const F=()=>E(I,B);cl(I,d),cl(I,h),cD(),QA(()=>{I._isLeaving&&(_c(I,d),cl(I,f),JA(w)||eI(I,i,y,F))}),Su(w,[I,F])},onEnterCancelled(I){M(I,!1),Su(b,[I])},onAppearCancelled(I){M(I,!0),Su(T,[I])},onLeaveCancelled(I){E(I),Su(x,[I])}})}function cV(n){if(n==null)return null;if($t(n))return[Kw(n.enter),Kw(n.leave)];{const e=Kw(n);return[e,e]}}function Kw(n){return v8(n)}function cl(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[Wf]||(n[Wf]=new Set)).add(e)}function _c(n,e){e.split(/\s+/).forEach(i=>i&&n.classList.remove(i));const t=n[Wf];t&&(t.delete(e),t.size||(n[Wf]=void 0))}function QA(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let uV=0;function eI(n,e,t,i){const s=n._endId=++uV,r=()=>{s===n._endId&&i()};if(t)return setTimeout(r,t);const{type:o,timeout:a,propCount:l}=lD(n,e);if(!o)return i();const c=o+"end";let u=0;const d=()=>{n.removeEventListener(c,h),r()},h=f=>{f.target===n&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),n.addEventListener(c,h)}function lD(n,e){const t=window.getComputedStyle(n),i=m=>(t[m]||"").split(", "),s=i(`${nc}Delay`),r=i(`${nc}Duration`),o=tI(s,r),a=i(`${$p}Delay`),l=i(`${$p}Duration`),c=tI(a,l);let u=null,d=0,h=0;e===nc?o>0&&(u=nc,d=o,h=r.length):e===$p?c>0&&(u=$p,d=c,h=l.length):(d=Math.max(o,c),u=d>0?o>c?nc:$p:null,h=u?u===nc?r.length:l.length:0);const f=u===nc&&/\b(transform|all)(,|$)/.test(i(`${nc}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:f}}function tI(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,i)=>nI(t)+nI(n[i])))}function nI(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function cD(){return document.body.offsetHeight}function dV(n,e,t){const i=n[Wf];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const N_=Symbol("_vod"),uD=Symbol("_vsh"),an={beforeMount(n,{value:e},{transition:t}){n[N_]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):Gp(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:i}){!e!=!t&&(i?e?(i.beforeEnter(n),Gp(n,!0),i.enter(n)):i.leave(n,()=>{Gp(n,!1)}):Gp(n,e))},beforeUnmount(n,{value:e}){Gp(n,e)}};function Gp(n,e){n.style.display=e?n[N_]:"none",n[uD]=!e}const hV=Symbol(""),fV=/(^|;)\s*display\s*:/;function pV(n,e,t){const i=n.style,s=Rt(t);let r=!1;if(t&&!s){if(e)if(Rt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&Jy(i,a,"")}else for(const o in e)t[o]==null&&Jy(i,o,"");for(const o in t)o==="display"&&(r=!0),Jy(i,o,t[o])}else if(s){if(e!==t){const o=i[hV];o&&(t+=";"+o),i.cssText=t,r=fV.test(t)}}else e&&n.removeAttribute("style");N_ in n&&(n[N_]=r?i.display:"",n[uD]&&(i.display="none"))}const iI=/\s*!important$/;function Jy(n,e,t){if(rt(t))t.forEach(i=>Jy(n,e,i));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const i=mV(n,e);iI.test(t)?n.setProperty(Gl(i),t.replace(iI,""),"important"):n[i]=t}}const sI=["Webkit","Moz","ms"],Yw={};function mV(n,e){const t=Yw[e];if(t)return t;let i=Jr(e);if(i!=="filter"&&i in n)return Yw[e]=i;i=Av(i);for(let s=0;s<sI.length;s++){const r=sI[s]+i;if(r in n)return Yw[e]=r}return e}const rI="http://www.w3.org/1999/xlink";function oI(n,e,t,i,s,r=S8(e)){i&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(rI,e.slice(6,e.length)):n.setAttributeNS(rI,e,t):t==null||r&&!Qk(t)?n.removeAttribute(e):n.setAttribute(e,r?"":Ua(t)?String(t):t)}function gV(n,e,t,i){if(e==="innerHTML"||e==="textContent"){if(t==null)return;n[e]=t;return}const s=n.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const o=s==="OPTION"?n.getAttribute("value")||"":n.value,a=t==null?"":String(t);(o!==a||!("_value"in n))&&(n.value=a),t==null&&n.removeAttribute(e),n._value=t;return}let r=!1;if(t===""||t==null){const o=typeof n[e];o==="boolean"?t=Qk(t):t==null&&o==="string"?(t="",r=!0):o==="number"&&(t=0,r=!0)}try{n[e]=t}catch{}r&&n.removeAttribute(e)}function Rc(n,e,t,i){n.addEventListener(e,t,i)}function vV(n,e,t,i){n.removeEventListener(e,t,i)}const aI=Symbol("_vei");function yV(n,e,t,i,s=null){const r=n[aI]||(n[aI]={}),o=r[e];if(i&&o)o.value=i;else{const[a,l]=_V(e);if(i){const c=r[e]=xV(i,s);Rc(n,a,c,l)}else o&&(vV(n,a,o,l),r[e]=void 0)}}const lI=/(?:Once|Passive|Capture)$/;function _V(n){let e;if(lI.test(n)){e={};let i;for(;i=n.match(lI);)n=n.slice(0,n.length-i[0].length),e[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Gl(n.slice(2)),e]}let Xw=0;const bV=Promise.resolve(),wV=()=>Xw||(bV.then(()=>Xw=0),Xw=Date.now());function xV(n,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;Ao(SV(i,t.value),e,5,[i])};return t.value=n,t.attached=wV(),t}function SV(n,e){if(rt(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const cI=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,CV=(n,e,t,i,s,r)=>{const o=s==="svg";e==="class"?dV(n,i,o):e==="style"?pV(n,t,i):u1(e)?aE(e)||yV(n,e,t,i,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):MV(n,e,i,o))?(gV(n,e,i),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&oI(n,e,i,o,r,e!=="value")):(e==="true-value"?n._trueValue=i:e==="false-value"&&(n._falseValue=i),oI(n,e,i,o))};function MV(n,e,t,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in n&&cI(e)&&xt(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=n.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return cI(e)&&Rt(t)?!1:e in n}const dD=new WeakMap,hD=new WeakMap,F_=Symbol("_moveCb"),uI=Symbol("_enterCb"),fD={name:"TransitionGroup",props:ls({},lV,{tag:String,moveClass:String}),setup(n,{slots:e}){const t=zt(),i=TO();let s,r;return Kl(()=>{if(!s.length)return;const o=n.moveClass||`${n.name||"v"}-move`;if(!RV(s[0].el,t.vnode.el,o))return;s.forEach(TV),s.forEach(AV);const a=s.filter(IV);cD(),a.forEach(l=>{const c=l.el,u=c.style;cl(c,o),u.transform=u.webkitTransform=u.transitionDuration="";const d=c[F_]=h=>{h&&h.target!==c||(!h||/transform$/.test(h.propertyName))&&(c.removeEventListener("transitionend",d),c[F_]=null,_c(c,o))};c.addEventListener("transitionend",d)})}),()=>{const o=yn(n),a=aD(o);let l=o.tag||mt;if(s=[],r)for(let c=0;c<r.length;c++){const u=r[c];u.el&&u.el instanceof Element&&(s.push(u),$f(u,xg(u,a,i,t)),dD.set(u,u.el.getBoundingClientRect()))}r=e.default?_E(e.default()):[];for(let c=0;c<r.length;c++){const u=r[c];u.key!=null&&$f(u,xg(u,a,i,t))}return le(l,null,r)}}},EV=n=>delete n.mode;fD.props;const pD=fD;function TV(n){const e=n.el;e[F_]&&e[F_](),e[uI]&&e[uI]()}function AV(n){hD.set(n,n.el.getBoundingClientRect())}function IV(n){const e=dD.get(n),t=hD.get(n),i=e.left-t.left,s=e.top-t.top;if(i||s){const r=n.el.style;return r.transform=r.webkitTransform=`translate(${i}px,${s}px)`,r.transitionDuration="0s",n}}function RV(n,e,t){const i=n.cloneNode(),s=n[Wf];s&&s.forEach(a=>{a.split(/\s+/).forEach(l=>l&&i.classList.remove(l))}),t.split(/\s+/).forEach(a=>a&&i.classList.add(a)),i.style.display="none";const r=e.nodeType===1?e:e.parentNode;r.appendChild(i);const{hasTransform:o}=lD(i);return r.removeChild(i),o}const Kf=n=>{const e=n.props["onUpdate:modelValue"]||!1;return rt(e)?t=>qy(e,t):e};function PV(n){n.target.composing=!0}function dI(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Tl=Symbol("_assign"),TE={created(n,{modifiers:{lazy:e,trim:t,number:i}},s){n[Tl]=Kf(s);const r=i||s.props&&s.props.type==="number";Rc(n,e?"change":"input",o=>{if(o.target.composing)return;let a=n.value;t&&(a=a.trim()),r&&(a=KS(a)),n[Tl](a)}),t&&Rc(n,"change",()=>{n.value=n.value.trim()}),e||(Rc(n,"compositionstart",PV),Rc(n,"compositionend",dI),Rc(n,"change",dI))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:i,trim:s,number:r}},o){if(n[Tl]=Kf(o),n.composing)return;const a=(r||n.type==="number")&&!/^0\d/.test(n.value)?KS(n.value):n.value,l=e??"";a!==l&&(document.activeElement===n&&n.type!=="range"&&(i&&e===t||s&&n.value.trim()===l)||(n.value=l))}},B_={deep:!0,created(n,e,t){n[Tl]=Kf(t),Rc(n,"change",()=>{const i=n._modelValue,s=gD(n),r=n.checked,o=n[Tl];if(rt(i)){const a=eO(i,s),l=a!==-1;if(r&&!l)o(i.concat(s));else if(!r&&l){const c=[...i];c.splice(a,1),o(c)}}else if(d1(i)){const a=new Set(i);r?a.add(s):a.delete(s),o(a)}else o(vD(n,r))})},mounted:hI,beforeUpdate(n,e,t){n[Tl]=Kf(t),hI(n,e,t)}};function hI(n,{value:e,oldValue:t},i){n._modelValue=e,rt(e)?n.checked=eO(e,i.props.value)>-1:d1(e)?n.checked=e.has(i.props.value):e!==t&&(n.checked=Hf(e,vD(n,!0)))}const mD={created(n,{value:e},t){n.checked=Hf(e,t.props.value),n[Tl]=Kf(t),Rc(n,"change",()=>{n[Tl](gD(n))})},beforeUpdate(n,{value:e,oldValue:t},i){n[Tl]=Kf(i),e!==t&&(n.checked=Hf(e,i.props.value))}};function gD(n){return"_value"in n?n._value:n.value}function vD(n,e){const t=e?"_trueValue":"_falseValue";return t in n?n[t]:e}const LV=["ctrl","shift","alt","meta"],kV={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>LV.some(t=>n[`${t}Key`]&&!e.includes(t))},Tt=(n,e)=>{const t=n._withMods||(n._withMods={}),i=e.join(".");return t[i]||(t[i]=(s,...r)=>{for(let o=0;o<e.length;o++){const a=kV[e[o]];if(a&&a(s,e))return}return n(s,...r)})},OV={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},wn=(n,e)=>{const t=n._withKeys||(n._withKeys={}),i=e.join(".");return t[i]||(t[i]=s=>{if(!("key"in s))return;const r=Gl(s.key);if(e.some(o=>o===r||OV[o]===r))return n(s)})},DV=ls({patchProp:CV},aV);let fI;function yD(){return fI||(fI=L6(DV))}const qc=(...n)=>{yD().render(...n)},_D=(...n)=>{const e=yD().createApp(...n),{mount:t}=e;return e.mount=i=>{const s=FV(i);if(!s)return;const r=e._component;!xt(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.innerHTML="";const o=t(s,!1,NV(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function NV(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function FV(n){return Rt(n)?document.querySelector(n):n}const BV='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',UV=n=>getComputedStyle(n).position==="fixed"?!1:n.offsetParent!==null,pI=n=>Array.from(n.querySelectorAll(BV)).filter(e=>zV(e)&&UV(e)),zV=n=>{if(n.tabIndex>0||n.tabIndex===0&&n.getAttribute("tabIndex")!==null)return!0;if(n.disabled)return!1;switch(n.nodeName){case"A":return!!n.href&&n.rel!=="ignore";case"INPUT":return!(n.type==="hidden"||n.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},Qy=function(n,e,...t){let i;e.includes("mouse")||e.includes("click")?i="MouseEvents":e.includes("key")?i="KeyboardEvent":i="HTMLEvents";const s=document.createEvent(i);return s.initEvent(e,...t),n.dispatchEvent(s),n},bD=n=>!n.getAttribute("aria-owns"),wD=(n,e,t)=>{const{parentNode:i}=n;if(!i)return null;const s=i.querySelectorAll(t),r=Array.prototype.indexOf.call(s,n);return s[r+e]||null},e_=n=>{n&&(n.focus(),!bD(n)&&n.click())},hi=(n,e,{checkForDefaultPrevented:t=!0}={})=>s=>{const r=n==null?void 0:n(s);if(t===!1||!r)return e==null?void 0:e(s)},mI=n=>e=>e.pointerType==="mouse"?n(e):void 0;var HV=Object.defineProperty,VV=Object.defineProperties,$V=Object.getOwnPropertyDescriptors,gI=Object.getOwnPropertySymbols,GV=Object.prototype.hasOwnProperty,WV=Object.prototype.propertyIsEnumerable,vI=(n,e,t)=>e in n?HV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,KV=(n,e)=>{for(var t in e||(e={}))GV.call(e,t)&&vI(n,t,e[t]);if(gI)for(var t of gI(e))WV.call(e,t)&&vI(n,t,e[t]);return n},YV=(n,e)=>VV(n,$V(e));function yI(n,e){var t;const i=Vn();return Is(()=>{i.value=n()},YV(KV({},e),{flush:(t=void 0)!=null?t:"sync"})),oh(i)}var _I;const Jt=typeof window<"u",XV=n=>typeof n<"u",sC=n=>typeof n=="function",jV=n=>typeof n=="string",Yf=()=>{},rC=Jt&&((_I=window==null?void 0:window.navigator)==null?void 0:_I.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Zc(n){return typeof n=="function"?n():g(n)}function xD(n,e){function t(...i){return new Promise((s,r)=>{Promise.resolve(n(()=>e.apply(this,i),{fn:e,thisArg:this,args:i})).then(s).catch(r)})}return t}function qV(n,e={}){let t,i,s=Yf;const r=a=>{clearTimeout(a),s(),s=Yf};return a=>{const l=Zc(n),c=Zc(e.maxWait);return t&&r(t),l<=0||c!==void 0&&c<=0?(i&&(r(i),i=null),Promise.resolve(a())):new Promise((u,d)=>{s=e.rejectOnCancel?d:u,c&&!i&&(i=setTimeout(()=>{t&&r(t),i=null,u(a())},c)),t=setTimeout(()=>{i&&r(i),i=null,u(a())},l)})}}function ZV(n,e=!0,t=!0,i=!1){let s=0,r,o=!0,a=Yf,l;const c=()=>{r&&(clearTimeout(r),r=void 0,a(),a=Yf)};return d=>{const h=Zc(n),f=Date.now()-s,m=()=>l=d();return c(),h<=0?(s=Date.now(),m()):(f>h&&(t||!o)?(s=Date.now(),m()):e&&(l=new Promise((p,y)=>{a=i?y:p,r=setTimeout(()=>{s=Date.now(),o=!0,p(m()),c()},Math.max(0,h-f))})),!t&&!r&&(r=setTimeout(()=>o=!0,h)),o=!1,l)}}function JV(n){return n}function QV(n,e){let t,i,s;const r=V(!0),o=()=>{r.value=!0,s()};ze(n,o,{flush:"sync"});const a=sC(e)?e:e.get,l=sC(e)?void 0:e.set,c=Z8((u,d)=>(i=u,s=d,{get(){return r.value&&(t=a(),r.value=!1),i(),t},set(h){l==null||l(h)}}));return Object.isExtensible(c)&&(c.trigger=o),c}function kv(n){return sO()?(rO(n),!0):!1}function e$(n,e=200,t={}){return xD(qV(e,t),n)}function t$(n,e=200,t={}){const i=V(n.value),s=e$(()=>{i.value=n.value},e,t);return ze(n,()=>s()),i}function SD(n,e=200,t=!1,i=!0,s=!1){return xD(ZV(e,t,i,s),n)}function AE(n,e=!0){zt()?Ft(n):e?n():vt(n)}function Ud(n,e,t={}){const{immediate:i=!0}=t,s=V(!1);let r=null;function o(){r&&(clearTimeout(r),r=null)}function a(){s.value=!1,o()}function l(...c){o(),s.value=!0,r=setTimeout(()=>{s.value=!1,r=null,n(...c)},Zc(e))}return i&&(s.value=!0,Jt&&l()),kv(a),{isPending:oh(s),start:l,stop:a}}function xr(n){var e;const t=Zc(n);return(e=t==null?void 0:t.$el)!=null?e:t}const pu=Jt?window:void 0,n$=Jt?window.document:void 0;function Dn(...n){let e,t,i,s;if(jV(n[0])||Array.isArray(n[0])?([t,i,s]=n,e=pu):[e,t,i,s]=n,!e)return Yf;Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]);const r=[],o=()=>{r.forEach(u=>u()),r.length=0},a=(u,d,h,f)=>(u.addEventListener(d,h,f),()=>u.removeEventListener(d,h,f)),l=ze(()=>[xr(e),Zc(s)],([u,d])=>{o(),u&&r.push(...t.flatMap(h=>i.map(f=>a(u,h,f,d))))},{immediate:!0,flush:"post"}),c=()=>{l(),o()};return kv(c),c}let bI=!1;function IE(n,e,t={}){const{window:i=pu,ignore:s=[],capture:r=!0,detectIframe:o=!1}=t;if(!i)return;rC&&!bI&&(bI=!0,Array.from(i.document.body.children).forEach(h=>h.addEventListener("click",Yf)));let a=!0;const l=h=>s.some(f=>{if(typeof f=="string")return Array.from(i.document.querySelectorAll(f)).some(m=>m===h.target||h.composedPath().includes(m));{const m=xr(f);return m&&(h.target===m||h.composedPath().includes(m))}}),u=[Dn(i,"click",h=>{const f=xr(n);if(!(!f||f===h.target||h.composedPath().includes(f))){if(h.detail===0&&(a=!l(h)),!a){a=!0;return}e(h)}},{passive:!0,capture:r}),Dn(i,"pointerdown",h=>{const f=xr(n);f&&(a=!h.composedPath().includes(f)&&!l(h))},{passive:!0}),o&&Dn(i,"blur",h=>{var f;const m=xr(n);((f=i.document.activeElement)==null?void 0:f.tagName)==="IFRAME"&&!(m!=null&&m.contains(i.document.activeElement))&&e(h)})].filter(Boolean);return()=>u.forEach(h=>h())}function i$(n={}){var e;const{window:t=pu}=n,i=(e=n.document)!=null?e:t==null?void 0:t.document,s=QV(()=>null,()=>i==null?void 0:i.activeElement);return t&&(Dn(t,"blur",r=>{r.relatedTarget===null&&s.trigger()},!0),Dn(t,"focus",s.trigger,!0)),s}function CD(n,e=!1){const t=V(),i=()=>t.value=!!n();return i(),AE(i,e),t}function s$(n){return JSON.parse(JSON.stringify(n))}const wI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xI="__vueuse_ssr_handlers__";wI[xI]=wI[xI]||{};function r$(n,e,{window:t=pu,initialValue:i=""}={}){const s=V(i),r=R(()=>{var o;return xr(e)||((o=t==null?void 0:t.document)==null?void 0:o.documentElement)});return ze([r,()=>Zc(n)],([o,a])=>{var l;if(o&&t){const c=(l=t.getComputedStyle(o).getPropertyValue(a))==null?void 0:l.trim();s.value=c||i}},{immediate:!0}),ze(s,o=>{var a;(a=r.value)!=null&&a.style&&r.value.style.setProperty(Zc(n),o)}),s}function o$({document:n=n$}={}){if(!n)return V("visible");const e=V(n.visibilityState);return Dn(n,"visibilitychange",()=>{e.value=n.visibilityState}),e}var SI=Object.getOwnPropertySymbols,a$=Object.prototype.hasOwnProperty,l$=Object.prototype.propertyIsEnumerable,c$=(n,e)=>{var t={};for(var i in n)a$.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&SI)for(var i of SI(n))e.indexOf(i)<0&&l$.call(n,i)&&(t[i]=n[i]);return t};function ti(n,e,t={}){const i=t,{window:s=pu}=i,r=c$(i,["window"]);let o;const a=CD(()=>s&&"ResizeObserver"in s),l=()=>{o&&(o.disconnect(),o=void 0)},c=ze(()=>xr(n),d=>{l(),a.value&&s&&d&&(o=new ResizeObserver(e),o.observe(d,r))},{immediate:!0,flush:"post"}),u=()=>{l(),c()};return kv(u),{isSupported:a,stop:u}}function CI(n,e={}){const{reset:t=!0,windowResize:i=!0,windowScroll:s=!0,immediate:r=!0}=e,o=V(0),a=V(0),l=V(0),c=V(0),u=V(0),d=V(0),h=V(0),f=V(0);function m(){const p=xr(n);if(!p){t&&(o.value=0,a.value=0,l.value=0,c.value=0,u.value=0,d.value=0,h.value=0,f.value=0);return}const y=p.getBoundingClientRect();o.value=y.height,a.value=y.bottom,l.value=y.left,c.value=y.right,u.value=y.top,d.value=y.width,h.value=y.x,f.value=y.y}return ti(n,m),ze(()=>xr(n),p=>!p&&m()),s&&Dn("scroll",m,{capture:!0,passive:!0}),i&&Dn("resize",m,{passive:!0}),AE(()=>{r&&m()}),{height:o,bottom:a,left:l,right:c,top:u,width:d,x:h,y:f,update:m}}var MI=Object.getOwnPropertySymbols,u$=Object.prototype.hasOwnProperty,d$=Object.prototype.propertyIsEnumerable,h$=(n,e)=>{var t={};for(var i in n)u$.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&MI)for(var i of MI(n))e.indexOf(i)<0&&d$.call(n,i)&&(t[i]=n[i]);return t};function MD(n,e,t={}){const i=t,{window:s=pu}=i,r=h$(i,["window"]);let o;const a=CD(()=>s&&"MutationObserver"in s),l=()=>{o&&(o.disconnect(),o=void 0)},c=ze(()=>xr(n),d=>{l(),a.value&&s&&d&&(o=new MutationObserver(e),o.observe(d,r))},{immediate:!0}),u=()=>{l(),c()};return kv(u),{isSupported:a,stop:u}}var EI;(function(n){n.UP="UP",n.RIGHT="RIGHT",n.DOWN="DOWN",n.LEFT="LEFT",n.NONE="NONE"})(EI||(EI={}));var f$=Object.defineProperty,TI=Object.getOwnPropertySymbols,p$=Object.prototype.hasOwnProperty,m$=Object.prototype.propertyIsEnumerable,AI=(n,e,t)=>e in n?f$(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,g$=(n,e)=>{for(var t in e||(e={}))p$.call(e,t)&&AI(n,t,e[t]);if(TI)for(var t of TI(e))m$.call(e,t)&&AI(n,t,e[t]);return n};const v$={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};g$({linear:JV},v$);function ED(n,e,t,i={}){var s,r,o;const{clone:a=!1,passive:l=!1,eventName:c,deep:u=!1,defaultValue:d}=i,h=zt(),f=t||(h==null?void 0:h.emit)||((s=h==null?void 0:h.$emit)==null?void 0:s.bind(h))||((o=(r=h==null?void 0:h.proxy)==null?void 0:r.$emit)==null?void 0:o.bind(h==null?void 0:h.proxy));let m=c;e||(e="modelValue"),m=c||m||`update:${e.toString()}`;const p=v=>a?sC(a)?a(v):s$(v):v,y=()=>XV(n[e])?p(n[e]):d;if(l){const v=y(),_=V(v);return ze(()=>n[e],b=>_.value=p(b)),ze(_,b=>{(b!==n[e]||u)&&f(m,b)},{deep:u}),_}else return R({get(){return y()},set(v){f(m,v)}})}function y$({window:n=pu}={}){if(!n)return V(!1);const e=V(n.document.hasFocus());return Dn(n,"blur",()=>{e.value=!1}),Dn(n,"focus",()=>{e.value=!0}),e}function _$(n={}){const{window:e=pu,initialWidth:t=1/0,initialHeight:i=1/0,listenOrientation:s=!0,includeScrollbar:r=!0}=n,o=V(t),a=V(i),l=()=>{e&&(r?(o.value=e.innerWidth,a.value=e.innerHeight):(o.value=e.document.documentElement.clientWidth,a.value=e.document.documentElement.clientHeight))};return l(),AE(l),Dn("resize",l,{passive:!0}),s&&Dn("orientationchange",l,{passive:!0}),{width:o,height:a}}const TD=()=>Jt&&/firefox/i.test(window.navigator.userAgent),b$=(n,e)=>{if(!Jt||!n||!e)return!1;const t=n.getBoundingClientRect();let i;return e instanceof Element?i=e.getBoundingClientRect():i={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},t.top<i.bottom&&t.bottom>i.top&&t.right>i.left&&t.left<i.right},II=n=>{let e=0,t=n;for(;t;)e+=t.offsetTop,t=t.offsetParent;return e},oC=(n,e)=>Math.abs(II(n)-II(e)),RE=n=>{let e,t;return n.type==="touchend"?(t=n.changedTouches[0].clientY,e=n.changedTouches[0].clientX):n.type.startsWith("touch")?(t=n.touches[0].clientY,e=n.touches[0].clientX):(t=n.clientY,e=n.clientX),{clientX:e,clientY:t}};function w$(n,e,t,i){const s=t-e;return n/=i/2,n<1?s/2*n*n*n+e:s/2*((n-=2)*n*n+2)+e}var AD=typeof global=="object"&&global&&global.Object===Object&&global,x$=typeof self=="object"&&self&&self.Object===Object&&self,oa=AD||x$||Function("return this")(),Po=oa.Symbol,ID=Object.prototype,S$=ID.hasOwnProperty,C$=ID.toString,Wp=Po?Po.toStringTag:void 0;function M$(n){var e=S$.call(n,Wp),t=n[Wp];try{n[Wp]=void 0;var i=!0}catch{}var s=C$.call(n);return i&&(e?n[Wp]=t:delete n[Wp]),s}var E$=Object.prototype,T$=E$.toString;function A$(n){return T$.call(n)}var I$="[object Null]",R$="[object Undefined]",RI=Po?Po.toStringTag:void 0;function lh(n){return n==null?n===void 0?R$:I$:RI&&RI in Object(n)?M$(n):A$(n)}function za(n){return n!=null&&typeof n=="object"}var P$="[object Symbol]";function w1(n){return typeof n=="symbol"||za(n)&&lh(n)==P$}function PE(n,e){for(var t=-1,i=n==null?0:n.length,s=Array(i);++t<i;)s[t]=e(n[t],t,n);return s}var hr=Array.isArray,L$=1/0,PI=Po?Po.prototype:void 0,LI=PI?PI.toString:void 0;function RD(n){if(typeof n=="string")return n;if(hr(n))return PE(n,RD)+"";if(w1(n))return LI?LI.call(n):"";var e=n+"";return e=="0"&&1/n==-L$?"-0":e}var k$=/\s/;function O$(n){for(var e=n.length;e--&&k$.test(n.charAt(e)););return e}var D$=/^\s+/;function N$(n){return n&&n.slice(0,O$(n)+1).replace(D$,"")}function fr(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var kI=NaN,F$=/^[-+]0x[0-9a-f]+$/i,B$=/^0b[01]+$/i,U$=/^0o[0-7]+$/i,z$=parseInt;function OI(n){if(typeof n=="number")return n;if(w1(n))return kI;if(fr(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=fr(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=N$(n);var t=B$.test(n);return t||U$.test(n)?z$(n.slice(2),t?2:8):F$.test(n)?kI:+n}function LE(n){return n}var H$="[object AsyncFunction]",V$="[object Function]",$$="[object GeneratorFunction]",G$="[object Proxy]";function kE(n){if(!fr(n))return!1;var e=lh(n);return e==V$||e==$$||e==H$||e==G$}var jw=oa["__core-js_shared__"],DI=function(){var n=/[^.]+$/.exec(jw&&jw.keys&&jw.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function W$(n){return!!DI&&DI in n}var K$=Function.prototype,Y$=K$.toString;function ch(n){if(n!=null){try{return Y$.call(n)}catch{}try{return n+""}catch{}}return""}var X$=/[\\^$.*+?()[\]{}|]/g,j$=/^\[object .+?Constructor\]$/,q$=Function.prototype,Z$=Object.prototype,J$=q$.toString,Q$=Z$.hasOwnProperty,eG=RegExp("^"+J$.call(Q$).replace(X$,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function tG(n){if(!fr(n)||W$(n))return!1;var e=kE(n)?eG:j$;return e.test(ch(n))}function nG(n,e){return n==null?void 0:n[e]}function uh(n,e){var t=nG(n,e);return tG(t)?t:void 0}var aC=uh(oa,"WeakMap"),NI=Object.create,iG=function(){function n(){}return function(e){if(!fr(e))return{};if(NI)return NI(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();function sG(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function rG(){}function PD(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}var oG=800,aG=16,lG=Date.now;function cG(n){var e=0,t=0;return function(){var i=lG(),s=aG-(i-t);if(t=i,s>0){if(++e>=oG)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function uG(n){return function(){return n}}var U_=function(){try{var n=uh(Object,"defineProperty");return n({},"",{}),n}catch{}}(),dG=U_?function(n,e){return U_(n,"toString",{configurable:!0,enumerable:!1,value:uG(e),writable:!0})}:LE,LD=cG(dG);function hG(n,e){for(var t=-1,i=n==null?0:n.length;++t<i&&e(n[t],t,n)!==!1;);return n}function kD(n,e,t,i){for(var s=n.length,r=t+(i?1:-1);i?r--:++r<s;)if(e(n[r],r,n))return r;return-1}function fG(n){return n!==n}function pG(n,e,t){for(var i=t-1,s=n.length;++i<s;)if(n[i]===e)return i;return-1}function mG(n,e,t){return e===e?pG(n,e,t):kD(n,fG,t)}function gG(n,e){var t=n==null?0:n.length;return!!t&&mG(n,e,0)>-1}var vG=9007199254740991,yG=/^(?:0|[1-9]\d*)$/;function x1(n,e){var t=typeof n;return e=e??vG,!!e&&(t=="number"||t!="symbol"&&yG.test(n))&&n>-1&&n%1==0&&n<e}function OE(n,e,t){e=="__proto__"&&U_?U_(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function Ov(n,e){return n===e||n!==n&&e!==e}var _G=Object.prototype,bG=_G.hasOwnProperty;function DE(n,e,t){var i=n[e];(!(bG.call(n,e)&&Ov(i,t))||t===void 0&&!(e in n))&&OE(n,e,t)}function Mp(n,e,t,i){var s=!t;t||(t={});for(var r=-1,o=e.length;++r<o;){var a=e[r],l=void 0;l===void 0&&(l=n[a]),s?OE(t,a,l):DE(t,a,l)}return t}var FI=Math.max;function OD(n,e,t){return e=FI(e===void 0?n.length-1:e,0),function(){for(var i=arguments,s=-1,r=FI(i.length-e,0),o=Array(r);++s<r;)o[s]=i[e+s];s=-1;for(var a=Array(e+1);++s<e;)a[s]=i[s];return a[e]=t(o),sG(n,this,a)}}function DD(n,e){return LD(OD(n,e,LE),n+"")}var wG=9007199254740991;function NE(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=wG}function Ep(n){return n!=null&&NE(n.length)&&!kE(n)}function xG(n,e,t){if(!fr(t))return!1;var i=typeof e;return(i=="number"?Ep(t)&&x1(e,t.length):i=="string"&&e in t)?Ov(t[e],n):!1}function SG(n){return DD(function(e,t){var i=-1,s=t.length,r=s>1?t[s-1]:void 0,o=s>2?t[2]:void 0;for(r=n.length>3&&typeof r=="function"?(s--,r):void 0,o&&xG(t[0],t[1],o)&&(r=s<3?void 0:r,s=1),e=Object(e);++i<s;){var a=t[i];a&&n(e,a,i,r)}return e})}var CG=Object.prototype;function FE(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||CG;return n===t}function MG(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}var EG="[object Arguments]";function BI(n){return za(n)&&lh(n)==EG}var ND=Object.prototype,TG=ND.hasOwnProperty,AG=ND.propertyIsEnumerable,Cg=BI(function(){return arguments}())?BI:function(n){return za(n)&&TG.call(n,"callee")&&!AG.call(n,"callee")};function IG(){return!1}var FD=typeof exports=="object"&&exports&&!exports.nodeType&&exports,UI=FD&&typeof module=="object"&&module&&!module.nodeType&&module,RG=UI&&UI.exports===FD,zI=RG?oa.Buffer:void 0,PG=zI?zI.isBuffer:void 0,Mg=PG||IG,LG="[object Arguments]",kG="[object Array]",OG="[object Boolean]",DG="[object Date]",NG="[object Error]",FG="[object Function]",BG="[object Map]",UG="[object Number]",zG="[object Object]",HG="[object RegExp]",VG="[object Set]",$G="[object String]",GG="[object WeakMap]",WG="[object ArrayBuffer]",KG="[object DataView]",YG="[object Float32Array]",XG="[object Float64Array]",jG="[object Int8Array]",qG="[object Int16Array]",ZG="[object Int32Array]",JG="[object Uint8Array]",QG="[object Uint8ClampedArray]",eW="[object Uint16Array]",tW="[object Uint32Array]",mi={};mi[YG]=mi[XG]=mi[jG]=mi[qG]=mi[ZG]=mi[JG]=mi[QG]=mi[eW]=mi[tW]=!0;mi[LG]=mi[kG]=mi[WG]=mi[OG]=mi[KG]=mi[DG]=mi[NG]=mi[FG]=mi[BG]=mi[UG]=mi[zG]=mi[HG]=mi[VG]=mi[$G]=mi[GG]=!1;function nW(n){return za(n)&&NE(n.length)&&!!mi[lh(n)]}function BE(n){return function(e){return n(e)}}var BD=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Wm=BD&&typeof module=="object"&&module&&!module.nodeType&&module,iW=Wm&&Wm.exports===BD,qw=iW&&AD.process,Xf=function(){try{var n=Wm&&Wm.require&&Wm.require("util").types;return n||qw&&qw.binding&&qw.binding("util")}catch{}}(),HI=Xf&&Xf.isTypedArray,UE=HI?BE(HI):nW,sW=Object.prototype,rW=sW.hasOwnProperty;function UD(n,e){var t=hr(n),i=!t&&Cg(n),s=!t&&!i&&Mg(n),r=!t&&!i&&!s&&UE(n),o=t||i||s||r,a=o?MG(n.length,String):[],l=a.length;for(var c in n)(e||rW.call(n,c))&&!(o&&(c=="length"||s&&(c=="offset"||c=="parent")||r&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||x1(c,l)))&&a.push(c);return a}function zD(n,e){return function(t){return n(e(t))}}var oW=zD(Object.keys,Object),aW=Object.prototype,lW=aW.hasOwnProperty;function cW(n){if(!FE(n))return oW(n);var e=[];for(var t in Object(n))lW.call(n,t)&&t!="constructor"&&e.push(t);return e}function Dv(n){return Ep(n)?UD(n):cW(n)}function uW(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var dW=Object.prototype,hW=dW.hasOwnProperty;function fW(n){if(!fr(n))return uW(n);var e=FE(n),t=[];for(var i in n)i=="constructor"&&(e||!hW.call(n,i))||t.push(i);return t}function Nv(n){return Ep(n)?UD(n,!0):fW(n)}var pW=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mW=/^\w*$/;function zE(n,e){if(hr(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||w1(n)?!0:mW.test(n)||!pW.test(n)||e!=null&&n in Object(e)}var Eg=uh(Object,"create");function gW(){this.__data__=Eg?Eg(null):{},this.size=0}function vW(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var yW="__lodash_hash_undefined__",_W=Object.prototype,bW=_W.hasOwnProperty;function wW(n){var e=this.__data__;if(Eg){var t=e[n];return t===yW?void 0:t}return bW.call(e,n)?e[n]:void 0}var xW=Object.prototype,SW=xW.hasOwnProperty;function CW(n){var e=this.__data__;return Eg?e[n]!==void 0:SW.call(e,n)}var MW="__lodash_hash_undefined__";function EW(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Eg&&e===void 0?MW:e,this}function zd(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}zd.prototype.clear=gW;zd.prototype.delete=vW;zd.prototype.get=wW;zd.prototype.has=CW;zd.prototype.set=EW;function TW(){this.__data__=[],this.size=0}function S1(n,e){for(var t=n.length;t--;)if(Ov(n[t][0],e))return t;return-1}var AW=Array.prototype,IW=AW.splice;function RW(n){var e=this.__data__,t=S1(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():IW.call(e,t,1),--this.size,!0}function PW(n){var e=this.__data__,t=S1(e,n);return t<0?void 0:e[t][1]}function LW(n){return S1(this.__data__,n)>-1}function kW(n,e){var t=this.__data__,i=S1(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}function Yl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Yl.prototype.clear=TW;Yl.prototype.delete=RW;Yl.prototype.get=PW;Yl.prototype.has=LW;Yl.prototype.set=kW;var Tg=uh(oa,"Map");function OW(){this.size=0,this.__data__={hash:new zd,map:new(Tg||Yl),string:new zd}}function DW(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function C1(n,e){var t=n.__data__;return DW(e)?t[typeof e=="string"?"string":"hash"]:t.map}function NW(n){var e=C1(this,n).delete(n);return this.size-=e?1:0,e}function FW(n){return C1(this,n).get(n)}function BW(n){return C1(this,n).has(n)}function UW(n,e){var t=C1(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}function Xl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Xl.prototype.clear=OW;Xl.prototype.delete=NW;Xl.prototype.get=FW;Xl.prototype.has=BW;Xl.prototype.set=UW;var zW="Expected a function";function M1(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(zW);var t=function(){var i=arguments,s=e?e.apply(this,i):i[0],r=t.cache;if(r.has(s))return r.get(s);var o=n.apply(this,i);return t.cache=r.set(s,o)||r,o};return t.cache=new(M1.Cache||Xl),t}M1.Cache=Xl;var HW=500;function VW(n){var e=M1(n,function(i){return t.size===HW&&t.clear(),i}),t=e.cache;return e}var $W=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,GW=/\\(\\)?/g,WW=VW(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace($W,function(t,i,s,r){e.push(s?r.replace(GW,"$1"):i||t)}),e});function KW(n){return n==null?"":RD(n)}function Tp(n,e){return hr(n)?n:zE(n,e)?[n]:WW(KW(n))}var YW=1/0;function Ap(n){if(typeof n=="string"||w1(n))return n;var e=n+"";return e=="0"&&1/n==-YW?"-0":e}function E1(n,e){e=Tp(e,n);for(var t=0,i=e.length;n!=null&&t<i;)n=n[Ap(e[t++])];return t&&t==i?n:void 0}function gi(n,e,t){var i=n==null?void 0:E1(n,e);return i===void 0?t:i}function HE(n,e){for(var t=-1,i=e.length,s=n.length;++t<i;)n[s+t]=e[t];return n}var VI=Po?Po.isConcatSpreadable:void 0;function XW(n){return hr(n)||Cg(n)||!!(VI&&n&&n[VI])}function Fv(n,e,t,i,s){var r=-1,o=n.length;for(t||(t=XW),s||(s=[]);++r<o;){var a=n[r];e>0&&t(a)?e>1?Fv(a,e-1,t,i,s):HE(s,a):i||(s[s.length]=a)}return s}function HD(n){var e=n==null?0:n.length;return e?Fv(n,1):[]}function VD(n){return LD(OD(n,void 0,HD),n+"")}var VE=zD(Object.getPrototypeOf,Object),jW="[object Object]",qW=Function.prototype,ZW=Object.prototype,$D=qW.toString,JW=ZW.hasOwnProperty,QW=$D.call(Object);function GD(n){if(!za(n)||lh(n)!=jW)return!1;var e=VE(n);if(e===null)return!0;var t=JW.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&$D.call(t)==QW}function e9(n,e,t){var i=-1,s=n.length;e<0&&(e=-e>s?0:s+e),t=t>s?s:t,t<0&&(t+=s),s=e>t?0:t-e>>>0,e>>>=0;for(var r=Array(s);++i<s;)r[i]=n[i+e];return r}function Jc(){if(!arguments.length)return[];var n=arguments[0];return hr(n)?n:[n]}function t9(){this.__data__=new Yl,this.size=0}function n9(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function i9(n){return this.__data__.get(n)}function s9(n){return this.__data__.has(n)}var r9=200;function o9(n,e){var t=this.__data__;if(t instanceof Yl){var i=t.__data__;if(!Tg||i.length<r9-1)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new Xl(i)}return t.set(n,e),this.size=t.size,this}function ea(n){var e=this.__data__=new Yl(n);this.size=e.size}ea.prototype.clear=t9;ea.prototype.delete=n9;ea.prototype.get=i9;ea.prototype.has=s9;ea.prototype.set=o9;function a9(n,e){return n&&Mp(e,Dv(e),n)}function l9(n,e){return n&&Mp(e,Nv(e),n)}var WD=typeof exports=="object"&&exports&&!exports.nodeType&&exports,$I=WD&&typeof module=="object"&&module&&!module.nodeType&&module,c9=$I&&$I.exports===WD,GI=c9?oa.Buffer:void 0,WI=GI?GI.allocUnsafe:void 0;function KD(n,e){if(e)return n.slice();var t=n.length,i=WI?WI(t):new n.constructor(t);return n.copy(i),i}function u9(n,e){for(var t=-1,i=n==null?0:n.length,s=0,r=[];++t<i;){var o=n[t];e(o,t,n)&&(r[s++]=o)}return r}function YD(){return[]}var d9=Object.prototype,h9=d9.propertyIsEnumerable,KI=Object.getOwnPropertySymbols,$E=KI?function(n){return n==null?[]:(n=Object(n),u9(KI(n),function(e){return h9.call(n,e)}))}:YD;function f9(n,e){return Mp(n,$E(n),e)}var p9=Object.getOwnPropertySymbols,XD=p9?function(n){for(var e=[];n;)HE(e,$E(n)),n=VE(n);return e}:YD;function m9(n,e){return Mp(n,XD(n),e)}function jD(n,e,t){var i=e(n);return hr(n)?i:HE(i,t(n))}function lC(n){return jD(n,Dv,$E)}function qD(n){return jD(n,Nv,XD)}var cC=uh(oa,"DataView"),uC=uh(oa,"Promise"),Tf=uh(oa,"Set"),YI="[object Map]",g9="[object Object]",XI="[object Promise]",jI="[object Set]",qI="[object WeakMap]",ZI="[object DataView]",v9=ch(cC),y9=ch(Tg),_9=ch(uC),b9=ch(Tf),w9=ch(aC),qo=lh;(cC&&qo(new cC(new ArrayBuffer(1)))!=ZI||Tg&&qo(new Tg)!=YI||uC&&qo(uC.resolve())!=XI||Tf&&qo(new Tf)!=jI||aC&&qo(new aC)!=qI)&&(qo=function(n){var e=lh(n),t=e==g9?n.constructor:void 0,i=t?ch(t):"";if(i)switch(i){case v9:return ZI;case y9:return YI;case _9:return XI;case b9:return jI;case w9:return qI}return e});var x9=Object.prototype,S9=x9.hasOwnProperty;function C9(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&S9.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var z_=oa.Uint8Array;function GE(n){var e=new n.constructor(n.byteLength);return new z_(e).set(new z_(n)),e}function M9(n,e){var t=e?GE(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var E9=/\w*$/;function T9(n){var e=new n.constructor(n.source,E9.exec(n));return e.lastIndex=n.lastIndex,e}var JI=Po?Po.prototype:void 0,QI=JI?JI.valueOf:void 0;function A9(n){return QI?Object(QI.call(n)):{}}function ZD(n,e){var t=e?GE(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var I9="[object Boolean]",R9="[object Date]",P9="[object Map]",L9="[object Number]",k9="[object RegExp]",O9="[object Set]",D9="[object String]",N9="[object Symbol]",F9="[object ArrayBuffer]",B9="[object DataView]",U9="[object Float32Array]",z9="[object Float64Array]",H9="[object Int8Array]",V9="[object Int16Array]",$9="[object Int32Array]",G9="[object Uint8Array]",W9="[object Uint8ClampedArray]",K9="[object Uint16Array]",Y9="[object Uint32Array]";function X9(n,e,t){var i=n.constructor;switch(e){case F9:return GE(n);case I9:case R9:return new i(+n);case B9:return M9(n,t);case U9:case z9:case H9:case V9:case $9:case G9:case W9:case K9:case Y9:return ZD(n,t);case P9:return new i;case L9:case D9:return new i(n);case k9:return T9(n);case O9:return new i;case N9:return A9(n)}}function JD(n){return typeof n.constructor=="function"&&!FE(n)?iG(VE(n)):{}}var j9="[object Map]";function q9(n){return za(n)&&qo(n)==j9}var eR=Xf&&Xf.isMap,Z9=eR?BE(eR):q9,J9="[object Set]";function Q9(n){return za(n)&&qo(n)==J9}var tR=Xf&&Xf.isSet,e7=tR?BE(tR):Q9,t7=1,n7=2,i7=4,QD="[object Arguments]",s7="[object Array]",r7="[object Boolean]",o7="[object Date]",a7="[object Error]",eN="[object Function]",l7="[object GeneratorFunction]",c7="[object Map]",u7="[object Number]",tN="[object Object]",d7="[object RegExp]",h7="[object Set]",f7="[object String]",p7="[object Symbol]",m7="[object WeakMap]",g7="[object ArrayBuffer]",v7="[object DataView]",y7="[object Float32Array]",_7="[object Float64Array]",b7="[object Int8Array]",w7="[object Int16Array]",x7="[object Int32Array]",S7="[object Uint8Array]",C7="[object Uint8ClampedArray]",M7="[object Uint16Array]",E7="[object Uint32Array]",ci={};ci[QD]=ci[s7]=ci[g7]=ci[v7]=ci[r7]=ci[o7]=ci[y7]=ci[_7]=ci[b7]=ci[w7]=ci[x7]=ci[c7]=ci[u7]=ci[tN]=ci[d7]=ci[h7]=ci[f7]=ci[p7]=ci[S7]=ci[C7]=ci[M7]=ci[E7]=!0;ci[a7]=ci[eN]=ci[m7]=!1;function Af(n,e,t,i,s,r){var o,a=e&t7,l=e&n7,c=e&i7;if(t&&(o=s?t(n,i,s,r):t(n)),o!==void 0)return o;if(!fr(n))return n;var u=hr(n);if(u){if(o=C9(n),!a)return PD(n,o)}else{var d=qo(n),h=d==eN||d==l7;if(Mg(n))return KD(n,a);if(d==tN||d==QD||h&&!s){if(o=l||h?{}:JD(n),!a)return l?m9(n,l9(o,n)):f9(n,a9(o,n))}else{if(!ci[d])return s?n:{};o=X9(n,d,a)}}r||(r=new ea);var f=r.get(n);if(f)return f;r.set(n,o),e7(n)?n.forEach(function(y){o.add(Af(y,e,t,y,n,r))}):Z9(n)&&n.forEach(function(y,v){o.set(v,Af(y,e,t,v,n,r))});var m=c?l?qD:lC:l?Nv:Dv,p=u?void 0:m(n);return hG(p||n,function(y,v){p&&(v=y,y=n[v]),DE(o,v,Af(y,e,t,v,n,r))}),o}var T7=4;function nR(n){return Af(n,T7)}var A7=1,I7=4;function H_(n){return Af(n,A7|I7)}var R7="__lodash_hash_undefined__";function P7(n){return this.__data__.set(n,R7),this}function L7(n){return this.__data__.has(n)}function Ag(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new Xl;++e<t;)this.add(n[e])}Ag.prototype.add=Ag.prototype.push=P7;Ag.prototype.has=L7;function k7(n,e){for(var t=-1,i=n==null?0:n.length;++t<i;)if(e(n[t],t,n))return!0;return!1}function nN(n,e){return n.has(e)}var O7=1,D7=2;function iN(n,e,t,i,s,r){var o=t&O7,a=n.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=r.get(n),u=r.get(e);if(c&&u)return c==e&&u==n;var d=-1,h=!0,f=t&D7?new Ag:void 0;for(r.set(n,e),r.set(e,n);++d<a;){var m=n[d],p=e[d];if(i)var y=o?i(p,m,d,e,n,r):i(m,p,d,n,e,r);if(y!==void 0){if(y)continue;h=!1;break}if(f){if(!k7(e,function(v,_){if(!nN(f,_)&&(m===v||s(m,v,t,i,r)))return f.push(_)})){h=!1;break}}else if(!(m===p||s(m,p,t,i,r))){h=!1;break}}return r.delete(n),r.delete(e),h}function N7(n){var e=-1,t=Array(n.size);return n.forEach(function(i,s){t[++e]=[s,i]}),t}function WE(n){var e=-1,t=Array(n.size);return n.forEach(function(i){t[++e]=i}),t}var F7=1,B7=2,U7="[object Boolean]",z7="[object Date]",H7="[object Error]",V7="[object Map]",$7="[object Number]",G7="[object RegExp]",W7="[object Set]",K7="[object String]",Y7="[object Symbol]",X7="[object ArrayBuffer]",j7="[object DataView]",iR=Po?Po.prototype:void 0,Zw=iR?iR.valueOf:void 0;function q7(n,e,t,i,s,r,o){switch(t){case j7:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case X7:return!(n.byteLength!=e.byteLength||!r(new z_(n),new z_(e)));case U7:case z7:case $7:return Ov(+n,+e);case H7:return n.name==e.name&&n.message==e.message;case G7:case K7:return n==e+"";case V7:var a=N7;case W7:var l=i&F7;if(a||(a=WE),n.size!=e.size&&!l)return!1;var c=o.get(n);if(c)return c==e;i|=B7,o.set(n,e);var u=iN(a(n),a(e),i,s,r,o);return o.delete(n),u;case Y7:if(Zw)return Zw.call(n)==Zw.call(e)}return!1}var Z7=1,J7=Object.prototype,Q7=J7.hasOwnProperty;function eK(n,e,t,i,s,r){var o=t&Z7,a=lC(n),l=a.length,c=lC(e),u=c.length;if(l!=u&&!o)return!1;for(var d=l;d--;){var h=a[d];if(!(o?h in e:Q7.call(e,h)))return!1}var f=r.get(n),m=r.get(e);if(f&&m)return f==e&&m==n;var p=!0;r.set(n,e),r.set(e,n);for(var y=o;++d<l;){h=a[d];var v=n[h],_=e[h];if(i)var b=o?i(_,v,h,e,n,r):i(v,_,h,n,e,r);if(!(b===void 0?v===_||s(v,_,t,i,r):b)){p=!1;break}y||(y=h=="constructor")}if(p&&!y){var w=n.constructor,x=e.constructor;w!=x&&"constructor"in n&&"constructor"in e&&!(typeof w=="function"&&w instanceof w&&typeof x=="function"&&x instanceof x)&&(p=!1)}return r.delete(n),r.delete(e),p}var tK=1,sR="[object Arguments]",rR="[object Array]",b0="[object Object]",nK=Object.prototype,oR=nK.hasOwnProperty;function iK(n,e,t,i,s,r){var o=hr(n),a=hr(e),l=o?rR:qo(n),c=a?rR:qo(e);l=l==sR?b0:l,c=c==sR?b0:c;var u=l==b0,d=c==b0,h=l==c;if(h&&Mg(n)){if(!Mg(e))return!1;o=!0,u=!1}if(h&&!u)return r||(r=new ea),o||UE(n)?iN(n,e,t,i,s,r):q7(n,e,l,t,i,s,r);if(!(t&tK)){var f=u&&oR.call(n,"__wrapped__"),m=d&&oR.call(e,"__wrapped__");if(f||m){var p=f?n.value():n,y=m?e.value():e;return r||(r=new ea),s(p,y,t,i,r)}}return h?(r||(r=new ea),eK(n,e,t,i,s,r)):!1}function T1(n,e,t,i,s){return n===e?!0:n==null||e==null||!za(n)&&!za(e)?n!==n&&e!==e:iK(n,e,t,i,T1,s)}var sK=1,rK=2;function oK(n,e,t,i){var s=t.length,r=s;if(n==null)return!r;for(n=Object(n);s--;){var o=t[s];if(o[2]?o[1]!==n[o[0]]:!(o[0]in n))return!1}for(;++s<r;){o=t[s];var a=o[0],l=n[a],c=o[1];if(o[2]){if(l===void 0&&!(a in n))return!1}else{var u=new ea,d;if(!(d===void 0?T1(c,l,sK|rK,i,u):d))return!1}}return!0}function sN(n){return n===n&&!fr(n)}function aK(n){for(var e=Dv(n),t=e.length;t--;){var i=e[t],s=n[i];e[t]=[i,s,sN(s)]}return e}function rN(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function lK(n){var e=aK(n);return e.length==1&&e[0][2]?rN(e[0][0],e[0][1]):function(t){return t===n||oK(t,n,e)}}function cK(n,e){return n!=null&&e in Object(n)}function uK(n,e,t){e=Tp(e,n);for(var i=-1,s=e.length,r=!1;++i<s;){var o=Ap(e[i]);if(!(r=n!=null&&t(n,o)))break;n=n[o]}return r||++i!=s?r:(s=n==null?0:n.length,!!s&&NE(s)&&x1(o,s)&&(hr(n)||Cg(n)))}function oN(n,e){return n!=null&&uK(n,e,cK)}var dK=1,hK=2;function fK(n,e){return zE(n)&&sN(e)?rN(Ap(n),e):function(t){var i=gi(t,n);return i===void 0&&i===e?oN(t,n):T1(e,i,dK|hK)}}function pK(n){return function(e){return e==null?void 0:e[n]}}function mK(n){return function(e){return E1(e,n)}}function gK(n){return zE(n)?pK(Ap(n)):mK(n)}function aN(n){return typeof n=="function"?n:n==null?LE:typeof n=="object"?hr(n)?fK(n[0],n[1]):lK(n):gK(n)}function vK(n){return function(e,t,i){for(var s=-1,r=Object(e),o=i(e),a=o.length;a--;){var l=o[++s];if(t(r[l],l,r)===!1)break}return e}}var lN=vK();function yK(n,e){return n&&lN(n,e,Dv)}function _K(n,e){return function(t,i){if(t==null)return t;if(!Ep(t))return n(t,i);for(var s=t.length,r=-1,o=Object(t);++r<s&&i(o[r],r,o)!==!1;);return t}}var bK=_K(yK),Jw=function(){return oa.Date.now()},wK="Expected a function",xK=Math.max,SK=Math.min;function Lr(n,e,t){var i,s,r,o,a,l,c=0,u=!1,d=!1,h=!0;if(typeof n!="function")throw new TypeError(wK);e=OI(e)||0,fr(t)&&(u=!!t.leading,d="maxWait"in t,r=d?xK(OI(t.maxWait)||0,e):r,h="trailing"in t?!!t.trailing:h);function f(S){var C=i,T=s;return i=s=void 0,c=S,o=n.apply(T,C),o}function m(S){return c=S,a=setTimeout(v,e),u?f(S):o}function p(S){var C=S-l,T=S-c,M=e-C;return d?SK(M,r-T):M}function y(S){var C=S-l,T=S-c;return l===void 0||C>=e||C<0||d&&T>=r}function v(){var S=Jw();if(y(S))return _(S);a=setTimeout(v,p(S))}function _(S){return a=void 0,h&&i?f(S):(i=s=void 0,o)}function b(){a!==void 0&&clearTimeout(a),c=0,i=l=s=a=void 0}function w(){return a===void 0?o:_(Jw())}function x(){var S=Jw(),C=y(S);if(i=arguments,s=this,l=S,C){if(a===void 0)return m(l);if(d)return clearTimeout(a),a=setTimeout(v,e),f(l)}return a===void 0&&(a=setTimeout(v,e)),o}return x.cancel=b,x.flush=w,x}function dC(n,e,t){(t!==void 0&&!Ov(n[e],t)||t===void 0&&!(e in n))&&OE(n,e,t)}function cN(n){return za(n)&&Ep(n)}function hC(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}function CK(n){return Mp(n,Nv(n))}function MK(n,e,t,i,s,r,o){var a=hC(n,t),l=hC(e,t),c=o.get(l);if(c){dC(n,t,c);return}var u=r?r(a,l,t+"",n,e,o):void 0,d=u===void 0;if(d){var h=hr(l),f=!h&&Mg(l),m=!h&&!f&&UE(l);u=l,h||f||m?hr(a)?u=a:cN(a)?u=PD(a):f?(d=!1,u=KD(l,!0)):m?(d=!1,u=ZD(l,!0)):u=[]:GD(l)||Cg(l)?(u=a,Cg(a)?u=CK(a):(!fr(a)||kE(a))&&(u=JD(l))):d=!1}d&&(o.set(l,u),s(u,l,i,r,o),o.delete(l)),dC(n,t,u)}function uN(n,e,t,i,s){n!==e&&lN(e,function(r,o){if(s||(s=new ea),fr(r))MK(n,e,o,t,uN,i,s);else{var a=i?i(hC(n,o),r,o+"",n,e,s):void 0;a===void 0&&(a=r),dC(n,o,a)}},Nv)}function EK(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}function dN(n,e,t){var i=n==null?0:n.length;if(!i)return-1;var s=i-1;return kD(n,aN(e),s,!0)}function TK(n,e){var t=-1,i=Ep(n)?Array(n.length):[];return bK(n,function(s,r,o){i[++t]=e(s,r,o)}),i}function AK(n,e){var t=hr(n)?PE:TK;return t(n,aN(e))}function IK(n,e){return Fv(AK(n,e),1)}var RK=1/0;function PK(n){var e=n==null?0:n.length;return e?Fv(n,RK):[]}function V_(n){for(var e=-1,t=n==null?0:n.length,i={};++e<t;){var s=n[e];i[s[0]]=s[1]}return i}function LK(n,e){return e.length<2?n:E1(n,e9(e,0,-1))}function Ys(n,e){return T1(n,e)}function os(n){return n==null}function hN(n){return n===void 0}var kK=SG(function(n,e,t){uN(n,e,t)});function OK(n,e){return e=Tp(e,n),n=LK(n,e),n==null||delete n[Ap(EK(e))]}function DK(n){return GD(n)?void 0:n}var NK=1,FK=2,BK=4,UK=VD(function(n,e){var t={};if(n==null)return t;var i=!1;e=PE(e,function(r){return r=Tp(r,n),i||(i=r.length>1),r}),Mp(n,qD(n),t),i&&(t=Af(t,NK|FK|BK,DK));for(var s=e.length;s--;)OK(t,e[s]);return t});function fN(n,e,t,i){if(!fr(n))return n;e=Tp(e,n);for(var s=-1,r=e.length,o=r-1,a=n;a!=null&&++s<r;){var l=Ap(e[s]),c=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return n;if(s!=o){var u=a[l];c=void 0,c===void 0&&(c=fr(u)?u:x1(e[s+1])?[]:{})}DE(a,l,c),a=a[l]}return n}function zK(n,e,t){for(var i=-1,s=e.length,r={};++i<s;){var o=e[i],a=E1(n,o);t(a,o)&&fN(r,Tp(o,n),a)}return r}function HK(n,e){return zK(n,e,function(t,i){return oN(n,i)})}var Aa=VD(function(n,e){return n==null?{}:HK(n,e)});function VK(n,e,t){return n==null?n:fN(n,e,t)}var $K="Expected a function";function yd(n,e,t){var i=!0,s=!0;if(typeof n!="function")throw new TypeError($K);return fr(t)&&(i="leading"in t?!!t.leading:i,s="trailing"in t?!!t.trailing:s),Lr(n,e,{leading:i,maxWait:e,trailing:s})}var GK=1/0,WK=Tf&&1/WE(new Tf([,-0]))[1]==GK?function(n){return new Tf(n)}:rG,KK=200;function YK(n,e,t){var i=-1,s=gG,r=n.length,o=!0,a=[],l=a;if(r>=KK){var c=WK(n);if(c)return WE(c);o=!1,s=nN,l=new Ag}else l=a;e:for(;++i<r;){var u=n[i],d=u;if(u=u!==0?u:0,o&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;a.push(u)}else s(l,d,t)||(l!==a&&l.push(d),a.push(u))}return a}var Qw=DD(function(n){return YK(Fv(n,1,cN,!0))});const ki=n=>n===void 0,_i=n=>typeof n=="boolean",Ct=n=>typeof n=="number",_o=n=>!n&&n!==0||rt(n)&&n.length===0||$t(n)&&!Object.keys(n).length,Lo=n=>typeof Element>"u"?!1:n instanceof Element,Hd=n=>os(n),XK=n=>Rt(n)?!Number.isNaN(Number(n)):!1,A1=n=>n===window,Qc=n=>Jt?window.requestAnimationFrame(n):setTimeout(n,16),Vd=n=>Jt?window.cancelAnimationFrame(n):clearTimeout(n),KE=(n="")=>n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),Ma=n=>Av(n),jf=n=>Object.keys(n),jK=n=>Object.entries(n),t_=(n,e,t)=>({get value(){return gi(n,e,t)},set value(i){VK(n,e,i)}});class qK extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function qi(n,e){throw new qK(`[${n}] ${e}`)}const pN=(n="")=>n.split(" ").filter(e=>!!e.trim()),Yr=(n,e)=>{if(!n||!e)return!1;if(e.includes(" "))throw new Error("className should not contain space.");return n.classList.contains(e)},xo=(n,e)=>{!n||!e.trim()||n.classList.add(...pN(e))},Xs=(n,e)=>{!n||!e.trim()||n.classList.remove(...pN(e))},Pc=(n,e)=>{var t;if(!Jt||!n||!e)return"";let i=Jr(e);i==="float"&&(i="cssFloat");try{const s=n.style[i];if(s)return s;const r=(t=document.defaultView)==null?void 0:t.getComputedStyle(n,"");return r?r[i]:""}catch{return n.style[i]}};function pi(n,e="px"){if(!n)return"";if(Ct(n)||XK(n))return`${n}${e}`;if(Rt(n))return n}const ZK=(n,e)=>{if(!Jt)return!1;const t={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(e)],i=Pc(n,t);return["scroll","auto","overlay"].some(s=>i.includes(s))},YE=(n,e)=>{if(!Jt)return;let t=n;for(;t;){if([window,document,document.documentElement].includes(t))return window;if(ZK(t,e))return t;t=t.parentNode}return t};let w0;const mN=n=>{var e;if(!Jt)return 0;if(w0!==void 0)return w0;const t=document.createElement("div");t.className=`${n}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const i=t.offsetWidth;t.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",t.appendChild(s);const r=s.offsetWidth;return(e=t.parentNode)==null||e.removeChild(t),w0=i-r,w0};function gN(n,e){if(!Jt)return;if(!e){n.scrollTop=0;return}const t=[];let i=e.offsetParent;for(;i!==null&&n!==i&&n.contains(i);)t.push(i),i=i.offsetParent;const s=e.offsetTop+t.reduce((l,c)=>l+c.offsetTop,0),r=s+e.offsetHeight,o=n.scrollTop,a=o+n.clientHeight;s<o?n.scrollTop=s:r>a&&(n.scrollTop=r-n.clientHeight)}function JK(n,e,t,i,s){const r=Date.now();let o;const a=()=>{const c=Date.now()-r,u=w$(c>i?i:c,e,t,i);A1(n)?n.scrollTo(window.pageXOffset,u):n.scrollTop=u,c<i?o=Qc(a):typeof s=="function"&&s()};return a(),()=>{o&&Vd(o)}}const aR=(n,e)=>A1(e)?n.ownerDocument.documentElement:e,lR=n=>A1(n)?window.scrollY:n.scrollTop,x0=n=>{if(!Jt||n==="")return null;if(Rt(n))try{return document.querySelector(n)}catch{return null}return n};/*! Element Plus Icons Vue v2.3.1 */var QK=se({name:"ArrowDown",__name:"arrow-down",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"})]))}}),jl=QK,eY=se({name:"ArrowLeft",__name:"arrow-left",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"})]))}}),eu=eY,tY=se({name:"ArrowRight",__name:"arrow-right",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"})]))}}),ur=tY,nY=se({name:"ArrowUp",__name:"arrow-up",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0"})]))}}),XE=nY,iY=se({name:"Back",__name:"back",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64"}),te("path",{fill:"currentColor",d:"m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312z"})]))}}),sY=iY,rY=se({name:"Calendar",__name:"calendar",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M128 384v512h768V192H768v32a32 32 0 1 1-64 0v-32H320v32a32 32 0 0 1-64 0v-32H128v128h768v64zm192-256h384V96a32 32 0 1 1 64 0v32h160a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h160V96a32 32 0 0 1 64 0zm-32 384h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64"})]))}}),oY=rY,aY=se({name:"Camera",__name:"camera",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M896 256H128v576h768zm-199.424-64-32.064-64h-304.96l-32 64zM96 192h160l46.336-92.608A64 64 0 0 1 359.552 64h304.96a64 64 0 0 1 57.216 35.328L768.192 192H928a32 32 0 0 1 32 32v640a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V224a32 32 0 0 1 32-32m416 512a160 160 0 1 0 0-320 160 160 0 0 0 0 320m0 64a224 224 0 1 1 0-448 224 224 0 0 1 0 448"})]))}}),bRe=aY,lY=se({name:"CaretRight",__name:"caret-right",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"})]))}}),vN=lY,cY=se({name:"CaretTop",__name:"caret-top",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M512 320 192 704h639.936z"})]))}}),uY=cY,dY=se({name:"Check",__name:"check",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"})]))}}),Bv=dY,hY=se({name:"CircleCheckFilled",__name:"circle-check-filled",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),fY=hY,pY=se({name:"CircleCheck",__name:"circle-check",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),te("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"})]))}}),jE=pY,mY=se({name:"CircleCloseFilled",__name:"circle-close-filled",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336z"})]))}}),qE=mY,gY=se({name:"CircleClose",__name:"circle-close",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),te("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),mu=gY,vY=se({name:"Clock",__name:"clock",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),te("path",{fill:"currentColor",d:"M480 256a32 32 0 0 1 32 32v256a32 32 0 0 1-64 0V288a32 32 0 0 1 32-32"}),te("path",{fill:"currentColor",d:"M480 512h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32"})]))}}),yN=vY,yY=se({name:"Close",__name:"close",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),ia=yY,_Y=se({name:"Crop",__name:"crop",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M256 768h672a32 32 0 1 1 0 64H224a32 32 0 0 1-32-32V96a32 32 0 0 1 64 0z"}),te("path",{fill:"currentColor",d:"M832 224v704a32 32 0 1 1-64 0V256H96a32 32 0 0 1 0-64h704a32 32 0 0 1 32 32"})]))}}),wRe=_Y,bY=se({name:"DArrowLeft",__name:"d-arrow-left",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L259.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L197.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224zm256 0a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L515.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L453.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224z"})]))}}),qf=bY,wY=se({name:"DArrowRight",__name:"d-arrow-right",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0 1 41.728.064L826.24 489.664a32 32 0 0 1 0 44.672L494.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L764.736 512 452.864 192a30.592 30.592 0 0 1 0-42.688m-256 0a29.12 29.12 0 0 1 41.728.064L570.24 489.664a32 32 0 0 1 0 44.672L238.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L508.736 512 196.864 192a30.592 30.592 0 0 1 0-42.688z"})]))}}),Zf=wY,xY=se({name:"Delete",__name:"delete",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32zm448-64v-64H416v64zM224 896h576V256H224zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32m192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32"})]))}}),SY=xY,CY=se({name:"Document",__name:"document",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h160v64H320zm0 384h384v64H320z"})]))}}),MY=CY,EY=se({name:"EditPen",__name:"edit-pen",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"m199.04 672.64 193.984 112 224-387.968-193.92-112-224 388.032zm-23.872 60.16 32.896 148.288 144.896-45.696zM455.04 229.248l193.92 112 56.704-98.112-193.984-112-56.64 98.112zM104.32 708.8l384-665.024 304.768 175.936L409.152 884.8h.064l-248.448 78.336zm384 254.272v-64h448v64h-448z"})]))}}),xRe=EY,TY=se({name:"Edit",__name:"edit",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M832 512a32 32 0 1 1 64 0v352a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h352a32 32 0 0 1 0 64H192v640h640z"}),te("path",{fill:"currentColor",d:"m469.952 554.24 52.8-7.552L847.104 222.4a32 32 0 1 0-45.248-45.248L477.44 501.44l-7.552 52.8zm422.4-422.4a96 96 0 0 1 0 135.808l-331.84 331.84a32 32 0 0 1-18.112 9.088L436.8 623.68a32 32 0 0 1-36.224-36.224l15.104-105.6a32 32 0 0 1 9.024-18.112l331.904-331.84a96 96 0 0 1 135.744 0z"})]))}}),SRe=TY,AY=se({name:"FullScreen",__name:"full-screen",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64z"})]))}}),IY=AY,RY=se({name:"Hide",__name:"hide",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"}),te("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"})]))}}),PY=RY,LY=se({name:"House",__name:"house",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M192 413.952V896h640V413.952L512 147.328zM139.52 374.4l352-293.312a32 32 0 0 1 40.96 0l352 293.312A32 32 0 0 1 896 398.976V928a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V398.976a32 32 0 0 1 11.52-24.576"})]))}}),CRe=LY,kY=se({name:"InfoFilled",__name:"info-filled",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64m67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344M590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"})]))}}),ZE=kY,OY=se({name:"Loading",__name:"loading",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})]))}}),Ha=OY,DY=se({name:"MapLocation",__name:"map-location",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M800 416a288 288 0 1 0-576 0c0 118.144 94.528 272.128 288 456.576C705.472 688.128 800 534.144 800 416M512 960C277.312 746.688 160 565.312 160 416a352 352 0 0 1 704 0c0 149.312-117.312 330.688-352 544"}),te("path",{fill:"currentColor",d:"M512 448a64 64 0 1 0 0-128 64 64 0 0 0 0 128m0 64a128 128 0 1 1 0-256 128 128 0 0 1 0 256m345.6 192L960 960H672v-64H352v64H64l102.4-256zm-68.928 0H235.328l-76.8 192h706.944z"})]))}}),MRe=DY,NY=se({name:"Minus",__name:"minus",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64"})]))}}),FY=NY,BY=se({name:"MoreFilled",__name:"more-filled",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224"})]))}}),cR=BY,UY=se({name:"More",__name:"more",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224 112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96 48 48 0 0 1 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96"})]))}}),zY=UY,HY=se({name:"Opportunity",__name:"opportunity",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M384 960v-64h192.064v64zm448-544a350.656 350.656 0 0 1-128.32 271.424C665.344 719.04 640 763.776 640 813.504V832H320v-14.336c0-48-19.392-95.36-57.216-124.992a351.552 351.552 0 0 1-128.448-344.256c25.344-136.448 133.888-248.128 269.76-276.48A352.384 352.384 0 0 1 832 416m-544 32c0-132.288 75.904-224 192-224v-64c-154.432 0-256 122.752-256 288z"})]))}}),ERe=HY,VY=se({name:"PictureFilled",__name:"picture-filled",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M96 896a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h832a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32zm315.52-228.48-68.928-68.928a32 32 0 0 0-45.248 0L128 768.064h778.688l-242.112-290.56a32 32 0 0 0-49.216 0L458.752 665.408a32 32 0 0 1-47.232 2.112M256 384a96 96 0 1 0 192.064-.064A96 96 0 0 0 256 384"})]))}}),$Y=VY,GY=se({name:"Plus",__name:"plus",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"})]))}}),_N=GY,WY=se({name:"QuestionFilled",__name:"question-filled",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992 13.376-19.712 35.2-28.864 66.176-28.864 23.936 0 42.944 6.336 56.32 19.712 12.672 13.376 19.712 31.68 19.712 54.912 0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76 6.336-12.672 15.488-24.64 28.16-35.2 33.792-29.568 54.208-48.576 60.544-55.616 16.896-22.528 26.048-51.392 26.048-86.592 0-42.944-14.08-76.736-42.24-101.376-28.16-25.344-65.472-37.312-111.232-37.312zm-12.672 406.208a54.272 54.272 0 0 0-38.72 14.784 49.408 49.408 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.848 54.848 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72 51.968 51.968 0 0 0-15.488-38.016 55.936 55.936 0 0 0-39.424-14.784z"})]))}}),KY=WY,YY=se({name:"RefreshLeft",__name:"refresh-left",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"})]))}}),XY=YY,jY=se({name:"RefreshRight",__name:"refresh-right",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"})]))}}),qY=jY,ZY=se({name:"ScaleToOriginal",__name:"scale-to-original",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zm-361.412 0a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118M512 361.412a30.118 30.118 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.118 30.118 0 0 0 512 361.412M512 512a30.118 30.118 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.118 30.118 0 0 0 512 512"})]))}}),JY=ZY,QY=se({name:"Search",__name:"search",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704"})]))}}),eX=QY,tX=se({name:"SortDown",__name:"sort-down",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M576 96v709.568L333.312 562.816A32 32 0 1 0 288 608l297.408 297.344A32 32 0 0 0 640 882.688V96a32 32 0 0 0-64 0"})]))}}),nX=tX,iX=se({name:"SortUp",__name:"sort-up",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M384 141.248V928a32 32 0 1 0 64 0V218.56l242.688 242.688A32 32 0 1 0 736 416L438.592 118.656A32 32 0 0 0 384 141.248"})]))}}),sX=iX,rX=se({name:"StarFilled",__name:"star-filled",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M283.84 867.84 512 747.776l228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72z"})]))}}),S0=rX,oX=se({name:"Star",__name:"star",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"m512 747.84 228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72zM313.6 924.48a70.4 70.4 0 0 1-102.144-74.24l37.888-220.928L88.96 472.96A70.4 70.4 0 0 1 128 352.896l221.76-32.256 99.2-200.96a70.4 70.4 0 0 1 126.208 0l99.2 200.96 221.824 32.256a70.4 70.4 0 0 1 39.04 120.064L774.72 629.376l37.888 220.928a70.4 70.4 0 0 1-102.144 74.24L512 820.096l-198.4 104.32z"})]))}}),aX=oX,lX=se({name:"SuccessFilled",__name:"success-filled",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),bN=lX,cX=se({name:"Tickets",__name:"tickets",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M192 128v768h640V128zm-32-64h704a32 32 0 0 1 32 32v832a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h192v64H320zm0 384h384v64H320z"})]))}}),TRe=cX,uX=se({name:"UserFilled",__name:"user-filled",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M288 320a224 224 0 1 0 448 0 224 224 0 1 0-448 0m544 608H160a32 32 0 0 1-32-32v-96a160 160 0 0 1 160-160h448a160 160 0 0 1 160 160v96a32 32 0 0 1-32 32z"})]))}}),ARe=uX,dX=se({name:"VideoCamera",__name:"video-camera",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M704 768V256H128v512zm64-416 192-96v512l-192-96v128a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V224a32 32 0 0 1 32-32h640a32 32 0 0 1 32 32zm0 71.552v176.896l128 64V359.552zM192 320h192v64H192z"})]))}}),IRe=dX,hX=se({name:"View",__name:"view",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"})]))}}),fX=hX,pX=se({name:"WarningFilled",__name:"warning-filled",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"})]))}}),I1=pX,mX=se({name:"ZoomIn",__name:"zoom-in",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704m-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64z"})]))}}),wN=mX,gX=se({name:"ZoomOut",__name:"zoom-out",setup(n){return(e,t)=>(k(),Y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[te("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704M352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64"})]))}}),vX=gX;const xN="__epPropKey",ge=n=>n,yX=n=>$t(n)&&!!n[xN],aa=(n,e)=>{if(!$t(n)||yX(n))return n;const{values:t,required:i,default:s,type:r,validator:o}=n,l={type:r,required:!!i,validator:t||o?c=>{let u=!1,d=[];if(t&&(d=Array.from(t),Qt(n,"default")&&d.push(s),u||(u=d.includes(c))),o&&(u||(u=o(c))),!u&&d.length>0){const h=[...new Set(d)].map(f=>JSON.stringify(f)).join(", ");sV(`Invalid prop: validation failed${e?` for prop "${e}"`:""}. Expected one of [${h}], got value ${JSON.stringify(c)}.`)}return u}:void 0,[xN]:!0};return Qt(n,"default")&&(l.default=s),l},Ye=n=>V_(Object.entries(n).map(([e,t])=>[e,aa(t,e)])),xn=ge([String,Object,Function]),JE={Close:ia},QE={Close:ia,SuccessFilled:bN,InfoFilled:ZE,WarningFilled:I1,CircleCloseFilled:qE},tu={success:bN,warning:I1,error:qE,info:ZE},eT={validating:Ha,success:jE,error:mu},Ht=(n,e)=>{if(n.install=t=>{for(const i of[n,...Object.values(e??{})])t.component(i.name,i)},e)for(const[t,i]of Object.entries(e))n[t]=i;return n},SN=(n,e)=>(n.install=t=>{n._context=t._context,t.config.globalProperties[e]=n},n),_X=(n,e)=>(n.install=t=>{t.directive(e,n)},n),si=n=>(n.install=mn,n),R1=(...n)=>e=>{n.forEach(t=>{xt(t)?t(e):t.value=e})},wt={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},bX=["year","years","month","months","date","dates","week","datetime","datetimerange","daterange","monthrange"],ex=["sun","mon","tue","wed","thu","fri","sat"],Gt="update:modelValue",Fn="change",dr="input",uR=Symbol("INSTALLED_KEY"),Ya=["","default","small","large"],CN=n=>["",...Ya].includes(n);var po=(n=>(n[n.TEXT=1]="TEXT",n[n.CLASS=2]="CLASS",n[n.STYLE=4]="STYLE",n[n.PROPS=8]="PROPS",n[n.FULL_PROPS=16]="FULL_PROPS",n[n.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",n[n.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",n[n.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",n[n.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",n[n.NEED_PATCH=512]="NEED_PATCH",n[n.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",n[n.HOISTED=-1]="HOISTED",n[n.BAIL=-2]="BAIL",n))(po||{});function fC(n){return Jn(n)&&n.type===mt}function wX(n){return Jn(n)&&n.type===Es}function xX(n){return Jn(n)&&!fC(n)&&!wX(n)}const SX=n=>{if(!Jn(n))return{};const e=n.props||{},t=(Jn(n.type)?n.type.props:void 0)||{},i={};return Object.keys(t).forEach(s=>{Qt(t[s],"default")&&(i[s]=t[s].default)}),Object.keys(e).forEach(s=>{i[Jr(s)]=e[s]}),i},CX=n=>{if(!rt(n)||n.length>1)throw new Error("expect to receive a single Vue element child");return n[0]},Wc=n=>{const e=rt(n)?n:[n],t=[];return e.forEach(i=>{var s;rt(i)?t.push(...Wc(i)):Jn(i)&&rt(i.children)?t.push(...Wc(i.children)):(t.push(i),Jn(i)&&((s=i.component)!=null&&s.subTree)&&t.push(...Wc(i.component.subTree)))}),t},dR=n=>[...new Set(n)],Vs=n=>!n&&n!==0?[]:Array.isArray(n)?n:[n],tT=n=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(n),ni=n=>n;function MX(n){let e=0;const t=(...i)=>{e&&Vd(e),e=Qc(()=>{n(...i),e=0})};return t.cancel=()=>{Vd(e),e=0},t}const EX=["class","style"],TX=/^on[A-Z]/,nT=(n={})=>{const{excludeListeners:e=!1,excludeKeys:t}=n,i=R(()=>((t==null?void 0:t.value)||[]).concat(EX)),s=zt();return R(s?()=>{var r;return V_(Object.entries((r=s.proxy)==null?void 0:r.$attrs).filter(([o])=>!i.value.includes(o)&&!(e&&TX.test(o))))}:()=>({}))},ns=({from:n,replacement:e,scope:t,version:i,ref:s,type:r="API"},o)=>{ze(()=>g(o),a=>{},{immediate:!0})},MN=(n,e,t,i)=>{let s={offsetX:0,offsetY:0};const r=l=>{const c=l.clientX,u=l.clientY,{offsetX:d,offsetY:h}=s,f=n.value.getBoundingClientRect(),m=f.left,p=f.top,y=f.width,v=f.height,_=document.documentElement.clientWidth,b=document.documentElement.clientHeight,w=-m+d,x=-p+h,S=_-m-y+d,C=b-p-v+h,T=E=>{let A=d+E.clientX-c,I=h+E.clientY-u;i!=null&&i.value||(A=Math.min(Math.max(A,w),S),I=Math.min(Math.max(I,x),C)),s={offsetX:A,offsetY:I},n.value&&(n.value.style.transform=`translate(${pi(A)}, ${pi(I)})`)},M=()=>{document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",M)};document.addEventListener("mousemove",T),document.addEventListener("mouseup",M)},o=()=>{e.value&&n.value&&e.value.addEventListener("mousedown",r)},a=()=>{e.value&&n.value&&e.value.removeEventListener("mousedown",r)};Ft(()=>{Is(()=>{t.value?o():a()})}),kn(()=>{a()})};var AX={name:"en",el:{breadcrumb:{label:"Breadcrumb"},colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tour:{next:"Next",previous:"Previous",finish:"Finish"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},carousel:{leftArrow:"Carousel arrow left",rightArrow:"Carousel arrow right",indicator:"Carousel switch to index {index}"}}};const IX=n=>(e,t)=>RX(e,t,g(n)),RX=(n,e,t)=>gi(t,n,n).replace(/\{(\w+)\}/g,(i,s)=>{var r;return`${(r=e==null?void 0:e[s])!=null?r:`{${s}}`}`}),PX=n=>{const e=R(()=>g(n).name),t=Gn(n)?n:V(n);return{lang:e,locale:t,t:IX(n)}},EN=Symbol("localeContextKey"),en=n=>{const e=n||ct(EN,V());return PX(R(()=>e.value||AX))},Km="el",LX="is-",Cu=(n,e,t,i,s)=>{let r=`${n}-${e}`;return t&&(r+=`-${t}`),i&&(r+=`__${i}`),s&&(r+=`--${s}`),r},TN=Symbol("namespaceContextKey"),iT=n=>{const e=n||(zt()?ct(TN,V(Km)):V(Km));return R(()=>g(e)||Km)},Ve=(n,e)=>{const t=iT(e);return{namespace:t,b:(p="")=>Cu(t.value,n,p,"",""),e:p=>p?Cu(t.value,n,"",p,""):"",m:p=>p?Cu(t.value,n,"","",p):"",be:(p,y)=>p&&y?Cu(t.value,n,p,y,""):"",em:(p,y)=>p&&y?Cu(t.value,n,"",p,y):"",bm:(p,y)=>p&&y?Cu(t.value,n,p,"",y):"",bem:(p,y,v)=>p&&y&&v?Cu(t.value,n,p,y,v):"",is:(p,...y)=>{const v=y.length>=1?y[0]:!0;return p&&v?`${LX}${p}`:""},cssVar:p=>{const y={};for(const v in p)p[v]&&(y[`--${t.value}-${v}`]=p[v]);return y},cssVarName:p=>`--${t.value}-${p}`,cssVarBlock:p=>{const y={};for(const v in p)p[v]&&(y[`--${t.value}-${n}-${v}`]=p[v]);return y},cssVarBlockName:p=>`--${t.value}-${n}-${p}`}},sT=(n,e={})=>{Gn(n)||qi("[useLockscreen]","You need to pass a ref param to this function");const t=e.ns||Ve("popup"),i=R(()=>t.bm("parent","hidden"));if(!Jt||Yr(document.body,i.value))return;let s=0,r=!1,o="0";const a=()=>{setTimeout(()=>{Xs(document==null?void 0:document.body,i.value),r&&document&&(document.body.style.width=o)},200)};ze(n,l=>{if(!l){a();return}r=!Yr(document.body,i.value),r&&(o=document.body.style.width),s=mN(t.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,u=Pc(document.body,"overflowY");s>0&&(c||u==="scroll")&&r&&(document.body.style.width=`calc(100% - ${s}px)`),xo(document.body,i.value)}),rO(()=>a())},kX=aa({type:ge(Boolean),default:null}),OX=aa({type:ge(Function)}),AN=n=>{const e=`update:${n}`,t=`onUpdate:${n}`,i=[e],s={[n]:kX,[t]:OX};return{useModelToggle:({indicator:o,toggleReason:a,shouldHideWhenRouteChanges:l,shouldProceed:c,onShow:u,onHide:d})=>{const h=zt(),{emit:f}=h,m=h.props,p=R(()=>xt(m[t])),y=R(()=>m[n]===null),v=C=>{o.value!==!0&&(o.value=!0,a&&(a.value=C),xt(u)&&u(C))},_=C=>{o.value!==!1&&(o.value=!1,a&&(a.value=C),xt(d)&&d(C))},b=C=>{if(m.disabled===!0||xt(c)&&!c())return;const T=p.value&&Jt;T&&f(e,!0),(y.value||!T)&&v(C)},w=C=>{if(m.disabled===!0||!Jt)return;const T=p.value&&Jt;T&&f(e,!1),(y.value||!T)&&_(C)},x=C=>{_i(C)&&(m.disabled&&C?p.value&&f(e,!1):o.value!==C&&(C?v():_()))},S=()=>{o.value?w():b()};return ze(()=>m[n],x),l&&h.appContext.config.globalProperties.$route!==void 0&&ze(()=>({...h.proxy.$route}),()=>{l.value&&o.value&&w()}),Ft(()=>{x(m[n])}),{hide:w,show:b,toggle:S,hasUpdateHandler:p}},useModelToggleProps:s,useModelToggleEmits:i}};AN("modelValue");const IN=n=>{const e=zt();return R(()=>{var t,i;return(i=(t=e==null?void 0:e.proxy)==null?void 0:t.$props)==null?void 0:i[n]})};var Mr="top",ko="bottom",Oo="right",Er="left",rT="auto",Uv=[Mr,ko,Oo,Er],Jf="start",Ig="end",DX="clippingParents",RN="viewport",Kp="popper",NX="reference",hR=Uv.reduce(function(n,e){return n.concat([e+"-"+Jf,e+"-"+Ig])},[]),dh=[].concat(Uv,[rT]).reduce(function(n,e){return n.concat([e,e+"-"+Jf,e+"-"+Ig])},[]),FX="beforeRead",BX="read",UX="afterRead",zX="beforeMain",HX="main",VX="afterMain",$X="beforeWrite",GX="write",WX="afterWrite",KX=[FX,BX,UX,zX,HX,VX,$X,GX,WX];function Va(n){return n?(n.nodeName||"").toLowerCase():null}function la(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function Qf(n){var e=la(n).Element;return n instanceof e||n instanceof Element}function Io(n){var e=la(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function oT(n){if(typeof ShadowRoot>"u")return!1;var e=la(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function YX(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var i=e.styles[t]||{},s=e.attributes[t]||{},r=e.elements[t];!Io(r)||!Va(r)||(Object.assign(r.style,i),Object.keys(s).forEach(function(o){var a=s[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function XX(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(i){var s=e.elements[i],r=e.attributes[i]||{},o=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:t[i]),a=o.reduce(function(l,c){return l[c]="",l},{});!Io(s)||!Va(s)||(Object.assign(s.style,a),Object.keys(r).forEach(function(l){s.removeAttribute(l)}))})}}var PN={name:"applyStyles",enabled:!0,phase:"write",fn:YX,effect:XX,requires:["computeStyles"]};function ka(n){return n.split("-")[0]}var _d=Math.max,$_=Math.min,ep=Math.round;function tp(n,e){e===void 0&&(e=!1);var t=n.getBoundingClientRect(),i=1,s=1;if(Io(n)&&e){var r=n.offsetHeight,o=n.offsetWidth;o>0&&(i=ep(t.width)/o||1),r>0&&(s=ep(t.height)/r||1)}return{width:t.width/i,height:t.height/s,top:t.top/s,right:t.right/i,bottom:t.bottom/s,left:t.left/i,x:t.left/i,y:t.top/s}}function aT(n){var e=tp(n),t=n.offsetWidth,i=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:i}}function LN(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&oT(t)){var i=e;do{if(i&&n.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Pl(n){return la(n).getComputedStyle(n)}function jX(n){return["table","td","th"].indexOf(Va(n))>=0}function gu(n){return((Qf(n)?n.ownerDocument:n.document)||window.document).documentElement}function P1(n){return Va(n)==="html"?n:n.assignedSlot||n.parentNode||(oT(n)?n.host:null)||gu(n)}function fR(n){return!Io(n)||Pl(n).position==="fixed"?null:n.offsetParent}function qX(n){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,t=navigator.userAgent.indexOf("Trident")!==-1;if(t&&Io(n)){var i=Pl(n);if(i.position==="fixed")return null}var s=P1(n);for(oT(s)&&(s=s.host);Io(s)&&["html","body"].indexOf(Va(s))<0;){var r=Pl(s);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||e&&r.willChange==="filter"||e&&r.filter&&r.filter!=="none")return s;s=s.parentNode}return null}function zv(n){for(var e=la(n),t=fR(n);t&&jX(t)&&Pl(t).position==="static";)t=fR(t);return t&&(Va(t)==="html"||Va(t)==="body"&&Pl(t).position==="static")?e:t||qX(n)||e}function lT(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function Ym(n,e,t){return _d(n,$_(e,t))}function ZX(n,e,t){var i=Ym(n,e,t);return i>t?t:i}function kN(){return{top:0,right:0,bottom:0,left:0}}function ON(n){return Object.assign({},kN(),n)}function DN(n,e){return e.reduce(function(t,i){return t[i]=n,t},{})}var JX=function(n,e){return n=typeof n=="function"?n(Object.assign({},e.rects,{placement:e.placement})):n,ON(typeof n!="number"?n:DN(n,Uv))};function QX(n){var e,t=n.state,i=n.name,s=n.options,r=t.elements.arrow,o=t.modifiersData.popperOffsets,a=ka(t.placement),l=lT(a),c=[Er,Oo].indexOf(a)>=0,u=c?"height":"width";if(!(!r||!o)){var d=JX(s.padding,t),h=aT(r),f=l==="y"?Mr:Er,m=l==="y"?ko:Oo,p=t.rects.reference[u]+t.rects.reference[l]-o[l]-t.rects.popper[u],y=o[l]-t.rects.reference[l],v=zv(r),_=v?l==="y"?v.clientHeight||0:v.clientWidth||0:0,b=p/2-y/2,w=d[f],x=_-h[u]-d[m],S=_/2-h[u]/2+b,C=Ym(w,S,x),T=l;t.modifiersData[i]=(e={},e[T]=C,e.centerOffset=C-S,e)}}function ej(n){var e=n.state,t=n.options,i=t.element,s=i===void 0?"[data-popper-arrow]":i;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||!LN(e.elements.popper,s)||(e.elements.arrow=s))}var tj={name:"arrow",enabled:!0,phase:"main",fn:QX,effect:ej,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function np(n){return n.split("-")[1]}var nj={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ij(n){var e=n.x,t=n.y,i=window,s=i.devicePixelRatio||1;return{x:ep(e*s)/s||0,y:ep(t*s)/s||0}}function pR(n){var e,t=n.popper,i=n.popperRect,s=n.placement,r=n.variation,o=n.offsets,a=n.position,l=n.gpuAcceleration,c=n.adaptive,u=n.roundOffsets,d=n.isFixed,h=o.x,f=h===void 0?0:h,m=o.y,p=m===void 0?0:m,y=typeof u=="function"?u({x:f,y:p}):{x:f,y:p};f=y.x,p=y.y;var v=o.hasOwnProperty("x"),_=o.hasOwnProperty("y"),b=Er,w=Mr,x=window;if(c){var S=zv(t),C="clientHeight",T="clientWidth";if(S===la(t)&&(S=gu(t),Pl(S).position!=="static"&&a==="absolute"&&(C="scrollHeight",T="scrollWidth")),S=S,s===Mr||(s===Er||s===Oo)&&r===Ig){w=ko;var M=d&&S===x&&x.visualViewport?x.visualViewport.height:S[C];p-=M-i.height,p*=l?1:-1}if(s===Er||(s===Mr||s===ko)&&r===Ig){b=Oo;var E=d&&S===x&&x.visualViewport?x.visualViewport.width:S[T];f-=E-i.width,f*=l?1:-1}}var A=Object.assign({position:a},c&&nj),I=u===!0?ij({x:f,y:p}):{x:f,y:p};if(f=I.x,p=I.y,l){var B;return Object.assign({},A,(B={},B[w]=_?"0":"",B[b]=v?"0":"",B.transform=(x.devicePixelRatio||1)<=1?"translate("+f+"px, "+p+"px)":"translate3d("+f+"px, "+p+"px, 0)",B))}return Object.assign({},A,(e={},e[w]=_?p+"px":"",e[b]=v?f+"px":"",e.transform="",e))}function sj(n){var e=n.state,t=n.options,i=t.gpuAcceleration,s=i===void 0?!0:i,r=t.adaptive,o=r===void 0?!0:r,a=t.roundOffsets,l=a===void 0?!0:a,c={placement:ka(e.placement),variation:np(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,pR(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,pR(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var NN={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:sj,data:{}},C0={passive:!0};function rj(n){var e=n.state,t=n.instance,i=n.options,s=i.scroll,r=s===void 0?!0:s,o=i.resize,a=o===void 0?!0:o,l=la(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&c.forEach(function(u){u.addEventListener("scroll",t.update,C0)}),a&&l.addEventListener("resize",t.update,C0),function(){r&&c.forEach(function(u){u.removeEventListener("scroll",t.update,C0)}),a&&l.removeEventListener("resize",t.update,C0)}}var FN={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:rj,data:{}},oj={left:"right",right:"left",bottom:"top",top:"bottom"};function n_(n){return n.replace(/left|right|bottom|top/g,function(e){return oj[e]})}var aj={start:"end",end:"start"};function mR(n){return n.replace(/start|end/g,function(e){return aj[e]})}function cT(n){var e=la(n),t=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:t,scrollTop:i}}function uT(n){return tp(gu(n)).left+cT(n).scrollLeft}function lj(n){var e=la(n),t=gu(n),i=e.visualViewport,s=t.clientWidth,r=t.clientHeight,o=0,a=0;return i&&(s=i.width,r=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=i.offsetLeft,a=i.offsetTop)),{width:s,height:r,x:o+uT(n),y:a}}function cj(n){var e,t=gu(n),i=cT(n),s=(e=n.ownerDocument)==null?void 0:e.body,r=_d(t.scrollWidth,t.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=_d(t.scrollHeight,t.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-i.scrollLeft+uT(n),l=-i.scrollTop;return Pl(s||t).direction==="rtl"&&(a+=_d(t.clientWidth,s?s.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}function dT(n){var e=Pl(n),t=e.overflow,i=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+s+i)}function BN(n){return["html","body","#document"].indexOf(Va(n))>=0?n.ownerDocument.body:Io(n)&&dT(n)?n:BN(P1(n))}function Xm(n,e){var t;e===void 0&&(e=[]);var i=BN(n),s=i===((t=n.ownerDocument)==null?void 0:t.body),r=la(i),o=s?[r].concat(r.visualViewport||[],dT(i)?i:[]):i,a=e.concat(o);return s?a:a.concat(Xm(P1(o)))}function pC(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function uj(n){var e=tp(n);return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}function gR(n,e){return e===RN?pC(lj(n)):Qf(e)?uj(e):pC(cj(gu(n)))}function dj(n){var e=Xm(P1(n)),t=["absolute","fixed"].indexOf(Pl(n).position)>=0,i=t&&Io(n)?zv(n):n;return Qf(i)?e.filter(function(s){return Qf(s)&&LN(s,i)&&Va(s)!=="body"}):[]}function hj(n,e,t){var i=e==="clippingParents"?dj(n):[].concat(e),s=[].concat(i,[t]),r=s[0],o=s.reduce(function(a,l){var c=gR(n,l);return a.top=_d(c.top,a.top),a.right=$_(c.right,a.right),a.bottom=$_(c.bottom,a.bottom),a.left=_d(c.left,a.left),a},gR(n,r));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function UN(n){var e=n.reference,t=n.element,i=n.placement,s=i?ka(i):null,r=i?np(i):null,o=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2,l;switch(s){case Mr:l={x:o,y:e.y-t.height};break;case ko:l={x:o,y:e.y+e.height};break;case Oo:l={x:e.x+e.width,y:a};break;case Er:l={x:e.x-t.width,y:a};break;default:l={x:e.x,y:e.y}}var c=s?lT(s):null;if(c!=null){var u=c==="y"?"height":"width";switch(r){case Jf:l[c]=l[c]-(e[u]/2-t[u]/2);break;case Ig:l[c]=l[c]+(e[u]/2-t[u]/2);break}}return l}function Rg(n,e){e===void 0&&(e={});var t=e,i=t.placement,s=i===void 0?n.placement:i,r=t.boundary,o=r===void 0?DX:r,a=t.rootBoundary,l=a===void 0?RN:a,c=t.elementContext,u=c===void 0?Kp:c,d=t.altBoundary,h=d===void 0?!1:d,f=t.padding,m=f===void 0?0:f,p=ON(typeof m!="number"?m:DN(m,Uv)),y=u===Kp?NX:Kp,v=n.rects.popper,_=n.elements[h?y:u],b=hj(Qf(_)?_:_.contextElement||gu(n.elements.popper),o,l),w=tp(n.elements.reference),x=UN({reference:w,element:v,strategy:"absolute",placement:s}),S=pC(Object.assign({},v,x)),C=u===Kp?S:w,T={top:b.top-C.top+p.top,bottom:C.bottom-b.bottom+p.bottom,left:b.left-C.left+p.left,right:C.right-b.right+p.right},M=n.modifiersData.offset;if(u===Kp&&M){var E=M[s];Object.keys(T).forEach(function(A){var I=[Oo,ko].indexOf(A)>=0?1:-1,B=[Mr,ko].indexOf(A)>=0?"y":"x";T[A]+=E[B]*I})}return T}function fj(n,e){e===void 0&&(e={});var t=e,i=t.placement,s=t.boundary,r=t.rootBoundary,o=t.padding,a=t.flipVariations,l=t.allowedAutoPlacements,c=l===void 0?dh:l,u=np(i),d=u?a?hR:hR.filter(function(m){return np(m)===u}):Uv,h=d.filter(function(m){return c.indexOf(m)>=0});h.length===0&&(h=d);var f=h.reduce(function(m,p){return m[p]=Rg(n,{placement:p,boundary:s,rootBoundary:r,padding:o})[ka(p)],m},{});return Object.keys(f).sort(function(m,p){return f[m]-f[p]})}function pj(n){if(ka(n)===rT)return[];var e=n_(n);return[mR(n),e,mR(e)]}function mj(n){var e=n.state,t=n.options,i=n.name;if(!e.modifiersData[i]._skip){for(var s=t.mainAxis,r=s===void 0?!0:s,o=t.altAxis,a=o===void 0?!0:o,l=t.fallbackPlacements,c=t.padding,u=t.boundary,d=t.rootBoundary,h=t.altBoundary,f=t.flipVariations,m=f===void 0?!0:f,p=t.allowedAutoPlacements,y=e.options.placement,v=ka(y),_=v===y,b=l||(_||!m?[n_(y)]:pj(y)),w=[y].concat(b).reduce(function(ae,_e){return ae.concat(ka(_e)===rT?fj(e,{placement:_e,boundary:u,rootBoundary:d,padding:c,flipVariations:m,allowedAutoPlacements:p}):_e)},[]),x=e.rects.reference,S=e.rects.popper,C=new Map,T=!0,M=w[0],E=0;E<w.length;E++){var A=w[E],I=ka(A),B=np(A)===Jf,F=[Mr,ko].indexOf(I)>=0,U=F?"width":"height",P=Rg(e,{placement:A,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),O=F?B?Oo:Er:B?ko:Mr;x[U]>S[U]&&(O=n_(O));var D=n_(O),L=[];if(r&&L.push(P[I]<=0),a&&L.push(P[O]<=0,P[D]<=0),L.every(function(ae){return ae})){M=A,T=!1;break}C.set(A,L)}if(T)for(var H=m?3:1,X=function(ae){var _e=w.find(function(re){var xe=C.get(re);if(xe)return xe.slice(0,ae).every(function(he){return he})});if(_e)return M=_e,"break"},ne=H;ne>0;ne--){var ce=X(ne);if(ce==="break")break}e.placement!==M&&(e.modifiersData[i]._skip=!0,e.placement=M,e.reset=!0)}}var gj={name:"flip",enabled:!0,phase:"main",fn:mj,requiresIfExists:["offset"],data:{_skip:!1}};function vR(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function yR(n){return[Mr,Oo,ko,Er].some(function(e){return n[e]>=0})}function vj(n){var e=n.state,t=n.name,i=e.rects.reference,s=e.rects.popper,r=e.modifiersData.preventOverflow,o=Rg(e,{elementContext:"reference"}),a=Rg(e,{altBoundary:!0}),l=vR(o,i),c=vR(a,s,r),u=yR(l),d=yR(c);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}var yj={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:vj};function _j(n,e,t){var i=ka(n),s=[Er,Mr].indexOf(i)>=0?-1:1,r=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,o=r[0],a=r[1];return o=o||0,a=(a||0)*s,[Er,Oo].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function bj(n){var e=n.state,t=n.options,i=n.name,s=t.offset,r=s===void 0?[0,0]:s,o=dh.reduce(function(u,d){return u[d]=_j(d,e.rects,r),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=o}var wj={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:bj};function xj(n){var e=n.state,t=n.name;e.modifiersData[t]=UN({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var zN={name:"popperOffsets",enabled:!0,phase:"read",fn:xj,data:{}};function Sj(n){return n==="x"?"y":"x"}function Cj(n){var e=n.state,t=n.options,i=n.name,s=t.mainAxis,r=s===void 0?!0:s,o=t.altAxis,a=o===void 0?!1:o,l=t.boundary,c=t.rootBoundary,u=t.altBoundary,d=t.padding,h=t.tether,f=h===void 0?!0:h,m=t.tetherOffset,p=m===void 0?0:m,y=Rg(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),v=ka(e.placement),_=np(e.placement),b=!_,w=lT(v),x=Sj(w),S=e.modifiersData.popperOffsets,C=e.rects.reference,T=e.rects.popper,M=typeof p=="function"?p(Object.assign({},e.rects,{placement:e.placement})):p,E=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),A=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,I={x:0,y:0};if(S){if(r){var B,F=w==="y"?Mr:Er,U=w==="y"?ko:Oo,P=w==="y"?"height":"width",O=S[w],D=O+y[F],L=O-y[U],H=f?-T[P]/2:0,X=_===Jf?C[P]:T[P],ne=_===Jf?-T[P]:-C[P],ce=e.elements.arrow,ae=f&&ce?aT(ce):{width:0,height:0},_e=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:kN(),re=_e[F],xe=_e[U],he=Ym(0,C[P],ae[P]),Te=b?C[P]/2-H-he-re-E.mainAxis:X-he-re-E.mainAxis,Ce=b?-C[P]/2+H+he+xe+E.mainAxis:ne+he+xe+E.mainAxis,we=e.elements.arrow&&zv(e.elements.arrow),K=we?w==="y"?we.clientTop||0:we.clientLeft||0:0,j=(B=A==null?void 0:A[w])!=null?B:0,ie=O+Te-j-K,ve=O+Ce-j,ye=Ym(f?$_(D,ie):D,O,f?_d(L,ve):L);S[w]=ye,I[w]=ye-O}if(a){var me,be=w==="x"?Mr:Er,Pe=w==="x"?ko:Oo,Z=S[x],$=x==="y"?"height":"width",de=Z+y[be],Ae=Z-y[Pe],De=[Mr,Er].indexOf(v)!==-1,fe=(me=A==null?void 0:A[x])!=null?me:0,Ge=De?de:Z-C[$]-T[$]-fe+E.altAxis,We=De?Z+C[$]+T[$]-fe-E.altAxis:Ae,je=f&&De?ZX(Ge,Z,We):Ym(f?Ge:de,Z,f?We:Ae);S[x]=je,I[x]=je-Z}e.modifiersData[i]=I}}var Mj={name:"preventOverflow",enabled:!0,phase:"main",fn:Cj,requiresIfExists:["offset"]};function Ej(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function Tj(n){return n===la(n)||!Io(n)?cT(n):Ej(n)}function Aj(n){var e=n.getBoundingClientRect(),t=ep(e.width)/n.offsetWidth||1,i=ep(e.height)/n.offsetHeight||1;return t!==1||i!==1}function Ij(n,e,t){t===void 0&&(t=!1);var i=Io(e),s=Io(e)&&Aj(e),r=gu(e),o=tp(n,s),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!t)&&((Va(e)!=="body"||dT(r))&&(a=Tj(e)),Io(e)?(l=tp(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):r&&(l.x=uT(r))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function Rj(n){var e=new Map,t=new Set,i=[];n.forEach(function(r){e.set(r.name,r)});function s(r){t.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!t.has(a)){var l=e.get(a);l&&s(l)}}),i.push(r)}return n.forEach(function(r){t.has(r.name)||s(r)}),i}function Pj(n){var e=Rj(n);return KX.reduce(function(t,i){return t.concat(e.filter(function(s){return s.phase===i}))},[])}function Lj(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function kj(n){var e=n.reduce(function(t,i){var s=t[i.name];return t[i.name]=s?Object.assign({},s,i,{options:Object.assign({},s.options,i.options),data:Object.assign({},s.data,i.data)}):i,t},{});return Object.keys(e).map(function(t){return e[t]})}var _R={placement:"bottom",modifiers:[],strategy:"absolute"};function bR(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function hT(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,i=t===void 0?[]:t,s=e.defaultOptions,r=s===void 0?_R:s;return function(o,a,l){l===void 0&&(l=r);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},_R,r),modifiersData:{},elements:{reference:o,popper:a},attributes:{},styles:{}},u=[],d=!1,h={state:c,setOptions:function(p){var y=typeof p=="function"?p(c.options):p;m(),c.options=Object.assign({},r,c.options,y),c.scrollParents={reference:Qf(o)?Xm(o):o.contextElement?Xm(o.contextElement):[],popper:Xm(a)};var v=Pj(kj([].concat(i,c.options.modifiers)));return c.orderedModifiers=v.filter(function(_){return _.enabled}),f(),h.update()},forceUpdate:function(){if(!d){var p=c.elements,y=p.reference,v=p.popper;if(bR(y,v)){c.rects={reference:Ij(y,zv(v),c.options.strategy==="fixed"),popper:aT(v)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(T){return c.modifiersData[T.name]=Object.assign({},T.data)});for(var _=0;_<c.orderedModifiers.length;_++){if(c.reset===!0){c.reset=!1,_=-1;continue}var b=c.orderedModifiers[_],w=b.fn,x=b.options,S=x===void 0?{}:x,C=b.name;typeof w=="function"&&(c=w({state:c,options:S,name:C,instance:h})||c)}}}},update:Lj(function(){return new Promise(function(p){h.forceUpdate(),p(c)})}),destroy:function(){m(),d=!0}};if(!bR(o,a))return h;h.setOptions(l).then(function(p){!d&&l.onFirstUpdate&&l.onFirstUpdate(p)});function f(){c.orderedModifiers.forEach(function(p){var y=p.name,v=p.options,_=v===void 0?{}:v,b=p.effect;if(typeof b=="function"){var w=b({state:c,name:y,instance:h,options:_}),x=function(){};u.push(w||x)}})}function m(){u.forEach(function(p){return p()}),u=[]}return h}}hT();var Oj=[FN,zN,NN,PN];hT({defaultModifiers:Oj});var Dj=[FN,zN,NN,PN,wj,gj,Mj,tj,yj],Nj=hT({defaultModifiers:Dj});const Fj=(n,e,t={})=>{const i={name:"updateState",enabled:!0,phase:"write",fn:({state:l})=>{const c=Bj(l);Object.assign(o.value,c)},requires:["computeStyles"]},s=R(()=>{const{onFirstUpdate:l,placement:c,strategy:u,modifiers:d}=g(t);return{onFirstUpdate:l,placement:c||"bottom",strategy:u||"absolute",modifiers:[...d||[],i,{name:"applyStyles",enabled:!1}]}}),r=Vn(),o=V({styles:{popper:{position:g(s).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),a=()=>{r.value&&(r.value.destroy(),r.value=void 0)};return ze(s,l=>{const c=g(r);c&&c.setOptions(l)},{deep:!0}),ze([n,e],([l,c])=>{a(),!(!l||!c)&&(r.value=Nj(l,c,g(s)))}),kn(()=>{a()}),{state:R(()=>{var l;return{...((l=g(r))==null?void 0:l.state)||{}}}),styles:R(()=>g(o).styles),attributes:R(()=>g(o).attributes),update:()=>{var l;return(l=g(r))==null?void 0:l.update()},forceUpdate:()=>{var l;return(l=g(r))==null?void 0:l.forceUpdate()},instanceRef:R(()=>g(r))}};function Bj(n){const e=Object.keys(n.elements),t=V_(e.map(s=>[s,n.styles[s]||{}])),i=V_(e.map(s=>[s,n.attributes[s]]));return{styles:t,attributes:i}}const fT=n=>{if(!n)return{onClick:mn,onMousedown:mn,onMouseup:mn};let e=!1,t=!1;return{onClick:o=>{e&&t&&n(o),e=t=!1},onMousedown:o=>{e=o.target===o.currentTarget},onMouseup:o=>{t=o.target===o.currentTarget}}},Uj=(n,e=0)=>{if(e===0)return n;const t=V(!1);let i=0;const s=()=>{i&&clearTimeout(i),i=window.setTimeout(()=>{t.value=n.value},e)};return Ft(s),ze(()=>n.value,r=>{r?s():t.value=r}),t};function wR(){let n;const e=(i,s)=>{t(),n=window.setTimeout(i,s)},t=()=>window.clearTimeout(n);return kv(()=>t()),{registerTimeout:e,cancelTimeout:t}}const xR={prefix:Math.floor(Math.random()*1e4),current:0},zj=Symbol("elIdInjection"),pT=()=>zt()?ct(zj,xR):xR,Ls=n=>{const e=pT(),t=iT();return R(()=>g(n)||`${t.value}-id-${e.prefix}-${e.current++}`)};let af=[];const SR=n=>{const e=n;e.key===wt.esc&&af.forEach(t=>t(e))},Hj=n=>{Ft(()=>{af.length===0&&document.addEventListener("keydown",SR),Jt&&af.push(n)}),kn(()=>{af=af.filter(e=>e!==n),af.length===0&&Jt&&document.removeEventListener("keydown",SR)})};let CR;const HN=()=>{const n=iT(),e=pT(),t=R(()=>`${n.value}-popper-container-${e.prefix}`),i=R(()=>`#${t.value}`);return{id:t,selector:i}},Vj=n=>{const e=document.createElement("div");return e.id=n,document.body.appendChild(e),e},$j=()=>{const{id:n,selector:e}=HN();return v1(()=>{Jt&&!CR&&!document.body.querySelector(e.value)&&(CR=Vj(n.value))}),{id:n,selector:e}},Gj=Ye({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),Wj=({showAfter:n,hideAfter:e,autoClose:t,open:i,close:s})=>{const{registerTimeout:r}=wR(),{registerTimeout:o,cancelTimeout:a}=wR();return{onOpen:u=>{r(()=>{i(u);const d=g(t);Ct(d)&&d>0&&o(()=>{s(u)},d)},g(n))},onClose:u=>{a(),r(()=>{s(u)},g(e))}}},VN=Symbol("elForwardRef"),Kj=n=>{Xt(VN,{setForwardRef:t=>{n.value=t}})},Yj=n=>({mounted(e){n(e)},updated(e){n(e)},unmounted(){n(null)}}),MR={current:0},ER=V(0),$N=2e3,TR=Symbol("elZIndexContextKey"),GN=Symbol("zIndexContextKey"),Ip=n=>{const e=zt()?ct(TR,MR):MR,t=n||(zt()?ct(GN,void 0):void 0),i=R(()=>{const o=g(t);return Ct(o)?o:$N}),s=R(()=>i.value+ER.value),r=()=>(e.current++,ER.value=e.current,s.value);return!Jt&&ct(TR),{initialZIndex:i,currentZIndex:s,nextZIndex:r}},ip=Math.min,bd=Math.max,G_=Math.round,M0=Math.floor,nu=n=>({x:n,y:n}),Xj={left:"right",right:"left",bottom:"top",top:"bottom"},jj={start:"end",end:"start"};function mC(n,e,t){return bd(n,ip(e,t))}function Hv(n,e){return typeof n=="function"?n(e):n}function $d(n){return n.split("-")[0]}function Vv(n){return n.split("-")[1]}function WN(n){return n==="x"?"y":"x"}function mT(n){return n==="y"?"height":"width"}function sp(n){return["top","bottom"].includes($d(n))?"y":"x"}function gT(n){return WN(sp(n))}function qj(n,e,t){t===void 0&&(t=!1);const i=Vv(n),s=gT(n),r=mT(s);let o=s==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(o=W_(o)),[o,W_(o)]}function Zj(n){const e=W_(n);return[gC(n),e,gC(e)]}function gC(n){return n.replace(/start|end/g,e=>jj[e])}function Jj(n,e,t){const i=["left","right"],s=["right","left"],r=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?s:i:e?i:s;case"left":case"right":return e?r:o;default:return[]}}function Qj(n,e,t,i){const s=Vv(n);let r=Jj($d(n),t==="start",i);return s&&(r=r.map(o=>o+"-"+s),e&&(r=r.concat(r.map(gC)))),r}function W_(n){return n.replace(/left|right|bottom|top/g,e=>Xj[e])}function eq(n){return{top:0,right:0,bottom:0,left:0,...n}}function KN(n){return typeof n!="number"?eq(n):{top:n,right:n,bottom:n,left:n}}function K_(n){const{x:e,y:t,width:i,height:s}=n;return{width:i,height:s,top:t,left:e,right:e+i,bottom:t+s,x:e,y:t}}function AR(n,e,t){let{reference:i,floating:s}=n;const r=sp(e),o=gT(e),a=mT(o),l=$d(e),c=r==="y",u=i.x+i.width/2-s.width/2,d=i.y+i.height/2-s.height/2,h=i[a]/2-s[a]/2;let f;switch(l){case"top":f={x:u,y:i.y-s.height};break;case"bottom":f={x:u,y:i.y+i.height};break;case"right":f={x:i.x+i.width,y:d};break;case"left":f={x:i.x-s.width,y:d};break;default:f={x:i.x,y:i.y}}switch(Vv(e)){case"start":f[o]-=h*(t&&c?-1:1);break;case"end":f[o]+=h*(t&&c?-1:1);break}return f}const tq=async(n,e,t)=>{const{placement:i="bottom",strategy:s="absolute",middleware:r=[],platform:o}=t,a=r.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:s}),{x:u,y:d}=AR(c,i,l),h=i,f={},m=0;for(let p=0;p<a.length;p++){const{name:y,fn:v}=a[p],{x:_,y:b,data:w,reset:x}=await v({x:u,y:d,initialPlacement:i,placement:h,strategy:s,middlewareData:f,rects:c,platform:o,elements:{reference:n,floating:e}});u=_??u,d=b??d,f={...f,[y]:{...f[y],...w}},x&&m<=50&&(m++,typeof x=="object"&&(x.placement&&(h=x.placement),x.rects&&(c=x.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:s}):x.rects),{x:u,y:d}=AR(c,h,l)),p=-1)}return{x:u,y:d,placement:h,strategy:s,middlewareData:f}};async function vT(n,e){var t;e===void 0&&(e={});const{x:i,y:s,platform:r,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=Hv(e,n),m=KN(f),y=a[h?d==="floating"?"reference":"floating":d],v=K_(await r.getClippingRect({element:(t=await(r.isElement==null?void 0:r.isElement(y)))==null||t?y:y.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),_=d==="floating"?{x:i,y:s,width:o.floating.width,height:o.floating.height}:o.reference,b=await(r.getOffsetParent==null?void 0:r.getOffsetParent(a.floating)),w=await(r.isElement==null?void 0:r.isElement(b))?await(r.getScale==null?void 0:r.getScale(b))||{x:1,y:1}:{x:1,y:1},x=K_(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:_,offsetParent:b,strategy:l}):_);return{top:(v.top-x.top+m.top)/w.y,bottom:(x.bottom-v.bottom+m.bottom)/w.y,left:(v.left-x.left+m.left)/w.x,right:(x.right-v.right+m.right)/w.x}}const nq=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:i,placement:s,rects:r,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Hv(n,e)||{};if(c==null)return{};const d=KN(u),h={x:t,y:i},f=gT(s),m=mT(f),p=await o.getDimensions(c),y=f==="y",v=y?"top":"left",_=y?"bottom":"right",b=y?"clientHeight":"clientWidth",w=r.reference[m]+r.reference[f]-h[f]-r.floating[m],x=h[f]-r.reference[f],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let C=S?S[b]:0;(!C||!await(o.isElement==null?void 0:o.isElement(S)))&&(C=a.floating[b]||r.floating[m]);const T=w/2-x/2,M=C/2-p[m]/2-1,E=ip(d[v],M),A=ip(d[_],M),I=E,B=C-p[m]-A,F=C/2-p[m]/2+T,U=mC(I,F,B),P=!l.arrow&&Vv(s)!=null&&F!==U&&r.reference[m]/2-(F<I?E:A)-p[m]/2<0,O=P?F<I?F-I:F-B:0;return{[f]:h[f]+O,data:{[f]:U,centerOffset:F-U-O,...P&&{alignmentOffset:O}},reset:P}}}),iq=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,i;const{placement:s,middlewareData:r,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:p=!0,...y}=Hv(n,e);if((t=r.arrow)!=null&&t.alignmentOffset)return{};const v=$d(s),_=sp(a),b=$d(a)===a,w=await(l.isRTL==null?void 0:l.isRTL(c.floating)),x=h||(b||!p?[W_(a)]:Zj(a)),S=m!=="none";!h&&S&&x.push(...Qj(a,p,m,w));const C=[a,...x],T=await vT(e,y),M=[];let E=((i=r.flip)==null?void 0:i.overflows)||[];if(u&&M.push(T[v]),d){const F=qj(s,o,w);M.push(T[F[0]],T[F[1]])}if(E=[...E,{placement:s,overflows:M}],!M.every(F=>F<=0)){var A,I;const F=(((A=r.flip)==null?void 0:A.index)||0)+1,U=C[F];if(U)return{data:{index:F,overflows:E},reset:{placement:U}};let P=(I=E.filter(O=>O.overflows[0]<=0).sort((O,D)=>O.overflows[1]-D.overflows[1])[0])==null?void 0:I.placement;if(!P)switch(f){case"bestFit":{var B;const O=(B=E.filter(D=>{if(S){const L=sp(D.placement);return L===_||L==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(L=>L>0).reduce((L,H)=>L+H,0)]).sort((D,L)=>D[1]-L[1])[0])==null?void 0:B[0];O&&(P=O);break}case"initialPlacement":P=a;break}if(s!==P)return{reset:{placement:P}}}return{}}}};async function sq(n,e){const{placement:t,platform:i,elements:s}=n,r=await(i.isRTL==null?void 0:i.isRTL(s.floating)),o=$d(t),a=Vv(t),l=sp(t)==="y",c=["left","top"].includes(o)?-1:1,u=r&&l?-1:1,d=Hv(e,n);let{mainAxis:h,crossAxis:f,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof m=="number"&&(f=a==="end"?m*-1:m),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}const rq=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,i;const{x:s,y:r,placement:o,middlewareData:a}=e,l=await sq(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:s+l.x,y:r+l.y,data:{...l,placement:o}}}}},oq=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:s}=e,{mainAxis:r=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:v,y:_}=y;return{x:v,y:_}}},...l}=Hv(n,e),c={x:t,y:i},u=await vT(e,l),d=sp($d(s)),h=WN(d);let f=c[h],m=c[d];if(r){const y=h==="y"?"top":"left",v=h==="y"?"bottom":"right",_=f+u[y],b=f-u[v];f=mC(_,f,b)}if(o){const y=d==="y"?"top":"left",v=d==="y"?"bottom":"right",_=m+u[y],b=m-u[v];m=mC(_,m,b)}const p=a.fn({...e,[h]:f,[d]:m});return{...p,data:{x:p.x-t,y:p.y-i}}}}};function Rp(n){return YN(n)?(n.nodeName||"").toLowerCase():"#document"}function Xr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function ql(n){var e;return(e=(YN(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function YN(n){return n instanceof Node||n instanceof Xr(n).Node}function sa(n){return n instanceof Element||n instanceof Xr(n).Element}function $a(n){return n instanceof HTMLElement||n instanceof Xr(n).HTMLElement}function IR(n){return typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Xr(n).ShadowRoot}function $v(n){const{overflow:e,overflowX:t,overflowY:i,display:s}=ra(n);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!["inline","contents"].includes(s)}function aq(n){return["table","td","th"].includes(Rp(n))}function L1(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function yT(n){const e=_T(),t=sa(n)?ra(n):n;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(t.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(t.contain||"").includes(i))}function lq(n){let e=iu(n);for(;$a(e)&&!rp(e);){if(yT(e))return e;if(L1(e))return null;e=iu(e)}return null}function _T(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function rp(n){return["html","body","#document"].includes(Rp(n))}function ra(n){return Xr(n).getComputedStyle(n)}function k1(n){return sa(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function iu(n){if(Rp(n)==="html")return n;const e=n.assignedSlot||n.parentNode||IR(n)&&n.host||ql(n);return IR(e)?e.host:e}function XN(n){const e=iu(n);return rp(e)?n.ownerDocument?n.ownerDocument.body:n.body:$a(e)&&$v(e)?e:XN(e)}function Pg(n,e,t){var i;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=XN(n),r=s===((i=n.ownerDocument)==null?void 0:i.body),o=Xr(s);if(r){const a=vC(o);return e.concat(o,o.visualViewport||[],$v(s)?s:[],a&&t?Pg(a):[])}return e.concat(s,Pg(s,[],t))}function vC(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function jN(n){const e=ra(n);let t=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const s=$a(n),r=s?n.offsetWidth:t,o=s?n.offsetHeight:i,a=G_(t)!==r||G_(i)!==o;return a&&(t=r,i=o),{width:t,height:i,$:a}}function bT(n){return sa(n)?n:n.contextElement}function If(n){const e=bT(n);if(!$a(e))return nu(1);const t=e.getBoundingClientRect(),{width:i,height:s,$:r}=jN(e);let o=(r?G_(t.width):t.width)/i,a=(r?G_(t.height):t.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const cq=nu(0);function qN(n){const e=Xr(n);return!_T()||!e.visualViewport?cq:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function uq(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Xr(n)?!1:e}function Gd(n,e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),r=bT(n);let o=nu(1);e&&(i?sa(i)&&(o=If(i)):o=If(n));const a=uq(r,t,i)?qN(r):nu(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,d=s.height/o.y;if(r){const h=Xr(r),f=i&&sa(i)?Xr(i):i;let m=h,p=vC(m);for(;p&&i&&f!==m;){const y=If(p),v=p.getBoundingClientRect(),_=ra(p),b=v.left+(p.clientLeft+parseFloat(_.paddingLeft))*y.x,w=v.top+(p.clientTop+parseFloat(_.paddingTop))*y.y;l*=y.x,c*=y.y,u*=y.x,d*=y.y,l+=b,c+=w,m=Xr(p),p=vC(m)}}return K_({width:u,height:d,x:l,y:c})}function dq(n){let{elements:e,rect:t,offsetParent:i,strategy:s}=n;const r=s==="fixed",o=ql(i),a=e?L1(e.floating):!1;if(i===o||a&&r)return t;let l={scrollLeft:0,scrollTop:0},c=nu(1);const u=nu(0),d=$a(i);if((d||!d&&!r)&&((Rp(i)!=="body"||$v(o))&&(l=k1(i)),$a(i))){const h=Gd(i);c=If(i),u.x=h.x+i.clientLeft,u.y=h.y+i.clientTop}return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x,y:t.y*c.y-l.scrollTop*c.y+u.y}}function hq(n){return Array.from(n.getClientRects())}function ZN(n){return Gd(ql(n)).left+k1(n).scrollLeft}function fq(n){const e=ql(n),t=k1(n),i=n.ownerDocument.body,s=bd(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),r=bd(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-t.scrollLeft+ZN(n);const a=-t.scrollTop;return ra(i).direction==="rtl"&&(o+=bd(e.clientWidth,i.clientWidth)-s),{width:s,height:r,x:o,y:a}}function pq(n,e){const t=Xr(n),i=ql(n),s=t.visualViewport;let r=i.clientWidth,o=i.clientHeight,a=0,l=0;if(s){r=s.width,o=s.height;const c=_T();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:r,height:o,x:a,y:l}}function mq(n,e){const t=Gd(n,!0,e==="fixed"),i=t.top+n.clientTop,s=t.left+n.clientLeft,r=$a(n)?If(n):nu(1),o=n.clientWidth*r.x,a=n.clientHeight*r.y,l=s*r.x,c=i*r.y;return{width:o,height:a,x:l,y:c}}function RR(n,e,t){let i;if(e==="viewport")i=pq(n,t);else if(e==="document")i=fq(ql(n));else if(sa(e))i=mq(e,t);else{const s=qN(n);i={...e,x:e.x-s.x,y:e.y-s.y}}return K_(i)}function JN(n,e){const t=iu(n);return t===e||!sa(t)||rp(t)?!1:ra(t).position==="fixed"||JN(t,e)}function gq(n,e){const t=e.get(n);if(t)return t;let i=Pg(n,[],!1).filter(a=>sa(a)&&Rp(a)!=="body"),s=null;const r=ra(n).position==="fixed";let o=r?iu(n):n;for(;sa(o)&&!rp(o);){const a=ra(o),l=yT(o);!l&&a.position==="fixed"&&(s=null),(r?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||$v(o)&&!l&&JN(n,o))?i=i.filter(u=>u!==o):s=a,o=iu(o)}return e.set(n,i),i}function vq(n){let{element:e,boundary:t,rootBoundary:i,strategy:s}=n;const o=[...t==="clippingAncestors"?L1(e)?[]:gq(e,this._c):[].concat(t),i],a=o[0],l=o.reduce((c,u)=>{const d=RR(e,u,s);return c.top=bd(d.top,c.top),c.right=ip(d.right,c.right),c.bottom=ip(d.bottom,c.bottom),c.left=bd(d.left,c.left),c},RR(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function yq(n){const{width:e,height:t}=jN(n);return{width:e,height:t}}function _q(n,e,t){const i=$a(e),s=ql(e),r=t==="fixed",o=Gd(n,!0,r,e);let a={scrollLeft:0,scrollTop:0};const l=nu(0);if(i||!i&&!r)if((Rp(e)!=="body"||$v(s))&&(a=k1(e)),i){const d=Gd(e,!0,r,e);l.x=d.x+e.clientLeft,l.y=d.y+e.clientTop}else s&&(l.x=ZN(s));const c=o.left+a.scrollLeft-l.x,u=o.top+a.scrollTop-l.y;return{x:c,y:u,width:o.width,height:o.height}}function tx(n){return ra(n).position==="static"}function PR(n,e){return!$a(n)||ra(n).position==="fixed"?null:e?e(n):n.offsetParent}function QN(n,e){const t=Xr(n);if(L1(n))return t;if(!$a(n)){let s=iu(n);for(;s&&!rp(s);){if(sa(s)&&!tx(s))return s;s=iu(s)}return t}let i=PR(n,e);for(;i&&aq(i)&&tx(i);)i=PR(i,e);return i&&rp(i)&&tx(i)&&!yT(i)?t:i||lq(n)||t}const bq=async function(n){const e=this.getOffsetParent||QN,t=this.getDimensions,i=await t(n.floating);return{reference:_q(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function wq(n){return ra(n).direction==="rtl"}const xq={convertOffsetParentRelativeRectToViewportRelativeRect:dq,getDocumentElement:ql,getClippingRect:vq,getOffsetParent:QN,getElementRects:bq,getClientRects:hq,getDimensions:yq,getScale:If,isElement:sa,isRTL:wq};function Sq(n,e){let t=null,i;const s=ql(n);function r(){var a;clearTimeout(i),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),r();const{left:c,top:u,width:d,height:h}=n.getBoundingClientRect();if(a||e(),!d||!h)return;const f=M0(u),m=M0(s.clientWidth-(c+d)),p=M0(s.clientHeight-(u+h)),y=M0(c),_={rootMargin:-f+"px "+-m+"px "+-p+"px "+-y+"px",threshold:bd(0,ip(1,l))||1};let b=!0;function w(x){const S=x[0].intersectionRatio;if(S!==l){if(!b)return o();S?o(!1,S):i=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{t=new IntersectionObserver(w,{..._,root:s.ownerDocument})}catch{t=new IntersectionObserver(w,_)}t.observe(n)}return o(!0),r}function Cq(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:s=!0,ancestorResize:r=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=bT(n),u=s||r?[...c?Pg(c):[],...Pg(e)]:[];u.forEach(v=>{s&&v.addEventListener("scroll",t,{passive:!0}),r&&v.addEventListener("resize",t)});const d=c&&a?Sq(c,t):null;let h=-1,f=null;o&&(f=new ResizeObserver(v=>{let[_]=v;_&&_.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=f)==null||b.observe(e)})),t()}),c&&!l&&f.observe(c),f.observe(e));let m,p=l?Gd(n):null;l&&y();function y(){const v=Gd(n);p&&(v.x!==p.x||v.y!==p.y||v.width!==p.width||v.height!==p.height)&&t(),p=v,m=requestAnimationFrame(y)}return t(),()=>{var v;u.forEach(_=>{s&&_.removeEventListener("scroll",t),r&&_.removeEventListener("resize",t)}),d==null||d(),(v=f)==null||v.disconnect(),f=null,l&&cancelAnimationFrame(m)}}const Mq=vT,e4=rq,Eq=oq,Tq=iq,t4=nq,n4=(n,e,t)=>{const i=new Map,s={platform:xq,...t},r={...s.platform,_c:i};return tq(n,e,{...s,platform:r})};Ye({});const Aq=n=>{if(!Jt)return;if(!n)return n;const e=xr(n);return e||(Gn(n)?e:n)},Iq=({middleware:n,placement:e,strategy:t})=>{const i=V(),s=V(),r=V(),o=V(),a=V({}),l={x:r,y:o,placement:e,strategy:t,middlewareData:a},c=async()=>{if(!Jt)return;const u=Aq(i),d=xr(s);if(!u||!d)return;const h=await n4(u,d,{placement:g(e),strategy:g(t),middleware:g(n)});jf(l).forEach(f=>{l[f].value=h[f]})};return Ft(()=>{Is(()=>{c()})}),{...l,update:c,referenceRef:i,contentRef:s}},Rq=({arrowRef:n,padding:e})=>({name:"arrow",options:{element:n,padding:e},fn(t){const i=g(n);return i?t4({element:i,padding:e}).fn(t):{}}});function Pq(n){const e=V();function t(){if(n.value==null)return;const{selectionStart:s,selectionEnd:r,value:o}=n.value;if(s==null||r==null)return;const a=o.slice(0,Math.max(0,s)),l=o.slice(Math.max(0,r));e.value={selectionStart:s,selectionEnd:r,value:o,beforeTxt:a,afterTxt:l}}function i(){if(n.value==null||e.value==null)return;const{value:s}=n.value,{beforeTxt:r,afterTxt:o,selectionStart:a}=e.value;if(r==null||o==null||a==null)return;let l=s.length;if(s.endsWith(o))l=s.length-o.length;else if(s.startsWith(r))l=r.length;else{const c=r[a-1],u=s.indexOf(c,a-1);u!==-1&&(l=u+1)}n.value.setSelectionRange(l,l)}return[t,i]}const Lq=(n,e,t)=>Wc(n.subTree).filter(r=>{var o;return Jn(r)&&((o=r.type)==null?void 0:o.name)===e&&!!r.component}).map(r=>r.component.uid).map(r=>t[r]).filter(r=>!!r),wT=(n,e)=>{const t={},i=Vn([]);return{children:i,addChild:o=>{t[o.uid]=o,i.value=Lq(n,e,t)},removeChild:o=>{delete t[o],i.value=i.value.filter(a=>a.uid!==o)}}},Zi=aa({type:String,values:Ya,required:!1}),i4=Symbol("size"),s4=()=>{const n=ct(i4,{});return R(()=>g(n.size)||"")};function O1(n,{afterFocus:e,beforeBlur:t,afterBlur:i}={}){const s=zt(),{emit:r}=s,o=Vn(),a=V(!1),l=d=>{a.value||(a.value=!0,r("focus",d),e==null||e())},c=d=>{var h;xt(t)&&t(d)||d.relatedTarget&&((h=o.value)!=null&&h.contains(d.relatedTarget))||(a.value=!1,r("blur",d),i==null||i())},u=()=>{var d;(d=n.value)==null||d.focus()};return ze(o,d=>{d&&d.setAttribute("tabindex","-1")}),Dn(o,"click",u),{wrapperRef:o,isFocused:a,handleFocus:l,handleBlur:c}}const r4=Symbol("emptyValuesContextKey"),kq=["",void 0,null],Oq=void 0,Pp=Ye({emptyValues:Array,valueOnClear:{type:[String,Number,Boolean,Function],default:void 0,validator:n=>xt(n)?!n():!n}}),D1=(n,e)=>{const t=zt()?ct(r4,V({})):V({}),i=R(()=>n.emptyValues||t.value.emptyValues||kq),s=R(()=>xt(n.valueOnClear)?n.valueOnClear():n.valueOnClear!==void 0?n.valueOnClear:xt(t.value.valueOnClear)?t.value.valueOnClear():t.value.valueOnClear!==void 0?t.value.valueOnClear:e!==void 0?e:Oq),r=o=>i.value.includes(o);return i.value.includes(s.value),{emptyValues:i,valueOnClear:s,isEmptyValue:r}},Dq=Ye({ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical","undefined"]},ariaControls:String}),Ss=n=>Aa(Dq,n),o4=Symbol(),Y_=V();function N1(n,e=void 0){const t=zt()?ct(o4,Y_):Y_;return n?R(()=>{var i,s;return(s=(i=t.value)==null?void 0:i[n])!=null?s:e}):t}function F1(n,e){const t=N1(),i=Ve(n,R(()=>{var a;return((a=t.value)==null?void 0:a.namespace)||Km})),s=en(R(()=>{var a;return(a=t.value)==null?void 0:a.locale})),r=Ip(R(()=>{var a;return((a=t.value)==null?void 0:a.zIndex)||$N})),o=R(()=>{var a;return g(e)||((a=t.value)==null?void 0:a.size)||""});return xT(R(()=>g(t)||{})),{ns:i,locale:s,zIndex:r,size:o}}const xT=(n,e,t=!1)=>{var i;const s=!!zt(),r=s?N1():void 0,o=(i=e==null?void 0:e.provide)!=null?i:s?Xt:void 0;if(!o)return;const a=R(()=>{const l=g(n);return r!=null&&r.value?Nq(r.value,l):l});return o(o4,a),o(EN,R(()=>a.value.locale)),o(TN,R(()=>a.value.namespace)),o(GN,R(()=>a.value.zIndex)),o(i4,{size:R(()=>a.value.size||"")}),o(r4,R(()=>({emptyValues:a.value.emptyValues,valueOnClear:a.value.valueOnClear}))),(t||!Y_.value)&&(Y_.value=a.value),a},Nq=(n,e)=>{const t=[...new Set([...jf(n),...jf(e)])],i={};for(const s of t)i[s]=e[s]!==void 0?e[s]:n[s];return i},Fq=Ye({a11y:{type:Boolean,default:!0},locale:{type:ge(Object)},size:Zi,button:{type:ge(Object)},experimentalFeatures:{type:ge(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:ge(Object)},zIndex:Number,namespace:{type:String,default:"el"},...Pp}),yC={},Bq=se({name:"ElConfigProvider",props:Fq,setup(n,{slots:e}){ze(()=>n.message,i=>{Object.assign(yC,i??{})},{immediate:!0,deep:!0});const t=xT(n);return()=>ke(e,"default",{config:t==null?void 0:t.value})}}),Uq=Ht(Bq),zq="2.7.8",Hq=(n=[])=>({version:zq,install:(t,i)=>{t[uR]||(t[uR]=!0,n.forEach(s=>t.use(s)),i&&xT(i,t,!0))}}),Vq=Ye({zIndex:{type:ge([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),$q={scroll:({scrollTop:n,fixed:e})=>Ct(n)&&_i(e),[Fn]:n=>_i(n)};var Ze=(n,e)=>{const t=n.__vccOpts||n;for(const[i,s]of e)t[i]=s;return t};const a4="ElAffix",Gq=se({name:a4}),Wq=se({...Gq,props:Vq,emits:$q,setup(n,{expose:e,emit:t}){const i=n,s=Ve("affix"),r=Vn(),o=Vn(),a=Vn(),{height:l}=_$(),{height:c,width:u,top:d,bottom:h,update:f}=CI(o,{windowScroll:!1}),m=CI(r),p=V(!1),y=V(0),v=V(0),_=R(()=>({height:p.value?`${c.value}px`:"",width:p.value?`${u.value}px`:""})),b=R(()=>{if(!p.value)return{};const S=i.offset?pi(i.offset):0;return{height:`${c.value}px`,width:`${u.value}px`,top:i.position==="top"?S:"",bottom:i.position==="bottom"?S:"",transform:v.value?`translateY(${v.value}px)`:"",zIndex:i.zIndex}}),w=()=>{if(a.value)if(y.value=a.value instanceof Window?document.documentElement.scrollTop:a.value.scrollTop||0,i.position==="top")if(i.target){const S=m.bottom.value-i.offset-c.value;p.value=i.offset>d.value&&m.bottom.value>0,v.value=S<0?S:0}else p.value=i.offset>d.value;else if(i.target){const S=l.value-m.top.value-i.offset-c.value;p.value=l.value-i.offset<h.value&&l.value>m.top.value,v.value=S<0?-S:0}else p.value=l.value-i.offset<h.value},x=()=>{f(),t("scroll",{scrollTop:y.value,fixed:p.value})};return ze(p,S=>t("change",S)),Ft(()=>{var S;i.target?(r.value=(S=document.querySelector(i.target))!=null?S:void 0,r.value||qi(a4,`Target does not exist: ${i.target}`)):r.value=document.documentElement,a.value=YE(o.value,!0),f()}),Dn(a,"scroll",x),Is(w),e({update:w,updateRoot:f}),(S,C)=>(k(),Y("div",{ref_key:"root",ref:o,class:z(g(s).b()),style:pt(g(_))},[te("div",{class:z({[g(s).m("fixed")]:p.value}),style:pt(g(b))},[ke(S.$slots,"default")],6)],6))}});var Kq=Ze(Wq,[["__file","affix.vue"]]);const Yq=Ht(Kq),Xq=Ye({size:{type:ge([Number,String])},color:{type:String}}),jq=se({name:"ElIcon",inheritAttrs:!1}),qq=se({...jq,props:Xq,setup(n){const e=n,t=Ve("icon"),i=R(()=>{const{size:s,color:r}=e;return!s&&!r?{}:{fontSize:ki(s)?void 0:pi(s),"--color":r}});return(s,r)=>(k(),Y("i",Kt({class:g(t).b(),style:g(i)},s.$attrs),[ke(s.$slots,"default")],16))}});var Zq=Ze(qq,[["__file","icon.vue"]]);const dt=Ht(Zq),Jq=["light","dark"],Qq=Ye({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:jf(tu),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:Jq,default:"light"}}),eZ={close:n=>n instanceof MouseEvent},tZ=se({name:"ElAlert"}),nZ=se({...tZ,props:Qq,emits:eZ,setup(n,{emit:e}){const t=n,{Close:i}=QE,s=hs(),r=Ve("alert"),o=V(!0),a=R(()=>tu[t.type]),l=R(()=>[r.e("icon"),{[r.is("big")]:!!t.description||!!s.default}]),c=R(()=>({"with-description":t.description||s.default})),u=d=>{o.value=!1,e("close",d)};return(d,h)=>(k(),Re(ji,{name:g(r).b("fade"),persisted:""},{default:pe(()=>[Bt(te("div",{class:z([g(r).b(),g(r).m(d.type),g(r).is("center",d.center),g(r).is(d.effect)]),role:"alert"},[d.showIcon&&g(a)?(k(),Re(g(dt),{key:0,class:z(g(l))},{default:pe(()=>[(k(),Re(Wt(g(a))))]),_:1},8,["class"])):Ee("v-if",!0),te("div",{class:z(g(r).e("content"))},[d.title||d.$slots.title?(k(),Y("span",{key:0,class:z([g(r).e("title"),g(c)])},[ke(d.$slots,"title",{},()=>[Yt(Je(d.title),1)])],2)):Ee("v-if",!0),d.$slots.default||d.description?(k(),Y("p",{key:1,class:z(g(r).e("description"))},[ke(d.$slots,"default",{},()=>[Yt(Je(d.description),1)])],2)):Ee("v-if",!0),d.closable?(k(),Y(mt,{key:2},[d.closeText?(k(),Y("div",{key:0,class:z([g(r).e("close-btn"),g(r).is("customed")]),onClick:u},Je(d.closeText),3)):(k(),Re(g(dt),{key:1,class:z(g(r).e("close-btn")),onClick:u},{default:pe(()=>[le(g(i))]),_:1},8,["class"]))],64)):Ee("v-if",!0)],2)],2),[[an,o.value]])]),_:3},8,["name"]))}});var iZ=Ze(nZ,[["__file","alert.vue"]]);const sZ=Ht(iZ),hh=Symbol("formContextKey"),Ga=Symbol("formItemContextKey"),Hi=(n,e={})=>{const t=V(void 0),i=e.prop?t:IN("size"),s=e.global?t:s4(),r=e.form?{size:void 0}:ct(hh,void 0),o=e.formItem?{size:void 0}:ct(Ga,void 0);return R(()=>i.value||g(n)||(o==null?void 0:o.size)||(r==null?void 0:r.size)||s.value||"")},mr=n=>{const e=IN("disabled"),t=ct(hh,void 0);return R(()=>e.value||g(n)||(t==null?void 0:t.disabled)||!1)},Qs=()=>{const n=ct(hh,void 0),e=ct(Ga,void 0);return{form:n,formItem:e}},ca=(n,{formItemContext:e,disableIdGeneration:t,disableIdManagement:i})=>{t||(t=V(!1)),i||(i=V(!1));const s=V();let r;const o=R(()=>{var a;return!!(!(n.label||n.ariaLabel)&&e&&e.inputIds&&((a=e.inputIds)==null?void 0:a.length)<=1)});return Ft(()=>{r=ze([vn(n,"id"),t],([a,l])=>{const c=a??(l?void 0:Ls().value);c!==s.value&&(e!=null&&e.removeInputId&&(s.value&&e.removeInputId(s.value),!(i!=null&&i.value)&&!l&&c&&e.addInputId(c)),s.value=c)},{immediate:!0})}),fu(()=>{r&&r(),e!=null&&e.removeInputId&&s.value&&e.removeInputId(s.value)}),{isLabeledByFormItem:o,inputId:s}},rZ=Ye({size:{type:String,values:Ya},disabled:Boolean}),oZ=Ye({...rZ,model:Object,rules:{type:ge(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),aZ={validate:(n,e,t)=>(rt(n)||Rt(n))&&_i(e)&&Rt(t)};function lZ(){const n=V([]),e=R(()=>{if(!n.value.length)return"0";const r=Math.max(...n.value);return r?`${r}px`:""});function t(r){const o=n.value.indexOf(r);return o===-1&&e.value,o}function i(r,o){if(r&&o){const a=t(o);n.value.splice(a,1,r)}else r&&n.value.push(r)}function s(r){const o=t(r);o>-1&&n.value.splice(o,1)}return{autoLabelWidth:e,registerLabelWidth:i,deregisterLabelWidth:s}}const E0=(n,e)=>{const t=Jc(e);return t.length>0?n.filter(i=>i.prop&&t.includes(i.prop)):n},cZ="ElForm",uZ=se({name:cZ}),dZ=se({...uZ,props:oZ,emits:aZ,setup(n,{expose:e,emit:t}){const i=n,s=[],r=Hi(),o=Ve("form"),a=R(()=>{const{labelPosition:b,inline:w}=i;return[o.b(),o.m(r.value||"default"),{[o.m(`label-${b}`)]:b,[o.m("inline")]:w}]}),l=b=>s.find(w=>w.prop===b),c=b=>{s.push(b)},u=b=>{b.prop&&s.splice(s.indexOf(b),1)},d=(b=[])=>{i.model&&E0(s,b).forEach(w=>w.resetField())},h=(b=[])=>{E0(s,b).forEach(w=>w.clearValidate())},f=R(()=>!!i.model),m=b=>{if(s.length===0)return[];const w=E0(s,b);return w.length?w:[]},p=async b=>v(void 0,b),y=async(b=[])=>{if(!f.value)return!1;const w=m(b);if(w.length===0)return!0;let x={};for(const S of w)try{await S.validate("")}catch(C){x={...x,...C}}return Object.keys(x).length===0?!0:Promise.reject(x)},v=async(b=[],w)=>{const x=!xt(w);try{const S=await y(b);return S===!0&&await(w==null?void 0:w(S)),S}catch(S){if(S instanceof Error)throw S;const C=S;return i.scrollToError&&_(Object.keys(C)[0]),await(w==null?void 0:w(!1,C)),x&&Promise.reject(C)}},_=b=>{var w;const x=E0(s,b)[0];x&&((w=x.$el)==null||w.scrollIntoView(i.scrollIntoViewOptions))};return ze(()=>i.rules,()=>{i.validateOnRuleChange&&p().catch(b=>void 0)},{deep:!0}),Xt(hh,un({...ws(i),emit:t,resetFields:d,clearValidate:h,validateField:v,getField:l,addField:c,removeField:u,...lZ()})),e({validate:p,validateField:v,resetFields:d,clearValidate:h,scrollToField:_,fields:s}),(b,w)=>(k(),Y("form",{class:z(g(a))},[ke(b.$slots,"default")],2))}});var hZ=Ze(dZ,[["__file","form.vue"]]);function id(){return id=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},id.apply(this,arguments)}function fZ(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Lg(n,e)}function _C(n){return _C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_C(n)}function Lg(n,e){return Lg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},Lg(n,e)}function pZ(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function i_(n,e,t){return pZ()?i_=Reflect.construct.bind():i_=function(s,r,o){var a=[null];a.push.apply(a,r);var l=Function.bind.apply(s,a),c=new l;return o&&Lg(c,o.prototype),c},i_.apply(null,arguments)}function mZ(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function bC(n){var e=typeof Map=="function"?new Map:void 0;return bC=function(i){if(i===null||!mZ(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(i))return e.get(i);e.set(i,s)}function s(){return i_(i,arguments,_C(this).constructor)}return s.prototype=Object.create(i.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),Lg(s,i)},bC(n)}var gZ=/%[sdj%]/g,vZ=function(){};function wC(n){if(!n||!n.length)return null;var e={};return n.forEach(function(t){var i=t.field;e[i]=e[i]||[],e[i].push(t)}),e}function Wr(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var s=0,r=t.length;if(typeof n=="function")return n.apply(null,t);if(typeof n=="string"){var o=n.replace(gZ,function(a){if(a==="%%")return"%";if(s>=r)return a;switch(a){case"%s":return String(t[s++]);case"%d":return Number(t[s++]);case"%j":try{return JSON.stringify(t[s++])}catch{return"[Circular]"}break;default:return a}});return o}return n}function yZ(n){return n==="string"||n==="url"||n==="hex"||n==="email"||n==="date"||n==="pattern"}function cs(n,e){return!!(n==null||e==="array"&&Array.isArray(n)&&!n.length||yZ(e)&&typeof n=="string"&&!n)}function _Z(n,e,t){var i=[],s=0,r=n.length;function o(a){i.push.apply(i,a||[]),s++,s===r&&t(i)}n.forEach(function(a){e(a,o)})}function LR(n,e,t){var i=0,s=n.length;function r(o){if(o&&o.length){t(o);return}var a=i;i=i+1,a<s?e(n[a],r):t([])}r([])}function bZ(n){var e=[];return Object.keys(n).forEach(function(t){e.push.apply(e,n[t]||[])}),e}var kR=function(n){fZ(e,n);function e(t,i){var s;return s=n.call(this,"Async Validation Error")||this,s.errors=t,s.fields=i,s}return e}(bC(Error));function wZ(n,e,t,i,s){if(e.first){var r=new Promise(function(h,f){var m=function(v){return i(v),v.length?f(new kR(v,wC(v))):h(s)},p=bZ(n);LR(p,t,m)});return r.catch(function(h){return h}),r}var o=e.firstFields===!0?Object.keys(n):e.firstFields||[],a=Object.keys(n),l=a.length,c=0,u=[],d=new Promise(function(h,f){var m=function(y){if(u.push.apply(u,y),c++,c===l)return i(u),u.length?f(new kR(u,wC(u))):h(s)};a.length||(i(u),h(s)),a.forEach(function(p){var y=n[p];o.indexOf(p)!==-1?LR(y,t,m):_Z(y,t,m)})});return d.catch(function(h){return h}),d}function xZ(n){return!!(n&&n.message!==void 0)}function SZ(n,e){for(var t=n,i=0;i<e.length;i++){if(t==null)return t;t=t[e[i]]}return t}function OR(n,e){return function(t){var i;return n.fullFields?i=SZ(e,n.fullFields):i=e[t.field||n.fullField],xZ(t)?(t.field=t.field||n.fullField,t.fieldValue=i,t):{message:typeof t=="function"?t():t,fieldValue:i,field:t.field||n.fullField}}}function DR(n,e){if(e){for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];typeof i=="object"&&typeof n[t]=="object"?n[t]=id({},n[t],i):n[t]=i}}return n}var l4=function(e,t,i,s,r,o){e.required&&(!i.hasOwnProperty(e.field)||cs(t,o||e.type))&&s.push(Wr(r.messages.required,e.fullField))},CZ=function(e,t,i,s,r){(/^\s+$/.test(t)||t==="")&&s.push(Wr(r.messages.whitespace,e.fullField))},T0,MZ=function(){if(T0)return T0;var n="[a-fA-F\\d:]",e=function(w){return w&&w.includeBoundaries?"(?:(?<=\\s|^)(?="+n+")|(?<="+n+")(?=\\s|$))":""},t="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",i="[a-fA-F\\d]{1,4}",s=(`
(?:
(?:`+i+":){7}(?:"+i+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+i+":){6}(?:"+t+"|:"+i+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+i+":){5}(?::"+t+"|(?::"+i+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+i+":){4}(?:(?::"+i+"){0,1}:"+t+"|(?::"+i+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+i+":){3}(?:(?::"+i+"){0,2}:"+t+"|(?::"+i+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+i+":){2}(?:(?::"+i+"){0,3}:"+t+"|(?::"+i+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+i+":){1}(?:(?::"+i+"){0,4}:"+t+"|(?::"+i+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+i+"){0,5}:"+t+"|(?::"+i+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),r=new RegExp("(?:^"+t+"$)|(?:^"+s+"$)"),o=new RegExp("^"+t+"$"),a=new RegExp("^"+s+"$"),l=function(w){return w&&w.exact?r:new RegExp("(?:"+e(w)+t+e(w)+")|(?:"+e(w)+s+e(w)+")","g")};l.v4=function(b){return b&&b.exact?o:new RegExp(""+e(b)+t+e(b),"g")},l.v6=function(b){return b&&b.exact?a:new RegExp(""+e(b)+s+e(b),"g")};var c="(?:(?:[a-z]+:)?//)",u="(?:\\S+(?::\\S*)?@)?",d=l.v4().source,h=l.v6().source,f="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",m="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",p="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",y="(?::\\d{2,5})?",v='(?:[/?#][^\\s"]*)?',_="(?:"+c+"|www\\.)"+u+"(?:localhost|"+d+"|"+h+"|"+f+m+p+")"+y+v;return T0=new RegExp("(?:^"+_+"$)","i"),T0},NR={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Sm={integer:function(e){return Sm.number(e)&&parseInt(e,10)===e},float:function(e){return Sm.number(e)&&!Sm.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!Sm.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(NR.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(MZ())},hex:function(e){return typeof e=="string"&&!!e.match(NR.hex)}},EZ=function(e,t,i,s,r){if(e.required&&t===void 0){l4(e,t,i,s,r);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],a=e.type;o.indexOf(a)>-1?Sm[a](t)||s.push(Wr(r.messages.types[a],e.fullField,e.type)):a&&typeof t!==e.type&&s.push(Wr(r.messages.types[a],e.fullField,e.type))},TZ=function(e,t,i,s,r){var o=typeof e.len=="number",a=typeof e.min=="number",l=typeof e.max=="number",c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=t,d=null,h=typeof t=="number",f=typeof t=="string",m=Array.isArray(t);if(h?d="number":f?d="string":m&&(d="array"),!d)return!1;m&&(u=t.length),f&&(u=t.replace(c,"_").length),o?u!==e.len&&s.push(Wr(r.messages[d].len,e.fullField,e.len)):a&&!l&&u<e.min?s.push(Wr(r.messages[d].min,e.fullField,e.min)):l&&!a&&u>e.max?s.push(Wr(r.messages[d].max,e.fullField,e.max)):a&&l&&(u<e.min||u>e.max)&&s.push(Wr(r.messages[d].range,e.fullField,e.min,e.max))},Sh="enum",AZ=function(e,t,i,s,r){e[Sh]=Array.isArray(e[Sh])?e[Sh]:[],e[Sh].indexOf(t)===-1&&s.push(Wr(r.messages[Sh],e.fullField,e[Sh].join(", ")))},IZ=function(e,t,i,s,r){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||s.push(Wr(r.messages.pattern.mismatch,e.fullField,t,e.pattern));else if(typeof e.pattern=="string"){var o=new RegExp(e.pattern);o.test(t)||s.push(Wr(r.messages.pattern.mismatch,e.fullField,t,e.pattern))}}},En={required:l4,whitespace:CZ,type:EZ,range:TZ,enum:AZ,pattern:IZ},RZ=function(e,t,i,s,r){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(cs(t,"string")&&!e.required)return i();En.required(e,t,s,o,r,"string"),cs(t,"string")||(En.type(e,t,s,o,r),En.range(e,t,s,o,r),En.pattern(e,t,s,o,r),e.whitespace===!0&&En.whitespace(e,t,s,o,r))}i(o)},PZ=function(e,t,i,s,r){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(cs(t)&&!e.required)return i();En.required(e,t,s,o,r),t!==void 0&&En.type(e,t,s,o,r)}i(o)},LZ=function(e,t,i,s,r){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(t===""&&(t=void 0),cs(t)&&!e.required)return i();En.required(e,t,s,o,r),t!==void 0&&(En.type(e,t,s,o,r),En.range(e,t,s,o,r))}i(o)},kZ=function(e,t,i,s,r){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(cs(t)&&!e.required)return i();En.required(e,t,s,o,r),t!==void 0&&En.type(e,t,s,o,r)}i(o)},OZ=function(e,t,i,s,r){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(cs(t)&&!e.required)return i();En.required(e,t,s,o,r),cs(t)||En.type(e,t,s,o,r)}i(o)},DZ=function(e,t,i,s,r){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(cs(t)&&!e.required)return i();En.required(e,t,s,o,r),t!==void 0&&(En.type(e,t,s,o,r),En.range(e,t,s,o,r))}i(o)},NZ=function(e,t,i,s,r){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(cs(t)&&!e.required)return i();En.required(e,t,s,o,r),t!==void 0&&(En.type(e,t,s,o,r),En.range(e,t,s,o,r))}i(o)},FZ=function(e,t,i,s,r){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(t==null&&!e.required)return i();En.required(e,t,s,o,r,"array"),t!=null&&(En.type(e,t,s,o,r),En.range(e,t,s,o,r))}i(o)},BZ=function(e,t,i,s,r){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(cs(t)&&!e.required)return i();En.required(e,t,s,o,r),t!==void 0&&En.type(e,t,s,o,r)}i(o)},UZ="enum",zZ=function(e,t,i,s,r){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(cs(t)&&!e.required)return i();En.required(e,t,s,o,r),t!==void 0&&En[UZ](e,t,s,o,r)}i(o)},HZ=function(e,t,i,s,r){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(cs(t,"string")&&!e.required)return i();En.required(e,t,s,o,r),cs(t,"string")||En.pattern(e,t,s,o,r)}i(o)},VZ=function(e,t,i,s,r){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(cs(t,"date")&&!e.required)return i();if(En.required(e,t,s,o,r),!cs(t,"date")){var l;t instanceof Date?l=t:l=new Date(t),En.type(e,l,s,o,r),l&&En.range(e,l.getTime(),s,o,r)}}i(o)},$Z=function(e,t,i,s,r){var o=[],a=Array.isArray(t)?"array":typeof t;En.required(e,t,s,o,r,a),i(o)},nx=function(e,t,i,s,r){var o=e.type,a=[],l=e.required||!e.required&&s.hasOwnProperty(e.field);if(l){if(cs(t,o)&&!e.required)return i();En.required(e,t,s,a,r,o),cs(t,o)||En.type(e,t,s,a,r)}i(a)},GZ=function(e,t,i,s,r){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(cs(t)&&!e.required)return i();En.required(e,t,s,o,r)}i(o)},jm={string:RZ,method:PZ,number:LZ,boolean:kZ,regexp:OZ,integer:DZ,float:NZ,array:FZ,object:BZ,enum:zZ,pattern:HZ,date:VZ,url:nx,hex:nx,email:nx,required:$Z,any:GZ};function xC(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var SC=xC(),Gv=function(){function n(t){this.rules=null,this._messages=SC,this.define(t)}var e=n.prototype;return e.define=function(i){var s=this;if(!i)throw new Error("Cannot configure a schema with no rules");if(typeof i!="object"||Array.isArray(i))throw new Error("Rules must be an object");this.rules={},Object.keys(i).forEach(function(r){var o=i[r];s.rules[r]=Array.isArray(o)?o:[o]})},e.messages=function(i){return i&&(this._messages=DR(xC(),i)),this._messages},e.validate=function(i,s,r){var o=this;s===void 0&&(s={}),r===void 0&&(r=function(){});var a=i,l=s,c=r;if(typeof l=="function"&&(c=l,l={}),!this.rules||Object.keys(this.rules).length===0)return c&&c(null,a),Promise.resolve(a);function u(p){var y=[],v={};function _(w){if(Array.isArray(w)){var x;y=(x=y).concat.apply(x,w)}else y.push(w)}for(var b=0;b<p.length;b++)_(p[b]);y.length?(v=wC(y),c(y,v)):c(null,a)}if(l.messages){var d=this.messages();d===SC&&(d=xC()),DR(d,l.messages),l.messages=d}else l.messages=this.messages();var h={},f=l.keys||Object.keys(this.rules);f.forEach(function(p){var y=o.rules[p],v=a[p];y.forEach(function(_){var b=_;typeof b.transform=="function"&&(a===i&&(a=id({},a)),v=a[p]=b.transform(v)),typeof b=="function"?b={validator:b}:b=id({},b),b.validator=o.getValidationMethod(b),b.validator&&(b.field=p,b.fullField=b.fullField||p,b.type=o.getType(b),h[p]=h[p]||[],h[p].push({rule:b,value:v,source:a,field:p}))})});var m={};return wZ(h,l,function(p,y){var v=p.rule,_=(v.type==="object"||v.type==="array")&&(typeof v.fields=="object"||typeof v.defaultField=="object");_=_&&(v.required||!v.required&&p.value),v.field=p.field;function b(S,C){return id({},C,{fullField:v.fullField+"."+S,fullFields:v.fullFields?[].concat(v.fullFields,[S]):[S]})}function w(S){S===void 0&&(S=[]);var C=Array.isArray(S)?S:[S];!l.suppressWarning&&C.length&&n.warning("async-validator:",C),C.length&&v.message!==void 0&&(C=[].concat(v.message));var T=C.map(OR(v,a));if(l.first&&T.length)return m[v.field]=1,y(T);if(!_)y(T);else{if(v.required&&!p.value)return v.message!==void 0?T=[].concat(v.message).map(OR(v,a)):l.error&&(T=[l.error(v,Wr(l.messages.required,v.field))]),y(T);var M={};v.defaultField&&Object.keys(p.value).map(function(I){M[I]=v.defaultField}),M=id({},M,p.rule.fields);var E={};Object.keys(M).forEach(function(I){var B=M[I],F=Array.isArray(B)?B:[B];E[I]=F.map(b.bind(null,I))});var A=new n(E);A.messages(l.messages),p.rule.options&&(p.rule.options.messages=l.messages,p.rule.options.error=l.error),A.validate(p.value,p.rule.options||l,function(I){var B=[];T&&T.length&&B.push.apply(B,T),I&&I.length&&B.push.apply(B,I),y(B.length?B:null)})}}var x;if(v.asyncValidator)x=v.asyncValidator(v,p.value,w,p.source,l);else if(v.validator){try{x=v.validator(v,p.value,w,p.source,l)}catch(S){console.error==null||console.error(S),l.suppressValidatorError||setTimeout(function(){throw S},0),w(S.message)}x===!0?w():x===!1?w(typeof v.message=="function"?v.message(v.fullField||v.field):v.message||(v.fullField||v.field)+" fails"):x instanceof Array?w(x):x instanceof Error&&w(x.message)}x&&x.then&&x.then(function(){return w()},function(S){return w(S)})},function(p){u(p)},a)},e.getType=function(i){if(i.type===void 0&&i.pattern instanceof RegExp&&(i.type="pattern"),typeof i.validator!="function"&&i.type&&!jm.hasOwnProperty(i.type))throw new Error(Wr("Unknown rule type %s",i.type));return i.type||"string"},e.getValidationMethod=function(i){if(typeof i.validator=="function")return i.validator;var s=Object.keys(i),r=s.indexOf("message");return r!==-1&&s.splice(r,1),s.length===1&&s[0]==="required"?jm.required:jm[this.getType(i)]||void 0},n}();Gv.register=function(e,t){if(typeof t!="function")throw new Error("Cannot register a validator by type, validator is not a function");jm[e]=t};Gv.warning=vZ;Gv.messages=SC;Gv.validators=jm;const WZ=["","error","validating","success"],KZ=Ye({label:String,labelWidth:{type:[String,Number],default:""},labelPosition:{type:String,values:["left","right","top",""],default:""},prop:{type:ge([String,Array])},required:{type:Boolean,default:void 0},rules:{type:ge([Object,Array])},error:String,validateStatus:{type:String,values:WZ},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:Ya}}),FR="ElLabelWrap";var YZ=se({name:FR,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(n,{slots:e}){const t=ct(hh,void 0),i=ct(Ga);i||qi(FR,"usage: <el-form-item><label-wrap /></el-form-item>");const s=Ve("form"),r=V(),o=V(0),a=()=>{var u;if((u=r.value)!=null&&u.firstElementChild){const d=window.getComputedStyle(r.value.firstElementChild).width;return Math.ceil(Number.parseFloat(d))}else return 0},l=(u="update")=>{vt(()=>{e.default&&n.isAutoWidth&&(u==="update"?o.value=a():u==="remove"&&(t==null||t.deregisterLabelWidth(o.value)))})},c=()=>l("update");return Ft(()=>{c()}),kn(()=>{l("remove")}),Kl(()=>c()),ze(o,(u,d)=>{n.updateAll&&(t==null||t.registerLabelWidth(u,d))}),ti(R(()=>{var u,d;return(d=(u=r.value)==null?void 0:u.firstElementChild)!=null?d:null}),c),()=>{var u,d;if(!e)return null;const{isAutoWidth:h}=n;if(h){const f=t==null?void 0:t.autoLabelWidth,m=i==null?void 0:i.hasLabel,p={};if(m&&f&&f!=="auto"){const y=Math.max(0,Number.parseInt(f,10)-o.value),_=(i.labelPosition||t.labelPosition)==="left"?"marginRight":"marginLeft";y&&(p[_]=`${y}px`)}return le("div",{ref:r,class:[s.be("item","label-wrap")],style:p},[(u=e.default)==null?void 0:u.call(e)])}else return le(mt,{ref:r},[(d=e.default)==null?void 0:d.call(e)])}}});const XZ=["role","aria-labelledby"],jZ=se({name:"ElFormItem"}),qZ=se({...jZ,props:KZ,setup(n,{expose:e}){const t=n,i=hs(),s=ct(hh,void 0),r=ct(Ga,void 0),o=Hi(void 0,{formItem:!1}),a=Ve("form-item"),l=Ls().value,c=V([]),u=V(""),d=t$(u,100),h=V(""),f=V();let m,p=!1;const y=R(()=>t.labelPosition||(s==null?void 0:s.labelPosition)),v=R(()=>{if(y.value==="top")return{};const he=pi(t.labelWidth||(s==null?void 0:s.labelWidth)||"");return he?{width:he}:{}}),_=R(()=>{if(y.value==="top"||s!=null&&s.inline)return{};if(!t.label&&!t.labelWidth&&E)return{};const he=pi(t.labelWidth||(s==null?void 0:s.labelWidth)||"");return!t.label&&!i.label?{marginLeft:he}:{}}),b=R(()=>[a.b(),a.m(o.value),a.is("error",u.value==="error"),a.is("validating",u.value==="validating"),a.is("success",u.value==="success"),a.is("required",U.value||t.required),a.is("no-asterisk",s==null?void 0:s.hideRequiredAsterisk),(s==null?void 0:s.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[a.m("feedback")]:s==null?void 0:s.statusIcon,[a.m(`label-${y.value}`)]:y.value}]),w=R(()=>_i(t.inlineMessage)?t.inlineMessage:(s==null?void 0:s.inlineMessage)||!1),x=R(()=>[a.e("error"),{[a.em("error","inline")]:w.value}]),S=R(()=>t.prop?Rt(t.prop)?t.prop:t.prop.join("."):""),C=R(()=>!!(t.label||i.label)),T=R(()=>t.for||(c.value.length===1?c.value[0]:void 0)),M=R(()=>!T.value&&C.value),E=!!r,A=R(()=>{const he=s==null?void 0:s.model;if(!(!he||!t.prop))return t_(he,t.prop).value}),I=R(()=>{const{required:he}=t,Te=[];t.rules&&Te.push(...Jc(t.rules));const Ce=s==null?void 0:s.rules;if(Ce&&t.prop){const we=t_(Ce,t.prop).value;we&&Te.push(...Jc(we))}if(he!==void 0){const we=Te.map((K,j)=>[K,j]).filter(([K])=>Object.keys(K).includes("required"));if(we.length>0)for(const[K,j]of we)K.required!==he&&(Te[j]={...K,required:he});else Te.push({required:he})}return Te}),B=R(()=>I.value.length>0),F=he=>I.value.filter(Ce=>!Ce.trigger||!he?!0:Array.isArray(Ce.trigger)?Ce.trigger.includes(he):Ce.trigger===he).map(({trigger:Ce,...we})=>we),U=R(()=>I.value.some(he=>he.required)),P=R(()=>{var he;return d.value==="error"&&t.showMessage&&((he=s==null?void 0:s.showMessage)!=null?he:!0)}),O=R(()=>`${t.label||""}${(s==null?void 0:s.labelSuffix)||""}`),D=he=>{u.value=he},L=he=>{var Te,Ce;const{errors:we,fields:K}=he;(!we||!K)&&console.error(he),D("error"),h.value=we?(Ce=(Te=we==null?void 0:we[0])==null?void 0:Te.message)!=null?Ce:`${t.prop} is required`:"",s==null||s.emit("validate",t.prop,!1,h.value)},H=()=>{D("success"),s==null||s.emit("validate",t.prop,!0,"")},X=async he=>{const Te=S.value;return new Gv({[Te]:he}).validate({[Te]:A.value},{firstFields:!0}).then(()=>(H(),!0)).catch(we=>(L(we),Promise.reject(we)))},ne=async(he,Te)=>{if(p||!t.prop)return!1;const Ce=xt(Te);if(!B.value)return Te==null||Te(!1),!1;const we=F(he);return we.length===0?(Te==null||Te(!0),!0):(D("validating"),X(we).then(()=>(Te==null||Te(!0),!0)).catch(K=>{const{fields:j}=K;return Te==null||Te(!1,j),Ce?!1:Promise.reject(j)}))},ce=()=>{D(""),h.value="",p=!1},ae=async()=>{const he=s==null?void 0:s.model;if(!he||!t.prop)return;const Te=t_(he,t.prop);p=!0,Te.value=nR(m),await vt(),ce(),p=!1},_e=he=>{c.value.includes(he)||c.value.push(he)},re=he=>{c.value=c.value.filter(Te=>Te!==he)};ze(()=>t.error,he=>{h.value=he||"",D(he?"error":"")},{immediate:!0}),ze(()=>t.validateStatus,he=>D(he||""));const xe=un({...ws(t),$el:f,size:o,validateState:u,labelId:l,inputIds:c,isGroup:M,hasLabel:C,fieldValue:A,addInputId:_e,removeInputId:re,resetField:ae,clearValidate:ce,validate:ne});return Xt(Ga,xe),Ft(()=>{t.prop&&(s==null||s.addField(xe),m=nR(A.value))}),kn(()=>{s==null||s.removeField(xe)}),e({size:o,validateMessage:h,validateState:u,validate:ne,clearValidate:ce,resetField:ae}),(he,Te)=>{var Ce;return k(),Y("div",{ref_key:"formItemRef",ref:f,class:z(g(b)),role:g(M)?"group":void 0,"aria-labelledby":g(M)?g(l):void 0},[le(g(YZ),{"is-auto-width":g(v).width==="auto","update-all":((Ce=g(s))==null?void 0:Ce.labelWidth)==="auto"},{default:pe(()=>[g(C)?(k(),Re(Wt(g(T)?"label":"div"),{key:0,id:g(l),for:g(T),class:z(g(a).e("label")),style:pt(g(v))},{default:pe(()=>[ke(he.$slots,"label",{label:g(O)},()=>[Yt(Je(g(O)),1)])]),_:3},8,["id","for","class","style"])):Ee("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),te("div",{class:z(g(a).e("content")),style:pt(g(_))},[ke(he.$slots,"default"),le(pD,{name:`${g(a).namespace.value}-zoom-in-top`},{default:pe(()=>[g(P)?ke(he.$slots,"error",{key:0,error:h.value},()=>[te("div",{class:z(g(x))},Je(h.value),3)]):Ee("v-if",!0)]),_:3},8,["name"])],6)],10,XZ)}}});var c4=Ze(qZ,[["__file","form-item.vue"]]);const ZZ=Ht(hZ,{FormItem:c4}),JZ=si(c4);let Ho;const QZ=`
  height:0 !important;
  visibility:hidden !important;
  ${TD()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,eJ=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function tJ(n){const e=window.getComputedStyle(n),t=e.getPropertyValue("box-sizing"),i=Number.parseFloat(e.getPropertyValue("padding-bottom"))+Number.parseFloat(e.getPropertyValue("padding-top")),s=Number.parseFloat(e.getPropertyValue("border-bottom-width"))+Number.parseFloat(e.getPropertyValue("border-top-width"));return{contextStyle:eJ.map(o=>`${o}:${e.getPropertyValue(o)}`).join(";"),paddingSize:i,borderSize:s,boxSizing:t}}function BR(n,e=1,t){var i;Ho||(Ho=document.createElement("textarea"),document.body.appendChild(Ho));const{paddingSize:s,borderSize:r,boxSizing:o,contextStyle:a}=tJ(n);Ho.setAttribute("style",`${a};${QZ}`),Ho.value=n.value||n.placeholder||"";let l=Ho.scrollHeight;const c={};o==="border-box"?l=l+r:o==="content-box"&&(l=l-s),Ho.value="";const u=Ho.scrollHeight-s;if(Ct(e)){let d=u*e;o==="border-box"&&(d=d+s+r),l=Math.max(d,l),c.minHeight=`${d}px`}if(Ct(t)){let d=u*t;o==="border-box"&&(d=d+s+r),l=Math.min(d,l)}return c.height=`${l}px`,(i=Ho.parentNode)==null||i.removeChild(Ho),Ho=void 0,c}const nJ=Ye({id:{type:String,default:void 0},size:Zi,disabled:Boolean,modelValue:{type:ge([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:ge([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:xn},prefixIcon:{type:xn},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:ge([Object,Array,String]),default:()=>ni({})},autofocus:Boolean,rows:{type:Number,default:2},...Ss(["ariaLabel"])}),iJ={[Gt]:n=>Rt(n),input:n=>Rt(n),change:n=>Rt(n),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0,mouseleave:n=>n instanceof MouseEvent,mouseenter:n=>n instanceof MouseEvent,keydown:n=>n instanceof Event,compositionstart:n=>n instanceof CompositionEvent,compositionupdate:n=>n instanceof CompositionEvent,compositionend:n=>n instanceof CompositionEvent},sJ=["role"],rJ=["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus"],oJ=["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows"],aJ=se({name:"ElInput",inheritAttrs:!1}),lJ=se({...aJ,props:nJ,emits:iJ,setup(n,{expose:e,emit:t}){const i=n,s=ah(),r=hs(),o=R(()=>{const fe={};return i.containerRole==="combobox"&&(fe["aria-haspopup"]=s["aria-haspopup"],fe["aria-owns"]=s["aria-owns"],fe["aria-expanded"]=s["aria-expanded"]),fe}),a=R(()=>[i.type==="textarea"?y.b():p.b(),p.m(f.value),p.is("disabled",m.value),p.is("exceed",ae.value),{[p.b("group")]:r.prepend||r.append,[p.m("prefix")]:r.prefix||i.prefixIcon,[p.m("suffix")]:r.suffix||i.suffixIcon||i.clearable||i.showPassword,[p.bm("suffix","password-clear")]:H.value&&X.value,[p.b("hidden")]:i.type==="hidden"},s.class]),l=R(()=>[p.e("wrapper"),p.is("focus",E.value)]),c=nT({excludeKeys:R(()=>Object.keys(o.value))}),{form:u,formItem:d}=Qs(),{inputId:h}=ca(i,{formItemContext:d}),f=Hi(),m=mr(),p=Ve("input"),y=Ve("textarea"),v=Vn(),_=Vn(),b=V(!1),w=V(!1),x=V(!1),S=V(),C=Vn(i.inputStyle),T=R(()=>v.value||_.value),{wrapperRef:M,isFocused:E,handleFocus:A,handleBlur:I}=O1(T,{afterBlur(){var fe;i.validateEvent&&((fe=d==null?void 0:d.validate)==null||fe.call(d,"blur").catch(Ge=>void 0))}}),B=R(()=>{var fe;return(fe=u==null?void 0:u.statusIcon)!=null?fe:!1}),F=R(()=>(d==null?void 0:d.validateState)||""),U=R(()=>F.value&&eT[F.value]),P=R(()=>x.value?fX:PY),O=R(()=>[s.style]),D=R(()=>[i.inputStyle,C.value,{resize:i.resize}]),L=R(()=>os(i.modelValue)?"":String(i.modelValue)),H=R(()=>i.clearable&&!m.value&&!i.readonly&&!!L.value&&(E.value||b.value)),X=R(()=>i.showPassword&&!m.value&&!i.readonly&&!!L.value&&(!!L.value||E.value)),ne=R(()=>i.showWordLimit&&!!i.maxlength&&(i.type==="text"||i.type==="textarea")&&!m.value&&!i.readonly&&!i.showPassword),ce=R(()=>L.value.length),ae=R(()=>!!ne.value&&ce.value>Number(i.maxlength)),_e=R(()=>!!r.suffix||!!i.suffixIcon||H.value||i.showPassword||ne.value||!!F.value&&B.value),[re,xe]=Pq(v);ti(_,fe=>{if(Ce(),!ne.value||i.resize!=="both")return;const Ge=fe[0],{width:We}=Ge.contentRect;S.value={right:`calc(100% - ${We+15+6}px)`}});const he=()=>{const{type:fe,autosize:Ge}=i;if(!(!Jt||fe!=="textarea"||!_.value))if(Ge){const We=$t(Ge)?Ge.minRows:void 0,je=$t(Ge)?Ge.maxRows:void 0,at=BR(_.value,We,je);C.value={overflowY:"hidden",...at},vt(()=>{_.value.offsetHeight,C.value=at})}else C.value={minHeight:BR(_.value).minHeight}},Ce=(fe=>{let Ge=!1;return()=>{var We;if(Ge||!i.autosize)return;((We=_.value)==null?void 0:We.offsetParent)===null||(fe(),Ge=!0)}})(he),we=()=>{const fe=T.value,Ge=i.formatter?i.formatter(L.value):L.value;!fe||fe.value===Ge||(fe.value=Ge)},K=async fe=>{re();let{value:Ge}=fe.target;if(i.formatter&&(Ge=i.parser?i.parser(Ge):Ge),!w.value){if(Ge===L.value){we();return}t(Gt,Ge),t("input",Ge),await vt(),we(),xe()}},j=fe=>{t("change",fe.target.value)},ie=fe=>{t("compositionstart",fe),w.value=!0},ve=fe=>{var Ge;t("compositionupdate",fe);const We=(Ge=fe.target)==null?void 0:Ge.value,je=We[We.length-1]||"";w.value=!tT(je)},ye=fe=>{t("compositionend",fe),w.value&&(w.value=!1,K(fe))},me=()=>{x.value=!x.value,be()},be=async()=>{var fe;await vt(),(fe=T.value)==null||fe.focus()},Pe=()=>{var fe;return(fe=T.value)==null?void 0:fe.blur()},Z=fe=>{b.value=!1,t("mouseleave",fe)},$=fe=>{b.value=!0,t("mouseenter",fe)},de=fe=>{t("keydown",fe)},Ae=()=>{var fe;(fe=T.value)==null||fe.select()},De=()=>{t(Gt,""),t("change",""),t("clear"),t("input","")};return ze(()=>i.modelValue,()=>{var fe;vt(()=>he()),i.validateEvent&&((fe=d==null?void 0:d.validate)==null||fe.call(d,"change").catch(Ge=>void 0))}),ze(L,()=>we()),ze(()=>i.type,async()=>{await vt(),we(),he()}),Ft(()=>{!i.formatter&&i.parser,we(),vt(he)}),ns({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-input",ref:"https://element-plus.org/en-US/component/input.html"},R(()=>!!i.label)),e({input:v,textarea:_,ref:T,textareaStyle:D,autosize:vn(i,"autosize"),focus:be,blur:Pe,select:Ae,clear:De,resizeTextarea:he}),(fe,Ge)=>(k(),Y("div",Kt(g(o),{class:[g(a),{[g(p).bm("group","append")]:fe.$slots.append,[g(p).bm("group","prepend")]:fe.$slots.prepend}],style:g(O),role:fe.containerRole,onMouseenter:$,onMouseleave:Z}),[Ee(" input "),fe.type!=="textarea"?(k(),Y(mt,{key:0},[Ee(" prepend slot "),fe.$slots.prepend?(k(),Y("div",{key:0,class:z(g(p).be("group","prepend"))},[ke(fe.$slots,"prepend")],2)):Ee("v-if",!0),te("div",{ref_key:"wrapperRef",ref:M,class:z(g(l))},[Ee(" prefix slot "),fe.$slots.prefix||fe.prefixIcon?(k(),Y("span",{key:0,class:z(g(p).e("prefix"))},[te("span",{class:z(g(p).e("prefix-inner"))},[ke(fe.$slots,"prefix"),fe.prefixIcon?(k(),Re(g(dt),{key:0,class:z(g(p).e("icon"))},{default:pe(()=>[(k(),Re(Wt(fe.prefixIcon)))]),_:1},8,["class"])):Ee("v-if",!0)],2)],2)):Ee("v-if",!0),te("input",Kt({id:g(h),ref_key:"input",ref:v,class:g(p).e("inner")},g(c),{minlength:fe.minlength,maxlength:fe.maxlength,type:fe.showPassword?x.value?"text":"password":fe.type,disabled:g(m),readonly:fe.readonly,autocomplete:fe.autocomplete,tabindex:fe.tabindex,"aria-label":fe.label||fe.ariaLabel,placeholder:fe.placeholder,style:fe.inputStyle,form:fe.form,autofocus:fe.autofocus,onCompositionstart:ie,onCompositionupdate:ve,onCompositionend:ye,onInput:K,onFocus:Ge[0]||(Ge[0]=(...We)=>g(A)&&g(A)(...We)),onBlur:Ge[1]||(Ge[1]=(...We)=>g(I)&&g(I)(...We)),onChange:j,onKeydown:de}),null,16,rJ),Ee(" suffix slot "),g(_e)?(k(),Y("span",{key:1,class:z(g(p).e("suffix"))},[te("span",{class:z(g(p).e("suffix-inner"))},[!g(H)||!g(X)||!g(ne)?(k(),Y(mt,{key:0},[ke(fe.$slots,"suffix"),fe.suffixIcon?(k(),Re(g(dt),{key:0,class:z(g(p).e("icon"))},{default:pe(()=>[(k(),Re(Wt(fe.suffixIcon)))]),_:1},8,["class"])):Ee("v-if",!0)],64)):Ee("v-if",!0),g(H)?(k(),Re(g(dt),{key:1,class:z([g(p).e("icon"),g(p).e("clear")]),onMousedown:Tt(g(mn),["prevent"]),onClick:De},{default:pe(()=>[le(g(mu))]),_:1},8,["class","onMousedown"])):Ee("v-if",!0),g(X)?(k(),Re(g(dt),{key:2,class:z([g(p).e("icon"),g(p).e("password")]),onClick:me},{default:pe(()=>[(k(),Re(Wt(g(P))))]),_:1},8,["class"])):Ee("v-if",!0),g(ne)?(k(),Y("span",{key:3,class:z(g(p).e("count"))},[te("span",{class:z(g(p).e("count-inner"))},Je(g(ce))+" / "+Je(fe.maxlength),3)],2)):Ee("v-if",!0),g(F)&&g(U)&&g(B)?(k(),Re(g(dt),{key:4,class:z([g(p).e("icon"),g(p).e("validateIcon"),g(p).is("loading",g(F)==="validating")])},{default:pe(()=>[(k(),Re(Wt(g(U))))]),_:1},8,["class"])):Ee("v-if",!0)],2)],2)):Ee("v-if",!0)],2),Ee(" append slot "),fe.$slots.append?(k(),Y("div",{key:1,class:z(g(p).be("group","append"))},[ke(fe.$slots,"append")],2)):Ee("v-if",!0)],64)):(k(),Y(mt,{key:1},[Ee(" textarea "),te("textarea",Kt({id:g(h),ref_key:"textarea",ref:_,class:[g(y).e("inner"),g(p).is("focus",g(E))]},g(c),{minlength:fe.minlength,maxlength:fe.maxlength,tabindex:fe.tabindex,disabled:g(m),readonly:fe.readonly,autocomplete:fe.autocomplete,style:g(D),"aria-label":fe.label||fe.ariaLabel,placeholder:fe.placeholder,form:fe.form,autofocus:fe.autofocus,rows:fe.rows,onCompositionstart:ie,onCompositionupdate:ve,onCompositionend:ye,onInput:K,onFocus:Ge[2]||(Ge[2]=(...We)=>g(A)&&g(A)(...We)),onBlur:Ge[3]||(Ge[3]=(...We)=>g(I)&&g(I)(...We)),onChange:j,onKeydown:de}),null,16,oJ),g(ne)?(k(),Y("span",{key:0,style:pt(S.value),class:z(g(p).e("count"))},Je(g(ce))+" / "+Je(fe.maxlength),7)):Ee("v-if",!0)],64))],16,sJ))}});var cJ=Ze(lJ,[["__file","input.vue"]]);const Ks=Ht(cJ),Ch=4,u4={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},uJ=({move:n,size:e,bar:t})=>({[t.size]:e,transform:`translate${t.axis}(${n}%)`}),ST=Symbol("scrollbarContextKey"),dJ=Ye({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),hJ="Thumb",fJ=se({__name:"thumb",props:dJ,setup(n){const e=n,t=ct(ST),i=Ve("scrollbar");t||qi(hJ,"can not inject scrollbar context");const s=V(),r=V(),o=V({}),a=V(!1);let l=!1,c=!1,u=Jt?document.onselectstart:null;const d=R(()=>u4[e.vertical?"vertical":"horizontal"]),h=R(()=>uJ({size:e.size,move:e.move,bar:d.value})),f=R(()=>s.value[d.value.offset]**2/t.wrapElement[d.value.scrollSize]/e.ratio/r.value[d.value.offset]),m=S=>{var C;if(S.stopPropagation(),S.ctrlKey||[1,2].includes(S.button))return;(C=window.getSelection())==null||C.removeAllRanges(),y(S);const T=S.currentTarget;T&&(o.value[d.value.axis]=T[d.value.offset]-(S[d.value.client]-T.getBoundingClientRect()[d.value.direction]))},p=S=>{if(!r.value||!s.value||!t.wrapElement)return;const C=Math.abs(S.target.getBoundingClientRect()[d.value.direction]-S[d.value.client]),T=r.value[d.value.offset]/2,M=(C-T)*100*f.value/s.value[d.value.offset];t.wrapElement[d.value.scroll]=M*t.wrapElement[d.value.scrollSize]/100},y=S=>{S.stopImmediatePropagation(),l=!0,document.addEventListener("mousemove",v),document.addEventListener("mouseup",_),u=document.onselectstart,document.onselectstart=()=>!1},v=S=>{if(!s.value||!r.value||l===!1)return;const C=o.value[d.value.axis];if(!C)return;const T=(s.value.getBoundingClientRect()[d.value.direction]-S[d.value.client])*-1,M=r.value[d.value.offset]-C,E=(T-M)*100*f.value/s.value[d.value.offset];t.wrapElement[d.value.scroll]=E*t.wrapElement[d.value.scrollSize]/100},_=()=>{l=!1,o.value[d.value.axis]=0,document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",_),x(),c&&(a.value=!1)},b=()=>{c=!1,a.value=!!e.size},w=()=>{c=!0,a.value=l};kn(()=>{x(),document.removeEventListener("mouseup",_)});const x=()=>{document.onselectstart!==u&&(document.onselectstart=u)};return Dn(vn(t,"scrollbarElement"),"mousemove",b),Dn(vn(t,"scrollbarElement"),"mouseleave",w),(S,C)=>(k(),Re(ji,{name:g(i).b("fade"),persisted:""},{default:pe(()=>[Bt(te("div",{ref_key:"instance",ref:s,class:z([g(i).e("bar"),g(i).is(g(d).key)]),onMousedown:p},[te("div",{ref_key:"thumb",ref:r,class:z(g(i).e("thumb")),style:pt(g(h)),onMousedown:m},null,38)],34),[[an,S.always||a.value]])]),_:1},8,["name"]))}});var UR=Ze(fJ,[["__file","thumb.vue"]]);const pJ=Ye({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),mJ=se({__name:"bar",props:pJ,setup(n,{expose:e}){const t=n,i=ct(ST),s=V(0),r=V(0),o=V(""),a=V(""),l=V(1),c=V(1);return e({handleScroll:h=>{if(h){const f=h.offsetHeight-Ch,m=h.offsetWidth-Ch;r.value=h.scrollTop*100/f*l.value,s.value=h.scrollLeft*100/m*c.value}},update:()=>{const h=i==null?void 0:i.wrapElement;if(!h)return;const f=h.offsetHeight-Ch,m=h.offsetWidth-Ch,p=f**2/h.scrollHeight,y=m**2/h.scrollWidth,v=Math.max(p,t.minSize),_=Math.max(y,t.minSize);l.value=p/(f-p)/(v/(f-v)),c.value=y/(m-y)/(_/(m-_)),a.value=v+Ch<f?`${v}px`:"",o.value=_+Ch<m?`${_}px`:""}}),(h,f)=>(k(),Y(mt,null,[le(UR,{move:s.value,ratio:c.value,size:o.value,always:h.always},null,8,["move","ratio","size","always"]),le(UR,{move:r.value,ratio:l.value,size:a.value,vertical:"",always:h.always},null,8,["move","ratio","size","always"])],64))}});var gJ=Ze(mJ,[["__file","bar.vue"]]);const vJ=Ye({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:ge([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},id:String,role:String,...Ss(["ariaLabel","ariaOrientation"])}),yJ={scroll:({scrollTop:n,scrollLeft:e})=>[n,e].every(Ct)},_J="ElScrollbar",bJ=se({name:_J}),wJ=se({...bJ,props:vJ,emits:yJ,setup(n,{expose:e,emit:t}){const i=n,s=Ve("scrollbar");let r,o;const a=V(),l=V(),c=V(),u=V(),d=R(()=>{const b={};return i.height&&(b.height=pi(i.height)),i.maxHeight&&(b.maxHeight=pi(i.maxHeight)),[i.wrapStyle,b]}),h=R(()=>[i.wrapClass,s.e("wrap"),{[s.em("wrap","hidden-default")]:!i.native}]),f=R(()=>[s.e("view"),i.viewClass]),m=()=>{var b;l.value&&((b=u.value)==null||b.handleScroll(l.value),t("scroll",{scrollTop:l.value.scrollTop,scrollLeft:l.value.scrollLeft}))};function p(b,w){$t(b)?l.value.scrollTo(b):Ct(b)&&Ct(w)&&l.value.scrollTo(b,w)}const y=b=>{Ct(b)&&(l.value.scrollTop=b)},v=b=>{Ct(b)&&(l.value.scrollLeft=b)},_=()=>{var b;(b=u.value)==null||b.update()};return ze(()=>i.noresize,b=>{b?(r==null||r(),o==null||o()):({stop:r}=ti(c,_),o=Dn("resize",_))},{immediate:!0}),ze(()=>[i.maxHeight,i.height],()=>{i.native||vt(()=>{var b;_(),l.value&&((b=u.value)==null||b.handleScroll(l.value))})}),Xt(ST,un({scrollbarElement:a,wrapElement:l})),Ft(()=>{i.native||vt(()=>{_()})}),Kl(()=>_()),e({wrapRef:l,update:_,scrollTo:p,setScrollTop:y,setScrollLeft:v,handleScroll:m}),(b,w)=>(k(),Y("div",{ref_key:"scrollbarRef",ref:a,class:z(g(s).b())},[te("div",{ref_key:"wrapRef",ref:l,class:z(g(h)),style:pt(g(d)),onScroll:m},[(k(),Re(Wt(b.tag),{id:b.id,ref_key:"resizeRef",ref:c,class:z(g(f)),style:pt(b.viewStyle),role:b.role,"aria-label":b.ariaLabel,"aria-orientation":b.ariaOrientation},{default:pe(()=>[ke(b.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],38),b.native?Ee("v-if",!0):(k(),Re(gJ,{key:0,ref_key:"barRef",ref:u,always:b.always,"min-size":b.minSize},null,8,["always","min-size"]))],2))}});var xJ=Ze(wJ,[["__file","scrollbar.vue"]]);const Zl=Ht(xJ),CT=Symbol("popper"),d4=Symbol("popperContent"),SJ=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],h4=Ye({role:{type:String,values:SJ,default:"tooltip"}}),CJ=se({name:"ElPopper",inheritAttrs:!1}),MJ=se({...CJ,props:h4,setup(n,{expose:e}){const t=n,i=V(),s=V(),r=V(),o=V(),a=R(()=>t.role),l={triggerRef:i,popperInstanceRef:s,contentRef:r,referenceRef:o,role:a};return e(l),Xt(CT,l),(c,u)=>ke(c.$slots,"default")}});var EJ=Ze(MJ,[["__file","popper.vue"]]);const f4=Ye({arrowOffset:{type:Number,default:5}}),TJ=se({name:"ElPopperArrow",inheritAttrs:!1}),AJ=se({...TJ,props:f4,setup(n,{expose:e}){const t=n,i=Ve("popper"),{arrowOffset:s,arrowRef:r,arrowStyle:o}=ct(d4,void 0);return ze(()=>t.arrowOffset,a=>{s.value=a}),kn(()=>{r.value=void 0}),e({arrowRef:r}),(a,l)=>(k(),Y("span",{ref_key:"arrowRef",ref:r,class:z(g(i).e("arrow")),style:pt(g(o)),"data-popper-arrow":""},null,6))}});var IJ=Ze(AJ,[["__file","arrow.vue"]]);const RJ="ElOnlyChild",p4=se({name:RJ,setup(n,{slots:e,attrs:t}){var i;const s=ct(VN),r=Yj((i=s==null?void 0:s.setForwardRef)!=null?i:mn);return()=>{var o;const a=(o=e.default)==null?void 0:o.call(e,t);if(!a||a.length>1)return null;const l=m4(a);return l?Bt(Rl(l,t),[[r]]):null}}});function m4(n){if(!n)return null;const e=n;for(const t of e){if($t(t))switch(t.type){case Es:continue;case Cp:case"svg":return zR(t);case mt:return m4(t.children);default:return t}return zR(t)}return null}function zR(n){const e=Ve("only-child");return le("span",{class:e.e("content")},[n])}const g4=Ye({virtualRef:{type:ge(Object)},virtualTriggering:Boolean,onMouseenter:{type:ge(Function)},onMouseleave:{type:ge(Function)},onClick:{type:ge(Function)},onKeydown:{type:ge(Function)},onFocus:{type:ge(Function)},onBlur:{type:ge(Function)},onContextmenu:{type:ge(Function)},id:String,open:Boolean}),PJ=se({name:"ElPopperTrigger",inheritAttrs:!1}),LJ=se({...PJ,props:g4,setup(n,{expose:e}){const t=n,{role:i,triggerRef:s}=ct(CT,void 0);Kj(s);const r=R(()=>a.value?t.id:void 0),o=R(()=>{if(i&&i.value==="tooltip")return t.open&&t.id?t.id:void 0}),a=R(()=>{if(i&&i.value!=="tooltip")return i.value}),l=R(()=>a.value?`${t.open}`:void 0);let c;return Ft(()=>{ze(()=>t.virtualRef,u=>{u&&(s.value=xr(u))},{immediate:!0}),ze(s,(u,d)=>{c==null||c(),c=void 0,Lo(u)&&(["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"].forEach(h=>{var f;const m=t[h];m&&(u.addEventListener(h.slice(2).toLowerCase(),m),(f=d==null?void 0:d.removeEventListener)==null||f.call(d,h.slice(2).toLowerCase(),m))}),c=ze([r,o,a,l],h=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((f,m)=>{os(h[m])?u.removeAttribute(f):u.setAttribute(f,h[m])})},{immediate:!0})),Lo(d)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(h=>d.removeAttribute(h))},{immediate:!0})}),kn(()=>{c==null||c(),c=void 0}),e({triggerRef:s}),(u,d)=>u.virtualTriggering?Ee("v-if",!0):(k(),Re(g(p4),Kt({key:0},u.$attrs,{"aria-controls":g(r),"aria-describedby":g(o),"aria-expanded":g(l),"aria-haspopup":g(a)}),{default:pe(()=>[ke(u.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var kJ=Ze(LJ,[["__file","trigger.vue"]]);const ix="focus-trap.focus-after-trapped",sx="focus-trap.focus-after-released",OJ="focus-trap.focusout-prevented",HR={cancelable:!0,bubbles:!1},DJ={cancelable:!0,bubbles:!1},VR="focusAfterTrapped",$R="focusAfterReleased",MT=Symbol("elFocusTrap"),ET=V(),B1=V(0),TT=V(0);let A0=0;const v4=n=>{const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const s=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||s?NodeFilter.FILTER_SKIP:i.tabIndex>=0||i===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e},GR=(n,e)=>{for(const t of n)if(!NJ(t,e))return t},NJ=(n,e)=>{if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1},FJ=n=>{const e=v4(n),t=GR(e,n),i=GR(e.reverse(),n);return[t,i]},BJ=n=>n instanceof HTMLInputElement&&"select"in n,bc=(n,e)=>{if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),TT.value=window.performance.now(),n!==t&&BJ(n)&&e&&n.select()}};function WR(n,e){const t=[...n],i=n.indexOf(e);return i!==-1&&t.splice(i,1),t}const UJ=()=>{let n=[];return{push:i=>{const s=n[0];s&&i!==s&&s.pause(),n=WR(n,i),n.unshift(i)},remove:i=>{var s,r;n=WR(n,i),(r=(s=n[0])==null?void 0:s.resume)==null||r.call(s)}}},zJ=(n,e=!1)=>{const t=document.activeElement;for(const i of n)if(bc(i,e),document.activeElement!==t)return},KR=UJ(),HJ=()=>B1.value>TT.value,I0=()=>{ET.value="pointer",B1.value=window.performance.now()},YR=()=>{ET.value="keyboard",B1.value=window.performance.now()},VJ=()=>(Ft(()=>{A0===0&&(document.addEventListener("mousedown",I0),document.addEventListener("touchstart",I0),document.addEventListener("keydown",YR)),A0++}),kn(()=>{A0--,A0<=0&&(document.removeEventListener("mousedown",I0),document.removeEventListener("touchstart",I0),document.removeEventListener("keydown",YR))}),{focusReason:ET,lastUserFocusTimestamp:B1,lastAutomatedFocusTimestamp:TT}),R0=n=>new CustomEvent(OJ,{...DJ,detail:n}),$J=se({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[VR,$R,"focusin","focusout","focusout-prevented","release-requested"],setup(n,{emit:e}){const t=V();let i,s;const{focusReason:r}=VJ();Hj(m=>{n.trapped&&!o.paused&&e("release-requested",m)});const o={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},a=m=>{if(!n.loop&&!n.trapped||o.paused)return;const{key:p,altKey:y,ctrlKey:v,metaKey:_,currentTarget:b,shiftKey:w}=m,{loop:x}=n,S=p===wt.tab&&!y&&!v&&!_,C=document.activeElement;if(S&&C){const T=b,[M,E]=FJ(T);if(M&&E){if(!w&&C===E){const I=R0({focusReason:r.value});e("focusout-prevented",I),I.defaultPrevented||(m.preventDefault(),x&&bc(M,!0))}else if(w&&[M,T].includes(C)){const I=R0({focusReason:r.value});e("focusout-prevented",I),I.defaultPrevented||(m.preventDefault(),x&&bc(E,!0))}}else if(C===T){const I=R0({focusReason:r.value});e("focusout-prevented",I),I.defaultPrevented||m.preventDefault()}}};Xt(MT,{focusTrapRef:t,onKeydown:a}),ze(()=>n.focusTrapEl,m=>{m&&(t.value=m)},{immediate:!0}),ze([t],([m],[p])=>{m&&(m.addEventListener("keydown",a),m.addEventListener("focusin",u),m.addEventListener("focusout",d)),p&&(p.removeEventListener("keydown",a),p.removeEventListener("focusin",u),p.removeEventListener("focusout",d))});const l=m=>{e(VR,m)},c=m=>e($R,m),u=m=>{const p=g(t);if(!p)return;const y=m.target,v=m.relatedTarget,_=y&&p.contains(y);n.trapped||v&&p.contains(v)||(i=v),_&&e("focusin",m),!o.paused&&n.trapped&&(_?s=y:bc(s,!0))},d=m=>{const p=g(t);if(!(o.paused||!p))if(n.trapped){const y=m.relatedTarget;!os(y)&&!p.contains(y)&&setTimeout(()=>{if(!o.paused&&n.trapped){const v=R0({focusReason:r.value});e("focusout-prevented",v),v.defaultPrevented||bc(s,!0)}},0)}else{const y=m.target;y&&p.contains(y)||e("focusout",m)}};async function h(){await vt();const m=g(t);if(m){KR.push(o);const p=m.contains(document.activeElement)?i:document.activeElement;if(i=p,!m.contains(p)){const v=new Event(ix,HR);m.addEventListener(ix,l),m.dispatchEvent(v),v.defaultPrevented||vt(()=>{let _=n.focusStartEl;Rt(_)||(bc(_),document.activeElement!==_&&(_="first")),_==="first"&&zJ(v4(m),!0),(document.activeElement===p||_==="container")&&bc(m)})}}}function f(){const m=g(t);if(m){m.removeEventListener(ix,l);const p=new CustomEvent(sx,{...HR,detail:{focusReason:r.value}});m.addEventListener(sx,c),m.dispatchEvent(p),!p.defaultPrevented&&(r.value=="keyboard"||!HJ()||m.contains(document.activeElement))&&bc(i??document.body),m.removeEventListener(sx,c),KR.remove(o)}}return Ft(()=>{n.trapped&&h(),ze(()=>n.trapped,m=>{m?h():f()})}),kn(()=>{n.trapped&&f()}),{onKeydown:a}}});function GJ(n,e,t,i,s,r){return ke(n.$slots,"default",{handleKeydown:n.onKeydown})}var Wv=Ze($J,[["render",GJ],["__file","focus-trap.vue"]]);const WJ=["fixed","absolute"],KJ=Ye({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:ge(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:dh,default:"bottom"},popperOptions:{type:ge(Object),default:()=>({})},strategy:{type:String,values:WJ,default:"absolute"}}),y4=Ye({...KJ,id:String,style:{type:ge([String,Array,Object])},className:{type:ge([String,Array,Object])},effect:{type:ge(String),default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:ge([String,Array,Object])},popperStyle:{type:ge([String,Array,Object])},referenceEl:{type:ge(Object)},triggerTargetEl:{type:ge(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},virtualTriggering:Boolean,zIndex:Number,...Ss(["ariaLabel"])}),YJ={mouseenter:n=>n instanceof MouseEvent,mouseleave:n=>n instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},XJ=(n,e=[])=>{const{placement:t,strategy:i,popperOptions:s}=n,r={placement:t,strategy:i,...s,modifiers:[...qJ(n),...e]};return ZJ(r,s==null?void 0:s.modifiers),r},jJ=n=>{if(Jt)return xr(n)};function qJ(n){const{offset:e,gpuAcceleration:t,fallbackPlacements:i}=n;return[{name:"offset",options:{offset:[0,e??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:i}},{name:"computeStyles",options:{gpuAcceleration:t}}]}function ZJ(n,e){e&&(n.modifiers=[...n.modifiers,...e??[]])}const JJ=0,QJ=n=>{const{popperInstanceRef:e,contentRef:t,triggerRef:i,role:s}=ct(CT,void 0),r=V(),o=V(),a=R(()=>({name:"eventListeners",enabled:!!n.visible})),l=R(()=>{var v;const _=g(r),b=(v=g(o))!=null?v:JJ;return{name:"arrow",enabled:!hN(_),options:{element:_,padding:b}}}),c=R(()=>({onFirstUpdate:()=>{m()},...XJ(n,[g(l),g(a)])})),u=R(()=>jJ(n.referenceEl)||g(i)),{attributes:d,state:h,styles:f,update:m,forceUpdate:p,instanceRef:y}=Fj(u,t,c);return ze(y,v=>e.value=v),Ft(()=>{ze(()=>{var v;return(v=g(u))==null?void 0:v.getBoundingClientRect()},()=>{m()})}),{attributes:d,arrowRef:r,contentRef:t,instanceRef:y,state:h,styles:f,role:s,forceUpdate:p,update:m}},eQ=(n,{attributes:e,styles:t,role:i})=>{const{nextZIndex:s}=Ip(),r=Ve("popper"),o=R(()=>g(e).popper),a=V(Ct(n.zIndex)?n.zIndex:s()),l=R(()=>[r.b(),r.is("pure",n.pure),r.is(n.effect),n.popperClass]),c=R(()=>[{zIndex:g(a)},g(t).popper,n.popperStyle||{}]),u=R(()=>i.value==="dialog"?"false":void 0),d=R(()=>g(t).arrow||{});return{ariaModal:u,arrowStyle:d,contentAttrs:o,contentClass:l,contentStyle:c,contentZIndex:a,updateZIndex:()=>{a.value=Ct(n.zIndex)?n.zIndex:s()}}},tQ=(n,e)=>{const t=V(!1),i=V();return{focusStartRef:i,trapped:t,onFocusAfterReleased:c=>{var u;((u=c.detail)==null?void 0:u.focusReason)!=="pointer"&&(i.value="first",e("blur"))},onFocusAfterTrapped:()=>{e("focus")},onFocusInTrap:c=>{n.visible&&!t.value&&(c.target&&(i.value=c.target),t.value=!0)},onFocusoutPrevented:c=>{n.trapping||(c.detail.focusReason==="pointer"&&c.preventDefault(),t.value=!1)},onReleaseRequested:()=>{t.value=!1,e("close")}}},nQ=se({name:"ElPopperContent"}),iQ=se({...nQ,props:y4,emits:YJ,setup(n,{expose:e,emit:t}){const i=n,{focusStartRef:s,trapped:r,onFocusAfterReleased:o,onFocusAfterTrapped:a,onFocusInTrap:l,onFocusoutPrevented:c,onReleaseRequested:u}=tQ(i,t),{attributes:d,arrowRef:h,contentRef:f,styles:m,instanceRef:p,role:y,update:v}=QJ(i),{ariaModal:_,arrowStyle:b,contentAttrs:w,contentClass:x,contentStyle:S,updateZIndex:C}=eQ(i,{styles:m,attributes:d,role:y}),T=ct(Ga,void 0),M=V();Xt(d4,{arrowStyle:b,arrowRef:h,arrowOffset:M}),T&&Xt(Ga,{...T,addInputId:mn,removeInputId:mn});let E;const A=(B=!0)=>{v(),B&&C()},I=()=>{A(!1),i.visible&&i.focusOnShow?r.value=!0:i.visible===!1&&(r.value=!1)};return Ft(()=>{ze(()=>i.triggerTargetEl,(B,F)=>{E==null||E(),E=void 0;const U=g(B||f.value),P=g(F||f.value);Lo(U)&&(E=ze([y,()=>i.ariaLabel,_,()=>i.id],O=>{["role","aria-label","aria-modal","id"].forEach((D,L)=>{os(O[L])?U.removeAttribute(D):U.setAttribute(D,O[L])})},{immediate:!0})),P!==U&&Lo(P)&&["role","aria-label","aria-modal","id"].forEach(O=>{P.removeAttribute(O)})},{immediate:!0}),ze(()=>i.visible,I,{immediate:!0})}),kn(()=>{E==null||E(),E=void 0}),e({popperContentRef:f,popperInstanceRef:p,updatePopper:A,contentStyle:S}),(B,F)=>(k(),Y("div",Kt({ref_key:"contentRef",ref:f},g(w),{style:g(S),class:g(x),tabindex:"-1",onMouseenter:F[0]||(F[0]=U=>B.$emit("mouseenter",U)),onMouseleave:F[1]||(F[1]=U=>B.$emit("mouseleave",U))}),[le(g(Wv),{trapped:g(r),"trap-on-focus-in":!0,"focus-trap-el":g(f),"focus-start-el":g(s),onFocusAfterTrapped:g(a),onFocusAfterReleased:g(o),onFocusin:g(l),onFocusoutPrevented:g(c),onReleaseRequested:g(u)},{default:pe(()=>[ke(B.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16))}});var sQ=Ze(iQ,[["__file","content.vue"]]);const _4=Ht(EJ),U1=Symbol("elTooltip"),rs=Ye({...Gj,...y4,appendTo:{type:ge([String,Object])},content:{type:String,default:""},rawContent:Boolean,persistent:Boolean,visible:{type:ge(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean,...Ss(["ariaLabel"])}),kg=Ye({...g4,disabled:Boolean,trigger:{type:ge([String,Array]),default:"hover"},triggerKeys:{type:ge(Array),default:()=>[wt.enter,wt.space]}}),{useModelToggleProps:rQ,useModelToggleEmits:oQ,useModelToggle:aQ}=AN("visible"),lQ=Ye({...h4,...rQ,...rs,...kg,...f4,showArrow:{type:Boolean,default:!0}}),cQ=[...oQ,"before-show","before-hide","show","hide","open","close"],uQ=(n,e)=>rt(n)?n.includes(e):n===e,Mh=(n,e,t)=>i=>{uQ(g(n),e)&&t(i)},dQ=se({name:"ElTooltipTrigger"}),hQ=se({...dQ,props:kg,setup(n,{expose:e}){const t=n,i=Ve("tooltip"),{controlled:s,id:r,open:o,onOpen:a,onClose:l,onToggle:c}=ct(U1,void 0),u=V(null),d=()=>{if(g(s)||t.disabled)return!0},h=vn(t,"trigger"),f=hi(d,Mh(h,"hover",a)),m=hi(d,Mh(h,"hover",l)),p=hi(d,Mh(h,"click",w=>{w.button===0&&c(w)})),y=hi(d,Mh(h,"focus",a)),v=hi(d,Mh(h,"focus",l)),_=hi(d,Mh(h,"contextmenu",w=>{w.preventDefault(),c(w)})),b=hi(d,w=>{const{code:x}=w;t.triggerKeys.includes(x)&&(w.preventDefault(),c(w))});return e({triggerRef:u}),(w,x)=>(k(),Re(g(kJ),{id:g(r),"virtual-ref":w.virtualRef,open:g(o),"virtual-triggering":w.virtualTriggering,class:z(g(i).e("trigger")),onBlur:g(v),onClick:g(p),onContextmenu:g(_),onFocus:g(y),onMouseenter:g(f),onMouseleave:g(m),onKeydown:g(b)},{default:pe(()=>[ke(w.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var fQ=Ze(hQ,[["__file","trigger.vue"]]);const pQ=se({name:"ElTooltipContent",inheritAttrs:!1}),mQ=se({...pQ,props:rs,setup(n,{expose:e}){const t=n,{selector:i}=HN(),s=Ve("tooltip"),r=V(null),o=V(!1),{controlled:a,id:l,open:c,trigger:u,onClose:d,onOpen:h,onShow:f,onHide:m,onBeforeShow:p,onBeforeHide:y}=ct(U1,void 0),v=R(()=>t.transition||`${s.namespace.value}-fade-in-linear`),_=R(()=>t.persistent);kn(()=>{o.value=!0});const b=R(()=>g(_)?!0:g(c)),w=R(()=>t.disabled?!1:g(c)),x=R(()=>t.appendTo||i.value),S=R(()=>{var O;return(O=t.style)!=null?O:{}}),C=R(()=>!g(c)),T=()=>{m()},M=()=>{if(g(a))return!0},E=hi(M,()=>{t.enterable&&g(u)==="hover"&&h()}),A=hi(M,()=>{g(u)==="hover"&&d()}),I=()=>{var O,D;(D=(O=r.value)==null?void 0:O.updatePopper)==null||D.call(O),p==null||p()},B=()=>{y==null||y()},F=()=>{f(),P=IE(R(()=>{var O;return(O=r.value)==null?void 0:O.popperContentRef}),()=>{if(g(a))return;g(u)!=="hover"&&d()})},U=()=>{t.virtualTriggering||d()};let P;return ze(()=>g(c),O=>{O||P==null||P()},{flush:"post"}),ze(()=>t.content,()=>{var O,D;(D=(O=r.value)==null?void 0:O.updatePopper)==null||D.call(O)}),e({contentRef:r}),(O,D)=>(k(),Re(Sp,{disabled:!O.teleported,to:g(x)},[le(ji,{name:g(v),onAfterLeave:T,onBeforeEnter:I,onAfterEnter:F,onBeforeLeave:B},{default:pe(()=>[g(b)?Bt((k(),Re(g(sQ),Kt({key:0,id:g(l),ref_key:"contentRef",ref:r},O.$attrs,{"aria-label":O.ariaLabel,"aria-hidden":g(C),"boundaries-padding":O.boundariesPadding,"fallback-placements":O.fallbackPlacements,"gpu-acceleration":O.gpuAcceleration,offset:O.offset,placement:O.placement,"popper-options":O.popperOptions,strategy:O.strategy,effect:O.effect,enterable:O.enterable,pure:O.pure,"popper-class":O.popperClass,"popper-style":[O.popperStyle,g(S)],"reference-el":O.referenceEl,"trigger-target-el":O.triggerTargetEl,visible:g(w),"z-index":O.zIndex,onMouseenter:g(E),onMouseleave:g(A),onBlur:U,onClose:g(d)}),{default:pe(()=>[o.value?Ee("v-if",!0):ke(O.$slots,"default",{key:0})]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[an,g(w)]]):Ee("v-if",!0)]),_:3},8,["name"])],8,["disabled","to"]))}});var gQ=Ze(mQ,[["__file","content.vue"]]);const vQ=["innerHTML"],yQ={key:1},_Q=se({name:"ElTooltip"}),bQ=se({..._Q,props:lQ,emits:cQ,setup(n,{expose:e,emit:t}){const i=n;$j();const s=Ls(),r=V(),o=V(),a=()=>{var v;const _=g(r);_&&((v=_.popperInstanceRef)==null||v.update())},l=V(!1),c=V(),{show:u,hide:d,hasUpdateHandler:h}=aQ({indicator:l,toggleReason:c}),{onOpen:f,onClose:m}=Wj({showAfter:vn(i,"showAfter"),hideAfter:vn(i,"hideAfter"),autoClose:vn(i,"autoClose"),open:u,close:d}),p=R(()=>_i(i.visible)&&!h.value);Xt(U1,{controlled:p,id:s,open:oh(l),trigger:vn(i,"trigger"),onOpen:v=>{f(v)},onClose:v=>{m(v)},onToggle:v=>{g(l)?m(v):f(v)},onShow:()=>{t("show",c.value)},onHide:()=>{t("hide",c.value)},onBeforeShow:()=>{t("before-show",c.value)},onBeforeHide:()=>{t("before-hide",c.value)},updatePopper:a}),ze(()=>i.disabled,v=>{v&&l.value&&(l.value=!1)});const y=v=>{var _,b;const w=(b=(_=o.value)==null?void 0:_.contentRef)==null?void 0:b.popperContentRef,x=(v==null?void 0:v.relatedTarget)||document.activeElement;return w&&w.contains(x)};return LO(()=>l.value&&d()),e({popperRef:r,contentRef:o,isFocusInsideContent:y,updatePopper:a,onOpen:f,onClose:m,hide:d}),(v,_)=>(k(),Re(g(_4),{ref_key:"popperRef",ref:r,role:v.role},{default:pe(()=>[le(fQ,{disabled:v.disabled,trigger:v.trigger,"trigger-keys":v.triggerKeys,"virtual-ref":v.virtualRef,"virtual-triggering":v.virtualTriggering},{default:pe(()=>[v.$slots.default?ke(v.$slots,"default",{key:0}):Ee("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),le(gQ,{ref_key:"contentRef",ref:o,"aria-label":v.ariaLabel,"boundaries-padding":v.boundariesPadding,content:v.content,disabled:v.disabled,effect:v.effect,enterable:v.enterable,"fallback-placements":v.fallbackPlacements,"hide-after":v.hideAfter,"gpu-acceleration":v.gpuAcceleration,offset:v.offset,persistent:v.persistent,"popper-class":v.popperClass,"popper-style":v.popperStyle,placement:v.placement,"popper-options":v.popperOptions,pure:v.pure,"raw-content":v.rawContent,"reference-el":v.referenceEl,"trigger-target-el":v.triggerTargetEl,"show-after":v.showAfter,strategy:v.strategy,teleported:v.teleported,transition:v.transition,"virtual-triggering":v.virtualTriggering,"z-index":v.zIndex,"append-to":v.appendTo},{default:pe(()=>[ke(v.$slots,"content",{},()=>[v.rawContent?(k(),Y("span",{key:0,innerHTML:v.content},null,8,vQ)):(k(),Y("span",yQ,Je(v.content),1))]),v.showArrow?(k(),Re(g(IJ),{key:0,"arrow-offset":v.arrowOffset},null,8,["arrow-offset"])):Ee("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var wQ=Ze(bQ,[["__file","tooltip.vue"]]);const Zs=Ht(wQ),xQ=Ye({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:ge(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:ge([Function,Array]),default:mn},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},teleported:rs.teleported,highlightFirstItem:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:String,...Ss(["ariaLabel"])}),SQ={[Gt]:n=>Rt(n),[dr]:n=>Rt(n),[Fn]:n=>Rt(n),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0,select:n=>$t(n)},CQ=["aria-expanded","aria-owns"],MQ={key:0},EQ=["id","aria-selected","onClick"],b4="ElAutocomplete",TQ=se({name:b4,inheritAttrs:!1}),AQ=se({...TQ,props:xQ,emits:SQ,setup(n,{expose:e,emit:t}){const i=n,s=nT(),r=ah(),o=mr(),a=Ve("autocomplete"),l=V(),c=V(),u=V(),d=V();let h=!1,f=!1;const m=V([]),p=V(-1),y=V(""),v=V(!1),_=V(!1),b=V(!1),w=Ls(),x=R(()=>r.style),S=R(()=>(m.value.length>0||b.value)&&v.value),C=R(()=>!i.hideLoading&&b.value),T=R(()=>l.value?Array.from(l.value.$el.querySelectorAll("input")):[]),M=()=>{S.value&&(y.value=`${l.value.$el.offsetWidth}px`)},E=()=>{p.value=-1},I=Lr(async re=>{if(_.value)return;const xe=he=>{b.value=!1,!_.value&&(rt(he)?(m.value=he,p.value=i.highlightFirstItem?0:-1):qi(b4,"autocomplete suggestions must be an array"))};if(b.value=!0,rt(i.fetchSuggestions))xe(i.fetchSuggestions);else{const he=await i.fetchSuggestions(re,xe);rt(he)&&xe(he)}},i.debounce),B=re=>{const xe=!!re;if(t(dr,re),t(Gt,re),_.value=!1,v.value||(v.value=xe),!i.triggerOnFocus&&!re){_.value=!0,m.value=[];return}I(re)},F=re=>{var xe;o.value||(((xe=re.target)==null?void 0:xe.tagName)!=="INPUT"||T.value.includes(document.activeElement))&&(v.value=!0)},U=re=>{t(Fn,re)},P=re=>{f?f=!1:(v.value=!0,t("focus",re),i.triggerOnFocus&&!h&&I(String(i.modelValue)))},O=re=>{setTimeout(()=>{var xe;if((xe=u.value)!=null&&xe.isFocusInsideContent()){f=!0;return}v.value&&X(),t("blur",re)})},D=()=>{v.value=!1,t(Gt,""),t("clear")},L=async()=>{S.value&&p.value>=0&&p.value<m.value.length?ae(m.value[p.value]):i.selectWhenUnmatched&&(t("select",{value:i.modelValue}),m.value=[],p.value=-1)},H=re=>{S.value&&(re.preventDefault(),re.stopPropagation(),X())},X=()=>{v.value=!1},ne=()=>{var re;(re=l.value)==null||re.focus()},ce=()=>{var re;(re=l.value)==null||re.blur()},ae=async re=>{t(dr,re[i.valueKey]),t(Gt,re[i.valueKey]),t("select",re),m.value=[],p.value=-1},_e=re=>{if(!S.value||b.value)return;if(re<0){p.value=-1;return}re>=m.value.length&&(re=m.value.length-1);const xe=c.value.querySelector(`.${a.be("suggestion","wrap")}`),Te=xe.querySelectorAll(`.${a.be("suggestion","list")} li`)[re],Ce=xe.scrollTop,{offsetTop:we,scrollHeight:K}=Te;we+K>Ce+xe.clientHeight&&(xe.scrollTop+=K),we<Ce&&(xe.scrollTop-=K),p.value=re,l.value.ref.setAttribute("aria-activedescendant",`${w.value}-item-${p.value}`)};return IE(d,()=>{S.value&&X()}),Ft(()=>{l.value.ref.setAttribute("role","textbox"),l.value.ref.setAttribute("aria-autocomplete","list"),l.value.ref.setAttribute("aria-controls","id"),l.value.ref.setAttribute("aria-activedescendant",`${w.value}-item-${p.value}`),h=l.value.ref.hasAttribute("readonly")}),e({highlightedIndex:p,activated:v,loading:b,inputRef:l,popperRef:u,suggestions:m,handleSelect:ae,handleKeyEnter:L,focus:ne,blur:ce,close:X,highlight:_e}),(re,xe)=>(k(),Re(g(Zs),{ref_key:"popperRef",ref:u,visible:g(S),placement:re.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[g(a).e("popper"),re.popperClass],teleported:re.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${g(a).namespace.value}-zoom-in-top`,persistent:"",role:"listbox",onBeforeShow:M,onHide:E},{content:pe(()=>[te("div",{ref_key:"regionRef",ref:c,class:z([g(a).b("suggestion"),g(a).is("loading",g(C))]),style:pt({[re.fitInputWidth?"width":"minWidth"]:y.value,outline:"none"}),role:"region"},[le(g(Zl),{id:g(w),tag:"ul","wrap-class":g(a).be("suggestion","wrap"),"view-class":g(a).be("suggestion","list"),role:"listbox"},{default:pe(()=>[g(C)?(k(),Y("li",MQ,[ke(re.$slots,"loading",{},()=>[le(g(dt),{class:z(g(a).is("loading"))},{default:pe(()=>[le(g(Ha))]),_:1},8,["class"])])])):(k(!0),Y(mt,{key:1},Zt(m.value,(he,Te)=>(k(),Y("li",{id:`${g(w)}-item-${Te}`,key:Te,class:z({highlighted:p.value===Te}),role:"option","aria-selected":p.value===Te,onClick:Ce=>ae(he)},[ke(re.$slots,"default",{item:he},()=>[Yt(Je(he[re.valueKey]),1)])],10,EQ))),128))]),_:3},8,["id","wrap-class","view-class"])],6)]),default:pe(()=>[te("div",{ref_key:"listboxRef",ref:d,class:z([g(a).b(),re.$attrs.class]),style:pt(g(x)),role:"combobox","aria-haspopup":"listbox","aria-expanded":g(S),"aria-owns":g(w)},[le(g(Ks),Kt({ref_key:"inputRef",ref:l},g(s),{clearable:re.clearable,disabled:g(o),name:re.name,"model-value":re.modelValue,"aria-label":re.ariaLabel,onInput:B,onChange:U,onFocus:P,onBlur:O,onClear:D,onKeydown:[xe[0]||(xe[0]=wn(Tt(he=>_e(p.value-1),["prevent"]),["up"])),xe[1]||(xe[1]=wn(Tt(he=>_e(p.value+1),["prevent"]),["down"])),wn(L,["enter"]),wn(X,["tab"]),wn(H,["esc"])],onMousedown:F}),Il({_:2},[re.$slots.prepend?{name:"prepend",fn:pe(()=>[ke(re.$slots,"prepend")])}:void 0,re.$slots.append?{name:"append",fn:pe(()=>[ke(re.$slots,"append")])}:void 0,re.$slots.prefix?{name:"prefix",fn:pe(()=>[ke(re.$slots,"prefix")])}:void 0,re.$slots.suffix?{name:"suffix",fn:pe(()=>[ke(re.$slots,"suffix")])}:void 0]),1040,["clearable","disabled","name","model-value","aria-label","onKeydown"])],14,CQ)]),_:3},8,["visible","placement","popper-class","teleported","transition"]))}});var IQ=Ze(AQ,[["__file","autocomplete.vue"]]);const RQ=Ht(IQ),PQ=Ye({size:{type:[Number,String],values:Ya,default:"",validator:n=>Ct(n)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:xn},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:ge(String),default:"cover"}}),LQ={error:n=>n instanceof Event},kQ=["src","alt","srcset"],OQ=se({name:"ElAvatar"}),DQ=se({...OQ,props:PQ,emits:LQ,setup(n,{emit:e}){const t=n,i=Ve("avatar"),s=V(!1),r=R(()=>{const{size:c,icon:u,shape:d}=t,h=[i.b()];return Rt(c)&&h.push(i.m(c)),u&&h.push(i.m("icon")),d&&h.push(i.m(d)),h}),o=R(()=>{const{size:c}=t;return Ct(c)?i.cssVarBlock({size:pi(c)||""}):void 0}),a=R(()=>({objectFit:t.fit}));ze(()=>t.src,()=>s.value=!1);function l(c){s.value=!0,e("error",c)}return(c,u)=>(k(),Y("span",{class:z(g(r)),style:pt(g(o))},[(c.src||c.srcSet)&&!s.value?(k(),Y("img",{key:0,src:c.src,alt:c.alt,srcset:c.srcSet,style:pt(g(a)),onError:l},null,44,kQ)):c.icon?(k(),Re(g(dt),{key:1},{default:pe(()=>[(k(),Re(Wt(c.icon)))]),_:1})):ke(c.$slots,"default",{key:2})],6))}});var NQ=Ze(DQ,[["__file","avatar.vue"]]);const FQ=Ht(NQ),BQ={visibilityHeight:{type:Number,default:200},target:{type:String,default:""},right:{type:Number,default:40},bottom:{type:Number,default:40}},UQ={click:n=>n instanceof MouseEvent},zQ=(n,e,t)=>{const i=Vn(),s=Vn(),r=V(!1),o=()=>{i.value&&(r.value=i.value.scrollTop>=n.visibilityHeight)},a=c=>{var u;(u=i.value)==null||u.scrollTo({top:0,behavior:"smooth"}),e("click",c)},l=SD(o,300,!0);return Dn(s,"scroll",l),Ft(()=>{var c;s.value=document,i.value=document.documentElement,n.target&&(i.value=(c=document.querySelector(n.target))!=null?c:void 0,i.value||qi(t,`target does not exist: ${n.target}`),s.value=i.value),o()}),{visible:r,handleClick:a}},w4="ElBacktop",HQ=se({name:w4}),VQ=se({...HQ,props:BQ,emits:UQ,setup(n,{emit:e}){const t=n,i=Ve("backtop"),{handleClick:s,visible:r}=zQ(t,e,w4),o=R(()=>({right:`${t.right}px`,bottom:`${t.bottom}px`}));return(a,l)=>(k(),Re(ji,{name:`${g(i).namespace.value}-fade-in`},{default:pe(()=>[g(r)?(k(),Y("div",{key:0,style:pt(g(o)),class:z(g(i).b()),onClick:l[0]||(l[0]=Tt((...c)=>g(s)&&g(s)(...c),["stop"]))},[ke(a.$slots,"default",{},()=>[le(g(dt),{class:z(g(i).e("icon"))},{default:pe(()=>[le(g(uY))]),_:1},8,["class"])])],6)):Ee("v-if",!0)]),_:3},8,["name"]))}});var $Q=Ze(VQ,[["__file","backtop.vue"]]);const GQ=Ht($Q),WQ=Ye({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,dotStyle:{type:ge([String,Object,Array])},badgeStyle:{type:ge([String,Object,Array])},offset:{type:ge(Array),default:[0,0]},dotClass:{type:String},badgeClass:{type:String}}),KQ=["textContent"],YQ=se({name:"ElBadge"}),XQ=se({...YQ,props:WQ,setup(n,{expose:e}){const t=n,i=Ve("badge"),s=R(()=>t.isDot?"":Ct(t.value)&&Ct(t.max)?t.max<t.value?`${t.max}+`:t.value===0&&!t.showZero?"":`${t.value}`:`${t.value}`),r=R(()=>{var o,a,l,c,u,d;return[{backgroundColor:t.color,marginRight:pi(-((a=(o=t.offset)==null?void 0:o[0])!=null?a:0)),marginTop:pi((c=(l=t.offset)==null?void 0:l[1])!=null?c:0)},(u=t.dotStyle)!=null?u:{},(d=t.badgeStyle)!=null?d:{}]});return ns({from:"dot-style",replacement:"badge-style",version:"2.8.0",scope:"el-badge",ref:"https://element-plus.org/en-US/component/badge.html"},R(()=>!!t.dotStyle)),ns({from:"dot-class",replacement:"badge-class",version:"2.8.0",scope:"el-badge",ref:"https://element-plus.org/en-US/component/badge.html"},R(()=>!!t.dotClass)),e({content:s}),(o,a)=>(k(),Y("div",{class:z(g(i).b())},[ke(o.$slots,"default"),le(ji,{name:`${g(i).namespace.value}-zoom-in-center`,persisted:""},{default:pe(()=>[Bt(te("sup",{class:z([g(i).e("content"),g(i).em("content",o.type),g(i).is("fixed",!!o.$slots.default),g(i).is("dot",o.isDot),o.dotClass,o.badgeClass]),style:pt(g(r)),textContent:Je(g(s))},null,14,KQ),[[an,!o.hidden&&(g(s)||o.isDot)]])]),_:1},8,["name"])],2))}});var jQ=Ze(XQ,[["__file","badge.vue"]]);const x4=Ht(jQ),S4=Symbol("breadcrumbKey"),qQ=Ye({separator:{type:String,default:"/"},separatorIcon:{type:xn}}),ZQ=["aria-label"],JQ=se({name:"ElBreadcrumb"}),QQ=se({...JQ,props:qQ,setup(n){const e=n,{t}=en(),i=Ve("breadcrumb"),s=V();return Xt(S4,e),Ft(()=>{const r=s.value.querySelectorAll(`.${i.e("item")}`);r.length&&r[r.length-1].setAttribute("aria-current","page")}),(r,o)=>(k(),Y("div",{ref_key:"breadcrumb",ref:s,class:z(g(i).b()),"aria-label":g(t)("el.breadcrumb.label"),role:"navigation"},[ke(r.$slots,"default")],10,ZQ))}});var eee=Ze(QQ,[["__file","breadcrumb.vue"]]);const tee=Ye({to:{type:ge([String,Object]),default:""},replace:Boolean}),nee=se({name:"ElBreadcrumbItem"}),iee=se({...nee,props:tee,setup(n){const e=n,t=zt(),i=ct(S4,void 0),s=Ve("breadcrumb"),r=t.appContext.config.globalProperties.$router,o=V(),a=()=>{!e.to||!r||(e.replace?r.replace(e.to):r.push(e.to))};return(l,c)=>{var u,d;return k(),Y("span",{class:z(g(s).e("item"))},[te("span",{ref_key:"link",ref:o,class:z([g(s).e("inner"),g(s).is("link",!!l.to)]),role:"link",onClick:a},[ke(l.$slots,"default")],2),(u=g(i))!=null&&u.separatorIcon?(k(),Re(g(dt),{key:0,class:z(g(s).e("separator"))},{default:pe(()=>[(k(),Re(Wt(g(i).separatorIcon)))]),_:1},8,["class"])):(k(),Y("span",{key:1,class:z(g(s).e("separator")),role:"presentation"},Je((d=g(i))==null?void 0:d.separator),3))],2)}}});var C4=Ze(iee,[["__file","breadcrumb-item.vue"]]);const see=Ht(eee,{BreadcrumbItem:C4}),ree=si(C4),M4=Symbol("buttonGroupContextKey"),oee=(n,e)=>{ns({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},R(()=>n.type==="text"));const t=ct(M4,void 0),i=N1("button"),{form:s}=Qs(),r=Hi(R(()=>t==null?void 0:t.size)),o=mr(),a=V(),l=hs(),c=R(()=>n.type||(t==null?void 0:t.type)||""),u=R(()=>{var m,p,y;return(y=(p=n.autoInsertSpace)!=null?p:(m=i.value)==null?void 0:m.autoInsertSpace)!=null?y:!1}),d=R(()=>n.tag==="button"?{ariaDisabled:o.value||n.loading,disabled:o.value||n.loading,autofocus:n.autofocus,type:n.nativeType}:{}),h=R(()=>{var m;const p=(m=l.default)==null?void 0:m.call(l);if(u.value&&(p==null?void 0:p.length)===1){const y=p[0];if((y==null?void 0:y.type)===Cp){const v=y.children;return new RegExp("^\\p{Unified_Ideograph}{2}$","u").test(v.trim())}}return!1});return{_disabled:o,_size:r,_type:c,_ref:a,_props:d,shouldAddSpace:h,handleClick:m=>{n.nativeType==="reset"&&(s==null||s.resetFields()),e("click",m)}}},CC=["default","primary","success","warning","info","danger","text",""],aee=["button","submit","reset"],MC=Ye({size:Zi,disabled:Boolean,type:{type:String,values:CC,default:""},icon:{type:xn},nativeType:{type:String,values:aee,default:"button"},loading:Boolean,loadingIcon:{type:xn,default:()=>Ha},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:ge([String,Object]),default:"button"}}),lee={click:n=>n instanceof MouseEvent};function Rs(n,e){cee(n)&&(n="100%");var t=uee(n);return n=e===360?n:Math.min(e,Math.max(0,parseFloat(n))),t&&(n=parseInt(String(n*e),10)/100),Math.abs(n-e)<1e-6?1:(e===360?n=(n<0?n%e+e:n%e)/parseFloat(String(e)):n=n%e/parseFloat(String(e)),n)}function P0(n){return Math.min(1,Math.max(0,n))}function cee(n){return typeof n=="string"&&n.indexOf(".")!==-1&&parseFloat(n)===1}function uee(n){return typeof n=="string"&&n.indexOf("%")!==-1}function E4(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function L0(n){return n<=1?"".concat(Number(n)*100,"%"):n}function sd(n){return n.length===1?"0"+n:String(n)}function dee(n,e,t){return{r:Rs(n,255)*255,g:Rs(e,255)*255,b:Rs(t,255)*255}}function XR(n,e,t){n=Rs(n,255),e=Rs(e,255),t=Rs(t,255);var i=Math.max(n,e,t),s=Math.min(n,e,t),r=0,o=0,a=(i+s)/2;if(i===s)o=0,r=0;else{var l=i-s;switch(o=a>.5?l/(2-i-s):l/(i+s),i){case n:r=(e-t)/l+(e<t?6:0);break;case e:r=(t-n)/l+2;break;case t:r=(n-e)/l+4;break}r/=6}return{h:r,s:o,l:a}}function rx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*(6*t):t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function hee(n,e,t){var i,s,r;if(n=Rs(n,360),e=Rs(e,100),t=Rs(t,100),e===0)s=t,r=t,i=t;else{var o=t<.5?t*(1+e):t+e-t*e,a=2*t-o;i=rx(a,o,n+1/3),s=rx(a,o,n),r=rx(a,o,n-1/3)}return{r:i*255,g:s*255,b:r*255}}function jR(n,e,t){n=Rs(n,255),e=Rs(e,255),t=Rs(t,255);var i=Math.max(n,e,t),s=Math.min(n,e,t),r=0,o=i,a=i-s,l=i===0?0:a/i;if(i===s)r=0;else{switch(i){case n:r=(e-t)/a+(e<t?6:0);break;case e:r=(t-n)/a+2;break;case t:r=(n-e)/a+4;break}r/=6}return{h:r,s:l,v:o}}function fee(n,e,t){n=Rs(n,360)*6,e=Rs(e,100),t=Rs(t,100);var i=Math.floor(n),s=n-i,r=t*(1-e),o=t*(1-s*e),a=t*(1-(1-s)*e),l=i%6,c=[t,o,r,r,a,t][l],u=[a,t,t,o,r,r][l],d=[r,r,a,t,t,o][l];return{r:c*255,g:u*255,b:d*255}}function qR(n,e,t,i){var s=[sd(Math.round(n).toString(16)),sd(Math.round(e).toString(16)),sd(Math.round(t).toString(16))];return i&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function pee(n,e,t,i,s){var r=[sd(Math.round(n).toString(16)),sd(Math.round(e).toString(16)),sd(Math.round(t).toString(16)),sd(mee(i))];return s&&r[0].startsWith(r[0].charAt(1))&&r[1].startsWith(r[1].charAt(1))&&r[2].startsWith(r[2].charAt(1))&&r[3].startsWith(r[3].charAt(1))?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0):r.join("")}function mee(n){return Math.round(parseFloat(n)*255).toString(16)}function ZR(n){return Fr(n)/255}function Fr(n){return parseInt(n,16)}function gee(n){return{r:n>>16,g:(n&65280)>>8,b:n&255}}var EC={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function vee(n){var e={r:0,g:0,b:0},t=1,i=null,s=null,r=null,o=!1,a=!1;return typeof n=="string"&&(n=bee(n)),typeof n=="object"&&(Qa(n.r)&&Qa(n.g)&&Qa(n.b)?(e=dee(n.r,n.g,n.b),o=!0,a=String(n.r).substr(-1)==="%"?"prgb":"rgb"):Qa(n.h)&&Qa(n.s)&&Qa(n.v)?(i=L0(n.s),s=L0(n.v),e=fee(n.h,i,s),o=!0,a="hsv"):Qa(n.h)&&Qa(n.s)&&Qa(n.l)&&(i=L0(n.s),r=L0(n.l),e=hee(n.h,i,r),o=!0,a="hsl"),Object.prototype.hasOwnProperty.call(n,"a")&&(t=n.a)),t=E4(t),{ok:o,format:n.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}var yee="[-\\+]?\\d+%?",_ee="[-\\+]?\\d*\\.\\d+%?",Dc="(?:".concat(_ee,")|(?:").concat(yee,")"),ox="[\\s|\\(]+(".concat(Dc,")[,|\\s]+(").concat(Dc,")[,|\\s]+(").concat(Dc,")\\s*\\)?"),ax="[\\s|\\(]+(".concat(Dc,")[,|\\s]+(").concat(Dc,")[,|\\s]+(").concat(Dc,")[,|\\s]+(").concat(Dc,")\\s*\\)?"),Xo={CSS_UNIT:new RegExp(Dc),rgb:new RegExp("rgb"+ox),rgba:new RegExp("rgba"+ax),hsl:new RegExp("hsl"+ox),hsla:new RegExp("hsla"+ax),hsv:new RegExp("hsv"+ox),hsva:new RegExp("hsva"+ax),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function bee(n){if(n=n.trim().toLowerCase(),n.length===0)return!1;var e=!1;if(EC[n])n=EC[n],e=!0;else if(n==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t=Xo.rgb.exec(n);return t?{r:t[1],g:t[2],b:t[3]}:(t=Xo.rgba.exec(n),t?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Xo.hsl.exec(n),t?{h:t[1],s:t[2],l:t[3]}:(t=Xo.hsla.exec(n),t?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=Xo.hsv.exec(n),t?{h:t[1],s:t[2],v:t[3]}:(t=Xo.hsva.exec(n),t?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=Xo.hex8.exec(n),t?{r:Fr(t[1]),g:Fr(t[2]),b:Fr(t[3]),a:ZR(t[4]),format:e?"name":"hex8"}:(t=Xo.hex6.exec(n),t?{r:Fr(t[1]),g:Fr(t[2]),b:Fr(t[3]),format:e?"name":"hex"}:(t=Xo.hex4.exec(n),t?{r:Fr(t[1]+t[1]),g:Fr(t[2]+t[2]),b:Fr(t[3]+t[3]),a:ZR(t[4]+t[4]),format:e?"name":"hex8"}:(t=Xo.hex3.exec(n),t?{r:Fr(t[1]+t[1]),g:Fr(t[2]+t[2]),b:Fr(t[3]+t[3]),format:e?"name":"hex"}:!1)))))))))}function Qa(n){return!!Xo.CSS_UNIT.exec(String(n))}var T4=function(){function n(e,t){e===void 0&&(e=""),t===void 0&&(t={});var i;if(e instanceof n)return e;typeof e=="number"&&(e=gee(e)),this.originalInput=e;var s=vee(e);this.originalInput=e,this.r=s.r,this.g=s.g,this.b=s.b,this.a=s.a,this.roundA=Math.round(100*this.a)/100,this.format=(i=t.format)!==null&&i!==void 0?i:s.format,this.gradientType=t.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=s.ok}return n.prototype.isDark=function(){return this.getBrightness()<128},n.prototype.isLight=function(){return!this.isDark()},n.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},n.prototype.getLuminance=function(){var e=this.toRgb(),t,i,s,r=e.r/255,o=e.g/255,a=e.b/255;return r<=.03928?t=r/12.92:t=Math.pow((r+.055)/1.055,2.4),o<=.03928?i=o/12.92:i=Math.pow((o+.055)/1.055,2.4),a<=.03928?s=a/12.92:s=Math.pow((a+.055)/1.055,2.4),.2126*t+.7152*i+.0722*s},n.prototype.getAlpha=function(){return this.a},n.prototype.setAlpha=function(e){return this.a=E4(e),this.roundA=Math.round(100*this.a)/100,this},n.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},n.prototype.toHsv=function(){var e=jR(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},n.prototype.toHsvString=function(){var e=jR(this.r,this.g,this.b),t=Math.round(e.h*360),i=Math.round(e.s*100),s=Math.round(e.v*100);return this.a===1?"hsv(".concat(t,", ").concat(i,"%, ").concat(s,"%)"):"hsva(".concat(t,", ").concat(i,"%, ").concat(s,"%, ").concat(this.roundA,")")},n.prototype.toHsl=function(){var e=XR(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},n.prototype.toHslString=function(){var e=XR(this.r,this.g,this.b),t=Math.round(e.h*360),i=Math.round(e.s*100),s=Math.round(e.l*100);return this.a===1?"hsl(".concat(t,", ").concat(i,"%, ").concat(s,"%)"):"hsla(".concat(t,", ").concat(i,"%, ").concat(s,"%, ").concat(this.roundA,")")},n.prototype.toHex=function(e){return e===void 0&&(e=!1),qR(this.r,this.g,this.b,e)},n.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},n.prototype.toHex8=function(e){return e===void 0&&(e=!1),pee(this.r,this.g,this.b,this.a,e)},n.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},n.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},n.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},n.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),i=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(t,", ").concat(i,")"):"rgba(".concat(e,", ").concat(t,", ").concat(i,", ").concat(this.roundA,")")},n.prototype.toPercentageRgb=function(){var e=function(t){return"".concat(Math.round(Rs(t,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},n.prototype.toPercentageRgbString=function(){var e=function(t){return Math.round(Rs(t,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},n.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+qR(this.r,this.g,this.b,!1),t=0,i=Object.entries(EC);t<i.length;t++){var s=i[t],r=s[0],o=s[1];if(e===o)return r}return!1},n.prototype.toString=function(e){var t=!!e;e=e??this.format;var i=!1,s=this.a<1&&this.a>=0,r=!t&&s&&(e.startsWith("hex")||e==="name");return r?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},n.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},n.prototype.clone=function(){return new n(this.toString())},n.prototype.lighten=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l+=e/100,t.l=P0(t.l),new n(t)},n.prototype.brighten=function(e){e===void 0&&(e=10);var t=this.toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),new n(t)},n.prototype.darken=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l-=e/100,t.l=P0(t.l),new n(t)},n.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},n.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},n.prototype.desaturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s-=e/100,t.s=P0(t.s),new n(t)},n.prototype.saturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s+=e/100,t.s=P0(t.s),new n(t)},n.prototype.greyscale=function(){return this.desaturate(100)},n.prototype.spin=function(e){var t=this.toHsl(),i=(t.h+e)%360;return t.h=i<0?360+i:i,new n(t)},n.prototype.mix=function(e,t){t===void 0&&(t=50);var i=this.toRgb(),s=new n(e).toRgb(),r=t/100,o={r:(s.r-i.r)*r+i.r,g:(s.g-i.g)*r+i.g,b:(s.b-i.b)*r+i.b,a:(s.a-i.a)*r+i.a};return new n(o)},n.prototype.analogous=function(e,t){e===void 0&&(e=6),t===void 0&&(t=30);var i=this.toHsl(),s=360/t,r=[this];for(i.h=(i.h-(s*e>>1)+720)%360;--e;)i.h=(i.h+s)%360,r.push(new n(i));return r},n.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new n(e)},n.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var t=this.toHsv(),i=t.h,s=t.s,r=t.v,o=[],a=1/e;e--;)o.push(new n({h:i,s,v:r})),r=(r+a)%1;return o},n.prototype.splitcomplement=function(){var e=this.toHsl(),t=e.h;return[this,new n({h:(t+72)%360,s:e.s,l:e.l}),new n({h:(t+216)%360,s:e.s,l:e.l})]},n.prototype.onBackground=function(e){var t=this.toRgb(),i=new n(e).toRgb(),s=t.a+i.a*(1-t.a);return new n({r:(t.r*t.a+i.r*i.a*(1-t.a))/s,g:(t.g*t.a+i.g*i.a*(1-t.a))/s,b:(t.b*t.a+i.b*i.a*(1-t.a))/s,a:s})},n.prototype.triad=function(){return this.polyad(3)},n.prototype.tetrad=function(){return this.polyad(4)},n.prototype.polyad=function(e){for(var t=this.toHsl(),i=t.h,s=[this],r=360/e,o=1;o<e;o++)s.push(new n({h:(i+o*r)%360,s:t.s,l:t.l}));return s},n.prototype.equals=function(e){return this.toRgbString()===new n(e).toRgbString()},n}();function ic(n,e=20){return n.mix("#141414",e).toString()}function wee(n){const e=mr(),t=Ve("button");return R(()=>{let i={},s=n.color;if(s){const r=s.match(/var\((.*?)\)/);r&&(s=window.getComputedStyle(window.document.documentElement).getPropertyValue(r[1]));const o=new T4(s),a=n.dark?o.tint(20).toString():ic(o,20);if(n.plain)i=t.cssVarBlock({"bg-color":n.dark?ic(o,90):o.tint(90).toString(),"text-color":s,"border-color":n.dark?ic(o,50):o.tint(50).toString(),"hover-text-color":`var(${t.cssVarName("color-white")})`,"hover-bg-color":s,"hover-border-color":s,"active-bg-color":a,"active-text-color":`var(${t.cssVarName("color-white")})`,"active-border-color":a}),e.value&&(i[t.cssVarBlockName("disabled-bg-color")]=n.dark?ic(o,90):o.tint(90).toString(),i[t.cssVarBlockName("disabled-text-color")]=n.dark?ic(o,50):o.tint(50).toString(),i[t.cssVarBlockName("disabled-border-color")]=n.dark?ic(o,80):o.tint(80).toString());else{const l=n.dark?ic(o,30):o.tint(30).toString(),c=o.isDark()?`var(${t.cssVarName("color-white")})`:`var(${t.cssVarName("color-black")})`;if(i=t.cssVarBlock({"bg-color":s,"text-color":c,"border-color":s,"hover-bg-color":l,"hover-text-color":c,"hover-border-color":l,"active-bg-color":a,"active-border-color":a}),e.value){const u=n.dark?ic(o,50):o.tint(50).toString();i[t.cssVarBlockName("disabled-bg-color")]=u,i[t.cssVarBlockName("disabled-text-color")]=n.dark?"rgba(255, 255, 255, 0.5)":`var(${t.cssVarName("color-white")})`,i[t.cssVarBlockName("disabled-border-color")]=u}}}return i})}const xee=se({name:"ElButton"}),See=se({...xee,props:MC,emits:lee,setup(n,{expose:e,emit:t}){const i=n,s=wee(i),r=Ve("button"),{_ref:o,_size:a,_type:l,_disabled:c,_props:u,shouldAddSpace:d,handleClick:h}=oee(i,t),f=R(()=>[r.b(),r.m(l.value),r.m(a.value),r.is("disabled",c.value),r.is("loading",i.loading),r.is("plain",i.plain),r.is("round",i.round),r.is("circle",i.circle),r.is("text",i.text),r.is("link",i.link),r.is("has-bg",i.bg)]);return e({ref:o,size:a,type:l,disabled:c,shouldAddSpace:d}),(m,p)=>(k(),Re(Wt(m.tag),Kt({ref_key:"_ref",ref:o},g(u),{class:g(f),style:g(s),onClick:g(h)}),{default:pe(()=>[m.loading?(k(),Y(mt,{key:0},[m.$slots.loading?ke(m.$slots,"loading",{key:0}):(k(),Re(g(dt),{key:1,class:z(g(r).is("loading"))},{default:pe(()=>[(k(),Re(Wt(m.loadingIcon)))]),_:1},8,["class"]))],64)):m.icon||m.$slots.icon?(k(),Re(g(dt),{key:1},{default:pe(()=>[m.icon?(k(),Re(Wt(m.icon),{key:0})):ke(m.$slots,"icon",{key:1})]),_:3})):Ee("v-if",!0),m.$slots.default?(k(),Y("span",{key:2,class:z({[g(r).em("text","expand")]:g(d)})},[ke(m.$slots,"default")],2)):Ee("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var Cee=Ze(See,[["__file","button.vue"]]);const Mee={size:MC.size,type:MC.type},Eee=se({name:"ElButtonGroup"}),Tee=se({...Eee,props:Mee,setup(n){const e=n;Xt(M4,un({size:vn(e,"size"),type:vn(e,"type")}));const t=Ve("button");return(i,s)=>(k(),Y("div",{class:z(g(t).b("group"))},[ke(i.$slots,"default")],2))}});var A4=Ze(Tee,[["__file","button-group.vue"]]);const as=Ht(Cee,{ButtonGroup:A4}),I4=si(A4);var Jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xa(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var R4={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Jl,function(){var t=1e3,i=6e4,s=36e5,r="millisecond",o="second",a="minute",l="hour",c="day",u="week",d="month",h="quarter",f="year",m="date",p="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(F){var U=["th","st","nd","rd"],P=F%100;return"["+F+(U[(P-20)%10]||U[P]||U[0])+"]"}},b=function(F,U,P){var O=String(F);return!O||O.length>=U?F:""+Array(U+1-O.length).join(P)+F},w={s:b,z:function(F){var U=-F.utcOffset(),P=Math.abs(U),O=Math.floor(P/60),D=P%60;return(U<=0?"+":"-")+b(O,2,"0")+":"+b(D,2,"0")},m:function F(U,P){if(U.date()<P.date())return-F(P,U);var O=12*(P.year()-U.year())+(P.month()-U.month()),D=U.clone().add(O,d),L=P-D<0,H=U.clone().add(O+(L?-1:1),d);return+(-(O+(P-D)/(L?D-H:H-D))||0)},a:function(F){return F<0?Math.ceil(F)||0:Math.floor(F)},p:function(F){return{M:d,y:f,w:u,d:c,D:m,h:l,m:a,s:o,ms:r,Q:h}[F]||String(F||"").toLowerCase().replace(/s$/,"")},u:function(F){return F===void 0}},x="en",S={};S[x]=_;var C="$isDayjsObject",T=function(F){return F instanceof I||!(!F||!F[C])},M=function F(U,P,O){var D;if(!U)return x;if(typeof U=="string"){var L=U.toLowerCase();S[L]&&(D=L),P&&(S[L]=P,D=L);var H=U.split("-");if(!D&&H.length>1)return F(H[0])}else{var X=U.name;S[X]=U,D=X}return!O&&D&&(x=D),D||!O&&x},E=function(F,U){if(T(F))return F.clone();var P=typeof U=="object"?U:{};return P.date=F,P.args=arguments,new I(P)},A=w;A.l=M,A.i=T,A.w=function(F,U){return E(F,{locale:U.$L,utc:U.$u,x:U.$x,$offset:U.$offset})};var I=function(){function F(P){this.$L=M(P.locale,null,!0),this.parse(P),this.$x=this.$x||P.x||{},this[C]=!0}var U=F.prototype;return U.parse=function(P){this.$d=function(O){var D=O.date,L=O.utc;if(D===null)return new Date(NaN);if(A.u(D))return new Date;if(D instanceof Date)return new Date(D);if(typeof D=="string"&&!/Z$/i.test(D)){var H=D.match(y);if(H){var X=H[2]-1||0,ne=(H[7]||"0").substring(0,3);return L?new Date(Date.UTC(H[1],X,H[3]||1,H[4]||0,H[5]||0,H[6]||0,ne)):new Date(H[1],X,H[3]||1,H[4]||0,H[5]||0,H[6]||0,ne)}}return new Date(D)}(P),this.init()},U.init=function(){var P=this.$d;this.$y=P.getFullYear(),this.$M=P.getMonth(),this.$D=P.getDate(),this.$W=P.getDay(),this.$H=P.getHours(),this.$m=P.getMinutes(),this.$s=P.getSeconds(),this.$ms=P.getMilliseconds()},U.$utils=function(){return A},U.isValid=function(){return this.$d.toString()!==p},U.isSame=function(P,O){var D=E(P);return this.startOf(O)<=D&&D<=this.endOf(O)},U.isAfter=function(P,O){return E(P)<this.startOf(O)},U.isBefore=function(P,O){return this.endOf(O)<E(P)},U.$g=function(P,O,D){return A.u(P)?this[O]:this.set(D,P)},U.unix=function(){return Math.floor(this.valueOf()/1e3)},U.valueOf=function(){return this.$d.getTime()},U.startOf=function(P,O){var D=this,L=!!A.u(O)||O,H=A.p(P),X=function(Te,Ce){var we=A.w(D.$u?Date.UTC(D.$y,Ce,Te):new Date(D.$y,Ce,Te),D);return L?we:we.endOf(c)},ne=function(Te,Ce){return A.w(D.toDate()[Te].apply(D.toDate("s"),(L?[0,0,0,0]:[23,59,59,999]).slice(Ce)),D)},ce=this.$W,ae=this.$M,_e=this.$D,re="set"+(this.$u?"UTC":"");switch(H){case f:return L?X(1,0):X(31,11);case d:return L?X(1,ae):X(0,ae+1);case u:var xe=this.$locale().weekStart||0,he=(ce<xe?ce+7:ce)-xe;return X(L?_e-he:_e+(6-he),ae);case c:case m:return ne(re+"Hours",0);case l:return ne(re+"Minutes",1);case a:return ne(re+"Seconds",2);case o:return ne(re+"Milliseconds",3);default:return this.clone()}},U.endOf=function(P){return this.startOf(P,!1)},U.$set=function(P,O){var D,L=A.p(P),H="set"+(this.$u?"UTC":""),X=(D={},D[c]=H+"Date",D[m]=H+"Date",D[d]=H+"Month",D[f]=H+"FullYear",D[l]=H+"Hours",D[a]=H+"Minutes",D[o]=H+"Seconds",D[r]=H+"Milliseconds",D)[L],ne=L===c?this.$D+(O-this.$W):O;if(L===d||L===f){var ce=this.clone().set(m,1);ce.$d[X](ne),ce.init(),this.$d=ce.set(m,Math.min(this.$D,ce.daysInMonth())).$d}else X&&this.$d[X](ne);return this.init(),this},U.set=function(P,O){return this.clone().$set(P,O)},U.get=function(P){return this[A.p(P)]()},U.add=function(P,O){var D,L=this;P=Number(P);var H=A.p(O),X=function(ae){var _e=E(L);return A.w(_e.date(_e.date()+Math.round(ae*P)),L)};if(H===d)return this.set(d,this.$M+P);if(H===f)return this.set(f,this.$y+P);if(H===c)return X(1);if(H===u)return X(7);var ne=(D={},D[a]=i,D[l]=s,D[o]=t,D)[H]||1,ce=this.$d.getTime()+P*ne;return A.w(ce,this)},U.subtract=function(P,O){return this.add(-1*P,O)},U.format=function(P){var O=this,D=this.$locale();if(!this.isValid())return D.invalidDate||p;var L=P||"YYYY-MM-DDTHH:mm:ssZ",H=A.z(this),X=this.$H,ne=this.$m,ce=this.$M,ae=D.weekdays,_e=D.months,re=D.meridiem,xe=function(Ce,we,K,j){return Ce&&(Ce[we]||Ce(O,L))||K[we].slice(0,j)},he=function(Ce){return A.s(X%12||12,Ce,"0")},Te=re||function(Ce,we,K){var j=Ce<12?"AM":"PM";return K?j.toLowerCase():j};return L.replace(v,function(Ce,we){return we||function(K){switch(K){case"YY":return String(O.$y).slice(-2);case"YYYY":return A.s(O.$y,4,"0");case"M":return ce+1;case"MM":return A.s(ce+1,2,"0");case"MMM":return xe(D.monthsShort,ce,_e,3);case"MMMM":return xe(_e,ce);case"D":return O.$D;case"DD":return A.s(O.$D,2,"0");case"d":return String(O.$W);case"dd":return xe(D.weekdaysMin,O.$W,ae,2);case"ddd":return xe(D.weekdaysShort,O.$W,ae,3);case"dddd":return ae[O.$W];case"H":return String(X);case"HH":return A.s(X,2,"0");case"h":return he(1);case"hh":return he(2);case"a":return Te(X,ne,!0);case"A":return Te(X,ne,!1);case"m":return String(ne);case"mm":return A.s(ne,2,"0");case"s":return String(O.$s);case"ss":return A.s(O.$s,2,"0");case"SSS":return A.s(O.$ms,3,"0");case"Z":return H}return null}(Ce)||H.replace(":","")})},U.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},U.diff=function(P,O,D){var L,H=this,X=A.p(O),ne=E(P),ce=(ne.utcOffset()-this.utcOffset())*i,ae=this-ne,_e=function(){return A.m(H,ne)};switch(X){case f:L=_e()/12;break;case d:L=_e();break;case h:L=_e()/3;break;case u:L=(ae-ce)/6048e5;break;case c:L=(ae-ce)/864e5;break;case l:L=ae/s;break;case a:L=ae/i;break;case o:L=ae/t;break;default:L=ae}return D?L:A.a(L)},U.daysInMonth=function(){return this.endOf(d).$D},U.$locale=function(){return S[this.$L]},U.locale=function(P,O){if(!P)return this.$L;var D=this.clone(),L=M(P,O,!0);return L&&(D.$L=L),D},U.clone=function(){return A.w(this.$d,this)},U.toDate=function(){return new Date(this.valueOf())},U.toJSON=function(){return this.isValid()?this.toISOString():null},U.toISOString=function(){return this.$d.toISOString()},U.toString=function(){return this.$d.toUTCString()},F}(),B=I.prototype;return E.prototype=B,[["$ms",r],["$s",o],["$m",a],["$H",l],["$W",c],["$M",d],["$y",f],["$D",m]].forEach(function(F){B[F[1]]=function(U){return this.$g(U,F[0],F[1])}}),E.extend=function(F,U){return F.$i||(F(U,I,E),F.$i=!0),E},E.locale=M,E.isDayjs=T,E.unix=function(F){return E(1e3*F)},E.en=S[x],E.Ls=S,E.p={},E})})(R4);var Aee=R4.exports;const Vt=Xa(Aee);var P4={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Jl,function(){var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},i=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,s=/\d\d/,r=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,a={},l=function(p){return(p=+p)+(p>68?1900:2e3)},c=function(p){return function(y){this[p]=+y}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(p){(this.zone||(this.zone={})).offset=function(y){if(!y||y==="Z")return 0;var v=y.match(/([+-]|\d\d)/g),_=60*v[1]+(+v[2]||0);return _===0?0:v[0]==="+"?-_:_}(p)}],d=function(p){var y=a[p];return y&&(y.indexOf?y:y.s.concat(y.f))},h=function(p,y){var v,_=a.meridiem;if(_){for(var b=1;b<=24;b+=1)if(p.indexOf(_(b,0,y))>-1){v=b>12;break}}else v=p===(y?"pm":"PM");return v},f={A:[o,function(p){this.afternoon=h(p,!1)}],a:[o,function(p){this.afternoon=h(p,!0)}],S:[/\d/,function(p){this.milliseconds=100*+p}],SS:[s,function(p){this.milliseconds=10*+p}],SSS:[/\d{3}/,function(p){this.milliseconds=+p}],s:[r,c("seconds")],ss:[r,c("seconds")],m:[r,c("minutes")],mm:[r,c("minutes")],H:[r,c("hours")],h:[r,c("hours")],HH:[r,c("hours")],hh:[r,c("hours")],D:[r,c("day")],DD:[s,c("day")],Do:[o,function(p){var y=a.ordinal,v=p.match(/\d+/);if(this.day=v[0],y)for(var _=1;_<=31;_+=1)y(_).replace(/\[|\]/g,"")===p&&(this.day=_)}],M:[r,c("month")],MM:[s,c("month")],MMM:[o,function(p){var y=d("months"),v=(d("monthsShort")||y.map(function(_){return _.slice(0,3)})).indexOf(p)+1;if(v<1)throw new Error;this.month=v%12||v}],MMMM:[o,function(p){var y=d("months").indexOf(p)+1;if(y<1)throw new Error;this.month=y%12||y}],Y:[/[+-]?\d+/,c("year")],YY:[s,function(p){this.year=l(p)}],YYYY:[/\d{4}/,c("year")],Z:u,ZZ:u};function m(p){var y,v;y=p,v=a&&a.formats;for(var _=(p=y.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(M,E,A){var I=A&&A.toUpperCase();return E||v[A]||t[A]||v[I].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(B,F,U){return F||U.slice(1)})})).match(i),b=_.length,w=0;w<b;w+=1){var x=_[w],S=f[x],C=S&&S[0],T=S&&S[1];_[w]=T?{regex:C,parser:T}:x.replace(/^\[|\]$/g,"")}return function(M){for(var E={},A=0,I=0;A<b;A+=1){var B=_[A];if(typeof B=="string")I+=B.length;else{var F=B.regex,U=B.parser,P=M.slice(I),O=F.exec(P)[0];U.call(E,O),M=M.replace(O,"")}}return function(D){var L=D.afternoon;if(L!==void 0){var H=D.hours;L?H<12&&(D.hours+=12):H===12&&(D.hours=0),delete D.afternoon}}(E),E}}return function(p,y,v){v.p.customParseFormat=!0,p&&p.parseTwoDigitYear&&(l=p.parseTwoDigitYear);var _=y.prototype,b=_.parse;_.parse=function(w){var x=w.date,S=w.utc,C=w.args;this.$u=S;var T=C[1];if(typeof T=="string"){var M=C[2]===!0,E=C[3]===!0,A=M||E,I=C[2];E&&(I=C[2]),a=this.$locale(),!M&&I&&(a=v.Ls[I]),this.$d=function(P,O,D){try{if(["x","X"].indexOf(O)>-1)return new Date((O==="X"?1e3:1)*P);var L=m(O)(P),H=L.year,X=L.month,ne=L.day,ce=L.hours,ae=L.minutes,_e=L.seconds,re=L.milliseconds,xe=L.zone,he=new Date,Te=ne||(H||X?1:he.getDate()),Ce=H||he.getFullYear(),we=0;H&&!X||(we=X>0?X-1:he.getMonth());var K=ce||0,j=ae||0,ie=_e||0,ve=re||0;return xe?new Date(Date.UTC(Ce,we,Te,K,j,ie,ve+60*xe.offset*1e3)):D?new Date(Date.UTC(Ce,we,Te,K,j,ie,ve)):new Date(Ce,we,Te,K,j,ie,ve)}catch{return new Date("")}}(x,T,S),this.init(),I&&I!==!0&&(this.$L=this.locale(I).$L),A&&x!=this.format(T)&&(this.$d=new Date("")),a={}}else if(T instanceof Array)for(var B=T.length,F=1;F<=B;F+=1){C[1]=T[F-1];var U=v.apply(this,C);if(U.isValid()){this.$d=U.$d,this.$L=U.$L,this.init();break}F===B&&(this.$d=new Date(""))}else b.call(this,w)}}})})(P4);var Iee=P4.exports;const AT=Xa(Iee),JR=["hours","minutes","seconds"],TC="HH:mm:ss",lf="YYYY-MM-DD",Ree={date:lf,dates:lf,week:"gggg[w]ww",year:"YYYY",years:"YYYY",month:"YYYY-MM",months:"YYYY-MM",datetime:`${lf} ${TC}`,monthrange:"YYYY-MM",daterange:lf,datetimerange:`${lf} ${TC}`},lx=(n,e)=>[n>0?n-1:void 0,n,n<e?n+1:void 0],Kc=n=>Array.from(Array.from({length:n}).keys()),L4=n=>n.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim(),k4=n=>n.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?Y{2,4}/g,"").trim(),QR=function(n,e){const t=Fd(n),i=Fd(e);return t&&i?n.getTime()===e.getTime():!t&&!i?n===e:!1},eP=function(n,e){const t=rt(n),i=rt(e);return t&&i?n.length!==e.length?!1:n.every((s,r)=>QR(s,e[r])):!t&&!i?QR(n,e):!1},tP=function(n,e,t){const i=_o(e)||e==="x"?Vt(n).locale(t):Vt(n,e).locale(t);return i.isValid()?i:void 0},nP=function(n,e,t){return _o(e)?n:e==="x"?+n:Vt(n).locale(t).format(e)},cx=(n,e)=>{var t;const i=[],s=e==null?void 0:e();for(let r=0;r<n;r++)i.push((t=s==null?void 0:s.includes(r))!=null?t:!1);return i},O4=Ye({disabledHours:{type:ge(Function)},disabledMinutes:{type:ge(Function)},disabledSeconds:{type:ge(Function)}}),D4=Ye({visible:Boolean,actualVisible:{type:Boolean,default:void 0},format:{type:String,default:""}}),IT=Ye({id:{type:ge([Array,String])},name:{type:ge([Array,String]),default:""},popperClass:{type:String,default:""},format:String,valueFormat:String,dateFormat:String,timeFormat:String,type:{type:String,default:""},clearable:{type:Boolean,default:!0},clearIcon:{type:ge([String,Object]),default:mu},editable:{type:Boolean,default:!0},prefixIcon:{type:ge([String,Object]),default:""},size:Zi,readonly:Boolean,disabled:Boolean,placeholder:{type:String,default:""},popperOptions:{type:ge(Object),default:()=>({})},modelValue:{type:ge([Date,Array,String,Number]),default:""},rangeSeparator:{type:String,default:"-"},startPlaceholder:String,endPlaceholder:String,defaultValue:{type:ge([Date,Array])},defaultTime:{type:ge([Date,Array])},isRange:Boolean,...O4,disabledDate:{type:Function},cellClassName:{type:Function},shortcuts:{type:Array,default:()=>[]},arrowControl:Boolean,label:{type:String,default:void 0},tabindex:{type:ge([String,Number]),default:0},validateEvent:{type:Boolean,default:!0},unlinkPanels:Boolean,...Pp,...Ss(["ariaLabel"])}),Pee=["id","name","placeholder","value","disabled","readonly"],Lee=["id","name","placeholder","value","disabled","readonly"],kee=se({name:"Picker"}),Oee=se({...kee,props:IT,emits:["update:modelValue","change","focus","blur","clear","calendar-change","panel-change","visible-change","keydown"],setup(n,{expose:e,emit:t}){const i=n,s=ah(),{lang:r}=en(),o=Ve("date"),a=Ve("input"),l=Ve("range"),{form:c,formItem:u}=Qs(),d=ct("ElPopperOptions",{}),{valueOnClear:h}=D1(i,null),f=V(),m=V(),p=V(!1),y=V(!1),v=V(null);let _=!1,b=!1;const w=R(()=>[o.b("editor"),o.bm("editor",i.type),a.e("wrapper"),o.is("disabled",ce.value),o.is("active",p.value),l.b("editor"),Z?l.bm("editor",Z.value):"",s.class]),x=R(()=>[a.e("icon"),l.e("close-icon"),K.value?"":l.e("close-icon--hidden")]);ze(p,Q=>{Q?vt(()=>{Q&&(v.value=i.modelValue)}):(Ae.value=null,vt(()=>{S(i.modelValue)}))});const S=(Q,$e)=>{($e||!eP(Q,v.value))&&(t("change",Q),i.validateEvent&&(u==null||u.validate("change").catch(Oe=>void 0)))},C=Q=>{if(!eP(i.modelValue,Q)){let $e;rt(Q)?$e=Q.map(Oe=>nP(Oe,i.valueFormat,r.value)):Q&&($e=nP(Q,i.valueFormat,r.value)),t("update:modelValue",Q&&$e,r.value)}},T=Q=>{t("keydown",Q)},M=R(()=>{if(m.value){const Q=Pe.value?m.value:m.value.$el;return Array.from(Q.querySelectorAll("input"))}return[]}),E=(Q,$e,Oe)=>{const et=M.value;et.length&&(!Oe||Oe==="min"?(et[0].setSelectionRange(Q,$e),et[0].focus()):Oe==="max"&&(et[1].setSelectionRange(Q,$e),et[1].focus()))},A=()=>{L(!0,!0),vt(()=>{b=!1})},I=(Q="",$e=!1)=>{$e||(b=!0),p.value=$e;let Oe;rt(Q)?Oe=Q.map(et=>et.toDate()):Oe=Q&&Q.toDate(),Ae.value=null,C(Oe)},B=()=>{y.value=!0},F=()=>{t("visible-change",!0)},U=Q=>{(Q==null?void 0:Q.key)===wt.esc&&L(!0,!0)},P=()=>{y.value=!1,p.value=!1,b=!1,t("visible-change",!1)},O=()=>{p.value=!0},D=()=>{p.value=!1},L=(Q=!0,$e=!1)=>{b=$e;const[Oe,et]=g(M);let ht=Oe;!Q&&Pe.value&&(ht=et),ht&&ht.focus()},H=Q=>{i.readonly||ce.value||p.value||b||(p.value=!0,t("focus",Q))};let X;const ne=Q=>{const $e=async()=>{setTimeout(()=>{var Oe;X===$e&&(!((Oe=f.value)!=null&&Oe.isFocusInsideContent()&&!_)&&M.value.filter(et=>et.contains(document.activeElement)).length===0&&(De(),p.value=!1,t("blur",Q),i.validateEvent&&(u==null||u.validate("blur").catch(et=>void 0))),_=!1)},0)};X=$e,$e()},ce=R(()=>i.disabled||(c==null?void 0:c.disabled)),ae=R(()=>{let Q;if(ie.value?oe.value.getDefaultValue&&(Q=oe.value.getDefaultValue()):rt(i.modelValue)?Q=i.modelValue.map($e=>tP($e,i.valueFormat,r.value)):Q=tP(i.modelValue,i.valueFormat,r.value),oe.value.getRangeAvailableTime){const $e=oe.value.getRangeAvailableTime(Q);Ys($e,Q)||(Q=$e,C(rt(Q)?Q.map(Oe=>Oe.toDate()):Q.toDate()))}return rt(Q)&&Q.some($e=>!$e)&&(Q=[]),Q}),_e=R(()=>{if(!oe.value.panelReady)return"";const Q=Ge(ae.value);return rt(Ae.value)?[Ae.value[0]||Q&&Q[0]||"",Ae.value[1]||Q&&Q[1]||""]:Ae.value!==null?Ae.value:!xe.value&&ie.value||!p.value&&ie.value?"":Q?he.value||Te.value||Ce.value?Q.join(", "):Q:""}),re=R(()=>i.type.includes("time")),xe=R(()=>i.type.startsWith("time")),he=R(()=>i.type==="dates"),Te=R(()=>i.type==="months"),Ce=R(()=>i.type==="years"),we=R(()=>i.prefixIcon||(re.value?yN:oY)),K=V(!1),j=Q=>{i.readonly||ce.value||(K.value&&(Q.stopPropagation(),A(),C(h.value),S(h.value,!0),K.value=!1,p.value=!1,oe.value.handleClear&&oe.value.handleClear()),t("clear"))},ie=R(()=>{const{modelValue:Q}=i;return!Q||rt(Q)&&!Q.filter(Boolean).length}),ve=async Q=>{var $e;i.readonly||ce.value||((($e=Q.target)==null?void 0:$e.tagName)!=="INPUT"||M.value.includes(document.activeElement))&&(p.value=!0)},ye=()=>{i.readonly||ce.value||!ie.value&&i.clearable&&(K.value=!0)},me=()=>{K.value=!1},be=Q=>{var $e;i.readonly||ce.value||((($e=Q.touches[0].target)==null?void 0:$e.tagName)!=="INPUT"||M.value.includes(document.activeElement))&&(p.value=!0)},Pe=R(()=>i.type.includes("range")),Z=Hi(),$=R(()=>{var Q,$e;return($e=(Q=g(f))==null?void 0:Q.popperRef)==null?void 0:$e.contentRef}),de=R(()=>{var Q;return g(Pe)?g(m):(Q=g(m))==null?void 0:Q.$el});IE(de,Q=>{const $e=g($),Oe=g(de);$e&&(Q.target===$e||Q.composedPath().includes($e))||Q.target===Oe||Q.composedPath().includes(Oe)||(p.value=!1)});const Ae=V(null),De=()=>{if(Ae.value){const Q=fe(_e.value);Q&&We(Q)&&(C(rt(Q)?Q.map($e=>$e.toDate()):Q.toDate()),Ae.value=null)}Ae.value===""&&(C(h.value),S(h.value),Ae.value=null)},fe=Q=>Q?oe.value.parseUserInput(Q):null,Ge=Q=>Q?oe.value.formatToString(Q):null,We=Q=>oe.value.isValidValue(Q),je=async Q=>{if(i.readonly||ce.value)return;const{code:$e}=Q;if(T(Q),$e===wt.esc){p.value===!0&&(p.value=!1,Q.preventDefault(),Q.stopPropagation());return}if($e===wt.down&&(oe.value.handleFocusPicker&&(Q.preventDefault(),Q.stopPropagation()),p.value===!1&&(p.value=!0,await vt()),oe.value.handleFocusPicker)){oe.value.handleFocusPicker();return}if($e===wt.tab){_=!0;return}if($e===wt.enter||$e===wt.numpadEnter){(Ae.value===null||Ae.value===""||We(fe(_e.value)))&&(De(),p.value=!1),Q.stopPropagation();return}if(Ae.value){Q.stopPropagation();return}oe.value.handleKeydownInput&&oe.value.handleKeydownInput(Q)},at=Q=>{Ae.value=Q,p.value||(p.value=!0)},Ue=Q=>{const $e=Q.target;Ae.value?Ae.value=[$e.value,Ae.value[1]]:Ae.value=[$e.value,null]},qe=Q=>{const $e=Q.target;Ae.value?Ae.value=[Ae.value[0],$e.value]:Ae.value=[null,$e.value]},Fe=()=>{var Q;const $e=Ae.value,Oe=fe($e&&$e[0]),et=g(ae);if(Oe&&Oe.isValid()){Ae.value=[Ge(Oe),((Q=_e.value)==null?void 0:Q[1])||null];const ht=[Oe,et&&(et[1]||null)];We(ht)&&(C(ht),Ae.value=null)}},Ie=()=>{var Q;const $e=g(Ae),Oe=fe($e&&$e[1]),et=g(ae);if(Oe&&Oe.isValid()){Ae.value=[((Q=g(_e))==null?void 0:Q[0])||null,Ge(Oe)];const ht=[et&&et[0],Oe];We(ht)&&(C(ht),Ae.value=null)}},oe=V({}),Le=Q=>{oe.value[Q[0]]=Q[1],oe.value.panelReady=!0},Ke=Q=>{t("calendar-change",Q)},ft=(Q,$e,Oe)=>{t("panel-change",Q,$e,Oe)};return Xt("EP_PICKER_BASE",{props:i}),ns({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-time-picker",ref:"https://element-plus.org/en-US/component/time-picker.html"},R(()=>!!i.label)),e({focus:L,handleFocusInput:H,handleBlurInput:ne,handleOpen:O,handleClose:D,onPick:I}),(Q,$e)=>(k(),Re(g(Zs),Kt({ref_key:"refPopper",ref:f,visible:p.value,effect:"light",pure:"",trigger:"click"},Q.$attrs,{role:"dialog",teleported:"",transition:`${g(o).namespace.value}-zoom-in-top`,"popper-class":[`${g(o).namespace.value}-picker__popper`,Q.popperClass],"popper-options":g(d),"fallback-placements":["bottom","top","right","left"],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"hide-after":0,persistent:"",onBeforeShow:B,onShow:F,onHide:P}),{default:pe(()=>[g(Pe)?(k(),Y("div",{key:1,ref_key:"inputRef",ref:m,class:z(g(w)),style:pt(Q.$attrs.style),onClick:H,onMouseenter:ye,onMouseleave:me,onTouchstartPassive:be,onKeydown:je},[g(we)?(k(),Re(g(dt),{key:0,class:z([g(a).e("icon"),g(l).e("icon")]),onMousedown:Tt(ve,["prevent"]),onTouchstartPassive:be},{default:pe(()=>[(k(),Re(Wt(g(we))))]),_:1},8,["class","onMousedown"])):Ee("v-if",!0),te("input",{id:Q.id&&Q.id[0],autocomplete:"off",name:Q.name&&Q.name[0],placeholder:Q.startPlaceholder,value:g(_e)&&g(_e)[0],disabled:g(ce),readonly:!Q.editable||Q.readonly,class:z(g(l).b("input")),onMousedown:ve,onInput:Ue,onChange:Fe,onFocus:H,onBlur:ne},null,42,Pee),ke(Q.$slots,"range-separator",{},()=>[te("span",{class:z(g(l).b("separator"))},Je(Q.rangeSeparator),3)]),te("input",{id:Q.id&&Q.id[1],autocomplete:"off",name:Q.name&&Q.name[1],placeholder:Q.endPlaceholder,value:g(_e)&&g(_e)[1],disabled:g(ce),readonly:!Q.editable||Q.readonly,class:z(g(l).b("input")),onMousedown:ve,onFocus:H,onBlur:ne,onInput:qe,onChange:Ie},null,42,Lee),Q.clearIcon?(k(),Re(g(dt),{key:1,class:z(g(x)),onClick:j},{default:pe(()=>[(k(),Re(Wt(Q.clearIcon)))]),_:1},8,["class"])):Ee("v-if",!0)],38)):(k(),Re(g(Ks),{key:0,id:Q.id,ref_key:"inputRef",ref:m,"container-role":"combobox","model-value":g(_e),name:Q.name,size:g(Z),disabled:g(ce),placeholder:Q.placeholder,class:z([g(o).b("editor"),g(o).bm("editor",Q.type),Q.$attrs.class]),style:pt(Q.$attrs.style),readonly:!Q.editable||Q.readonly||g(he)||g(Te)||g(Ce)||Q.type==="week","aria-label":Q.label||Q.ariaLabel,tabindex:Q.tabindex,"validate-event":!1,onInput:at,onFocus:H,onBlur:ne,onKeydown:je,onChange:De,onMousedown:ve,onMouseenter:ye,onMouseleave:me,onTouchstartPassive:be,onClick:$e[0]||($e[0]=Tt(()=>{},["stop"]))},{prefix:pe(()=>[g(we)?(k(),Re(g(dt),{key:0,class:z(g(a).e("icon")),onMousedown:Tt(ve,["prevent"]),onTouchstartPassive:be},{default:pe(()=>[(k(),Re(Wt(g(we))))]),_:1},8,["class","onMousedown"])):Ee("v-if",!0)]),suffix:pe(()=>[K.value&&Q.clearIcon?(k(),Re(g(dt),{key:0,class:z(`${g(a).e("icon")} clear-icon`),onClick:Tt(j,["stop"])},{default:pe(()=>[(k(),Re(Wt(Q.clearIcon)))]),_:1},8,["class","onClick"])):Ee("v-if",!0)]),_:1},8,["id","model-value","name","size","disabled","placeholder","class","style","readonly","aria-label","tabindex","onKeydown"]))]),content:pe(()=>[ke(Q.$slots,"default",{visible:p.value,actualVisible:y.value,parsedValue:g(ae),format:Q.format,dateFormat:Q.dateFormat,timeFormat:Q.timeFormat,unlinkPanels:Q.unlinkPanels,type:Q.type,defaultValue:Q.defaultValue,onPick:I,onSelectRange:E,onSetPickerOption:Le,onCalendarChange:Ke,onPanelChange:ft,onKeydown:U,onMousedown:$e[1]||($e[1]=Tt(()=>{},["stop"]))})]),_:3},16,["visible","transition","popper-class","popper-options"]))}});var N4=Ze(Oee,[["__file","picker.vue"]]);const Dee=Ye({...D4,datetimeRole:String,parsedValue:{type:ge(Object)}}),F4=({getAvailableHours:n,getAvailableMinutes:e,getAvailableSeconds:t})=>{const i=(o,a,l,c)=>{const u={hour:n,minute:e,second:t};let d=o;return["hour","minute","second"].forEach(h=>{if(u[h]){let f;const m=u[h];switch(h){case"minute":{f=m(d.hour(),a,c);break}case"second":{f=m(d.hour(),d.minute(),a,c);break}default:{f=m(a,c);break}}if(f!=null&&f.length&&!f.includes(d[h]())){const p=l?0:f.length-1;d=d[h](f[p])}}}),d},s={};return{timePickerOptions:s,getAvailableTime:i,onSetOption:([o,a])=>{s[o]=a}}},ux=n=>{const e=(i,s)=>i||s,t=i=>i!==!0;return n.map(e).filter(t)},B4=(n,e,t)=>({getHoursList:(o,a)=>cx(24,n&&(()=>n==null?void 0:n(o,a))),getMinutesList:(o,a,l)=>cx(60,e&&(()=>e==null?void 0:e(o,a,l))),getSecondsList:(o,a,l,c)=>cx(60,t&&(()=>t==null?void 0:t(o,a,l,c)))}),U4=(n,e,t)=>{const{getHoursList:i,getMinutesList:s,getSecondsList:r}=B4(n,e,t);return{getAvailableHours:(c,u)=>ux(i(c,u)),getAvailableMinutes:(c,u,d)=>ux(s(c,u,d)),getAvailableSeconds:(c,u,d,h)=>ux(r(c,u,d,h))}},z4=n=>{const e=V(n.parsedValue);return ze(()=>n.visible,t=>{t||(e.value=n.parsedValue)}),e},wc=new Map;let iP;Jt&&(document.addEventListener("mousedown",n=>iP=n),document.addEventListener("mouseup",n=>{for(const e of wc.values())for(const{documentHandler:t}of e)t(n,iP)}));function sP(n,e){let t=[];return Array.isArray(e.arg)?t=e.arg:Lo(e.arg)&&t.push(e.arg),function(i,s){const r=e.instance.popperRef,o=i.target,a=s==null?void 0:s.target,l=!e||!e.instance,c=!o||!a,u=n.contains(o)||n.contains(a),d=n===o,h=t.length&&t.some(m=>m==null?void 0:m.contains(o))||t.length&&t.includes(a),f=r&&(r.contains(o)||r.contains(a));l||c||u||d||h||f||e.value(i,s)}}const Ll={beforeMount(n,e){wc.has(n)||wc.set(n,[]),wc.get(n).push({documentHandler:sP(n,e),bindingFn:e.value})},updated(n,e){wc.has(n)||wc.set(n,[]);const t=wc.get(n),i=t.findIndex(r=>r.bindingFn===e.oldValue),s={documentHandler:sP(n,e),bindingFn:e.value};i>=0?t.splice(i,1,s):t.push(s)},unmounted(n){wc.delete(n)}},Nee=100,Fee=600,X_={beforeMount(n,e){const t=e.value,{interval:i=Nee,delay:s=Fee}=xt(t)?{}:t;let r,o;const a=()=>xt(t)?t():t.handler(),l=()=>{o&&(clearTimeout(o),o=void 0),r&&(clearInterval(r),r=void 0)};n.addEventListener("mousedown",c=>{c.button===0&&(l(),a(),document.addEventListener("mouseup",()=>l(),{once:!0}),o=setTimeout(()=>{r=setInterval(()=>{a()},i)},s))})}},AC="_trap-focus-children",rd=[],rP=n=>{if(rd.length===0)return;const e=rd[rd.length-1][AC];if(e.length>0&&n.code===wt.tab){if(e.length===1){n.preventDefault(),document.activeElement!==e[0]&&e[0].focus();return}const t=n.shiftKey,i=n.target===e[0],s=n.target===e[e.length-1];i&&t&&(n.preventDefault(),e[e.length-1].focus()),s&&!t&&(n.preventDefault(),e[0].focus())}},Bee={beforeMount(n){n[AC]=pI(n),rd.push(n),rd.length<=1&&document.addEventListener("keydown",rP)},updated(n){vt(()=>{n[AC]=pI(n)})},unmounted(){rd.shift(),rd.length===0&&document.removeEventListener("keydown",rP)}};var oP=!1,Ju,IC,RC,s_,r_,H4,o_,PC,LC,kC,V4,OC,DC,$4,G4;function vr(){if(!oP){oP=!0;var n=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(n),t=/(Mac OS X)|(Windows)|(Linux)/.exec(n);if(OC=/\b(iPhone|iP[ao]d)/.exec(n),DC=/\b(iP[ao]d)/.exec(n),kC=/Android/i.exec(n),$4=/FBAN\/\w+;/i.exec(n),G4=/Mobile/i.exec(n),V4=!!/Win64/.exec(n),e){Ju=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,Ju&&document&&document.documentMode&&(Ju=document.documentMode);var i=/(?:Trident\/(\d+.\d+))/.exec(n);H4=i?parseFloat(i[1])+4:Ju,IC=e[2]?parseFloat(e[2]):NaN,RC=e[3]?parseFloat(e[3]):NaN,s_=e[4]?parseFloat(e[4]):NaN,s_?(e=/(?:Chrome\/(\d+\.\d+))/.exec(n),r_=e&&e[1]?parseFloat(e[1]):NaN):r_=NaN}else Ju=IC=RC=r_=s_=NaN;if(t){if(t[1]){var s=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(n);o_=s?parseFloat(s[1].replace("_",".")):!0}else o_=!1;PC=!!t[2],LC=!!t[3]}else o_=PC=LC=!1}}var NC={ie:function(){return vr()||Ju},ieCompatibilityMode:function(){return vr()||H4>Ju},ie64:function(){return NC.ie()&&V4},firefox:function(){return vr()||IC},opera:function(){return vr()||RC},webkit:function(){return vr()||s_},safari:function(){return NC.webkit()},chrome:function(){return vr()||r_},windows:function(){return vr()||PC},osx:function(){return vr()||o_},linux:function(){return vr()||LC},iphone:function(){return vr()||OC},mobile:function(){return vr()||OC||DC||kC||G4},nativeApp:function(){return vr()||$4},android:function(){return vr()||kC},ipad:function(){return vr()||DC}},Uee=NC,k0=!!(typeof window<"u"&&window.document&&window.document.createElement),zee={canUseDOM:k0,canUseWorkers:typeof Worker<"u",canUseEventListeners:k0&&!!(window.addEventListener||window.attachEvent),canUseViewport:k0&&!!window.screen,isInWorker:!k0},W4=zee,K4;W4.canUseDOM&&(K4=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function Hee(n,e){if(!W4.canUseDOM||e&&!("addEventListener"in document))return!1;var t="on"+n,i=t in document;if(!i){var s=document.createElement("div");s.setAttribute(t,"return;"),i=typeof s[t]=="function"}return!i&&K4&&n==="wheel"&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i}var Vee=Hee,aP=10,lP=40,cP=800;function Y4(n){var e=0,t=0,i=0,s=0;return"detail"in n&&(t=n.detail),"wheelDelta"in n&&(t=-n.wheelDelta/120),"wheelDeltaY"in n&&(t=-n.wheelDeltaY/120),"wheelDeltaX"in n&&(e=-n.wheelDeltaX/120),"axis"in n&&n.axis===n.HORIZONTAL_AXIS&&(e=t,t=0),i=e*aP,s=t*aP,"deltaY"in n&&(s=n.deltaY),"deltaX"in n&&(i=n.deltaX),(i||s)&&n.deltaMode&&(n.deltaMode==1?(i*=lP,s*=lP):(i*=cP,s*=cP)),i&&!e&&(e=i<1?-1:1),s&&!t&&(t=s<1?-1:1),{spinX:e,spinY:t,pixelX:i,pixelY:s}}Y4.getEventType=function(){return Uee.firefox()?"DOMMouseScroll":Vee("wheel")?"wheel":"mousewheel"};var $ee=Y4;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const Gee=function(n,e){if(n&&n.addEventListener){const t=function(i){const s=$ee(i);e&&Reflect.apply(e,this,[i,s])};n.addEventListener("wheel",t,{passive:!0})}},Wee={beforeMount(n,e){Gee(n,e.value)}},Kee=Ye({role:{type:String,required:!0},spinnerDate:{type:ge(Object),required:!0},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:ge(String),default:""},...O4}),Yee=["onClick"],Xee=["onMouseenter"],jee=se({__name:"basic-time-spinner",props:Kee,emits:["change","select-range","set-option"],setup(n,{emit:e}){const t=n,i=Ve("time"),{getHoursList:s,getMinutesList:r,getSecondsList:o}=B4(t.disabledHours,t.disabledMinutes,t.disabledSeconds);let a=!1;const l=V(),c=V(),u=V(),d=V(),h={hours:c,minutes:u,seconds:d},f=R(()=>t.showSeconds?JR:JR.slice(0,2)),m=R(()=>{const{spinnerDate:L}=t,H=L.hour(),X=L.minute(),ne=L.second();return{hours:H,minutes:X,seconds:ne}}),p=R(()=>{const{hours:L,minutes:H}=g(m);return{hours:s(t.role),minutes:r(L,t.role),seconds:o(L,H,t.role)}}),y=R(()=>{const{hours:L,minutes:H,seconds:X}=g(m);return{hours:lx(L,23),minutes:lx(H,59),seconds:lx(X,59)}}),v=Lr(L=>{a=!1,w(L)},200),_=L=>{if(!!!t.amPmMode)return"";const X=t.amPmMode==="A";let ne=L<12?" am":" pm";return X&&(ne=ne.toUpperCase()),ne},b=L=>{let H;switch(L){case"hours":H=[0,2];break;case"minutes":H=[3,5];break;case"seconds":H=[6,8];break}const[X,ne]=H;e("select-range",X,ne),l.value=L},w=L=>{C(L,g(m)[L])},x=()=>{w("hours"),w("minutes"),w("seconds")},S=L=>L.querySelector(`.${i.namespace.value}-scrollbar__wrap`),C=(L,H)=>{if(t.arrowControl)return;const X=g(h[L]);X&&X.$el&&(S(X.$el).scrollTop=Math.max(0,H*T(L)))},T=L=>{const H=g(h[L]),X=H==null?void 0:H.$el.querySelector("li");return X&&Number.parseFloat(Pc(X,"height"))||0},M=()=>{A(1)},E=()=>{A(-1)},A=L=>{l.value||b("hours");const H=l.value,X=g(m)[H],ne=l.value==="hours"?24:60,ce=I(H,X,L,ne);B(H,ce),C(H,ce),vt(()=>b(H))},I=(L,H,X,ne)=>{let ce=(H+X+ne)%ne;const ae=g(p)[L];for(;ae[ce]&&ce!==H;)ce=(ce+X+ne)%ne;return ce},B=(L,H)=>{if(g(p)[L][H])return;const{hours:ce,minutes:ae,seconds:_e}=g(m);let re;switch(L){case"hours":re=t.spinnerDate.hour(H).minute(ae).second(_e);break;case"minutes":re=t.spinnerDate.hour(ce).minute(H).second(_e);break;case"seconds":re=t.spinnerDate.hour(ce).minute(ae).second(H);break}e("change",re)},F=(L,{value:H,disabled:X})=>{X||(B(L,H),b(L),C(L,H))},U=L=>{a=!0,v(L);const H=Math.min(Math.round((S(g(h[L]).$el).scrollTop-(P(L)*.5-10)/T(L)+3)/T(L)),L==="hours"?23:59);B(L,H)},P=L=>g(h[L]).$el.offsetHeight,O=()=>{const L=H=>{const X=g(h[H]);X&&X.$el&&(S(X.$el).onscroll=()=>{U(H)})};L("hours"),L("minutes"),L("seconds")};Ft(()=>{vt(()=>{!t.arrowControl&&O(),x(),t.role==="start"&&b("hours")})});const D=(L,H)=>{h[H].value=L};return e("set-option",[`${t.role}_scrollDown`,A]),e("set-option",[`${t.role}_emitSelectRange`,b]),ze(()=>t.spinnerDate,()=>{a||x()}),(L,H)=>(k(),Y("div",{class:z([g(i).b("spinner"),{"has-seconds":L.showSeconds}])},[L.arrowControl?Ee("v-if",!0):(k(!0),Y(mt,{key:0},Zt(g(f),X=>(k(),Re(g(Zl),{key:X,ref_for:!0,ref:ne=>D(ne,X),class:z(g(i).be("spinner","wrapper")),"wrap-style":"max-height: inherit;","view-class":g(i).be("spinner","list"),noresize:"",tag:"ul",onMouseenter:ne=>b(X),onMousemove:ne=>w(X)},{default:pe(()=>[(k(!0),Y(mt,null,Zt(g(p)[X],(ne,ce)=>(k(),Y("li",{key:ce,class:z([g(i).be("spinner","item"),g(i).is("active",ce===g(m)[X]),g(i).is("disabled",ne)]),onClick:ae=>F(X,{value:ce,disabled:ne})},[X==="hours"?(k(),Y(mt,{key:0},[Yt(Je(("0"+(L.amPmMode?ce%12||12:ce)).slice(-2))+Je(_(ce)),1)],64)):(k(),Y(mt,{key:1},[Yt(Je(("0"+ce).slice(-2)),1)],64))],10,Yee))),128))]),_:2},1032,["class","view-class","onMouseenter","onMousemove"]))),128)),L.arrowControl?(k(!0),Y(mt,{key:1},Zt(g(f),X=>(k(),Y("div",{key:X,class:z([g(i).be("spinner","wrapper"),g(i).is("arrow")]),onMouseenter:ne=>b(X)},[Bt((k(),Re(g(dt),{class:z(["arrow-up",g(i).be("spinner","arrow")])},{default:pe(()=>[le(g(XE))]),_:1},8,["class"])),[[g(X_),E]]),Bt((k(),Re(g(dt),{class:z(["arrow-down",g(i).be("spinner","arrow")])},{default:pe(()=>[le(g(jl))]),_:1},8,["class"])),[[g(X_),M]]),te("ul",{class:z(g(i).be("spinner","list"))},[(k(!0),Y(mt,null,Zt(g(y)[X],(ne,ce)=>(k(),Y("li",{key:ce,class:z([g(i).be("spinner","item"),g(i).is("active",ne===g(m)[X]),g(i).is("disabled",g(p)[X][ne])])},[typeof ne=="number"?(k(),Y(mt,{key:0},[X==="hours"?(k(),Y(mt,{key:0},[Yt(Je(("0"+(L.amPmMode?ne%12||12:ne)).slice(-2))+Je(_(ne)),1)],64)):(k(),Y(mt,{key:1},[Yt(Je(("0"+ne).slice(-2)),1)],64))],64)):Ee("v-if",!0)],2))),128))],2)],42,Xee))),128)):Ee("v-if",!0)],2))}});var FC=Ze(jee,[["__file","basic-time-spinner.vue"]]);const qee=se({__name:"panel-time-pick",props:Dee,emits:["pick","select-range","set-picker-option"],setup(n,{emit:e}){const t=n,i=ct("EP_PICKER_BASE"),{arrowControl:s,disabledHours:r,disabledMinutes:o,disabledSeconds:a,defaultValue:l}=i.props,{getAvailableHours:c,getAvailableMinutes:u,getAvailableSeconds:d}=U4(r,o,a),h=Ve("time"),{t:f,lang:m}=en(),p=V([0,2]),y=z4(t),v=R(()=>ki(t.actualVisible)?`${h.namespace.value}-zoom-in-top`:""),_=R(()=>t.format.includes("ss")),b=R(()=>t.format.includes("A")?"A":t.format.includes("a")?"a":""),w=D=>{const L=Vt(D).locale(m.value),H=F(L);return L.isSame(H)},x=()=>{e("pick",y.value,!1)},S=(D=!1,L=!1)=>{L||e("pick",t.parsedValue,D)},C=D=>{if(!t.visible)return;const L=F(D).millisecond(0);e("pick",L,!0)},T=(D,L)=>{e("select-range",D,L),p.value=[D,L]},M=D=>{const L=[0,3].concat(_.value?[6]:[]),H=["hours","minutes"].concat(_.value?["seconds"]:[]),ne=(L.indexOf(p.value[0])+D+L.length)%L.length;A.start_emitSelectRange(H[ne])},E=D=>{const L=D.code,{left:H,right:X,up:ne,down:ce}=wt;if([H,X].includes(L)){M(L===H?-1:1),D.preventDefault();return}if([ne,ce].includes(L)){const ae=L===ne?-1:1;A.start_scrollDown(ae),D.preventDefault();return}},{timePickerOptions:A,onSetOption:I,getAvailableTime:B}=F4({getAvailableHours:c,getAvailableMinutes:u,getAvailableSeconds:d}),F=D=>B(D,t.datetimeRole||"",!0),U=D=>D?Vt(D,t.format).locale(m.value):null,P=D=>D?D.format(t.format):null,O=()=>Vt(l).locale(m.value);return e("set-picker-option",["isValidValue",w]),e("set-picker-option",["formatToString",P]),e("set-picker-option",["parseUserInput",U]),e("set-picker-option",["handleKeydownInput",E]),e("set-picker-option",["getRangeAvailableTime",F]),e("set-picker-option",["getDefaultValue",O]),(D,L)=>(k(),Re(ji,{name:g(v)},{default:pe(()=>[D.actualVisible||D.visible?(k(),Y("div",{key:0,class:z(g(h).b("panel"))},[te("div",{class:z([g(h).be("panel","content"),{"has-seconds":g(_)}])},[le(FC,{ref:"spinner",role:D.datetimeRole||"start","arrow-control":g(s),"show-seconds":g(_),"am-pm-mode":g(b),"spinner-date":D.parsedValue,"disabled-hours":g(r),"disabled-minutes":g(o),"disabled-seconds":g(a),onChange:C,onSetOption:g(I),onSelectRange:T},null,8,["role","arrow-control","show-seconds","am-pm-mode","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onSetOption"])],2),te("div",{class:z(g(h).be("panel","footer"))},[te("button",{type:"button",class:z([g(h).be("panel","btn"),"cancel"]),onClick:x},Je(g(f)("el.datepicker.cancel")),3),te("button",{type:"button",class:z([g(h).be("panel","btn"),"confirm"]),onClick:L[0]||(L[0]=H=>S())},Je(g(f)("el.datepicker.confirm")),3)],2)],2)):Ee("v-if",!0)]),_:1},8,["name"]))}});var j_=Ze(qee,[["__file","panel-time-pick.vue"]]);const Zee=Ye({...D4,parsedValue:{type:ge(Array)}}),Jee=["disabled"],Qee=se({__name:"panel-time-range",props:Zee,emits:["pick","select-range","set-picker-option"],setup(n,{emit:e}){const t=n,i=(we,K)=>{const j=[];for(let ie=we;ie<=K;ie++)j.push(ie);return j},{t:s,lang:r}=en(),o=Ve("time"),a=Ve("picker"),l=ct("EP_PICKER_BASE"),{arrowControl:c,disabledHours:u,disabledMinutes:d,disabledSeconds:h,defaultValue:f}=l.props,m=R(()=>[o.be("range-picker","body"),o.be("panel","content"),o.is("arrow",c),w.value?"has-seconds":""]),p=R(()=>[o.be("range-picker","body"),o.be("panel","content"),o.is("arrow",c),w.value?"has-seconds":""]),y=R(()=>t.parsedValue[0]),v=R(()=>t.parsedValue[1]),_=z4(t),b=()=>{e("pick",_.value,!1)},w=R(()=>t.format.includes("ss")),x=R(()=>t.format.includes("A")?"A":t.format.includes("a")?"a":""),S=(we=!1)=>{e("pick",[y.value,v.value],we)},C=we=>{E(we.millisecond(0),v.value)},T=we=>{E(y.value,we.millisecond(0))},M=we=>{const K=we.map(ie=>Vt(ie).locale(r.value)),j=X(K);return K[0].isSame(j[0])&&K[1].isSame(j[1])},E=(we,K)=>{e("pick",[we,K],!0)},A=R(()=>y.value>v.value),I=V([0,2]),B=(we,K)=>{e("select-range",we,K,"min"),I.value=[we,K]},F=R(()=>w.value?11:8),U=(we,K)=>{e("select-range",we,K,"max");const j=g(F);I.value=[we+j,K+j]},P=we=>{const K=w.value?[0,3,6,11,14,17]:[0,3,8,11],j=["hours","minutes"].concat(w.value?["seconds"]:[]),ve=(K.indexOf(I.value[0])+we+K.length)%K.length,ye=K.length/2;ve<ye?_e.start_emitSelectRange(j[ve]):_e.end_emitSelectRange(j[ve-ye])},O=we=>{const K=we.code,{left:j,right:ie,up:ve,down:ye}=wt;if([j,ie].includes(K)){P(K===j?-1:1),we.preventDefault();return}if([ve,ye].includes(K)){const me=K===ve?-1:1,be=I.value[0]<F.value?"start":"end";_e[`${be}_scrollDown`](me),we.preventDefault();return}},D=(we,K)=>{const j=u?u(we):[],ie=we==="start",ye=(K||(ie?v.value:y.value)).hour(),me=ie?i(ye+1,23):i(0,ye-1);return Qw(j,me)},L=(we,K,j)=>{const ie=d?d(we,K):[],ve=K==="start",ye=j||(ve?v.value:y.value),me=ye.hour();if(we!==me)return ie;const be=ye.minute(),Pe=ve?i(be+1,59):i(0,be-1);return Qw(ie,Pe)},H=(we,K,j,ie)=>{const ve=h?h(we,K,j):[],ye=j==="start",me=ie||(ye?v.value:y.value),be=me.hour(),Pe=me.minute();if(we!==be||K!==Pe)return ve;const Z=me.second(),$=ye?i(Z+1,59):i(0,Z-1);return Qw(ve,$)},X=([we,K])=>[re(we,"start",!0,K),re(K,"end",!1,we)],{getAvailableHours:ne,getAvailableMinutes:ce,getAvailableSeconds:ae}=U4(D,L,H),{timePickerOptions:_e,getAvailableTime:re,onSetOption:xe}=F4({getAvailableHours:ne,getAvailableMinutes:ce,getAvailableSeconds:ae}),he=we=>we?rt(we)?we.map(K=>Vt(K,t.format).locale(r.value)):Vt(we,t.format).locale(r.value):null,Te=we=>we?rt(we)?we.map(K=>K.format(t.format)):we.format(t.format):null,Ce=()=>{if(rt(f))return f.map(K=>Vt(K).locale(r.value));const we=Vt(f).locale(r.value);return[we,we.add(60,"m")]};return e("set-picker-option",["formatToString",Te]),e("set-picker-option",["parseUserInput",he]),e("set-picker-option",["isValidValue",M]),e("set-picker-option",["handleKeydownInput",O]),e("set-picker-option",["getDefaultValue",Ce]),e("set-picker-option",["getRangeAvailableTime",X]),(we,K)=>we.actualVisible?(k(),Y("div",{key:0,class:z([g(o).b("range-picker"),g(a).b("panel")])},[te("div",{class:z(g(o).be("range-picker","content"))},[te("div",{class:z(g(o).be("range-picker","cell"))},[te("div",{class:z(g(o).be("range-picker","header"))},Je(g(s)("el.datepicker.startTime")),3),te("div",{class:z(g(m))},[le(FC,{ref:"minSpinner",role:"start","show-seconds":g(w),"am-pm-mode":g(x),"arrow-control":g(c),"spinner-date":g(y),"disabled-hours":D,"disabled-minutes":L,"disabled-seconds":H,onChange:C,onSetOption:g(xe),onSelectRange:B},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),te("div",{class:z(g(o).be("range-picker","cell"))},[te("div",{class:z(g(o).be("range-picker","header"))},Je(g(s)("el.datepicker.endTime")),3),te("div",{class:z(g(p))},[le(FC,{ref:"maxSpinner",role:"end","show-seconds":g(w),"am-pm-mode":g(x),"arrow-control":g(c),"spinner-date":g(v),"disabled-hours":D,"disabled-minutes":L,"disabled-seconds":H,onChange:T,onSetOption:g(xe),onSelectRange:U},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),te("div",{class:z(g(o).be("panel","footer"))},[te("button",{type:"button",class:z([g(o).be("panel","btn"),"cancel"]),onClick:K[0]||(K[0]=j=>b())},Je(g(s)("el.datepicker.cancel")),3),te("button",{type:"button",class:z([g(o).be("panel","btn"),"confirm"]),disabled:g(A),onClick:K[1]||(K[1]=j=>S())},Je(g(s)("el.datepicker.confirm")),11,Jee)],2)],2)):Ee("v-if",!0)}});var ete=Ze(Qee,[["__file","panel-time-range.vue"]]);Vt.extend(AT);var tte=se({name:"ElTimePicker",install:null,props:{...IT,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,e){const t=V(),[i,s]=n.isRange?["timerange",ete]:["time",j_],r=o=>e.emit("update:modelValue",o);return Xt("ElPopperOptions",n.popperOptions),e.expose({focus:o=>{var a;(a=t.value)==null||a.handleFocusInput(o)},blur:o=>{var a;(a=t.value)==null||a.handleBlurInput(o)},handleOpen:()=>{var o;(o=t.value)==null||o.handleOpen()},handleClose:()=>{var o;(o=t.value)==null||o.handleClose()}}),()=>{var o;const a=(o=n.format)!=null?o:TC;return le(N4,Kt(n,{ref:t,type:i,format:a,"onUpdate:modelValue":r}),{default:l=>le(s,l,null)})}}});const a_=tte;a_.install=n=>{n.component(a_.name,a_)};const nte=a_,ite=(n,e)=>{const t=n.subtract(1,"month").endOf("month").date();return Kc(e).map((i,s)=>t-(e-s-1))},ste=n=>{const e=n.daysInMonth();return Kc(e).map((t,i)=>i+1)},rte=n=>Kc(n.length/7).map(e=>{const t=e*7;return n.slice(t,t+7)}),ote=Ye({selectedDay:{type:ge(Object)},range:{type:ge(Array)},date:{type:ge(Object),required:!0},hideHeader:{type:Boolean}}),ate={pick:n=>$t(n)};var X4={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Jl,function(){return function(t,i,s){var r=i.prototype,o=function(d){return d&&(d.indexOf?d:d.s)},a=function(d,h,f,m,p){var y=d.name?d:d.$locale(),v=o(y[h]),_=o(y[f]),b=v||_.map(function(x){return x.slice(0,m)});if(!p)return b;var w=y.weekStart;return b.map(function(x,S){return b[(S+(w||0))%7]})},l=function(){return s.Ls[s.locale()]},c=function(d,h){return d.formats[h]||function(f){return f.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(m,p,y){return p||y.slice(1)})}(d.formats[h.toUpperCase()])},u=function(){var d=this;return{months:function(h){return h?h.format("MMMM"):a(d,"months")},monthsShort:function(h){return h?h.format("MMM"):a(d,"monthsShort","months",3)},firstDayOfWeek:function(){return d.$locale().weekStart||0},weekdays:function(h){return h?h.format("dddd"):a(d,"weekdays")},weekdaysMin:function(h){return h?h.format("dd"):a(d,"weekdaysMin","weekdays",2)},weekdaysShort:function(h){return h?h.format("ddd"):a(d,"weekdaysShort","weekdays",3)},longDateFormat:function(h){return c(d.$locale(),h)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};r.localeData=function(){return u.bind(this)()},s.localeData=function(){var d=l();return{firstDayOfWeek:function(){return d.weekStart||0},weekdays:function(){return s.weekdays()},weekdaysShort:function(){return s.weekdaysShort()},weekdaysMin:function(){return s.weekdaysMin()},months:function(){return s.months()},monthsShort:function(){return s.monthsShort()},longDateFormat:function(h){return c(d,h)},meridiem:d.meridiem,ordinal:d.ordinal}},s.months=function(){return a(l(),"months")},s.monthsShort=function(){return a(l(),"monthsShort","months",3)},s.weekdays=function(d){return a(l(),"weekdays",null,null,d)},s.weekdaysShort=function(d){return a(l(),"weekdaysShort","weekdays",3,d)},s.weekdaysMin=function(d){return a(l(),"weekdaysMin","weekdays",2,d)}}})})(X4);var lte=X4.exports;const j4=Xa(lte),cte=(n,e)=>{Vt.extend(j4);const t=Vt.localeData().firstDayOfWeek(),{t:i,lang:s}=en(),r=Vt().locale(s.value),o=R(()=>!!n.range&&!!n.range.length),a=R(()=>{let h=[];if(o.value){const[f,m]=n.range,p=Kc(m.date()-f.date()+1).map(_=>({text:f.date()+_,type:"current"}));let y=p.length%7;y=y===0?0:7-y;const v=Kc(y).map((_,b)=>({text:b+1,type:"next"}));h=p.concat(v)}else{const f=n.date.startOf("month").day(),m=ite(n.date,(f-t+7)%7).map(_=>({text:_,type:"prev"})),p=ste(n.date).map(_=>({text:_,type:"current"}));h=[...m,...p];const y=7-(h.length%7||7),v=Kc(y).map((_,b)=>({text:b+1,type:"next"}));h=h.concat(v)}return rte(h)}),l=R(()=>{const h=t;return h===0?ex.map(f=>i(`el.datepicker.weeks.${f}`)):ex.slice(h).concat(ex.slice(0,h)).map(f=>i(`el.datepicker.weeks.${f}`))}),c=(h,f)=>{switch(f){case"prev":return n.date.startOf("month").subtract(1,"month").date(h);case"next":return n.date.startOf("month").add(1,"month").date(h);case"current":return n.date.date(h)}};return{now:r,isInRange:o,rows:a,weekDays:l,getFormattedDate:c,handlePickDay:({text:h,type:f})=>{const m=c(h,f);e("pick",m)},getSlotData:({text:h,type:f})=>{const m=c(h,f);return{isSelected:m.isSame(n.selectedDay),type:`${f}-month`,day:m.format("YYYY-MM-DD"),date:m.toDate()}}}},ute={key:0},dte=["onClick"],hte=se({name:"DateTable"}),fte=se({...hte,props:ote,emits:ate,setup(n,{expose:e,emit:t}){const i=n,{isInRange:s,now:r,rows:o,weekDays:a,getFormattedDate:l,handlePickDay:c,getSlotData:u}=cte(i,t),d=Ve("calendar-table"),h=Ve("calendar-day"),f=({text:m,type:p})=>{const y=[p];if(p==="current"){const v=l(m,p);v.isSame(i.selectedDay,"day")&&y.push(h.is("selected")),v.isSame(r,"day")&&y.push(h.is("today"))}return y};return e({getFormattedDate:l}),(m,p)=>(k(),Y("table",{class:z([g(d).b(),g(d).is("range",g(s))]),cellspacing:"0",cellpadding:"0"},[m.hideHeader?Ee("v-if",!0):(k(),Y("thead",ute,[(k(!0),Y(mt,null,Zt(g(a),y=>(k(),Y("th",{key:y},Je(y),1))),128))])),te("tbody",null,[(k(!0),Y(mt,null,Zt(g(o),(y,v)=>(k(),Y("tr",{key:v,class:z({[g(d).e("row")]:!0,[g(d).em("row","hide-border")]:v===0&&m.hideHeader})},[(k(!0),Y(mt,null,Zt(y,(_,b)=>(k(),Y("td",{key:b,class:z(f(_)),onClick:w=>g(c)(_)},[te("div",{class:z(g(h).b())},[ke(m.$slots,"date-cell",{data:g(u)(_)},()=>[te("span",null,Je(_.text),1)])],2)],10,dte))),128))],2))),128))])],2))}});var uP=Ze(fte,[["__file","date-table.vue"]]);const pte=(n,e)=>{const t=n.endOf("month"),i=e.startOf("month"),r=t.isSame(i,"week")?i.add(1,"week"):i;return[[n,t],[r.startOf("week"),e]]},mte=(n,e)=>{const t=n.endOf("month"),i=n.add(1,"month").startOf("month"),s=t.isSame(i,"week")?i.add(1,"week"):i,r=s.endOf("month"),o=e.startOf("month"),a=r.isSame(o,"week")?o.add(1,"week"):o;return[[n,t],[s.startOf("week"),r],[a.startOf("week"),e]]},gte=(n,e,t)=>{const{lang:i}=en(),s=V(),r=Vt().locale(i.value),o=R({get(){return n.modelValue?l.value:s.value},set(y){if(!y)return;s.value=y;const v=y.toDate();e(dr,v),e(Gt,v)}}),a=R(()=>{if(!n.range)return[];const y=n.range.map(b=>Vt(b).locale(i.value)),[v,_]=y;return v.isAfter(_)?[]:v.isSame(_,"month")?f(v,_):v.add(1,"month").month()!==_.month()?[]:f(v,_)}),l=R(()=>n.modelValue?Vt(n.modelValue).locale(i.value):o.value||(a.value.length?a.value[0][0]:r)),c=R(()=>l.value.subtract(1,"month").date(1)),u=R(()=>l.value.add(1,"month").date(1)),d=R(()=>l.value.subtract(1,"year").date(1)),h=R(()=>l.value.add(1,"year").date(1)),f=(y,v)=>{const _=y.startOf("week"),b=v.endOf("week"),w=_.get("month"),x=b.get("month");return w===x?[[_,b]]:(w+1)%12===x?pte(_,b):w+2===x||(w+1)%11===x?mte(_,b):[]},m=y=>{o.value=y};return{calculateValidatedDateRange:f,date:l,realSelectedDay:o,pickDay:m,selectDate:y=>{const _={"prev-month":c.value,"next-month":u.value,"prev-year":d.value,"next-year":h.value,today:r}[y];_.isSame(l.value,"day")||m(_)},validatedRange:a}},vte=n=>rt(n)&&n.length===2&&n.every(e=>Fd(e)),yte=Ye({modelValue:{type:Date},range:{type:ge(Array),validator:vte}}),_te={[Gt]:n=>Fd(n),[dr]:n=>Fd(n)},bte="ElCalendar",wte=se({name:bte}),xte=se({...wte,props:yte,emits:_te,setup(n,{expose:e,emit:t}){const i=n,s=Ve("calendar"),{calculateValidatedDateRange:r,date:o,pickDay:a,realSelectedDay:l,selectDate:c,validatedRange:u}=gte(i,t),{t:d}=en(),h=R(()=>{const f=`el.datepicker.month${o.value.format("M")}`;return`${o.value.year()} ${d("el.datepicker.year")} ${d(f)}`});return e({selectedDay:l,pickDay:a,selectDate:c,calculateValidatedDateRange:r}),(f,m)=>(k(),Y("div",{class:z(g(s).b())},[te("div",{class:z(g(s).e("header"))},[ke(f.$slots,"header",{date:g(h)},()=>[te("div",{class:z(g(s).e("title"))},Je(g(h)),3),g(u).length===0?(k(),Y("div",{key:0,class:z(g(s).e("button-group"))},[le(g(I4),null,{default:pe(()=>[le(g(as),{size:"small",onClick:m[0]||(m[0]=p=>g(c)("prev-month"))},{default:pe(()=>[Yt(Je(g(d)("el.datepicker.prevMonth")),1)]),_:1}),le(g(as),{size:"small",onClick:m[1]||(m[1]=p=>g(c)("today"))},{default:pe(()=>[Yt(Je(g(d)("el.datepicker.today")),1)]),_:1}),le(g(as),{size:"small",onClick:m[2]||(m[2]=p=>g(c)("next-month"))},{default:pe(()=>[Yt(Je(g(d)("el.datepicker.nextMonth")),1)]),_:1})]),_:1})],2)):Ee("v-if",!0)])],2),g(u).length===0?(k(),Y("div",{key:0,class:z(g(s).e("body"))},[le(uP,{date:g(o),"selected-day":g(l),onPick:g(a)},Il({_:2},[f.$slots["date-cell"]?{name:"date-cell",fn:pe(p=>[ke(f.$slots,"date-cell",wl(Gf(p)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):(k(),Y("div",{key:1,class:z(g(s).e("body"))},[(k(!0),Y(mt,null,Zt(g(u),(p,y)=>(k(),Re(uP,{key:y,date:p[0],"selected-day":g(l),range:p,"hide-header":y!==0,onPick:g(a)},Il({_:2},[f.$slots["date-cell"]?{name:"date-cell",fn:pe(v=>[ke(f.$slots,"date-cell",wl(Gf(v)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2))}});var Ste=Ze(xte,[["__file","calendar.vue"]]);const Cte=Ht(Ste),Mte=Ye({header:{type:String,default:""},footer:{type:String,default:""},bodyStyle:{type:ge([String,Object,Array]),default:""},bodyClass:String,shadow:{type:String,values:["always","hover","never"],default:"always"}}),Ete=se({name:"ElCard"}),Tte=se({...Ete,props:Mte,setup(n){const e=Ve("card");return(t,i)=>(k(),Y("div",{class:z([g(e).b(),g(e).is(`${t.shadow}-shadow`)])},[t.$slots.header||t.header?(k(),Y("div",{key:0,class:z(g(e).e("header"))},[ke(t.$slots,"header",{},()=>[Yt(Je(t.header),1)])],2)):Ee("v-if",!0),te("div",{class:z([g(e).e("body"),t.bodyClass]),style:pt(t.bodyStyle)},[ke(t.$slots,"default")],6),t.$slots.footer||t.footer?(k(),Y("div",{key:1,class:z(g(e).e("footer"))},[ke(t.$slots,"footer",{},()=>[Yt(Je(t.footer),1)])],2)):Ee("v-if",!0)],2))}});var Ate=Ze(Tte,[["__file","card.vue"]]);const Ite=Ht(Ate),Rte=Ye({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},cardScale:{type:Number,default:.83},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0},motionBlur:Boolean}),Pte={change:(n,e)=>[n,e].every(Ct)},q4=Symbol("carouselContextKey"),dP=300,Lte=(n,e,t)=>{const{children:i,addChild:s,removeChild:r}=wT(zt(),"ElCarouselItem"),o=hs(),a=V(-1),l=V(null),c=V(!1),u=V(),d=V(0),h=V(!0),f=V(!0),m=V(!1),p=R(()=>n.arrow!=="never"&&!g(_)),y=R(()=>i.value.some(re=>re.props.label.toString().length>0)),v=R(()=>n.type==="card"),_=R(()=>n.direction==="vertical"),b=R(()=>n.height!=="auto"?{height:n.height}:{height:`${d.value}px`,overflow:"hidden"}),w=yd(re=>{E(re)},dP,{trailing:!0}),x=yd(re=>{L(re)},dP),S=re=>h.value?a.value<=1?re<=1:re>1:!0;function C(){l.value&&(clearInterval(l.value),l.value=null)}function T(){n.interval<=0||!n.autoplay||l.value||(l.value=setInterval(()=>M(),n.interval))}const M=()=>{f.value||(m.value=!0),f.value=!1,a.value<i.value.length-1?a.value=a.value+1:n.loop?a.value=0:m.value=!1};function E(re){if(f.value||(m.value=!0),f.value=!1,Rt(re)){const Te=i.value.filter(Ce=>Ce.props.name===re);Te.length>0&&(re=i.value.indexOf(Te[0]))}if(re=Number(re),Number.isNaN(re)||re!==Math.floor(re))return;const xe=i.value.length,he=a.value;re<0?a.value=n.loop?xe-1:0:re>=xe?a.value=n.loop?0:xe-1:a.value=re,he===a.value&&A(he),ne()}function A(re){i.value.forEach((xe,he)=>{xe.translateItem(he,a.value,re)})}function I(re,xe){var he,Te,Ce,we;const K=g(i),j=K.length;if(j===0||!re.states.inStage)return!1;const ie=xe+1,ve=xe-1,ye=j-1,me=K[ye].states.active,be=K[0].states.active,Pe=(Te=(he=K[ie])==null?void 0:he.states)==null?void 0:Te.active,Z=(we=(Ce=K[ve])==null?void 0:Ce.states)==null?void 0:we.active;return xe===ye&&be||Pe?"left":xe===0&&me||Z?"right":!1}function B(){c.value=!0,n.pauseOnHover&&C()}function F(){c.value=!1,T()}function U(){m.value=!1}function P(re){g(_)||i.value.forEach((xe,he)=>{re===I(xe,he)&&(xe.states.hover=!0)})}function O(){g(_)||i.value.forEach(re=>{re.states.hover=!1})}function D(re){re!==a.value&&(f.value||(m.value=!0)),a.value=re}function L(re){n.trigger==="hover"&&re!==a.value&&(a.value=re,f.value||(m.value=!0))}function H(){E(a.value-1)}function X(){E(a.value+1)}function ne(){C(),n.pauseOnHover||T()}function ce(re){n.height==="auto"&&(d.value=re)}function ae(){var re;const xe=(re=o.default)==null?void 0:re.call(o);if(!xe)return null;const he=Wc(xe),Te="ElCarouselItem",Ce=he.filter(we=>Jn(we)&&we.type.name===Te);return(Ce==null?void 0:Ce.length)===2&&n.loop&&!v.value?(h.value=!0,Ce):(h.value=!1,null)}ze(()=>a.value,(re,xe)=>{A(xe),h.value&&(re=re%2,xe=xe%2),xe>-1&&e("change",re,xe)}),ze(()=>n.autoplay,re=>{re?T():C()}),ze(()=>n.loop,()=>{E(a.value)}),ze(()=>n.interval,()=>{ne()});const _e=Vn();return Ft(()=>{ze(()=>i.value,()=>{i.value.length>0&&E(n.initialIndex)},{immediate:!0}),_e.value=ti(u.value,()=>{A()}),T()}),kn(()=>{C(),u.value&&_e.value&&_e.value.stop()}),Xt(q4,{root:u,isCardType:v,isVertical:_,items:i,loop:n.loop,cardScale:n.cardScale,addItem:s,removeItem:r,setActiveItem:E,setContainerHeight:ce}),{root:u,activeIndex:a,arrowDisplay:p,hasLabel:y,hover:c,isCardType:v,isTransitioning:m,items:i,isVertical:_,containerStyle:b,isItemsTwoLength:h,handleButtonEnter:P,handleTransitionEnd:U,handleButtonLeave:O,handleIndicatorClick:D,handleMouseEnter:B,handleMouseLeave:F,setActiveItem:E,prev:H,next:X,PlaceholderItem:ae,isTwoLengthShow:S,throttledArrowClick:w,throttledIndicatorHover:x}},kte=["aria-label"],Ote=["aria-label"],Dte=["onMouseenter","onClick"],Nte=["aria-label"],Fte={key:0},Bte={key:3,xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{display:"none"}},Ute=te("defs",null,[te("filter",{id:"elCarouselHorizontal"},[te("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"12,0"})]),te("filter",{id:"elCarouselVertical"},[te("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"0,10"})])],-1),zte=[Ute],Hte="ElCarousel",Vte=se({name:Hte}),$te=se({...Vte,props:Rte,emits:Pte,setup(n,{expose:e,emit:t}){const i=n,{root:s,activeIndex:r,arrowDisplay:o,hasLabel:a,hover:l,isCardType:c,items:u,isVertical:d,containerStyle:h,handleButtonEnter:f,handleButtonLeave:m,isTransitioning:p,handleIndicatorClick:y,handleMouseEnter:v,handleMouseLeave:_,handleTransitionEnd:b,setActiveItem:w,prev:x,next:S,PlaceholderItem:C,isTwoLengthShow:T,throttledArrowClick:M,throttledIndicatorHover:E}=Lte(i,t),A=Ve("carousel"),{t:I}=en(),B=R(()=>{const P=[A.b(),A.m(i.direction)];return g(c)&&P.push(A.m("card")),P}),F=R(()=>{const P=[A.e("container")];return i.motionBlur&&g(p)&&P.push(g(d)?`${A.namespace.value}-transitioning-vertical`:`${A.namespace.value}-transitioning`),P}),U=R(()=>{const P=[A.e("indicators"),A.em("indicators",i.direction)];return g(a)&&P.push(A.em("indicators","labels")),i.indicatorPosition==="outside"&&P.push(A.em("indicators","outside")),g(d)&&P.push(A.em("indicators","right")),P});return e({activeIndex:r,setActiveItem:w,prev:x,next:S}),(P,O)=>(k(),Y("div",{ref_key:"root",ref:s,class:z(g(B)),onMouseenter:O[7]||(O[7]=Tt((...D)=>g(v)&&g(v)(...D),["stop"])),onMouseleave:O[8]||(O[8]=Tt((...D)=>g(_)&&g(_)(...D),["stop"]))},[g(o)?(k(),Re(ji,{key:0,name:"carousel-arrow-left",persisted:""},{default:pe(()=>[Bt(te("button",{type:"button",class:z([g(A).e("arrow"),g(A).em("arrow","left")]),"aria-label":g(I)("el.carousel.leftArrow"),onMouseenter:O[0]||(O[0]=D=>g(f)("left")),onMouseleave:O[1]||(O[1]=(...D)=>g(m)&&g(m)(...D)),onClick:O[2]||(O[2]=Tt(D=>g(M)(g(r)-1),["stop"]))},[le(g(dt),null,{default:pe(()=>[le(g(eu))]),_:1})],42,kte),[[an,(P.arrow==="always"||g(l))&&(i.loop||g(r)>0)]])]),_:1})):Ee("v-if",!0),g(o)?(k(),Re(ji,{key:1,name:"carousel-arrow-right",persisted:""},{default:pe(()=>[Bt(te("button",{type:"button",class:z([g(A).e("arrow"),g(A).em("arrow","right")]),"aria-label":g(I)("el.carousel.rightArrow"),onMouseenter:O[3]||(O[3]=D=>g(f)("right")),onMouseleave:O[4]||(O[4]=(...D)=>g(m)&&g(m)(...D)),onClick:O[5]||(O[5]=Tt(D=>g(M)(g(r)+1),["stop"]))},[le(g(dt),null,{default:pe(()=>[le(g(ur))]),_:1})],42,Ote),[[an,(P.arrow==="always"||g(l))&&(i.loop||g(r)<g(u).length-1)]])]),_:1})):Ee("v-if",!0),te("div",{class:z(g(F)),style:pt(g(h)),onTransitionend:O[6]||(O[6]=(...D)=>g(b)&&g(b)(...D))},[le(g(C)),ke(P.$slots,"default")],38),P.indicatorPosition!=="none"?(k(),Y("ul",{key:2,class:z(g(U))},[(k(!0),Y(mt,null,Zt(g(u),(D,L)=>Bt((k(),Y("li",{key:L,class:z([g(A).e("indicator"),g(A).em("indicator",P.direction),g(A).is("active",L===g(r))]),onMouseenter:H=>g(E)(L),onClick:Tt(H=>g(y)(L),["stop"])},[te("button",{class:z(g(A).e("button")),"aria-label":g(I)("el.carousel.indicator",{index:L+1})},[g(a)?(k(),Y("span",Fte,Je(D.props.label),1)):Ee("v-if",!0)],10,Nte)],42,Dte)),[[an,g(T)(L)]])),128))],2)):Ee("v-if",!0),i.motionBlur?(k(),Y("svg",Bte,zte)):Ee("v-if",!0)],34))}});var Gte=Ze($te,[["__file","carousel.vue"]]);const Wte=Ye({name:{type:String,default:""},label:{type:[String,Number],default:""}}),Kte=(n,e)=>{const t=ct(q4),i=zt(),s=V(),r=V(!1),o=V(0),a=V(1),l=V(!1),c=V(!1),u=V(!1),d=V(!1),{isCardType:h,isVertical:f,cardScale:m}=t;function p(w,x,S){const C=S-1,T=x-1,M=x+1,E=S/2;return x===0&&w===C?-1:x===C&&w===0?S:w<T&&x-w>=E?S+1:w>M&&w-x>=E?-2:w}function y(w,x){var S,C;const T=g(f)?((S=t.root.value)==null?void 0:S.offsetHeight)||0:((C=t.root.value)==null?void 0:C.offsetWidth)||0;return u.value?T*((2-m)*(w-x)+1)/4:w<x?-(1+m)*T/4:(3+m)*T/4}function v(w,x,S){const C=t.root.value;return C?((S?C.offsetHeight:C.offsetWidth)||0)*(w-x):0}const _=(w,x,S)=>{var C;const T=g(h),M=(C=t.items.value.length)!=null?C:Number.NaN,E=w===x;!T&&!ki(S)&&(d.value=E||w===S),!E&&M>2&&t.loop&&(w=p(w,x,M));const A=g(f);l.value=E,T?(u.value=Math.round(Math.abs(w-x))<=1,o.value=y(w,x),a.value=g(l)?1:m):o.value=v(w,x,A),c.value=!0,E&&s.value&&t.setContainerHeight(s.value.offsetHeight)};function b(){if(t&&g(h)){const w=t.items.value.findIndex(({uid:x})=>x===i.uid);t.setActiveItem(w)}}return Ft(()=>{t.addItem({props:n,states:un({hover:r,translate:o,scale:a,active:l,ready:c,inStage:u,animating:d}),uid:i.uid,translateItem:_})}),fu(()=>{t.removeItem(i.uid)}),{carouselItemRef:s,active:l,animating:d,hover:r,inStage:u,isVertical:f,translate:o,isCardType:h,scale:a,ready:c,handleItemClick:b}},Yte=se({name:"ElCarouselItem"}),Xte=se({...Yte,props:Wte,setup(n){const e=n,t=Ve("carousel"),{carouselItemRef:i,active:s,animating:r,hover:o,inStage:a,isVertical:l,translate:c,isCardType:u,scale:d,ready:h,handleItemClick:f}=Kte(e),m=R(()=>[t.e("item"),t.is("active",s.value),t.is("in-stage",a.value),t.is("hover",o.value),t.is("animating",r.value),{[t.em("item","card")]:u.value,[t.em("item","card-vertical")]:u.value&&l.value}]),p=R(()=>{const v=`${`translate${g(l)?"Y":"X"}`}(${g(c)}px)`,_=`scale(${g(d)})`;return{transform:[v,_].join(" ")}});return(y,v)=>Bt((k(),Y("div",{ref_key:"carouselItemRef",ref:i,class:z(g(m)),style:pt(g(p)),onClick:v[0]||(v[0]=(..._)=>g(f)&&g(f)(..._))},[g(u)?Bt((k(),Y("div",{key:0,class:z(g(t).e("mask"))},null,2)),[[an,!g(s)]]):Ee("v-if",!0),ke(y.$slots,"default")],6)),[[an,g(h)]])}});var Z4=Ze(Xte,[["__file","carousel-item.vue"]]);const jte=Ht(Gte,{CarouselItem:Z4}),qte=si(Z4),J4={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object],default:void 0},value:{type:[String,Boolean,Number,Object],default:void 0},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueValue:{type:[String,Number],default:void 0},falseValue:{type:[String,Number],default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},controls:{type:String,default:void 0},border:Boolean,size:Zi,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0},...Ss(["ariaControls"])},Q4={[Gt]:n=>Rt(n)||Ct(n)||_i(n),change:n=>Rt(n)||Ct(n)||_i(n)},Lp=Symbol("checkboxGroupContextKey"),Zte=({model:n,isChecked:e})=>{const t=ct(Lp,void 0),i=R(()=>{var r,o;const a=(r=t==null?void 0:t.max)==null?void 0:r.value,l=(o=t==null?void 0:t.min)==null?void 0:o.value;return!ki(a)&&n.value.length>=a&&!e.value||!ki(l)&&n.value.length<=l&&e.value});return{isDisabled:mr(R(()=>(t==null?void 0:t.disabled.value)||i.value)),isLimitDisabled:i}},Jte=(n,{model:e,isLimitExceeded:t,hasOwnLabel:i,isDisabled:s,isLabeledByFormItem:r})=>{const o=ct(Lp,void 0),{formItem:a}=Qs(),{emit:l}=zt();function c(m){var p,y,v,_;return[!0,n.trueValue,n.trueLabel].includes(m)?(y=(p=n.trueValue)!=null?p:n.trueLabel)!=null?y:!0:(_=(v=n.falseValue)!=null?v:n.falseLabel)!=null?_:!1}function u(m,p){l("change",c(m),p)}function d(m){if(t.value)return;const p=m.target;l("change",c(p.checked),m)}async function h(m){t.value||!i.value&&!s.value&&r.value&&(m.composedPath().some(v=>v.tagName==="LABEL")||(e.value=c([!1,n.falseValue,n.falseLabel].includes(e.value)),await vt(),u(e.value,m)))}const f=R(()=>(o==null?void 0:o.validateEvent)||n.validateEvent);return ze(()=>n.modelValue,()=>{f.value&&(a==null||a.validate("change").catch(m=>void 0))}),{handleChange:d,onClickRoot:h}},Qte=n=>{const e=V(!1),{emit:t}=zt(),i=ct(Lp,void 0),s=R(()=>ki(i)===!1),r=V(!1),o=R({get(){var a,l;return s.value?(a=i==null?void 0:i.modelValue)==null?void 0:a.value:(l=n.modelValue)!=null?l:e.value},set(a){var l,c;s.value&&rt(a)?(r.value=((l=i==null?void 0:i.max)==null?void 0:l.value)!==void 0&&a.length>(i==null?void 0:i.max.value)&&a.length>o.value.length,r.value===!1&&((c=i==null?void 0:i.changeEvent)==null||c.call(i,a))):(t(Gt,a),e.value=a)}});return{model:o,isGroup:s,isLimitExceeded:r}},ene=(n,e,{model:t})=>{const i=ct(Lp,void 0),s=V(!1),r=R(()=>Hd(n.value)?n.label:n.value),o=R(()=>{const u=t.value;return _i(u)?u:rt(u)?$t(r.value)?u.map(yn).some(d=>Ys(d,r.value)):u.map(yn).includes(r.value):u!=null?u===n.trueValue||u===n.trueLabel:!!u}),a=Hi(R(()=>{var u;return(u=i==null?void 0:i.size)==null?void 0:u.value}),{prop:!0}),l=Hi(R(()=>{var u;return(u=i==null?void 0:i.size)==null?void 0:u.value})),c=R(()=>!!e.default||!Hd(r.value));return{checkboxButtonSize:a,isChecked:o,isFocused:s,checkboxSize:l,hasOwnLabel:c,actualValue:r}},eF=(n,e)=>{const{formItem:t}=Qs(),{model:i,isGroup:s,isLimitExceeded:r}=Qte(n),{isFocused:o,isChecked:a,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:u,actualValue:d}=ene(n,e,{model:i}),{isDisabled:h}=Zte({model:i,isChecked:a}),{inputId:f,isLabeledByFormItem:m}=ca(n,{formItemContext:t,disableIdGeneration:u,disableIdManagement:s}),{handleChange:p,onClickRoot:y}=Jte(n,{model:i,isLimitExceeded:r,hasOwnLabel:u,isDisabled:h,isLabeledByFormItem:m});return(()=>{function _(){var b,w;rt(i.value)&&!i.value.includes(d.value)?i.value.push(d.value):i.value=(w=(b=n.trueValue)!=null?b:n.trueLabel)!=null?w:!0}n.checked&&_()})(),ns({from:"controls",replacement:"aria-controls",version:"2.8.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},R(()=>!!n.controls)),ns({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},R(()=>s.value&&Hd(n.value))),ns({from:"true-label",replacement:"true-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},R(()=>!!n.trueLabel)),ns({from:"false-label",replacement:"false-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},R(()=>!!n.falseLabel)),{inputId:f,isLabeledByFormItem:m,isChecked:a,isDisabled:h,isFocused:o,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:u,model:i,actualValue:d,handleChange:p,onClickRoot:y}},tne=["id","indeterminate","name","tabindex","disabled","true-value","false-value"],nne=["id","indeterminate","disabled","value","name","tabindex"],ine=se({name:"ElCheckbox"}),sne=se({...ine,props:J4,emits:Q4,setup(n){const e=n,t=hs(),{inputId:i,isLabeledByFormItem:s,isChecked:r,isDisabled:o,isFocused:a,checkboxSize:l,hasOwnLabel:c,model:u,actualValue:d,handleChange:h,onClickRoot:f}=eF(e,t),m=Ve("checkbox"),p=R(()=>[m.b(),m.m(l.value),m.is("disabled",o.value),m.is("bordered",e.border),m.is("checked",r.value)]),y=R(()=>[m.e("input"),m.is("disabled",o.value),m.is("checked",r.value),m.is("indeterminate",e.indeterminate),m.is("focus",a.value)]);return(v,_)=>(k(),Re(Wt(!g(c)&&g(s)?"span":"label"),{class:z(g(p)),"aria-controls":v.indeterminate?v.controls||v.ariaControls:null,onClick:g(f)},{default:pe(()=>{var b,w;return[te("span",{class:z(g(y))},[v.trueValue||v.falseValue||v.trueLabel||v.falseLabel?Bt((k(),Y("input",{key:0,id:g(i),"onUpdate:modelValue":_[0]||(_[0]=x=>Gn(u)?u.value=x:null),class:z(g(m).e("original")),type:"checkbox",indeterminate:v.indeterminate,name:v.name,tabindex:v.tabindex,disabled:g(o),"true-value":(b=v.trueValue)!=null?b:v.trueLabel,"false-value":(w=v.falseValue)!=null?w:v.falseLabel,onChange:_[1]||(_[1]=(...x)=>g(h)&&g(h)(...x)),onFocus:_[2]||(_[2]=x=>a.value=!0),onBlur:_[3]||(_[3]=x=>a.value=!1),onClick:_[4]||(_[4]=Tt(()=>{},["stop"]))},null,42,tne)),[[B_,g(u)]]):Bt((k(),Y("input",{key:1,id:g(i),"onUpdate:modelValue":_[5]||(_[5]=x=>Gn(u)?u.value=x:null),class:z(g(m).e("original")),type:"checkbox",indeterminate:v.indeterminate,disabled:g(o),value:g(d),name:v.name,tabindex:v.tabindex,onChange:_[6]||(_[6]=(...x)=>g(h)&&g(h)(...x)),onFocus:_[7]||(_[7]=x=>a.value=!0),onBlur:_[8]||(_[8]=x=>a.value=!1),onClick:_[9]||(_[9]=Tt(()=>{},["stop"]))},null,42,nne)),[[B_,g(u)]]),te("span",{class:z(g(m).e("inner"))},null,2)],2),g(c)?(k(),Y("span",{key:0,class:z(g(m).e("label"))},[ke(v.$slots,"default"),v.$slots.default?Ee("v-if",!0):(k(),Y(mt,{key:0},[Yt(Je(v.label),1)],64))],2)):Ee("v-if",!0)]}),_:3},8,["class","aria-controls","onClick"]))}});var rne=Ze(sne,[["__file","checkbox.vue"]]);const one=["name","tabindex","disabled","true-value","false-value"],ane=["name","tabindex","disabled","value"],lne=se({name:"ElCheckboxButton"}),cne=se({...lne,props:J4,emits:Q4,setup(n){const e=n,t=hs(),{isFocused:i,isChecked:s,isDisabled:r,checkboxButtonSize:o,model:a,actualValue:l,handleChange:c}=eF(e,t),u=ct(Lp,void 0),d=Ve("checkbox"),h=R(()=>{var m,p,y,v;const _=(p=(m=u==null?void 0:u.fill)==null?void 0:m.value)!=null?p:"";return{backgroundColor:_,borderColor:_,color:(v=(y=u==null?void 0:u.textColor)==null?void 0:y.value)!=null?v:"",boxShadow:_?`-1px 0 0 0 ${_}`:void 0}}),f=R(()=>[d.b("button"),d.bm("button",o.value),d.is("disabled",r.value),d.is("checked",s.value),d.is("focus",i.value)]);return(m,p)=>{var y,v;return k(),Y("label",{class:z(g(f))},[m.trueValue||m.falseValue||m.trueLabel||m.falseLabel?Bt((k(),Y("input",{key:0,"onUpdate:modelValue":p[0]||(p[0]=_=>Gn(a)?a.value=_:null),class:z(g(d).be("button","original")),type:"checkbox",name:m.name,tabindex:m.tabindex,disabled:g(r),"true-value":(y=m.trueValue)!=null?y:m.trueLabel,"false-value":(v=m.falseValue)!=null?v:m.falseLabel,onChange:p[1]||(p[1]=(..._)=>g(c)&&g(c)(..._)),onFocus:p[2]||(p[2]=_=>i.value=!0),onBlur:p[3]||(p[3]=_=>i.value=!1),onClick:p[4]||(p[4]=Tt(()=>{},["stop"]))},null,42,one)),[[B_,g(a)]]):Bt((k(),Y("input",{key:1,"onUpdate:modelValue":p[5]||(p[5]=_=>Gn(a)?a.value=_:null),class:z(g(d).be("button","original")),type:"checkbox",name:m.name,tabindex:m.tabindex,disabled:g(r),value:g(l),onChange:p[6]||(p[6]=(..._)=>g(c)&&g(c)(..._)),onFocus:p[7]||(p[7]=_=>i.value=!0),onBlur:p[8]||(p[8]=_=>i.value=!1),onClick:p[9]||(p[9]=Tt(()=>{},["stop"]))},null,42,ane)),[[B_,g(a)]]),m.$slots.default||m.label?(k(),Y("span",{key:2,class:z(g(d).be("button","inner")),style:pt(g(s)?g(h):void 0)},[ke(m.$slots,"default",{},()=>[Yt(Je(m.label),1)])],6)):Ee("v-if",!0)],2)}}});var tF=Ze(cne,[["__file","checkbox-button.vue"]]);const une=Ye({modelValue:{type:ge(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:Zi,label:String,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0},...Ss(["ariaLabel"])}),dne={[Gt]:n=>rt(n),change:n=>rt(n)},hne=se({name:"ElCheckboxGroup"}),fne=se({...hne,props:une,emits:dne,setup(n,{emit:e}){const t=n,i=Ve("checkbox"),{formItem:s}=Qs(),{inputId:r,isLabeledByFormItem:o}=ca(t,{formItemContext:s}),a=async c=>{e(Gt,c),await vt(),e("change",c)},l=R({get(){return t.modelValue},set(c){a(c)}});return Xt(Lp,{...Aa(ws(t),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:l,changeEvent:a}),ns({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-checkbox-group",ref:"https://element-plus.org/en-US/component/checkbox.html"},R(()=>!!t.label)),ze(()=>t.modelValue,()=>{t.validateEvent&&(s==null||s.validate("change").catch(c=>void 0))}),(c,u)=>{var d;return k(),Re(Wt(c.tag),{id:g(r),class:z(g(i).b("group")),role:"group","aria-label":g(o)?void 0:c.label||c.ariaLabel||"checkbox-group","aria-labelledby":g(o)?(d=g(s))==null?void 0:d.labelId:void 0},{default:pe(()=>[ke(c.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var nF=Ze(fne,[["__file","checkbox-group.vue"]]);const Do=Ht(rne,{CheckboxButton:tF,CheckboxGroup:nF}),pne=si(tF),iF=si(nF),sF=Ye({modelValue:{type:[String,Number,Boolean],default:void 0},size:Zi,disabled:Boolean,label:{type:[String,Number,Boolean],default:void 0},value:{type:[String,Number,Boolean],default:void 0},name:{type:String,default:void 0}}),mne=Ye({...sF,border:Boolean}),rF={[Gt]:n=>Rt(n)||Ct(n)||_i(n),[Fn]:n=>Rt(n)||Ct(n)||_i(n)},oF=Symbol("radioGroupKey"),aF=(n,e)=>{const t=V(),i=ct(oF,void 0),s=R(()=>!!i),r=R(()=>Hd(n.value)?n.label:n.value),o=R({get(){return s.value?i.modelValue:n.modelValue},set(d){s.value?i.changeEvent(d):e&&e(Gt,d),t.value.checked=n.modelValue===r.value}}),a=Hi(R(()=>i==null?void 0:i.size)),l=mr(R(()=>i==null?void 0:i.disabled)),c=V(!1),u=R(()=>l.value||s.value&&o.value!==r.value?-1:0);return ns({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-radio",ref:"https://element-plus.org/en-US/component/radio.html"},R(()=>s.value&&Hd(n.value))),{radioRef:t,isGroup:s,radioGroup:i,focus:c,size:a,disabled:l,tabIndex:u,modelValue:o,actualValue:r}},gne=["value","name","disabled"],vne=se({name:"ElRadio"}),yne=se({...vne,props:mne,emits:rF,setup(n,{emit:e}){const t=n,i=Ve("radio"),{radioRef:s,radioGroup:r,focus:o,size:a,disabled:l,modelValue:c,actualValue:u}=aF(t,e);function d(){vt(()=>e("change",c.value))}return(h,f)=>{var m;return k(),Y("label",{class:z([g(i).b(),g(i).is("disabled",g(l)),g(i).is("focus",g(o)),g(i).is("bordered",h.border),g(i).is("checked",g(c)===g(u)),g(i).m(g(a))])},[te("span",{class:z([g(i).e("input"),g(i).is("disabled",g(l)),g(i).is("checked",g(c)===g(u))])},[Bt(te("input",{ref_key:"radioRef",ref:s,"onUpdate:modelValue":f[0]||(f[0]=p=>Gn(c)?c.value=p:null),class:z(g(i).e("original")),value:g(u),name:h.name||((m=g(r))==null?void 0:m.name),disabled:g(l),type:"radio",onFocus:f[1]||(f[1]=p=>o.value=!0),onBlur:f[2]||(f[2]=p=>o.value=!1),onChange:d,onClick:f[3]||(f[3]=Tt(()=>{},["stop"]))},null,42,gne),[[mD,g(c)]]),te("span",{class:z(g(i).e("inner"))},null,2)],2),te("span",{class:z(g(i).e("label")),onKeydown:f[4]||(f[4]=Tt(()=>{},["stop"]))},[ke(h.$slots,"default",{},()=>[Yt(Je(h.label),1)])],34)],2)}}});var _ne=Ze(yne,[["__file","radio.vue"]]);const bne=Ye({...sF}),wne=["value","name","disabled"],xne=se({name:"ElRadioButton"}),Sne=se({...xne,props:bne,setup(n){const e=n,t=Ve("radio"),{radioRef:i,focus:s,size:r,disabled:o,modelValue:a,radioGroup:l,actualValue:c}=aF(e),u=R(()=>({backgroundColor:(l==null?void 0:l.fill)||"",borderColor:(l==null?void 0:l.fill)||"",boxShadow:l!=null&&l.fill?`-1px 0 0 0 ${l.fill}`:"",color:(l==null?void 0:l.textColor)||""}));return(d,h)=>{var f;return k(),Y("label",{class:z([g(t).b("button"),g(t).is("active",g(a)===g(c)),g(t).is("disabled",g(o)),g(t).is("focus",g(s)),g(t).bm("button",g(r))])},[Bt(te("input",{ref_key:"radioRef",ref:i,"onUpdate:modelValue":h[0]||(h[0]=m=>Gn(a)?a.value=m:null),class:z(g(t).be("button","original-radio")),value:g(c),type:"radio",name:d.name||((f=g(l))==null?void 0:f.name),disabled:g(o),onFocus:h[1]||(h[1]=m=>s.value=!0),onBlur:h[2]||(h[2]=m=>s.value=!1),onClick:h[3]||(h[3]=Tt(()=>{},["stop"]))},null,42,wne),[[mD,g(a)]]),te("span",{class:z(g(t).be("button","inner")),style:pt(g(a)===g(c)?g(u):{}),onKeydown:h[4]||(h[4]=Tt(()=>{},["stop"]))},[ke(d.$slots,"default",{},()=>[Yt(Je(d.label),1)])],38)],2)}}});var lF=Ze(Sne,[["__file","radio-button.vue"]]);const Cne=Ye({id:{type:String,default:void 0},size:Zi,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:void 0},fill:{type:String,default:""},label:{type:String,default:void 0},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0},...Ss(["ariaLabel"])}),Mne=rF,Ene=["id","aria-label","aria-labelledby"],Tne=se({name:"ElRadioGroup"}),Ane=se({...Tne,props:Cne,emits:Mne,setup(n,{emit:e}){const t=n,i=Ve("radio"),s=Ls(),r=V(),{formItem:o}=Qs(),{inputId:a,isLabeledByFormItem:l}=ca(t,{formItemContext:o}),c=d=>{e(Gt,d),vt(()=>e("change",d))};Ft(()=>{const d=r.value.querySelectorAll("[type=radio]"),h=d[0];!Array.from(d).some(f=>f.checked)&&h&&(h.tabIndex=0)});const u=R(()=>t.name||s.value);return Xt(oF,un({...ws(t),changeEvent:c,name:u})),ze(()=>t.modelValue,()=>{t.validateEvent&&(o==null||o.validate("change").catch(d=>void 0))}),ns({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-radio-group",ref:"https://element-plus.org/en-US/component/radio.html"},R(()=>!!t.label)),(d,h)=>(k(),Y("div",{id:g(a),ref_key:"radioGroupRef",ref:r,class:z(g(i).b("group")),role:"radiogroup","aria-label":g(l)?void 0:d.label||d.ariaLabel||"radio-group","aria-labelledby":g(l)?g(o).labelId:void 0},[ke(d.$slots,"default")],10,Ene))}});var cF=Ze(Ane,[["__file","radio-group.vue"]]);const uF=Ht(_ne,{RadioButton:lF,RadioGroup:cF}),Ine=si(cF),Rne=si(lF);var Pne=se({name:"NodeContent",setup(){return{ns:Ve("cascader-node")}},render(){const{ns:n}=this,{node:e,panel:t}=this.$parent,{data:i,label:s}=e,{renderLabelFn:r}=t;return _t("span",{class:n.e("label")},r?r({node:e,data:i}):s)}});const RT=Symbol(),Lne=se({name:"ElCascaderNode",components:{ElCheckbox:Do,ElRadio:uF,NodeContent:Pne,ElIcon:dt,Check:Bv,Loading:Ha,ArrowRight:ur},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(n,{emit:e}){const t=ct(RT),i=Ve("cascader-node"),s=R(()=>t.isHoverMenu),r=R(()=>t.config.multiple),o=R(()=>t.config.checkStrictly),a=R(()=>{var S;return(S=t.checkedNodes[0])==null?void 0:S.uid}),l=R(()=>n.node.isDisabled),c=R(()=>n.node.isLeaf),u=R(()=>o.value&&!c.value||!l.value),d=R(()=>f(t.expandingNode)),h=R(()=>o.value&&t.checkedNodes.some(f)),f=S=>{var C;const{level:T,uid:M}=n.node;return((C=S==null?void 0:S.pathNodes[T-1])==null?void 0:C.uid)===M},m=()=>{d.value||t.expandNode(n.node)},p=S=>{const{node:C}=n;S!==C.checked&&t.handleCheckChange(C,S)},y=()=>{t.lazyLoad(n.node,()=>{c.value||m()})},v=S=>{s.value&&(_(),!c.value&&e("expand",S))},_=()=>{const{node:S}=n;!u.value||S.loading||(S.loaded?m():y())},b=()=>{s.value&&!c.value||(c.value&&!l.value&&!o.value&&!r.value?x(!0):_())},w=S=>{o.value?(p(S),n.node.loaded&&m()):x(S)},x=S=>{n.node.loaded?(p(S),!o.value&&m()):y()};return{panel:t,isHoverMenu:s,multiple:r,checkStrictly:o,checkedNodeId:a,isDisabled:l,isLeaf:c,expandable:u,inExpandingPath:d,inCheckedPath:h,ns:i,handleHoverExpand:v,handleExpand:_,handleClick:b,handleCheck:x,handleSelectCheck:w}}}),kne=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],One=te("span",null,null,-1);function Dne(n,e,t,i,s,r){const o=Ut("el-checkbox"),a=Ut("el-radio"),l=Ut("check"),c=Ut("el-icon"),u=Ut("node-content"),d=Ut("loading"),h=Ut("arrow-right");return k(),Y("li",{id:`${n.menuId}-${n.node.uid}`,role:"menuitem","aria-haspopup":!n.isLeaf,"aria-owns":n.isLeaf?null:n.menuId,"aria-expanded":n.inExpandingPath,tabindex:n.expandable?-1:void 0,class:z([n.ns.b(),n.ns.is("selectable",n.checkStrictly),n.ns.is("active",n.node.checked),n.ns.is("disabled",!n.expandable),n.inExpandingPath&&"in-active-path",n.inCheckedPath&&"in-checked-path"]),onMouseenter:e[2]||(e[2]=(...f)=>n.handleHoverExpand&&n.handleHoverExpand(...f)),onFocus:e[3]||(e[3]=(...f)=>n.handleHoverExpand&&n.handleHoverExpand(...f)),onClick:e[4]||(e[4]=(...f)=>n.handleClick&&n.handleClick(...f))},[Ee(" prefix "),n.multiple?(k(),Re(o,{key:0,"model-value":n.node.checked,indeterminate:n.node.indeterminate,disabled:n.isDisabled,onClick:e[0]||(e[0]=Tt(()=>{},["stop"])),"onUpdate:modelValue":n.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):n.checkStrictly?(k(),Re(a,{key:1,"model-value":n.checkedNodeId,label:n.node.uid,disabled:n.isDisabled,"onUpdate:modelValue":n.handleSelectCheck,onClick:e[1]||(e[1]=Tt(()=>{},["stop"]))},{default:pe(()=>[Ee(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),One]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):n.isLeaf&&n.node.checked?(k(),Re(c,{key:2,class:z(n.ns.e("prefix"))},{default:pe(()=>[le(l)]),_:1},8,["class"])):Ee("v-if",!0),Ee(" content "),le(u),Ee(" postfix "),n.isLeaf?Ee("v-if",!0):(k(),Y(mt,{key:3},[n.node.loading?(k(),Re(c,{key:0,class:z([n.ns.is("loading"),n.ns.e("postfix")])},{default:pe(()=>[le(d)]),_:1},8,["class"])):(k(),Re(c,{key:1,class:z(["arrow-right",n.ns.e("postfix")])},{default:pe(()=>[le(h)]),_:1},8,["class"]))],64))],42,kne)}var Nne=Ze(Lne,[["render",Dne],["__file","node.vue"]]);const Fne=se({name:"ElCascaderMenu",components:{Loading:Ha,ElIcon:dt,ElScrollbar:Zl,ElCascaderNode:Nne},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(n){const e=zt(),t=Ve("cascader-menu"),{t:i}=en(),s=Ls();let r=null,o=null;const a=ct(RT),l=V(null),c=R(()=>!n.nodes.length),u=R(()=>!a.initialLoaded),d=R(()=>`${s.value}-${n.index}`),h=y=>{r=y.target},f=y=>{if(!(!a.isHoverMenu||!r||!l.value))if(r.contains(y.target)){m();const v=e.vnode.el,{left:_}=v.getBoundingClientRect(),{offsetWidth:b,offsetHeight:w}=v,x=y.clientX-_,S=r.offsetTop,C=S+r.offsetHeight;l.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${x} ${S} L${b} 0 V${S} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${x} ${C} L${b} ${w} V${C} Z" />
        `}else o||(o=window.setTimeout(p,a.config.hoverThreshold))},m=()=>{o&&(clearTimeout(o),o=null)},p=()=>{l.value&&(l.value.innerHTML="",m())};return{ns:t,panel:a,hoverZone:l,isEmpty:c,isLoading:u,menuId:d,t:i,handleExpand:h,handleMouseMove:f,clearHoverZone:p}}});function Bne(n,e,t,i,s,r){const o=Ut("el-cascader-node"),a=Ut("loading"),l=Ut("el-icon"),c=Ut("el-scrollbar");return k(),Re(c,{key:n.menuId,tag:"ul",role:"menu",class:z(n.ns.b()),"wrap-class":n.ns.e("wrap"),"view-class":[n.ns.e("list"),n.ns.is("empty",n.isEmpty)],onMousemove:n.handleMouseMove,onMouseleave:n.clearHoverZone},{default:pe(()=>{var u;return[(k(!0),Y(mt,null,Zt(n.nodes,d=>(k(),Re(o,{key:d.uid,node:d,"menu-id":n.menuId,onExpand:n.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),n.isLoading?(k(),Y("div",{key:0,class:z(n.ns.e("empty-text"))},[le(l,{size:"14",class:z(n.ns.is("loading"))},{default:pe(()=>[le(a)]),_:1},8,["class"]),Yt(" "+Je(n.t("el.cascader.loading")),1)],2)):n.isEmpty?(k(),Y("div",{key:1,class:z(n.ns.e("empty-text"))},Je(n.t("el.cascader.noData")),3)):(u=n.panel)!=null&&u.isHoverMenu?(k(),Y("svg",{key:2,ref:"hoverZone",class:z(n.ns.e("hover-zone"))},null,2)):Ee("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var Une=Ze(Fne,[["render",Bne],["__file","menu.vue"]]);let zne=0;const Hne=n=>{const e=[n];let{parent:t}=n;for(;t;)e.unshift(t),t=t.parent;return e};let BC=class UC{constructor(e,t,i,s=!1){this.data=e,this.config=t,this.parent=i,this.root=s,this.uid=zne++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:r,label:o,children:a}=t,l=e[a],c=Hne(this);this.level=s?0:i?i.level+1:1,this.value=e[r],this.label=e[o],this.pathNodes=c,this.pathValues=c.map(u=>u.value),this.pathLabels=c.map(u=>u.label),this.childrenData=l,this.children=(l||[]).map(u=>new UC(u,t,this)),this.loaded=!t.lazy||this.isLeaf||!_o(l)}get isDisabled(){const{data:e,parent:t,config:i}=this,{disabled:s,checkStrictly:r}=i;return(xt(s)?s(e,this):!!e[s])||!r&&(t==null?void 0:t.isDisabled)}get isLeaf(){const{data:e,config:t,childrenData:i,loaded:s}=this,{lazy:r,leaf:o}=t,a=xt(o)?o(e,this):e[o];return ki(a)?r&&!s?!1:!(Array.isArray(i)&&i.length):!!a}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(e){const{childrenData:t,children:i}=this,s=new UC(e,this.config,this);return Array.isArray(t)?t.push(e):this.childrenData=[e],i.push(s),s}calcText(e,t){const i=e?this.pathLabels.join(t):this.label;return this.text=i,i}broadcast(e,...t){const i=`onParent${Ma(e)}`;this.children.forEach(s=>{s&&(s.broadcast(e,...t),s[i]&&s[i](...t))})}emit(e,...t){const{parent:i}=this,s=`onChild${Ma(e)}`;i&&(i[s]&&i[s](...t),i.emit(e,...t))}onParentCheck(e){this.isDisabled||this.setCheckState(e)}onChildCheck(){const{children:e}=this,t=e.filter(s=>!s.isDisabled),i=t.length?t.every(s=>s.checked):!1;this.setCheckState(i)}setCheckState(e){const t=this.children.length,i=this.children.reduce((s,r)=>{const o=r.checked?1:r.indeterminate?.5:0;return s+o},0);this.checked=this.loaded&&this.children.filter(s=>!s.isDisabled).every(s=>s.loaded&&s.checked)&&e,this.indeterminate=this.loaded&&i!==t&&i>0}doCheck(e){if(this.checked===e)return;const{checkStrictly:t,multiple:i}=this.config;t||!i?this.checked=e:(this.broadcast("check",e),this.setCheckState(e),this.emit("check"))}};const zC=(n,e)=>n.reduce((t,i)=>(i.isLeaf?t.push(i):(!e&&t.push(i),t=t.concat(zC(i.children,e))),t),[]);class hP{constructor(e,t){this.config=t;const i=(e||[]).map(s=>new BC(s,this.config));this.nodes=i,this.allNodes=zC(i,!1),this.leafNodes=zC(i,!0)}getNodes(){return this.nodes}getFlattedNodes(e){return e?this.leafNodes:this.allNodes}appendNode(e,t){const i=t?t.appendChild(e):new BC(e,this.config);t||this.nodes.push(i),this.allNodes.push(i),i.isLeaf&&this.leafNodes.push(i)}appendNodes(e,t){e.forEach(i=>this.appendNode(i,t))}getNodeByValue(e,t=!1){return!e&&e!==0?null:this.getFlattedNodes(t).find(s=>Ys(s.value,e)||Ys(s.pathValues,e))||null}getSameNode(e){return e&&this.getFlattedNodes(!1).find(({value:i,level:s})=>Ys(e.value,i)&&e.level===s)||null}}const dF=Ye({modelValue:{type:ge([Number,String,Array])},options:{type:ge(Array),default:()=>[]},props:{type:ge(Object),default:()=>({})}}),Vne={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:mn,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},$ne=n=>R(()=>({...Vne,...n.props})),fP=n=>{if(!n)return 0;const e=n.id.split("-");return Number(e[e.length-2])},Gne=n=>{if(!n)return;const e=n.querySelector("input");e?e.click():bD(n)&&n.click()},Wne=(n,e)=>{const t=e.slice(0),i=t.map(r=>r.uid),s=n.reduce((r,o)=>{const a=i.indexOf(o.uid);return a>-1&&(r.push(o),t.splice(a,1),i.splice(a,1)),r},[]);return s.push(...t),s},Kne=se({name:"ElCascaderPanel",components:{ElCascaderMenu:Une},props:{...dF,border:{type:Boolean,default:!0},renderLabel:Function},emits:[Gt,Fn,"close","expand-change"],setup(n,{emit:e,slots:t}){let i=!1;const s=Ve("cascader"),r=$ne(n);let o=null;const a=V(!0),l=V([]),c=V(null),u=V([]),d=V(null),h=V([]),f=R(()=>r.value.expandTrigger==="hover"),m=R(()=>n.renderLabel||t.default),p=()=>{const{options:I}=n,B=r.value;i=!1,o=new hP(I,B),u.value=[o.getNodes()],B.lazy&&_o(n.options)?(a.value=!1,y(void 0,F=>{F&&(o=new hP(F,B),u.value=[o.getNodes()]),a.value=!0,T(!1,!0)})):T(!1,!0)},y=(I,B)=>{const F=r.value;I=I||new BC({},F,void 0,!0),I.loading=!0;const U=P=>{const O=I,D=O.root?null:O;P&&(o==null||o.appendNodes(P,D)),O.loading=!1,O.loaded=!0,O.childrenData=O.childrenData||[],B&&B(P)};F.lazyLoad(I,U)},v=(I,B)=>{var F;const{level:U}=I,P=u.value.slice(0,U);let O;I.isLeaf?O=I.pathNodes[U-2]:(O=I,P.push(I.children)),((F=d.value)==null?void 0:F.uid)!==(O==null?void 0:O.uid)&&(d.value=I,u.value=P,!B&&e("expand-change",(I==null?void 0:I.pathValues)||[]))},_=(I,B,F=!0)=>{const{checkStrictly:U,multiple:P}=r.value,O=h.value[0];i=!0,!P&&(O==null||O.doCheck(!1)),I.doCheck(B),C(),F&&!P&&!U&&e("close"),!F&&!P&&!U&&b(I)},b=I=>{I&&(I=I.parent,b(I),I&&v(I))},w=I=>o==null?void 0:o.getFlattedNodes(I),x=I=>{var B;return(B=w(I))==null?void 0:B.filter(F=>F.checked!==!1)},S=()=>{h.value.forEach(I=>I.doCheck(!1)),C(),u.value=u.value.slice(0,1),d.value=null,e("expand-change",[])},C=()=>{var I;const{checkStrictly:B,multiple:F}=r.value,U=h.value,P=x(!B),O=Wne(U,P),D=O.map(L=>L.valueByOption);h.value=O,c.value=F?D:(I=D[0])!=null?I:null},T=(I=!1,B=!1)=>{const{modelValue:F}=n,{lazy:U,multiple:P,checkStrictly:O}=r.value,D=!O;if(!(!a.value||i||!B&&Ys(F,c.value)))if(U&&!I){const H=dR(PK(Vs(F))).map(X=>o==null?void 0:o.getNodeByValue(X)).filter(X=>!!X&&!X.loaded&&!X.loading);H.length?H.forEach(X=>{y(X,()=>T(!1,B))}):T(!0,B)}else{const L=P?Vs(F):[F],H=dR(L.map(X=>o==null?void 0:o.getNodeByValue(X,D)));M(H,B),c.value=H_(F)}},M=(I,B=!0)=>{const{checkStrictly:F}=r.value,U=h.value,P=I.filter(L=>!!L&&(F||L.isLeaf)),O=o==null?void 0:o.getSameNode(d.value),D=B&&O||P[0];D?D.pathNodes.forEach(L=>v(L,!0)):d.value=null,U.forEach(L=>L.doCheck(!1)),un(P).forEach(L=>L.doCheck(!0)),h.value=P,vt(E)},E=()=>{Jt&&l.value.forEach(I=>{const B=I==null?void 0:I.$el;if(B){const F=B.querySelector(`.${s.namespace.value}-scrollbar__wrap`),U=B.querySelector(`.${s.b("node")}.${s.is("active")}`)||B.querySelector(`.${s.b("node")}.in-active-path`);gN(F,U)}})},A=I=>{const B=I.target,{code:F}=I;switch(F){case wt.up:case wt.down:{I.preventDefault();const U=F===wt.up?-1:1;e_(wD(B,U,`.${s.b("node")}[tabindex="-1"]`));break}case wt.left:{I.preventDefault();const U=l.value[fP(B)-1],P=U==null?void 0:U.$el.querySelector(`.${s.b("node")}[aria-expanded="true"]`);e_(P);break}case wt.right:{I.preventDefault();const U=l.value[fP(B)+1],P=U==null?void 0:U.$el.querySelector(`.${s.b("node")}[tabindex="-1"]`);e_(P);break}case wt.enter:Gne(B);break}};return Xt(RT,un({config:r,expandingNode:d,checkedNodes:h,isHoverMenu:f,initialLoaded:a,renderLabelFn:m,lazyLoad:y,expandNode:v,handleCheckChange:_})),ze([r,()=>n.options],p,{deep:!0,immediate:!0}),ze(()=>n.modelValue,()=>{i=!1,T()},{deep:!0}),ze(()=>c.value,I=>{Ys(I,n.modelValue)||(e(Gt,I),e(Fn,I))}),OO(()=>l.value=[]),Ft(()=>!_o(n.modelValue)&&T()),{ns:s,menuList:l,menus:u,checkedNodes:h,handleKeyDown:A,handleCheckChange:_,getFlattedNodes:w,getCheckedNodes:x,clearCheckedNodes:S,calculateCheckedValue:C,scrollToExpandingNode:E}}});function Yne(n,e,t,i,s,r){const o=Ut("el-cascader-menu");return k(),Y("div",{class:z([n.ns.b("panel"),n.ns.is("bordered",n.border)]),onKeydown:e[0]||(e[0]=(...a)=>n.handleKeyDown&&n.handleKeyDown(...a))},[(k(!0),Y(mt,null,Zt(n.menus,(a,l)=>(k(),Re(o,{key:l,ref_for:!0,ref:c=>n.menuList[l]=c,index:l,nodes:[...a]},null,8,["index","nodes"]))),128))],34)}var l_=Ze(Kne,[["render",Yne],["__file","index.vue"]]);l_.install=n=>{n.component(l_.name,l_)};const hF=l_,Xne=hF,Wd=Ye({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:Ya},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),jne={close:n=>n instanceof MouseEvent,click:n=>n instanceof MouseEvent},qne=se({name:"ElTag"}),Zne=se({...qne,props:Wd,emits:jne,setup(n,{emit:e}){const t=n,i=Hi(),s=Ve("tag"),r=R(()=>{const{type:l,hit:c,effect:u,closable:d,round:h}=t;return[s.b(),s.is("closable",d),s.m(l||"primary"),s.m(i.value),s.m(u),s.is("hit",c),s.is("round",h)]}),o=l=>{e("close",l)},a=l=>{e("click",l)};return(l,c)=>l.disableTransitions?(k(),Y("span",{key:0,class:z(g(r)),style:pt({backgroundColor:l.color}),onClick:a},[te("span",{class:z(g(s).e("content"))},[ke(l.$slots,"default")],2),l.closable?(k(),Re(g(dt),{key:0,class:z(g(s).e("close")),onClick:Tt(o,["stop"])},{default:pe(()=>[le(g(ia))]),_:1},8,["class","onClick"])):Ee("v-if",!0)],6)):(k(),Re(ji,{key:1,name:`${g(s).namespace.value}-zoom-in-center`,appear:""},{default:pe(()=>[te("span",{class:z(g(r)),style:pt({backgroundColor:l.color}),onClick:a},[te("span",{class:z(g(s).e("content"))},[ke(l.$slots,"default")],2),l.closable?(k(),Re(g(dt),{key:0,class:z(g(s).e("close")),onClick:Tt(o,["stop"])},{default:pe(()=>[le(g(ia))]),_:1},8,["class","onClick"])):Ee("v-if",!0)],6)]),_:3},8,["name"]))}});var Jne=Ze(Zne,[["__file","tag.vue"]]);const Og=Ht(Jne),Qne=Ye({...dF,size:Zi,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:ge(Function),default:(n,e)=>n.text.includes(e)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:ge(Function),default:()=>!0},popperClass:{type:String,default:""},teleported:rs.teleported,tagType:{...Wd.type,default:"info"},tagEffect:{...Wd.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...Pp}),eie={[Gt]:n=>!0,[Fn]:n=>!0,focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0,visibleChange:n=>_i(n),expandChange:n=>!!n,removeTag:n=>!!n},tie={key:0},nie=["placeholder","onKeydown"],iie=["onClick"],sie="ElCascader",rie=se({name:sie}),oie=se({...rie,props:Qne,emits:eie,setup(n,{expose:e,emit:t}){const i=n,s={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:oe})=>{const{modifiersData:Le,placement:Ke}=oe;["right","left","bottom","top"].includes(Ke)||(Le.arrow.x=35)},requires:["arrow"]}]},r=ah();let o=0,a=0;const l=Ve("cascader"),c=Ve("input"),{t:u}=en(),{form:d,formItem:h}=Qs(),{valueOnClear:f}=D1(i),m=V(null),p=V(null),y=V(null),v=V(null),_=V(null),b=V(!1),w=V(!1),x=V(!1),S=V(!1),C=V(""),T=V(""),M=V([]),E=V([]),A=V([]),I=V(!1),B=R(()=>r.style),F=R(()=>i.disabled||(d==null?void 0:d.disabled)),U=R(()=>i.placeholder||u("el.cascader.placeholder")),P=R(()=>T.value||M.value.length>0||I.value?"":U.value),O=Hi(),D=R(()=>["small"].includes(O.value)?"small":"default"),L=R(()=>!!i.props.multiple),H=R(()=>!i.filterable||L.value),X=R(()=>L.value?T.value:C.value),ne=R(()=>{var oe;return((oe=v.value)==null?void 0:oe.checkedNodes)||[]}),ce=R(()=>!i.clearable||F.value||x.value||!w.value?!1:!!ne.value.length),ae=R(()=>{const{showAllLevels:oe,separator:Le}=i,Ke=ne.value;return Ke.length?L.value?"":Ke[0].calcText(oe,Le):""}),_e=R(()=>(h==null?void 0:h.validateState)||""),re=R({get(){return H_(i.modelValue)},set(oe){const Le=oe??f.value;t(Gt,Le),t(Fn,Le),i.validateEvent&&(h==null||h.validate("change").catch(Ke=>void 0))}}),xe=R(()=>[l.b(),l.m(O.value),l.is("disabled",F.value),r.class]),he=R(()=>[c.e("icon"),"icon-arrow-down",l.is("reverse",b.value)]),Te=R(()=>l.is("focus",b.value||S.value)),Ce=R(()=>{var oe,Le;return(Le=(oe=m.value)==null?void 0:oe.popperRef)==null?void 0:Le.contentRef}),we=oe=>{var Le,Ke,ft;F.value||(oe=oe??!b.value,oe!==b.value&&(b.value=oe,(Ke=(Le=p.value)==null?void 0:Le.input)==null||Ke.setAttribute("aria-expanded",`${oe}`),oe?(K(),vt((ft=v.value)==null?void 0:ft.scrollToExpandingNode)):i.filterable&&fe(),t("visibleChange",oe)))},K=()=>{vt(()=>{var oe;(oe=m.value)==null||oe.updatePopper()})},j=()=>{x.value=!1},ie=oe=>{const{showAllLevels:Le,separator:Ke}=i;return{node:oe,key:oe.uid,text:oe.calcText(Le,Ke),hitState:!1,closable:!F.value&&!oe.isDisabled,isCollapseTag:!1}},ve=oe=>{var Le;const Ke=oe.node;Ke.doCheck(!1),(Le=v.value)==null||Le.calculateCheckedValue(),t("removeTag",Ke.valueByOption)},ye=()=>{if(!L.value)return;const oe=ne.value,Le=[],Ke=[];if(oe.forEach(ft=>Ke.push(ie(ft))),E.value=Ke,oe.length){oe.slice(0,i.maxCollapseTags).forEach($e=>Le.push(ie($e)));const ft=oe.slice(i.maxCollapseTags),Q=ft.length;Q&&(i.collapseTags?Le.push({key:-1,text:`+ ${Q}`,closable:!1,isCollapseTag:!0}):ft.forEach($e=>Le.push(ie($e))))}M.value=Le},me=()=>{var oe,Le;const{filterMethod:Ke,showAllLevels:ft,separator:Q}=i,$e=(Le=(oe=v.value)==null?void 0:oe.getFlattedNodes(!i.props.checkStrictly))==null?void 0:Le.filter(Oe=>Oe.isDisabled?!1:(Oe.calcText(ft,Q),Ke(Oe,X.value)));L.value&&(M.value.forEach(Oe=>{Oe.hitState=!1}),E.value.forEach(Oe=>{Oe.hitState=!1})),x.value=!0,A.value=$e,K()},be=()=>{var oe;let Le;x.value&&_.value?Le=_.value.$el.querySelector(`.${l.e("suggestion-item")}`):Le=(oe=v.value)==null?void 0:oe.$el.querySelector(`.${l.b("node")}[tabindex="-1"]`),Le&&(Le.focus(),!x.value&&Le.click())},Pe=()=>{var oe,Le;const Ke=(oe=p.value)==null?void 0:oe.input,ft=y.value,Q=(Le=_.value)==null?void 0:Le.$el;if(!(!Jt||!Ke)){if(Q){const $e=Q.querySelector(`.${l.e("suggestion-list")}`);$e.style.minWidth=`${Ke.offsetWidth}px`}if(ft){const{offsetHeight:$e}=ft,Oe=M.value.length>0?`${Math.max($e+6,o)}px`:`${o}px`;Ke.style.height=Oe,K()}}},Z=oe=>{var Le;return(Le=v.value)==null?void 0:Le.getCheckedNodes(oe)},$=oe=>{K(),t("expandChange",oe)},de=oe=>{var Le;const Ke=(Le=oe.target)==null?void 0:Le.value;if(oe.type==="compositionend")I.value=!1,vt(()=>Fe(Ke));else{const ft=Ke[Ke.length-1]||"";I.value=!tT(ft)}},Ae=oe=>{if(!I.value)switch(oe.code){case wt.enter:we();break;case wt.down:we(!0),vt(be),oe.preventDefault();break;case wt.esc:b.value===!0&&(oe.preventDefault(),oe.stopPropagation(),we(!1));break;case wt.tab:we(!1);break}},De=()=>{var oe;(oe=v.value)==null||oe.clearCheckedNodes(),!b.value&&i.filterable&&fe(),we(!1),t("clear")},fe=()=>{const{value:oe}=ae;C.value=oe,T.value=oe},Ge=oe=>{var Le,Ke;const{checked:ft}=oe;L.value?(Le=v.value)==null||Le.handleCheckChange(oe,!ft,!1):(!ft&&((Ke=v.value)==null||Ke.handleCheckChange(oe,!0,!1)),we(!1))},We=oe=>{const Le=oe.target,{code:Ke}=oe;switch(Ke){case wt.up:case wt.down:{const ft=Ke===wt.up?-1:1;e_(wD(Le,ft,`.${l.e("suggestion-item")}[tabindex="-1"]`));break}case wt.enter:Le.click();break}},je=()=>{const oe=M.value,Le=oe[oe.length-1];a=T.value?0:a+1,!(!Le||!a||i.collapseTags&&oe.length>1)&&(Le.hitState?ve(Le):Le.hitState=!0)},at=oe=>{const Le=oe.target,Ke=l.e("search-input");Le.className===Ke&&(S.value=!0),t("focus",oe)},Ue=oe=>{S.value=!1,t("blur",oe)},qe=Lr(()=>{const{value:oe}=X;if(!oe)return;const Le=i.beforeFilter(oe);yg(Le)?Le.then(me).catch(()=>{}):Le!==!1?me():j()},i.debounce),Fe=(oe,Le)=>{!b.value&&we(!0),!(Le!=null&&Le.isComposing)&&(oe?qe():j())},Ie=oe=>Number.parseFloat(r$(c.cssVarName("input-height"),oe).value)-2;return ze(x,K),ze([ne,F,()=>i.collapseTags],ye),ze(M,()=>{vt(()=>Pe())}),ze(O,async()=>{await vt();const oe=p.value.input;o=Ie(oe)||o,Pe()}),ze(ae,fe,{immediate:!0}),Ft(()=>{const oe=p.value.input,Le=Ie(oe);o=oe.offsetHeight||Le,ti(oe,Pe)}),e({getCheckedNodes:Z,cascaderPanelRef:v,togglePopperVisible:we,contentRef:Ce}),(oe,Le)=>(k(),Re(g(Zs),{ref_key:"tooltipRef",ref:m,visible:b.value,teleported:oe.teleported,"popper-class":[g(l).e("dropdown"),oe.popperClass],"popper-options":s,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${g(l).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:oe.persistent,onHide:j},{default:pe(()=>[Bt((k(),Y("div",{class:z(g(xe)),style:pt(g(B)),onClick:Le[5]||(Le[5]=()=>we(g(H)?void 0:!0)),onKeydown:Ae,onMouseenter:Le[6]||(Le[6]=Ke=>w.value=!0),onMouseleave:Le[7]||(Le[7]=Ke=>w.value=!1)},[le(g(Ks),{ref_key:"input",ref:p,modelValue:C.value,"onUpdate:modelValue":Le[1]||(Le[1]=Ke=>C.value=Ke),placeholder:g(P),readonly:g(H),disabled:g(F),"validate-event":!1,size:g(O),class:z(g(Te)),tabindex:g(L)&&oe.filterable&&!g(F)?-1:void 0,onCompositionstart:de,onCompositionupdate:de,onCompositionend:de,onFocus:at,onBlur:Ue,onInput:Fe},{suffix:pe(()=>[g(ce)?(k(),Re(g(dt),{key:"clear",class:z([g(c).e("icon"),"icon-circle-close"]),onClick:Tt(De,["stop"])},{default:pe(()=>[le(g(mu))]),_:1},8,["class","onClick"])):(k(),Re(g(dt),{key:"arrow-down",class:z(g(he)),onClick:Le[0]||(Le[0]=Tt(Ke=>we(),["stop"]))},{default:pe(()=>[le(g(jl))]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","tabindex"]),g(L)?(k(),Y("div",{key:0,ref_key:"tagWrapper",ref:y,class:z([g(l).e("tags"),g(l).is("validate",!!g(_e))])},[(k(!0),Y(mt,null,Zt(M.value,Ke=>(k(),Re(g(Og),{key:Ke.key,type:oe.tagType,size:g(D),effect:oe.tagEffect,hit:Ke.hitState,closable:Ke.closable,"disable-transitions":"",onClose:ft=>ve(Ke)},{default:pe(()=>[Ke.isCollapseTag===!1?(k(),Y("span",tie,Je(Ke.text),1)):(k(),Re(g(Zs),{key:1,disabled:b.value||!oe.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:pe(()=>[te("span",null,Je(Ke.text),1)]),content:pe(()=>[te("div",{class:z(g(l).e("collapse-tags"))},[(k(!0),Y(mt,null,Zt(E.value.slice(oe.maxCollapseTags),(ft,Q)=>(k(),Y("div",{key:Q,class:z(g(l).e("collapse-tag"))},[(k(),Re(g(Og),{key:ft.key,class:"in-tooltip",type:oe.tagType,size:g(D),effect:oe.tagEffect,hit:ft.hitState,closable:ft.closable,"disable-transitions":"",onClose:$e=>ve(ft)},{default:pe(()=>[te("span",null,Je(ft.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128)),oe.filterable&&!g(F)?Bt((k(),Y("input",{key:0,"onUpdate:modelValue":Le[2]||(Le[2]=Ke=>T.value=Ke),type:"text",class:z(g(l).e("search-input")),placeholder:g(ae)?"":g(U),onInput:Le[3]||(Le[3]=Ke=>Fe(T.value,Ke)),onClick:Le[4]||(Le[4]=Tt(Ke=>we(!0),["stop"])),onKeydown:wn(je,["delete"]),onCompositionstart:de,onCompositionupdate:de,onCompositionend:de,onFocus:at,onBlur:Ue},null,42,nie)),[[TE,T.value]]):Ee("v-if",!0)],2)):Ee("v-if",!0)],38)),[[g(Ll),()=>we(!1),g(Ce)]])]),content:pe(()=>[Bt(le(g(hF),{ref_key:"cascaderPanelRef",ref:v,modelValue:g(re),"onUpdate:modelValue":Le[8]||(Le[8]=Ke=>Gn(re)?re.value=Ke:null),options:oe.options,props:i.props,border:!1,"render-label":oe.$slots.default,onExpandChange:$,onClose:Le[9]||(Le[9]=Ke=>oe.$nextTick(()=>we(!1)))},null,8,["modelValue","options","props","render-label"]),[[an,!x.value]]),oe.filterable?Bt((k(),Re(g(Zl),{key:0,ref_key:"suggestionPanel",ref:_,tag:"ul",class:z(g(l).e("suggestion-panel")),"view-class":g(l).e("suggestion-list"),onKeydown:We},{default:pe(()=>[A.value.length?(k(!0),Y(mt,{key:0},Zt(A.value,Ke=>(k(),Y("li",{key:Ke.uid,class:z([g(l).e("suggestion-item"),g(l).is("checked",Ke.checked)]),tabindex:-1,onClick:ft=>Ge(Ke)},[te("span",null,Je(Ke.text),1),Ke.checked?(k(),Re(g(dt),{key:0},{default:pe(()=>[le(g(Bv))]),_:1})):Ee("v-if",!0)],10,iie))),128)):ke(oe.$slots,"empty",{key:1},()=>[te("li",{class:z(g(l).e("empty-text"))},Je(g(u)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[an,x.value]]):Ee("v-if",!0)]),_:3},8,["visible","teleported","popper-class","transition","persistent"]))}});var c_=Ze(oie,[["__file","cascader.vue"]]);c_.install=n=>{n.component(c_.name,c_)};const aie=c_,lie=aie,cie=Ye({checked:Boolean,type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"}}),uie={"update:checked":n=>_i(n),[Fn]:n=>_i(n)},die=se({name:"ElCheckTag"}),hie=se({...die,props:cie,emits:uie,setup(n,{emit:e}){const t=n,i=Ve("check-tag"),s=R(()=>[i.b(),i.is("checked",t.checked),i.m(t.type||"primary")]),r=()=>{const o=!t.checked;e(Fn,o),e("update:checked",o)};return(o,a)=>(k(),Y("span",{class:z(g(s)),onClick:r},[ke(o.$slots,"default")],2))}});var fie=Ze(hie,[["__file","check-tag.vue"]]);const pie=Ht(fie),fF=Symbol("rowContextKey"),mie=["start","center","end","space-around","space-between","space-evenly"],gie=["top","middle","bottom"],vie=Ye({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:mie,default:"start"},align:{type:String,values:gie}}),yie=se({name:"ElRow"}),_ie=se({...yie,props:vie,setup(n){const e=n,t=Ve("row"),i=R(()=>e.gutter);Xt(fF,{gutter:i});const s=R(()=>{const o={};return e.gutter&&(o.marginRight=o.marginLeft=`-${e.gutter/2}px`),o}),r=R(()=>[t.b(),t.is(`justify-${e.justify}`,e.justify!=="start"),t.is(`align-${e.align}`,!!e.align)]);return(o,a)=>(k(),Re(Wt(o.tag),{class:z(g(r)),style:pt(g(s))},{default:pe(()=>[ke(o.$slots,"default")]),_:3},8,["class","style"]))}});var bie=Ze(_ie,[["__file","row.vue"]]);const wie=Ht(bie),xie=Ye({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:ge([Number,Object]),default:()=>ni({})},sm:{type:ge([Number,Object]),default:()=>ni({})},md:{type:ge([Number,Object]),default:()=>ni({})},lg:{type:ge([Number,Object]),default:()=>ni({})},xl:{type:ge([Number,Object]),default:()=>ni({})}}),Sie=se({name:"ElCol"}),Cie=se({...Sie,props:xie,setup(n){const e=n,{gutter:t}=ct(fF,{gutter:R(()=>0)}),i=Ve("col"),s=R(()=>{const o={};return t.value&&(o.paddingLeft=o.paddingRight=`${t.value/2}px`),o}),r=R(()=>{const o=[];return["span","offset","pull","push"].forEach(c=>{const u=e[c];Ct(u)&&(c==="span"?o.push(i.b(`${e[c]}`)):u>0&&o.push(i.b(`${c}-${e[c]}`)))}),["xs","sm","md","lg","xl"].forEach(c=>{Ct(e[c])?o.push(i.b(`${c}-${e[c]}`)):$t(e[c])&&Object.entries(e[c]).forEach(([u,d])=>{o.push(u!=="span"?i.b(`${c}-${u}-${d}`):i.b(`${c}-${d}`))})}),t.value&&o.push(i.is("guttered")),[i.b(),o]});return(o,a)=>(k(),Re(Wt(o.tag),{class:z(g(r)),style:pt(g(s))},{default:pe(()=>[ke(o.$slots,"default")]),_:3},8,["class","style"]))}});var Mie=Ze(Cie,[["__file","col.vue"]]);const Eie=Ht(Mie),pP=n=>Ct(n)||Rt(n)||rt(n),Tie=Ye({accordion:Boolean,modelValue:{type:ge([Array,String,Number]),default:()=>ni([])}}),Aie={[Gt]:pP,[Fn]:pP},pF=Symbol("collapseContextKey"),Iie=(n,e)=>{const t=V(Jc(n.modelValue)),i=r=>{t.value=r;const o=n.accordion?t.value[0]:t.value;e(Gt,o),e(Fn,o)},s=r=>{if(n.accordion)i([t.value[0]===r?"":r]);else{const o=[...t.value],a=o.indexOf(r);a>-1?o.splice(a,1):o.push(r),i(o)}};return ze(()=>n.modelValue,()=>t.value=Jc(n.modelValue),{deep:!0}),Xt(pF,{activeNames:t,handleItemClick:s}),{activeNames:t,setActiveNames:i}},Rie=()=>{const n=Ve("collapse");return{rootKls:R(()=>n.b())}},Pie=se({name:"ElCollapse"}),Lie=se({...Pie,props:Tie,emits:Aie,setup(n,{expose:e,emit:t}){const i=n,{activeNames:s,setActiveNames:r}=Iie(i,t),{rootKls:o}=Rie();return e({activeNames:s,setActiveNames:r}),(a,l)=>(k(),Y("div",{class:z(g(o))},[ke(a.$slots,"default")],2))}});var kie=Ze(Lie,[["__file","collapse.vue"]]);const Oie=se({name:"ElCollapseTransition"}),Die=se({...Oie,setup(n){const e=Ve("collapse-transition"),t=s=>{s.style.maxHeight="",s.style.overflow=s.dataset.oldOverflow,s.style.paddingTop=s.dataset.oldPaddingTop,s.style.paddingBottom=s.dataset.oldPaddingBottom},i={beforeEnter(s){s.dataset||(s.dataset={}),s.dataset.oldPaddingTop=s.style.paddingTop,s.dataset.oldPaddingBottom=s.style.paddingBottom,s.style.height&&(s.dataset.elExistsHeight=s.style.height),s.style.maxHeight=0,s.style.paddingTop=0,s.style.paddingBottom=0},enter(s){requestAnimationFrame(()=>{s.dataset.oldOverflow=s.style.overflow,s.dataset.elExistsHeight?s.style.maxHeight=s.dataset.elExistsHeight:s.scrollHeight!==0?s.style.maxHeight=`${s.scrollHeight}px`:s.style.maxHeight=0,s.style.paddingTop=s.dataset.oldPaddingTop,s.style.paddingBottom=s.dataset.oldPaddingBottom,s.style.overflow="hidden"})},afterEnter(s){s.style.maxHeight="",s.style.overflow=s.dataset.oldOverflow},enterCancelled(s){t(s)},beforeLeave(s){s.dataset||(s.dataset={}),s.dataset.oldPaddingTop=s.style.paddingTop,s.dataset.oldPaddingBottom=s.style.paddingBottom,s.dataset.oldOverflow=s.style.overflow,s.style.maxHeight=`${s.scrollHeight}px`,s.style.overflow="hidden"},leave(s){s.scrollHeight!==0&&(s.style.maxHeight=0,s.style.paddingTop=0,s.style.paddingBottom=0)},afterLeave(s){t(s)},leaveCancelled(s){t(s)}};return(s,r)=>(k(),Re(ji,Kt({name:g(e).b()},p6(i)),{default:pe(()=>[ke(s.$slots,"default")]),_:3},16,["name"]))}});var u_=Ze(Die,[["__file","collapse-transition.vue"]]);u_.install=n=>{n.component(u_.name,u_)};const z1=u_,Nie=z1,Fie=Ye({title:{type:String,default:""},name:{type:ge([String,Number]),default:void 0},disabled:Boolean}),Bie=n=>{const e=ct(pF),{namespace:t}=Ve("collapse"),i=V(!1),s=V(!1),r=pT(),o=R(()=>r.current++),a=R(()=>{var h;return(h=n.name)!=null?h:`${t.value}-id-${r.prefix}-${g(o)}`}),l=R(()=>e==null?void 0:e.activeNames.value.includes(g(a)));return{focusing:i,id:o,isActive:l,handleFocus:()=>{setTimeout(()=>{s.value?s.value=!1:i.value=!0},50)},handleHeaderClick:()=>{n.disabled||(e==null||e.handleItemClick(g(a)),i.value=!1,s.value=!0)},handleEnterClick:()=>{e==null||e.handleItemClick(g(a))}}},Uie=(n,{focusing:e,isActive:t,id:i})=>{const s=Ve("collapse"),r=R(()=>[s.b("item"),s.is("active",g(t)),s.is("disabled",n.disabled)]),o=R(()=>[s.be("item","header"),s.is("active",g(t)),{focusing:g(e)&&!n.disabled}]),a=R(()=>[s.be("item","arrow"),s.is("active",g(t))]),l=R(()=>s.be("item","wrap")),c=R(()=>s.be("item","content")),u=R(()=>s.b(`content-${g(i)}`)),d=R(()=>s.b(`head-${g(i)}`));return{arrowKls:a,headKls:o,rootKls:r,itemWrapperKls:l,itemContentKls:c,scopedContentId:u,scopedHeadId:d}},zie=["id","aria-expanded","aria-controls","aria-describedby","tabindex"],Hie=["id","aria-hidden","aria-labelledby"],Vie=se({name:"ElCollapseItem"}),$ie=se({...Vie,props:Fie,setup(n,{expose:e}){const t=n,{focusing:i,id:s,isActive:r,handleFocus:o,handleHeaderClick:a,handleEnterClick:l}=Bie(t),{arrowKls:c,headKls:u,rootKls:d,itemWrapperKls:h,itemContentKls:f,scopedContentId:m,scopedHeadId:p}=Uie(t,{focusing:i,isActive:r,id:s});return e({isActive:r}),(y,v)=>(k(),Y("div",{class:z(g(d))},[te("button",{id:g(p),class:z(g(u)),"aria-expanded":g(r),"aria-controls":g(m),"aria-describedby":g(m),tabindex:y.disabled?-1:0,type:"button",onClick:v[0]||(v[0]=(..._)=>g(a)&&g(a)(..._)),onKeydown:v[1]||(v[1]=wn(Tt((..._)=>g(l)&&g(l)(..._),["stop","prevent"]),["space","enter"])),onFocus:v[2]||(v[2]=(..._)=>g(o)&&g(o)(..._)),onBlur:v[3]||(v[3]=_=>i.value=!1)},[ke(y.$slots,"title",{},()=>[Yt(Je(y.title),1)]),le(g(dt),{class:z(g(c))},{default:pe(()=>[le(g(ur))]),_:1},8,["class"])],42,zie),le(g(z1),null,{default:pe(()=>[Bt(te("div",{id:g(m),role:"region",class:z(g(h)),"aria-hidden":!g(r),"aria-labelledby":g(p)},[te("div",{class:z(g(f))},[ke(y.$slots,"default")],2)],10,Hie),[[an,g(r)]])]),_:3})],2))}});var mF=Ze($ie,[["__file","collapse-item.vue"]]);const Gie=Ht(kie,{CollapseItem:mF}),Wie=si(mF),Kie=Ye({color:{type:ge(Object),required:!0},vertical:{type:Boolean,default:!1}});let dx=!1;function Dg(n,e){if(!Jt)return;const t=function(r){var o;(o=e.drag)==null||o.call(e,r)},i=function(r){var o;document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",t),document.removeEventListener("touchend",i),document.onselectstart=null,document.ondragstart=null,dx=!1,(o=e.end)==null||o.call(e,r)},s=function(r){var o;dx||(r.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",t),document.addEventListener("mouseup",i),document.addEventListener("touchmove",t),document.addEventListener("touchend",i),dx=!0,(o=e.start)==null||o.call(e,r))};n.addEventListener("mousedown",s),n.addEventListener("touchstart",s)}const Yie=n=>{const e=zt(),t=Vn(),i=Vn();function s(o){o.target!==t.value&&r(o)}function r(o){if(!i.value||!t.value)return;const l=e.vnode.el.getBoundingClientRect(),{clientX:c,clientY:u}=RE(o);if(n.vertical){let d=u-l.top;d=Math.max(t.value.offsetHeight/2,d),d=Math.min(d,l.height-t.value.offsetHeight/2),n.color.set("alpha",Math.round((d-t.value.offsetHeight/2)/(l.height-t.value.offsetHeight)*100))}else{let d=c-l.left;d=Math.max(t.value.offsetWidth/2,d),d=Math.min(d,l.width-t.value.offsetWidth/2),n.color.set("alpha",Math.round((d-t.value.offsetWidth/2)/(l.width-t.value.offsetWidth)*100))}}return{thumb:t,bar:i,handleDrag:r,handleClick:s}},Xie=(n,{bar:e,thumb:t,handleDrag:i})=>{const s=zt(),r=Ve("color-alpha-slider"),o=V(0),a=V(0),l=V();function c(){if(!t.value||n.vertical)return 0;const _=s.vnode.el,b=n.color.get("alpha");return _?Math.round(b*(_.offsetWidth-t.value.offsetWidth/2)/100):0}function u(){if(!t.value)return 0;const _=s.vnode.el;if(!n.vertical)return 0;const b=n.color.get("alpha");return _?Math.round(b*(_.offsetHeight-t.value.offsetHeight/2)/100):0}function d(){if(n.color&&n.color.value){const{r:_,g:b,b:w}=n.color.toRgb();return`linear-gradient(to right, rgba(${_}, ${b}, ${w}, 0) 0%, rgba(${_}, ${b}, ${w}, 1) 100%)`}return""}function h(){o.value=c(),a.value=u(),l.value=d()}Ft(()=>{if(!e.value||!t.value)return;const _={drag:b=>{i(b)},end:b=>{i(b)}};Dg(e.value,_),Dg(t.value,_),h()}),ze(()=>n.color.get("alpha"),()=>h()),ze(()=>n.color.value,()=>h());const f=R(()=>[r.b(),r.is("vertical",n.vertical)]),m=R(()=>r.e("bar")),p=R(()=>r.e("thumb")),y=R(()=>({background:l.value})),v=R(()=>({left:pi(o.value),top:pi(a.value)}));return{rootKls:f,barKls:m,barStyle:y,thumbKls:p,thumbStyle:v,update:h}},jie="ElColorAlphaSlider",qie=se({name:jie}),Zie=se({...qie,props:Kie,setup(n,{expose:e}){const t=n,{bar:i,thumb:s,handleDrag:r,handleClick:o}=Yie(t),{rootKls:a,barKls:l,barStyle:c,thumbKls:u,thumbStyle:d,update:h}=Xie(t,{bar:i,thumb:s,handleDrag:r});return e({update:h,bar:i,thumb:s}),(f,m)=>(k(),Y("div",{class:z(g(a))},[te("div",{ref_key:"bar",ref:i,class:z(g(l)),style:pt(g(c)),onClick:m[0]||(m[0]=(...p)=>g(o)&&g(o)(...p))},null,6),te("div",{ref_key:"thumb",ref:s,class:z(g(u)),style:pt(g(d))},null,6)],2))}});var Jie=Ze(Zie,[["__file","alpha-slider.vue"]]);const Qie=se({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(n){const e=Ve("color-hue-slider"),t=zt(),i=V(),s=V(),r=V(0),o=V(0),a=R(()=>n.color.get("hue"));ze(()=>a.value,()=>{h()});function l(f){f.target!==i.value&&c(f)}function c(f){if(!s.value||!i.value)return;const p=t.vnode.el.getBoundingClientRect(),{clientX:y,clientY:v}=RE(f);let _;if(n.vertical){let b=v-p.top;b=Math.min(b,p.height-i.value.offsetHeight/2),b=Math.max(i.value.offsetHeight/2,b),_=Math.round((b-i.value.offsetHeight/2)/(p.height-i.value.offsetHeight)*360)}else{let b=y-p.left;b=Math.min(b,p.width-i.value.offsetWidth/2),b=Math.max(i.value.offsetWidth/2,b),_=Math.round((b-i.value.offsetWidth/2)/(p.width-i.value.offsetWidth)*360)}n.color.set("hue",_)}function u(){if(!i.value)return 0;const f=t.vnode.el;if(n.vertical)return 0;const m=n.color.get("hue");return f?Math.round(m*(f.offsetWidth-i.value.offsetWidth/2)/360):0}function d(){if(!i.value)return 0;const f=t.vnode.el;if(!n.vertical)return 0;const m=n.color.get("hue");return f?Math.round(m*(f.offsetHeight-i.value.offsetHeight/2)/360):0}function h(){r.value=u(),o.value=d()}return Ft(()=>{if(!s.value||!i.value)return;const f={drag:m=>{c(m)},end:m=>{c(m)}};Dg(s.value,f),Dg(i.value,f),h()}),{bar:s,thumb:i,thumbLeft:r,thumbTop:o,hueValue:a,handleClick:l,update:h,ns:e}}});function ese(n,e,t,i,s,r){return k(),Y("div",{class:z([n.ns.b(),n.ns.is("vertical",n.vertical)])},[te("div",{ref:"bar",class:z(n.ns.e("bar")),onClick:e[0]||(e[0]=(...o)=>n.handleClick&&n.handleClick(...o))},null,2),te("div",{ref:"thumb",class:z(n.ns.e("thumb")),style:pt({left:n.thumbLeft+"px",top:n.thumbTop+"px"})},null,6)],2)}var tse=Ze(Qie,[["render",ese],["__file","hue-slider.vue"]]);const nse=Ye({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:Zi,popperClass:{type:String,default:""},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},teleported:rs.teleported,predefine:{type:ge(Array)},validateEvent:{type:Boolean,default:!0},...Ss(["ariaLabel"])}),ise={[Gt]:n=>Rt(n)||os(n),[Fn]:n=>Rt(n)||os(n),activeChange:n=>Rt(n)||os(n),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent},gF=Symbol("colorPickerContextKey"),mP=function(n,e,t){return[n,e*t/((n=(2-e)*t)<1?n:2-n)||0,n/2]},sse=function(n){return typeof n=="string"&&n.includes(".")&&Number.parseFloat(n)===1},rse=function(n){return typeof n=="string"&&n.includes("%")},Rf=function(n,e){sse(n)&&(n="100%");const t=rse(n);return n=Math.min(e,Math.max(0,Number.parseFloat(`${n}`))),t&&(n=Number.parseInt(`${n*e}`,10)/100),Math.abs(n-e)<1e-6?1:n%e/Number.parseFloat(e)},gP={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},d_=n=>{n=Math.min(Math.round(n),255);const e=Math.floor(n/16),t=n%16;return`${gP[e]||e}${gP[t]||t}`},vP=function({r:n,g:e,b:t}){return Number.isNaN(+n)||Number.isNaN(+e)||Number.isNaN(+t)?"":`#${d_(n)}${d_(e)}${d_(t)}`},hx={A:10,B:11,C:12,D:13,E:14,F:15},Mu=function(n){return n.length===2?(hx[n[0].toUpperCase()]||+n[0])*16+(hx[n[1].toUpperCase()]||+n[1]):hx[n[1].toUpperCase()]||+n[1]},ose=function(n,e,t){e=e/100,t=t/100;let i=e;const s=Math.max(t,.01);t*=2,e*=t<=1?t:2-t,i*=s<=1?s:2-s;const r=(t+e)/2,o=t===0?2*i/(s+i):2*e/(t+e);return{h:n,s:o*100,v:r*100}},yP=(n,e,t)=>{n=Rf(n,255),e=Rf(e,255),t=Rf(t,255);const i=Math.max(n,e,t),s=Math.min(n,e,t);let r;const o=i,a=i-s,l=i===0?0:a/i;if(i===s)r=0;else{switch(i){case n:{r=(e-t)/a+(e<t?6:0);break}case e:{r=(t-n)/a+2;break}case t:{r=(n-e)/a+4;break}}r/=6}return{h:r*360,s:l*100,v:o*100}},Yp=function(n,e,t){n=Rf(n,360)*6,e=Rf(e,100),t=Rf(t,100);const i=Math.floor(n),s=n-i,r=t*(1-e),o=t*(1-s*e),a=t*(1-(1-s)*e),l=i%6,c=[t,o,r,r,a,t][l],u=[a,t,t,o,r,r][l],d=[r,r,a,t,t,o][l];return{r:Math.round(c*255),g:Math.round(u*255),b:Math.round(d*255)}};let qm=class{constructor(e={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const t in e)Qt(e,t)&&(this[t]=e[t]);e.value?this.fromString(e.value):this.doOnChange()}set(e,t){if(arguments.length===1&&typeof e=="object"){for(const i in e)Qt(e,i)&&this.set(i,e[i]);return}this[`_${e}`]=t,this.doOnChange()}get(e){return e==="alpha"?Math.floor(this[`_${e}`]):this[`_${e}`]}toRgb(){return Yp(this._hue,this._saturation,this._value)}fromString(e){if(!e){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const t=(i,s,r)=>{this._hue=Math.max(0,Math.min(360,i)),this._saturation=Math.max(0,Math.min(100,s)),this._value=Math.max(0,Math.min(100,r)),this.doOnChange()};if(e.includes("hsl")){const i=e.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(s=>s!=="").map((s,r)=>r>2?Number.parseFloat(s):Number.parseInt(s,10));if(i.length===4?this._alpha=Number.parseFloat(i[3])*100:i.length===3&&(this._alpha=100),i.length>=3){const{h:s,s:r,v:o}=ose(i[0],i[1],i[2]);t(s,r,o)}}else if(e.includes("hsv")){const i=e.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(s=>s!=="").map((s,r)=>r>2?Number.parseFloat(s):Number.parseInt(s,10));i.length===4?this._alpha=Number.parseFloat(i[3])*100:i.length===3&&(this._alpha=100),i.length>=3&&t(i[0],i[1],i[2])}else if(e.includes("rgb")){const i=e.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(s=>s!=="").map((s,r)=>r>2?Number.parseFloat(s):Number.parseInt(s,10));if(i.length===4?this._alpha=Number.parseFloat(i[3])*100:i.length===3&&(this._alpha=100),i.length>=3){const{h:s,s:r,v:o}=yP(i[0],i[1],i[2]);t(s,r,o)}}else if(e.includes("#")){const i=e.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(i))return;let s,r,o;i.length===3?(s=Mu(i[0]+i[0]),r=Mu(i[1]+i[1]),o=Mu(i[2]+i[2])):(i.length===6||i.length===8)&&(s=Mu(i.slice(0,2)),r=Mu(i.slice(2,4)),o=Mu(i.slice(4,6))),i.length===8?this._alpha=Mu(i.slice(6))/255*100:(i.length===3||i.length===6)&&(this._alpha=100);const{h:a,s:l,v:c}=yP(s,r,o);t(a,l,c)}}compare(e){return Math.abs(e._hue-this._hue)<2&&Math.abs(e._saturation-this._saturation)<1&&Math.abs(e._value-this._value)<1&&Math.abs(e._alpha-this._alpha)<1}doOnChange(){const{_hue:e,_saturation:t,_value:i,_alpha:s,format:r}=this;if(this.enableAlpha)switch(r){case"hsl":{const o=mP(e,t/100,i/100);this.value=`hsla(${e}, ${Math.round(o[1]*100)}%, ${Math.round(o[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${e}, ${Math.round(t)}%, ${Math.round(i)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${vP(Yp(e,t,i))}${d_(s*255/100)}`;break}default:{const{r:o,g:a,b:l}=Yp(e,t,i);this.value=`rgba(${o}, ${a}, ${l}, ${this.get("alpha")/100})`}}else switch(r){case"hsl":{const o=mP(e,t/100,i/100);this.value=`hsl(${e}, ${Math.round(o[1]*100)}%, ${Math.round(o[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${e}, ${Math.round(t)}%, ${Math.round(i)}%)`;break}case"rgb":{const{r:o,g:a,b:l}=Yp(e,t,i);this.value=`rgb(${o}, ${a}, ${l})`;break}default:this.value=vP(Yp(e,t,i))}}};const ase=se({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0}},setup(n){const e=Ve("color-predefine"),{currentColor:t}=ct(gF),i=V(r(n.colors,n.color));ze(()=>t.value,o=>{const a=new qm;a.fromString(o),i.value.forEach(l=>{l.selected=a.compare(l)})}),Is(()=>{i.value=r(n.colors,n.color)});function s(o){n.color.fromString(n.colors[o])}function r(o,a){return o.map(l=>{const c=new qm;return c.enableAlpha=n.enableAlpha,c.format="rgba",c.fromString(l),c.selected=c.value===a.value,c})}return{rgbaColors:i,handleSelect:s,ns:e}}}),lse=["onClick"];function cse(n,e,t,i,s,r){return k(),Y("div",{class:z(n.ns.b())},[te("div",{class:z(n.ns.e("colors"))},[(k(!0),Y(mt,null,Zt(n.rgbaColors,(o,a)=>(k(),Y("div",{key:n.colors[a],class:z([n.ns.e("color-selector"),n.ns.is("alpha",o._alpha<100),{selected:o.selected}]),onClick:l=>n.handleSelect(a)},[te("div",{style:pt({backgroundColor:o.value})},null,4)],10,lse))),128))],2)],2)}var use=Ze(ase,[["render",cse],["__file","predefine.vue"]]);const dse=se({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(n){const e=Ve("color-svpanel"),t=zt(),i=V(0),s=V(0),r=V("hsl(0, 100%, 50%)"),o=R(()=>{const c=n.color.get("hue"),u=n.color.get("value");return{hue:c,value:u}});function a(){const c=n.color.get("saturation"),u=n.color.get("value"),d=t.vnode.el,{clientWidth:h,clientHeight:f}=d;s.value=c*h/100,i.value=(100-u)*f/100,r.value=`hsl(${n.color.get("hue")}, 100%, 50%)`}function l(c){const d=t.vnode.el.getBoundingClientRect(),{clientX:h,clientY:f}=RE(c);let m=h-d.left,p=f-d.top;m=Math.max(0,m),m=Math.min(m,d.width),p=Math.max(0,p),p=Math.min(p,d.height),s.value=m,i.value=p,n.color.set({saturation:m/d.width*100,value:100-p/d.height*100})}return ze(()=>o.value,()=>{a()}),Ft(()=>{Dg(t.vnode.el,{drag:c=>{l(c)},end:c=>{l(c)}}),a()}),{cursorTop:i,cursorLeft:s,background:r,colorValue:o,handleDrag:l,update:a,ns:e}}}),hse=te("div",null,null,-1),fse=[hse];function pse(n,e,t,i,s,r){return k(),Y("div",{class:z(n.ns.b()),style:pt({backgroundColor:n.background})},[te("div",{class:z(n.ns.e("white"))},null,2),te("div",{class:z(n.ns.e("black"))},null,2),te("div",{class:z(n.ns.e("cursor")),style:pt({top:n.cursorTop+"px",left:n.cursorLeft+"px"})},fse,6)],6)}var mse=Ze(dse,[["render",pse],["__file","sv-panel.vue"]]);const gse=["onKeydown"],vse=["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex"],yse=se({name:"ElColorPicker"}),_se=se({...yse,props:nse,emits:ise,setup(n,{expose:e,emit:t}){const i=n,{t:s}=en(),r=Ve("color"),{formItem:o}=Qs(),a=Hi(),l=mr(),{inputId:c,isLabeledByFormItem:u}=ca(i,{formItemContext:o}),d=V(),h=V(),f=V(),m=V(),p=V(),y=V(),{isFocused:v,handleFocus:_,handleBlur:b}=O1(p,{beforeBlur(Ce){var we;return(we=m.value)==null?void 0:we.isFocusInsideContent(Ce)},afterBlur(){P(!1),H()}}),w=Ce=>{if(l.value)return Te();_(Ce)};let x=!0;const S=un(new qm({enableAlpha:i.showAlpha,format:i.colorFormat||"",value:i.modelValue})),C=V(!1),T=V(!1),M=V(""),E=R(()=>!i.modelValue&&!T.value?"transparent":U(S,i.showAlpha)),A=R(()=>!i.modelValue&&!T.value?"":S.value),I=R(()=>u.value?void 0:i.label||i.ariaLabel||s("el.colorpicker.defaultLabel"));ns({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-color-picker",ref:"https://element-plus.org/en-US/component/color-picker.html"},R(()=>!!i.label));const B=R(()=>u.value?o==null?void 0:o.labelId:void 0),F=R(()=>[r.b("picker"),r.is("disabled",l.value),r.bm("picker",a.value),r.is("focused",v.value)]);function U(Ce,we){if(!(Ce instanceof qm))throw new TypeError("color should be instance of _color Class");const{r:K,g:j,b:ie}=Ce.toRgb();return we?`rgba(${K}, ${j}, ${ie}, ${Ce.get("alpha")/100})`:`rgb(${K}, ${j}, ${ie})`}function P(Ce){C.value=Ce}const O=Lr(P,100,{leading:!0});function D(){l.value||P(!0)}function L(){O(!1),H()}function H(){vt(()=>{i.modelValue?S.fromString(i.modelValue):(S.value="",vt(()=>{T.value=!1}))})}function X(){l.value||O(!C.value)}function ne(){S.fromString(M.value)}function ce(){const Ce=S.value;t(Gt,Ce),t("change",Ce),i.validateEvent&&(o==null||o.validate("change").catch(we=>void 0)),O(!1),vt(()=>{const we=new qm({enableAlpha:i.showAlpha,format:i.colorFormat||"",value:i.modelValue});S.compare(we)||H()})}function ae(){O(!1),t(Gt,null),t("change",null),i.modelValue!==null&&i.validateEvent&&(o==null||o.validate("change").catch(Ce=>void 0)),H()}function _e(Ce){if(C.value&&(L(),v.value)){const we=new FocusEvent("focus",Ce);b(we)}}function re(Ce){Ce.preventDefault(),Ce.stopPropagation(),P(!1),H()}function xe(Ce){switch(Ce.code){case wt.enter:case wt.space:Ce.preventDefault(),Ce.stopPropagation(),D(),y.value.focus();break;case wt.esc:re(Ce);break}}function he(){p.value.focus()}function Te(){p.value.blur()}return Ft(()=>{i.modelValue&&(M.value=A.value)}),ze(()=>i.modelValue,Ce=>{Ce?Ce&&Ce!==S.value&&(x=!1,S.fromString(Ce)):T.value=!1}),ze(()=>A.value,Ce=>{M.value=Ce,x&&t("activeChange",Ce),x=!0}),ze(()=>S.value,()=>{!i.modelValue&&!T.value&&(T.value=!0)}),ze(()=>C.value,()=>{vt(()=>{var Ce,we,K;(Ce=d.value)==null||Ce.update(),(we=h.value)==null||we.update(),(K=f.value)==null||K.update()})}),Xt(gF,{currentColor:A}),e({color:S,show:D,hide:L,focus:he,blur:Te}),(Ce,we)=>(k(),Re(g(Zs),{ref_key:"popper",ref:m,visible:C.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[g(r).be("picker","panel"),g(r).b("dropdown"),Ce.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",teleported:Ce.teleported,transition:`${g(r).namespace.value}-zoom-in-top`,persistent:"",onHide:we[2]||(we[2]=K=>P(!1))},{content:pe(()=>[Bt((k(),Y("div",{onKeydown:wn(re,["esc"])},[te("div",{class:z(g(r).be("dropdown","main-wrapper"))},[le(tse,{ref_key:"hue",ref:d,class:"hue-slider",color:g(S),vertical:""},null,8,["color"]),le(mse,{ref_key:"sv",ref:h,color:g(S)},null,8,["color"])],2),Ce.showAlpha?(k(),Re(Jie,{key:0,ref_key:"alpha",ref:f,color:g(S)},null,8,["color"])):Ee("v-if",!0),Ce.predefine?(k(),Re(use,{key:1,ref:"predefine","enable-alpha":Ce.showAlpha,color:g(S),colors:Ce.predefine},null,8,["enable-alpha","color","colors"])):Ee("v-if",!0),te("div",{class:z(g(r).be("dropdown","btns"))},[te("span",{class:z(g(r).be("dropdown","value"))},[le(g(Ks),{ref_key:"inputRef",ref:y,modelValue:M.value,"onUpdate:modelValue":we[0]||(we[0]=K=>M.value=K),"validate-event":!1,size:"small",onKeyup:wn(ne,["enter"]),onBlur:ne},null,8,["modelValue","onKeyup"])],2),le(g(as),{class:z(g(r).be("dropdown","link-btn")),text:"",size:"small",onClick:ae},{default:pe(()=>[Yt(Je(g(s)("el.colorpicker.clear")),1)]),_:1},8,["class"]),le(g(as),{plain:"",size:"small",class:z(g(r).be("dropdown","btn")),onClick:ce},{default:pe(()=>[Yt(Je(g(s)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,gse)),[[g(Ll),_e]])]),default:pe(()=>[te("div",Kt({id:g(c),ref_key:"triggerRef",ref:p},Ce.$attrs,{class:g(F),role:"button","aria-label":g(I),"aria-labelledby":g(B),"aria-description":g(s)("el.colorpicker.description",{color:Ce.modelValue||""}),"aria-disabled":g(l),tabindex:g(l)?-1:Ce.tabindex,onKeydown:xe,onFocus:w,onBlur:we[1]||(we[1]=(...K)=>g(b)&&g(b)(...K))}),[g(l)?(k(),Y("div",{key:0,class:z(g(r).be("picker","mask"))},null,2)):Ee("v-if",!0),te("div",{class:z(g(r).be("picker","trigger")),onClick:X},[te("span",{class:z([g(r).be("picker","color"),g(r).is("alpha",Ce.showAlpha)])},[te("span",{class:z(g(r).be("picker","color-inner")),style:pt({backgroundColor:g(E)})},[Bt(le(g(dt),{class:z([g(r).be("picker","icon"),g(r).is("icon-arrow-down")])},{default:pe(()=>[le(g(jl))]),_:1},8,["class"]),[[an,Ce.modelValue||T.value]]),Bt(le(g(dt),{class:z([g(r).be("picker","empty"),g(r).is("icon-close")])},{default:pe(()=>[le(g(ia))]),_:1},8,["class"]),[[an,!Ce.modelValue&&!T.value]])],6)],2)],2)],16,vse)]),_:1},8,["visible","popper-class","teleported","transition"]))}});var bse=Ze(_se,[["__file","color-picker.vue"]]);const wse=Ht(bse),xse=se({name:"ElContainer"}),Sse=se({...xse,props:{direction:{type:String}},setup(n){const e=n,t=hs(),i=Ve("container"),s=R(()=>e.direction==="vertical"?!0:e.direction==="horizontal"?!1:t&&t.default?t.default().some(o=>{const a=o.type.name;return a==="ElHeader"||a==="ElFooter"}):!1);return(r,o)=>(k(),Y("section",{class:z([g(i).b(),g(i).is("vertical",g(s))])},[ke(r.$slots,"default")],2))}});var Cse=Ze(Sse,[["__file","container.vue"]]);const Mse=se({name:"ElAside"}),Ese=se({...Mse,props:{width:{type:String,default:null}},setup(n){const e=n,t=Ve("aside"),i=R(()=>e.width?t.cssVarBlock({width:e.width}):{});return(s,r)=>(k(),Y("aside",{class:z(g(t).b()),style:pt(g(i))},[ke(s.$slots,"default")],6))}});var vF=Ze(Ese,[["__file","aside.vue"]]);const Tse=se({name:"ElFooter"}),Ase=se({...Tse,props:{height:{type:String,default:null}},setup(n){const e=n,t=Ve("footer"),i=R(()=>e.height?t.cssVarBlock({height:e.height}):{});return(s,r)=>(k(),Y("footer",{class:z(g(t).b()),style:pt(g(i))},[ke(s.$slots,"default")],6))}});var yF=Ze(Ase,[["__file","footer.vue"]]);const Ise=se({name:"ElHeader"}),Rse=se({...Ise,props:{height:{type:String,default:null}},setup(n){const e=n,t=Ve("header"),i=R(()=>e.height?t.cssVarBlock({height:e.height}):{});return(s,r)=>(k(),Y("header",{class:z(g(t).b()),style:pt(g(i))},[ke(s.$slots,"default")],6))}});var _F=Ze(Rse,[["__file","header.vue"]]);const Pse=se({name:"ElMain"}),Lse=se({...Pse,setup(n){const e=Ve("main");return(t,i)=>(k(),Y("main",{class:z(g(e).b())},[ke(t.$slots,"default")],2))}});var bF=Ze(Lse,[["__file","main.vue"]]);const kse=Ht(Cse,{Aside:vF,Footer:yF,Header:_F,Main:bF}),Ose=si(vF),Dse=si(yF),Nse=si(_F),Fse=si(bF);var wF={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Jl,function(){return function(t,i){var s=i.prototype,r=s.format;s.format=function(o){var a=this,l=this.$locale();if(!this.isValid())return r.bind(this)(o);var c=this.$utils(),u=(o||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(d){switch(d){case"Q":return Math.ceil((a.$M+1)/3);case"Do":return l.ordinal(a.$D);case"gggg":return a.weekYear();case"GGGG":return a.isoWeekYear();case"wo":return l.ordinal(a.week(),"W");case"w":case"ww":return c.s(a.week(),d==="w"?1:2,"0");case"W":case"WW":return c.s(a.isoWeek(),d==="W"?1:2,"0");case"k":case"kk":return c.s(String(a.$H===0?24:a.$H),d==="k"?1:2,"0");case"X":return Math.floor(a.$d.getTime()/1e3);case"x":return a.$d.getTime();case"z":return"["+a.offsetName()+"]";case"zzz":return"["+a.offsetName("long")+"]";default:return d}});return r.bind(this)(u)}}})})(wF);var Bse=wF.exports;const Use=Xa(Bse);var xF={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Jl,function(){var t="week",i="year";return function(s,r,o){var a=r.prototype;a.week=function(l){if(l===void 0&&(l=null),l!==null)return this.add(7*(l-this.week()),"day");var c=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var u=o(this).startOf(i).add(1,i).date(c),d=o(this).endOf(t);if(u.isBefore(d))return 1}var h=o(this).startOf(i).date(c).startOf(t).subtract(1,"millisecond"),f=this.diff(h,t,!0);return f<0?o(this).startOf("week").week():Math.ceil(f)},a.weeks=function(l){return l===void 0&&(l=null),this.week(l)}}})})(xF);var zse=xF.exports;const Hse=Xa(zse);var SF={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Jl,function(){return function(t,i){i.prototype.weekYear=function(){var s=this.month(),r=this.week(),o=this.year();return r===1&&s===11?o+1:s===0&&r>=52?o-1:o}}})})(SF);var Vse=SF.exports;const $se=Xa(Vse);var CF={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Jl,function(){return function(t,i,s){i.prototype.dayOfYear=function(r){var o=Math.round((s(this).startOf("day")-s(this).startOf("year"))/864e5)+1;return r==null?o:this.add(r-o,"day")}}})})(CF);var Gse=CF.exports;const Wse=Xa(Gse);var MF={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Jl,function(){return function(t,i){i.prototype.isSameOrAfter=function(s,r){return this.isSame(s,r)||this.isAfter(s,r)}}})})(MF);var Kse=MF.exports;const Yse=Xa(Kse);var EF={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Jl,function(){return function(t,i){i.prototype.isSameOrBefore=function(s,r){return this.isSame(s,r)||this.isBefore(s,r)}}})})(EF);var Xse=EF.exports;const jse=Xa(Xse),PT=Symbol(),qse=Ye({...IT,type:{type:ge(String),default:"date"}}),Zse=["date","dates","year","years","month","months","week","range"],LT=Ye({disabledDate:{type:ge(Function)},date:{type:ge(Object),required:!0},minDate:{type:ge(Object)},maxDate:{type:ge(Object)},parsedValue:{type:ge([Object,Array])},rangeState:{type:ge(Object),default:()=>({endDate:null,selecting:!1})}}),TF=Ye({type:{type:ge(String),required:!0,values:bX},dateFormat:String,timeFormat:String}),AF=Ye({unlinkPanels:Boolean,parsedValue:{type:ge(Array)}}),kT=n=>({type:String,values:Zse,default:n}),Jse=Ye({...TF,parsedValue:{type:ge([Object,Array])},visible:{type:Boolean},format:{type:String,default:""}}),Qse=Ye({...LT,cellClassName:{type:ge(Function)},showWeekNumber:Boolean,selectionMode:kT("date")}),ere=["changerange","pick","select"],HC=n=>{if(!rt(n))return!1;const[e,t]=n;return Vt.isDayjs(e)&&Vt.isDayjs(t)&&e.isSameOrBefore(t)},IF=(n,{lang:e,unit:t,unlinkPanels:i})=>{let s;if(rt(n)){let[r,o]=n.map(a=>Vt(a).locale(e));return i||(o=r.add(1,t)),[r,o]}else n?s=Vt(n):s=Vt();return s=s.locale(e),[s,s.add(1,t)]},tre=(n,e,{columnIndexOffset:t,startDate:i,nextEndDate:s,now:r,unit:o,relativeDateGetter:a,setCellMetadata:l,setRowMetadata:c})=>{for(let u=0;u<n.row;u++){const d=e[u];for(let h=0;h<n.column;h++){let f=d[h+t];f||(f={row:u,column:h,type:"normal",inRange:!1,start:!1,end:!1});const m=u*n.column+h,p=a(m);f.dayjs=p,f.date=p.toDate(),f.timestamp=p.valueOf(),f.type="normal",f.inRange=!!(i&&p.isSameOrAfter(i,o)&&s&&p.isSameOrBefore(s,o))||!!(i&&p.isSameOrBefore(i,o)&&s&&p.isSameOrAfter(s,o)),i!=null&&i.isSameOrAfter(s)?(f.start=!!s&&p.isSame(s,o),f.end=i&&p.isSame(i,o)):(f.start=!!i&&p.isSame(i,o),f.end=!!s&&p.isSame(s,o)),p.isSame(r,o)&&(f.type="today"),l==null||l(f,{rowIndex:u,columnIndex:h}),d[h+t]=f}c==null||c(d)}},VC=(n="")=>["normal","today"].includes(n),nre=(n,e)=>{const{lang:t}=en(),i=V(),s=V(),r=V(),o=V(),a=V([[],[],[],[],[],[]]);let l=!1;const c=n.date.$locale().weekStart||7,u=n.date.locale("en").localeData().weekdaysShort().map(L=>L.toLowerCase()),d=R(()=>c>3?7-c:-c),h=R(()=>{const L=n.date.startOf("month");return L.subtract(L.day()||7,"day")}),f=R(()=>u.concat(u).slice(c,c+7)),m=R(()=>HD(g(w)).some(L=>L.isCurrent)),p=R(()=>{const L=n.date.startOf("month"),H=L.day()||7,X=L.daysInMonth(),ne=L.subtract(1,"month").daysInMonth();return{startOfMonthDay:H,dateCountOfMonth:X,dateCountOfLastMonth:ne}}),y=R(()=>n.selectionMode==="dates"?Vs(n.parsedValue):[]),v=(L,{count:H,rowIndex:X,columnIndex:ne})=>{const{startOfMonthDay:ce,dateCountOfMonth:ae,dateCountOfLastMonth:_e}=g(p),re=g(d);if(X>=0&&X<=1){const xe=ce+re<0?7+ce+re:ce+re;if(ne+X*7>=xe)return L.text=H,!0;L.text=_e-(xe-ne%7)+1+X*7,L.type="prev-month"}else return H<=ae?L.text=H:(L.text=H-ae,L.type="next-month"),!0;return!1},_=(L,{columnIndex:H,rowIndex:X},ne)=>{const{disabledDate:ce,cellClassName:ae}=n,_e=g(y),re=v(L,{count:ne,rowIndex:X,columnIndex:H}),xe=L.dayjs.toDate();return L.selected=_e.find(he=>he.isSame(L.dayjs,"day")),L.isSelected=!!L.selected,L.isCurrent=S(L),L.disabled=ce==null?void 0:ce(xe),L.customClass=ae==null?void 0:ae(xe),re},b=L=>{if(n.selectionMode==="week"){const[H,X]=n.showWeekNumber?[1,7]:[0,6],ne=D(L[H+1]);L[H].inRange=ne,L[H].start=ne,L[X].inRange=ne,L[X].end=ne}},w=R(()=>{const{minDate:L,maxDate:H,rangeState:X,showWeekNumber:ne}=n,ce=g(d),ae=g(a),_e="day";let re=1;if(ne)for(let xe=0;xe<6;xe++)ae[xe][0]||(ae[xe][0]={type:"week",text:g(h).add(xe*7+1,_e).week()});return tre({row:6,column:7},ae,{startDate:L,columnIndexOffset:ne?1:0,nextEndDate:X.endDate||H||X.selecting&&L||null,now:Vt().locale(g(t)).startOf(_e),unit:_e,relativeDateGetter:xe=>g(h).add(xe-ce,_e),setCellMetadata:(...xe)=>{_(...xe,re)&&(re+=1)},setRowMetadata:b}),ae});ze(()=>n.date,async()=>{var L;(L=g(i))!=null&&L.contains(document.activeElement)&&(await vt(),await x())});const x=async()=>{var L;return(L=g(s))==null?void 0:L.focus()},S=L=>n.selectionMode==="date"&&VC(L.type)&&C(L,n.parsedValue),C=(L,H)=>H?Vt(H).locale(g(t)).isSame(n.date.date(Number(L.text)),"day"):!1,T=(L,H)=>{const X=L*7+(H-(n.showWeekNumber?1:0))-g(d);return g(h).add(X,"day")},M=L=>{var H;if(!n.rangeState.selecting)return;let X=L.target;if(X.tagName==="SPAN"&&(X=(H=X.parentNode)==null?void 0:H.parentNode),X.tagName==="DIV"&&(X=X.parentNode),X.tagName!=="TD")return;const ne=X.parentNode.rowIndex-1,ce=X.cellIndex;g(w)[ne][ce].disabled||(ne!==g(r)||ce!==g(o))&&(r.value=ne,o.value=ce,e("changerange",{selecting:!0,endDate:T(ne,ce)}))},E=L=>!g(m)&&(L==null?void 0:L.text)===1&&L.type==="normal"||L.isCurrent,A=L=>{l||g(m)||n.selectionMode!=="date"||O(L,!0)},I=L=>{L.target.closest("td")&&(l=!0)},B=L=>{L.target.closest("td")&&(l=!1)},F=L=>{!n.rangeState.selecting||!n.minDate?(e("pick",{minDate:L,maxDate:null}),e("select",!0)):(L>=n.minDate?e("pick",{minDate:n.minDate,maxDate:L}):e("pick",{minDate:L,maxDate:n.minDate}),e("select",!1))},U=L=>{const H=L.week(),X=`${L.year()}w${H}`;e("pick",{year:L.year(),week:H,value:X,date:L.startOf("week")})},P=(L,H)=>{const X=H?Vs(n.parsedValue).filter(ne=>(ne==null?void 0:ne.valueOf())!==L.valueOf()):Vs(n.parsedValue).concat([L]);e("pick",X)},O=(L,H=!1)=>{const X=L.target.closest("td");if(!X)return;const ne=X.parentNode.rowIndex-1,ce=X.cellIndex,ae=g(w)[ne][ce];if(ae.disabled||ae.type==="week")return;const _e=T(ne,ce);switch(n.selectionMode){case"range":{F(_e);break}case"date":{e("pick",_e,H);break}case"week":{U(_e);break}case"dates":{P(_e,!!ae.selected);break}}},D=L=>{if(n.selectionMode!=="week")return!1;let H=n.date.startOf("day");if(L.type==="prev-month"&&(H=H.subtract(1,"month")),L.type==="next-month"&&(H=H.add(1,"month")),H=H.date(Number.parseInt(L.text,10)),n.parsedValue&&!Array.isArray(n.parsedValue)){const X=(n.parsedValue.day()-c+7)%7-1;return n.parsedValue.subtract(X,"day").isSame(H,"day")}return!1};return{WEEKS:f,rows:w,tbodyRef:i,currentCellRef:s,focus:x,isCurrent:S,isWeekActive:D,isSelectedCell:E,handlePickDate:O,handleMouseUp:B,handleMouseDown:I,handleMouseMove:M,handleFocus:A}},ire=(n,{isCurrent:e,isWeekActive:t})=>{const i=Ve("date-table"),{t:s}=en(),r=R(()=>[i.b(),{"is-week-mode":n.selectionMode==="week"}]),o=R(()=>s("el.datepicker.dateTablePrompt")),a=R(()=>s("el.datepicker.week"));return{tableKls:r,tableLabel:o,weekLabel:a,getCellClasses:u=>{const d=[];return VC(u.type)&&!u.disabled?(d.push("available"),u.type==="today"&&d.push("today")):d.push(u.type),e(u)&&d.push("current"),u.inRange&&(VC(u.type)||n.selectionMode==="week")&&(d.push("in-range"),u.start&&d.push("start-date"),u.end&&d.push("end-date")),u.disabled&&d.push("disabled"),u.selected&&d.push("selected"),u.customClass&&d.push(u.customClass),d.join(" ")},getRowKls:u=>[i.e("row"),{current:t(u)}],t:s}},sre=Ye({cell:{type:ge(Object)}});var rre=se({name:"ElDatePickerCell",props:sre,setup(n){const e=Ve("date-table-cell"),{slots:t}=ct(PT);return()=>{const{cell:i}=n;return ke(t,"default",{...i},()=>[le("div",{class:e.b()},[le("span",{class:e.e("text")},[i==null?void 0:i.text])])])}}});const ore=["aria-label"],are={key:0,scope:"col"},lre=["aria-label"],cre=["aria-current","aria-selected","tabindex"],ure=se({__name:"basic-date-table",props:Qse,emits:ere,setup(n,{expose:e,emit:t}){const i=n,{WEEKS:s,rows:r,tbodyRef:o,currentCellRef:a,focus:l,isCurrent:c,isWeekActive:u,isSelectedCell:d,handlePickDate:h,handleMouseUp:f,handleMouseDown:m,handleMouseMove:p,handleFocus:y}=nre(i,t),{tableLabel:v,tableKls:_,weekLabel:b,getCellClasses:w,getRowKls:x,t:S}=ire(i,{isCurrent:c,isWeekActive:u});return e({focus:l}),(C,T)=>(k(),Y("table",{"aria-label":g(v),class:z(g(_)),cellspacing:"0",cellpadding:"0",role:"grid",onClick:T[1]||(T[1]=(...M)=>g(h)&&g(h)(...M)),onMousemove:T[2]||(T[2]=(...M)=>g(p)&&g(p)(...M)),onMousedown:T[3]||(T[3]=Tt((...M)=>g(m)&&g(m)(...M),["prevent"])),onMouseup:T[4]||(T[4]=(...M)=>g(f)&&g(f)(...M))},[te("tbody",{ref_key:"tbodyRef",ref:o},[te("tr",null,[C.showWeekNumber?(k(),Y("th",are,Je(g(b)),1)):Ee("v-if",!0),(k(!0),Y(mt,null,Zt(g(s),(M,E)=>(k(),Y("th",{key:E,"aria-label":g(S)("el.datepicker.weeksFull."+M),scope:"col"},Je(g(S)("el.datepicker.weeks."+M)),9,lre))),128))]),(k(!0),Y(mt,null,Zt(g(r),(M,E)=>(k(),Y("tr",{key:E,class:z(g(x)(M[1]))},[(k(!0),Y(mt,null,Zt(M,(A,I)=>(k(),Y("td",{key:`${E}.${I}`,ref_for:!0,ref:B=>g(d)(A)&&(a.value=B),class:z(g(w)(A)),"aria-current":A.isCurrent?"date":void 0,"aria-selected":A.isCurrent,tabindex:g(d)(A)?0:-1,onFocus:T[0]||(T[0]=(...B)=>g(y)&&g(y)(...B))},[le(g(rre),{cell:A},null,8,["cell"])],42,cre))),128))],2))),128))],512)],42,ore))}});var $C=Ze(ure,[["__file","basic-date-table.vue"]]);const dre=Ye({...LT,selectionMode:kT("month")}),hre=["aria-label"],fre=["aria-selected","aria-label","tabindex","onKeydown"],pre={class:"cell"},mre=se({__name:"basic-month-table",props:dre,emits:["changerange","pick","select"],setup(n,{expose:e,emit:t}){const i=n,s=(w,x,S)=>{const C=Vt().locale(S).startOf("month").month(x).year(w),T=C.daysInMonth();return Kc(T).map(M=>C.add(M,"day").toDate())},r=Ve("month-table"),{t:o,lang:a}=en(),l=V(),c=V(),u=V(i.date.locale("en").localeData().monthsShort().map(w=>w.toLowerCase())),d=V([[],[],[]]),h=V(),f=V(),m=R(()=>{var w,x;const S=d.value,C=Vt().locale(a.value).startOf("month");for(let T=0;T<3;T++){const M=S[T];for(let E=0;E<4;E++){const A=M[E]||(M[E]={row:T,column:E,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1});A.type="normal";const I=T*4+E,B=i.date.startOf("year").month(I),F=i.rangeState.endDate||i.maxDate||i.rangeState.selecting&&i.minDate||null;A.inRange=!!(i.minDate&&B.isSameOrAfter(i.minDate,"month")&&F&&B.isSameOrBefore(F,"month"))||!!(i.minDate&&B.isSameOrBefore(i.minDate,"month")&&F&&B.isSameOrAfter(F,"month")),(w=i.minDate)!=null&&w.isSameOrAfter(F)?(A.start=!!(F&&B.isSame(F,"month")),A.end=i.minDate&&B.isSame(i.minDate,"month")):(A.start=!!(i.minDate&&B.isSame(i.minDate,"month")),A.end=!!(F&&B.isSame(F,"month"))),C.isSame(B)&&(A.type="today"),A.text=I,A.disabled=((x=i.disabledDate)==null?void 0:x.call(i,B.toDate()))||!1}}return S}),p=()=>{var w;(w=c.value)==null||w.focus()},y=w=>{const x={},S=i.date.year(),C=new Date,T=w.text;return x.disabled=i.disabledDate?s(S,T,a.value).every(i.disabledDate):!1,x.current=Vs(i.parsedValue).findIndex(M=>Vt.isDayjs(M)&&M.year()===S&&M.month()===T)>=0,x.today=C.getFullYear()===S&&C.getMonth()===T,w.inRange&&(x["in-range"]=!0,w.start&&(x["start-date"]=!0),w.end&&(x["end-date"]=!0)),x},v=w=>{const x=i.date.year(),S=w.text;return Vs(i.date).findIndex(C=>C.year()===x&&C.month()===S)>=0},_=w=>{var x;if(!i.rangeState.selecting)return;let S=w.target;if(S.tagName==="SPAN"&&(S=(x=S.parentNode)==null?void 0:x.parentNode),S.tagName==="DIV"&&(S=S.parentNode),S.tagName!=="TD")return;const C=S.parentNode.rowIndex,T=S.cellIndex;m.value[C][T].disabled||(C!==h.value||T!==f.value)&&(h.value=C,f.value=T,t("changerange",{selecting:!0,endDate:i.date.startOf("year").month(C*4+T)}))},b=w=>{var x;const S=(x=w.target)==null?void 0:x.closest("td");if((S==null?void 0:S.tagName)!=="TD"||Yr(S,"disabled"))return;const C=S.cellIndex,M=S.parentNode.rowIndex*4+C,E=i.date.startOf("year").month(M);if(i.selectionMode==="months"){if(w.type==="keydown"){t("pick",Vs(i.parsedValue),!1);return}const A=i.date.startOf("month").month(M),I=Yr(S,"current")?Vs(i.parsedValue).filter(B=>Number(B)!==Number(A)):Vs(i.parsedValue).concat([Vt(A)]);t("pick",I)}else i.selectionMode==="range"?i.rangeState.selecting?(i.minDate&&E>=i.minDate?t("pick",{minDate:i.minDate,maxDate:E}):t("pick",{minDate:E,maxDate:i.minDate}),t("select",!1)):(t("pick",{minDate:E,maxDate:null}),t("select",!0)):t("pick",M)};return ze(()=>i.date,async()=>{var w,x;(w=l.value)!=null&&w.contains(document.activeElement)&&(await vt(),(x=c.value)==null||x.focus())}),e({focus:p}),(w,x)=>(k(),Y("table",{role:"grid","aria-label":g(o)("el.datepicker.monthTablePrompt"),class:z(g(r).b()),onClick:b,onMousemove:_},[te("tbody",{ref_key:"tbodyRef",ref:l},[(k(!0),Y(mt,null,Zt(g(m),(S,C)=>(k(),Y("tr",{key:C},[(k(!0),Y(mt,null,Zt(S,(T,M)=>(k(),Y("td",{key:M,ref_for:!0,ref:E=>v(T)&&(c.value=E),class:z(y(T)),"aria-selected":`${v(T)}`,"aria-label":g(o)(`el.datepicker.month${+T.text+1}`),tabindex:v(T)?0:-1,onKeydown:[wn(Tt(b,["prevent","stop"]),["space"]),wn(Tt(b,["prevent","stop"]),["enter"])]},[te("div",null,[te("span",pre,Je(g(o)("el.datepicker.months."+u.value[T.text])),1)])],42,fre))),128))]))),128))],512)],42,hre))}});var GC=Ze(mre,[["__file","basic-month-table.vue"]]);const{date:gre,disabledDate:vre,parsedValue:yre}=LT,_re=Ye({date:gre,disabledDate:vre,parsedValue:yre,selectionMode:kT("year")}),bre=["aria-label"],wre=["aria-selected","tabindex","onKeydown"],xre={class:"cell"},Sre={key:1},Cre=se({__name:"basic-year-table",props:_re,emits:["pick"],setup(n,{expose:e,emit:t}){const i=n,s=(p,y)=>{const v=Vt(String(p)).locale(y).startOf("year"),b=v.endOf("year").dayOfYear();return Kc(b).map(w=>v.add(w,"day").toDate())},r=Ve("year-table"),{t:o,lang:a}=en(),l=V(),c=V(),u=R(()=>Math.floor(i.date.year()/10)*10),d=()=>{var p;(p=c.value)==null||p.focus()},h=p=>{const y={},v=Vt().locale(a.value);return y.disabled=i.disabledDate?s(p,a.value).every(i.disabledDate):!1,y.current=Vs(i.parsedValue).findIndex(_=>_.year()===p)>=0,y.today=v.year()===p,y},f=p=>p===u.value&&i.date.year()<u.value&&i.date.year()>u.value+9||Vs(i.date).findIndex(y=>y.year()===p)>=0||Vs(i.parsedValue).findIndex(y=>(y==null?void 0:y.year())===p)>=0,m=p=>{const v=p.target.closest("td");if(v&&v.textContent){if(Yr(v,"disabled"))return;const _=v.textContent||v.innerText;if(i.selectionMode==="years"){if(p.type==="keydown"){t("pick",Vs(i.parsedValue),!1);return}const b=Yr(v,"current")?Vs(i.parsedValue).filter(w=>(w==null?void 0:w.year())!==Number(_)):Vs(i.parsedValue).concat([Vt(_)]);t("pick",b)}else t("pick",Number(_))}};return ze(()=>i.date,async()=>{var p,y;(p=l.value)!=null&&p.contains(document.activeElement)&&(await vt(),(y=c.value)==null||y.focus())}),e({focus:d}),(p,y)=>(k(),Y("table",{role:"grid","aria-label":g(o)("el.datepicker.yearTablePrompt"),class:z(g(r).b()),onClick:m},[te("tbody",{ref_key:"tbodyRef",ref:l},[(k(),Y(mt,null,Zt(3,(v,_)=>te("tr",{key:_},[(k(),Y(mt,null,Zt(4,(b,w)=>(k(),Y(mt,{key:_+"_"+w},[_*4+w<10?(k(),Y("td",{key:0,ref_for:!0,ref:x=>f(g(u)+_*4+w)&&(c.value=x),class:z(["available",h(g(u)+_*4+w)]),"aria-selected":`${f(g(u)+_*4+w)}`,tabindex:f(g(u)+_*4+w)?0:-1,onKeydown:[wn(Tt(m,["prevent","stop"]),["space"]),wn(Tt(m,["prevent","stop"]),["enter"])]},[te("div",null,[te("span",xre,Je(g(u)+_*4+w),1)])],42,wre)):(k(),Y("td",Sre))],64))),64))])),64))],512)],10,bre))}});var Mre=Ze(Cre,[["__file","basic-year-table.vue"]]);const Ere=["onClick"],Tre=["aria-label"],Are=["aria-label"],Ire=["aria-label"],Rre=["aria-label"],Pre=se({__name:"panel-date-pick",props:Jse,emits:["pick","set-picker-option","panel-change"],setup(n,{emit:e}){const t=n,i=(Fe,Ie,oe)=>!0,s=Ve("picker-panel"),r=Ve("date-picker"),o=ah(),a=hs(),{t:l,lang:c}=en(),u=ct("EP_PICKER_BASE"),d=ct(U1),{shortcuts:h,disabledDate:f,cellClassName:m,defaultTime:p}=u.props,y=vn(u.props,"defaultValue"),v=V(),_=V(Vt().locale(c.value)),b=V(!1);let w=!1;const x=R(()=>Vt(p).locale(c.value)),S=R(()=>_.value.month()),C=R(()=>_.value.year()),T=V([]),M=V(null),E=V(null),A=Fe=>T.value.length>0?i(Fe,T.value,t.format||"HH:mm:ss"):!0,I=Fe=>p&&!ve.value&&!b.value&&!w?x.value.year(Fe.year()).month(Fe.month()).date(Fe.date()):xe.value?Fe.millisecond(0):Fe.startOf("day"),B=(Fe,...Ie)=>{if(!Fe)e("pick",Fe,...Ie);else if(rt(Fe)){const oe=Fe.map(I);e("pick",oe,...Ie)}else e("pick",I(Fe),...Ie);M.value=null,E.value=null,b.value=!1,w=!1},F=async(Fe,Ie)=>{if(H.value==="date"){Fe=Fe;let oe=t.parsedValue?t.parsedValue.year(Fe.year()).month(Fe.month()).date(Fe.date()):Fe;A(oe)||(oe=T.value[0][0].year(Fe.year()).month(Fe.month()).date(Fe.date())),_.value=oe,B(oe,xe.value||Ie),t.type==="datetime"&&(await vt(),je())}else H.value==="week"?B(Fe.date):H.value==="dates"&&B(Fe,!0)},U=Fe=>{const Ie=Fe?"add":"subtract";_.value=_.value[Ie](1,"month"),qe("month")},P=Fe=>{const Ie=_.value,oe=Fe?"add":"subtract";_.value=O.value==="year"?Ie[oe](10,"year"):Ie[oe](1,"year"),qe("year")},O=V("date"),D=R(()=>{const Fe=l("el.datepicker.year");if(O.value==="year"){const Ie=Math.floor(C.value/10)*10;return Fe?`${Ie} ${Fe} - ${Ie+9} ${Fe}`:`${Ie} - ${Ie+9}`}return`${C.value} ${Fe}`}),L=Fe=>{const Ie=xt(Fe.value)?Fe.value():Fe.value;if(Ie){w=!0,B(Vt(Ie).locale(c.value));return}Fe.onClick&&Fe.onClick({attrs:o,slots:a,emit:e})},H=R(()=>{const{type:Fe}=t;return["week","month","months","year","years","dates"].includes(Fe)?Fe:"date"}),X=R(()=>H.value==="dates"||H.value==="months"||H.value==="years"),ne=R(()=>H.value==="date"?O.value:H.value),ce=R(()=>!!h.length),ae=async(Fe,Ie)=>{H.value==="month"?(_.value=_.value.startOf("month").month(Fe),B(_.value,!1)):H.value==="months"?B(Fe,Ie??!0):(_.value=_.value.startOf("month").month(Fe),O.value="date",["month","year","date","week"].includes(H.value)&&(B(_.value,!0),await vt(),je())),qe("month")},_e=async(Fe,Ie)=>{H.value==="year"?(_.value=_.value.startOf("year").year(Fe),B(_.value,!1)):H.value==="years"?B(Fe,Ie??!0):(_.value=_.value.year(Fe),O.value="month",["month","year","date","week"].includes(H.value)&&(B(_.value,!0),await vt(),je())),qe("year")},re=async Fe=>{O.value=Fe,await vt(),je()},xe=R(()=>t.type==="datetime"||t.type==="datetimerange"),he=R(()=>{const Fe=xe.value||H.value==="dates",Ie=H.value==="years",oe=H.value==="months",Le=O.value==="date",Ke=O.value==="year",ft=O.value==="month";return Fe&&Le||Ie&&Ke||oe&&ft}),Te=R(()=>f?t.parsedValue?rt(t.parsedValue)?f(t.parsedValue[0].toDate()):f(t.parsedValue.toDate()):!0:!1),Ce=()=>{if(X.value)B(t.parsedValue);else{let Fe=t.parsedValue;if(!Fe){const Ie=Vt(p).locale(c.value),oe=We();Fe=Ie.year(oe.year()).month(oe.month()).date(oe.date())}_.value=Fe,B(Fe)}},we=R(()=>f?f(Vt().locale(c.value).toDate()):!1),K=()=>{const Ie=Vt().locale(c.value).toDate();b.value=!0,(!f||!f(Ie))&&A(Ie)&&(_.value=Vt().locale(c.value),B(_.value))},j=R(()=>t.timeFormat||k4(t.format)),ie=R(()=>t.dateFormat||L4(t.format)),ve=R(()=>{if(E.value)return E.value;if(!(!t.parsedValue&&!y.value))return(t.parsedValue||_.value).format(j.value)}),ye=R(()=>{if(M.value)return M.value;if(!(!t.parsedValue&&!y.value))return(t.parsedValue||_.value).format(ie.value)}),me=V(!1),be=()=>{me.value=!0},Pe=()=>{me.value=!1},Z=Fe=>({hour:Fe.hour(),minute:Fe.minute(),second:Fe.second(),year:Fe.year(),month:Fe.month(),date:Fe.date()}),$=(Fe,Ie,oe)=>{const{hour:Le,minute:Ke,second:ft}=Z(Fe),Q=t.parsedValue?t.parsedValue.hour(Le).minute(Ke).second(ft):Fe;_.value=Q,B(_.value,!0),oe||(me.value=Ie)},de=Fe=>{const Ie=Vt(Fe,j.value).locale(c.value);if(Ie.isValid()&&A(Ie)){const{year:oe,month:Le,date:Ke}=Z(_.value);_.value=Ie.year(oe).month(Le).date(Ke),E.value=null,me.value=!1,B(_.value,!0)}},Ae=Fe=>{const Ie=Vt(Fe,ie.value).locale(c.value);if(Ie.isValid()){if(f&&f(Ie.toDate()))return;const{hour:oe,minute:Le,second:Ke}=Z(_.value);_.value=Ie.hour(oe).minute(Le).second(Ke),M.value=null,B(_.value,!0)}},De=Fe=>Vt.isDayjs(Fe)&&Fe.isValid()&&(f?!f(Fe.toDate()):!0),fe=Fe=>rt(Fe)?Fe.map(Ie=>Ie.format(t.format)):Fe.format(t.format),Ge=Fe=>Vt(Fe,t.format).locale(c.value),We=()=>{const Fe=Vt(y.value).locale(c.value);if(!y.value){const Ie=x.value;return Vt().hour(Ie.hour()).minute(Ie.minute()).second(Ie.second()).locale(c.value)}return Fe},je=async()=>{var Fe;["week","month","year","date"].includes(H.value)&&((Fe=v.value)==null||Fe.focus(),H.value==="week"&&Ue(wt.down))},at=Fe=>{const{code:Ie}=Fe;[wt.up,wt.down,wt.left,wt.right,wt.home,wt.end,wt.pageUp,wt.pageDown].includes(Ie)&&(Ue(Ie),Fe.stopPropagation(),Fe.preventDefault()),[wt.enter,wt.space,wt.numpadEnter].includes(Ie)&&M.value===null&&E.value===null&&(Fe.preventDefault(),B(_.value,!1))},Ue=Fe=>{var Ie;const{up:oe,down:Le,left:Ke,right:ft,home:Q,end:$e,pageUp:Oe,pageDown:et}=wt,ht={year:{[oe]:-4,[Le]:4,[Ke]:-1,[ft]:1,offset:(Ot,pn)=>Ot.setFullYear(Ot.getFullYear()+pn)},month:{[oe]:-4,[Le]:4,[Ke]:-1,[ft]:1,offset:(Ot,pn)=>Ot.setMonth(Ot.getMonth()+pn)},week:{[oe]:-1,[Le]:1,[Ke]:-1,[ft]:1,offset:(Ot,pn)=>Ot.setDate(Ot.getDate()+pn*7)},date:{[oe]:-7,[Le]:7,[Ke]:-1,[ft]:1,[Q]:Ot=>-Ot.getDay(),[$e]:Ot=>-Ot.getDay()+6,[Oe]:Ot=>-new Date(Ot.getFullYear(),Ot.getMonth(),0).getDate(),[et]:Ot=>new Date(Ot.getFullYear(),Ot.getMonth()+1,0).getDate(),offset:(Ot,pn)=>Ot.setDate(Ot.getDate()+pn)}},At=_.value.toDate();for(;Math.abs(_.value.diff(At,"year",!0))<1;){const Ot=ht[ne.value];if(!Ot)return;if(Ot.offset(At,xt(Ot[Fe])?Ot[Fe](At):(Ie=Ot[Fe])!=null?Ie:0),f&&f(At))break;const pn=Vt(At).locale(c.value);_.value=pn,e("pick",pn,!0);break}},qe=Fe=>{e("panel-change",_.value.toDate(),Fe,O.value)};return ze(()=>H.value,Fe=>{if(["month","year"].includes(Fe)){O.value=Fe;return}else if(Fe==="years"){O.value="year";return}else if(Fe==="months"){O.value="month";return}O.value="date"},{immediate:!0}),ze(()=>O.value,()=>{d==null||d.updatePopper()}),ze(()=>y.value,Fe=>{Fe&&(_.value=We())},{immediate:!0}),ze(()=>t.parsedValue,Fe=>{if(Fe){if(X.value||Array.isArray(Fe))return;_.value=Fe}else _.value=We()},{immediate:!0}),e("set-picker-option",["isValidValue",De]),e("set-picker-option",["formatToString",fe]),e("set-picker-option",["parseUserInput",Ge]),e("set-picker-option",["handleFocusPicker",je]),(Fe,Ie)=>(k(),Y("div",{class:z([g(s).b(),g(r).b(),{"has-sidebar":Fe.$slots.sidebar||g(ce),"has-time":g(xe)}])},[te("div",{class:z(g(s).e("body-wrapper"))},[ke(Fe.$slots,"sidebar",{class:z(g(s).e("sidebar"))}),g(ce)?(k(),Y("div",{key:0,class:z(g(s).e("sidebar"))},[(k(!0),Y(mt,null,Zt(g(h),(oe,Le)=>(k(),Y("button",{key:Le,type:"button",class:z(g(s).e("shortcut")),onClick:Ke=>L(oe)},Je(oe.text),11,Ere))),128))],2)):Ee("v-if",!0),te("div",{class:z(g(s).e("body"))},[g(xe)?(k(),Y("div",{key:0,class:z(g(r).e("time-header"))},[te("span",{class:z(g(r).e("editor-wrap"))},[le(g(Ks),{placeholder:g(l)("el.datepicker.selectDate"),"model-value":g(ye),size:"small","validate-event":!1,onInput:Ie[0]||(Ie[0]=oe=>M.value=oe),onChange:Ae},null,8,["placeholder","model-value"])],2),Bt((k(),Y("span",{class:z(g(r).e("editor-wrap"))},[le(g(Ks),{placeholder:g(l)("el.datepicker.selectTime"),"model-value":g(ve),size:"small","validate-event":!1,onFocus:be,onInput:Ie[1]||(Ie[1]=oe=>E.value=oe),onChange:de},null,8,["placeholder","model-value"]),le(g(j_),{visible:me.value,format:g(j),"parsed-value":_.value,onPick:$},null,8,["visible","format","parsed-value"])],2)),[[g(Ll),Pe]])],2)):Ee("v-if",!0),Bt(te("div",{class:z([g(r).e("header"),(O.value==="year"||O.value==="month")&&g(r).e("header--bordered")])},[te("span",{class:z(g(r).e("prev-btn"))},[te("button",{type:"button","aria-label":g(l)("el.datepicker.prevYear"),class:z(["d-arrow-left",g(s).e("icon-btn")]),onClick:Ie[2]||(Ie[2]=oe=>P(!1))},[le(g(dt),null,{default:pe(()=>[le(g(qf))]),_:1})],10,Tre),Bt(te("button",{type:"button","aria-label":g(l)("el.datepicker.prevMonth"),class:z([g(s).e("icon-btn"),"arrow-left"]),onClick:Ie[3]||(Ie[3]=oe=>U(!1))},[le(g(dt),null,{default:pe(()=>[le(g(eu))]),_:1})],10,Are),[[an,O.value==="date"]])],2),te("span",{role:"button",class:z(g(r).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:Ie[4]||(Ie[4]=wn(oe=>re("year"),["enter"])),onClick:Ie[5]||(Ie[5]=oe=>re("year"))},Je(g(D)),35),Bt(te("span",{role:"button","aria-live":"polite",tabindex:"0",class:z([g(r).e("header-label"),{active:O.value==="month"}]),onKeydown:Ie[6]||(Ie[6]=wn(oe=>re("month"),["enter"])),onClick:Ie[7]||(Ie[7]=oe=>re("month"))},Je(g(l)(`el.datepicker.month${g(S)+1}`)),35),[[an,O.value==="date"]]),te("span",{class:z(g(r).e("next-btn"))},[Bt(te("button",{type:"button","aria-label":g(l)("el.datepicker.nextMonth"),class:z([g(s).e("icon-btn"),"arrow-right"]),onClick:Ie[8]||(Ie[8]=oe=>U(!0))},[le(g(dt),null,{default:pe(()=>[le(g(ur))]),_:1})],10,Ire),[[an,O.value==="date"]]),te("button",{type:"button","aria-label":g(l)("el.datepicker.nextYear"),class:z([g(s).e("icon-btn"),"d-arrow-right"]),onClick:Ie[9]||(Ie[9]=oe=>P(!0))},[le(g(dt),null,{default:pe(()=>[le(g(Zf))]),_:1})],10,Rre)],2)],2),[[an,O.value!=="time"]]),te("div",{class:z(g(s).e("content")),onKeydown:at},[O.value==="date"?(k(),Re($C,{key:0,ref_key:"currentViewRef",ref:v,"selection-mode":g(H),date:_.value,"parsed-value":Fe.parsedValue,"disabled-date":g(f),"cell-class-name":g(m),onPick:F},null,8,["selection-mode","date","parsed-value","disabled-date","cell-class-name"])):Ee("v-if",!0),O.value==="year"?(k(),Re(Mre,{key:1,ref_key:"currentViewRef",ref:v,"selection-mode":g(H),date:_.value,"disabled-date":g(f),"parsed-value":Fe.parsedValue,onPick:_e},null,8,["selection-mode","date","disabled-date","parsed-value"])):Ee("v-if",!0),O.value==="month"?(k(),Re(GC,{key:2,ref_key:"currentViewRef",ref:v,"selection-mode":g(H),date:_.value,"parsed-value":Fe.parsedValue,"disabled-date":g(f),onPick:ae},null,8,["selection-mode","date","parsed-value","disabled-date"])):Ee("v-if",!0)],34)],2)],2),Bt(te("div",{class:z(g(s).e("footer"))},[Bt(le(g(as),{text:"",size:"small",class:z(g(s).e("link-btn")),disabled:g(we),onClick:K},{default:pe(()=>[Yt(Je(g(l)("el.datepicker.now")),1)]),_:1},8,["class","disabled"]),[[an,!g(X)]]),le(g(as),{plain:"",size:"small",class:z(g(s).e("link-btn")),disabled:g(Te),onClick:Ce},{default:pe(()=>[Yt(Je(g(l)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2),[[an,g(he)]])],2))}});var Lre=Ze(Pre,[["__file","panel-date-pick.vue"]]);const kre=Ye({...TF,...AF}),Ore=n=>{const{emit:e}=zt(),t=ah(),i=hs();return r=>{const o=xt(r.value)?r.value():r.value;if(o){e("pick",[Vt(o[0]).locale(n.value),Vt(o[1]).locale(n.value)]);return}r.onClick&&r.onClick({attrs:t,slots:i,emit:e})}},RF=(n,{defaultValue:e,leftDate:t,rightDate:i,unit:s,onParsedValueChanged:r})=>{const{emit:o}=zt(),{pickerNs:a}=ct(PT),l=Ve("date-range-picker"),{t:c,lang:u}=en(),d=Ore(u),h=V(),f=V(),m=V({endDate:null,selecting:!1}),p=b=>{m.value=b},y=(b=!1)=>{const w=g(h),x=g(f);HC([w,x])&&o("pick",[w,x],b)},v=b=>{m.value.selecting=b,b||(m.value.endDate=null)},_=()=>{const[b,w]=IF(g(e),{lang:g(u),unit:s,unlinkPanels:n.unlinkPanels});h.value=void 0,f.value=void 0,t.value=b,i.value=w};return ze(e,b=>{b&&_()},{immediate:!0}),ze(()=>n.parsedValue,b=>{if(rt(b)&&b.length===2){const[w,x]=b;h.value=w,t.value=w,f.value=x,r(g(h),g(f))}else _()},{immediate:!0}),{minDate:h,maxDate:f,rangeState:m,lang:u,ppNs:a,drpNs:l,handleChangeRange:p,handleRangeConfirm:y,handleShortcutClick:d,onSelect:v,t:c}},Dre=["onClick"],Nre=["aria-label"],Fre=["aria-label"],Bre=["disabled","aria-label"],Ure=["disabled","aria-label"],zre=["disabled","aria-label"],Hre=["disabled","aria-label"],Vre=["aria-label"],$re=["aria-label"],O0="month",Gre=se({__name:"panel-date-range",props:kre,emits:["pick","set-picker-option","calendar-change","panel-change"],setup(n,{emit:e}){const t=n,i=ct("EP_PICKER_BASE"),{disabledDate:s,cellClassName:r,defaultTime:o,clearable:a}=i.props,l=vn(i.props,"format"),c=vn(i.props,"shortcuts"),u=vn(i.props,"defaultValue"),{lang:d}=en(),h=V(Vt().locale(d.value)),f=V(Vt().locale(d.value).add(1,O0)),{minDate:m,maxDate:p,rangeState:y,ppNs:v,drpNs:_,handleChangeRange:b,handleRangeConfirm:w,handleShortcutClick:x,onSelect:S,t:C}=RF(t,{defaultValue:u,leftDate:h,rightDate:f,unit:O0,onParsedValueChanged:Fe}),T=V({min:null,max:null}),M=V({min:null,max:null}),E=R(()=>`${h.value.year()} ${C("el.datepicker.year")} ${C(`el.datepicker.month${h.value.month()+1}`)}`),A=R(()=>`${f.value.year()} ${C("el.datepicker.year")} ${C(`el.datepicker.month${f.value.month()+1}`)}`),I=R(()=>h.value.year()),B=R(()=>h.value.month()),F=R(()=>f.value.year()),U=R(()=>f.value.month()),P=R(()=>!!c.value.length),O=R(()=>T.value.min!==null?T.value.min:m.value?m.value.format(ne.value):""),D=R(()=>T.value.max!==null?T.value.max:p.value||m.value?(p.value||m.value).format(ne.value):""),L=R(()=>M.value.min!==null?M.value.min:m.value?m.value.format(X.value):""),H=R(()=>M.value.max!==null?M.value.max:p.value||m.value?(p.value||m.value).format(X.value):""),X=R(()=>t.timeFormat||k4(l.value)),ne=R(()=>t.dateFormat||L4(l.value)),ce=Ie=>HC(Ie)&&(s?!s(Ie[0].toDate())&&!s(Ie[1].toDate()):!0),ae=()=>{h.value=h.value.subtract(1,"year"),t.unlinkPanels||(f.value=h.value.add(1,"month")),K("year")},_e=()=>{h.value=h.value.subtract(1,"month"),t.unlinkPanels||(f.value=h.value.add(1,"month")),K("month")},re=()=>{t.unlinkPanels?f.value=f.value.add(1,"year"):(h.value=h.value.add(1,"year"),f.value=h.value.add(1,"month")),K("year")},xe=()=>{t.unlinkPanels?f.value=f.value.add(1,"month"):(h.value=h.value.add(1,"month"),f.value=h.value.add(1,"month")),K("month")},he=()=>{h.value=h.value.add(1,"year"),K("year")},Te=()=>{h.value=h.value.add(1,"month"),K("month")},Ce=()=>{f.value=f.value.subtract(1,"year"),K("year")},we=()=>{f.value=f.value.subtract(1,"month"),K("month")},K=Ie=>{e("panel-change",[h.value.toDate(),f.value.toDate()],Ie)},j=R(()=>{const Ie=(B.value+1)%12,oe=B.value+1>=12?1:0;return t.unlinkPanels&&new Date(I.value+oe,Ie)<new Date(F.value,U.value)}),ie=R(()=>t.unlinkPanels&&F.value*12+U.value-(I.value*12+B.value+1)>=12),ve=R(()=>!(m.value&&p.value&&!y.value.selecting&&HC([m.value,p.value]))),ye=R(()=>t.type==="datetime"||t.type==="datetimerange"),me=(Ie,oe)=>{if(Ie)return o?Vt(o[oe]||o).locale(d.value).year(Ie.year()).month(Ie.month()).date(Ie.date()):Ie},be=(Ie,oe=!0)=>{const Le=Ie.minDate,Ke=Ie.maxDate,ft=me(Le,0),Q=me(Ke,1);p.value===Q&&m.value===ft||(e("calendar-change",[Le.toDate(),Ke&&Ke.toDate()]),p.value=Q,m.value=ft,!(!oe||ye.value)&&w())},Pe=V(!1),Z=V(!1),$=()=>{Pe.value=!1},de=()=>{Z.value=!1},Ae=(Ie,oe)=>{T.value[oe]=Ie;const Le=Vt(Ie,ne.value).locale(d.value);if(Le.isValid()){if(s&&s(Le.toDate()))return;oe==="min"?(h.value=Le,m.value=(m.value||h.value).year(Le.year()).month(Le.month()).date(Le.date()),!t.unlinkPanels&&(!p.value||p.value.isBefore(m.value))&&(f.value=Le.add(1,"month"),p.value=m.value.add(1,"month"))):(f.value=Le,p.value=(p.value||f.value).year(Le.year()).month(Le.month()).date(Le.date()),!t.unlinkPanels&&(!m.value||m.value.isAfter(p.value))&&(h.value=Le.subtract(1,"month"),m.value=p.value.subtract(1,"month")))}},De=(Ie,oe)=>{T.value[oe]=null},fe=(Ie,oe)=>{M.value[oe]=Ie;const Le=Vt(Ie,X.value).locale(d.value);Le.isValid()&&(oe==="min"?(Pe.value=!0,m.value=(m.value||h.value).hour(Le.hour()).minute(Le.minute()).second(Le.second())):(Z.value=!0,p.value=(p.value||f.value).hour(Le.hour()).minute(Le.minute()).second(Le.second()),f.value=p.value))},Ge=(Ie,oe)=>{M.value[oe]=null,oe==="min"?(h.value=m.value,Pe.value=!1,(!p.value||p.value.isBefore(m.value))&&(p.value=m.value)):(f.value=p.value,Z.value=!1,p.value&&p.value.isBefore(m.value)&&(m.value=p.value))},We=(Ie,oe,Le)=>{M.value.min||(Ie&&(h.value=Ie,m.value=(m.value||h.value).hour(Ie.hour()).minute(Ie.minute()).second(Ie.second())),Le||(Pe.value=oe),(!p.value||p.value.isBefore(m.value))&&(p.value=m.value,f.value=Ie))},je=(Ie,oe,Le)=>{M.value.max||(Ie&&(f.value=Ie,p.value=(p.value||f.value).hour(Ie.hour()).minute(Ie.minute()).second(Ie.second())),Le||(Z.value=oe),p.value&&p.value.isBefore(m.value)&&(m.value=p.value))},at=()=>{h.value=IF(g(u),{lang:g(d),unit:"month",unlinkPanels:t.unlinkPanels})[0],f.value=h.value.add(1,"month"),p.value=void 0,m.value=void 0,e("pick",null)},Ue=Ie=>rt(Ie)?Ie.map(oe=>oe.format(l.value)):Ie.format(l.value),qe=Ie=>rt(Ie)?Ie.map(oe=>Vt(oe,l.value).locale(d.value)):Vt(Ie,l.value).locale(d.value);function Fe(Ie,oe){if(t.unlinkPanels&&oe){const Le=(Ie==null?void 0:Ie.year())||0,Ke=(Ie==null?void 0:Ie.month())||0,ft=oe.year(),Q=oe.month();f.value=Le===ft&&Ke===Q?oe.add(1,O0):oe}else f.value=h.value.add(1,O0),oe&&(f.value=f.value.hour(oe.hour()).minute(oe.minute()).second(oe.second()))}return e("set-picker-option",["isValidValue",ce]),e("set-picker-option",["parseUserInput",qe]),e("set-picker-option",["formatToString",Ue]),e("set-picker-option",["handleClear",at]),(Ie,oe)=>(k(),Y("div",{class:z([g(v).b(),g(_).b(),{"has-sidebar":Ie.$slots.sidebar||g(P),"has-time":g(ye)}])},[te("div",{class:z(g(v).e("body-wrapper"))},[ke(Ie.$slots,"sidebar",{class:z(g(v).e("sidebar"))}),g(P)?(k(),Y("div",{key:0,class:z(g(v).e("sidebar"))},[(k(!0),Y(mt,null,Zt(g(c),(Le,Ke)=>(k(),Y("button",{key:Ke,type:"button",class:z(g(v).e("shortcut")),onClick:ft=>g(x)(Le)},Je(Le.text),11,Dre))),128))],2)):Ee("v-if",!0),te("div",{class:z(g(v).e("body"))},[g(ye)?(k(),Y("div",{key:0,class:z(g(_).e("time-header"))},[te("span",{class:z(g(_).e("editors-wrap"))},[te("span",{class:z(g(_).e("time-picker-wrap"))},[le(g(Ks),{size:"small",disabled:g(y).selecting,placeholder:g(C)("el.datepicker.startDate"),class:z(g(_).e("editor")),"model-value":g(O),"validate-event":!1,onInput:oe[0]||(oe[0]=Le=>Ae(Le,"min")),onChange:oe[1]||(oe[1]=Le=>De(Le,"min"))},null,8,["disabled","placeholder","class","model-value"])],2),Bt((k(),Y("span",{class:z(g(_).e("time-picker-wrap"))},[le(g(Ks),{size:"small",class:z(g(_).e("editor")),disabled:g(y).selecting,placeholder:g(C)("el.datepicker.startTime"),"model-value":g(L),"validate-event":!1,onFocus:oe[2]||(oe[2]=Le=>Pe.value=!0),onInput:oe[3]||(oe[3]=Le=>fe(Le,"min")),onChange:oe[4]||(oe[4]=Le=>Ge(Le,"min"))},null,8,["class","disabled","placeholder","model-value"]),le(g(j_),{visible:Pe.value,format:g(X),"datetime-role":"start","parsed-value":h.value,onPick:We},null,8,["visible","format","parsed-value"])],2)),[[g(Ll),$]])],2),te("span",null,[le(g(dt),null,{default:pe(()=>[le(g(ur))]),_:1})]),te("span",{class:z([g(_).e("editors-wrap"),"is-right"])},[te("span",{class:z(g(_).e("time-picker-wrap"))},[le(g(Ks),{size:"small",class:z(g(_).e("editor")),disabled:g(y).selecting,placeholder:g(C)("el.datepicker.endDate"),"model-value":g(D),readonly:!g(m),"validate-event":!1,onInput:oe[5]||(oe[5]=Le=>Ae(Le,"max")),onChange:oe[6]||(oe[6]=Le=>De(Le,"max"))},null,8,["class","disabled","placeholder","model-value","readonly"])],2),Bt((k(),Y("span",{class:z(g(_).e("time-picker-wrap"))},[le(g(Ks),{size:"small",class:z(g(_).e("editor")),disabled:g(y).selecting,placeholder:g(C)("el.datepicker.endTime"),"model-value":g(H),readonly:!g(m),"validate-event":!1,onFocus:oe[7]||(oe[7]=Le=>g(m)&&(Z.value=!0)),onInput:oe[8]||(oe[8]=Le=>fe(Le,"max")),onChange:oe[9]||(oe[9]=Le=>Ge(Le,"max"))},null,8,["class","disabled","placeholder","model-value","readonly"]),le(g(j_),{"datetime-role":"end",visible:Z.value,format:g(X),"parsed-value":f.value,onPick:je},null,8,["visible","format","parsed-value"])],2)),[[g(Ll),de]])],2)],2)):Ee("v-if",!0),te("div",{class:z([[g(v).e("content"),g(_).e("content")],"is-left"])},[te("div",{class:z(g(_).e("header"))},[te("button",{type:"button",class:z([g(v).e("icon-btn"),"d-arrow-left"]),"aria-label":g(C)("el.datepicker.prevYear"),onClick:ae},[le(g(dt),null,{default:pe(()=>[le(g(qf))]),_:1})],10,Nre),te("button",{type:"button",class:z([g(v).e("icon-btn"),"arrow-left"]),"aria-label":g(C)("el.datepicker.prevMonth"),onClick:_e},[le(g(dt),null,{default:pe(()=>[le(g(eu))]),_:1})],10,Fre),Ie.unlinkPanels?(k(),Y("button",{key:0,type:"button",disabled:!g(ie),class:z([[g(v).e("icon-btn"),{"is-disabled":!g(ie)}],"d-arrow-right"]),"aria-label":g(C)("el.datepicker.nextYear"),onClick:he},[le(g(dt),null,{default:pe(()=>[le(g(Zf))]),_:1})],10,Bre)):Ee("v-if",!0),Ie.unlinkPanels?(k(),Y("button",{key:1,type:"button",disabled:!g(j),class:z([[g(v).e("icon-btn"),{"is-disabled":!g(j)}],"arrow-right"]),"aria-label":g(C)("el.datepicker.nextMonth"),onClick:Te},[le(g(dt),null,{default:pe(()=>[le(g(ur))]),_:1})],10,Ure)):Ee("v-if",!0),te("div",null,Je(g(E)),1)],2),le($C,{"selection-mode":"range",date:h.value,"min-date":g(m),"max-date":g(p),"range-state":g(y),"disabled-date":g(s),"cell-class-name":g(r),onChangerange:g(b),onPick:be,onSelect:g(S)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2),te("div",{class:z([[g(v).e("content"),g(_).e("content")],"is-right"])},[te("div",{class:z(g(_).e("header"))},[Ie.unlinkPanels?(k(),Y("button",{key:0,type:"button",disabled:!g(ie),class:z([[g(v).e("icon-btn"),{"is-disabled":!g(ie)}],"d-arrow-left"]),"aria-label":g(C)("el.datepicker.prevYear"),onClick:Ce},[le(g(dt),null,{default:pe(()=>[le(g(qf))]),_:1})],10,zre)):Ee("v-if",!0),Ie.unlinkPanels?(k(),Y("button",{key:1,type:"button",disabled:!g(j),class:z([[g(v).e("icon-btn"),{"is-disabled":!g(j)}],"arrow-left"]),"aria-label":g(C)("el.datepicker.prevMonth"),onClick:we},[le(g(dt),null,{default:pe(()=>[le(g(eu))]),_:1})],10,Hre)):Ee("v-if",!0),te("button",{type:"button","aria-label":g(C)("el.datepicker.nextYear"),class:z([g(v).e("icon-btn"),"d-arrow-right"]),onClick:re},[le(g(dt),null,{default:pe(()=>[le(g(Zf))]),_:1})],10,Vre),te("button",{type:"button",class:z([g(v).e("icon-btn"),"arrow-right"]),"aria-label":g(C)("el.datepicker.nextMonth"),onClick:xe},[le(g(dt),null,{default:pe(()=>[le(g(ur))]),_:1})],10,$re),te("div",null,Je(g(A)),1)],2),le($C,{"selection-mode":"range",date:f.value,"min-date":g(m),"max-date":g(p),"range-state":g(y),"disabled-date":g(s),"cell-class-name":g(r),onChangerange:g(b),onPick:be,onSelect:g(S)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2)],2)],2),g(ye)?(k(),Y("div",{key:0,class:z(g(v).e("footer"))},[g(a)?(k(),Re(g(as),{key:0,text:"",size:"small",class:z(g(v).e("link-btn")),onClick:at},{default:pe(()=>[Yt(Je(g(C)("el.datepicker.clear")),1)]),_:1},8,["class"])):Ee("v-if",!0),le(g(as),{plain:"",size:"small",class:z(g(v).e("link-btn")),disabled:g(ve),onClick:oe[10]||(oe[10]=Le=>g(w)(!1))},{default:pe(()=>[Yt(Je(g(C)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2)):Ee("v-if",!0)],2))}});var Wre=Ze(Gre,[["__file","panel-date-range.vue"]]);const Kre=Ye({...AF}),Yre=["pick","set-picker-option","calendar-change"],Xre=({unlinkPanels:n,leftDate:e,rightDate:t})=>{const{t:i}=en(),s=()=>{e.value=e.value.subtract(1,"year"),n.value||(t.value=t.value.subtract(1,"year"))},r=()=>{n.value||(e.value=e.value.add(1,"year")),t.value=t.value.add(1,"year")},o=()=>{e.value=e.value.add(1,"year")},a=()=>{t.value=t.value.subtract(1,"year")},l=R(()=>`${e.value.year()} ${i("el.datepicker.year")}`),c=R(()=>`${t.value.year()} ${i("el.datepicker.year")}`),u=R(()=>e.value.year()),d=R(()=>t.value.year()===e.value.year()?e.value.year()+1:t.value.year());return{leftPrevYear:s,rightNextYear:r,leftNextYear:o,rightPrevYear:a,leftLabel:l,rightLabel:c,leftYear:u,rightYear:d}},jre=["onClick"],qre=["disabled"],Zre=["disabled"],D0="year",Jre=se({name:"DatePickerMonthRange"}),Qre=se({...Jre,props:Kre,emits:Yre,setup(n,{emit:e}){const t=n,{lang:i}=en(),s=ct("EP_PICKER_BASE"),{shortcuts:r,disabledDate:o}=s.props,a=vn(s.props,"format"),l=vn(s.props,"defaultValue"),c=V(Vt().locale(i.value)),u=V(Vt().locale(i.value).add(1,D0)),{minDate:d,maxDate:h,rangeState:f,ppNs:m,drpNs:p,handleChangeRange:y,handleRangeConfirm:v,handleShortcutClick:_,onSelect:b}=RF(t,{defaultValue:l,leftDate:c,rightDate:u,unit:D0,onParsedValueChanged:P}),w=R(()=>!!r.length),{leftPrevYear:x,rightNextYear:S,leftNextYear:C,rightPrevYear:T,leftLabel:M,rightLabel:E,leftYear:A,rightYear:I}=Xre({unlinkPanels:vn(t,"unlinkPanels"),leftDate:c,rightDate:u}),B=R(()=>t.unlinkPanels&&I.value>A.value+1),F=(O,D=!0)=>{const L=O.minDate,H=O.maxDate;h.value===H&&d.value===L||(e("calendar-change",[L.toDate(),H&&H.toDate()]),h.value=H,d.value=L,D&&v())},U=O=>O.map(D=>D.format(a.value));function P(O,D){if(t.unlinkPanels&&D){const L=(O==null?void 0:O.year())||0,H=D.year();u.value=L===H?D.add(1,D0):D}else u.value=c.value.add(1,D0)}return e("set-picker-option",["formatToString",U]),(O,D)=>(k(),Y("div",{class:z([g(m).b(),g(p).b(),{"has-sidebar":!!O.$slots.sidebar||g(w)}])},[te("div",{class:z(g(m).e("body-wrapper"))},[ke(O.$slots,"sidebar",{class:z(g(m).e("sidebar"))}),g(w)?(k(),Y("div",{key:0,class:z(g(m).e("sidebar"))},[(k(!0),Y(mt,null,Zt(g(r),(L,H)=>(k(),Y("button",{key:H,type:"button",class:z(g(m).e("shortcut")),onClick:X=>g(_)(L)},Je(L.text),11,jre))),128))],2)):Ee("v-if",!0),te("div",{class:z(g(m).e("body"))},[te("div",{class:z([[g(m).e("content"),g(p).e("content")],"is-left"])},[te("div",{class:z(g(p).e("header"))},[te("button",{type:"button",class:z([g(m).e("icon-btn"),"d-arrow-left"]),onClick:D[0]||(D[0]=(...L)=>g(x)&&g(x)(...L))},[le(g(dt),null,{default:pe(()=>[le(g(qf))]),_:1})],2),O.unlinkPanels?(k(),Y("button",{key:0,type:"button",disabled:!g(B),class:z([[g(m).e("icon-btn"),{[g(m).is("disabled")]:!g(B)}],"d-arrow-right"]),onClick:D[1]||(D[1]=(...L)=>g(C)&&g(C)(...L))},[le(g(dt),null,{default:pe(()=>[le(g(Zf))]),_:1})],10,qre)):Ee("v-if",!0),te("div",null,Je(g(M)),1)],2),le(GC,{"selection-mode":"range",date:c.value,"min-date":g(d),"max-date":g(h),"range-state":g(f),"disabled-date":g(o),onChangerange:g(y),onPick:F,onSelect:g(b)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2),te("div",{class:z([[g(m).e("content"),g(p).e("content")],"is-right"])},[te("div",{class:z(g(p).e("header"))},[O.unlinkPanels?(k(),Y("button",{key:0,type:"button",disabled:!g(B),class:z([[g(m).e("icon-btn"),{"is-disabled":!g(B)}],"d-arrow-left"]),onClick:D[2]||(D[2]=(...L)=>g(T)&&g(T)(...L))},[le(g(dt),null,{default:pe(()=>[le(g(qf))]),_:1})],10,Zre)):Ee("v-if",!0),te("button",{type:"button",class:z([g(m).e("icon-btn"),"d-arrow-right"]),onClick:D[3]||(D[3]=(...L)=>g(S)&&g(S)(...L))},[le(g(dt),null,{default:pe(()=>[le(g(Zf))]),_:1})],2),te("div",null,Je(g(E)),1)],2),le(GC,{"selection-mode":"range",date:u.value,"min-date":g(d),"max-date":g(h),"range-state":g(f),"disabled-date":g(o),onChangerange:g(y),onPick:F,onSelect:g(b)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2)],2)],2)],2))}});var eoe=Ze(Qre,[["__file","panel-month-range.vue"]]);const toe=function(n){switch(n){case"daterange":case"datetimerange":return Wre;case"monthrange":return eoe;default:return Lre}};Vt.extend(j4);Vt.extend(Use);Vt.extend(AT);Vt.extend(Hse);Vt.extend($se);Vt.extend(Wse);Vt.extend(Yse);Vt.extend(jse);var noe=se({name:"ElDatePicker",install:null,props:qse,emits:["update:modelValue"],setup(n,{expose:e,emit:t,slots:i}){const s=Ve("picker-panel");Xt("ElPopperOptions",un(vn(n,"popperOptions"))),Xt(PT,{slots:i,pickerNs:s});const r=V();e({focus:(l=!0)=>{var c;(c=r.value)==null||c.focus(l)},handleOpen:()=>{var l;(l=r.value)==null||l.handleOpen()},handleClose:()=>{var l;(l=r.value)==null||l.handleClose()}});const a=l=>{t("update:modelValue",l)};return()=>{var l;const c=(l=n.format)!=null?l:Ree[n.type]||lf,u=toe(n.type);return le(N4,Kt(n,{format:c,type:n.type,ref:r,"onUpdate:modelValue":a}),{default:d=>le(u,d,null),"range-separator":i["range-separator"]})}}});const h_=noe;h_.install=n=>{n.component(h_.name,h_)};const ioe=h_,OT=Symbol("elDescriptions");var Xp=se({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String,default:"td"},type:{type:String}},setup(){return{descriptions:ct(OT,{})}},render(){var n,e,t,i,s,r,o;const a=SX(this.cell),l=(((n=this.cell)==null?void 0:n.dirs)||[]).map(x=>{const{dir:S,arg:C,modifiers:T,value:M}=x;return[S,M,C,T]}),{border:c,direction:u}=this.descriptions,d=u==="vertical",h=((i=(t=(e=this.cell)==null?void 0:e.children)==null?void 0:t.label)==null?void 0:i.call(t))||a.label,f=(o=(r=(s=this.cell)==null?void 0:s.children)==null?void 0:r.default)==null?void 0:o.call(r),m=a.span,p=a.align?`is-${a.align}`:"",y=a.labelAlign?`is-${a.labelAlign}`:p,v=a.className,_=a.labelClassName,b={width:pi(a.width),minWidth:pi(a.minWidth)},w=Ve("descriptions");switch(this.type){case"label":return Bt(_t(this.tag,{style:b,class:[w.e("cell"),w.e("label"),w.is("bordered-label",c),w.is("vertical-label",d),y,_],colSpan:d?m:1},h),l);case"content":return Bt(_t(this.tag,{style:b,class:[w.e("cell"),w.e("content"),w.is("bordered-content",c),w.is("vertical-content",d),p,v],colSpan:d?m:m*2-1},f),l);default:return Bt(_t("td",{style:b,class:[w.e("cell"),p],colSpan:m},[os(h)?void 0:_t("span",{class:[w.e("label"),_]},h),_t("span",{class:[w.e("content"),v]},f)]),l)}}});const soe=Ye({row:{type:ge(Array),default:()=>[]}}),roe={key:1},ooe=se({name:"ElDescriptionsRow"}),aoe=se({...ooe,props:soe,setup(n){const e=ct(OT,{});return(t,i)=>g(e).direction==="vertical"?(k(),Y(mt,{key:0},[te("tr",null,[(k(!0),Y(mt,null,Zt(t.row,(s,r)=>(k(),Re(g(Xp),{key:`tr1-${r}`,cell:s,tag:"th",type:"label"},null,8,["cell"]))),128))]),te("tr",null,[(k(!0),Y(mt,null,Zt(t.row,(s,r)=>(k(),Re(g(Xp),{key:`tr2-${r}`,cell:s,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(k(),Y("tr",roe,[(k(!0),Y(mt,null,Zt(t.row,(s,r)=>(k(),Y(mt,{key:`tr3-${r}`},[g(e).border?(k(),Y(mt,{key:0},[le(g(Xp),{cell:s,tag:"td",type:"label"},null,8,["cell"]),le(g(Xp),{cell:s,tag:"td",type:"content"},null,8,["cell"])],64)):(k(),Re(g(Xp),{key:1,cell:s,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}});var loe=Ze(aoe,[["__file","descriptions-row.vue"]]);const coe=Ye({border:Boolean,column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:Zi,title:{type:String,default:""},extra:{type:String,default:""}}),uoe=se({name:"ElDescriptions"}),doe=se({...uoe,props:coe,setup(n){const e=n,t=Ve("descriptions"),i=Hi(),s=hs();Xt(OT,e);const r=R(()=>[t.b(),t.m(i.value)]),o=(l,c,u,d=!1)=>(l.props||(l.props={}),c>u&&(l.props.span=u),d&&(l.props.span=c),l),a=()=>{if(!s.default)return[];const l=Wc(s.default()).filter(f=>{var m;return((m=f==null?void 0:f.type)==null?void 0:m.name)==="ElDescriptionsItem"}),c=[];let u=[],d=e.column,h=0;return l.forEach((f,m)=>{var p;const y=((p=f.props)==null?void 0:p.span)||1;if(m<l.length-1&&(h+=y>d?d:y),m===l.length-1){const v=e.column-h%e.column;u.push(o(f,v,d,!0)),c.push(u);return}y<d?(d-=y,u.push(f)):(u.push(o(f,y,d)),c.push(u),d=e.column,u=[])}),c};return(l,c)=>(k(),Y("div",{class:z(g(r))},[l.title||l.extra||l.$slots.title||l.$slots.extra?(k(),Y("div",{key:0,class:z(g(t).e("header"))},[te("div",{class:z(g(t).e("title"))},[ke(l.$slots,"title",{},()=>[Yt(Je(l.title),1)])],2),te("div",{class:z(g(t).e("extra"))},[ke(l.$slots,"extra",{},()=>[Yt(Je(l.extra),1)])],2)],2)):Ee("v-if",!0),te("div",{class:z(g(t).e("body"))},[te("table",{class:z([g(t).e("table"),g(t).is("bordered",l.border)])},[te("tbody",null,[(k(!0),Y(mt,null,Zt(a(),(u,d)=>(k(),Re(loe,{key:d,row:u},null,8,["row"]))),128))])],2)],2)],2))}});var hoe=Ze(doe,[["__file","description.vue"]]);const foe=Ye({label:{type:String,default:""},span:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},align:{type:String,default:"left"},labelAlign:{type:String,default:""},className:{type:String,default:""},labelClassName:{type:String,default:""}}),PF=se({name:"ElDescriptionsItem",props:foe}),poe=Ht(hoe,{DescriptionsItem:PF}),moe=si(PF),goe=Ye({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:ge([String,Array,Object])},zIndex:{type:ge([String,Number])}}),voe={click:n=>n instanceof MouseEvent},yoe="overlay";var _oe=se({name:"ElOverlay",props:goe,emits:voe,setup(n,{slots:e,emit:t}){const i=Ve(yoe),s=l=>{t("click",l)},{onClick:r,onMousedown:o,onMouseup:a}=fT(n.customMaskEvent?void 0:s);return()=>n.mask?le("div",{class:[i.b(),n.overlayClass],style:{zIndex:n.zIndex},onClick:r,onMousedown:o,onMouseup:a},[ke(e,"default")],po.STYLE|po.CLASS|po.PROPS,["onClick","onMouseup","onMousedown"]):_t("div",{class:n.overlayClass,style:{zIndex:n.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[ke(e,"default")])}});const DT=_oe,LF=Symbol("dialogInjectionKey"),kF=Ye({center:Boolean,alignCenter:Boolean,closeIcon:{type:xn},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),boe={close:()=>!0},woe=["aria-level"],xoe=["aria-label"],Soe=["id"],Coe=se({name:"ElDialogContent"}),Moe=se({...Coe,props:kF,emits:boe,setup(n){const e=n,{t}=en(),{Close:i}=JE,{dialogRef:s,headerRef:r,bodyId:o,ns:a,style:l}=ct(LF),{focusTrapRef:c}=ct(MT),u=R(()=>[a.b(),a.is("fullscreen",e.fullscreen),a.is("draggable",e.draggable),a.is("align-center",e.alignCenter),{[a.m("center")]:e.center}]),d=R1(c,s),h=R(()=>e.draggable),f=R(()=>e.overflow);return MN(s,r,h,f),(m,p)=>(k(),Y("div",{ref:g(d),class:z(g(u)),style:pt(g(l)),tabindex:"-1"},[te("header",{ref_key:"headerRef",ref:r,class:z([g(a).e("header"),{"show-close":m.showClose}])},[ke(m.$slots,"header",{},()=>[te("span",{role:"heading","aria-level":m.ariaLevel,class:z(g(a).e("title"))},Je(m.title),11,woe)]),m.showClose?(k(),Y("button",{key:0,"aria-label":g(t)("el.dialog.close"),class:z(g(a).e("headerbtn")),type:"button",onClick:p[0]||(p[0]=y=>m.$emit("close"))},[le(g(dt),{class:z(g(a).e("close"))},{default:pe(()=>[(k(),Re(Wt(m.closeIcon||g(i))))]),_:1},8,["class"])],10,xoe)):Ee("v-if",!0)],2),te("div",{id:g(o),class:z(g(a).e("body"))},[ke(m.$slots,"default")],10,Soe),m.$slots.footer?(k(),Y("footer",{key:0,class:z(g(a).e("footer"))},[ke(m.$slots,"footer")],2)):Ee("v-if",!0)],6))}});var Eoe=Ze(Moe,[["__file","dialog-content.vue"]]);const OF=Ye({...kF,appendToBody:Boolean,appendTo:{type:ge(String),default:"body"},beforeClose:{type:ge(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),DF={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Gt]:n=>_i(n),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},NF=(n,e)=>{var t;const s=zt().emit,{nextZIndex:r}=Ip();let o="";const a=Ls(),l=Ls(),c=V(!1),u=V(!1),d=V(!1),h=V((t=n.zIndex)!=null?t:r());let f,m;const p=N1("namespace",Km),y=R(()=>{const U={},P=`--${p.value}-dialog`;return n.fullscreen||(n.top&&(U[`${P}-margin-top`]=n.top),n.width&&(U[`${P}-width`]=pi(n.width))),U}),v=R(()=>n.alignCenter?{display:"flex"}:{});function _(){s("opened")}function b(){s("closed"),s(Gt,!1),n.destroyOnClose&&(d.value=!1)}function w(){s("close")}function x(){m==null||m(),f==null||f(),n.openDelay&&n.openDelay>0?{stop:f}=Ud(()=>M(),n.openDelay):M()}function S(){f==null||f(),m==null||m(),n.closeDelay&&n.closeDelay>0?{stop:m}=Ud(()=>E(),n.closeDelay):E()}function C(){function U(P){P||(u.value=!0,c.value=!1)}n.beforeClose?n.beforeClose(U):S()}function T(){n.closeOnClickModal&&C()}function M(){Jt&&(c.value=!0)}function E(){c.value=!1}function A(){s("openAutoFocus")}function I(){s("closeAutoFocus")}function B(U){var P;((P=U.detail)==null?void 0:P.focusReason)==="pointer"&&U.preventDefault()}n.lockScroll&&sT(c);function F(){n.closeOnPressEscape&&C()}return ze(()=>n.modelValue,U=>{U?(u.value=!1,x(),d.value=!0,h.value=hN(n.zIndex)?r():h.value++,vt(()=>{s("open"),e.value&&(e.value.scrollTop=0)})):c.value&&S()}),ze(()=>n.fullscreen,U=>{e.value&&(U?(o=e.value.style.transform,e.value.style.transform=""):e.value.style.transform=o)}),Ft(()=>{n.modelValue&&(c.value=!0,d.value=!0,x())}),{afterEnter:_,afterLeave:b,beforeLeave:w,handleClose:C,onModalClick:T,close:S,doClose:E,onOpenAutoFocus:A,onCloseAutoFocus:I,onCloseRequested:F,onFocusoutPrevented:B,titleId:a,bodyId:l,closed:u,style:y,overlayDialogStyle:v,rendered:d,visible:c,zIndex:h}},Toe=["aria-label","aria-labelledby","aria-describedby"],Aoe=se({name:"ElDialog",inheritAttrs:!1}),Ioe=se({...Aoe,props:OF,emits:DF,setup(n,{expose:e}){const t=n,i=hs();ns({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},R(()=>!!i.title));const s=Ve("dialog"),r=V(),o=V(),a=V(),{visible:l,titleId:c,bodyId:u,style:d,overlayDialogStyle:h,rendered:f,zIndex:m,afterEnter:p,afterLeave:y,beforeLeave:v,handleClose:_,onModalClick:b,onOpenAutoFocus:w,onCloseAutoFocus:x,onCloseRequested:S,onFocusoutPrevented:C}=NF(t,r);Xt(LF,{dialogRef:r,headerRef:o,bodyId:u,ns:s,rendered:f,style:d});const T=fT(b),M=R(()=>t.draggable&&!t.fullscreen);return e({visible:l,dialogContentRef:a}),(E,A)=>(k(),Re(Sp,{to:E.appendTo,disabled:E.appendTo!=="body"?!1:!E.appendToBody},[le(ji,{name:"dialog-fade",onAfterEnter:g(p),onAfterLeave:g(y),onBeforeLeave:g(v),persisted:""},{default:pe(()=>[Bt(le(g(DT),{"custom-mask-event":"",mask:E.modal,"overlay-class":E.modalClass,"z-index":g(m)},{default:pe(()=>[te("div",{role:"dialog","aria-modal":"true","aria-label":E.title||void 0,"aria-labelledby":E.title?void 0:g(c),"aria-describedby":g(u),class:z(`${g(s).namespace.value}-overlay-dialog`),style:pt(g(h)),onClick:A[0]||(A[0]=(...I)=>g(T).onClick&&g(T).onClick(...I)),onMousedown:A[1]||(A[1]=(...I)=>g(T).onMousedown&&g(T).onMousedown(...I)),onMouseup:A[2]||(A[2]=(...I)=>g(T).onMouseup&&g(T).onMouseup(...I))},[le(g(Wv),{loop:"",trapped:g(l),"focus-start-el":"container",onFocusAfterTrapped:g(w),onFocusAfterReleased:g(x),onFocusoutPrevented:g(C),onReleaseRequested:g(S)},{default:pe(()=>[g(f)?(k(),Re(Eoe,Kt({key:0,ref_key:"dialogContentRef",ref:a},E.$attrs,{center:E.center,"align-center":E.alignCenter,"close-icon":E.closeIcon,draggable:g(M),overflow:E.overflow,fullscreen:E.fullscreen,"show-close":E.showClose,title:E.title,"aria-level":E.headerAriaLevel,onClose:g(_)}),Il({header:pe(()=>[E.$slots.title?ke(E.$slots,"title",{key:1}):ke(E.$slots,"header",{key:0,close:g(_),titleId:g(c),titleClass:g(s).e("title")})]),default:pe(()=>[ke(E.$slots,"default")]),_:2},[E.$slots.footer?{name:"footer",fn:pe(()=>[ke(E.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","show-close","title","aria-level","onClose"])):Ee("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,Toe)]),_:3},8,["mask","overlay-class","z-index"]),[[an,g(l)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["to","disabled"]))}});var Roe=Ze(Ioe,[["__file","dialog.vue"]]);const Poe=Ht(Roe),Loe=Ye({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:ge(String),default:"solid"}}),koe=se({name:"ElDivider"}),Ooe=se({...koe,props:Loe,setup(n){const e=n,t=Ve("divider"),i=R(()=>t.cssVar({"border-style":e.borderStyle}));return(s,r)=>(k(),Y("div",{class:z([g(t).b(),g(t).m(s.direction)]),style:pt(g(i)),role:"separator"},[s.$slots.default&&s.direction!=="vertical"?(k(),Y("div",{key:0,class:z([g(t).e("text"),g(t).is(s.contentPosition)])},[ke(s.$slots,"default")],2)):Ee("v-if",!0)],6))}});var Doe=Ze(Ooe,[["__file","divider.vue"]]);const FF=Ht(Doe),Noe=Ye({...OF,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),Foe=DF,Boe=["aria-label","aria-labelledby","aria-describedby"],Uoe=["id","aria-level"],zoe=["aria-label"],Hoe=["id"],Voe=se({name:"ElDrawer",inheritAttrs:!1}),$oe=se({...Voe,props:Noe,emits:Foe,setup(n,{expose:e}){const t=n,i=hs();ns({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},R(()=>!!i.title));const s=V(),r=V(),o=Ve("drawer"),{t:a}=en(),{afterEnter:l,afterLeave:c,beforeLeave:u,visible:d,rendered:h,titleId:f,bodyId:m,zIndex:p,onModalClick:y,onOpenAutoFocus:v,onCloseAutoFocus:_,onFocusoutPrevented:b,onCloseRequested:w,handleClose:x}=NF(t,s),S=R(()=>t.direction==="rtl"||t.direction==="ltr"),C=R(()=>pi(t.size));return e({handleClose:x,afterEnter:l,afterLeave:c}),(T,M)=>(k(),Re(Sp,{to:"body",disabled:!T.appendToBody},[le(ji,{name:g(o).b("fade"),onAfterEnter:g(l),onAfterLeave:g(c),onBeforeLeave:g(u),persisted:""},{default:pe(()=>[Bt(le(g(DT),{mask:T.modal,"overlay-class":T.modalClass,"z-index":g(p),onClick:g(y)},{default:pe(()=>[le(g(Wv),{loop:"",trapped:g(d),"focus-trap-el":s.value,"focus-start-el":r.value,onFocusAfterTrapped:g(v),onFocusAfterReleased:g(_),onFocusoutPrevented:g(b),onReleaseRequested:g(w)},{default:pe(()=>[te("div",Kt({ref_key:"drawerRef",ref:s,"aria-modal":"true","aria-label":T.title||void 0,"aria-labelledby":T.title?void 0:g(f),"aria-describedby":g(m)},T.$attrs,{class:[g(o).b(),T.direction,g(d)&&"open"],style:g(S)?"width: "+g(C):"height: "+g(C),role:"dialog",onClick:M[1]||(M[1]=Tt(()=>{},["stop"]))}),[te("span",{ref_key:"focusStartRef",ref:r,class:z(g(o).e("sr-focus")),tabindex:"-1"},null,2),T.withHeader?(k(),Y("header",{key:0,class:z(g(o).e("header"))},[T.$slots.title?ke(T.$slots,"title",{key:1},()=>[Ee(" DEPRECATED SLOT ")]):ke(T.$slots,"header",{key:0,close:g(x),titleId:g(f),titleClass:g(o).e("title")},()=>[T.$slots.title?Ee("v-if",!0):(k(),Y("span",{key:0,id:g(f),role:"heading","aria-level":T.headerAriaLevel,class:z(g(o).e("title"))},Je(T.title),11,Uoe))]),T.showClose?(k(),Y("button",{key:2,"aria-label":g(a)("el.drawer.close"),class:z(g(o).e("close-btn")),type:"button",onClick:M[0]||(M[0]=(...E)=>g(x)&&g(x)(...E))},[le(g(dt),{class:z(g(o).e("close"))},{default:pe(()=>[le(g(ia))]),_:1},8,["class"])],10,zoe)):Ee("v-if",!0)],2)):Ee("v-if",!0),g(h)?(k(),Y("div",{key:1,id:g(m),class:z(g(o).e("body"))},[ke(T.$slots,"default")],10,Hoe)):Ee("v-if",!0),T.$slots.footer?(k(),Y("div",{key:2,class:z(g(o).e("footer"))},[ke(T.$slots,"footer")],2)):Ee("v-if",!0)],16,Boe)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[an,g(d)]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var Goe=Ze($oe,[["__file","drawer.vue"]]);const Woe=Ht(Goe),Koe=se({inheritAttrs:!1});function Yoe(n,e,t,i,s,r){return ke(n.$slots,"default")}var Xoe=Ze(Koe,[["render",Yoe],["__file","collection.vue"]]);const joe=se({name:"ElCollectionItem",inheritAttrs:!1});function qoe(n,e,t,i,s,r){return ke(n.$slots,"default")}var Zoe=Ze(joe,[["render",qoe],["__file","collection-item.vue"]]);const BF="data-el-collection-item",UF=n=>{const e=`El${n}Collection`,t=`${e}Item`,i=Symbol(e),s=Symbol(t),r={...Xoe,name:e,setup(){const a=V(null),l=new Map;Xt(i,{itemMap:l,getItems:()=>{const u=g(a);if(!u)return[];const d=Array.from(u.querySelectorAll(`[${BF}]`));return[...l.values()].sort((f,m)=>d.indexOf(f.ref)-d.indexOf(m.ref))},collectionRef:a})}},o={...Zoe,name:t,setup(a,{attrs:l}){const c=V(null),u=ct(i,void 0);Xt(s,{collectionItemRef:c}),Ft(()=>{const d=g(c);d&&u.itemMap.set(d,{ref:d,...l})}),kn(()=>{const d=g(c);u.itemMap.delete(d)})}};return{COLLECTION_INJECTION_KEY:i,COLLECTION_ITEM_INJECTION_KEY:s,ElCollection:r,ElCollectionItem:o}},Joe=Ye({style:{type:ge([String,Array,Object])},currentTabId:{type:ge(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:ge(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:Qoe,ElCollectionItem:eae,COLLECTION_INJECTION_KEY:NT,COLLECTION_ITEM_INJECTION_KEY:tae}=UF("RovingFocusGroup"),FT=Symbol("elRovingFocusGroup"),zF=Symbol("elRovingFocusGroupItem"),nae={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},iae=(n,e)=>n,sae=(n,e,t)=>{const i=iae(n.key);return nae[i]},rae=(n,e)=>n.map((t,i)=>n[(i+e)%n.length]),BT=n=>{const{activeElement:e}=document;for(const t of n)if(t===e||(t.focus(),e!==document.activeElement))return},_P="currentTabIdChange",bP="rovingFocusGroup.entryFocus",oae={bubbles:!1,cancelable:!0},aae=se({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:Joe,emits:[_P,"entryFocus"],setup(n,{emit:e}){var t;const i=V((t=n.currentTabId||n.defaultCurrentTabId)!=null?t:null),s=V(!1),r=V(!1),o=V(null),{getItems:a}=ct(NT,void 0),l=R(()=>[{outline:"none"},n.style]),c=p=>{e(_P,p)},u=()=>{s.value=!0},d=hi(p=>{var y;(y=n.onMousedown)==null||y.call(n,p)},()=>{r.value=!0}),h=hi(p=>{var y;(y=n.onFocus)==null||y.call(n,p)},p=>{const y=!g(r),{target:v,currentTarget:_}=p;if(v===_&&y&&!g(s)){const b=new Event(bP,oae);if(_==null||_.dispatchEvent(b),!b.defaultPrevented){const w=a().filter(M=>M.focusable),x=w.find(M=>M.active),S=w.find(M=>M.id===g(i)),T=[x,S,...w].filter(Boolean).map(M=>M.ref);BT(T)}}r.value=!1}),f=hi(p=>{var y;(y=n.onBlur)==null||y.call(n,p)},()=>{s.value=!1}),m=(...p)=>{e("entryFocus",...p)};Xt(FT,{currentTabbedId:oh(i),loop:vn(n,"loop"),tabIndex:R(()=>g(s)?-1:0),rovingFocusGroupRef:o,rovingFocusGroupRootStyle:l,orientation:vn(n,"orientation"),dir:vn(n,"dir"),onItemFocus:c,onItemShiftTab:u,onBlur:f,onFocus:h,onMousedown:d}),ze(()=>n.currentTabId,p=>{i.value=p??null}),Dn(o,bP,m)}});function lae(n,e,t,i,s,r){return ke(n.$slots,"default")}var cae=Ze(aae,[["render",lae],["__file","roving-focus-group-impl.vue"]]);const uae=se({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:Qoe,ElRovingFocusGroupImpl:cae}});function dae(n,e,t,i,s,r){const o=Ut("el-roving-focus-group-impl"),a=Ut("el-focus-group-collection");return k(),Re(a,null,{default:pe(()=>[le(o,wl(Gf(n.$attrs)),{default:pe(()=>[ke(n.$slots,"default")]),_:3},16)]),_:3})}var hae=Ze(uae,[["render",dae],["__file","roving-focus-group.vue"]]);const fae=se({components:{ElRovingFocusCollectionItem:eae},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(n,{emit:e}){const{currentTabbedId:t,loop:i,onItemFocus:s,onItemShiftTab:r}=ct(FT,void 0),{getItems:o}=ct(NT,void 0),a=Ls(),l=V(null),c=hi(f=>{e("mousedown",f)},f=>{n.focusable?s(g(a)):f.preventDefault()}),u=hi(f=>{e("focus",f)},()=>{s(g(a))}),d=hi(f=>{e("keydown",f)},f=>{const{key:m,shiftKey:p,target:y,currentTarget:v}=f;if(m===wt.tab&&p){r();return}if(y!==v)return;const _=sae(f);if(_){f.preventDefault();let w=o().filter(x=>x.focusable).map(x=>x.ref);switch(_){case"last":{w.reverse();break}case"prev":case"next":{_==="prev"&&w.reverse();const x=w.indexOf(v);w=i.value?rae(w,x+1):w.slice(x+1);break}}vt(()=>{BT(w)})}}),h=R(()=>t.value===g(a));return Xt(zF,{rovingFocusGroupItemRef:l,tabIndex:R(()=>g(h)?0:-1),handleMousedown:c,handleFocus:u,handleKeydown:d}),{id:a,handleKeydown:d,handleFocus:u,handleMousedown:c}}});function pae(n,e,t,i,s,r){const o=Ut("el-roving-focus-collection-item");return k(),Re(o,{id:n.id,focusable:n.focusable,active:n.active},{default:pe(()=>[ke(n.$slots,"default")]),_:3},8,["id","focusable","active"])}var mae=Ze(fae,[["render",pae],["__file","roving-focus-item.vue"]]);const f_=Ye({trigger:kg.trigger,effect:{...rs.effect,default:"light"},type:{type:ge(String)},placement:{type:ge(String),default:"bottom"},popperOptions:{type:ge(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:ge([Number,String]),default:0},maxHeight:{type:ge([Number,String]),default:""},popperClass:{type:String,default:""},disabled:Boolean,role:{type:String,default:"menu"},buttonProps:{type:ge(Object)},teleported:rs.teleported}),HF=Ye({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:xn}}),gae=Ye({onKeydown:{type:ge(Function)}}),vae=[wt.down,wt.pageDown,wt.home],VF=[wt.up,wt.pageUp,wt.end],yae=[...vae,...VF],{ElCollection:_ae,ElCollectionItem:bae,COLLECTION_INJECTION_KEY:wae,COLLECTION_ITEM_INJECTION_KEY:xae}=UF("Dropdown"),H1=Symbol("elDropdown"),{ButtonGroup:Sae}=as,Cae=se({name:"ElDropdown",components:{ElButton:as,ElButtonGroup:Sae,ElScrollbar:Zl,ElDropdownCollection:_ae,ElTooltip:Zs,ElRovingFocusGroup:hae,ElOnlyChild:p4,ElIcon:dt,ArrowDown:jl},props:f_,emits:["visible-change","click","command"],setup(n,{emit:e}){const t=zt(),i=Ve("dropdown"),{t:s}=en(),r=V(),o=V(),a=V(null),l=V(null),c=V(null),u=V(null),d=V(!1),h=[wt.enter,wt.space,wt.down],f=R(()=>({maxHeight:pi(n.maxHeight)})),m=R(()=>[i.m(x.value)]),p=R(()=>Jc(n.trigger)),y=Ls().value,v=R(()=>n.id||y);ze([r,p],([O,D],[L])=>{var H,X,ne;(H=L==null?void 0:L.$el)!=null&&H.removeEventListener&&L.$el.removeEventListener("pointerenter",C),(X=O==null?void 0:O.$el)!=null&&X.removeEventListener&&O.$el.removeEventListener("pointerenter",C),(ne=O==null?void 0:O.$el)!=null&&ne.addEventListener&&D.includes("hover")&&O.$el.addEventListener("pointerenter",C)},{immediate:!0}),kn(()=>{var O,D;(D=(O=r.value)==null?void 0:O.$el)!=null&&D.removeEventListener&&r.value.$el.removeEventListener("pointerenter",C)});function _(){b()}function b(){var O;(O=a.value)==null||O.onClose()}function w(){var O;(O=a.value)==null||O.onOpen()}const x=Hi();function S(...O){e("command",...O)}function C(){var O,D;(D=(O=r.value)==null?void 0:O.$el)==null||D.focus()}function T(){}function M(){const O=g(l);p.value.includes("hover")&&(O==null||O.focus()),u.value=null}function E(O){u.value=O}function A(O){d.value||(O.preventDefault(),O.stopImmediatePropagation())}function I(){e("visible-change",!0)}function B(O){(O==null?void 0:O.type)==="keydown"&&l.value.focus()}function F(){e("visible-change",!1)}return Xt(H1,{contentRef:l,role:R(()=>n.role),triggerId:v,isUsingKeyboard:d,onItemEnter:T,onItemLeave:M}),Xt("elDropdown",{instance:t,dropdownSize:x,handleClick:_,commandHandler:S,trigger:vn(n,"trigger"),hideOnClick:vn(n,"hideOnClick")}),{t:s,ns:i,scrollbar:c,wrapStyle:f,dropdownTriggerKls:m,dropdownSize:x,triggerId:v,triggerKeys:h,currentTabId:u,handleCurrentTabIdChange:E,handlerMainButtonClick:O=>{e("click",O)},handleEntryFocus:A,handleClose:b,handleOpen:w,handleBeforeShowTooltip:I,handleShowTooltip:B,handleBeforeHideTooltip:F,onFocusAfterTrapped:O=>{var D,L;O.preventDefault(),(L=(D=l.value)==null?void 0:D.focus)==null||L.call(D,{preventScroll:!0})},popperRef:a,contentRef:l,triggeringElementRef:r,referenceElementRef:o}}});function Mae(n,e,t,i,s,r){var o;const a=Ut("el-dropdown-collection"),l=Ut("el-roving-focus-group"),c=Ut("el-scrollbar"),u=Ut("el-only-child"),d=Ut("el-tooltip"),h=Ut("el-button"),f=Ut("arrow-down"),m=Ut("el-icon"),p=Ut("el-button-group");return k(),Y("div",{class:z([n.ns.b(),n.ns.is("disabled",n.disabled)])},[le(d,{ref:"popperRef",role:n.role,effect:n.effect,"fallback-placements":["bottom","top"],"popper-options":n.popperOptions,"gpu-acceleration":!1,"hide-after":n.trigger==="hover"?n.hideTimeout:0,"manual-mode":!0,placement:n.placement,"popper-class":[n.ns.e("popper"),n.popperClass],"reference-element":(o=n.referenceElementRef)==null?void 0:o.$el,trigger:n.trigger,"trigger-keys":n.triggerKeys,"trigger-target-el":n.contentRef,"show-after":n.trigger==="hover"?n.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":n.triggeringElementRef,"virtual-triggering":n.splitButton,disabled:n.disabled,transition:`${n.ns.namespace.value}-zoom-in-top`,teleported:n.teleported,pure:"",persistent:"",onBeforeShow:n.handleBeforeShowTooltip,onShow:n.handleShowTooltip,onBeforeHide:n.handleBeforeHideTooltip},Il({content:pe(()=>[le(c,{ref:"scrollbar","wrap-style":n.wrapStyle,tag:"div","view-class":n.ns.e("list")},{default:pe(()=>[le(l,{loop:n.loop,"current-tab-id":n.currentTabId,orientation:"horizontal",onCurrentTabIdChange:n.handleCurrentTabIdChange,onEntryFocus:n.handleEntryFocus},{default:pe(()=>[le(a,null,{default:pe(()=>[ke(n.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[n.splitButton?void 0:{name:"default",fn:pe(()=>[le(u,{id:n.triggerId,ref:"triggeringElementRef",role:"button",tabindex:n.tabindex},{default:pe(()=>[ke(n.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),n.splitButton?(k(),Re(p,{key:0},{default:pe(()=>[le(h,Kt({ref:"referenceElementRef"},n.buttonProps,{size:n.dropdownSize,type:n.type,disabled:n.disabled,tabindex:n.tabindex,onClick:n.handlerMainButtonClick}),{default:pe(()=>[ke(n.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),le(h,Kt({id:n.triggerId,ref:"triggeringElementRef"},n.buttonProps,{role:"button",size:n.dropdownSize,type:n.type,class:n.ns.e("caret-button"),disabled:n.disabled,tabindex:n.tabindex,"aria-label":n.t("el.dropdown.toggleDropdown")}),{default:pe(()=>[le(m,{class:z(n.ns.e("icon"))},{default:pe(()=>[le(f)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):Ee("v-if",!0)],2)}var Eae=Ze(Cae,[["render",Mae],["__file","dropdown.vue"]]);const Tae=se({name:"DropdownItemImpl",components:{ElIcon:dt},props:HF,emits:["pointermove","pointerleave","click","clickimpl"],setup(n,{emit:e}){const t=Ve("dropdown"),{role:i}=ct(H1,void 0),{collectionItemRef:s}=ct(xae,void 0),{collectionItemRef:r}=ct(tae,void 0),{rovingFocusGroupItemRef:o,tabIndex:a,handleFocus:l,handleKeydown:c,handleMousedown:u}=ct(zF,void 0),d=R1(s,r,o),h=R(()=>i.value==="menu"?"menuitem":i.value==="navigation"?"link":"button"),f=hi(m=>{const{code:p}=m;if(p===wt.enter||p===wt.space)return m.preventDefault(),m.stopImmediatePropagation(),e("clickimpl",m),!0},c);return{ns:t,itemRef:d,dataset:{[BF]:""},role:h,tabIndex:a,handleFocus:l,handleKeydown:f,handleMousedown:u}}}),Aae=["aria-disabled","tabindex","role"];function Iae(n,e,t,i,s,r){const o=Ut("el-icon");return k(),Y(mt,null,[n.divided?(k(),Y("li",Kt({key:0,role:"separator",class:n.ns.bem("menu","item","divided")},n.$attrs),null,16)):Ee("v-if",!0),te("li",Kt({ref:n.itemRef},{...n.dataset,...n.$attrs},{"aria-disabled":n.disabled,class:[n.ns.be("menu","item"),n.ns.is("disabled",n.disabled)],tabindex:n.tabIndex,role:n.role,onClick:e[0]||(e[0]=a=>n.$emit("clickimpl",a)),onFocus:e[1]||(e[1]=(...a)=>n.handleFocus&&n.handleFocus(...a)),onKeydown:e[2]||(e[2]=Tt((...a)=>n.handleKeydown&&n.handleKeydown(...a),["self"])),onMousedown:e[3]||(e[3]=(...a)=>n.handleMousedown&&n.handleMousedown(...a)),onPointermove:e[4]||(e[4]=a=>n.$emit("pointermove",a)),onPointerleave:e[5]||(e[5]=a=>n.$emit("pointerleave",a))}),[n.icon?(k(),Re(o,{key:0},{default:pe(()=>[(k(),Re(Wt(n.icon)))]),_:1})):Ee("v-if",!0),ke(n.$slots,"default")],16,Aae)],64)}var Rae=Ze(Tae,[["render",Iae],["__file","dropdown-item-impl.vue"]]);const $F=()=>{const n=ct("elDropdown",{}),e=R(()=>n==null?void 0:n.dropdownSize);return{elDropdown:n,_elDropdownSize:e}},Pae=se({name:"ElDropdownItem",components:{ElDropdownCollectionItem:bae,ElRovingFocusItem:mae,ElDropdownItemImpl:Rae},inheritAttrs:!1,props:HF,emits:["pointermove","pointerleave","click"],setup(n,{emit:e,attrs:t}){const{elDropdown:i}=$F(),s=zt(),r=V(null),o=R(()=>{var f,m;return(m=(f=g(r))==null?void 0:f.textContent)!=null?m:""}),{onItemEnter:a,onItemLeave:l}=ct(H1,void 0),c=hi(f=>(e("pointermove",f),f.defaultPrevented),mI(f=>{if(n.disabled){l(f);return}const m=f.currentTarget;m===document.activeElement||m.contains(document.activeElement)||(a(f),f.defaultPrevented||m==null||m.focus())})),u=hi(f=>(e("pointerleave",f),f.defaultPrevented),mI(f=>{l(f)})),d=hi(f=>{if(!n.disabled)return e("click",f),f.type!=="keydown"&&f.defaultPrevented},f=>{var m,p,y;if(n.disabled){f.stopImmediatePropagation();return}(m=i==null?void 0:i.hideOnClick)!=null&&m.value&&((p=i.handleClick)==null||p.call(i)),(y=i.commandHandler)==null||y.call(i,n.command,s,f)}),h=R(()=>({...n,...t}));return{handleClick:d,handlePointerMove:c,handlePointerLeave:u,textContent:o,propsAndAttrs:h}}});function Lae(n,e,t,i,s,r){var o;const a=Ut("el-dropdown-item-impl"),l=Ut("el-roving-focus-item"),c=Ut("el-dropdown-collection-item");return k(),Re(c,{disabled:n.disabled,"text-value":(o=n.textValue)!=null?o:n.textContent},{default:pe(()=>[le(l,{focusable:!n.disabled},{default:pe(()=>[le(a,Kt(n.propsAndAttrs,{onPointerleave:n.handlePointerLeave,onPointermove:n.handlePointerMove,onClickimpl:n.handleClick}),{default:pe(()=>[ke(n.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var GF=Ze(Pae,[["render",Lae],["__file","dropdown-item.vue"]]);const kae=se({name:"ElDropdownMenu",props:gae,setup(n){const e=Ve("dropdown"),{_elDropdownSize:t}=$F(),i=t.value,{focusTrapRef:s,onKeydown:r}=ct(MT,void 0),{contentRef:o,role:a,triggerId:l}=ct(H1,void 0),{collectionRef:c,getItems:u}=ct(wae,void 0),{rovingFocusGroupRef:d,rovingFocusGroupRootStyle:h,tabIndex:f,onBlur:m,onFocus:p,onMousedown:y}=ct(FT,void 0),{collectionRef:v}=ct(NT,void 0),_=R(()=>[e.b("menu"),e.bm("menu",i==null?void 0:i.value)]),b=R1(o,c,s,d,v),w=hi(S=>{var C;(C=n.onKeydown)==null||C.call(n,S)},S=>{const{currentTarget:C,code:T,target:M}=S;if(C.contains(M),wt.tab===T&&S.stopImmediatePropagation(),S.preventDefault(),M!==g(o)||!yae.includes(T))return;const A=u().filter(I=>!I.disabled).map(I=>I.ref);VF.includes(T)&&A.reverse(),BT(A)});return{size:i,rovingFocusGroupRootStyle:h,tabIndex:f,dropdownKls:_,role:a,triggerId:l,dropdownListWrapperRef:b,handleKeydown:S=>{w(S),r(S)},onBlur:m,onFocus:p,onMousedown:y}}}),Oae=["role","aria-labelledby"];function Dae(n,e,t,i,s,r){return k(),Y("ul",{ref:n.dropdownListWrapperRef,class:z(n.dropdownKls),style:pt(n.rovingFocusGroupRootStyle),tabindex:-1,role:n.role,"aria-labelledby":n.triggerId,onBlur:e[0]||(e[0]=(...o)=>n.onBlur&&n.onBlur(...o)),onFocus:e[1]||(e[1]=(...o)=>n.onFocus&&n.onFocus(...o)),onKeydown:e[2]||(e[2]=Tt((...o)=>n.handleKeydown&&n.handleKeydown(...o),["self"])),onMousedown:e[3]||(e[3]=Tt((...o)=>n.onMousedown&&n.onMousedown(...o),["self"]))},[ke(n.$slots,"default")],46,Oae)}var WF=Ze(kae,[["render",Dae],["__file","dropdown-menu.vue"]]);const Nae=Ht(Eae,{DropdownItem:GF,DropdownMenu:WF}),Fae=si(GF),Bae=si(WF),Uae={viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},zae=["id"],Hae=["stop-color"],Vae=["stop-color"],$ae=["id"],Gae=["stop-color"],Wae=["stop-color"],Kae=["id"],Yae={id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},Xae={id:"B-type",transform:"translate(-1268.000000, -535.000000)"},jae={id:"Group-2",transform:"translate(1268.000000, 535.000000)"},qae=["fill"],Zae=["fill"],Jae={id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},Qae=["fill"],ele=["fill"],tle=["fill"],nle=["fill"],ile=["fill"],sle={id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"},rle=["fill","xlink:href"],ole=["fill","mask"],ale=["fill"],lle=se({name:"ImgEmpty"}),cle=se({...lle,setup(n){const e=Ve("empty"),t=Ls();return(i,s)=>(k(),Y("svg",Uae,[te("defs",null,[te("linearGradient",{id:`linearGradient-1-${g(t)}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},[te("stop",{"stop-color":`var(${g(e).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,Hae),te("stop",{"stop-color":`var(${g(e).cssVarBlockName("fill-color-4")})`,offset:"100%"},null,8,Vae)],8,zae),te("linearGradient",{id:`linearGradient-2-${g(t)}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},[te("stop",{"stop-color":`var(${g(e).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,Gae),te("stop",{"stop-color":`var(${g(e).cssVarBlockName("fill-color-6")})`,offset:"100%"},null,8,Wae)],8,$ae),te("rect",{id:`path-3-${g(t)}`,x:"0",y:"0",width:"17",height:"36"},null,8,Kae)]),te("g",Yae,[te("g",Xae,[te("g",jae,[te("path",{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:`var(${g(e).cssVarBlockName("fill-color-3")})`},null,8,qae),te("polygon",{id:"Rectangle-Copy-14",fill:`var(${g(e).cssVarBlockName("fill-color-7")})`,transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,8,Zae),te("g",Jae,[te("polygon",{id:"Rectangle-Copy-10",fill:`var(${g(e).cssVarBlockName("fill-color-7")})`,transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,8,Qae),te("polygon",{id:"Rectangle-Copy-11",fill:`var(${g(e).cssVarBlockName("fill-color-5")})`,points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,8,ele),te("rect",{id:"Rectangle-Copy-12",fill:`url(#linearGradient-1-${g(t)})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,tle),te("polygon",{id:"Rectangle-Copy-13",fill:`var(${g(e).cssVarBlockName("fill-color-2")})`,transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,8,nle)]),te("rect",{id:"Rectangle-Copy-15",fill:`url(#linearGradient-2-${g(t)})`,x:"13",y:"45",width:"40",height:"36"},null,8,ile),te("g",sle,[te("use",{id:"Mask",fill:`var(${g(e).cssVarBlockName("fill-color-8")})`,transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${g(t)}`},null,8,rle),te("polygon",{id:"Rectangle-Copy",fill:`var(${g(e).cssVarBlockName("fill-color-9")})`,mask:`url(#mask-4-${g(t)})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 7 16.5"},null,8,ole)]),te("polygon",{id:"Rectangle-Copy-18",fill:`var(${g(e).cssVarBlockName("fill-color-2")})`,transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,8,ale)])])])]))}});var ule=Ze(cle,[["__file","img-empty.vue"]]);const dle=Ye({image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}}),hle=["src"],fle={key:1},ple=se({name:"ElEmpty"}),mle=se({...ple,props:dle,setup(n){const e=n,{t}=en(),i=Ve("empty"),s=R(()=>e.description||t("el.table.emptyText")),r=R(()=>({width:pi(e.imageSize)}));return(o,a)=>(k(),Y("div",{class:z(g(i).b())},[te("div",{class:z(g(i).e("image")),style:pt(g(r))},[o.image?(k(),Y("img",{key:0,src:o.image,ondragstart:"return false"},null,8,hle)):ke(o.$slots,"image",{key:1},()=>[le(ule)])],6),te("div",{class:z(g(i).e("description"))},[o.$slots.description?ke(o.$slots,"description",{key:0}):(k(),Y("p",fle,Je(g(s)),1))],2),o.$slots.default?(k(),Y("div",{key:0,class:z(g(i).e("bottom"))},[ke(o.$slots,"default")],2)):Ee("v-if",!0)],2))}});var gle=Ze(mle,[["__file","empty.vue"]]);const KF=Ht(gle),vle=Ye({urlList:{type:ge(Array),default:()=>ni([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:ge(String)}}),yle={close:()=>!0,switch:n=>Ct(n),rotate:n=>Ct(n)},_le=["src","crossorigin"],ble=se({name:"ElImageViewer"}),wle=se({...ble,props:vle,emits:yle,setup(n,{expose:e,emit:t}){var i;const s=n,r={CONTAIN:{name:"contain",icon:El(IY)},ORIGINAL:{name:"original",icon:El(JY)}},{t:o}=en(),a=Ve("image-viewer"),{nextZIndex:l}=Ip(),c=V(),u=V([]),d=M8(),h=V(!0),f=V(s.initialIndex),m=Vn(r.CONTAIN),p=V({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),y=V((i=s.zIndex)!=null?i:l()),v=R(()=>{const{urlList:H}=s;return H.length<=1}),_=R(()=>f.value===0),b=R(()=>f.value===s.urlList.length-1),w=R(()=>s.urlList[f.value]),x=R(()=>[a.e("btn"),a.e("prev"),a.is("disabled",!s.infinite&&_.value)]),S=R(()=>[a.e("btn"),a.e("next"),a.is("disabled",!s.infinite&&b.value)]),C=R(()=>{const{scale:H,deg:X,offsetX:ne,offsetY:ce,enableTransition:ae}=p.value;let _e=ne/H,re=ce/H;switch(X%360){case 90:case-270:[_e,re]=[re,-_e];break;case 180:case-180:[_e,re]=[-_e,-re];break;case 270:case-90:[_e,re]=[-re,_e];break}const xe={transform:`scale(${H}) rotate(${X}deg) translate(${_e}px, ${re}px)`,transition:ae?"transform .3s":""};return m.value.name===r.CONTAIN.name&&(xe.maxWidth=xe.maxHeight="100%"),xe});function T(){E(),t("close")}function M(){const H=yd(ne=>{switch(ne.code){case wt.esc:s.closeOnPressEscape&&T();break;case wt.space:U();break;case wt.left:O();break;case wt.up:L("zoomIn");break;case wt.right:D();break;case wt.down:L("zoomOut");break}}),X=yd(ne=>{const ce=ne.deltaY||ne.deltaX;L(ce<0?"zoomIn":"zoomOut",{zoomRate:s.zoomRate,enableTransition:!1})});d.run(()=>{Dn(document,"keydown",H),Dn(document,"wheel",X)})}function E(){d.stop()}function A(){h.value=!1}function I(H){h.value=!1,H.target.alt=o("el.image.error")}function B(H){if(h.value||H.button!==0||!c.value)return;p.value.enableTransition=!1;const{offsetX:X,offsetY:ne}=p.value,ce=H.pageX,ae=H.pageY,_e=yd(xe=>{p.value={...p.value,offsetX:X+xe.pageX-ce,offsetY:ne+xe.pageY-ae}}),re=Dn(document,"mousemove",_e);Dn(document,"mouseup",()=>{re()}),H.preventDefault()}function F(){p.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function U(){if(h.value)return;const H=jf(r),X=Object.values(r),ne=m.value.name,ae=(X.findIndex(_e=>_e.name===ne)+1)%H.length;m.value=r[H[ae]],F()}function P(H){const X=s.urlList.length;f.value=(H+X)%X}function O(){_.value&&!s.infinite||P(f.value-1)}function D(){b.value&&!s.infinite||P(f.value+1)}function L(H,X={}){if(h.value)return;const{minScale:ne,maxScale:ce}=s,{zoomRate:ae,rotateDeg:_e,enableTransition:re}={zoomRate:s.zoomRate,rotateDeg:90,enableTransition:!0,...X};switch(H){case"zoomOut":p.value.scale>ne&&(p.value.scale=Number.parseFloat((p.value.scale/ae).toFixed(3)));break;case"zoomIn":p.value.scale<ce&&(p.value.scale=Number.parseFloat((p.value.scale*ae).toFixed(3)));break;case"clockwise":p.value.deg+=_e,t("rotate",p.value.deg);break;case"anticlockwise":p.value.deg-=_e,t("rotate",p.value.deg);break}p.value.enableTransition=re}return ze(w,()=>{vt(()=>{const H=u.value[0];H!=null&&H.complete||(h.value=!0)})}),ze(f,H=>{F(),t("switch",H)}),Ft(()=>{var H,X;M(),(X=(H=c.value)==null?void 0:H.focus)==null||X.call(H)}),e({setActiveItem:P}),(H,X)=>(k(),Re(Sp,{to:"body",disabled:!H.teleported},[le(ji,{name:"viewer-fade",appear:""},{default:pe(()=>[te("div",{ref_key:"wrapper",ref:c,tabindex:-1,class:z(g(a).e("wrapper")),style:pt({zIndex:y.value})},[te("div",{class:z(g(a).e("mask")),onClick:X[0]||(X[0]=Tt(ne=>H.hideOnClickModal&&T(),["self"]))},null,2),Ee(" CLOSE "),te("span",{class:z([g(a).e("btn"),g(a).e("close")]),onClick:T},[le(g(dt),null,{default:pe(()=>[le(g(ia))]),_:1})],2),Ee(" ARROW "),g(v)?Ee("v-if",!0):(k(),Y(mt,{key:0},[te("span",{class:z(g(x)),onClick:O},[le(g(dt),null,{default:pe(()=>[le(g(eu))]),_:1})],2),te("span",{class:z(g(S)),onClick:D},[le(g(dt),null,{default:pe(()=>[le(g(ur))]),_:1})],2)],64)),Ee(" ACTIONS "),te("div",{class:z([g(a).e("btn"),g(a).e("actions")])},[te("div",{class:z(g(a).e("actions__inner"))},[le(g(dt),{onClick:X[1]||(X[1]=ne=>L("zoomOut"))},{default:pe(()=>[le(g(vX))]),_:1}),le(g(dt),{onClick:X[2]||(X[2]=ne=>L("zoomIn"))},{default:pe(()=>[le(g(wN))]),_:1}),te("i",{class:z(g(a).e("actions__divider"))},null,2),le(g(dt),{onClick:U},{default:pe(()=>[(k(),Re(Wt(g(m).icon)))]),_:1}),te("i",{class:z(g(a).e("actions__divider"))},null,2),le(g(dt),{onClick:X[3]||(X[3]=ne=>L("anticlockwise"))},{default:pe(()=>[le(g(XY))]),_:1}),le(g(dt),{onClick:X[4]||(X[4]=ne=>L("clockwise"))},{default:pe(()=>[le(g(qY))]),_:1})],2)],2),Ee(" CANVAS "),te("div",{class:z(g(a).e("canvas"))},[(k(!0),Y(mt,null,Zt(H.urlList,(ne,ce)=>Bt((k(),Y("img",{ref_for:!0,ref:ae=>u.value[ce]=ae,key:ne,src:ne,style:pt(g(C)),class:z(g(a).e("img")),crossorigin:H.crossorigin,onLoad:A,onError:I,onMousedown:B},null,46,_le)),[[an,ce===f.value]])),128))],2),ke(H.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var xle=Ze(wle,[["__file","image-viewer.vue"]]);const YF=Ht(xle),Sle=Ye({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:ge([String,Object])},previewSrcList:{type:ge(Array),default:()=>ni([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:ge(String)}}),Cle={load:n=>n instanceof Event,error:n=>n instanceof Event,switch:n=>Ct(n),close:()=>!0,show:()=>!0},Mle=["src","loading","crossorigin"],Ele={key:0},Tle=se({name:"ElImage",inheritAttrs:!1}),Ale=se({...Tle,props:Sle,emits:Cle,setup(n,{emit:e}){const t=n;let i="";const{t:s}=en(),r=Ve("image"),o=ah(),a=nT(),l=V(),c=V(!1),u=V(!0),d=V(!1),h=V(),f=V(),m=Jt&&"loading"in HTMLImageElement.prototype;let p,y;const v=R(()=>[r.e("inner"),w.value&&r.e("preview"),u.value&&r.is("loading")]),_=R(()=>o.style),b=R(()=>{const{fit:D}=t;return Jt&&D?{objectFit:D}:{}}),w=R(()=>{const{previewSrcList:D}=t;return Array.isArray(D)&&D.length>0}),x=R(()=>{const{previewSrcList:D,initialIndex:L}=t;let H=L;return L>D.length-1&&(H=0),H}),S=R(()=>t.loading==="eager"?!1:!m&&t.loading==="lazy"||t.lazy),C=()=>{Jt&&(u.value=!0,c.value=!1,l.value=t.src)};function T(D){u.value=!1,c.value=!1,e("load",D)}function M(D){u.value=!1,c.value=!0,e("error",D)}function E(){b$(h.value,f.value)&&(C(),B())}const A=SD(E,200,!0);async function I(){var D;if(!Jt)return;await vt();const{scrollContainer:L}=t;Lo(L)?f.value=L:Rt(L)&&L!==""?f.value=(D=document.querySelector(L))!=null?D:void 0:h.value&&(f.value=YE(h.value)),f.value&&(p=Dn(f,"scroll",A),setTimeout(()=>E(),100))}function B(){!Jt||!f.value||!A||(p==null||p(),f.value=void 0)}function F(D){if(D.ctrlKey){if(D.deltaY<0)return D.preventDefault(),!1;if(D.deltaY>0)return D.preventDefault(),!1}}function U(){w.value&&(y=Dn("wheel",F,{passive:!1}),i=document.body.style.overflow,document.body.style.overflow="hidden",d.value=!0,e("show"))}function P(){y==null||y(),document.body.style.overflow=i,d.value=!1,e("close")}function O(D){e("switch",D)}return ze(()=>t.src,()=>{S.value?(u.value=!0,c.value=!1,B(),I()):C()}),Ft(()=>{S.value?I():C()}),(D,L)=>(k(),Y("div",{ref_key:"container",ref:h,class:z([g(r).b(),D.$attrs.class]),style:pt(g(_))},[c.value?ke(D.$slots,"error",{key:0},()=>[te("div",{class:z(g(r).e("error"))},Je(g(s)("el.image.error")),3)]):(k(),Y(mt,{key:1},[l.value!==void 0?(k(),Y("img",Kt({key:0},g(a),{src:l.value,loading:D.loading,style:g(b),class:g(v),crossorigin:D.crossorigin,onClick:U,onLoad:T,onError:M}),null,16,Mle)):Ee("v-if",!0),u.value?(k(),Y("div",{key:1,class:z(g(r).e("wrapper"))},[ke(D.$slots,"placeholder",{},()=>[te("div",{class:z(g(r).e("placeholder"))},null,2)])],2)):Ee("v-if",!0)],64)),g(w)?(k(),Y(mt,{key:2},[d.value?(k(),Re(g(YF),{key:0,"z-index":D.zIndex,"initial-index":g(x),infinite:D.infinite,"zoom-rate":D.zoomRate,"min-scale":D.minScale,"max-scale":D.maxScale,"url-list":D.previewSrcList,crossorigin:D.crossorigin,"hide-on-click-modal":D.hideOnClickModal,teleported:D.previewTeleported,"close-on-press-escape":D.closeOnPressEscape,onClose:P,onSwitch:O},{default:pe(()=>[D.$slots.viewer?(k(),Y("div",Ele,[ke(D.$slots,"viewer")])):Ee("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):Ee("v-if",!0)],64)):Ee("v-if",!0)],6))}});var Ile=Ze(Ale,[["__file","image.vue"]]);const Rle=Ht(Ile),Ple=Ye({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:Zi,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:n=>n===null||Ct(n)||["min","max"].includes(n),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:n=>n>=0&&n===Number.parseInt(`${n}`,10)},validateEvent:{type:Boolean,default:!0},...Ss(["ariaLabel"])}),Lle={[Fn]:(n,e)=>e!==n,blur:n=>n instanceof FocusEvent,focus:n=>n instanceof FocusEvent,[dr]:n=>Ct(n)||os(n),[Gt]:n=>Ct(n)||os(n)},kle=["aria-label","onKeydown"],Ole=["aria-label","onKeydown"],Dle=se({name:"ElInputNumber"}),Nle=se({...Dle,props:Ple,emits:Lle,setup(n,{expose:e,emit:t}){const i=n,{t:s}=en(),r=Ve("input-number"),o=V(),a=un({currentValue:i.modelValue,userInput:null}),{formItem:l}=Qs(),c=R(()=>Ct(i.modelValue)&&i.modelValue<=i.min),u=R(()=>Ct(i.modelValue)&&i.modelValue>=i.max),d=R(()=>{const U=v(i.step);return ki(i.precision)?Math.max(v(i.modelValue),U):(U>i.precision,i.precision)}),h=R(()=>i.controls&&i.controlsPosition==="right"),f=Hi(),m=mr(),p=R(()=>{if(a.userInput!==null)return a.userInput;let U=a.currentValue;if(os(U))return"";if(Ct(U)){if(Number.isNaN(U))return"";ki(i.precision)||(U=U.toFixed(i.precision))}return U}),y=(U,P)=>{if(ki(P)&&(P=d.value),P===0)return Math.round(U);let O=String(U);const D=O.indexOf(".");if(D===-1||!O.replace(".","").split("")[D+P])return U;const X=O.length;return O.charAt(X-1)==="5"&&(O=`${O.slice(0,Math.max(0,X-1))}6`),Number.parseFloat(Number(O).toFixed(P))},v=U=>{if(os(U))return 0;const P=U.toString(),O=P.indexOf(".");let D=0;return O!==-1&&(D=P.length-O-1),D},_=(U,P=1)=>Ct(U)?y(U+i.step*P):a.currentValue,b=()=>{if(i.readonly||m.value||u.value)return;const U=Number(p.value)||0,P=_(U);S(P),t(dr,a.currentValue),B()},w=()=>{if(i.readonly||m.value||c.value)return;const U=Number(p.value)||0,P=_(U,-1);S(P),t(dr,a.currentValue),B()},x=(U,P)=>{const{max:O,min:D,step:L,precision:H,stepStrictly:X,valueOnClear:ne}=i;O<D&&qi("InputNumber","min should not be greater than max.");let ce=Number(U);if(os(U)||Number.isNaN(ce))return null;if(U===""){if(ne===null)return null;ce=Rt(ne)?{min:D,max:O}[ne]:ne}return X&&(ce=y(Math.round(ce/L)*L,H)),ki(H)||(ce=y(ce,H)),(ce>O||ce<D)&&(ce=ce>O?O:D,P&&t(Gt,ce)),ce},S=(U,P=!0)=>{var O;const D=a.currentValue,L=x(U);if(!P){t(Gt,L);return}D===L&&U||(a.userInput=null,t(Gt,L),D!==L&&t(Fn,L,D),i.validateEvent&&((O=l==null?void 0:l.validate)==null||O.call(l,"change").catch(H=>void 0)),a.currentValue=L)},C=U=>{a.userInput=U;const P=U===""?null:Number(U);t(dr,P),S(P,!1)},T=U=>{const P=U!==""?Number(U):"";(Ct(P)&&!Number.isNaN(P)||U==="")&&S(P),B(),a.userInput=null},M=()=>{var U,P;(P=(U=o.value)==null?void 0:U.focus)==null||P.call(U)},E=()=>{var U,P;(P=(U=o.value)==null?void 0:U.blur)==null||P.call(U)},A=U=>{t("focus",U)},I=U=>{var P;a.userInput=null,t("blur",U),i.validateEvent&&((P=l==null?void 0:l.validate)==null||P.call(l,"blur").catch(O=>void 0))},B=()=>{a.currentValue!==i.modelValue&&(a.currentValue=i.modelValue)},F=U=>{document.activeElement===U.target&&U.preventDefault()};return ze(()=>i.modelValue,(U,P)=>{const O=x(U,!0);a.userInput===null&&O!==P&&(a.currentValue=O)},{immediate:!0}),Ft(()=>{var U;const{min:P,max:O,modelValue:D}=i,L=(U=o.value)==null?void 0:U.input;if(L.setAttribute("role","spinbutton"),Number.isFinite(O)?L.setAttribute("aria-valuemax",String(O)):L.removeAttribute("aria-valuemax"),Number.isFinite(P)?L.setAttribute("aria-valuemin",String(P)):L.removeAttribute("aria-valuemin"),L.setAttribute("aria-valuenow",a.currentValue||a.currentValue===0?String(a.currentValue):""),L.setAttribute("aria-disabled",String(m.value)),!Ct(D)&&D!=null){let H=Number(D);Number.isNaN(H)&&(H=null),t(Gt,H)}L.addEventListener("wheel",F,{passive:!1})}),Kl(()=>{var U,P;const O=(U=o.value)==null?void 0:U.input;O==null||O.setAttribute("aria-valuenow",`${(P=a.currentValue)!=null?P:""}`)}),ns({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-input-number",ref:"https://element-plus.org/en-US/component/input-number.html"},R(()=>!!i.label)),e({focus:M,blur:E}),(U,P)=>(k(),Y("div",{class:z([g(r).b(),g(r).m(g(f)),g(r).is("disabled",g(m)),g(r).is("without-controls",!U.controls),g(r).is("controls-right",g(h))]),onDragstart:P[0]||(P[0]=Tt(()=>{},["prevent"]))},[U.controls?Bt((k(),Y("span",{key:0,role:"button","aria-label":g(s)("el.inputNumber.decrease"),class:z([g(r).e("decrease"),g(r).is("disabled",g(c))]),onKeydown:wn(w,["enter"])},[ke(U.$slots,"decrease-icon",{},()=>[le(g(dt),null,{default:pe(()=>[g(h)?(k(),Re(g(jl),{key:0})):(k(),Re(g(FY),{key:1}))]),_:1})])],42,kle)),[[g(X_),w]]):Ee("v-if",!0),U.controls?Bt((k(),Y("span",{key:1,role:"button","aria-label":g(s)("el.inputNumber.increase"),class:z([g(r).e("increase"),g(r).is("disabled",g(u))]),onKeydown:wn(b,["enter"])},[ke(U.$slots,"increase-icon",{},()=>[le(g(dt),null,{default:pe(()=>[g(h)?(k(),Re(g(XE),{key:0})):(k(),Re(g(_N),{key:1}))]),_:1})])],42,Ole)),[[g(X_),b]]):Ee("v-if",!0),le(g(Ks),{id:U.id,ref_key:"input",ref:o,type:"number",step:U.step,"model-value":g(p),placeholder:U.placeholder,readonly:U.readonly,disabled:g(m),size:g(f),max:U.max,min:U.min,name:U.name,"aria-label":U.label||U.ariaLabel,"validate-event":!1,onKeydown:[wn(Tt(b,["prevent"]),["up"]),wn(Tt(w,["prevent"]),["down"])],onBlur:I,onFocus:A,onInput:C,onChange:T},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],34))}});var Fle=Ze(Nle,[["__file","input-number.vue"]]);const XF=Ht(Fle),Ble=Ye({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:Boolean,href:{type:String,default:""},target:{type:String,default:"_self"},icon:{type:xn}}),Ule={click:n=>n instanceof MouseEvent},zle=["href","target"],Hle=se({name:"ElLink"}),Vle=se({...Hle,props:Ble,emits:Ule,setup(n,{emit:e}){const t=n,i=Ve("link"),s=R(()=>[i.b(),i.m(t.type),i.is("disabled",t.disabled),i.is("underline",t.underline&&!t.disabled)]);function r(o){t.disabled||e("click",o)}return(o,a)=>(k(),Y("a",{class:z(g(s)),href:o.disabled||!o.href?void 0:o.href,target:o.disabled||!o.href?void 0:o.target,onClick:r},[o.icon?(k(),Re(g(dt),{key:0},{default:pe(()=>[(k(),Re(Wt(o.icon)))]),_:1})):Ee("v-if",!0),o.$slots.default?(k(),Y("span",{key:1,class:z(g(i).e("inner"))},[ke(o.$slots,"default")],2)):Ee("v-if",!0),o.$slots.icon?ke(o.$slots,"icon",{key:2}):Ee("v-if",!0)],10,zle))}});var $le=Ze(Vle,[["__file","link.vue"]]);const Gle=Ht($le);let Wle=class{constructor(e,t){this.parent=e,this.domNode=t,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(e){e===this.subMenuItems.length?e=0:e<0&&(e=this.subMenuItems.length-1),this.subMenuItems[e].focus(),this.subIndex=e}addListeners(){const e=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,t=>{t.addEventListener("keydown",i=>{let s=!1;switch(i.code){case wt.down:{this.gotoSubIndex(this.subIndex+1),s=!0;break}case wt.up:{this.gotoSubIndex(this.subIndex-1),s=!0;break}case wt.tab:{Qy(e,"mouseleave");break}case wt.enter:case wt.space:{s=!0,i.currentTarget.click();break}}return s&&(i.preventDefault(),i.stopPropagation()),!1})})}},Kle=class{constructor(e,t){this.domNode=e,this.submenu=null,this.submenu=null,this.init(t)}init(e){this.domNode.setAttribute("tabindex","0");const t=this.domNode.querySelector(`.${e}-menu`);t&&(this.submenu=new Wle(this,t)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",e=>{let t=!1;switch(e.code){case wt.down:{Qy(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),t=!0;break}case wt.up:{Qy(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),t=!0;break}case wt.tab:{Qy(e.currentTarget,"mouseleave");break}case wt.enter:case wt.space:{t=!0,e.currentTarget.click();break}}t&&e.preventDefault()})}},Yle=class{constructor(e,t){this.domNode=e,this.init(t)}init(e){const t=this.domNode.childNodes;Array.from(t).forEach(i=>{i.nodeType===1&&new Kle(i,e)})}};const Xle=se({name:"ElMenuCollapseTransition",setup(){const n=Ve("menu");return{listeners:{onBeforeEnter:t=>t.style.opacity="0.2",onEnter(t,i){xo(t,`${n.namespace.value}-opacity-transition`),t.style.opacity="1",i()},onAfterEnter(t){Xs(t,`${n.namespace.value}-opacity-transition`),t.style.opacity=""},onBeforeLeave(t){t.dataset||(t.dataset={}),Yr(t,n.m("collapse"))?(Xs(t,n.m("collapse")),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),xo(t,n.m("collapse"))):(xo(t,n.m("collapse")),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),Xs(t,n.m("collapse"))),t.style.width=`${t.scrollWidth}px`,t.style.overflow="hidden"},onLeave(t){xo(t,"horizontal-collapse-transition"),t.style.width=`${t.dataset.scrollWidth}px`}}}}});function jle(n,e,t,i,s,r){return k(),Re(ji,Kt({mode:"out-in"},n.listeners),{default:pe(()=>[ke(n.$slots,"default")]),_:3},16)}var qle=Ze(Xle,[["render",jle],["__file","menu-collapse-transition.vue"]]);function jF(n,e){const t=R(()=>{let s=n.parent;const r=[e.value];for(;s.type.name!=="ElMenu";)s.props.index&&r.unshift(s.props.index),s=s.parent;return r});return{parentMenu:R(()=>{let s=n.parent;for(;s&&!["ElMenu","ElSubMenu"].includes(s.type.name);)s=s.parent;return s}),indexPath:t}}function Zle(n){return R(()=>{const t=n.backgroundColor;return t?new T4(t).shade(20).toString():""})}const qF=(n,e)=>{const t=Ve("menu");return R(()=>t.cssVarBlock({"text-color":n.textColor||"","hover-text-color":n.textColor||"","bg-color":n.backgroundColor||"","hover-bg-color":Zle(n).value||"","active-color":n.activeTextColor||"",level:`${e}`}))},Jle=Ye({index:{type:String,required:!0},showTimeout:Number,hideTimeout:Number,popperClass:String,disabled:Boolean,teleported:{type:Boolean,default:void 0},popperOffset:Number,expandCloseIcon:{type:xn},expandOpenIcon:{type:xn},collapseCloseIcon:{type:xn},collapseOpenIcon:{type:xn}}),fx="ElSubMenu";var UT=se({name:fx,props:Jle,setup(n,{slots:e,expose:t}){const i=zt(),{indexPath:s,parentMenu:r}=jF(i,R(()=>n.index)),o=Ve("menu"),a=Ve("sub-menu"),l=ct("rootMenu");l||qi(fx,"can not inject root menu");const c=ct(`subMenu:${r.value.uid}`);c||qi(fx,"can not inject sub menu");const u=V({}),d=V({});let h;const f=V(!1),m=V(),p=V(null),y=R(()=>T.value==="horizontal"&&_.value?"bottom-start":"right-start"),v=R(()=>T.value==="horizontal"&&_.value||T.value==="vertical"&&!l.props.collapse?n.expandCloseIcon&&n.expandOpenIcon?S.value?n.expandOpenIcon:n.expandCloseIcon:jl:n.collapseCloseIcon&&n.collapseOpenIcon?S.value?n.collapseOpenIcon:n.collapseCloseIcon:ur),_=R(()=>c.level===0),b=R(()=>{const H=n.teleported;return H===void 0?_.value:H}),w=R(()=>l.props.collapse?`${o.namespace.value}-zoom-in-left`:`${o.namespace.value}-zoom-in-top`),x=R(()=>T.value==="horizontal"&&_.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),S=R(()=>l.openedMenus.includes(n.index)),C=R(()=>{let H=!1;return Object.values(u.value).forEach(X=>{X.active&&(H=!0)}),Object.values(d.value).forEach(X=>{X.active&&(H=!0)}),H}),T=R(()=>l.props.mode),M=un({index:n.index,indexPath:s,active:C}),E=qF(l.props,c.level+1),A=R(()=>{var H;return(H=n.popperOffset)!=null?H:l.props.popperOffset}),I=R(()=>{var H;return(H=n.popperClass)!=null?H:l.props.popperClass}),B=R(()=>{var H;return(H=n.showTimeout)!=null?H:l.props.showTimeout}),F=R(()=>{var H;return(H=n.hideTimeout)!=null?H:l.props.hideTimeout}),U=()=>{var H,X,ne;return(ne=(X=(H=p.value)==null?void 0:H.popperRef)==null?void 0:X.popperInstanceRef)==null?void 0:ne.destroy()},P=H=>{H||U()},O=()=>{l.props.menuTrigger==="hover"&&l.props.mode==="horizontal"||l.props.collapse&&l.props.mode==="vertical"||n.disabled||l.handleSubMenuClick({index:n.index,indexPath:s.value,active:C.value})},D=(H,X=B.value)=>{var ne;if(H.type!=="focus"){if(l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"||n.disabled){c.mouseInChild.value=!0;return}c.mouseInChild.value=!0,h==null||h(),{stop:h}=Ud(()=>{l.openMenu(n.index,s.value)},X),b.value&&((ne=r.value.vnode.el)==null||ne.dispatchEvent(new MouseEvent("mouseenter")))}},L=(H=!1)=>{var X;if(l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"){c.mouseInChild.value=!1;return}h==null||h(),c.mouseInChild.value=!1,{stop:h}=Ud(()=>!f.value&&l.closeMenu(n.index,s.value),F.value),b.value&&H&&((X=c.handleMouseleave)==null||X.call(c,!0))};ze(()=>l.props.collapse,H=>P(!!H));{const H=ne=>{d.value[ne.index]=ne},X=ne=>{delete d.value[ne.index]};Xt(`subMenu:${i.uid}`,{addSubMenu:H,removeSubMenu:X,handleMouseleave:L,mouseInChild:f,level:c.level+1})}return t({opened:S}),Ft(()=>{l.addSubMenu(M),c.addSubMenu(M)}),kn(()=>{c.removeSubMenu(M),l.removeSubMenu(M)}),()=>{var H;const X=[(H=e.title)==null?void 0:H.call(e),_t(dt,{class:a.e("icon-arrow"),style:{transform:S.value?n.expandCloseIcon&&n.expandOpenIcon||n.collapseCloseIcon&&n.collapseOpenIcon&&l.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>Rt(v.value)?_t(i.appContext.components[v.value]):_t(v.value)})],ne=l.isMenuPopup?_t(Zs,{ref:p,visible:S.value,effect:"light",pure:!0,offset:A.value,showArrow:!1,persistent:!0,popperClass:I.value,placement:y.value,teleported:b.value,fallbackPlacements:x.value,transition:w.value,gpuAcceleration:!1},{content:()=>{var ce;return _t("div",{class:[o.m(T.value),o.m("popup-container"),I.value],onMouseenter:ae=>D(ae,100),onMouseleave:()=>L(!0),onFocus:ae=>D(ae,100)},[_t("ul",{class:[o.b(),o.m("popup"),o.m(`popup-${y.value}`)],style:E.value},[(ce=e.default)==null?void 0:ce.call(e)])])},default:()=>_t("div",{class:a.e("title"),onClick:O},X)}):_t(mt,{},[_t("div",{class:a.e("title"),ref:m,onClick:O},X),_t(z1,{},{default:()=>{var ce;return Bt(_t("ul",{role:"menu",class:[o.b(),o.m("inline")],style:E.value},[(ce=e.default)==null?void 0:ce.call(e)]),[[an,S.value]])}})]);return _t("li",{class:[a.b(),a.is("active",C.value),a.is("opened",S.value),a.is("disabled",n.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:S.value,onMouseenter:D,onMouseleave:()=>L(),onFocus:D},[ne])}}});const Qle=Ye({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:ge(Array),default:()=>ni([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,closeOnClickOutside:Boolean,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperOffset:{type:Number,default:6},ellipsisIcon:{type:xn,default:()=>zY},popperEffect:{type:String,values:["dark","light"],default:"dark"},popperClass:String,showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300}}),px=n=>Array.isArray(n)&&n.every(e=>Rt(e)),ece={close:(n,e)=>Rt(n)&&px(e),open:(n,e)=>Rt(n)&&px(e),select:(n,e,t,i)=>Rt(n)&&px(e)&&$t(t)&&(i===void 0||i instanceof Promise)};var tce=se({name:"ElMenu",props:Qle,emits:ece,setup(n,{emit:e,slots:t,expose:i}){const s=zt(),r=s.appContext.config.globalProperties.$router,o=V(),a=Ve("menu"),l=Ve("sub-menu"),c=V(-1),u=V(n.defaultOpeneds&&!n.collapse?n.defaultOpeneds.slice(0):[]),d=V(n.defaultActive),h=V({}),f=V({}),m=R(()=>n.mode==="horizontal"||n.mode==="vertical"&&n.collapse),p=()=>{const F=d.value&&h.value[d.value];if(!F||n.mode==="horizontal"||n.collapse)return;F.indexPath.forEach(P=>{const O=f.value[P];O&&y(P,O.indexPath)})},y=(F,U)=>{u.value.includes(F)||(n.uniqueOpened&&(u.value=u.value.filter(P=>U.includes(P))),u.value.push(F),e("open",F,U))},v=F=>{const U=u.value.indexOf(F);U!==-1&&u.value.splice(U,1)},_=(F,U)=>{v(F),e("close",F,U)},b=({index:F,indexPath:U})=>{u.value.includes(F)?_(F,U):y(F,U)},w=F=>{(n.mode==="horizontal"||n.collapse)&&(u.value=[]);const{index:U,indexPath:P}=F;if(!(os(U)||os(P)))if(n.router&&r){const O=F.route||U,D=r.push(O).then(L=>(L||(d.value=U),L));e("select",U,P,{index:U,indexPath:P,route:O},D)}else d.value=U,e("select",U,P,{index:U,indexPath:P})},x=F=>{const U=h.value,P=U[F]||d.value&&U[d.value]||U[n.defaultActive];P?d.value=P.index:d.value=F},S=F=>{const U=getComputedStyle(F),P=Number.parseInt(U.marginLeft,10),O=Number.parseInt(U.marginRight,10);return F.offsetWidth+P+O||0},C=()=>{var F,U;if(!o.value)return-1;const P=Array.from((U=(F=o.value)==null?void 0:F.childNodes)!=null?U:[]).filter(ae=>ae.nodeName!=="#comment"&&(ae.nodeName!=="#text"||ae.nodeValue)),O=64,D=getComputedStyle(o.value),L=Number.parseInt(D.paddingLeft,10),H=Number.parseInt(D.paddingRight,10),X=o.value.clientWidth-L-H;let ne=0,ce=0;return P.forEach((ae,_e)=>{ne+=S(ae),ne<=X-O&&(ce=_e+1)}),ce===P.length?-1:ce},T=F=>f.value[F].indexPath,M=(F,U=33.34)=>{let P;return()=>{P&&clearTimeout(P),P=setTimeout(()=>{F()},U)}};let E=!0;const A=()=>{if(c.value===C())return;const F=()=>{c.value=-1,vt(()=>{c.value=C()})};E?F():M(F)(),E=!1};ze(()=>n.defaultActive,F=>{h.value[F]||(d.value=""),x(F)}),ze(()=>n.collapse,F=>{F&&(u.value=[])}),ze(h.value,p);let I;Is(()=>{n.mode==="horizontal"&&n.ellipsis?I=ti(o,A).stop:I==null||I()});const B=V(!1);{const F=D=>{f.value[D.index]=D},U=D=>{delete f.value[D.index]};Xt("rootMenu",un({props:n,openedMenus:u,items:h,subMenus:f,activeIndex:d,isMenuPopup:m,addMenuItem:D=>{h.value[D.index]=D},removeMenuItem:D=>{delete h.value[D.index]},addSubMenu:F,removeSubMenu:U,openMenu:y,closeMenu:_,handleMenuItemClick:w,handleSubMenuClick:b})),Xt(`subMenu:${s.uid}`,{addSubMenu:F,removeSubMenu:U,mouseInChild:B,level:0})}return Ft(()=>{n.mode==="horizontal"&&new Yle(s.vnode.el,a.namespace.value)}),i({open:U=>{const{indexPath:P}=f.value[U];P.forEach(O=>y(O,P))},close:v,handleResize:A}),()=>{var F,U;let P=(U=(F=t.default)==null?void 0:F.call(t))!=null?U:[];const O=[];if(n.mode==="horizontal"&&o.value){const X=Wc(P),ne=c.value===-1?X:X.slice(0,c.value),ce=c.value===-1?[]:X.slice(c.value);ce!=null&&ce.length&&n.ellipsis&&(P=ne,O.push(_t(UT,{index:"sub-menu-more",class:l.e("hide-arrow"),popperOffset:n.popperOffset},{title:()=>_t(dt,{class:l.e("icon-more")},{default:()=>_t(n.ellipsisIcon)}),default:()=>ce})))}const D=qF(n,0),L=n.closeOnClickOutside?[[Ll,()=>{u.value.length&&(B.value||(u.value.forEach(X=>e("close",X,T(X))),u.value=[]))}]]:[],H=Bt(_t("ul",{key:String(n.collapse),role:"menubar",ref:o,style:D.value,class:{[a.b()]:!0,[a.m(n.mode)]:!0,[a.m("collapse")]:n.collapse}},[...P,...O]),L);return n.collapseTransition&&n.mode==="vertical"?_t(qle,()=>H):H}}});const nce=Ye({index:{type:ge([String,null]),default:null},route:{type:ge([String,Object])},disabled:Boolean}),ice={click:n=>Rt(n.index)&&Array.isArray(n.indexPath)},mx="ElMenuItem",sce=se({name:mx,components:{ElTooltip:Zs},props:nce,emits:ice,setup(n,{emit:e}){const t=zt(),i=ct("rootMenu"),s=Ve("menu"),r=Ve("menu-item");i||qi(mx,"can not inject root menu");const{parentMenu:o,indexPath:a}=jF(t,vn(n,"index")),l=ct(`subMenu:${o.value.uid}`);l||qi(mx,"can not inject sub menu");const c=R(()=>n.index===i.activeIndex),u=un({index:n.index,indexPath:a,active:c}),d=()=>{n.disabled||(i.handleMenuItemClick({index:n.index,indexPath:a.value,route:n.route}),e("click",u))};return Ft(()=>{l.addSubMenu(u),i.addMenuItem(u)}),kn(()=>{l.removeSubMenu(u),i.removeMenuItem(u)}),{parentMenu:o,rootMenu:i,active:c,nsMenu:s,nsMenuItem:r,handleClick:d}}});function rce(n,e,t,i,s,r){const o=Ut("el-tooltip");return k(),Y("li",{class:z([n.nsMenuItem.b(),n.nsMenuItem.is("active",n.active),n.nsMenuItem.is("disabled",n.disabled)]),role:"menuitem",tabindex:"-1",onClick:e[0]||(e[0]=(...a)=>n.handleClick&&n.handleClick(...a))},[n.parentMenu.type.name==="ElMenu"&&n.rootMenu.props.collapse&&n.$slots.title?(k(),Re(o,{key:0,effect:n.rootMenu.props.popperEffect,placement:"right","fallback-placements":["left"],persistent:""},{content:pe(()=>[ke(n.$slots,"title")]),default:pe(()=>[te("div",{class:z(n.nsMenu.be("tooltip","trigger"))},[ke(n.$slots,"default")],2)]),_:3},8,["effect"])):(k(),Y(mt,{key:1},[ke(n.$slots,"default"),ke(n.$slots,"title")],64))],2)}var ZF=Ze(sce,[["render",rce],["__file","menu-item.vue"]]);const oce={title:String},ace="ElMenuItemGroup",lce=se({name:ace,props:oce,setup(){return{ns:Ve("menu-item-group")}}});function cce(n,e,t,i,s,r){return k(),Y("li",{class:z(n.ns.b())},[te("div",{class:z(n.ns.e("title"))},[n.$slots.title?ke(n.$slots,"title",{key:1}):(k(),Y(mt,{key:0},[Yt(Je(n.title),1)],64))],2),te("ul",null,[ke(n.$slots,"default")])],2)}var JF=Ze(lce,[["render",cce],["__file","menu-item-group.vue"]]);const uce=Ht(tce,{MenuItem:ZF,MenuItemGroup:JF,SubMenu:UT}),dce=si(ZF),hce=si(JF),fce=si(UT),pce=Ye({icon:{type:xn,default:()=>sY},title:String,content:{type:String,default:""}}),mce={back:()=>!0},gce=["aria-label"],vce=se({name:"ElPageHeader"}),yce=se({...vce,props:pce,emits:mce,setup(n,{emit:e}){const t=hs(),{t:i}=en(),s=Ve("page-header"),r=R(()=>[s.b(),{[s.m("has-breadcrumb")]:!!t.breadcrumb,[s.m("has-extra")]:!!t.extra,[s.is("contentful")]:!!t.default}]);function o(){e("back")}return(a,l)=>(k(),Y("div",{class:z(g(r))},[a.$slots.breadcrumb?(k(),Y("div",{key:0,class:z(g(s).e("breadcrumb"))},[ke(a.$slots,"breadcrumb")],2)):Ee("v-if",!0),te("div",{class:z(g(s).e("header"))},[te("div",{class:z(g(s).e("left"))},[te("div",{class:z(g(s).e("back")),role:"button",tabindex:"0",onClick:o},[a.icon||a.$slots.icon?(k(),Y("div",{key:0,"aria-label":a.title||g(i)("el.pageHeader.title"),class:z(g(s).e("icon"))},[ke(a.$slots,"icon",{},()=>[a.icon?(k(),Re(g(dt),{key:0},{default:pe(()=>[(k(),Re(Wt(a.icon)))]),_:1})):Ee("v-if",!0)])],10,gce)):Ee("v-if",!0),te("div",{class:z(g(s).e("title"))},[ke(a.$slots,"title",{},()=>[Yt(Je(a.title||g(i)("el.pageHeader.title")),1)])],2)],2),le(g(FF),{direction:"vertical"}),te("div",{class:z(g(s).e("content"))},[ke(a.$slots,"content",{},()=>[Yt(Je(a.content),1)])],2)],2),a.$slots.extra?(k(),Y("div",{key:0,class:z(g(s).e("extra"))},[ke(a.$slots,"extra")],2)):Ee("v-if",!0)],2),a.$slots.default?(k(),Y("div",{key:1,class:z(g(s).e("main"))},[ke(a.$slots,"default")],2)):Ee("v-if",!0)],2))}});var _ce=Ze(yce,[["__file","page-header.vue"]]);const bce=Ht(_ce),QF=Symbol("elPaginationKey"),wce=Ye({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:xn}}),xce={click:n=>n instanceof MouseEvent},Sce=["disabled","aria-label","aria-disabled"],Cce={key:0},Mce=se({name:"ElPaginationPrev"}),Ece=se({...Mce,props:wce,emits:xce,setup(n){const e=n,{t}=en(),i=R(()=>e.disabled||e.currentPage<=1);return(s,r)=>(k(),Y("button",{type:"button",class:"btn-prev",disabled:g(i),"aria-label":s.prevText||g(t)("el.pagination.prev"),"aria-disabled":g(i),onClick:r[0]||(r[0]=o=>s.$emit("click",o))},[s.prevText?(k(),Y("span",Cce,Je(s.prevText),1)):(k(),Re(g(dt),{key:1},{default:pe(()=>[(k(),Re(Wt(s.prevIcon)))]),_:1}))],8,Sce))}});var Tce=Ze(Ece,[["__file","prev.vue"]]);const Ace=Ye({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:xn}}),Ice=["disabled","aria-label","aria-disabled"],Rce={key:0},Pce=se({name:"ElPaginationNext"}),Lce=se({...Pce,props:Ace,emits:["click"],setup(n){const e=n,{t}=en(),i=R(()=>e.disabled||e.currentPage===e.pageCount||e.pageCount===0);return(s,r)=>(k(),Y("button",{type:"button",class:"btn-next",disabled:g(i),"aria-label":s.nextText||g(t)("el.pagination.next"),"aria-disabled":g(i),onClick:r[0]||(r[0]=o=>s.$emit("click",o))},[s.nextText?(k(),Y("span",Rce,Je(s.nextText),1)):(k(),Re(g(dt),{key:1},{default:pe(()=>[(k(),Re(Wt(s.nextIcon)))]),_:1}))],8,Ice))}});var kce=Ze(Lce,[["__file","next.vue"]]);const eB=Symbol("ElSelectGroup"),kp=Symbol("ElSelect");function Oce(n,e){const t=ct(kp),i=ct(eB,{disabled:!1}),s=R(()=>t.props.multiple?u(t.props.modelValue,n.value):u([t.props.modelValue],n.value)),r=R(()=>{if(t.props.multiple){const f=t.props.modelValue||[];return!s.value&&f.length>=t.props.multipleLimit&&t.props.multipleLimit>0}else return!1}),o=R(()=>n.label||($t(n.value)?"":n.value)),a=R(()=>n.value||n.label||""),l=R(()=>n.disabled||e.groupDisabled||r.value),c=zt(),u=(f=[],m)=>{if($t(n.value)){const p=t.props.valueKey;return f&&f.some(y=>yn(gi(y,p))===gi(m,p))}else return f&&f.includes(m)},d=()=>{!n.disabled&&!i.disabled&&(t.states.hoveringIndex=t.optionsArray.indexOf(c.proxy))},h=f=>{const m=new RegExp(KE(f),"i");e.visible=m.test(o.value)||n.created};return ze(()=>o.value,()=>{!n.created&&!t.props.remote&&t.setSelected()}),ze(()=>n.value,(f,m)=>{const{remote:p,valueKey:y}=t.props;if(Ys(f,m)||(t.onOptionDestroy(m,c.proxy),t.onOptionCreate(c.proxy)),!n.created&&!p){if(y&&$t(f)&&$t(m)&&f[y]===m[y])return;t.setSelected()}}),ze(()=>i.disabled,()=>{e.groupDisabled=i.disabled},{immediate:!0}),{select:t,currentLabel:o,currentValue:a,itemSelected:s,isDisabled:l,hoverItem:d,updateOption:h}}const Dce=se({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(n){const e=Ve("select"),t=Ls(),i=R(()=>[e.be("dropdown","item"),e.is("disabled",g(a)),e.is("selected",g(o)),e.is("hovering",g(h))]),s=un({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:r,itemSelected:o,isDisabled:a,select:l,hoverItem:c,updateOption:u}=Oce(n,s),{visible:d,hover:h}=ws(s),f=zt().proxy;l.onOptionCreate(f),kn(()=>{const p=f.value,{selected:y}=l.states,_=(l.props.multiple?y:[y]).some(b=>b.value===f.value);vt(()=>{l.states.cachedOptions.get(p)===f&&!_&&l.states.cachedOptions.delete(p)}),l.onOptionDestroy(p,f)});function m(){n.disabled!==!0&&s.groupDisabled!==!0&&l.handleOptionSelect(f)}return{ns:e,id:t,containerKls:i,currentLabel:r,itemSelected:o,isDisabled:a,select:l,hoverItem:c,updateOption:u,visible:d,hover:h,selectOptionClick:m,states:s}}}),Nce=["id","aria-disabled","aria-selected"];function Fce(n,e,t,i,s,r){return Bt((k(),Y("li",{id:n.id,class:z(n.containerKls),role:"option","aria-disabled":n.isDisabled||void 0,"aria-selected":n.itemSelected,onMouseenter:e[0]||(e[0]=(...o)=>n.hoverItem&&n.hoverItem(...o)),onClick:e[1]||(e[1]=Tt((...o)=>n.selectOptionClick&&n.selectOptionClick(...o),["stop"]))},[ke(n.$slots,"default",{},()=>[te("span",null,Je(n.currentLabel),1)])],42,Nce)),[[an,n.visible]])}var zT=Ze(Dce,[["render",Fce],["__file","option.vue"]]);const Bce=se({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const n=ct(kp),e=Ve("select"),t=R(()=>n.props.popperClass),i=R(()=>n.props.multiple),s=R(()=>n.props.fitInputWidth),r=V("");function o(){var a;r.value=`${(a=n.selectRef)==null?void 0:a.offsetWidth}px`}return Ft(()=>{o(),ti(n.selectRef,o)}),{ns:e,minWidth:r,popperClass:t,isMultiple:i,isFitInputWidth:s}}});function Uce(n,e,t,i,s,r){return k(),Y("div",{class:z([n.ns.b("dropdown"),n.ns.is("multiple",n.isMultiple),n.popperClass]),style:pt({[n.isFitInputWidth?"width":"minWidth"]:n.minWidth})},[n.$slots.header?(k(),Y("div",{key:0,class:z(n.ns.be("dropdown","header"))},[ke(n.$slots,"header")],2)):Ee("v-if",!0),ke(n.$slots,"default"),n.$slots.footer?(k(),Y("div",{key:1,class:z(n.ns.be("dropdown","footer"))},[ke(n.$slots,"footer")],2)):Ee("v-if",!0)],6)}var zce=Ze(Bce,[["render",Uce],["__file","select-dropdown.vue"]]);function tB(n){const e=V(!1);return{handleCompositionStart:()=>{e.value=!0},handleCompositionUpdate:r=>{const o=r.target.value,a=o[o.length-1]||"";e.value=!tT(a)},handleCompositionEnd:r=>{e.value&&(e.value=!1,xt(n)&&n(r))}}}const Hce=11,Vce=(n,e)=>{const{t}=en(),i=Ls(),s=Ve("select"),r=Ve("input"),o=un({inputValue:"",options:new Map,cachedOptions:new Map,disabledOptions:new Map,optionValues:[],selected:n.multiple?[]:{},selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),a=V(null),l=V(null),c=V(null),u=V(null),d=V(null),h=V(null),f=V(null),m=V(null),p=V(null),y=V(null),v=V(null),_=V(null),{wrapperRef:b,isFocused:w,handleFocus:x,handleBlur:S}=O1(d,{afterFocus(){n.automaticDropdown&&!C.value&&(C.value=!0,o.menuVisibleOnFocus=!0)},beforeBlur(it){var Mt,Sn;return((Mt=c.value)==null?void 0:Mt.isFocusInsideContent(it))||((Sn=u.value)==null?void 0:Sn.isFocusInsideContent(it))},afterBlur(){C.value=!1,o.menuVisibleOnFocus=!1}}),C=V(!1),T=V(),{form:M,formItem:E}=Qs(),{inputId:A}=ca(n,{formItemContext:E}),{valueOnClear:I,isEmptyValue:B}=D1(n),F=R(()=>n.disabled||(M==null?void 0:M.disabled)),U=R(()=>n.multiple?rt(n.modelValue)&&n.modelValue.length>0:!B(n.modelValue)),P=R(()=>n.clearable&&!F.value&&o.inputHovering&&U.value),O=R(()=>n.remote&&n.filterable&&!n.remoteShowSuffix?"":n.suffixIcon),D=R(()=>s.is("reverse",O.value&&C.value)),L=R(()=>(E==null?void 0:E.validateState)||""),H=R(()=>eT[L.value]),X=R(()=>n.remote?300:0),ne=R(()=>n.loading?n.loadingText||t("el.select.loading"):n.remote&&!o.inputValue&&o.options.size===0?!1:n.filterable&&o.inputValue&&o.options.size>0&&ce.value===0?n.noMatchText||t("el.select.noMatch"):o.options.size===0?n.noDataText||t("el.select.noData"):null),ce=R(()=>ae.value.filter(it=>it.visible).length),ae=R(()=>{const it=Array.from(o.options.values()),Mt=[];return o.optionValues.forEach(Sn=>{const Kn=it.findIndex(er=>er.value===Sn);Kn>-1&&Mt.push(it[Kn])}),Mt.length>=it.length?Mt:it}),_e=R(()=>Array.from(o.cachedOptions.values())),re=R(()=>{const it=ae.value.filter(Mt=>!Mt.created).some(Mt=>Mt.currentLabel===o.inputValue);return n.filterable&&n.allowCreate&&o.inputValue!==""&&!it}),xe=()=>{n.filterable&&xt(n.filterMethod)||n.filterable&&n.remote&&xt(n.remoteMethod)||ae.value.forEach(it=>{var Mt;(Mt=it.updateOption)==null||Mt.call(it,o.inputValue)})},he=Hi(),Te=R(()=>["small"].includes(he.value)?"small":"default"),Ce=R({get(){return C.value&&ne.value!==!1},set(it){C.value=it}}),we=R(()=>rt(n.modelValue)?n.modelValue.length===0&&!o.inputValue:n.filterable?!o.inputValue:!0),K=R(()=>{var it;const Mt=(it=n.placeholder)!=null?it:t("el.select.placeholder");return n.multiple||!U.value?Mt:o.selectedLabel}),j=R(()=>rC?null:"mouseenter");ze(()=>n.modelValue,(it,Mt)=>{n.multiple&&n.filterable&&!n.reserveKeyword&&(o.inputValue="",ie("")),ye(),!Ys(it,Mt)&&n.validateEvent&&(E==null||E.validate("change").catch(Sn=>void 0))},{flush:"post",deep:!0}),ze(()=>C.value,it=>{it?ie(o.inputValue):(o.inputValue="",o.previousQuery=null,o.isBeforeHide=!0),e("visible-change",it)}),ze(()=>o.options.entries(),()=>{var it;if(!Jt)return;const Mt=((it=a.value)==null?void 0:it.querySelectorAll("input"))||[];(!n.filterable&&!n.defaultFirstOption&&!ki(n.modelValue)||!Array.from(Mt).includes(document.activeElement))&&ye(),n.defaultFirstOption&&(n.filterable||n.remote)&&ce.value&&ve()},{flush:"post"}),ze(()=>o.hoveringIndex,it=>{Ct(it)&&it>-1?T.value=ae.value[it]||{}:T.value={},ae.value.forEach(Mt=>{Mt.hover=T.value===Mt})}),Is(()=>{o.isBeforeHide||xe()});const ie=it=>{o.previousQuery!==it&&(o.previousQuery=it,n.filterable&&xt(n.filterMethod)?n.filterMethod(it):n.filterable&&n.remote&&xt(n.remoteMethod)&&n.remoteMethod(it),n.defaultFirstOption&&(n.filterable||n.remote)&&ce.value?vt(ve):vt(be))},ve=()=>{const it=ae.value.filter(Kn=>Kn.visible&&!Kn.disabled&&!Kn.states.groupDisabled),Mt=it.find(Kn=>Kn.created),Sn=it[0];o.hoveringIndex=Ie(ae.value,Mt||Sn)},ye=()=>{if(n.multiple)o.selectedLabel="";else{const Mt=me(n.modelValue);o.selectedLabel=Mt.currentLabel,o.selected=Mt;return}const it=[];rt(n.modelValue)&&n.modelValue.forEach(Mt=>{it.push(me(Mt))}),o.selected=it},me=it=>{let Mt;const Sn=jy(it).toLowerCase()==="object",Kn=jy(it).toLowerCase()==="null",er=jy(it).toLowerCase()==="undefined";for(let N=o.cachedOptions.size-1;N>=0;N--){const W=_e.value[N];if(Sn?gi(W.value,n.valueKey)===gi(it,n.valueKey):W.value===it){Mt={value:it,currentLabel:W.currentLabel,get isDisabled(){return W.isDisabled}};break}}if(Mt)return Mt;const ue=Sn?it.label:!Kn&&!er?it:"";return{value:it,currentLabel:ue}},be=()=>{n.multiple?o.hoveringIndex=ae.value.findIndex(it=>o.selected.some(Mt=>$i(Mt)===$i(it))):o.hoveringIndex=ae.value.findIndex(it=>$i(it)===$i(o.selected))},Pe=()=>{o.selectionWidth=l.value.getBoundingClientRect().width},Z=()=>{o.calculatorWidth=h.value.getBoundingClientRect().width},$=()=>{o.collapseItemWidth=v.value.getBoundingClientRect().width},de=()=>{var it,Mt;(Mt=(it=c.value)==null?void 0:it.updatePopper)==null||Mt.call(it)},Ae=()=>{var it,Mt;(Mt=(it=u.value)==null?void 0:it.updatePopper)==null||Mt.call(it)},De=()=>{o.inputValue.length>0&&!C.value&&(C.value=!0),ie(o.inputValue)},fe=it=>{if(o.inputValue=it.target.value,n.remote)Ge();else return De()},Ge=Lr(()=>{De()},X.value),We=it=>{Ys(n.modelValue,it)||e(Fn,it)},je=it=>dN(it,Mt=>!o.disabledOptions.has(Mt)),at=it=>{if(n.multiple&&it.code!==wt.delete&&it.target.value.length<=0){const Mt=n.modelValue.slice(),Sn=je(Mt);if(Sn<0)return;const Kn=Mt[Sn];Mt.splice(Sn,1),e(Gt,Mt),We(Mt),e("remove-tag",Kn)}},Ue=(it,Mt)=>{const Sn=o.selected.indexOf(Mt);if(Sn>-1&&!F.value){const Kn=n.modelValue.slice();Kn.splice(Sn,1),e(Gt,Kn),We(Kn),e("remove-tag",Mt.value)}it.stopPropagation(),ht()},qe=it=>{it.stopPropagation();const Mt=n.multiple?[]:I.value;if(n.multiple)for(const Sn of o.selected)Sn.isDisabled&&Mt.push(Sn.value);e(Gt,Mt),We(Mt),o.hoveringIndex=-1,C.value=!1,e("clear"),ht()},Fe=it=>{if(n.multiple){const Mt=(n.modelValue||[]).slice(),Sn=Ie(Mt,it.value);Sn>-1?Mt.splice(Sn,1):(n.multipleLimit<=0||Mt.length<n.multipleLimit)&&Mt.push(it.value),e(Gt,Mt),We(Mt),it.created&&ie(""),n.filterable&&!n.reserveKeyword&&(o.inputValue="")}else e(Gt,it.value),We(it.value),C.value=!1;ht(),!C.value&&vt(()=>{oe(it)})},Ie=(it=[],Mt)=>{if(!$t(Mt))return it.indexOf(Mt);const Sn=n.valueKey;let Kn=-1;return it.some((er,ue)=>yn(gi(er,Sn))===gi(Mt,Sn)?(Kn=ue,!0):!1),Kn},oe=it=>{var Mt,Sn,Kn,er,ue;const He=rt(it)?it[0]:it;let N=null;if(He!=null&&He.value){const W=ae.value.filter(q=>q.value===He.value);W.length>0&&(N=W[0].$el)}if(c.value&&N){const W=(er=(Kn=(Sn=(Mt=c.value)==null?void 0:Mt.popperRef)==null?void 0:Sn.contentRef)==null?void 0:Kn.querySelector)==null?void 0:er.call(Kn,`.${s.be("dropdown","wrap")}`);W&&gN(W,N)}(ue=_.value)==null||ue.handleScroll()},Le=it=>{o.options.set(it.value,it),o.cachedOptions.set(it.value,it),it.disabled&&o.disabledOptions.set(it.value,it)},Ke=(it,Mt)=>{o.options.get(it)===Mt&&o.options.delete(it)},{handleCompositionStart:ft,handleCompositionUpdate:Q,handleCompositionEnd:$e}=tB(it=>fe(it)),Oe=R(()=>{var it,Mt;return(Mt=(it=c.value)==null?void 0:it.popperRef)==null?void 0:Mt.contentRef}),et=()=>{o.isBeforeHide=!1,vt(()=>oe(o.selected))},ht=()=>{var it;(it=d.value)==null||it.focus()},At=()=>{pn()},Ot=it=>{qe(it)},pn=it=>{if(C.value=!1,w.value){const Mt=new FocusEvent("focus",it);vt(()=>S(Mt))}},wi=()=>{o.inputValue.length>0?o.inputValue="":C.value=!1},_n=()=>{F.value||(rC&&(o.inputHovering=!0),o.menuVisibleOnFocus?o.menuVisibleOnFocus=!1:C.value=!C.value)},Cs=()=>{C.value?ae.value[o.hoveringIndex]&&Fe(ae.value[o.hoveringIndex]):_n()},$i=it=>$t(it.value)?gi(it.value,n.valueKey):it.value,Za=R(()=>ae.value.filter(it=>it.visible).every(it=>it.disabled)),Or=R(()=>n.multiple?n.collapseTags?o.selected.slice(0,n.maxCollapseTags):o.selected:[]),no=R(()=>n.multiple?n.collapseTags?o.selected.slice(n.maxCollapseTags):[]:[]),Ja=it=>{if(!C.value){C.value=!0;return}if(!(o.options.size===0||ce.value===0)&&!Za.value){it==="next"?(o.hoveringIndex++,o.hoveringIndex===o.options.size&&(o.hoveringIndex=0)):it==="prev"&&(o.hoveringIndex--,o.hoveringIndex<0&&(o.hoveringIndex=o.options.size-1));const Mt=ae.value[o.hoveringIndex];(Mt.disabled===!0||Mt.states.groupDisabled===!0||!Mt.visible)&&Ja(it),vt(()=>oe(T.value))}},Ql=()=>{if(!l.value)return 0;const it=window.getComputedStyle(l.value);return Number.parseFloat(it.gap||"6px")},zo=R(()=>{const it=Ql();return{maxWidth:`${v.value&&n.maxCollapseTags===1?o.selectionWidth-o.collapseItemWidth-it:o.selectionWidth}px`}}),ec=R(()=>({maxWidth:`${o.selectionWidth}px`})),fa=R(()=>({width:`${Math.max(o.calculatorWidth,Hce)}px`}));return n.multiple&&!rt(n.modelValue)&&e(Gt,[]),!n.multiple&&rt(n.modelValue)&&e(Gt,""),ti(l,Pe),ti(h,Z),ti(p,de),ti(b,de),ti(y,Ae),ti(v,$),Ft(()=>{ye()}),{inputId:A,contentId:i,nsSelect:s,nsInput:r,states:o,isFocused:w,expanded:C,optionsArray:ae,hoverOption:T,selectSize:he,filteredOptionsCount:ce,resetCalculatorWidth:Z,updateTooltip:de,updateTagTooltip:Ae,debouncedOnInputChange:Ge,onInput:fe,deletePrevTag:at,deleteTag:Ue,deleteSelected:qe,handleOptionSelect:Fe,scrollToOption:oe,hasModelValue:U,shouldShowPlaceholder:we,currentPlaceholder:K,mouseEnterEventName:j,showClose:P,iconComponent:O,iconReverse:D,validateState:L,validateIcon:H,showNewOption:re,updateOptions:xe,collapseTagSize:Te,setSelected:ye,selectDisabled:F,emptyText:ne,handleCompositionStart:ft,handleCompositionUpdate:Q,handleCompositionEnd:$e,onOptionCreate:Le,onOptionDestroy:Ke,handleMenuEnter:et,handleFocus:x,focus:ht,blur:At,handleBlur:S,handleClearClick:Ot,handleClickOutside:pn,handleEsc:wi,toggleMenu:_n,selectOption:Cs,getValueKey:$i,navigateOptions:Ja,dropdownMenuVisible:Ce,showTagList:Or,collapseTagList:no,tagStyle:zo,collapseTagStyle:ec,inputStyle:fa,popperRef:Oe,inputRef:d,tooltipRef:c,tagTooltipRef:u,calculatorRef:h,prefixRef:f,suffixRef:m,selectRef:a,wrapperRef:b,selectionRef:l,scrollbarRef:_,menuRef:p,tagMenuRef:y,collapseItemRef:v}};var $ce=se({name:"ElOptions",setup(n,{slots:e}){const t=ct(kp);let i=[];return()=>{var s,r;const o=(s=e.default)==null?void 0:s.call(e),a=[];function l(c){rt(c)&&c.forEach(u=>{var d,h,f,m;const p=(d=(u==null?void 0:u.type)||{})==null?void 0:d.name;p==="ElOptionGroup"?l(!Rt(u.children)&&!rt(u.children)&&xt((h=u.children)==null?void 0:h.default)?(f=u.children)==null?void 0:f.default():u.children):p==="ElOption"?a.push((m=u.props)==null?void 0:m.value):rt(u.children)&&l(u.children)})}return o.length&&l((r=o[0])==null?void 0:r.children),Ys(a,i)||(i=a,t&&(t.states.optionValues=a)),o}}});const Gce=Ye({name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:Zi,effect:{type:ge(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:ge(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:rs.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:xn,default:mu},fitInputWidth:Boolean,suffixIcon:{type:xn,default:jl},tagType:{...Wd.type,default:"info"},tagEffect:{...Wd.effect,default:"light"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,placement:{type:ge(String),values:dh,default:"bottom-start"},fallbackPlacements:{type:ge(Array),default:["bottom-start","top-start","right","left"]},...Pp,...Ss(["ariaLabel"])}),wP="ElSelect",Wce=se({name:wP,componentName:wP,components:{ElInput:Ks,ElSelectMenu:zce,ElOption:zT,ElOptions:$ce,ElTag:Og,ElScrollbar:Zl,ElTooltip:Zs,ElIcon:dt},directives:{ClickOutside:Ll},props:Gce,emits:[Gt,Fn,"remove-tag","clear","visible-change","focus","blur"],setup(n,{emit:e}){const t=Vce(n,e);return Xt(kp,un({props:n,states:t.states,optionsArray:t.optionsArray,handleOptionSelect:t.handleOptionSelect,onOptionCreate:t.onOptionCreate,onOptionDestroy:t.onOptionDestroy,selectRef:t.selectRef,setSelected:t.setSelected})),{...t}}}),Kce=["id","name","disabled","autocomplete","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label"],Yce=["textContent"],Xce={key:1};function jce(n,e,t,i,s,r){const o=Ut("el-tag"),a=Ut("el-tooltip"),l=Ut("el-icon"),c=Ut("el-option"),u=Ut("el-options"),d=Ut("el-scrollbar"),h=Ut("el-select-menu"),f=y1("click-outside");return Bt((k(),Y("div",{ref:"selectRef",class:z([n.nsSelect.b(),n.nsSelect.m(n.selectSize)]),[Fm(n.mouseEnterEventName)]:e[16]||(e[16]=m=>n.states.inputHovering=!0),onMouseleave:e[17]||(e[17]=m=>n.states.inputHovering=!1),onClick:e[18]||(e[18]=Tt((...m)=>n.toggleMenu&&n.toggleMenu(...m),["prevent","stop"]))},[le(a,{ref:"tooltipRef",visible:n.dropdownMenuVisible,placement:n.placement,teleported:n.teleported,"popper-class":[n.nsSelect.e("popper"),n.popperClass],"popper-options":n.popperOptions,"fallback-placements":n.fallbackPlacements,effect:n.effect,pure:"",trigger:"click",transition:`${n.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:n.persistent,onBeforeShow:n.handleMenuEnter,onHide:e[15]||(e[15]=m=>n.states.isBeforeHide=!1)},{default:pe(()=>{var m;return[te("div",{ref:"wrapperRef",class:z([n.nsSelect.e("wrapper"),n.nsSelect.is("focused",n.isFocused),n.nsSelect.is("hovering",n.states.inputHovering),n.nsSelect.is("filterable",n.filterable),n.nsSelect.is("disabled",n.selectDisabled)])},[n.$slots.prefix?(k(),Y("div",{key:0,ref:"prefixRef",class:z(n.nsSelect.e("prefix"))},[ke(n.$slots,"prefix")],2)):Ee("v-if",!0),te("div",{ref:"selectionRef",class:z([n.nsSelect.e("selection"),n.nsSelect.is("near",n.multiple&&!n.$slots.prefix&&!!n.states.selected.length)])},[n.multiple?ke(n.$slots,"tag",{key:0},()=>[(k(!0),Y(mt,null,Zt(n.showTagList,p=>(k(),Y("div",{key:n.getValueKey(p),class:z(n.nsSelect.e("selected-item"))},[le(o,{closable:!n.selectDisabled&&!p.isDisabled,size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",style:pt(n.tagStyle),onClose:y=>n.deleteTag(y,p)},{default:pe(()=>[te("span",{class:z(n.nsSelect.e("tags-text"))},[ke(n.$slots,"label",{label:p.currentLabel,value:p.value},()=>[Yt(Je(p.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),n.collapseTags&&n.states.selected.length>n.maxCollapseTags?(k(),Re(a,{key:0,ref:"tagTooltipRef",disabled:n.dropdownMenuVisible||!n.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:n.effect,placement:"bottom",teleported:n.teleported},{default:pe(()=>[te("div",{ref:"collapseItemRef",class:z(n.nsSelect.e("selected-item"))},[le(o,{closable:!1,size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",style:pt(n.collapseTagStyle)},{default:pe(()=>[te("span",{class:z(n.nsSelect.e("tags-text"))}," + "+Je(n.states.selected.length-n.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:pe(()=>[te("div",{ref:"tagMenuRef",class:z(n.nsSelect.e("selection"))},[(k(!0),Y(mt,null,Zt(n.collapseTagList,p=>(k(),Y("div",{key:n.getValueKey(p),class:z(n.nsSelect.e("selected-item"))},[le(o,{class:"in-tooltip",closable:!n.selectDisabled&&!p.isDisabled,size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",onClose:y=>n.deleteTag(y,p)},{default:pe(()=>[te("span",{class:z(n.nsSelect.e("tags-text"))},[ke(n.$slots,"label",{label:p.currentLabel,value:p.value},()=>[Yt(Je(p.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):Ee("v-if",!0)]):Ee("v-if",!0),n.selectDisabled?Ee("v-if",!0):(k(),Y("div",{key:1,class:z([n.nsSelect.e("selected-item"),n.nsSelect.e("input-wrapper"),n.nsSelect.is("hidden",!n.filterable)])},[Bt(te("input",{id:n.inputId,ref:"inputRef","onUpdate:modelValue":e[0]||(e[0]=p=>n.states.inputValue=p),type:"text",name:n.name,class:z([n.nsSelect.e("input"),n.nsSelect.is(n.selectSize)]),disabled:n.selectDisabled,autocomplete:n.autocomplete,style:pt(n.inputStyle),role:"combobox",readonly:!n.filterable,spellcheck:"false","aria-activedescendant":((m=n.hoverOption)==null?void 0:m.id)||"","aria-controls":n.contentId,"aria-expanded":n.dropdownMenuVisible,"aria-label":n.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onFocus:e[1]||(e[1]=(...p)=>n.handleFocus&&n.handleFocus(...p)),onBlur:e[2]||(e[2]=(...p)=>n.handleBlur&&n.handleBlur(...p)),onKeydown:[e[3]||(e[3]=wn(Tt(p=>n.navigateOptions("next"),["stop","prevent"]),["down"])),e[4]||(e[4]=wn(Tt(p=>n.navigateOptions("prev"),["stop","prevent"]),["up"])),e[5]||(e[5]=wn(Tt((...p)=>n.handleEsc&&n.handleEsc(...p),["stop","prevent"]),["esc"])),e[6]||(e[6]=wn(Tt((...p)=>n.selectOption&&n.selectOption(...p),["stop","prevent"]),["enter"])),e[7]||(e[7]=wn(Tt((...p)=>n.deletePrevTag&&n.deletePrevTag(...p),["stop"]),["delete"]))],onCompositionstart:e[8]||(e[8]=(...p)=>n.handleCompositionStart&&n.handleCompositionStart(...p)),onCompositionupdate:e[9]||(e[9]=(...p)=>n.handleCompositionUpdate&&n.handleCompositionUpdate(...p)),onCompositionend:e[10]||(e[10]=(...p)=>n.handleCompositionEnd&&n.handleCompositionEnd(...p)),onInput:e[11]||(e[11]=(...p)=>n.onInput&&n.onInput(...p)),onClick:e[12]||(e[12]=Tt((...p)=>n.toggleMenu&&n.toggleMenu(...p),["stop"]))},null,46,Kce),[[TE,n.states.inputValue]]),n.filterable?(k(),Y("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:z(n.nsSelect.e("input-calculator")),textContent:Je(n.states.inputValue)},null,10,Yce)):Ee("v-if",!0)],2)),n.shouldShowPlaceholder?(k(),Y("div",{key:2,class:z([n.nsSelect.e("selected-item"),n.nsSelect.e("placeholder"),n.nsSelect.is("transparent",!n.hasModelValue||n.expanded&&!n.states.inputValue)])},[n.hasModelValue?ke(n.$slots,"label",{key:0,label:n.currentPlaceholder,value:n.modelValue},()=>[te("span",null,Je(n.currentPlaceholder),1)]):(k(),Y("span",Xce,Je(n.currentPlaceholder),1))],2)):Ee("v-if",!0)],2),te("div",{ref:"suffixRef",class:z(n.nsSelect.e("suffix"))},[n.iconComponent&&!n.showClose?(k(),Re(l,{key:0,class:z([n.nsSelect.e("caret"),n.nsSelect.e("icon"),n.iconReverse])},{default:pe(()=>[(k(),Re(Wt(n.iconComponent)))]),_:1},8,["class"])):Ee("v-if",!0),n.showClose&&n.clearIcon?(k(),Re(l,{key:1,class:z([n.nsSelect.e("caret"),n.nsSelect.e("icon")]),onClick:n.handleClearClick},{default:pe(()=>[(k(),Re(Wt(n.clearIcon)))]),_:1},8,["class","onClick"])):Ee("v-if",!0),n.validateState&&n.validateIcon?(k(),Re(l,{key:2,class:z([n.nsInput.e("icon"),n.nsInput.e("validateIcon")])},{default:pe(()=>[(k(),Re(Wt(n.validateIcon)))]),_:1},8,["class"])):Ee("v-if",!0)],2)],2)]}),content:pe(()=>[le(h,{ref:"menuRef"},{default:pe(()=>[n.$slots.header?(k(),Y("div",{key:0,class:z(n.nsSelect.be("dropdown","header")),onClick:e[13]||(e[13]=Tt(()=>{},["stop"]))},[ke(n.$slots,"header")],2)):Ee("v-if",!0),Bt(le(d,{id:n.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":n.nsSelect.be("dropdown","wrap"),"view-class":n.nsSelect.be("dropdown","list"),class:z([n.nsSelect.is("empty",n.filteredOptionsCount===0)]),role:"listbox","aria-label":n.ariaLabel,"aria-orientation":"vertical"},{default:pe(()=>[n.showNewOption?(k(),Re(c,{key:0,value:n.states.inputValue,created:!0},null,8,["value"])):Ee("v-if",!0),le(u,null,{default:pe(()=>[ke(n.$slots,"default")]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label"]),[[an,n.states.options.size>0&&!n.loading]]),n.$slots.loading&&n.loading?(k(),Y("div",{key:1,class:z(n.nsSelect.be("dropdown","loading"))},[ke(n.$slots,"loading")],2)):n.loading||n.filteredOptionsCount===0?(k(),Y("div",{key:2,class:z(n.nsSelect.be("dropdown","empty"))},[ke(n.$slots,"empty",{},()=>[te("span",null,Je(n.emptyText),1)])],2)):Ee("v-if",!0),n.$slots.footer?(k(),Y("div",{key:3,class:z(n.nsSelect.be("dropdown","footer")),onClick:e[14]||(e[14]=Tt(()=>{},["stop"]))},[ke(n.$slots,"footer")],2)):Ee("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","onBeforeShow"])],16)),[[f,n.handleClickOutside,n.popperRef]])}var qce=Ze(Wce,[["render",jce],["__file","select.vue"]]);const Zce=se({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(n){const e=Ve("select"),t=V(null),i=zt(),s=V([]);Xt(eB,un({...ws(n)}));const r=R(()=>s.value.some(c=>c.visible===!0)),o=c=>{var u,d;return((u=c.type)==null?void 0:u.name)==="ElOption"&&!!((d=c.component)!=null&&d.proxy)},a=c=>{const u=Jc(c),d=[];return u.forEach(h=>{var f,m;o(h)?d.push(h.component.proxy):(f=h.children)!=null&&f.length?d.push(...a(h.children)):(m=h.component)!=null&&m.subTree&&d.push(...a(h.component.subTree))}),d},l=()=>{s.value=a(i.subTree)};return Ft(()=>{l()}),MD(t,l,{attributes:!0,subtree:!0,childList:!0}),{groupRef:t,visible:r,ns:e}}});function Jce(n,e,t,i,s,r){return Bt((k(),Y("ul",{ref:"groupRef",class:z(n.ns.be("group","wrap"))},[te("li",{class:z(n.ns.be("group","title"))},Je(n.label),3),te("li",null,[te("ul",{class:z(n.ns.b("group"))},[ke(n.$slots,"default")],2)])],2)),[[an,n.visible]])}var nB=Ze(Zce,[["render",Jce],["__file","option-group.vue"]]);const Kd=Ht(qce,{Option:zT,OptionGroup:nB}),q_=si(zT),Qce=si(nB),HT=()=>ct(QF,{}),eue=Ye({pageSize:{type:Number,required:!0},pageSizes:{type:ge(Array),default:()=>ni([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,teleported:Boolean,size:{type:String,values:Ya}}),tue=se({name:"ElPaginationSizes"}),nue=se({...tue,props:eue,emits:["page-size-change"],setup(n,{emit:e}){const t=n,{t:i}=en(),s=Ve("pagination"),r=HT(),o=V(t.pageSize);ze(()=>t.pageSizes,(c,u)=>{if(!Ys(c,u)&&Array.isArray(c)){const d=c.includes(t.pageSize)?t.pageSize:t.pageSizes[0];e("page-size-change",d)}}),ze(()=>t.pageSize,c=>{o.value=c});const a=R(()=>t.pageSizes);function l(c){var u;c!==o.value&&(o.value=c,(u=r.handleSizeChange)==null||u.call(r,Number(c)))}return(c,u)=>(k(),Y("span",{class:z(g(s).e("sizes"))},[le(g(Kd),{"model-value":o.value,disabled:c.disabled,"popper-class":c.popperClass,size:c.size,teleported:c.teleported,"validate-event":!1,onChange:l},{default:pe(()=>[(k(!0),Y(mt,null,Zt(g(a),d=>(k(),Re(g(q_),{key:d,value:d,label:d+g(i)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size","teleported"])],2))}});var iue=Ze(nue,[["__file","sizes.vue"]]);const sue=Ye({size:{type:String,values:Ya}}),rue=["disabled"],oue=se({name:"ElPaginationJumper"}),aue=se({...oue,props:sue,setup(n){const{t:e}=en(),t=Ve("pagination"),{pageCount:i,disabled:s,currentPage:r,changeEvent:o}=HT(),a=V(),l=R(()=>{var d;return(d=a.value)!=null?d:r==null?void 0:r.value});function c(d){a.value=d?+d:""}function u(d){d=Math.trunc(+d),o==null||o(d),a.value=void 0}return(d,h)=>(k(),Y("span",{class:z(g(t).e("jump")),disabled:g(s)},[te("span",{class:z([g(t).e("goto")])},Je(g(e)("el.pagination.goto")),3),le(g(Ks),{size:d.size,class:z([g(t).e("editor"),g(t).is("in-pagination")]),min:1,max:g(i),disabled:g(s),"model-value":g(l),"validate-event":!1,"aria-label":g(e)("el.pagination.page"),type:"number","onUpdate:modelValue":c,onChange:u},null,8,["size","class","max","disabled","model-value","aria-label"]),te("span",{class:z([g(t).e("classifier")])},Je(g(e)("el.pagination.pageClassifier")),3)],10,rue))}});var lue=Ze(aue,[["__file","jumper.vue"]]);const cue=Ye({total:{type:Number,default:1e3}}),uue=["disabled"],due=se({name:"ElPaginationTotal"}),hue=se({...due,props:cue,setup(n){const{t:e}=en(),t=Ve("pagination"),{disabled:i}=HT();return(s,r)=>(k(),Y("span",{class:z(g(t).e("total")),disabled:g(i)},Je(g(e)("el.pagination.total",{total:s.total})),11,uue))}});var fue=Ze(hue,[["__file","total.vue"]]);const pue=Ye({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),mue=["onKeyup"],gue=["aria-current","aria-label","tabindex"],vue=["tabindex","aria-label"],yue=["aria-current","aria-label","tabindex"],_ue=["tabindex","aria-label"],bue=["aria-current","aria-label","tabindex"],wue=se({name:"ElPaginationPager"}),xue=se({...wue,props:pue,emits:["change"],setup(n,{emit:e}){const t=n,i=Ve("pager"),s=Ve("icon"),{t:r}=en(),o=V(!1),a=V(!1),l=V(!1),c=V(!1),u=V(!1),d=V(!1),h=R(()=>{const w=t.pagerCount,x=(w-1)/2,S=Number(t.currentPage),C=Number(t.pageCount);let T=!1,M=!1;C>w&&(S>w-x&&(T=!0),S<C-x&&(M=!0));const E=[];if(T&&!M){const A=C-(w-2);for(let I=A;I<C;I++)E.push(I)}else if(!T&&M)for(let A=2;A<w;A++)E.push(A);else if(T&&M){const A=Math.floor(w/2)-1;for(let I=S-A;I<=S+A;I++)E.push(I)}else for(let A=2;A<C;A++)E.push(A);return E}),f=R(()=>["more","btn-quickprev",s.b(),i.is("disabled",t.disabled)]),m=R(()=>["more","btn-quicknext",s.b(),i.is("disabled",t.disabled)]),p=R(()=>t.disabled?-1:0);Is(()=>{const w=(t.pagerCount-1)/2;o.value=!1,a.value=!1,t.pageCount>t.pagerCount&&(t.currentPage>t.pagerCount-w&&(o.value=!0),t.currentPage<t.pageCount-w&&(a.value=!0))});function y(w=!1){t.disabled||(w?l.value=!0:c.value=!0)}function v(w=!1){w?u.value=!0:d.value=!0}function _(w){const x=w.target;if(x.tagName.toLowerCase()==="li"&&Array.from(x.classList).includes("number")){const S=Number(x.textContent);S!==t.currentPage&&e("change",S)}else x.tagName.toLowerCase()==="li"&&Array.from(x.classList).includes("more")&&b(w)}function b(w){const x=w.target;if(x.tagName.toLowerCase()==="ul"||t.disabled)return;let S=Number(x.textContent);const C=t.pageCount,T=t.currentPage,M=t.pagerCount-2;x.className.includes("more")&&(x.className.includes("quickprev")?S=T-M:x.className.includes("quicknext")&&(S=T+M)),Number.isNaN(+S)||(S<1&&(S=1),S>C&&(S=C)),S!==T&&e("change",S)}return(w,x)=>(k(),Y("ul",{class:z(g(i).b()),onClick:b,onKeyup:wn(_,["enter"])},[w.pageCount>0?(k(),Y("li",{key:0,class:z([[g(i).is("active",w.currentPage===1),g(i).is("disabled",w.disabled)],"number"]),"aria-current":w.currentPage===1,"aria-label":g(r)("el.pagination.currentPage",{pager:1}),tabindex:g(p)}," 1 ",10,gue)):Ee("v-if",!0),o.value?(k(),Y("li",{key:1,class:z(g(f)),tabindex:g(p),"aria-label":g(r)("el.pagination.prevPages",{pager:w.pagerCount-2}),onMouseenter:x[0]||(x[0]=S=>y(!0)),onMouseleave:x[1]||(x[1]=S=>l.value=!1),onFocus:x[2]||(x[2]=S=>v(!0)),onBlur:x[3]||(x[3]=S=>u.value=!1)},[(l.value||u.value)&&!w.disabled?(k(),Re(g(qf),{key:0})):(k(),Re(g(cR),{key:1}))],42,vue)):Ee("v-if",!0),(k(!0),Y(mt,null,Zt(g(h),S=>(k(),Y("li",{key:S,class:z([[g(i).is("active",w.currentPage===S),g(i).is("disabled",w.disabled)],"number"]),"aria-current":w.currentPage===S,"aria-label":g(r)("el.pagination.currentPage",{pager:S}),tabindex:g(p)},Je(S),11,yue))),128)),a.value?(k(),Y("li",{key:2,class:z(g(m)),tabindex:g(p),"aria-label":g(r)("el.pagination.nextPages",{pager:w.pagerCount-2}),onMouseenter:x[4]||(x[4]=S=>y()),onMouseleave:x[5]||(x[5]=S=>c.value=!1),onFocus:x[6]||(x[6]=S=>v()),onBlur:x[7]||(x[7]=S=>d.value=!1)},[(c.value||d.value)&&!w.disabled?(k(),Re(g(Zf),{key:0})):(k(),Re(g(cR),{key:1}))],42,_ue)):Ee("v-if",!0),w.pageCount>1?(k(),Y("li",{key:3,class:z([[g(i).is("active",w.currentPage===w.pageCount),g(i).is("disabled",w.disabled)],"number"]),"aria-current":w.currentPage===w.pageCount,"aria-label":g(r)("el.pagination.currentPage",{pager:w.pageCount}),tabindex:g(p)},Je(w.pageCount),11,bue)):Ee("v-if",!0)],42,mue))}});var Sue=Ze(xue,[["__file","pager.vue"]]);const tr=n=>typeof n!="number",Cue=Ye({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:n=>Ct(n)&&Math.trunc(n)===n&&n>4&&n<22&&n%2===1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:ge(Array),default:()=>ni([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:xn,default:()=>eu},nextText:{type:String,default:""},nextIcon:{type:xn,default:()=>ur},teleported:{type:Boolean,default:!0},small:Boolean,size:Zi,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean}),Mue={"update:current-page":n=>Ct(n),"update:page-size":n=>Ct(n),"size-change":n=>Ct(n),change:(n,e)=>Ct(n)&&Ct(e),"current-change":n=>Ct(n),"prev-click":n=>Ct(n),"next-click":n=>Ct(n)},xP="ElPagination";var Eue=se({name:xP,props:Cue,emits:Mue,setup(n,{emit:e,slots:t}){const{t:i}=en(),s=Ve("pagination"),r=zt().vnode.props||{},o=R(()=>{var w;return n.small?"small":(w=n.size)!=null?w:s4().value});ns({from:"small",replacement:"size",version:"3.0.0",scope:"el-pagination",ref:"https://element-plus.org/zh-CN/component/pagination.html"},R(()=>!!n.small));const a="onUpdate:currentPage"in r||"onUpdate:current-page"in r||"onCurrentChange"in r,l="onUpdate:pageSize"in r||"onUpdate:page-size"in r||"onSizeChange"in r,c=R(()=>{if(tr(n.total)&&tr(n.pageCount)||!tr(n.currentPage)&&!a)return!1;if(n.layout.includes("sizes")){if(tr(n.pageCount)){if(!tr(n.total)&&!tr(n.pageSize)&&!l)return!1}else if(!l)return!1}return!0}),u=V(tr(n.defaultPageSize)?10:n.defaultPageSize),d=V(tr(n.defaultCurrentPage)?1:n.defaultCurrentPage),h=R({get(){return tr(n.pageSize)?u.value:n.pageSize},set(w){tr(n.pageSize)&&(u.value=w),l&&(e("update:page-size",w),e("size-change",w))}}),f=R(()=>{let w=0;return tr(n.pageCount)?tr(n.total)||(w=Math.max(1,Math.ceil(n.total/h.value))):w=n.pageCount,w}),m=R({get(){return tr(n.currentPage)?d.value:n.currentPage},set(w){let x=w;w<1?x=1:w>f.value&&(x=f.value),tr(n.currentPage)&&(d.value=x),a&&(e("update:current-page",x),e("current-change",x))}});ze(f,w=>{m.value>w&&(m.value=w)}),ze([m,h],w=>{e("change",...w)},{flush:"post"});function p(w){m.value=w}function y(w){h.value=w;const x=f.value;m.value>x&&(m.value=x)}function v(){n.disabled||(m.value-=1,e("prev-click",m.value))}function _(){n.disabled||(m.value+=1,e("next-click",m.value))}function b(w,x){w&&(w.props||(w.props={}),w.props.class=[w.props.class,x].join(" "))}return Xt(QF,{pageCount:f,disabled:R(()=>n.disabled),currentPage:m,changeEvent:p,handleSizeChange:y}),()=>{var w,x;if(!c.value)return i("el.pagination.deprecationWarning"),null;if(!n.layout||n.hideOnSinglePage&&f.value<=1)return null;const S=[],C=[],T=_t("div",{class:s.e("rightwrapper")},C),M={prev:_t(Tce,{disabled:n.disabled,currentPage:m.value,prevText:n.prevText,prevIcon:n.prevIcon,onClick:v}),jumper:_t(lue,{size:o.value}),pager:_t(Sue,{currentPage:m.value,pageCount:f.value,pagerCount:n.pagerCount,onChange:p,disabled:n.disabled}),next:_t(kce,{disabled:n.disabled,currentPage:m.value,pageCount:f.value,nextText:n.nextText,nextIcon:n.nextIcon,onClick:_}),sizes:_t(iue,{pageSize:h.value,pageSizes:n.pageSizes,popperClass:n.popperClass,disabled:n.disabled,teleported:n.teleported,size:o.value}),slot:(x=(w=t==null?void 0:t.default)==null?void 0:w.call(t))!=null?x:null,total:_t(fue,{total:tr(n.total)?0:n.total})},E=n.layout.split(",").map(I=>I.trim());let A=!1;return E.forEach(I=>{if(I==="->"){A=!0;return}A?C.push(M[I]):S.push(M[I])}),b(S[0],s.is("first")),b(S[S.length-1],s.is("last")),A&&C.length>0&&(b(C[0],s.is("first")),b(C[C.length-1],s.is("last")),S.push(T)),_t("div",{class:[s.b(),s.is("background",n.background),s.m(o.value)]},S)}}});const Tue=Ht(Eue),Aue=Ye({title:String,confirmButtonText:String,cancelButtonText:String,confirmButtonType:{type:String,values:CC,default:"primary"},cancelButtonType:{type:String,values:CC,default:"text"},icon:{type:xn,default:()=>KY},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1},hideAfter:{type:Number,default:200},teleported:rs.teleported,persistent:rs.persistent,width:{type:[String,Number],default:150}}),Iue={confirm:n=>n instanceof MouseEvent,cancel:n=>n instanceof MouseEvent},Rue=se({name:"ElPopconfirm"}),Pue=se({...Rue,props:Aue,emits:Iue,setup(n,{emit:e}){const t=n,{t:i}=en(),s=Ve("popconfirm"),r=V(),o=()=>{var h,f;(f=(h=r.value)==null?void 0:h.onClose)==null||f.call(h)},a=R(()=>({width:pi(t.width)})),l=h=>{e("confirm",h),o()},c=h=>{e("cancel",h),o()},u=R(()=>t.confirmButtonText||i("el.popconfirm.confirmButtonText")),d=R(()=>t.cancelButtonText||i("el.popconfirm.cancelButtonText"));return(h,f)=>(k(),Re(g(Zs),Kt({ref_key:"tooltipRef",ref:r,trigger:"click",effect:"light"},h.$attrs,{"popper-class":`${g(s).namespace.value}-popover`,"popper-style":g(a),teleported:h.teleported,"fallback-placements":["bottom","top","right","left"],"hide-after":h.hideAfter,persistent:h.persistent}),{content:pe(()=>[te("div",{class:z(g(s).b())},[te("div",{class:z(g(s).e("main"))},[!h.hideIcon&&h.icon?(k(),Re(g(dt),{key:0,class:z(g(s).e("icon")),style:pt({color:h.iconColor})},{default:pe(()=>[(k(),Re(Wt(h.icon)))]),_:1},8,["class","style"])):Ee("v-if",!0),Yt(" "+Je(h.title),1)],2),te("div",{class:z(g(s).e("action"))},[le(g(as),{size:"small",type:h.cancelButtonType==="text"?"":h.cancelButtonType,text:h.cancelButtonType==="text",onClick:c},{default:pe(()=>[Yt(Je(g(d)),1)]),_:1},8,["type","text"]),le(g(as),{size:"small",type:h.confirmButtonType==="text"?"":h.confirmButtonType,text:h.confirmButtonType==="text",onClick:l},{default:pe(()=>[Yt(Je(g(u)),1)]),_:1},8,["type","text"])],2)],2)]),default:pe(()=>[h.$slots.reference?ke(h.$slots,"reference",{key:0}):Ee("v-if",!0)]),_:3},16,["popper-class","popper-style","teleported","hide-after","persistent"]))}});var Lue=Ze(Pue,[["__file","popconfirm.vue"]]);const kue=Ht(Lue),Oue=Ye({trigger:kg.trigger,placement:f_.placement,disabled:kg.disabled,visible:rs.visible,transition:rs.transition,popperOptions:f_.popperOptions,tabindex:f_.tabindex,content:rs.content,popperStyle:rs.popperStyle,popperClass:rs.popperClass,enterable:{...rs.enterable,default:!0},effect:{...rs.effect,default:"light"},teleported:rs.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),Due={"update:visible":n=>_i(n),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},Nue="onUpdate:visible",Fue=se({name:"ElPopover"}),Bue=se({...Fue,props:Oue,emits:Due,setup(n,{expose:e,emit:t}){const i=n,s=R(()=>i[Nue]),r=Ve("popover"),o=V(),a=R(()=>{var y;return(y=g(o))==null?void 0:y.popperRef}),l=R(()=>[{width:pi(i.width)},i.popperStyle]),c=R(()=>[r.b(),i.popperClass,{[r.m("plain")]:!!i.content}]),u=R(()=>i.transition===`${r.namespace.value}-fade-in-linear`),d=()=>{var y;(y=o.value)==null||y.hide()},h=()=>{t("before-enter")},f=()=>{t("before-leave")},m=()=>{t("after-enter")},p=()=>{t("update:visible",!1),t("after-leave")};return e({popperRef:a,hide:d}),(y,v)=>(k(),Re(g(Zs),Kt({ref_key:"tooltipRef",ref:o},y.$attrs,{trigger:y.trigger,placement:y.placement,disabled:y.disabled,visible:y.visible,transition:y.transition,"popper-options":y.popperOptions,tabindex:y.tabindex,content:y.content,offset:y.offset,"show-after":y.showAfter,"hide-after":y.hideAfter,"auto-close":y.autoClose,"show-arrow":y.showArrow,"aria-label":y.title,effect:y.effect,enterable:y.enterable,"popper-class":g(c),"popper-style":g(l),teleported:y.teleported,persistent:y.persistent,"gpu-acceleration":g(u),"onUpdate:visible":g(s),onBeforeShow:h,onBeforeHide:f,onShow:m,onHide:p}),{content:pe(()=>[y.title?(k(),Y("div",{key:0,class:z(g(r).e("title")),role:"title"},Je(y.title),3)):Ee("v-if",!0),ke(y.$slots,"default",{},()=>[Yt(Je(y.content),1)])]),default:pe(()=>[y.$slots.reference?ke(y.$slots,"reference",{key:0}):Ee("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var Uue=Ze(Bue,[["__file","popover.vue"]]);const SP=(n,e)=>{const t=e.arg||e.value,i=t==null?void 0:t.popperRef;i&&(i.triggerRef=n)};var zue={mounted(n,e){SP(n,e)},updated(n,e){SP(n,e)}};const Hue="popover",iB=_X(zue,Hue),Vue=Ht(Uue,{directive:iB}),$ue=Ye({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:n=>n>=0&&n<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:ge(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:ge([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:ge(Function),default:n=>`${n}%`}}),Gue=["aria-valuenow"],Wue={viewBox:"0 0 100 100"},Kue=["d","stroke","stroke-linecap","stroke-width"],Yue=["d","stroke","opacity","stroke-linecap","stroke-width"],Xue={key:0},jue=se({name:"ElProgress"}),que=se({...jue,props:$ue,setup(n){const e=n,t={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},i=Ve("progress"),s=R(()=>{const b={width:`${e.percentage}%`,animationDuration:`${e.duration}s`},w=_(e.percentage);return w.includes("gradient")?b.background=w:b.backgroundColor=w,b}),r=R(()=>(e.strokeWidth/e.width*100).toFixed(1)),o=R(()=>["circle","dashboard"].includes(e.type)?Number.parseInt(`${50-Number.parseFloat(r.value)/2}`,10):0),a=R(()=>{const b=o.value,w=e.type==="dashboard";return`
          M 50 50
          m 0 ${w?"":"-"}${b}
          a ${b} ${b} 0 1 1 0 ${w?"-":""}${b*2}
          a ${b} ${b} 0 1 1 0 ${w?"":"-"}${b*2}
          `}),l=R(()=>2*Math.PI*o.value),c=R(()=>e.type==="dashboard"?.75:1),u=R(()=>`${-1*l.value*(1-c.value)/2}px`),d=R(()=>({strokeDasharray:`${l.value*c.value}px, ${l.value}px`,strokeDashoffset:u.value})),h=R(()=>({strokeDasharray:`${l.value*c.value*(e.percentage/100)}px, ${l.value}px`,strokeDashoffset:u.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),f=R(()=>{let b;return e.color?b=_(e.percentage):b=t[e.status]||t.default,b}),m=R(()=>e.status==="warning"?I1:e.type==="line"?e.status==="success"?jE:mu:e.status==="success"?Bv:ia),p=R(()=>e.type==="line"?12+e.strokeWidth*.4:e.width*.111111+2),y=R(()=>e.format(e.percentage));function v(b){const w=100/b.length;return b.map((S,C)=>Rt(S)?{color:S,percentage:(C+1)*w}:S).sort((S,C)=>S.percentage-C.percentage)}const _=b=>{var w;const{color:x}=e;if(xt(x))return x(b);if(Rt(x))return x;{const S=v(x);for(const C of S)if(C.percentage>b)return C.color;return(w=S[S.length-1])==null?void 0:w.color}};return(b,w)=>(k(),Y("div",{class:z([g(i).b(),g(i).m(b.type),g(i).is(b.status),{[g(i).m("without-text")]:!b.showText,[g(i).m("text-inside")]:b.textInside}]),role:"progressbar","aria-valuenow":b.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[b.type==="line"?(k(),Y("div",{key:0,class:z(g(i).b("bar"))},[te("div",{class:z(g(i).be("bar","outer")),style:pt({height:`${b.strokeWidth}px`})},[te("div",{class:z([g(i).be("bar","inner"),{[g(i).bem("bar","inner","indeterminate")]:b.indeterminate},{[g(i).bem("bar","inner","striped")]:b.striped},{[g(i).bem("bar","inner","striped-flow")]:b.stripedFlow}]),style:pt(g(s))},[(b.showText||b.$slots.default)&&b.textInside?(k(),Y("div",{key:0,class:z(g(i).be("bar","innerText"))},[ke(b.$slots,"default",{percentage:b.percentage},()=>[te("span",null,Je(g(y)),1)])],2)):Ee("v-if",!0)],6)],6)],2)):(k(),Y("div",{key:1,class:z(g(i).b("circle")),style:pt({height:`${b.width}px`,width:`${b.width}px`})},[(k(),Y("svg",Wue,[te("path",{class:z(g(i).be("circle","track")),d:g(a),stroke:`var(${g(i).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":b.strokeLinecap,"stroke-width":g(r),fill:"none",style:pt(g(d))},null,14,Kue),te("path",{class:z(g(i).be("circle","path")),d:g(a),stroke:g(f),fill:"none",opacity:b.percentage?1:0,"stroke-linecap":b.strokeLinecap,"stroke-width":g(r),style:pt(g(h))},null,14,Yue)]))],6)),(b.showText||b.$slots.default)&&!b.textInside?(k(),Y("div",{key:2,class:z(g(i).e("text")),style:pt({fontSize:`${g(p)}px`})},[ke(b.$slots,"default",{percentage:b.percentage},()=>[b.status?(k(),Re(g(dt),{key:1},{default:pe(()=>[(k(),Re(Wt(g(m))))]),_:1})):(k(),Y("span",Xue,Je(g(y)),1))])],6)):Ee("v-if",!0)],10,Gue))}});var Zue=Ze(que,[["__file","progress.vue"]]);const sB=Ht(Zue),Jue=Ye({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:ge([Array,Object]),default:()=>ni(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:ge([Array,Object]),default:()=>[S0,S0,S0]},voidIcon:{type:xn,default:()=>aX},disabledVoidIcon:{type:xn,default:()=>S0},disabled:Boolean,allowHalf:Boolean,showText:Boolean,showScore:Boolean,textColor:{type:String,default:""},texts:{type:ge(Array),default:()=>ni(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:Zi,label:{type:String,default:void 0},clearable:Boolean,...Ss(["ariaLabel"])}),Que={[Fn]:n=>Ct(n),[Gt]:n=>Ct(n)},ede=["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"],tde=["onMousemove","onClick"],nde=se({name:"ElRate"}),ide=se({...nde,props:Jue,emits:Que,setup(n,{expose:e,emit:t}){const i=n;function s(P,O){const D=X=>$t(X),L=Object.keys(O).map(X=>+X).filter(X=>{const ne=O[X];return(D(ne)?ne.excluded:!1)?P<X:P<=X}).sort((X,ne)=>X-ne),H=O[L[0]];return D(H)&&H.value||H}const r=ct(hh,void 0),o=ct(Ga,void 0),a=Hi(),l=Ve("rate"),{inputId:c,isLabeledByFormItem:u}=ca(i,{formItemContext:o}),d=V(i.modelValue),h=V(-1),f=V(!0),m=R(()=>[l.b(),l.m(a.value)]),p=R(()=>i.disabled||(r==null?void 0:r.disabled)),y=R(()=>l.cssVarBlock({"void-color":i.voidColor,"disabled-void-color":i.disabledVoidColor,"fill-color":w.value})),v=R(()=>{let P="";return i.showScore?P=i.scoreTemplate.replace(/\{\s*value\s*\}/,p.value?`${i.modelValue}`:`${d.value}`):i.showText&&(P=i.texts[Math.ceil(d.value)-1]),P}),_=R(()=>i.modelValue*100-Math.floor(i.modelValue)*100),b=R(()=>rt(i.colors)?{[i.lowThreshold]:i.colors[0],[i.highThreshold]:{value:i.colors[1],excluded:!0},[i.max]:i.colors[2]}:i.colors),w=R(()=>{const P=s(d.value,b.value);return $t(P)?"":P}),x=R(()=>{let P="";return p.value?P=`${_.value}%`:i.allowHalf&&(P="50%"),{color:w.value,width:P}}),S=R(()=>{let P=rt(i.icons)?[...i.icons]:{...i.icons};return P=El(P),rt(P)?{[i.lowThreshold]:P[0],[i.highThreshold]:{value:P[1],excluded:!0},[i.max]:P[2]}:P}),C=R(()=>s(i.modelValue,S.value)),T=R(()=>p.value?Rt(i.disabledVoidIcon)?i.disabledVoidIcon:El(i.disabledVoidIcon):Rt(i.voidIcon)?i.voidIcon:El(i.voidIcon)),M=R(()=>s(d.value,S.value));function E(P){const O=p.value&&_.value>0&&P-1<i.modelValue&&P>i.modelValue,D=i.allowHalf&&f.value&&P-.5<=d.value&&P>d.value;return O||D}function A(P){i.clearable&&P===i.modelValue&&(P=0),t(Gt,P),i.modelValue!==P&&t("change",P)}function I(P){p.value||(i.allowHalf&&f.value?A(d.value):A(P))}function B(P){if(p.value)return;let O=d.value;const D=P.code;return D===wt.up||D===wt.right?(i.allowHalf?O+=.5:O+=1,P.stopPropagation(),P.preventDefault()):(D===wt.left||D===wt.down)&&(i.allowHalf?O-=.5:O-=1,P.stopPropagation(),P.preventDefault()),O=O<0?0:O,O=O>i.max?i.max:O,t(Gt,O),t("change",O),O}function F(P,O){if(!p.value){if(i.allowHalf&&O){let D=O.target;Yr(D,l.e("item"))&&(D=D.querySelector(`.${l.e("icon")}`)),(D.clientWidth===0||Yr(D,l.e("decimal")))&&(D=D.parentNode),f.value=O.offsetX*2<=D.clientWidth,d.value=f.value?P-.5:P}else d.value=P;h.value=P}}function U(){p.value||(i.allowHalf&&(f.value=i.modelValue!==Math.floor(i.modelValue)),d.value=i.modelValue,h.value=-1)}return ze(()=>i.modelValue,P=>{d.value=P,f.value=i.modelValue!==Math.floor(i.modelValue)}),i.modelValue||t(Gt,0),ns({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-rate",ref:"https://element-plus.org/en-US/component/rate.html"},R(()=>!!i.label)),e({setCurrentValue:F,resetCurrentValue:U}),(P,O)=>{var D;return k(),Y("div",{id:g(c),class:z([g(m),g(l).is("disabled",g(p))]),role:"slider","aria-label":g(u)?void 0:P.label||P.ariaLabel||"rating","aria-labelledby":g(u)?(D=g(o))==null?void 0:D.labelId:void 0,"aria-valuenow":d.value,"aria-valuetext":g(v)||void 0,"aria-valuemin":"0","aria-valuemax":P.max,tabindex:"0",style:pt(g(y)),onKeydown:B},[(k(!0),Y(mt,null,Zt(P.max,(L,H)=>(k(),Y("span",{key:H,class:z(g(l).e("item")),onMousemove:X=>F(L,X),onMouseleave:U,onClick:X=>I(L)},[le(g(dt),{class:z([g(l).e("icon"),{hover:h.value===L},g(l).is("active",L<=d.value)])},{default:pe(()=>[E(L)?Ee("v-if",!0):(k(),Y(mt,{key:0},[Bt((k(),Re(Wt(g(M)),null,null,512)),[[an,L<=d.value]]),Bt((k(),Re(Wt(g(T)),null,null,512)),[[an,!(L<=d.value)]])],64)),E(L)?(k(),Y(mt,{key:1},[(k(),Re(Wt(g(T)),{class:z([g(l).em("decimal","box")])},null,8,["class"])),le(g(dt),{style:pt(g(x)),class:z([g(l).e("icon"),g(l).e("decimal")])},{default:pe(()=>[(k(),Re(Wt(g(C))))]),_:1},8,["style","class"])],64)):Ee("v-if",!0)]),_:2},1032,["class"])],42,tde))),128)),P.showText||P.showScore?(k(),Y("span",{key:0,class:z(g(l).e("text")),style:pt({color:P.textColor})},Je(g(v)),7)):Ee("v-if",!0)],46,ede)}}});var sde=Ze(ide,[["__file","rate.vue"]]);const rde=Ht(sde),hf={success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},CP={[hf.success]:fY,[hf.warning]:I1,[hf.error]:qE,[hf.info]:ZE},ode=Ye({title:{type:String,default:""},subTitle:{type:String,default:""},icon:{type:String,values:["success","warning","info","error"],default:"info"}}),ade=se({name:"ElResult"}),lde=se({...ade,props:ode,setup(n){const e=n,t=Ve("result"),i=R(()=>{const s=e.icon,r=s&&hf[s]?hf[s]:"icon-info",o=CP[r]||CP["icon-info"];return{class:r,component:o}});return(s,r)=>(k(),Y("div",{class:z(g(t).b())},[te("div",{class:z(g(t).e("icon"))},[ke(s.$slots,"icon",{},()=>[g(i).component?(k(),Re(Wt(g(i).component),{key:0,class:z(g(i).class)},null,8,["class"])):Ee("v-if",!0)])],2),s.title||s.$slots.title?(k(),Y("div",{key:0,class:z(g(t).e("title"))},[ke(s.$slots,"title",{},()=>[te("p",null,Je(s.title),1)])],2)):Ee("v-if",!0),s.subTitle||s.$slots["sub-title"]?(k(),Y("div",{key:1,class:z(g(t).e("subtitle"))},[ke(s.$slots,"sub-title",{},()=>[te("p",null,Je(s.subTitle),1)])],2)):Ee("v-if",!0),s.$slots.extra?(k(),Y("div",{key:2,class:z(g(t).e("extra"))},[ke(s.$slots,"extra")],2)):Ee("v-if",!0)],2))}});var cde=Ze(lde,[["__file","result.vue"]]);const ude=Ht(cde);var MP=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function dde(n,e){return!!(n===e||MP(n)&&MP(e))}function hde(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!dde(n[t],e[t]))return!1;return!0}function fde(n,e){e===void 0&&(e=hde);var t=null;function i(){for(var s=[],r=0;r<arguments.length;r++)s[r]=arguments[r];if(t&&t.lastThis===this&&e(s,t.lastArgs))return t.lastResult;var o=n.apply(this,s);return t={lastResult:o,lastArgs:s,lastThis:this},o}return i.clear=function(){t=null},i}const rB=()=>{const e=zt().proxy.$props;return R(()=>{const t=(i,s,r)=>({});return e.perfMode?M1(t):fde(t)})},WC=50,Z_="itemRendered",J_="scroll",ff="forward",Q_="backward",So="auto",V1="smart",Ng="start",Ia="center",Fg="end",op="horizontal",VT="vertical",pde="ltr",Pf="rtl",Bg="negative",$T="positive-ascending",GT="positive-descending",mde={[op]:"left",[VT]:"top"},gde=20,vde={[op]:"deltaX",[VT]:"deltaY"},yde=({atEndEdge:n,atStartEdge:e,layout:t},i)=>{let s,r=0;const o=l=>l<0&&e.value||l>0&&n.value;return{hasReachedEdge:o,onWheel:l=>{Vd(s);const c=l[vde[t.value]];o(r)&&o(r+c)||(r+=c,TD()||l.preventDefault(),s=Qc(()=>{i(r),r=0}))}}},KC=aa({type:ge([Number,Function]),required:!0}),YC=aa({type:Number}),XC=aa({type:Number,default:2}),_de=aa({type:String,values:["ltr","rtl"],default:"ltr"}),jC=aa({type:Number,default:0}),eb=aa({type:Number,required:!0}),oB=aa({type:String,values:["horizontal","vertical"],default:VT}),aB=Ye({className:{type:String,default:""},containerElement:{type:ge([String,Object]),default:"div"},data:{type:ge(Array),default:()=>ni([])},direction:_de,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:ge([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),lB=Ye({cache:XC,estimatedItemSize:YC,layout:oB,initScrollOffset:jC,total:eb,itemSize:KC,...aB}),qC={type:Number,default:6},cB={type:Number,default:0},uB={type:Number,default:2},wd=Ye({columnCache:XC,columnWidth:KC,estimatedColumnWidth:YC,estimatedRowHeight:YC,initScrollLeft:jC,initScrollTop:jC,itemKey:{type:ge(Function),default:({columnIndex:n,rowIndex:e})=>`${e}:${n}`},rowCache:XC,rowHeight:KC,totalColumn:eb,totalRow:eb,hScrollbarSize:qC,vScrollbarSize:qC,scrollbarStartGap:cB,scrollbarEndGap:uB,role:String,...aB}),dB=Ye({alwaysOn:Boolean,class:String,layout:oB,total:eb,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:qC,startGap:cB,endGap:uB,visible:Boolean}),od=(n,e)=>n<e?ff:Q_,Ug=n=>n===pde||n===Pf||n===op,EP=n=>n===Pf;let Eh=null;function tb(n=!1){if(Eh===null||n){const e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",t.direction="rtl";const i=document.createElement("div"),s=i.style;return s.width="100px",s.height="100px",e.appendChild(i),document.body.appendChild(e),e.scrollLeft>0?Eh=GT:(e.scrollLeft=1,e.scrollLeft===0?Eh=Bg:Eh=$T),document.body.removeChild(e),Eh}return Eh}function bde({move:n,size:e,bar:t},i){const s={},r=`translate${t.axis}(${n}px)`;return s[t.size]=e,s.transform=r,s.msTransform=r,s.webkitTransform=r,i==="horizontal"?s.height="100%":s.width="100%",s}const ZC=se({name:"ElVirtualScrollBar",props:dB,emits:["scroll","start-move","stop-move"],setup(n,{emit:e}){const t=R(()=>n.startGap+n.endGap),i=Ve("virtual-scrollbar"),s=Ve("scrollbar"),r=V(),o=V();let a=null,l=null;const c=un({isDragging:!1,traveled:0}),u=R(()=>u4[n.layout]),d=R(()=>n.clientSize-g(t)),h=R(()=>({position:"absolute",width:`${op===n.layout?d.value:n.scrollbarSize}px`,height:`${op===n.layout?n.scrollbarSize:d.value}px`,[mde[n.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),f=R(()=>{const S=n.ratio,C=n.clientSize;if(S>=100)return Number.POSITIVE_INFINITY;if(S>=50)return S*C/100;const T=C/3;return Math.floor(Math.min(Math.max(S*C,gde),T))}),m=R(()=>{if(!Number.isFinite(f.value))return{display:"none"};const S=`${f.value}px`;return bde({bar:u.value,size:S,move:c.traveled},n.layout)}),p=R(()=>Math.floor(n.clientSize-f.value-g(t))),y=()=>{window.addEventListener("mousemove",w),window.addEventListener("mouseup",b);const S=g(o);S&&(l=document.onselectstart,document.onselectstart=()=>!1,S.addEventListener("touchmove",w),S.addEventListener("touchend",b))},v=()=>{window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",b),document.onselectstart=l,l=null;const S=g(o);S&&(S.removeEventListener("touchmove",w),S.removeEventListener("touchend",b))},_=S=>{S.stopImmediatePropagation(),!(S.ctrlKey||[1,2].includes(S.button))&&(c.isDragging=!0,c[u.value.axis]=S.currentTarget[u.value.offset]-(S[u.value.client]-S.currentTarget.getBoundingClientRect()[u.value.direction]),e("start-move"),y())},b=()=>{c.isDragging=!1,c[u.value.axis]=0,e("stop-move"),v()},w=S=>{const{isDragging:C}=c;if(!C||!o.value||!r.value)return;const T=c[u.value.axis];if(!T)return;Vd(a);const M=(r.value.getBoundingClientRect()[u.value.direction]-S[u.value.client])*-1,E=o.value[u.value.offset]-T,A=M-E;a=Qc(()=>{c.traveled=Math.max(n.startGap,Math.min(A,p.value)),e("scroll",A,p.value)})},x=S=>{const C=Math.abs(S.target.getBoundingClientRect()[u.value.direction]-S[u.value.client]),T=o.value[u.value.offset]/2,M=C-T;c.traveled=Math.max(0,Math.min(M,p.value)),e("scroll",M,p.value)};return ze(()=>n.scrollFrom,S=>{c.isDragging||(c.traveled=Math.ceil(S*p.value))}),kn(()=>{v()}),()=>_t("div",{role:"presentation",ref:r,class:[i.b(),n.class,(n.alwaysOn||c.isDragging)&&"always-on"],style:h.value,onMousedown:Tt(x,["stop","prevent"]),onTouchstartPrevent:_},_t("div",{ref:o,class:s.e("thumb"),style:m.value,onMousedown:_},[]))}}),hB=({name:n,getOffset:e,getItemSize:t,getItemOffset:i,getEstimatedTotalSize:s,getStartIndexForOffset:r,getStopIndexForStartIndex:o,initCache:a,clearCache:l,validateProps:c})=>se({name:n??"ElVirtualList",props:lB,emits:[Z_,J_],setup(u,{emit:d,expose:h}){c(u);const f=zt(),m=Ve("vl"),p=V(a(u,f)),y=rB(),v=V(),_=V(),b=V(),w=V({isScrolling:!1,scrollDir:"forward",scrollOffset:Ct(u.initScrollOffset)?u.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:u.scrollbarAlwaysOn}),x=R(()=>{const{total:ce,cache:ae}=u,{isScrolling:_e,scrollDir:re,scrollOffset:xe}=g(w);if(ce===0)return[0,0,0,0];const he=r(u,xe,g(p)),Te=o(u,he,xe,g(p)),Ce=!_e||re===Q_?Math.max(1,ae):1,we=!_e||re===ff?Math.max(1,ae):1;return[Math.max(0,he-Ce),Math.max(0,Math.min(ce-1,Te+we)),he,Te]}),S=R(()=>s(u,g(p))),C=R(()=>Ug(u.layout)),T=R(()=>[{position:"relative",[`overflow-${C.value?"x":"y"}`]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:u.direction,height:Ct(u.height)?`${u.height}px`:u.height,width:Ct(u.width)?`${u.width}px`:u.width},u.style]),M=R(()=>{const ce=g(S),ae=g(C);return{height:ae?"100%":`${ce}px`,pointerEvents:g(w).isScrolling?"none":void 0,width:ae?`${ce}px`:"100%"}}),E=R(()=>C.value?u.width:u.height),{onWheel:A}=yde({atStartEdge:R(()=>w.value.scrollOffset<=0),atEndEdge:R(()=>w.value.scrollOffset>=S.value),layout:R(()=>u.layout)},ce=>{var ae,_e;(_e=(ae=b.value).onMouseUp)==null||_e.call(ae),O(Math.min(w.value.scrollOffset+ce,S.value-E.value))}),I=()=>{const{total:ce}=u;if(ce>0){const[xe,he,Te,Ce]=g(x);d(Z_,xe,he,Te,Ce)}const{scrollDir:ae,scrollOffset:_e,updateRequested:re}=g(w);d(J_,ae,_e,re)},B=ce=>{const{clientHeight:ae,scrollHeight:_e,scrollTop:re}=ce.currentTarget,xe=g(w);if(xe.scrollOffset===re)return;const he=Math.max(0,Math.min(re,_e-ae));w.value={...xe,isScrolling:!0,scrollDir:od(xe.scrollOffset,he),scrollOffset:he,updateRequested:!1},vt(H)},F=ce=>{const{clientWidth:ae,scrollLeft:_e,scrollWidth:re}=ce.currentTarget,xe=g(w);if(xe.scrollOffset===_e)return;const{direction:he}=u;let Te=_e;if(he===Pf)switch(tb()){case Bg:{Te=-_e;break}case GT:{Te=re-ae-_e;break}}Te=Math.max(0,Math.min(Te,re-ae)),w.value={...xe,isScrolling:!0,scrollDir:od(xe.scrollOffset,Te),scrollOffset:Te,updateRequested:!1},vt(H)},U=ce=>{g(C)?F(ce):B(ce),I()},P=(ce,ae)=>{const _e=(S.value-E.value)/ae*ce;O(Math.min(S.value-E.value,_e))},O=ce=>{ce=Math.max(ce,0),ce!==g(w).scrollOffset&&(w.value={...g(w),scrollOffset:ce,scrollDir:od(g(w).scrollOffset,ce),updateRequested:!0},vt(H))},D=(ce,ae=So)=>{const{scrollOffset:_e}=g(w);ce=Math.max(0,Math.min(ce,u.total-1)),O(e(u,ce,ae,_e,g(p)))},L=ce=>{const{direction:ae,itemSize:_e,layout:re}=u,xe=y.value(l&&_e,l&&re,l&&ae);let he;if(Qt(xe,String(ce)))he=xe[ce];else{const Te=i(u,ce,g(p)),Ce=t(u,ce,g(p)),we=g(C),K=ae===Pf,j=we?Te:0;xe[ce]=he={position:"absolute",left:K?void 0:`${j}px`,right:K?`${j}px`:void 0,top:we?0:`${Te}px`,height:we?"100%":`${Ce}px`,width:we?`${Ce}px`:"100%"}}return he},H=()=>{w.value.isScrolling=!1,vt(()=>{y.value(-1,null,null)})},X=()=>{const ce=v.value;ce&&(ce.scrollTop=0)};Ft(()=>{if(!Jt)return;const{initScrollOffset:ce}=u,ae=g(v);Ct(ce)&&ae&&(g(C)?ae.scrollLeft=ce:ae.scrollTop=ce),I()}),Kl(()=>{const{direction:ce,layout:ae}=u,{scrollOffset:_e,updateRequested:re}=g(w),xe=g(v);if(re&&xe)if(ae===op)if(ce===Pf)switch(tb()){case Bg:{xe.scrollLeft=-_e;break}case $T:{xe.scrollLeft=_e;break}default:{const{clientWidth:he,scrollWidth:Te}=xe;xe.scrollLeft=Te-he-_e;break}}else xe.scrollLeft=_e;else xe.scrollTop=_e}),PO(()=>{g(v).scrollTop=g(w).scrollOffset});const ne={ns:m,clientSize:E,estimatedTotalSize:S,windowStyle:T,windowRef:v,innerRef:_,innerStyle:M,itemsToRender:x,scrollbarRef:b,states:w,getItemStyle:L,onScroll:U,onScrollbarScroll:P,onWheel:A,scrollTo:O,scrollToItem:D,resetScrollTop:X};return h({windowRef:v,innerRef:_,getItemStyleCache:y,scrollTo:O,scrollToItem:D,resetScrollTop:X,states:w}),ne},render(u){var d;const{$slots:h,className:f,clientSize:m,containerElement:p,data:y,getItemStyle:v,innerElement:_,itemsToRender:b,innerStyle:w,layout:x,total:S,onScroll:C,onScrollbarScroll:T,onWheel:M,states:E,useIsScrolling:A,windowStyle:I,ns:B}=u,[F,U]=b,P=Wt(p),O=Wt(_),D=[];if(S>0)for(let ne=F;ne<=U;ne++)D.push((d=h.default)==null?void 0:d.call(h,{data:y,key:ne,index:ne,isScrolling:A?E.isScrolling:void 0,style:v(ne)}));const L=[_t(O,{style:w,ref:"innerRef"},Rt(O)?D:{default:()=>D})],H=_t(ZC,{ref:"scrollbarRef",clientSize:m,layout:x,onScroll:T,ratio:m*100/this.estimatedTotalSize,scrollFrom:E.scrollOffset/(this.estimatedTotalSize-m),total:S}),X=_t(P,{class:[B.e("window"),f],style:I,onScroll:C,onWheel:M,ref:"windowRef",key:0},Rt(P)?[L]:{default:()=>[L]});return _t("div",{key:0,class:[B.e("wrapper"),E.scrollbarAlwaysOn?"always-on":""]},[X,H])}}),fB=hB({name:"ElFixedSizeList",getItemOffset:({itemSize:n},e)=>e*n,getItemSize:({itemSize:n})=>n,getEstimatedTotalSize:({total:n,itemSize:e})=>e*n,getOffset:({height:n,total:e,itemSize:t,layout:i,width:s},r,o,a)=>{const l=Ug(i)?s:n,c=Math.max(0,e*t-l),u=Math.min(c,r*t),d=Math.max(0,(r+1)*t-l);switch(o===V1&&(a>=d-l&&a<=u+l?o=So:o=Ia),o){case Ng:return u;case Fg:return d;case Ia:{const h=Math.round(d+(u-d)/2);return h<Math.ceil(l/2)?0:h>c+Math.floor(l/2)?c:h}case So:default:return a>=d&&a<=u?a:a<d?d:u}},getStartIndexForOffset:({total:n,itemSize:e},t)=>Math.max(0,Math.min(n-1,Math.floor(t/e))),getStopIndexForStartIndex:({height:n,total:e,itemSize:t,layout:i,width:s},r,o)=>{const a=r*t,l=Ug(i)?s:n,c=Math.ceil((l+o-a)/t);return Math.max(0,Math.min(e-1,r+c-1))},initCache(){},clearCache:!0,validateProps(){}}),pf=(n,e,t)=>{const{itemSize:i}=n,{items:s,lastVisitedIndex:r}=t;if(e>r){let o=0;if(r>=0){const a=s[r];o=a.offset+a.size}for(let a=r+1;a<=e;a++){const l=i(a);s[a]={offset:o,size:l},o+=l}t.lastVisitedIndex=e}return s[e]},wde=(n,e,t)=>{const{items:i,lastVisitedIndex:s}=e;return(s>0?i[s].offset:0)>=t?pB(n,e,0,s,t):xde(n,e,Math.max(0,s),t)},pB=(n,e,t,i,s)=>{for(;t<=i;){const r=t+Math.floor((i-t)/2),o=pf(n,r,e).offset;if(o===s)return r;o<s?t=r+1:o>s&&(i=r-1)}return Math.max(0,t-1)},xde=(n,e,t,i)=>{const{total:s}=n;let r=1;for(;t<s&&pf(n,t,e).offset<i;)t+=r,r*=2;return pB(n,e,Math.floor(t/2),Math.min(t,s-1),i)},TP=({total:n},{items:e,estimatedItemSize:t,lastVisitedIndex:i})=>{let s=0;if(i>=n&&(i=n-1),i>=0){const a=e[i];s=a.offset+a.size}const o=(n-i-1)*t;return s+o},Sde=hB({name:"ElDynamicSizeList",getItemOffset:(n,e,t)=>pf(n,e,t).offset,getItemSize:(n,e,{items:t})=>t[e].size,getEstimatedTotalSize:TP,getOffset:(n,e,t,i,s)=>{const{height:r,layout:o,width:a}=n,l=Ug(o)?a:r,c=pf(n,e,s),u=TP(n,s),d=Math.max(0,Math.min(u-l,c.offset)),h=Math.max(0,c.offset-l+c.size);switch(t===V1&&(i>=h-l&&i<=d+l?t=So:t=Ia),t){case Ng:return d;case Fg:return h;case Ia:return Math.round(h+(d-h)/2);case So:default:return i>=h&&i<=d?i:i<h?h:d}},getStartIndexForOffset:(n,e,t)=>wde(n,t,e),getStopIndexForStartIndex:(n,e,t,i)=>{const{height:s,total:r,layout:o,width:a}=n,l=Ug(o)?a:s,c=pf(n,e,i),u=t+l;let d=c.offset+c.size,h=e;for(;h<r-1&&d<u;)h++,d+=pf(n,h,i).size;return h},initCache({estimatedItemSize:n=WC},e){const t={items:{},estimatedItemSize:n,lastVisitedIndex:-1};return t.clearCacheAfterIndex=(i,s=!0)=>{var r,o;t.lastVisitedIndex=Math.min(t.lastVisitedIndex,i-1),(r=e.exposed)==null||r.getItemStyleCache(-1),s&&((o=e.proxy)==null||o.$forceUpdate())},t},clearCache:!1,validateProps:({itemSize:n})=>{}}),Cde=({atXEndEdge:n,atXStartEdge:e,atYEndEdge:t,atYStartEdge:i},s)=>{let r=null,o=0,a=0;const l=(u,d)=>{const h=u<=0&&e.value||u>=0&&n.value,f=d<=0&&i.value||d>=0&&t.value;return h&&f};return{hasReachedEdge:l,onWheel:u=>{Vd(r);let d=u.deltaX,h=u.deltaY;Math.abs(d)>Math.abs(h)?h=0:d=0,u.shiftKey&&h!==0&&(d=h,h=0),!(l(o,a)&&l(o+d,a+h))&&(o+=d,a+=h,u.preventDefault(),r=Qc(()=>{s(o,a),o=0,a=0}))}}},mB=({name:n,clearCache:e,getColumnPosition:t,getColumnStartIndexForOffset:i,getColumnStopIndexForStartIndex:s,getEstimatedTotalHeight:r,getEstimatedTotalWidth:o,getColumnOffset:a,getRowOffset:l,getRowPosition:c,getRowStartIndexForOffset:u,getRowStopIndexForStartIndex:d,initCache:h,injectToInstance:f,validateProps:m})=>se({name:n??"ElVirtualList",props:wd,emits:[Z_,J_],setup(p,{emit:y,expose:v,slots:_}){const b=Ve("vl");m(p);const w=zt(),x=V(h(p,w));f==null||f(w,x);const S=V(),C=V(),T=V(),M=V(null),E=V({isScrolling:!1,scrollLeft:Ct(p.initScrollLeft)?p.initScrollLeft:0,scrollTop:Ct(p.initScrollTop)?p.initScrollTop:0,updateRequested:!1,xAxisScrollDir:ff,yAxisScrollDir:ff}),A=rB(),I=R(()=>Number.parseInt(`${p.height}`,10)),B=R(()=>Number.parseInt(`${p.width}`,10)),F=R(()=>{const{totalColumn:me,totalRow:be,columnCache:Pe}=p,{isScrolling:Z,xAxisScrollDir:$,scrollLeft:de}=g(E);if(me===0||be===0)return[0,0,0,0];const Ae=i(p,de,g(x)),De=s(p,Ae,de,g(x)),fe=!Z||$===Q_?Math.max(1,Pe):1,Ge=!Z||$===ff?Math.max(1,Pe):1;return[Math.max(0,Ae-fe),Math.max(0,Math.min(me-1,De+Ge)),Ae,De]}),U=R(()=>{const{totalColumn:me,totalRow:be,rowCache:Pe}=p,{isScrolling:Z,yAxisScrollDir:$,scrollTop:de}=g(E);if(me===0||be===0)return[0,0,0,0];const Ae=u(p,de,g(x)),De=d(p,Ae,de,g(x)),fe=!Z||$===Q_?Math.max(1,Pe):1,Ge=!Z||$===ff?Math.max(1,Pe):1;return[Math.max(0,Ae-fe),Math.max(0,Math.min(be-1,De+Ge)),Ae,De]}),P=R(()=>r(p,g(x))),O=R(()=>o(p,g(x))),D=R(()=>{var me;return[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:p.direction,height:Ct(p.height)?`${p.height}px`:p.height,width:Ct(p.width)?`${p.width}px`:p.width},(me=p.style)!=null?me:{}]}),L=R(()=>{const me=`${g(O)}px`;return{height:`${g(P)}px`,pointerEvents:g(E).isScrolling?"none":void 0,width:me}}),H=()=>{const{totalColumn:me,totalRow:be}=p;if(me>0&&be>0){const[De,fe,Ge,We]=g(F),[je,at,Ue,qe]=g(U);y(Z_,{columnCacheStart:De,columnCacheEnd:fe,rowCacheStart:je,rowCacheEnd:at,columnVisibleStart:Ge,columnVisibleEnd:We,rowVisibleStart:Ue,rowVisibleEnd:qe})}const{scrollLeft:Pe,scrollTop:Z,updateRequested:$,xAxisScrollDir:de,yAxisScrollDir:Ae}=g(E);y(J_,{xAxisScrollDir:de,scrollLeft:Pe,yAxisScrollDir:Ae,scrollTop:Z,updateRequested:$})},X=me=>{const{clientHeight:be,clientWidth:Pe,scrollHeight:Z,scrollLeft:$,scrollTop:de,scrollWidth:Ae}=me.currentTarget,De=g(E);if(De.scrollTop===de&&De.scrollLeft===$)return;let fe=$;if(EP(p.direction))switch(tb()){case Bg:fe=-$;break;case GT:fe=Ae-Pe-$;break}E.value={...De,isScrolling:!0,scrollLeft:fe,scrollTop:Math.max(0,Math.min(de,Z-be)),updateRequested:!0,xAxisScrollDir:od(De.scrollLeft,fe),yAxisScrollDir:od(De.scrollTop,de)},vt(()=>he()),Te(),H()},ne=(me,be)=>{const Pe=g(I),Z=(P.value-Pe)/be*me;_e({scrollTop:Math.min(P.value-Pe,Z)})},ce=(me,be)=>{const Pe=g(B),Z=(O.value-Pe)/be*me;_e({scrollLeft:Math.min(O.value-Pe,Z)})},{onWheel:ae}=Cde({atXStartEdge:R(()=>E.value.scrollLeft<=0),atXEndEdge:R(()=>E.value.scrollLeft>=O.value-g(B)),atYStartEdge:R(()=>E.value.scrollTop<=0),atYEndEdge:R(()=>E.value.scrollTop>=P.value-g(I))},(me,be)=>{var Pe,Z,$,de;(Z=(Pe=C.value)==null?void 0:Pe.onMouseUp)==null||Z.call(Pe),(de=($=T.value)==null?void 0:$.onMouseUp)==null||de.call($);const Ae=g(B),De=g(I);_e({scrollLeft:Math.min(E.value.scrollLeft+me,O.value-Ae),scrollTop:Math.min(E.value.scrollTop+be,P.value-De)})}),_e=({scrollLeft:me=E.value.scrollLeft,scrollTop:be=E.value.scrollTop})=>{me=Math.max(me,0),be=Math.max(be,0);const Pe=g(E);be===Pe.scrollTop&&me===Pe.scrollLeft||(E.value={...Pe,xAxisScrollDir:od(Pe.scrollLeft,me),yAxisScrollDir:od(Pe.scrollTop,be),scrollLeft:me,scrollTop:be,updateRequested:!0},vt(()=>he()),Te(),H())},re=(me=0,be=0,Pe=So)=>{const Z=g(E);be=Math.max(0,Math.min(be,p.totalColumn-1)),me=Math.max(0,Math.min(me,p.totalRow-1));const $=mN(b.namespace.value),de=g(x),Ae=r(p,de),De=o(p,de);_e({scrollLeft:a(p,be,Pe,Z.scrollLeft,de,De>p.width?$:0),scrollTop:l(p,me,Pe,Z.scrollTop,de,Ae>p.height?$:0)})},xe=(me,be)=>{const{columnWidth:Pe,direction:Z,rowHeight:$}=p,de=A.value(e&&Pe,e&&$,e&&Z),Ae=`${me},${be}`;if(Qt(de,Ae))return de[Ae];{const[,De]=t(p,be,g(x)),fe=g(x),Ge=EP(Z),[We,je]=c(p,me,fe),[at]=t(p,be,fe);return de[Ae]={position:"absolute",left:Ge?void 0:`${De}px`,right:Ge?`${De}px`:void 0,top:`${je}px`,height:`${We}px`,width:`${at}px`},de[Ae]}},he=()=>{E.value.isScrolling=!1,vt(()=>{A.value(-1,null,null)})};Ft(()=>{if(!Jt)return;const{initScrollLeft:me,initScrollTop:be}=p,Pe=g(S);Pe&&(Ct(me)&&(Pe.scrollLeft=me),Ct(be)&&(Pe.scrollTop=be)),H()});const Te=()=>{const{direction:me}=p,{scrollLeft:be,scrollTop:Pe,updateRequested:Z}=g(E),$=g(S);if(Z&&$){if(me===Pf)switch(tb()){case Bg:{$.scrollLeft=-be;break}case $T:{$.scrollLeft=be;break}default:{const{clientWidth:de,scrollWidth:Ae}=$;$.scrollLeft=Ae-de-be;break}}else $.scrollLeft=Math.max(0,be);$.scrollTop=Math.max(0,Pe)}},{resetAfterColumnIndex:Ce,resetAfterRowIndex:we,resetAfter:K}=w.proxy;v({windowRef:S,innerRef:M,getItemStyleCache:A,scrollTo:_e,scrollToItem:re,states:E,resetAfterColumnIndex:Ce,resetAfterRowIndex:we,resetAfter:K});const j=()=>{const{scrollbarAlwaysOn:me,scrollbarStartGap:be,scrollbarEndGap:Pe,totalColumn:Z,totalRow:$}=p,de=g(B),Ae=g(I),De=g(O),fe=g(P),{scrollLeft:Ge,scrollTop:We}=g(E),je=_t(ZC,{ref:C,alwaysOn:me,startGap:be,endGap:Pe,class:b.e("horizontal"),clientSize:de,layout:"horizontal",onScroll:ce,ratio:de*100/De,scrollFrom:Ge/(De-de),total:$,visible:!0}),at=_t(ZC,{ref:T,alwaysOn:me,startGap:be,endGap:Pe,class:b.e("vertical"),clientSize:Ae,layout:"vertical",onScroll:ne,ratio:Ae*100/fe,scrollFrom:We/(fe-Ae),total:Z,visible:!0});return{horizontalScrollbar:je,verticalScrollbar:at}},ie=()=>{var me;const[be,Pe]=g(F),[Z,$]=g(U),{data:de,totalColumn:Ae,totalRow:De,useIsScrolling:fe,itemKey:Ge}=p,We=[];if(De>0&&Ae>0)for(let je=Z;je<=$;je++)for(let at=be;at<=Pe;at++)We.push((me=_.default)==null?void 0:me.call(_,{columnIndex:at,data:de,key:Ge({columnIndex:at,data:de,rowIndex:je}),isScrolling:fe?g(E).isScrolling:void 0,style:xe(je,at),rowIndex:je}));return We},ve=()=>{const me=Wt(p.innerElement),be=ie();return[_t(me,{style:g(L),ref:M},Rt(me)?be:{default:()=>be})]};return()=>{const me=Wt(p.containerElement),{horizontalScrollbar:be,verticalScrollbar:Pe}=j(),Z=ve();return _t("div",{key:0,class:b.e("wrapper"),role:p.role},[_t(me,{class:p.className,style:g(D),onScroll:X,onWheel:ae,ref:S},Rt(me)?Z:{default:()=>Z}),be,Pe])}}}),Mde=mB({name:"ElFixedSizeGrid",getColumnPosition:({columnWidth:n},e)=>[n,e*n],getRowPosition:({rowHeight:n},e)=>[n,e*n],getEstimatedTotalHeight:({totalRow:n,rowHeight:e})=>e*n,getEstimatedTotalWidth:({totalColumn:n,columnWidth:e})=>e*n,getColumnOffset:({totalColumn:n,columnWidth:e,width:t},i,s,r,o,a)=>{t=Number(t);const l=Math.max(0,n*e-t),c=Math.min(l,i*e),u=Math.max(0,i*e-t+a+e);switch(s==="smart"&&(r>=u-t&&r<=c+t?s=So:s=Ia),s){case Ng:return c;case Fg:return u;case Ia:{const d=Math.round(u+(c-u)/2);return d<Math.ceil(t/2)?0:d>l+Math.floor(t/2)?l:d}case So:default:return r>=u&&r<=c?r:u>c||r<u?u:c}},getRowOffset:({rowHeight:n,height:e,totalRow:t},i,s,r,o,a)=>{e=Number(e);const l=Math.max(0,t*n-e),c=Math.min(l,i*n),u=Math.max(0,i*n-e+a+n);switch(s===V1&&(r>=u-e&&r<=c+e?s=So:s=Ia),s){case Ng:return c;case Fg:return u;case Ia:{const d=Math.round(u+(c-u)/2);return d<Math.ceil(e/2)?0:d>l+Math.floor(e/2)?l:d}case So:default:return r>=u&&r<=c?r:u>c||r<u?u:c}},getColumnStartIndexForOffset:({columnWidth:n,totalColumn:e},t)=>Math.max(0,Math.min(e-1,Math.floor(t/n))),getColumnStopIndexForStartIndex:({columnWidth:n,totalColumn:e,width:t},i,s)=>{const r=i*n,o=Math.ceil((t+s-r)/n);return Math.max(0,Math.min(e-1,i+o-1))},getRowStartIndexForOffset:({rowHeight:n,totalRow:e},t)=>Math.max(0,Math.min(e-1,Math.floor(t/n))),getRowStopIndexForStartIndex:({rowHeight:n,totalRow:e,height:t},i,s)=>{const r=i*n,o=Math.ceil((t+s-r)/n);return Math.max(0,Math.min(e-1,i+o-1))},initCache:()=>{},clearCache:!0,validateProps:({columnWidth:n,rowHeight:e})=>{}}),{max:nb,min:gB,floor:vB}=Math,Ede={column:"columnWidth",row:"rowHeight"},JC={column:"lastVisitedColumnIndex",row:"lastVisitedRowIndex"},pl=(n,e,t,i)=>{const[s,r,o]=[t[i],n[Ede[i]],t[JC[i]]];if(e>o){let a=0;if(o>=0){const l=s[o];a=l.offset+l.size}for(let l=o+1;l<=e;l++){const c=r(l);s[l]={offset:a,size:c},a+=c}t[JC[i]]=e}return s[e]},yB=(n,e,t,i,s,r)=>{for(;t<=i;){const o=t+vB((i-t)/2),a=pl(n,o,e,r).offset;if(a===s)return o;a<s?t=o+1:i=o-1}return nb(0,t-1)},Tde=(n,e,t,i,s)=>{const r=s==="column"?n.totalColumn:n.totalRow;let o=1;for(;t<r&&pl(n,t,e,s).offset<i;)t+=o,o*=2;return yB(n,e,vB(t/2),gB(t,r-1),i,s)},AP=(n,e,t,i)=>{const[s,r]=[e[i],e[JC[i]]];return(r>0?s[r].offset:0)>=t?yB(n,e,0,r,t,i):Tde(n,e,nb(0,r),t,i)},_B=({totalRow:n},{estimatedRowHeight:e,lastVisitedRowIndex:t,row:i})=>{let s=0;if(t>=n&&(t=n-1),t>=0){const a=i[t];s=a.offset+a.size}const o=(n-t-1)*e;return s+o},bB=({totalColumn:n},{column:e,estimatedColumnWidth:t,lastVisitedColumnIndex:i})=>{let s=0;if(i>n&&(i=n-1),i>=0){const a=e[i];s=a.offset+a.size}const o=(n-i-1)*t;return s+o},Ade={column:bB,row:_B},IP=(n,e,t,i,s,r,o)=>{const[a,l]=[r==="row"?n.height:n.width,Ade[r]],c=pl(n,e,s,r),u=l(n,s),d=nb(0,gB(u-a,c.offset)),h=nb(0,c.offset-a+o+c.size);switch(t===V1&&(i>=h-a&&i<=d+a?t=So:t=Ia),t){case Ng:return d;case Fg:return h;case Ia:return Math.round(h+(d-h)/2);case So:default:return i>=h&&i<=d?i:h>d||i<h?h:d}},Ide=mB({name:"ElDynamicSizeGrid",getColumnPosition:(n,e,t)=>{const i=pl(n,e,t,"column");return[i.size,i.offset]},getRowPosition:(n,e,t)=>{const i=pl(n,e,t,"row");return[i.size,i.offset]},getColumnOffset:(n,e,t,i,s,r)=>IP(n,e,t,i,s,"column",r),getRowOffset:(n,e,t,i,s,r)=>IP(n,e,t,i,s,"row",r),getColumnStartIndexForOffset:(n,e,t)=>AP(n,t,e,"column"),getColumnStopIndexForStartIndex:(n,e,t,i)=>{const s=pl(n,e,i,"column"),r=t+n.width;let o=s.offset+s.size,a=e;for(;a<n.totalColumn-1&&o<r;)a++,o+=pl(n,e,i,"column").size;return a},getEstimatedTotalHeight:_B,getEstimatedTotalWidth:bB,getRowStartIndexForOffset:(n,e,t)=>AP(n,t,e,"row"),getRowStopIndexForStartIndex:(n,e,t,i)=>{const{totalRow:s,height:r}=n,o=pl(n,e,i,"row"),a=t+r;let l=o.size+o.offset,c=e;for(;c<s-1&&l<a;)c++,l+=pl(n,c,i,"row").size;return c},injectToInstance:(n,e)=>{const t=({columnIndex:r,rowIndex:o},a)=>{var l,c;a=ki(a)?!0:a,Ct(r)&&(e.value.lastVisitedColumnIndex=Math.min(e.value.lastVisitedColumnIndex,r-1)),Ct(o)&&(e.value.lastVisitedRowIndex=Math.min(e.value.lastVisitedRowIndex,o-1)),(l=n.exposed)==null||l.getItemStyleCache.value(-1,null,null),a&&((c=n.proxy)==null||c.$forceUpdate())},i=(r,o)=>{t({columnIndex:r},o)},s=(r,o)=>{t({rowIndex:r},o)};Object.assign(n.proxy,{resetAfterColumnIndex:i,resetAfterRowIndex:s,resetAfter:t})},initCache:({estimatedColumnWidth:n=WC,estimatedRowHeight:e=WC})=>({column:{},estimatedColumnWidth:n,estimatedRowHeight:e,lastVisitedColumnIndex:-1,lastVisitedRowIndex:-1,row:{}}),clearCache:!1,validateProps:({columnWidth:n,rowHeight:e})=>{}}),Rde=se({props:{item:{type:Object,required:!0},style:Object,height:Number},setup(){return{ns:Ve("select")}}});function Pde(n,e,t,i,s,r){return k(),Y("div",{class:z(n.ns.be("group","title")),style:pt([n.style,{lineHeight:`${n.height}px`}])},Je(n.item.label),7)}var Lde=Ze(Rde,[["render",Pde],["__file","group-item.vue"]]);function kde(n,{emit:e}){return{hoverItem:()=>{n.disabled||e("hover",n.index)},selectOptionClick:()=>{n.disabled||e("select",n.item,n.index)}}}const wB={label:"label",value:"value",disabled:"disabled",options:"options"};function $1(n){const e=R(()=>({...wB,...n.props}));return{aliasProps:e,getLabel:o=>gi(o,e.value.label),getValue:o=>gi(o,e.value.value),getDisabled:o=>gi(o,e.value.disabled),getOptions:o=>gi(o,e.value.options)}}const Ode=Ye({allowCreate:Boolean,autocomplete:{type:ge(String),default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:xn,default:mu},effect:{type:ge(String),default:"light"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:274},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,modelValue:{type:ge([Array,String,Number,Boolean,Object])},multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:ge(Array),required:!0},placeholder:{type:String},teleported:rs.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:ge(Object),default:()=>({})},remote:Boolean,size:Zi,props:{type:ge(Object),default:()=>wB},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:Boolean,validateEvent:{type:Boolean,default:!0},placement:{type:ge(String),values:dh,default:"bottom-start"},fallbackPlacements:{type:ge(Array),default:["bottom-start","top-start","right","left"]},tagType:{...Wd.type,default:"info"},tagEffect:{...Wd.effect,default:"light"},...Pp,...Ss(["ariaLabel"])}),Dde=Ye({data:Array,disabled:Boolean,hovering:Boolean,item:{type:ge(Object),required:!0},index:Number,style:Object,selected:Boolean,created:Boolean}),WT=Symbol("ElSelectV2Injection"),Nde=se({props:Dde,emits:["select","hover"],setup(n,{emit:e}){const t=ct(WT),i=Ve("select"),{hoverItem:s,selectOptionClick:r}=kde(n,{emit:e}),{getLabel:o}=$1(t.props);return{ns:i,hoverItem:s,selectOptionClick:r,getLabel:o}}}),Fde=["aria-selected"];function Bde(n,e,t,i,s,r){return k(),Y("li",{"aria-selected":n.selected,style:pt(n.style),class:z([n.ns.be("dropdown","item"),n.ns.is("selected",n.selected),n.ns.is("disabled",n.disabled),n.ns.is("created",n.created),n.ns.is("hovering",n.hovering)]),onMouseenter:e[0]||(e[0]=(...o)=>n.hoverItem&&n.hoverItem(...o)),onClick:e[1]||(e[1]=Tt((...o)=>n.selectOptionClick&&n.selectOptionClick(...o),["stop"]))},[ke(n.$slots,"default",{item:n.item,index:n.index,disabled:n.disabled},()=>[te("span",null,Je(n.getLabel(n.item)),1)])],46,Fde)}var Ude=Ze(Nde,[["render",Bde],["__file","option-item.vue"]]),zde=se({name:"ElSelectDropdown",props:{loading:Boolean,data:{type:Array,required:!0},hoveringIndex:Number,width:Number},setup(n,{slots:e,expose:t}){const i=ct(WT),s=Ve("select"),{getLabel:r,getValue:o,getDisabled:a}=$1(i.props),l=V([]),c=V(),u=R(()=>n.data.length);ze(()=>u.value,()=>{var A,I;(I=(A=i.tooltipRef.value).updatePopper)==null||I.call(A)});const d=R(()=>ki(i.props.estimatedOptionHeight)),h=R(()=>d.value?{itemSize:i.props.itemHeight}:{estimatedSize:i.props.estimatedOptionHeight,itemSize:A=>l.value[A]}),f=(A=[],I)=>{const{props:{valueKey:B}}=i;return $t(I)?A&&A.some(F=>yn(gi(F,B))===gi(I,B)):A.includes(I)},m=(A,I)=>{if($t(I)){const{valueKey:B}=i.props;return gi(A,B)===gi(I,B)}else return A===I},p=(A,I)=>i.props.multiple?f(A,o(I)):m(A,o(I)),y=(A,I)=>{const{disabled:B,multiple:F,multipleLimit:U}=i.props;return B||!I&&(F?U>0&&A.length>=U:!1)},v=A=>n.hoveringIndex===A;t({listRef:c,isSized:d,isItemDisabled:y,isItemHovering:v,isItemSelected:p,scrollToItem:A=>{const I=c.value;I&&I.scrollToItem(A)},resetScrollTop:()=>{const A=c.value;A&&A.resetScrollTop()}});const w=A=>{const{index:I,data:B,style:F}=A,U=g(d),{itemSize:P,estimatedSize:O}=g(h),{modelValue:D}=i.props,{onSelect:L,onHover:H}=i,X=B[I];if(X.type==="Group")return le(Lde,{item:X,style:F,height:U?P:O},null);const ne=p(D,X),ce=y(D,ne),ae=v(I);return le(Ude,Kt(A,{selected:ne,disabled:a(X)||ce,created:!!X.created,hovering:ae,item:X,onSelect:L,onHover:H}),{default:_e=>{var re;return((re=e.default)==null?void 0:re.call(e,_e))||le("span",null,[r(X)])}})},{onKeyboardNavigate:x,onKeyboardSelect:S}=i,C=()=>{x("forward")},T=()=>{x("backward")},M=()=>{i.expanded=!1},E=A=>{const{code:I}=A,{tab:B,esc:F,down:U,up:P,enter:O}=wt;switch(I!==B&&(A.preventDefault(),A.stopPropagation()),I){case B:case F:{M();break}case U:{C();break}case P:{T();break}case O:{S();break}}};return()=>{var A,I,B,F;const{data:U,width:P}=n,{height:O,multiple:D,scrollbarAlwaysOn:L}=i.props,H=g(d)?fB:Sde;return le("div",{class:[s.b("dropdown"),s.is("multiple",D)],style:{width:`${P}px`}},[(A=e.header)==null?void 0:A.call(e),((I=e.loading)==null?void 0:I.call(e))||((B=e.empty)==null?void 0:B.call(e))||le(H,Kt({ref:c},g(h),{className:s.be("dropdown","list"),scrollbarAlwaysOn:L,data:U,height:O,width:P,total:U.length,onKeydown:E}),{default:X=>le(w,X,null)}),(F=e.footer)==null?void 0:F.call(e)])}}});function Hde(n,e){const{aliasProps:t,getLabel:i,getValue:s}=$1(n),r=V(0),o=V(null),a=R(()=>n.allowCreate&&n.filterable);function l(f){const m=p=>i(p)===f;return n.options&&n.options.some(m)||e.createdOptions.some(m)}function c(f){a.value&&(n.multiple&&f.created?r.value++:o.value=f)}function u(f){if(a.value)if(f&&f.length>0){if(l(f))return;const m={[t.value.value]:f,[t.value.label]:f,created:!0,[t.value.disabled]:!1};e.createdOptions.length>=r.value?e.createdOptions[r.value]=m:e.createdOptions.push(m)}else if(n.multiple)e.createdOptions.length=r.value;else{const m=o.value;e.createdOptions.length=0,m&&m.created&&e.createdOptions.push(m)}}function d(f){if(!a.value||!f||!f.created||f.created&&n.reserveKeyword&&e.inputValue===i(f))return;const m=e.createdOptions.findIndex(p=>s(p)===s(f));~m&&(e.createdOptions.splice(m,1),r.value--)}function h(){a.value&&(e.createdOptions.length=0,r.value=0)}return{createNewOption:u,removeNewOption:d,selectNewOption:c,clearAllNewOption:h}}const Vde=11,$de=(n,e)=>{const{t}=en(),i=Ve("select"),s=Ve("input"),{form:r,formItem:o}=Qs(),{inputId:a}=ca(n,{formItemContext:o}),{aliasProps:l,getLabel:c,getValue:u,getDisabled:d,getOptions:h}=$1(n),{valueOnClear:f,isEmptyValue:m}=D1(n),p=un({inputValue:"",cachedOptions:[],createdOptions:[],hoveringIndex:-1,inputHovering:!1,selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,previousQuery:null,previousValue:void 0,selectedLabel:"",menuVisibleOnFocus:!1,isBeforeHide:!1}),y=V(-1),v=V(null),_=V(null),b=V(null),w=V(null),x=V(null),S=V(null),C=V(null),T=V(null),M=V(null),E=V(null),A=V(null),{wrapperRef:I,isFocused:B,handleFocus:F,handleBlur:U}=O1(x,{afterFocus(){n.automaticDropdown&&!D.value&&(D.value=!0,p.menuVisibleOnFocus=!0)},beforeBlur(ee){var Me,Se;return((Me=b.value)==null?void 0:Me.isFocusInsideContent(ee))||((Se=w.value)==null?void 0:Se.isFocusInsideContent(ee))},afterBlur(){D.value=!1,p.menuVisibleOnFocus=!1}}),P=V([]),O=V([]),D=V(!1),L=R(()=>n.disabled||(r==null?void 0:r.disabled)),H=R(()=>{const ee=O.value.length*n.itemHeight;return ee>n.height?n.height:ee}),X=R(()=>n.multiple?rt(n.modelValue)&&n.modelValue.length>0:!m(n.modelValue)),ne=R(()=>n.clearable&&!L.value&&p.inputHovering&&X.value),ce=R(()=>n.remote&&n.filterable?"":jl),ae=R(()=>ce.value&&i.is("reverse",D.value)),_e=R(()=>(o==null?void 0:o.validateState)||""),re=R(()=>eT[_e.value]),xe=R(()=>n.remote?300:0),he=R(()=>n.loading?n.loadingText||t("el.select.loading"):n.remote&&!p.inputValue&&P.value.length===0?!1:n.filterable&&p.inputValue&&P.value.length>0&&O.value.length===0?n.noMatchText||t("el.select.noMatch"):P.value.length===0?n.noDataText||t("el.select.noData"):null),Te=ee=>{const Me=Se=>{if(n.filterable&&xt(n.filterMethod)||n.filterable&&n.remote&&xt(n.remoteMethod))return!0;const Be=new RegExp(KE(ee),"i");return ee?Be.test(c(Se)||""):!0};return n.loading?[]:[...p.createdOptions,...n.options].reduce((Se,Be)=>{const nt=h(Be);if(rt(nt)){const Xe=nt.filter(Me);Xe.length>0&&Se.push({label:c(Be),type:"Group"},...Xe)}else(n.remote||Me(Be))&&Se.push(Be);return Se},[])},Ce=()=>{P.value=Te(""),O.value=Te(p.inputValue)},we=R(()=>{const ee=new Map;return P.value.forEach((Me,Se)=>{ee.set(At(u(Me)),{option:Me,index:Se})}),ee}),K=R(()=>{const ee=new Map;return O.value.forEach((Me,Se)=>{ee.set(At(u(Me)),{option:Me,index:Se})}),ee}),j=R(()=>O.value.every(ee=>d(ee))),ie=Hi(),ve=R(()=>ie.value==="small"?"small":"default"),ye=()=>{var ee;y.value=((ee=v.value)==null?void 0:ee.offsetWidth)||200},me=()=>{if(!_.value)return 0;const ee=window.getComputedStyle(_.value);return Number.parseFloat(ee.gap||"6px")},be=R(()=>{const ee=me();return{maxWidth:`${A.value&&n.maxCollapseTags===1?p.selectionWidth-p.collapseItemWidth-ee:p.selectionWidth}px`}}),Pe=R(()=>({maxWidth:`${p.selectionWidth}px`})),Z=R(()=>({width:`${Math.max(p.calculatorWidth,Vde)}px`})),$=R(()=>rt(n.modelValue)?n.modelValue.length===0&&!p.inputValue:n.filterable?!p.inputValue:!0),de=R(()=>{var ee;const Me=(ee=n.placeholder)!=null?ee:t("el.select.placeholder");return n.multiple||!X.value?Me:p.selectedLabel}),Ae=R(()=>{var ee,Me;return(Me=(ee=b.value)==null?void 0:ee.popperRef)==null?void 0:Me.contentRef}),De=R(()=>{if(n.multiple){const ee=n.modelValue.length;if(n.modelValue.length>0&&K.value.has(n.modelValue[ee-1])){const{index:Me}=K.value.get(n.modelValue[ee-1]);return Me}}else if(n.modelValue&&K.value.has(n.modelValue)){const{index:ee}=K.value.get(n.modelValue);return ee}return-1}),fe=R({get(){return D.value&&he.value!==!1},set(ee){D.value=ee}}),Ge=R(()=>n.multiple?n.collapseTags?p.cachedOptions.slice(0,n.maxCollapseTags):p.cachedOptions:[]),We=R(()=>n.multiple?n.collapseTags?p.cachedOptions.slice(n.maxCollapseTags):[]:[]),{createNewOption:je,removeNewOption:at,selectNewOption:Ue,clearAllNewOption:qe}=Hde(n,p),{handleCompositionStart:Fe,handleCompositionUpdate:Ie,handleCompositionEnd:oe}=tB(ee=>er(ee)),Le=()=>{L.value||(p.menuVisibleOnFocus?p.menuVisibleOnFocus=!1:D.value=!D.value)},Ke=()=>{p.inputValue.length>0&&!D.value&&(D.value=!0),je(p.inputValue),Q(p.inputValue)},ft=Lr(Ke,xe.value),Q=ee=>{p.previousQuery!==ee&&(p.previousQuery=ee,n.filterable&&xt(n.filterMethod)?n.filterMethod(ee):n.filterable&&n.remote&&xt(n.remoteMethod)&&n.remoteMethod(ee),n.defaultFirstOption&&(n.filterable||n.remote)&&O.value.length?vt($e):vt(Kn))},$e=()=>{const ee=O.value.filter(Be=>!Be.disabled&&Be.type!=="Group"),Me=ee.find(Be=>Be.created),Se=ee[0];p.hoveringIndex=ht(O.value,Me||Se)},Oe=ee=>{Ys(n.modelValue,ee)||e(Fn,ee)},et=ee=>{e(Gt,ee),Oe(ee),p.previousValue=n.multiple?String(ee):ee},ht=(ee=[],Me)=>{if(!$t(Me))return ee.indexOf(Me);const Se=n.valueKey;let Be=-1;return ee.some((nt,Xe)=>gi(nt,Se)===gi(Me,Se)?(Be=Xe,!0):!1),Be},At=ee=>$t(ee)?gi(ee,n.valueKey):ee,Ot=()=>{ye()},pn=()=>{p.selectionWidth=_.value.getBoundingClientRect().width},wi=()=>{p.calculatorWidth=S.value.getBoundingClientRect().width},_n=()=>{p.collapseItemWidth=A.value.getBoundingClientRect().width},Cs=()=>{var ee,Me;(Me=(ee=b.value)==null?void 0:ee.updatePopper)==null||Me.call(ee)},$i=()=>{var ee,Me;(Me=(ee=w.value)==null?void 0:ee.updatePopper)==null||Me.call(ee)},Za=ee=>{if(n.multiple){let Me=n.modelValue.slice();const Se=ht(Me,u(ee));Se>-1?(Me=[...Me.slice(0,Se),...Me.slice(Se+1)],p.cachedOptions.splice(Se,1),at(ee)):(n.multipleLimit<=0||Me.length<n.multipleLimit)&&(Me=[...Me,u(ee)],p.cachedOptions.push(ee),Ue(ee)),et(Me),ee.created&&Q(""),n.filterable&&!n.reserveKeyword&&(p.inputValue="")}else p.selectedLabel=c(ee),et(u(ee)),D.value=!1,Ue(ee),ee.created||qe();no()},Or=(ee,Me)=>{let Se=n.modelValue.slice();const Be=ht(Se,u(Me));Be>-1&&!L.value&&(Se=[...n.modelValue.slice(0,Be),...n.modelValue.slice(Be+1)],p.cachedOptions.splice(Be,1),et(Se),e("remove-tag",u(Me)),at(Me)),ee.stopPropagation(),no()},no=()=>{var ee;(ee=x.value)==null||ee.focus()},Ja=()=>{var ee;(ee=x.value)==null||ee.blur()},Ql=()=>{p.inputValue.length>0?p.inputValue="":D.value=!1},zo=ee=>dN(ee,Me=>!p.cachedOptions.some(Se=>u(Se)===Me&&d(Se))),ec=ee=>{if(n.multiple&&ee.code!==wt.delete&&p.inputValue.length===0){ee.preventDefault();const Me=n.modelValue.slice(),Se=zo(Me);if(Se<0)return;const Be=Me[Se];Me.splice(Se,1);const nt=p.cachedOptions[Se];p.cachedOptions.splice(Se,1),at(nt),et(Me),e("remove-tag",Be)}},fa=()=>{let ee;rt(n.modelValue)?ee=[]:ee=f.value,n.multiple?p.cachedOptions=[]:p.selectedLabel="",D.value=!1,et(ee),e("clear"),qe(),no()},it=(ee,Me=void 0)=>{const Se=O.value;if(!["forward","backward"].includes(ee)||L.value||Se.length<=0||j.value)return;if(!D.value)return Le();Me===void 0&&(Me=p.hoveringIndex);let Be=-1;ee==="forward"?(Be=Me+1,Be>=Se.length&&(Be=0)):ee==="backward"&&(Be=Me-1,(Be<0||Be>=Se.length)&&(Be=Se.length-1));const nt=Se[Be];if(d(nt)||nt.type==="Group")return it(ee,Be);p.hoveringIndex=Be,N(Be)},Mt=()=>{if(D.value)~p.hoveringIndex&&O.value[p.hoveringIndex]&&Za(O.value[p.hoveringIndex]);else return Le()},Sn=ee=>{p.hoveringIndex=ee},Kn=()=>{n.multiple?p.hoveringIndex=O.value.findIndex(ee=>n.modelValue.some(Me=>At(Me)===At(ee))):p.hoveringIndex=O.value.findIndex(ee=>At(ee)===At(n.modelValue))},er=ee=>{if(p.inputValue=ee.target.value,n.remote)ft();else return Ke()},ue=ee=>{if(D.value=!1,B.value){const Me=new FocusEvent("focus",ee);U(Me)}},He=()=>(p.isBeforeHide=!1,vt(()=>{~De.value&&N(p.hoveringIndex)})),N=ee=>{M.value.scrollToItem(ee)},W=ee=>{const Me=At(ee);if(we.value.has(Me)){const{option:Se}=we.value.get(Me);return Se}return{[l.value.value]:ee,[l.value.label]:ee}},q=()=>{if(n.multiple)if(n.modelValue.length>0){p.cachedOptions.length=0,p.previousValue=n.modelValue.toString();for(const ee of n.modelValue){const Me=W(ee);p.cachedOptions.push(Me)}}else p.cachedOptions=[],p.previousValue=void 0;else if(X.value){p.previousValue=n.modelValue;const ee=O.value,Me=ee.findIndex(Se=>At(u(Se))===At(n.modelValue));~Me?p.selectedLabel=c(ee[Me]):p.selectedLabel=At(n.modelValue)}else p.selectedLabel="",p.previousValue=void 0;qe(),ye()};return ze(D,ee=>{ee?Q(""):(p.inputValue="",p.previousQuery=null,p.isBeforeHide=!0,je("")),e("visible-change",ee)}),ze(()=>n.modelValue,(ee,Me)=>{var Se;(!ee||n.multiple&&ee.toString()!==p.previousValue||!n.multiple&&At(ee)!==At(p.previousValue))&&q(),!Ys(ee,Me)&&n.validateEvent&&((Se=o==null?void 0:o.validate)==null||Se.call(o,"change").catch(Be=>void 0))},{deep:!0}),ze(()=>n.options,()=>{const ee=x.value;(!ee||ee&&document.activeElement!==ee)&&q()},{deep:!0,flush:"post"}),ze(()=>O.value,()=>M.value&&vt(M.value.resetScrollTop)),Is(()=>{p.isBeforeHide||Ce()}),Is(()=>{const{valueKey:ee,options:Me}=n,Se=new Map;for(const Be of Me){const nt=u(Be);let Xe=nt;if($t(Xe)&&(Xe=gi(nt,ee)),Se.get(Xe))break;Se.set(Xe,!0)}}),Ft(()=>{q()}),ti(v,Ot),ti(_,pn),ti(S,wi),ti(M,Cs),ti(I,Cs),ti(E,$i),ti(A,_n),{inputId:a,collapseTagSize:ve,currentPlaceholder:de,expanded:D,emptyText:he,popupHeight:H,debounce:xe,allOptions:P,filteredOptions:O,iconComponent:ce,iconReverse:ae,tagStyle:be,collapseTagStyle:Pe,inputStyle:Z,popperSize:y,dropdownMenuVisible:fe,hasModelValue:X,shouldShowPlaceholder:$,selectDisabled:L,selectSize:ie,showClearBtn:ne,states:p,isFocused:B,nsSelect:i,nsInput:s,calculatorRef:S,inputRef:x,menuRef:M,tagMenuRef:E,tooltipRef:b,tagTooltipRef:w,selectRef:v,wrapperRef:I,selectionRef:_,prefixRef:C,suffixRef:T,collapseItemRef:A,popperRef:Ae,validateState:_e,validateIcon:re,showTagList:Ge,collapseTagList:We,debouncedOnInputChange:ft,deleteTag:Or,getLabel:c,getValue:u,getDisabled:d,getValueKey:At,handleBlur:U,handleClear:fa,handleClickOutside:ue,handleDel:ec,handleEsc:Ql,handleFocus:F,focus:no,blur:Ja,handleMenuEnter:He,handleResize:Ot,resetSelectionWidth:pn,resetCalculatorWidth:wi,updateTooltip:Cs,updateTagTooltip:$i,updateOptions:Ce,toggleMenu:Le,scrollTo:N,onInput:er,onKeyboardNavigate:it,onKeyboardSelect:Mt,onSelect:Za,onHover:Sn,handleCompositionStart:Fe,handleCompositionEnd:oe,handleCompositionUpdate:Ie}},Gde=se({name:"ElSelectV2",components:{ElSelectMenu:zde,ElTag:Og,ElTooltip:Zs,ElIcon:dt},directives:{ClickOutside:Ll},props:Ode,emits:[Gt,Fn,"remove-tag","clear","visible-change","focus","blur"],setup(n,{emit:e}){const t=R(()=>{const{modelValue:s,multiple:r}=n,o=r?[]:void 0;return rt(s)?r?s:o:r?o:s}),i=$de(un({...ws(n),modelValue:t}),e);return Xt(WT,{props:un({...ws(n),height:i.popupHeight,modelValue:t}),tooltipRef:i.tooltipRef,onSelect:i.onSelect,onHover:i.onHover,onKeyboardNavigate:i.onKeyboardNavigate,onKeyboardSelect:i.onKeyboardSelect}),{...i,modelValue:t}}}),Wde=["id","autocomplete","aria-expanded","aria-label","disabled","readonly","name"],Kde=["textContent"],Yde={key:1};function Xde(n,e,t,i,s,r){const o=Ut("el-tag"),a=Ut("el-tooltip"),l=Ut("el-icon"),c=Ut("el-select-menu"),u=y1("click-outside");return Bt((k(),Y("div",{ref:"selectRef",class:z([n.nsSelect.b(),n.nsSelect.m(n.selectSize)]),onMouseenter:e[15]||(e[15]=d=>n.states.inputHovering=!0),onMouseleave:e[16]||(e[16]=d=>n.states.inputHovering=!1)},[le(a,{ref:"tooltipRef",visible:n.dropdownMenuVisible,teleported:n.teleported,"popper-class":[n.nsSelect.e("popper"),n.popperClass],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":n.popperOptions,"fallback-placements":n.fallbackPlacements,effect:n.effect,placement:n.placement,pure:"",transition:`${n.nsSelect.namespace.value}-zoom-in-top`,trigger:"click",persistent:n.persistent,onBeforeShow:n.handleMenuEnter,onHide:e[14]||(e[14]=d=>n.states.isBeforeHide=!1)},{default:pe(()=>[te("div",{ref:"wrapperRef",class:z([n.nsSelect.e("wrapper"),n.nsSelect.is("focused",n.isFocused),n.nsSelect.is("hovering",n.states.inputHovering),n.nsSelect.is("filterable",n.filterable),n.nsSelect.is("disabled",n.selectDisabled)]),onClick:e[13]||(e[13]=Tt((...d)=>n.toggleMenu&&n.toggleMenu(...d),["prevent","stop"]))},[n.$slots.prefix?(k(),Y("div",{key:0,ref:"prefixRef",class:z(n.nsSelect.e("prefix"))},[ke(n.$slots,"prefix")],2)):Ee("v-if",!0),te("div",{ref:"selectionRef",class:z([n.nsSelect.e("selection"),n.nsSelect.is("near",n.multiple&&!n.$slots.prefix&&!!n.modelValue.length)])},[n.multiple?ke(n.$slots,"tag",{key:0},()=>[(k(!0),Y(mt,null,Zt(n.showTagList,d=>(k(),Y("div",{key:n.getValueKey(n.getValue(d)),class:z(n.nsSelect.e("selected-item"))},[le(o,{closable:!n.selectDisabled&&!n.getDisabled(d),size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",style:pt(n.tagStyle),onClose:h=>n.deleteTag(h,d)},{default:pe(()=>[te("span",{class:z(n.nsSelect.e("tags-text"))},[ke(n.$slots,"label",{label:n.getLabel(d),value:n.getValue(d)},()=>[Yt(Je(n.getLabel(d)),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),n.collapseTags&&n.modelValue.length>n.maxCollapseTags?(k(),Re(a,{key:0,ref:"tagTooltipRef",disabled:n.dropdownMenuVisible||!n.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:n.effect,placement:"bottom",teleported:n.teleported},{default:pe(()=>[te("div",{ref:"collapseItemRef",class:z(n.nsSelect.e("selected-item"))},[le(o,{closable:!1,size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,style:pt(n.collapseTagStyle),"disable-transitions":""},{default:pe(()=>[te("span",{class:z(n.nsSelect.e("tags-text"))}," + "+Je(n.modelValue.length-n.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:pe(()=>[te("div",{ref:"tagMenuRef",class:z(n.nsSelect.e("selection"))},[(k(!0),Y(mt,null,Zt(n.collapseTagList,d=>(k(),Y("div",{key:n.getValueKey(n.getValue(d)),class:z(n.nsSelect.e("selected-item"))},[le(o,{class:"in-tooltip",closable:!n.selectDisabled&&!n.getDisabled(d),size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",onClose:h=>n.deleteTag(h,d)},{default:pe(()=>[te("span",{class:z(n.nsSelect.e("tags-text"))},[ke(n.$slots,"label",{label:n.getLabel(d),value:n.getValue(d)},()=>[Yt(Je(n.getLabel(d)),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):Ee("v-if",!0)]):Ee("v-if",!0),n.selectDisabled?Ee("v-if",!0):(k(),Y("div",{key:1,class:z([n.nsSelect.e("selected-item"),n.nsSelect.e("input-wrapper"),n.nsSelect.is("hidden",!n.filterable)])},[Bt(te("input",{id:n.inputId,ref:"inputRef","onUpdate:modelValue":e[0]||(e[0]=d=>n.states.inputValue=d),style:pt(n.inputStyle),autocomplete:n.autocomplete,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":n.expanded,"aria-label":n.ariaLabel,class:z([n.nsSelect.e("input"),n.nsSelect.is(n.selectSize)]),disabled:n.selectDisabled,role:"combobox",readonly:!n.filterable,spellcheck:"false",type:"text",name:n.name,onFocus:e[1]||(e[1]=(...d)=>n.handleFocus&&n.handleFocus(...d)),onBlur:e[2]||(e[2]=(...d)=>n.handleBlur&&n.handleBlur(...d)),onInput:e[3]||(e[3]=(...d)=>n.onInput&&n.onInput(...d)),onCompositionstart:e[4]||(e[4]=(...d)=>n.handleCompositionStart&&n.handleCompositionStart(...d)),onCompositionupdate:e[5]||(e[5]=(...d)=>n.handleCompositionUpdate&&n.handleCompositionUpdate(...d)),onCompositionend:e[6]||(e[6]=(...d)=>n.handleCompositionEnd&&n.handleCompositionEnd(...d)),onKeydown:[e[7]||(e[7]=wn(Tt(d=>n.onKeyboardNavigate("backward"),["stop","prevent"]),["up"])),e[8]||(e[8]=wn(Tt(d=>n.onKeyboardNavigate("forward"),["stop","prevent"]),["down"])),e[9]||(e[9]=wn(Tt((...d)=>n.onKeyboardSelect&&n.onKeyboardSelect(...d),["stop","prevent"]),["enter"])),e[10]||(e[10]=wn(Tt((...d)=>n.handleEsc&&n.handleEsc(...d),["stop","prevent"]),["esc"])),e[11]||(e[11]=wn(Tt((...d)=>n.handleDel&&n.handleDel(...d),["stop"]),["delete"]))],onClick:e[12]||(e[12]=Tt((...d)=>n.toggleMenu&&n.toggleMenu(...d),["stop"]))},null,46,Wde),[[TE,n.states.inputValue]]),n.filterable?(k(),Y("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:z(n.nsSelect.e("input-calculator")),textContent:Je(n.states.inputValue)},null,10,Kde)):Ee("v-if",!0)],2)),n.shouldShowPlaceholder?(k(),Y("div",{key:2,class:z([n.nsSelect.e("selected-item"),n.nsSelect.e("placeholder"),n.nsSelect.is("transparent",!n.hasModelValue||n.expanded&&!n.states.inputValue)])},[n.hasModelValue?ke(n.$slots,"label",{key:0,label:n.currentPlaceholder,value:n.modelValue},()=>[te("span",null,Je(n.currentPlaceholder),1)]):(k(),Y("span",Yde,Je(n.currentPlaceholder),1))],2)):Ee("v-if",!0)],2),te("div",{ref:"suffixRef",class:z(n.nsSelect.e("suffix"))},[n.iconComponent?Bt((k(),Re(l,{key:0,class:z([n.nsSelect.e("caret"),n.nsInput.e("icon"),n.iconReverse])},{default:pe(()=>[(k(),Re(Wt(n.iconComponent)))]),_:1},8,["class"])),[[an,!n.showClearBtn]]):Ee("v-if",!0),n.showClearBtn&&n.clearIcon?(k(),Re(l,{key:1,class:z([n.nsSelect.e("caret"),n.nsInput.e("icon")]),onClick:Tt(n.handleClear,["prevent","stop"])},{default:pe(()=>[(k(),Re(Wt(n.clearIcon)))]),_:1},8,["class","onClick"])):Ee("v-if",!0),n.validateState&&n.validateIcon?(k(),Re(l,{key:2,class:z([n.nsInput.e("icon"),n.nsInput.e("validateIcon")])},{default:pe(()=>[(k(),Re(Wt(n.validateIcon)))]),_:1},8,["class"])):Ee("v-if",!0)],2)],2)]),content:pe(()=>[le(c,{ref:"menuRef",data:n.filteredOptions,width:n.popperSize,"hovering-index":n.states.hoveringIndex,"scrollbar-always-on":n.scrollbarAlwaysOn},Il({default:pe(d=>[ke(n.$slots,"default",wl(Gf(d)))]),_:2},[n.$slots.header?{name:"header",fn:pe(()=>[te("div",{class:z(n.nsSelect.be("dropdown","header"))},[ke(n.$slots,"header")],2)])}:void 0,n.$slots.loading&&n.loading?{name:"loading",fn:pe(()=>[te("div",{class:z(n.nsSelect.be("dropdown","loading"))},[ke(n.$slots,"loading")],2)])}:n.loading||n.filteredOptions.length===0?{name:"empty",fn:pe(()=>[te("div",{class:z(n.nsSelect.be("dropdown","empty"))},[ke(n.$slots,"empty",{},()=>[te("span",null,Je(n.emptyText),1)])],2)])}:void 0,n.$slots.footer?{name:"footer",fn:pe(()=>[te("div",{class:z(n.nsSelect.be("dropdown","footer"))},[ke(n.$slots,"footer")],2)])}:void 0]),1032,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","teleported","popper-class","popper-options","fallback-placements","effect","placement","transition","persistent","onBeforeShow"])],34)),[[u,n.handleClickOutside,n.popperRef]])}var p_=Ze(Gde,[["render",Xde],["__file","select.vue"]]);p_.install=n=>{n.component(p_.name,p_)};const jde=p_,qde=jde,Zde=Ye({animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:Number}}),Jde=Ye({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),Qde=se({name:"ElSkeletonItem"}),ehe=se({...Qde,props:Jde,setup(n){const e=Ve("skeleton");return(t,i)=>(k(),Y("div",{class:z([g(e).e("item"),g(e).e(t.variant)])},[t.variant==="image"?(k(),Re(g($Y),{key:0})):Ee("v-if",!0)],2))}});var ib=Ze(ehe,[["__file","skeleton-item.vue"]]);const the=se({name:"ElSkeleton"}),nhe=se({...the,props:Zde,setup(n,{expose:e}){const t=n,i=Ve("skeleton"),s=Uj(vn(t,"loading"),t.throttle);return e({uiLoading:s}),(r,o)=>g(s)?(k(),Y("div",Kt({key:0,class:[g(i).b(),g(i).is("animated",r.animated)]},r.$attrs),[(k(!0),Y(mt,null,Zt(r.count,a=>(k(),Y(mt,{key:a},[r.loading?ke(r.$slots,"template",{key:a},()=>[le(ib,{class:z(g(i).is("first")),variant:"p"},null,8,["class"]),(k(!0),Y(mt,null,Zt(r.rows,l=>(k(),Re(ib,{key:l,class:z([g(i).e("paragraph"),g(i).is("last",l===r.rows&&r.rows>1)]),variant:"p"},null,8,["class"]))),128))]):Ee("v-if",!0)],64))),128))],16)):ke(r.$slots,"default",wl(Kt({key:1},r.$attrs)))}});var ihe=Ze(nhe,[["__file","skeleton.vue"]]);const she=Ht(ihe,{SkeletonItem:ib}),rhe=si(ib),xB=Symbol("sliderContextKey"),ohe=Ye({modelValue:{type:ge([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:Zi,inputSize:Zi,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:ge(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},label:{type:String,default:void 0},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:ge(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:dh,default:"top"},marks:{type:ge(Object)},validateEvent:{type:Boolean,default:!0},...Ss(["ariaLabel"])}),gx=n=>Ct(n)||rt(n)&&n.every(Ct),ahe={[Gt]:gx,[dr]:gx,[Fn]:gx},lhe=(n,e,t)=>{const i=V();return Ft(async()=>{n.range?(Array.isArray(n.modelValue)?(e.firstValue=Math.max(n.min,n.modelValue[0]),e.secondValue=Math.min(n.max,n.modelValue[1])):(e.firstValue=n.min,e.secondValue=n.max),e.oldValue=[e.firstValue,e.secondValue]):(typeof n.modelValue!="number"||Number.isNaN(n.modelValue)?e.firstValue=n.min:e.firstValue=Math.min(n.max,Math.max(n.min,n.modelValue)),e.oldValue=e.firstValue),Dn(window,"resize",t),await vt(),t()}),{sliderWrapper:i}},che=n=>R(()=>n.marks?Object.keys(n.marks).map(Number.parseFloat).sort((t,i)=>t-i).filter(t=>t<=n.max&&t>=n.min).map(t=>({point:t,position:(t-n.min)*100/(n.max-n.min),mark:n.marks[t]})):[]),uhe=(n,e,t)=>{const{form:i,formItem:s}=Qs(),r=Vn(),o=V(),a=V(),l={firstButton:o,secondButton:a},c=R(()=>n.disabled||(i==null?void 0:i.disabled)||!1),u=R(()=>Math.min(e.firstValue,e.secondValue)),d=R(()=>Math.max(e.firstValue,e.secondValue)),h=R(()=>n.range?`${100*(d.value-u.value)/(n.max-n.min)}%`:`${100*(e.firstValue-n.min)/(n.max-n.min)}%`),f=R(()=>n.range?`${100*(u.value-n.min)/(n.max-n.min)}%`:"0%"),m=R(()=>n.vertical?{height:n.height}:{}),p=R(()=>n.vertical?{height:h.value,bottom:f.value}:{width:h.value,left:f.value}),y=()=>{r.value&&(e.sliderSize=r.value[`client${n.vertical?"Height":"Width"}`])},v=A=>{const I=n.min+A*(n.max-n.min)/100;if(!n.range)return o;let B;return Math.abs(u.value-I)<Math.abs(d.value-I)?B=e.firstValue<e.secondValue?"firstButton":"secondButton":B=e.firstValue>e.secondValue?"firstButton":"secondButton",l[B]},_=A=>{const I=v(A);return I.value.setPosition(A),I},b=A=>{e.firstValue=A,x(n.range?[u.value,d.value]:A)},w=A=>{e.secondValue=A,n.range&&x([u.value,d.value])},x=A=>{t(Gt,A),t(dr,A)},S=async()=>{await vt(),t(Fn,n.range?[u.value,d.value]:n.modelValue)},C=A=>{var I,B,F,U,P,O;if(c.value||e.dragging)return;y();let D=0;if(n.vertical){const L=(F=(B=(I=A.touches)==null?void 0:I.item(0))==null?void 0:B.clientY)!=null?F:A.clientY;D=(r.value.getBoundingClientRect().bottom-L)/e.sliderSize*100}else{const L=(O=(P=(U=A.touches)==null?void 0:U.item(0))==null?void 0:P.clientX)!=null?O:A.clientX,H=r.value.getBoundingClientRect().left;D=(L-H)/e.sliderSize*100}if(!(D<0||D>100))return _(D)};return{elFormItem:s,slider:r,firstButton:o,secondButton:a,sliderDisabled:c,minValue:u,maxValue:d,runwayStyle:m,barStyle:p,resetSize:y,setPosition:_,emitChange:S,onSliderWrapperPrevent:A=>{var I,B;((I=l.firstButton.value)!=null&&I.dragging||(B=l.secondButton.value)!=null&&B.dragging)&&A.preventDefault()},onSliderClick:A=>{C(A)&&S()},onSliderDown:async A=>{const I=C(A);I&&(await vt(),I.value.onButtonDown(A))},setFirstValue:b,setSecondValue:w}},{left:dhe,down:hhe,right:fhe,up:phe,home:mhe,end:ghe,pageUp:vhe,pageDown:yhe}=wt,_he=(n,e,t)=>{const i=V(),s=V(!1),r=R(()=>e.value instanceof Function),o=R(()=>r.value&&e.value(n.modelValue)||n.modelValue),a=Lr(()=>{t.value&&(s.value=!0)},50),l=Lr(()=>{t.value&&(s.value=!1)},50);return{tooltip:i,tooltipVisible:s,formatValue:o,displayTooltip:a,hideTooltip:l}},bhe=(n,e,t)=>{const{disabled:i,min:s,max:r,step:o,showTooltip:a,precision:l,sliderSize:c,formatTooltip:u,emitChange:d,resetSize:h,updateDragging:f}=ct(xB),{tooltip:m,tooltipVisible:p,formatValue:y,displayTooltip:v,hideTooltip:_}=_he(n,u,a),b=V(),w=R(()=>`${(n.modelValue-s.value)/(r.value-s.value)*100}%`),x=R(()=>n.vertical?{bottom:w.value}:{left:w.value}),S=()=>{e.hovering=!0,v()},C=()=>{e.hovering=!1,e.dragging||_()},T=ne=>{i.value||(ne.preventDefault(),D(ne),window.addEventListener("mousemove",L),window.addEventListener("touchmove",L),window.addEventListener("mouseup",H),window.addEventListener("touchend",H),window.addEventListener("contextmenu",H),b.value.focus())},M=ne=>{i.value||(e.newPosition=Number.parseFloat(w.value)+ne/(r.value-s.value)*100,X(e.newPosition),d())},E=()=>{M(-o.value)},A=()=>{M(o.value)},I=()=>{M(-o.value*4)},B=()=>{M(o.value*4)},F=()=>{i.value||(X(0),d())},U=()=>{i.value||(X(100),d())},P=ne=>{let ce=!0;[dhe,hhe].includes(ne.key)?E():[fhe,phe].includes(ne.key)?A():ne.key===mhe?F():ne.key===ghe?U():ne.key===yhe?I():ne.key===vhe?B():ce=!1,ce&&ne.preventDefault()},O=ne=>{let ce,ae;return ne.type.startsWith("touch")?(ae=ne.touches[0].clientY,ce=ne.touches[0].clientX):(ae=ne.clientY,ce=ne.clientX),{clientX:ce,clientY:ae}},D=ne=>{e.dragging=!0,e.isClick=!0;const{clientX:ce,clientY:ae}=O(ne);n.vertical?e.startY=ae:e.startX=ce,e.startPosition=Number.parseFloat(w.value),e.newPosition=e.startPosition},L=ne=>{if(e.dragging){e.isClick=!1,v(),h();let ce;const{clientX:ae,clientY:_e}=O(ne);n.vertical?(e.currentY=_e,ce=(e.startY-e.currentY)/c.value*100):(e.currentX=ae,ce=(e.currentX-e.startX)/c.value*100),e.newPosition=e.startPosition+ce,X(e.newPosition)}},H=()=>{e.dragging&&(setTimeout(()=>{e.dragging=!1,e.hovering||_(),e.isClick||X(e.newPosition),d()},0),window.removeEventListener("mousemove",L),window.removeEventListener("touchmove",L),window.removeEventListener("mouseup",H),window.removeEventListener("touchend",H),window.removeEventListener("contextmenu",H))},X=async ne=>{if(ne===null||Number.isNaN(+ne))return;ne<0?ne=0:ne>100&&(ne=100);const ce=100/((r.value-s.value)/o.value);let _e=Math.round(ne/ce)*ce*(r.value-s.value)*.01+s.value;_e=Number.parseFloat(_e.toFixed(l.value)),_e!==n.modelValue&&t(Gt,_e),!e.dragging&&n.modelValue!==e.oldValue&&(e.oldValue=n.modelValue),await vt(),e.dragging&&v(),m.value.updatePopper()};return ze(()=>e.dragging,ne=>{f(ne)}),{disabled:i,button:b,tooltip:m,tooltipVisible:p,showTooltip:a,wrapperStyle:x,formatValue:y,handleMouseEnter:S,handleMouseLeave:C,onButtonDown:T,onKeyDown:P,setPosition:X}},whe=(n,e,t,i)=>({stops:R(()=>{if(!n.showStops||n.min>n.max)return[];if(n.step===0)return[];const o=(n.max-n.min)/n.step,a=100*n.step/(n.max-n.min),l=Array.from({length:o-1}).map((c,u)=>(u+1)*a);return n.range?l.filter(c=>c<100*(t.value-n.min)/(n.max-n.min)||c>100*(i.value-n.min)/(n.max-n.min)):l.filter(c=>c>100*(e.firstValue-n.min)/(n.max-n.min))}),getStopStyle:o=>n.vertical?{bottom:`${o}%`}:{left:`${o}%`}}),xhe=(n,e,t,i,s,r)=>{const o=c=>{s(Gt,c),s(dr,c)},a=()=>n.range?![t.value,i.value].every((c,u)=>c===e.oldValue[u]):n.modelValue!==e.oldValue,l=()=>{var c,u;n.min>n.max&&qi("Slider","min should not be greater than max.");const d=n.modelValue;n.range&&Array.isArray(d)?d[1]<n.min?o([n.min,n.min]):d[0]>n.max?o([n.max,n.max]):d[0]<n.min?o([n.min,d[1]]):d[1]>n.max?o([d[0],n.max]):(e.firstValue=d[0],e.secondValue=d[1],a()&&(n.validateEvent&&((c=r==null?void 0:r.validate)==null||c.call(r,"change").catch(h=>void 0)),e.oldValue=d.slice())):!n.range&&typeof d=="number"&&!Number.isNaN(d)&&(d<n.min?o(n.min):d>n.max?o(n.max):(e.firstValue=d,a()&&(n.validateEvent&&((u=r==null?void 0:r.validate)==null||u.call(r,"change").catch(h=>void 0)),e.oldValue=d)))};l(),ze(()=>e.dragging,c=>{c||l()}),ze(()=>n.modelValue,(c,u)=>{e.dragging||Array.isArray(c)&&Array.isArray(u)&&c.every((d,h)=>d===u[h])&&e.firstValue===c[0]&&e.secondValue===c[1]||l()},{deep:!0}),ze(()=>[n.min,n.max],()=>{l()})},She=Ye({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:dh,default:"top"}}),Che={[Gt]:n=>Ct(n)},Mhe=["tabindex"],Ehe=se({name:"ElSliderButton"}),The=se({...Ehe,props:She,emits:Che,setup(n,{expose:e,emit:t}){const i=n,s=Ve("slider"),r=un({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:i.modelValue}),{disabled:o,button:a,tooltip:l,showTooltip:c,tooltipVisible:u,wrapperStyle:d,formatValue:h,handleMouseEnter:f,handleMouseLeave:m,onButtonDown:p,onKeyDown:y,setPosition:v}=bhe(i,r,t),{hovering:_,dragging:b}=ws(r);return e({onButtonDown:p,onKeyDown:y,setPosition:v,hovering:_,dragging:b}),(w,x)=>(k(),Y("div",{ref_key:"button",ref:a,class:z([g(s).e("button-wrapper"),{hover:g(_),dragging:g(b)}]),style:pt(g(d)),tabindex:g(o)?-1:0,onMouseenter:x[0]||(x[0]=(...S)=>g(f)&&g(f)(...S)),onMouseleave:x[1]||(x[1]=(...S)=>g(m)&&g(m)(...S)),onMousedown:x[2]||(x[2]=(...S)=>g(p)&&g(p)(...S)),onTouchstart:x[3]||(x[3]=(...S)=>g(p)&&g(p)(...S)),onFocus:x[4]||(x[4]=(...S)=>g(f)&&g(f)(...S)),onBlur:x[5]||(x[5]=(...S)=>g(m)&&g(m)(...S)),onKeydown:x[6]||(x[6]=(...S)=>g(y)&&g(y)(...S))},[le(g(Zs),{ref_key:"tooltip",ref:l,visible:g(u),placement:w.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":w.tooltipClass,disabled:!g(c),persistent:""},{content:pe(()=>[te("span",null,Je(g(h)),1)]),default:pe(()=>[te("div",{class:z([g(s).e("button"),{hover:g(_),dragging:g(b)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled"])],46,Mhe))}});var RP=Ze(The,[["__file","button.vue"]]);const Ahe=Ye({mark:{type:ge([String,Object]),default:void 0}});var Ihe=se({name:"ElSliderMarker",props:Ahe,setup(n){const e=Ve("slider"),t=R(()=>Rt(n.mark)?n.mark:n.mark.label),i=R(()=>Rt(n.mark)?void 0:n.mark.style);return()=>_t("div",{class:e.e("marks-text"),style:i.value},t.value)}});const Rhe=["id","role","aria-label","aria-labelledby"],Phe={key:1},Lhe=se({name:"ElSlider"}),khe=se({...Lhe,props:ohe,emits:ahe,setup(n,{expose:e,emit:t}){const i=n,s=Ve("slider"),{t:r}=en(),o=un({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:a,slider:l,firstButton:c,secondButton:u,sliderDisabled:d,minValue:h,maxValue:f,runwayStyle:m,barStyle:p,resetSize:y,emitChange:v,onSliderWrapperPrevent:_,onSliderClick:b,onSliderDown:w,setFirstValue:x,setSecondValue:S}=uhe(i,o,t),{stops:C,getStopStyle:T}=whe(i,o,h,f),{inputId:M,isLabeledByFormItem:E}=ca(i,{formItemContext:a}),A=Hi(),I=R(()=>i.inputSize||A.value),B=R(()=>i.label||i.ariaLabel||r("el.slider.defaultLabel",{min:i.min,max:i.max})),F=R(()=>i.range?i.rangeStartLabel||r("el.slider.defaultRangeStartLabel"):B.value),U=R(()=>i.formatValueText?i.formatValueText(ne.value):`${ne.value}`),P=R(()=>i.rangeEndLabel||r("el.slider.defaultRangeEndLabel")),O=R(()=>i.formatValueText?i.formatValueText(ce.value):`${ce.value}`),D=R(()=>[s.b(),s.m(A.value),s.is("vertical",i.vertical),{[s.m("with-input")]:i.showInput}]),L=che(i);xhe(i,o,h,f,t,a);const H=R(()=>{const re=[i.min,i.max,i.step].map(xe=>{const he=`${xe}`.split(".")[1];return he?he.length:0});return Math.max.apply(null,re)}),{sliderWrapper:X}=lhe(i,o,y),{firstValue:ne,secondValue:ce,sliderSize:ae}=ws(o),_e=re=>{o.dragging=re};return Xt(xB,{...ws(i),sliderSize:ae,disabled:d,precision:H,emitChange:v,resetSize:y,updateDragging:_e}),ns({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-slider",ref:"https://element-plus.org/en-US/component/slider.html"},R(()=>!!i.label)),e({onSliderClick:b}),(re,xe)=>{var he,Te;return k(),Y("div",{id:re.range?g(M):void 0,ref_key:"sliderWrapper",ref:X,class:z(g(D)),role:re.range?"group":void 0,"aria-label":re.range&&!g(E)?g(B):void 0,"aria-labelledby":re.range&&g(E)?(he=g(a))==null?void 0:he.labelId:void 0,onTouchstart:xe[2]||(xe[2]=(...Ce)=>g(_)&&g(_)(...Ce)),onTouchmove:xe[3]||(xe[3]=(...Ce)=>g(_)&&g(_)(...Ce))},[te("div",{ref_key:"slider",ref:l,class:z([g(s).e("runway"),{"show-input":re.showInput&&!re.range},g(s).is("disabled",g(d))]),style:pt(g(m)),onMousedown:xe[0]||(xe[0]=(...Ce)=>g(w)&&g(w)(...Ce)),onTouchstart:xe[1]||(xe[1]=(...Ce)=>g(w)&&g(w)(...Ce))},[te("div",{class:z(g(s).e("bar")),style:pt(g(p))},null,6),le(RP,{id:re.range?void 0:g(M),ref_key:"firstButton",ref:c,"model-value":g(ne),vertical:re.vertical,"tooltip-class":re.tooltipClass,placement:re.placement,role:"slider","aria-label":re.range||!g(E)?g(F):void 0,"aria-labelledby":!re.range&&g(E)?(Te=g(a))==null?void 0:Te.labelId:void 0,"aria-valuemin":re.min,"aria-valuemax":re.range?g(ce):re.max,"aria-valuenow":g(ne),"aria-valuetext":g(U),"aria-orientation":re.vertical?"vertical":"horizontal","aria-disabled":g(d),"onUpdate:modelValue":g(x)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),re.range?(k(),Re(RP,{key:0,ref_key:"secondButton",ref:u,"model-value":g(ce),vertical:re.vertical,"tooltip-class":re.tooltipClass,placement:re.placement,role:"slider","aria-label":g(P),"aria-valuemin":g(ne),"aria-valuemax":re.max,"aria-valuenow":g(ce),"aria-valuetext":g(O),"aria-orientation":re.vertical?"vertical":"horizontal","aria-disabled":g(d),"onUpdate:modelValue":g(S)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):Ee("v-if",!0),re.showStops?(k(),Y("div",Phe,[(k(!0),Y(mt,null,Zt(g(C),(Ce,we)=>(k(),Y("div",{key:we,class:z(g(s).e("stop")),style:pt(g(T)(Ce))},null,6))),128))])):Ee("v-if",!0),g(L).length>0?(k(),Y(mt,{key:2},[te("div",null,[(k(!0),Y(mt,null,Zt(g(L),(Ce,we)=>(k(),Y("div",{key:we,style:pt(g(T)(Ce.position)),class:z([g(s).e("stop"),g(s).e("marks-stop")])},null,6))),128))]),te("div",{class:z(g(s).e("marks"))},[(k(!0),Y(mt,null,Zt(g(L),(Ce,we)=>(k(),Re(g(Ihe),{key:we,mark:Ce.mark,style:pt(g(T)(Ce.position))},null,8,["mark","style"]))),128))],2)],64)):Ee("v-if",!0)],38),re.showInput&&!re.range?(k(),Re(g(XF),{key:0,ref:"input","model-value":g(ne),class:z(g(s).e("input")),step:re.step,disabled:g(d),controls:re.showInputControls,min:re.min,max:re.max,debounce:re.debounce,size:g(I),"onUpdate:modelValue":g(x),onChange:g(v)},null,8,["model-value","class","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):Ee("v-if",!0)],42,Rhe)}}});var Ohe=Ze(khe,[["__file","slider.vue"]]);const Dhe=Ht(Ohe),Nhe=Ye({prefixCls:{type:String}}),PP=se({name:"ElSpaceItem",props:Nhe,setup(n,{slots:e}){const t=Ve("space"),i=R(()=>`${n.prefixCls||t.b()}__item`);return()=>_t("div",{class:i.value},ke(e,"default"))}}),LP={small:8,default:12,large:16};function Fhe(n){const e=Ve("space"),t=R(()=>[e.b(),e.m(n.direction),n.class]),i=V(0),s=V(0),r=R(()=>{const a=n.wrap||n.fill?{flexWrap:"wrap"}:{},l={alignItems:n.alignment},c={rowGap:`${s.value}px`,columnGap:`${i.value}px`};return[a,l,c,n.style]}),o=R(()=>n.fill?{flexGrow:1,minWidth:`${n.fillRatio}%`}:{});return Is(()=>{const{size:a="small",wrap:l,direction:c,fill:u}=n;if(rt(a)){const[d=0,h=0]=a;i.value=d,s.value=h}else{let d;Ct(a)?d=a:d=LP[a||"small"]||LP.small,(l||u)&&c==="horizontal"?i.value=s.value=d:c==="horizontal"?(i.value=d,s.value=0):(s.value=d,i.value=0)}}),{classes:t,containerStyle:r,itemStyle:o}}const Bhe=Ye({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:ge([String,Object,Array]),default:""},style:{type:ge([String,Array,Object]),default:""},alignment:{type:ge(String),default:"center"},prefixCls:{type:String},spacer:{type:ge([Object,String,Number,Array]),default:null,validator:n=>Jn(n)||Ct(n)||Rt(n)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:Ya,validator:n=>Ct(n)||rt(n)&&n.length===2&&n.every(Ct)}}),Uhe=se({name:"ElSpace",props:Bhe,setup(n,{slots:e}){const{classes:t,containerStyle:i,itemStyle:s}=Fhe(n);function r(o,a="",l=[]){const{prefixCls:c}=n;return o.forEach((u,d)=>{fC(u)?rt(u.children)&&u.children.forEach((h,f)=>{fC(h)&&rt(h.children)?r(h.children,`${a+f}-`,l):l.push(le(PP,{style:s.value,prefixCls:c,key:`nested-${a+f}`},{default:()=>[h]},po.PROPS|po.STYLE,["style","prefixCls"]))}):xX(u)&&l.push(le(PP,{style:s.value,prefixCls:c,key:`LoopKey${a+d}`},{default:()=>[u]},po.PROPS|po.STYLE,["style","prefixCls"]))}),l}return()=>{var o;const{spacer:a,direction:l}=n,c=ke(e,"default",{key:0},()=>[]);if(((o=c.children)!=null?o:[]).length===0)return null;if(rt(c.children)){let u=r(c.children);if(a){const d=u.length-1;u=u.reduce((h,f,m)=>{const p=[...h,f];return m!==d&&p.push(le("span",{style:[s.value,l==="vertical"?"width: 100%":null],key:m},[Jn(a)?a:Yt(a,po.TEXT)],po.STYLE)),p},[])}return le("div",{class:t.value,style:i.value},u,po.STYLE|po.CLASS)}return c.children}}}),zhe=Ht(Uhe),Hhe=Ye({decimalSeparator:{type:String,default:"."},groupSeparator:{type:String,default:","},precision:{type:Number,default:0},formatter:Function,value:{type:ge([Number,Object]),default:0},prefix:String,suffix:String,title:String,valueStyle:{type:ge([String,Object,Array])}}),Vhe=se({name:"ElStatistic"}),$he=se({...Vhe,props:Hhe,setup(n,{expose:e}){const t=n,i=Ve("statistic"),s=R(()=>{const{value:r,formatter:o,precision:a,decimalSeparator:l,groupSeparator:c}=t;if(xt(o))return o(r);if(!Ct(r))return r;let[u,d=""]=String(r).split(".");return d=d.padEnd(a,"0").slice(0,a>0?a:0),u=u.replace(/\B(?=(\d{3})+(?!\d))/g,c),[u,d].join(d?l:"")});return e({displayValue:s}),(r,o)=>(k(),Y("div",{class:z(g(i).b())},[r.$slots.title||r.title?(k(),Y("div",{key:0,class:z(g(i).e("head"))},[ke(r.$slots,"title",{},()=>[Yt(Je(r.title),1)])],2)):Ee("v-if",!0),te("div",{class:z(g(i).e("content"))},[r.$slots.prefix||r.prefix?(k(),Y("div",{key:0,class:z(g(i).e("prefix"))},[ke(r.$slots,"prefix",{},()=>[te("span",null,Je(r.prefix),1)])],2)):Ee("v-if",!0),te("span",{class:z(g(i).e("number")),style:pt(r.valueStyle)},Je(g(s)),7),r.$slots.suffix||r.suffix?(k(),Y("div",{key:1,class:z(g(i).e("suffix"))},[ke(r.$slots,"suffix",{},()=>[te("span",null,Je(r.suffix),1)])],2)):Ee("v-if",!0)],2)],2))}});var Ghe=Ze($he,[["__file","statistic.vue"]]);const SB=Ht(Ghe),Whe=Ye({format:{type:String,default:"HH:mm:ss"},prefix:String,suffix:String,title:String,value:{type:ge([Number,Object]),default:0},valueStyle:{type:ge([String,Object,Array])}}),Khe={finish:()=>!0,[Fn]:n=>Ct(n)},Yhe=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]],kP=n=>Ct(n)?new Date(n).getTime():n.valueOf(),OP=(n,e)=>{let t=n;const i=/\[([^\]]*)]/g;return Yhe.reduce((r,[o,a])=>{const l=new RegExp(`${o}+(?![^\\[\\]]*\\])`,"g");if(l.test(r)){const c=Math.floor(t/a);return t-=c*a,r.replace(l,u=>String(c).padStart(u.length,"0"))}return r},e).replace(i,"$1")},Xhe=se({name:"ElCountdown"}),jhe=se({...Xhe,props:Whe,emits:Khe,setup(n,{expose:e,emit:t}){const i=n;let s;const r=V(0),o=R(()=>OP(r.value,i.format)),a=u=>OP(u,i.format),l=()=>{s&&(Vd(s),s=void 0)},c=()=>{const u=kP(i.value),d=()=>{let h=u-Date.now();t("change",h),h<=0?(h=0,l(),t("finish")):s=Qc(d),r.value=h};s=Qc(d)};return Ft(()=>{r.value=kP(i.value)-Date.now(),ze(()=>[i.value,i.format],()=>{l(),c()},{immediate:!0})}),kn(()=>{l()}),e({displayValue:o}),(u,d)=>(k(),Re(g(SB),{value:r.value,title:u.title,prefix:u.prefix,suffix:u.suffix,"value-style":u.valueStyle,formatter:a},Il({_:2},[Zt(u.$slots,(h,f)=>({name:f,fn:pe(()=>[ke(u.$slots,f)])}))]),1032,["value","title","prefix","suffix","value-style"]))}});var qhe=Ze(jhe,[["__file","countdown.vue"]]);const Zhe=Ht(qhe),Jhe=Ye({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),Qhe={[Fn]:(n,e)=>[n,e].every(Ct)},efe=se({name:"ElSteps"}),tfe=se({...efe,props:Jhe,emits:Qhe,setup(n,{emit:e}){const t=n,i=Ve("steps"),{children:s,addChild:r,removeChild:o}=wT(zt(),"ElStep");return ze(s,()=>{s.value.forEach((a,l)=>{a.setIndex(l)})}),Xt("ElSteps",{props:t,steps:s,addStep:r,removeStep:o}),ze(()=>t.active,(a,l)=>{e(Fn,a,l)}),(a,l)=>(k(),Y("div",{class:z([g(i).b(),g(i).m(a.simple?"simple":a.direction)])},[ke(a.$slots,"default")],2))}});var nfe=Ze(tfe,[["__file","steps.vue"]]);const ife=Ye({title:{type:String,default:""},icon:{type:xn},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),sfe=se({name:"ElStep"}),rfe=se({...sfe,props:ife,setup(n){const e=n,t=Ve("step"),i=V(-1),s=V({}),r=V(""),o=ct("ElSteps"),a=zt();Ft(()=>{ze([()=>o.props.active,()=>o.props.processStatus,()=>o.props.finishStatus],([S])=>{w(S)},{immediate:!0})}),kn(()=>{o.removeStep(x.uid)});const l=R(()=>e.status||r.value),c=R(()=>{const S=o.steps.value[i.value-1];return S?S.currentStatus:"wait"}),u=R(()=>o.props.alignCenter),d=R(()=>o.props.direction==="vertical"),h=R(()=>o.props.simple),f=R(()=>o.steps.value.length),m=R(()=>{var S;return((S=o.steps.value[f.value-1])==null?void 0:S.uid)===(a==null?void 0:a.uid)}),p=R(()=>h.value?"":o.props.space),y=R(()=>[t.b(),t.is(h.value?"simple":o.props.direction),t.is("flex",m.value&&!p.value&&!u.value),t.is("center",u.value&&!d.value&&!h.value)]),v=R(()=>{const S={flexBasis:Ct(p.value)?`${p.value}px`:p.value?p.value:`${100/(f.value-(u.value?0:1))}%`};return d.value||m.value&&(S.maxWidth=`${100/f.value}%`),S}),_=S=>{i.value=S},b=S=>{const C=S==="wait",T={transitionDelay:`${C?"-":""}${150*i.value}ms`},M=S===o.props.processStatus||C?0:100;T.borderWidth=M&&!h.value?"1px":0,T[o.props.direction==="vertical"?"height":"width"]=`${M}%`,s.value=T},w=S=>{S>i.value?r.value=o.props.finishStatus:S===i.value&&c.value!=="error"?r.value=o.props.processStatus:r.value="wait";const C=o.steps.value[i.value-1];C&&C.calcProgress(r.value)},x=un({uid:a.uid,currentStatus:l,setIndex:_,calcProgress:b});return o.addStep(x),(S,C)=>(k(),Y("div",{style:pt(g(v)),class:z(g(y))},[Ee(" icon & line "),te("div",{class:z([g(t).e("head"),g(t).is(g(l))])},[g(h)?Ee("v-if",!0):(k(),Y("div",{key:0,class:z(g(t).e("line"))},[te("i",{class:z(g(t).e("line-inner")),style:pt(s.value)},null,6)],2)),te("div",{class:z([g(t).e("icon"),g(t).is(S.icon||S.$slots.icon?"icon":"text")])},[ke(S.$slots,"icon",{},()=>[S.icon?(k(),Re(g(dt),{key:0,class:z(g(t).e("icon-inner"))},{default:pe(()=>[(k(),Re(Wt(S.icon)))]),_:1},8,["class"])):g(l)==="success"?(k(),Re(g(dt),{key:1,class:z([g(t).e("icon-inner"),g(t).is("status")])},{default:pe(()=>[le(g(Bv))]),_:1},8,["class"])):g(l)==="error"?(k(),Re(g(dt),{key:2,class:z([g(t).e("icon-inner"),g(t).is("status")])},{default:pe(()=>[le(g(ia))]),_:1},8,["class"])):g(h)?Ee("v-if",!0):(k(),Y("div",{key:3,class:z(g(t).e("icon-inner"))},Je(i.value+1),3))])],2)],2),Ee(" title & description "),te("div",{class:z(g(t).e("main"))},[te("div",{class:z([g(t).e("title"),g(t).is(g(l))])},[ke(S.$slots,"title",{},()=>[Yt(Je(S.title),1)])],2),g(h)?(k(),Y("div",{key:0,class:z(g(t).e("arrow"))},null,2)):(k(),Y("div",{key:1,class:z([g(t).e("description"),g(t).is(g(l))])},[ke(S.$slots,"description",{},()=>[Yt(Je(S.description),1)])],2))],2)],6))}});var CB=Ze(rfe,[["__file","item.vue"]]);const ofe=Ht(nfe,{Step:CB}),afe=si(CB),lfe=Ye({modelValue:{type:[Boolean,String,Number],default:!1},disabled:Boolean,loading:Boolean,size:{type:String,validator:CN},width:{type:[String,Number],default:""},inlinePrompt:Boolean,inactiveActionIcon:{type:xn},activeActionIcon:{type:xn},activeIcon:{type:xn},inactiveIcon:{type:xn},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:ge(Function)},id:String,tabindex:{type:[String,Number]},label:{type:String,default:void 0},...Ss(["ariaLabel"])}),cfe={[Gt]:n=>_i(n)||Rt(n)||Ct(n),[Fn]:n=>_i(n)||Rt(n)||Ct(n),[dr]:n=>_i(n)||Rt(n)||Ct(n)},ufe=["onClick"],dfe=["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"],hfe=["aria-hidden"],ffe=["aria-hidden"],pfe=["aria-hidden"],MB="ElSwitch",mfe=se({name:MB}),gfe=se({...mfe,props:lfe,emits:cfe,setup(n,{expose:e,emit:t}){const i=n,{formItem:s}=Qs(),r=Hi(),o=Ve("switch"),{inputId:a}=ca(i,{formItemContext:s}),l=mr(R(()=>i.loading)),c=V(i.modelValue!==!1),u=V(),d=V(),h=R(()=>[o.b(),o.m(r.value),o.is("disabled",l.value),o.is("checked",v.value)]),f=R(()=>[o.e("label"),o.em("label","left"),o.is("active",!v.value)]),m=R(()=>[o.e("label"),o.em("label","right"),o.is("active",v.value)]),p=R(()=>({width:pi(i.width)}));ze(()=>i.modelValue,()=>{c.value=!0});const y=R(()=>c.value?i.modelValue:!1),v=R(()=>y.value===i.activeValue);[i.activeValue,i.inactiveValue].includes(y.value)||(t(Gt,i.inactiveValue),t(Fn,i.inactiveValue),t(dr,i.inactiveValue)),ze(v,x=>{var S;u.value.checked=x,i.validateEvent&&((S=s==null?void 0:s.validate)==null||S.call(s,"change").catch(C=>void 0))});const _=()=>{const x=v.value?i.inactiveValue:i.activeValue;t(Gt,x),t(Fn,x),t(dr,x),vt(()=>{u.value.checked=v.value})},b=()=>{if(l.value)return;const{beforeChange:x}=i;if(!x){_();return}const S=x();[yg(S),_i(S)].includes(!0)||qi(MB,"beforeChange must return type `Promise<boolean>` or `boolean`"),yg(S)?S.then(T=>{T&&_()}).catch(T=>{}):S&&_()},w=()=>{var x,S;(S=(x=u.value)==null?void 0:x.focus)==null||S.call(x)};return Ft(()=>{u.value.checked=v.value}),ns({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-switch",ref:"https://element-plus.org/en-US/component/switch.html"},R(()=>!!i.label)),e({focus:w,checked:v}),(x,S)=>(k(),Y("div",{class:z(g(h)),onClick:Tt(b,["prevent"])},[te("input",{id:g(a),ref_key:"input",ref:u,class:z(g(o).e("input")),type:"checkbox",role:"switch","aria-checked":g(v),"aria-disabled":g(l),"aria-label":x.label||x.ariaLabel,name:x.name,"true-value":x.activeValue,"false-value":x.inactiveValue,disabled:g(l),tabindex:x.tabindex,onChange:_,onKeydown:wn(b,["enter"])},null,42,dfe),!x.inlinePrompt&&(x.inactiveIcon||x.inactiveText)?(k(),Y("span",{key:0,class:z(g(f))},[x.inactiveIcon?(k(),Re(g(dt),{key:0},{default:pe(()=>[(k(),Re(Wt(x.inactiveIcon)))]),_:1})):Ee("v-if",!0),!x.inactiveIcon&&x.inactiveText?(k(),Y("span",{key:1,"aria-hidden":g(v)},Je(x.inactiveText),9,hfe)):Ee("v-if",!0)],2)):Ee("v-if",!0),te("span",{ref_key:"core",ref:d,class:z(g(o).e("core")),style:pt(g(p))},[x.inlinePrompt?(k(),Y("div",{key:0,class:z(g(o).e("inner"))},[x.activeIcon||x.inactiveIcon?(k(),Re(g(dt),{key:0,class:z(g(o).is("icon"))},{default:pe(()=>[(k(),Re(Wt(g(v)?x.activeIcon:x.inactiveIcon)))]),_:1},8,["class"])):x.activeText||x.inactiveText?(k(),Y("span",{key:1,class:z(g(o).is("text")),"aria-hidden":!g(v)},Je(g(v)?x.activeText:x.inactiveText),11,ffe)):Ee("v-if",!0)],2)):Ee("v-if",!0),te("div",{class:z(g(o).e("action"))},[x.loading?(k(),Re(g(dt),{key:0,class:z(g(o).is("loading"))},{default:pe(()=>[le(g(Ha))]),_:1},8,["class"])):g(v)?ke(x.$slots,"active-action",{key:1},()=>[x.activeActionIcon?(k(),Re(g(dt),{key:0},{default:pe(()=>[(k(),Re(Wt(x.activeActionIcon)))]),_:1})):Ee("v-if",!0)]):g(v)?Ee("v-if",!0):ke(x.$slots,"inactive-action",{key:2},()=>[x.inactiveActionIcon?(k(),Re(g(dt),{key:0},{default:pe(()=>[(k(),Re(Wt(x.inactiveActionIcon)))]),_:1})):Ee("v-if",!0)])],2)],6),!x.inlinePrompt&&(x.activeIcon||x.activeText)?(k(),Y("span",{key:1,class:z(g(m))},[x.activeIcon?(k(),Re(g(dt),{key:0},{default:pe(()=>[(k(),Re(Wt(x.activeIcon)))]),_:1})):Ee("v-if",!0),!x.activeIcon&&x.activeText?(k(),Y("span",{key:1,"aria-hidden":!g(v)},Je(x.activeText),9,pfe)):Ee("v-if",!0)],2)):Ee("v-if",!0)],10,ufe))}});var vfe=Ze(gfe,[["__file","switch.vue"]]);const yfe=Ht(vfe),vx=function(n){var e;return(e=n.target)==null?void 0:e.closest("td")},_fe=function(n,e,t,i,s){if(!e&&!i&&(!s||Array.isArray(s)&&!s.length))return n;typeof t=="string"?t=t==="descending"?-1:1:t=t&&t<0?-1:1;const r=i?null:function(a,l){return s?(Array.isArray(s)||(s=[s]),s.map(c=>typeof c=="string"?gi(a,c):c(a,l,n))):(e!=="$key"&&$t(a)&&"$value"in a&&(a=a.$value),[$t(a)?gi(a,e):a])},o=function(a,l){if(i)return i(a.value,l.value);for(let c=0,u=a.key.length;c<u;c++){if(a.key[c]<l.key[c])return-1;if(a.key[c]>l.key[c])return 1}return 0};return n.map((a,l)=>({value:a,index:l,key:r?r(a,l):null})).sort((a,l)=>{let c=o(a,l);return c||(c=a.index-l.index),c*+t}).map(a=>a.value)},EB=function(n,e){let t=null;return n.columns.forEach(i=>{i.id===e&&(t=i)}),t},bfe=function(n,e){let t=null;for(let i=0;i<n.columns.length;i++){const s=n.columns[i];if(s.columnKey===e){t=s;break}}return t||qi("ElTable",`No column matching with column-key: ${e}`),t},DP=function(n,e,t){const i=(e.className||"").match(new RegExp(`${t}-table_[^\\s]+`,"gm"));return i?EB(n,i[0]):null},Ts=(n,e)=>{if(!n)throw new Error("Row is required when get row identity");if(typeof e=="string"){if(!e.includes("."))return`${n[e]}`;const t=e.split(".");let i=n;for(const s of t)i=i[s];return`${i}`}else if(typeof e=="function")return e.call(null,n)},ad=function(n,e){const t={};return(n||[]).forEach((i,s)=>{t[Ts(i,e)]={row:i,index:s}}),t};function wfe(n,e){const t={};let i;for(i in n)t[i]=n[i];for(i in e)if(Qt(e,i)){const s=e[i];typeof s<"u"&&(t[i]=s)}return t}function KT(n){return n===""||n!==void 0&&(n=Number.parseInt(n,10),Number.isNaN(n)&&(n="")),n}function TB(n){return n===""||n!==void 0&&(n=KT(n),Number.isNaN(n)&&(n=80)),n}function xfe(n){return typeof n=="number"?n:typeof n=="string"?/^\d+(?:px)?$/.test(n)?Number.parseInt(n,10):n:null}function Sfe(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...i)=>e(t(...i)))}function Zm(n,e,t){let i=!1;const s=n.indexOf(e),r=s!==-1,o=a=>{a==="add"?n.push(e):n.splice(s,1),i=!0,rt(e.children)&&e.children.forEach(l=>{Zm(n,l,t??!r)})};return _i(t)?t&&!r?o("add"):!t&&r&&o("remove"):o(r?"remove":"add"),i}function Cfe(n,e,t="children",i="hasChildren"){const s=o=>!(Array.isArray(o)&&o.length);function r(o,a,l){e(o,a,l),a.forEach(c=>{if(c[i]){e(c,null,l+1);return}const u=c[t];s(u)||r(c,u,l+1)})}n.forEach(o=>{if(o[i]){e(o,null,0);return}const a=o[t];s(a)||r(o,a,0)})}let co=null;function Mfe(n,e,t,i){if((co==null?void 0:co.trigger)===t)return;co==null||co();const s=i==null?void 0:i.refs.tableWrapper,r=s==null?void 0:s.dataset.prefix,o={strategy:"fixed",...n.popperOptions},a=le(Zs,{content:e,virtualTriggering:!0,virtualRef:t,appendTo:s,placement:"top",transition:"none",offset:0,hideAfter:0,...n,popperOptions:o,onHide:()=>{co==null||co()}});a.appContext={...i.appContext,...i};const l=document.createElement("div");qc(a,l),a.component.exposed.onOpen();const c=s==null?void 0:s.querySelector(`.${r}-scrollbar__wrap`);co=()=>{qc(null,l),c==null||c.removeEventListener("scroll",co),co=null},co.trigger=t,c==null||c.addEventListener("scroll",co)}function AB(n){return n.children?IK(n.children,AB):[n]}function NP(n,e){return n+e.colSpan}const IB=(n,e,t,i)=>{let s=0,r=n;const o=t.states.columns.value;if(i){const l=AB(i[n]);s=o.slice(0,o.indexOf(l[0])).reduce(NP,0),r=s+l.reduce(NP,0)-1}else s=n;let a;switch(e){case"left":r<t.states.fixedLeafColumnsLength.value&&(a="left");break;case"right":s>=o.length-t.states.rightFixedLeafColumnsLength.value&&(a="right");break;default:r<t.states.fixedLeafColumnsLength.value?a="left":s>=o.length-t.states.rightFixedLeafColumnsLength.value&&(a="right")}return a?{direction:a,start:s,after:r}:{}},YT=(n,e,t,i,s,r=0)=>{const o=[],{direction:a,start:l,after:c}=IB(e,t,i,s);if(a){const u=a==="left";o.push(`${n}-fixed-column--${a}`),u&&c+r===i.states.fixedLeafColumnsLength.value-1?o.push("is-last-column"):!u&&l-r===i.states.columns.value.length-i.states.rightFixedLeafColumnsLength.value&&o.push("is-first-column")}return o};function FP(n,e){return n+(e.realWidth===null||Number.isNaN(e.realWidth)?Number(e.width):e.realWidth)}const XT=(n,e,t,i)=>{const{direction:s,start:r=0,after:o=0}=IB(n,e,t,i);if(!s)return;const a={},l=s==="left",c=t.states.columns.value;return l?a.left=c.slice(0,r).reduce(FP,0):a.right=c.slice(o+1).reverse().reduce(FP,0),a},ap=(n,e)=>{n&&(Number.isNaN(n[e])||(n[e]=`${n[e]}px`))};function Efe(n){const e=zt(),t=V(!1),i=V([]);return{updateExpandRows:()=>{const l=n.data.value||[],c=n.rowKey.value;if(t.value)i.value=l.slice();else if(c){const u=ad(i.value,c);i.value=l.reduce((d,h)=>{const f=Ts(h,c);return u[f]&&d.push(h),d},[])}else i.value=[]},toggleRowExpansion:(l,c)=>{Zm(i.value,l,c)&&e.emit("expand-change",l,i.value.slice())},setExpandRowKeys:l=>{e.store.assertRowKey();const c=n.data.value||[],u=n.rowKey.value,d=ad(c,u);i.value=l.reduce((h,f)=>{const m=d[f];return m&&h.push(m.row),h},[])},isRowExpanded:l=>{const c=n.rowKey.value;return c?!!ad(i.value,c)[Ts(l,c)]:i.value.includes(l)},states:{expandRows:i,defaultExpandAll:t}}}function Tfe(n){const e=zt(),t=V(null),i=V(null),s=c=>{e.store.assertRowKey(),t.value=c,o(c)},r=()=>{t.value=null},o=c=>{const{data:u,rowKey:d}=n;let h=null;d.value&&(h=(g(u)||[]).find(f=>Ts(f,d.value)===c)),i.value=h,e.emit("current-change",i.value,null)};return{setCurrentRowKey:s,restoreCurrentRowKey:r,setCurrentRowByKey:o,updateCurrentRow:c=>{const u=i.value;if(c&&c!==u){i.value=c,e.emit("current-change",i.value,u);return}!c&&u&&(i.value=null,e.emit("current-change",null,u))},updateCurrentRowData:()=>{const c=n.rowKey.value,u=n.data.value||[],d=i.value;if(!u.includes(d)&&d){if(c){const h=Ts(d,c);o(h)}else i.value=null;i.value===null&&e.emit("current-change",null,d)}else t.value&&(o(t.value),r())},states:{_currentRowKey:t,currentRow:i}}}function Afe(n){const e=V([]),t=V({}),i=V(16),s=V(!1),r=V({}),o=V("hasChildren"),a=V("children"),l=zt(),c=R(()=>{if(!n.rowKey.value)return{};const v=n.data.value||[];return d(v)}),u=R(()=>{const v=n.rowKey.value,_=Object.keys(r.value),b={};return _.length&&_.forEach(w=>{if(r.value[w].length){const x={children:[]};r.value[w].forEach(S=>{const C=Ts(S,v);x.children.push(C),S[o.value]&&!b[C]&&(b[C]={children:[]})}),b[w]=x}}),b}),d=v=>{const _=n.rowKey.value,b={};return Cfe(v,(w,x,S)=>{const C=Ts(w,_);Array.isArray(x)?b[C]={children:x.map(T=>Ts(T,_)),level:S}:s.value&&(b[C]={children:[],lazy:!0,level:S})},a.value,o.value),b},h=(v=!1,_=(b=>(b=l.store)==null?void 0:b.states.defaultExpandAll.value)())=>{var b;const w=c.value,x=u.value,S=Object.keys(w),C={};if(S.length){const T=g(t),M=[],E=(I,B)=>{if(v)return e.value?_||e.value.includes(B):!!(_||I!=null&&I.expanded);{const F=_||e.value&&e.value.includes(B);return!!(I!=null&&I.expanded||F)}};S.forEach(I=>{const B=T[I],F={...w[I]};if(F.expanded=E(B,I),F.lazy){const{loaded:U=!1,loading:P=!1}=B||{};F.loaded=!!U,F.loading=!!P,M.push(I)}C[I]=F});const A=Object.keys(x);s.value&&A.length&&M.length&&A.forEach(I=>{const B=T[I],F=x[I].children;if(M.includes(I)){if(C[I].children.length!==0)throw new Error("[ElTable]children must be an empty array.");C[I].children=F}else{const{loaded:U=!1,loading:P=!1}=B||{};C[I]={lazy:!0,loaded:!!U,loading:!!P,expanded:E(B,I),children:F,level:""}}})}t.value=C,(b=l.store)==null||b.updateTableScrollY()};ze(()=>e.value,()=>{h(!0)}),ze(()=>c.value,()=>{h()}),ze(()=>u.value,()=>{h()});const f=v=>{e.value=v,h()},m=(v,_)=>{l.store.assertRowKey();const b=n.rowKey.value,w=Ts(v,b),x=w&&t.value[w];if(w&&x&&"expanded"in x){const S=x.expanded;_=typeof _>"u"?!x.expanded:_,t.value[w].expanded=_,S!==_&&l.emit("expand-change",v,_),l.store.updateTableScrollY()}},p=v=>{l.store.assertRowKey();const _=n.rowKey.value,b=Ts(v,_),w=t.value[b];s.value&&w&&"loaded"in w&&!w.loaded?y(v,b,w):m(v,void 0)},y=(v,_,b)=>{const{load:w}=l.props;w&&!t.value[_].loaded&&(t.value[_].loading=!0,w(v,b,x=>{if(!Array.isArray(x))throw new TypeError("[ElTable] data must be an array");t.value[_].loading=!1,t.value[_].loaded=!0,t.value[_].expanded=!0,x.length&&(r.value[_]=x),l.emit("expand-change",v,!0)}))};return{loadData:y,loadOrToggle:p,toggleTreeExpansion:m,updateTreeExpandKeys:f,updateTreeData:h,normalize:d,states:{expandRowKeys:e,treeData:t,indent:i,lazy:s,lazyTreeNodeMap:r,lazyColumnIdentifier:o,childrenColumnName:a}}}const Ife=(n,e)=>{const t=e.sortingColumn;return!t||typeof t.sortable=="string"?n:_fe(n,e.sortProp,e.sortOrder,t.sortMethod,t.sortBy)},m_=n=>{const e=[];return n.forEach(t=>{t.children&&t.children.length>0?e.push.apply(e,m_(t.children)):e.push(t)}),e};function Rfe(){var n;const e=zt(),{size:t}=ws((n=e.proxy)==null?void 0:n.$props),i=V(null),s=V([]),r=V([]),o=V(!1),a=V([]),l=V([]),c=V([]),u=V([]),d=V([]),h=V([]),f=V([]),m=V([]),p=[],y=V(0),v=V(0),_=V(0),b=V(!1),w=V([]),x=V(!1),S=V(!1),C=V(null),T=V({}),M=V(null),E=V(null),A=V(null),I=V(null),B=V(null);ze(s,()=>e.state&&O(!1),{deep:!0});const F=()=>{if(!i.value)throw new Error("[ElTable] prop row-key is required")},U=Ue=>{var qe;(qe=Ue.children)==null||qe.forEach(Fe=>{Fe.fixed=Ue.fixed,U(Fe)})},P=()=>{a.value.forEach(oe=>{U(oe)}),u.value=a.value.filter(oe=>oe.fixed===!0||oe.fixed==="left"),d.value=a.value.filter(oe=>oe.fixed==="right"),u.value.length>0&&a.value[0]&&a.value[0].type==="selection"&&!a.value[0].fixed&&(a.value[0].fixed=!0,u.value.unshift(a.value[0]));const Ue=a.value.filter(oe=>!oe.fixed);l.value=[].concat(u.value).concat(Ue).concat(d.value);const qe=m_(Ue),Fe=m_(u.value),Ie=m_(d.value);y.value=qe.length,v.value=Fe.length,_.value=Ie.length,c.value=[].concat(Fe).concat(qe).concat(Ie),o.value=u.value.length>0||d.value.length>0},O=(Ue,qe=!1)=>{Ue&&P(),qe?e.state.doLayout():e.state.debouncedUpdateLayout()},D=Ue=>w.value.includes(Ue),L=()=>{b.value=!1;const Ue=w.value;w.value=[],Ue.length&&e.emit("selection-change",[])},H=()=>{let Ue;if(i.value){Ue=[];const qe=ad(w.value,i.value),Fe=ad(s.value,i.value);for(const Ie in qe)Qt(qe,Ie)&&!Fe[Ie]&&Ue.push(qe[Ie].row)}else Ue=w.value.filter(qe=>!s.value.includes(qe));if(Ue.length){const qe=w.value.filter(Fe=>!Ue.includes(Fe));w.value=qe,e.emit("selection-change",qe.slice())}},X=()=>(w.value||[]).slice(),ne=(Ue,qe=void 0,Fe=!0)=>{if(Zm(w.value,Ue,qe)){const oe=(w.value||[]).slice();Fe&&e.emit("select",oe,Ue),e.emit("selection-change",oe)}},ce=()=>{var Ue,qe;const Fe=S.value?!b.value:!(b.value||w.value.length);b.value=Fe;let Ie=!1,oe=0;const Le=(qe=(Ue=e==null?void 0:e.store)==null?void 0:Ue.states)==null?void 0:qe.rowKey.value;s.value.forEach((Ke,ft)=>{const Q=ft+oe;C.value?C.value.call(null,Ke,Q)&&Zm(w.value,Ke,Fe)&&(Ie=!0):Zm(w.value,Ke,Fe)&&(Ie=!0),oe+=re(Ts(Ke,Le))}),Ie&&e.emit("selection-change",w.value?w.value.slice():[]),e.emit("select-all",(w.value||[]).slice())},ae=()=>{const Ue=ad(w.value,i.value);s.value.forEach(qe=>{const Fe=Ts(qe,i.value),Ie=Ue[Fe];Ie&&(w.value[Ie.index]=qe)})},_e=()=>{var Ue,qe,Fe;if(((Ue=s.value)==null?void 0:Ue.length)===0){b.value=!1;return}let Ie;i.value&&(Ie=ad(w.value,i.value));const oe=function(Q){return Ie?!!Ie[Ts(Q,i.value)]:w.value.includes(Q)};let Le=!0,Ke=0,ft=0;for(let Q=0,$e=(s.value||[]).length;Q<$e;Q++){const Oe=(Fe=(qe=e==null?void 0:e.store)==null?void 0:qe.states)==null?void 0:Fe.rowKey.value,et=Q+ft,ht=s.value[Q],At=C.value&&C.value.call(null,ht,et);if(oe(ht))Ke++;else if(!C.value||At){Le=!1;break}ft+=re(Ts(ht,Oe))}Ke===0&&(Le=!1),b.value=Le},re=Ue=>{var qe;if(!e||!e.store)return 0;const{treeData:Fe}=e.store.states;let Ie=0;const oe=(qe=Fe.value[Ue])==null?void 0:qe.children;return oe&&(Ie+=oe.length,oe.forEach(Le=>{Ie+=re(Le)})),Ie},xe=(Ue,qe)=>{Array.isArray(Ue)||(Ue=[Ue]);const Fe={};return Ue.forEach(Ie=>{T.value[Ie.id]=qe,Fe[Ie.columnKey||Ie.id]=qe}),Fe},he=(Ue,qe,Fe)=>{E.value&&E.value!==Ue&&(E.value.order=null),E.value=Ue,A.value=qe,I.value=Fe},Te=()=>{let Ue=g(r);Object.keys(T.value).forEach(qe=>{const Fe=T.value[qe];if(!Fe||Fe.length===0)return;const Ie=EB({columns:c.value},qe);Ie&&Ie.filterMethod&&(Ue=Ue.filter(oe=>Fe.some(Le=>Ie.filterMethod.call(null,Le,oe,Ie))))}),M.value=Ue},Ce=()=>{s.value=Ife(M.value,{sortingColumn:E.value,sortProp:A.value,sortOrder:I.value})},we=(Ue=void 0)=>{Ue&&Ue.filter||Te(),Ce()},K=Ue=>{const{tableHeaderRef:qe}=e.refs;if(!qe)return;const Fe=Object.assign({},qe.filterPanels),Ie=Object.keys(Fe);if(Ie.length)if(typeof Ue=="string"&&(Ue=[Ue]),Array.isArray(Ue)){const oe=Ue.map(Le=>bfe({columns:c.value},Le));Ie.forEach(Le=>{const Ke=oe.find(ft=>ft.id===Le);Ke&&(Ke.filteredValue=[])}),e.store.commit("filterChange",{column:oe,values:[],silent:!0,multi:!0})}else Ie.forEach(oe=>{const Le=c.value.find(Ke=>Ke.id===oe);Le&&(Le.filteredValue=[])}),T.value={},e.store.commit("filterChange",{column:{},values:[],silent:!0})},j=()=>{E.value&&(he(null,null,null),e.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:ie,toggleRowExpansion:ve,updateExpandRows:ye,states:me,isRowExpanded:be}=Efe({data:s,rowKey:i}),{updateTreeExpandKeys:Pe,toggleTreeExpansion:Z,updateTreeData:$,loadOrToggle:de,states:Ae}=Afe({data:s,rowKey:i}),{updateCurrentRowData:De,updateCurrentRow:fe,setCurrentRowKey:Ge,states:We}=Tfe({data:s,rowKey:i});return{assertRowKey:F,updateColumns:P,scheduleLayout:O,isSelected:D,clearSelection:L,cleanSelection:H,getSelectionRows:X,toggleRowSelection:ne,_toggleAllSelection:ce,toggleAllSelection:null,updateSelectionByRowKey:ae,updateAllSelected:_e,updateFilters:xe,updateCurrentRow:fe,updateSort:he,execFilter:Te,execSort:Ce,execQuery:we,clearFilter:K,clearSort:j,toggleRowExpansion:ve,setExpandRowKeysAdapter:Ue=>{ie(Ue),Pe(Ue)},setCurrentRowKey:Ge,toggleRowExpansionAdapter:(Ue,qe)=>{c.value.some(({type:Ie})=>Ie==="expand")?ve(Ue,qe):Z(Ue,qe)},isRowExpanded:be,updateExpandRows:ye,updateCurrentRowData:De,loadOrToggle:de,updateTreeData:$,states:{tableSize:t,rowKey:i,data:s,_data:r,isComplex:o,_columns:a,originColumns:l,columns:c,fixedColumns:u,rightFixedColumns:d,leafColumns:h,fixedLeafColumns:f,rightFixedLeafColumns:m,updateOrderFns:p,leafColumnsLength:y,fixedLeafColumnsLength:v,rightFixedLeafColumnsLength:_,isAllSelected:b,selection:w,reserveSelection:x,selectOnIndeterminate:S,selectable:C,filters:T,filteredData:M,sortingColumn:E,sortProp:A,sortOrder:I,hoverRow:B,...me,...Ae,...We}}}function QC(n,e){return n.map(t=>{var i;return t.id===e.id?e:((i=t.children)!=null&&i.length&&(t.children=QC(t.children,e)),t)})}function eM(n){n.forEach(e=>{var t,i;e.no=(t=e.getColumnIndex)==null?void 0:t.call(e),(i=e.children)!=null&&i.length&&eM(e.children)}),n.sort((e,t)=>e.no-t.no)}function Pfe(){const n=zt(),e=Rfe();return{ns:Ve("table"),...e,mutations:{setData(o,a){const l=g(o._data)!==a;o.data.value=a,o._data.value=a,n.store.execQuery(),n.store.updateCurrentRowData(),n.store.updateExpandRows(),n.store.updateTreeData(n.store.states.defaultExpandAll.value),g(o.reserveSelection)?(n.store.assertRowKey(),n.store.updateSelectionByRowKey()):l?n.store.clearSelection():n.store.cleanSelection(),n.store.updateAllSelected(),n.$ready&&n.store.scheduleLayout()},insertColumn(o,a,l,c){const u=g(o._columns);let d=[];l?(l&&!l.children&&(l.children=[]),l.children.push(a),d=QC(u,l)):(u.push(a),d=u),eM(d),o._columns.value=d,o.updateOrderFns.push(c),a.type==="selection"&&(o.selectable.value=a.selectable,o.reserveSelection.value=a.reserveSelection),n.$ready&&(n.store.updateColumns(),n.store.scheduleLayout())},updateColumnOrder(o,a){var l;((l=a.getColumnIndex)==null?void 0:l.call(a))!==a.no&&(eM(o._columns.value),n.$ready&&n.store.updateColumns())},removeColumn(o,a,l,c){const u=g(o._columns)||[];if(l)l.children.splice(l.children.findIndex(h=>h.id===a.id),1),vt(()=>{var h;((h=l.children)==null?void 0:h.length)===0&&delete l.children}),o._columns.value=QC(u,l);else{const h=u.indexOf(a);h>-1&&(u.splice(h,1),o._columns.value=u)}const d=o.updateOrderFns.indexOf(c);d>-1&&o.updateOrderFns.splice(d,1),n.$ready&&(n.store.updateColumns(),n.store.scheduleLayout())},sort(o,a){const{prop:l,order:c,init:u}=a;if(l){const d=g(o.columns).find(h=>h.property===l);d&&(d.order=c,n.store.updateSort(d,l,c),n.store.commit("changeSortCondition",{init:u}))}},changeSortCondition(o,a){const{sortingColumn:l,sortProp:c,sortOrder:u}=o,d=g(l),h=g(c),f=g(u);f===null&&(o.sortingColumn.value=null,o.sortProp.value=null);const m={filter:!0};n.store.execQuery(m),(!a||!(a.silent||a.init))&&n.emit("sort-change",{column:d,prop:h,order:f}),n.store.updateTableScrollY()},filterChange(o,a){const{column:l,values:c,silent:u}=a,d=n.store.updateFilters(l,c);n.store.execQuery(),u||n.emit("filter-change",d),n.store.updateTableScrollY()},toggleAllSelection(){n.store.toggleAllSelection()},rowSelectedChanged(o,a){n.store.toggleRowSelection(a),n.store.updateAllSelected()},setHoverRow(o,a){o.hoverRow.value=a},setCurrentRow(o,a){n.store.updateCurrentRow(a)}},commit:function(o,...a){const l=n.store.mutations;if(l[o])l[o].apply(n,[n.store.states].concat(a));else throw new Error(`Action not found: ${o}`)},updateTableScrollY:function(){vt(()=>n.layout.updateScrollY.apply(n.layout))}}}const Jm={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data","treeProps.hasChildren":{key:"lazyColumnIdentifier",default:"hasChildren"},"treeProps.children":{key:"childrenColumnName",default:"children"}};function Lfe(n,e){if(!n)throw new Error("Table is required.");const t=Pfe();return t.toggleAllSelection=Lr(t._toggleAllSelection,10),Object.keys(Jm).forEach(i=>{RB(PB(e,i),i,t)}),kfe(t,e),t}function kfe(n,e){Object.keys(Jm).forEach(t=>{ze(()=>PB(e,t),i=>{RB(i,t,n)})})}function RB(n,e,t){let i=n,s=Jm[e];typeof Jm[e]=="object"&&(s=s.key,i=i||Jm[e].default),t.states[s].value=i}function PB(n,e){if(e.includes(".")){const t=e.split(".");let i=n;return t.forEach(s=>{i=i[s]}),i}else return n[e]}class Ofe{constructor(e){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=V(null),this.scrollX=V(!1),this.scrollY=V(!1),this.bodyWidth=V(null),this.fixedWidth=V(null),this.rightFixedWidth=V(null),this.gutterWidth=0;for(const t in e)Qt(e,t)&&(Gn(this[t])?this[t].value=e[t]:this[t]=e[t]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){if(this.height.value===null)return!1;const t=this.table.refs.scrollBarRef;if(this.table.vnode.el&&(t!=null&&t.wrapRef)){let i=!0;const s=this.scrollY.value;return i=t.wrapRef.scrollHeight>t.wrapRef.clientHeight,this.scrollY.value=i,s!==i}return!1}setHeight(e,t="height"){if(!Jt)return;const i=this.table.vnode.el;if(e=xfe(e),this.height.value=Number(e),!i&&(e||e===0))return vt(()=>this.setHeight(e,t));typeof e=="number"?(i.style[t]=`${e}px`,this.updateElsHeight()):typeof e=="string"&&(i.style[t]=e,this.updateElsHeight())}setMaxHeight(e){this.setHeight(e,"max-height")}getFlattenColumns(){const e=[];return this.table.store.states.columns.value.forEach(i=>{i.isColumnGroup?e.push.apply(e,i.columns):e.push(i)}),e}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(e){if(!e)return!0;let t=e;for(;t.tagName!=="DIV";){if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}updateColumnsWidth(){if(!Jt)return;const e=this.fit,t=this.table.vnode.el.clientWidth;let i=0;const s=this.getFlattenColumns(),r=s.filter(l=>typeof l.width!="number");if(s.forEach(l=>{typeof l.width=="number"&&l.realWidth&&(l.realWidth=null)}),r.length>0&&e){if(s.forEach(l=>{i+=Number(l.width||l.minWidth||80)}),i<=t){this.scrollX.value=!1;const l=t-i;if(r.length===1)r[0].realWidth=Number(r[0].minWidth||80)+l;else{const c=r.reduce((h,f)=>h+Number(f.minWidth||80),0),u=l/c;let d=0;r.forEach((h,f)=>{if(f===0)return;const m=Math.floor(Number(h.minWidth||80)*u);d+=m,h.realWidth=Number(h.minWidth||80)+m}),r[0].realWidth=Number(r[0].minWidth||80)+l-d}}else this.scrollX.value=!0,r.forEach(l=>{l.realWidth=Number(l.minWidth)});this.bodyWidth.value=Math.max(i,t),this.table.state.resizeState.value.width=this.bodyWidth.value}else s.forEach(l=>{!l.width&&!l.minWidth?l.realWidth=80:l.realWidth=Number(l.width||l.minWidth),i+=l.realWidth}),this.scrollX.value=i>t,this.bodyWidth.value=i;const o=this.store.states.fixedColumns.value;if(o.length>0){let l=0;o.forEach(c=>{l+=Number(c.realWidth||c.width)}),this.fixedWidth.value=l}const a=this.store.states.rightFixedColumns.value;if(a.length>0){let l=0;a.forEach(c=>{l+=Number(c.realWidth||c.width)}),this.rightFixedWidth.value=l}this.notifyObservers("columns")}addObserver(e){this.observers.push(e)}removeObserver(e){const t=this.observers.indexOf(e);t!==-1&&this.observers.splice(t,1)}notifyObservers(e){this.observers.forEach(i=>{var s,r;switch(e){case"columns":(s=i.state)==null||s.onColumnsChange(this);break;case"scrollable":(r=i.state)==null||r.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${e}.`)}})}}const{CheckboxGroup:Dfe}=Do,Nfe=se({name:"ElTableFilterPanel",components:{ElCheckbox:Do,ElCheckboxGroup:Dfe,ElScrollbar:Zl,ElTooltip:Zs,ElIcon:dt,ArrowDown:jl,ArrowUp:XE},directives:{ClickOutside:Ll},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function}},setup(n){const e=zt(),{t}=en(),i=Ve("table-filter"),s=e==null?void 0:e.parent;s.filterPanels.value[n.column.id]||(s.filterPanels.value[n.column.id]=e);const r=V(!1),o=V(null),a=R(()=>n.column&&n.column.filters),l=R(()=>n.column.filterClassName?`${i.b()} ${n.column.filterClassName}`:i.b()),c=R({get:()=>{var x;return(((x=n.column)==null?void 0:x.filteredValue)||[])[0]},set:x=>{u.value&&(typeof x<"u"&&x!==null?u.value.splice(0,1,x):u.value.splice(0,1))}}),u=R({get(){return n.column?n.column.filteredValue||[]:[]},set(x){n.column&&n.upDataColumn("filteredValue",x)}}),d=R(()=>n.column?n.column.filterMultiple:!0),h=x=>x.value===c.value,f=()=>{r.value=!1},m=x=>{x.stopPropagation(),r.value=!r.value},p=()=>{r.value=!1},y=()=>{b(u.value),f()},v=()=>{u.value=[],b(u.value),f()},_=x=>{c.value=x,b(typeof x<"u"&&x!==null?u.value:[]),f()},b=x=>{n.store.commit("filterChange",{column:n.column,values:x}),n.store.updateAllSelected()};ze(r,x=>{n.column&&n.upDataColumn("filterOpened",x)},{immediate:!0});const w=R(()=>{var x,S;return(S=(x=o.value)==null?void 0:x.popperRef)==null?void 0:S.contentRef});return{tooltipVisible:r,multiple:d,filterClassName:l,filteredValue:u,filterValue:c,filters:a,handleConfirm:y,handleReset:v,handleSelect:_,isActive:h,t,ns:i,showFilterPanel:m,hideFilterPanel:p,popperPaneRef:w,tooltip:o}}}),Ffe={key:0},Bfe=["disabled"],Ufe=["label","onClick"];function zfe(n,e,t,i,s,r){const o=Ut("el-checkbox"),a=Ut("el-checkbox-group"),l=Ut("el-scrollbar"),c=Ut("arrow-up"),u=Ut("arrow-down"),d=Ut("el-icon"),h=Ut("el-tooltip"),f=y1("click-outside");return k(),Re(h,{ref:"tooltip",visible:n.tooltipVisible,offset:0,placement:n.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":n.filterClassName,persistent:""},{content:pe(()=>[n.multiple?(k(),Y("div",Ffe,[te("div",{class:z(n.ns.e("content"))},[le(l,{"wrap-class":n.ns.e("wrap")},{default:pe(()=>[le(a,{modelValue:n.filteredValue,"onUpdate:modelValue":e[0]||(e[0]=m=>n.filteredValue=m),class:z(n.ns.e("checkbox-group"))},{default:pe(()=>[(k(!0),Y(mt,null,Zt(n.filters,m=>(k(),Re(o,{key:m.value,value:m.value},{default:pe(()=>[Yt(Je(m.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","class"])]),_:1},8,["wrap-class"])],2),te("div",{class:z(n.ns.e("bottom"))},[te("button",{class:z({[n.ns.is("disabled")]:n.filteredValue.length===0}),disabled:n.filteredValue.length===0,type:"button",onClick:e[1]||(e[1]=(...m)=>n.handleConfirm&&n.handleConfirm(...m))},Je(n.t("el.table.confirmFilter")),11,Bfe),te("button",{type:"button",onClick:e[2]||(e[2]=(...m)=>n.handleReset&&n.handleReset(...m))},Je(n.t("el.table.resetFilter")),1)],2)])):(k(),Y("ul",{key:1,class:z(n.ns.e("list"))},[te("li",{class:z([n.ns.e("list-item"),{[n.ns.is("active")]:n.filterValue===void 0||n.filterValue===null}]),onClick:e[3]||(e[3]=m=>n.handleSelect(null))},Je(n.t("el.table.clearFilter")),3),(k(!0),Y(mt,null,Zt(n.filters,m=>(k(),Y("li",{key:m.value,class:z([n.ns.e("list-item"),n.ns.is("active",n.isActive(m))]),label:m.value,onClick:p=>n.handleSelect(m.value)},Je(m.text),11,Ufe))),128))],2))]),default:pe(()=>[Bt((k(),Y("span",{class:z([`${n.ns.namespace.value}-table__column-filter-trigger`,`${n.ns.namespace.value}-none-outline`]),onClick:e[4]||(e[4]=(...m)=>n.showFilterPanel&&n.showFilterPanel(...m))},[le(d,null,{default:pe(()=>[ke(n.$slots,"filter-icon",{},()=>[n.column.filterOpened?(k(),Re(c,{key:0})):(k(),Re(u,{key:1}))])]),_:3})],2)),[[f,n.hideFilterPanel,n.popperPaneRef]])]),_:3},8,["visible","placement","popper-class"])}var Hfe=Ze(Nfe,[["render",zfe],["__file","filter-panel.vue"]]);function LB(n){const e=zt();v1(()=>{t.value.addObserver(e)}),Ft(()=>{i(t.value),s(t.value)}),Kl(()=>{i(t.value),s(t.value)}),fu(()=>{t.value.removeObserver(e)});const t=R(()=>{const r=n.layout;if(!r)throw new Error("Can not find table layout.");return r}),i=r=>{var o;const a=((o=n.vnode.el)==null?void 0:o.querySelectorAll("colgroup > col"))||[];if(!a.length)return;const l=r.getFlattenColumns(),c={};l.forEach(u=>{c[u.id]=u});for(let u=0,d=a.length;u<d;u++){const h=a[u],f=h.getAttribute("name"),m=c[f];m&&h.setAttribute("width",m.realWidth||m.width)}},s=r=>{var o,a;const l=((o=n.vnode.el)==null?void 0:o.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let u=0,d=l.length;u<d;u++)l[u].setAttribute("width",r.scrollY.value?r.gutterWidth:"0");const c=((a=n.vnode.el)==null?void 0:a.querySelectorAll("th.gutter"))||[];for(let u=0,d=c.length;u<d;u++){const h=c[u];h.style.width=r.scrollY.value?`${r.gutterWidth}px`:"0",h.style.display=r.scrollY.value?"":"none"}};return{tableLayout:t.value,onColumnsChange:i,onScrollableChange:s}}const ja=Symbol("ElTable");function Vfe(n,e){const t=zt(),i=ct(ja),s=p=>{p.stopPropagation()},r=(p,y)=>{!y.filters&&y.sortable?m(p,y,!1):y.filterable&&!y.sortable&&s(p),i==null||i.emit("header-click",y,p)},o=(p,y)=>{i==null||i.emit("header-contextmenu",y,p)},a=V(null),l=V(!1),c=V({}),u=(p,y)=>{if(Jt&&!(y.children&&y.children.length>0)&&a.value&&n.border){l.value=!0;const v=i;e("set-drag-visible",!0);const b=(v==null?void 0:v.vnode.el).getBoundingClientRect().left,w=t.vnode.el.querySelector(`th.${y.id}`),x=w.getBoundingClientRect(),S=x.left-b+30;xo(w,"noclick"),c.value={startMouseLeft:p.clientX,startLeft:x.right-b,startColumnLeft:x.left-b,tableLeft:b};const C=v==null?void 0:v.refs.resizeProxy;C.style.left=`${c.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const T=E=>{const A=E.clientX-c.value.startMouseLeft,I=c.value.startLeft+A;C.style.left=`${Math.max(S,I)}px`},M=()=>{if(l.value){const{startColumnLeft:E,startLeft:A}=c.value,B=Number.parseInt(C.style.left,10)-E;y.width=y.realWidth=B,v==null||v.emit("header-dragend",y.width,A-E,y,p),requestAnimationFrame(()=>{n.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",l.value=!1,a.value=null,c.value={},e("set-drag-visible",!1)}document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",M),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{Xs(w,"noclick")},0)};document.addEventListener("mousemove",T),document.addEventListener("mouseup",M)}},d=(p,y)=>{if(y.children&&y.children.length>0)return;const v=p.target;if(!Lo(v))return;const _=v==null?void 0:v.closest("th");if(!(!y||!y.resizable)&&!l.value&&n.border){const b=_.getBoundingClientRect(),w=document.body.style;b.width>12&&b.right-p.pageX<8?(w.cursor="col-resize",Yr(_,"is-sortable")&&(_.style.cursor="col-resize"),a.value=y):l.value||(w.cursor="",Yr(_,"is-sortable")&&(_.style.cursor="pointer"),a.value=null)}},h=()=>{Jt&&(document.body.style.cursor="")},f=({order:p,sortOrders:y})=>{if(p==="")return y[0];const v=y.indexOf(p||null);return y[v>y.length-2?0:v+1]},m=(p,y,v)=>{var _;p.stopPropagation();const b=y.order===v?null:v||f(y),w=(_=p.target)==null?void 0:_.closest("th");if(w&&Yr(w,"noclick")){Xs(w,"noclick");return}if(!y.sortable)return;const x=n.store.states;let S=x.sortProp.value,C;const T=x.sortingColumn.value;(T!==y||T===y&&T.order===null)&&(T&&(T.order=null),x.sortingColumn.value=y,S=y.property),b?C=y.order=b:C=y.order=null,x.sortProp.value=S,x.sortOrder.value=C,i==null||i.store.commit("changeSortCondition")};return{handleHeaderClick:r,handleHeaderContextMenu:o,handleMouseDown:u,handleMouseMove:d,handleMouseOut:h,handleSortClick:m,handleFilterClick:s}}function $fe(n){const e=ct(ja),t=Ve("table");return{getHeaderRowStyle:a=>{const l=e==null?void 0:e.props.headerRowStyle;return typeof l=="function"?l.call(null,{rowIndex:a}):l},getHeaderRowClass:a=>{const l=[],c=e==null?void 0:e.props.headerRowClassName;return typeof c=="string"?l.push(c):typeof c=="function"&&l.push(c.call(null,{rowIndex:a})),l.join(" ")},getHeaderCellStyle:(a,l,c,u)=>{var d;let h=(d=e==null?void 0:e.props.headerCellStyle)!=null?d:{};typeof h=="function"&&(h=h.call(null,{rowIndex:a,columnIndex:l,row:c,column:u}));const f=XT(l,u.fixed,n.store,c);return ap(f,"left"),ap(f,"right"),Object.assign({},h,f)},getHeaderCellClass:(a,l,c,u)=>{const d=YT(t.b(),l,u.fixed,n.store,c),h=[u.id,u.order,u.headerAlign,u.className,u.labelClassName,...d];u.children||h.push("is-leaf"),u.sortable&&h.push("is-sortable");const f=e==null?void 0:e.props.headerCellClassName;return typeof f=="string"?h.push(f):typeof f=="function"&&h.push(f.call(null,{rowIndex:a,columnIndex:l,row:c,column:u})),h.push(t.e("cell")),h.filter(m=>!!m).join(" ")}}}const kB=n=>{const e=[];return n.forEach(t=>{t.children?(e.push(t),e.push.apply(e,kB(t.children))):e.push(t)}),e},OB=n=>{let e=1;const t=(r,o)=>{if(o&&(r.level=o.level+1,e<r.level&&(e=r.level)),r.children){let a=0;r.children.forEach(l=>{t(l,r),a+=l.colSpan}),r.colSpan=a}else r.colSpan=1};n.forEach(r=>{r.level=1,t(r,void 0)});const i=[];for(let r=0;r<e;r++)i.push([]);return kB(n).forEach(r=>{r.children?(r.rowSpan=1,r.children.forEach(o=>o.isSubColumn=!0)):r.rowSpan=e-r.level+1,i[r.level-1].push(r)}),i};function Gfe(n){const e=ct(ja),t=R(()=>OB(n.store.states.originColumns.value));return{isGroup:R(()=>{const r=t.value.length>1;return r&&e&&(e.state.isGroup.value=!0),r}),toggleAllSelection:r=>{r.stopPropagation(),e==null||e.store.commit("toggleAllSelection")},columnRows:t}}var Wfe=se({name:"ElTableHeader",components:{ElCheckbox:Do},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(n,{emit:e}){const t=zt(),i=ct(ja),s=Ve("table"),r=V({}),{onColumnsChange:o,onScrollableChange:a}=LB(i);Ft(async()=>{await vt(),await vt();const{prop:S,order:C}=n.defaultSort;i==null||i.store.commit("sort",{prop:S,order:C,init:!0})});const{handleHeaderClick:l,handleHeaderContextMenu:c,handleMouseDown:u,handleMouseMove:d,handleMouseOut:h,handleSortClick:f,handleFilterClick:m}=Vfe(n,e),{getHeaderRowStyle:p,getHeaderRowClass:y,getHeaderCellStyle:v,getHeaderCellClass:_}=$fe(n),{isGroup:b,toggleAllSelection:w,columnRows:x}=Gfe(n);return t.state={onColumnsChange:o,onScrollableChange:a},t.filterPanels=r,{ns:s,filterPanels:r,onColumnsChange:o,onScrollableChange:a,columnRows:x,getHeaderRowClass:y,getHeaderRowStyle:p,getHeaderCellClass:_,getHeaderCellStyle:v,handleHeaderClick:l,handleHeaderContextMenu:c,handleMouseDown:u,handleMouseMove:d,handleMouseOut:h,handleSortClick:f,handleFilterClick:m,isGroup:b,toggleAllSelection:w}},render(){const{ns:n,isGroup:e,columnRows:t,getHeaderCellStyle:i,getHeaderCellClass:s,getHeaderRowClass:r,getHeaderRowStyle:o,handleHeaderClick:a,handleHeaderContextMenu:l,handleMouseDown:c,handleMouseMove:u,handleSortClick:d,handleMouseOut:h,store:f,$parent:m}=this;let p=1;return _t("thead",{class:{[n.is("group")]:e}},t.map((y,v)=>_t("tr",{class:r(v),key:v,style:o(v)},y.map((_,b)=>(_.rowSpan>p&&(p=_.rowSpan),_t("th",{class:s(v,b,y,_),colspan:_.colSpan,key:`${_.id}-thead`,rowspan:_.rowSpan,style:i(v,b,y,_),onClick:w=>{w.currentTarget.classList.contains("noclick")||a(w,_)},onContextmenu:w=>l(w,_),onMousedown:w=>c(w,_),onMousemove:w=>u(w,_),onMouseout:h},[_t("div",{class:["cell",_.filteredValue&&_.filteredValue.length>0?"highlight":""]},[_.renderHeader?_.renderHeader({column:_,$index:b,store:f,_self:m}):_.label,_.sortable&&_t("span",{onClick:w=>d(w,_),class:"caret-wrapper"},[_t("i",{onClick:w=>d(w,_,"ascending"),class:"sort-caret ascending"}),_t("i",{onClick:w=>d(w,_,"descending"),class:"sort-caret descending"})]),_.filterable&&_t(Hfe,{store:f,placement:_.filterPlacement||"bottom-start",column:_,upDataColumn:(w,x)=>{_[w]=x}},{"filter-icon":()=>_.renderFilterIcon?_.renderFilterIcon({filterOpened:_.filterOpened}):null})])]))))))}});function yx(n,e,t=.01){return n-e>t}function Kfe(n){const e=ct(ja),t=V(""),i=V(_t("div")),s=(m,p,y)=>{var v;const _=e,b=vx(m);let w;const x=(v=_==null?void 0:_.vnode.el)==null?void 0:v.dataset.prefix;b&&(w=DP({columns:n.store.states.columns.value},b,x),w&&(_==null||_.emit(`cell-${y}`,p,w,b,m))),_==null||_.emit(`row-${y}`,p,w,m)},r=(m,p)=>{s(m,p,"dblclick")},o=(m,p)=>{n.store.commit("setCurrentRow",p),s(m,p,"click")},a=(m,p)=>{s(m,p,"contextmenu")},l=Lr(m=>{n.store.commit("setHoverRow",m)},30),c=Lr(()=>{n.store.commit("setHoverRow",null)},30),u=m=>{const p=window.getComputedStyle(m,null),y=Number.parseInt(p.paddingLeft,10)||0,v=Number.parseInt(p.paddingRight,10)||0,_=Number.parseInt(p.paddingTop,10)||0,b=Number.parseInt(p.paddingBottom,10)||0;return{left:y,right:v,top:_,bottom:b}},d=(m,p,y)=>{let v=p.target.parentNode;for(;m>1&&(v=v==null?void 0:v.nextSibling,!(!v||v.nodeName!=="TR"));)y(v,"hover-row hover-fixed-row"),m--};return{handleDoubleClick:r,handleClick:o,handleContextMenu:a,handleMouseEnter:l,handleMouseLeave:c,handleCellMouseEnter:(m,p,y)=>{var v;const _=e,b=vx(m),w=(v=_==null?void 0:_.vnode.el)==null?void 0:v.dataset.prefix;if(b){const L=DP({columns:n.store.states.columns.value},b,w);b.rowSpan>1&&d(b.rowSpan,m,xo);const H=_.hoverState={cell:b,column:L,row:p};_==null||_.emit("cell-mouse-enter",H.row,H.column,H.cell,m)}if(!y)return;const x=m.target.querySelector(".cell");if(!(Yr(x,`${w}-tooltip`)&&x.childNodes.length))return;const S=document.createRange();S.setStart(x,0),S.setEnd(x,x.childNodes.length);let{width:C,height:T}=S.getBoundingClientRect();const M=C-Math.floor(C),{width:E,height:A}=x.getBoundingClientRect();M<.001&&(C=Math.floor(C)),T-Math.floor(T)<.001&&(T=Math.floor(T));const{top:B,left:F,right:U,bottom:P}=u(x),O=F+U,D=B+P;(yx(C+O,E)||yx(T+D,A)||yx(x.scrollWidth,E))&&Mfe(y,b.innerText||b.textContent,b,_)},handleCellMouseLeave:m=>{const p=vx(m);if(!p)return;p.rowSpan>1&&d(p.rowSpan,m,Xs);const y=e==null?void 0:e.hoverState;e==null||e.emit("cell-mouse-leave",y==null?void 0:y.row,y==null?void 0:y.column,y==null?void 0:y.cell,m)},tooltipContent:t,tooltipTrigger:i}}function Yfe(n){const e=ct(ja),t=Ve("table");return{getRowStyle:(c,u)=>{const d=e==null?void 0:e.props.rowStyle;return typeof d=="function"?d.call(null,{row:c,rowIndex:u}):d||null},getRowClass:(c,u)=>{const d=[t.e("row")];e!=null&&e.props.highlightCurrentRow&&c===n.store.states.currentRow.value&&d.push("current-row"),n.stripe&&u%2===1&&d.push(t.em("row","striped"));const h=e==null?void 0:e.props.rowClassName;return typeof h=="string"?d.push(h):typeof h=="function"&&d.push(h.call(null,{row:c,rowIndex:u})),d},getCellStyle:(c,u,d,h)=>{const f=e==null?void 0:e.props.cellStyle;let m=f??{};typeof f=="function"&&(m=f.call(null,{rowIndex:c,columnIndex:u,row:d,column:h}));const p=XT(u,n==null?void 0:n.fixed,n.store);return ap(p,"left"),ap(p,"right"),Object.assign({},m,p)},getCellClass:(c,u,d,h,f)=>{const m=YT(t.b(),u,n==null?void 0:n.fixed,n.store,void 0,f),p=[h.id,h.align,h.className,...m],y=e==null?void 0:e.props.cellClassName;return typeof y=="string"?p.push(y):typeof y=="function"&&p.push(y.call(null,{rowIndex:c,columnIndex:u,row:d,column:h})),p.push(t.e("cell")),p.filter(v=>!!v).join(" ")},getSpan:(c,u,d,h)=>{let f=1,m=1;const p=e==null?void 0:e.props.spanMethod;if(typeof p=="function"){const y=p({row:c,column:u,rowIndex:d,columnIndex:h});Array.isArray(y)?(f=y[0],m=y[1]):typeof y=="object"&&(f=y.rowspan,m=y.colspan)}return{rowspan:f,colspan:m}},getColspanRealWidth:(c,u,d)=>{if(u<1)return c[d].realWidth;const h=c.map(({realWidth:f,width:m})=>f||m).slice(d,d+u);return Number(h.reduce((f,m)=>Number(f)+Number(m),-1))}}}function Xfe(n){const e=ct(ja),t=Ve("table"),{handleDoubleClick:i,handleClick:s,handleContextMenu:r,handleMouseEnter:o,handleMouseLeave:a,handleCellMouseEnter:l,handleCellMouseLeave:c,tooltipContent:u,tooltipTrigger:d}=Kfe(n),{getRowStyle:h,getRowClass:f,getCellStyle:m,getCellClass:p,getSpan:y,getColspanRealWidth:v}=Yfe(n),_=R(()=>n.store.states.columns.value.findIndex(({type:C})=>C==="default")),b=(C,T)=>{const M=e.props.rowKey;return M?Ts(C,M):T},w=(C,T,M,E=!1)=>{const{tooltipEffect:A,tooltipOptions:I,store:B}=n,{indent:F,columns:U}=B.states,P=f(C,T);let O=!0;return M&&(P.push(t.em("row",`level-${M.level}`)),O=M.display),_t("tr",{style:[O?null:{display:"none"},h(C,T)],class:P,key:b(C,T),onDblclick:L=>i(L,C),onClick:L=>s(L,C),onContextmenu:L=>r(L,C),onMouseenter:()=>o(T),onMouseleave:a},U.value.map((L,H)=>{const{rowspan:X,colspan:ne}=y(C,L,T,H);if(!X||!ne)return null;const ce=Object.assign({},L);ce.realWidth=v(U.value,ne,H);const ae={store:n.store,_self:n.context||e,column:ce,row:C,$index:T,cellIndex:H,expanded:E};H===_.value&&M&&(ae.treeNode={indent:M.level*F.value,level:M.level},typeof M.expanded=="boolean"&&(ae.treeNode.expanded=M.expanded,"loading"in M&&(ae.treeNode.loading=M.loading),"noLazyChildren"in M&&(ae.treeNode.noLazyChildren=M.noLazyChildren)));const _e=`${b(C,T)},${H}`,re=ce.columnKey||ce.rawColumnKey||"",xe=x(H,L,ae),he=L.showOverflowTooltip&&kK({effect:A},I,L.showOverflowTooltip);return _t("td",{style:m(T,H,C,L),class:p(T,H,C,L,ne-1),key:`${re}${_e}`,rowspan:X,colspan:ne,onMouseenter:Te=>l(Te,C,he),onMouseleave:c},[xe])}))},x=(C,T,M)=>T.renderCell(M);return{wrappedRowRender:(C,T)=>{const M=n.store,{isRowExpanded:E,assertRowKey:A}=M,{treeData:I,lazyTreeNodeMap:B,childrenColumnName:F,rowKey:U}=M.states,P=M.states.columns.value;if(P.some(({type:D})=>D==="expand")){const D=E(C),L=w(C,T,void 0,D),H=e.renderExpanded;return D?H?[[L,_t("tr",{key:`expanded-row__${L.key}`},[_t("td",{colspan:P.length,class:`${t.e("cell")} ${t.e("expanded-cell")}`},[H({row:C,$index:T,store:M,expanded:D})])])]]:(console.error("[Element Error]renderExpanded is required."),L):[[L]]}else if(Object.keys(I.value).length){A();const D=Ts(C,U.value);let L=I.value[D],H=null;L&&(H={expanded:L.expanded,level:L.level,display:!0},typeof L.lazy=="boolean"&&(typeof L.loaded=="boolean"&&L.loaded&&(H.noLazyChildren=!(L.children&&L.children.length)),H.loading=L.loading));const X=[w(C,T,H)];if(L){let ne=0;const ce=(_e,re)=>{_e&&_e.length&&re&&_e.forEach(xe=>{const he={display:re.display&&re.expanded,level:re.level+1,expanded:!1,noLazyChildren:!1,loading:!1},Te=Ts(xe,U.value);if(Te==null)throw new Error("For nested data item, row-key is required.");if(L={...I.value[Te]},L&&(he.expanded=L.expanded,L.level=L.level||he.level,L.display=!!(L.expanded&&he.display),typeof L.lazy=="boolean"&&(typeof L.loaded=="boolean"&&L.loaded&&(he.noLazyChildren=!(L.children&&L.children.length)),he.loading=L.loading)),ne++,X.push(w(xe,T+ne,he)),L){const Ce=B.value[Te]||xe[F.value];ce(Ce,L)}})};L.display=!0;const ae=B.value[D]||C[F.value];ce(ae,L)}return X}else return w(C,T,void 0)},tooltipContent:u,tooltipTrigger:d}}const jfe={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,tooltipOptions:{type:Object},context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var qfe=se({name:"ElTableBody",props:jfe,setup(n){const e=zt(),t=ct(ja),i=Ve("table"),{wrappedRowRender:s,tooltipContent:r,tooltipTrigger:o}=Xfe(n),{onColumnsChange:a,onScrollableChange:l}=LB(t),c=[];return ze(n.store.states.hoverRow,(u,d)=>{var h;const f=e==null?void 0:e.vnode.el,m=Array.from((f==null?void 0:f.children)||[]).filter(v=>v==null?void 0:v.classList.contains(`${i.e("row")}`));let p=u;const y=(h=m[p])==null?void 0:h.childNodes;if(y!=null&&y.length){let v=0;Array.from(y).reduce((b,w,x)=>{var S,C;return((S=y[x])==null?void 0:S.colSpan)>1&&(v=(C=y[x])==null?void 0:C.colSpan),w.nodeName!=="TD"&&v===0&&b.push(x),v>0&&v--,b},[]).forEach(b=>{var w;for(p=u;p>0;){const x=(w=m[p-1])==null?void 0:w.childNodes;if(x[b]&&x[b].nodeName==="TD"&&x[b].rowSpan>1){xo(x[b],"hover-cell"),c.push(x[b]);break}p--}})}else c.forEach(v=>Xs(v,"hover-cell")),c.length=0;!n.store.states.isComplex.value||!Jt||Qc(()=>{const v=m[d],_=m[u];v&&!v.classList.contains("hover-fixed-row")&&Xs(v,"hover-row"),_&&xo(_,"hover-row")})}),fu(()=>{var u;(u=co)==null||u()}),{ns:i,onColumnsChange:a,onScrollableChange:l,wrappedRowRender:s,tooltipContent:r,tooltipTrigger:o}},render(){const{wrappedRowRender:n,store:e}=this,t=e.states.data.value||[];return _t("tbody",{tabIndex:-1},[t.reduce((i,s)=>i.concat(n(s,i.length)),[])])}});function Zfe(){const n=ct(ja),e=n==null?void 0:n.store,t=R(()=>e.states.fixedLeafColumnsLength.value),i=R(()=>e.states.rightFixedColumns.value.length),s=R(()=>e.states.columns.value.length),r=R(()=>e.states.fixedColumns.value.length),o=R(()=>e.states.rightFixedColumns.value.length);return{leftFixedLeafCount:t,rightFixedLeafCount:i,columnsCount:s,leftFixedCount:r,rightFixedCount:o,columns:e.states.columns}}function Jfe(n){const{columns:e}=Zfe(),t=Ve("table");return{getCellClasses:(r,o)=>{const a=r[o],l=[t.e("cell"),a.id,a.align,a.labelClassName,...YT(t.b(),o,a.fixed,n.store)];return a.className&&l.push(a.className),a.children||l.push(t.is("leaf")),l},getCellStyles:(r,o)=>{const a=XT(o,r.fixed,n.store);return ap(a,"left"),ap(a,"right"),a},columns:e}}var Qfe=se({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(n){const{getCellClasses:e,getCellStyles:t,columns:i}=Jfe(n);return{ns:Ve("table"),getCellClasses:e,getCellStyles:t,columns:i}},render(){const{columns:n,getCellStyles:e,getCellClasses:t,summaryMethod:i,sumText:s}=this,r=this.store.states.data.value;let o=[];return i?o=i({columns:n,data:r}):n.forEach((a,l)=>{if(l===0){o[l]=s;return}const c=r.map(f=>Number(f[a.property])),u=[];let d=!0;c.forEach(f=>{if(!Number.isNaN(+f)){d=!1;const m=`${f}`.split(".")[1];u.push(m?m.length:0)}});const h=Math.max.apply(null,u);d?o[l]="":o[l]=c.reduce((f,m)=>{const p=Number(m);return Number.isNaN(+p)?f:Number.parseFloat((f+m).toFixed(Math.min(h,20)))},0)}),_t(_t("tfoot",[_t("tr",{},[...n.map((a,l)=>_t("td",{key:l,colspan:a.colSpan,rowspan:a.rowSpan,class:t(n,l),style:e(a,l)},[_t("div",{class:["cell",a.labelClassName]},[o[l]])]))])]))}});function epe(n){return{setCurrentRow:u=>{n.commit("setCurrentRow",u)},getSelectionRows:()=>n.getSelectionRows(),toggleRowSelection:(u,d)=>{n.toggleRowSelection(u,d,!1),n.updateAllSelected()},clearSelection:()=>{n.clearSelection()},clearFilter:u=>{n.clearFilter(u)},toggleAllSelection:()=>{n.commit("toggleAllSelection")},toggleRowExpansion:(u,d)=>{n.toggleRowExpansionAdapter(u,d)},clearSort:()=>{n.clearSort()},sort:(u,d)=>{n.commit("sort",{prop:u,order:d})}}}function tpe(n,e,t,i){const s=V(!1),r=V(null),o=V(!1),a=L=>{o.value=L},l=V({width:null,height:null,headerHeight:null}),c=V(!1),u={display:"inline-block",verticalAlign:"middle"},d=V(),h=V(0),f=V(0),m=V(0),p=V(0),y=V(0);Is(()=>{e.setHeight(n.height)}),Is(()=>{e.setMaxHeight(n.maxHeight)}),ze(()=>[n.currentRowKey,t.states.rowKey],([L,H])=>{!g(H)||!g(L)||t.setCurrentRowKey(`${L}`)},{immediate:!0}),ze(()=>n.data,L=>{i.store.commit("setData",L)},{immediate:!0,deep:!0}),Is(()=>{n.expandRowKeys&&t.setExpandRowKeysAdapter(n.expandRowKeys)});const v=()=>{i.store.commit("setHoverRow",null),i.hoverState&&(i.hoverState=null)},_=(L,H)=>{const{pixelX:X,pixelY:ne}=H;Math.abs(X)>=Math.abs(ne)&&(i.refs.bodyWrapper.scrollLeft+=H.pixelX/5)},b=R(()=>n.height||n.maxHeight||t.states.fixedColumns.value.length>0||t.states.rightFixedColumns.value.length>0),w=R(()=>({width:e.bodyWidth.value?`${e.bodyWidth.value}px`:""})),x=()=>{b.value&&e.updateElsHeight(),e.updateColumnsWidth(),requestAnimationFrame(M)};Ft(async()=>{await vt(),t.updateColumns(),E(),requestAnimationFrame(x);const L=i.vnode.el,H=i.refs.headerWrapper;n.flexible&&L&&L.parentElement&&(L.parentElement.style.minWidth="0"),l.value={width:d.value=L.offsetWidth,height:L.offsetHeight,headerHeight:n.showHeader&&H?H.offsetHeight:null},t.states.columns.value.forEach(X=>{X.filteredValue&&X.filteredValue.length&&i.store.commit("filterChange",{column:X,values:X.filteredValue,silent:!0})}),i.$ready=!0});const S=(L,H)=>{if(!L)return;const X=Array.from(L.classList).filter(ne=>!ne.startsWith("is-scrolling-"));X.push(e.scrollX.value?H:"is-scrolling-none"),L.className=X.join(" ")},C=L=>{const{tableWrapper:H}=i.refs;S(H,L)},T=L=>{const{tableWrapper:H}=i.refs;return!!(H&&H.classList.contains(L))},M=function(){if(!i.refs.scrollBarRef)return;if(!e.scrollX.value){const re="is-scrolling-none";T(re)||C(re);return}const L=i.refs.scrollBarRef.wrapRef;if(!L)return;const{scrollLeft:H,offsetWidth:X,scrollWidth:ne}=L,{headerWrapper:ce,footerWrapper:ae}=i.refs;ce&&(ce.scrollLeft=H),ae&&(ae.scrollLeft=H);const _e=ne-X-1;H>=_e?C("is-scrolling-right"):C(H===0?"is-scrolling-left":"is-scrolling-middle")},E=()=>{i.refs.scrollBarRef&&(i.refs.scrollBarRef.wrapRef&&Dn(i.refs.scrollBarRef.wrapRef,"scroll",M,{passive:!0}),n.fit?ti(i.vnode.el,A):Dn(window,"resize",A),ti(i.refs.bodyWrapper,()=>{var L,H;A(),(H=(L=i.refs)==null?void 0:L.scrollBarRef)==null||H.update()}))},A=()=>{var L,H,X,ne;const ce=i.vnode.el;if(!i.$ready||!ce)return;let ae=!1;const{width:_e,height:re,headerHeight:xe}=l.value,he=d.value=ce.offsetWidth;_e!==he&&(ae=!0);const Te=ce.offsetHeight;(n.height||b.value)&&re!==Te&&(ae=!0);const Ce=n.tableLayout==="fixed"?i.refs.headerWrapper:(L=i.refs.tableHeaderRef)==null?void 0:L.$el;n.showHeader&&(Ce==null?void 0:Ce.offsetHeight)!==xe&&(ae=!0),h.value=((H=i.refs.tableWrapper)==null?void 0:H.scrollHeight)||0,m.value=(Ce==null?void 0:Ce.scrollHeight)||0,p.value=((X=i.refs.footerWrapper)==null?void 0:X.offsetHeight)||0,y.value=((ne=i.refs.appendWrapper)==null?void 0:ne.offsetHeight)||0,f.value=h.value-m.value-p.value-y.value,ae&&(l.value={width:he,height:Te,headerHeight:n.showHeader&&(Ce==null?void 0:Ce.offsetHeight)||0},x())},I=Hi(),B=R(()=>{const{bodyWidth:L,scrollY:H,gutterWidth:X}=e;return L.value?`${L.value-(H.value?X:0)}px`:""}),F=R(()=>n.maxHeight?"fixed":n.tableLayout),U=R(()=>{if(n.data&&n.data.length)return null;let L="100%";n.height&&f.value&&(L=`${f.value}px`);const H=d.value;return{width:H?`${H}px`:"",height:L}}),P=R(()=>n.height?{height:Number.isNaN(Number(n.height))?n.height:`${n.height}px`}:n.maxHeight?{maxHeight:Number.isNaN(Number(n.maxHeight))?n.maxHeight:`${n.maxHeight}px`}:{}),O=R(()=>n.height?{height:"100%"}:n.maxHeight?Number.isNaN(Number(n.maxHeight))?{maxHeight:`calc(${n.maxHeight} - ${m.value+p.value}px)`}:{maxHeight:`${n.maxHeight-m.value-p.value}px`}:{});return{isHidden:s,renderExpanded:r,setDragVisible:a,isGroup:c,handleMouseLeave:v,handleHeaderFooterMousewheel:_,tableSize:I,emptyBlockStyle:U,handleFixedMousewheel:(L,H)=>{const X=i.refs.bodyWrapper;if(Math.abs(H.spinY)>0){const ne=X.scrollTop;H.pixelY<0&&ne!==0&&L.preventDefault(),H.pixelY>0&&X.scrollHeight-X.clientHeight>ne&&L.preventDefault(),X.scrollTop+=Math.ceil(H.pixelY/5)}else X.scrollLeft+=Math.ceil(H.pixelX/5)},resizeProxyVisible:o,bodyWidth:B,resizeState:l,doLayout:x,tableBodyStyles:w,tableLayout:F,scrollbarViewStyle:u,tableInnerStyle:P,scrollbarStyle:O}}function npe(n){const e=V(),t=()=>{const s=n.vnode.el.querySelector(".hidden-columns"),r={childList:!0,subtree:!0},o=n.store.states.updateOrderFns;e.value=new MutationObserver(()=>{o.forEach(a=>a())}),e.value.observe(s,r)};Ft(()=>{t()}),fu(()=>{var i;(i=e.value)==null||i.disconnect()})}var ipe={data:{type:Array,default:()=>[]},size:Zi,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children"})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:Boolean,flexible:Boolean,showOverflowTooltip:[Boolean,Object]};function DB(n){const e=n.tableLayout==="auto";let t=n.columns||[];e&&t.every(s=>s.width===void 0)&&(t=[]);const i=s=>{const r={key:`${n.tableLayout}_${s.id}`,style:{},name:void 0};return e?r.style={width:`${s.width}px`}:r.name=s.id,r};return _t("colgroup",{},t.map(s=>_t("col",i(s))))}DB.props=["columns","tableLayout"];const spe=()=>{const n=V(),e=(r,o)=>{const a=n.value;a&&a.scrollTo(r,o)},t=(r,o)=>{const a=n.value;a&&Ct(o)&&["Top","Left"].includes(r)&&a[`setScroll${r}`](o)};return{scrollBarRef:n,scrollTo:e,setScrollTop:r=>t("Top",r),setScrollLeft:r=>t("Left",r)}};let rpe=1;const ope=se({name:"ElTable",directives:{Mousewheel:Wee},components:{TableHeader:Wfe,TableBody:qfe,TableFooter:Qfe,ElScrollbar:Zl,hColgroup:DB},props:ipe,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change"],setup(n){const{t:e}=en(),t=Ve("table"),i=zt();Xt(ja,i);const s=Lfe(i,n);i.store=s;const r=new Ofe({store:i.store,table:i,fit:n.fit,showHeader:n.showHeader});i.layout=r;const o=R(()=>(s.states.data.value||[]).length===0),{setCurrentRow:a,getSelectionRows:l,toggleRowSelection:c,clearSelection:u,clearFilter:d,toggleAllSelection:h,toggleRowExpansion:f,clearSort:m,sort:p}=epe(s),{isHidden:y,renderExpanded:v,setDragVisible:_,isGroup:b,handleMouseLeave:w,handleHeaderFooterMousewheel:x,tableSize:S,emptyBlockStyle:C,handleFixedMousewheel:T,resizeProxyVisible:M,bodyWidth:E,resizeState:A,doLayout:I,tableBodyStyles:B,tableLayout:F,scrollbarViewStyle:U,tableInnerStyle:P,scrollbarStyle:O}=tpe(n,r,s,i),{scrollBarRef:D,scrollTo:L,setScrollLeft:H,setScrollTop:X}=spe(),ne=Lr(I,50),ce=`${t.namespace.value}-table_${rpe++}`;i.tableId=ce,i.state={isGroup:b,resizeState:A,doLayout:I,debouncedUpdateLayout:ne};const ae=R(()=>n.sumText||e("el.table.sumText")),_e=R(()=>n.emptyText||e("el.table.emptyText")),re=R(()=>OB(s.states.originColumns.value)[0]);return npe(i),{ns:t,layout:r,store:s,columns:re,handleHeaderFooterMousewheel:x,handleMouseLeave:w,tableId:ce,tableSize:S,isHidden:y,isEmpty:o,renderExpanded:v,resizeProxyVisible:M,resizeState:A,isGroup:b,bodyWidth:E,tableBodyStyles:B,emptyBlockStyle:C,debouncedUpdateLayout:ne,handleFixedMousewheel:T,setCurrentRow:a,getSelectionRows:l,toggleRowSelection:c,clearSelection:u,clearFilter:d,toggleAllSelection:h,toggleRowExpansion:f,clearSort:m,doLayout:I,sort:p,t:e,setDragVisible:_,context:i,computedSumText:ae,computedEmptyText:_e,tableLayout:F,scrollbarViewStyle:U,tableInnerStyle:P,scrollbarStyle:O,scrollBarRef:D,scrollTo:L,setScrollLeft:H,setScrollTop:X}}}),ape=["data-prefix"],lpe={ref:"hiddenColumns",class:"hidden-columns"};function cpe(n,e,t,i,s,r){const o=Ut("hColgroup"),a=Ut("table-header"),l=Ut("table-body"),c=Ut("table-footer"),u=Ut("el-scrollbar"),d=y1("mousewheel");return k(),Y("div",{ref:"tableWrapper",class:z([{[n.ns.m("fit")]:n.fit,[n.ns.m("striped")]:n.stripe,[n.ns.m("border")]:n.border||n.isGroup,[n.ns.m("hidden")]:n.isHidden,[n.ns.m("group")]:n.isGroup,[n.ns.m("fluid-height")]:n.maxHeight,[n.ns.m("scrollable-x")]:n.layout.scrollX.value,[n.ns.m("scrollable-y")]:n.layout.scrollY.value,[n.ns.m("enable-row-hover")]:!n.store.states.isComplex.value,[n.ns.m("enable-row-transition")]:(n.store.states.data.value||[]).length!==0&&(n.store.states.data.value||[]).length<100,"has-footer":n.showSummary},n.ns.m(n.tableSize),n.className,n.ns.b(),n.ns.m(`layout-${n.tableLayout}`)]),style:pt(n.style),"data-prefix":n.ns.namespace.value,onMouseleave:e[0]||(e[0]=(...h)=>n.handleMouseLeave&&n.handleMouseLeave(...h))},[te("div",{class:z(n.ns.e("inner-wrapper")),style:pt(n.tableInnerStyle)},[te("div",lpe,[ke(n.$slots,"default")],512),n.showHeader&&n.tableLayout==="fixed"?Bt((k(),Y("div",{key:0,ref:"headerWrapper",class:z(n.ns.e("header-wrapper"))},[te("table",{ref:"tableHeader",class:z(n.ns.e("header")),style:pt(n.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[le(o,{columns:n.store.states.columns.value,"table-layout":n.tableLayout},null,8,["columns","table-layout"]),le(a,{ref:"tableHeaderRef",border:n.border,"default-sort":n.defaultSort,store:n.store,onSetDragVisible:n.setDragVisible},null,8,["border","default-sort","store","onSetDragVisible"])],6)],2)),[[d,n.handleHeaderFooterMousewheel]]):Ee("v-if",!0),te("div",{ref:"bodyWrapper",class:z(n.ns.e("body-wrapper"))},[le(u,{ref:"scrollBarRef","view-style":n.scrollbarViewStyle,"wrap-style":n.scrollbarStyle,always:n.scrollbarAlwaysOn},{default:pe(()=>[te("table",{ref:"tableBody",class:z(n.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:pt({width:n.bodyWidth,tableLayout:n.tableLayout})},[le(o,{columns:n.store.states.columns.value,"table-layout":n.tableLayout},null,8,["columns","table-layout"]),n.showHeader&&n.tableLayout==="auto"?(k(),Re(a,{key:0,ref:"tableHeaderRef",class:z(n.ns.e("body-header")),border:n.border,"default-sort":n.defaultSort,store:n.store,onSetDragVisible:n.setDragVisible},null,8,["class","border","default-sort","store","onSetDragVisible"])):Ee("v-if",!0),le(l,{context:n.context,highlight:n.highlightCurrentRow,"row-class-name":n.rowClassName,"tooltip-effect":n.tooltipEffect,"tooltip-options":n.tooltipOptions,"row-style":n.rowStyle,store:n.store,stripe:n.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"]),n.showSummary&&n.tableLayout==="auto"?(k(),Re(c,{key:1,class:z(n.ns.e("body-footer")),border:n.border,"default-sort":n.defaultSort,store:n.store,"sum-text":n.computedSumText,"summary-method":n.summaryMethod},null,8,["class","border","default-sort","store","sum-text","summary-method"])):Ee("v-if",!0)],6),n.isEmpty?(k(),Y("div",{key:0,ref:"emptyBlock",style:pt(n.emptyBlockStyle),class:z(n.ns.e("empty-block"))},[te("span",{class:z(n.ns.e("empty-text"))},[ke(n.$slots,"empty",{},()=>[Yt(Je(n.computedEmptyText),1)])],2)],6)):Ee("v-if",!0),n.$slots.append?(k(),Y("div",{key:1,ref:"appendWrapper",class:z(n.ns.e("append-wrapper"))},[ke(n.$slots,"append")],2)):Ee("v-if",!0)]),_:3},8,["view-style","wrap-style","always"])],2),n.showSummary&&n.tableLayout==="fixed"?Bt((k(),Y("div",{key:1,ref:"footerWrapper",class:z(n.ns.e("footer-wrapper"))},[te("table",{class:z(n.ns.e("footer")),cellspacing:"0",cellpadding:"0",border:"0",style:pt(n.tableBodyStyles)},[le(o,{columns:n.store.states.columns.value,"table-layout":n.tableLayout},null,8,["columns","table-layout"]),le(c,{border:n.border,"default-sort":n.defaultSort,store:n.store,"sum-text":n.computedSumText,"summary-method":n.summaryMethod},null,8,["border","default-sort","store","sum-text","summary-method"])],6)],2)),[[an,!n.isEmpty],[d,n.handleHeaderFooterMousewheel]]):Ee("v-if",!0),n.border||n.isGroup?(k(),Y("div",{key:2,class:z(n.ns.e("border-left-patch"))},null,2)):Ee("v-if",!0)],6),Bt(te("div",{ref:"resizeProxy",class:z(n.ns.e("column-resize-proxy"))},null,2),[[an,n.resizeProxyVisible]])],46,ape)}var upe=Ze(ope,[["render",cpe],["__file","table.vue"]]);const dpe={selection:"table-column--selection",expand:"table__expand-column"},hpe={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},fpe=n=>dpe[n]||"",ppe={selection:{renderHeader({store:n,column:e}){function t(){return n.states.data.value&&n.states.data.value.length===0}return _t(Do,{disabled:t(),size:n.states.tableSize.value,indeterminate:n.states.selection.value.length>0&&!n.states.isAllSelected.value,"onUpdate:modelValue":n.toggleAllSelection,modelValue:n.states.isAllSelected.value,ariaLabel:e.label})},renderCell({row:n,column:e,store:t,$index:i}){return _t(Do,{disabled:e.selectable?!e.selectable.call(null,n,i):!1,size:t.states.tableSize.value,onChange:()=>{t.commit("rowSelectedChanged",n)},onClick:s=>s.stopPropagation(),modelValue:t.isSelected(n),ariaLabel:e.label})},sortable:!1,resizable:!1},index:{renderHeader({column:n}){return n.label||"#"},renderCell({column:n,$index:e}){let t=e+1;const i=n.index;return typeof i=="number"?t=e+i:typeof i=="function"&&(t=i(e)),_t("div",{},[t])},sortable:!1},expand:{renderHeader({column:n}){return n.label||""},renderCell({row:n,store:e,expanded:t}){const{ns:i}=e,s=[i.e("expand-icon")];return t&&s.push(i.em("expand-icon","expanded")),_t("div",{class:s,onClick:function(o){o.stopPropagation(),e.toggleRowExpansion(n)}},{default:()=>[_t(dt,null,{default:()=>[_t(ur)]})]})},sortable:!1,resizable:!1}};function mpe({row:n,column:e,$index:t}){var i;const s=e.property,r=s&&t_(n,s).value;return e&&e.formatter?e.formatter(n,e,r,t):((i=r==null?void 0:r.toString)==null?void 0:i.call(r))||""}function gpe({row:n,treeNode:e,store:t},i=!1){const{ns:s}=t;if(!e)return i?[_t("span",{class:s.e("placeholder")})]:null;const r=[],o=function(a){a.stopPropagation(),!e.loading&&t.loadOrToggle(n)};if(e.indent&&r.push(_t("span",{class:s.e("indent"),style:{"padding-left":`${e.indent}px`}})),typeof e.expanded=="boolean"&&!e.noLazyChildren){const a=[s.e("expand-icon"),e.expanded?s.em("expand-icon","expanded"):""];let l=ur;e.loading&&(l=Ha),r.push(_t("div",{class:a,onClick:o},{default:()=>[_t(dt,{class:{[s.is("loading")]:e.loading}},{default:()=>[_t(l)]})]}))}else r.push(_t("span",{class:s.e("placeholder")}));return r}function BP(n,e){return n.reduce((t,i)=>(t[i]=i,t),e)}function vpe(n,e){const t=zt();return{registerComplexWatchers:()=>{const r=["fixed"],o={realWidth:"width",realMinWidth:"minWidth"},a=BP(r,o);Object.keys(a).forEach(l=>{const c=o[l];Qt(e,c)&&ze(()=>e[c],u=>{let d=u;c==="width"&&l==="realWidth"&&(d=KT(u)),c==="minWidth"&&l==="realMinWidth"&&(d=TB(u)),t.columnConfig.value[c]=d,t.columnConfig.value[l]=d;const h=c==="fixed";n.value.store.scheduleLayout(h)})})},registerNormalWatchers:()=>{const r=["label","filters","filterMultiple","filteredValue","sortable","index","formatter","className","labelClassName","filterClassName","showOverflowTooltip"],o={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},a=BP(r,o);Object.keys(a).forEach(l=>{const c=o[l];Qt(e,c)&&ze(()=>e[c],u=>{t.columnConfig.value[l]=u})})}}}function ype(n,e,t){const i=zt(),s=V(""),r=V(!1),o=V(),a=V(),l=Ve("table");Is(()=>{o.value=n.align?`is-${n.align}`:null,o.value}),Is(()=>{a.value=n.headerAlign?`is-${n.headerAlign}`:o.value,a.value});const c=R(()=>{let w=i.vnode.vParent||i.parent;for(;w&&!w.tableId&&!w.columnId;)w=w.vnode.vParent||w.parent;return w}),u=R(()=>{const{store:w}=i.parent;if(!w)return!1;const{treeData:x}=w.states,S=x.value;return S&&Object.keys(S).length>0}),d=V(KT(n.width)),h=V(TB(n.minWidth)),f=w=>(d.value&&(w.width=d.value),h.value&&(w.minWidth=h.value),!d.value&&h.value&&(w.width=void 0),w.minWidth||(w.minWidth=80),w.realWidth=Number(w.width===void 0?w.minWidth:w.width),w),m=w=>{const x=w.type,S=ppe[x]||{};Object.keys(S).forEach(T=>{const M=S[T];T!=="className"&&M!==void 0&&(w[T]=M)});const C=fpe(x);if(C){const T=`${g(l.namespace)}-${C}`;w.className=w.className?`${w.className} ${T}`:T}return w},p=w=>{Array.isArray(w)?w.forEach(S=>x(S)):x(w);function x(S){var C;((C=S==null?void 0:S.type)==null?void 0:C.name)==="ElTableColumn"&&(S.vParent=i)}};return{columnId:s,realAlign:o,isSubColumn:r,realHeaderAlign:a,columnOrTableParent:c,setColumnWidth:f,setColumnForcedProps:m,setColumnRenders:w=>{n.renderHeader||w.type!=="selection"&&(w.renderHeader=S=>(i.columnConfig.value.label,ke(e,"header",S,()=>[w.label]))),e["filter-icon"]&&(w.renderFilterIcon=S=>ke(e,"filter-icon",S));let x=w.renderCell;return w.type==="expand"?(w.renderCell=S=>_t("div",{class:"cell"},[x(S)]),t.value.renderExpanded=S=>e.default?e.default(S):e.default):(x=x||mpe,w.renderCell=S=>{let C=null;if(e.default){const B=e.default(S);C=B.some(F=>F.type!==Es)?B:x(S)}else C=x(S);const{columns:T}=t.value.store.states,M=T.value.findIndex(B=>B.type==="default"),E=u.value&&S.cellIndex===M,A=gpe(S,E),I={class:"cell",style:{}};return w.showOverflowTooltip&&(I.class=`${I.class} ${g(l.namespace)}-tooltip`,I.style={width:`${(S.column.realWidth||Number(S.column.width))-1}px`}),p(C),_t("div",I,[A,C])}),w},getPropsData:(...w)=>w.reduce((x,S)=>(Array.isArray(S)&&S.forEach(C=>{x[C]=n[C]}),x),{}),getColumnElIndex:(w,x)=>Array.prototype.indexOf.call(w,x),updateColumnOrder:()=>{t.value.store.commit("updateColumnOrder",i.columnConfig.value)}}}var _pe={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:{type:[Boolean,Object],default:void 0},fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},filterClassName:String,index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:n=>n.every(e=>["ascending","descending",null].includes(e))}};let bpe=1;var NB=se({name:"ElTableColumn",components:{ElCheckbox:Do},props:_pe,setup(n,{slots:e}){const t=zt(),i=V({}),s=R(()=>{let b=t.parent;for(;b&&!b.tableId;)b=b.parent;return b}),{registerNormalWatchers:r,registerComplexWatchers:o}=vpe(s,n),{columnId:a,isSubColumn:l,realHeaderAlign:c,columnOrTableParent:u,setColumnWidth:d,setColumnForcedProps:h,setColumnRenders:f,getPropsData:m,getColumnElIndex:p,realAlign:y,updateColumnOrder:v}=ype(n,e,s),_=u.value;a.value=`${_.tableId||_.columnId}_column_${bpe++}`,v1(()=>{l.value=s.value!==_;const b=n.type||"default",w=n.sortable===""?!0:n.sortable,x=ki(n.showOverflowTooltip)?_.props.showOverflowTooltip:n.showOverflowTooltip,S={...hpe[b],id:a.value,type:b,property:n.prop||n.property,align:y,headerAlign:c,showOverflowTooltip:x,filterable:n.filters||n.filterMethod,filteredValue:[],filterPlacement:"",filterClassName:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:w,index:n.index,rawColumnKey:t.vnode.key};let A=m(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement","filterClassName"]);A=wfe(S,A),A=Sfe(f,d,h)(A),i.value=A,r(),o()}),Ft(()=>{var b;const w=u.value,x=l.value?w.vnode.el.children:(b=w.refs.hiddenColumns)==null?void 0:b.children,S=()=>p(x||[],t.vnode.el);i.value.getColumnIndex=S,S()>-1&&s.value.store.commit("insertColumn",i.value,l.value?w.columnConfig.value:null,v)}),kn(()=>{i.value.getColumnIndex()>-1&&s.value.store.commit("removeColumn",i.value,l.value?_.columnConfig.value:null,v)}),t.columnId=a.value,t.columnConfig=i},render(){var n,e,t;try{const i=(e=(n=this.$slots).default)==null?void 0:e.call(n,{row:{},column:{},$index:-1}),s=[];if(Array.isArray(i))for(const o of i)((t=o.type)==null?void 0:t.name)==="ElTableColumn"||o.shapeFlag&2?s.push(o):o.type===mt&&Array.isArray(o.children)&&o.children.forEach(a=>{(a==null?void 0:a.patchFlag)!==1024&&!Rt(a==null?void 0:a.children)&&s.push(a)});return _t("div",s)}catch{return _t("div",[])}}});const wpe=Ht(upe,{TableColumn:NB}),xpe=si(NB);var zg=(n=>(n.ASC="asc",n.DESC="desc",n))(zg||{}),Hg=(n=>(n.CENTER="center",n.RIGHT="right",n))(Hg||{}),FB=(n=>(n.LEFT="left",n.RIGHT="right",n))(FB||{});const tM={asc:"desc",desc:"asc"},Vg=Symbol("placeholder"),Spe=(n,e,t)=>{var i;const s={flexGrow:0,flexShrink:0,...t?{}:{flexGrow:n.flexGrow||0,flexShrink:n.flexShrink||1}};t||(s.flexShrink=1);const r={...(i=n.style)!=null?i:{},...s,flexBasis:"auto",width:n.width};return e||(n.maxWidth&&(r.maxWidth=n.maxWidth),n.minWidth&&(r.minWidth=n.minWidth)),r};function Cpe(n,e,t){const i=R(()=>g(e).filter(p=>!p.hidden)),s=R(()=>g(i).filter(p=>p.fixed==="left"||p.fixed===!0)),r=R(()=>g(i).filter(p=>p.fixed==="right")),o=R(()=>g(i).filter(p=>!p.fixed)),a=R(()=>{const p=[];return g(s).forEach(y=>{p.push({...y,placeholderSign:Vg})}),g(o).forEach(y=>{p.push(y)}),g(r).forEach(y=>{p.push({...y,placeholderSign:Vg})}),p}),l=R(()=>g(s).length||g(r).length),c=R(()=>g(e).reduce((y,v)=>(y[v.key]=Spe(v,g(t),n.fixed),y),{})),u=R(()=>g(i).reduce((p,y)=>p+y.width,0)),d=p=>g(e).find(y=>y.key===p),h=p=>g(c)[p],f=(p,y)=>{p.width=y};function m(p){var y;const{key:v}=p.currentTarget.dataset;if(!v)return;const{sortState:_,sortBy:b}=n;let w=zg.ASC;$t(_)?w=tM[_[v]]:w=tM[b.order],(y=n.onColumnSort)==null||y.call(n,{column:d(v),key:v,order:w})}return{columns:e,columnsStyles:c,columnsTotalWidth:u,fixedColumnsOnLeft:s,fixedColumnsOnRight:r,hasFixedColumns:l,mainColumns:a,normalColumns:o,visibleColumns:i,getColumn:d,getColumnStyle:h,updateColumnWidth:f,onColumnSorted:m}}const Mpe=(n,{mainTableRef:e,leftTableRef:t,rightTableRef:i,onMaybeEndReached:s})=>{const r=V({scrollLeft:0,scrollTop:0});function o(f){var m,p,y;const{scrollTop:v}=f;(m=e.value)==null||m.scrollTo(f),(p=t.value)==null||p.scrollToTop(v),(y=i.value)==null||y.scrollToTop(v)}function a(f){r.value=f,o(f)}function l(f){r.value.scrollTop=f,o(g(r))}function c(f){var m,p;r.value.scrollLeft=f,(p=(m=e.value)==null?void 0:m.scrollTo)==null||p.call(m,g(r))}function u(f){var m;a(f),(m=n.onScroll)==null||m.call(n,f)}function d({scrollTop:f}){const{scrollTop:m}=g(r);f!==m&&l(f)}function h(f,m="auto"){var p;(p=e.value)==null||p.scrollToRow(f,m)}return ze(()=>g(r).scrollTop,(f,m)=>{f>m&&s()}),{scrollPos:r,scrollTo:a,scrollToLeft:c,scrollToTop:l,scrollToRow:h,onScroll:u,onVerticalScroll:d}},Epe=(n,{mainTableRef:e,leftTableRef:t,rightTableRef:i,tableInstance:s,ns:r,isScrolling:o})=>{const a=zt(),{emit:l}=a,c=Vn(!1),u=V(n.defaultExpandedRowKeys||[]),d=V(-1),h=Vn(null),f=V({}),m=V({}),p=Vn({}),y=Vn({}),v=Vn({}),_=R(()=>Ct(n.estimatedRowHeight));function b(E){var A;(A=n.onRowsRendered)==null||A.call(n,E),E.rowCacheEnd>g(d)&&(d.value=E.rowCacheEnd)}function w({hovered:E,rowKey:A}){if(o.value)return;s.vnode.el.querySelectorAll(`[rowkey="${String(A)}"]`).forEach(F=>{E?F.classList.add(r.is("hovered")):F.classList.remove(r.is("hovered"))})}function x({expanded:E,rowData:A,rowIndex:I,rowKey:B}){var F,U;const P=[...g(u)],O=P.indexOf(B);E?O===-1&&P.push(B):O>-1&&P.splice(O,1),u.value=P,l("update:expandedRowKeys",P),(F=n.onRowExpand)==null||F.call(n,{expanded:E,rowData:A,rowIndex:I,rowKey:B}),(U=n.onExpandedRowsChange)==null||U.call(n,P)}const S=Lr(()=>{var E,A,I,B;c.value=!0,f.value={...g(f),...g(m)},C(g(h),!1),m.value={},h.value=null,(E=e.value)==null||E.forceUpdate(),(A=t.value)==null||A.forceUpdate(),(I=i.value)==null||I.forceUpdate(),(B=a.proxy)==null||B.$forceUpdate(),c.value=!1},0);function C(E,A=!1){g(_)&&[e,t,i].forEach(I=>{const B=g(I);B&&B.resetAfterRowIndex(E,A)})}function T(E,A,I){const B=g(h);(B===null||B>I)&&(h.value=I),m.value[E]=A}function M({rowKey:E,height:A,rowIndex:I},B){B?B===FB.RIGHT?v.value[E]=A:p.value[E]=A:y.value[E]=A;const F=Math.max(...[p,v,y].map(U=>U.value[E]||0));g(f)[E]!==F&&(T(E,F,I),S())}return{expandedRowKeys:u,lastRenderedRowIndex:d,isDynamic:_,isResetting:c,rowHeights:f,resetAfterIndex:C,onRowExpanded:x,onRowHovered:w,onRowsRendered:b,onRowHeightChange:M}},Tpe=(n,{expandedRowKeys:e,lastRenderedRowIndex:t,resetAfterIndex:i})=>{const s=V({}),r=R(()=>{const a={},{data:l,rowKey:c}=n,u=g(e);if(!u||!u.length)return l;const d=[],h=new Set;u.forEach(m=>h.add(m));let f=l.slice();for(f.forEach(m=>a[m[c]]=0);f.length>0;){const m=f.shift();d.push(m),h.has(m[c])&&Array.isArray(m.children)&&m.children.length>0&&(f=[...m.children,...f],m.children.forEach(p=>a[p[c]]=a[m[c]]+1))}return s.value=a,d}),o=R(()=>{const{data:a,expandColumnKey:l}=n;return l?g(r):a});return ze(o,(a,l)=>{a!==l&&(t.value=-1,i(0,!0))}),{data:o,depthMap:s}},Ape=(n,e)=>n+e,g_=n=>rt(n)?n.reduce(Ape,0):n,Yd=(n,e,t={})=>xt(n)?n(e):n??t,Nc=n=>(["width","maxWidth","minWidth","height"].forEach(e=>{n[e]=pi(n[e])}),n),BB=n=>Jn(n)?e=>_t(n,e):n,Ipe=(n,{columnsTotalWidth:e,data:t,fixedColumnsOnLeft:i,fixedColumnsOnRight:s})=>{const r=R(()=>{const{fixed:b,width:w,vScrollbarSize:x}=n,S=w-x;return b?Math.max(Math.round(g(e)),S):S}),o=R(()=>g(r)+n.vScrollbarSize),a=R(()=>{const{height:b=0,maxHeight:w=0,footerHeight:x,hScrollbarSize:S}=n;if(w>0){const C=g(m),T=g(l),E=g(f)+C+T+S;return Math.min(E,w-x)}return b-x}),l=R(()=>{const{rowHeight:b,estimatedRowHeight:w}=n,x=g(t);return Ct(w)?x.length*w:x.length*b}),c=R(()=>{const{maxHeight:b}=n,w=g(a);if(Ct(b)&&b>0)return w;const x=g(l)+g(f)+g(m);return Math.min(w,x)}),u=b=>b.width,d=R(()=>g_(g(i).map(u))),h=R(()=>g_(g(s).map(u))),f=R(()=>g_(n.headerHeight)),m=R(()=>{var b;return(((b=n.fixedData)==null?void 0:b.length)||0)*n.rowHeight}),p=R(()=>g(a)-g(f)-g(m)),y=R(()=>{const{style:b={},height:w,width:x}=n;return Nc({...b,height:w,width:x})}),v=R(()=>Nc({height:n.footerHeight})),_=R(()=>({top:pi(g(f)),bottom:pi(n.footerHeight),width:pi(n.width)}));return{bodyWidth:r,fixedTableHeight:c,mainTableHeight:a,leftTableWidth:d,rightTableWidth:h,headerWidth:o,rowsHeight:l,windowHeight:p,footerHeight:v,emptyStyle:_,rootStyle:y,headerHeight:f}},Rpe=n=>{const e=V(),t=V(0),i=V(0);let s;return Ft(()=>{s=ti(e,([r])=>{const{width:o,height:a}=r.contentRect,{paddingLeft:l,paddingRight:c,paddingTop:u,paddingBottom:d}=getComputedStyle(r.target),h=Number.parseInt(l)||0,f=Number.parseInt(c)||0,m=Number.parseInt(u)||0,p=Number.parseInt(d)||0;t.value=o-h-f,i.value=a-m-p}).stop}),kn(()=>{s==null||s()}),ze([t,i],([r,o])=>{var a;(a=n.onResize)==null||a.call(n,{width:r,height:o})}),{sizer:e,width:t,height:i}};function Ppe(n){const e=V(),t=V(),i=V(),{columns:s,columnsStyles:r,columnsTotalWidth:o,fixedColumnsOnLeft:a,fixedColumnsOnRight:l,hasFixedColumns:c,mainColumns:u,onColumnSorted:d}=Cpe(n,vn(n,"columns"),vn(n,"fixed")),{scrollTo:h,scrollToLeft:f,scrollToTop:m,scrollToRow:p,onScroll:y,onVerticalScroll:v,scrollPos:_}=Mpe(n,{mainTableRef:e,leftTableRef:t,rightTableRef:i,onMaybeEndReached:j}),b=Ve("table-v2"),w=zt(),x=Vn(!1),{expandedRowKeys:S,lastRenderedRowIndex:C,isDynamic:T,isResetting:M,rowHeights:E,resetAfterIndex:A,onRowExpanded:I,onRowHeightChange:B,onRowHovered:F,onRowsRendered:U}=Epe(n,{mainTableRef:e,leftTableRef:t,rightTableRef:i,tableInstance:w,ns:b,isScrolling:x}),{data:P,depthMap:O}=Tpe(n,{expandedRowKeys:S,lastRenderedRowIndex:C,resetAfterIndex:A}),{bodyWidth:D,fixedTableHeight:L,mainTableHeight:H,leftTableWidth:X,rightTableWidth:ne,headerWidth:ce,rowsHeight:ae,windowHeight:_e,footerHeight:re,emptyStyle:xe,rootStyle:he,headerHeight:Te}=Ipe(n,{columnsTotalWidth:o,data:P,fixedColumnsOnLeft:a,fixedColumnsOnRight:l}),Ce=V(),we=R(()=>{const ie=g(P).length===0;return rt(n.fixedData)?n.fixedData.length===0&&ie:ie});function K(ie){const{estimatedRowHeight:ve,rowHeight:ye,rowKey:me}=n;return ve?g(E)[g(P)[ie][me]]||ve:ye}function j(){const{onEndReached:ie}=n;if(!ie)return;const{scrollTop:ve}=g(_),ye=g(ae),me=g(_e),be=ye-(ve+me)+n.hScrollbarSize;g(C)>=0&&ye===ve+g(H)-g(Te)&&ie(be)}return ze(()=>n.expandedRowKeys,ie=>S.value=ie,{deep:!0}),{columns:s,containerRef:Ce,mainTableRef:e,leftTableRef:t,rightTableRef:i,isDynamic:T,isResetting:M,isScrolling:x,hasFixedColumns:c,columnsStyles:r,columnsTotalWidth:o,data:P,expandedRowKeys:S,depthMap:O,fixedColumnsOnLeft:a,fixedColumnsOnRight:l,mainColumns:u,bodyWidth:D,emptyStyle:xe,rootStyle:he,headerWidth:ce,footerHeight:re,mainTableHeight:H,fixedTableHeight:L,leftTableWidth:X,rightTableWidth:ne,showEmpty:we,getRowHeight:K,onColumnSorted:d,onRowHovered:F,onRowExpanded:I,onRowsRendered:U,onRowHeightChange:B,scrollTo:h,scrollToLeft:f,scrollToTop:m,scrollToRow:p,onScroll:y,onVerticalScroll:v}}const jT=Symbol("tableV2"),UB=String,Kv={type:ge(Array),required:!0},qT={type:ge(Array)},zB={...qT,required:!0},Lpe=String,UP={type:ge(Array),default:()=>ni([])},Qu={type:Number,required:!0},HB={type:ge([String,Number,Symbol]),default:"id"},zP={type:ge(Object)},ld=Ye({class:String,columns:Kv,columnsStyles:{type:ge(Object),required:!0},depth:Number,expandColumnKey:Lpe,estimatedRowHeight:{...wd.estimatedRowHeight,default:void 0},isScrolling:Boolean,onRowExpand:{type:ge(Function)},onRowHover:{type:ge(Function)},onRowHeightChange:{type:ge(Function)},rowData:{type:ge(Object),required:!0},rowEventHandlers:{type:ge(Object)},rowIndex:{type:Number,required:!0},rowKey:HB,style:{type:ge(Object)}}),_x={type:Number,required:!0},ZT=Ye({class:String,columns:Kv,fixedHeaderData:{type:ge(Array)},headerData:{type:ge(Array),required:!0},headerHeight:{type:ge([Number,Array]),default:50},rowWidth:_x,rowHeight:{type:Number,default:50},height:_x,width:_x}),v_=Ye({columns:Kv,data:zB,fixedData:qT,estimatedRowHeight:ld.estimatedRowHeight,width:Qu,height:Qu,headerWidth:Qu,headerHeight:ZT.headerHeight,bodyWidth:Qu,rowHeight:Qu,cache:lB.cache,useIsScrolling:Boolean,scrollbarAlwaysOn:wd.scrollbarAlwaysOn,scrollbarStartGap:wd.scrollbarStartGap,scrollbarEndGap:wd.scrollbarEndGap,class:UB,style:zP,containerStyle:zP,getRowHeight:{type:ge(Function),required:!0},rowKey:ld.rowKey,onRowsRendered:{type:ge(Function)},onScroll:{type:ge(Function)}}),kpe=Ye({cache:v_.cache,estimatedRowHeight:ld.estimatedRowHeight,rowKey:HB,headerClass:{type:ge([String,Function])},headerProps:{type:ge([Object,Function])},headerCellProps:{type:ge([Object,Function])},headerHeight:ZT.headerHeight,footerHeight:{type:Number,default:0},rowClass:{type:ge([String,Function])},rowProps:{type:ge([Object,Function])},rowHeight:{type:Number,default:50},cellProps:{type:ge([Object,Function])},columns:Kv,data:zB,dataGetter:{type:ge(Function)},fixedData:qT,expandColumnKey:ld.expandColumnKey,expandedRowKeys:UP,defaultExpandedRowKeys:UP,class:UB,fixed:Boolean,style:{type:ge(Object)},width:Qu,height:Qu,maxHeight:Number,useIsScrolling:Boolean,indentSize:{type:Number,default:12},iconSize:{type:Number,default:12},hScrollbarSize:wd.hScrollbarSize,vScrollbarSize:wd.vScrollbarSize,scrollbarAlwaysOn:dB.alwaysOn,sortBy:{type:ge(Object),default:()=>({})},sortState:{type:ge(Object),default:void 0},onColumnSort:{type:ge(Function)},onExpandedRowsChange:{type:ge(Function)},onEndReached:{type:ge(Function)},onRowExpand:ld.onRowExpand,onScroll:v_.onScroll,onRowsRendered:v_.onRowsRendered,rowEventHandlers:ld.rowEventHandlers}),JT=(n,{slots:e})=>{var t;const{cellData:i,style:s}=n,r=((t=i==null?void 0:i.toString)==null?void 0:t.call(i))||"",o=ke(e,"default",n,()=>[r]);return le("div",{class:n.class,title:r,style:s},[o])};JT.displayName="ElTableV2Cell";JT.inheritAttrs=!1;const QT=(n,{slots:e})=>ke(e,"default",n,()=>{var t,i;return[le("div",{class:n.class,title:(t=n.column)==null?void 0:t.title},[(i=n.column)==null?void 0:i.title])]});QT.displayName="ElTableV2HeaderCell";QT.inheritAttrs=!1;const Ope=Ye({class:String,columns:Kv,columnsStyles:{type:ge(Object),required:!0},headerIndex:Number,style:{type:ge(Object)}}),Dpe=se({name:"ElTableV2HeaderRow",props:Ope,setup(n,{slots:e}){return()=>{const{columns:t,columnsStyles:i,headerIndex:s,style:r}=n;let o=t.map((a,l)=>e.cell({columns:t,column:a,columnIndex:l,headerIndex:s,style:i[a.key]}));return e.header&&(o=e.header({cells:o.map(a=>rt(a)&&a.length===1?a[0]:a),columns:t,headerIndex:s})),le("div",{class:n.class,style:r,role:"row"},[o])}}}),Npe="ElTableV2Header",Fpe=se({name:Npe,props:ZT,setup(n,{slots:e,expose:t}){const i=Ve("table-v2"),s=V(),r=R(()=>Nc({width:n.width,height:n.height})),o=R(()=>Nc({width:n.rowWidth,height:n.height})),a=R(()=>Jc(g(n.headerHeight))),l=d=>{const h=g(s);vt(()=>{h!=null&&h.scroll&&h.scroll({left:d})})},c=()=>{const d=i.e("fixed-header-row"),{columns:h,fixedHeaderData:f,rowHeight:m}=n;return f==null?void 0:f.map((p,y)=>{var v;const _=Nc({height:m,width:"100%"});return(v=e.fixed)==null?void 0:v.call(e,{class:d,columns:h,rowData:p,rowIndex:-(y+1),style:_})})},u=()=>{const d=i.e("dynamic-header-row"),{columns:h}=n;return g(a).map((f,m)=>{var p;const y=Nc({width:"100%",height:f});return(p=e.dynamic)==null?void 0:p.call(e,{class:d,columns:h,headerIndex:m,style:y})})};return t({scrollToLeft:l}),()=>{if(!(n.height<=0))return le("div",{ref:s,class:n.class,style:g(r),role:"rowgroup"},[le("div",{style:g(o),class:i.e("header")},[u(),c()])])}}}),Bpe=n=>{const{isScrolling:e}=ct(jT),t=V(!1),i=V(),s=R(()=>Ct(n.estimatedRowHeight)&&n.rowIndex>=0),r=(l=!1)=>{const c=g(i);if(!c)return;const{columns:u,onRowHeightChange:d,rowKey:h,rowIndex:f,style:m}=n,{height:p}=c.getBoundingClientRect();t.value=!0,vt(()=>{if(l||p!==Number.parseInt(m.height)){const y=u[0],v=(y==null?void 0:y.placeholderSign)===Vg;d==null||d({rowKey:h,height:p,rowIndex:f},y&&!v&&y.fixed)}})},o=R(()=>{const{rowData:l,rowIndex:c,rowKey:u,onRowHover:d}=n,h=n.rowEventHandlers||{},f={};return Object.entries(h).forEach(([m,p])=>{xt(p)&&(f[m]=y=>{p({event:y,rowData:l,rowIndex:c,rowKey:u})})}),d&&[{name:"onMouseleave",hovered:!1},{name:"onMouseenter",hovered:!0}].forEach(({name:m,hovered:p})=>{const y=f[m];f[m]=v=>{d({event:v,hovered:p,rowData:l,rowIndex:c,rowKey:u}),y==null||y(v)}}),f}),a=l=>{const{onRowExpand:c,rowData:u,rowIndex:d,rowKey:h}=n;c==null||c({expanded:l,rowData:u,rowIndex:d,rowKey:h})};return Ft(()=>{g(s)&&r(!0)}),{isScrolling:e,measurable:s,measured:t,rowRef:i,eventHandlers:o,onExpand:a}},Upe="ElTableV2TableRow",zpe=se({name:Upe,props:ld,setup(n,{expose:e,slots:t,attrs:i}){const{eventHandlers:s,isScrolling:r,measurable:o,measured:a,rowRef:l,onExpand:c}=Bpe(n);return e({onExpand:c}),()=>{const{columns:u,columnsStyles:d,expandColumnKey:h,depth:f,rowData:m,rowIndex:p,style:y}=n;let v=u.map((_,b)=>{const w=rt(m.children)&&m.children.length>0&&_.key===h;return t.cell({column:_,columns:u,columnIndex:b,depth:f,style:d[_.key],rowData:m,rowIndex:p,isScrolling:g(r),expandIconProps:w?{rowData:m,rowIndex:p,onExpand:c}:void 0})});if(t.row&&(v=t.row({cells:v.map(_=>rt(_)&&_.length===1?_[0]:_),style:y,columns:u,depth:f,rowData:m,rowIndex:p,isScrolling:g(r)})),g(o)){const{height:_,...b}=y||{},w=g(a);return le("div",Kt({ref:l,class:n.class,style:w?y:b,role:"row"},i,g(s)),[v])}return le("div",Kt(i,{ref:l,class:n.class,style:y,role:"row"},g(s)),[v])}}}),Hpe=n=>{const{sortOrder:e}=n;return le(dt,{size:14,class:n.class},{default:()=>[e===zg.ASC?le(sX,null,null):le(nX,null,null)]})},Vpe=n=>{const{expanded:e,expandable:t,onExpand:i,style:s,size:r}=n,o={onClick:t?()=>i(!e):void 0,class:n.class};return le(dt,Kt(o,{size:r,style:s}),{default:()=>[le(ur,null,null)]})},$pe="ElTableV2Grid",Gpe=n=>{const e=V(),t=V(),i=R(()=>{const{data:p,rowHeight:y,estimatedRowHeight:v}=n;if(!v)return p.length*y}),s=R(()=>{const{fixedData:p,rowHeight:y}=n;return((p==null?void 0:p.length)||0)*y}),r=R(()=>g_(n.headerHeight)),o=R(()=>{const{height:p}=n;return Math.max(0,p-g(r)-g(s))}),a=R(()=>g(r)+g(s)>0),l=({data:p,rowIndex:y})=>p[y][n.rowKey];function c({rowCacheStart:p,rowCacheEnd:y,rowVisibleStart:v,rowVisibleEnd:_}){var b;(b=n.onRowsRendered)==null||b.call(n,{rowCacheStart:p,rowCacheEnd:y,rowVisibleStart:v,rowVisibleEnd:_})}function u(p,y){var v;(v=t.value)==null||v.resetAfterRowIndex(p,y)}function d(p,y){const v=g(e),_=g(t);$t(p)?(v==null||v.scrollToLeft(p.scrollLeft),_==null||_.scrollTo(p)):(v==null||v.scrollToLeft(p),_==null||_.scrollTo({scrollLeft:p,scrollTop:y}))}function h(p){var y;(y=g(t))==null||y.scrollTo({scrollTop:p})}function f(p,y){var v;(v=g(t))==null||v.scrollToItem(p,1,y)}function m(){var p,y;(p=g(t))==null||p.$forceUpdate(),(y=g(e))==null||y.$forceUpdate()}return{bodyRef:t,forceUpdate:m,fixedRowHeight:s,gridHeight:o,hasHeader:a,headerHeight:r,headerRef:e,totalHeight:i,itemKey:l,onItemRendered:c,resetAfterRowIndex:u,scrollTo:d,scrollToTop:h,scrollToRow:f}},e2=se({name:$pe,props:v_,setup(n,{slots:e,expose:t}){const{ns:i}=ct(jT),{bodyRef:s,fixedRowHeight:r,gridHeight:o,hasHeader:a,headerRef:l,headerHeight:c,totalHeight:u,forceUpdate:d,itemKey:h,onItemRendered:f,resetAfterRowIndex:m,scrollTo:p,scrollToTop:y,scrollToRow:v}=Gpe(n);t({forceUpdate:d,totalHeight:u,scrollTo:p,scrollToTop:y,scrollToRow:v,resetAfterRowIndex:m});const _=()=>n.bodyWidth;return()=>{const{cache:b,columns:w,data:x,fixedData:S,useIsScrolling:C,scrollbarAlwaysOn:T,scrollbarEndGap:M,scrollbarStartGap:E,style:A,rowHeight:I,bodyWidth:B,estimatedRowHeight:F,headerWidth:U,height:P,width:O,getRowHeight:D,onScroll:L}=n,H=Ct(F),X=H?Ide:Mde,ne=g(c);return le("div",{role:"table",class:[i.e("table"),n.class],style:A},[le(X,{ref:s,data:x,useIsScrolling:C,itemKey:h,columnCache:0,columnWidth:H?_:B,totalColumn:1,totalRow:x.length,rowCache:b,rowHeight:H?D:I,width:O,height:g(o),class:i.e("body"),role:"rowgroup",scrollbarStartGap:E,scrollbarEndGap:M,scrollbarAlwaysOn:T,onScroll:L,onItemRendered:f,perfMode:!1},{default:ce=>{var ae;const _e=x[ce.rowIndex];return(ae=e.row)==null?void 0:ae.call(e,{...ce,columns:w,rowData:_e})}}),g(a)&&le(Fpe,{ref:l,class:i.e("header-wrapper"),columns:w,headerData:x,headerHeight:n.headerHeight,fixedHeaderData:S,rowWidth:U,rowHeight:I,width:O,height:Math.min(ne+g(r),P)},{dynamic:e.header,fixed:e.row})])}}});function Wpe(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Jn(n)}const Kpe=(n,{slots:e})=>{const{mainTableRef:t,...i}=n;return le(e2,Kt({ref:t},i),Wpe(e)?e:{default:()=>[e]})};function Ype(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Jn(n)}const Xpe=(n,{slots:e})=>{if(!n.columns.length)return;const{leftTableRef:t,...i}=n;return le(e2,Kt({ref:t},i),Ype(e)?e:{default:()=>[e]})};function jpe(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Jn(n)}const qpe=(n,{slots:e})=>{if(!n.columns.length)return;const{rightTableRef:t,...i}=n;return le(e2,Kt({ref:t},i),jpe(e)?e:{default:()=>[e]})};function Zpe(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Jn(n)}const Jpe=(n,{slots:e})=>{const{columns:t,columnsStyles:i,depthMap:s,expandColumnKey:r,expandedRowKeys:o,estimatedRowHeight:a,hasFixedColumns:l,rowData:c,rowIndex:u,style:d,isScrolling:h,rowProps:f,rowClass:m,rowKey:p,rowEventHandlers:y,ns:v,onRowHovered:_,onRowExpanded:b}=n,w=Yd(m,{columns:t,rowData:c,rowIndex:u},""),x=Yd(f,{columns:t,rowData:c,rowIndex:u}),S=c[p],C=s[S]||0,T=!!r,M=u<0,E=[v.e("row"),w,{[v.e(`row-depth-${C}`)]:T&&u>=0,[v.is("expanded")]:T&&o.includes(S),[v.is("fixed")]:!C&&M,[v.is("customized")]:!!e.row}],A=l?_:void 0,I={...x,columns:t,columnsStyles:i,class:E,depth:C,expandColumnKey:r,estimatedRowHeight:M?void 0:a,isScrolling:h,rowIndex:u,rowData:c,rowKey:S,rowEventHandlers:y,style:d};return le(zpe,Kt(I,{onRowExpand:b,onMouseenter:U=>{A==null||A({hovered:!0,rowKey:S,event:U,rowData:c,rowIndex:u})},onMouseleave:U=>{A==null||A({hovered:!1,rowKey:S,event:U,rowData:c,rowIndex:u})},rowkey:S}),Zpe(e)?e:{default:()=>[e]})},nM=({columns:n,column:e,columnIndex:t,depth:i,expandIconProps:s,isScrolling:r,rowData:o,rowIndex:a,style:l,expandedRowKeys:c,ns:u,cellProps:d,expandColumnKey:h,indentSize:f,iconSize:m,rowKey:p},{slots:y})=>{const v=Nc(l);if(e.placeholderSign===Vg)return le("div",{class:u.em("row-cell","placeholder"),style:v},null);const{cellRenderer:_,dataKey:b,dataGetter:w}=e,x=xt(w)?w({columns:n,column:e,columnIndex:t,rowData:o,rowIndex:a}):gi(o,b??""),S=Yd(d,{cellData:x,columns:n,column:e,columnIndex:t,rowIndex:a,rowData:o}),C={class:u.e("cell-text"),columns:n,column:e,columnIndex:t,cellData:x,isScrolling:r,rowData:o,rowIndex:a},T=BB(_),M=T?T(C):ke(y,"default",C,()=>[le(JT,C,null)]),E=[u.e("row-cell"),e.class,e.align===Hg.CENTER&&u.is("align-center"),e.align===Hg.RIGHT&&u.is("align-right")],A=a>=0&&h&&e.key===h,I=a>=0&&c.includes(o[p]);let B;const F=`margin-inline-start: ${i*f}px;`;return A&&($t(s)?B=le(Vpe,Kt(s,{class:[u.e("expand-icon"),u.is("expanded",I)],size:m,expanded:I,style:F,expandable:!0}),null):B=le("div",{style:[F,`width: ${m}px; height: ${m}px;`].join(" ")},null)),le("div",Kt({class:E,style:v},S,{role:"cell"}),[B,M])};nM.inheritAttrs=!1;function Qpe(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Jn(n)}const eme=({columns:n,columnsStyles:e,headerIndex:t,style:i,headerClass:s,headerProps:r,ns:o},{slots:a})=>{const l={columns:n,headerIndex:t},c=[o.e("header-row"),Yd(s,l,""),{[o.is("customized")]:!!a.header}],u={...Yd(r,l),columnsStyles:e,class:c,columns:n,headerIndex:t,style:i};return le(Dpe,u,Qpe(a)?a:{default:()=>[a]})},HP=(n,{slots:e})=>{const{column:t,ns:i,style:s,onColumnSorted:r}=n,o=Nc(s);if(t.placeholderSign===Vg)return le("div",{class:i.em("header-row-cell","placeholder"),style:o},null);const{headerCellRenderer:a,headerClass:l,sortable:c}=t,u={...n,class:i.e("header-cell-text")},d=BB(a),h=d?d(u):ke(e,"default",u,()=>[le(QT,u,null)]),{sortBy:f,sortState:m,headerCellProps:p}=n;let y,v;if(m){const w=m[t.key];y=!!tM[w],v=y?w:zg.ASC}else y=t.key===f.key,v=y?f.order:zg.ASC;const _=[i.e("header-cell"),Yd(l,n,""),t.align===Hg.CENTER&&i.is("align-center"),t.align===Hg.RIGHT&&i.is("align-right"),c&&i.is("sortable")],b={...Yd(p,n),onClick:t.sortable?r:void 0,class:_,style:o,"data-key":t.key};return le("div",Kt(b,{role:"columnheader"}),[h,c&&le(Hpe,{class:[i.e("sort-icon"),y&&i.is("sorting")],sortOrder:v},null)])},VB=(n,{slots:e})=>{var t;return le("div",{class:n.class,style:n.style},[(t=e.default)==null?void 0:t.call(e)])};VB.displayName="ElTableV2Footer";const $B=(n,{slots:e})=>{const t=ke(e,"default",{},()=>[le(KF,null,null)]);return le("div",{class:n.class,style:n.style},[t])};$B.displayName="ElTableV2Empty";const GB=(n,{slots:e})=>{var t;return le("div",{class:n.class,style:n.style},[(t=e.default)==null?void 0:t.call(e)])};GB.displayName="ElTableV2Overlay";function jp(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Jn(n)}const tme="ElTableV2",nme=se({name:tme,props:kpe,setup(n,{slots:e,expose:t}){const i=Ve("table-v2"),{columnsStyles:s,fixedColumnsOnLeft:r,fixedColumnsOnRight:o,mainColumns:a,mainTableHeight:l,fixedTableHeight:c,leftTableWidth:u,rightTableWidth:d,data:h,depthMap:f,expandedRowKeys:m,hasFixedColumns:p,mainTableRef:y,leftTableRef:v,rightTableRef:_,isDynamic:b,isResetting:w,isScrolling:x,bodyWidth:S,emptyStyle:C,rootStyle:T,headerWidth:M,footerHeight:E,showEmpty:A,scrollTo:I,scrollToLeft:B,scrollToTop:F,scrollToRow:U,getRowHeight:P,onColumnSorted:O,onRowHeightChange:D,onRowHovered:L,onRowExpanded:H,onRowsRendered:X,onScroll:ne,onVerticalScroll:ce}=Ppe(n);return t({scrollTo:I,scrollToLeft:B,scrollToTop:F,scrollToRow:U}),Xt(jT,{ns:i,isResetting:w,isScrolling:x}),()=>{const{cache:ae,cellProps:_e,estimatedRowHeight:re,expandColumnKey:xe,fixedData:he,headerHeight:Te,headerClass:Ce,headerProps:we,headerCellProps:K,sortBy:j,sortState:ie,rowHeight:ve,rowClass:ye,rowEventHandlers:me,rowKey:be,rowProps:Pe,scrollbarAlwaysOn:Z,indentSize:$,iconSize:de,useIsScrolling:Ae,vScrollbarSize:De,width:fe}=n,Ge=g(h),We={cache:ae,class:i.e("main"),columns:g(a),data:Ge,fixedData:he,estimatedRowHeight:re,bodyWidth:g(S)+De,headerHeight:Te,headerWidth:g(M),height:g(l),mainTableRef:y,rowKey:be,rowHeight:ve,scrollbarAlwaysOn:Z,scrollbarStartGap:2,scrollbarEndGap:De,useIsScrolling:Ae,width:fe,getRowHeight:P,onRowsRendered:X,onScroll:ne},je=g(u),at=g(c),Ue={cache:ae,class:i.e("left"),columns:g(r),data:Ge,estimatedRowHeight:re,leftTableRef:v,rowHeight:ve,bodyWidth:je,headerWidth:je,headerHeight:Te,height:at,rowKey:be,scrollbarAlwaysOn:Z,scrollbarStartGap:2,scrollbarEndGap:De,useIsScrolling:Ae,width:je,getRowHeight:P,onScroll:ce},Fe=g(d)+De,Ie={cache:ae,class:i.e("right"),columns:g(o),data:Ge,estimatedRowHeight:re,rightTableRef:_,rowHeight:ve,bodyWidth:Fe,headerWidth:Fe,headerHeight:Te,height:at,rowKey:be,scrollbarAlwaysOn:Z,scrollbarStartGap:2,scrollbarEndGap:De,width:Fe,style:`--${g(i.namespace)}-table-scrollbar-size: ${De}px`,useIsScrolling:Ae,getRowHeight:P,onScroll:ce},oe=g(s),Le={ns:i,depthMap:g(f),columnsStyles:oe,expandColumnKey:xe,expandedRowKeys:g(m),estimatedRowHeight:re,hasFixedColumns:g(p),rowProps:Pe,rowClass:ye,rowKey:be,rowEventHandlers:me,onRowHovered:L,onRowExpanded:H,onRowHeightChange:D},Ke={cellProps:_e,expandColumnKey:xe,indentSize:$,iconSize:de,rowKey:be,expandedRowKeys:g(m),ns:i},ft={ns:i,headerClass:Ce,headerProps:we,columnsStyles:oe},Q={ns:i,sortBy:j,sortState:ie,headerCellProps:K,onColumnSorted:O},$e={row:ht=>le(Jpe,Kt(ht,Le),{row:e.row,cell:At=>{let Ot;return e.cell?le(nM,Kt(At,Ke,{style:oe[At.column.key]}),jp(Ot=e.cell(At))?Ot:{default:()=>[Ot]}):le(nM,Kt(At,Ke,{style:oe[At.column.key]}),null)}}),header:ht=>le(eme,Kt(ht,ft),{header:e.header,cell:At=>{let Ot;return e["header-cell"]?le(HP,Kt(At,Q,{style:oe[At.column.key]}),jp(Ot=e["header-cell"](At))?Ot:{default:()=>[Ot]}):le(HP,Kt(At,Q,{style:oe[At.column.key]}),null)}})},Oe=[n.class,i.b(),i.e("root"),{[i.is("dynamic")]:g(b)}],et={class:i.e("footer"),style:g(E)};return le("div",{class:Oe,style:g(T)},[le(Kpe,We,jp($e)?$e:{default:()=>[$e]}),le(Xpe,Ue,jp($e)?$e:{default:()=>[$e]}),le(qpe,Ie,jp($e)?$e:{default:()=>[$e]}),e.footer&&le(VB,et,{default:e.footer}),g(A)&&le($B,{class:i.e("empty"),style:g(C)},{default:e.empty}),e.overlay&&le(GB,{class:i.e("overlay")},{default:e.overlay})])}}}),ime=Ye({disableWidth:Boolean,disableHeight:Boolean,onResize:{type:ge(Function)}}),sme=se({name:"ElAutoResizer",props:ime,setup(n,{slots:e}){const t=Ve("auto-resizer"),{height:i,width:s,sizer:r}=Rpe(n),o={width:"100%",height:"100%"};return()=>{var a;return le("div",{ref:r,class:t.b(),style:o},[(a=e.default)==null?void 0:a.call(e,{height:i.value,width:s.value})])}}}),rme=Ht(nme),ome=Ht(sme),G1=Symbol("tabsRootContextKey"),ame=Ye({tabs:{type:ge(Array),default:()=>ni([])}}),WB="ElTabBar",lme=se({name:WB}),cme=se({...lme,props:ame,setup(n,{expose:e}){const t=n,i=zt(),s=ct(G1);s||qi(WB,"<el-tabs><el-tab-bar /></el-tabs>");const r=Ve("tabs"),o=V(),a=V(),l=()=>{let u=0,d=0;const h=["top","bottom"].includes(s.props.tabPosition)?"width":"height",f=h==="width"?"x":"y",m=f==="x"?"left":"top";return t.tabs.every(p=>{var y,v;const _=(v=(y=i.parent)==null?void 0:y.refs)==null?void 0:v[`tab-${p.uid}`];if(!_)return!1;if(!p.active)return!0;u=_[`offset${Ma(m)}`],d=_[`client${Ma(h)}`];const b=window.getComputedStyle(_);return h==="width"&&(d-=Number.parseFloat(b.paddingLeft)+Number.parseFloat(b.paddingRight),u+=Number.parseFloat(b.paddingLeft)),!1}),{[h]:`${d}px`,transform:`translate${Ma(f)}(${u}px)`}},c=()=>a.value=l();return ze(()=>t.tabs,async()=>{await vt(),c()},{immediate:!0}),ti(o,()=>c()),e({ref:o,update:c}),(u,d)=>(k(),Y("div",{ref_key:"barRef",ref:o,class:z([g(r).e("active-bar"),g(r).is(g(s).props.tabPosition)]),style:pt(a.value)},null,6))}});var ume=Ze(cme,[["__file","tab-bar.vue"]]);const dme=Ye({panes:{type:ge(Array),default:()=>ni([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),hme={tabClick:(n,e,t)=>t instanceof Event,tabRemove:(n,e)=>e instanceof Event},VP="ElTabNav",fme=se({name:VP,props:dme,emits:hme,setup(n,{expose:e,emit:t}){const i=zt(),s=ct(G1);s||qi(VP,"<el-tabs><tab-nav /></el-tabs>");const r=Ve("tabs"),o=o$(),a=y$(),l=V(),c=V(),u=V(),d=V(),h=V(!1),f=V(0),m=V(!1),p=V(!0),y=R(()=>["top","bottom"].includes(s.props.tabPosition)?"width":"height"),v=R(()=>({transform:`translate${y.value==="width"?"X":"Y"}(-${f.value}px)`})),_=()=>{if(!l.value)return;const M=l.value[`offset${Ma(y.value)}`],E=f.value;if(!E)return;const A=E>M?E-M:0;f.value=A},b=()=>{if(!l.value||!c.value)return;const M=c.value[`offset${Ma(y.value)}`],E=l.value[`offset${Ma(y.value)}`],A=f.value;if(M-A<=E)return;const I=M-A>E*2?A+E:M-E;f.value=I},w=async()=>{const M=c.value;if(!h.value||!u.value||!l.value||!M)return;await vt();const E=u.value.querySelector(".is-active");if(!E)return;const A=l.value,I=["top","bottom"].includes(s.props.tabPosition),B=E.getBoundingClientRect(),F=A.getBoundingClientRect(),U=I?M.offsetWidth-F.width:M.offsetHeight-F.height,P=f.value;let O=P;I?(B.left<F.left&&(O=P-(F.left-B.left)),B.right>F.right&&(O=P+B.right-F.right)):(B.top<F.top&&(O=P-(F.top-B.top)),B.bottom>F.bottom&&(O=P+(B.bottom-F.bottom))),O=Math.max(O,0),f.value=Math.min(O,U)},x=()=>{var M;if(!c.value||!l.value)return;n.stretch&&((M=d.value)==null||M.update());const E=c.value[`offset${Ma(y.value)}`],A=l.value[`offset${Ma(y.value)}`],I=f.value;A<E?(h.value=h.value||{},h.value.prev=I,h.value.next=I+A<E,E-I<A&&(f.value=E-A)):(h.value=!1,I>0&&(f.value=0))},S=M=>{const E=M.code,{up:A,down:I,left:B,right:F}=wt;if(![A,I,B,F].includes(E))return;const U=Array.from(M.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),P=U.indexOf(M.target);let O;E===B||E===A?P===0?O=U.length-1:O=P-1:P<U.length-1?O=P+1:O=0,U[O].focus({preventScroll:!0}),U[O].click(),C()},C=()=>{p.value&&(m.value=!0)},T=()=>m.value=!1;return ze(o,M=>{M==="hidden"?p.value=!1:M==="visible"&&setTimeout(()=>p.value=!0,50)}),ze(a,M=>{M?setTimeout(()=>p.value=!0,50):p.value=!1}),ti(u,x),Ft(()=>setTimeout(()=>w(),0)),Kl(()=>x()),e({scrollToActiveTab:w,removeFocus:T}),ze(()=>n.panes,()=>i.update(),{flush:"post",deep:!0}),()=>{const M=h.value?[le("span",{class:[r.e("nav-prev"),r.is("disabled",!h.value.prev)],onClick:_},[le(dt,null,{default:()=>[le(eu,null,null)]})]),le("span",{class:[r.e("nav-next"),r.is("disabled",!h.value.next)],onClick:b},[le(dt,null,{default:()=>[le(ur,null,null)]})])]:null,E=n.panes.map((A,I)=>{var B,F,U,P;const O=A.uid,D=A.props.disabled,L=(F=(B=A.props.name)!=null?B:A.index)!=null?F:`${I}`,H=!D&&(A.isClosable||n.editable);A.index=`${I}`;const X=H?le(dt,{class:"is-icon-close",onClick:ae=>t("tabRemove",A,ae)},{default:()=>[le(ia,null,null)]}):null,ne=((P=(U=A.slots).label)==null?void 0:P.call(U))||A.props.label,ce=!D&&A.active?0:-1;return le("div",{ref:`tab-${O}`,class:[r.e("item"),r.is(s.props.tabPosition),r.is("active",A.active),r.is("disabled",D),r.is("closable",H),r.is("focus",m.value)],id:`tab-${L}`,key:`tab-${O}`,"aria-controls":`pane-${L}`,role:"tab","aria-selected":A.active,tabindex:ce,onFocus:()=>C(),onBlur:()=>T(),onClick:ae=>{T(),t("tabClick",A,L,ae)},onKeydown:ae=>{H&&(ae.code===wt.delete||ae.code===wt.backspace)&&t("tabRemove",A,ae)}},[ne,X])});return le("div",{ref:u,class:[r.e("nav-wrap"),r.is("scrollable",!!h.value),r.is(s.props.tabPosition)]},[M,le("div",{class:r.e("nav-scroll"),ref:l},[le("div",{class:[r.e("nav"),r.is(s.props.tabPosition),r.is("stretch",n.stretch&&["top","bottom"].includes(s.props.tabPosition))],ref:c,style:v.value,role:"tablist",onKeydown:S},[n.type?null:le(ume,{ref:d,tabs:[...n.panes]},null),E])])])}}}),pme=Ye({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:ge(Function),default:()=>!0},stretch:Boolean}),bx=n=>Rt(n)||Ct(n),mme={[Gt]:n=>bx(n),tabClick:(n,e)=>e instanceof Event,tabChange:n=>bx(n),edit:(n,e)=>["remove","add"].includes(e),tabRemove:n=>bx(n),tabAdd:()=>!0},gme=se({name:"ElTabs",props:pme,emits:mme,setup(n,{emit:e,slots:t,expose:i}){var s;const r=Ve("tabs"),o=R(()=>["left","right"].includes(n.tabPosition)),{children:a,addChild:l,removeChild:c}=wT(zt(),"ElTabPane"),u=V(),d=V((s=n.modelValue)!=null?s:"0"),h=async(y,v=!1)=>{var _,b,w;if(!(d.value===y||ki(y)))try{await((_=n.beforeLeave)==null?void 0:_.call(n,y,d.value))!==!1&&(d.value=y,v&&(e(Gt,y),e("tabChange",y)),(w=(b=u.value)==null?void 0:b.removeFocus)==null||w.call(b))}catch{}},f=(y,v,_)=>{y.props.disabled||(h(v,!0),e("tabClick",y,_))},m=(y,v)=>{y.props.disabled||ki(y.props.name)||(v.stopPropagation(),e("edit",y.props.name,"remove"),e("tabRemove",y.props.name))},p=()=>{e("edit",void 0,"add"),e("tabAdd")};return ze(()=>n.modelValue,y=>h(y)),ze(d,async()=>{var y;await vt(),(y=u.value)==null||y.scrollToActiveTab()}),Xt(G1,{props:n,currentName:d,registerPane:l,unregisterPane:c}),i({currentName:d}),()=>{const y=t["add-icon"],v=n.editable||n.addable?le("div",{class:[r.e("new-tab"),o.value&&r.e("new-tab-vertical")],tabindex:"0",onClick:p,onKeydown:w=>{w.code===wt.enter&&p()}},[y?ke(t,"add-icon"):le(dt,{class:r.is("icon-plus")},{default:()=>[le(_N,null,null)]})]):null,_=le("div",{class:[r.e("header"),o.value&&r.e("header-vertical"),r.is(n.tabPosition)]},[le(fme,{ref:u,currentName:d.value,editable:n.editable,type:n.type,panes:a.value,stretch:n.stretch,onTabClick:f,onTabRemove:m},null),v]),b=le("div",{class:r.e("content")},[ke(t,"default")]);return le("div",{class:[r.b(),r.m(n.tabPosition),{[r.m("card")]:n.type==="card",[r.m("border-card")]:n.type==="border-card"}]},[...n.tabPosition!=="bottom"?[_,b]:[b,_]])}}}),vme=Ye({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),yme=["id","aria-hidden","aria-labelledby"],KB="ElTabPane",_me=se({name:KB}),bme=se({..._me,props:vme,setup(n){const e=n,t=zt(),i=hs(),s=ct(G1);s||qi(KB,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const r=Ve("tab-pane"),o=V(),a=R(()=>e.closable||s.props.closable),l=yI(()=>{var f;return s.currentName.value===((f=e.name)!=null?f:o.value)}),c=V(l.value),u=R(()=>{var f;return(f=e.name)!=null?f:o.value}),d=yI(()=>!e.lazy||c.value||l.value);ze(l,f=>{f&&(c.value=!0)});const h=un({uid:t.uid,slots:i,props:e,paneName:u,active:l,index:o,isClosable:a});return Ft(()=>{s.registerPane(h)}),fu(()=>{s.unregisterPane(h.uid)}),(f,m)=>g(d)?Bt((k(),Y("div",{key:0,id:`pane-${g(u)}`,class:z(g(r).b()),role:"tabpanel","aria-hidden":!g(l),"aria-labelledby":`tab-${g(u)}`},[ke(f.$slots,"default")],10,yme)),[[an,g(l)]]):Ee("v-if",!0)}});var YB=Ze(bme,[["__file","tab-pane.vue"]]);const wme=Ht(gme,{TabPane:YB}),xme=si(YB),Sme=Ye({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:Ya,default:""},truncated:Boolean,lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),Cme=se({name:"ElText"}),Mme=se({...Cme,props:Sme,setup(n){const e=n,t=Hi(),i=Ve("text"),s=R(()=>[i.b(),i.m(e.type),i.m(t.value),i.is("truncated",e.truncated),i.is("line-clamp",!ki(e.lineClamp))]);return(r,o)=>(k(),Re(Wt(r.tag),{class:z(g(s)),style:pt({"-webkit-line-clamp":r.lineClamp})},{default:pe(()=>[ke(r.$slots,"default")]),_:3},8,["class","style"]))}});var Eme=Ze(Mme,[["__file","text.vue"]]);const Tme=Ht(Eme),Ame=Ye({format:{type:String,default:"HH:mm"},modelValue:String,disabled:Boolean,editable:{type:Boolean,default:!0},effect:{type:ge(String),default:"light"},clearable:{type:Boolean,default:!0},size:Zi,placeholder:String,start:{type:String,default:"09:00"},end:{type:String,default:"18:00"},step:{type:String,default:"00:30"},minTime:String,maxTime:String,name:String,prefixIcon:{type:ge([String,Object]),default:()=>yN},clearIcon:{type:ge([String,Object]),default:()=>mu},...Pp}),gl=n=>{const e=(n||"").split(":");if(e.length>=2){let t=Number.parseInt(e[0],10);const i=Number.parseInt(e[1],10),s=n.toUpperCase();return s.includes("AM")&&t===12?t=0:s.includes("PM")&&t!==12&&(t+=12),{hours:t,minutes:i}}return null},wx=(n,e)=>{const t=gl(n);if(!t)return-1;const i=gl(e);if(!i)return-1;const s=t.minutes+t.hours*60,r=i.minutes+i.hours*60;return s===r?0:s>r?1:-1},$P=n=>`${n}`.padStart(2,"0"),cf=n=>`${$P(n.hours)}:${$P(n.minutes)}`,Ime=(n,e)=>{const t=gl(n);if(!t)return"";const i=gl(e);if(!i)return"";const s={hours:t.hours,minutes:t.minutes};return s.minutes+=i.minutes,s.hours+=i.hours,s.hours+=Math.floor(s.minutes/60),s.minutes=s.minutes%60,cf(s)},Rme=se({name:"ElTimeSelect"}),Pme=se({...Rme,props:Ame,emits:["change","blur","focus","clear","update:modelValue"],setup(n,{expose:e}){const t=n;Vt.extend(AT);const{Option:i}=Kd,s=Ve("input"),r=V(),o=mr(),{lang:a}=en(),l=R(()=>t.modelValue),c=R(()=>{const v=gl(t.start);return v?cf(v):null}),u=R(()=>{const v=gl(t.end);return v?cf(v):null}),d=R(()=>{const v=gl(t.step);return v?cf(v):null}),h=R(()=>{const v=gl(t.minTime||"");return v?cf(v):null}),f=R(()=>{const v=gl(t.maxTime||"");return v?cf(v):null}),m=R(()=>{const v=[];if(t.start&&t.end&&t.step){let _=c.value,b;for(;_&&u.value&&wx(_,u.value)<=0;)b=Vt(_,"HH:mm").locale(a.value).format(t.format),v.push({value:b,disabled:wx(_,h.value||"-1:-1")<=0||wx(_,f.value||"100:100")>=0}),_=Ime(_,d.value)}return v});return e({blur:()=>{var v,_;(_=(v=r.value)==null?void 0:v.blur)==null||_.call(v)},focus:()=>{var v,_;(_=(v=r.value)==null?void 0:v.focus)==null||_.call(v)}}),(v,_)=>(k(),Re(g(Kd),{ref_key:"select",ref:r,"model-value":g(l),disabled:g(o),clearable:v.clearable,"clear-icon":v.clearIcon,size:v.size,effect:v.effect,placeholder:v.placeholder,"default-first-option":"",filterable:v.editable,"empty-values":v.emptyValues,"value-on-clear":v.valueOnClear,"onUpdate:modelValue":_[0]||(_[0]=b=>v.$emit("update:modelValue",b)),onChange:_[1]||(_[1]=b=>v.$emit("change",b)),onBlur:_[2]||(_[2]=b=>v.$emit("blur",b)),onFocus:_[3]||(_[3]=b=>v.$emit("focus",b)),onClear:_[4]||(_[4]=()=>v.$emit("clear"))},{prefix:pe(()=>[v.prefixIcon?(k(),Re(g(dt),{key:0,class:z(g(s).e("prefix-icon"))},{default:pe(()=>[(k(),Re(Wt(v.prefixIcon)))]),_:1},8,["class"])):Ee("v-if",!0)]),default:pe(()=>[(k(!0),Y(mt,null,Zt(g(m),b=>(k(),Re(g(i),{key:b.value,label:b.value,value:b.value,disabled:b.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["model-value","disabled","clearable","clear-icon","size","effect","placeholder","filterable","empty-values","value-on-clear"]))}});var Lme=Ze(Pme,[["__file","time-select.vue"]]);const kme=Ht(Lme),Ome=se({name:"ElTimeline",setup(n,{slots:e}){const t=Ve("timeline");return Xt("timeline",e),()=>_t("ul",{class:[t.b()]},[ke(e,"default")])}}),Dme=Ye({timestamp:{type:String,default:""},hideTimestamp:Boolean,center:Boolean,placement:{type:String,values:["top","bottom"],default:"bottom"},type:{type:String,values:["primary","success","warning","danger","info"],default:""},color:{type:String,default:""},size:{type:String,values:["normal","large"],default:"normal"},icon:{type:xn},hollow:Boolean}),Nme=se({name:"ElTimelineItem"}),Fme=se({...Nme,props:Dme,setup(n){const e=n,t=Ve("timeline-item"),i=R(()=>[t.e("node"),t.em("node",e.size||""),t.em("node",e.type||""),t.is("hollow",e.hollow)]);return(s,r)=>(k(),Y("li",{class:z([g(t).b(),{[g(t).e("center")]:s.center}])},[te("div",{class:z(g(t).e("tail"))},null,2),s.$slots.dot?Ee("v-if",!0):(k(),Y("div",{key:0,class:z(g(i)),style:pt({backgroundColor:s.color})},[s.icon?(k(),Re(g(dt),{key:0,class:z(g(t).e("icon"))},{default:pe(()=>[(k(),Re(Wt(s.icon)))]),_:1},8,["class"])):Ee("v-if",!0)],6)),s.$slots.dot?(k(),Y("div",{key:1,class:z(g(t).e("dot"))},[ke(s.$slots,"dot")],2)):Ee("v-if",!0),te("div",{class:z(g(t).e("wrapper"))},[!s.hideTimestamp&&s.placement==="top"?(k(),Y("div",{key:0,class:z([g(t).e("timestamp"),g(t).is("top")])},Je(s.timestamp),3)):Ee("v-if",!0),te("div",{class:z(g(t).e("content"))},[ke(s.$slots,"default")],2),!s.hideTimestamp&&s.placement==="bottom"?(k(),Y("div",{key:1,class:z([g(t).e("timestamp"),g(t).is("bottom")])},Je(s.timestamp),3)):Ee("v-if",!0)],2)],2))}});var XB=Ze(Fme,[["__file","timeline-item.vue"]]);const Bme=Ht(Ome,{TimelineItem:XB}),Ume=si(XB),jB=Ye({nowrap:Boolean});var qB=(n=>(n.top="top",n.bottom="bottom",n.left="left",n.right="right",n))(qB||{});const zme=Object.values(qB),t2=Ye({width:{type:Number,default:10},height:{type:Number,default:10},style:{type:ge(Object),default:null}}),Hme=Ye({side:{type:ge(String),values:zme,required:!0}}),Vme=["absolute","fixed"],$me=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],n2=Ye({arrowPadding:{type:ge(Number),default:5},effect:{type:ge(String),default:"light"},contentClass:String,placement:{type:ge(String),values:$me,default:"bottom"},reference:{type:ge(Object),default:null},offset:{type:Number,default:8},strategy:{type:ge(String),values:Vme,default:"absolute"},showArrow:Boolean,...Ss(["ariaLabel"])}),i2=Ye({delayDuration:{type:Number,default:300},defaultOpen:Boolean,open:{type:Boolean,default:void 0},onOpenChange:{type:ge(Function)},"onUpdate:open":{type:ge(Function)}}),Th={type:ge(Function)},s2=Ye({onBlur:Th,onClick:Th,onFocus:Th,onMouseDown:Th,onMouseEnter:Th,onMouseLeave:Th}),Gme=Ye({...i2,...t2,...s2,...n2,alwaysOn:Boolean,fullTransition:Boolean,transitionProps:{type:ge(Object),default:null},teleported:Boolean,to:{type:ge(String),default:"body"}}),W1=Symbol("tooltipV2"),ZB=Symbol("tooltipV2Content"),xx="tooltip_v2.open",Wme=se({name:"ElTooltipV2Root"}),Kme=se({...Wme,props:i2,setup(n,{expose:e}){const t=n,i=V(t.defaultOpen),s=V(null),r=R({get:()=>Hd(t.open)?i.value:t.open,set:y=>{var v;i.value=y,(v=t["onUpdate:open"])==null||v.call(t,y)}}),o=R(()=>Ct(t.delayDuration)&&t.delayDuration>0),{start:a,stop:l}=Ud(()=>{r.value=!0},R(()=>t.delayDuration),{immediate:!1}),c=Ve("tooltip-v2"),u=Ls(),d=()=>{l(),r.value=!0},h=()=>{g(o)?a():d()},f=d,m=()=>{l(),r.value=!1};return ze(r,y=>{var v;y&&(document.dispatchEvent(new CustomEvent(xx)),f()),(v=t.onOpenChange)==null||v.call(t,y)}),Ft(()=>{document.addEventListener(xx,m)}),kn(()=>{l(),document.removeEventListener(xx,m)}),Xt(W1,{contentId:u,triggerRef:s,ns:c,onClose:m,onDelayOpen:h,onOpen:f}),e({onOpen:f,onClose:m}),(y,v)=>ke(y.$slots,"default",{open:g(r)})}});var Yme=Ze(Kme,[["__file","root.vue"]]);const Xme=se({name:"ElTooltipV2Arrow"}),jme=se({...Xme,props:{...t2,...Hme},setup(n){const e=n,{ns:t}=ct(W1),{arrowRef:i}=ct(ZB),s=R(()=>{const{style:r,width:o,height:a}=e,l=t.namespace.value;return{[`--${l}-tooltip-v2-arrow-width`]:`${o}px`,[`--${l}-tooltip-v2-arrow-height`]:`${a}px`,[`--${l}-tooltip-v2-arrow-border-width`]:`${o/2}px`,[`--${l}-tooltip-v2-arrow-cover-width`]:o/2-1,...r||{}}});return(r,o)=>(k(),Y("span",{ref_key:"arrowRef",ref:i,style:pt(g(s)),class:z(g(t).e("arrow"))},null,6))}});var GP=Ze(jme,[["__file","arrow.vue"]]);const qme=Ye({style:{type:ge([String,Object,Array]),default:()=>({})}}),Zme=se({name:"ElVisuallyHidden"}),Jme=se({...Zme,props:qme,setup(n){const e=n,t=R(()=>[e.style,{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}]);return(i,s)=>(k(),Y("span",Kt(i.$attrs,{style:g(t)}),[ke(i.$slots,"default")],16))}});var Qme=Ze(Jme,[["__file","visual-hidden.vue"]]);const ege=["data-side"],tge=se({name:"ElTooltipV2Content"}),nge=se({...tge,props:{...n2,...jB},setup(n){const e=n,{triggerRef:t,contentId:i}=ct(W1),s=V(e.placement),r=V(e.strategy),o=V(null),{referenceRef:a,contentRef:l,middlewareData:c,x:u,y:d,update:h}=Iq({placement:s,strategy:r,middleware:R(()=>{const b=[e4(e.offset)];return e.showArrow&&b.push(Rq({arrowRef:o})),b})}),f=Ip().nextZIndex(),m=Ve("tooltip-v2"),p=R(()=>s.value.split("-")[0]),y=R(()=>({position:g(r),top:`${g(d)||0}px`,left:`${g(u)||0}px`,zIndex:f})),v=R(()=>{if(!e.showArrow)return{};const{arrow:b}=g(c);return{[`--${m.namespace.value}-tooltip-v2-arrow-x`]:`${b==null?void 0:b.x}px`||"",[`--${m.namespace.value}-tooltip-v2-arrow-y`]:`${b==null?void 0:b.y}px`||""}}),_=R(()=>[m.e("content"),m.is("dark",e.effect==="dark"),m.is(g(r)),e.contentClass]);return ze(o,()=>h()),ze(()=>e.placement,b=>s.value=b),Ft(()=>{ze(()=>e.reference||t.value,b=>{a.value=b||void 0},{immediate:!0})}),Xt(ZB,{arrowRef:o}),(b,w)=>(k(),Y("div",{ref_key:"contentRef",ref:l,style:pt(g(y)),"data-tooltip-v2-root":""},[b.nowrap?Ee("v-if",!0):(k(),Y("div",{key:0,"data-side":g(p),class:z(g(_))},[ke(b.$slots,"default",{contentStyle:g(y),contentClass:g(_)}),le(g(Qme),{id:g(i),role:"tooltip"},{default:pe(()=>[b.ariaLabel?(k(),Y(mt,{key:0},[Yt(Je(b.ariaLabel),1)],64)):ke(b.$slots,"default",{key:1})]),_:3},8,["id"]),ke(b.$slots,"arrow",{style:pt(g(v)),side:g(p)})],10,ege))],4))}});var WP=Ze(nge,[["__file","content.vue"]]);const ige=Ye({setRef:{type:ge(Function),required:!0},onlyChild:Boolean});var sge=se({props:ige,setup(n,{slots:e}){const t=V(),i=R1(t,s=>{s?n.setRef(s.nextElementSibling):n.setRef(null)});return()=>{var s;const[r]=((s=e.default)==null?void 0:s.call(e))||[],o=n.onlyChild?CX(r.children):r.children;return le(mt,{ref:i},[o])}}});const rge=se({name:"ElTooltipV2Trigger"}),oge=se({...rge,props:{...jB,...s2},setup(n){const e=n,{onClose:t,onOpen:i,onDelayOpen:s,triggerRef:r,contentId:o}=ct(W1);let a=!1;const l=_=>{r.value=_},c=()=>{a=!1},u=hi(e.onMouseEnter,s),d=hi(e.onMouseLeave,t),h=hi(e.onMouseDown,()=>{t(),a=!0,document.addEventListener("mouseup",c,{once:!0})}),f=hi(e.onFocus,()=>{a||i()}),m=hi(e.onBlur,t),p=hi(e.onClick,_=>{_.detail===0&&t()}),y={blur:m,click:p,focus:f,mousedown:h,mouseenter:u,mouseleave:d},v=(_,b,w)=>{_&&Object.entries(b).forEach(([x,S])=>{_[w](x,S)})};return ze(r,(_,b)=>{v(_,y,"addEventListener"),v(b,y,"removeEventListener"),_&&_.setAttribute("aria-describedby",o.value)}),kn(()=>{v(r.value,y,"removeEventListener"),document.removeEventListener("mouseup",c)}),(_,b)=>_.nowrap?(k(),Re(g(sge),{key:0,"set-ref":l,"only-child":""},{default:pe(()=>[ke(_.$slots,"default")]),_:3})):(k(),Y("button",Kt({key:1,ref_key:"triggerRef",ref:r},_.$attrs),[ke(_.$slots,"default")],16))}});var age=Ze(oge,[["__file","trigger.vue"]]);const lge=se({name:"ElTooltipV2"}),cge=se({...lge,props:Gme,setup(n){const t=ws(n),i=un(Aa(t,Object.keys(t2))),s=un(Aa(t,Object.keys(n2))),r=un(Aa(t,Object.keys(i2))),o=un(Aa(t,Object.keys(s2)));return(a,l)=>(k(),Re(Yme,wl(Gf(r)),{default:pe(({open:c})=>[le(age,Kt(o,{nowrap:""}),{default:pe(()=>[ke(a.$slots,"trigger")]),_:3},16),(k(),Re(Sp,{to:a.to,disabled:!a.teleported},[a.fullTransition?(k(),Re(ji,wl(Kt({key:0},a.transitionProps)),{default:pe(()=>[a.alwaysOn||c?(k(),Re(WP,wl(Kt({key:0},s)),{arrow:pe(({style:u,side:d})=>[a.showArrow?(k(),Re(GP,Kt({key:0},i,{style:u,side:d}),null,16,["style","side"])):Ee("v-if",!0)]),default:pe(()=>[ke(a.$slots,"default")]),_:3},16)):Ee("v-if",!0)]),_:2},1040)):(k(),Y(mt,{key:1},[a.alwaysOn||c?(k(),Re(WP,wl(Kt({key:0},s)),{arrow:pe(({style:u,side:d})=>[a.showArrow?(k(),Re(GP,Kt({key:0},i,{style:u,side:d}),null,16,["style","side"])):Ee("v-if",!0)]),default:pe(()=>[ke(a.$slots,"default")]),_:3},16)):Ee("v-if",!0)],64))],8,["to","disabled"]))]),_:3},16))}});var uge=Ze(cge,[["__file","tooltip.vue"]]);const dge=Ht(uge),JB="left-check-change",QB="right-check-change",uf=Ye({data:{type:ge(Array),default:()=>[]},titles:{type:ge(Array),default:()=>[]},buttonTexts:{type:ge(Array),default:()=>[]},filterPlaceholder:String,filterMethod:{type:ge(Function)},leftDefaultChecked:{type:ge(Array),default:()=>[]},rightDefaultChecked:{type:ge(Array),default:()=>[]},renderContent:{type:ge(Function)},modelValue:{type:ge(Array),default:()=>[]},format:{type:ge(Object),default:()=>({})},filterable:Boolean,props:{type:ge(Object),default:()=>ni({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,values:["original","push","unshift"],default:"original"},validateEvent:{type:Boolean,default:!0}}),iM=(n,e)=>[n,e].every(rt)||rt(n)&&os(e),hge={[Fn]:(n,e,t)=>[n,t].every(rt)&&["left","right"].includes(e),[Gt]:n=>rt(n),[JB]:iM,[QB]:iM},sM="checked-change",fge=Ye({data:uf.data,optionRender:{type:ge(Function)},placeholder:String,title:String,filterable:Boolean,format:uf.format,filterMethod:uf.filterMethod,defaultChecked:uf.leftDefaultChecked,props:uf.props}),pge={[sM]:iM},Yv=n=>{const e={label:"label",key:"key",disabled:"disabled"};return R(()=>({...e,...n.props}))},mge=(n,e,t)=>{const i=Yv(n),s=R(()=>n.data.filter(u=>xt(n.filterMethod)?n.filterMethod(e.query,u):String(u[i.value.label]||u[i.value.key]).toLowerCase().includes(e.query.toLowerCase()))),r=R(()=>s.value.filter(u=>!u[i.value.disabled])),o=R(()=>{const u=e.checked.length,d=n.data.length,{noChecked:h,hasChecked:f}=n.format;return h&&f?u>0?f.replace(/\${checked}/g,u.toString()).replace(/\${total}/g,d.toString()):h.replace(/\${total}/g,d.toString()):`${u}/${d}`}),a=R(()=>{const u=e.checked.length;return u>0&&u<r.value.length}),l=()=>{const u=r.value.map(d=>d[i.value.key]);e.allChecked=u.length>0&&u.every(d=>e.checked.includes(d))},c=u=>{e.checked=u?r.value.map(d=>d[i.value.key]):[]};return ze(()=>e.checked,(u,d)=>{if(l(),e.checkChangeByUser){const h=u.concat(d).filter(f=>!u.includes(f)||!d.includes(f));t(sM,u,h)}else t(sM,u),e.checkChangeByUser=!0}),ze(r,()=>{l()}),ze(()=>n.data,()=>{const u=[],d=s.value.map(h=>h[i.value.key]);e.checked.forEach(h=>{d.includes(h)&&u.push(h)}),e.checkChangeByUser=!1,e.checked=u}),ze(()=>n.defaultChecked,(u,d)=>{if(d&&u.length===d.length&&u.every(m=>d.includes(m)))return;const h=[],f=r.value.map(m=>m[i.value.key]);u.forEach(m=>{f.includes(m)&&h.push(m)}),e.checkChangeByUser=!1,e.checked=h},{immediate:!0}),{filteredData:s,checkableData:r,checkedSummary:o,isIndeterminate:a,updateAllChecked:l,handleAllCheckedChange:c}},gge=(n,e)=>({onSourceCheckedChange:(s,r)=>{n.leftChecked=s,r&&e(JB,s,r)},onTargetCheckedChange:(s,r)=>{n.rightChecked=s,r&&e(QB,s,r)}}),vge=n=>{const e=Yv(n),t=R(()=>n.data.reduce((r,o)=>(r[o[e.value.key]]=o)&&r,{})),i=R(()=>n.data.filter(r=>!n.modelValue.includes(r[e.value.key]))),s=R(()=>n.targetOrder==="original"?n.data.filter(r=>n.modelValue.includes(r[e.value.key])):n.modelValue.reduce((r,o)=>{const a=t.value[o];return a&&r.push(a),r},[]));return{sourceData:i,targetData:s}},yge=(n,e,t)=>{const i=Yv(n),s=(a,l,c)=>{t(Gt,a),t(Fn,a,l,c)};return{addToLeft:()=>{const a=n.modelValue.slice();e.rightChecked.forEach(l=>{const c=a.indexOf(l);c>-1&&a.splice(c,1)}),s(a,"left",e.rightChecked)},addToRight:()=>{let a=n.modelValue.slice();const l=n.data.filter(c=>{const u=c[i.value.key];return e.leftChecked.includes(u)&&!n.modelValue.includes(u)}).map(c=>c[i.value.key]);a=n.targetOrder==="unshift"?l.concat(a):a.concat(l),n.targetOrder==="original"&&(a=n.data.filter(c=>a.includes(c[i.value.key])).map(c=>c[i.value.key])),s(a,"right",e.leftChecked)}}},_ge=se({name:"ElTransferPanel"}),bge=se({..._ge,props:fge,emits:pge,setup(n,{expose:e,emit:t}){const i=n,s=hs(),r=({option:b})=>b,{t:o}=en(),a=Ve("transfer"),l=un({checked:[],allChecked:!1,query:"",checkChangeByUser:!0}),c=Yv(i),{filteredData:u,checkedSummary:d,isIndeterminate:h,handleAllCheckedChange:f}=mge(i,l,t),m=R(()=>!_o(l.query)&&_o(u.value)),p=R(()=>!_o(s.default()[0].children)),{checked:y,allChecked:v,query:_}=ws(l);return e({query:_}),(b,w)=>(k(),Y("div",{class:z(g(a).b("panel"))},[te("p",{class:z(g(a).be("panel","header"))},[le(g(Do),{modelValue:g(v),"onUpdate:modelValue":w[0]||(w[0]=x=>Gn(v)?v.value=x:null),indeterminate:g(h),"validate-event":!1,onChange:g(f)},{default:pe(()=>[Yt(Je(b.title)+" ",1),te("span",null,Je(g(d)),1)]),_:1},8,["modelValue","indeterminate","onChange"])],2),te("div",{class:z([g(a).be("panel","body"),g(a).is("with-footer",g(p))])},[b.filterable?(k(),Re(g(Ks),{key:0,modelValue:g(_),"onUpdate:modelValue":w[1]||(w[1]=x=>Gn(_)?_.value=x:null),class:z(g(a).be("panel","filter")),size:"default",placeholder:b.placeholder,"prefix-icon":g(eX),clearable:"","validate-event":!1},null,8,["modelValue","class","placeholder","prefix-icon"])):Ee("v-if",!0),Bt(le(g(iF),{modelValue:g(y),"onUpdate:modelValue":w[2]||(w[2]=x=>Gn(y)?y.value=x:null),"validate-event":!1,class:z([g(a).is("filterable",b.filterable),g(a).be("panel","list")])},{default:pe(()=>[(k(!0),Y(mt,null,Zt(g(u),x=>(k(),Re(g(Do),{key:x[g(c).key],class:z(g(a).be("panel","item")),value:x[g(c).key],disabled:x[g(c).disabled],"validate-event":!1},{default:pe(()=>{var S;return[le(r,{option:(S=b.optionRender)==null?void 0:S.call(b,x)},null,8,["option"])]}),_:2},1032,["class","value","disabled"]))),128))]),_:1},8,["modelValue","class"]),[[an,!g(m)&&!g(_o)(b.data)]]),Bt(te("p",{class:z(g(a).be("panel","empty"))},Je(g(m)?g(o)("el.transfer.noMatch"):g(o)("el.transfer.noData")),3),[[an,g(m)||g(_o)(b.data)]])],2),g(p)?(k(),Y("p",{key:0,class:z(g(a).be("panel","footer"))},[ke(b.$slots,"default")],2)):Ee("v-if",!0)],2))}});var KP=Ze(bge,[["__file","transfer-panel.vue"]]);const wge={key:0},xge={key:0},Sge=se({name:"ElTransfer"}),Cge=se({...Sge,props:uf,emits:hge,setup(n,{expose:e,emit:t}){const i=n,s=hs(),{t:r}=en(),o=Ve("transfer"),{formItem:a}=Qs(),l=un({leftChecked:[],rightChecked:[]}),c=Yv(i),{sourceData:u,targetData:d}=vge(i),{onSourceCheckedChange:h,onTargetCheckedChange:f}=gge(l,t),{addToLeft:m,addToRight:p}=yge(i,l,t),y=V(),v=V(),_=T=>{switch(T){case"left":y.value.query="";break;case"right":v.value.query="";break}},b=R(()=>i.buttonTexts.length===2),w=R(()=>i.titles[0]||r("el.transfer.titles.0")),x=R(()=>i.titles[1]||r("el.transfer.titles.1")),S=R(()=>i.filterPlaceholder||r("el.transfer.filterPlaceholder"));ze(()=>i.modelValue,()=>{var T;i.validateEvent&&((T=a==null?void 0:a.validate)==null||T.call(a,"change").catch(M=>void 0))});const C=R(()=>T=>i.renderContent?i.renderContent(_t,T):s.default?s.default({option:T}):_t("span",T[c.value.label]||T[c.value.key]));return e({clearQuery:_,leftPanel:y,rightPanel:v}),(T,M)=>(k(),Y("div",{class:z(g(o).b())},[le(KP,{ref_key:"leftPanel",ref:y,data:g(u),"option-render":g(C),placeholder:g(S),title:g(w),filterable:T.filterable,format:T.format,"filter-method":T.filterMethod,"default-checked":T.leftDefaultChecked,props:i.props,onCheckedChange:g(h)},{default:pe(()=>[ke(T.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),te("div",{class:z(g(o).e("buttons"))},[le(g(as),{type:"primary",class:z([g(o).e("button"),g(o).is("with-texts",g(b))]),disabled:g(_o)(l.rightChecked),onClick:g(m)},{default:pe(()=>[le(g(dt),null,{default:pe(()=>[le(g(eu))]),_:1}),g(ki)(T.buttonTexts[0])?Ee("v-if",!0):(k(),Y("span",wge,Je(T.buttonTexts[0]),1))]),_:1},8,["class","disabled","onClick"]),le(g(as),{type:"primary",class:z([g(o).e("button"),g(o).is("with-texts",g(b))]),disabled:g(_o)(l.leftChecked),onClick:g(p)},{default:pe(()=>[g(ki)(T.buttonTexts[1])?Ee("v-if",!0):(k(),Y("span",xge,Je(T.buttonTexts[1]),1)),le(g(dt),null,{default:pe(()=>[le(g(ur))]),_:1})]),_:1},8,["class","disabled","onClick"])],2),le(KP,{ref_key:"rightPanel",ref:v,data:g(d),"option-render":g(C),placeholder:g(S),filterable:T.filterable,format:T.format,"filter-method":T.filterMethod,title:g(x),"default-checked":T.rightDefaultChecked,props:i.props,onCheckedChange:g(f)},{default:pe(()=>[ke(T.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2))}});var Mge=Ze(Cge,[["__file","transfer.vue"]]);const Ege=Ht(Mge),Lf="$treeNodeId",YP=function(n,e){!e||e[Lf]||Object.defineProperty(e,Lf,{value:n.id,enumerable:!1,configurable:!1,writable:!1})},r2=function(n,e){return n?e[n]:e[Lf]},rM=(n,e,t)=>{const i=n.value.currentNode;t();const s=n.value.currentNode;i!==s&&e("current-change",s?s.data:null,s)},oM=n=>{let e=!0,t=!0,i=!0;for(let s=0,r=n.length;s<r;s++){const o=n[s];(o.checked!==!0||o.indeterminate)&&(e=!1,o.disabled||(i=!1)),(o.checked!==!1||o.indeterminate)&&(t=!1)}return{all:e,none:t,allWithoutDisable:i,half:!e&&!t}},Cm=function(n){if(n.childNodes.length===0||n.loading)return;const{all:e,none:t,half:i}=oM(n.childNodes);e?(n.checked=!0,n.indeterminate=!1):i?(n.checked=!1,n.indeterminate=!0):t&&(n.checked=!1,n.indeterminate=!1);const s=n.parent;!s||s.level===0||n.store.checkStrictly||Cm(s)},N0=function(n,e){const t=n.store.props,i=n.data||{},s=t[e];if(typeof s=="function")return s(i,n);if(typeof s=="string")return i[s];if(typeof s>"u"){const r=i[e];return r===void 0?"":r}};let Tge=0,aM=class y_{constructor(e){this.id=Tge++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const t in e)Qt(e,t)&&(this[t]=e[t]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const e=this.store;if(!e)throw new Error("[Node]store is required!");e.registerNode(this);const t=e.props;if(t&&typeof t.isLeaf<"u"){const r=N0(this,"isLeaf");typeof r=="boolean"&&(this.isLeafByUser=r)}if(e.lazy!==!0&&this.data?(this.setData(this.data),e.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&e.lazy&&e.defaultExpandAll&&this.expand(),Array.isArray(this.data)||YP(this,this.data),!this.data)return;const i=e.defaultExpandedKeys,s=e.key;s&&i&&i.includes(this.key)&&this.expand(null,e.autoExpandParent),s&&e.currentNodeKey!==void 0&&this.key===e.currentNodeKey&&(e.currentNode=this,e.currentNode.isCurrent=!0),e.lazy&&e._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(e){Array.isArray(e)||YP(this,e),this.data=e,this.childNodes=[];let t;this.level===0&&Array.isArray(this.data)?t=this.data:t=N0(this,"children")||[];for(let i=0,s=t.length;i<s;i++)this.insertChild({data:t[i]})}get label(){return N0(this,"label")}get key(){const e=this.store.key;return this.data?this.data[e]:null}get disabled(){return N0(this,"disabled")}get nextSibling(){const e=this.parent;if(e){const t=e.childNodes.indexOf(this);if(t>-1)return e.childNodes[t+1]}return null}get previousSibling(){const e=this.parent;if(e){const t=e.childNodes.indexOf(this);if(t>-1)return t>0?e.childNodes[t-1]:null}return null}contains(e,t=!0){return(this.childNodes||[]).some(i=>i===e||t&&i.contains(e))}remove(){const e=this.parent;e&&e.removeChild(this)}insertChild(e,t,i){if(!e)throw new Error("InsertChild error: child is required.");if(!(e instanceof y_)){if(!i){const s=this.getChildren(!0);s.includes(e.data)||(typeof t>"u"||t<0?s.push(e.data):s.splice(t,0,e.data))}Object.assign(e,{parent:this,store:this.store}),e=un(new y_(e)),e instanceof y_&&e.initialize()}e.level=this.level+1,typeof t>"u"||t<0?this.childNodes.push(e):this.childNodes.splice(t,0,e),this.updateLeafState()}insertBefore(e,t){let i;t&&(i=this.childNodes.indexOf(t)),this.insertChild(e,i)}insertAfter(e,t){let i;t&&(i=this.childNodes.indexOf(t),i!==-1&&(i+=1)),this.insertChild(e,i)}removeChild(e){const t=this.getChildren()||[],i=t.indexOf(e.data);i>-1&&t.splice(i,1);const s=this.childNodes.indexOf(e);s>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(s,1)),this.updateLeafState()}removeChildByData(e){let t=null;for(let i=0;i<this.childNodes.length;i++)if(this.childNodes[i].data===e){t=this.childNodes[i];break}t&&this.removeChild(t)}expand(e,t){const i=()=>{if(t){let s=this.parent;for(;s.level>0;)s.expanded=!0,s=s.parent}this.expanded=!0,e&&e(),this.childNodes.forEach(s=>{s.canFocus=!0})};this.shouldLoadData()?this.loadData(s=>{Array.isArray(s)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||Cm(this),i())}):i()}doCreateChildren(e,t={}){e.forEach(i=>{this.insertChild(Object.assign({data:i},t),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(e=>{e.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const e=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!e||e.length===0;return}this.isLeaf=!1}setChecked(e,t,i,s){if(this.indeterminate=e==="half",this.checked=e===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:o,allWithoutDisable:a}=oM(this.childNodes);!this.isLeaf&&!o&&a&&(this.checked=!1,e=!1);const l=()=>{if(t){const c=this.childNodes;for(let h=0,f=c.length;h<f;h++){const m=c[h];s=s||e!==!1;const p=m.disabled?m.checked:s;m.setChecked(p,t,!0,s)}const{half:u,all:d}=oM(c);d||(this.checked=d,this.indeterminate=u)}};if(this.shouldLoadData()){this.loadData(()=>{l(),Cm(this)},{checked:e!==!1});return}else l()}const r=this.parent;!r||r.level===0||i||Cm(r)}getChildren(e=!1){if(this.level===0)return this.data;const t=this.data;if(!t)return null;const i=this.store.props;let s="children";return i&&(s=i.children||"children"),t[s]===void 0&&(t[s]=null),e&&!t[s]&&(t[s]=[]),t[s]}updateChildren(){const e=this.getChildren()||[],t=this.childNodes.map(r=>r.data),i={},s=[];e.forEach((r,o)=>{const a=r[Lf];!!a&&t.findIndex(c=>c[Lf]===a)>=0?i[a]={index:o,data:r}:s.push({index:o,data:r})}),this.store.lazy||t.forEach(r=>{i[r[Lf]]||this.removeChildByData(r)}),s.forEach(({index:r,data:o})=>{this.insertChild({data:o},r)}),this.updateLeafState()}loadData(e,t={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(t).length)){this.loading=!0;const i=r=>{this.childNodes=[],this.doCreateChildren(r,t),this.loaded=!0,this.loading=!1,this.updateLeafState(),e&&e.call(this,r)},s=()=>{this.loading=!1};this.store.load(this,i,s)}else e&&e.call(this)}eachNode(e){const t=[this];for(;t.length;){const i=t.shift();t.unshift(...i.childNodes),e(i)}}reInitChecked(){this.store.checkStrictly||Cm(this)}};class Age{constructor(e){this.currentNode=null,this.currentNodeKey=null;for(const t in e)Qt(e,t)&&(this[t]=e[t]);this.nodesMap={}}initialize(){if(this.root=new aM({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const e=this.load;e(this.root,t=>{this.root.doCreateChildren(t),this._initDefaultCheckedNodes()})}else this._initDefaultCheckedNodes()}filter(e){const t=this.filterNodeMethod,i=this.lazy,s=function(r){const o=r.root?r.root.childNodes:r.childNodes;if(o.forEach(a=>{a.visible=t.call(a,e,a.data,a),s(a)}),!r.visible&&o.length){let a=!0;a=!o.some(l=>l.visible),r.root?r.root.visible=a===!1:r.visible=a===!1}e&&r.visible&&!r.isLeaf&&(!i||r.loaded)&&r.expand()};s(this)}setData(e){e!==this.root.data?(this.root.setData(e),this._initDefaultCheckedNodes()):this.root.updateChildren()}getNode(e){if(e instanceof aM)return e;const t=$t(e)?r2(this.key,e):e;return this.nodesMap[t]||null}insertBefore(e,t){const i=this.getNode(t);i.parent.insertBefore({data:e},i)}insertAfter(e,t){const i=this.getNode(t);i.parent.insertAfter({data:e},i)}remove(e){const t=this.getNode(e);t&&t.parent&&(t===this.currentNode&&(this.currentNode=null),t.parent.removeChild(t))}append(e,t){const i=Hd(t)?this.root:this.getNode(t);i&&i.insertChild({data:e})}_initDefaultCheckedNodes(){const e=this.defaultCheckedKeys||[],t=this.nodesMap;e.forEach(i=>{const s=t[i];s&&s.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(e){(this.defaultCheckedKeys||[]).includes(e.key)&&e.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}registerNode(e){const t=this.key;!e||!e.data||(t?e.key!==void 0&&(this.nodesMap[e.key]=e):this.nodesMap[e.id]=e)}deregisterNode(e){!this.key||!e||!e.data||(e.childNodes.forEach(i=>{this.deregisterNode(i)}),delete this.nodesMap[e.key])}getCheckedNodes(e=!1,t=!1){const i=[],s=function(r){(r.root?r.root.childNodes:r.childNodes).forEach(a=>{(a.checked||t&&a.indeterminate)&&(!e||e&&a.isLeaf)&&i.push(a.data),s(a)})};return s(this),i}getCheckedKeys(e=!1){return this.getCheckedNodes(e).map(t=>(t||{})[this.key])}getHalfCheckedNodes(){const e=[],t=function(i){(i.root?i.root.childNodes:i.childNodes).forEach(r=>{r.indeterminate&&e.push(r.data),t(r)})};return t(this),e}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(e=>(e||{})[this.key])}_getAllNodes(){const e=[],t=this.nodesMap;for(const i in t)Qt(t,i)&&e.push(t[i]);return e}updateChildren(e,t){const i=this.nodesMap[e];if(!i)return;const s=i.childNodes;for(let r=s.length-1;r>=0;r--){const o=s[r];this.remove(o.data)}for(let r=0,o=t.length;r<o;r++){const a=t[r];this.append(a,i.data)}}_setCheckedKeys(e,t=!1,i){const s=this._getAllNodes().sort((l,c)=>l.level-c.level),r=Object.create(null),o=Object.keys(i);s.forEach(l=>l.setChecked(!1,!1));const a=l=>{l.childNodes.forEach(c=>{var u;r[c.data[e]]=!0,(u=c.childNodes)!=null&&u.length&&a(c)})};for(let l=0,c=s.length;l<c;l++){const u=s[l],d=u.data[e].toString();if(!o.includes(d)){u.checked&&!r[d]&&u.setChecked(!1,!1);continue}if(u.childNodes.length&&a(u),u.isLeaf||this.checkStrictly){u.setChecked(!0,!1);continue}if(u.setChecked(!0,!0),t){u.setChecked(!1,!1);const f=function(m){m.childNodes.forEach(y=>{y.isLeaf||y.setChecked(!1,!1),f(y)})};f(u)}}}setCheckedNodes(e,t=!1){const i=this.key,s={};e.forEach(r=>{s[(r||{})[i]]=!0}),this._setCheckedKeys(i,t,s)}setCheckedKeys(e,t=!1){this.defaultCheckedKeys=e;const i=this.key,s={};e.forEach(r=>{s[r]=!0}),this._setCheckedKeys(i,t,s)}setDefaultExpandedKeys(e){e=e||[],this.defaultExpandedKeys=e,e.forEach(t=>{const i=this.getNode(t);i&&i.expand(null,this.autoExpandParent)})}setChecked(e,t,i){const s=this.getNode(e);s&&s.setChecked(!!t,i)}getCurrentNode(){return this.currentNode}setCurrentNode(e){const t=this.currentNode;t&&(t.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}setUserCurrentNode(e,t=!0){const i=e[this.key],s=this.nodesMap[i];this.setCurrentNode(s),t&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(e,t=!0){if(e==null){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const i=this.getNode(e);i&&(this.setCurrentNode(i),t&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const Ige=se({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(n){const e=Ve("tree"),t=ct("NodeInstance"),i=ct("RootTree");return()=>{const s=n.node,{data:r,store:o}=s;return n.renderContent?n.renderContent(_t,{_self:t,node:s,data:r,store:o}):ke(i.ctx.slots,"default",{node:s,data:r},()=>[_t("span",{class:e.be("node","label")},[s.label])])}}});var Rge=Ze(Ige,[["__file","tree-node-content.vue"]]);function eU(n){const e=ct("TreeNodeMap",null),t={treeNodeExpand:i=>{n.node!==i&&n.node.collapse()},children:[]};return e&&e.children.push(t),Xt("TreeNodeMap",t),{broadcastExpanded:i=>{if(n.accordion)for(const s of t.children)s.treeNodeExpand(i)}}}const tU=Symbol("dragEvents");function Pge({props:n,ctx:e,el$:t,dropIndicator$:i,store:s}){const r=Ve("tree"),o=V({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return Xt(tU,{treeNodeDragStart:({event:u,treeNode:d})=>{if(typeof n.allowDrag=="function"&&!n.allowDrag(d.node))return u.preventDefault(),!1;u.dataTransfer.effectAllowed="move";try{u.dataTransfer.setData("text/plain","")}catch{}o.value.draggingNode=d,e.emit("node-drag-start",d.node,u)},treeNodeDragOver:({event:u,treeNode:d})=>{const h=d,f=o.value.dropNode;f&&f.node.id!==h.node.id&&Xs(f.$el,r.is("drop-inner"));const m=o.value.draggingNode;if(!m||!h)return;let p=!0,y=!0,v=!0,_=!0;typeof n.allowDrop=="function"&&(p=n.allowDrop(m.node,h.node,"prev"),_=y=n.allowDrop(m.node,h.node,"inner"),v=n.allowDrop(m.node,h.node,"next")),u.dataTransfer.dropEffect=y||p||v?"move":"none",(p||y||v)&&(f==null?void 0:f.node.id)!==h.node.id&&(f&&e.emit("node-drag-leave",m.node,f.node,u),e.emit("node-drag-enter",m.node,h.node,u)),p||y||v?o.value.dropNode=h:o.value.dropNode=null,h.node.nextSibling===m.node&&(v=!1),h.node.previousSibling===m.node&&(p=!1),h.node.contains(m.node,!1)&&(y=!1),(m.node===h.node||m.node.contains(h.node))&&(p=!1,y=!1,v=!1);const b=h.$el.querySelector(`.${r.be("node","content")}`).getBoundingClientRect(),w=t.value.getBoundingClientRect();let x;const S=p?y?.25:v?.45:1:-1,C=v?y?.75:p?.55:0:1;let T=-9999;const M=u.clientY-b.top;M<b.height*S?x="before":M>b.height*C?x="after":y?x="inner":x="none";const E=h.$el.querySelector(`.${r.be("node","expand-icon")}`).getBoundingClientRect(),A=i.value;x==="before"?T=E.top-w.top:x==="after"&&(T=E.bottom-w.top),A.style.top=`${T}px`,A.style.left=`${E.right-w.left}px`,x==="inner"?xo(h.$el,r.is("drop-inner")):Xs(h.$el,r.is("drop-inner")),o.value.showDropIndicator=x==="before"||x==="after",o.value.allowDrop=o.value.showDropIndicator||_,o.value.dropType=x,e.emit("node-drag-over",m.node,h.node,u)},treeNodeDragEnd:u=>{const{draggingNode:d,dropType:h,dropNode:f}=o.value;if(u.preventDefault(),u.dataTransfer.dropEffect="move",d&&f){const m={data:d.node.data};h!=="none"&&d.node.remove(),h==="before"?f.node.parent.insertBefore(m,f.node):h==="after"?f.node.parent.insertAfter(m,f.node):h==="inner"&&f.node.insertChild(m),h!=="none"&&(s.value.registerNode(m),s.value.key&&d.node.eachNode(p=>{var y;(y=s.value.nodesMap[p.data[s.value.key]])==null||y.setChecked(p.checked,!s.value.checkStrictly)})),Xs(f.$el,r.is("drop-inner")),e.emit("node-drag-end",d.node,f.node,h,u),h!=="none"&&e.emit("node-drop",d.node,f.node,h,u)}d&&!f&&e.emit("node-drag-end",d.node,null,h,u),o.value.showDropIndicator=!1,o.value.draggingNode=null,o.value.dropNode=null,o.value.allowDrop=!0}}),{dragState:o}}const Lge=se({name:"ElTreeNode",components:{ElCollapseTransition:z1,ElCheckbox:Do,NodeContent:Rge,ElIcon:dt,Loading:Ha},props:{node:{type:aM,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(n,e){const t=Ve("tree"),{broadcastExpanded:i}=eU(n),s=ct("RootTree"),r=V(!1),o=V(!1),a=V(null),l=V(null),c=V(null),u=ct(tU),d=zt();Xt("NodeInstance",d),n.node.expanded&&(r.value=!0,o.value=!0);const h=s.props.props.children||"children";ze(()=>{const M=n.node.data[h];return M&&[...M]},()=>{n.node.updateChildren()}),ze(()=>n.node.indeterminate,M=>{p(n.node.checked,M)}),ze(()=>n.node.checked,M=>{p(M,n.node.indeterminate)}),ze(()=>n.node.childNodes.length,()=>n.node.reInitChecked()),ze(()=>n.node.expanded,M=>{vt(()=>r.value=M),M&&(o.value=!0)});const f=M=>r2(s.props.nodeKey,M.data),m=M=>{const E=n.props.class;if(!E)return{};let A;if(xt(E)){const{data:I}=M;A=E(I,M)}else A=E;return Rt(A)?{[A]:!0}:A},p=(M,E)=>{(a.value!==M||l.value!==E)&&s.ctx.emit("check-change",n.node.data,M,E),a.value=M,l.value=E},y=M=>{rM(s.store,s.ctx.emit,()=>s.store.value.setCurrentNode(n.node)),s.currentNode.value=n.node,s.props.expandOnClickNode&&_(),s.props.checkOnClickNode&&!n.node.disabled&&b(null,{target:{checked:!n.node.checked}}),s.ctx.emit("node-click",n.node.data,n.node,d,M)},v=M=>{s.instance.vnode.props.onNodeContextmenu&&(M.stopPropagation(),M.preventDefault()),s.ctx.emit("node-contextmenu",M,n.node.data,n.node,d)},_=()=>{n.node.isLeaf||(r.value?(s.ctx.emit("node-collapse",n.node.data,n.node,d),n.node.collapse()):(n.node.expand(),e.emit("node-expand",n.node.data,n.node,d)))},b=(M,E)=>{n.node.setChecked(E.target.checked,!s.props.checkStrictly),vt(()=>{const A=s.store.value;s.ctx.emit("check",n.node.data,{checkedNodes:A.getCheckedNodes(),checkedKeys:A.getCheckedKeys(),halfCheckedNodes:A.getHalfCheckedNodes(),halfCheckedKeys:A.getHalfCheckedKeys()})})};return{ns:t,node$:c,tree:s,expanded:r,childNodeRendered:o,oldChecked:a,oldIndeterminate:l,getNodeKey:f,getNodeClass:m,handleSelectChange:p,handleClick:y,handleContextMenu:v,handleExpandIconClick:_,handleCheckChange:b,handleChildNodeExpand:(M,E,A)=>{i(E),s.ctx.emit("node-expand",M,E,A)},handleDragStart:M=>{s.props.draggable&&u.treeNodeDragStart({event:M,treeNode:n})},handleDragOver:M=>{M.preventDefault(),s.props.draggable&&u.treeNodeDragOver({event:M,treeNode:{$el:c.value,node:n.node}})},handleDrop:M=>{M.preventDefault()},handleDragEnd:M=>{s.props.draggable&&u.treeNodeDragEnd(M)},CaretRight:vN}}}),kge=["aria-expanded","aria-disabled","aria-checked","draggable","data-key"],Oge=["aria-expanded"];function Dge(n,e,t,i,s,r){const o=Ut("el-icon"),a=Ut("el-checkbox"),l=Ut("loading"),c=Ut("node-content"),u=Ut("el-tree-node"),d=Ut("el-collapse-transition");return Bt((k(),Y("div",{ref:"node$",class:z([n.ns.b("node"),n.ns.is("expanded",n.expanded),n.ns.is("current",n.node.isCurrent),n.ns.is("hidden",!n.node.visible),n.ns.is("focusable",!n.node.disabled),n.ns.is("checked",!n.node.disabled&&n.node.checked),n.getNodeClass(n.node)]),role:"treeitem",tabindex:"-1","aria-expanded":n.expanded,"aria-disabled":n.node.disabled,"aria-checked":n.node.checked,draggable:n.tree.props.draggable,"data-key":n.getNodeKey(n.node),onClick:e[1]||(e[1]=Tt((...h)=>n.handleClick&&n.handleClick(...h),["stop"])),onContextmenu:e[2]||(e[2]=(...h)=>n.handleContextMenu&&n.handleContextMenu(...h)),onDragstart:e[3]||(e[3]=Tt((...h)=>n.handleDragStart&&n.handleDragStart(...h),["stop"])),onDragover:e[4]||(e[4]=Tt((...h)=>n.handleDragOver&&n.handleDragOver(...h),["stop"])),onDragend:e[5]||(e[5]=Tt((...h)=>n.handleDragEnd&&n.handleDragEnd(...h),["stop"])),onDrop:e[6]||(e[6]=Tt((...h)=>n.handleDrop&&n.handleDrop(...h),["stop"]))},[te("div",{class:z(n.ns.be("node","content")),style:pt({paddingLeft:(n.node.level-1)*n.tree.props.indent+"px"})},[n.tree.props.icon||n.CaretRight?(k(),Re(o,{key:0,class:z([n.ns.be("node","expand-icon"),n.ns.is("leaf",n.node.isLeaf),{expanded:!n.node.isLeaf&&n.expanded}]),onClick:Tt(n.handleExpandIconClick,["stop"])},{default:pe(()=>[(k(),Re(Wt(n.tree.props.icon||n.CaretRight)))]),_:1},8,["class","onClick"])):Ee("v-if",!0),n.showCheckbox?(k(),Re(a,{key:1,"model-value":n.node.checked,indeterminate:n.node.indeterminate,disabled:!!n.node.disabled,onClick:e[0]||(e[0]=Tt(()=>{},["stop"])),onChange:n.handleCheckChange},null,8,["model-value","indeterminate","disabled","onChange"])):Ee("v-if",!0),n.node.loading?(k(),Re(o,{key:2,class:z([n.ns.be("node","loading-icon"),n.ns.is("loading")])},{default:pe(()=>[le(l)]),_:1},8,["class"])):Ee("v-if",!0),le(c,{node:n.node,"render-content":n.renderContent},null,8,["node","render-content"])],6),le(d,null,{default:pe(()=>[!n.renderAfterExpand||n.childNodeRendered?Bt((k(),Y("div",{key:0,class:z(n.ns.be("node","children")),role:"group","aria-expanded":n.expanded},[(k(!0),Y(mt,null,Zt(n.node.childNodes,h=>(k(),Re(u,{key:n.getNodeKey(h),"render-content":n.renderContent,"render-after-expand":n.renderAfterExpand,"show-checkbox":n.showCheckbox,node:h,accordion:n.accordion,props:n.props,onNodeExpand:n.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,Oge)),[[an,n.expanded]]):Ee("v-if",!0)]),_:1})],42,kge)),[[an,n.node.visible]])}var Nge=Ze(Lge,[["render",Dge],["__file","tree-node.vue"]]);function Fge({el$:n},e){const t=Ve("tree"),i=Vn([]),s=Vn([]);Ft(()=>{o()}),Kl(()=>{i.value=Array.from(n.value.querySelectorAll("[role=treeitem]")),s.value=Array.from(n.value.querySelectorAll("input[type=checkbox]"))}),ze(s,a=>{a.forEach(l=>{l.setAttribute("tabindex","-1")})}),Dn(n,"keydown",a=>{const l=a.target;if(!l.className.includes(t.b("node")))return;const c=a.code;i.value=Array.from(n.value.querySelectorAll(`.${t.is("focusable")}[role=treeitem]`));const u=i.value.indexOf(l);let d;if([wt.up,wt.down].includes(c)){if(a.preventDefault(),c===wt.up){d=u===-1?0:u!==0?u-1:i.value.length-1;const f=d;for(;!e.value.getNode(i.value[d].dataset.key).canFocus;){if(d--,d===f){d=-1;break}d<0&&(d=i.value.length-1)}}else{d=u===-1?0:u<i.value.length-1?u+1:0;const f=d;for(;!e.value.getNode(i.value[d].dataset.key).canFocus;){if(d++,d===f){d=-1;break}d>=i.value.length&&(d=0)}}d!==-1&&i.value[d].focus()}[wt.left,wt.right].includes(c)&&(a.preventDefault(),l.click());const h=l.querySelector('[type="checkbox"]');[wt.enter,wt.space].includes(c)&&h&&(a.preventDefault(),h.click())});const o=()=>{var a;i.value=Array.from(n.value.querySelectorAll(`.${t.is("focusable")}[role=treeitem]`)),s.value=Array.from(n.value.querySelectorAll("input[type=checkbox]"));const l=n.value.querySelectorAll(`.${t.is("checked")}[role=treeitem]`);if(l.length){l[0].setAttribute("tabindex","0");return}(a=i.value[0])==null||a.setAttribute("tabindex","0")}}const Bge=se({name:"ElTree",components:{ElTreeNode:Nge},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:xn}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(n,e){const{t}=en(),i=Ve("tree"),s=ct(kp,null),r=V(new Age({key:n.nodeKey,data:n.data,lazy:n.lazy,props:n.props,load:n.load,currentNodeKey:n.currentNodeKey,checkStrictly:n.checkStrictly,checkDescendants:n.checkDescendants,defaultCheckedKeys:n.defaultCheckedKeys,defaultExpandedKeys:n.defaultExpandedKeys,autoExpandParent:n.autoExpandParent,defaultExpandAll:n.defaultExpandAll,filterNodeMethod:n.filterNodeMethod}));r.value.initialize();const o=V(r.value.root),a=V(null),l=V(null),c=V(null),{broadcastExpanded:u}=eU(n),{dragState:d}=Pge({props:n,ctx:e,el$:l,dropIndicator$:c,store:r});Fge({el$:l},r);const h=R(()=>{const{childNodes:D}=o.value,L=s?s.hasFilteredOptions!==0:!1;return(!D||D.length===0||D.every(({visible:H})=>!H))&&!L});ze(()=>n.currentNodeKey,D=>{r.value.setCurrentNodeKey(D)}),ze(()=>n.defaultCheckedKeys,D=>{r.value.setDefaultCheckedKey(D)}),ze(()=>n.defaultExpandedKeys,D=>{r.value.setDefaultExpandedKeys(D)}),ze(()=>n.data,D=>{r.value.setData(D)},{deep:!0}),ze(()=>n.checkStrictly,D=>{r.value.checkStrictly=D});const f=D=>{if(!n.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");r.value.filter(D)},m=D=>r2(n.nodeKey,D.data),p=D=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const L=r.value.getNode(D);if(!L)return[];const H=[L.data];let X=L.parent;for(;X&&X!==o.value;)H.push(X.data),X=X.parent;return H.reverse()},y=(D,L)=>r.value.getCheckedNodes(D,L),v=D=>r.value.getCheckedKeys(D),_=()=>{const D=r.value.getCurrentNode();return D?D.data:null},b=()=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const D=_();return D?D[n.nodeKey]:null},w=(D,L)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");r.value.setCheckedNodes(D,L)},x=(D,L)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");r.value.setCheckedKeys(D,L)},S=(D,L,H)=>{r.value.setChecked(D,L,H)},C=()=>r.value.getHalfCheckedNodes(),T=()=>r.value.getHalfCheckedKeys(),M=(D,L=!0)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");rM(r,e.emit,()=>{u(D),r.value.setUserCurrentNode(D,L)})},E=(D,L=!0)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");rM(r,e.emit,()=>{u(),r.value.setCurrentNodeKey(D,L)})},A=D=>r.value.getNode(D),I=D=>{r.value.remove(D)},B=(D,L)=>{r.value.append(D,L)},F=(D,L)=>{r.value.insertBefore(D,L)},U=(D,L)=>{r.value.insertAfter(D,L)},P=(D,L,H)=>{u(L),e.emit("node-expand",D,L,H)},O=(D,L)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");r.value.updateChildren(D,L)};return Xt("RootTree",{ctx:e,props:n,store:r,root:o,currentNode:a,instance:zt()}),Xt(Ga,void 0),{ns:i,store:r,root:o,currentNode:a,dragState:d,el$:l,dropIndicator$:c,isEmpty:h,filter:f,getNodeKey:m,getNodePath:p,getCheckedNodes:y,getCheckedKeys:v,getCurrentNode:_,getCurrentKey:b,setCheckedNodes:w,setCheckedKeys:x,setChecked:S,getHalfCheckedNodes:C,getHalfCheckedKeys:T,setCurrentNode:M,setCurrentKey:E,t,getNode:A,remove:I,append:B,insertBefore:F,insertAfter:U,handleNodeExpand:P,updateKeyChildren:O}}});function Uge(n,e,t,i,s,r){const o=Ut("el-tree-node");return k(),Y("div",{ref:"el$",class:z([n.ns.b(),n.ns.is("dragging",!!n.dragState.draggingNode),n.ns.is("drop-not-allow",!n.dragState.allowDrop),n.ns.is("drop-inner",n.dragState.dropType==="inner"),{[n.ns.m("highlight-current")]:n.highlightCurrent}]),role:"tree"},[(k(!0),Y(mt,null,Zt(n.root.childNodes,a=>(k(),Re(o,{key:n.getNodeKey(a),node:a,props:n.props,accordion:n.accordion,"render-after-expand":n.renderAfterExpand,"show-checkbox":n.showCheckbox,"render-content":n.renderContent,onNodeExpand:n.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),n.isEmpty?(k(),Y("div",{key:0,class:z(n.ns.e("empty-block"))},[ke(n.$slots,"empty",{},()=>{var a;return[te("span",{class:z(n.ns.e("empty-text"))},Je((a=n.emptyText)!=null?a:n.t("el.tree.emptyText")),3)]})],2)):Ee("v-if",!0),Bt(te("div",{ref:"dropIndicator$",class:z(n.ns.e("drop-indicator"))},null,2),[[an,n.dragState.showDropIndicator]])],2)}var __=Ze(Bge,[["render",Uge],["__file","tree.vue"]]);__.install=n=>{n.component(__.name,__)};const sb=__,zge=sb,Hge=(n,{attrs:e,emit:t},{select:i,tree:s,key:r})=>{const o=Ve("tree-select");return ze(()=>n.data,()=>{n.filterable&&vt(()=>{var l,c;(c=s.value)==null||c.filter((l=i.value)==null?void 0:l.states.inputValue)})},{flush:"post"}),{...Aa(ws(n),Object.keys(Kd.props)),...e,"onUpdate:modelValue":l=>t(Gt,l),valueKey:r,popperClass:R(()=>{const l=[o.e("popper")];return n.popperClass&&l.push(n.popperClass),l.join(" ")}),filterMethod:(l="")=>{var c;n.filterMethod?n.filterMethod(l):n.remoteMethod?n.remoteMethod(l):(c=s.value)==null||c.filter(l)}}},Vge=se({extends:q_,setup(n,e){const t=q_.setup(n,e);delete t.selectOptionClick;const i=zt().proxy;return vt(()=>{t.select.states.cachedOptions.get(i.value)||t.select.onOptionCreate(i)}),ze(()=>e.attrs.visible,s=>{t.states.visible=s},{immediate:!0}),t},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function lM(n){return n||n===0}function o2(n){return Array.isArray(n)&&n.length}function qp(n){return Array.isArray(n)?n:lM(n)?[n]:[]}function b_(n,e,t,i,s){for(let r=0;r<n.length;r++){const o=n[r];if(e(o,r,n,s))return i?i(o,r,n,s):o;{const a=t(o);if(o2(a)){const l=b_(a,e,t,i,o);if(l)return l}}}}function cM(n,e,t,i){for(let s=0;s<n.length;s++){const r=n[s];e(r,s,n,i);const o=t(r);o2(o)&&cM(o,e,t,r)}}const $ge=(n,{attrs:e,slots:t,emit:i},{select:s,tree:r,key:o})=>{ze(()=>n.modelValue,()=>{n.showCheckbox&&vt(()=>{const d=r.value;d&&!Ys(d.getCheckedKeys(),qp(n.modelValue))&&d.setCheckedKeys(qp(n.modelValue))})},{immediate:!0,deep:!0});const a=R(()=>({value:o.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...n.props})),l=(d,h)=>{var f;const m=a.value[d];return xt(m)?m(h,(f=r.value)==null?void 0:f.getNode(l("value",h))):h[m]},c=qp(n.modelValue).map(d=>b_(n.data||[],h=>l("value",h)===d,h=>l("children",h),(h,f,m,p)=>p&&l("value",p))).filter(d=>lM(d)),u=R(()=>{if(!n.renderAfterExpand&&!n.lazy)return[];const d=[];return cM(n.data.concat(n.cacheData),h=>{const f=l("value",h);d.push({value:f,currentLabel:l("label",h),isDisabled:l("disabled",h)})},h=>l("children",h)),d});return{...Aa(ws(n),Object.keys(sb.props)),...e,nodeKey:o,expandOnClickNode:R(()=>!n.checkStrictly&&n.expandOnClickNode),defaultExpandedKeys:R(()=>n.defaultExpandedKeys?n.defaultExpandedKeys.concat(c):c),renderContent:(d,{node:h,data:f,store:m})=>d(Vge,{value:l("value",f),label:l("label",f),disabled:l("disabled",f),visible:h.visible},n.renderContent?()=>n.renderContent(d,{node:h,data:f,store:m}):t.default?()=>t.default({node:h,data:f,store:m}):void 0),filterNodeMethod:(d,h,f)=>n.filterNodeMethod?n.filterNodeMethod(d,h,f):d?new RegExp(KE(d),"i").test(l("label",h)||""):!0,onNodeClick:(d,h,f)=>{var m,p,y,v;if((m=e.onNodeClick)==null||m.call(e,d,h,f),!(n.showCheckbox&&n.checkOnClickNode)){if(!n.showCheckbox&&(n.checkStrictly||h.isLeaf)){if(!l("disabled",d)){const _=(p=s.value)==null?void 0:p.states.options.get(l("value",d));(y=s.value)==null||y.handleOptionSelect(_)}}else n.expandOnClickNode&&f.proxy.handleExpandIconClick();(v=s.value)==null||v.focus()}},onCheck:(d,h)=>{var f;if(!n.showCheckbox)return;const m=l("value",d),p={};cM([r.value.store.root],b=>p[b.key]=b,b=>b.childNodes);const y=h.checkedKeys,v=n.multiple?qp(n.modelValue).filter(b=>!(b in p)&&!y.includes(b)):[],_=v.concat(y);if(n.checkStrictly)i(Gt,n.multiple?_:_.includes(m)?m:void 0);else if(n.multiple)i(Gt,v.concat(r.value.getCheckedKeys(!0)));else{const b=b_([d],S=>!o2(l("children",S))&&!l("disabled",S),S=>l("children",S)),w=b?l("value",b):void 0,x=lM(n.modelValue)&&!!b_([d],S=>l("value",S)===n.modelValue,S=>l("children",S));i(Gt,w===n.modelValue||x?void 0:w)}vt(()=>{var b;const w=qp(n.modelValue);r.value.setCheckedKeys(w),(b=e.onCheck)==null||b.call(e,d,{checkedKeys:r.value.getCheckedKeys(),checkedNodes:r.value.getCheckedNodes(),halfCheckedKeys:r.value.getHalfCheckedKeys(),halfCheckedNodes:r.value.getHalfCheckedNodes()})}),(f=s.value)==null||f.focus()},cacheOptions:u}};var Gge=se({props:{data:{type:Array,default:()=>[]}},setup(n){const e=ct(kp);return ze(()=>n.data,()=>{var t;n.data.forEach(s=>{e.states.cachedOptions.has(s.value)||e.states.cachedOptions.set(s.value,s)});const i=((t=e.selectRef)==null?void 0:t.querySelectorAll("input"))||[];Jt&&!Array.from(i).includes(document.activeElement)&&e.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const Wge=se({name:"ElTreeSelect",inheritAttrs:!1,props:{...Kd.props,...sb.props,cacheData:{type:Array,default:()=>[]}},setup(n,e){const{slots:t,expose:i}=e,s=V(),r=V(),o=R(()=>n.nodeKey||n.valueKey||"value"),a=Hge(n,e,{select:s,tree:r,key:o}),{cacheOptions:l,...c}=$ge(n,e,{select:s,tree:r,key:o}),u=un({});return i(u),Ft(()=>{Object.assign(u,{...Aa(r.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...Aa(s.value,["focus","blur"])})}),()=>_t(Kd,un({...a,ref:d=>s.value=d}),{...t,default:()=>[_t(Gge,{data:l.value}),_t(sb,un({...c,ref:d=>r.value=d}))]})}});var w_=Ze(Wge,[["__file","tree-select.vue"]]);w_.install=n=>{n.component(w_.name,w_)};const Kge=w_,Yge=Kge,a2=Symbol(),Xge={key:-1,level:-1,data:{}};var Mm=(n=>(n.KEY="id",n.LABEL="label",n.CHILDREN="children",n.DISABLED="disabled",n))(Mm||{}),uM=(n=>(n.ADD="add",n.DELETE="delete",n))(uM||{});const nU={type:Number,default:26},jge=Ye({data:{type:ge(Array),default:()=>ni([])},emptyText:{type:String},height:{type:Number,default:200},props:{type:ge(Object),default:()=>ni({children:"children",label:"label",disabled:"disabled",value:"id"})},highlightCurrent:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},defaultCheckedKeys:{type:ge(Array),default:()=>ni([])},checkStrictly:{type:Boolean,default:!1},defaultExpandedKeys:{type:ge(Array),default:()=>ni([])},indent:{type:Number,default:16},itemSize:nU,icon:{type:xn},expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:{type:Boolean,default:!1},currentNodeKey:{type:ge([String,Number])},accordion:{type:Boolean,default:!1},filterMethod:{type:ge(Function)},perfMode:{type:Boolean,default:!0}}),qge=Ye({node:{type:ge(Object),default:()=>ni(Xge)},expanded:{type:Boolean,default:!1},checked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},current:{type:Boolean,default:!1},hiddenExpandIcon:{type:Boolean,default:!1},itemSize:nU}),Zge=Ye({node:{type:ge(Object),required:!0}}),iU="node-click",sU="node-expand",rU="node-collapse",oU="current-change",aU="check",lU="check-change",cU="node-contextmenu",Jge={[iU]:(n,e,t)=>n&&e&&t,[sU]:(n,e)=>n&&e,[rU]:(n,e)=>n&&e,[oU]:(n,e)=>n&&e,[aU]:(n,e)=>n&&e,[lU]:(n,e)=>n&&typeof e=="boolean",[cU]:(n,e,t)=>n&&e&&t},Qge={click:(n,e)=>!!(n&&e),toggle:n=>!!n,check:(n,e)=>n&&typeof e=="boolean"};function eve(n,e){const t=V(new Set),i=V(new Set),{emit:s}=zt();ze([()=>e.value,()=>n.defaultCheckedKeys],()=>vt(()=>{_(n.defaultCheckedKeys)}),{immediate:!0});const r=()=>{if(!e.value||!n.showCheckbox||n.checkStrictly)return;const{levelTreeNodeMap:b,maxLevel:w}=e.value,x=t.value,S=new Set;for(let C=w-1;C>=1;--C){const T=b.get(C);T&&T.forEach(M=>{const E=M.children;if(E){let A=!0,I=!1;for(const B of E){const F=B.key;if(x.has(F))I=!0;else if(S.has(F)){A=!1,I=!0;break}else A=!1}A?x.add(M.key):I?(S.add(M.key),x.delete(M.key)):(x.delete(M.key),S.delete(M.key))}})}i.value=S},o=b=>t.value.has(b.key),a=b=>i.value.has(b.key),l=(b,w,x=!0)=>{const S=t.value,C=(T,M)=>{S[M?uM.ADD:uM.DELETE](T.key);const E=T.children;!n.checkStrictly&&E&&E.forEach(A=>{A.disabled||C(A,M)})};C(b,w),r(),x&&c(b,w)},c=(b,w)=>{const{checkedNodes:x,checkedKeys:S}=m(),{halfCheckedNodes:C,halfCheckedKeys:T}=p();s(aU,b.data,{checkedKeys:S,checkedNodes:x,halfCheckedKeys:T,halfCheckedNodes:C}),s(lU,b.data,w)};function u(b=!1){return m(b).checkedKeys}function d(b=!1){return m(b).checkedNodes}function h(){return p().halfCheckedKeys}function f(){return p().halfCheckedNodes}function m(b=!1){const w=[],x=[];if(e!=null&&e.value&&n.showCheckbox){const{treeNodeMap:S}=e.value;t.value.forEach(C=>{const T=S.get(C);T&&(!b||b&&T.isLeaf)&&(x.push(C),w.push(T.data))})}return{checkedKeys:x,checkedNodes:w}}function p(){const b=[],w=[];if(e!=null&&e.value&&n.showCheckbox){const{treeNodeMap:x}=e.value;i.value.forEach(S=>{const C=x.get(S);C&&(w.push(S),b.push(C.data))})}return{halfCheckedNodes:b,halfCheckedKeys:w}}function y(b){t.value.clear(),i.value.clear(),vt(()=>{_(b)})}function v(b,w){if(e!=null&&e.value&&n.showCheckbox){const x=e.value.treeNodeMap.get(b);x&&l(x,w,!1)}}function _(b){if(e!=null&&e.value){const{treeNodeMap:w}=e.value;if(n.showCheckbox&&w&&b)for(const x of b){const S=w.get(x);S&&!o(S)&&l(S,!0,!1)}}}return{updateCheckedKeys:r,toggleCheckbox:l,isChecked:o,isIndeterminate:a,getCheckedKeys:u,getCheckedNodes:d,getHalfCheckedKeys:h,getHalfCheckedNodes:f,setChecked:v,setCheckedKeys:y}}function tve(n,e){const t=V(new Set([])),i=V(new Set([])),s=R(()=>xt(n.filterMethod));function r(a){var l;if(!s.value)return;const c=new Set,u=i.value,d=t.value,h=[],f=((l=e.value)==null?void 0:l.treeNodes)||[],m=n.filterMethod;d.clear();function p(y){y.forEach(v=>{h.push(v),m!=null&&m(a,v.data)?h.forEach(b=>{c.add(b.key)}):v.isLeaf&&d.add(v.key);const _=v.children;if(_&&p(_),!v.isLeaf){if(!c.has(v.key))d.add(v.key);else if(_){let b=!0;for(const w of _)if(!d.has(w.key)){b=!1;break}b?u.add(v.key):u.delete(v.key)}}h.pop()})}return p(f),c}function o(a){return i.value.has(a.key)}return{hiddenExpandIconKeySet:i,hiddenNodeKeySet:t,doFilter:r,isForceHiddenExpandIcon:o}}function nve(n,e){const t=V(new Set(n.defaultExpandedKeys)),i=V(),s=Vn();ze(()=>n.currentNodeKey,he=>{i.value=he},{immediate:!0}),ze(()=>n.data,he=>{re(he)},{immediate:!0});const{isIndeterminate:r,isChecked:o,toggleCheckbox:a,getCheckedKeys:l,getCheckedNodes:c,getHalfCheckedKeys:u,getHalfCheckedNodes:d,setChecked:h,setCheckedKeys:f}=eve(n,s),{doFilter:m,hiddenNodeKeySet:p,isForceHiddenExpandIcon:y}=tve(n,s),v=R(()=>{var he;return((he=n.props)==null?void 0:he.value)||Mm.KEY}),_=R(()=>{var he;return((he=n.props)==null?void 0:he.children)||Mm.CHILDREN}),b=R(()=>{var he;return((he=n.props)==null?void 0:he.disabled)||Mm.DISABLED}),w=R(()=>{var he;return((he=n.props)==null?void 0:he.label)||Mm.LABEL}),x=R(()=>{const he=t.value,Te=p.value,Ce=[],we=s.value&&s.value.treeNodes||[];function K(){const j=[];for(let ie=we.length-1;ie>=0;--ie)j.push(we[ie]);for(;j.length;){const ie=j.pop();if(ie&&(Te.has(ie.key)||Ce.push(ie),he.has(ie.key))){const ve=ie.children;if(ve){const ye=ve.length;for(let me=ye-1;me>=0;--me)j.push(ve[me])}}}}return K(),Ce}),S=R(()=>x.value.length>0);function C(he){const Te=new Map,Ce=new Map;let we=1;function K(ie,ve=1,ye=void 0){var me;const be=[];for(const Pe of ie){const Z=E(Pe),$={level:ve,key:Z,data:Pe};$.label=I(Pe),$.parent=ye;const de=M(Pe);$.disabled=A(Pe),$.isLeaf=!de||de.length===0,de&&de.length&&($.children=K(de,ve+1,$)),be.push($),Te.set(Z,$),Ce.has(ve)||Ce.set(ve,[]),(me=Ce.get(ve))==null||me.push($)}return ve>we&&(we=ve),be}const j=K(he);return{treeNodeMap:Te,levelTreeNodeMap:Ce,maxLevel:we,treeNodes:j}}function T(he){const Te=m(he);Te&&(t.value=Te)}function M(he){return he[_.value]}function E(he){return he?he[v.value]:""}function A(he){return he[b.value]}function I(he){return he[w.value]}function B(he){t.value.has(he.key)?L(he):D(he)}function F(he){t.value=new Set(he)}function U(he,Te){e(iU,he.data,he,Te),P(he),n.expandOnClickNode&&B(he),n.showCheckbox&&n.checkOnClickNode&&!he.disabled&&a(he,!o(he),!0)}function P(he){ne(he)||(i.value=he.key,e(oU,he.data,he))}function O(he,Te){a(he,Te)}function D(he){const Te=t.value;if(s.value&&n.accordion){const{treeNodeMap:Ce}=s.value;Te.forEach(we=>{const K=Ce.get(we);he&&he.level===(K==null?void 0:K.level)&&Te.delete(we)})}Te.add(he.key),e(sU,he.data,he)}function L(he){t.value.delete(he.key),e(rU,he.data,he)}function H(he){return t.value.has(he.key)}function X(he){return!!he.disabled}function ne(he){const Te=i.value;return Te!==void 0&&Te===he.key}function ce(){var he,Te;if(i.value)return(Te=(he=s.value)==null?void 0:he.treeNodeMap.get(i.value))==null?void 0:Te.data}function ae(){return i.value}function _e(he){i.value=he}function re(he){vt(()=>s.value=C(he))}function xe(he){var Te;const Ce=$t(he)?E(he):he;return(Te=s.value)==null?void 0:Te.treeNodeMap.get(Ce)}return{tree:s,flattenTree:x,isNotEmpty:S,getKey:E,getChildren:M,toggleExpand:B,toggleCheckbox:a,isExpanded:H,isChecked:o,isIndeterminate:r,isDisabled:X,isCurrent:ne,isForceHiddenExpandIcon:y,handleNodeClick:U,handleNodeCheck:O,getCurrentNode:ce,getCurrentKey:ae,setCurrentKey:_e,getCheckedKeys:l,getCheckedNodes:c,getHalfCheckedKeys:u,getHalfCheckedNodes:d,setChecked:h,setCheckedKeys:f,filter:T,setData:re,getNode:xe,expandNode:D,collapseNode:L,setExpandedKeys:F}}var ive=se({name:"ElTreeNodeContent",props:Zge,setup(n){const e=ct(a2),t=Ve("tree");return()=>{const i=n.node,{data:s}=i;return e!=null&&e.ctx.slots.default?e.ctx.slots.default({node:i,data:s}):_t("span",{class:t.be("node","label")},[i==null?void 0:i.label])}}});const sve=["aria-expanded","aria-disabled","aria-checked","data-key","onClick"],rve=se({name:"ElTreeNode"}),ove=se({...rve,props:qge,emits:Qge,setup(n,{emit:e}){const t=n,i=ct(a2),s=Ve("tree"),r=R(()=>{var d;return(d=i==null?void 0:i.props.indent)!=null?d:16}),o=R(()=>{var d;return(d=i==null?void 0:i.props.icon)!=null?d:vN}),a=d=>{e("click",t.node,d)},l=()=>{e("toggle",t.node)},c=d=>{e("check",t.node,d)},u=d=>{var h,f,m,p;(m=(f=(h=i==null?void 0:i.instance)==null?void 0:h.vnode)==null?void 0:f.props)!=null&&m.onNodeContextmenu&&(d.stopPropagation(),d.preventDefault()),i==null||i.ctx.emit(cU,d,(p=t.node)==null?void 0:p.data,t.node)};return(d,h)=>{var f,m,p;return k(),Y("div",{ref:"node$",class:z([g(s).b("node"),g(s).is("expanded",d.expanded),g(s).is("current",d.current),g(s).is("focusable",!d.disabled),g(s).is("checked",!d.disabled&&d.checked)]),role:"treeitem",tabindex:"-1","aria-expanded":d.expanded,"aria-disabled":d.disabled,"aria-checked":d.checked,"data-key":(f=d.node)==null?void 0:f.key,onClick:Tt(a,["stop"]),onContextmenu:u},[te("div",{class:z(g(s).be("node","content")),style:pt({paddingLeft:`${(d.node.level-1)*g(r)}px`,height:d.itemSize+"px"})},[g(o)?(k(),Re(g(dt),{key:0,class:z([g(s).is("leaf",!!((m=d.node)!=null&&m.isLeaf)),g(s).is("hidden",d.hiddenExpandIcon),{expanded:!((p=d.node)!=null&&p.isLeaf)&&d.expanded},g(s).be("node","expand-icon")]),onClick:Tt(l,["stop"])},{default:pe(()=>[(k(),Re(Wt(g(o))))]),_:1},8,["class","onClick"])):Ee("v-if",!0),d.showCheckbox?(k(),Re(g(Do),{key:1,"model-value":d.checked,indeterminate:d.indeterminate,disabled:d.disabled,onChange:c,onClick:h[0]||(h[0]=Tt(()=>{},["stop"]))},null,8,["model-value","indeterminate","disabled"])):Ee("v-if",!0),le(g(ive),{node:d.node},null,8,["node"])],6)],42,sve)}}});var ave=Ze(ove,[["__file","tree-node.vue"]]);const lve=se({name:"ElTreeV2"}),cve=se({...lve,props:jge,emits:Jge,setup(n,{expose:e,emit:t}){const i=n,s=hs(),r=R(()=>i.itemSize);Xt(a2,{ctx:{emit:t,slots:s},props:i,instance:zt()}),Xt(Ga,void 0);const{t:o}=en(),a=Ve("tree"),{flattenTree:l,isNotEmpty:c,toggleExpand:u,isExpanded:d,isIndeterminate:h,isChecked:f,isDisabled:m,isCurrent:p,isForceHiddenExpandIcon:y,handleNodeClick:v,handleNodeCheck:_,toggleCheckbox:b,getCurrentNode:w,getCurrentKey:x,setCurrentKey:S,getCheckedKeys:C,getCheckedNodes:T,getHalfCheckedKeys:M,getHalfCheckedNodes:E,setChecked:A,setCheckedKeys:I,filter:B,setData:F,getNode:U,expandNode:P,collapseNode:O,setExpandedKeys:D}=nve(i,t);return e({toggleCheckbox:b,getCurrentNode:w,getCurrentKey:x,setCurrentKey:S,getCheckedKeys:C,getCheckedNodes:T,getHalfCheckedKeys:M,getHalfCheckedNodes:E,setChecked:A,setCheckedKeys:I,filter:B,setData:F,getNode:U,expandNode:P,collapseNode:O,setExpandedKeys:D}),(L,H)=>{var X;return k(),Y("div",{class:z([g(a).b(),{[g(a).m("highlight-current")]:L.highlightCurrent}]),role:"tree"},[g(c)?(k(),Re(g(fB),{key:0,"class-name":g(a).b("virtual-list"),data:g(l),total:g(l).length,height:L.height,"item-size":g(r),"perf-mode":L.perfMode},{default:pe(({data:ne,index:ce,style:ae})=>[(k(),Re(ave,{key:ne[ce].key,style:pt(ae),node:ne[ce],expanded:g(d)(ne[ce]),"show-checkbox":L.showCheckbox,checked:g(f)(ne[ce]),indeterminate:g(h)(ne[ce]),"item-size":g(r),disabled:g(m)(ne[ce]),current:g(p)(ne[ce]),"hidden-expand-icon":g(y)(ne[ce]),onClick:g(v),onToggle:g(u),onCheck:g(_)},null,8,["style","node","expanded","show-checkbox","checked","indeterminate","item-size","disabled","current","hidden-expand-icon","onClick","onToggle","onCheck"]))]),_:1},8,["class-name","data","total","height","item-size","perf-mode"])):(k(),Y("div",{key:1,class:z(g(a).e("empty-block"))},[te("span",{class:z(g(a).e("empty-text"))},Je((X=L.emptyText)!=null?X:g(o)("el.tree.emptyText")),3)],2))],2)}}});var uve=Ze(cve,[["__file","tree.vue"]]);const dve=Ht(uve),uU=Symbol("uploadContextKey"),hve="ElUpload";class fve extends Error{constructor(e,t,i,s){super(e),this.name="UploadAjaxError",this.status=t,this.method=i,this.url=s}}function XP(n,e,t){let i;return t.response?i=`${t.response.error||t.response}`:t.responseText?i=`${t.responseText}`:i=`fail to ${e.method} ${n} ${t.status}`,new fve(i,t.status,e.method,n)}function pve(n){const e=n.responseText||n.response;if(!e)return e;try{return JSON.parse(e)}catch{return e}}const mve=n=>{typeof XMLHttpRequest>"u"&&qi(hve,"XMLHttpRequest is undefined");const e=new XMLHttpRequest,t=n.action;e.upload&&e.upload.addEventListener("progress",r=>{const o=r;o.percent=r.total>0?r.loaded/r.total*100:0,n.onProgress(o)});const i=new FormData;if(n.data)for(const[r,o]of Object.entries(n.data))rt(o)&&o.length?i.append(r,...o):i.append(r,o);i.append(n.filename,n.file,n.file.name),e.addEventListener("error",()=>{n.onError(XP(t,n,e))}),e.addEventListener("load",()=>{if(e.status<200||e.status>=300)return n.onError(XP(t,n,e));n.onSuccess(pve(e))}),e.open(n.method,t,!0),n.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);const s=n.headers||{};if(s instanceof Headers)s.forEach((r,o)=>e.setRequestHeader(o,r));else for(const[r,o]of Object.entries(s))os(o)||e.setRequestHeader(r,String(o));return e.send(i),e},dU=["text","picture","picture-card"];let gve=1;const dM=()=>Date.now()+gve++,hU=Ye({action:{type:String,default:"#"},headers:{type:ge(Object)},method:{type:String,default:"post"},data:{type:ge([Object,Function,Promise]),default:()=>ni({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:ge(Array),default:()=>ni([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:dU,default:"text"},httpRequest:{type:ge(Function),default:mve},disabled:Boolean,limit:Number}),vve=Ye({...hU,beforeUpload:{type:ge(Function),default:mn},beforeRemove:{type:ge(Function)},onRemove:{type:ge(Function),default:mn},onChange:{type:ge(Function),default:mn},onPreview:{type:ge(Function),default:mn},onSuccess:{type:ge(Function),default:mn},onProgress:{type:ge(Function),default:mn},onError:{type:ge(Function),default:mn},onExceed:{type:ge(Function),default:mn},crossorigin:{type:ge(String)}}),yve=Ye({files:{type:ge(Array),default:()=>ni([])},disabled:{type:Boolean,default:!1},handlePreview:{type:ge(Function),default:mn},listType:{type:String,values:dU,default:"text"},crossorigin:{type:ge(String)}}),_ve={remove:n=>!!n},bve=["onKeydown"],wve=["src","crossorigin"],xve=["onClick"],Sve=["title"],Cve=["onClick"],Mve=["onClick"],Eve=se({name:"ElUploadList"}),Tve=se({...Eve,props:yve,emits:_ve,setup(n,{emit:e}){const t=n,{t:i}=en(),s=Ve("upload"),r=Ve("icon"),o=Ve("list"),a=mr(),l=V(!1),c=R(()=>[s.b("list"),s.bm("list",t.listType),s.is("disabled",t.disabled)]),u=d=>{e("remove",d)};return(d,h)=>(k(),Re(pD,{tag:"ul",class:z(g(c)),name:g(o).b()},{default:pe(()=>[(k(!0),Y(mt,null,Zt(d.files,f=>(k(),Y("li",{key:f.uid||f.name,class:z([g(s).be("list","item"),g(s).is(f.status),{focusing:l.value}]),tabindex:"0",onKeydown:wn(m=>!g(a)&&u(f),["delete"]),onFocus:h[0]||(h[0]=m=>l.value=!0),onBlur:h[1]||(h[1]=m=>l.value=!1),onClick:h[2]||(h[2]=m=>l.value=!1)},[ke(d.$slots,"default",{file:f},()=>[d.listType==="picture"||f.status!=="uploading"&&d.listType==="picture-card"?(k(),Y("img",{key:0,class:z(g(s).be("list","item-thumbnail")),src:f.url,crossorigin:d.crossorigin,alt:""},null,10,wve)):Ee("v-if",!0),f.status==="uploading"||d.listType!=="picture-card"?(k(),Y("div",{key:1,class:z(g(s).be("list","item-info"))},[te("a",{class:z(g(s).be("list","item-name")),onClick:Tt(m=>d.handlePreview(f),["prevent"])},[le(g(dt),{class:z(g(r).m("document"))},{default:pe(()=>[le(g(MY))]),_:1},8,["class"]),te("span",{class:z(g(s).be("list","item-file-name")),title:f.name},Je(f.name),11,Sve)],10,xve),f.status==="uploading"?(k(),Re(g(sB),{key:0,type:d.listType==="picture-card"?"circle":"line","stroke-width":d.listType==="picture-card"?6:2,percentage:Number(f.percentage),style:pt(d.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):Ee("v-if",!0)],2)):Ee("v-if",!0),te("label",{class:z(g(s).be("list","item-status-label"))},[d.listType==="text"?(k(),Re(g(dt),{key:0,class:z([g(r).m("upload-success"),g(r).m("circle-check")])},{default:pe(()=>[le(g(jE))]),_:1},8,["class"])):["picture-card","picture"].includes(d.listType)?(k(),Re(g(dt),{key:1,class:z([g(r).m("upload-success"),g(r).m("check")])},{default:pe(()=>[le(g(Bv))]),_:1},8,["class"])):Ee("v-if",!0)],2),g(a)?Ee("v-if",!0):(k(),Re(g(dt),{key:2,class:z(g(r).m("close")),onClick:m=>u(f)},{default:pe(()=>[le(g(ia))]),_:2},1032,["class","onClick"])),Ee(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),Ee(" This is a bug which needs to be fixed "),Ee(" TODO: Fix the incorrect navigation interaction "),g(a)?Ee("v-if",!0):(k(),Y("i",{key:3,class:z(g(r).m("close-tip"))},Je(g(i)("el.upload.deleteTip")),3)),d.listType==="picture-card"?(k(),Y("span",{key:4,class:z(g(s).be("list","item-actions"))},[te("span",{class:z(g(s).be("list","item-preview")),onClick:m=>d.handlePreview(f)},[le(g(dt),{class:z(g(r).m("zoom-in"))},{default:pe(()=>[le(g(wN))]),_:1},8,["class"])],10,Cve),g(a)?Ee("v-if",!0):(k(),Y("span",{key:0,class:z(g(s).be("list","item-delete")),onClick:m=>u(f)},[le(g(dt),{class:z(g(r).m("delete"))},{default:pe(()=>[le(g(SY))]),_:1},8,["class"])],10,Mve))],2)):Ee("v-if",!0)])],42,bve))),128)),ke(d.$slots,"append")]),_:3},8,["class","name"]))}});var jP=Ze(Tve,[["__file","upload-list.vue"]]);const Ave=Ye({disabled:{type:Boolean,default:!1}}),Ive={file:n=>rt(n)},Rve=["onDrop","onDragover"],fU="ElUploadDrag",Pve=se({name:fU}),Lve=se({...Pve,props:Ave,emits:Ive,setup(n,{emit:e}){ct(uU)||qi(fU,"usage: <el-upload><el-upload-dragger /></el-upload>");const i=Ve("upload"),s=V(!1),r=mr(),o=l=>{if(r.value)return;s.value=!1,l.stopPropagation();const c=Array.from(l.dataTransfer.files);e("file",c)},a=()=>{r.value||(s.value=!0)};return(l,c)=>(k(),Y("div",{class:z([g(i).b("dragger"),g(i).is("dragover",s.value)]),onDrop:Tt(o,["prevent"]),onDragover:Tt(a,["prevent"]),onDragleave:c[0]||(c[0]=Tt(u=>s.value=!1,["prevent"]))},[ke(l.$slots,"default")],42,Rve))}});var kve=Ze(Lve,[["__file","upload-dragger.vue"]]);const Ove=Ye({...hU,beforeUpload:{type:ge(Function),default:mn},onRemove:{type:ge(Function),default:mn},onStart:{type:ge(Function),default:mn},onSuccess:{type:ge(Function),default:mn},onProgress:{type:ge(Function),default:mn},onError:{type:ge(Function),default:mn},onExceed:{type:ge(Function),default:mn}}),Dve=["onKeydown"],Nve=["name","multiple","accept"],Fve=se({name:"ElUploadContent",inheritAttrs:!1}),Bve=se({...Fve,props:Ove,setup(n,{expose:e}){const t=n,i=Ve("upload"),s=mr(),r=Vn({}),o=Vn(),a=p=>{if(p.length===0)return;const{autoUpload:y,limit:v,fileList:_,multiple:b,onStart:w,onExceed:x}=t;if(v&&_.length+p.length>v){x(p,_);return}b||(p=p.slice(0,1));for(const S of p){const C=S;C.uid=dM(),w(C),y&&l(C)}},l=async p=>{if(o.value.value="",!t.beforeUpload)return u(p);let y,v={};try{const b=t.data,w=t.beforeUpload(p);v=P_(t.data)?H_(t.data):t.data,y=await w,P_(t.data)&&Ys(b,v)&&(v=H_(t.data))}catch{y=!1}if(y===!1){t.onRemove(p);return}let _=p;y instanceof Blob&&(y instanceof File?_=y:_=new File([y],p.name,{type:p.type})),u(Object.assign(_,{uid:p.uid}),v)},c=async(p,y)=>xt(p)?p(y):p,u=async(p,y)=>{const{headers:v,data:_,method:b,withCredentials:w,name:x,action:S,onProgress:C,onSuccess:T,onError:M,httpRequest:E}=t;try{y=await c(y??_,p)}catch{t.onRemove(p);return}const{uid:A}=p,I={headers:v||{},withCredentials:w,file:p,data:y,method:b,filename:x,action:S,onProgress:F=>{C(F,p)},onSuccess:F=>{T(F,p),delete r.value[A]},onError:F=>{M(F,p),delete r.value[A]}},B=E(I);r.value[A]=B,B instanceof Promise&&B.then(I.onSuccess,I.onError)},d=p=>{const y=p.target.files;y&&a(Array.from(y))},h=()=>{s.value||(o.value.value="",o.value.click())},f=()=>{h()};return e({abort:p=>{jK(r.value).filter(p?([v])=>String(p.uid)===v:()=>!0).forEach(([v,_])=>{_ instanceof XMLHttpRequest&&_.abort(),delete r.value[v]})},upload:l}),(p,y)=>(k(),Y("div",{class:z([g(i).b(),g(i).m(p.listType),g(i).is("drag",p.drag)]),tabindex:"0",onClick:h,onKeydown:wn(Tt(f,["self"]),["enter","space"])},[p.drag?(k(),Re(kve,{key:0,disabled:g(s),onFile:a},{default:pe(()=>[ke(p.$slots,"default")]),_:3},8,["disabled"])):ke(p.$slots,"default",{key:1}),te("input",{ref_key:"inputRef",ref:o,class:z(g(i).e("input")),name:p.name,multiple:p.multiple,accept:p.accept,type:"file",onChange:d,onClick:y[0]||(y[0]=Tt(()=>{},["stop"]))},null,42,Nve)],42,Dve))}});var qP=Ze(Bve,[["__file","upload-content.vue"]]);const ZP="ElUpload",JP=n=>{var e;(e=n.url)!=null&&e.startsWith("blob:")&&URL.revokeObjectURL(n.url)},Uve=(n,e)=>{const t=ED(n,"fileList",void 0,{passive:!0}),i=h=>t.value.find(f=>f.uid===h.uid);function s(h){var f;(f=e.value)==null||f.abort(h)}function r(h=["ready","uploading","success","fail"]){t.value=t.value.filter(f=>!h.includes(f.status))}const o=(h,f)=>{const m=i(f);m&&(console.error(h),m.status="fail",t.value.splice(t.value.indexOf(m),1),n.onError(h,m,t.value),n.onChange(m,t.value))},a=(h,f)=>{const m=i(f);m&&(n.onProgress(h,m,t.value),m.status="uploading",m.percentage=Math.round(h.percent))},l=(h,f)=>{const m=i(f);m&&(m.status="success",m.response=h,n.onSuccess(h,m,t.value),n.onChange(m,t.value))},c=h=>{os(h.uid)&&(h.uid=dM());const f={name:h.name,percentage:0,status:"ready",size:h.size,raw:h,uid:h.uid};if(n.listType==="picture-card"||n.listType==="picture")try{f.url=URL.createObjectURL(h)}catch(m){m.message,n.onError(m,f,t.value)}t.value=[...t.value,f],n.onChange(f,t.value)},u=async h=>{const f=h instanceof File?i(h):h;f||qi(ZP,"file to be removed not found");const m=p=>{s(p);const y=t.value;y.splice(y.indexOf(p),1),n.onRemove(p,y),JP(p)};n.beforeRemove?await n.beforeRemove(f,t.value)!==!1&&m(f):m(f)};function d(){t.value.filter(({status:h})=>h==="ready").forEach(({raw:h})=>{var f;return h&&((f=e.value)==null?void 0:f.upload(h))})}return ze(()=>n.listType,h=>{h!=="picture-card"&&h!=="picture"||(t.value=t.value.map(f=>{const{raw:m,url:p}=f;if(!p&&m)try{f.url=URL.createObjectURL(m)}catch(y){n.onError(y,f,t.value)}return f}))}),ze(t,h=>{for(const f of h)f.uid||(f.uid=dM()),f.status||(f.status="success")},{immediate:!0,deep:!0}),{uploadFiles:t,abort:s,clearFiles:r,handleError:o,handleProgress:a,handleStart:c,handleSuccess:l,handleRemove:u,submit:d,revokeFileObjectURL:JP}},zve=se({name:"ElUpload"}),Hve=se({...zve,props:vve,setup(n,{expose:e}){const t=n,i=mr(),s=Vn(),{abort:r,submit:o,clearFiles:a,uploadFiles:l,handleStart:c,handleError:u,handleRemove:d,handleSuccess:h,handleProgress:f,revokeFileObjectURL:m}=Uve(t,s),p=R(()=>t.listType==="picture-card"),y=R(()=>({...t,fileList:l.value,onStart:c,onProgress:f,onSuccess:h,onError:u,onRemove:d}));return kn(()=>{l.value.forEach(m)}),Xt(uU,{accept:vn(t,"accept")}),e({abort:r,submit:o,clearFiles:a,handleStart:c,handleRemove:d}),(v,_)=>(k(),Y("div",null,[g(p)&&v.showFileList?(k(),Re(jP,{key:0,disabled:g(i),"list-type":v.listType,files:g(l),crossorigin:v.crossorigin,"handle-preview":v.onPreview,onRemove:g(d)},Il({append:pe(()=>[le(qP,Kt({ref_key:"uploadRef",ref:s},g(y)),{default:pe(()=>[v.$slots.trigger?ke(v.$slots,"trigger",{key:0}):Ee("v-if",!0),!v.$slots.trigger&&v.$slots.default?ke(v.$slots,"default",{key:1}):Ee("v-if",!0)]),_:3},16)]),_:2},[v.$slots.file?{name:"default",fn:pe(({file:b})=>[ke(v.$slots,"file",{file:b})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):Ee("v-if",!0),!g(p)||g(p)&&!v.showFileList?(k(),Re(qP,Kt({key:1,ref_key:"uploadRef",ref:s},g(y)),{default:pe(()=>[v.$slots.trigger?ke(v.$slots,"trigger",{key:0}):Ee("v-if",!0),!v.$slots.trigger&&v.$slots.default?ke(v.$slots,"default",{key:1}):Ee("v-if",!0)]),_:3},16)):Ee("v-if",!0),v.$slots.trigger?ke(v.$slots,"default",{key:2}):Ee("v-if",!0),ke(v.$slots,"tip"),!g(p)&&v.showFileList?(k(),Re(jP,{key:3,disabled:g(i),"list-type":v.listType,files:g(l),crossorigin:v.crossorigin,"handle-preview":v.onPreview,onRemove:g(d)},Il({_:2},[v.$slots.file?{name:"default",fn:pe(({file:b})=>[ke(v.$slots,"file",{file:b})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):Ee("v-if",!0)]))}});var Vve=Ze(Hve,[["__file","upload.vue"]]);const $ve=Ht(Vve),Gve=Ye({zIndex:{type:Number,default:9},rotate:{type:Number,default:-22},width:Number,height:Number,image:String,content:{type:ge([String,Array]),default:"Element Plus"},font:{type:ge(Object)},gap:{type:ge(Array),default:()=>[100,100]},offset:{type:ge(Array)}});function Wve(n){return n.replace(/([A-Z])/g,"-$1").toLowerCase()}function Kve(n){return Object.keys(n).map(e=>`${Wve(e)}: ${n[e]};`).join(" ")}function Yve(){return window.devicePixelRatio||1}const Xve=(n,e)=>{let t=!1;return n.removedNodes.length&&e&&(t=Array.from(n.removedNodes).includes(e)),n.type==="attributes"&&n.target===e&&(t=!0),t},pU=3;function Sx(n,e,t=1){const i=document.createElement("canvas"),s=i.getContext("2d"),r=n*t,o=e*t;return i.setAttribute("width",`${r}px`),i.setAttribute("height",`${o}px`),s.save(),[s,i,r,o]}function jve(){function n(e,t,i,s,r,o,a,l){const[c,u,d,h]=Sx(s,r,i);if(e instanceof HTMLImageElement)c.drawImage(e,0,0,d,h);else{const{color:X,fontSize:ne,fontStyle:ce,fontWeight:ae,fontFamily:_e,textAlign:re,textBaseline:xe}=o,he=Number(ne)*i;c.font=`${ce} normal ${ae} ${he}px/${r}px ${_e}`,c.fillStyle=X,c.textAlign=re,c.textBaseline=xe;const Te=Array.isArray(e)?e:[e];Te==null||Te.forEach((Ce,we)=>{c.fillText(Ce??"",d/2,we*(he+pU*i))})}const f=Math.PI/180*Number(t),m=Math.max(s,r),[p,y,v]=Sx(m,m,i);p.translate(v/2,v/2),p.rotate(f),d>0&&h>0&&p.drawImage(u,-d/2,-h/2);function _(X,ne){const ce=X*Math.cos(f)-ne*Math.sin(f),ae=X*Math.sin(f)+ne*Math.cos(f);return[ce,ae]}let b=0,w=0,x=0,S=0;const C=d/2,T=h/2;[[0-C,0-T],[0+C,0-T],[0+C,0+T],[0-C,0+T]].forEach(([X,ne])=>{const[ce,ae]=_(X,ne);b=Math.min(b,ce),w=Math.max(w,ce),x=Math.min(x,ae),S=Math.max(S,ae)});const E=b+v/2,A=x+v/2,I=w-b,B=S-x,F=a*i,U=l*i,P=(I+F)*2,O=B+U,[D,L]=Sx(P,O);function H(X=0,ne=0){D.drawImage(y,E,A,I,B,X,ne,I,B)}return H(),H(I+F,-B/2-U/2),H(I+F,+B/2+U/2),[L.toDataURL(),P/i,O/i]}return n}const qve=se({name:"ElWatermark"}),Zve=se({...qve,props:Gve,setup(n){const e=n,t={position:"relative"},i=R(()=>{var E,A;return(A=(E=e.font)==null?void 0:E.color)!=null?A:"rgba(0,0,0,.15)"}),s=R(()=>{var E,A;return(A=(E=e.font)==null?void 0:E.fontSize)!=null?A:16}),r=R(()=>{var E,A;return(A=(E=e.font)==null?void 0:E.fontWeight)!=null?A:"normal"}),o=R(()=>{var E,A;return(A=(E=e.font)==null?void 0:E.fontStyle)!=null?A:"normal"}),a=R(()=>{var E,A;return(A=(E=e.font)==null?void 0:E.fontFamily)!=null?A:"sans-serif"}),l=R(()=>{var E,A;return(A=(E=e.font)==null?void 0:E.textAlign)!=null?A:"center"}),c=R(()=>{var E,A;return(A=(E=e.font)==null?void 0:E.textBaseline)!=null?A:"hanging"}),u=R(()=>e.gap[0]),d=R(()=>e.gap[1]),h=R(()=>u.value/2),f=R(()=>d.value/2),m=R(()=>{var E,A;return(A=(E=e.offset)==null?void 0:E[0])!=null?A:h.value}),p=R(()=>{var E,A;return(A=(E=e.offset)==null?void 0:E[1])!=null?A:f.value}),y=()=>{const E={zIndex:e.zIndex,position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",backgroundRepeat:"repeat"};let A=m.value-h.value,I=p.value-f.value;return A>0&&(E.left=`${A}px`,E.width=`calc(100% - ${A}px)`,A=0),I>0&&(E.top=`${I}px`,E.height=`calc(100% - ${I}px)`,I=0),E.backgroundPosition=`${A}px ${I}px`,E},v=Vn(null),_=Vn(),b=V(!1),w=()=>{_.value&&(_.value.remove(),_.value=void 0)},x=(E,A)=>{var I;v.value&&_.value&&(b.value=!0,_.value.setAttribute("style",Kve({...y(),backgroundImage:`url('${E}')`,backgroundSize:`${Math.floor(A)}px`})),(I=v.value)==null||I.append(_.value),setTimeout(()=>{b.value=!1}))},S=E=>{let A=120,I=64;const B=e.image,F=e.content,U=e.width,P=e.height;if(!B&&E.measureText){E.font=`${Number(s.value)}px ${a.value}`;const O=Array.isArray(F)?F:[F],D=O.map(L=>{const H=E.measureText(L);return[H.width,H.fontBoundingBoxAscent!==void 0?H.fontBoundingBoxAscent+H.fontBoundingBoxDescent:H.actualBoundingBoxAscent+H.actualBoundingBoxDescent]});A=Math.ceil(Math.max(...D.map(L=>L[0]))),I=Math.ceil(Math.max(...D.map(L=>L[1])))*O.length+(O.length-1)*pU}return[U??A,P??I]},C=jve(),T=()=>{const A=document.createElement("canvas").getContext("2d"),I=e.image,B=e.content,F=e.rotate;if(A){_.value||(_.value=document.createElement("div"));const U=Yve(),[P,O]=S(A),D=L=>{const[H,X]=C(L||"",F,U,P,O,{color:i.value,fontSize:s.value,fontStyle:o.value,fontWeight:r.value,fontFamily:a.value,textAlign:l.value,textBaseline:c.value},u.value,d.value);x(H,X)};if(I){const L=new Image;L.onload=()=>{D(L)},L.onerror=()=>{D(B)},L.crossOrigin="anonymous",L.referrerPolicy="no-referrer",L.src=I}else D(B)}};return Ft(()=>{T()}),ze(()=>e,()=>{T()},{deep:!0,flush:"post"}),kn(()=>{w()}),MD(v,E=>{b.value||E.forEach(A=>{Xve(A,_.value)&&(w(),T())})},{attributes:!0,subtree:!0,childList:!0}),(E,A)=>(k(),Y("div",{ref_key:"containerRef",ref:v,style:pt([t])},[ke(E.$slots,"default")],4))}});var Jve=Ze(Zve,[["__file","watermark.vue"]]);const Qve=Ht(Jve),e0e=Ye({zIndex:{type:Number,default:1001},visible:Boolean,fill:{type:String,default:"rgba(0,0,0,0.5)"},pos:{type:ge(Object)},targetAreaClickable:{type:Boolean,default:!0}}),t0e=(n,e,t,i,s)=>{const r=V(null),o=()=>{let d;return Rt(n.value)?d=document.querySelector(n.value):xt(n.value)?d=n.value():d=n.value,d},a=()=>{const d=o();if(!d||!e.value){r.value=null;return}!n0e(d)&&e.value&&d.scrollIntoView(s.value);const{left:h,top:f,width:m,height:p}=d.getBoundingClientRect();r.value={left:h,top:f,width:m,height:p,radius:0}};Ft(()=>{ze([e,n],()=>{a()},{immediate:!0}),window.addEventListener("resize",a)}),kn(()=>{window.removeEventListener("resize",a)});const l=d=>{var h;return(h=rt(t.value.offset)?t.value.offset[d]:t.value.offset)!=null?h:6},c=R(()=>{var d;if(!r.value)return r.value;const h=l(0),f=l(1),m=((d=t.value)==null?void 0:d.radius)||2;return{left:r.value.left-h,top:r.value.top-f,width:r.value.width+h*2,height:r.value.height+f*2,radius:m}}),u=R(()=>{const d=o();return!i.value||!d||!window.DOMRect?d||void 0:{getBoundingClientRect(){var h,f,m,p;return window.DOMRect.fromRect({width:((h=c.value)==null?void 0:h.width)||0,height:((f=c.value)==null?void 0:f.height)||0,x:((m=c.value)==null?void 0:m.left)||0,y:((p=c.value)==null?void 0:p.top)||0})}}});return{mergedPosInfo:c,triggerTarget:u}},K1=Symbol("ElTour");function n0e(n){const e=window.innerWidth||document.documentElement.clientWidth,t=window.innerHeight||document.documentElement.clientHeight,{top:i,right:s,bottom:r,left:o}=n.getBoundingClientRect();return i>=0&&o>=0&&s<=e&&r<=t}const i0e=(n,e,t,i,s,r,o,a)=>{const l=V(),c=V(),u=V({}),d={x:l,y:c,placement:i,strategy:s,middlewareData:u},h=R(()=>{const v=[e4(g(r)),Tq(),Eq(),s0e()];return g(a)&&g(t)&&v.push(t4({element:g(t)})),v}),f=async()=>{if(!Jt)return;const v=g(n),_=g(e);if(!v||!_)return;const b=await n4(v,_,{placement:g(i),strategy:g(s),middleware:g(h)});jf(d).forEach(w=>{d[w].value=b[w]})},m=R(()=>{if(!g(n))return{position:"fixed",top:"50%",left:"50%",transform:"translate3d(-50%, -50%, 0)",maxWidth:"100vw",zIndex:g(o)};const{overflow:v}=g(u);return{position:g(s),zIndex:g(o),top:g(c)!=null?`${g(c)}px`:"",left:g(l)!=null?`${g(l)}px`:"",maxWidth:v!=null&&v.maxWidth?`${v==null?void 0:v.maxWidth}px`:""}}),p=R(()=>{if(!g(a))return{};const{arrow:v}=g(u);return{left:(v==null?void 0:v.x)!=null?`${v==null?void 0:v.x}px`:"",top:(v==null?void 0:v.y)!=null?`${v==null?void 0:v.y}px`:""}});let y;return Ft(()=>{const v=g(n),_=g(e);v&&_&&(y=Cq(v,_,f)),Is(()=>{f()})}),kn(()=>{y&&y()}),{update:f,contentStyle:m,arrowStyle:p}},s0e=()=>({name:"overflow",async fn(n){const e=await Mq(n);let t=0;return e.left>0&&(t=e.left),e.right>0&&(t=e.right),{data:{maxWidth:n.rects.floating.width-t}}}}),r0e={style:{width:"100%",height:"100%"}},o0e=["d"],a0e=se({name:"ElTourMask",inheritAttrs:!1}),l0e=se({...a0e,props:e0e,setup(n){const e=n,{ns:t}=ct(K1),i=R(()=>{var a,l;return(l=(a=e.pos)==null?void 0:a.radius)!=null?l:2}),s=R(()=>{const a=i.value,l=`a${a},${a} 0 0 1`;return{topRight:`${l} ${a},${a}`,bottomRight:`${l} ${-a},${a}`,bottomLeft:`${l} ${-a},${-a}`,topLeft:`${l} ${a},${-a}`}}),r=R(()=>{const a=window.innerWidth,l=window.innerHeight,c=s.value,u=`M${a},0 L0,0 L0,${l} L${a},${l} L${a},0 Z`,d=i.value;return e.pos?`${u} M${e.pos.left+d},${e.pos.top} h${e.pos.width-d*2} ${c.topRight} v${e.pos.height-d*2} ${c.bottomRight} h${-e.pos.width+d*2} ${c.bottomLeft} v${-e.pos.height+d*2} ${c.topLeft} z`:u}),o=R(()=>({fill:e.fill,pointerEvents:"auto",cursor:"auto"}));return sT(vn(e,"visible"),{ns:t}),(a,l)=>a.visible?(k(),Y("div",Kt({key:0,class:g(t).e("mask"),style:{position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:a.zIndex,pointerEvents:a.pos&&a.targetAreaClickable?"none":"auto"}},a.$attrs),[(k(),Y("svg",r0e,[te("path",{class:z(g(t).e("hollow")),style:pt(g(o)),d:g(r)},null,14,o0e)]))],16)):Ee("v-if",!0)}});var c0e=Ze(l0e,[["__file","mask.vue"]]);const u0e=["absolute","fixed"],d0e=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],l2=Ye({placement:{type:ge(String),values:d0e,default:"bottom"},reference:{type:ge(Object),default:null},strategy:{type:ge(String),values:u0e,default:"absolute"},offset:{type:Number,default:10},showArrow:Boolean,zIndex:{type:Number,default:2001}}),h0e={close:()=>!0},f0e=["data-side"],p0e=se({name:"ElTourContent"}),m0e=se({...p0e,props:l2,emits:h0e,setup(n,{emit:e}){const t=n,i=V(t.placement),s=V(t.strategy),r=V(null),o=V(null);ze(()=>t.placement,()=>{i.value=t.placement});const{contentStyle:a,arrowStyle:l}=i0e(vn(t,"reference"),r,o,i,s,vn(t,"offset"),vn(t,"zIndex"),vn(t,"showArrow")),c=R(()=>i.value.split("-")[0]),{ns:u}=ct(K1),d=()=>{e("close")},h=f=>{f.detail.focusReason==="pointer"&&f.preventDefault()};return(f,m)=>(k(),Y("div",{ref_key:"contentRef",ref:r,style:pt(g(a)),class:z(g(u).e("content")),"data-side":g(c),tabindex:"-1"},[le(g(Wv),{loop:"",trapped:"","focus-start-el":"container","focus-trap-el":r.value||void 0,onReleaseRequested:d,onFocusoutPrevented:h},{default:pe(()=>[ke(f.$slots,"default")]),_:3},8,["focus-trap-el"]),f.showArrow?(k(),Y("span",{key:0,ref_key:"arrowRef",ref:o,style:pt(g(l)),class:z(g(u).e("arrow"))},null,6)):Ee("v-if",!0)],14,f0e))}});var g0e=Ze(m0e,[["__file","content.vue"]]),v0e=se({name:"ElTourSteps",props:{current:{type:Number,default:0}},emits:["update-total"],setup(n,{slots:e,emit:t}){let i=0;return()=>{var s,r;const o=(s=e.default)==null?void 0:s.call(e),a=[];let l=0;function c(u){rt(u)&&u.forEach(d=>{var h;((h=(d==null?void 0:d.type)||{})==null?void 0:h.name)==="ElTourStep"&&(a.push(d),l+=1)})}return o.length&&c(Wc((r=o[0])==null?void 0:r.children)),i!==l&&(i=l,t("update-total",l)),a.length?a[n.current]:null}}});const y0e=Ye({modelValue:Boolean,current:{type:Number,default:0},showArrow:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeIcon:{type:xn},placement:l2.placement,contentStyle:{type:ge([Object])},mask:{type:ge([Boolean,Object]),default:!0},gap:{type:ge(Object),default:()=>({offset:6,radius:2})},zIndex:{type:Number},scrollIntoViewOptions:{type:ge([Boolean,Object]),default:()=>({block:"center"})},type:{type:ge(String)},appendTo:{type:ge([String,Object]),default:"body"},closeOnPressEscape:{type:Boolean,default:!0},targetAreaClickable:{type:Boolean,default:!0}}),_0e={[Gt]:n=>_i(n),"update:current":n=>Ct(n),close:n=>Ct(n),finish:()=>!0,change:n=>Ct(n)},b0e=se({name:"ElTour"}),w0e=se({...b0e,props:y0e,emits:_0e,setup(n,{emit:e}){const t=n,i=Ve("tour"),s=V(0),r=V(),o=ED(t,"current",e,{passive:!0}),a=R(()=>{var M;return(M=r.value)==null?void 0:M.target}),l=R(()=>[i.b(),y.value==="primary"?i.m("primary"):""]),c=R(()=>{var M;return((M=r.value)==null?void 0:M.placement)||t.placement}),u=R(()=>{var M,E;return(E=(M=r.value)==null?void 0:M.contentStyle)!=null?E:t.contentStyle}),d=R(()=>{var M,E;return(E=(M=r.value)==null?void 0:M.mask)!=null?E:t.mask}),h=R(()=>!!d.value&&t.modelValue),f=R(()=>_i(d.value)?void 0:d.value),m=R(()=>{var M,E;return!!a.value&&((E=(M=r.value)==null?void 0:M.showArrow)!=null?E:t.showArrow)}),p=R(()=>{var M,E;return(E=(M=r.value)==null?void 0:M.scrollIntoViewOptions)!=null?E:t.scrollIntoViewOptions}),y=R(()=>{var M,E;return(E=(M=r.value)==null?void 0:M.type)!=null?E:t.type}),{nextZIndex:v}=Ip(),_=v(),b=R(()=>{var M;return(M=t.zIndex)!=null?M:_}),{mergedPosInfo:w,triggerTarget:x}=t0e(a,vn(t,"modelValue"),vn(t,"gap"),d,p);ze(()=>t.modelValue,M=>{M||(o.value=0)});const S=()=>{t.closeOnPressEscape&&(e("update:modelValue",!1),e("close",o.value))},C=M=>{s.value=M},T=hs();return Xt(K1,{currentStep:r,current:o,total:s,showClose:vn(t,"showClose"),closeIcon:vn(t,"closeIcon"),mergedType:y,ns:i,slots:T,updateModelValue(M){e("update:modelValue",M)},onClose(){e("close",o.value)},onFinish(){e("finish")},onChange(){e("change",o.value)}}),(M,E)=>{var A,I;return k(),Y(mt,null,[(k(),Re(Sp,{to:M.appendTo},[te("div",Kt({class:g(l)},M.$attrs),[le(c0e,{visible:g(h),fill:(A=g(f))==null?void 0:A.color,style:pt((I=g(f))==null?void 0:I.style),pos:g(w),"z-index":g(b),"target-area-clickable":M.targetAreaClickable},null,8,["visible","fill","style","pos","z-index","target-area-clickable"]),M.modelValue?(k(),Re(g0e,{key:g(o),reference:g(x),placement:g(c),"show-arrow":g(m),"z-index":g(b),style:pt(g(u)),onClose:S},{default:pe(()=>[le(g(v0e),{current:g(o),onUpdateTotal:C},{default:pe(()=>[ke(M.$slots,"default")]),_:3},8,["current"])]),_:3},8,["reference","placement","show-arrow","z-index","style"])):Ee("v-if",!0)],16)],8,["to"])),Ee(" just for IDE "),Ee("v-if",!0)],64)}}});var x0e=Ze(w0e,[["__file","tour.vue"]]);const S0e=Ye({target:{type:ge([String,Object,Function])},title:String,description:String,showClose:{type:Boolean,default:void 0},closeIcon:{type:xn},showArrow:{type:Boolean,default:void 0},placement:l2.placement,mask:{type:ge([Boolean,Object]),default:void 0},contentStyle:{type:ge([Object])},prevButtonProps:{type:ge(Object)},nextButtonProps:{type:ge(Object)},scrollIntoViewOptions:{type:ge([Boolean,Object]),default:void 0},type:{type:ge(String)}}),C0e={close:()=>!0},M0e=se({name:"ElTourStep"}),E0e=se({...M0e,props:S0e,emits:C0e,setup(n,{emit:e}){const t=n,{Close:i}=JE,{t:s}=en(),{currentStep:r,current:o,total:a,showClose:l,closeIcon:c,mergedType:u,ns:d,slots:h,updateModelValue:f,onClose:m,onFinish:p,onChange:y}=ct(K1);ze(t,T=>{r.value=T},{immediate:!0});const v=R(()=>{var T;return(T=t.showClose)!=null?T:l.value}),_=R(()=>{var T,M;return(M=(T=t.closeIcon)!=null?T:c.value)!=null?M:i}),b=T=>{if(T)return UK(T,["children","onClick"])},w=()=>{var T,M;o.value-=1,(T=t.prevButtonProps)!=null&&T.onClick&&((M=t.prevButtonProps)==null||M.onClick()),y()},x=()=>{var T;o.value>=a.value-1?S():o.value+=1,(T=t.nextButtonProps)!=null&&T.onClick&&t.nextButtonProps.onClick(),y()},S=()=>{C(),p()},C=()=>{f(!1),m(),e("close")};return(T,M)=>(k(),Y(mt,null,[g(v)?(k(),Y("button",{key:0,"aria-label":"Close",class:z(g(d).e("closebtn")),type:"button",onClick:C},[le(g(dt),{class:z(g(d).e("close"))},{default:pe(()=>[(k(),Re(Wt(g(_))))]),_:1},8,["class"])],2)):Ee("v-if",!0),te("header",{class:z([g(d).e("header"),{"show-close":g(l)}])},[ke(T.$slots,"header",{},()=>[te("span",{role:"heading",class:z(g(d).e("title"))},Je(T.title),3)])],2),te("div",{class:z(g(d).e("body"))},[ke(T.$slots,"default",{},()=>[te("span",null,Je(T.description),1)])],2),te("footer",{class:z(g(d).e("footer"))},[te("div",{class:z(g(d).b("indicators"))},[g(h).indicators?(k(),Re(Wt(g(h).indicators),{key:0,current:g(o),total:g(a)},null,8,["current","total"])):(k(!0),Y(mt,{key:1},Zt(g(a),(E,A)=>(k(),Y("span",{key:E,class:z([g(d).b("indicator"),A===g(o)?"is-active":""])},null,2))),128))],2),te("div",{class:z(g(d).b("buttons"))},[g(o)>0?(k(),Re(g(as),Kt({key:0,size:"small",type:g(u)},b(T.prevButtonProps),{onClick:w}),{default:pe(()=>{var E,A;return[Yt(Je((A=(E=T.prevButtonProps)==null?void 0:E.children)!=null?A:g(s)("el.tour.previous")),1)]}),_:1},16,["type"])):Ee("v-if",!0),g(o)<=g(a)-1?(k(),Re(g(as),Kt({key:1,size:"small",type:g(u)==="primary"?"default":"primary"},b(T.nextButtonProps),{onClick:x}),{default:pe(()=>{var E,A;return[Yt(Je((A=(E=T.nextButtonProps)==null?void 0:E.children)!=null?A:g(o)===g(a)-1?g(s)("el.tour.finish"):g(s)("el.tour.next")),1)]}),_:1},16,["type"])):Ee("v-if",!0)],2)],2)],64))}});var mU=Ze(E0e,[["__file","step.vue"]]);const T0e=Ht(x0e,{TourStep:mU}),A0e=si(mU),I0e=Ye({container:{type:ge([String,Object])},offset:{type:Number,default:0},bound:{type:Number,default:15},duration:{type:Number,default:300},marker:{type:Boolean,default:!0},type:{type:ge(String),default:"default"},direction:{type:ge(String),default:"vertical"}}),R0e={change:n=>Rt(n),click:(n,e)=>n instanceof MouseEvent&&(Rt(e)||ki(e))},gU=Symbol("anchor"),P0e=se({name:"ElAnchor"}),L0e=se({...P0e,props:I0e,emits:R0e,setup(n,{expose:e,emit:t}){const i=n,s=V(""),r=V(null),o=V(null),a=V(),l={};let c=!1,u=0;const d=Ve("anchor"),h=R(()=>[d.b(),i.type==="underline"?d.m("underline"):"",d.m(i.direction)]),f=T=>{l[T.href]=T.el},m=T=>{delete l[T]},p=T=>{s.value!==T&&(s.value=T,t("change",T))};let y=null;const v=T=>{if(!a.value)return;const M=x0(T);if(!M)return;y&&y(),c=!0;const E=aR(M,a.value),A=oC(M,E),I=E.scrollHeight-E.clientHeight,B=Math.min(A-i.offset,I);y=JK(a.value,u,B,i.duration,()=>{setTimeout(()=>{c=!1},20)})},_=T=>{T&&(p(T),v(T))},b=(T,M)=>{t("click",T,M),_(M)},w=MX(()=>{a.value&&(u=lR(a.value));const T=x();c||ki(T)||p(T)}),x=()=>{if(!a.value)return;const T=lR(a.value),M=[];for(const E of Object.keys(l)){const A=x0(E);if(!A)continue;const I=aR(A,a.value),B=oC(A,I);M.push({top:B-i.offset-i.bound,href:E})}M.sort((E,A)=>E.top-A.top);for(let E=0;E<M.length;E++){const A=M[E],I=M[E+1];if(E===0&&T===0)return"";if(A.top<=T&&(!I||I.top>T))return A.href}},S=()=>{const T=x0(i.container);!T||A1(T)?a.value=window:a.value=T};Dn(a,"scroll",w);const C=R(()=>{if(!r.value||!o.value||!s.value)return{};const T=l[s.value];if(!T)return{};const M=r.value.getBoundingClientRect(),E=o.value.getBoundingClientRect(),A=T.getBoundingClientRect();return i.direction==="horizontal"?{left:`${A.left-M.left}px`,width:`${A.width}px`,opacity:1}:{top:`${A.top-M.top+(A.height-E.height)/2}px`,opacity:1}});return Ft(()=>{S();const T=decodeURIComponent(window.location.hash);x0(T)?_(T):w()}),ze(()=>i.container,()=>{S()}),Xt(gU,{ns:d,direction:i.direction,currentAnchor:s,addLink:f,removeLink:m,handleClick:b}),e({scrollTo:_}),(T,M)=>(k(),Y("div",{ref_key:"anchorRef",ref:r,class:z(g(h))},[T.marker?(k(),Y("div",{key:0,ref_key:"markerRef",ref:o,class:z(g(d).e("marker")),style:pt(g(C))},null,6)):Ee("v-if",!0),te("div",{class:z(g(d).e("list"))},[ke(T.$slots,"default")],2)],2))}});var k0e=Ze(L0e,[["__file","anchor.vue"]]);const O0e=Ye({title:String,href:String}),D0e=["href"],N0e=se({name:"ElAnchorLink"}),F0e=se({...N0e,props:O0e,setup(n){const e=n,t=V(null),{ns:i,direction:s,currentAnchor:r,addLink:o,removeLink:a,handleClick:l}=ct(gU),c=R(()=>[i.e("link"),i.is("active",r.value===e.href)]),u=d=>{l(d,e.href)};return ze(()=>e.href,(d,h)=>{vt(()=>{h&&a(h),d&&o({href:d,el:t.value})})}),Ft(()=>{const{href:d}=e;d&&o({href:d,el:t.value})}),kn(()=>{const{href:d}=e;d&&a(d)}),(d,h)=>(k(),Y("div",{class:z(g(i).e("item"))},[te("a",{ref_key:"linkRef",ref:t,class:z(g(c)),href:d.href,onClick:u},[ke(d.$slots,"default",{},()=>[Yt(Je(d.title),1)])],10,D0e),d.$slots["sub-link"]&&g(s)==="vertical"?(k(),Y("div",{key:0,class:z(g(i).e("list"))},[ke(d.$slots,"sub-link")],2)):Ee("v-if",!0)],2))}});var vU=Ze(F0e,[["__file","anchor-link.vue"]]);const B0e=Ht(k0e,{AnchorLink:vU}),U0e=si(vU),z0e=Ye({options:{type:ge(Array),default:()=>[]},modelValue:{type:[String,Number,Boolean],default:void 0},block:Boolean,size:Zi,disabled:Boolean,validateEvent:{type:Boolean,default:!0},id:String,name:String,...Ss(["ariaLabel"])}),H0e={[Gt]:n=>Rt(n)||Ct(n)||_i(n),[Fn]:n=>Rt(n)||Ct(n)||_i(n)},V0e=["id","aria-label","aria-labelledby"],$0e=["name","disabled","checked","onChange"],G0e=se({name:"ElSegmented"}),W0e=se({...G0e,props:z0e,emits:H0e,setup(n,{emit:e}){const t=n,i=Ve("segmented"),s=Ls(),r=Hi(),o=mr(),{formItem:a}=Qs(),{inputId:l,isLabeledByFormItem:c}=ca(t,{formItemContext:a}),u=V(null),d=i$(),h=un({isInit:!1,width:0,translateX:0,disabled:!1,focusVisible:!1}),f=M=>{const E=m(M);e(Gt,E),e(Fn,E)},m=M=>$t(M)?M.value:M,p=M=>$t(M)?M.label:M,y=M=>!!(o.value||$t(M)&&M.disabled),v=M=>t.modelValue===m(M),_=M=>t.options.find(E=>m(E)===M),b=M=>[i.e("item"),i.is("selected",v(M)),i.is("disabled",y(M))],w=()=>{if(!u.value)return;const M=u.value.querySelector(".is-selected"),E=u.value.querySelector(".is-selected input");if(!M||!E){h.width=0,h.translateX=0,h.disabled=!1,h.focusVisible=!1;return}const A=M.getBoundingClientRect();h.isInit=!0,h.width=A.width,h.translateX=M.offsetLeft,h.disabled=y(_(t.modelValue));try{h.focusVisible=E.matches(":focus-visible")}catch{}},x=R(()=>[i.b(),i.m(r.value),i.is("block",t.block)]),S=R(()=>({width:`${h.width}px`,transform:`translateX(${h.translateX}px)`,display:h.isInit?"block":"none"})),C=R(()=>[i.e("item-selected"),i.is("disabled",h.disabled),i.is("focus-visible",h.focusVisible)]),T=R(()=>t.name||s.value);return ti(u,w),ze(d,w),ze(()=>t.modelValue,()=>{var M;w(),t.validateEvent&&((M=a==null?void 0:a.validate)==null||M.call(a,"change").catch(E=>void 0))},{flush:"post"}),(M,E)=>(k(),Y("div",{id:g(l),ref_key:"segmentedRef",ref:u,class:z(g(x)),role:"radiogroup","aria-label":g(c)?void 0:M.ariaLabel||"segmented","aria-labelledby":g(c)?g(a).labelId:void 0},[te("div",{class:z(g(i).e("group"))},[te("div",{style:pt(g(S)),class:z(g(C))},null,6),(k(!0),Y(mt,null,Zt(M.options,(A,I)=>(k(),Y("label",{key:I,class:z(b(A))},[te("input",{class:z(g(i).e("item-input")),type:"radio",name:g(T),disabled:y(A),checked:v(A),onChange:B=>f(A)},null,42,$0e),te("div",{class:z(g(i).e("item-label"))},[ke(M.$slots,"default",{item:A},()=>[Yt(Je(p(A)),1)])],2)],2))),128))],2)],10,V0e))}});var K0e=Ze(W0e,[["__file","segmented.vue"]]);const Y0e=Ht(K0e);var X0e=[Yq,sZ,RQ,ome,FQ,GQ,x4,see,ree,as,I4,Cte,Ite,jte,qte,lie,Xne,pie,Do,pne,iF,Eie,Gie,Wie,Nie,wse,Uq,kse,Ose,Dse,Nse,Fse,ioe,poe,moe,Poe,FF,Woe,Nae,Fae,Bae,KF,ZZ,JZ,dt,Rle,YF,Ks,XF,Gle,uce,dce,hce,fce,bce,Tue,kue,Vue,_4,sB,uF,Rne,Ine,rde,ude,wie,Zl,Kd,q_,Qce,qde,she,rhe,Dhe,zhe,SB,Zhe,ofe,afe,yfe,wpe,xpe,rme,wme,xme,Og,Tme,nte,kme,Bme,Ume,Zs,dge,Ege,zge,Yge,dve,$ve,Qve,T0e,A0e,B0e,U0e,Y0e];const mo="ElInfiniteScroll",j0e=50,q0e=200,Z0e=0,J0e={delay:{type:Number,default:q0e},distance:{type:Number,default:Z0e},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},c2=(n,e)=>Object.entries(J0e).reduce((t,[i,s])=>{var r,o;const{type:a,default:l}=s,c=n.getAttribute(`infinite-scroll-${i}`);let u=(o=(r=e[c])!=null?r:c)!=null?o:l;return u=u==="false"?!1:u,u=a(u),t[i]=Number.isNaN(u)?l:u,t},{}),yU=n=>{const{observer:e}=n[mo];e&&(e.disconnect(),delete n[mo].observer)},Q0e=(n,e)=>{const{container:t,containerEl:i,instance:s,observer:r,lastScrollTop:o}=n[mo],{disabled:a,distance:l}=c2(n,s),{clientHeight:c,scrollHeight:u,scrollTop:d}=i,h=d-o;if(n[mo].lastScrollTop=d,r||a||h<0)return;let f=!1;if(t===n)f=u-(c+d)<=l;else{const{clientTop:m,scrollHeight:p}=n,y=oC(n,i);f=d+c>=y+m+p-l}f&&e.call(s)};function Cx(n,e){const{containerEl:t,instance:i}=n[mo],{disabled:s}=c2(n,i);s||t.clientHeight===0||(t.scrollHeight<=t.clientHeight?e.call(i):yU(n))}const eye={async mounted(n,e){const{instance:t,value:i}=e;xt(i)||qi(mo,"'v-infinite-scroll' binding value must be a function"),await vt();const{delay:s,immediate:r}=c2(n,t),o=YE(n,!0),a=o===window?document.documentElement:o,l=yd(Q0e.bind(null,n,i),s);if(o){if(n[mo]={instance:t,container:o,containerEl:a,delay:s,cb:i,onScroll:l,lastScrollTop:a.scrollTop},r){const c=new MutationObserver(yd(Cx.bind(null,n,i),j0e));n[mo].observer=c,c.observe(n,{childList:!0,subtree:!0}),Cx(n,i)}o.addEventListener("scroll",l)}},unmounted(n){if(!n[mo])return;const{container:e,onScroll:t}=n[mo];e==null||e.removeEventListener("scroll",t),yU(n)},async updated(n){if(!n[mo])await vt();else{const{containerEl:e,cb:t,observer:i}=n[mo];e.clientHeight&&i&&Cx(n,t)}}},hM=eye;hM.install=n=>{n.directive("InfiniteScroll",hM)};const tye=hM;function nye(n){let e;const t=V(!1),i=un({...n,originalPosition:"",originalOverflow:"",visible:!1});function s(h){i.text=h}function r(){const h=i.parent,f=d.ns;if(!h.vLoadingAddClassList){let m=h.getAttribute("loading-number");m=Number.parseInt(m)-1,m?h.setAttribute("loading-number",m.toString()):(Xs(h,f.bm("parent","relative")),h.removeAttribute("loading-number")),Xs(h,f.bm("parent","hidden"))}o(),u.unmount()}function o(){var h,f;(f=(h=d.$el)==null?void 0:h.parentNode)==null||f.removeChild(d.$el)}function a(){var h;n.beforeClose&&!n.beforeClose()||(t.value=!0,clearTimeout(e),e=window.setTimeout(l,400),i.visible=!1,(h=n.closed)==null||h.call(n))}function l(){if(!t.value)return;const h=i.parent;t.value=!1,h.vLoadingAddClassList=void 0,r()}const u=_D(se({name:"ElLoading",setup(h,{expose:f}){const{ns:m,zIndex:p}=F1("loading");return f({ns:m,zIndex:p}),()=>{const y=i.spinner||i.svg,v=_t("svg",{class:"circular",viewBox:i.svgViewBox?i.svgViewBox:"0 0 50 50",...y?{innerHTML:y}:{}},[_t("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),_=i.text?_t("p",{class:m.b("text")},[i.text]):void 0;return _t(ji,{name:m.b("fade"),onAfterLeave:l},{default:pe(()=>[Bt(le("div",{style:{backgroundColor:i.background||""},class:[m.b("mask"),i.customClass,i.fullscreen?"is-fullscreen":""]},[_t("div",{class:m.b("spinner")},[v,_])]),[[an,i.visible]])])})}}})),d=u.mount(document.createElement("div"));return{...ws(i),setText:s,removeElLoadingChild:o,close:a,handleAfterLeave:l,vm:d,get $el(){return d.$el}}}let F0;const fM=function(n={}){if(!Jt)return;const e=iye(n);if(e.fullscreen&&F0)return F0;const t=nye({...e,closed:()=>{var s;(s=e.closed)==null||s.call(e),e.fullscreen&&(F0=void 0)}});sye(e,e.parent,t),QP(e,e.parent,t),e.parent.vLoadingAddClassList=()=>QP(e,e.parent,t);let i=e.parent.getAttribute("loading-number");return i?i=`${Number.parseInt(i)+1}`:i="1",e.parent.setAttribute("loading-number",i),e.parent.appendChild(t.$el),vt(()=>t.visible.value=e.visible),e.fullscreen&&(F0=t),t},iye=n=>{var e,t,i,s;let r;return Rt(n.target)?r=(e=document.querySelector(n.target))!=null?e:document.body:r=n.target||document.body,{parent:r===document.body||n.body?document.body:r,background:n.background||"",svg:n.svg||"",svgViewBox:n.svgViewBox||"",spinner:n.spinner||!1,text:n.text||"",fullscreen:r===document.body&&((t=n.fullscreen)!=null?t:!0),lock:(i=n.lock)!=null?i:!1,customClass:n.customClass||"",visible:(s=n.visible)!=null?s:!0,beforeClose:n.beforeClose,closed:n.closed,target:r}},sye=async(n,e,t)=>{const{nextZIndex:i}=t.vm.zIndex||t.vm._.exposed.zIndex,s={};if(n.fullscreen)t.originalPosition.value=Pc(document.body,"position"),t.originalOverflow.value=Pc(document.body,"overflow"),s.zIndex=i();else if(n.parent===document.body){t.originalPosition.value=Pc(document.body,"position"),await vt();for(const r of["top","left"]){const o=r==="top"?"scrollTop":"scrollLeft";s[r]=`${n.target.getBoundingClientRect()[r]+document.body[o]+document.documentElement[o]-Number.parseInt(Pc(document.body,`margin-${r}`),10)}px`}for(const r of["height","width"])s[r]=`${n.target.getBoundingClientRect()[r]}px`}else t.originalPosition.value=Pc(e,"position");for(const[r,o]of Object.entries(s))t.$el.style[r]=o},QP=(n,e,t)=>{const i=t.vm.ns||t.vm._.exposed.ns;["absolute","fixed","sticky"].includes(t.originalPosition.value)?Xs(e,i.bm("parent","relative")):xo(e,i.bm("parent","relative")),n.fullscreen&&n.lock?xo(e,i.bm("parent","hidden")):Xs(e,i.bm("parent","hidden"))},x_=Symbol("ElLoading"),e3=(n,e)=>{var t,i,s,r;const o=e.instance,a=h=>$t(e.value)?e.value[h]:void 0,l=h=>{const f=Rt(h)&&(o==null?void 0:o[h])||h;return f&&V(f)},c=h=>l(a(h)||n.getAttribute(`element-loading-${Gl(h)}`)),u=(t=a("fullscreen"))!=null?t:e.modifiers.fullscreen,d={text:c("text"),svg:c("svg"),svgViewBox:c("svgViewBox"),spinner:c("spinner"),background:c("background"),customClass:c("customClass"),fullscreen:u,target:(i=a("target"))!=null?i:u?void 0:n,body:(s=a("body"))!=null?s:e.modifiers.body,lock:(r=a("lock"))!=null?r:e.modifiers.lock};n[x_]={options:d,instance:fM(d)}},rye=(n,e)=>{for(const t of Object.keys(e))Gn(e[t])&&(e[t].value=n[t])},t3={mounted(n,e){e.value&&e3(n,e)},updated(n,e){const t=n[x_];e.oldValue!==e.value&&(e.value&&!e.oldValue?e3(n,e):e.value&&e.oldValue?$t(e.value)&&rye(e.value,t.options):t==null||t.instance.close())},unmounted(n){var e;(e=n[x_])==null||e.instance.close(),n[x_]=null}},oye={install(n){n.directive("loading",t3),n.config.globalProperties.$loading=fM},directive:t3,service:fM},_U=["success","info","warning","error"],Bs=ni({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:Jt?document.body:void 0}),aye=Ye({customClass:{type:String,default:Bs.customClass},center:{type:Boolean,default:Bs.center},dangerouslyUseHTMLString:{type:Boolean,default:Bs.dangerouslyUseHTMLString},duration:{type:Number,default:Bs.duration},icon:{type:xn,default:Bs.icon},id:{type:String,default:Bs.id},message:{type:ge([String,Object,Function]),default:Bs.message},onClose:{type:ge(Function),default:Bs.onClose},showClose:{type:Boolean,default:Bs.showClose},type:{type:String,values:_U,default:Bs.type},plain:{type:Boolean,default:Bs.plain},offset:{type:Number,default:Bs.offset},zIndex:{type:Number,default:Bs.zIndex},grouping:{type:Boolean,default:Bs.grouping},repeatNum:{type:Number,default:Bs.repeatNum}}),lye={destroy:()=>!0},Jo=vO([]),cye=n=>{const e=Jo.findIndex(s=>s.id===n),t=Jo[e];let i;return e>0&&(i=Jo[e-1]),{current:t,prev:i}},uye=n=>{const{prev:e}=cye(n);return e?e.vm.exposed.bottom.value:0},dye=(n,e)=>Jo.findIndex(i=>i.id===n)>0?16:e,hye=["id"],fye=["innerHTML"],pye=se({name:"ElMessage"}),mye=se({...pye,props:aye,emits:lye,setup(n,{expose:e}){const t=n,{Close:i}=QE,{ns:s,zIndex:r}=F1("message"),{currentZIndex:o,nextZIndex:a}=r,l=V(),c=V(!1),u=V(0);let d;const h=R(()=>t.type?t.type==="error"?"danger":t.type:"info"),f=R(()=>{const C=t.type;return{[s.bm("icon",C)]:C&&tu[C]}}),m=R(()=>t.icon||tu[t.type]||""),p=R(()=>uye(t.id)),y=R(()=>dye(t.id,t.offset)+p.value),v=R(()=>u.value+y.value),_=R(()=>({top:`${y.value}px`,zIndex:o.value}));function b(){t.duration!==0&&({stop:d}=Ud(()=>{x()},t.duration))}function w(){d==null||d()}function x(){c.value=!1}function S({code:C}){C===wt.esc&&x()}return Ft(()=>{b(),a(),c.value=!0}),ze(()=>t.repeatNum,()=>{w(),b()}),Dn(document,"keydown",S),ti(l,()=>{u.value=l.value.getBoundingClientRect().height}),e({visible:c,bottom:v,close:x}),(C,T)=>(k(),Re(ji,{name:g(s).b("fade"),onBeforeLeave:C.onClose,onAfterLeave:T[0]||(T[0]=M=>C.$emit("destroy")),persisted:""},{default:pe(()=>[Bt(te("div",{id:C.id,ref_key:"messageRef",ref:l,class:z([g(s).b(),{[g(s).m(C.type)]:C.type},g(s).is("center",C.center),g(s).is("closable",C.showClose),g(s).is("plain",C.plain),C.customClass]),style:pt(g(_)),role:"alert",onMouseenter:w,onMouseleave:b},[C.repeatNum>1?(k(),Re(g(x4),{key:0,value:C.repeatNum,type:g(h),class:z(g(s).e("badge"))},null,8,["value","type","class"])):Ee("v-if",!0),g(m)?(k(),Re(g(dt),{key:1,class:z([g(s).e("icon"),g(f)])},{default:pe(()=>[(k(),Re(Wt(g(m))))]),_:1},8,["class"])):Ee("v-if",!0),ke(C.$slots,"default",{},()=>[C.dangerouslyUseHTMLString?(k(),Y(mt,{key:1},[Ee(" Caution here, message could've been compromised, never use user's input as message "),te("p",{class:z(g(s).e("content")),innerHTML:C.message},null,10,fye)],2112)):(k(),Y("p",{key:0,class:z(g(s).e("content"))},Je(C.message),3))]),C.showClose?(k(),Re(g(dt),{key:2,class:z(g(s).e("closeBtn")),onClick:Tt(x,["stop"])},{default:pe(()=>[le(g(i))]),_:1},8,["class","onClick"])):Ee("v-if",!0)],46,hye),[[an,c.value]])]),_:3},8,["name","onBeforeLeave"]))}});var gye=Ze(mye,[["__file","message.vue"]]);let vye=1;const bU=n=>{const e=!n||Rt(n)||Jn(n)||xt(n)?{message:n}:n,t={...Bs,...e};if(!t.appendTo)t.appendTo=document.body;else if(Rt(t.appendTo)){let i=document.querySelector(t.appendTo);Lo(i)||(i=document.body),t.appendTo=i}return t},yye=n=>{const e=Jo.indexOf(n);if(e===-1)return;Jo.splice(e,1);const{handler:t}=n;t.close()},_ye=({appendTo:n,...e},t)=>{const i=`message_${vye++}`,s=e.onClose,r=document.createElement("div"),o={...e,id:i,onClose:()=>{s==null||s(),yye(u)},onDestroy:()=>{qc(null,r)}},a=le(gye,o,xt(o.message)||Jn(o.message)?{default:xt(o.message)?o.message:()=>o.message}:null);a.appContext=t||lp._context,qc(a,r),n.appendChild(r.firstElementChild);const l=a.component,u={id:i,vnode:a,vm:l,handler:{close:()=>{l.exposed.visible.value=!1}},props:a.component.props};return u},lp=(n={},e)=>{if(!Jt)return{close:()=>{}};if(Ct(yC.max)&&Jo.length>=yC.max)return{close:()=>{}};const t=bU(n);if(t.grouping&&Jo.length){const s=Jo.find(({vnode:r})=>{var o;return((o=r.props)==null?void 0:o.message)===t.message});if(s)return s.props.repeatNum+=1,s.props.type=t.type,s.handler}const i=_ye(t,e);return Jo.push(i),i.handler};_U.forEach(n=>{lp[n]=(e={},t)=>{const i=bU(e);return lp({...i,type:n},t)}});function bye(n){for(const e of Jo)(!n||n===e.props.type)&&e.handler.close()}lp.closeAll=bye;lp._context=null;const wU=SN(lp,"$message"),wye=se({name:"ElMessageBox",directives:{TrapFocus:Bee},components:{ElButton:as,ElFocusTrap:Wv,ElInput:Ks,ElOverlay:DT,ElIcon:dt,...QE},inheritAttrs:!1,props:{buttonSize:{type:String,validator:CN},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(n,{emit:e}){const{locale:t,zIndex:i,ns:s,size:r}=F1("message-box",R(()=>n.buttonSize)),{t:o}=t,{nextZIndex:a}=i,l=V(!1),c=un({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonLoadingIcon:El(Ha),cancelButtonLoadingIcon:El(Ha),confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:a()}),u=R(()=>{const P=c.type;return{[s.bm("icon",P)]:P&&tu[P]}}),d=Ls(),h=Ls(),f=R(()=>c.icon||tu[c.type]||""),m=R(()=>!!c.message),p=V(),y=V(),v=V(),_=V(),b=V(),w=R(()=>c.confirmButtonClass);ze(()=>c.inputValue,async P=>{await vt(),n.boxType==="prompt"&&P!==null&&I()},{immediate:!0}),ze(()=>l.value,P=>{var O,D;P&&(n.boxType!=="prompt"&&(c.autofocus?v.value=(D=(O=b.value)==null?void 0:O.$el)!=null?D:p.value:v.value=p.value),c.zIndex=a()),n.boxType==="prompt"&&(P?vt().then(()=>{var L;_.value&&_.value.$el&&(c.autofocus?v.value=(L=B())!=null?L:p.value:v.value=p.value)}):(c.editorErrorMessage="",c.validateError=!1))});const x=R(()=>n.draggable),S=R(()=>n.overflow);MN(p,y,x,S),Ft(async()=>{await vt(),n.closeOnHashChange&&window.addEventListener("hashchange",C)}),kn(()=>{n.closeOnHashChange&&window.removeEventListener("hashchange",C)});function C(){l.value&&(l.value=!1,vt(()=>{c.action&&e("action",c.action)}))}const T=()=>{n.closeOnClickModal&&A(c.distinguishCancelAndClose?"close":"cancel")},M=fT(T),E=P=>{if(c.inputType!=="textarea")return P.preventDefault(),A("confirm")},A=P=>{var O;n.boxType==="prompt"&&P==="confirm"&&!I()||(c.action=P,c.beforeClose?(O=c.beforeClose)==null||O.call(c,P,c,C):C())},I=()=>{if(n.boxType==="prompt"){const P=c.inputPattern;if(P&&!P.test(c.inputValue||""))return c.editorErrorMessage=c.inputErrorMessage||o("el.messagebox.error"),c.validateError=!0,!1;const O=c.inputValidator;if(typeof O=="function"){const D=O(c.inputValue);if(D===!1)return c.editorErrorMessage=c.inputErrorMessage||o("el.messagebox.error"),c.validateError=!0,!1;if(typeof D=="string")return c.editorErrorMessage=D,c.validateError=!0,!1}}return c.editorErrorMessage="",c.validateError=!1,!0},B=()=>{const P=_.value.$refs;return P.input||P.textarea},F=()=>{A("close")},U=()=>{n.closeOnPressEscape&&F()};return n.lockScroll&&sT(l),{...ws(c),ns:s,overlayEvent:M,visible:l,hasMessage:m,typeClass:u,contentId:d,inputId:h,btnSize:r,iconComponent:f,confirmButtonClasses:w,rootRef:p,focusStartRef:v,headerRef:y,inputRef:_,confirmRef:b,doClose:C,handleClose:F,onCloseRequested:U,handleWrapperClick:T,handleInputEnter:E,handleAction:A,t:o}}}),xye=["aria-label","aria-describedby"],Sye=["aria-label"],Cye=["id"];function Mye(n,e,t,i,s,r){const o=Ut("el-icon"),a=Ut("close"),l=Ut("el-input"),c=Ut("el-button"),u=Ut("el-focus-trap"),d=Ut("el-overlay");return k(),Re(ji,{name:"fade-in-linear",onAfterLeave:e[11]||(e[11]=h=>n.$emit("vanish")),persisted:""},{default:pe(()=>[Bt(le(d,{"z-index":n.zIndex,"overlay-class":[n.ns.is("message-box"),n.modalClass],mask:n.modal},{default:pe(()=>[te("div",{role:"dialog","aria-label":n.title,"aria-modal":"true","aria-describedby":n.showInput?void 0:n.contentId,class:z(`${n.ns.namespace.value}-overlay-message-box`),onClick:e[8]||(e[8]=(...h)=>n.overlayEvent.onClick&&n.overlayEvent.onClick(...h)),onMousedown:e[9]||(e[9]=(...h)=>n.overlayEvent.onMousedown&&n.overlayEvent.onMousedown(...h)),onMouseup:e[10]||(e[10]=(...h)=>n.overlayEvent.onMouseup&&n.overlayEvent.onMouseup(...h))},[le(u,{loop:"",trapped:n.visible,"focus-trap-el":n.rootRef,"focus-start-el":n.focusStartRef,onReleaseRequested:n.onCloseRequested},{default:pe(()=>[te("div",{ref:"rootRef",class:z([n.ns.b(),n.customClass,n.ns.is("draggable",n.draggable),{[n.ns.m("center")]:n.center}]),style:pt(n.customStyle),tabindex:"-1",onClick:e[7]||(e[7]=Tt(()=>{},["stop"]))},[n.title!==null&&n.title!==void 0?(k(),Y("div",{key:0,ref:"headerRef",class:z([n.ns.e("header"),{"show-close":n.showClose}])},[te("div",{class:z(n.ns.e("title"))},[n.iconComponent&&n.center?(k(),Re(o,{key:0,class:z([n.ns.e("status"),n.typeClass])},{default:pe(()=>[(k(),Re(Wt(n.iconComponent)))]),_:1},8,["class"])):Ee("v-if",!0),te("span",null,Je(n.title),1)],2),n.showClose?(k(),Y("button",{key:0,type:"button",class:z(n.ns.e("headerbtn")),"aria-label":n.t("el.messagebox.close"),onClick:e[0]||(e[0]=h=>n.handleAction(n.distinguishCancelAndClose?"close":"cancel")),onKeydown:e[1]||(e[1]=wn(Tt(h=>n.handleAction(n.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[le(o,{class:z(n.ns.e("close"))},{default:pe(()=>[le(a)]),_:1},8,["class"])],42,Sye)):Ee("v-if",!0)],2)):Ee("v-if",!0),te("div",{id:n.contentId,class:z(n.ns.e("content"))},[te("div",{class:z(n.ns.e("container"))},[n.iconComponent&&!n.center&&n.hasMessage?(k(),Re(o,{key:0,class:z([n.ns.e("status"),n.typeClass])},{default:pe(()=>[(k(),Re(Wt(n.iconComponent)))]),_:1},8,["class"])):Ee("v-if",!0),n.hasMessage?(k(),Y("div",{key:1,class:z(n.ns.e("message"))},[ke(n.$slots,"default",{},()=>[n.dangerouslyUseHTMLString?(k(),Re(Wt(n.showInput?"label":"p"),{key:1,for:n.showInput?n.inputId:void 0,innerHTML:n.message},null,8,["for","innerHTML"])):(k(),Re(Wt(n.showInput?"label":"p"),{key:0,for:n.showInput?n.inputId:void 0},{default:pe(()=>[Yt(Je(n.dangerouslyUseHTMLString?"":n.message),1)]),_:1},8,["for"]))])],2)):Ee("v-if",!0)],2),Bt(te("div",{class:z(n.ns.e("input"))},[le(l,{id:n.inputId,ref:"inputRef",modelValue:n.inputValue,"onUpdate:modelValue":e[2]||(e[2]=h=>n.inputValue=h),type:n.inputType,placeholder:n.inputPlaceholder,"aria-invalid":n.validateError,class:z({invalid:n.validateError}),onKeydown:wn(n.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),te("div",{class:z(n.ns.e("errormsg")),style:pt({visibility:n.editorErrorMessage?"visible":"hidden"})},Je(n.editorErrorMessage),7)],2),[[an,n.showInput]])],10,Cye),te("div",{class:z(n.ns.e("btns"))},[n.showCancelButton?(k(),Re(c,{key:0,loading:n.cancelButtonLoading,"loading-icon":n.cancelButtonLoadingIcon,class:z([n.cancelButtonClass]),round:n.roundButton,size:n.btnSize,onClick:e[3]||(e[3]=h=>n.handleAction("cancel")),onKeydown:e[4]||(e[4]=wn(Tt(h=>n.handleAction("cancel"),["prevent"]),["enter"]))},{default:pe(()=>[Yt(Je(n.cancelButtonText||n.t("el.messagebox.cancel")),1)]),_:1},8,["loading","loading-icon","class","round","size"])):Ee("v-if",!0),Bt(le(c,{ref:"confirmRef",type:"primary",loading:n.confirmButtonLoading,"loading-icon":n.confirmButtonLoadingIcon,class:z([n.confirmButtonClasses]),round:n.roundButton,disabled:n.confirmButtonDisabled,size:n.btnSize,onClick:e[5]||(e[5]=h=>n.handleAction("confirm")),onKeydown:e[6]||(e[6]=wn(Tt(h=>n.handleAction("confirm"),["prevent"]),["enter"]))},{default:pe(()=>[Yt(Je(n.confirmButtonText||n.t("el.messagebox.confirm")),1)]),_:1},8,["loading","loading-icon","class","round","disabled","size"]),[[an,n.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,xye)]),_:3},8,["z-index","overlay-class","mask"]),[[an,n.visible]])]),_:3})}var Eye=Ze(wye,[["render",Mye],["__file","index.vue"]]);const $g=new Map,Tye=n=>{let e=document.body;return n.appendTo&&(Rt(n.appendTo)&&(e=document.querySelector(n.appendTo)),Lo(n.appendTo)&&(e=n.appendTo),Lo(e)||(e=document.body)),e},Aye=(n,e,t=null)=>{const i=le(Eye,n,xt(n.message)||Jn(n.message)?{default:xt(n.message)?n.message:()=>n.message}:null);return i.appContext=t,qc(i,e),Tye(n).appendChild(e.firstElementChild),i.component},Iye=()=>document.createElement("div"),Rye=(n,e)=>{const t=Iye();n.onVanish=()=>{qc(null,t),$g.delete(s)},n.onAction=r=>{const o=$g.get(s);let a;n.showInput?a={value:s.inputValue,action:r}:a=r,n.callback?n.callback(a,i.proxy):r==="cancel"||r==="close"?n.distinguishCancelAndClose&&r!=="cancel"?o.reject("close"):o.reject("cancel"):o.resolve(a)};const i=Aye(n,t,e),s=i.proxy;for(const r in n)Qt(n,r)&&!Qt(s.$props,r)&&(s[r]=n[r]);return s.visible=!0,s};function Op(n,e=null){if(!Jt)return Promise.reject();let t;return Rt(n)||Jn(n)?n={message:n}:t=n.callback,new Promise((i,s)=>{const r=Rye(n,e??Op._context);$g.set(r,{options:n,callback:t,resolve:i,reject:s})})}const Pye=["alert","confirm","prompt"],Lye={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};Pye.forEach(n=>{Op[n]=kye(n)});function kye(n){return(e,t,i,s)=>{let r="";return $t(t)?(i=t,r=""):ki(t)?r="":r=t,Op(Object.assign({title:r,message:e,type:"",...Lye[n]},i,{boxType:n}),s)}}Op.close=()=>{$g.forEach((n,e)=>{e.doClose()}),$g.clear()};Op._context=null;const xc=Op;xc.install=n=>{xc._context=n._context,n.config.globalProperties.$msgbox=xc,n.config.globalProperties.$messageBox=xc,n.config.globalProperties.$alert=xc.alert,n.config.globalProperties.$confirm=xc.confirm,n.config.globalProperties.$prompt=xc.prompt};const Oye=xc,xU=["success","info","warning","error"],Dye=Ye({customClass:{type:String,default:""},dangerouslyUseHTMLString:Boolean,duration:{type:Number,default:4500},icon:{type:xn},id:{type:String,default:""},message:{type:ge([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:ge(Function),default:()=>{}},onClose:{type:ge(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...xU,""],default:""},zIndex:Number}),Nye={destroy:()=>!0},Fye=["id"],Bye=["textContent"],Uye={key:0},zye=["innerHTML"],Hye=se({name:"ElNotification"}),Vye=se({...Hye,props:Dye,emits:Nye,setup(n,{expose:e}){const t=n,{ns:i,zIndex:s}=F1("notification"),{nextZIndex:r,currentZIndex:o}=s,{Close:a}=JE,l=V(!1);let c;const u=R(()=>{const b=t.type;return b&&tu[t.type]?i.m(b):""}),d=R(()=>t.type&&tu[t.type]||t.icon),h=R(()=>t.position.endsWith("right")?"right":"left"),f=R(()=>t.position.startsWith("top")?"top":"bottom"),m=R(()=>{var b;return{[f.value]:`${t.offset}px`,zIndex:(b=t.zIndex)!=null?b:o.value}});function p(){t.duration>0&&({stop:c}=Ud(()=>{l.value&&v()},t.duration))}function y(){c==null||c()}function v(){l.value=!1}function _({code:b}){b===wt.delete||b===wt.backspace?y():b===wt.esc?l.value&&v():p()}return Ft(()=>{p(),r(),l.value=!0}),Dn(document,"keydown",_),e({visible:l,close:v}),(b,w)=>(k(),Re(ji,{name:g(i).b("fade"),onBeforeLeave:b.onClose,onAfterLeave:w[1]||(w[1]=x=>b.$emit("destroy")),persisted:""},{default:pe(()=>[Bt(te("div",{id:b.id,class:z([g(i).b(),b.customClass,g(h)]),style:pt(g(m)),role:"alert",onMouseenter:y,onMouseleave:p,onClick:w[0]||(w[0]=(...x)=>b.onClick&&b.onClick(...x))},[g(d)?(k(),Re(g(dt),{key:0,class:z([g(i).e("icon"),g(u)])},{default:pe(()=>[(k(),Re(Wt(g(d))))]),_:1},8,["class"])):Ee("v-if",!0),te("div",{class:z(g(i).e("group"))},[te("h2",{class:z(g(i).e("title")),textContent:Je(b.title)},null,10,Bye),Bt(te("div",{class:z(g(i).e("content")),style:pt(b.title?void 0:{margin:0})},[ke(b.$slots,"default",{},()=>[b.dangerouslyUseHTMLString?(k(),Y(mt,{key:1},[Ee(" Caution here, message could've been compromised, never use user's input as message "),te("p",{innerHTML:b.message},null,8,zye)],2112)):(k(),Y("p",Uye,Je(b.message),1))])],6),[[an,b.message]]),b.showClose?(k(),Re(g(dt),{key:0,class:z(g(i).e("closeBtn")),onClick:Tt(v,["stop"])},{default:pe(()=>[le(g(a))]),_:1},8,["class","onClick"])):Ee("v-if",!0)],2)],46,Fye),[[an,l.value]])]),_:3},8,["name","onBeforeLeave"]))}});var $ye=Ze(Vye,[["__file","notification.vue"]]);const rb={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},pM=16;let Gye=1;const cp=function(n={},e=null){if(!Jt)return{close:()=>{}};(typeof n=="string"||Jn(n))&&(n={message:n});const t=n.position||"top-right";let i=n.offset||0;rb[t].forEach(({vm:u})=>{var d;i+=(((d=u.el)==null?void 0:d.offsetHeight)||0)+pM}),i+=pM;const s=`notification_${Gye++}`,r=n.onClose,o={...n,offset:i,id:s,onClose:()=>{Wye(s,t,r)}};let a=document.body;Lo(n.appendTo)?a=n.appendTo:Rt(n.appendTo)&&(a=document.querySelector(n.appendTo)),Lo(a)||(a=document.body);const l=document.createElement("div"),c=le($ye,o,Jn(o.message)?{default:()=>o.message}:null);return c.appContext=e??cp._context,c.props.onDestroy=()=>{qc(null,l)},qc(c,l),rb[t].push({vm:c}),a.appendChild(l.firstElementChild),{close:()=>{c.component.exposed.visible.value=!1}}};xU.forEach(n=>{cp[n]=(e={})=>((typeof e=="string"||Jn(e))&&(e={message:e}),cp({...e,type:n}))});function Wye(n,e,t){const i=rb[e],s=i.findIndex(({vm:c})=>{var u;return((u=c.component)==null?void 0:u.props.id)===n});if(s===-1)return;const{vm:r}=i[s];if(!r)return;t==null||t(r);const o=r.el.offsetHeight,a=e.split("-")[0];i.splice(s,1);const l=i.length;if(!(l<1))for(let c=s;c<l;c++){const{el:u,component:d}=i[c].vm,h=Number.parseInt(u.style[a],10)-o-pM;d.props.offset=h}}function Kye(){for(const n of Object.values(rb))n.forEach(({vm:e})=>{e.component.exposed.visible.value=!1})}cp.closeAll=Kye;cp._context=null;const Yye=SN(cp,"$notify");var Xye=[tye,oye,wU,Oye,Yye,iB],jye=Hq([...X0e,...Xye]);const qye="modulepreload",Zye=function(n,e){return new URL(n,e).href},n3={},sc=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){const r=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.all(t.map(l=>{if(l=Zye(l,i),l in n3)return;n3[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(!!i)for(let f=r.length-1;f>=0;f--){const m=r[f];if(m.href===l&&(!c||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":qye,c||(h.as="script",h.crossOrigin=""),h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}return s.then(()=>e()).catch(r=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r})};class u2 extends Error{constructor(e,t){super(t),this.type=e}}class xd extends u2{constructor(e,t){super("Configuration",e),this.node=t}}class Jye extends u2{constructor(e){super("PopoutBlocked",e)}}class Qye extends u2{constructor(e){super("Bind",e)}}class Y1 extends Error{constructor(e,t,i){super(`${e}: ${t}${i===void 0?"":": "+i}`)}}class Un extends Y1{constructor(e,t){super("Assert",e,t)}}class jr extends Y1{constructor(e,t,i){super("UnreachableCase",e,`${t}${i===void 0?"":": "+i}`)}}class vi extends Y1{constructor(e,t){super("UnexpectedNull",e,t)}}class fn extends Y1{constructor(e,t){super("UnexpectedUndefined",e,t)}}var ob;(function(n){let e=!1;const t={PopoutCannotBeCreatedWithGroundItemConfig:{id:0,default:"Popout cannot be created with ground ItemConfig"},PleaseRegisterAConstructorFunction:{id:1,default:"Please register a constructor function"},ComponentTypeNotRegisteredAndBindComponentEventHandlerNotAssigned:{id:2,default:"Component type not registered and BindComponentEvent handler not assigned"},ComponentIsAlreadyRegistered:{id:3,default:"Component is already registered"},ComponentIsNotVirtuable:{id:4,default:"Component is not virtuable. Requires rootHtmlElement field/getter"},VirtualComponentDoesNotHaveRootHtmlElement:{id:5,default:'Virtual component does not have getter "rootHtmlElement"'},ItemConfigIsNotTypeComponent:{id:6,default:"ItemConfig is not of type component"},InvalidNumberPartInSizeString:{id:7,default:"Invalid number part in size string"},UnknownUnitInSizeString:{id:8,default:"Unknown unit in size string"},UnsupportedUnitInSizeString:{id:9,default:"Unsupported unit in size string"}};n.idCount=Object.keys(t).length;const i=Object.values(t);function s(){if(!e)for(let r=0;r<n.idCount;r++){const o=i[r];if(o.id!==r)throw new Un("INSI00110",`${r}: ${o.id}`);Sd[r]=o.default}e=!0}n.checkInitialise=s})(ob||(ob={}));const Sd=new Array(ob.idCount);var Qm;(function(n){n.defaultComponentBaseZIndex="auto",n.defaultComponentDragZIndex="32",n.defaultComponentStackMaximisedZIndex="41"})(Qm||(Qm={}));var ab;(function(n){n.width="width",n.height="height"})(ab||(ab={}));var su;(function(n){n.top="top",n.left="left",n.right="right",n.bottom="bottom"})(su||(su={}));var eg;(function(n){n.base="base",n.drag="drag",n.stackMaximised="stackMaximised"})(eg||(eg={}));const e_e={base:Qm.defaultComponentBaseZIndex,drag:Qm.defaultComponentDragZIndex,stackMaximised:Qm.defaultComponentStackMaximisedZIndex};var i3;(function(n){function e(i){return t(i)}n.isJson=e;function t(i){return!Array.isArray(i)&&i!==null&&typeof i=="object"}n.isJsonObject=t})(i3||(i3={}));var St;(function(n){n.ground="ground",n.row="row",n.column="column",n.stack="stack",n.component="component"})(St||(St={}));var Gg;(function(n){n.none="none",n.always="always",n.onload="onload"})(Gg||(Gg={}));var On;(function(n){n.Pixel="px",n.Percent="%",n.Fractional="fr",n.Em="em"})(On||(On={}));(function(n){function e(i){switch(i){case n.Pixel:return n.Pixel;case n.Percent:return n.Percent;case n.Fractional:return n.Fractional;case n.Em:return n.Em;default:return}}n.tryParse=e;function t(i){switch(i){case n.Pixel:return n.Pixel;case n.Percent:return n.Percent;case n.Fractional:return n.Fractional;case n.Em:return n.Em;default:throw new jr("SUEF44998",i)}}n.format=t})(On||(On={}));function zn(n){return n.toString(10)+"px"}function mf(n){const e=n.replace("px","");return parseFloat(e)}function t_e(n){n=n.trimStart();const e=n.length;if(e===0)return{numericPart:"",firstNonNumericCharPart:""};{let t=e,i=!1;for(let o=0;o<e;o++){const a=n[o];if(!n_e(a))if(a!=="."){t=o;break}else if(i){t=o;break}else i=!0}const s=n.substring(0,t),r=n.substring(t).trim();return{numericPart:s,firstNonNumericCharPart:r}}}function n_e(n){return n>="0"&&n<="9"}function i_e(n){return n.offsetWidth}function Co(n,e){const t=zn(e);n.style.width=t}function s_e(n){return n.offsetHeight}function Mo(n,e){const t=zn(e);n.style.height=t}function Fc(n){return{width:n.offsetWidth,height:n.offsetHeight}}function Cd(n,e){e?n.style.display="":n.style.display="none"}function ed(n,e){if(e!==void 0){for(const t in e)if(e.hasOwnProperty(t)){const i=e[t],s=n[t];n[t]=Wg(s,i)}}return n}function Wg(n,e){if(typeof e!="object")return e;if(Array.isArray(e)){const t=e.length,i=new Array(t);for(let s=0;s<t;s++){const r=e[s];i[s]=Wg({},r)}return i}else{if(e===null)return null;{const t=e;return n===void 0?ed({},t):typeof n!="object"?ed({},t):Array.isArray(n)?ed({},t):ed(n===null?{}:n,t)}}}function r_e(n,e){const t=e.indexOf(n);if(t===-1)throw new Error("Can't remove item from array. Item is not in the array");e.splice(t,1)}function SU(){return(Math.random()*1e15).toString(36).replace(".","")}function o_e(n){return n instanceof Error?n.message:typeof n=="string"?n:"Unknown Error"}var Kg;(function(n){const e=["settings","hasHeaders","constrainDragToContainer","selectionEnabled","dimensions","borderWidth","minItemHeight","minItemWidth","headerHeight","dragProxyWidth","dragProxyHeight","labels","close","maximise","minimise","popout","content","componentType","componentState","id","width","type","height","isClosable","title","popoutWholeStack","openPopouts","parentId","activeItemIndex","reorderEnabled","borderGrabWidth"],t=[!0,!1,"row","column","stack","component","close","maximise","minimise","open in new window"];function i(){if(e.length>36)throw new Error("Too many keys in config minifier map")}n.checkInitialise=i;function s(f,m){const p={};for(const y in f)if(f.hasOwnProperty(y)){let v;m?v=a(y):v=l(y);const _=f[y];p[v]=o(_,m)}return p}n.translateObject=s;function r(f,m){const p=f.length,y=new Array(p);for(let v=0;v<p;v++){const _=f[v];y[v]=o(_,m)}return y}function o(f,m){return typeof f=="object"?f===null?null:Array.isArray(f)?r(f,m):s(f,m):m?c(f):u(f)}function a(f){if(typeof f=="string"&&f.length===1)return"___"+f;const m=d(f);return m===-1?f:m.toString(36)}function l(f){return f.length===1?e[parseInt(f,36)]:f.substr(0,3)==="___"?f[3]:f}function c(f){if(typeof f=="string"&&f.length===1)return"___"+f;const m=h(f);return m===-1?f:m.toString(36)}function u(f){return typeof f=="string"&&f.length===1?t[parseInt(f,36)]:typeof f=="string"&&f.substr(0,3)==="___"?f[3]:f}function d(f){for(let m=0;m<e.length;m++)if(e[m]===f)return m;return-1}function h(f){for(let m=0;m<t.length;m++)if(t[m]===f)return m;return-1}})(Kg||(Kg={}));var gn;(function(n){n.defaults={type:St.ground,content:[],size:1,sizeUnit:On.Fractional,minSize:void 0,minSizeUnit:On.Pixel,id:"",isClosable:!0};function e(o,a){switch(o.type){case St.ground:case St.row:case St.column:return dp.createCopy(o,a);case St.stack:return kl.createCopy(o,a);case St.component:return up.createCopy(o);default:throw new jr("CICC91354",o.type,"Invalid Config Item type specified")}}n.createCopy=e;function t(o){switch(o){case St.ground:throw new Un("CICCDR91562");case St.row:case St.column:return dp.createDefault(o);case St.stack:return kl.createDefault();case St.component:return up.createDefault();default:throw new jr("CICCDD91563",o,"Invalid Config Item type specified")}}n.createDefault=t;function i(o){return o.type===St.component}n.isComponentItem=i;function s(o){return o.type===St.stack}n.isStackItem=s;function r(o){return o.type===St.ground}n.isGroundItem=r})(gn||(gn={}));var No;(function(n){n.defaultMaximised=!1,function(e){function t(i,s){if(i!==void 0)return{show:s??i.show,popout:i.popout,close:i.close,maximise:i.maximise,minimise:i.minimise,tabDropdown:i.tabDropdown}}e.createCopy=t}(n.Header||(n.Header={}))})(No||(No={}));var kl;(function(n){n.defaultActiveItemIndex=0;function e(s,r){return{type:s.type,content:t(r!==void 0?r:s.content),size:s.size,sizeUnit:s.sizeUnit,minSize:s.minSize,minSizeUnit:s.minSizeUnit,id:s.id,maximised:s.maximised,isClosable:s.isClosable,activeItemIndex:s.activeItemIndex,header:No.Header.createCopy(s.header)}}n.createCopy=e;function t(s){const r=s.length,o=new Array(r);for(let a=0;a<r;a++)o[a]=gn.createCopy(s[a]);return o}n.copyContent=t;function i(){return{type:St.stack,content:[],size:gn.defaults.size,sizeUnit:gn.defaults.sizeUnit,minSize:gn.defaults.minSize,minSizeUnit:gn.defaults.minSizeUnit,id:gn.defaults.id,maximised:No.defaultMaximised,isClosable:gn.defaults.isClosable,activeItemIndex:n.defaultActiveItemIndex,header:void 0}}n.createDefault=i})(kl||(kl={}));var up;(function(n){n.defaultReorderEnabled=!0;function e(r){const o=r.componentType;if(typeof o=="string")return o}n.resolveComponentTypeName=e;function t(r){return{type:r.type,content:[],size:r.size,sizeUnit:r.sizeUnit,minSize:r.minSize,minSizeUnit:r.minSizeUnit,id:r.id,maximised:r.maximised,isClosable:r.isClosable,reorderEnabled:r.reorderEnabled,title:r.title,header:No.Header.createCopy(r.header),componentType:r.componentType,componentState:Wg(void 0,r.componentState)}}n.createCopy=t;function i(r="",o,a=""){return{type:St.component,content:[],size:gn.defaults.size,sizeUnit:gn.defaults.sizeUnit,minSize:gn.defaults.minSize,minSizeUnit:gn.defaults.minSizeUnit,id:gn.defaults.id,maximised:No.defaultMaximised,isClosable:gn.defaults.isClosable,reorderEnabled:n.defaultReorderEnabled,title:a,header:void 0,componentType:r,componentState:o}}n.createDefault=i;function s(r){return Wg({},r)}n.copyComponentType=s})(up||(up={}));var dp;(function(n){function e(r){switch(r.type){case St.row:case St.column:case St.stack:case St.component:return!0;case St.ground:return!1;default:throw new jr("CROCOSPCICIC13687",r.type)}}n.isChildItemConfig=e;function t(r,o){return{type:r.type,content:i(o!==void 0?o:r.content),size:r.size,sizeUnit:r.sizeUnit,minSize:r.minSize,minSizeUnit:r.minSizeUnit,id:r.id,isClosable:r.isClosable}}n.createCopy=t;function i(r){const o=r.length,a=new Array(o);for(let l=0;l<o;l++)a[l]=gn.createCopy(r[l]);return a}n.copyContent=i;function s(r){return{type:r,content:[],size:gn.defaults.size,sizeUnit:gn.defaults.sizeUnit,minSize:gn.defaults.minSize,minSizeUnit:gn.defaults.minSizeUnit,id:gn.defaults.id,isClosable:gn.defaults.isClosable}}n.createDefault=s})(dp||(dp={}));var Xd;(function(n){function e(i){return gn.createCopy(i)}n.createCopy=e;function t(i){switch(i.type){case St.row:case St.column:case St.stack:case St.component:return!0;case St.ground:return!1;default:throw new jr("CROCOSPCICIC13687",i.type)}}n.isRootItemConfig=t})(Xd||(Xd={}));var mM;(function(n){function e(t){const i=t===void 0?[]:[t];return{type:St.ground,content:i,size:100,sizeUnit:On.Percent,minSize:0,minSizeUnit:On.Pixel,id:"",isClosable:!1,title:"",reorderEnabled:!1}}n.create=e})(mM||(mM={}));var sn;(function(n){(function(a){a.defaults={constrainDragToContainer:!0,reorderEnabled:!0,popoutWholeStack:!1,blockedPopoutsThrowError:!0,closePopoutsOnUnload:!0,responsiveMode:Gg.none,tabOverlapAllowance:0,reorderOnTabMenuClick:!0,tabControlOffset:10,popInOnClose:!1};function l(c){return{constrainDragToContainer:c.constrainDragToContainer,reorderEnabled:c.reorderEnabled,popoutWholeStack:c.popoutWholeStack,blockedPopoutsThrowError:c.blockedPopoutsThrowError,closePopoutsOnUnload:c.closePopoutsOnUnload,responsiveMode:c.responsiveMode,tabOverlapAllowance:c.tabOverlapAllowance,reorderOnTabMenuClick:c.reorderOnTabMenuClick,tabControlOffset:c.tabControlOffset,popInOnClose:c.popInOnClose}}a.createCopy=l})(n.Settings||(n.Settings={})),function(a){function l(c){return{borderWidth:c.borderWidth,borderGrabWidth:c.borderGrabWidth,defaultMinItemHeight:c.defaultMinItemHeight,defaultMinItemHeightUnit:c.defaultMinItemHeightUnit,defaultMinItemWidth:c.defaultMinItemWidth,defaultMinItemWidthUnit:c.defaultMinItemWidthUnit,headerHeight:c.headerHeight,dragProxyWidth:c.dragProxyWidth,dragProxyHeight:c.dragProxyHeight}}a.createCopy=l,a.defaults={borderWidth:5,borderGrabWidth:5,defaultMinItemHeight:0,defaultMinItemHeightUnit:On.Pixel,defaultMinItemWidth:10,defaultMinItemWidthUnit:On.Pixel,headerHeight:20,dragProxyWidth:300,dragProxyHeight:200}}(n.Dimensions||(n.Dimensions={})),function(a){function l(c){return{show:c.show,popout:c.popout,dock:c.dock,close:c.close,maximise:c.maximise,minimise:c.minimise,tabDropdown:c.tabDropdown}}a.createCopy=l,a.defaults={show:su.top,popout:"open in new window",dock:"dock",maximise:"maximise",minimise:"minimise",close:"close",tabDropdown:"additional tabs"}}(n.Header||(n.Header={}));function e(a){return"parentId"in a}n.isPopout=e;function t(){return{root:void 0,openPopouts:[],dimensions:n.Dimensions.defaults,settings:n.Settings.defaults,header:n.Header.defaults,resolved:!0}}n.createDefault=t;function i(a){return e(a)?Yg.createCopy(a):{root:a.root===void 0?void 0:Xd.createCopy(a.root),openPopouts:n.copyOpenPopouts(a.openPopouts),settings:n.Settings.createCopy(a.settings),dimensions:n.Dimensions.createCopy(a.dimensions),header:n.Header.createCopy(a.header),resolved:a.resolved}}n.createCopy=i;function s(a){const l=a.length,c=new Array(l);for(let u=0;u<l;u++)c[u]=Yg.createCopy(a[u]);return c}n.copyOpenPopouts=s;function r(a){return Kg.translateObject(a,!0)}n.minifyConfig=r;function o(a){return Kg.translateObject(a,!1)}n.unminifyConfig=o})(sn||(sn={}));var Yg;(function(n){(function(t){function i(s){return{width:s.width,height:s.height,left:s.left,top:s.top}}t.createCopy=i,t.defaults={width:null,height:null,left:null,top:null}})(n.Window||(n.Window={}));function e(t){return{root:t.root===void 0?void 0:Xd.createCopy(t.root),openPopouts:sn.copyOpenPopouts(t.openPopouts),settings:sn.Settings.createCopy(t.settings),dimensions:sn.Dimensions.createCopy(t.dimensions),header:sn.Header.createCopy(t.header),parentId:t.parentId,indexInParent:t.indexInParent,window:n.Window.createCopy(t.window),resolved:t.resolved}}n.createCopy=e})(Yg||(Yg={}));var Fi;(function(n){function e(h,f){switch(h.type){case St.ground:throw new xd("ItemConfig cannot specify type ground",JSON.stringify(h));case St.row:case St.column:return lb.resolve(h,f);case St.stack:return Xg.resolve(h,f);case St.component:return ru.resolve(h,f);default:throw new jr("UCUICR55499",h.type)}}n.resolve=e;function t(h){if(h===void 0)return[];{const f=h.length,m=new Array(f);for(let p=0;p<f;p++)m[p]=n.resolve(h[p],!1);return m}}n.resolveContent=t;function i(h){return h===void 0?gn.defaults.id:Array.isArray(h)?h.length===0?gn.defaults.id:h[0]:h}n.resolveId=i;function s(h,f,m,p){if(h!==void 0)return cb(h,[On.Percent,On.Fractional]);if(f!==void 0||m!==void 0){if(f!==void 0)return{size:f,sizeUnit:On.Percent};if(m!==void 0)return{size:m,sizeUnit:On.Percent};throw new fn("CRS33390")}else return p?{size:50,sizeUnit:On.Percent}:{size:gn.defaults.size,sizeUnit:gn.defaults.sizeUnit}}n.resolveSize=s;function r(h,f,m){if(h!==void 0)return cb(h,[On.Pixel]);{const p=f!==void 0;return p||m!==void 0?p?{size:f,sizeUnit:On.Pixel}:{size:m,sizeUnit:On.Pixel}:{size:gn.defaults.minSize,sizeUnit:gn.defaults.minSizeUnit}}}n.resolveMinSize=r;function o(h){return h.size!==void 0?1:h.width!==void 0||h.height!==void 0?2:0}n.calculateSizeWidthHeightSpecificationType=o;function a(h){return h.type===St.ground}n.isGround=a;function l(h){return h.type===St.row}n.isRow=l;function c(h){return h.type===St.column}n.isColumn=c;function u(h){return h.type===St.stack}n.isStack=u;function d(h){return h.type===St.component}n.isComponent=d})(Fi||(Fi={}));var hp;(function(n){const e="__glMaximised";(function(i){function s(r,o){var a;if(!(r===void 0&&o===void 0))return{show:(a=r==null?void 0:r.show)!==null&&a!==void 0?a:o===void 0?void 0:o?sn.Header.defaults.show:!1,popout:r==null?void 0:r.popout,maximise:r==null?void 0:r.maximise,close:r==null?void 0:r.close,minimise:r==null?void 0:r.minimise,tabDropdown:r==null?void 0:r.tabDropdown}}i.resolve=s})(n.Header||(n.Header={}));function t(i){let s,r=i.id,o=!1;if(r===void 0)s=gn.defaults.id;else if(Array.isArray(r)){const l=r.findIndex(c=>c===e);l>0&&(o=!0,r=r.splice(l,1)),r.length>0?s=r[0]:s=gn.defaults.id}else s=r;let a;return i.maximised!==void 0?a=i.maximised:a=o,{id:s,maximised:a}}n.resolveIdAndMaximised=t})(hp||(hp={}));var Xg;(function(n){function e(r,o){var a,l;const{id:c,maximised:u}=hp.resolveIdAndMaximised(r),{size:d,sizeUnit:h}=Fi.resolveSize(r.size,r.width,r.height,o),{size:f,sizeUnit:m}=Fi.resolveMinSize(r.minSize,r.minWidth,r.minHeight);return{type:St.stack,content:i(r.content),size:d,sizeUnit:h,minSize:f,minSizeUnit:m,id:c,maximised:u,isClosable:(a=r.isClosable)!==null&&a!==void 0?a:gn.defaults.isClosable,activeItemIndex:(l=r.activeItemIndex)!==null&&l!==void 0?l:kl.defaultActiveItemIndex,header:hp.Header.resolve(r.header,r.hasHeaders)}}n.resolve=e;function t(r){return{type:St.stack,content:s(r.content),size:jg(r.size,r.sizeUnit),minSize:d2(r.minSize,r.minSizeUnit),id:r.id,maximised:r.maximised,isClosable:r.isClosable,activeItemIndex:r.activeItemIndex,header:No.Header.createCopy(r.header)}}n.fromResolved=t;function i(r){if(r===void 0)return[];{const o=r.length,a=new Array(o);for(let l=0;l<o;l++){const c=r[l],u=Fi.resolve(c,!1);if(gn.isComponentItem(u))a[l]=u;else throw new Un("UCUSICRC91114",JSON.stringify(u))}return a}}function s(r){const o=r.length,a=new Array(o);for(let l=0;l<o;l++){const c=r[l];a[l]=ru.fromResolved(c)}return a}})(Xg||(Xg={}));var ru;(function(n){function e(s,r){var o,a,l;let c=s.componentType;if(c===void 0&&(c=s.componentName),c===void 0)throw new Error("ComponentItemConfig.componentType is undefined");{const{id:u,maximised:d}=hp.resolveIdAndMaximised(s);let h;s.title===void 0||s.title===""?h=n.componentTypeToTitle(c):h=s.title;const{size:f,sizeUnit:m}=Fi.resolveSize(s.size,s.width,s.height,r),{size:p,sizeUnit:y}=Fi.resolveMinSize(s.minSize,s.minWidth,s.minHeight);return{type:s.type,content:[],size:f,sizeUnit:m,minSize:p,minSizeUnit:y,id:u,maximised:d,isClosable:(o=s.isClosable)!==null&&o!==void 0?o:gn.defaults.isClosable,reorderEnabled:(a=s.reorderEnabled)!==null&&a!==void 0?a:up.defaultReorderEnabled,title:h,header:hp.Header.resolve(s.header,s.hasHeaders),componentType:c,componentState:(l=s.componentState)!==null&&l!==void 0?l:{}}}}n.resolve=e;function t(s){return{type:St.component,size:jg(s.size,s.sizeUnit),minSize:d2(s.minSize,s.minSizeUnit),id:s.id,maximised:s.maximised,isClosable:s.isClosable,reorderEnabled:s.reorderEnabled,title:s.title,header:No.Header.createCopy(s.header),componentType:s.componentType,componentState:Wg(void 0,s.componentState)}}n.fromResolved=t;function i(s){switch(typeof s){case"string":return s;case"number":return s.toString();case"boolean":return s.toString();default:return""}}n.componentTypeToTitle=i})(ru||(ru={}));var lb;(function(n){function e(o){switch(o.type){case St.row:case St.column:case St.stack:case St.component:return!0;case St.ground:return!1;default:throw new jr("UROCOSPCICIC13687",o.type)}}n.isChildItemConfig=e;function t(o,a){var l;const{size:c,sizeUnit:u}=Fi.resolveSize(o.size,o.width,o.height,a),{size:d,sizeUnit:h}=Fi.resolveMinSize(o.minSize,o.minWidth,o.minHeight);return{type:o.type,content:n.resolveContent(o.content),size:c,sizeUnit:u,minSize:d,minSizeUnit:h,id:Fi.resolveId(o.id),isClosable:(l=o.isClosable)!==null&&l!==void 0?l:gn.defaults.isClosable}}n.resolve=t;function i(o){return{type:o.type,content:r(o.content),size:jg(o.size,o.sizeUnit),minSize:d2(o.minSize,o.minSizeUnit),id:o.id,isClosable:o.isClosable}}n.fromResolved=i;function s(o){if(o===void 0)return[];{const a=o.length,l=new Array(a);let c=!1,u=!1;for(let f=0;f<a;f++){const m=o[f];if(n.isChildItemConfig(m)){if(!u){const p=Fi.calculateSizeWidthHeightSpecificationType(m);switch(p){case 0:break;case 2:c=!0;break;case 1:u=!0;break;default:throw new jr("ROCICRC87556",p)}}l[f]=m}else throw new xd("ItemConfig is not Row, Column or Stack",m)}let d;u?d=!1:c?d=!0:d=!1;const h=new Array(a);for(let f=0;f<a;f++){const m=l[f],p=Fi.resolve(m,d);if(dp.isChildItemConfig(p))h[f]=p;else throw new Un("UROCOSPIC99512",JSON.stringify(p))}return h}}n.resolveContent=s;function r(o){const a=o.length,l=new Array(a);for(let c=0;c<a;c++){const u=o[c],d=u.type;let h;switch(d){case St.row:case St.column:h=n.fromResolved(u);break;case St.stack:h=Xg.fromResolved(u);break;case St.component:h=ru.fromResolved(u);break;default:throw new jr("ROCICFRC44797",d)}l[c]=h}return l}})(lb||(lb={}));var fp;(function(n){function e(s){switch(s.type){case St.row:case St.column:case St.stack:case St.component:return!0;case St.ground:return!1;default:throw new jr("URICIR23687",s.type)}}n.isRootItemConfig=e;function t(s){if(s!==void 0){const r=Fi.resolve(s,!1);if(Xd.isRootItemConfig(r))return r;throw new xd("ItemConfig is not Row, Column or Stack",JSON.stringify(s))}}n.resolve=t;function i(s){if(s!==void 0){const r=s.type;switch(r){case St.row:case St.column:return lb.fromResolved(s);case St.stack:return Xg.fromResolved(s);case St.component:return ru.fromResolved(s);default:throw new jr("RICFROU89921",r)}}}n.fromResolvedOrUndefined=i})(fp||(fp={}));var Hr;(function(n){(function(o){function a(l){var c,u,d,h,f,m,p,y,v,_;return{constrainDragToContainer:(c=l==null?void 0:l.constrainDragToContainer)!==null&&c!==void 0?c:sn.Settings.defaults.constrainDragToContainer,reorderEnabled:(u=l==null?void 0:l.reorderEnabled)!==null&&u!==void 0?u:sn.Settings.defaults.reorderEnabled,popoutWholeStack:(d=l==null?void 0:l.popoutWholeStack)!==null&&d!==void 0?d:sn.Settings.defaults.popoutWholeStack,blockedPopoutsThrowError:(h=l==null?void 0:l.blockedPopoutsThrowError)!==null&&h!==void 0?h:sn.Settings.defaults.blockedPopoutsThrowError,closePopoutsOnUnload:(f=l==null?void 0:l.closePopoutsOnUnload)!==null&&f!==void 0?f:sn.Settings.defaults.closePopoutsOnUnload,responsiveMode:(m=l==null?void 0:l.responsiveMode)!==null&&m!==void 0?m:sn.Settings.defaults.responsiveMode,tabOverlapAllowance:(p=l==null?void 0:l.tabOverlapAllowance)!==null&&p!==void 0?p:sn.Settings.defaults.tabOverlapAllowance,reorderOnTabMenuClick:(y=l==null?void 0:l.reorderOnTabMenuClick)!==null&&y!==void 0?y:sn.Settings.defaults.reorderOnTabMenuClick,tabControlOffset:(v=l==null?void 0:l.tabControlOffset)!==null&&v!==void 0?v:sn.Settings.defaults.tabControlOffset,popInOnClose:(_=l==null?void 0:l.popInOnClose)!==null&&_!==void 0?_:sn.Settings.defaults.popInOnClose}}o.resolve=a})(n.Settings||(n.Settings={})),function(o){function a(d){var h,f,m,p,y;const{size:v,sizeUnit:_}=o.resolveDefaultMinItemHeight(d),{size:b,sizeUnit:w}=o.resolveDefaultMinItemWidth(d);return{borderWidth:(h=d==null?void 0:d.borderWidth)!==null&&h!==void 0?h:sn.Dimensions.defaults.borderWidth,borderGrabWidth:(f=d==null?void 0:d.borderGrabWidth)!==null&&f!==void 0?f:sn.Dimensions.defaults.borderGrabWidth,defaultMinItemHeight:v,defaultMinItemHeightUnit:_,defaultMinItemWidth:b,defaultMinItemWidthUnit:w,headerHeight:(m=d==null?void 0:d.headerHeight)!==null&&m!==void 0?m:sn.Dimensions.defaults.headerHeight,dragProxyWidth:(p=d==null?void 0:d.dragProxyWidth)!==null&&p!==void 0?p:sn.Dimensions.defaults.dragProxyWidth,dragProxyHeight:(y=d==null?void 0:d.dragProxyHeight)!==null&&y!==void 0?y:sn.Dimensions.defaults.dragProxyHeight}}o.resolve=a;function l(d){return{borderWidth:d.borderWidth,borderGrabWidth:d.borderGrabWidth,defaultMinItemHeight:jg(d.defaultMinItemHeight,d.defaultMinItemHeightUnit),defaultMinItemWidth:jg(d.defaultMinItemWidth,d.defaultMinItemWidthUnit),headerHeight:d.headerHeight,dragProxyWidth:d.dragProxyWidth,dragProxyHeight:d.dragProxyHeight}}o.fromResolved=l;function c(d){const h=d==null?void 0:d.defaultMinItemHeight;return h===void 0?{size:sn.Dimensions.defaults.defaultMinItemHeight,sizeUnit:sn.Dimensions.defaults.defaultMinItemHeightUnit}:cb(h,[On.Pixel])}o.resolveDefaultMinItemHeight=c;function u(d){const h=d==null?void 0:d.defaultMinItemWidth;return h===void 0?{size:sn.Dimensions.defaults.defaultMinItemWidth,sizeUnit:sn.Dimensions.defaults.defaultMinItemWidthUnit}:cb(h,[On.Pixel])}o.resolveDefaultMinItemWidth=u}(n.Dimensions||(n.Dimensions={})),function(o){function a(l,c,u){var d,h,f,m,p,y,v,_,b,w,x,S;let C;return(l==null?void 0:l.show)!==void 0?C=l.show:c!==void 0&&c.hasHeaders!==void 0?C=c.hasHeaders?sn.Header.defaults.show:!1:C=sn.Header.defaults.show,{show:C,popout:(h=(d=l==null?void 0:l.popout)!==null&&d!==void 0?d:u==null?void 0:u.popout)!==null&&h!==void 0?h:(c==null?void 0:c.showPopoutIcon)===!1?!1:sn.Header.defaults.popout,dock:(m=(f=l==null?void 0:l.popin)!==null&&f!==void 0?f:u==null?void 0:u.popin)!==null&&m!==void 0?m:sn.Header.defaults.dock,maximise:(y=(p=l==null?void 0:l.maximise)!==null&&p!==void 0?p:u==null?void 0:u.maximise)!==null&&y!==void 0?y:(c==null?void 0:c.showMaximiseIcon)===!1?!1:sn.Header.defaults.maximise,close:(_=(v=l==null?void 0:l.close)!==null&&v!==void 0?v:u==null?void 0:u.close)!==null&&_!==void 0?_:(c==null?void 0:c.showCloseIcon)===!1?!1:sn.Header.defaults.close,minimise:(w=(b=l==null?void 0:l.minimise)!==null&&b!==void 0?b:u==null?void 0:u.minimise)!==null&&w!==void 0?w:sn.Header.defaults.minimise,tabDropdown:(S=(x=l==null?void 0:l.tabDropdown)!==null&&x!==void 0?x:u==null?void 0:u.tabDropdown)!==null&&S!==void 0?S:sn.Header.defaults.tabDropdown}}o.resolve=a}(n.Header||(n.Header={}));function e(o){return"parentId"in o||"indexInParent"in o||"window"in o}n.isPopout=e;function t(o){if(e(o))return tg.resolve(o);{let a;return o.root!==void 0?a=o.root:o.content!==void 0&&o.content.length>0?a=o.content[0]:a=void 0,{resolved:!0,root:fp.resolve(a),openPopouts:n.resolveOpenPopouts(o.openPopouts),dimensions:n.Dimensions.resolve(o.dimensions),settings:n.Settings.resolve(o.settings),header:n.Header.resolve(o.header,o.settings,o.labels)}}}n.resolve=t;function i(o){return{root:fp.fromResolvedOrUndefined(o.root),openPopouts:tg.fromResolvedArray(o.openPopouts),settings:sn.Settings.createCopy(o.settings),dimensions:n.Dimensions.fromResolved(o.dimensions),header:sn.Header.createCopy(o.header)}}n.fromResolved=i;function s(o){const a=o;return a.resolved!==void 0&&a.resolved===!0}n.isResolved=s;function r(o){if(o===void 0)return[];{const a=o.length,l=new Array(a);for(let c=0;c<a;c++)l[c]=tg.resolve(o[c]);return l}}n.resolveOpenPopouts=r})(Hr||(Hr={}));var tg;(function(n){(function(s){function r(a,l){var c,u,d,h,f,m,p,y;let v;const _=Yg.Window.defaults;return a!==void 0?v={width:(c=a.width)!==null&&c!==void 0?c:_.width,height:(u=a.height)!==null&&u!==void 0?u:_.height,left:(d=a.left)!==null&&d!==void 0?d:_.left,top:(h=a.top)!==null&&h!==void 0?h:_.top}:v={width:(f=l==null?void 0:l.width)!==null&&f!==void 0?f:_.width,height:(m=l==null?void 0:l.height)!==null&&m!==void 0?m:_.height,left:(p=l==null?void 0:l.left)!==null&&p!==void 0?p:_.left,top:(y=l==null?void 0:l.top)!==null&&y!==void 0?y:_.top},v}s.resolve=r;function o(a){return{width:a.width===null?void 0:a.width,height:a.height===null?void 0:a.height,left:a.left===null?void 0:a.left,top:a.top===null?void 0:a.top}}s.fromResolved=o})(n.Window||(n.Window={}));function e(s){var r,o;let a;return s.root!==void 0?a=s.root:s.content!==void 0&&s.content.length>0?a=s.content[0]:a=void 0,{root:fp.resolve(a),openPopouts:Hr.resolveOpenPopouts(s.openPopouts),dimensions:Hr.Dimensions.resolve(s.dimensions),settings:Hr.Settings.resolve(s.settings),header:Hr.Header.resolve(s.header,s.settings,s.labels),parentId:(r=s.parentId)!==null&&r!==void 0?r:null,indexInParent:(o=s.indexInParent)!==null&&o!==void 0?o:null,window:n.Window.resolve(s.window,s.dimensions),resolved:!0}}n.resolve=e;function t(s){return{root:fp.fromResolvedOrUndefined(s.root),openPopouts:i(s.openPopouts),dimensions:Hr.Dimensions.fromResolved(s.dimensions),settings:sn.Settings.createCopy(s.settings),header:sn.Header.createCopy(s.header),parentId:s.parentId,indexInParent:s.indexInParent,window:n.Window.fromResolved(s.window)}}n.fromResolved=t;function i(s){const r=s.length,o=new Array(r);for(let a=0;a<r;a++){const l=s[a];o[a]=n.fromResolved(l)}return o}n.fromResolvedArray=i})(tg||(tg={}));function cb(n,e){const{numericPart:t,firstNonNumericCharPart:i}=t_e(n),s=Number.parseInt(t,10);if(isNaN(s))throw new xd(`${Sd[7]}: ${n}`);{const r=On.tryParse(i);if(r===void 0)throw new xd(`${Sd[8]}: ${n}`);if(e.includes(r))return{size:s,sizeUnit:r};throw new xd(`${Sd[9]}: ${n}`)}}function jg(n,e){return n.toString(10)+On.format(e)}function d2(n,e){if(n!==void 0)return n.toString(10)+On.format(e)}class Xi{constructor(){this._allEventSubscriptions=[],this._subscriptionsMap=new Map,this.unbind=this.removeEventListener,this.trigger=this.emit}tryBubbleEvent(e,t){}emit(e,...t){let i=this._subscriptionsMap.get(e);if(i!==void 0){i=i.slice();for(let s=0;s<i.length;s++){const r=i[s];r(...t)}}this.emitAllEvent(e,t),this.tryBubbleEvent(e,t)}emitUnknown(e,...t){let i=this._subscriptionsMap.get(e);if(i!==void 0){i=i.slice();for(let s=0;s<i.length;s++)i[s](...t)}this.emitAllEvent(e,t),this.tryBubbleEvent(e,t)}emitBaseBubblingEvent(e){const t=new Xi.BubblingEvent(e,this);this.emitUnknown(e,t)}emitUnknownBubblingEvent(e){const t=new Xi.BubblingEvent(e,this);this.emitUnknown(e,t)}removeEventListener(e,t){const i=t;this.removeUnknownEventListener(e,i)}off(e,t){this.removeEventListener(e,t)}addEventListener(e,t){const i=t;this.addUnknownEventListener(e,i)}on(e,t){this.addEventListener(e,t)}addUnknownEventListener(e,t){if(e===Xi.ALL_EVENT)this._allEventSubscriptions.push(t);else{let i=this._subscriptionsMap.get(e);i!==void 0?i.push(t):(i=[t],this._subscriptionsMap.set(e,i))}}removeUnknownEventListener(e,t){if(e===Xi.ALL_EVENT)this.removeSubscription(e,this._allEventSubscriptions,t);else{const i=this._subscriptionsMap.get(e);if(i===void 0)throw new Error("No subscribtions to unsubscribe for event "+e);this.removeSubscription(e,i,t)}}removeSubscription(e,t,i){const s=t.indexOf(i);if(s<0)throw new Error("Nothing to unbind for "+e);t.splice(s,1)}emitAllEvent(e,t){const i=this._allEventSubscriptions.length;if(i>0){const s=t.slice();s.unshift(e);const r=this._allEventSubscriptions.slice();for(let o=0;o<i;o++)r[o](...s)}}}(function(n){n.ALL_EVENT="__all",n.headerClickEventName="stackHeaderClick",n.headerTouchStartEventName="stackHeaderTouchStart";class e{constructor(r,o){this._name=r,this._target=o,this._isPropagationStopped=!1}get name(){return this._name}get target(){return this._target}get origin(){return this._target}get isPropagationStopped(){return this._isPropagationStopped}stopPropagation(){this._isPropagationStopped=!0}}n.BubblingEvent=e;class t extends e{constructor(r,o,a){super(r,o),this._mouseEvent=a}get mouseEvent(){return this._mouseEvent}}n.ClickBubblingEvent=t;class i extends e{constructor(r,o,a){super(r,o),this._touchEvent=a}get touchEvent(){return this._touchEvent}}n.TouchStartBubblingEvent=i})(Xi||(Xi={}));class a_e extends Xi{constructor(e,t,i,s,r,o,a,l,c){super(),this._config=e,this._parent=t,this._layoutManager=i,this._element=s,this._updateItemConfigEvent=r,this._showEvent=o,this._hideEvent=a,this._focusEvent=l,this._blurEvent=c,this._stackMaximised=!1,this._width=0,this._height=0,this._visible=!0,this._isShownWithZeroDimensions=!0,this._componentType=e.componentType,this._isClosable=e.isClosable,this._initialState=e.componentState,this._state=this._initialState,this._boundComponent=this.layoutManager.bindComponent(this,e),this.updateElementPositionPropertyFromBoundComponent()}get width(){return this._width}get height(){return this._height}get parent(){return this._parent}get componentName(){return this._componentType}get componentType(){return this._componentType}get virtual(){return this._boundComponent.virtual}get component(){return this._boundComponent.component}get tab(){return this._tab}get title(){return this._parent.title}get layoutManager(){return this._layoutManager}get isHidden(){return!this._visible}get visible(){return this._visible}get state(){return this._state}get initialState(){return this._initialState}get element(){return this._element}destroy(){this.releaseComponent(),this.stateRequestEvent=void 0,this.emit("destroy")}getElement(){return this._element}hide(){this._hideEvent()}show(){this._showEvent()}focus(e=!1){this._focusEvent(e)}blur(e=!1){this._blurEvent(e)}setSize(e,t){let i=this._parent;if(i.isColumn||i.isRow||i.parent===null)throw new Un("ICSSPRC","ComponentContainer cannot have RowColumn Parent");{let s;do s=i,i=i.parent;while(i!==null&&!i.isColumn&&!i.isRow);if(i===null)return!1;{const r=i.isColumn?"height":"width",o=this[r];if(o===null)throw new vi("ICSSCS11194");{const a=r==="height"?t:e,l=o*(1/(s.size/100)),c=a/l*100,u=(s.size-c)/(i.contentItems.length-1);for(let d=0;d<i.contentItems.length;d++){const h=i.contentItems[d];h===s?h.size=c:h.size+=u}return i.updateSize(!1),!0}}}}close(){this._isClosable&&(this.emit("close"),this._parent.close())}replaceComponent(e){if(this.releaseComponent(),Fi.isComponent(e)){const t=ru.resolve(e,!1);if(this._initialState=t.componentState,this._state=this._initialState,this._componentType=t.componentType,this._updateItemConfigEvent(t),this._boundComponent=this.layoutManager.bindComponent(this,t),this.updateElementPositionPropertyFromBoundComponent(),this._boundComponent.virtual){if(this.virtualVisibilityChangeRequiredEvent!==void 0&&this.virtualVisibilityChangeRequiredEvent(this,this._visible),this.virtualRectingRequiredEvent!==void 0){this._layoutManager.fireBeforeVirtualRectingEvent(1);try{this.virtualRectingRequiredEvent(this,this._width,this._height)}finally{this._layoutManager.fireAfterVirtualRectingEvent()}}this.setBaseLogicalZIndex()}this.emit("stateChanged")}else throw new Error("ReplaceComponent not passed a component ItemConfig")}getState(){return this._state}extendState(e){const t=ed(this._state,e);this.setState(t)}setState(e){this._state=e,this._parent.emitBaseBubblingEvent("stateChanged")}setTitle(e){this._parent.setTitle(e)}setTab(e){this._tab=e,this.emit("tab",e)}setVisibility(e){this._boundComponent.virtual&&this.virtualVisibilityChangeRequiredEvent!==void 0&&this.virtualVisibilityChangeRequiredEvent(this,e),e?this._visible?this._isShownWithZeroDimensions&&(this._height!==0||this._width!==0)&&(this._isShownWithZeroDimensions=!1,this.setSizeToNodeSize(this._width,this._height,!0),this.emitShow()):(this._visible=!0,this._height===0&&this._width===0?this._isShownWithZeroDimensions=!0:(this._isShownWithZeroDimensions=!1,this.setSizeToNodeSize(this._width,this._height,!0),this.emitShow())):this._visible&&(this._visible=!1,this._isShownWithZeroDimensions=!1,this.emitHide())}setBaseLogicalZIndex(){this.setLogicalZIndex(eg.base)}setLogicalZIndex(e){e!==this._logicalZIndex&&(this._logicalZIndex=e,this.notifyVirtualZIndexChangeRequired())}enterDragMode(e,t){this._width=e,this._height=t,Co(this._element,e),Mo(this._element,t),this.setLogicalZIndex(eg.drag),this.drag()}exitDragMode(){this.setBaseLogicalZIndex()}enterStackMaximised(){this._stackMaximised=!0,this.setLogicalZIndex(eg.stackMaximised)}exitStackMaximised(){this.setBaseLogicalZIndex(),this._stackMaximised=!1}drag(){if(this._boundComponent.virtual&&this.virtualRectingRequiredEvent!==void 0){this._layoutManager.fireBeforeVirtualRectingEvent(1);try{this.virtualRectingRequiredEvent(this,this._width,this._height)}finally{this._layoutManager.fireAfterVirtualRectingEvent()}}}setSizeToNodeSize(e,t,i){(e!==this._width||t!==this._height||i)&&(this._width=e,this._height=t,Co(this._element,e),Mo(this._element,t),this._boundComponent.virtual?this.addVirtualSizedContainerToLayoutManager():(this.emit("resize"),this.checkShownFromZeroDimensions()))}notifyVirtualRectingRequired(){this.virtualRectingRequiredEvent!==void 0&&(this.virtualRectingRequiredEvent(this,this._width,this._height),this.emit("resize"),this.checkShownFromZeroDimensions())}notifyVirtualZIndexChangeRequired(){if(this.virtualZIndexChangeRequiredEvent!==void 0){const e=this._logicalZIndex,t=e_e[e];this.virtualZIndexChangeRequiredEvent(this,e,t)}}updateElementPositionPropertyFromBoundComponent(){this._boundComponent.virtual?this._element.style.position="static":this._element.style.position=""}addVirtualSizedContainerToLayoutManager(){this._layoutManager.beginVirtualSizedContainerAdding();try{this._layoutManager.addVirtualSizedContainer(this)}finally{this._layoutManager.endVirtualSizedContainerAdding()}}checkShownFromZeroDimensions(){this._isShownWithZeroDimensions&&(this._height!==0||this._width!==0)&&(this._isShownWithZeroDimensions=!1,this.emitShow())}emitShow(){this.emit("shown"),this.emit("show")}emitHide(){this.emit("hide")}releaseComponent(){this._stackMaximised&&this.exitStackMaximised(),this.emit("beforeComponentRelease",this._boundComponent.component),this.layoutManager.unbindComponent(this,this._boundComponent.virtual,this._boundComponent.component)}}class l_e extends Xi{constructor(e,t,i){super(),this._config=e,this._initialWindowSize=t,this._layoutManager=i,this._isInitialised=!1,this._popoutWindow=null,this.createWindow()}toConfig(){var e,t;if(this._isInitialised===!1)throw new Error("Can't create config, layout not yet initialised");const s=this.getGlInstance().saveLayout();let r,o;this._popoutWindow===null?(r=null,o=null):(r=(e=this._popoutWindow.screenX)!==null&&e!==void 0?e:this._popoutWindow.screenLeft,o=(t=this._popoutWindow.screenY)!==null&&t!==void 0?t:this._popoutWindow.screenTop);const a={width:this.getGlInstance().width,height:this.getGlInstance().height,left:r,top:o};return{root:s.root,openPopouts:s.openPopouts,settings:s.settings,dimensions:s.dimensions,header:s.header,window:a,parentId:this._config.parentId,indexInParent:this._config.indexInParent,resolved:!0}}getGlInstance(){if(this._popoutWindow===null)throw new vi("BPGGI24693");return this._popoutWindow.__glInstance}getWindow(){if(this._popoutWindow===null)throw new vi("BPGW087215");return this._popoutWindow}close(){if(this.getGlInstance())this.getGlInstance().closeWindow();else try{this.getWindow().close()}catch{}}popIn(){let e,t=this._config.indexInParent;if(!this._config.parentId)return;const i=this.getGlInstance().saveLayout(),r=ed({},i).root;if(r===void 0)throw new fn("BPPIR19998");const o=this._layoutManager.groundItem;if(o===void 0)throw new fn("BPPIG34972");e=o.getItemsByPopInParentId(this._config.parentId)[0],e||(o.contentItems.length>0?e=o.contentItems[0]:e=o,t=0);const a=this._layoutManager.createAndInitContentItem(r,e);e.addChild(a,t),this._layoutManager.layoutConfig.settings.popInOnClose?this._onClose():this.close()}createWindow(){const e=this.createUrl(),t=Math.floor(Math.random()*1e6).toString(36),i=this.serializeWindowFeatures({width:this._initialWindowSize.width,height:this._initialWindowSize.height,innerWidth:this._initialWindowSize.width,innerHeight:this._initialWindowSize.height,menubar:"no",toolbar:"no",location:"no",personalbar:"no",resizable:"yes",scrollbars:"no",status:"no"});if(this._popoutWindow=globalThis.open(e,t,i),!this._popoutWindow){if(this._layoutManager.layoutConfig.settings.blockedPopoutsThrowError===!0)throw new Jye("Popout blocked");return}this._popoutWindow.addEventListener("load",()=>this.positionWindow(),{passive:!0}),this._popoutWindow.addEventListener("beforeunload",()=>{this._layoutManager.layoutConfig.settings.popInOnClose?this.popIn():this._onClose()},{passive:!0}),this._checkReadyInterval=setInterval(()=>this.checkReady(),10)}checkReady(){if(this._popoutWindow===null)throw new vi("BPCR01844");this._popoutWindow.__glInstance&&this._popoutWindow.__glInstance.isInitialised&&(this.onInitialised(),this._checkReadyInterval!==void 0&&(clearInterval(this._checkReadyInterval),this._checkReadyInterval=void 0))}serializeWindowFeatures(e){const t=[];for(const i in e)t.push(i+"="+e[i].toString());return t.join(",")}createUrl(){const e="gl-window-config-"+SU(),t=sn.minifyConfig(this._config);try{localStorage.setItem(e,JSON.stringify(t))}catch(s){throw new Error("Error while writing to localStorage "+o_e(s))}const i=new URL(location.href);return i.searchParams.set("gl-window",e),i.toString()}positionWindow(){if(this._popoutWindow===null)throw new Error("BrowserPopout.positionWindow: null popoutWindow");this._popoutWindow.moveTo(this._initialWindowSize.left,this._initialWindowSize.top),this._popoutWindow.focus()}onInitialised(){this._isInitialised=!0,this.getGlInstance().on("popIn",()=>this.popIn()),this.emit("initialised")}_onClose(){setTimeout(()=>this.emit("closed"),50)}}class zr extends Xi{constructor(e,t,i,s){super(),this.layoutManager=e,this._parent=i,this._element=s,this._popInParentIds=[],this._type=t.type,this._id=t.id,this._isInitialised=!1,this.isGround=!1,this.isRow=!1,this.isColumn=!1,this.isStack=!1,this.isComponent=!1,this.size=t.size,this.sizeUnit=t.sizeUnit,this.minSize=t.minSize,this.minSizeUnit=t.minSizeUnit,this._isClosable=t.isClosable,this._pendingEventPropagations={},this._throttledEvents=["stateChanged"],this._contentItems=this.createContentItems(t.content)}get type(){return this._type}get id(){return this._id}set id(e){this._id=e}get popInParentIds(){return this._popInParentIds}get parent(){return this._parent}get contentItems(){return this._contentItems}get isClosable(){return this._isClosable}get element(){return this._element}get isInitialised(){return this._isInitialised}static isStack(e){return e.isStack}static isComponentItem(e){return e.isComponent}static isComponentParentableItem(e){return e.isStack||e.isGround}removeChild(e,t=!1){const i=this._contentItems.indexOf(e);if(i===-1)throw new Error("Can't remove child item. Unknown content item");if(t||this._contentItems[i].destroy(),this._contentItems.splice(i,1),this._contentItems.length>0)this.updateSize(!1);else if(!this.isGround&&this._isClosable===!0){if(this._parent===null)throw new vi("CIUC00874");this._parent.removeChild(this)}}addChild(e,t,i){return t??(t=this._contentItems.length),this._contentItems.splice(t,0,e),e.setParent(this),this._isInitialised===!0&&e._isInitialised===!1&&e.init(),t}replaceChild(e,t,i=!1){const s=this._contentItems.indexOf(e),r=e._element.parentNode;if(s===-1)throw new Un("CIRCI23232","Can't replace child. oldChild is not child of this");if(r===null)throw new vi("CIRCP23232");if(r.replaceChild(t._element,e._element),i===!0&&(e._parent=null,e.destroy()),this._contentItems[s]=t,t.setParent(this),t.size=e.size,t.sizeUnit=e.sizeUnit,t.minSize=e.minSize,t.minSizeUnit=e.minSizeUnit,t._parent===null)throw new vi("CIRCNC45699");t._parent._isInitialised===!0&&t._isInitialised===!1&&t.init(),this.updateSize(!1)}remove(){if(this._parent===null)throw new vi("CIR11110");this._parent.removeChild(this)}popout(){const e=SU(),t=this.layoutManager.createPopoutFromContentItem(this,void 0,e,void 0);return this.emitBaseBubblingEvent("stateChanged"),t}calculateConfigContent(){const e=this._contentItems,t=e.length,i=new Array(t);for(let s=0;s<t;s++){const r=e[s];i[s]=r.toConfig()}return i}highlightDropZone(e,t,i){const s=this.layoutManager.dropTargetIndicator;if(s===null)throw new vi("ACIHDZ5593");s.highlightArea(i,1)}onDrop(e,t){this.addChild(e)}show(){this.layoutManager.beginSizeInvalidation();try{Cd(this._element,!0);for(let e=0;e<this._contentItems.length;e++)this._contentItems[e].show()}finally{this.layoutManager.endSizeInvalidation()}}destroy(){for(let e=0;e<this._contentItems.length;e++)this._contentItems[e].destroy();this._contentItems=[],this.emitBaseBubblingEvent("beforeItemDestroyed"),this._element.remove(),this.emitBaseBubblingEvent("itemDestroyed")}getElementArea(e){e=e??this._element;const t=e.getBoundingClientRect(),i=t.top+document.body.scrollTop,s=t.left+document.body.scrollLeft,r=t.width,o=t.height;return{x1:s,y1:i,x2:s+r,y2:i+o,surface:r*o,contentItem:this}}init(){this._isInitialised=!0,this.emitBaseBubblingEvent("itemCreated"),this.emitUnknownBubblingEvent(this.type+"Created")}setParent(e){this._parent=e}addPopInParentId(e){this.popInParentIds.includes(e)||this.popInParentIds.push(e)}initContentItems(){for(let e=0;e<this._contentItems.length;e++)this._contentItems[e].init()}hide(){this.layoutManager.beginSizeInvalidation();try{Cd(this._element,!1)}finally{this.layoutManager.endSizeInvalidation()}}updateContentItemsSize(e){for(let t=0;t<this._contentItems.length;t++)this._contentItems[t].updateSize(e)}createContentItems(e){const t=e.length,i=new Array(t);for(let s=0;s<e.length;s++)i[s]=this.layoutManager.createContentItem(e[s],this);return i}propagateEvent(e,t){if(t.length===1){const i=t[0];i instanceof Xi.BubblingEvent&&i.isPropagationStopped===!1&&this._isInitialised===!0&&(this.isGround===!1&&this._parent?this._parent.emitUnknown(e,i):this.scheduleEventPropagationToLayoutManager(e,i))}}tryBubbleEvent(e,t){if(t.length===1){const i=t[0];i instanceof Xi.BubblingEvent&&i.isPropagationStopped===!1&&this._isInitialised===!0&&(this.isGround===!1&&this._parent?this._parent.emitUnknown(e,i):this.scheduleEventPropagationToLayoutManager(e,i))}}scheduleEventPropagationToLayoutManager(e,t){this._throttledEvents.indexOf(e)===-1?this.layoutManager.emitUnknown(e,t):this._pendingEventPropagations[e]!==!0&&(this._pendingEventPropagations[e]=!0,globalThis.requestAnimationFrame(()=>this.propagateEventToLayoutManager(e,t)))}propagateEventToLayoutManager(e,t){this._pendingEventPropagations[e]=!1,this.layoutManager.emitUnknown(e,t)}}class cd extends zr{constructor(e,t,i){super(e,t,i,document.createElement("div")),this._parentItem=i,this._focused=!1,this.isComponent=!0,this._reorderEnabled=t.reorderEnabled,this.applyUpdatableConfig(t),this._initialWantMaximise=t.maximised;const s=document.createElement("div");s.classList.add("lm_content"),this.element.appendChild(s),this._container=new a_e(t,this,e,s,r=>this.handleUpdateItemConfigEvent(r),()=>this.show(),()=>this.hide(),r=>this.focus(r),r=>this.blur(r))}get componentName(){return this._container.componentType}get componentType(){return this._container.componentType}get reorderEnabled(){return this._reorderEnabled}get initialWantMaximise(){return this._initialWantMaximise}get component(){return this._container.component}get container(){return this._container}get parentItem(){return this._parentItem}get headerConfig(){return this._headerConfig}get title(){return this._title}get tab(){return this._tab}get focused(){return this._focused}destroy(){this._container.destroy(),super.destroy()}applyUpdatableConfig(e){this.setTitle(e.title),this._headerConfig=e.header}toConfig(){const e=this._container.stateRequestEvent,t=e===void 0?this._container.state:e();return{type:St.component,content:[],size:this.size,sizeUnit:this.sizeUnit,minSize:this.minSize,minSizeUnit:this.minSizeUnit,id:this.id,maximised:!1,isClosable:this.isClosable,reorderEnabled:this._reorderEnabled,title:this._title,header:No.Header.createCopy(this._headerConfig),componentType:up.copyComponentType(this.componentType),componentState:t}}close(){if(this.parent===null)throw new vi("CIC68883");this.parent.removeChild(this,!1)}enterDragMode(e,t){Co(this.element,e),Mo(this.element,t),this._container.enterDragMode(e,t)}exitDragMode(){this._container.exitDragMode()}enterStackMaximised(){this._container.enterStackMaximised()}exitStackMaximised(){this._container.exitStackMaximised()}drag(){this._container.drag()}updateSize(e){this.updateNodeSize(e)}init(){this.updateNodeSize(!1),super.init(),this._container.emit("open"),this.initContentItems()}setTitle(e){this._title=e,this.emit("titleChanged",e),this.emit("stateChanged")}setTab(e){this._tab=e,this.emit("tab",e),this._container.setTab(e)}hide(){super.hide(),this._container.setVisibility(!1)}show(){super.show(),this._container.setVisibility(!0)}focus(e=!1){this.parentItem.setActiveComponentItem(this,!0,e)}setFocused(e){this._focused=!0,this.tab.setFocused(),e||this.emitBaseBubblingEvent("focus")}blur(e=!1){this._focused&&this.layoutManager.setFocusedComponentItem(void 0,e)}setBlurred(e){this._focused=!1,this.tab.setBlurred(),e||this.emitBaseBubblingEvent("blur")}setParent(e){this._parentItem=e,super.setParent(e)}handleUpdateItemConfigEvent(e){this.applyUpdatableConfig(e)}updateNodeSize(e){if(this.element.style.display!=="none"){const{width:t,height:i}=Fc(this.element);this._container.setSizeToNodeSize(t,i,e)}}}class CU extends zr{constructor(){super(...arguments),this._focused=!1}get focused(){return this._focused}setFocusedValue(e){this._focused=e}}class h2 extends Xi{constructor(e,t){super(),this._eElement=e,this._pointerTracking=!1,this._pointerDownEventListener=i=>this.onPointerDown(i),this._pointerMoveEventListener=i=>this.onPointerMove(i),this._pointerUpEventListener=i=>this.onPointerUp(i),this._timeout=void 0,this._allowableTargets=[e,...t],this._oDocument=document,this._eBody=document.body,this._nDelay=1800,this._nDistance=10,this._nX=0,this._nY=0,this._nOriginalX=0,this._nOriginalY=0,this._dragging=!1,this._eElement.addEventListener("pointerdown",this._pointerDownEventListener,{passive:!0})}destroy(){this.checkRemovePointerTrackingEventListeners(),this._eElement.removeEventListener("pointerdown",this._pointerDownEventListener)}cancelDrag(){this.processDragStop(void 0)}onPointerDown(e){if(this._allowableTargets.includes(e.target)&&e.isPrimary){const t=this.getPointerCoordinates(e);this.processPointerDown(t)}}processPointerDown(e){this._nOriginalX=e.x,this._nOriginalY=e.y,this._oDocument.addEventListener("pointermove",this._pointerMoveEventListener),this._oDocument.addEventListener("pointerup",this._pointerUpEventListener,{passive:!0}),this._pointerTracking=!0,this._timeout=setTimeout(()=>{try{this.startDrag()}catch(t){throw console.error(t),t}},this._nDelay)}onPointerMove(e){this._pointerTracking&&(this.processDragMove(e),e.preventDefault())}processDragMove(e){this._nX=e.pageX-this._nOriginalX,this._nY=e.pageY-this._nOriginalY,this._dragging===!1&&(Math.abs(this._nX)>this._nDistance||Math.abs(this._nY)>this._nDistance)&&this.startDrag(),this._dragging&&this.emit("drag",this._nX,this._nY,e)}onPointerUp(e){this.processDragStop(e)}processDragStop(e){var t;this._timeout!==void 0&&(clearTimeout(this._timeout),this._timeout=void 0),this.checkRemovePointerTrackingEventListeners(),this._dragging===!0&&(this._eBody.classList.remove("lm_dragging"),this._eElement.classList.remove("lm_dragging"),(t=this._oDocument.querySelector("iframe"))===null||t===void 0||t.style.setProperty("pointer-events",""),this._dragging=!1,this.emit("dragStop",e))}checkRemovePointerTrackingEventListeners(){this._pointerTracking&&(this._oDocument.removeEventListener("pointermove",this._pointerMoveEventListener),this._oDocument.removeEventListener("pointerup",this._pointerUpEventListener),this._pointerTracking=!1)}startDrag(){var e;this._timeout!==void 0&&(clearTimeout(this._timeout),this._timeout=void 0),this._dragging=!0,this._eBody.classList.add("lm_dragging"),this._eElement.classList.add("lm_dragging"),(e=this._oDocument.querySelector("iframe"))===null||e===void 0||e.style.setProperty("pointer-events","none"),this.emit("dragStart",this._nOriginalX,this._nOriginalY)}getPointerCoordinates(e){return{x:e.pageX,y:e.pageY}}}class c_e{constructor(e,t,i){this._isVertical=e,this._size=t,this._grabSize=i<this._size?this._size:i,this._element=document.createElement("div"),this._element.classList.add("lm_splitter");const s=document.createElement("div");s.classList.add("lm_drag_handle");const r=this._grabSize-this._size,o=r/2;this._isVertical?(s.style.top=zn(-o),s.style.height=zn(this._size+r),this._element.classList.add("lm_vertical"),this._element.style.height=zn(this._size)):(s.style.left=zn(-o),s.style.width=zn(this._size+r),this._element.classList.add("lm_horizontal"),this._element.style.width=zn(this._size)),this._element.appendChild(s),this._dragListener=new h2(this._element,[s])}get element(){return this._element}destroy(){this._element.remove()}on(e,t){this._dragListener.on(e,t)}}class jd extends zr{constructor(e,t,i,s){switch(super(t,i,s,jd.createElement(document,e)),this._rowOrColumnParent=s,this._splitter=[],this.isRow=!e,this.isColumn=e,this._childElementContainer=this.element,this._splitterSize=t.layoutConfig.dimensions.borderWidth,this._splitterGrabSize=t.layoutConfig.dimensions.borderGrabWidth,this._isColumn=e,this._dimension=e?"height":"width",this._splitterPosition=null,this._splitterMinPosition=null,this._splitterMaxPosition=null,i.type){case St.row:case St.column:this._configType=i.type;break;default:throw new Un("ROCCCT00925")}}newComponent(e,t,i,s){const r={type:"component",componentType:e,componentState:t,title:i};return this.newItem(r,s)}addComponent(e,t,i,s){const r={type:"component",componentType:e,componentState:t,title:i};return this.addItem(r,s)}newItem(e,t){t=this.addItem(e,t);const i=this.contentItems[t];return zr.isStack(i)&&Fi.isComponent(e)?i.contentItems[0]:i}addItem(e,t){this.layoutManager.checkMinimiseMaximisedStack();const i=Fi.resolve(e,!1),s=this.layoutManager.createAndInitContentItem(i,this);return this.addChild(s,t,!1)}addChild(e,t,i){if(t===void 0&&(t=this.contentItems.length),this.contentItems.length>0){const r=this.createSplitter(Math.max(0,t-1)).element;t>0?(this.contentItems[t-1].element.insertAdjacentElement("afterend",r),r.insertAdjacentElement("afterend",e.element)):(this.contentItems[0].element.insertAdjacentElement("beforebegin",r),r.insertAdjacentElement("beforebegin",e.element))}else this._childElementContainer.appendChild(e.element);super.addChild(e,t);const s=1/this.contentItems.length*100;if(i===!0)return this.emitBaseBubblingEvent("stateChanged"),t;for(let r=0;r<this.contentItems.length;r++){const o=this.contentItems[r];if(o===e)e.size=s;else{const a=o.size*=(100-s)/100;o.size=a}}return this.updateSize(!1),this.emitBaseBubblingEvent("stateChanged"),t}removeChild(e,t){const i=this.contentItems.indexOf(e),s=Math.max(i-1,0);if(i===-1)throw new Error("Can't remove child. ContentItem is not child of this Row or Column");if(this._splitter[s]&&(this._splitter[s].destroy(),this._splitter.splice(s,1)),super.removeChild(e,t),this.contentItems.length===1&&this.isClosable===!0){const r=this.contentItems[0];this.contentItems.length=0,this._rowOrColumnParent.replaceChild(this,r,!0)}else this.updateSize(!1),this.emitBaseBubblingEvent("stateChanged")}replaceChild(e,t){const i=e.size;super.replaceChild(e,t),t.size=i,this.updateSize(!1),this.emitBaseBubblingEvent("stateChanged")}updateSize(e){this.layoutManager.beginVirtualSizedContainerAdding();try{this.updateNodeSize(),this.updateContentItemsSize(e)}finally{this.layoutManager.endVirtualSizedContainerAdding()}}init(){if(this.isInitialised!==!0){this.updateNodeSize();for(let e=0;e<this.contentItems.length;e++)this._childElementContainer.appendChild(this.contentItems[e].element);super.init();for(let e=0;e<this.contentItems.length-1;e++)this.contentItems[e].element.insertAdjacentElement("afterend",this.createSplitter(e).element);this.initContentItems()}}toConfig(){return{type:this.type,content:this.calculateConfigContent(),size:this.size,sizeUnit:this.sizeUnit,minSize:this.minSize,minSizeUnit:this.minSizeUnit,id:this.id,isClosable:this.isClosable}}setParent(e){this._rowOrColumnParent=e,super.setParent(e)}updateNodeSize(){this.contentItems.length>0&&(this.calculateRelativeSizes(),this.setAbsoluteSizes()),this.emitBaseBubblingEvent("stateChanged"),this.emit("resize")}setAbsoluteSizes(){const e=this.calculateAbsoluteSizes();for(let t=0;t<this.contentItems.length;t++)e.additionalPixel-t>0&&e.itemSizes[t]++,this._isColumn?(Co(this.contentItems[t].element,e.crossAxisSize),Mo(this.contentItems[t].element,e.itemSizes[t])):(Co(this.contentItems[t].element,e.itemSizes[t]),Mo(this.contentItems[t].element,e.crossAxisSize))}calculateAbsoluteSizes(){const e=(this.contentItems.length-1)*this._splitterSize,{width:t,height:i}=Fc(this.element);let s,r;this._isColumn?(s=i-e,r=t):(s=t-e,r=i);let o=0;const a=[];for(let c=0;c<this.contentItems.length;c++){const u=this.contentItems[c];let d;if(u.sizeUnit===On.Percent)d=Math.floor(s*(u.size/100));else throw new Un("ROCCAS6692");o+=d,a.push(d)}const l=Math.floor(s-o);return{itemSizes:a,additionalPixel:l,totalSize:s,crossAxisSize:r}}calculateRelativeSizes(){let e=0;const t=[];let i=0;for(let s=0;s<this.contentItems.length;s++){const r=this.contentItems[s];switch(r.sizeUnit){case On.Percent:{e+=r.size;break}case On.Fractional:{t.push(r),i+=r.size;break}default:throw new Un("ROCCRS49110",JSON.stringify(r))}}if(Math.round(e)===100){this.respectMinItemSize();return}else if(Math.round(e)<100&&t.length>0){const s=100-e;for(let r=0;r<t.length;r++){const o=t[r];o.size=s*(o.size/i),o.sizeUnit=On.Percent}this.respectMinItemSize();return}else{if(Math.round(e)>100&&t.length>0){for(let s=0;s<t.length;s++){const r=t[s];r.size=50*(r.size/i),r.sizeUnit=On.Percent}e+=50}for(let s=0;s<this.contentItems.length;s++){const r=this.contentItems[s];r.size=r.size/e*100}this.respectMinItemSize()}}respectMinItemSize(){const e=this.calculateContentItemMinSize(this);if(!(e<=0||this.contentItems.length<=1)){let t=0,i=0;const s=[],r=[],o=this.calculateAbsoluteSizes();for(let a=0;a<o.itemSizes.length;a++){const l=o.itemSizes[a];let c;l<e?(i+=e-l,c={size:e}):(t+=l-e,c={size:l},s.push(c)),r.push(c)}if(i===0||i>t)return;{const a=i/t;let l=i;for(let c=0;c<s.length;c++){const u=s[c],d=Math.round((u.size-e)*a);l-=d,u.size-=d}l!==0&&(r[r.length-1].size-=l);for(let c=0;c<this.contentItems.length;c++){const u=this.contentItems[c];u.size=r[c].size/o.totalSize*100}}}}createSplitter(e){const t=new c_e(this._isColumn,this._splitterSize,this._splitterGrabSize);return t.on("drag",(i,s)=>this.onSplitterDrag(t,i,s)),t.on("dragStop",()=>this.onSplitterDragStop(t)),t.on("dragStart",()=>this.onSplitterDragStart(t)),this._splitter.splice(e,0,t),t}getSplitItems(e){const t=this._splitter.indexOf(e);return{before:this.contentItems[t],after:this.contentItems[t+1]}}calculateContentItemMinSize(e){const t=e.minSize;if(t!==void 0){if(e.minSizeUnit===On.Pixel)return t;throw new Un("ROCGMD98831",JSON.stringify(e))}else{const i=this.layoutManager.layoutConfig.dimensions;return this._isColumn?i.defaultMinItemHeight:i.defaultMinItemWidth}}calculateContentItemsTotalMinSize(e){let t=0;for(const i of e)t+=this.calculateContentItemMinSize(i);return t}onSplitterDragStart(e){const t=this.getSplitItems(e),i=mf(t.before.element.style[this._dimension]),s=mf(t.after.element.style[this._dimension]),r=this.calculateContentItemsTotalMinSize(t.before.contentItems),o=this.calculateContentItemsTotalMinSize(t.after.contentItems);this._splitterPosition=0,this._splitterMinPosition=-1*(i-r),this._splitterMaxPosition=s-o}onSplitterDrag(e,t,i){let s=this._isColumn?i:t;if(this._splitterMinPosition===null||this._splitterMaxPosition===null)throw new vi("ROCOSD59226");s=Math.max(s,this._splitterMinPosition),s=Math.min(s,this._splitterMaxPosition),this._splitterPosition=s;const r=zn(s);this._isColumn?e.element.style.top=r:e.element.style.left=r}onSplitterDragStop(e){if(this._splitterPosition===null)throw new vi("ROCOSDS66932");{const t=this.getSplitItems(e),i=mf(t.before.element.style[this._dimension]),s=mf(t.after.element.style[this._dimension]),r=(this._splitterPosition+i)/(i+s),o=t.before.size+t.after.size;t.before.size=r*o,t.after.size=(1-r)*o,e.element.style.top=zn(0),e.element.style.left=zn(0),globalThis.requestAnimationFrame(()=>this.updateSize(!1))}}}(function(n){function e(s,r){return r==="width"?i_e(s):s_e(s)}n.getElementDimensionSize=e;function t(s,r,o){return r==="width"?Co(s,o):Mo(s,o)}n.setElementDimensionSize=t;function i(s,r){const o=s.createElement("div");return o.classList.add("lm_item"),r?o.classList.add("lm_column"):o.classList.add("lm_row"),o}n.createElement=i})(jd||(jd={}));class ou extends CU{constructor(e,t,i){super(e,mM.create(t),null,ou.createElement(document)),this.isGround=!0,this._childElementContainer=this.element,this._containerElement=i;let s=null;for(;;){const r=s?s.previousSibling:this._containerElement.lastChild;if(r instanceof Element&&r.classList.contains("lm_content"))s=r;else break}this._containerElement.insertBefore(this.element,s)}init(){if(this.isInitialised!==!0){this.updateNodeSize();for(let e=0;e<this.contentItems.length;e++)this._childElementContainer.appendChild(this.contentItems[e].element);super.init(),this.initContentItems()}}loadRoot(e){if(this.clearRoot(),e!==void 0){const t=this.layoutManager.createAndInitContentItem(e,this);this.addChild(t,0)}}clearRoot(){const e=this.contentItems;switch(e.length){case 0:return;case 1:{e[0].remove();return}default:throw new Un("GILR07721")}}addItem(e,t){this.layoutManager.checkMinimiseMaximisedStack();const i=Fi.resolve(e,!1);let s;if(this.contentItems.length>0?s=this.contentItems[0]:s=this,s.isComponent)throw new Error("Cannot add item as child to ComponentItem");{const r=this.layoutManager.createAndInitContentItem(i,s);return t=s.addChild(r,t),s===this?-1:t}}loadComponentAsRoot(e){this.clearRoot();const t=Fi.resolve(e,!1);if(t.maximised)throw new Error("Root Component cannot be maximised");{const i=new cd(this.layoutManager,t,this);i.init(),this.addChild(i,0)}}addChild(e,t){if(this.contentItems.length>0)throw new Error("Ground node can only have a single child");return this._childElementContainer.appendChild(e.element),t=super.addChild(e,t),this.updateSize(!1),this.emitBaseBubblingEvent("stateChanged"),t}calculateConfigContent(){const e=this.contentItems,t=e.length,i=new Array(t);for(let s=0;s<t;s++){const o=e[s].toConfig();if(Xd.isRootItemConfig(o))i[s]=o;else throw new Un("RCCC66832")}return i}setSize(e,t){e===void 0||t===void 0?this.updateSize(!1):(Co(this.element,e),Mo(this.element,t),this.contentItems.length>0&&(Co(this.contentItems[0].element,e),Mo(this.contentItems[0].element,t)),this.updateContentItemsSize(!1))}updateSize(e){this.layoutManager.beginVirtualSizedContainerAdding();try{this.updateNodeSize(),this.updateContentItemsSize(e)}finally{this.layoutManager.endVirtualSizedContainerAdding()}}createSideAreas(){const t=ou.Area.oppositeSides,i=new Array(Object.keys(t).length);let s=0;for(const r in t){const o=r,a=this.getElementArea();if(a===null)throw new vi("RCSA77553");a.side=o,t[o][1]==="2"?a[o]=a[t[o]]-50:a[o]=a[t[o]]+50,a.surface=(a.x2-a.x1)*(a.y2-a.y1),i[s++]=a}return i}highlightDropZone(e,t,i){this.layoutManager.tabDropPlaceholder.remove(),super.highlightDropZone(e,t,i)}onDrop(e,t){if(e.isComponent){const i=kl.createDefault(),s=e;i.header=No.Header.createCopy(s.headerConfig);const r=this.layoutManager.createAndInitContentItem(i,this);r.addChild(e),e=r}if(this.contentItems.length===0)this.addChild(e);else{if(e.type===St.row||e.type===St.column){const o=kl.createDefault(),a=this.layoutManager.createContentItem(o,this);a.addChild(e),e=a}const i=t.side[0]=="x"?St.row:St.column,s=t.side[1]=="2",r=this.contentItems[0];if(!(r instanceof jd)||r.type!==i){const o=gn.createDefault(i),a=this.layoutManager.createContentItem(o,this);this.replaceChild(r,a),a.addChild(e,s?0:void 0,!0),a.addChild(r,s?void 0:0,!0),r.size=50,e.size=50,e.sizeUnit=On.Percent,a.updateSize(!1)}else{const o=r.contentItems[s?0:r.contentItems.length-1];r.addChild(e,s?0:void 0,!0),o.size*=.5,e.size=o.size,e.sizeUnit=On.Percent,r.updateSize(!1)}}}dock(){throw new Un("GID87731")}validateDocking(){throw new Un("GIVD87732")}getAllContentItems(){const e=[this];return this.deepGetAllContentItems(this.contentItems,e),e}getConfigMaximisedItems(){const e=[];return this.deepFilterContentItems(this.contentItems,e,t=>zr.isStack(t)&&t.initialWantMaximise?!0:!!(zr.isComponentItem(t)&&t.initialWantMaximise)),e}getItemsByPopInParentId(e){const t=[];return this.deepFilterContentItems(this.contentItems,t,i=>i.popInParentIds.includes(e)),t}toConfig(){throw new Error("Cannot generate GroundItem config")}setActiveComponentItem(e,t,i){}updateNodeSize(){const{width:e,height:t}=Fc(this._containerElement);Co(this.element,e),Mo(this.element,t),this.contentItems.length>0&&(Co(this.contentItems[0].element,e),Mo(this.contentItems[0].element,t))}deepGetAllContentItems(e,t){for(let i=0;i<e.length;i++){const s=e[i];t.push(s),this.deepGetAllContentItems(s.contentItems,t)}}deepFilterContentItems(e,t,i){for(let s=0;s<e.length;s++){const r=e[s];i(r)&&t.push(r),this.deepFilterContentItems(r.contentItems,t,i)}}}(function(n){(function(t){t.oppositeSides={y2:"y1",x2:"x1",y1:"y2",x1:"x2"}})(n.Area||(n.Area={}));function e(t){const i=t.createElement("div");return i.classList.add("lm_goldenlayout"),i.classList.add("lm_item"),i.classList.add("lm_root"),i}n.createElement=e})(ou||(ou={}));class B0{constructor(e,t,i,s){this._header=e,this._pushEvent=s,this._clickEventListener=r=>this.onClick(r),this._touchStartEventListener=r=>this.onTouchStart(r),this._element=document.createElement("div"),this._element.classList.add(i),this._element.title=t,this._header.on("destroy",()=>this.destroy()),this._element.addEventListener("click",this._clickEventListener,{passive:!0}),this._element.addEventListener("touchstart",this._touchStartEventListener,{passive:!0}),this._header.controlsContainerElement.appendChild(this._element)}get element(){return this._element}destroy(){var e;this._element.removeEventListener("click",this._clickEventListener),this._element.removeEventListener("touchstart",this._touchStartEventListener),(e=this._element.parentNode)===null||e===void 0||e.removeChild(this._element)}onClick(e){this._pushEvent(e)}onTouchStart(e){this._pushEvent(e)}}class u_e{constructor(e,t,i,s,r){var o;this._layoutManager=e,this._componentItem=t,this._closeEvent=i,this._focusEvent=s,this._dragStartEvent=r,this._isActive=!1,this._tabClickListener=l=>this.onTabClickDown(l),this._tabTouchStartListener=l=>this.onTabTouchStart(l),this._closeClickListener=()=>this.onCloseClick(),this._closeTouchStartListener=()=>this.onCloseTouchStart(),this._dragStartListener=(l,c)=>this.onDragStart(l,c),this._contentItemDestroyListener=()=>this.onContentItemDestroy(),this._tabTitleChangedListener=l=>this.setTitle(l),this._element=document.createElement("div"),this._element.classList.add("lm_tab"),this._titleElement=document.createElement("span"),this._titleElement.classList.add("lm_title"),this._closeElement=document.createElement("div"),this._closeElement.classList.add("lm_close_tab"),this._element.appendChild(this._titleElement),this._element.appendChild(this._closeElement),t.isClosable?this._closeElement.style.display="":this._closeElement.style.display="none",this.setTitle(t.title),this._componentItem.on("titleChanged",this._tabTitleChangedListener),((o=t.reorderEnabled)!==null&&o!==void 0?o:this._layoutManager.layoutConfig.settings.reorderEnabled)&&this.enableReorder(),this._element.addEventListener("click",this._tabClickListener,{passive:!0}),this._element.addEventListener("touchstart",this._tabTouchStartListener,{passive:!0}),this._componentItem.isClosable?(this._closeElement.addEventListener("click",this._closeClickListener,{passive:!0}),this._closeElement.addEventListener("touchstart",this._closeTouchStartListener,{passive:!0})):(this._closeElement.remove(),this._closeElement=void 0),this._componentItem.setTab(this),this._layoutManager.emit("tabCreated",this)}get isActive(){return this._isActive}get componentItem(){return this._componentItem}get contentItem(){return this._componentItem}get element(){return this._element}get titleElement(){return this._titleElement}get closeElement(){return this._closeElement}get reorderEnabled(){return this._dragListener!==void 0}set reorderEnabled(e){e!==this.reorderEnabled&&(e?this.enableReorder():this.disableReorder())}setTitle(e){this._titleElement.innerText=e,this._element.title=e}setActive(e){e!==this._isActive&&(this._isActive=e,e?this._element.classList.add("lm_active"):this._element.classList.remove("lm_active"))}destroy(){var e,t;this._closeEvent=void 0,this._focusEvent=void 0,this._dragStartEvent=void 0,this._element.removeEventListener("click",this._tabClickListener),this._element.removeEventListener("touchstart",this._tabTouchStartListener),(e=this._closeElement)===null||e===void 0||e.removeEventListener("click",this._closeClickListener),(t=this._closeElement)===null||t===void 0||t.removeEventListener("touchstart",this._closeTouchStartListener),this._componentItem.off("titleChanged",this._tabTitleChangedListener),this.reorderEnabled&&this.disableReorder(),this._element.remove()}setBlurred(){this._element.classList.remove("lm_focused"),this._titleElement.classList.remove("lm_focused")}setFocused(){this._element.classList.add("lm_focused"),this._titleElement.classList.add("lm_focused")}onDragStart(e,t){if(this._dragListener===void 0)throw new fn("TODSDLU10093");if(this._dragStartEvent===void 0)throw new fn("TODS23309");this._dragStartEvent(e,t,this._dragListener,this.componentItem)}onContentItemDestroy(){this._dragListener!==void 0&&(this._dragListener.destroy(),this._dragListener=void 0)}onTabClickDown(e){const t=e.target;(t===this._element||t===this._titleElement)&&(e.button===0?this.notifyFocus():e.button===1&&this._componentItem.isClosable&&this.notifyClose())}onTabTouchStart(e){e.target===this._element&&this.notifyFocus()}onCloseClick(){this.notifyClose()}onCloseTouchStart(){this.notifyClose()}notifyClose(){if(this._closeEvent===void 0)throw new fn("TNC15007");this._closeEvent(this._componentItem)}notifyFocus(){if(this._focusEvent===void 0)throw new fn("TNA15007");this._focusEvent(this._componentItem)}enableReorder(){this._dragListener=new h2(this._element,[this._titleElement]),this._dragListener.on("dragStart",this._dragStartListener),this._componentItem.on("destroy",this._contentItemDestroyListener)}disableReorder(){if(this._dragListener===void 0)throw new fn("TDR87745");this._componentItem.off("destroy",this._contentItemDestroyListener),this._dragListener.off("dragStart",this._dragStartListener),this._dragListener=void 0}}class d_e{constructor(e,t,i,s,r){this._layoutManager=e,this._componentRemoveEvent=t,this._componentFocusEvent=i,this._componentDragStartEvent=s,this._dropdownActiveChangedEvent=r,this._tabs=[],this._lastVisibleTabIndex=-1,this._dropdownActive=!1,this._element=document.createElement("section"),this._element.classList.add("lm_tabs"),this._dropdownElement=document.createElement("section"),this._dropdownElement.classList.add("lm_tabdropdown_list"),this._dropdownElement.style.display="none"}get tabs(){return this._tabs}get tabCount(){return this._tabs.length}get lastVisibleTabIndex(){return this._lastVisibleTabIndex}get element(){return this._element}get dropdownElement(){return this._dropdownElement}get dropdownActive(){return this._dropdownActive}destroy(){for(let e=0;e<this._tabs.length;e++)this._tabs[e].destroy()}createTab(e,t){for(let s=0;s<this._tabs.length;s++)if(this._tabs[s].componentItem===e)return;const i=new u_e(this._layoutManager,e,s=>this.handleTabCloseEvent(s),s=>this.handleTabFocusEvent(s),(s,r,o,a)=>this.handleTabDragStartEvent(s,r,o,a));t===void 0&&(t=this._tabs.length),this._tabs.splice(t,0,i),t<this._element.childNodes.length?this._element.insertBefore(i.element,this._element.childNodes[t]):this._element.appendChild(i.element)}removeTab(e){for(let t=0;t<this._tabs.length;t++)if(this._tabs[t].componentItem===e){this._tabs[t].destroy(),this._tabs.splice(t,1);return}throw new Error("contentItem is not controlled by this header")}processActiveComponentChanged(e){let t=-1;for(let i=0;i<this._tabs.length;i++){const s=this._tabs[i].componentItem===e;this._tabs[i].setActive(s),s&&(t=i)}if(t<0)throw new Un("HSACI56632");if(this._layoutManager.layoutConfig.settings.reorderOnTabMenuClick&&this._lastVisibleTabIndex!==-1&&t>this._lastVisibleTabIndex){const i=this._tabs[t];for(let s=t;s>0;s--)this._tabs[s]=this._tabs[s-1];this._tabs[0]=i}}updateTabSizes(e,t){let i=!1;this.tryUpdateTabSizes(i,e,t)||(i=!0,this.tryUpdateTabSizes(i,e,t)),i!==this._dropdownActive&&(this._dropdownActive=i,this._dropdownActiveChangedEvent())}tryUpdateTabSizes(e,t,i){if(this._tabs.length>0){if(i===void 0)throw new Error("non-empty tabs must have active component item");let s=0,r=!1;const o=this._layoutManager.layoutConfig.settings.tabOverlapAllowance,a=this._tabs.indexOf(i.tab),l=this._tabs[a];this._lastVisibleTabIndex=-1;for(let c=0;c<this._tabs.length;c++){const u=this._tabs[c].element;u.parentElement!==this._element&&this._element.appendChild(u);const d=getComputedStyle(l.element).marginRight,h=mf(d),f=u.offsetWidth+h;s+=f;let m=0;if(a<=c)m=s;else{const p=getComputedStyle(l.element).marginRight,y=mf(p);m=s+l.element.offsetWidth+y}if(m>t){if(r)c===a&&(u.style.zIndex="auto",u.style.marginLeft="",u.parentElement!==this._element&&this._element.appendChild(u));else{let p;if(a>0&&a<=c?p=(m-t)/(c-1):p=(m-t)/c,p<o){for(let y=0;y<=c;y++){const v=y!==a&&y!==0?"-"+zn(p):"";this._tabs[y].element.style.zIndex=zn(c-y),this._tabs[y].element.style.marginLeft=v}this._lastVisibleTabIndex=c,u.parentElement!==this._element&&this._element.appendChild(u)}else r=!0}if(r&&c!==a)if(e)u.style.zIndex="auto",u.style.marginLeft="",u.parentElement!==this._dropdownElement&&this._dropdownElement.appendChild(u);else return!1}else this._lastVisibleTabIndex=c,u.style.zIndex="auto",u.style.marginLeft="",u.parentElement!==this._element&&this._element.appendChild(u)}}return!0}showAdditionalTabsDropdown(){this._dropdownElement.style.display=""}hideAdditionalTabsDropdown(){this._dropdownElement.style.display="none"}handleTabCloseEvent(e){this._componentRemoveEvent(e)}handleTabFocusEvent(e){this._componentFocusEvent(e)}handleTabDragStartEvent(e,t,i,s){this._componentDragStartEvent(e,t,i,s)}}class h_e extends Xi{constructor(e,t,i,s,r,o,a,l,c,u,d,h,f){super(),this._layoutManager=e,this._parent=t,this._configClosable=s,this._getActiveComponentItemEvent=r,this._popoutEvent=a,this._maximiseToggleEvent=l,this._clickEvent=c,this._touchStartEvent=u,this._componentRemoveEvent=d,this._componentFocusEvent=h,this._componentDragStartEvent=f,this._clickListener=m=>this.onClick(m),this._touchStartListener=m=>this.onTouchStart(m),this._rowColumnClosable=!0,this._closeButton=null,this._popoutButton=null,this._tabsContainer=new d_e(this._layoutManager,m=>this.handleTabInitiatedComponentRemoveEvent(m),m=>this.handleTabInitiatedComponentFocusEvent(m),(m,p,y,v)=>this.handleTabInitiatedDragStartEvent(m,p,y,v),()=>this.processTabDropdownActiveChanged()),this._show=i.show,this._popoutEnabled=i.popoutEnabled,this._popoutLabel=i.popoutLabel,this._maximiseEnabled=i.maximiseEnabled,this._maximiseLabel=i.maximiseLabel,this._minimiseEnabled=i.minimiseEnabled,this._minimiseLabel=i.minimiseLabel,this._closeEnabled=i.closeEnabled,this._closeLabel=i.closeLabel,this._tabDropdownEnabled=i.tabDropdownEnabled,this._tabDropdownLabel=i.tabDropdownLabel,this.setSide(i.side),this._canRemoveComponent=this._configClosable,this._element=document.createElement("section"),this._element.classList.add("lm_header"),this._controlsContainerElement=document.createElement("section"),this._controlsContainerElement.classList.add("lm_controls"),this._element.appendChild(this._tabsContainer.element),this._element.appendChild(this._controlsContainerElement),this._element.appendChild(this._tabsContainer.dropdownElement),this._element.addEventListener("click",this._clickListener,{passive:!0}),this._element.addEventListener("touchstart",this._touchStartListener,{passive:!0}),this._documentMouseUpListener=()=>this._tabsContainer.hideAdditionalTabsDropdown(),globalThis.document.addEventListener("mouseup",this._documentMouseUpListener,{passive:!0}),this._tabControlOffset=this._layoutManager.layoutConfig.settings.tabControlOffset,this._tabDropdownEnabled&&(this._tabDropdownButton=new B0(this,this._tabDropdownLabel,"lm_tabdropdown",()=>this._tabsContainer.showAdditionalTabsDropdown())),this._popoutEnabled&&(this._popoutButton=new B0(this,this._popoutLabel,"lm_popout",()=>this.handleButtonPopoutEvent())),this._maximiseEnabled&&(this._maximiseButton=new B0(this,this._maximiseLabel,"lm_maximise",m=>this.handleButtonMaximiseToggleEvent(m))),this._configClosable&&(this._closeButton=new B0(this,this._closeLabel,"lm_close",()=>o())),this.processTabDropdownActiveChanged()}get show(){return this._show}get side(){return this._side}get leftRightSided(){return this._leftRightSided}get layoutManager(){return this._layoutManager}get parent(){return this._parent}get tabs(){return this._tabsContainer.tabs}get lastVisibleTabIndex(){return this._tabsContainer.lastVisibleTabIndex}get element(){return this._element}get tabsContainerElement(){return this._tabsContainer.element}get controlsContainerElement(){return this._controlsContainerElement}destroy(){this.emit("destroy"),this._popoutEvent=void 0,this._maximiseToggleEvent=void 0,this._clickEvent=void 0,this._touchStartEvent=void 0,this._componentRemoveEvent=void 0,this._componentFocusEvent=void 0,this._componentDragStartEvent=void 0,this._tabsContainer.destroy(),globalThis.document.removeEventListener("mouseup",this._documentMouseUpListener),this._element.remove()}createTab(e,t){this._tabsContainer.createTab(e,t)}removeTab(e){this._tabsContainer.removeTab(e)}processActiveComponentChanged(e){this._tabsContainer.processActiveComponentChanged(e),this.updateTabSizes()}setSide(e){this._side=e,this._leftRightSided=[su.right,su.left].includes(this._side)}setRowColumnClosable(e){this._rowColumnClosable=e,this.updateClosability()}updateClosability(){let e;if(!this._configClosable)e=!1;else if(!this._rowColumnClosable)e=!1;else{e=!0;const t=this.tabs.length;for(let i=0;i<t;i++)if(!this._tabsContainer.tabs[i].componentItem.isClosable){e=!1;break}}this._closeButton!==null&&Cd(this._closeButton.element,e),this._popoutButton!==null&&Cd(this._popoutButton.element,e),this._canRemoveComponent=e||this._tabsContainer.tabCount>1}applyFocusedValue(e){e?this._element.classList.add("lm_focused"):this._element.classList.remove("lm_focused")}processMaximised(){if(this._maximiseButton===void 0)throw new fn("HPMAX16997");this._maximiseButton.element.setAttribute("title",this._minimiseLabel)}processMinimised(){if(this._maximiseButton===void 0)throw new fn("HPMIN16997");this._maximiseButton.element.setAttribute("title",this._maximiseLabel)}updateTabSizes(){if(this._tabsContainer.tabCount>0){const e=this._show?this._layoutManager.layoutConfig.dimensions.headerHeight:0;this._leftRightSided?(this._element.style.height="",this._element.style.width=zn(e)):(this._element.style.width="",this._element.style.height=zn(e));let t;this._leftRightSided?t=this._element.offsetHeight-this._controlsContainerElement.offsetHeight-this._tabControlOffset:t=this._element.offsetWidth-this._controlsContainerElement.offsetWidth-this._tabControlOffset,this._tabsContainer.updateTabSizes(t,this._getActiveComponentItemEvent())}}handleTabInitiatedComponentRemoveEvent(e){if(this._canRemoveComponent){if(this._componentRemoveEvent===void 0)throw new fn("HHTCE22294");this._componentRemoveEvent(e)}}handleTabInitiatedComponentFocusEvent(e){if(this._componentFocusEvent===void 0)throw new fn("HHTAE22294");this._componentFocusEvent(e)}handleTabInitiatedDragStartEvent(e,t,i,s){if(!this._canRemoveComponent)i.cancelDrag();else{if(this._componentDragStartEvent===void 0)throw new fn("HHTDSE22294");this._componentDragStartEvent(e,t,i,s)}}processTabDropdownActiveChanged(){this._tabDropdownButton!==void 0&&Cd(this._tabDropdownButton.element,this._tabsContainer.dropdownActive)}handleButtonPopoutEvent(){if(this._layoutManager.layoutConfig.settings.popoutWholeStack){if(this._popoutEvent===void 0)throw new fn("HHBPOE17834");this._popoutEvent()}else{const e=this._getActiveComponentItemEvent();e&&e.popout()}}handleButtonMaximiseToggleEvent(e){if(this._maximiseToggleEvent===void 0)throw new fn("HHBMTE16834");this._maximiseToggleEvent()}onClick(e){e.target===this._element&&this.notifyClick(e)}onTouchStart(e){e.target===this._element&&this.notifyTouchStart(e)}notifyClick(e){if(this._clickEvent===void 0)throw new fn("HNHC46834");this._clickEvent(e)}notifyTouchStart(e){if(this._touchStartEvent===void 0)throw new fn("HNHTS46834");this._touchStartEvent(e)}}class xl extends CU{constructor(e,t,i){var s,r,o,a,l,c,u,d,h,f,m,p,y,v,_,b,w,x,S;super(e,t,i,xl.createElement(document)),this._headerSideChanged=!1,this._resizeListener=()=>this.handleResize(),this._maximisedListener=()=>this.handleMaximised(),this._minimisedListener=()=>this.handleMinimised(),this._headerConfig=t.header;const C=e.layoutConfig.header,T=t.content;let M;T.length!==1?M=void 0:M=T[0].header,this._initialWantMaximise=t.maximised,this._initialActiveItemIndex=(s=t.activeItemIndex)!==null&&s!==void 0?s:0;const E=(a=(o=(r=this._headerConfig)===null||r===void 0?void 0:r.show)!==null&&o!==void 0?o:M==null?void 0:M.show)!==null&&a!==void 0?a:C.show,A=(u=(c=(l=this._headerConfig)===null||l===void 0?void 0:l.popout)!==null&&c!==void 0?c:M==null?void 0:M.popout)!==null&&u!==void 0?u:C.popout,I=(f=(h=(d=this._headerConfig)===null||d===void 0?void 0:d.maximise)!==null&&h!==void 0?h:M==null?void 0:M.maximise)!==null&&f!==void 0?f:C.maximise,B=(y=(p=(m=this._headerConfig)===null||m===void 0?void 0:m.close)!==null&&p!==void 0?p:M==null?void 0:M.close)!==null&&y!==void 0?y:C.close,F=(b=(_=(v=this._headerConfig)===null||v===void 0?void 0:v.minimise)!==null&&_!==void 0?_:M==null?void 0:M.minimise)!==null&&b!==void 0?b:C.minimise,U=(S=(x=(w=this._headerConfig)===null||w===void 0?void 0:w.tabDropdown)!==null&&x!==void 0?x:M==null?void 0:M.tabDropdown)!==null&&S!==void 0?S:C.tabDropdown;this._maximisedEnabled=I!==!1;const P={show:E!==!1,side:E===!1?su.top:E,popoutEnabled:A!==!1,popoutLabel:A===!1?"":A,maximiseEnabled:this._maximisedEnabled,maximiseLabel:I===!1?"":I,closeEnabled:B!==!1,closeLabel:B===!1?"":B,minimiseEnabled:!0,minimiseLabel:F,tabDropdownEnabled:U!==!1,tabDropdownLabel:U===!1?"":U};this._header=new h_e(e,this,P,t.isClosable&&B!==!1,()=>this.getActiveComponentItem(),()=>this.remove(),()=>this.handlePopoutEvent(),()=>this.toggleMaximise(),O=>this.handleHeaderClickEvent(O),O=>this.handleHeaderTouchStartEvent(O),O=>this.handleHeaderComponentRemoveEvent(O),O=>this.handleHeaderComponentFocusEvent(O),(O,D,L,H)=>this.handleHeaderComponentStartDragEvent(O,D,L,H)),this.isStack=!0,this._childElementContainer=document.createElement("section"),this._childElementContainer.classList.add("lm_items"),this.on("resize",this._resizeListener),this._maximisedEnabled&&(this.on("maximised",this._maximisedListener),this.on("minimised",this._minimisedListener)),this.element.appendChild(this._header.element),this.element.appendChild(this._childElementContainer),this.setupHeaderPosition(),this._header.updateClosability()}get childElementContainer(){return this._childElementContainer}get header(){return this._header}get headerShow(){return this._header.show}get headerSide(){return this._header.side}get headerLeftRightSided(){return this._header.leftRightSided}get contentAreaDimensions(){return this._contentAreaDimensions}get initialWantMaximise(){return this._initialWantMaximise}get isMaximised(){return this===this.layoutManager.maximisedStack}get stackParent(){if(!this.parent)throw new Error("Stack should always have a parent");return this.parent}updateSize(e){this.layoutManager.beginVirtualSizedContainerAdding();try{this.updateNodeSize(),this.updateContentItemsSize(e)}finally{this.layoutManager.endVirtualSizedContainerAdding()}}init(){if(this.isInitialised===!0)return;this.updateNodeSize();for(let i=0;i<this.contentItems.length;i++)this._childElementContainer.appendChild(this.contentItems[i].element);super.init();const e=this.contentItems,t=e.length;if(t>0){if(this._initialActiveItemIndex<0||this._initialActiveItemIndex>=t)throw new Error(`ActiveItemIndex out of range: ${this._initialActiveItemIndex} id: ${this.id}`);for(let i=0;i<t;i++){const s=e[i];if(s instanceof cd)this._header.createTab(s,i),s.hide(),s.container.setBaseLogicalZIndex();else throw new Error(`Stack Content Item is not of type ComponentItem: ${i} id: ${this.id}`)}this.setActiveComponentItem(e[this._initialActiveItemIndex],!1),this._header.updateTabSizes()}this._header.updateClosability(),this.initContentItems()}setActiveContentItem(e){if(zr.isComponentItem(e))this.setActiveComponentItem(e,!1);else throw new Error("Stack.setActiveContentItem: item is not a ComponentItem")}setActiveComponentItem(e,t,i=!1){if(this._activeComponentItem!==e){if(this.contentItems.indexOf(e)===-1)throw new Error("componentItem is not a child of this stack");this.layoutManager.beginSizeInvalidation();try{this._activeComponentItem!==void 0&&this._activeComponentItem.hide(),this._activeComponentItem=e,this._header.processActiveComponentChanged(e),e.show()}finally{this.layoutManager.endSizeInvalidation()}this.emit("activeContentItemChanged",e),this.layoutManager.emit("activeContentItemChanged",e),this.emitStateChangedEvent()}(this.focused||t)&&this.layoutManager.setFocusedComponentItem(e,i)}getActiveContentItem(){var e;return(e=this.getActiveComponentItem())!==null&&e!==void 0?e:null}getActiveComponentItem(){return this._activeComponentItem}focusActiveContentItem(){var e;(e=this._activeComponentItem)===null||e===void 0||e.focus()}setFocusedValue(e){this._header.applyFocusedValue(e),super.setFocusedValue(e)}setRowColumnClosable(e){this._header.setRowColumnClosable(e)}newComponent(e,t,i,s){const r={type:"component",componentType:e,componentState:t,title:i};return this.newItem(r,s)}addComponent(e,t,i,s){const r={type:"component",componentType:e,componentState:t,title:i};return this.addItem(r,s)}newItem(e,t){return t=this.addItem(e,t),this.contentItems[t]}addItem(e,t){this.layoutManager.checkMinimiseMaximisedStack();const i=Fi.resolve(e,!1),s=this.layoutManager.createAndInitContentItem(i,this);return this.addChild(s,t)}addChild(e,t,i=!1){if(t!==void 0&&t>this.contentItems.length)throw t-=1,new Un("SAC99728");if(e instanceof cd)return t=super.addChild(e,t),this._childElementContainer.appendChild(e.element),this._header.createTab(e,t),this.setActiveComponentItem(e,i),this._header.updateTabSizes(),this.updateSize(!1),e.container.setBaseLogicalZIndex(),this._header.updateClosability(),this.emitStateChangedEvent(),t;throw new Un("SACC88532")}removeChild(e,t){const i=e,s=this.contentItems.indexOf(i),r=this.contentItems.length===1;if(this._activeComponentItem===i&&(i.focused&&i.blur(),!r)){const o=s===0?1:s-1;this.setActiveComponentItem(this.contentItems[o],!1)}this._header.removeTab(i),super.removeChild(i,t),r||this._header.updateClosability(),this.emitStateChangedEvent()}toggleMaximise(){this.isMaximised?this.minimise():this.maximise()}maximise(){if(!this.isMaximised){this.layoutManager.setMaximisedStack(this);const e=this.contentItems,t=e.length;for(let i=0;i<t;i++){const s=e[i];if(s instanceof cd)s.enterStackMaximised();else throw new Un("SMAXI87773")}this.emitStateChangedEvent()}}minimise(){if(this.isMaximised){this.layoutManager.setMaximisedStack(void 0);const e=this.contentItems,t=e.length;for(let i=0;i<t;i++){const s=e[i];if(s instanceof cd)s.exitStackMaximised();else throw new Un("SMINI87773")}this.emitStateChangedEvent()}}destroy(){var e;!((e=this._activeComponentItem)===null||e===void 0)&&e.focused&&this._activeComponentItem.blur(),super.destroy(),this.off("resize",this._resizeListener),this._maximisedEnabled&&(this.off("maximised",this._maximisedListener),this.off("minimised",this._minimisedListener)),this._header.destroy()}toConfig(){let e;if(this._activeComponentItem&&(e=this.contentItems.indexOf(this._activeComponentItem),e<0))throw new Error("active component item not found in stack");if(this.contentItems.length>0&&e===void 0)throw new Error("expected non-empty stack to have an active component item");return{type:"stack",content:this.calculateConfigContent(),size:this.size,sizeUnit:this.sizeUnit,minSize:this.minSize,minSizeUnit:this.minSizeUnit,id:this.id,isClosable:this.isClosable,maximised:this.isMaximised,header:this.createHeaderConfig(),activeItemIndex:e}}onDrop(e,t){if(this._dropSegment==="header"){if(this.resetHeaderDropZone(),this._dropIndex===void 0)throw new fn("SODDI68990");this.addChild(e,this._dropIndex);return}if(this._dropSegment==="body"){this.addChild(e,0,!0);return}const i=this._dropSegment==="top"||this._dropSegment==="bottom",s=this._dropSegment==="left"||this._dropSegment==="right",r=this._dropSegment==="top"||this._dropSegment==="left",o=i&&this.stackParent.isColumn||s&&this.stackParent.isRow;if(e.isComponent){const a=kl.createDefault();a.header=this.createHeaderConfig();const l=this.layoutManager.createAndInitContentItem(a,this);l.addChild(e),e=l}if(e.type===St.row||e.type===St.column){const a=kl.createDefault();a.header=this.createHeaderConfig();const l=this.layoutManager.createContentItem(a,this);l.addChild(e),e=l}if(o){const a=this.stackParent.contentItems.indexOf(this);this.stackParent.addChild(e,r?a:a+1,!0),this.size*=.5,e.size=this.size,e.sizeUnit=this.sizeUnit,this.stackParent.updateSize(!1)}else{const a=i?St.column:St.row,l=gn.createDefault(a),c=this.layoutManager.createContentItem(l,this);this.stackParent.replaceChild(this,c),c.addChild(e,r?0:void 0,!0),c.addChild(this,r?void 0:0,!0),this.size=50,e.size=50,e.sizeUnit=On.Percent,c.updateSize(!1)}}highlightDropZone(e,t){for(const i in this._contentAreaDimensions){const s=i,r=this._contentAreaDimensions[s].hoverArea;if(r.x1<e&&r.x2>e&&r.y1<t&&r.y2>t){s==="header"?(this._dropSegment="header",this.highlightHeaderDropZone(this._header.leftRightSided?t:e)):(this.resetHeaderDropZone(),this.highlightBodyDropZone(s));return}}}getArea(){if(this.element.style.display==="none")return null;const e=super.getElementArea(this._header.element),t=super.getElementArea(this._childElementContainer);if(e===null||t===null)throw new vi("SGAHC13086");const i=t.x2-t.x1,s=t.y2-t.y1;return this._contentAreaDimensions={header:{hoverArea:{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2},highlightArea:{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2}}},this.contentItems.length===0?(this._contentAreaDimensions.body={hoverArea:{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2},highlightArea:{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}},super.getElementArea(this.element)):(this._contentAreaDimensions.left={hoverArea:{x1:t.x1,y1:t.y1,x2:t.x1+i*.25,y2:t.y2},highlightArea:{x1:t.x1,y1:t.y1,x2:t.x1+i*.5,y2:t.y2}},this._contentAreaDimensions.top={hoverArea:{x1:t.x1+i*.25,y1:t.y1,x2:t.x1+i*.75,y2:t.y1+s*.5},highlightArea:{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y1+s*.5}},this._contentAreaDimensions.right={hoverArea:{x1:t.x1+i*.75,y1:t.y1,x2:t.x2,y2:t.y2},highlightArea:{x1:t.x1+i*.5,y1:t.y1,x2:t.x2,y2:t.y2}},this._contentAreaDimensions.bottom={hoverArea:{x1:t.x1+i*.25,y1:t.y1+s*.5,x2:t.x1+i*.75,y2:t.y2},highlightArea:{x1:t.x1,y1:t.y1+s*.5,x2:t.x2,y2:t.y2}},super.getElementArea(this.element))}positionHeader(e){this._header.side!==e&&(this._header.setSide(e),this._headerSideChanged=!0,this.setupHeaderPosition())}updateNodeSize(){if(this.element.style.display!=="none"){const e=Fc(this.element);if(this._header.show){const t=this._header.leftRightSided?ab.width:ab.height;e[t]-=this.layoutManager.layoutConfig.dimensions.headerHeight}this._childElementContainer.style.width=zn(e.width),this._childElementContainer.style.height=zn(e.height);for(let t=0;t<this.contentItems.length;t++)this.contentItems[t].element.style.width=zn(e.width),this.contentItems[t].element.style.height=zn(e.height);this.emit("resize"),this.emitStateChangedEvent()}}highlightHeaderDropZone(e){const t=this._header.lastVisibleTabIndex+1,s=this._header.tabsContainerElement.childNodes,r=new Array(t);let o=0,a=0;for(;a<t;){const u=s[o++];u!==this.layoutManager.tabDropPlaceholder&&(r[a++]=u)}const l=this.layoutManager.dropTargetIndicator;if(l===null)throw new vi("SHHDZDTI97110");let c;if(t===0){const u=this._header.element.getBoundingClientRect(),d=u.top+document.body.scrollTop,h=u.left+document.body.scrollLeft;c={x1:h,x2:h+100,y1:d+u.height-20,y2:d+u.height},this._dropIndex=0}else{let u=0,d=!1,h,f,m,p;do{p=r[u];const x=p.getBoundingClientRect(),S=x.top+document.body.scrollTop,C=x.left+document.body.scrollLeft;this._header.leftRightSided?(f=S,h=C,m=x.height):(f=C,h=S,m=x.width),e>=f&&e<f+m?d=!0:u++}while(u<t&&!d);if(d===!1&&e<f)return;const y=f+m/2;e<y?(this._dropIndex=u,p.insertAdjacentElement("beforebegin",this.layoutManager.tabDropPlaceholder)):(this._dropIndex=Math.min(u+1,t),p.insertAdjacentElement("afterend",this.layoutManager.tabDropPlaceholder));const v=this.layoutManager.tabDropPlaceholder.getBoundingClientRect(),_=v.top+document.body.scrollTop,b=v.left+document.body.scrollLeft,w=v.width;if(this._header.leftRightSided){const x=_;c={x1:h,x2:h+p.clientHeight,y1:x,y2:x+w}}else{const x=b;c={x1:x,x2:x+w,y1:h,y2:h+p.clientHeight}}}l.highlightArea(c,0)}resetHeaderDropZone(){this.layoutManager.tabDropPlaceholder.remove()}setupHeaderPosition(){Cd(this._header.element,this._header.show),this.element.classList.remove("lm_left","lm_right","lm_bottom"),this._header.leftRightSided&&this.element.classList.add("lm_"+this._header.side),this.updateSize(!1)}highlightBodyDropZone(e){if(this._contentAreaDimensions===void 0)throw new fn("SHBDZC82265");{const t=this._contentAreaDimensions[e].highlightArea,i=this.layoutManager.dropTargetIndicator;if(i===null)throw new vi("SHBDZD96110");i.highlightArea(t,1),this._dropSegment=e}}handleResize(){this._header.updateTabSizes()}handleMaximised(){this._header.processMaximised()}handleMinimised(){this._header.processMinimised()}handlePopoutEvent(){this.popout()}handleHeaderClickEvent(e){const t=Xi.headerClickEventName,i=new Xi.ClickBubblingEvent(t,this,e);this.emit(t,i)}handleHeaderTouchStartEvent(e){const t=Xi.headerTouchStartEventName,i=new Xi.TouchStartBubblingEvent(t,this,e);this.emit(t,i)}handleHeaderComponentRemoveEvent(e){this.removeChild(e,!1)}handleHeaderComponentFocusEvent(e){this.setActiveComponentItem(e,!0)}handleHeaderComponentStartDragEvent(e,t,i,s){this.isMaximised===!0&&this.toggleMaximise(),this.layoutManager.startComponentDrag(e,t,i,s,this)}createHeaderConfig(){if(this._headerSideChanged){const e=this._header.show?this._header.side:!1;let t=No.Header.createCopy(this._headerConfig,e);return t===void 0&&(t={show:e,popout:void 0,maximise:void 0,close:void 0,minimise:void 0,tabDropdown:void 0}),t}else return No.Header.createCopy(this._headerConfig)}emitStateChangedEvent(){this.emitBaseBubblingEvent("stateChanged")}}(function(n){function e(t){const i=t.createElement("div");return i.classList.add("lm_item"),i.classList.add("lm_stack"),i}n.createElement=e})(xl||(xl={}));class MU extends Xi{constructor(e,t,i,s,r,o){if(super(),this._dragListener=i,this._layoutManager=s,this._componentItem=r,this._originalParent=o,this._area=null,this._lastValidArea=null,this._dragListener.on("drag",(a,l,c)=>this.onDrag(a,l,c)),this._dragListener.on("dragStop",()=>this.onDrop()),this.createDragProxyElements(e,t),this._componentItem.parent===null)throw new vi("DPC10097");this._componentItemFocused=this._componentItem.focused,this._componentItemFocused&&this._componentItem.blur(),this._componentItem.parent.removeChild(this._componentItem,!0),this.setDimensions(),document.body.appendChild(this._element),this.determineMinMaxXY(),this._layoutManager.calculateItemAreas(),this.setDropPosition(e,t)}get element(){return this._element}createDragProxyElements(e,t){this._element=document.createElement("div"),this._element.classList.add("lm_dragProxy");const i=document.createElement("div");i.classList.add("lm_header");const s=document.createElement("div");s.classList.add("lm_tabs");const r=document.createElement("div");r.classList.add("lm_tab");const o=document.createElement("span");o.classList.add("lm_title"),r.appendChild(o),s.appendChild(r),i.appendChild(s),this._proxyContainerElement=document.createElement("div"),this._proxyContainerElement.classList.add("lm_content"),this._element.appendChild(i),this._element.appendChild(this._proxyContainerElement),this._originalParent instanceof xl&&this._originalParent.headerShow&&(this._sided=this._originalParent.headerLeftRightSided,this._element.classList.add("lm_"+this._originalParent.headerSide),[su.right,su.bottom].indexOf(this._originalParent.headerSide)>=0&&this._proxyContainerElement.insertAdjacentElement("afterend",i)),this._element.style.left=zn(e),this._element.style.top=zn(t),r.setAttribute("title",this._componentItem.title),o.insertAdjacentText("afterbegin",this._componentItem.title),this._proxyContainerElement.appendChild(this._componentItem.element)}determineMinMaxXY(){const e=this._layoutManager.groundItem;if(e===void 0)throw new fn("DPDMMXY73109");{const i=e.element.getBoundingClientRect();this._minX=i.left+document.body.scrollLeft,this._minY=i.top+document.body.scrollTop,this._maxX=this._minX+i.width,this._maxY=this._minY+i.height}}onDrag(e,t,i){const s=i.pageX,r=i.pageY;this.setDropPosition(s,r),this._componentItem.drag()}setDropPosition(e,t){this._layoutManager.layoutConfig.settings.constrainDragToContainer&&(e<=this._minX?e=Math.ceil(this._minX):e>=this._maxX&&(e=Math.floor(this._maxX)),t<=this._minY?t=Math.ceil(this._minY):t>=this._maxY&&(t=Math.floor(this._maxY))),this._element.style.left=zn(e),this._element.style.top=zn(t),this._area=this._layoutManager.getArea(e,t),this._area!==null&&(this._lastValidArea=this._area,this._area.contentItem.highlightDropZone(e,t,this._area))}onDrop(){const e=this._layoutManager.dropTargetIndicator;if(e===null)throw new vi("DPOD30011");e.hide(),this._componentItem.exitDragMode();let t;this._area!==null?(t=this._componentItem,this._area.contentItem.onDrop(t,this._area)):this._lastValidArea!==null?(t=this._componentItem,this._lastValidArea.contentItem.onDrop(t,this._lastValidArea)):this._originalParent?(t=this._componentItem,this._originalParent.addChild(t)):this._componentItem.destroy(),this._element.remove(),this._layoutManager.emit("itemDropped",this._componentItem),this._componentItemFocused&&t!==void 0&&t.focus()}setDimensions(){const e=this._layoutManager.layoutConfig.dimensions;if(e===void 0)throw new Error("DragProxy.setDimensions: dimensions undefined");let t=e.dragProxyWidth,i=e.dragProxyHeight;if(t===void 0||i===void 0)throw new Error("DragProxy.setDimensions: width and/or height undefined");const s=this._layoutManager.layoutConfig.header.show===!1?0:e.headerHeight;this._element.style.width=zn(t),this._element.style.height=zn(i),t-=this._sided?s:0,i-=this._sided?0:s,this._proxyContainerElement.style.width=zn(t),this._proxyContainerElement.style.height=zn(i),this._componentItem.enterDragMode(t,i),this._componentItem.show()}}class qg{constructor(e,t,i,s,r,o,a){this._layoutManager=e,this._element=t,this._extraAllowableChildTargets=i,this._componentTypeOrFtn=s,this._componentState=r,this._title=o,this._id=a,this._dragListener=null,this._dummyGroundContainer=document.createElement("div");const l=dp.createDefault("row");this._dummyGroundContentItem=new ou(this._layoutManager,l,this._dummyGroundContainer),this.createDragListener()}destroy(){this.removeDragListener()}createDragListener(){this.removeDragListener(),this._dragListener=new h2(this._element,this._extraAllowableChildTargets),this._dragListener.on("dragStart",(e,t)=>this.onDragStart(e,t)),this._dragListener.on("dragStop",()=>this.onDragStop())}onDragStart(e,t){var i;const s="component";let r;if(typeof this._componentTypeOrFtn=="function"){const l=this._componentTypeOrFtn();qg.isDragSourceComponentItemConfig(l)?r={type:s,componentState:l.state,componentType:l.type,title:(i=l.title)!==null&&i!==void 0?i:this._title}:r=l}else r={type:s,componentState:this._componentState,componentType:this._componentTypeOrFtn,title:this._title,id:this._id};const o=ru.resolve(r,!1),a=new cd(this._layoutManager,o,this._dummyGroundContentItem);if(this._dummyGroundContentItem.contentItems.push(a),this._dragListener===null)throw new vi("DSODSD66746");{const l=new MU(e,t,this._dragListener,this._layoutManager,a,this._dummyGroundContentItem),c=this._layoutManager.transitionIndicator;if(c===null)throw new vi("DSODST66746");c.transitionElements(this._element,l.element)}}onDragStop(){this.createDragListener()}removeDragListener(){this._dragListener!==null&&(this._dragListener.destroy(),this._dragListener=null)}}(function(n){function e(t){return!("componentType"in t)}n.isDragSourceComponentItemConfig=e})(qg||(qg={}));class f_e{constructor(){this._element=document.createElement("div"),this._element.classList.add("lm_dropTargetIndicator");const e=document.createElement("div");e.classList.add("lm_inner"),this._element.appendChild(e),document.body.appendChild(this._element)}destroy(){this._element.remove()}highlightArea(e,t){this._element.style.left=zn(e.x1+t),this._element.style.top=zn(e.y1+t),this._element.style.width=zn(e.x2-e.x1-t),this._element.style.height=zn(e.y2-e.y1-t),this._element.style.display="block"}hide(){Cd(this._element,!1)}}class p_e{constructor(){this._element=document.createElement("div"),this._element.classList.add("lm_transition_indicator"),document.body.appendChild(this._element),this._toElement=null,this._fromDimensions=null,this._totalAnimationDuration=200,this._animationStartTime=null}destroy(){this._element.remove()}transitionElements(e,t){}nextAnimationFrame(){}measure(e){const t=e.getBoundingClientRect();return{left:t.left,top:t.top,width:e.offsetWidth,height:e.offsetHeight}}}class Md extends Xi{constructor(e){super(),this._layoutManager=e,this._childEventListener=t=>this.onEventFromChild(t),globalThis.addEventListener(Md.ChildEventName,this._childEventListener,{passive:!0})}emit(e,...t){e==="userBroadcast"?this.emitUserBroadcast(...t):super.emit(e,...t)}emitUserBroadcast(...e){this.handleUserBroadcastEvent("userBroadcast",e)}destroy(){globalThis.removeEventListener(Md.ChildEventName,this._childEventListener)}handleUserBroadcastEvent(e,t){this._layoutManager.isSubWindow?this.propagateToParent(e,t):this.propagateToThisAndSubtree(e,t)}onEventFromChild(e){const t=e.detail;this.handleUserBroadcastEvent(t.eventName,t.args)}propagateToParent(e,t){const s={bubbles:!0,cancelable:!0,detail:{layoutManager:this._layoutManager,eventName:e,args:t}},r=new CustomEvent(Md.ChildEventName,s),o=globalThis.opener;if(o===null)throw new vi("EHPTP15778");o.dispatchEvent(r)}propagateToThisAndSubtree(e,t){this.emitUnknown(e,...t);for(let i=0;i<this._layoutManager.openPopouts.length;i++){const s=this._layoutManager.openPopouts[i].getGlInstance();s&&s.eventHub.propagateToThisAndSubtree(e,t)}}}(function(n){n.ChildEventName="gl_child_event"})(Md||(Md={}));class Ed extends Xi{constructor(e){super(),this.resizeWithContainerAutomatically=!1,this.resizeDebounceInterval=100,this.resizeDebounceExtendedWhenPossible=!0,this._isInitialised=!1,this._groundItem=void 0,this._openPopouts=[],this._dropTargetIndicator=null,this._transitionIndicator=null,this._itemAreas=[],this._maximisePlaceholder=Ed.createMaximisePlaceElement(document),this._tabDropPlaceholder=Ed.createTabDropPlaceholderElement(document),this._dragSources=[],this._updatingColumnsResponsive=!1,this._firstLoad=!0,this._eventHub=new Md(this),this._width=null,this._height=null,this._virtualSizedContainers=[],this._virtualSizedContainerAddingBeginCount=0,this._sizeInvalidationBeginCount=0,this._resizeObserver=new ResizeObserver(()=>this.handleContainerResize()),this._windowBeforeUnloadListener=()=>this.onBeforeUnload(),this._windowBeforeUnloadListening=!1,this._maximisedStackBeforeDestroyedListener=t=>this.cleanupBeforeMaximisedStackDestroyed(t),this.isSubWindow=e.isSubWindow,this._constructorOrSubWindowLayoutConfig=e.constructorOrSubWindowLayoutConfig,ob.checkInitialise(),Kg.checkInitialise(),e.containerElement!==void 0&&(this._containerElement=e.containerElement)}get container(){return this._containerElement}get isInitialised(){return this._isInitialised}get groundItem(){return this._groundItem}get root(){return this._groundItem}get openPopouts(){return this._openPopouts}get dropTargetIndicator(){return this._dropTargetIndicator}get transitionIndicator(){return this._transitionIndicator}get width(){return this._width}get height(){return this._height}get eventHub(){return this._eventHub}get rootItem(){if(this._groundItem===void 0)throw new Error("Cannot access rootItem before init");return this._groundItem.contentItems.length===0?void 0:this._groundItem.contentItems[0]}get focusedComponentItem(){return this._focusedComponentItem}get tabDropPlaceholder(){return this._tabDropPlaceholder}get maximisedStack(){return this._maximisedStack}get deprecatedConstructor(){return!this.isSubWindow&&this._constructorOrSubWindowLayoutConfig!==void 0}destroy(){if(this._isInitialised){this._windowBeforeUnloadListening&&(globalThis.removeEventListener("beforeunload",this._windowBeforeUnloadListener),this._windowBeforeUnloadListening=!1),this.layoutConfig.settings.closePopoutsOnUnload===!0&&this.closeAllOpenPopouts(),this._resizeObserver.disconnect(),this.checkClearResizeTimeout(),this._groundItem!==void 0&&this._groundItem.destroy(),this._tabDropPlaceholder.remove(),this._dropTargetIndicator!==null&&this._dropTargetIndicator.destroy(),this._transitionIndicator!==null&&this._transitionIndicator.destroy(),this._eventHub.destroy();for(const e of this._dragSources)e.destroy();this._dragSources=[],this._isInitialised=!1}}minifyConfig(e){return sn.minifyConfig(e)}unminifyConfig(e){return sn.unminifyConfig(e)}init(){this.setContainer(),this._dropTargetIndicator=new f_e,this._transitionIndicator=new p_e,this.updateSizeFromContainer();let e;if(this.isSubWindow){if(this._constructorOrSubWindowLayoutConfig===void 0)throw new fn("LMIU07155");{const i=this._constructorOrSubWindowLayoutConfig.root;if(i===void 0)throw new Un("LMIC07156");if(Fi.isComponent(i))e=i;else throw new Un("LMIC07157");const s=Hr.resolve(this._constructorOrSubWindowLayoutConfig);this.layoutConfig=Object.assign(Object.assign({},s),{root:void 0})}}else this._constructorOrSubWindowLayoutConfig===void 0?this.layoutConfig=sn.createDefault():this.layoutConfig=Hr.resolve(this._constructorOrSubWindowLayoutConfig);const t=this.layoutConfig;this._groundItem=new ou(this,t.root,this._containerElement),this._groundItem.init(),this.checkLoadedLayoutMaximiseItem(),this._resizeObserver.observe(this._containerElement),this._isInitialised=!0,this.adjustColumnsResponsive(),this.emit("initialised"),e!==void 0&&this.loadComponentAsRoot(e)}loadLayout(e){if(this.isInitialised){if(this._groundItem===void 0)throw new fn("LMLL11119");this.createSubWindows(),this.layoutConfig=Hr.resolve(e),this._groundItem.loadRoot(this.layoutConfig.root),this.checkLoadedLayoutMaximiseItem(),this.adjustColumnsResponsive()}else throw new Error("GoldenLayout: Need to call init() if LayoutConfig with defined root passed to constructor")}saveLayout(){if(this._isInitialised===!1)throw new Error("Can't create config, layout not yet initialised");if(this._groundItem===void 0)throw new fn("LMTC18244");{const e=this._groundItem.calculateConfigContent();let t;e.length!==1?t=void 0:t=e[0],this.reconcilePopoutWindows();const i=[];for(let r=0;r<this._openPopouts.length;r++)i.push(this._openPopouts[r].toConfig());return{root:t,openPopouts:i,settings:sn.Settings.createCopy(this.layoutConfig.settings),dimensions:sn.Dimensions.createCopy(this.layoutConfig.dimensions),header:sn.Header.createCopy(this.layoutConfig.header),resolved:!0}}}clear(){if(this._groundItem===void 0)throw new fn("LMCL11129");this._groundItem.clearRoot()}toConfig(){return this.saveLayout()}newComponent(e,t,i){const s=this.newComponentAtLocation(e,t,i);if(s===void 0)throw new Un("LMNC65588");return s}newComponentAtLocation(e,t,i,s){if(this._groundItem===void 0)throw new Error("Cannot add component before init");{const r=this.addComponentAtLocation(e,t,i,s);if(r===void 0)return;{const o=r.parentItem.contentItems[r.index];if(zr.isComponentItem(o))return o;throw new Un("LMNC992877533")}}}addComponent(e,t,i){const s=this.addComponentAtLocation(e,t,i);if(s===void 0)throw new Un("LMAC99943");return s}addComponentAtLocation(e,t,i,s){const r={type:"component",componentType:e,componentState:t,title:i};return this.addItemAtLocation(r,s)}newItem(e){const t=this.newItemAtLocation(e);if(t===void 0)throw new Un("LMNC65588");return t}newItemAtLocation(e,t){if(this._groundItem===void 0)throw new Error("Cannot add component before init");{const i=this.addItemAtLocation(e,t);return i===void 0?void 0:i.parentItem.contentItems[i.index]}}addItem(e){const t=this.addItemAtLocation(e);if(t===void 0)throw new Un("LMAI99943");return t}addItemAtLocation(e,t){if(this._groundItem===void 0)throw new Error("Cannot add component before init");{t===void 0&&(t=Ed.defaultLocationSelectors);const i=this.findFirstLocation(t);if(i===void 0)return;{let s=i.parentItem,r;switch(s.type){case St.ground:{r=s.addItem(e,i.index),r>=0?s=this._groundItem.contentItems[0]:r=0;break}case St.row:case St.column:{r=s.addItem(e,i.index);break}case St.stack:if(Fi.isComponent(e)){r=s.addItem(e,i.index);break}else throw Error(Sd[6]);case St.component:throw new Un("LMAIALC87444602");default:throw new jr("LMAIALU98881733",s.type)}if(Fi.isComponent(e)){const o=s.contentItems[r];zr.isStack(o)&&(s=o,r=0)}return i.parentItem=s,i.index=r,i}}}loadComponentAsRoot(e){if(this._groundItem===void 0)throw new Error("Cannot add item before init");this._groundItem.loadComponentAsRoot(e)}updateSize(e,t){this.setSize(e,t)}setSize(e,t){if(this._width=e,this._height=t,this._isInitialised===!0){if(this._groundItem===void 0)throw new fn("LMUS18881");if(this._groundItem.setSize(this._width,this._height),this._maximisedStack){const{width:i,height:s}=Fc(this._containerElement);Co(this._maximisedStack.element,i),Mo(this._maximisedStack.element,s),this._maximisedStack.updateSize(!1)}this.adjustColumnsResponsive()}}beginSizeInvalidation(){this._sizeInvalidationBeginCount++}endSizeInvalidation(){--this._sizeInvalidationBeginCount===0&&this.updateSizeFromContainer()}updateSizeFromContainer(){const{width:e,height:t}=Fc(this._containerElement);this.setSize(e,t)}updateRootSize(e=!1){if(this._groundItem===void 0)throw new fn("LMURS28881");this._groundItem.updateSize(e)}createAndInitContentItem(e,t){const i=this.createContentItem(e,t);return i.init(),i}createContentItem(e,t){if(typeof e.type!="string")throw new xd("Missing parameter 'type'",JSON.stringify(e));return gn.isComponentItem(e)&&!(t instanceof xl)&&t&&!(this.isSubWindow===!0&&t instanceof ou)&&(e={type:St.stack,content:[e],size:e.size,sizeUnit:e.sizeUnit,minSize:e.minSize,minSizeUnit:e.minSizeUnit,id:e.id,maximised:e.maximised,isClosable:e.isClosable,activeItemIndex:0,header:void 0}),this.createContentItemFromConfig(e,t)}findFirstComponentItemById(e){if(this._groundItem===void 0)throw new fn("LMFFCIBI82446");return this.findFirstContentItemTypeByIdRecursive(St.component,e,this._groundItem)}createPopout(e,t,i,s){return e instanceof zr?this.createPopoutFromContentItem(e,t,i,s):this.createPopoutFromItemConfig(e,t,i,s)}createPopoutFromContentItem(e,t,i,s){let r=e.parent,o=e;for(;r!==null&&r.contentItems.length===1&&!r.isGround;)o=r,r=r.parent;if(r===null)throw new vi("LMCPFCI00834");{if(s===void 0&&(s=r.contentItems.indexOf(o)),i!==null&&r.addPopInParentId(i),t===void 0){const l=globalThis.screenX||globalThis.screenLeft,c=globalThis.screenY||globalThis.screenTop,u=e.element.offsetLeft,d=e.element.offsetTop,{width:h,height:f}=Fc(e.element);t={left:l+u,top:c+d,width:h,height:f}}const a=e.toConfig();if(e.remove(),Xd.isRootItemConfig(a))return this.createPopoutFromItemConfig(a,t,i,s);throw new Error(`${Sd[0]}`)}}beginVirtualSizedContainerAdding(){++this._virtualSizedContainerAddingBeginCount===0&&(this._virtualSizedContainers.length=0)}addVirtualSizedContainer(e){this._virtualSizedContainers.push(e)}endVirtualSizedContainerAdding(){if(--this._virtualSizedContainerAddingBeginCount===0){const e=this._virtualSizedContainers.length;if(e>0){this.fireBeforeVirtualRectingEvent(e);for(let t=0;t<e;t++)this._virtualSizedContainers[t].notifyVirtualRectingRequired();this.fireAfterVirtualRectingEvent(),this._virtualSizedContainers.length=0}}}fireBeforeVirtualRectingEvent(e){this.beforeVirtualRectingEvent!==void 0&&this.beforeVirtualRectingEvent(e)}fireAfterVirtualRectingEvent(){this.afterVirtualRectingEvent!==void 0&&this.afterVirtualRectingEvent()}createPopoutFromItemConfig(e,t,i,s){const r=this.toConfig(),o={root:e,openPopouts:[],settings:r.settings,dimensions:r.dimensions,header:r.header,window:t,parentId:i,indexInParent:s,resolved:!0};return this.createPopoutFromPopoutLayoutConfig(o)}createPopoutFromPopoutLayoutConfig(e){var t,i,s,r;const o=e.window,a={left:(t=o.left)!==null&&t!==void 0?t:globalThis.screenX||globalThis.screenLeft+20,top:(i=o.top)!==null&&i!==void 0?i:globalThis.screenY||globalThis.screenTop+20,width:(s=o.width)!==null&&s!==void 0?s:500,height:(r=o.height)!==null&&r!==void 0?r:309},l=new l_e(e,a,this);return l.on("initialised",()=>this.emit("windowOpened",l)),l.on("closed",()=>this.reconcilePopoutWindows()),this._openPopouts.push(l),this.layoutConfig.settings.closePopoutsOnUnload&&!this._windowBeforeUnloadListening&&(globalThis.addEventListener("beforeunload",this._windowBeforeUnloadListener,{passive:!0}),this._windowBeforeUnloadListening=!0),l}closeAllOpenPopouts(){for(let e=0;e<this._openPopouts.length;e++)this._openPopouts[e].close();this._openPopouts.length=0,this._windowBeforeUnloadListening&&(globalThis.removeEventListener("beforeunload",this._windowBeforeUnloadListener),this._windowBeforeUnloadListening=!1)}newDragSource(e,t,i,s,r){const o=new qg(this,e,[],t,i,s,r);return this._dragSources.push(o),o}removeDragSource(e){r_e(e,this._dragSources),e.destroy()}startComponentDrag(e,t,i,s,r){new MU(e,t,i,this,s,r)}focusComponent(e,t=!1){e.focus(t)}clearComponentFocus(e=!1){this.setFocusedComponentItem(void 0,e)}setFocusedComponentItem(e,t=!1){if(e!==this._focusedComponentItem){let i;if(e===void 0||(i=e.parentItem),this._focusedComponentItem!==void 0){const s=this._focusedComponentItem;this._focusedComponentItem=void 0,s.setBlurred(t);const r=s.parentItem;i===r?i=void 0:r.setFocusedValue(!1)}e!==void 0&&(this._focusedComponentItem=e,e.setFocused(t),i!==void 0&&i.setFocusedValue(!0))}}createContentItemFromConfig(e,t){switch(e.type){case St.ground:throw new Un("LMCCIFC68871");case St.row:return new jd(!1,this,e,t);case St.column:return new jd(!0,this,e,t);case St.stack:return new xl(this,e,t);case St.component:return new cd(this,e,t);default:throw new jr("CCC913564",e.type,"Invalid Config Item type specified")}}setMaximisedStack(e){e===void 0?this._maximisedStack!==void 0&&this.processMinimiseMaximisedStack():e!==this._maximisedStack&&(this._maximisedStack!==void 0&&this.processMinimiseMaximisedStack(),this.processMaximiseStack(e))}checkMinimiseMaximisedStack(){this._maximisedStack!==void 0&&this._maximisedStack.minimise()}cleanupBeforeMaximisedStackDestroyed(e){this._maximisedStack!==null&&this._maximisedStack===e.target&&(this._maximisedStack.off("beforeItemDestroyed",this._maximisedStackBeforeDestroyedListener),this._maximisedStack=void 0)}closeWindow(){globalThis.setTimeout(()=>globalThis.close(),1)}getArea(e,t){let i=null,s=1/0;for(let r=0;r<this._itemAreas.length;r++){const o=this._itemAreas[r];e>=o.x1&&e<o.x2&&t>=o.y1&&t<o.y2&&s>o.surface&&(s=o.surface,i=o)}return i}calculateItemAreas(){const e=this.getAllContentItems(),t=this._groundItem;if(t===void 0)throw new fn("LMCIAR44365");if(e.length===1){const i=t.getElementArea();if(i===null)throw new vi("LMCIARA44365");this._itemAreas=[i];return}else{t.contentItems[0].isStack?this._itemAreas=[]:this._itemAreas=t.createSideAreas();for(let i=0;i<e.length;i++){const s=e[i];if(zr.isStack(s)){const r=s.getArea();if(r===null)continue;{this._itemAreas.push(r);const o=s.contentAreaDimensions;if(o===void 0)throw new fn("LMCIASC45599");{const a=o.header.highlightArea,l=(a.x2-a.x1)*(a.y2-a.y1),c={x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2,contentItem:s,surface:l};this._itemAreas.push(c)}}}}}}checkLoadedLayoutMaximiseItem(){if(this._groundItem===void 0)throw new fn("LMCLLMI43432");{const e=this._groundItem.getConfigMaximisedItems();if(e.length>0){let t=e[0];if(zr.isComponentItem(t)){const i=t.parent;if(i===null)throw new vi("LMXLLMI69999");t=i}if(zr.isStack(t))t.maximise();else throw new Un("LMCLLMI19993")}}}processMaximiseStack(e){if(this._maximisedStack=e,e.on("beforeItemDestroyed",this._maximisedStackBeforeDestroyedListener),e.element.classList.add("lm_maximised"),e.element.insertAdjacentElement("afterend",this._maximisePlaceholder),this._groundItem===void 0)throw new fn("LMMXI19993");{this._groundItem.element.prepend(e.element);const{width:t,height:i}=Fc(this._containerElement);Co(e.element,t),Mo(e.element,i),e.updateSize(!0),e.focusActiveContentItem(),this._maximisedStack.emit("maximised"),this.emit("stateChanged")}}processMinimiseMaximisedStack(){if(this._maximisedStack===void 0)throw new Un("LMMMS74422");{const e=this._maximisedStack;if(e.parent===null)throw new vi("LMMI13668");e.element.classList.remove("lm_maximised"),this._maximisePlaceholder.insertAdjacentElement("afterend",e.element),this._maximisePlaceholder.remove(),this.updateRootSize(!0),this._maximisedStack=void 0,e.off("beforeItemDestroyed",this._maximisedStackBeforeDestroyedListener),e.emit("minimised"),this.emit("stateChanged")}}reconcilePopoutWindows(){const e=[];for(let t=0;t<this._openPopouts.length;t++)this._openPopouts[t].getWindow().closed===!1?e.push(this._openPopouts[t]):this.emit("windowClosed",this._openPopouts[t]);this._openPopouts.length!==e.length&&(this._openPopouts=e,this.emit("stateChanged"))}getAllContentItems(){if(this._groundItem===void 0)throw new fn("LMGACI13130");return this._groundItem.getAllContentItems()}createSubWindows(){for(let e=0;e<this.layoutConfig.openPopouts.length;e++){const t=this.layoutConfig.openPopouts[e];this.createPopoutFromPopoutLayoutConfig(t)}}handleContainerResize(){this.resizeWithContainerAutomatically&&this.processResizeWithDebounce()}processResizeWithDebounce(){this.resizeDebounceExtendedWhenPossible&&this.checkClearResizeTimeout(),this._resizeTimeoutId===void 0&&(this._resizeTimeoutId=setTimeout(()=>{this._resizeTimeoutId=void 0,this.beginSizeInvalidation(),this.endSizeInvalidation()},this.resizeDebounceInterval))}checkClearResizeTimeout(){this._resizeTimeoutId!==void 0&&(clearTimeout(this._resizeTimeoutId),this._resizeTimeoutId=void 0)}setContainer(){var e;const t=document.body,i=(e=this._containerElement)!==null&&e!==void 0?e:t;if(i===t){this.resizeWithContainerAutomatically=!0;const s=document.documentElement;s.style.height="100%",s.style.margin="0",s.style.padding="0",s.style.overflow="clip",t.style.height="100%",t.style.margin="0",t.style.padding="0",t.style.overflow="clip"}this._containerElement=i}onBeforeUnload(){this.destroy()}adjustColumnsResponsive(){if(this._groundItem===void 0)throw new fn("LMACR20883");if(this._firstLoad=!1,this.useResponsiveLayout()&&!this._updatingColumnsResponsive&&this._groundItem.contentItems.length>0&&this._groundItem.contentItems[0].isRow){if(this._groundItem===void 0||this._width===null)throw new fn("LMACR77412");{const e=this._groundItem.contentItems[0].contentItems.length;if(e<=1)return;{const t=this.layoutConfig.dimensions.defaultMinItemWidth;if(e*t<=this._width)return;{this._updatingColumnsResponsive=!0;const s=Math.max(Math.floor(this._width/t),1),r=e-s,o=this._groundItem.contentItems[0],a=this.getAllStacks();if(a.length===0)throw new Un("LMACRS77413");{const l=a[0];for(let c=0;c<r;c++){const u=o.contentItems[o.contentItems.length-1];this.addChildContentItemsToContainer(l,u)}this._updatingColumnsResponsive=!1}}}}}}useResponsiveLayout(){const e=this.layoutConfig.settings,t=e.responsiveMode===Gg.always,i=e.responsiveMode===Gg.onload&&this._firstLoad;return t||i}addChildContentItemsToContainer(e,t){const i=t.contentItems;if(t instanceof xl)for(let s=0;s<i.length;s++){const r=i[s];t.removeChild(r,!0),e.addChild(r)}else for(let s=0;s<i.length;s++){const r=i[s];this.addChildContentItemsToContainer(e,r)}}getAllStacks(){if(this._groundItem===void 0)throw new fn("LMFASC52778");{const e=[];return this.findAllStacksRecursive(e,this._groundItem),e}}findFirstContentItemType(e){if(this._groundItem===void 0)throw new fn("LMFFCIT82446");return this.findFirstContentItemTypeRecursive(e,this._groundItem)}findFirstContentItemTypeRecursive(e,t){const i=t.contentItems,s=i.length;if(s!==0){for(let r=0;r<s;r++){const o=i[r];if(o.type===e)return o}for(let r=0;r<s;r++){const o=i[r],a=this.findFirstContentItemTypeRecursive(e,o);if(a!==void 0)return a}return}}findFirstContentItemTypeByIdRecursive(e,t,i){const s=i.contentItems,r=s.length;if(r!==0){for(let o=0;o<r;o++){const a=s[o];if(a.type===e&&a.id===t)return a}for(let o=0;o<r;o++){const a=s[o],l=this.findFirstContentItemTypeByIdRecursive(e,t,a);if(l!==void 0)return l}return}}findAllStacksRecursive(e,t){const i=t.contentItems;for(let s=0;s<i.length;s++){const r=i[s];r instanceof xl?e.push(r):r.isComponent||this.findAllStacksRecursive(e,r)}}findFirstLocation(e){const t=e.length;for(let i=0;i<t;i++){const s=e[i],r=this.findLocation(s);if(r!==void 0)return r}}findLocation(e){const t=e.index;switch(e.typeId){case 0:{if(this._focusedComponentItem===void 0)return;{const i=this._focusedComponentItem.parentItem,s=i.contentItems,r=s.length;if(t===void 0)return{parentItem:i,index:r};{const a=s.indexOf(this._focusedComponentItem)+t;return a<0||a>r?void 0:{parentItem:i,index:a}}}}case 1:{if(this._focusedComponentItem===void 0)return;{const i=this._focusedComponentItem.parentItem;return this.tryCreateLocationFromParentItem(i,t)}}case 2:{const i=this.findFirstContentItemType(St.stack);return i===void 0?void 0:this.tryCreateLocationFromParentItem(i,t)}case 3:{let i=this.findFirstContentItemType(St.row);return i!==void 0?this.tryCreateLocationFromParentItem(i,t):(i=this.findFirstContentItemType(St.column),i!==void 0?this.tryCreateLocationFromParentItem(i,t):void 0)}case 4:{const i=this.findFirstContentItemType(St.row);return i===void 0?void 0:this.tryCreateLocationFromParentItem(i,t)}case 5:{const i=this.findFirstContentItemType(St.column);return i===void 0?void 0:this.tryCreateLocationFromParentItem(i,t)}case 6:{if(this._groundItem===void 0)throw new fn("LMFLRIF18244");return this.rootItem!==void 0?void 0:t===void 0||t===0?{parentItem:this._groundItem,index:0}:void 0}case 7:{if(this._groundItem===void 0)throw new fn("LMFLF18244");{const i=this._groundItem.contentItems;if(i.length===0)return t===void 0||t===0?{parentItem:this._groundItem,index:0}:void 0;{const s=i[0];return this.tryCreateLocationFromParentItem(s,t)}}}}}tryCreateLocationFromParentItem(e,t){const s=e.contentItems.length;return t===void 0?{parentItem:e,index:s}:t<0||t>s?void 0:{parentItem:e,index:t}}}(function(n){function e(i){const s=i.createElement("div");return s.classList.add("lm_maximise_place"),s}n.createMaximisePlaceElement=e;function t(i){const s=i.createElement("div");return s.classList.add("lm_drop_tab_placeholder"),s}n.createTabDropPlaceholderElement=t,n.defaultLocationSelectors=[{typeId:1,index:void 0},{typeId:2,index:void 0},{typeId:3,index:void 0},{typeId:7,index:void 0}],n.afterFocusedItemIfPossibleLocationSelectors=[{typeId:0,index:1},{typeId:2,index:void 0},{typeId:3,index:void 0},{typeId:7,index:void 0}]})(Ed||(Ed={}));class Zg extends Ed{constructor(e,t,i,s){if(super(Zg.createLayoutManagerConstructorParameters(e,t)),this._bindComponentEventHanlderPassedInConstructor=!1,this._creationTimeoutPassed=!1,t!==void 0&&typeof t=="function"&&(this.bindComponentEvent=t,this._bindComponentEventHanlderPassedInConstructor=!0,i!==void 0&&(this.unbindComponentEvent=i)),!this._bindComponentEventHanlderPassedInConstructor&&this.isSubWindow){if(this._constructorOrSubWindowLayoutConfig===void 0)throw new fn("VLC98823");{const r=Hr.resolve(this._constructorOrSubWindowLayoutConfig);this.layoutConfig=Object.assign(Object.assign({},r),{root:void 0})}}s!==!0&&(this.deprecatedConstructor||this.init())}destroy(){this.bindComponentEvent=void 0,this.unbindComponentEvent=void 0,super.destroy()}init(){if(!this._bindComponentEventHanlderPassedInConstructor&&(document.readyState==="loading"||document.body===null)){document.addEventListener("DOMContentLoaded",()=>this.init(),{passive:!0});return}if(!this._bindComponentEventHanlderPassedInConstructor&&this.isSubWindow===!0&&!this._creationTimeoutPassed){setTimeout(()=>this.init(),7),this._creationTimeoutPassed=!0;return}this.isSubWindow===!0&&(this._bindComponentEventHanlderPassedInConstructor||this.clearHtmlAndAdjustStylesForSubWindow(),window.__glInstance=this),super.init()}clearHtmlAndAdjustStylesForSubWindow(){const e=document.head,t=new Array(4);t[0]=document.querySelectorAll("body link"),t[1]=document.querySelectorAll("body style"),t[2]=document.querySelectorAll("template"),t[3]=document.querySelectorAll(".gl_keep");for(let s=0;s<t.length;s++){const r=t[s];for(let o=0;o<r.length;o++){const a=r[o];e.appendChild(a)}}const i=document.body;i.innerHTML="",i.style.visibility="visible",this.checkAddDefaultPopinButton(),document.body.offsetHeight}checkAddDefaultPopinButton(){if(this.layoutConfig.settings.popInOnClose)return!1;{const e=document.createElement("div");e.classList.add("lm_popin"),e.setAttribute("title",this.layoutConfig.header.dock);const t=document.createElement("div");t.classList.add("lm_icon");const i=document.createElement("div");return i.classList.add("lm_bg"),e.appendChild(t),e.appendChild(i),e.addEventListener("click",()=>this.emit("popIn")),document.body.appendChild(e),!0}}bindComponent(e,t){if(this.bindComponentEvent!==void 0)return this.bindComponentEvent(e,t);if(this.getComponentEvent!==void 0)return{virtual:!1,component:this.getComponentEvent(e,t)};{const s=`${Sd[2]}: ${JSON.stringify(t)}`;throw new Qye(s)}}unbindComponent(e,t,i){if(this.unbindComponentEvent!==void 0)this.unbindComponentEvent(e);else if(!t&&this.releaseComponentEvent!==void 0){if(i===void 0)throw new fn("VCUCRCU333998");this.releaseComponentEvent(e,i)}}}(function(n){let e=!1;function t(i,s){const r=e?null:new URL(document.location.href).searchParams.get("gl-window");e=!0;const o=r!==null;let a,l;if(r!==null){const c=localStorage.getItem(r);if(c===null)throw new Error("Null gl-window Config");localStorage.removeItem(r);const u=JSON.parse(c),d=sn.unminifyConfig(u);l=Hr.fromResolved(d),i instanceof HTMLElement&&(a=i)}else i===void 0?l=void 0:i instanceof HTMLElement?(l=void 0,a=i):l=i,a===void 0&&s instanceof HTMLElement&&(a=s);return{constructorOrSubWindowLayoutConfig:l,isSubWindow:o,containerElement:a}}n.createLayoutManagerConstructorParameters=t})(Zg||(Zg={}));const m_e=se({__name:"GlComponent",setup(n,{expose:e}){const t=V(null),i=l=>l.toString(10)+"px";return e({setPosAndSize:(l,c,u,d)=>{if(t.value){const h=t.value;h.style.left=i(l),h.style.top=i(c),h.style.width=i(u),h.style.height=i(d)}},setVisibility:l=>{if(t.value){const c=t.value;l?c.style.display="":c.style.display="none"}},setZIndex:l=>{if(t.value){const c=t.value;c.style.zIndex=l}},getElement:()=>{if(t.value)return t.value}}),(l,c)=>(k(),Y("div",{ref_key:"GLComponent",ref:t,style:{position:"absolute",overflow:"hidden"}},[ke(l.$slots,"default")],512))}}),g_e={style:{position:"relative"}},v_e={style:{position:"absolute",width:"100%",height:"100%"}},y_e=se({__name:"Glayout",props:{glcPath:String},setup(n,{expose:e}){const t=Object.assign({"./AttributeView.vue":()=>sc(()=>import("./AttributeView-CgBCpW3M.js"),__vite__mapDeps([0,1]),import.meta.url),"./CarouselMenu.vue":()=>sc(()=>import("./CarouselMenu-Cf89NcYP.js"),__vite__mapDeps([2,3]),import.meta.url),"./GlComponent.vue":()=>sc(()=>import("./GlComponent-DJ_QoXN0.js"),[],import.meta.url),"./Glayout.vue":()=>sc(()=>import("./Glayout-CSN7Ua8D.js"),[],import.meta.url),"./OpenTiles.vue":()=>sc(()=>Promise.resolve().then(()=>cRe),void 0,import.meta.url),"./ProjectViewComponent.vue":()=>sc(()=>import("./ProjectViewComponent-BI_I_6N4.js"),__vite__mapDeps([4,5]),import.meta.url),"./Toolbar.vue":()=>sc(()=>import("./Toolbar-ucW5KBW8.js"),__vite__mapDeps([6,7]),import.meta.url),"./View3D.vue":()=>sc(()=>import("./View3D-BzqH_FlQ.js"),__vite__mapDeps([8,9]),import.meta.url)}),i=n,s=V(null);let r;const o=oh(V("glc_")),a=new Map,l=V(new Map),c=[];let u=0,d;const h=zt(),f=(b,w)=>{const x=El(a6(t[i.glcPath+b+".vue"]));let S=u;return c.length>0?S=c.pop():u++,l.value.set(S,x),S},m=async(b,w,x)=>{if(b.length==0)throw new Error("addGLComponent: Component's type is empty");const S=f(b);await vt(),r.addComponent(b,{refId:S},w)},p=b=>{for(const w of a.keys())if(a.get(w),w.title==b){r.focusComponent(w);return}},y=async b=>{r.clear(),l.value.clear();const w=b.resolved?Hr.fromResolved(b):b;let x=[w.root.content],S=0;for(;x.length>0;){const C=x.shift();for(let T of C)T.type=="component"?(S=f(T.componentType,T.title),typeof T.componentState=="object"?T.componentState.refId=S:T.componentState={refId:S}):T.content.length>0&&x.push(T.content)}await vt(),r.loadLayout(w)},v=()=>r.saveLayout(),_=b=>{for(const w of a.keys()){let S=a.get(w).glc.getElement();if(b==S)return w.title}};return Ft(()=>{if(s.value==null)throw new Error("Golden Layout can't find the root DOM!");const b=()=>{const E=s.value;let A=E?E.offsetWidth:0,I=E?E.offsetHeight:0;r.setSize(A,I)};window.addEventListener("resize",b,{passive:!0});const w=E=>{d=s.value.getBoundingClientRect()},x=(E,A,I)=>{const B=a.get(E);if(!B||!(B!=null&&B.glc))throw new Error("handleContainerVirtualRectingRequiredEvent: Component not found");const F=E.element.getBoundingClientRect(),U=F.left-d.left,P=F.top-d.top;B.glc.setPosAndSize(U,P,A,I)},S=(E,A)=>{const I=a.get(E);if(!I||!(I!=null&&I.glc))throw new Error("handleContainerVirtualVisibilityChangeRequiredEvent: Component not found");I.glc.setVisibility(A)},C=(E,A,I)=>{const B=a.get(E);if(!B||!(B!=null&&B.glc))throw new Error("handleContainerVirtualZIndexChangeRequiredEvent: Component not found");B.glc.setZIndex(I)},T=(E,A)=>{let I=-1;if(A&&A.componentState)I=A.componentState.refId;else throw new Error("bindComponentEventListener: component's ref id is required");const B=o.value+I,F=h==null?void 0:h.refs[B][0];return a.set(E,{refId:I,glc:F}),E.virtualRectingRequiredEvent=(U,P,O)=>x(U,P,O),E.virtualVisibilityChangeRequiredEvent=(U,P)=>S(U,P),E.virtualZIndexChangeRequiredEvent=(U,P,O)=>C(U,P,O),{component:F,virtual:!0}},M=E=>{const A=a.get(E);if(!A||!(A!=null&&A.glc))throw new Error("handleUnbindComponentEvent: Component not found");a.delete(E),l.value.delete(A.refId),c.push(A.refId)};r=new Zg(s.value,T,M),r.beforeVirtualRectingEvent=w}),e({addGLComponent:m,focusComponent:p,loadGLLayout:y,getLayoutConfig:v,getTitleByElement:_}),(b,w)=>(k(),Y("div",g_e,[te("div",{ref_key:"GLRoot",ref:s,style:{position:"absolute",width:"100%",height:"100%"}},null,512),te("div",v_e,[(k(!0),Y(mt,null,Zt(l.value,x=>(k(),Re(m_e,{key:x[0],ref_for:!0,ref:g(o)+x[0]},{default:pe(()=>[(k(),Re(Wt(x[1])))]),_:2},1024))),128))])]))}});/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const X1="167",__e={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},b_e={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},EU=0,gM=1,TU=2,w_e=3,x_e=0,f2=1,p2=2,_a=3,Fo=0,bs=1,ts=2,Ro=0,Td=1,ub=2,vM=3,yM=4,AU=5,Lc=100,IU=101,RU=102,PU=103,LU=104,kU=200,OU=201,DU=202,NU=203,db=204,hb=205,FU=206,BU=207,UU=208,zU=209,HU=210,VU=211,$U=212,GU=213,WU=214,KU=0,YU=1,XU=2,Jg=3,jU=4,qU=5,ZU=6,JU=7,Xv=0,QU=1,ez=2,Al=0,m2=1,tz=2,nz=3,iz=4,sz=5,rz=6,oz=7,_M="attached",az="detached",j1=300,Ol=301,au=302,Qg=303,ev=304,Dp=306,Qr=1e3,Sr=1001,qd=1002,ii=1003,jv=1004,S_e=1004,Bc=1005,C_e=1005,Rn=1006,Ad=1007,M_e=1007,Cr=1008,E_e=1008,Wa=1009,g2=1010,v2=1011,pp=1012,q1=1013,Dl=1014,is=1015,Ki=1016,Z1=1017,J1=1018,Zd=1020,y2=35902,_2=1021,b2=1022,Oi=1023,w2=1024,x2=1025,Id=1026,Jd=1027,qv=1028,Zv=1029,S2=1030,Q1=1031,T_e=1032,ew=1033,ng=33776,ig=33777,sg=33778,rg=33779,fb=35840,pb=35841,mb=35842,gb=35843,vb=36196,yb=37492,_b=37496,bb=37808,wb=37809,xb=37810,Sb=37811,Cb=37812,Mb=37813,Eb=37814,Tb=37815,Ab=37816,Ib=37817,Rb=37818,Pb=37819,Lb=37820,kb=37821,og=36492,Ob=36494,Db=36495,C2=36283,Nb=36284,Fb=36285,Bb=36286,lz=2200,cz=2201,uz=2202,Qd=2300,lu=2301,S_=2302,ud=2400,dd=2401,tv=2402,tw=2500,M2=2501,dz=0,nw=1,nv=2,hz=3200,iw=3201,A_e=3202,I_e=3203,vu=0,fz=1,Ea="",Ei="srgb",qn="srgb-linear",sw="display-p3",Jv="display-p3-linear",iv="linear",ui="srgb",sv="rec709",rv="p3",R_e=0,Ku=7680,P_e=7681,L_e=7682,k_e=7683,O_e=34055,D_e=34056,N_e=5386,F_e=512,B_e=513,U_e=514,z_e=515,H_e=516,V_e=517,$_e=518,bM=519,pz=512,mz=513,gz=514,E2=515,vz=516,yz=517,_z=518,bz=519,ov=35044,G_e=35048,W_e=35040,K_e=35045,Y_e=35049,X_e=35041,j_e=35046,q_e=35050,Z_e=35042,J_e="100",wM="300 es",Ra=2e3,av=2001;let qa=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const s=i.slice(0);for(let r=0,o=s.length;r<o;r++)s[r].call(this,e);e.target=null}}};const Ds=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let s3=1234567;const Rd=Math.PI/180,mp=180/Math.PI;function qr(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ds[n&255]+Ds[n>>8&255]+Ds[n>>16&255]+Ds[n>>24&255]+"-"+Ds[e&255]+Ds[e>>8&255]+"-"+Ds[e>>16&15|64]+Ds[e>>24&255]+"-"+Ds[t&63|128]+Ds[t>>8&255]+"-"+Ds[t>>16&255]+Ds[t>>24&255]+Ds[i&255]+Ds[i>>8&255]+Ds[i>>16&255]+Ds[i>>24&255]).toLowerCase()}function Ni(n,e,t){return Math.max(e,Math.min(t,n))}function T2(n,e){return(n%e+e)%e}function Q_e(n,e,t,i,s){return i+(n-e)*(s-i)/(t-e)}function ebe(n,e,t){return n!==e?(t-n)/(e-n):0}function ag(n,e,t){return(1-t)*n+t*e}function tbe(n,e,t,i){return ag(n,e,1-Math.exp(-t*i))}function nbe(n,e=1){return e-Math.abs(T2(n,e*2)-e)}function ibe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function sbe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function rbe(n,e){return n+Math.floor(Math.random()*(e-n+1))}function obe(n,e){return n+Math.random()*(e-n)}function abe(n){return n*(.5-Math.random())}function lbe(n){n!==void 0&&(s3=n);let e=s3+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function cbe(n){return n*Rd}function ube(n){return n*mp}function dbe(n){return(n&n-1)===0&&n!==0}function hbe(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function fbe(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function pbe(n,e,t,i,s){const r=Math.cos,o=Math.sin,a=r(t/2),l=o(t/2),c=r((e+i)/2),u=o((e+i)/2),d=r((e-i)/2),h=o((e-i)/2),f=r((i-e)/2),m=o((i-e)/2);switch(s){case"XYX":n.set(a*u,l*d,l*h,a*c);break;case"YZY":n.set(l*h,a*u,l*d,a*c);break;case"ZXZ":n.set(l*d,l*h,a*u,a*c);break;case"XZX":n.set(a*u,l*m,l*f,a*c);break;case"YXY":n.set(l*f,a*u,l*m,a*c);break;case"ZYZ":n.set(l*m,l*f,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function ar(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function cn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const kc={DEG2RAD:Rd,RAD2DEG:mp,generateUUID:qr,clamp:Ni,euclideanModulo:T2,mapLinear:Q_e,inverseLerp:ebe,lerp:ag,damp:tbe,pingpong:nbe,smoothstep:ibe,smootherstep:sbe,randInt:rbe,randFloat:obe,randFloatSpread:abe,seededRandom:lbe,degToRad:cbe,radToDeg:ube,isPowerOfTwo:dbe,ceilPowerOfTwo:hbe,floorPowerOfTwo:fbe,setQuaternionFromProperEuler:pbe,normalize:cn,denormalize:ar};class tt{constructor(e=0,t=0){tt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6],this.y=s[1]*t+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Ni(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),s=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*i-o*s+e.x,this.y=r*s+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ln{constructor(e,t,i,s,r,o,a,l,c){ln.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,s,r,o,a,l,c)}set(e,t,i,s,r,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=s,u[2]=a,u[3]=t,u[4]=r,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,r=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],d=i[7],h=i[2],f=i[5],m=i[8],p=s[0],y=s[3],v=s[6],_=s[1],b=s[4],w=s[7],x=s[2],S=s[5],C=s[8];return r[0]=o*p+a*_+l*x,r[3]=o*y+a*b+l*S,r[6]=o*v+a*w+l*C,r[1]=c*p+u*_+d*x,r[4]=c*y+u*b+d*S,r[7]=c*v+u*w+d*C,r[2]=h*p+f*_+m*x,r[5]=h*y+f*b+m*S,r[8]=h*v+f*w+m*C,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*r*u+i*a*l+s*r*c-s*o*l}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,h=a*l-u*r,f=c*r-o*l,m=t*d+i*h+s*f;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const p=1/m;return e[0]=d*p,e[1]=(s*c-u*i)*p,e[2]=(a*i-s*o)*p,e[3]=h*p,e[4]=(u*t-s*l)*p,e[5]=(s*r-a*t)*p,e[6]=f*p,e[7]=(i*l-c*t)*p,e[8]=(o*t-i*r)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,s,r,o,a){const l=Math.cos(r),c=Math.sin(r);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-s*c,s*l,-s*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Mx.makeScale(e,t)),this}rotate(e){return this.premultiply(Mx.makeRotation(-e)),this}translate(e,t){return this.premultiply(Mx.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<9;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Mx=new ln;function wz(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const mbe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function gf(n,e){return new mbe[n](e)}function lv(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function xz(){const n=lv("canvas");return n.style.display="block",n}const r3={};function kf(n){n in r3||(r3[n]=!0,console.warn(n))}function gbe(n,e,t){return new Promise(function(i,s){function r(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:s();break;case n.TIMEOUT_EXPIRED:setTimeout(r,t);break;default:i()}}setTimeout(r,t)})}const o3=new ln().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),a3=new ln().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Zp={[qn]:{transfer:iv,primaries:sv,luminanceCoefficients:[.2126,.7152,.0722],toReference:n=>n,fromReference:n=>n},[Ei]:{transfer:ui,primaries:sv,luminanceCoefficients:[.2126,.7152,.0722],toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[Jv]:{transfer:iv,primaries:rv,luminanceCoefficients:[.2289,.6917,.0793],toReference:n=>n.applyMatrix3(a3),fromReference:n=>n.applyMatrix3(o3)},[sw]:{transfer:ui,primaries:rv,luminanceCoefficients:[.2289,.6917,.0793],toReference:n=>n.convertSRGBToLinear().applyMatrix3(a3),fromReference:n=>n.applyMatrix3(o3).convertLinearToSRGB()}},vbe=new Set([qn,Jv]),Cn={enabled:!0,_workingColorSpace:qn,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!vbe.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=Zp[e].toReference,s=Zp[t].fromReference;return s(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Zp[n].primaries},getTransfer:function(n){return n===Ea?iv:Zp[n].transfer},getLuminanceCoefficients:function(n,e=this._workingColorSpace){return n.fromArray(Zp[e].luminanceCoefficients)}};function Of(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Ex(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Ah;class Sz{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Ah===void 0&&(Ah=lv("canvas")),Ah.width=e.width,Ah.height=e.height;const i=Ah.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Ah}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=lv("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),r=s.data;for(let o=0;o<r.length;o++)r[o]=Of(r[o]/255)*255;return i.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Of(t[i]/255)*255):t[i]=Of(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let ybe=0;class hd{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:ybe++}),this.uuid=qr(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let o=0,a=s.length;o<a;o++)s[o].isDataTexture?r.push(Tx(s[o].image)):r.push(Tx(s[o]))}else r=Tx(s);i.url=r}return t||(e.images[this.uuid]=i),i}}function Tx(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Sz.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let _be=0;class Wn extends qa{constructor(e=Wn.DEFAULT_IMAGE,t=Wn.DEFAULT_MAPPING,i=Sr,s=Sr,r=Rn,o=Cr,a=Oi,l=Wa,c=Wn.DEFAULT_ANISOTROPY,u=Ea){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_be++}),this.uuid=qr(),this.name="",this.source=new hd(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=r,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new tt(0,0),this.repeat=new tt(1,1),this.center=new tt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ln,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==j1)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Qr:e.x=e.x-Math.floor(e.x);break;case Sr:e.x=e.x<0?0:1;break;case qd:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Qr:e.y=e.y-Math.floor(e.y);break;case Sr:e.y=e.y<0?0:1;break;case qd:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Wn.DEFAULT_IMAGE=null;Wn.DEFAULT_MAPPING=j1;Wn.DEFAULT_ANISOTROPY=1;class Ln{constructor(e=0,t=0,i=0,s=1){Ln.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*s+o[12]*r,this.y=o[1]*t+o[5]*i+o[9]*s+o[13]*r,this.z=o[2]*t+o[6]*i+o[10]*s+o[14]*r,this.w=o[3]*t+o[7]*i+o[11]*s+o[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,s,r;const l=e.elements,c=l[0],u=l[4],d=l[8],h=l[1],f=l[5],m=l[9],p=l[2],y=l[6],v=l[10];if(Math.abs(u-h)<.01&&Math.abs(d-p)<.01&&Math.abs(m-y)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+p)<.1&&Math.abs(m+y)<.1&&Math.abs(c+f+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const b=(c+1)/2,w=(f+1)/2,x=(v+1)/2,S=(u+h)/4,C=(d+p)/4,T=(m+y)/4;return b>w&&b>x?b<.01?(i=0,s=.707106781,r=.707106781):(i=Math.sqrt(b),s=S/i,r=C/i):w>x?w<.01?(i=.707106781,s=0,r=.707106781):(s=Math.sqrt(w),i=S/s,r=T/s):x<.01?(i=.707106781,s=.707106781,r=0):(r=Math.sqrt(x),i=C/r,s=T/r),this.set(i,s,r,t),this}let _=Math.sqrt((y-m)*(y-m)+(d-p)*(d-p)+(h-u)*(h-u));return Math.abs(_)<.001&&(_=1),this.x=(y-m)/_,this.y=(d-p)/_,this.z=(h-u)/_,this.w=Math.acos((c+f+v-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Cz extends qa{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Ln(0,0,e,t),this.scissorTest=!1,this.viewport=new Ln(0,0,e,t);const s={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Rn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const r=new Wn(s,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);r.flipY=!1,r.generateMipmaps=i.generateMipmaps,r.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=r.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let s=0,r=this.textures.length;s<r;s++)this.textures[s].image.width=e,this.textures[s].image.height=t,this.textures[s].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,s=e.textures.length;i<s;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new hd(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ti extends Cz{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class rw extends Wn{constructor(e=null,t=1,i=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=ii,this.minFilter=ii,this.wrapR=Sr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class bbe extends Ti{constructor(e=1,t=1,i=1,s={}){super(e,t,s),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new rw(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class A2 extends Wn{constructor(e=null,t=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=ii,this.minFilter=ii,this.wrapR=Sr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class wbe extends Ti{constructor(e=1,t=1,i=1,s={}){super(e,t,s),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new A2(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Mn{constructor(e=0,t=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=s}static slerpFlat(e,t,i,s,r,o,a){let l=i[s+0],c=i[s+1],u=i[s+2],d=i[s+3];const h=r[o+0],f=r[o+1],m=r[o+2],p=r[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d;return}if(a===1){e[t+0]=h,e[t+1]=f,e[t+2]=m,e[t+3]=p;return}if(d!==p||l!==h||c!==f||u!==m){let y=1-a;const v=l*h+c*f+u*m+d*p,_=v>=0?1:-1,b=1-v*v;if(b>Number.EPSILON){const x=Math.sqrt(b),S=Math.atan2(x,v*_);y=Math.sin(y*S)/x,a=Math.sin(a*S)/x}const w=a*_;if(l=l*y+h*w,c=c*y+f*w,u=u*y+m*w,d=d*y+p*w,y===1-a){const x=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=x,c*=x,u*=x,d*=x}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,s,r,o){const a=i[s],l=i[s+1],c=i[s+2],u=i[s+3],d=r[o],h=r[o+1],f=r[o+2],m=r[o+3];return e[t]=a*m+u*d+l*f-c*h,e[t+1]=l*m+u*h+c*d-a*f,e[t+2]=c*m+u*f+a*h-l*d,e[t+3]=u*m-a*d-l*h-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,s){return this._x=e,this._y=t,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,s=e._y,r=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(s/2),d=a(r/2),h=l(i/2),f=l(s/2),m=l(r/2);switch(o){case"XYZ":this._x=h*u*d+c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d-h*f*m;break;case"YXZ":this._x=h*u*d+c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d+h*f*m;break;case"ZXY":this._x=h*u*d-c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d-h*f*m;break;case"ZYX":this._x=h*u*d-c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d+h*f*m;break;case"YZX":this._x=h*u*d+c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d-h*f*m;break;case"XZY":this._x=h*u*d-c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d+h*f*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],s=t[4],r=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],h=i+a+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-l)*f,this._y=(r-c)*f,this._z=(o-s)*f}else if(i>a&&i>d){const f=2*Math.sqrt(1+i-a-d);this._w=(u-l)/f,this._x=.25*f,this._y=(s+o)/f,this._z=(r+c)/f}else if(a>d){const f=2*Math.sqrt(1+a-i-d);this._w=(r-c)/f,this._x=(s+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+d-i-a);this._w=(o-s)/f,this._x=(r+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ni(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,t/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,s=e._y,r=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+s*c-r*l,this._y=s*u+o*l+r*a-i*c,this._z=r*u+o*c+i*l-s*a,this._w=o*u-i*a-s*l-r*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,s=this._y,r=this._z,o=this._w;let a=o*e._w+i*e._x+s*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=s,this._z=r,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*i+t*this._x,this._y=f*s+t*this._y,this._z=f*r+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,h=Math.sin(t*u)/c;return this._w=o*d+this._w*h,this._x=i*d+this._x*h,this._y=s*d+this._y*h,this._z=r*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),s=Math.sqrt(1-i),r=Math.sqrt(i);return this.set(s*Math.sin(e),s*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class G{constructor(e=0,t=0,i=0){G.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(l3.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(l3.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6]*s,this.y=r[1]*t+r[4]*i+r[7]*s,this.z=r[2]*t+r[5]*i+r[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,r=e.elements,o=1/(r[3]*t+r[7]*i+r[11]*s+r[15]);return this.x=(r[0]*t+r[4]*i+r[8]*s+r[12])*o,this.y=(r[1]*t+r[5]*i+r[9]*s+r[13])*o,this.z=(r[2]*t+r[6]*i+r[10]*s+r[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,s=this.z,r=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*s-a*i),u=2*(a*t-r*s),d=2*(r*i-o*t);return this.x=t+l*c+o*d-a*u,this.y=i+l*u+a*c-r*d,this.z=s+l*d+r*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[4]*i+r[8]*s,this.y=r[1]*t+r[5]*i+r[9]*s,this.z=r[2]*t+r[6]*i+r[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,s=e.y,r=e.z,o=t.x,a=t.y,l=t.z;return this.x=s*l-r*a,this.y=r*o-i*l,this.z=i*a-s*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Ax.copy(this).projectOnVector(e),this.sub(Ax)}reflect(e){return this.sub(Ax.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Ni(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return t*t+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const s=Math.sin(t)*e;return this.x=s*Math.sin(i),this.y=Math.cos(t)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Ax=new G,l3=new Mn;class Nn{constructor(e=new G(1/0,1/0,1/0),t=new G(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Vo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Vo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Vo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const r=i.getAttribute("position");if(t===!0&&r!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=r.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Vo):Vo.fromBufferAttribute(r,o),Vo.applyMatrix4(e.matrixWorld),this.expandByPoint(Vo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),U0.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),U0.copy(i.boundingBox)),U0.applyMatrix4(e.matrixWorld),this.union(U0)}const s=e.children;for(let r=0,o=s.length;r<o;r++)this.expandByObject(s[r],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Vo),Vo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Jp),z0.subVectors(this.max,Jp),Ih.subVectors(e.a,Jp),Rh.subVectors(e.b,Jp),Ph.subVectors(e.c,Jp),rc.subVectors(Rh,Ih),oc.subVectors(Ph,Rh),Eu.subVectors(Ih,Ph);let t=[0,-rc.z,rc.y,0,-oc.z,oc.y,0,-Eu.z,Eu.y,rc.z,0,-rc.x,oc.z,0,-oc.x,Eu.z,0,-Eu.x,-rc.y,rc.x,0,-oc.y,oc.x,0,-Eu.y,Eu.x,0];return!Ix(t,Ih,Rh,Ph,z0)||(t=[1,0,0,0,1,0,0,0,1],!Ix(t,Ih,Rh,Ph,z0))?!1:(H0.crossVectors(rc,oc),t=[H0.x,H0.y,H0.z],Ix(t,Ih,Rh,Ph,z0))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Vo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Vo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(el[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),el[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),el[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),el[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),el[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),el[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),el[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),el[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(el),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const el=[new G,new G,new G,new G,new G,new G,new G,new G],Vo=new G,U0=new Nn,Ih=new G,Rh=new G,Ph=new G,rc=new G,oc=new G,Eu=new G,Jp=new G,z0=new G,H0=new G,Tu=new G;function Ix(n,e,t,i,s){for(let r=0,o=n.length-3;r<=o;r+=3){Tu.fromArray(n,r);const a=s.x*Math.abs(Tu.x)+s.y*Math.abs(Tu.y)+s.z*Math.abs(Tu.z),l=e.dot(Tu),c=t.dot(Tu),u=i.dot(Tu);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const xbe=new Nn,Qp=new G,Rx=new G;class bi{constructor(e=new G,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):xbe.setFromPoints(e).getCenter(i);let s=0;for(let r=0,o=e.length;r<o;r++)s=Math.max(s,i.distanceToSquared(e[r]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Qp.subVectors(e,this.center);const t=Qp.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),s=(i-this.radius)*.5;this.center.addScaledVector(Qp,s/i),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Rx.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Qp.copy(e.center).add(Rx)),this.expandByPoint(Qp.copy(e.center).sub(Rx))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const tl=new G,Px=new G,V0=new G,ac=new G,Lx=new G,$0=new G,kx=new G;class fh{constructor(e=new G,t=new G(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,tl)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=tl.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(tl.copy(this.origin).addScaledVector(this.direction,t),tl.distanceToSquared(e))}distanceSqToSegment(e,t,i,s){Px.copy(e).add(t).multiplyScalar(.5),V0.copy(t).sub(e).normalize(),ac.copy(this.origin).sub(Px);const r=e.distanceTo(t)*.5,o=-this.direction.dot(V0),a=ac.dot(this.direction),l=-ac.dot(V0),c=ac.lengthSq(),u=Math.abs(1-o*o);let d,h,f,m;if(u>0)if(d=o*l-a,h=o*a-l,m=r*u,d>=0)if(h>=-m)if(h<=m){const p=1/u;d*=p,h*=p,f=d*(d+o*h+2*a)+h*(o*d+h+2*l)+c}else h=r,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h=-r,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h<=-m?(d=Math.max(0,-(-o*r+a)),h=d>0?-r:Math.min(Math.max(-r,-l),r),f=-d*d+h*(h+2*l)+c):h<=m?(d=0,h=Math.min(Math.max(-r,-l),r),f=h*(h+2*l)+c):(d=Math.max(0,-(o*r+a)),h=d>0?r:Math.min(Math.max(-r,-l),r),f=-d*d+h*(h+2*l)+c);else h=o>0?-r:r,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,d),s&&s.copy(Px).addScaledVector(V0,h),f}intersectSphere(e,t){tl.subVectors(e.center,this.origin);const i=tl.dot(this.direction),s=tl.dot(tl)-i*i,r=e.radius*e.radius;if(s>r)return null;const o=Math.sqrt(r-s),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,s,r,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(i=(e.min.x-h.x)*c,s=(e.max.x-h.x)*c):(i=(e.max.x-h.x)*c,s=(e.min.x-h.x)*c),u>=0?(r=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(r=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),i>o||r>s||((r>i||isNaN(i))&&(i=r),(o<s||isNaN(s))&&(s=o),d>=0?(a=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),i>l||a>s)||((a>i||i!==i)&&(i=a),(l<s||s!==s)&&(s=l),s<0)?null:this.at(i>=0?i:s,t)}intersectsBox(e){return this.intersectBox(e,tl)!==null}intersectTriangle(e,t,i,s,r){Lx.subVectors(t,e),$0.subVectors(i,e),kx.crossVectors(Lx,$0);let o=this.direction.dot(kx),a;if(o>0){if(s)return null;a=1}else if(o<0)a=-1,o=-o;else return null;ac.subVectors(this.origin,e);const l=a*this.direction.dot($0.crossVectors(ac,$0));if(l<0)return null;const c=a*this.direction.dot(Lx.cross(ac));if(c<0||l+c>o)return null;const u=-a*ac.dot(kx);return u<0?null:this.at(u/o,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class yt{constructor(e,t,i,s,r,o,a,l,c,u,d,h,f,m,p,y){yt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,s,r,o,a,l,c,u,d,h,f,m,p,y)}set(e,t,i,s,r,o,a,l,c,u,d,h,f,m,p,y){const v=this.elements;return v[0]=e,v[4]=t,v[8]=i,v[12]=s,v[1]=r,v[5]=o,v[9]=a,v[13]=l,v[2]=c,v[6]=u,v[10]=d,v[14]=h,v[3]=f,v[7]=m,v[11]=p,v[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new yt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,s=1/Lh.setFromMatrixColumn(e,0).length(),r=1/Lh.setFromMatrixColumn(e,1).length(),o=1/Lh.setFromMatrixColumn(e,2).length();return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t[3]=0,t[4]=i[4]*r,t[5]=i[5]*r,t[6]=i[6]*r,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,s=e.y,r=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(s),c=Math.sin(s),u=Math.cos(r),d=Math.sin(r);if(e.order==="XYZ"){const h=o*u,f=o*d,m=a*u,p=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=f+m*c,t[5]=h-p*c,t[9]=-a*l,t[2]=p-h*c,t[6]=m+f*c,t[10]=o*l}else if(e.order==="YXZ"){const h=l*u,f=l*d,m=c*u,p=c*d;t[0]=h+p*a,t[4]=m*a-f,t[8]=o*c,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=f*a-m,t[6]=p+h*a,t[10]=o*l}else if(e.order==="ZXY"){const h=l*u,f=l*d,m=c*u,p=c*d;t[0]=h-p*a,t[4]=-o*d,t[8]=m+f*a,t[1]=f+m*a,t[5]=o*u,t[9]=p-h*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const h=o*u,f=o*d,m=a*u,p=a*d;t[0]=l*u,t[4]=m*c-f,t[8]=h*c+p,t[1]=l*d,t[5]=p*c+h,t[9]=f*c-m,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const h=o*l,f=o*c,m=a*l,p=a*c;t[0]=l*u,t[4]=p-h*d,t[8]=m*d+f,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*d+m,t[10]=h-p*d}else if(e.order==="XZY"){const h=o*l,f=o*c,m=a*l,p=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=h*d+p,t[5]=o*u,t[9]=f*d-m,t[2]=m*d-f,t[6]=a*u,t[10]=p*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Sbe,e,Cbe)}lookAt(e,t,i){const s=this.elements;return Dr.subVectors(e,t),Dr.lengthSq()===0&&(Dr.z=1),Dr.normalize(),lc.crossVectors(i,Dr),lc.lengthSq()===0&&(Math.abs(i.z)===1?Dr.x+=1e-4:Dr.z+=1e-4,Dr.normalize(),lc.crossVectors(i,Dr)),lc.normalize(),G0.crossVectors(Dr,lc),s[0]=lc.x,s[4]=G0.x,s[8]=Dr.x,s[1]=lc.y,s[5]=G0.y,s[9]=Dr.y,s[2]=lc.z,s[6]=G0.z,s[10]=Dr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,r=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],d=i[5],h=i[9],f=i[13],m=i[2],p=i[6],y=i[10],v=i[14],_=i[3],b=i[7],w=i[11],x=i[15],S=s[0],C=s[4],T=s[8],M=s[12],E=s[1],A=s[5],I=s[9],B=s[13],F=s[2],U=s[6],P=s[10],O=s[14],D=s[3],L=s[7],H=s[11],X=s[15];return r[0]=o*S+a*E+l*F+c*D,r[4]=o*C+a*A+l*U+c*L,r[8]=o*T+a*I+l*P+c*H,r[12]=o*M+a*B+l*O+c*X,r[1]=u*S+d*E+h*F+f*D,r[5]=u*C+d*A+h*U+f*L,r[9]=u*T+d*I+h*P+f*H,r[13]=u*M+d*B+h*O+f*X,r[2]=m*S+p*E+y*F+v*D,r[6]=m*C+p*A+y*U+v*L,r[10]=m*T+p*I+y*P+v*H,r[14]=m*M+p*B+y*O+v*X,r[3]=_*S+b*E+w*F+x*D,r[7]=_*C+b*A+w*U+x*L,r[11]=_*T+b*I+w*P+x*H,r[15]=_*M+b*B+w*O+x*X,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],s=e[8],r=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],f=e[14],m=e[3],p=e[7],y=e[11],v=e[15];return m*(+r*l*d-s*c*d-r*a*h+i*c*h+s*a*f-i*l*f)+p*(+t*l*f-t*c*h+r*o*h-s*o*f+s*c*u-r*l*u)+y*(+t*c*d-t*a*f-r*o*d+i*o*f+r*a*u-i*c*u)+v*(-s*a*u-t*l*d+t*a*h+s*o*d-i*o*h+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],f=e[11],m=e[12],p=e[13],y=e[14],v=e[15],_=d*y*c-p*h*c+p*l*f-a*y*f-d*l*v+a*h*v,b=m*h*c-u*y*c-m*l*f+o*y*f+u*l*v-o*h*v,w=u*p*c-m*d*c+m*a*f-o*p*f-u*a*v+o*d*v,x=m*d*l-u*p*l-m*a*h+o*p*h+u*a*y-o*d*y,S=t*_+i*b+s*w+r*x;if(S===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const C=1/S;return e[0]=_*C,e[1]=(p*h*r-d*y*r-p*s*f+i*y*f+d*s*v-i*h*v)*C,e[2]=(a*y*r-p*l*r+p*s*c-i*y*c-a*s*v+i*l*v)*C,e[3]=(d*l*r-a*h*r-d*s*c+i*h*c+a*s*f-i*l*f)*C,e[4]=b*C,e[5]=(u*y*r-m*h*r+m*s*f-t*y*f-u*s*v+t*h*v)*C,e[6]=(m*l*r-o*y*r-m*s*c+t*y*c+o*s*v-t*l*v)*C,e[7]=(o*h*r-u*l*r+u*s*c-t*h*c-o*s*f+t*l*f)*C,e[8]=w*C,e[9]=(m*d*r-u*p*r-m*i*f+t*p*f+u*i*v-t*d*v)*C,e[10]=(o*p*r-m*a*r+m*i*c-t*p*c-o*i*v+t*a*v)*C,e[11]=(u*a*r-o*d*r-u*i*c+t*d*c+o*i*f-t*a*f)*C,e[12]=x*C,e[13]=(u*p*s-m*d*s+m*i*h-t*p*h-u*i*y+t*d*y)*C,e[14]=(m*a*s-o*p*s-m*i*l+t*p*l+o*i*y-t*a*y)*C,e[15]=(o*d*s-u*a*s+u*i*l-t*d*l-o*i*h+t*a*h)*C,this}scale(e){const t=this.elements,i=e.x,s=e.y,r=e.z;return t[0]*=i,t[4]*=s,t[8]*=r,t[1]*=i,t[5]*=s,t[9]*=r,t[2]*=i,t[6]*=s,t[10]*=r,t[3]*=i,t[7]*=s,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,s))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),s=Math.sin(t),r=1-i,o=e.x,a=e.y,l=e.z,c=r*o,u=r*a;return this.set(c*o+i,c*a-s*l,c*l+s*a,0,c*a+s*l,u*a+i,u*l-s*o,0,c*l-s*a,u*l+s*o,r*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,s,r,o){return this.set(1,i,r,0,e,1,o,0,t,s,1,0,0,0,0,1),this}compose(e,t,i){const s=this.elements,r=t._x,o=t._y,a=t._z,l=t._w,c=r+r,u=o+o,d=a+a,h=r*c,f=r*u,m=r*d,p=o*u,y=o*d,v=a*d,_=l*c,b=l*u,w=l*d,x=i.x,S=i.y,C=i.z;return s[0]=(1-(p+v))*x,s[1]=(f+w)*x,s[2]=(m-b)*x,s[3]=0,s[4]=(f-w)*S,s[5]=(1-(h+v))*S,s[6]=(y+_)*S,s[7]=0,s[8]=(m+b)*C,s[9]=(y-_)*C,s[10]=(1-(h+p))*C,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,i){const s=this.elements;let r=Lh.set(s[0],s[1],s[2]).length();const o=Lh.set(s[4],s[5],s[6]).length(),a=Lh.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),e.x=s[12],e.y=s[13],e.z=s[14],$o.copy(this);const c=1/r,u=1/o,d=1/a;return $o.elements[0]*=c,$o.elements[1]*=c,$o.elements[2]*=c,$o.elements[4]*=u,$o.elements[5]*=u,$o.elements[6]*=u,$o.elements[8]*=d,$o.elements[9]*=d,$o.elements[10]*=d,t.setFromRotationMatrix($o),i.x=r,i.y=o,i.z=a,this}makePerspective(e,t,i,s,r,o,a=Ra){const l=this.elements,c=2*r/(t-e),u=2*r/(i-s),d=(t+e)/(t-e),h=(i+s)/(i-s);let f,m;if(a===Ra)f=-(o+r)/(o-r),m=-2*o*r/(o-r);else if(a===av)f=-o/(o-r),m=-o*r/(o-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,s,r,o,a=Ra){const l=this.elements,c=1/(t-e),u=1/(i-s),d=1/(o-r),h=(t+e)*c,f=(i+s)*u;let m,p;if(a===Ra)m=(o+r)*d,p=-2*d;else if(a===av)m=r*d,p=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=p,l[14]=-m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<16;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Lh=new G,$o=new yt,Sbe=new G(0,0,0),Cbe=new G(1,1,1),lc=new G,G0=new G,Dr=new G,c3=new yt,u3=new Mn;class Js{constructor(e=0,t=0,i=0,s=Js.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,s=this._order){return this._x=e,this._y=t,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const s=e.elements,r=s[0],o=s[4],a=s[8],l=s[1],c=s[5],u=s[9],d=s[2],h=s[6],f=s[10];switch(t){case"XYZ":this._y=Math.asin(Ni(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Ni(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,r),this._z=0);break;case"ZXY":this._x=Math.asin(Ni(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,r));break;case"ZYX":this._y=Math.asin(-Ni(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(l,r)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Ni(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,r)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-Ni(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return c3.makeRotationFromQuaternion(e),this.setFromRotationMatrix(c3,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return u3.setFromEuler(this),this.setFromQuaternion(u3,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Js.DEFAULT_ORDER="XYZ";class ow{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Mbe=0;const d3=new G,kh=new Mn,nl=new yt,W0=new G,em=new G,Ebe=new G,Tbe=new Mn,h3=new G(1,0,0),f3=new G(0,1,0),p3=new G(0,0,1),m3={type:"added"},Abe={type:"removed"},Oh={type:"childadded",child:null},Ox={type:"childremoved",child:null};class rn extends qa{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Mbe++}),this.uuid=qr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=rn.DEFAULT_UP.clone();const e=new G,t=new Js,i=new Mn,s=new G(1,1,1);function r(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(r),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new yt},normalMatrix:{value:new ln}}),this.matrix=new yt,this.matrixWorld=new yt,this.matrixAutoUpdate=rn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=rn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new ow,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return kh.setFromAxisAngle(e,t),this.quaternion.multiply(kh),this}rotateOnWorldAxis(e,t){return kh.setFromAxisAngle(e,t),this.quaternion.premultiply(kh),this}rotateX(e){return this.rotateOnAxis(h3,e)}rotateY(e){return this.rotateOnAxis(f3,e)}rotateZ(e){return this.rotateOnAxis(p3,e)}translateOnAxis(e,t){return d3.copy(e).applyQuaternion(this.quaternion),this.position.add(d3.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(h3,e)}translateY(e){return this.translateOnAxis(f3,e)}translateZ(e){return this.translateOnAxis(p3,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(nl.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?W0.copy(e):W0.set(e,t,i);const s=this.parent;this.updateWorldMatrix(!0,!1),em.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?nl.lookAt(em,W0,this.up):nl.lookAt(W0,em,this.up),this.quaternion.setFromRotationMatrix(nl),s&&(nl.extractRotation(s.matrixWorld),kh.setFromRotationMatrix(nl),this.quaternion.premultiply(kh.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(m3),Oh.child=e,this.dispatchEvent(Oh),Oh.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Abe),Ox.child=e,this.dispatchEvent(Ox),Ox.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),nl.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),nl.multiply(e.parent.matrixWorld)),e.applyMatrix4(nl),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(m3),Oh.child=e,this.dispatchEvent(Oh),Oh.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const s=this.children;for(let r=0,o=s.length;r<o;r++)s[r].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(em,e,Ebe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(em,Tbe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const s=this.children;for(let r=0,o=s.length;r<o;r++)s[r].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function r(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];r(e.shapes,d)}else r(e.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(r(e.materials,this.material[l]));s.material=a}else s.material=r(e.materials,this.material);if(this.children.length>0){s.children=[];for(let a=0;a<this.children.length;a++)s.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];s.animations.push(r(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),d=o(e.shapes),h=o(e.skeletons),f=o(e.animations),m=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),d.length>0&&(i.shapes=d),h.length>0&&(i.skeletons=h),f.length>0&&(i.animations=f),m.length>0&&(i.nodes=m)}return i.object=s,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const s=e.children[i];this.add(s.clone())}return this}}rn.DEFAULT_UP=new G(0,1,0);rn.DEFAULT_MATRIX_AUTO_UPDATE=!0;rn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Go=new G,il=new G,Dx=new G,sl=new G,Dh=new G,Nh=new G,g3=new G,Nx=new G,Fx=new G,Bx=new G;class Vr{constructor(e=new G,t=new G,i=new G){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,s){s.subVectors(i,t),Go.subVectors(e,t),s.cross(Go);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(e,t,i,s,r){Go.subVectors(s,t),il.subVectors(i,t),Dx.subVectors(e,t);const o=Go.dot(Go),a=Go.dot(il),l=Go.dot(Dx),c=il.dot(il),u=il.dot(Dx),d=o*c-a*a;if(d===0)return r.set(0,0,0),null;const h=1/d,f=(c*l-a*u)*h,m=(o*u-a*l)*h;return r.set(1-f-m,m,f)}static containsPoint(e,t,i,s){return this.getBarycoord(e,t,i,s,sl)===null?!1:sl.x>=0&&sl.y>=0&&sl.x+sl.y<=1}static getInterpolation(e,t,i,s,r,o,a,l){return this.getBarycoord(e,t,i,s,sl)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(r,sl.x),l.addScaledVector(o,sl.y),l.addScaledVector(a,sl.z),l)}static isFrontFacing(e,t,i,s){return Go.subVectors(i,t),il.subVectors(e,t),Go.cross(il).dot(s)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,s){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,i,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Go.subVectors(this.c,this.b),il.subVectors(this.a,this.b),Go.cross(il).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Vr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Vr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,s,r){return Vr.getInterpolation(e,this.a,this.b,this.c,t,i,s,r)}containsPoint(e){return Vr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Vr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,s=this.b,r=this.c;let o,a;Dh.subVectors(s,i),Nh.subVectors(r,i),Nx.subVectors(e,i);const l=Dh.dot(Nx),c=Nh.dot(Nx);if(l<=0&&c<=0)return t.copy(i);Fx.subVectors(e,s);const u=Dh.dot(Fx),d=Nh.dot(Fx);if(u>=0&&d<=u)return t.copy(s);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(Dh,o);Bx.subVectors(e,r);const f=Dh.dot(Bx),m=Nh.dot(Bx);if(m>=0&&f<=m)return t.copy(r);const p=f*c-l*m;if(p<=0&&c>=0&&m<=0)return a=c/(c-m),t.copy(i).addScaledVector(Nh,a);const y=u*m-f*d;if(y<=0&&d-u>=0&&f-m>=0)return g3.subVectors(r,s),a=(d-u)/(d-u+(f-m)),t.copy(s).addScaledVector(g3,a);const v=1/(y+p+h);return o=p*v,a=h*v,t.copy(i).addScaledVector(Dh,o).addScaledVector(Nh,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Mz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},cc={h:0,s:0,l:0},K0={h:0,s:0,l:0};function Ux(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class gt{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ei){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Cn.toWorkingColorSpace(this,t),this}setRGB(e,t,i,s=Cn.workingColorSpace){return this.r=e,this.g=t,this.b=i,Cn.toWorkingColorSpace(this,s),this}setHSL(e,t,i,s=Cn.workingColorSpace){if(e=T2(e,1),t=Ni(t,0,1),i=Ni(i,0,1),t===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+t):i+t-i*t,o=2*i-r;this.r=Ux(o,r,e+1/3),this.g=Ux(o,r,e),this.b=Ux(o,r,e-1/3)}return Cn.toWorkingColorSpace(this,s),this}setStyle(e,t=Ei){function i(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const o=s[1],a=s[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=s[1],o=r.length;if(o===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(r,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Ei){const i=Mz[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Of(e.r),this.g=Of(e.g),this.b=Of(e.b),this}copyLinearToSRGB(e){return this.r=Ex(e.r),this.g=Ex(e.g),this.b=Ex(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ei){return Cn.fromWorkingColorSpace(Ns.copy(this),e),Math.round(Ni(Ns.r*255,0,255))*65536+Math.round(Ni(Ns.g*255,0,255))*256+Math.round(Ni(Ns.b*255,0,255))}getHexString(e=Ei){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Cn.workingColorSpace){Cn.fromWorkingColorSpace(Ns.copy(this),t);const i=Ns.r,s=Ns.g,r=Ns.b,o=Math.max(i,s,r),a=Math.min(i,s,r);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=u<=.5?d/(o+a):d/(2-o-a),o){case i:l=(s-r)/d+(s<r?6:0);break;case s:l=(r-i)/d+2;break;case r:l=(i-s)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Cn.workingColorSpace){return Cn.fromWorkingColorSpace(Ns.copy(this),t),e.r=Ns.r,e.g=Ns.g,e.b=Ns.b,e}getStyle(e=Ei){Cn.fromWorkingColorSpace(Ns.copy(this),e);const t=Ns.r,i=Ns.g,s=Ns.b;return e!==Ei?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(s*255)})`}offsetHSL(e,t,i){return this.getHSL(cc),this.setHSL(cc.h+e,cc.s+t,cc.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(cc),e.getHSL(K0);const i=ag(cc.h,K0.h,t),s=ag(cc.s,K0.s,t),r=ag(cc.l,K0.l,t);return this.setHSL(i,s,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,s=this.b,r=e.elements;return this.r=r[0]*t+r[3]*i+r[6]*s,this.g=r[1]*t+r[4]*i+r[7]*s,this.b=r[2]*t+r[5]*i+r[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ns=new gt;gt.NAMES=Mz;let Ibe=0;class zi extends qa{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Ibe++}),this.uuid=qr(),this.name="",this.type="Material",this.blending=Td,this.side=Fo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=db,this.blendDst=hb,this.blendEquation=Lc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new gt(0,0,0),this.blendAlpha=0,this.depthFunc=Jg,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=bM,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ku,this.stencilZFail=Ku,this.stencilZPass=Ku,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Td&&(i.blending=this.blending),this.side!==Fo&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==db&&(i.blendSrc=this.blendSrc),this.blendDst!==hb&&(i.blendDst=this.blendDst),this.blendEquation!==Lc&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Jg&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==bM&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ku&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Ku&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Ku&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function s(r){const o=[];for(const a in r){const l=r[a];delete l.metadata,o.push(l)}return o}if(t){const r=s(e.textures),o=s(e.images);r.length>0&&(i.textures=r),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const s=t.length;i=new Array(s);for(let r=0;r!==s;++r)i[r]=t[r].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}onBeforeRender(){console.warn("Material: onBeforeRender() has been removed.")}}class $n extends zi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new gt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Js,this.combine=Xv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const vl=Rbe();function Rbe(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),s=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,s[l]=24,s[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,s[l]=-c-1,s[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,s[l]=13,s[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,s[l]=24,s[l|256]=24):(i[l]=31744,i[l|256]=64512,s[l]=13,s[l|256]=13)}const r=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,r[l]=c|u}for(let l=1024;l<2048;++l)r[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:s,mantissaTable:r,exponentTable:o,offsetTable:a}}function br(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Ni(n,-65504,65504),vl.floatView[0]=n;const e=vl.uint32View[0],t=e>>23&511;return vl.baseTable[t]+((e&8388607)>>vl.shiftTable[t])}function Em(n){const e=n>>10;return vl.uint32View[0]=vl.mantissaTable[vl.offsetTable[e]+(n&1023)]+vl.exponentTable[e],vl.floatView[0]}const fd={toHalfFloat:br,fromHalfFloat:Em},Ji=new G,Y0=new tt;class dn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=ov,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=is,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return kf("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[e+s]=t.array[i+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Y0.fromBufferAttribute(this,t),Y0.applyMatrix3(e),this.setXY(t,Y0.x,Y0.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Ji.fromBufferAttribute(this,t),Ji.applyMatrix3(e),this.setXYZ(t,Ji.x,Ji.y,Ji.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Ji.fromBufferAttribute(this,t),Ji.applyMatrix4(e),this.setXYZ(t,Ji.x,Ji.y,Ji.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ji.fromBufferAttribute(this,t),Ji.applyNormalMatrix(e),this.setXYZ(t,Ji.x,Ji.y,Ji.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ji.fromBufferAttribute(this,t),Ji.transformDirection(e),this.setXYZ(t,Ji.x,Ji.y,Ji.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=ar(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=cn(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ar(t,this.array)),t}setX(e,t){return this.normalized&&(t=cn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ar(t,this.array)),t}setY(e,t){return this.normalized&&(t=cn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ar(t,this.array)),t}setZ(e,t){return this.normalized&&(t=cn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ar(t,this.array)),t}setW(e,t){return this.normalized&&(t=cn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=cn(t,this.array),i=cn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,s){return e*=this.itemSize,this.normalized&&(t=cn(t,this.array),i=cn(i,this.array),s=cn(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,t,i,s,r){return e*=this.itemSize,this.normalized&&(t=cn(t,this.array),i=cn(i,this.array),s=cn(s,this.array),r=cn(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==ov&&(e.usage=this.usage),e}}class Pbe extends dn{constructor(e,t,i){super(new Int8Array(e),t,i)}}class vf extends dn{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class Lbe extends dn{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class kbe extends dn{constructor(e,t,i){super(new Int16Array(e),t,i)}}class I2 extends dn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Ez extends dn{constructor(e,t,i){super(new Int32Array(e),t,i)}}class aw extends dn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Obe extends dn{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Em(this.array[e*this.itemSize]);return this.normalized&&(t=ar(t,this.array)),t}setX(e,t){return this.normalized&&(t=cn(t,this.array)),this.array[e*this.itemSize]=br(t),this}getY(e){let t=Em(this.array[e*this.itemSize+1]);return this.normalized&&(t=ar(t,this.array)),t}setY(e,t){return this.normalized&&(t=cn(t,this.array)),this.array[e*this.itemSize+1]=br(t),this}getZ(e){let t=Em(this.array[e*this.itemSize+2]);return this.normalized&&(t=ar(t,this.array)),t}setZ(e,t){return this.normalized&&(t=cn(t,this.array)),this.array[e*this.itemSize+2]=br(t),this}getW(e){let t=Em(this.array[e*this.itemSize+3]);return this.normalized&&(t=ar(t,this.array)),t}setW(e,t){return this.normalized&&(t=cn(t,this.array)),this.array[e*this.itemSize+3]=br(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=cn(t,this.array),i=cn(i,this.array)),this.array[e+0]=br(t),this.array[e+1]=br(i),this}setXYZ(e,t,i,s){return e*=this.itemSize,this.normalized&&(t=cn(t,this.array),i=cn(i,this.array),s=cn(s,this.array)),this.array[e+0]=br(t),this.array[e+1]=br(i),this.array[e+2]=br(s),this}setXYZW(e,t,i,s,r){return e*=this.itemSize,this.normalized&&(t=cn(t,this.array),i=cn(i,this.array),s=cn(s,this.array),r=cn(r,this.array)),this.array[e+0]=br(t),this.array[e+1]=br(i),this.array[e+2]=br(s),this.array[e+3]=br(r),this}}class kt extends dn{constructor(e,t,i){super(new Float32Array(e),t,i)}}let Dbe=0;const ro=new yt,zx=new rn,Fh=new G,Nr=new Nn,tm=new Nn,fs=new G;class jt extends qa{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Dbe++}),this.uuid=qr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(wz(e)?aw:I2)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const r=new ln().getNormalMatrix(e);i.applyNormalMatrix(r),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ro.makeRotationFromQuaternion(e),this.applyMatrix4(ro),this}rotateX(e){return ro.makeRotationX(e),this.applyMatrix4(ro),this}rotateY(e){return ro.makeRotationY(e),this.applyMatrix4(ro),this}rotateZ(e){return ro.makeRotationZ(e),this.applyMatrix4(ro),this}translate(e,t,i){return ro.makeTranslation(e,t,i),this.applyMatrix4(ro),this}scale(e,t,i){return ro.makeScale(e,t,i),this.applyMatrix4(ro),this}lookAt(e){return zx.lookAt(e),zx.updateMatrix(),this.applyMatrix4(zx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Fh).negate(),this.translate(Fh.x,Fh.y,Fh.z),this}setFromPoints(e){const t=[];for(let i=0,s=e.length;i<s;i++){const r=e[i];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new kt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Nn);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new G(-1/0,-1/0,-1/0),new G(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,s=t.length;i<s;i++){const r=t[i];Nr.setFromBufferAttribute(r),this.morphTargetsRelative?(fs.addVectors(this.boundingBox.min,Nr.min),this.boundingBox.expandByPoint(fs),fs.addVectors(this.boundingBox.max,Nr.max),this.boundingBox.expandByPoint(fs)):(this.boundingBox.expandByPoint(Nr.min),this.boundingBox.expandByPoint(Nr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new bi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new G,1/0);return}if(e){const i=this.boundingSphere.center;if(Nr.setFromBufferAttribute(e),t)for(let r=0,o=t.length;r<o;r++){const a=t[r];tm.setFromBufferAttribute(a),this.morphTargetsRelative?(fs.addVectors(Nr.min,tm.min),Nr.expandByPoint(fs),fs.addVectors(Nr.max,tm.max),Nr.expandByPoint(fs)):(Nr.expandByPoint(tm.min),Nr.expandByPoint(tm.max))}Nr.getCenter(i);let s=0;for(let r=0,o=e.count;r<o;r++)fs.fromBufferAttribute(e,r),s=Math.max(s,i.distanceToSquared(fs));if(t)for(let r=0,o=t.length;r<o;r++){const a=t[r],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)fs.fromBufferAttribute(a,c),l&&(Fh.fromBufferAttribute(e,c),fs.add(Fh)),s=Math.max(s,i.distanceToSquared(fs))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,s=t.normal,r=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new dn(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let T=0;T<i.count;T++)a[T]=new G,l[T]=new G;const c=new G,u=new G,d=new G,h=new tt,f=new tt,m=new tt,p=new G,y=new G;function v(T,M,E){c.fromBufferAttribute(i,T),u.fromBufferAttribute(i,M),d.fromBufferAttribute(i,E),h.fromBufferAttribute(r,T),f.fromBufferAttribute(r,M),m.fromBufferAttribute(r,E),u.sub(c),d.sub(c),f.sub(h),m.sub(h);const A=1/(f.x*m.y-m.x*f.y);isFinite(A)&&(p.copy(u).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(A),y.copy(d).multiplyScalar(f.x).addScaledVector(u,-m.x).multiplyScalar(A),a[T].add(p),a[M].add(p),a[E].add(p),l[T].add(y),l[M].add(y),l[E].add(y))}let _=this.groups;_.length===0&&(_=[{start:0,count:e.count}]);for(let T=0,M=_.length;T<M;++T){const E=_[T],A=E.start,I=E.count;for(let B=A,F=A+I;B<F;B+=3)v(e.getX(B+0),e.getX(B+1),e.getX(B+2))}const b=new G,w=new G,x=new G,S=new G;function C(T){x.fromBufferAttribute(s,T),S.copy(x);const M=a[T];b.copy(M),b.sub(x.multiplyScalar(x.dot(M))).normalize(),w.crossVectors(S,M);const A=w.dot(l[T])<0?-1:1;o.setXYZW(T,b.x,b.y,b.z,A)}for(let T=0,M=_.length;T<M;++T){const E=_[T],A=E.start,I=E.count;for(let B=A,F=A+I;B<F;B+=3)C(e.getX(B+0)),C(e.getX(B+1)),C(e.getX(B+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new dn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let h=0,f=i.count;h<f;h++)i.setXYZ(h,0,0,0);const s=new G,r=new G,o=new G,a=new G,l=new G,c=new G,u=new G,d=new G;if(e)for(let h=0,f=e.count;h<f;h+=3){const m=e.getX(h+0),p=e.getX(h+1),y=e.getX(h+2);s.fromBufferAttribute(t,m),r.fromBufferAttribute(t,p),o.fromBufferAttribute(t,y),u.subVectors(o,r),d.subVectors(s,r),u.cross(d),a.fromBufferAttribute(i,m),l.fromBufferAttribute(i,p),c.fromBufferAttribute(i,y),a.add(u),l.add(u),c.add(u),i.setXYZ(m,a.x,a.y,a.z),i.setXYZ(p,l.x,l.y,l.z),i.setXYZ(y,c.x,c.y,c.z)}else for(let h=0,f=t.count;h<f;h+=3)s.fromBufferAttribute(t,h+0),r.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),u.subVectors(o,r),d.subVectors(s,r),u.cross(d),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)fs.fromBufferAttribute(e,t),fs.normalize(),e.setXYZ(t,fs.x,fs.y,fs.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,h=new c.constructor(l.length*u);let f=0,m=0;for(let p=0,y=l.length;p<y;p++){a.isInterleavedBufferAttribute?f=l[p]*a.data.stride+a.offset:f=l[p]*u;for(let v=0;v<u;v++)h[m++]=c[f++]}return new dn(h,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new jt,i=this.index.array,s=this.attributes;for(const a in s){const l=s[a],c=e(l,i);t.setAttribute(a,c)}const r=this.morphAttributes;for(const a in r){const l=[],c=r[a];for(let u=0,d=c.length;u<d;u++){const h=c[u],f=e(h,i);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const s={};let r=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++){const f=c[d];u.push(f.toJSON(e.data))}u.length>0&&(s[l]=u,r=!0)}r&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const s=e.attributes;for(const c in s){const u=s[c];this.setAttribute(c,u.clone(t))}const r=e.morphAttributes;for(const c in r){const u=[],d=r[c];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const v3=new yt,Au=new fh,X0=new bi,y3=new G,Bh=new G,Uh=new G,zh=new G,Hx=new G,j0=new G,q0=new tt,Z0=new tt,J0=new tt,_3=new G,b3=new G,w3=new G,Q0=new G,ey=new G;class ut extends rn{constructor(e=new jt,t=new $n){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}getVertexPosition(e,t){const i=this.geometry,s=i.attributes.position,r=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(s,e);const a=this.morphTargetInfluences;if(r&&a){j0.set(0,0,0);for(let l=0,c=r.length;l<c;l++){const u=a[l],d=r[l];u!==0&&(Hx.fromBufferAttribute(d,e),o?j0.addScaledVector(Hx,u):j0.addScaledVector(Hx.sub(t),u))}t.add(j0)}return t}raycast(e,t){const i=this.geometry,s=this.material,r=this.matrixWorld;s!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),X0.copy(i.boundingSphere),X0.applyMatrix4(r),Au.copy(e.ray).recast(e.near),!(X0.containsPoint(Au.origin)===!1&&(Au.intersectSphere(X0,y3)===null||Au.origin.distanceToSquared(y3)>(e.far-e.near)**2))&&(v3.copy(r).invert(),Au.copy(e.ray).applyMatrix4(v3),!(i.boundingBox!==null&&Au.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Au)))}_computeIntersections(e,t,i){let s;const r=this.geometry,o=this.material,a=r.index,l=r.attributes.position,c=r.attributes.uv,u=r.attributes.uv1,d=r.attributes.normal,h=r.groups,f=r.drawRange;if(a!==null)if(Array.isArray(o))for(let m=0,p=h.length;m<p;m++){const y=h[m],v=o[y.materialIndex],_=Math.max(y.start,f.start),b=Math.min(a.count,Math.min(y.start+y.count,f.start+f.count));for(let w=_,x=b;w<x;w+=3){const S=a.getX(w),C=a.getX(w+1),T=a.getX(w+2);s=ty(this,v,e,i,c,u,d,S,C,T),s&&(s.faceIndex=Math.floor(w/3),s.face.materialIndex=y.materialIndex,t.push(s))}}else{const m=Math.max(0,f.start),p=Math.min(a.count,f.start+f.count);for(let y=m,v=p;y<v;y+=3){const _=a.getX(y),b=a.getX(y+1),w=a.getX(y+2);s=ty(this,o,e,i,c,u,d,_,b,w),s&&(s.faceIndex=Math.floor(y/3),t.push(s))}}else if(l!==void 0)if(Array.isArray(o))for(let m=0,p=h.length;m<p;m++){const y=h[m],v=o[y.materialIndex],_=Math.max(y.start,f.start),b=Math.min(l.count,Math.min(y.start+y.count,f.start+f.count));for(let w=_,x=b;w<x;w+=3){const S=w,C=w+1,T=w+2;s=ty(this,v,e,i,c,u,d,S,C,T),s&&(s.faceIndex=Math.floor(w/3),s.face.materialIndex=y.materialIndex,t.push(s))}}else{const m=Math.max(0,f.start),p=Math.min(l.count,f.start+f.count);for(let y=m,v=p;y<v;y+=3){const _=y,b=y+1,w=y+2;s=ty(this,o,e,i,c,u,d,_,b,w),s&&(s.faceIndex=Math.floor(y/3),t.push(s))}}}}function Nbe(n,e,t,i,s,r,o,a){let l;if(e.side===bs?l=i.intersectTriangle(o,r,s,!0,a):l=i.intersectTriangle(s,r,o,e.side===Fo,a),l===null)return null;ey.copy(a),ey.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(ey);return c<t.near||c>t.far?null:{distance:c,point:ey.clone(),object:n}}function ty(n,e,t,i,s,r,o,a,l,c){n.getVertexPosition(a,Bh),n.getVertexPosition(l,Uh),n.getVertexPosition(c,zh);const u=Nbe(n,e,t,i,Bh,Uh,zh,Q0);if(u){s&&(q0.fromBufferAttribute(s,a),Z0.fromBufferAttribute(s,l),J0.fromBufferAttribute(s,c),u.uv=Vr.getInterpolation(Q0,Bh,Uh,zh,q0,Z0,J0,new tt)),r&&(q0.fromBufferAttribute(r,a),Z0.fromBufferAttribute(r,l),J0.fromBufferAttribute(r,c),u.uv1=Vr.getInterpolation(Q0,Bh,Uh,zh,q0,Z0,J0,new tt)),o&&(_3.fromBufferAttribute(o,a),b3.fromBufferAttribute(o,l),w3.fromBufferAttribute(o,c),u.normal=Vr.getInterpolation(Q0,Bh,Uh,zh,_3,b3,w3,new G),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const d={a,b:l,c,normal:new G,materialIndex:0};Vr.getNormal(Bh,Uh,zh,d.normal),u.face=d}return u}class Ci extends jt{constructor(e=1,t=1,i=1,s=1,r=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:s,heightSegments:r,depthSegments:o};const a=this;s=Math.floor(s),r=Math.floor(r),o=Math.floor(o);const l=[],c=[],u=[],d=[];let h=0,f=0;m("z","y","x",-1,-1,i,t,e,o,r,0),m("z","y","x",1,-1,i,t,-e,o,r,1),m("x","z","y",1,1,e,i,t,s,o,2),m("x","z","y",1,-1,e,i,-t,s,o,3),m("x","y","z",1,-1,e,t,i,s,r,4),m("x","y","z",-1,-1,e,t,-i,s,r,5),this.setIndex(l),this.setAttribute("position",new kt(c,3)),this.setAttribute("normal",new kt(u,3)),this.setAttribute("uv",new kt(d,2));function m(p,y,v,_,b,w,x,S,C,T,M){const E=w/C,A=x/T,I=w/2,B=x/2,F=S/2,U=C+1,P=T+1;let O=0,D=0;const L=new G;for(let H=0;H<P;H++){const X=H*A-B;for(let ne=0;ne<U;ne++){const ce=ne*E-I;L[p]=ce*_,L[y]=X*b,L[v]=F,c.push(L.x,L.y,L.z),L[p]=0,L[y]=0,L[v]=S>0?1:-1,u.push(L.x,L.y,L.z),d.push(ne/C),d.push(1-H/T),O+=1}}for(let H=0;H<T;H++)for(let X=0;X<C;X++){const ne=h+X+U*H,ce=h+X+U*(H+1),ae=h+(X+1)+U*(H+1),_e=h+(X+1)+U*H;l.push(ne,ce,_e),l.push(ce,ae,_e),D+=6}a.addGroup(f,D,M),f+=D,h+=O}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ci(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function gp(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const s=n[t][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=s.clone():Array.isArray(s)?e[t][i]=s.slice():e[t][i]=s}}return e}function rr(n){const e={};for(let t=0;t<n.length;t++){const i=gp(n[t]);for(const s in i)e[s]=i[s]}return e}function Fbe(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function Tz(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Cn.workingColorSpace}const eh={clone:gp,merge:rr};var Bbe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Ube=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Bi extends zi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Bbe,this.fragmentShader=Ube,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=gp(e.uniforms),this.uniformsGroups=Fbe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const o=this.uniforms[s].value;o&&o.isTexture?t.uniforms[s]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[s]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[s]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[s]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[s]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[s]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[s]={type:"m4",value:o.toArray()}:t.uniforms[s]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const s in this.extensions)this.extensions[s]===!0&&(i[s]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class lw extends rn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new yt,this.projectionMatrix=new yt,this.projectionMatrixInverse=new yt,this.coordinateSystem=Ra}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const uc=new G,x3=new tt,S3=new tt;class Yi extends lw{constructor(e=50,t=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=mp*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Rd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return mp*2*Math.atan(Math.tan(Rd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){uc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(uc.x,uc.y).multiplyScalar(-e/uc.z),uc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(uc.x,uc.y).multiplyScalar(-e/uc.z)}getViewSize(e,t){return this.getViewBounds(e,x3,S3),t.subVectors(S3,x3)}setViewOffset(e,t,i,s,r,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Rd*.5*this.fov)/this.zoom,i=2*t,s=this.aspect*i,r=-.5*s;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;r+=o.offsetX*s/l,t-=o.offsetY*i/c,s*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(r+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Hh=-90,Vh=1;class Az extends rn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new Yi(Hh,Vh,e,t);s.layers=this.layers,this.add(s);const r=new Yi(Hh,Vh,e,t);r.layers=this.layers,this.add(r);const o=new Yi(Hh,Vh,e,t);o.layers=this.layers,this.add(o);const a=new Yi(Hh,Vh,e,t);a.layers=this.layers,this.add(a);const l=new Yi(Hh,Vh,e,t);l.layers=this.layers,this.add(l);const c=new Yi(Hh,Vh,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,s,r,o,a,l]=t;for(const c of t)this.remove(c);if(e===Ra)i.up.set(0,1,0),i.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===av)i.up.set(0,-1,0),i.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,o,a,l,c,u]=this.children,d=e.getRenderTarget(),h=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),m=e.xr.enabled;e.xr.enabled=!1;const p=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,s),e.render(t,r),e.setRenderTarget(i,1,s),e.render(t,o),e.setRenderTarget(i,2,s),e.render(t,a),e.setRenderTarget(i,3,s),e.render(t,l),e.setRenderTarget(i,4,s),e.render(t,c),i.texture.generateMipmaps=p,e.setRenderTarget(i,5,s),e.render(t,u),e.setRenderTarget(d,h,f),e.xr.enabled=m,i.texture.needsPMREMUpdate=!0}}class Qv extends Wn{constructor(e,t,i,s,r,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:Ol,super(e,t,i,s,r,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Iz extends Ti{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},s=[i,i,i,i,i,i];this.texture=new Qv(s,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Rn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new Ci(5,5,5),r=new Bi({name:"CubemapFromEquirect",uniforms:gp(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:bs,blending:Ro});r.uniforms.tEquirect.value=t;const o=new ut(s,r),a=t.minFilter;return t.minFilter===Cr&&(t.minFilter=Rn),new Az(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,s){const r=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,s);e.setRenderTarget(r)}}const Vx=new G,zbe=new G,Hbe=new ln;class or{constructor(e=new G(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,s){return this.normal.set(e,t,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const s=Vx.subVectors(i,t).cross(zbe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(Vx),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:t.copy(e.start).addScaledVector(i,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Hbe.getNormalMatrix(e),s=this.coplanarPoint(Vx).applyMatrix4(e),r=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Iu=new bi,ny=new G;class ph{constructor(e=new or,t=new or,i=new or,s=new or,r=new or,o=new or){this.planes=[e,t,i,s,r,o]}set(e,t,i,s,r,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(s),a[4].copy(r),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Ra){const i=this.planes,s=e.elements,r=s[0],o=s[1],a=s[2],l=s[3],c=s[4],u=s[5],d=s[6],h=s[7],f=s[8],m=s[9],p=s[10],y=s[11],v=s[12],_=s[13],b=s[14],w=s[15];if(i[0].setComponents(l-r,h-c,y-f,w-v).normalize(),i[1].setComponents(l+r,h+c,y+f,w+v).normalize(),i[2].setComponents(l+o,h+u,y+m,w+_).normalize(),i[3].setComponents(l-o,h-u,y-m,w-_).normalize(),i[4].setComponents(l-a,h-d,y-p,w-b).normalize(),t===Ra)i[5].setComponents(l+a,h+d,y+p,w+b).normalize();else if(t===av)i[5].setComponents(a,d,p,b).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Iu.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Iu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Iu)}intersectsSprite(e){return Iu.center.set(0,0,0),Iu.radius=.7071067811865476,Iu.applyMatrix4(e.matrixWorld),this.intersectsSphere(Iu)}intersectsSphere(e){const t=this.planes,i=e.center,s=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const s=t[i];if(ny.x=s.normal.x>0?e.max.x:e.min.x,ny.y=s.normal.y>0?e.max.y:e.min.y,ny.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(ny)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Rz(){let n=null,e=!1,t=null,i=null;function s(r,o){t(r,o),i=n.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(s),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(r){t=r},setContext:function(r){n=r}}}function Vbe(n){const e=new WeakMap;function t(a,l){const c=a.array,u=a.usage,d=c.byteLength,h=n.createBuffer();n.bindBuffer(l,h),n.bufferData(l,c,u),a.onUploadCallback();let f;if(c instanceof Float32Array)f=n.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?f=n.HALF_FLOAT:f=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)f=n.SHORT;else if(c instanceof Uint32Array)f=n.UNSIGNED_INT;else if(c instanceof Int32Array)f=n.INT;else if(c instanceof Int8Array)f=n.BYTE;else if(c instanceof Uint8Array)f=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)f=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:h,type:f,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:d}}function i(a,l,c){const u=l.array,d=l._updateRange,h=l.updateRanges;if(n.bindBuffer(c,a),d.count===-1&&h.length===0&&n.bufferSubData(c,0,u),h.length!==0){for(let f=0,m=h.length;f<m;f++){const p=h[f];n.bufferSubData(c,p.start*u.BYTES_PER_ELEMENT,u,p.start,p.count)}l.clearUpdateRanges()}d.count!==-1&&(n.bufferSubData(c,d.offset*u.BYTES_PER_ELEMENT,u,d.offset,d.count),d.count=-1),l.onUploadCallback()}function s(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function r(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,a,l),c.version=a.version}}return{get:s,remove:r,update:o}}class ua extends jt{constructor(e=1,t=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:s};const r=e/2,o=t/2,a=Math.floor(i),l=Math.floor(s),c=a+1,u=l+1,d=e/a,h=t/l,f=[],m=[],p=[],y=[];for(let v=0;v<u;v++){const _=v*h-o;for(let b=0;b<c;b++){const w=b*d-r;m.push(w,-_,0),p.push(0,0,1),y.push(b/a),y.push(1-v/l)}}for(let v=0;v<l;v++)for(let _=0;_<a;_++){const b=_+c*v,w=_+c*(v+1),x=_+1+c*(v+1),S=_+1+c*v;f.push(b,w,S),f.push(w,x,S)}this.setIndex(f),this.setAttribute("position",new kt(m,3)),this.setAttribute("normal",new kt(p,3)),this.setAttribute("uv",new kt(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ua(e.width,e.height,e.widthSegments,e.heightSegments)}}var $be=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Gbe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Wbe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Kbe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Ybe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Xbe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,jbe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,qbe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Zbe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Jbe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Qbe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,e1e=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,t1e=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,n1e=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,i1e=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,s1e=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,r1e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,o1e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,a1e=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,l1e=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,c1e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,u1e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,d1e=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,h1e=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,f1e=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,p1e=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,m1e=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,g1e=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,v1e=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,y1e=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,_1e="gl_FragColor = linearToOutputTexel( gl_FragColor );",b1e=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,w1e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,x1e=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,S1e=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,C1e=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,M1e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,E1e=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,T1e=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,A1e=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,I1e=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,R1e=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,P1e=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,L1e=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,k1e=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,O1e=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,D1e=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,N1e=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,F1e=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,B1e=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,U1e=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,z1e=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,H1e=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,V1e=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,$1e=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,G1e=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,W1e=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,K1e=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Y1e=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,X1e=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,j1e=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,q1e=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Z1e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,J1e=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Q1e=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,ewe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,twe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,nwe=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,iwe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,swe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,rwe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,owe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,awe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,lwe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,cwe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,uwe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,dwe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,hwe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,fwe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,pwe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,mwe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,gwe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,vwe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,ywe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,_we=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,bwe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,wwe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,xwe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Swe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Cwe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Mwe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Ewe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Twe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Awe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Iwe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Rwe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Pwe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Lwe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,kwe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Owe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Dwe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Nwe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Fwe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Bwe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Uwe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,zwe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Hwe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Vwe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,$we=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Gwe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Wwe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Kwe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Ywe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Xwe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,jwe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,qwe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Zwe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Jwe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Qwe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,exe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,txe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,nxe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,ixe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sxe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,rxe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,oxe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,axe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lxe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,cxe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,uxe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,dxe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hxe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fxe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pxe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mxe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gxe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,vxe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,yxe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_xe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,bxe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,wxe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,on={alphahash_fragment:$be,alphahash_pars_fragment:Gbe,alphamap_fragment:Wbe,alphamap_pars_fragment:Kbe,alphatest_fragment:Ybe,alphatest_pars_fragment:Xbe,aomap_fragment:jbe,aomap_pars_fragment:qbe,batching_pars_vertex:Zbe,batching_vertex:Jbe,begin_vertex:Qbe,beginnormal_vertex:e1e,bsdfs:t1e,iridescence_fragment:n1e,bumpmap_pars_fragment:i1e,clipping_planes_fragment:s1e,clipping_planes_pars_fragment:r1e,clipping_planes_pars_vertex:o1e,clipping_planes_vertex:a1e,color_fragment:l1e,color_pars_fragment:c1e,color_pars_vertex:u1e,color_vertex:d1e,common:h1e,cube_uv_reflection_fragment:f1e,defaultnormal_vertex:p1e,displacementmap_pars_vertex:m1e,displacementmap_vertex:g1e,emissivemap_fragment:v1e,emissivemap_pars_fragment:y1e,colorspace_fragment:_1e,colorspace_pars_fragment:b1e,envmap_fragment:w1e,envmap_common_pars_fragment:x1e,envmap_pars_fragment:S1e,envmap_pars_vertex:C1e,envmap_physical_pars_fragment:D1e,envmap_vertex:M1e,fog_vertex:E1e,fog_pars_vertex:T1e,fog_fragment:A1e,fog_pars_fragment:I1e,gradientmap_pars_fragment:R1e,lightmap_pars_fragment:P1e,lights_lambert_fragment:L1e,lights_lambert_pars_fragment:k1e,lights_pars_begin:O1e,lights_toon_fragment:N1e,lights_toon_pars_fragment:F1e,lights_phong_fragment:B1e,lights_phong_pars_fragment:U1e,lights_physical_fragment:z1e,lights_physical_pars_fragment:H1e,lights_fragment_begin:V1e,lights_fragment_maps:$1e,lights_fragment_end:G1e,logdepthbuf_fragment:W1e,logdepthbuf_pars_fragment:K1e,logdepthbuf_pars_vertex:Y1e,logdepthbuf_vertex:X1e,map_fragment:j1e,map_pars_fragment:q1e,map_particle_fragment:Z1e,map_particle_pars_fragment:J1e,metalnessmap_fragment:Q1e,metalnessmap_pars_fragment:ewe,morphinstance_vertex:twe,morphcolor_vertex:nwe,morphnormal_vertex:iwe,morphtarget_pars_vertex:swe,morphtarget_vertex:rwe,normal_fragment_begin:owe,normal_fragment_maps:awe,normal_pars_fragment:lwe,normal_pars_vertex:cwe,normal_vertex:uwe,normalmap_pars_fragment:dwe,clearcoat_normal_fragment_begin:hwe,clearcoat_normal_fragment_maps:fwe,clearcoat_pars_fragment:pwe,iridescence_pars_fragment:mwe,opaque_fragment:gwe,packing:vwe,premultiplied_alpha_fragment:ywe,project_vertex:_we,dithering_fragment:bwe,dithering_pars_fragment:wwe,roughnessmap_fragment:xwe,roughnessmap_pars_fragment:Swe,shadowmap_pars_fragment:Cwe,shadowmap_pars_vertex:Mwe,shadowmap_vertex:Ewe,shadowmask_pars_fragment:Twe,skinbase_vertex:Awe,skinning_pars_vertex:Iwe,skinning_vertex:Rwe,skinnormal_vertex:Pwe,specularmap_fragment:Lwe,specularmap_pars_fragment:kwe,tonemapping_fragment:Owe,tonemapping_pars_fragment:Dwe,transmission_fragment:Nwe,transmission_pars_fragment:Fwe,uv_pars_fragment:Bwe,uv_pars_vertex:Uwe,uv_vertex:zwe,worldpos_vertex:Hwe,background_vert:Vwe,background_frag:$we,backgroundCube_vert:Gwe,backgroundCube_frag:Wwe,cube_vert:Kwe,cube_frag:Ywe,depth_vert:Xwe,depth_frag:jwe,distanceRGBA_vert:qwe,distanceRGBA_frag:Zwe,equirect_vert:Jwe,equirect_frag:Qwe,linedashed_vert:exe,linedashed_frag:txe,meshbasic_vert:nxe,meshbasic_frag:ixe,meshlambert_vert:sxe,meshlambert_frag:rxe,meshmatcap_vert:oxe,meshmatcap_frag:axe,meshnormal_vert:lxe,meshnormal_frag:cxe,meshphong_vert:uxe,meshphong_frag:dxe,meshphysical_vert:hxe,meshphysical_frag:fxe,meshtoon_vert:pxe,meshtoon_frag:mxe,points_vert:gxe,points_frag:vxe,shadow_vert:yxe,shadow_frag:_xe,sprite_vert:bxe,sprite_frag:wxe},Dt={common:{diffuse:{value:new gt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ln},alphaMap:{value:null},alphaMapTransform:{value:new ln},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ln}},envmap:{envMap:{value:null},envMapRotation:{value:new ln},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ln}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ln}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ln},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ln},normalScale:{value:new tt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ln},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ln}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ln}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ln}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new gt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new gt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new ln},alphaTest:{value:0},uvTransform:{value:new ln}},sprite:{diffuse:{value:new gt(16777215)},opacity:{value:1},center:{value:new tt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ln},alphaMap:{value:null},alphaMapTransform:{value:new ln},alphaTest:{value:0}}},Zo={basic:{uniforms:rr([Dt.common,Dt.specularmap,Dt.envmap,Dt.aomap,Dt.lightmap,Dt.fog]),vertexShader:on.meshbasic_vert,fragmentShader:on.meshbasic_frag},lambert:{uniforms:rr([Dt.common,Dt.specularmap,Dt.envmap,Dt.aomap,Dt.lightmap,Dt.emissivemap,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,Dt.fog,Dt.lights,{emissive:{value:new gt(0)}}]),vertexShader:on.meshlambert_vert,fragmentShader:on.meshlambert_frag},phong:{uniforms:rr([Dt.common,Dt.specularmap,Dt.envmap,Dt.aomap,Dt.lightmap,Dt.emissivemap,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,Dt.fog,Dt.lights,{emissive:{value:new gt(0)},specular:{value:new gt(1118481)},shininess:{value:30}}]),vertexShader:on.meshphong_vert,fragmentShader:on.meshphong_frag},standard:{uniforms:rr([Dt.common,Dt.envmap,Dt.aomap,Dt.lightmap,Dt.emissivemap,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,Dt.roughnessmap,Dt.metalnessmap,Dt.fog,Dt.lights,{emissive:{value:new gt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:on.meshphysical_vert,fragmentShader:on.meshphysical_frag},toon:{uniforms:rr([Dt.common,Dt.aomap,Dt.lightmap,Dt.emissivemap,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,Dt.gradientmap,Dt.fog,Dt.lights,{emissive:{value:new gt(0)}}]),vertexShader:on.meshtoon_vert,fragmentShader:on.meshtoon_frag},matcap:{uniforms:rr([Dt.common,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,Dt.fog,{matcap:{value:null}}]),vertexShader:on.meshmatcap_vert,fragmentShader:on.meshmatcap_frag},points:{uniforms:rr([Dt.points,Dt.fog]),vertexShader:on.points_vert,fragmentShader:on.points_frag},dashed:{uniforms:rr([Dt.common,Dt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:on.linedashed_vert,fragmentShader:on.linedashed_frag},depth:{uniforms:rr([Dt.common,Dt.displacementmap]),vertexShader:on.depth_vert,fragmentShader:on.depth_frag},normal:{uniforms:rr([Dt.common,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,{opacity:{value:1}}]),vertexShader:on.meshnormal_vert,fragmentShader:on.meshnormal_frag},sprite:{uniforms:rr([Dt.sprite,Dt.fog]),vertexShader:on.sprite_vert,fragmentShader:on.sprite_frag},background:{uniforms:{uvTransform:{value:new ln},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:on.background_vert,fragmentShader:on.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new ln}},vertexShader:on.backgroundCube_vert,fragmentShader:on.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:on.cube_vert,fragmentShader:on.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:on.equirect_vert,fragmentShader:on.equirect_frag},distanceRGBA:{uniforms:rr([Dt.common,Dt.displacementmap,{referencePosition:{value:new G},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:on.distanceRGBA_vert,fragmentShader:on.distanceRGBA_frag},shadow:{uniforms:rr([Dt.lights,Dt.fog,{color:{value:new gt(0)},opacity:{value:1}}]),vertexShader:on.shadow_vert,fragmentShader:on.shadow_frag}};Zo.physical={uniforms:rr([Zo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ln},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ln},clearcoatNormalScale:{value:new tt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ln},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ln},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ln},sheen:{value:0},sheenColor:{value:new gt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ln},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ln},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ln},transmissionSamplerSize:{value:new tt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ln},attenuationDistance:{value:0},attenuationColor:{value:new gt(0)},specularColor:{value:new gt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ln},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ln},anisotropyVector:{value:new tt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new ln}}]),vertexShader:on.meshphysical_vert,fragmentShader:on.meshphysical_frag};const iy={r:0,b:0,g:0},Ru=new Js,xxe=new yt;function Sxe(n,e,t,i,s,r,o){const a=new gt(0);let l=r===!0?0:1,c,u,d=null,h=0,f=null;function m(_){let b=_.isScene===!0?_.background:null;return b&&b.isTexture&&(b=(_.backgroundBlurriness>0?t:e).get(b)),b}function p(_){let b=!1;const w=m(_);w===null?v(a,l):w&&w.isColor&&(v(w,1),b=!0);const x=n.xr.getEnvironmentBlendMode();x==="additive"?i.buffers.color.setClear(0,0,0,1,o):x==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||b)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function y(_,b){const w=m(b);w&&(w.isCubeTexture||w.mapping===Dp)?(u===void 0&&(u=new ut(new Ci(1,1,1),new Bi({name:"BackgroundCubeMaterial",uniforms:gp(Zo.backgroundCube.uniforms),vertexShader:Zo.backgroundCube.vertexShader,fragmentShader:Zo.backgroundCube.fragmentShader,side:bs,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(x,S,C){this.matrixWorld.copyPosition(C.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(u)),Ru.copy(b.backgroundRotation),Ru.x*=-1,Ru.y*=-1,Ru.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(Ru.y*=-1,Ru.z*=-1),u.material.uniforms.envMap.value=w,u.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=b.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(xxe.makeRotationFromEuler(Ru)),u.material.toneMapped=Cn.getTransfer(w.colorSpace)!==ui,(d!==w||h!==w.version||f!==n.toneMapping)&&(u.material.needsUpdate=!0,d=w,h=w.version,f=n.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null)):w&&w.isTexture&&(c===void 0&&(c=new ut(new ua(2,2),new Bi({name:"BackgroundMaterial",uniforms:gp(Zo.background.uniforms),vertexShader:Zo.background.vertexShader,fragmentShader:Zo.background.fragmentShader,side:Fo,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(c)),c.material.uniforms.t2D.value=w,c.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,c.material.toneMapped=Cn.getTransfer(w.colorSpace)!==ui,w.matrixAutoUpdate===!0&&w.updateMatrix(),c.material.uniforms.uvTransform.value.copy(w.matrix),(d!==w||h!==w.version||f!==n.toneMapping)&&(c.material.needsUpdate=!0,d=w,h=w.version,f=n.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null))}function v(_,b){_.getRGB(iy,Tz(n)),i.buffers.color.setClear(iy.r,iy.g,iy.b,b,o)}return{getClearColor:function(){return a},setClearColor:function(_,b=1){a.set(_),l=b,v(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,v(a,l)},render:p,addToRenderList:y}}function Cxe(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},s=h(null);let r=s,o=!1;function a(E,A,I,B,F){let U=!1;const P=d(B,I,A);r!==P&&(r=P,c(r.object)),U=f(E,B,I,F),U&&m(E,B,I,F),F!==null&&e.update(F,n.ELEMENT_ARRAY_BUFFER),(U||o)&&(o=!1,w(E,A,I,B),F!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(F).buffer))}function l(){return n.createVertexArray()}function c(E){return n.bindVertexArray(E)}function u(E){return n.deleteVertexArray(E)}function d(E,A,I){const B=I.wireframe===!0;let F=i[E.id];F===void 0&&(F={},i[E.id]=F);let U=F[A.id];U===void 0&&(U={},F[A.id]=U);let P=U[B];return P===void 0&&(P=h(l()),U[B]=P),P}function h(E){const A=[],I=[],B=[];for(let F=0;F<t;F++)A[F]=0,I[F]=0,B[F]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:A,enabledAttributes:I,attributeDivisors:B,object:E,attributes:{},index:null}}function f(E,A,I,B){const F=r.attributes,U=A.attributes;let P=0;const O=I.getAttributes();for(const D in O)if(O[D].location>=0){const H=F[D];let X=U[D];if(X===void 0&&(D==="instanceMatrix"&&E.instanceMatrix&&(X=E.instanceMatrix),D==="instanceColor"&&E.instanceColor&&(X=E.instanceColor)),H===void 0||H.attribute!==X||X&&H.data!==X.data)return!0;P++}return r.attributesNum!==P||r.index!==B}function m(E,A,I,B){const F={},U=A.attributes;let P=0;const O=I.getAttributes();for(const D in O)if(O[D].location>=0){let H=U[D];H===void 0&&(D==="instanceMatrix"&&E.instanceMatrix&&(H=E.instanceMatrix),D==="instanceColor"&&E.instanceColor&&(H=E.instanceColor));const X={};X.attribute=H,H&&H.data&&(X.data=H.data),F[D]=X,P++}r.attributes=F,r.attributesNum=P,r.index=B}function p(){const E=r.newAttributes;for(let A=0,I=E.length;A<I;A++)E[A]=0}function y(E){v(E,0)}function v(E,A){const I=r.newAttributes,B=r.enabledAttributes,F=r.attributeDivisors;I[E]=1,B[E]===0&&(n.enableVertexAttribArray(E),B[E]=1),F[E]!==A&&(n.vertexAttribDivisor(E,A),F[E]=A)}function _(){const E=r.newAttributes,A=r.enabledAttributes;for(let I=0,B=A.length;I<B;I++)A[I]!==E[I]&&(n.disableVertexAttribArray(I),A[I]=0)}function b(E,A,I,B,F,U,P){P===!0?n.vertexAttribIPointer(E,A,I,F,U):n.vertexAttribPointer(E,A,I,B,F,U)}function w(E,A,I,B){p();const F=B.attributes,U=I.getAttributes(),P=A.defaultAttributeValues;for(const O in U){const D=U[O];if(D.location>=0){let L=F[O];if(L===void 0&&(O==="instanceMatrix"&&E.instanceMatrix&&(L=E.instanceMatrix),O==="instanceColor"&&E.instanceColor&&(L=E.instanceColor)),L!==void 0){const H=L.normalized,X=L.itemSize,ne=e.get(L);if(ne===void 0)continue;const ce=ne.buffer,ae=ne.type,_e=ne.bytesPerElement,re=ae===n.INT||ae===n.UNSIGNED_INT||L.gpuType===q1;if(L.isInterleavedBufferAttribute){const xe=L.data,he=xe.stride,Te=L.offset;if(xe.isInstancedInterleavedBuffer){for(let Ce=0;Ce<D.locationSize;Ce++)v(D.location+Ce,xe.meshPerAttribute);E.isInstancedMesh!==!0&&B._maxInstanceCount===void 0&&(B._maxInstanceCount=xe.meshPerAttribute*xe.count)}else for(let Ce=0;Ce<D.locationSize;Ce++)y(D.location+Ce);n.bindBuffer(n.ARRAY_BUFFER,ce);for(let Ce=0;Ce<D.locationSize;Ce++)b(D.location+Ce,X/D.locationSize,ae,H,he*_e,(Te+X/D.locationSize*Ce)*_e,re)}else{if(L.isInstancedBufferAttribute){for(let xe=0;xe<D.locationSize;xe++)v(D.location+xe,L.meshPerAttribute);E.isInstancedMesh!==!0&&B._maxInstanceCount===void 0&&(B._maxInstanceCount=L.meshPerAttribute*L.count)}else for(let xe=0;xe<D.locationSize;xe++)y(D.location+xe);n.bindBuffer(n.ARRAY_BUFFER,ce);for(let xe=0;xe<D.locationSize;xe++)b(D.location+xe,X/D.locationSize,ae,H,X*_e,X/D.locationSize*xe*_e,re)}}else if(P!==void 0){const H=P[O];if(H!==void 0)switch(H.length){case 2:n.vertexAttrib2fv(D.location,H);break;case 3:n.vertexAttrib3fv(D.location,H);break;case 4:n.vertexAttrib4fv(D.location,H);break;default:n.vertexAttrib1fv(D.location,H)}}}}_()}function x(){T();for(const E in i){const A=i[E];for(const I in A){const B=A[I];for(const F in B)u(B[F].object),delete B[F];delete A[I]}delete i[E]}}function S(E){if(i[E.id]===void 0)return;const A=i[E.id];for(const I in A){const B=A[I];for(const F in B)u(B[F].object),delete B[F];delete A[I]}delete i[E.id]}function C(E){for(const A in i){const I=i[A];if(I[E.id]===void 0)continue;const B=I[E.id];for(const F in B)u(B[F].object),delete B[F];delete I[E.id]}}function T(){M(),o=!0,r!==s&&(r=s,c(r.object))}function M(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:a,reset:T,resetDefaultState:M,dispose:x,releaseStatesOfGeometry:S,releaseStatesOfProgram:C,initAttributes:p,enableAttribute:y,disableUnusedAttributes:_}}function Mxe(n,e,t){let i;function s(c){i=c}function r(c,u){n.drawArrays(i,c,u),t.update(u,i,1)}function o(c,u,d){d!==0&&(n.drawArraysInstanced(i,c,u,d),t.update(u,i,d))}function a(c,u,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,u,0,d);let f=0;for(let m=0;m<d;m++)f+=u[m];t.update(f,i,1)}function l(c,u,d,h){if(d===0)return;const f=e.get("WEBGL_multi_draw");if(f===null)for(let m=0;m<c.length;m++)o(c[m],u[m],h[m]);else{f.multiDrawArraysInstancedWEBGL(i,c,0,u,0,h,0,d);let m=0;for(let p=0;p<d;p++)m+=u[p];for(let p=0;p<h.length;p++)t.update(m,i,h[p])}}this.setMode=s,this.render=r,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function Exe(n,e,t,i){let s;function r(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const S=e.get("EXT_texture_filter_anisotropic");s=n.getParameter(S.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function o(S){return!(S!==Oi&&i.convert(S)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(S){const C=S===Ki&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(S!==Wa&&i.convert(S)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&S!==is&&!C)}function l(S){if(S==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";S="mediump"}return S==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const d=t.logarithmicDepthBuffer===!0,h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),f=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),p=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),y=n.getParameter(n.MAX_VERTEX_ATTRIBS),v=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),_=n.getParameter(n.MAX_VARYING_VECTORS),b=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),w=f>0,x=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:d,maxTextures:h,maxVertexTextures:f,maxTextureSize:m,maxCubemapSize:p,maxAttributes:y,maxVertexUniforms:v,maxVaryings:_,maxFragmentUniforms:b,vertexTextures:w,maxSamples:x}}function Txe(n){const e=this;let t=null,i=0,s=!1,r=!1;const o=new or,a=new ln,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){const f=d.length!==0||h||i!==0||s;return s=h,i=d.length,f},this.beginShadows=function(){r=!0,u(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(d,h){t=u(d,h,0)},this.setState=function(d,h,f){const m=d.clippingPlanes,p=d.clipIntersection,y=d.clipShadows,v=n.get(d);if(!s||m===null||m.length===0||r&&!y)r?u(null):c();else{const _=r?0:i,b=_*4;let w=v.clippingState||null;l.value=w,w=u(m,h,b,f);for(let x=0;x!==b;++x)w[x]=t[x];v.clippingState=w,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=_}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(d,h,f,m){const p=d!==null?d.length:0;let y=null;if(p!==0){if(y=l.value,m!==!0||y===null){const v=f+p*4,_=h.matrixWorldInverse;a.getNormalMatrix(_),(y===null||y.length<v)&&(y=new Float32Array(v));for(let b=0,w=f;b!==p;++b,w+=4)o.copy(d[b]).applyMatrix4(_,a),o.normal.toArray(y,w),y[w+3]=o.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=p,e.numIntersection=0,y}}function Axe(n){let e=new WeakMap;function t(o,a){return a===Qg?o.mapping=Ol:a===ev&&(o.mapping=au),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===Qg||a===ev)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new Iz(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",s),t(c.texture,o.mapping)}else return null}}return o}function s(o){const a=o.target;a.removeEventListener("dispose",s);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function r(){e=new WeakMap}return{get:i,dispose:r}}class eo extends lw{constructor(e=-1,t=1,i=1,s=-1,r=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=s,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,s,r,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=i-e,o=i+e,a=s+t,l=s-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=c*this.view.offsetX,o=r+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(r,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const yf=4,C3=[.125,.215,.35,.446,.526,.582],td=20,$x=new eo,M3=new gt;let Gx=null,Wx=0,Kx=0,Yx=!1;const Yu=(1+Math.sqrt(5))/2,$h=1/Yu,E3=[new G(-Yu,$h,0),new G(Yu,$h,0),new G(-$h,0,Yu),new G($h,0,Yu),new G(0,Yu,-$h),new G(0,Yu,$h),new G(-1,1,-1),new G(1,1,-1),new G(-1,1,1),new G(1,1,1)];class cv{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,s=100){Gx=this._renderer.getRenderTarget(),Wx=this._renderer.getActiveCubeFace(),Kx=this._renderer.getActiveMipmapLevel(),Yx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,i,s,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=I3(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=A3(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Gx,Wx,Kx),this._renderer.xr.enabled=Yx,e.scissorTest=!1,sy(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ol||e.mapping===au?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Gx=this._renderer.getRenderTarget(),Wx=this._renderer.getActiveCubeFace(),Kx=this._renderer.getActiveMipmapLevel(),Yx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Rn,minFilter:Rn,generateMipmaps:!1,type:Ki,format:Oi,colorSpace:qn,depthBuffer:!1},s=T3(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=T3(e,t,i);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Ixe(r)),this._blurMaterial=Rxe(r,e,t)}return s}_compileMaterial(e){const t=new ut(this._lodPlanes[0],e);this._renderer.compile(t,$x)}_sceneToCubeUV(e,t,i,s){const a=new Yi(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.toneMapping;u.getClearColor(M3),u.toneMapping=Al,u.autoClear=!1;const f=new $n({name:"PMREM.Background",side:bs,depthWrite:!1,depthTest:!1}),m=new ut(new Ci,f);let p=!1;const y=e.background;y?y.isColor&&(f.color.copy(y),e.background=null,p=!0):(f.color.copy(M3),p=!0);for(let v=0;v<6;v++){const _=v%3;_===0?(a.up.set(0,l[v],0),a.lookAt(c[v],0,0)):_===1?(a.up.set(0,0,l[v]),a.lookAt(0,c[v],0)):(a.up.set(0,l[v],0),a.lookAt(0,0,c[v]));const b=this._cubeSize;sy(s,_*b,v>2?b:0,b,b),u.setRenderTarget(s),p&&u.render(m,a),u.render(e,a)}m.geometry.dispose(),m.material.dispose(),u.toneMapping=h,u.autoClear=d,e.background=y}_textureToCubeUV(e,t){const i=this._renderer,s=e.mapping===Ol||e.mapping===au;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=I3()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=A3());const r=s?this._cubemapMaterial:this._equirectMaterial,o=new ut(this._lodPlanes[0],r),a=r.uniforms;a.envMap.value=e;const l=this._cubeSize;sy(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,$x)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const s=this._lodPlanes.length;for(let r=1;r<s;r++){const o=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),a=E3[(s-r-1)%E3.length];this._blur(e,r-1,r,o,a)}t.autoClear=i}_blur(e,t,i,s,r){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,s,"latitudinal",r),this._halfBlur(o,e,i,i,s,"longitudinal",r)}_halfBlur(e,t,i,s,r,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new ut(this._lodPlanes[s],c),h=c.uniforms,f=this._sizeLods[i]-1,m=isFinite(r)?Math.PI/(2*f):2*Math.PI/(2*td-1),p=r/m,y=isFinite(r)?1+Math.floor(u*p):td;y>td&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${td}`);const v=[];let _=0;for(let C=0;C<td;++C){const T=C/p,M=Math.exp(-T*T/2);v.push(M),C===0?_+=M:C<y&&(_+=2*M)}for(let C=0;C<v.length;C++)v[C]=v[C]/_;h.envMap.value=e.texture,h.samples.value=y,h.weights.value=v,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a);const{_lodMax:b}=this;h.dTheta.value=m,h.mipInt.value=b-i;const w=this._sizeLods[s],x=3*w*(s>b-yf?s-b+yf:0),S=4*(this._cubeSize-w);sy(t,x,S,3*w,2*w),l.setRenderTarget(t),l.render(d,$x)}}function Ixe(n){const e=[],t=[],i=[];let s=n;const r=n-yf+1+C3.length;for(let o=0;o<r;o++){const a=Math.pow(2,s);t.push(a);let l=1/a;o>n-yf?l=C3[o-n+yf-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),u=-c,d=1+c,h=[u,u,d,u,d,d,u,u,d,d,u,d],f=6,m=6,p=3,y=2,v=1,_=new Float32Array(p*m*f),b=new Float32Array(y*m*f),w=new Float32Array(v*m*f);for(let S=0;S<f;S++){const C=S%3*2/3-1,T=S>2?0:-1,M=[C,T,0,C+2/3,T,0,C+2/3,T+1,0,C,T,0,C+2/3,T+1,0,C,T+1,0];_.set(M,p*m*S),b.set(h,y*m*S);const E=[S,S,S,S,S,S];w.set(E,v*m*S)}const x=new jt;x.setAttribute("position",new dn(_,p)),x.setAttribute("uv",new dn(b,y)),x.setAttribute("faceIndex",new dn(w,v)),e.push(x),s>yf&&s--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function T3(n,e,t){const i=new Ti(n,e,t);return i.texture.mapping=Dp,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function sy(n,e,t,i,s){n.viewport.set(e,t,i,s),n.scissor.set(e,t,i,s)}function Rxe(n,e,t){const i=new Float32Array(td),s=new G(0,1,0);return new Bi({name:"SphericalGaussianBlur",defines:{n:td,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:R2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ro,depthTest:!1,depthWrite:!1})}function A3(){return new Bi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:R2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ro,depthTest:!1,depthWrite:!1})}function I3(){return new Bi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:R2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ro,depthTest:!1,depthWrite:!1})}function R2(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Pxe(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===Qg||l===ev,u=l===Ol||l===au;if(c||u){let d=e.get(a);const h=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==h)return t===null&&(t=new cv(n)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{const f=a.image;return c&&f&&f.height>0||u&&f&&s(f)?(t===null&&(t=new cv(n)),d=c?t.fromEquirectangular(a):t.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",r),d.texture):null}}}return a}function s(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function r(a){const l=a.target;l.removeEventListener("dispose",r);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function Lxe(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let s;switch(i){case"WEBGL_depth_texture":s=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=n.getExtension(i)}return e[i]=s,s}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const s=t(i);return s===null&&kf("THREE.WebGLRenderer: "+i+" extension not supported."),s}}}function kxe(n,e,t,i){const s={},r=new WeakMap;function o(d){const h=d.target;h.index!==null&&e.remove(h.index);for(const m in h.attributes)e.remove(h.attributes[m]);for(const m in h.morphAttributes){const p=h.morphAttributes[m];for(let y=0,v=p.length;y<v;y++)e.remove(p[y])}h.removeEventListener("dispose",o),delete s[h.id];const f=r.get(h);f&&(e.remove(f),r.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function a(d,h){return s[h.id]===!0||(h.addEventListener("dispose",o),s[h.id]=!0,t.memory.geometries++),h}function l(d){const h=d.attributes;for(const m in h)e.update(h[m],n.ARRAY_BUFFER);const f=d.morphAttributes;for(const m in f){const p=f[m];for(let y=0,v=p.length;y<v;y++)e.update(p[y],n.ARRAY_BUFFER)}}function c(d){const h=[],f=d.index,m=d.attributes.position;let p=0;if(f!==null){const _=f.array;p=f.version;for(let b=0,w=_.length;b<w;b+=3){const x=_[b+0],S=_[b+1],C=_[b+2];h.push(x,S,S,C,C,x)}}else if(m!==void 0){const _=m.array;p=m.version;for(let b=0,w=_.length/3-1;b<w;b+=3){const x=b+0,S=b+1,C=b+2;h.push(x,S,S,C,C,x)}}else return;const y=new(wz(h)?aw:I2)(h,1);y.version=p;const v=r.get(d);v&&e.remove(v),r.set(d,y)}function u(d){const h=r.get(d);if(h){const f=d.index;f!==null&&h.version<f.version&&c(d)}else c(d);return r.get(d)}return{get:a,update:l,getWireframeAttribute:u}}function Oxe(n,e,t){let i;function s(h){i=h}let r,o;function a(h){r=h.type,o=h.bytesPerElement}function l(h,f){n.drawElements(i,f,r,h*o),t.update(f,i,1)}function c(h,f,m){m!==0&&(n.drawElementsInstanced(i,f,r,h*o,m),t.update(f,i,m))}function u(h,f,m){if(m===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,f,0,r,h,0,m);let y=0;for(let v=0;v<m;v++)y+=f[v];t.update(y,i,1)}function d(h,f,m,p){if(m===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let v=0;v<h.length;v++)c(h[v]/o,f[v],p[v]);else{y.multiDrawElementsInstancedWEBGL(i,f,0,r,h,0,p,0,m);let v=0;for(let _=0;_<m;_++)v+=f[_];for(let _=0;_<p.length;_++)t.update(v,i,p[_])}}this.setMode=s,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function Dxe(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(r,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(r/3);break;case n.LINES:t.lines+=a*(r/2);break;case n.LINE_STRIP:t.lines+=a*(r-1);break;case n.LINE_LOOP:t.lines+=a*r;break;case n.POINTS:t.points+=a*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function s(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:i}}function Nxe(n,e,t){const i=new WeakMap,s=new Ln;function r(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=u!==void 0?u.length:0;let h=i.get(a);if(h===void 0||h.count!==d){let M=function(){C.dispose(),i.delete(a),a.removeEventListener("dispose",M)};h!==void 0&&h.texture.dispose();const f=a.morphAttributes.position!==void 0,m=a.morphAttributes.normal!==void 0,p=a.morphAttributes.color!==void 0,y=a.morphAttributes.position||[],v=a.morphAttributes.normal||[],_=a.morphAttributes.color||[];let b=0;f===!0&&(b=1),m===!0&&(b=2),p===!0&&(b=3);let w=a.attributes.position.count*b,x=1;w>e.maxTextureSize&&(x=Math.ceil(w/e.maxTextureSize),w=e.maxTextureSize);const S=new Float32Array(w*x*4*d),C=new rw(S,w,x,d);C.type=is,C.needsUpdate=!0;const T=b*4;for(let E=0;E<d;E++){const A=y[E],I=v[E],B=_[E],F=w*x*4*E;for(let U=0;U<A.count;U++){const P=U*T;f===!0&&(s.fromBufferAttribute(A,U),S[F+P+0]=s.x,S[F+P+1]=s.y,S[F+P+2]=s.z,S[F+P+3]=0),m===!0&&(s.fromBufferAttribute(I,U),S[F+P+4]=s.x,S[F+P+5]=s.y,S[F+P+6]=s.z,S[F+P+7]=0),p===!0&&(s.fromBufferAttribute(B,U),S[F+P+8]=s.x,S[F+P+9]=s.y,S[F+P+10]=s.z,S[F+P+11]=B.itemSize===4?s.w:1)}}h={count:d,texture:C,size:new tt(w,x)},i.set(a,h),a.addEventListener("dispose",M)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let f=0;for(let p=0;p<c.length;p++)f+=c[p];const m=a.morphTargetsRelative?1:1-f;l.getUniforms().setValue(n,"morphTargetBaseInfluence",m),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",h.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",h.size)}return{update:r}}function Fxe(n,e,t,i){let s=new WeakMap;function r(l){const c=i.render.frame,u=l.geometry,d=e.get(l,u);if(s.get(d)!==c&&(e.update(d),s.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),s.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),s.set(l,c))),l.isSkinnedMesh){const h=l.skeleton;s.get(h)!==c&&(h.update(),s.set(h,c))}return d}function o(){s=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:r,dispose:o}}class P2 extends Wn{constructor(e,t,i,s,r,o,a,l,c,u=Id){if(u!==Id&&u!==Jd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===Id&&(i=Dl),i===void 0&&u===Jd&&(i=Zd),super(null,s,r,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:ii,this.minFilter=l!==void 0?l:ii,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const Pz=new Wn,R3=new P2(1,1),Lz=new rw,kz=new A2,Oz=new Qv,P3=[],L3=[],k3=new Float32Array(16),O3=new Float32Array(9),D3=new Float32Array(4);function Np(n,e,t){const i=n[0];if(i<=0||i>0)return n;const s=e*t;let r=P3[s];if(r===void 0&&(r=new Float32Array(s),P3[s]=r),e!==0){i.toArray(r,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(r,a)}return r}function us(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function ds(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function cw(n,e){let t=L3[e];t===void 0&&(t=new Int32Array(e),L3[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function Bxe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Uxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(us(t,e))return;n.uniform2fv(this.addr,e),ds(t,e)}}function zxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(us(t,e))return;n.uniform3fv(this.addr,e),ds(t,e)}}function Hxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(us(t,e))return;n.uniform4fv(this.addr,e),ds(t,e)}}function Vxe(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(us(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ds(t,e)}else{if(us(t,i))return;D3.set(i),n.uniformMatrix2fv(this.addr,!1,D3),ds(t,i)}}function $xe(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(us(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ds(t,e)}else{if(us(t,i))return;O3.set(i),n.uniformMatrix3fv(this.addr,!1,O3),ds(t,i)}}function Gxe(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(us(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ds(t,e)}else{if(us(t,i))return;k3.set(i),n.uniformMatrix4fv(this.addr,!1,k3),ds(t,i)}}function Wxe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Kxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(us(t,e))return;n.uniform2iv(this.addr,e),ds(t,e)}}function Yxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(us(t,e))return;n.uniform3iv(this.addr,e),ds(t,e)}}function Xxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(us(t,e))return;n.uniform4iv(this.addr,e),ds(t,e)}}function jxe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function qxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(us(t,e))return;n.uniform2uiv(this.addr,e),ds(t,e)}}function Zxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(us(t,e))return;n.uniform3uiv(this.addr,e),ds(t,e)}}function Jxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(us(t,e))return;n.uniform4uiv(this.addr,e),ds(t,e)}}function Qxe(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s);let r;this.type===n.SAMPLER_2D_SHADOW?(R3.compareFunction=E2,r=R3):r=Pz,t.setTexture2D(e||r,s)}function eSe(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture3D(e||kz,s)}function tSe(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTextureCube(e||Oz,s)}function nSe(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture2DArray(e||Lz,s)}function iSe(n){switch(n){case 5126:return Bxe;case 35664:return Uxe;case 35665:return zxe;case 35666:return Hxe;case 35674:return Vxe;case 35675:return $xe;case 35676:return Gxe;case 5124:case 35670:return Wxe;case 35667:case 35671:return Kxe;case 35668:case 35672:return Yxe;case 35669:case 35673:return Xxe;case 5125:return jxe;case 36294:return qxe;case 36295:return Zxe;case 36296:return Jxe;case 35678:case 36198:case 36298:case 36306:case 35682:return Qxe;case 35679:case 36299:case 36307:return eSe;case 35680:case 36300:case 36308:case 36293:return tSe;case 36289:case 36303:case 36311:case 36292:return nSe}}function sSe(n,e){n.uniform1fv(this.addr,e)}function rSe(n,e){const t=Np(e,this.size,2);n.uniform2fv(this.addr,t)}function oSe(n,e){const t=Np(e,this.size,3);n.uniform3fv(this.addr,t)}function aSe(n,e){const t=Np(e,this.size,4);n.uniform4fv(this.addr,t)}function lSe(n,e){const t=Np(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function cSe(n,e){const t=Np(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function uSe(n,e){const t=Np(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function dSe(n,e){n.uniform1iv(this.addr,e)}function hSe(n,e){n.uniform2iv(this.addr,e)}function fSe(n,e){n.uniform3iv(this.addr,e)}function pSe(n,e){n.uniform4iv(this.addr,e)}function mSe(n,e){n.uniform1uiv(this.addr,e)}function gSe(n,e){n.uniform2uiv(this.addr,e)}function vSe(n,e){n.uniform3uiv(this.addr,e)}function ySe(n,e){n.uniform4uiv(this.addr,e)}function _Se(n,e,t){const i=this.cache,s=e.length,r=cw(t,s);us(i,r)||(n.uniform1iv(this.addr,r),ds(i,r));for(let o=0;o!==s;++o)t.setTexture2D(e[o]||Pz,r[o])}function bSe(n,e,t){const i=this.cache,s=e.length,r=cw(t,s);us(i,r)||(n.uniform1iv(this.addr,r),ds(i,r));for(let o=0;o!==s;++o)t.setTexture3D(e[o]||kz,r[o])}function wSe(n,e,t){const i=this.cache,s=e.length,r=cw(t,s);us(i,r)||(n.uniform1iv(this.addr,r),ds(i,r));for(let o=0;o!==s;++o)t.setTextureCube(e[o]||Oz,r[o])}function xSe(n,e,t){const i=this.cache,s=e.length,r=cw(t,s);us(i,r)||(n.uniform1iv(this.addr,r),ds(i,r));for(let o=0;o!==s;++o)t.setTexture2DArray(e[o]||Lz,r[o])}function SSe(n){switch(n){case 5126:return sSe;case 35664:return rSe;case 35665:return oSe;case 35666:return aSe;case 35674:return lSe;case 35675:return cSe;case 35676:return uSe;case 5124:case 35670:return dSe;case 35667:case 35671:return hSe;case 35668:case 35672:return fSe;case 35669:case 35673:return pSe;case 5125:return mSe;case 36294:return gSe;case 36295:return vSe;case 36296:return ySe;case 35678:case 36198:case 36298:case 36306:case 35682:return _Se;case 35679:case 36299:case 36307:return bSe;case 35680:case 36300:case 36308:case 36293:return wSe;case 36289:case 36303:case 36311:case 36292:return xSe}}class CSe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=iSe(t.type)}}class MSe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=SSe(t.type)}}class ESe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const s=this.seq;for(let r=0,o=s.length;r!==o;++r){const a=s[r];a.setValue(e,t[a.id],i)}}}const Xx=/(\w+)(\])?(\[|\.)?/g;function N3(n,e){n.seq.push(e),n.map[e.id]=e}function TSe(n,e,t){const i=n.name,s=i.length;for(Xx.lastIndex=0;;){const r=Xx.exec(i),o=Xx.lastIndex;let a=r[1];const l=r[2]==="]",c=r[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===s){N3(t,c===void 0?new CSe(a,n,e):new MSe(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new ESe(a),N3(t,d)),t=d}}}class C_{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<i;++s){const r=e.getActiveUniform(t,s),o=e.getUniformLocation(t,r.name);TSe(r,o,this)}}setValue(e,t,i,s){const r=this.map[t];r!==void 0&&r.setValue(e,i,s)}setOptional(e,t,i){const s=t[i];s!==void 0&&this.setValue(e,i,s)}static upload(e,t,i,s){for(let r=0,o=t.length;r!==o;++r){const a=t[r],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,s)}}static seqWithValue(e,t){const i=[];for(let s=0,r=e.length;s!==r;++s){const o=e[s];o.id in t&&i.push(o)}return i}}function F3(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const ASe=37297;let ISe=0;function RSe(n,e){const t=n.split(`
`),i=[],s=Math.max(e-6,0),r=Math.min(e+6,t.length);for(let o=s;o<r;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function PSe(n){const e=Cn.getPrimaries(Cn.workingColorSpace),t=Cn.getPrimaries(n);let i;switch(e===t?i="":e===rv&&t===sv?i="LinearDisplayP3ToLinearSRGB":e===sv&&t===rv&&(i="LinearSRGBToLinearDisplayP3"),n){case qn:case Jv:return[i,"LinearTransferOETF"];case Ei:case sw:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}function B3(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),s=n.getShaderInfoLog(e).trim();if(i&&s==="")return"";const r=/ERROR: 0:(\d+)/.exec(s);if(r){const o=parseInt(r[1]);return t.toUpperCase()+`

`+s+`

`+RSe(n.getShaderSource(e),o)}else return s}function LSe(n,e){const t=PSe(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function kSe(n,e){let t;switch(e){case m2:t="Linear";break;case tz:t="Reinhard";break;case nz:t="OptimizedCineon";break;case iz:t="ACESFilmic";break;case rz:t="AgX";break;case oz:t="Neutral";break;case sz:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const ry=new G;function OSe(){Cn.getLuminanceCoefficients(ry);const n=ry.x.toFixed(4),e=ry.y.toFixed(4),t=ry.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function DSe(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Tm).join(`
`)}function NSe(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function FSe(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){const r=n.getActiveAttrib(e,s),o=r.name;let a=1;r.type===n.FLOAT_MAT2&&(a=2),r.type===n.FLOAT_MAT3&&(a=3),r.type===n.FLOAT_MAT4&&(a=4),t[o]={type:r.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Tm(n){return n!==""}function U3(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function z3(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const BSe=/^[ \t]*#include +<([\w\d./]+)>/gm;function xM(n){return n.replace(BSe,zSe)}const USe=new Map;function zSe(n,e){let t=on[e];if(t===void 0){const i=USe.get(e);if(i!==void 0)t=on[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return xM(t)}const HSe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function H3(n){return n.replace(HSe,VSe)}function VSe(n,e,t,i){let s="";for(let r=parseInt(e);r<parseInt(t);r++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function V3(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function $Se(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===f2?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===p2?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===_a&&(e="SHADOWMAP_TYPE_VSM"),e}function GSe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Ol:case au:e="ENVMAP_TYPE_CUBE";break;case Dp:e="ENVMAP_TYPE_CUBE_UV";break}return e}function WSe(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case au:e="ENVMAP_MODE_REFRACTION";break}return e}function KSe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Xv:e="ENVMAP_BLENDING_MULTIPLY";break;case QU:e="ENVMAP_BLENDING_MIX";break;case ez:e="ENVMAP_BLENDING_ADD";break}return e}function YSe(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function XSe(n,e,t,i){const s=n.getContext(),r=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=$Se(t),c=GSe(t),u=WSe(t),d=KSe(t),h=YSe(t),f=DSe(t),m=NSe(r),p=s.createProgram();let y,v,_=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(y=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(Tm).join(`
`),y.length>0&&(y+=`
`),v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(Tm).join(`
`),v.length>0&&(v+=`
`)):(y=[V3(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Tm).join(`
`),v=[V3(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Al?"#define TONE_MAPPING":"",t.toneMapping!==Al?on.tonemapping_pars_fragment:"",t.toneMapping!==Al?kSe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",on.colorspace_pars_fragment,LSe("linearToOutputTexel",t.outputColorSpace),OSe(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Tm).join(`
`)),o=xM(o),o=U3(o,t),o=z3(o,t),a=xM(a),a=U3(a,t),a=z3(a,t),o=H3(o),a=H3(a),t.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,y=[f,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,v=["#define varying in",t.glslVersion===wM?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===wM?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const b=_+y+o,w=_+v+a,x=F3(s,s.VERTEX_SHADER,b),S=F3(s,s.FRAGMENT_SHADER,w);s.attachShader(p,x),s.attachShader(p,S),t.index0AttributeName!==void 0?s.bindAttribLocation(p,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(p,0,"position"),s.linkProgram(p);function C(A){if(n.debug.checkShaderErrors){const I=s.getProgramInfoLog(p).trim(),B=s.getShaderInfoLog(x).trim(),F=s.getShaderInfoLog(S).trim();let U=!0,P=!0;if(s.getProgramParameter(p,s.LINK_STATUS)===!1)if(U=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(s,p,x,S);else{const O=B3(s,x,"vertex"),D=B3(s,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(p,s.VALIDATE_STATUS)+`

Material Name: `+A.name+`
Material Type: `+A.type+`

Program Info Log: `+I+`
`+O+`
`+D)}else I!==""?console.warn("THREE.WebGLProgram: Program Info Log:",I):(B===""||F==="")&&(P=!1);P&&(A.diagnostics={runnable:U,programLog:I,vertexShader:{log:B,prefix:y},fragmentShader:{log:F,prefix:v}})}s.deleteShader(x),s.deleteShader(S),T=new C_(s,p),M=FSe(s,p)}let T;this.getUniforms=function(){return T===void 0&&C(this),T};let M;this.getAttributes=function(){return M===void 0&&C(this),M};let E=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return E===!1&&(E=s.getProgramParameter(p,ASe)),E},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(p),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=ISe++,this.cacheKey=e,this.usedTimes=1,this.program=p,this.vertexShader=x,this.fragmentShader=S,this}let jSe=0;class qSe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,s=this._getShaderStage(t),r=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(s)===!1&&(o.add(s),s.usedTimes++),o.has(r)===!1&&(o.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new ZSe(e),t.set(e,i)),i}}class ZSe{constructor(e){this.id=jSe++,this.code=e,this.usedTimes=0}}function JSe(n,e,t,i,s,r,o){const a=new ow,l=new qSe,c=new Set,u=[],d=s.logarithmicDepthBuffer,h=s.vertexTextures;let f=s.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function p(M){return c.add(M),M===0?"uv":`uv${M}`}function y(M,E,A,I,B){const F=I.fog,U=B.geometry,P=M.isMeshStandardMaterial?I.environment:null,O=(M.isMeshStandardMaterial?t:e).get(M.envMap||P),D=O&&O.mapping===Dp?O.image.height:null,L=m[M.type];M.precision!==null&&(f=s.getMaxPrecision(M.precision),f!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",f,"instead."));const H=U.morphAttributes.position||U.morphAttributes.normal||U.morphAttributes.color,X=H!==void 0?H.length:0;let ne=0;U.morphAttributes.position!==void 0&&(ne=1),U.morphAttributes.normal!==void 0&&(ne=2),U.morphAttributes.color!==void 0&&(ne=3);let ce,ae,_e,re;if(L){const _n=Zo[L];ce=_n.vertexShader,ae=_n.fragmentShader}else ce=M.vertexShader,ae=M.fragmentShader,l.update(M),_e=l.getVertexShaderID(M),re=l.getFragmentShaderID(M);const xe=n.getRenderTarget(),he=B.isInstancedMesh===!0,Te=B.isBatchedMesh===!0,Ce=!!M.map,we=!!M.matcap,K=!!O,j=!!M.aoMap,ie=!!M.lightMap,ve=!!M.bumpMap,ye=!!M.normalMap,me=!!M.displacementMap,be=!!M.emissiveMap,Pe=!!M.metalnessMap,Z=!!M.roughnessMap,$=M.anisotropy>0,de=M.clearcoat>0,Ae=M.dispersion>0,De=M.iridescence>0,fe=M.sheen>0,Ge=M.transmission>0,We=$&&!!M.anisotropyMap,je=de&&!!M.clearcoatMap,at=de&&!!M.clearcoatNormalMap,Ue=de&&!!M.clearcoatRoughnessMap,qe=De&&!!M.iridescenceMap,Fe=De&&!!M.iridescenceThicknessMap,Ie=fe&&!!M.sheenColorMap,oe=fe&&!!M.sheenRoughnessMap,Le=!!M.specularMap,Ke=!!M.specularColorMap,ft=!!M.specularIntensityMap,Q=Ge&&!!M.transmissionMap,$e=Ge&&!!M.thicknessMap,Oe=!!M.gradientMap,et=!!M.alphaMap,ht=M.alphaTest>0,At=!!M.alphaHash,Ot=!!M.extensions;let pn=Al;M.toneMapped&&(xe===null||xe.isXRRenderTarget===!0)&&(pn=n.toneMapping);const wi={shaderID:L,shaderType:M.type,shaderName:M.name,vertexShader:ce,fragmentShader:ae,defines:M.defines,customVertexShaderID:_e,customFragmentShaderID:re,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:f,batching:Te,batchingColor:Te&&B._colorsTexture!==null,instancing:he,instancingColor:he&&B.instanceColor!==null,instancingMorph:he&&B.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:xe===null?n.outputColorSpace:xe.isXRRenderTarget===!0?xe.texture.colorSpace:qn,alphaToCoverage:!!M.alphaToCoverage,map:Ce,matcap:we,envMap:K,envMapMode:K&&O.mapping,envMapCubeUVHeight:D,aoMap:j,lightMap:ie,bumpMap:ve,normalMap:ye,displacementMap:h&&me,emissiveMap:be,normalMapObjectSpace:ye&&M.normalMapType===fz,normalMapTangentSpace:ye&&M.normalMapType===vu,metalnessMap:Pe,roughnessMap:Z,anisotropy:$,anisotropyMap:We,clearcoat:de,clearcoatMap:je,clearcoatNormalMap:at,clearcoatRoughnessMap:Ue,dispersion:Ae,iridescence:De,iridescenceMap:qe,iridescenceThicknessMap:Fe,sheen:fe,sheenColorMap:Ie,sheenRoughnessMap:oe,specularMap:Le,specularColorMap:Ke,specularIntensityMap:ft,transmission:Ge,transmissionMap:Q,thicknessMap:$e,gradientMap:Oe,opaque:M.transparent===!1&&M.blending===Td&&M.alphaToCoverage===!1,alphaMap:et,alphaTest:ht,alphaHash:At,combine:M.combine,mapUv:Ce&&p(M.map.channel),aoMapUv:j&&p(M.aoMap.channel),lightMapUv:ie&&p(M.lightMap.channel),bumpMapUv:ve&&p(M.bumpMap.channel),normalMapUv:ye&&p(M.normalMap.channel),displacementMapUv:me&&p(M.displacementMap.channel),emissiveMapUv:be&&p(M.emissiveMap.channel),metalnessMapUv:Pe&&p(M.metalnessMap.channel),roughnessMapUv:Z&&p(M.roughnessMap.channel),anisotropyMapUv:We&&p(M.anisotropyMap.channel),clearcoatMapUv:je&&p(M.clearcoatMap.channel),clearcoatNormalMapUv:at&&p(M.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ue&&p(M.clearcoatRoughnessMap.channel),iridescenceMapUv:qe&&p(M.iridescenceMap.channel),iridescenceThicknessMapUv:Fe&&p(M.iridescenceThicknessMap.channel),sheenColorMapUv:Ie&&p(M.sheenColorMap.channel),sheenRoughnessMapUv:oe&&p(M.sheenRoughnessMap.channel),specularMapUv:Le&&p(M.specularMap.channel),specularColorMapUv:Ke&&p(M.specularColorMap.channel),specularIntensityMapUv:ft&&p(M.specularIntensityMap.channel),transmissionMapUv:Q&&p(M.transmissionMap.channel),thicknessMapUv:$e&&p(M.thicknessMap.channel),alphaMapUv:et&&p(M.alphaMap.channel),vertexTangents:!!U.attributes.tangent&&(ye||$),vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!U.attributes.color&&U.attributes.color.itemSize===4,pointsUvs:B.isPoints===!0&&!!U.attributes.uv&&(Ce||et),fog:!!F,useFog:M.fog===!0,fogExp2:!!F&&F.isFogExp2,flatShading:M.flatShading===!0,sizeAttenuation:M.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:B.isSkinnedMesh===!0,morphTargets:U.morphAttributes.position!==void 0,morphNormals:U.morphAttributes.normal!==void 0,morphColors:U.morphAttributes.color!==void 0,morphTargetsCount:X,morphTextureStride:ne,numDirLights:E.directional.length,numPointLights:E.point.length,numSpotLights:E.spot.length,numSpotLightMaps:E.spotLightMap.length,numRectAreaLights:E.rectArea.length,numHemiLights:E.hemi.length,numDirLightShadows:E.directionalShadowMap.length,numPointLightShadows:E.pointShadowMap.length,numSpotLightShadows:E.spotShadowMap.length,numSpotLightShadowsWithMaps:E.numSpotLightShadowsWithMaps,numLightProbes:E.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:M.dithering,shadowMapEnabled:n.shadowMap.enabled&&A.length>0,shadowMapType:n.shadowMap.type,toneMapping:pn,decodeVideoTexture:Ce&&M.map.isVideoTexture===!0&&Cn.getTransfer(M.map.colorSpace)===ui,premultipliedAlpha:M.premultipliedAlpha,doubleSided:M.side===ts,flipSided:M.side===bs,useDepthPacking:M.depthPacking>=0,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionClipCullDistance:Ot&&M.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ot&&M.extensions.multiDraw===!0||Te)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:M.customProgramCacheKey()};return wi.vertexUv1s=c.has(1),wi.vertexUv2s=c.has(2),wi.vertexUv3s=c.has(3),c.clear(),wi}function v(M){const E=[];if(M.shaderID?E.push(M.shaderID):(E.push(M.customVertexShaderID),E.push(M.customFragmentShaderID)),M.defines!==void 0)for(const A in M.defines)E.push(A),E.push(M.defines[A]);return M.isRawShaderMaterial===!1&&(_(E,M),b(E,M),E.push(n.outputColorSpace)),E.push(M.customProgramCacheKey),E.join()}function _(M,E){M.push(E.precision),M.push(E.outputColorSpace),M.push(E.envMapMode),M.push(E.envMapCubeUVHeight),M.push(E.mapUv),M.push(E.alphaMapUv),M.push(E.lightMapUv),M.push(E.aoMapUv),M.push(E.bumpMapUv),M.push(E.normalMapUv),M.push(E.displacementMapUv),M.push(E.emissiveMapUv),M.push(E.metalnessMapUv),M.push(E.roughnessMapUv),M.push(E.anisotropyMapUv),M.push(E.clearcoatMapUv),M.push(E.clearcoatNormalMapUv),M.push(E.clearcoatRoughnessMapUv),M.push(E.iridescenceMapUv),M.push(E.iridescenceThicknessMapUv),M.push(E.sheenColorMapUv),M.push(E.sheenRoughnessMapUv),M.push(E.specularMapUv),M.push(E.specularColorMapUv),M.push(E.specularIntensityMapUv),M.push(E.transmissionMapUv),M.push(E.thicknessMapUv),M.push(E.combine),M.push(E.fogExp2),M.push(E.sizeAttenuation),M.push(E.morphTargetsCount),M.push(E.morphAttributeCount),M.push(E.numDirLights),M.push(E.numPointLights),M.push(E.numSpotLights),M.push(E.numSpotLightMaps),M.push(E.numHemiLights),M.push(E.numRectAreaLights),M.push(E.numDirLightShadows),M.push(E.numPointLightShadows),M.push(E.numSpotLightShadows),M.push(E.numSpotLightShadowsWithMaps),M.push(E.numLightProbes),M.push(E.shadowMapType),M.push(E.toneMapping),M.push(E.numClippingPlanes),M.push(E.numClipIntersection),M.push(E.depthPacking)}function b(M,E){a.disableAll(),E.supportsVertexTextures&&a.enable(0),E.instancing&&a.enable(1),E.instancingColor&&a.enable(2),E.instancingMorph&&a.enable(3),E.matcap&&a.enable(4),E.envMap&&a.enable(5),E.normalMapObjectSpace&&a.enable(6),E.normalMapTangentSpace&&a.enable(7),E.clearcoat&&a.enable(8),E.iridescence&&a.enable(9),E.alphaTest&&a.enable(10),E.vertexColors&&a.enable(11),E.vertexAlphas&&a.enable(12),E.vertexUv1s&&a.enable(13),E.vertexUv2s&&a.enable(14),E.vertexUv3s&&a.enable(15),E.vertexTangents&&a.enable(16),E.anisotropy&&a.enable(17),E.alphaHash&&a.enable(18),E.batching&&a.enable(19),E.dispersion&&a.enable(20),E.batchingColor&&a.enable(21),M.push(a.mask),a.disableAll(),E.fog&&a.enable(0),E.useFog&&a.enable(1),E.flatShading&&a.enable(2),E.logarithmicDepthBuffer&&a.enable(3),E.skinning&&a.enable(4),E.morphTargets&&a.enable(5),E.morphNormals&&a.enable(6),E.morphColors&&a.enable(7),E.premultipliedAlpha&&a.enable(8),E.shadowMapEnabled&&a.enable(9),E.doubleSided&&a.enable(10),E.flipSided&&a.enable(11),E.useDepthPacking&&a.enable(12),E.dithering&&a.enable(13),E.transmission&&a.enable(14),E.sheen&&a.enable(15),E.opaque&&a.enable(16),E.pointsUvs&&a.enable(17),E.decodeVideoTexture&&a.enable(18),E.alphaToCoverage&&a.enable(19),M.push(a.mask)}function w(M){const E=m[M.type];let A;if(E){const I=Zo[E];A=eh.clone(I.uniforms)}else A=M.uniforms;return A}function x(M,E){let A;for(let I=0,B=u.length;I<B;I++){const F=u[I];if(F.cacheKey===E){A=F,++A.usedTimes;break}}return A===void 0&&(A=new XSe(n,E,M,r),u.push(A)),A}function S(M){if(--M.usedTimes===0){const E=u.indexOf(M);u[E]=u[u.length-1],u.pop(),M.destroy()}}function C(M){l.remove(M)}function T(){l.dispose()}return{getParameters:y,getProgramCacheKey:v,getUniforms:w,acquireProgram:x,releaseProgram:S,releaseShaderCache:C,programs:u,dispose:T}}function QSe(){let n=new WeakMap;function e(r){let o=n.get(r);return o===void 0&&(o={},n.set(r,o)),o}function t(r){n.delete(r)}function i(r,o,a){n.get(r)[o]=a}function s(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:s}}function eCe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function $3(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function G3(){const n=[];let e=0;const t=[],i=[],s=[];function r(){e=0,t.length=0,i.length=0,s.length=0}function o(d,h,f,m,p,y){let v=n[e];return v===void 0?(v={id:d.id,object:d,geometry:h,material:f,groupOrder:m,renderOrder:d.renderOrder,z:p,group:y},n[e]=v):(v.id=d.id,v.object=d,v.geometry=h,v.material=f,v.groupOrder=m,v.renderOrder=d.renderOrder,v.z=p,v.group=y),e++,v}function a(d,h,f,m,p,y){const v=o(d,h,f,m,p,y);f.transmission>0?i.push(v):f.transparent===!0?s.push(v):t.push(v)}function l(d,h,f,m,p,y){const v=o(d,h,f,m,p,y);f.transmission>0?i.unshift(v):f.transparent===!0?s.unshift(v):t.unshift(v)}function c(d,h){t.length>1&&t.sort(d||eCe),i.length>1&&i.sort(h||$3),s.length>1&&s.sort(h||$3)}function u(){for(let d=e,h=n.length;d<h;d++){const f=n[d];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:i,transparent:s,init:r,push:a,unshift:l,finish:u,sort:c}}function tCe(){let n=new WeakMap;function e(i,s){const r=n.get(i);let o;return r===void 0?(o=new G3,n.set(i,[o])):s>=r.length?(o=new G3,r.push(o)):o=r[s],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function nCe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new G,color:new gt};break;case"SpotLight":t={position:new G,direction:new G,color:new gt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new G,color:new gt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new G,skyColor:new gt,groundColor:new gt};break;case"RectAreaLight":t={color:new gt,position:new G,halfWidth:new G,halfHeight:new G};break}return n[e.id]=t,t}}}function iCe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let sCe=0;function rCe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function oCe(n){const e=new nCe,t=iCe(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new G);const s=new G,r=new yt,o=new yt;function a(c){let u=0,d=0,h=0;for(let M=0;M<9;M++)i.probe[M].set(0,0,0);let f=0,m=0,p=0,y=0,v=0,_=0,b=0,w=0,x=0,S=0,C=0;c.sort(rCe);for(let M=0,E=c.length;M<E;M++){const A=c[M],I=A.color,B=A.intensity,F=A.distance,U=A.shadow&&A.shadow.map?A.shadow.map.texture:null;if(A.isAmbientLight)u+=I.r*B,d+=I.g*B,h+=I.b*B;else if(A.isLightProbe){for(let P=0;P<9;P++)i.probe[P].addScaledVector(A.sh.coefficients[P],B);C++}else if(A.isDirectionalLight){const P=e.get(A);if(P.color.copy(A.color).multiplyScalar(A.intensity),A.castShadow){const O=A.shadow,D=t.get(A);D.shadowIntensity=O.intensity,D.shadowBias=O.bias,D.shadowNormalBias=O.normalBias,D.shadowRadius=O.radius,D.shadowMapSize=O.mapSize,i.directionalShadow[f]=D,i.directionalShadowMap[f]=U,i.directionalShadowMatrix[f]=A.shadow.matrix,_++}i.directional[f]=P,f++}else if(A.isSpotLight){const P=e.get(A);P.position.setFromMatrixPosition(A.matrixWorld),P.color.copy(I).multiplyScalar(B),P.distance=F,P.coneCos=Math.cos(A.angle),P.penumbraCos=Math.cos(A.angle*(1-A.penumbra)),P.decay=A.decay,i.spot[p]=P;const O=A.shadow;if(A.map&&(i.spotLightMap[x]=A.map,x++,O.updateMatrices(A),A.castShadow&&S++),i.spotLightMatrix[p]=O.matrix,A.castShadow){const D=t.get(A);D.shadowIntensity=O.intensity,D.shadowBias=O.bias,D.shadowNormalBias=O.normalBias,D.shadowRadius=O.radius,D.shadowMapSize=O.mapSize,i.spotShadow[p]=D,i.spotShadowMap[p]=U,w++}p++}else if(A.isRectAreaLight){const P=e.get(A);P.color.copy(I).multiplyScalar(B),P.halfWidth.set(A.width*.5,0,0),P.halfHeight.set(0,A.height*.5,0),i.rectArea[y]=P,y++}else if(A.isPointLight){const P=e.get(A);if(P.color.copy(A.color).multiplyScalar(A.intensity),P.distance=A.distance,P.decay=A.decay,A.castShadow){const O=A.shadow,D=t.get(A);D.shadowIntensity=O.intensity,D.shadowBias=O.bias,D.shadowNormalBias=O.normalBias,D.shadowRadius=O.radius,D.shadowMapSize=O.mapSize,D.shadowCameraNear=O.camera.near,D.shadowCameraFar=O.camera.far,i.pointShadow[m]=D,i.pointShadowMap[m]=U,i.pointShadowMatrix[m]=A.shadow.matrix,b++}i.point[m]=P,m++}else if(A.isHemisphereLight){const P=e.get(A);P.skyColor.copy(A.color).multiplyScalar(B),P.groundColor.copy(A.groundColor).multiplyScalar(B),i.hemi[v]=P,v++}}y>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Dt.LTC_FLOAT_1,i.rectAreaLTC2=Dt.LTC_FLOAT_2):(i.rectAreaLTC1=Dt.LTC_HALF_1,i.rectAreaLTC2=Dt.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=d,i.ambient[2]=h;const T=i.hash;(T.directionalLength!==f||T.pointLength!==m||T.spotLength!==p||T.rectAreaLength!==y||T.hemiLength!==v||T.numDirectionalShadows!==_||T.numPointShadows!==b||T.numSpotShadows!==w||T.numSpotMaps!==x||T.numLightProbes!==C)&&(i.directional.length=f,i.spot.length=p,i.rectArea.length=y,i.point.length=m,i.hemi.length=v,i.directionalShadow.length=_,i.directionalShadowMap.length=_,i.pointShadow.length=b,i.pointShadowMap.length=b,i.spotShadow.length=w,i.spotShadowMap.length=w,i.directionalShadowMatrix.length=_,i.pointShadowMatrix.length=b,i.spotLightMatrix.length=w+x-S,i.spotLightMap.length=x,i.numSpotLightShadowsWithMaps=S,i.numLightProbes=C,T.directionalLength=f,T.pointLength=m,T.spotLength=p,T.rectAreaLength=y,T.hemiLength=v,T.numDirectionalShadows=_,T.numPointShadows=b,T.numSpotShadows=w,T.numSpotMaps=x,T.numLightProbes=C,i.version=sCe++)}function l(c,u){let d=0,h=0,f=0,m=0,p=0;const y=u.matrixWorldInverse;for(let v=0,_=c.length;v<_;v++){const b=c[v];if(b.isDirectionalLight){const w=i.directional[d];w.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(y),d++}else if(b.isSpotLight){const w=i.spot[f];w.position.setFromMatrixPosition(b.matrixWorld),w.position.applyMatrix4(y),w.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(y),f++}else if(b.isRectAreaLight){const w=i.rectArea[m];w.position.setFromMatrixPosition(b.matrixWorld),w.position.applyMatrix4(y),o.identity(),r.copy(b.matrixWorld),r.premultiply(y),o.extractRotation(r),w.halfWidth.set(b.width*.5,0,0),w.halfHeight.set(0,b.height*.5,0),w.halfWidth.applyMatrix4(o),w.halfHeight.applyMatrix4(o),m++}else if(b.isPointLight){const w=i.point[h];w.position.setFromMatrixPosition(b.matrixWorld),w.position.applyMatrix4(y),h++}else if(b.isHemisphereLight){const w=i.hemi[p];w.direction.setFromMatrixPosition(b.matrixWorld),w.direction.transformDirection(y),p++}}}return{setup:a,setupView:l,state:i}}function W3(n){const e=new oCe(n),t=[],i=[];function s(u){c.camera=u,t.length=0,i.length=0}function r(u){t.push(u)}function o(u){i.push(u)}function a(){e.setup(t)}function l(u){e.setupView(t,u)}const c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:c,setupLights:a,setupLightsView:l,pushLight:r,pushShadow:o}}function aCe(n){let e=new WeakMap;function t(s,r=0){const o=e.get(s);let a;return o===void 0?(a=new W3(n),e.set(s,[a])):r>=o.length?(a=new W3(n),o.push(a)):a=o[r],a}function i(){e=new WeakMap}return{get:t,dispose:i}}class e0 extends zi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=hz,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class L2 extends zi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const lCe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,cCe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function uCe(n,e,t){let i=new ph;const s=new tt,r=new tt,o=new Ln,a=new e0({depthPacking:iw}),l=new L2,c={},u=t.maxTextureSize,d={[Fo]:bs,[bs]:Fo,[ts]:ts},h=new Bi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new tt},radius:{value:4}},vertexShader:lCe,fragmentShader:cCe}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const m=new jt;m.setAttribute("position",new dn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const p=new ut(m,h),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=f2;let v=this.type;this.render=function(S,C,T){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||S.length===0)return;const M=n.getRenderTarget(),E=n.getActiveCubeFace(),A=n.getActiveMipmapLevel(),I=n.state;I.setBlending(Ro),I.buffers.color.setClear(1,1,1,1),I.buffers.depth.setTest(!0),I.setScissorTest(!1);const B=v!==_a&&this.type===_a,F=v===_a&&this.type!==_a;for(let U=0,P=S.length;U<P;U++){const O=S[U],D=O.shadow;if(D===void 0){console.warn("THREE.WebGLShadowMap:",O,"has no shadow.");continue}if(D.autoUpdate===!1&&D.needsUpdate===!1)continue;s.copy(D.mapSize);const L=D.getFrameExtents();if(s.multiply(L),r.copy(D.mapSize),(s.x>u||s.y>u)&&(s.x>u&&(r.x=Math.floor(u/L.x),s.x=r.x*L.x,D.mapSize.x=r.x),s.y>u&&(r.y=Math.floor(u/L.y),s.y=r.y*L.y,D.mapSize.y=r.y)),D.map===null||B===!0||F===!0){const X=this.type!==_a?{minFilter:ii,magFilter:ii}:{};D.map!==null&&D.map.dispose(),D.map=new Ti(s.x,s.y,X),D.map.texture.name=O.name+".shadowMap",D.camera.updateProjectionMatrix()}n.setRenderTarget(D.map),n.clear();const H=D.getViewportCount();for(let X=0;X<H;X++){const ne=D.getViewport(X);o.set(r.x*ne.x,r.y*ne.y,r.x*ne.z,r.y*ne.w),I.viewport(o),D.updateMatrices(O,X),i=D.getFrustum(),w(C,T,D.camera,O,this.type)}D.isPointLightShadow!==!0&&this.type===_a&&_(D,T),D.needsUpdate=!1}v=this.type,y.needsUpdate=!1,n.setRenderTarget(M,E,A)};function _(S,C){const T=e.update(p);h.defines.VSM_SAMPLES!==S.blurSamples&&(h.defines.VSM_SAMPLES=S.blurSamples,f.defines.VSM_SAMPLES=S.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),S.mapPass===null&&(S.mapPass=new Ti(s.x,s.y)),h.uniforms.shadow_pass.value=S.map.texture,h.uniforms.resolution.value=S.mapSize,h.uniforms.radius.value=S.radius,n.setRenderTarget(S.mapPass),n.clear(),n.renderBufferDirect(C,null,T,h,p,null),f.uniforms.shadow_pass.value=S.mapPass.texture,f.uniforms.resolution.value=S.mapSize,f.uniforms.radius.value=S.radius,n.setRenderTarget(S.map),n.clear(),n.renderBufferDirect(C,null,T,f,p,null)}function b(S,C,T,M){let E=null;const A=T.isPointLight===!0?S.customDistanceMaterial:S.customDepthMaterial;if(A!==void 0)E=A;else if(E=T.isPointLight===!0?l:a,n.localClippingEnabled&&C.clipShadows===!0&&Array.isArray(C.clippingPlanes)&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0||C.map&&C.alphaTest>0){const I=E.uuid,B=C.uuid;let F=c[I];F===void 0&&(F={},c[I]=F);let U=F[B];U===void 0&&(U=E.clone(),F[B]=U,C.addEventListener("dispose",x)),E=U}if(E.visible=C.visible,E.wireframe=C.wireframe,M===_a?E.side=C.shadowSide!==null?C.shadowSide:C.side:E.side=C.shadowSide!==null?C.shadowSide:d[C.side],E.alphaMap=C.alphaMap,E.alphaTest=C.alphaTest,E.map=C.map,E.clipShadows=C.clipShadows,E.clippingPlanes=C.clippingPlanes,E.clipIntersection=C.clipIntersection,E.displacementMap=C.displacementMap,E.displacementScale=C.displacementScale,E.displacementBias=C.displacementBias,E.wireframeLinewidth=C.wireframeLinewidth,E.linewidth=C.linewidth,T.isPointLight===!0&&E.isMeshDistanceMaterial===!0){const I=n.properties.get(E);I.light=T}return E}function w(S,C,T,M,E){if(S.visible===!1)return;if(S.layers.test(C.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&E===_a)&&(!S.frustumCulled||i.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(T.matrixWorldInverse,S.matrixWorld);const B=e.update(S),F=S.material;if(Array.isArray(F)){const U=B.groups;for(let P=0,O=U.length;P<O;P++){const D=U[P],L=F[D.materialIndex];if(L&&L.visible){const H=b(S,L,M,E);S.onBeforeShadow(n,S,C,T,B,H,D),n.renderBufferDirect(T,null,B,H,S,D),S.onAfterShadow(n,S,C,T,B,H,D)}}}else if(F.visible){const U=b(S,F,M,E);S.onBeforeShadow(n,S,C,T,B,U,null),n.renderBufferDirect(T,null,B,U,S,null),S.onAfterShadow(n,S,C,T,B,U,null)}}const I=S.children;for(let B=0,F=I.length;B<F;B++)w(I[B],C,T,M,E)}function x(S){S.target.removeEventListener("dispose",x);for(const T in c){const M=c[T],E=S.target.uuid;E in M&&(M[E].dispose(),delete M[E])}}}function dCe(n){function e(){let Q=!1;const $e=new Ln;let Oe=null;const et=new Ln(0,0,0,0);return{setMask:function(ht){Oe!==ht&&!Q&&(n.colorMask(ht,ht,ht,ht),Oe=ht)},setLocked:function(ht){Q=ht},setClear:function(ht,At,Ot,pn,wi){wi===!0&&(ht*=pn,At*=pn,Ot*=pn),$e.set(ht,At,Ot,pn),et.equals($e)===!1&&(n.clearColor(ht,At,Ot,pn),et.copy($e))},reset:function(){Q=!1,Oe=null,et.set(-1,0,0,0)}}}function t(){let Q=!1,$e=null,Oe=null,et=null;return{setTest:function(ht){ht?re(n.DEPTH_TEST):xe(n.DEPTH_TEST)},setMask:function(ht){$e!==ht&&!Q&&(n.depthMask(ht),$e=ht)},setFunc:function(ht){if(Oe!==ht){switch(ht){case KU:n.depthFunc(n.NEVER);break;case YU:n.depthFunc(n.ALWAYS);break;case XU:n.depthFunc(n.LESS);break;case Jg:n.depthFunc(n.LEQUAL);break;case jU:n.depthFunc(n.EQUAL);break;case qU:n.depthFunc(n.GEQUAL);break;case ZU:n.depthFunc(n.GREATER);break;case JU:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Oe=ht}},setLocked:function(ht){Q=ht},setClear:function(ht){et!==ht&&(n.clearDepth(ht),et=ht)},reset:function(){Q=!1,$e=null,Oe=null,et=null}}}function i(){let Q=!1,$e=null,Oe=null,et=null,ht=null,At=null,Ot=null,pn=null,wi=null;return{setTest:function(_n){Q||(_n?re(n.STENCIL_TEST):xe(n.STENCIL_TEST))},setMask:function(_n){$e!==_n&&!Q&&(n.stencilMask(_n),$e=_n)},setFunc:function(_n,Cs,$i){(Oe!==_n||et!==Cs||ht!==$i)&&(n.stencilFunc(_n,Cs,$i),Oe=_n,et=Cs,ht=$i)},setOp:function(_n,Cs,$i){(At!==_n||Ot!==Cs||pn!==$i)&&(n.stencilOp(_n,Cs,$i),At=_n,Ot=Cs,pn=$i)},setLocked:function(_n){Q=_n},setClear:function(_n){wi!==_n&&(n.clearStencil(_n),wi=_n)},reset:function(){Q=!1,$e=null,Oe=null,et=null,ht=null,At=null,Ot=null,pn=null,wi=null}}}const s=new e,r=new t,o=new i,a=new WeakMap,l=new WeakMap;let c={},u={},d=new WeakMap,h=[],f=null,m=!1,p=null,y=null,v=null,_=null,b=null,w=null,x=null,S=new gt(0,0,0),C=0,T=!1,M=null,E=null,A=null,I=null,B=null;const F=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let U=!1,P=0;const O=n.getParameter(n.VERSION);O.indexOf("WebGL")!==-1?(P=parseFloat(/^WebGL (\d)/.exec(O)[1]),U=P>=1):O.indexOf("OpenGL ES")!==-1&&(P=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),U=P>=2);let D=null,L={};const H=n.getParameter(n.SCISSOR_BOX),X=n.getParameter(n.VIEWPORT),ne=new Ln().fromArray(H),ce=new Ln().fromArray(X);function ae(Q,$e,Oe,et){const ht=new Uint8Array(4),At=n.createTexture();n.bindTexture(Q,At),n.texParameteri(Q,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Q,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Ot=0;Ot<Oe;Ot++)Q===n.TEXTURE_3D||Q===n.TEXTURE_2D_ARRAY?n.texImage3D($e,0,n.RGBA,1,1,et,0,n.RGBA,n.UNSIGNED_BYTE,ht):n.texImage2D($e+Ot,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ht);return At}const _e={};_e[n.TEXTURE_2D]=ae(n.TEXTURE_2D,n.TEXTURE_2D,1),_e[n.TEXTURE_CUBE_MAP]=ae(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),_e[n.TEXTURE_2D_ARRAY]=ae(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),_e[n.TEXTURE_3D]=ae(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),r.setClear(1),o.setClear(0),re(n.DEPTH_TEST),r.setFunc(Jg),ve(!1),ye(gM),re(n.CULL_FACE),j(Ro);function re(Q){c[Q]!==!0&&(n.enable(Q),c[Q]=!0)}function xe(Q){c[Q]!==!1&&(n.disable(Q),c[Q]=!1)}function he(Q,$e){return u[Q]!==$e?(n.bindFramebuffer(Q,$e),u[Q]=$e,Q===n.DRAW_FRAMEBUFFER&&(u[n.FRAMEBUFFER]=$e),Q===n.FRAMEBUFFER&&(u[n.DRAW_FRAMEBUFFER]=$e),!0):!1}function Te(Q,$e){let Oe=h,et=!1;if(Q){Oe=d.get($e),Oe===void 0&&(Oe=[],d.set($e,Oe));const ht=Q.textures;if(Oe.length!==ht.length||Oe[0]!==n.COLOR_ATTACHMENT0){for(let At=0,Ot=ht.length;At<Ot;At++)Oe[At]=n.COLOR_ATTACHMENT0+At;Oe.length=ht.length,et=!0}}else Oe[0]!==n.BACK&&(Oe[0]=n.BACK,et=!0);et&&n.drawBuffers(Oe)}function Ce(Q){return f!==Q?(n.useProgram(Q),f=Q,!0):!1}const we={[Lc]:n.FUNC_ADD,[IU]:n.FUNC_SUBTRACT,[RU]:n.FUNC_REVERSE_SUBTRACT};we[PU]=n.MIN,we[LU]=n.MAX;const K={[kU]:n.ZERO,[OU]:n.ONE,[DU]:n.SRC_COLOR,[db]:n.SRC_ALPHA,[HU]:n.SRC_ALPHA_SATURATE,[UU]:n.DST_COLOR,[FU]:n.DST_ALPHA,[NU]:n.ONE_MINUS_SRC_COLOR,[hb]:n.ONE_MINUS_SRC_ALPHA,[zU]:n.ONE_MINUS_DST_COLOR,[BU]:n.ONE_MINUS_DST_ALPHA,[VU]:n.CONSTANT_COLOR,[$U]:n.ONE_MINUS_CONSTANT_COLOR,[GU]:n.CONSTANT_ALPHA,[WU]:n.ONE_MINUS_CONSTANT_ALPHA};function j(Q,$e,Oe,et,ht,At,Ot,pn,wi,_n){if(Q===Ro){m===!0&&(xe(n.BLEND),m=!1);return}if(m===!1&&(re(n.BLEND),m=!0),Q!==AU){if(Q!==p||_n!==T){if((y!==Lc||b!==Lc)&&(n.blendEquation(n.FUNC_ADD),y=Lc,b=Lc),_n)switch(Q){case Td:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case ub:n.blendFunc(n.ONE,n.ONE);break;case vM:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case yM:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Q);break}else switch(Q){case Td:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case ub:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case vM:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case yM:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Q);break}v=null,_=null,w=null,x=null,S.set(0,0,0),C=0,p=Q,T=_n}return}ht=ht||$e,At=At||Oe,Ot=Ot||et,($e!==y||ht!==b)&&(n.blendEquationSeparate(we[$e],we[ht]),y=$e,b=ht),(Oe!==v||et!==_||At!==w||Ot!==x)&&(n.blendFuncSeparate(K[Oe],K[et],K[At],K[Ot]),v=Oe,_=et,w=At,x=Ot),(pn.equals(S)===!1||wi!==C)&&(n.blendColor(pn.r,pn.g,pn.b,wi),S.copy(pn),C=wi),p=Q,T=!1}function ie(Q,$e){Q.side===ts?xe(n.CULL_FACE):re(n.CULL_FACE);let Oe=Q.side===bs;$e&&(Oe=!Oe),ve(Oe),Q.blending===Td&&Q.transparent===!1?j(Ro):j(Q.blending,Q.blendEquation,Q.blendSrc,Q.blendDst,Q.blendEquationAlpha,Q.blendSrcAlpha,Q.blendDstAlpha,Q.blendColor,Q.blendAlpha,Q.premultipliedAlpha),r.setFunc(Q.depthFunc),r.setTest(Q.depthTest),r.setMask(Q.depthWrite),s.setMask(Q.colorWrite);const et=Q.stencilWrite;o.setTest(et),et&&(o.setMask(Q.stencilWriteMask),o.setFunc(Q.stencilFunc,Q.stencilRef,Q.stencilFuncMask),o.setOp(Q.stencilFail,Q.stencilZFail,Q.stencilZPass)),be(Q.polygonOffset,Q.polygonOffsetFactor,Q.polygonOffsetUnits),Q.alphaToCoverage===!0?re(n.SAMPLE_ALPHA_TO_COVERAGE):xe(n.SAMPLE_ALPHA_TO_COVERAGE)}function ve(Q){M!==Q&&(Q?n.frontFace(n.CW):n.frontFace(n.CCW),M=Q)}function ye(Q){Q!==EU?(re(n.CULL_FACE),Q!==E&&(Q===gM?n.cullFace(n.BACK):Q===TU?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):xe(n.CULL_FACE),E=Q}function me(Q){Q!==A&&(U&&n.lineWidth(Q),A=Q)}function be(Q,$e,Oe){Q?(re(n.POLYGON_OFFSET_FILL),(I!==$e||B!==Oe)&&(n.polygonOffset($e,Oe),I=$e,B=Oe)):xe(n.POLYGON_OFFSET_FILL)}function Pe(Q){Q?re(n.SCISSOR_TEST):xe(n.SCISSOR_TEST)}function Z(Q){Q===void 0&&(Q=n.TEXTURE0+F-1),D!==Q&&(n.activeTexture(Q),D=Q)}function $(Q,$e,Oe){Oe===void 0&&(D===null?Oe=n.TEXTURE0+F-1:Oe=D);let et=L[Oe];et===void 0&&(et={type:void 0,texture:void 0},L[Oe]=et),(et.type!==Q||et.texture!==$e)&&(D!==Oe&&(n.activeTexture(Oe),D=Oe),n.bindTexture(Q,$e||_e[Q]),et.type=Q,et.texture=$e)}function de(){const Q=L[D];Q!==void 0&&Q.type!==void 0&&(n.bindTexture(Q.type,null),Q.type=void 0,Q.texture=void 0)}function Ae(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function De(){try{n.compressedTexImage3D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function fe(){try{n.texSubImage2D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Ge(){try{n.texSubImage3D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function We(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function je(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function at(){try{n.texStorage2D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Ue(){try{n.texStorage3D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function qe(){try{n.texImage2D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Fe(){try{n.texImage3D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Ie(Q){ne.equals(Q)===!1&&(n.scissor(Q.x,Q.y,Q.z,Q.w),ne.copy(Q))}function oe(Q){ce.equals(Q)===!1&&(n.viewport(Q.x,Q.y,Q.z,Q.w),ce.copy(Q))}function Le(Q,$e){let Oe=l.get($e);Oe===void 0&&(Oe=new WeakMap,l.set($e,Oe));let et=Oe.get(Q);et===void 0&&(et=n.getUniformBlockIndex($e,Q.name),Oe.set(Q,et))}function Ke(Q,$e){const et=l.get($e).get(Q);a.get($e)!==et&&(n.uniformBlockBinding($e,et,Q.__bindingPointIndex),a.set($e,et))}function ft(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),c={},D=null,L={},u={},d=new WeakMap,h=[],f=null,m=!1,p=null,y=null,v=null,_=null,b=null,w=null,x=null,S=new gt(0,0,0),C=0,T=!1,M=null,E=null,A=null,I=null,B=null,ne.set(0,0,n.canvas.width,n.canvas.height),ce.set(0,0,n.canvas.width,n.canvas.height),s.reset(),r.reset(),o.reset()}return{buffers:{color:s,depth:r,stencil:o},enable:re,disable:xe,bindFramebuffer:he,drawBuffers:Te,useProgram:Ce,setBlending:j,setMaterial:ie,setFlipSided:ve,setCullFace:ye,setLineWidth:me,setPolygonOffset:be,setScissorTest:Pe,activeTexture:Z,bindTexture:$,unbindTexture:de,compressedTexImage2D:Ae,compressedTexImage3D:De,texImage2D:qe,texImage3D:Fe,updateUBOMapping:Le,uniformBlockBinding:Ke,texStorage2D:at,texStorage3D:Ue,texSubImage2D:fe,texSubImage3D:Ge,compressedTexSubImage2D:We,compressedTexSubImage3D:je,scissor:Ie,viewport:oe,reset:ft}}function hCe(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function fCe(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function pCe(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function SM(n,e,t,i){const s=mCe(i);switch(t){case _2:return n*e;case w2:return n*e;case x2:return n*e*2;case qv:return n*e/s.components*s.byteLength;case Zv:return n*e/s.components*s.byteLength;case S2:return n*e*2/s.components*s.byteLength;case Q1:return n*e*2/s.components*s.byteLength;case b2:return n*e*3/s.components*s.byteLength;case Oi:return n*e*4/s.components*s.byteLength;case ew:return n*e*4/s.components*s.byteLength;case ng:case ig:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case sg:case rg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case pb:case gb:return Math.max(n,16)*Math.max(e,8)/4;case fb:case mb:return Math.max(n,8)*Math.max(e,8)/2;case vb:case yb:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case _b:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case bb:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case wb:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case xb:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case Sb:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case Cb:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case Mb:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case Eb:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case Tb:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case Ab:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case Ib:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case Rb:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case Pb:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case Lb:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case kb:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case og:case Ob:case Db:return Math.ceil(n/4)*Math.ceil(e/4)*16;case C2:case Nb:return Math.ceil(n/4)*Math.ceil(e/4)*8;case Fb:case Bb:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function mCe(n){switch(n){case Wa:case g2:return{byteLength:1,components:1};case pp:case v2:case Ki:return{byteLength:2,components:1};case Z1:case J1:return{byteLength:2,components:4};case Dl:case q1:case is:return{byteLength:4,components:1};case y2:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}const gCe={contain:hCe,cover:fCe,fill:pCe,getByteLength:SM};function vCe(n,e,t,i,s,r,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new tt,u=new WeakMap;let d;const h=new WeakMap;let f=!1;try{f=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function m(Z,$){return f?new OffscreenCanvas(Z,$):lv("canvas")}function p(Z,$,de){let Ae=1;const De=Pe(Z);if((De.width>de||De.height>de)&&(Ae=de/Math.max(De.width,De.height)),Ae<1)if(typeof HTMLImageElement<"u"&&Z instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Z instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Z instanceof ImageBitmap||typeof VideoFrame<"u"&&Z instanceof VideoFrame){const fe=Math.floor(Ae*De.width),Ge=Math.floor(Ae*De.height);d===void 0&&(d=m(fe,Ge));const We=$?m(fe,Ge):d;return We.width=fe,We.height=Ge,We.getContext("2d").drawImage(Z,0,0,fe,Ge),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+De.width+"x"+De.height+") to ("+fe+"x"+Ge+")."),We}else return"data"in Z&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+De.width+"x"+De.height+")."),Z;return Z}function y(Z){return Z.generateMipmaps&&Z.minFilter!==ii&&Z.minFilter!==Rn}function v(Z){n.generateMipmap(Z)}function _(Z,$,de,Ae,De=!1){if(Z!==null){if(n[Z]!==void 0)return n[Z];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Z+"'")}let fe=$;if($===n.RED&&(de===n.FLOAT&&(fe=n.R32F),de===n.HALF_FLOAT&&(fe=n.R16F),de===n.UNSIGNED_BYTE&&(fe=n.R8)),$===n.RED_INTEGER&&(de===n.UNSIGNED_BYTE&&(fe=n.R8UI),de===n.UNSIGNED_SHORT&&(fe=n.R16UI),de===n.UNSIGNED_INT&&(fe=n.R32UI),de===n.BYTE&&(fe=n.R8I),de===n.SHORT&&(fe=n.R16I),de===n.INT&&(fe=n.R32I)),$===n.RG&&(de===n.FLOAT&&(fe=n.RG32F),de===n.HALF_FLOAT&&(fe=n.RG16F),de===n.UNSIGNED_BYTE&&(fe=n.RG8)),$===n.RG_INTEGER&&(de===n.UNSIGNED_BYTE&&(fe=n.RG8UI),de===n.UNSIGNED_SHORT&&(fe=n.RG16UI),de===n.UNSIGNED_INT&&(fe=n.RG32UI),de===n.BYTE&&(fe=n.RG8I),de===n.SHORT&&(fe=n.RG16I),de===n.INT&&(fe=n.RG32I)),$===n.RGB&&de===n.UNSIGNED_INT_5_9_9_9_REV&&(fe=n.RGB9_E5),$===n.RGBA){const Ge=De?iv:Cn.getTransfer(Ae);de===n.FLOAT&&(fe=n.RGBA32F),de===n.HALF_FLOAT&&(fe=n.RGBA16F),de===n.UNSIGNED_BYTE&&(fe=Ge===ui?n.SRGB8_ALPHA8:n.RGBA8),de===n.UNSIGNED_SHORT_4_4_4_4&&(fe=n.RGBA4),de===n.UNSIGNED_SHORT_5_5_5_1&&(fe=n.RGB5_A1)}return(fe===n.R16F||fe===n.R32F||fe===n.RG16F||fe===n.RG32F||fe===n.RGBA16F||fe===n.RGBA32F)&&e.get("EXT_color_buffer_float"),fe}function b(Z,$){let de;return Z?$===null||$===Dl||$===Zd?de=n.DEPTH24_STENCIL8:$===is?de=n.DEPTH32F_STENCIL8:$===pp&&(de=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):$===null||$===Dl||$===Zd?de=n.DEPTH_COMPONENT24:$===is?de=n.DEPTH_COMPONENT32F:$===pp&&(de=n.DEPTH_COMPONENT16),de}function w(Z,$){return y(Z)===!0||Z.isFramebufferTexture&&Z.minFilter!==ii&&Z.minFilter!==Rn?Math.log2(Math.max($.width,$.height))+1:Z.mipmaps!==void 0&&Z.mipmaps.length>0?Z.mipmaps.length:Z.isCompressedTexture&&Array.isArray(Z.image)?$.mipmaps.length:1}function x(Z){const $=Z.target;$.removeEventListener("dispose",x),C($),$.isVideoTexture&&u.delete($)}function S(Z){const $=Z.target;$.removeEventListener("dispose",S),M($)}function C(Z){const $=i.get(Z);if($.__webglInit===void 0)return;const de=Z.source,Ae=h.get(de);if(Ae){const De=Ae[$.__cacheKey];De.usedTimes--,De.usedTimes===0&&T(Z),Object.keys(Ae).length===0&&h.delete(de)}i.remove(Z)}function T(Z){const $=i.get(Z);n.deleteTexture($.__webglTexture);const de=Z.source,Ae=h.get(de);delete Ae[$.__cacheKey],o.memory.textures--}function M(Z){const $=i.get(Z);if(Z.depthTexture&&Z.depthTexture.dispose(),Z.isWebGLCubeRenderTarget)for(let Ae=0;Ae<6;Ae++){if(Array.isArray($.__webglFramebuffer[Ae]))for(let De=0;De<$.__webglFramebuffer[Ae].length;De++)n.deleteFramebuffer($.__webglFramebuffer[Ae][De]);else n.deleteFramebuffer($.__webglFramebuffer[Ae]);$.__webglDepthbuffer&&n.deleteRenderbuffer($.__webglDepthbuffer[Ae])}else{if(Array.isArray($.__webglFramebuffer))for(let Ae=0;Ae<$.__webglFramebuffer.length;Ae++)n.deleteFramebuffer($.__webglFramebuffer[Ae]);else n.deleteFramebuffer($.__webglFramebuffer);if($.__webglDepthbuffer&&n.deleteRenderbuffer($.__webglDepthbuffer),$.__webglMultisampledFramebuffer&&n.deleteFramebuffer($.__webglMultisampledFramebuffer),$.__webglColorRenderbuffer)for(let Ae=0;Ae<$.__webglColorRenderbuffer.length;Ae++)$.__webglColorRenderbuffer[Ae]&&n.deleteRenderbuffer($.__webglColorRenderbuffer[Ae]);$.__webglDepthRenderbuffer&&n.deleteRenderbuffer($.__webglDepthRenderbuffer)}const de=Z.textures;for(let Ae=0,De=de.length;Ae<De;Ae++){const fe=i.get(de[Ae]);fe.__webglTexture&&(n.deleteTexture(fe.__webglTexture),o.memory.textures--),i.remove(de[Ae])}i.remove(Z)}let E=0;function A(){E=0}function I(){const Z=E;return Z>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Z+" texture units while this GPU supports only "+s.maxTextures),E+=1,Z}function B(Z){const $=[];return $.push(Z.wrapS),$.push(Z.wrapT),$.push(Z.wrapR||0),$.push(Z.magFilter),$.push(Z.minFilter),$.push(Z.anisotropy),$.push(Z.internalFormat),$.push(Z.format),$.push(Z.type),$.push(Z.generateMipmaps),$.push(Z.premultiplyAlpha),$.push(Z.flipY),$.push(Z.unpackAlignment),$.push(Z.colorSpace),$.join()}function F(Z,$){const de=i.get(Z);if(Z.isVideoTexture&&me(Z),Z.isRenderTargetTexture===!1&&Z.version>0&&de.__version!==Z.version){const Ae=Z.image;if(Ae===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ae.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ce(de,Z,$);return}}t.bindTexture(n.TEXTURE_2D,de.__webglTexture,n.TEXTURE0+$)}function U(Z,$){const de=i.get(Z);if(Z.version>0&&de.__version!==Z.version){ce(de,Z,$);return}t.bindTexture(n.TEXTURE_2D_ARRAY,de.__webglTexture,n.TEXTURE0+$)}function P(Z,$){const de=i.get(Z);if(Z.version>0&&de.__version!==Z.version){ce(de,Z,$);return}t.bindTexture(n.TEXTURE_3D,de.__webglTexture,n.TEXTURE0+$)}function O(Z,$){const de=i.get(Z);if(Z.version>0&&de.__version!==Z.version){ae(de,Z,$);return}t.bindTexture(n.TEXTURE_CUBE_MAP,de.__webglTexture,n.TEXTURE0+$)}const D={[Qr]:n.REPEAT,[Sr]:n.CLAMP_TO_EDGE,[qd]:n.MIRRORED_REPEAT},L={[ii]:n.NEAREST,[jv]:n.NEAREST_MIPMAP_NEAREST,[Bc]:n.NEAREST_MIPMAP_LINEAR,[Rn]:n.LINEAR,[Ad]:n.LINEAR_MIPMAP_NEAREST,[Cr]:n.LINEAR_MIPMAP_LINEAR},H={[pz]:n.NEVER,[bz]:n.ALWAYS,[mz]:n.LESS,[E2]:n.LEQUAL,[gz]:n.EQUAL,[_z]:n.GEQUAL,[vz]:n.GREATER,[yz]:n.NOTEQUAL};function X(Z,$){if($.type===is&&e.has("OES_texture_float_linear")===!1&&($.magFilter===Rn||$.magFilter===Ad||$.magFilter===Bc||$.magFilter===Cr||$.minFilter===Rn||$.minFilter===Ad||$.minFilter===Bc||$.minFilter===Cr)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(Z,n.TEXTURE_WRAP_S,D[$.wrapS]),n.texParameteri(Z,n.TEXTURE_WRAP_T,D[$.wrapT]),(Z===n.TEXTURE_3D||Z===n.TEXTURE_2D_ARRAY)&&n.texParameteri(Z,n.TEXTURE_WRAP_R,D[$.wrapR]),n.texParameteri(Z,n.TEXTURE_MAG_FILTER,L[$.magFilter]),n.texParameteri(Z,n.TEXTURE_MIN_FILTER,L[$.minFilter]),$.compareFunction&&(n.texParameteri(Z,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(Z,n.TEXTURE_COMPARE_FUNC,H[$.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if($.magFilter===ii||$.minFilter!==Bc&&$.minFilter!==Cr||$.type===is&&e.has("OES_texture_float_linear")===!1)return;if($.anisotropy>1||i.get($).__currentAnisotropy){const de=e.get("EXT_texture_filter_anisotropic");n.texParameterf(Z,de.TEXTURE_MAX_ANISOTROPY_EXT,Math.min($.anisotropy,s.getMaxAnisotropy())),i.get($).__currentAnisotropy=$.anisotropy}}}function ne(Z,$){let de=!1;Z.__webglInit===void 0&&(Z.__webglInit=!0,$.addEventListener("dispose",x));const Ae=$.source;let De=h.get(Ae);De===void 0&&(De={},h.set(Ae,De));const fe=B($);if(fe!==Z.__cacheKey){De[fe]===void 0&&(De[fe]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,de=!0),De[fe].usedTimes++;const Ge=De[Z.__cacheKey];Ge!==void 0&&(De[Z.__cacheKey].usedTimes--,Ge.usedTimes===0&&T($)),Z.__cacheKey=fe,Z.__webglTexture=De[fe].texture}return de}function ce(Z,$,de){let Ae=n.TEXTURE_2D;($.isDataArrayTexture||$.isCompressedArrayTexture)&&(Ae=n.TEXTURE_2D_ARRAY),$.isData3DTexture&&(Ae=n.TEXTURE_3D);const De=ne(Z,$),fe=$.source;t.bindTexture(Ae,Z.__webglTexture,n.TEXTURE0+de);const Ge=i.get(fe);if(fe.version!==Ge.__version||De===!0){t.activeTexture(n.TEXTURE0+de);const We=Cn.getPrimaries(Cn.workingColorSpace),je=$.colorSpace===Ea?null:Cn.getPrimaries($.colorSpace),at=$.colorSpace===Ea||We===je?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,$.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,$.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,at);let Ue=p($.image,!1,s.maxTextureSize);Ue=be($,Ue);const qe=r.convert($.format,$.colorSpace),Fe=r.convert($.type);let Ie=_($.internalFormat,qe,Fe,$.colorSpace,$.isVideoTexture);X(Ae,$);let oe;const Le=$.mipmaps,Ke=$.isVideoTexture!==!0,ft=Ge.__version===void 0||De===!0,Q=fe.dataReady,$e=w($,Ue);if($.isDepthTexture)Ie=b($.format===Jd,$.type),ft&&(Ke?t.texStorage2D(n.TEXTURE_2D,1,Ie,Ue.width,Ue.height):t.texImage2D(n.TEXTURE_2D,0,Ie,Ue.width,Ue.height,0,qe,Fe,null));else if($.isDataTexture)if(Le.length>0){Ke&&ft&&t.texStorage2D(n.TEXTURE_2D,$e,Ie,Le[0].width,Le[0].height);for(let Oe=0,et=Le.length;Oe<et;Oe++)oe=Le[Oe],Ke?Q&&t.texSubImage2D(n.TEXTURE_2D,Oe,0,0,oe.width,oe.height,qe,Fe,oe.data):t.texImage2D(n.TEXTURE_2D,Oe,Ie,oe.width,oe.height,0,qe,Fe,oe.data);$.generateMipmaps=!1}else Ke?(ft&&t.texStorage2D(n.TEXTURE_2D,$e,Ie,Ue.width,Ue.height),Q&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ue.width,Ue.height,qe,Fe,Ue.data)):t.texImage2D(n.TEXTURE_2D,0,Ie,Ue.width,Ue.height,0,qe,Fe,Ue.data);else if($.isCompressedTexture)if($.isCompressedArrayTexture){Ke&&ft&&t.texStorage3D(n.TEXTURE_2D_ARRAY,$e,Ie,Le[0].width,Le[0].height,Ue.depth);for(let Oe=0,et=Le.length;Oe<et;Oe++)if(oe=Le[Oe],$.format!==Oi)if(qe!==null)if(Ke){if(Q)if($.layerUpdates.size>0){const ht=SM(oe.width,oe.height,$.format,$.type);for(const At of $.layerUpdates){const Ot=oe.data.subarray(At*ht/oe.data.BYTES_PER_ELEMENT,(At+1)*ht/oe.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Oe,0,0,At,oe.width,oe.height,1,qe,Ot,0,0)}$.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Oe,0,0,0,oe.width,oe.height,Ue.depth,qe,oe.data,0,0)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Oe,Ie,oe.width,oe.height,Ue.depth,0,oe.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ke?Q&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Oe,0,0,0,oe.width,oe.height,Ue.depth,qe,Fe,oe.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Oe,Ie,oe.width,oe.height,Ue.depth,0,qe,Fe,oe.data)}else{Ke&&ft&&t.texStorage2D(n.TEXTURE_2D,$e,Ie,Le[0].width,Le[0].height);for(let Oe=0,et=Le.length;Oe<et;Oe++)oe=Le[Oe],$.format!==Oi?qe!==null?Ke?Q&&t.compressedTexSubImage2D(n.TEXTURE_2D,Oe,0,0,oe.width,oe.height,qe,oe.data):t.compressedTexImage2D(n.TEXTURE_2D,Oe,Ie,oe.width,oe.height,0,oe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ke?Q&&t.texSubImage2D(n.TEXTURE_2D,Oe,0,0,oe.width,oe.height,qe,Fe,oe.data):t.texImage2D(n.TEXTURE_2D,Oe,Ie,oe.width,oe.height,0,qe,Fe,oe.data)}else if($.isDataArrayTexture)if(Ke){if(ft&&t.texStorage3D(n.TEXTURE_2D_ARRAY,$e,Ie,Ue.width,Ue.height,Ue.depth),Q)if($.layerUpdates.size>0){const Oe=SM(Ue.width,Ue.height,$.format,$.type);for(const et of $.layerUpdates){const ht=Ue.data.subarray(et*Oe/Ue.data.BYTES_PER_ELEMENT,(et+1)*Oe/Ue.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,et,Ue.width,Ue.height,1,qe,Fe,ht)}$.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ue.width,Ue.height,Ue.depth,qe,Fe,Ue.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Ie,Ue.width,Ue.height,Ue.depth,0,qe,Fe,Ue.data);else if($.isData3DTexture)Ke?(ft&&t.texStorage3D(n.TEXTURE_3D,$e,Ie,Ue.width,Ue.height,Ue.depth),Q&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ue.width,Ue.height,Ue.depth,qe,Fe,Ue.data)):t.texImage3D(n.TEXTURE_3D,0,Ie,Ue.width,Ue.height,Ue.depth,0,qe,Fe,Ue.data);else if($.isFramebufferTexture){if(ft)if(Ke)t.texStorage2D(n.TEXTURE_2D,$e,Ie,Ue.width,Ue.height);else{let Oe=Ue.width,et=Ue.height;for(let ht=0;ht<$e;ht++)t.texImage2D(n.TEXTURE_2D,ht,Ie,Oe,et,0,qe,Fe,null),Oe>>=1,et>>=1}}else if(Le.length>0){if(Ke&&ft){const Oe=Pe(Le[0]);t.texStorage2D(n.TEXTURE_2D,$e,Ie,Oe.width,Oe.height)}for(let Oe=0,et=Le.length;Oe<et;Oe++)oe=Le[Oe],Ke?Q&&t.texSubImage2D(n.TEXTURE_2D,Oe,0,0,qe,Fe,oe):t.texImage2D(n.TEXTURE_2D,Oe,Ie,qe,Fe,oe);$.generateMipmaps=!1}else if(Ke){if(ft){const Oe=Pe(Ue);t.texStorage2D(n.TEXTURE_2D,$e,Ie,Oe.width,Oe.height)}Q&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,qe,Fe,Ue)}else t.texImage2D(n.TEXTURE_2D,0,Ie,qe,Fe,Ue);y($)&&v(Ae),Ge.__version=fe.version,$.onUpdate&&$.onUpdate($)}Z.__version=$.version}function ae(Z,$,de){if($.image.length!==6)return;const Ae=ne(Z,$),De=$.source;t.bindTexture(n.TEXTURE_CUBE_MAP,Z.__webglTexture,n.TEXTURE0+de);const fe=i.get(De);if(De.version!==fe.__version||Ae===!0){t.activeTexture(n.TEXTURE0+de);const Ge=Cn.getPrimaries(Cn.workingColorSpace),We=$.colorSpace===Ea?null:Cn.getPrimaries($.colorSpace),je=$.colorSpace===Ea||Ge===We?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,$.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,$.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,je);const at=$.isCompressedTexture||$.image[0].isCompressedTexture,Ue=$.image[0]&&$.image[0].isDataTexture,qe=[];for(let et=0;et<6;et++)!at&&!Ue?qe[et]=p($.image[et],!0,s.maxCubemapSize):qe[et]=Ue?$.image[et].image:$.image[et],qe[et]=be($,qe[et]);const Fe=qe[0],Ie=r.convert($.format,$.colorSpace),oe=r.convert($.type),Le=_($.internalFormat,Ie,oe,$.colorSpace),Ke=$.isVideoTexture!==!0,ft=fe.__version===void 0||Ae===!0,Q=De.dataReady;let $e=w($,Fe);X(n.TEXTURE_CUBE_MAP,$);let Oe;if(at){Ke&&ft&&t.texStorage2D(n.TEXTURE_CUBE_MAP,$e,Le,Fe.width,Fe.height);for(let et=0;et<6;et++){Oe=qe[et].mipmaps;for(let ht=0;ht<Oe.length;ht++){const At=Oe[ht];$.format!==Oi?Ie!==null?Ke?Q&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,ht,0,0,At.width,At.height,Ie,At.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,ht,Le,At.width,At.height,0,At.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ke?Q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,ht,0,0,At.width,At.height,Ie,oe,At.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,ht,Le,At.width,At.height,0,Ie,oe,At.data)}}}else{if(Oe=$.mipmaps,Ke&&ft){Oe.length>0&&$e++;const et=Pe(qe[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,$e,Le,et.width,et.height)}for(let et=0;et<6;et++)if(Ue){Ke?Q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,0,0,0,qe[et].width,qe[et].height,Ie,oe,qe[et].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,0,Le,qe[et].width,qe[et].height,0,Ie,oe,qe[et].data);for(let ht=0;ht<Oe.length;ht++){const Ot=Oe[ht].image[et].image;Ke?Q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,ht+1,0,0,Ot.width,Ot.height,Ie,oe,Ot.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,ht+1,Le,Ot.width,Ot.height,0,Ie,oe,Ot.data)}}else{Ke?Q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,0,0,0,Ie,oe,qe[et]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,0,Le,Ie,oe,qe[et]);for(let ht=0;ht<Oe.length;ht++){const At=Oe[ht];Ke?Q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,ht+1,0,0,Ie,oe,At.image[et]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,ht+1,Le,Ie,oe,At.image[et])}}}y($)&&v(n.TEXTURE_CUBE_MAP),fe.__version=De.version,$.onUpdate&&$.onUpdate($)}Z.__version=$.version}function _e(Z,$,de,Ae,De,fe){const Ge=r.convert(de.format,de.colorSpace),We=r.convert(de.type),je=_(de.internalFormat,Ge,We,de.colorSpace);if(!i.get($).__hasExternalTextures){const Ue=Math.max(1,$.width>>fe),qe=Math.max(1,$.height>>fe);De===n.TEXTURE_3D||De===n.TEXTURE_2D_ARRAY?t.texImage3D(De,fe,je,Ue,qe,$.depth,0,Ge,We,null):t.texImage2D(De,fe,je,Ue,qe,0,Ge,We,null)}t.bindFramebuffer(n.FRAMEBUFFER,Z),ye($)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ae,De,i.get(de).__webglTexture,0,ve($)):(De===n.TEXTURE_2D||De>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&De<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ae,De,i.get(de).__webglTexture,fe),t.bindFramebuffer(n.FRAMEBUFFER,null)}function re(Z,$,de){if(n.bindRenderbuffer(n.RENDERBUFFER,Z),$.depthBuffer){const Ae=$.depthTexture,De=Ae&&Ae.isDepthTexture?Ae.type:null,fe=b($.stencilBuffer,De),Ge=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,We=ve($);ye($)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,We,fe,$.width,$.height):de?n.renderbufferStorageMultisample(n.RENDERBUFFER,We,fe,$.width,$.height):n.renderbufferStorage(n.RENDERBUFFER,fe,$.width,$.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ge,n.RENDERBUFFER,Z)}else{const Ae=$.textures;for(let De=0;De<Ae.length;De++){const fe=Ae[De],Ge=r.convert(fe.format,fe.colorSpace),We=r.convert(fe.type),je=_(fe.internalFormat,Ge,We,fe.colorSpace),at=ve($);de&&ye($)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,at,je,$.width,$.height):ye($)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,at,je,$.width,$.height):n.renderbufferStorage(n.RENDERBUFFER,je,$.width,$.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function xe(Z,$){if($&&$.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,Z),!($.depthTexture&&$.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get($.depthTexture).__webglTexture||$.depthTexture.image.width!==$.width||$.depthTexture.image.height!==$.height)&&($.depthTexture.image.width=$.width,$.depthTexture.image.height=$.height,$.depthTexture.needsUpdate=!0),F($.depthTexture,0);const Ae=i.get($.depthTexture).__webglTexture,De=ve($);if($.depthTexture.format===Id)ye($)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ae,0,De):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ae,0);else if($.depthTexture.format===Jd)ye($)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ae,0,De):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ae,0);else throw new Error("Unknown depthTexture format")}function he(Z){const $=i.get(Z),de=Z.isWebGLCubeRenderTarget===!0;if(Z.depthTexture&&!$.__autoAllocateDepthBuffer){if(de)throw new Error("target.depthTexture not supported in Cube render targets");xe($.__webglFramebuffer,Z)}else if(de){$.__webglDepthbuffer=[];for(let Ae=0;Ae<6;Ae++)t.bindFramebuffer(n.FRAMEBUFFER,$.__webglFramebuffer[Ae]),$.__webglDepthbuffer[Ae]=n.createRenderbuffer(),re($.__webglDepthbuffer[Ae],Z,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,$.__webglFramebuffer),$.__webglDepthbuffer=n.createRenderbuffer(),re($.__webglDepthbuffer,Z,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Te(Z,$,de){const Ae=i.get(Z);$!==void 0&&_e(Ae.__webglFramebuffer,Z,Z.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),de!==void 0&&he(Z)}function Ce(Z){const $=Z.texture,de=i.get(Z),Ae=i.get($);Z.addEventListener("dispose",S);const De=Z.textures,fe=Z.isWebGLCubeRenderTarget===!0,Ge=De.length>1;if(Ge||(Ae.__webglTexture===void 0&&(Ae.__webglTexture=n.createTexture()),Ae.__version=$.version,o.memory.textures++),fe){de.__webglFramebuffer=[];for(let We=0;We<6;We++)if($.mipmaps&&$.mipmaps.length>0){de.__webglFramebuffer[We]=[];for(let je=0;je<$.mipmaps.length;je++)de.__webglFramebuffer[We][je]=n.createFramebuffer()}else de.__webglFramebuffer[We]=n.createFramebuffer()}else{if($.mipmaps&&$.mipmaps.length>0){de.__webglFramebuffer=[];for(let We=0;We<$.mipmaps.length;We++)de.__webglFramebuffer[We]=n.createFramebuffer()}else de.__webglFramebuffer=n.createFramebuffer();if(Ge)for(let We=0,je=De.length;We<je;We++){const at=i.get(De[We]);at.__webglTexture===void 0&&(at.__webglTexture=n.createTexture(),o.memory.textures++)}if(Z.samples>0&&ye(Z)===!1){de.__webglMultisampledFramebuffer=n.createFramebuffer(),de.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,de.__webglMultisampledFramebuffer);for(let We=0;We<De.length;We++){const je=De[We];de.__webglColorRenderbuffer[We]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,de.__webglColorRenderbuffer[We]);const at=r.convert(je.format,je.colorSpace),Ue=r.convert(je.type),qe=_(je.internalFormat,at,Ue,je.colorSpace,Z.isXRRenderTarget===!0),Fe=ve(Z);n.renderbufferStorageMultisample(n.RENDERBUFFER,Fe,qe,Z.width,Z.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+We,n.RENDERBUFFER,de.__webglColorRenderbuffer[We])}n.bindRenderbuffer(n.RENDERBUFFER,null),Z.depthBuffer&&(de.__webglDepthRenderbuffer=n.createRenderbuffer(),re(de.__webglDepthRenderbuffer,Z,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(fe){t.bindTexture(n.TEXTURE_CUBE_MAP,Ae.__webglTexture),X(n.TEXTURE_CUBE_MAP,$);for(let We=0;We<6;We++)if($.mipmaps&&$.mipmaps.length>0)for(let je=0;je<$.mipmaps.length;je++)_e(de.__webglFramebuffer[We][je],Z,$,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+We,je);else _e(de.__webglFramebuffer[We],Z,$,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+We,0);y($)&&v(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ge){for(let We=0,je=De.length;We<je;We++){const at=De[We],Ue=i.get(at);t.bindTexture(n.TEXTURE_2D,Ue.__webglTexture),X(n.TEXTURE_2D,at),_e(de.__webglFramebuffer,Z,at,n.COLOR_ATTACHMENT0+We,n.TEXTURE_2D,0),y(at)&&v(n.TEXTURE_2D)}t.unbindTexture()}else{let We=n.TEXTURE_2D;if((Z.isWebGL3DRenderTarget||Z.isWebGLArrayRenderTarget)&&(We=Z.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(We,Ae.__webglTexture),X(We,$),$.mipmaps&&$.mipmaps.length>0)for(let je=0;je<$.mipmaps.length;je++)_e(de.__webglFramebuffer[je],Z,$,n.COLOR_ATTACHMENT0,We,je);else _e(de.__webglFramebuffer,Z,$,n.COLOR_ATTACHMENT0,We,0);y($)&&v(We),t.unbindTexture()}Z.depthBuffer&&he(Z)}function we(Z){const $=Z.textures;for(let de=0,Ae=$.length;de<Ae;de++){const De=$[de];if(y(De)){const fe=Z.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Ge=i.get(De).__webglTexture;t.bindTexture(fe,Ge),v(fe),t.unbindTexture()}}}const K=[],j=[];function ie(Z){if(Z.samples>0){if(ye(Z)===!1){const $=Z.textures,de=Z.width,Ae=Z.height;let De=n.COLOR_BUFFER_BIT;const fe=Z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ge=i.get(Z),We=$.length>1;if(We)for(let je=0;je<$.length;je++)t.bindFramebuffer(n.FRAMEBUFFER,Ge.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+je,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ge.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+je,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ge.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ge.__webglFramebuffer);for(let je=0;je<$.length;je++){if(Z.resolveDepthBuffer&&(Z.depthBuffer&&(De|=n.DEPTH_BUFFER_BIT),Z.stencilBuffer&&Z.resolveStencilBuffer&&(De|=n.STENCIL_BUFFER_BIT)),We){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ge.__webglColorRenderbuffer[je]);const at=i.get($[je]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,at,0)}n.blitFramebuffer(0,0,de,Ae,0,0,de,Ae,De,n.NEAREST),l===!0&&(K.length=0,j.length=0,K.push(n.COLOR_ATTACHMENT0+je),Z.depthBuffer&&Z.resolveDepthBuffer===!1&&(K.push(fe),j.push(fe),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,j)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,K))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),We)for(let je=0;je<$.length;je++){t.bindFramebuffer(n.FRAMEBUFFER,Ge.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+je,n.RENDERBUFFER,Ge.__webglColorRenderbuffer[je]);const at=i.get($[je]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ge.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+je,n.TEXTURE_2D,at,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ge.__webglMultisampledFramebuffer)}else if(Z.depthBuffer&&Z.resolveDepthBuffer===!1&&l){const $=Z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[$])}}}function ve(Z){return Math.min(s.maxSamples,Z.samples)}function ye(Z){const $=i.get(Z);return Z.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&$.__useRenderToTexture!==!1}function me(Z){const $=o.render.frame;u.get(Z)!==$&&(u.set(Z,$),Z.update())}function be(Z,$){const de=Z.colorSpace,Ae=Z.format,De=Z.type;return Z.isCompressedTexture===!0||Z.isVideoTexture===!0||de!==qn&&de!==Ea&&(Cn.getTransfer(de)===ui?(Ae!==Oi||De!==Wa)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",de)),$}function Pe(Z){return typeof HTMLImageElement<"u"&&Z instanceof HTMLImageElement?(c.width=Z.naturalWidth||Z.width,c.height=Z.naturalHeight||Z.height):typeof VideoFrame<"u"&&Z instanceof VideoFrame?(c.width=Z.displayWidth,c.height=Z.displayHeight):(c.width=Z.width,c.height=Z.height),c}this.allocateTextureUnit=I,this.resetTextureUnits=A,this.setTexture2D=F,this.setTexture2DArray=U,this.setTexture3D=P,this.setTextureCube=O,this.rebindTextures=Te,this.setupRenderTarget=Ce,this.updateRenderTargetMipmap=we,this.updateMultisampleRenderTarget=ie,this.setupDepthRenderbuffer=he,this.setupFrameBufferTexture=_e,this.useMultisampledRTT=ye}function Dz(n,e){function t(i,s=Ea){let r;const o=Cn.getTransfer(s);if(i===Wa)return n.UNSIGNED_BYTE;if(i===Z1)return n.UNSIGNED_SHORT_4_4_4_4;if(i===J1)return n.UNSIGNED_SHORT_5_5_5_1;if(i===y2)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===g2)return n.BYTE;if(i===v2)return n.SHORT;if(i===pp)return n.UNSIGNED_SHORT;if(i===q1)return n.INT;if(i===Dl)return n.UNSIGNED_INT;if(i===is)return n.FLOAT;if(i===Ki)return n.HALF_FLOAT;if(i===_2)return n.ALPHA;if(i===b2)return n.RGB;if(i===Oi)return n.RGBA;if(i===w2)return n.LUMINANCE;if(i===x2)return n.LUMINANCE_ALPHA;if(i===Id)return n.DEPTH_COMPONENT;if(i===Jd)return n.DEPTH_STENCIL;if(i===qv)return n.RED;if(i===Zv)return n.RED_INTEGER;if(i===S2)return n.RG;if(i===Q1)return n.RG_INTEGER;if(i===ew)return n.RGBA_INTEGER;if(i===ng||i===ig||i===sg||i===rg)if(o===ui)if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(i===ng)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===ig)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===sg)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===rg)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=e.get("WEBGL_compressed_texture_s3tc"),r!==null){if(i===ng)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===ig)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===sg)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===rg)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===fb||i===pb||i===mb||i===gb)if(r=e.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(i===fb)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===pb)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===mb)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===gb)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===vb||i===yb||i===_b)if(r=e.get("WEBGL_compressed_texture_etc"),r!==null){if(i===vb||i===yb)return o===ui?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(i===_b)return o===ui?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===bb||i===wb||i===xb||i===Sb||i===Cb||i===Mb||i===Eb||i===Tb||i===Ab||i===Ib||i===Rb||i===Pb||i===Lb||i===kb)if(r=e.get("WEBGL_compressed_texture_astc"),r!==null){if(i===bb)return o===ui?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===wb)return o===ui?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===xb)return o===ui?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Sb)return o===ui?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Cb)return o===ui?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Mb)return o===ui?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Eb)return o===ui?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Tb)return o===ui?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Ab)return o===ui?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Ib)return o===ui?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Rb)return o===ui?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Pb)return o===ui?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Lb)return o===ui?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===kb)return o===ui?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===og||i===Ob||i===Db)if(r=e.get("EXT_texture_compression_bptc"),r!==null){if(i===og)return o===ui?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===Ob)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Db)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===C2||i===Nb||i===Fb||i===Bb)if(r=e.get("EXT_texture_compression_rgtc"),r!==null){if(i===og)return r.COMPRESSED_RED_RGTC1_EXT;if(i===Nb)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Fb)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===Bb)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Zd?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}class Nz extends Yi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class As extends rn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const yCe={type:"move"};class jx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new As,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new As,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new G,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new G),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new As,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new G,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new G),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let s=null,r=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const p of e.hand.values()){const y=t.getJointPose(p,i),v=this._getHandJoint(c,p);y!==null&&(v.matrix.fromArray(y.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=y.radius),v.visible=y!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],h=u.position.distanceTo(d.position),f=.02,m=.005;c.inputState.pinching&&h>f+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=f-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,i),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(s=t.getPose(e.targetRaySpace,i),s===null&&r!==null&&(s=r),s!==null&&(a.matrix.fromArray(s.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,s.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(s.linearVelocity)):a.hasLinearVelocity=!1,s.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(s.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(yCe)))}return a!==null&&(a.visible=s!==null),l!==null&&(l.visible=r!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new As;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const _Ce=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,bCe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class wCe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const s=new Wn,r=e.properties.get(s);r.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=s}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new Bi({vertexShader:_Ce,fragmentShader:bCe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new ut(new ua(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class xCe extends qa{constructor(e,t){super();const i=this;let s=null,r=1,o=null,a="local-floor",l=1,c=null,u=null,d=null,h=null,f=null,m=null;const p=new wCe,y=t.getContextAttributes();let v=null,_=null;const b=[],w=[],x=new tt;let S=null;const C=new Yi;C.layers.enable(1),C.viewport=new Ln;const T=new Yi;T.layers.enable(2),T.viewport=new Ln;const M=[C,T],E=new Nz;E.layers.enable(1),E.layers.enable(2);let A=null,I=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ae){let _e=b[ae];return _e===void 0&&(_e=new jx,b[ae]=_e),_e.getTargetRaySpace()},this.getControllerGrip=function(ae){let _e=b[ae];return _e===void 0&&(_e=new jx,b[ae]=_e),_e.getGripSpace()},this.getHand=function(ae){let _e=b[ae];return _e===void 0&&(_e=new jx,b[ae]=_e),_e.getHandSpace()};function B(ae){const _e=w.indexOf(ae.inputSource);if(_e===-1)return;const re=b[_e];re!==void 0&&(re.update(ae.inputSource,ae.frame,c||o),re.dispatchEvent({type:ae.type,data:ae.inputSource}))}function F(){s.removeEventListener("select",B),s.removeEventListener("selectstart",B),s.removeEventListener("selectend",B),s.removeEventListener("squeeze",B),s.removeEventListener("squeezestart",B),s.removeEventListener("squeezeend",B),s.removeEventListener("end",F),s.removeEventListener("inputsourceschange",U);for(let ae=0;ae<b.length;ae++){const _e=w[ae];_e!==null&&(w[ae]=null,b[ae].disconnect(_e))}A=null,I=null,p.reset(),e.setRenderTarget(v),f=null,h=null,d=null,s=null,_=null,ce.stop(),i.isPresenting=!1,e.setPixelRatio(S),e.setSize(x.width,x.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ae){r=ae,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ae){a=ae,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(ae){c=ae},this.getBaseLayer=function(){return h!==null?h:f},this.getBinding=function(){return d},this.getFrame=function(){return m},this.getSession=function(){return s},this.setSession=async function(ae){if(s=ae,s!==null){if(v=e.getRenderTarget(),s.addEventListener("select",B),s.addEventListener("selectstart",B),s.addEventListener("selectend",B),s.addEventListener("squeeze",B),s.addEventListener("squeezestart",B),s.addEventListener("squeezeend",B),s.addEventListener("end",F),s.addEventListener("inputsourceschange",U),y.xrCompatible!==!0&&await t.makeXRCompatible(),S=e.getPixelRatio(),e.getSize(x),s.renderState.layers===void 0){const _e={antialias:y.antialias,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:r};f=new XRWebGLLayer(s,t,_e),s.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),_=new Ti(f.framebufferWidth,f.framebufferHeight,{format:Oi,type:Wa,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil})}else{let _e=null,re=null,xe=null;y.depth&&(xe=y.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,_e=y.stencil?Jd:Id,re=y.stencil?Zd:Dl);const he={colorFormat:t.RGBA8,depthFormat:xe,scaleFactor:r};d=new XRWebGLBinding(s,t),h=d.createProjectionLayer(he),s.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),_=new Ti(h.textureWidth,h.textureHeight,{format:Oi,type:Wa,depthTexture:new P2(h.textureWidth,h.textureHeight,re,void 0,void 0,void 0,void 0,void 0,void 0,_e),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1})}_.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await s.requestReferenceSpace(a),ce.setContext(s),ce.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return p.getDepthTexture()};function U(ae){for(let _e=0;_e<ae.removed.length;_e++){const re=ae.removed[_e],xe=w.indexOf(re);xe>=0&&(w[xe]=null,b[xe].disconnect(re))}for(let _e=0;_e<ae.added.length;_e++){const re=ae.added[_e];let xe=w.indexOf(re);if(xe===-1){for(let Te=0;Te<b.length;Te++)if(Te>=w.length){w.push(re),xe=Te;break}else if(w[Te]===null){w[Te]=re,xe=Te;break}if(xe===-1)break}const he=b[xe];he&&he.connect(re)}}const P=new G,O=new G;function D(ae,_e,re){P.setFromMatrixPosition(_e.matrixWorld),O.setFromMatrixPosition(re.matrixWorld);const xe=P.distanceTo(O),he=_e.projectionMatrix.elements,Te=re.projectionMatrix.elements,Ce=he[14]/(he[10]-1),we=he[14]/(he[10]+1),K=(he[9]+1)/he[5],j=(he[9]-1)/he[5],ie=(he[8]-1)/he[0],ve=(Te[8]+1)/Te[0],ye=Ce*ie,me=Ce*ve,be=xe/(-ie+ve),Pe=be*-ie;_e.matrixWorld.decompose(ae.position,ae.quaternion,ae.scale),ae.translateX(Pe),ae.translateZ(be),ae.matrixWorld.compose(ae.position,ae.quaternion,ae.scale),ae.matrixWorldInverse.copy(ae.matrixWorld).invert();const Z=Ce+be,$=we+be,de=ye-Pe,Ae=me+(xe-Pe),De=K*we/$*Z,fe=j*we/$*Z;ae.projectionMatrix.makePerspective(de,Ae,De,fe,Z,$),ae.projectionMatrixInverse.copy(ae.projectionMatrix).invert()}function L(ae,_e){_e===null?ae.matrixWorld.copy(ae.matrix):ae.matrixWorld.multiplyMatrices(_e.matrixWorld,ae.matrix),ae.matrixWorldInverse.copy(ae.matrixWorld).invert()}this.updateCamera=function(ae){if(s===null)return;p.texture!==null&&(ae.near=p.depthNear,ae.far=p.depthFar),E.near=T.near=C.near=ae.near,E.far=T.far=C.far=ae.far,(A!==E.near||I!==E.far)&&(s.updateRenderState({depthNear:E.near,depthFar:E.far}),A=E.near,I=E.far,C.near=A,C.far=I,T.near=A,T.far=I,C.updateProjectionMatrix(),T.updateProjectionMatrix(),ae.updateProjectionMatrix());const _e=ae.parent,re=E.cameras;L(E,_e);for(let xe=0;xe<re.length;xe++)L(re[xe],_e);re.length===2?D(E,C,T):E.projectionMatrix.copy(C.projectionMatrix),H(ae,E,_e)};function H(ae,_e,re){re===null?ae.matrix.copy(_e.matrixWorld):(ae.matrix.copy(re.matrixWorld),ae.matrix.invert(),ae.matrix.multiply(_e.matrixWorld)),ae.matrix.decompose(ae.position,ae.quaternion,ae.scale),ae.updateMatrixWorld(!0),ae.projectionMatrix.copy(_e.projectionMatrix),ae.projectionMatrixInverse.copy(_e.projectionMatrixInverse),ae.isPerspectiveCamera&&(ae.fov=mp*2*Math.atan(1/ae.projectionMatrix.elements[5]),ae.zoom=1)}this.getCamera=function(){return E},this.getFoveation=function(){if(!(h===null&&f===null))return l},this.setFoveation=function(ae){l=ae,h!==null&&(h.fixedFoveation=ae),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=ae)},this.hasDepthSensing=function(){return p.texture!==null},this.getDepthSensingMesh=function(){return p.getMesh(E)};let X=null;function ne(ae,_e){if(u=_e.getViewerPose(c||o),m=_e,u!==null){const re=u.views;f!==null&&(e.setRenderTargetFramebuffer(_,f.framebuffer),e.setRenderTarget(_));let xe=!1;re.length!==E.cameras.length&&(E.cameras.length=0,xe=!0);for(let Te=0;Te<re.length;Te++){const Ce=re[Te];let we=null;if(f!==null)we=f.getViewport(Ce);else{const j=d.getViewSubImage(h,Ce);we=j.viewport,Te===0&&(e.setRenderTargetTextures(_,j.colorTexture,h.ignoreDepthValues?void 0:j.depthStencilTexture),e.setRenderTarget(_))}let K=M[Te];K===void 0&&(K=new Yi,K.layers.enable(Te),K.viewport=new Ln,M[Te]=K),K.matrix.fromArray(Ce.transform.matrix),K.matrix.decompose(K.position,K.quaternion,K.scale),K.projectionMatrix.fromArray(Ce.projectionMatrix),K.projectionMatrixInverse.copy(K.projectionMatrix).invert(),K.viewport.set(we.x,we.y,we.width,we.height),Te===0&&(E.matrix.copy(K.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),xe===!0&&E.cameras.push(K)}const he=s.enabledFeatures;if(he&&he.includes("depth-sensing")){const Te=d.getDepthInformation(re[0]);Te&&Te.isValid&&Te.texture&&p.init(e,Te,s.renderState)}}for(let re=0;re<b.length;re++){const xe=w[re],he=b[re];xe!==null&&he!==void 0&&he.update(xe,_e,c||o)}X&&X(ae,_e),_e.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:_e}),m=null}const ce=new Rz;ce.setAnimationLoop(ne),this.setAnimationLoop=function(ae){X=ae},this.dispose=function(){}}}const Pu=new Js,SCe=new yt;function CCe(n,e){function t(y,v){y.matrixAutoUpdate===!0&&y.updateMatrix(),v.value.copy(y.matrix)}function i(y,v){v.color.getRGB(y.fogColor.value,Tz(n)),v.isFog?(y.fogNear.value=v.near,y.fogFar.value=v.far):v.isFogExp2&&(y.fogDensity.value=v.density)}function s(y,v,_,b,w){v.isMeshBasicMaterial||v.isMeshLambertMaterial?r(y,v):v.isMeshToonMaterial?(r(y,v),d(y,v)):v.isMeshPhongMaterial?(r(y,v),u(y,v)):v.isMeshStandardMaterial?(r(y,v),h(y,v),v.isMeshPhysicalMaterial&&f(y,v,w)):v.isMeshMatcapMaterial?(r(y,v),m(y,v)):v.isMeshDepthMaterial?r(y,v):v.isMeshDistanceMaterial?(r(y,v),p(y,v)):v.isMeshNormalMaterial?r(y,v):v.isLineBasicMaterial?(o(y,v),v.isLineDashedMaterial&&a(y,v)):v.isPointsMaterial?l(y,v,_,b):v.isSpriteMaterial?c(y,v):v.isShadowMaterial?(y.color.value.copy(v.color),y.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function r(y,v){y.opacity.value=v.opacity,v.color&&y.diffuse.value.copy(v.color),v.emissive&&y.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(y.map.value=v.map,t(v.map,y.mapTransform)),v.alphaMap&&(y.alphaMap.value=v.alphaMap,t(v.alphaMap,y.alphaMapTransform)),v.bumpMap&&(y.bumpMap.value=v.bumpMap,t(v.bumpMap,y.bumpMapTransform),y.bumpScale.value=v.bumpScale,v.side===bs&&(y.bumpScale.value*=-1)),v.normalMap&&(y.normalMap.value=v.normalMap,t(v.normalMap,y.normalMapTransform),y.normalScale.value.copy(v.normalScale),v.side===bs&&y.normalScale.value.negate()),v.displacementMap&&(y.displacementMap.value=v.displacementMap,t(v.displacementMap,y.displacementMapTransform),y.displacementScale.value=v.displacementScale,y.displacementBias.value=v.displacementBias),v.emissiveMap&&(y.emissiveMap.value=v.emissiveMap,t(v.emissiveMap,y.emissiveMapTransform)),v.specularMap&&(y.specularMap.value=v.specularMap,t(v.specularMap,y.specularMapTransform)),v.alphaTest>0&&(y.alphaTest.value=v.alphaTest);const _=e.get(v),b=_.envMap,w=_.envMapRotation;b&&(y.envMap.value=b,Pu.copy(w),Pu.x*=-1,Pu.y*=-1,Pu.z*=-1,b.isCubeTexture&&b.isRenderTargetTexture===!1&&(Pu.y*=-1,Pu.z*=-1),y.envMapRotation.value.setFromMatrix4(SCe.makeRotationFromEuler(Pu)),y.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=v.reflectivity,y.ior.value=v.ior,y.refractionRatio.value=v.refractionRatio),v.lightMap&&(y.lightMap.value=v.lightMap,y.lightMapIntensity.value=v.lightMapIntensity,t(v.lightMap,y.lightMapTransform)),v.aoMap&&(y.aoMap.value=v.aoMap,y.aoMapIntensity.value=v.aoMapIntensity,t(v.aoMap,y.aoMapTransform))}function o(y,v){y.diffuse.value.copy(v.color),y.opacity.value=v.opacity,v.map&&(y.map.value=v.map,t(v.map,y.mapTransform))}function a(y,v){y.dashSize.value=v.dashSize,y.totalSize.value=v.dashSize+v.gapSize,y.scale.value=v.scale}function l(y,v,_,b){y.diffuse.value.copy(v.color),y.opacity.value=v.opacity,y.size.value=v.size*_,y.scale.value=b*.5,v.map&&(y.map.value=v.map,t(v.map,y.uvTransform)),v.alphaMap&&(y.alphaMap.value=v.alphaMap,t(v.alphaMap,y.alphaMapTransform)),v.alphaTest>0&&(y.alphaTest.value=v.alphaTest)}function c(y,v){y.diffuse.value.copy(v.color),y.opacity.value=v.opacity,y.rotation.value=v.rotation,v.map&&(y.map.value=v.map,t(v.map,y.mapTransform)),v.alphaMap&&(y.alphaMap.value=v.alphaMap,t(v.alphaMap,y.alphaMapTransform)),v.alphaTest>0&&(y.alphaTest.value=v.alphaTest)}function u(y,v){y.specular.value.copy(v.specular),y.shininess.value=Math.max(v.shininess,1e-4)}function d(y,v){v.gradientMap&&(y.gradientMap.value=v.gradientMap)}function h(y,v){y.metalness.value=v.metalness,v.metalnessMap&&(y.metalnessMap.value=v.metalnessMap,t(v.metalnessMap,y.metalnessMapTransform)),y.roughness.value=v.roughness,v.roughnessMap&&(y.roughnessMap.value=v.roughnessMap,t(v.roughnessMap,y.roughnessMapTransform)),v.envMap&&(y.envMapIntensity.value=v.envMapIntensity)}function f(y,v,_){y.ior.value=v.ior,v.sheen>0&&(y.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),y.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(y.sheenColorMap.value=v.sheenColorMap,t(v.sheenColorMap,y.sheenColorMapTransform)),v.sheenRoughnessMap&&(y.sheenRoughnessMap.value=v.sheenRoughnessMap,t(v.sheenRoughnessMap,y.sheenRoughnessMapTransform))),v.clearcoat>0&&(y.clearcoat.value=v.clearcoat,y.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(y.clearcoatMap.value=v.clearcoatMap,t(v.clearcoatMap,y.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,t(v.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(y.clearcoatNormalMap.value=v.clearcoatNormalMap,t(v.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===bs&&y.clearcoatNormalScale.value.negate())),v.dispersion>0&&(y.dispersion.value=v.dispersion),v.iridescence>0&&(y.iridescence.value=v.iridescence,y.iridescenceIOR.value=v.iridescenceIOR,y.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(y.iridescenceMap.value=v.iridescenceMap,t(v.iridescenceMap,y.iridescenceMapTransform)),v.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=v.iridescenceThicknessMap,t(v.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),v.transmission>0&&(y.transmission.value=v.transmission,y.transmissionSamplerMap.value=_.texture,y.transmissionSamplerSize.value.set(_.width,_.height),v.transmissionMap&&(y.transmissionMap.value=v.transmissionMap,t(v.transmissionMap,y.transmissionMapTransform)),y.thickness.value=v.thickness,v.thicknessMap&&(y.thicknessMap.value=v.thicknessMap,t(v.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=v.attenuationDistance,y.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(y.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(y.anisotropyMap.value=v.anisotropyMap,t(v.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=v.specularIntensity,y.specularColor.value.copy(v.specularColor),v.specularColorMap&&(y.specularColorMap.value=v.specularColorMap,t(v.specularColorMap,y.specularColorMapTransform)),v.specularIntensityMap&&(y.specularIntensityMap.value=v.specularIntensityMap,t(v.specularIntensityMap,y.specularIntensityMapTransform))}function m(y,v){v.matcap&&(y.matcap.value=v.matcap)}function p(y,v){const _=e.get(v).light;y.referencePosition.value.setFromMatrixPosition(_.matrixWorld),y.nearDistance.value=_.shadow.camera.near,y.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:s}}function MCe(n,e,t,i){let s={},r={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(_,b){const w=b.program;i.uniformBlockBinding(_,w)}function c(_,b){let w=s[_.id];w===void 0&&(m(_),w=u(_),s[_.id]=w,_.addEventListener("dispose",y));const x=b.program;i.updateUBOMapping(_,x);const S=e.render.frame;r[_.id]!==S&&(h(_),r[_.id]=S)}function u(_){const b=d();_.__bindingPointIndex=b;const w=n.createBuffer(),x=_.__size,S=_.usage;return n.bindBuffer(n.UNIFORM_BUFFER,w),n.bufferData(n.UNIFORM_BUFFER,x,S),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,b,w),w}function d(){for(let _=0;_<a;_++)if(o.indexOf(_)===-1)return o.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(_){const b=s[_.id],w=_.uniforms,x=_.__cache;n.bindBuffer(n.UNIFORM_BUFFER,b);for(let S=0,C=w.length;S<C;S++){const T=Array.isArray(w[S])?w[S]:[w[S]];for(let M=0,E=T.length;M<E;M++){const A=T[M];if(f(A,S,M,x)===!0){const I=A.__offset,B=Array.isArray(A.value)?A.value:[A.value];let F=0;for(let U=0;U<B.length;U++){const P=B[U],O=p(P);typeof P=="number"||typeof P=="boolean"?(A.__data[0]=P,n.bufferSubData(n.UNIFORM_BUFFER,I+F,A.__data)):P.isMatrix3?(A.__data[0]=P.elements[0],A.__data[1]=P.elements[1],A.__data[2]=P.elements[2],A.__data[3]=0,A.__data[4]=P.elements[3],A.__data[5]=P.elements[4],A.__data[6]=P.elements[5],A.__data[7]=0,A.__data[8]=P.elements[6],A.__data[9]=P.elements[7],A.__data[10]=P.elements[8],A.__data[11]=0):(P.toArray(A.__data,F),F+=O.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,I,A.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function f(_,b,w,x){const S=_.value,C=b+"_"+w;if(x[C]===void 0)return typeof S=="number"||typeof S=="boolean"?x[C]=S:x[C]=S.clone(),!0;{const T=x[C];if(typeof S=="number"||typeof S=="boolean"){if(T!==S)return x[C]=S,!0}else if(T.equals(S)===!1)return T.copy(S),!0}return!1}function m(_){const b=_.uniforms;let w=0;const x=16;for(let C=0,T=b.length;C<T;C++){const M=Array.isArray(b[C])?b[C]:[b[C]];for(let E=0,A=M.length;E<A;E++){const I=M[E],B=Array.isArray(I.value)?I.value:[I.value];for(let F=0,U=B.length;F<U;F++){const P=B[F],O=p(P),D=w%x,L=D%O.boundary,H=D+L;w+=L,H!==0&&x-H<O.storage&&(w+=x-H),I.__data=new Float32Array(O.storage/Float32Array.BYTES_PER_ELEMENT),I.__offset=w,w+=O.storage}}}const S=w%x;return S>0&&(w+=x-S),_.__size=w,_.__cache={},this}function p(_){const b={boundary:0,storage:0};return typeof _=="number"||typeof _=="boolean"?(b.boundary=4,b.storage=4):_.isVector2?(b.boundary=8,b.storage=8):_.isVector3||_.isColor?(b.boundary=16,b.storage=12):_.isVector4?(b.boundary=16,b.storage=16):_.isMatrix3?(b.boundary=48,b.storage=48):_.isMatrix4?(b.boundary=64,b.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),b}function y(_){const b=_.target;b.removeEventListener("dispose",y);const w=o.indexOf(b.__bindingPointIndex);o.splice(w,1),n.deleteBuffer(s[b.id]),delete s[b.id],delete r[b.id]}function v(){for(const _ in s)n.deleteBuffer(s[_]);o=[],s={},r={}}return{bind:l,update:c,dispose:v}}class k2{constructor(e={}){const{canvas:t=xz(),context:i=null,depth:s=!0,stencil:r=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let h;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=i.getContextAttributes().alpha}else h=o;const f=new Uint32Array(4),m=new Int32Array(4);let p=null,y=null;const v=[],_=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Ei,this.toneMapping=Al,this.toneMappingExposure=1;const b=this;let w=!1,x=0,S=0,C=null,T=-1,M=null;const E=new Ln,A=new Ln;let I=null;const B=new gt(0);let F=0,U=t.width,P=t.height,O=1,D=null,L=null;const H=new Ln(0,0,U,P),X=new Ln(0,0,U,P);let ne=!1;const ce=new ph;let ae=!1,_e=!1;const re=new yt,xe=new G,he=new Ln,Te={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ce=!1;function we(){return C===null?O:1}let K=i;function j(ue,He){return t.getContext(ue,He)}try{const ue={alpha:!0,depth:s,stencil:r,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${X1}`),t.addEventListener("webglcontextlost",Oe,!1),t.addEventListener("webglcontextrestored",et,!1),t.addEventListener("webglcontextcreationerror",ht,!1),K===null){const He="webgl2";if(K=j(He,ue),K===null)throw j(He)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ue){throw console.error("THREE.WebGLRenderer: "+ue.message),ue}let ie,ve,ye,me,be,Pe,Z,$,de,Ae,De,fe,Ge,We,je,at,Ue,qe,Fe,Ie,oe,Le,Ke,ft;function Q(){ie=new Lxe(K),ie.init(),Le=new Dz(K,ie),ve=new Exe(K,ie,e,Le),ye=new dCe(K),me=new Dxe(K),be=new QSe,Pe=new vCe(K,ie,ye,be,ve,Le,me),Z=new Axe(b),$=new Pxe(b),de=new Vbe(K),Ke=new Cxe(K,de),Ae=new kxe(K,de,me,Ke),De=new Fxe(K,Ae,de,me),Fe=new Nxe(K,ve,Pe),at=new Txe(be),fe=new JSe(b,Z,$,ie,ve,Ke,at),Ge=new CCe(b,be),We=new tCe,je=new aCe(ie),qe=new Sxe(b,Z,$,ye,De,h,l),Ue=new uCe(b,De,ve),ft=new MCe(K,me,ve,ye),Ie=new Mxe(K,ie,me),oe=new Oxe(K,ie,me),me.programs=fe.programs,b.capabilities=ve,b.extensions=ie,b.properties=be,b.renderLists=We,b.shadowMap=Ue,b.state=ye,b.info=me}Q();const $e=new xCe(b,K);this.xr=$e,this.getContext=function(){return K},this.getContextAttributes=function(){return K.getContextAttributes()},this.forceContextLoss=function(){const ue=ie.get("WEBGL_lose_context");ue&&ue.loseContext()},this.forceContextRestore=function(){const ue=ie.get("WEBGL_lose_context");ue&&ue.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(ue){ue!==void 0&&(O=ue,this.setSize(U,P,!1))},this.getSize=function(ue){return ue.set(U,P)},this.setSize=function(ue,He,N=!0){if($e.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}U=ue,P=He,t.width=Math.floor(ue*O),t.height=Math.floor(He*O),N===!0&&(t.style.width=ue+"px",t.style.height=He+"px"),this.setViewport(0,0,ue,He)},this.getDrawingBufferSize=function(ue){return ue.set(U*O,P*O).floor()},this.setDrawingBufferSize=function(ue,He,N){U=ue,P=He,O=N,t.width=Math.floor(ue*N),t.height=Math.floor(He*N),this.setViewport(0,0,ue,He)},this.getCurrentViewport=function(ue){return ue.copy(E)},this.getViewport=function(ue){return ue.copy(H)},this.setViewport=function(ue,He,N,W){ue.isVector4?H.set(ue.x,ue.y,ue.z,ue.w):H.set(ue,He,N,W),ye.viewport(E.copy(H).multiplyScalar(O).round())},this.getScissor=function(ue){return ue.copy(X)},this.setScissor=function(ue,He,N,W){ue.isVector4?X.set(ue.x,ue.y,ue.z,ue.w):X.set(ue,He,N,W),ye.scissor(A.copy(X).multiplyScalar(O).round())},this.getScissorTest=function(){return ne},this.setScissorTest=function(ue){ye.setScissorTest(ne=ue)},this.setOpaqueSort=function(ue){D=ue},this.setTransparentSort=function(ue){L=ue},this.getClearColor=function(ue){return ue.copy(qe.getClearColor())},this.setClearColor=function(){qe.setClearColor.apply(qe,arguments)},this.getClearAlpha=function(){return qe.getClearAlpha()},this.setClearAlpha=function(){qe.setClearAlpha.apply(qe,arguments)},this.clear=function(ue=!0,He=!0,N=!0){let W=0;if(ue){let q=!1;if(C!==null){const ee=C.texture.format;q=ee===ew||ee===Q1||ee===Zv}if(q){const ee=C.texture.type,Me=ee===Wa||ee===Dl||ee===pp||ee===Zd||ee===Z1||ee===J1,Se=qe.getClearColor(),Be=qe.getClearAlpha(),nt=Se.r,Xe=Se.g,Qe=Se.b;Me?(f[0]=nt,f[1]=Xe,f[2]=Qe,f[3]=Be,K.clearBufferuiv(K.COLOR,0,f)):(m[0]=nt,m[1]=Xe,m[2]=Qe,m[3]=Be,K.clearBufferiv(K.COLOR,0,m))}else W|=K.COLOR_BUFFER_BIT}He&&(W|=K.DEPTH_BUFFER_BIT),N&&(W|=K.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),K.clear(W)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Oe,!1),t.removeEventListener("webglcontextrestored",et,!1),t.removeEventListener("webglcontextcreationerror",ht,!1),We.dispose(),je.dispose(),be.dispose(),Z.dispose(),$.dispose(),De.dispose(),Ke.dispose(),ft.dispose(),fe.dispose(),$e.dispose(),$e.removeEventListener("sessionstart",$i),$e.removeEventListener("sessionend",Za),Or.stop()};function Oe(ue){ue.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function et(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const ue=me.autoReset,He=Ue.enabled,N=Ue.autoUpdate,W=Ue.needsUpdate,q=Ue.type;Q(),me.autoReset=ue,Ue.enabled=He,Ue.autoUpdate=N,Ue.needsUpdate=W,Ue.type=q}function ht(ue){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ue.statusMessage)}function At(ue){const He=ue.target;He.removeEventListener("dispose",At),Ot(He)}function Ot(ue){pn(ue),be.remove(ue)}function pn(ue){const He=be.get(ue).programs;He!==void 0&&(He.forEach(function(N){fe.releaseProgram(N)}),ue.isShaderMaterial&&fe.releaseShaderCache(ue))}this.renderBufferDirect=function(ue,He,N,W,q,ee){He===null&&(He=Te);const Me=q.isMesh&&q.matrixWorld.determinant()<0,Se=Sn(ue,He,N,W,q);ye.setMaterial(W,Me);let Be=N.index,nt=1;if(W.wireframe===!0){if(Be=Ae.getWireframeAttribute(N),Be===void 0)return;nt=2}const Xe=N.drawRange,Qe=N.attributes.position;let st=Xe.start*nt,bt=(Xe.start+Xe.count)*nt;ee!==null&&(st=Math.max(st,ee.start*nt),bt=Math.min(bt,(ee.start+ee.count)*nt)),Be!==null?(st=Math.max(st,0),bt=Math.min(bt,Be.count)):Qe!=null&&(st=Math.max(st,0),bt=Math.min(bt,Qe.count));const Et=bt-st;if(Et<0||Et===1/0)return;Ke.setup(q,W,Se,N,Be);let Pt,It=Ie;if(Be!==null&&(Pt=de.get(Be),It=oe,It.setIndex(Pt)),q.isMesh)W.wireframe===!0?(ye.setLineWidth(W.wireframeLinewidth*we()),It.setMode(K.LINES)):It.setMode(K.TRIANGLES);else if(q.isLine){let lt=W.linewidth;lt===void 0&&(lt=1),ye.setLineWidth(lt*we()),q.isLineSegments?It.setMode(K.LINES):q.isLineLoop?It.setMode(K.LINE_LOOP):It.setMode(K.LINE_STRIP)}else q.isPoints?It.setMode(K.POINTS):q.isSprite&&It.setMode(K.TRIANGLES);if(q.isBatchedMesh)if(q._multiDrawInstances!==null)It.renderMultiDrawInstances(q._multiDrawStarts,q._multiDrawCounts,q._multiDrawCount,q._multiDrawInstances);else if(ie.get("WEBGL_multi_draw"))It.renderMultiDraw(q._multiDrawStarts,q._multiDrawCounts,q._multiDrawCount);else{const lt=q._multiDrawStarts,Lt=q._multiDrawCounts,Nt=q._multiDrawCount,hn=Be?de.get(Be).bytesPerElement:1,Yn=be.get(W).currentProgram.getUniforms();for(let ri=0;ri<Nt;ri++)Yn.setValue(K,"_gl_DrawID",ri),It.render(lt[ri]/hn,Lt[ri])}else if(q.isInstancedMesh)It.renderInstances(st,Et,q.count);else if(N.isInstancedBufferGeometry){const lt=N._maxInstanceCount!==void 0?N._maxInstanceCount:1/0,Lt=Math.min(N.instanceCount,lt);It.renderInstances(st,Et,Lt)}else It.render(st,Et)};function wi(ue,He,N){ue.transparent===!0&&ue.side===ts&&ue.forceSinglePass===!1?(ue.side=bs,ue.needsUpdate=!0,fa(ue,He,N),ue.side=Fo,ue.needsUpdate=!0,fa(ue,He,N),ue.side=ts):fa(ue,He,N)}this.compile=function(ue,He,N=null){N===null&&(N=ue),y=je.get(N),y.init(He),_.push(y),N.traverseVisible(function(q){q.isLight&&q.layers.test(He.layers)&&(y.pushLight(q),q.castShadow&&y.pushShadow(q))}),ue!==N&&ue.traverseVisible(function(q){q.isLight&&q.layers.test(He.layers)&&(y.pushLight(q),q.castShadow&&y.pushShadow(q))}),y.setupLights();const W=new Set;return ue.traverse(function(q){const ee=q.material;if(ee)if(Array.isArray(ee))for(let Me=0;Me<ee.length;Me++){const Se=ee[Me];wi(Se,N,q),W.add(Se)}else wi(ee,N,q),W.add(ee)}),_.pop(),y=null,W},this.compileAsync=function(ue,He,N=null){const W=this.compile(ue,He,N);return new Promise(q=>{function ee(){if(W.forEach(function(Me){be.get(Me).currentProgram.isReady()&&W.delete(Me)}),W.size===0){q(ue);return}setTimeout(ee,10)}ie.get("KHR_parallel_shader_compile")!==null?ee():setTimeout(ee,10)})};let _n=null;function Cs(ue){_n&&_n(ue)}function $i(){Or.stop()}function Za(){Or.start()}const Or=new Rz;Or.setAnimationLoop(Cs),typeof self<"u"&&Or.setContext(self),this.setAnimationLoop=function(ue){_n=ue,$e.setAnimationLoop(ue),ue===null?Or.stop():Or.start()},$e.addEventListener("sessionstart",$i),$e.addEventListener("sessionend",Za),this.render=function(ue,He){if(He!==void 0&&He.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;if(ue.matrixWorldAutoUpdate===!0&&ue.updateMatrixWorld(),He.parent===null&&He.matrixWorldAutoUpdate===!0&&He.updateMatrixWorld(),$e.enabled===!0&&$e.isPresenting===!0&&($e.cameraAutoUpdate===!0&&$e.updateCamera(He),He=$e.getCamera()),ue.isScene===!0&&ue.onBeforeRender(b,ue,He,C),y=je.get(ue,_.length),y.init(He),_.push(y),re.multiplyMatrices(He.projectionMatrix,He.matrixWorldInverse),ce.setFromProjectionMatrix(re),_e=this.localClippingEnabled,ae=at.init(this.clippingPlanes,_e),p=We.get(ue,v.length),p.init(),v.push(p),$e.enabled===!0&&$e.isPresenting===!0){const ee=b.xr.getDepthSensingMesh();ee!==null&&no(ee,He,-1/0,b.sortObjects)}no(ue,He,0,b.sortObjects),p.finish(),b.sortObjects===!0&&p.sort(D,L),Ce=$e.enabled===!1||$e.isPresenting===!1||$e.hasDepthSensing()===!1,Ce&&qe.addToRenderList(p,ue),this.info.render.frame++,ae===!0&&at.beginShadows();const N=y.state.shadowsArray;Ue.render(N,ue,He),ae===!0&&at.endShadows(),this.info.autoReset===!0&&this.info.reset();const W=p.opaque,q=p.transmissive;if(y.setupLights(),He.isArrayCamera){const ee=He.cameras;if(q.length>0)for(let Me=0,Se=ee.length;Me<Se;Me++){const Be=ee[Me];Ql(W,q,ue,Be)}Ce&&qe.render(ue);for(let Me=0,Se=ee.length;Me<Se;Me++){const Be=ee[Me];Ja(p,ue,Be,Be.viewport)}}else q.length>0&&Ql(W,q,ue,He),Ce&&qe.render(ue),Ja(p,ue,He);C!==null&&(Pe.updateMultisampleRenderTarget(C),Pe.updateRenderTargetMipmap(C)),ue.isScene===!0&&ue.onAfterRender(b,ue,He),Ke.resetDefaultState(),T=-1,M=null,_.pop(),_.length>0?(y=_[_.length-1],ae===!0&&at.setGlobalState(b.clippingPlanes,y.state.camera)):y=null,v.pop(),v.length>0?p=v[v.length-1]:p=null};function no(ue,He,N,W){if(ue.visible===!1)return;if(ue.layers.test(He.layers)){if(ue.isGroup)N=ue.renderOrder;else if(ue.isLOD)ue.autoUpdate===!0&&ue.update(He);else if(ue.isLight)y.pushLight(ue),ue.castShadow&&y.pushShadow(ue);else if(ue.isSprite){if(!ue.frustumCulled||ce.intersectsSprite(ue)){W&&he.setFromMatrixPosition(ue.matrixWorld).applyMatrix4(re);const Me=De.update(ue),Se=ue.material;Se.visible&&p.push(ue,Me,Se,N,he.z,null)}}else if((ue.isMesh||ue.isLine||ue.isPoints)&&(!ue.frustumCulled||ce.intersectsObject(ue))){const Me=De.update(ue),Se=ue.material;if(W&&(ue.boundingSphere!==void 0?(ue.boundingSphere===null&&ue.computeBoundingSphere(),he.copy(ue.boundingSphere.center)):(Me.boundingSphere===null&&Me.computeBoundingSphere(),he.copy(Me.boundingSphere.center)),he.applyMatrix4(ue.matrixWorld).applyMatrix4(re)),Array.isArray(Se)){const Be=Me.groups;for(let nt=0,Xe=Be.length;nt<Xe;nt++){const Qe=Be[nt],st=Se[Qe.materialIndex];st&&st.visible&&p.push(ue,Me,st,N,he.z,Qe)}}else Se.visible&&p.push(ue,Me,Se,N,he.z,null)}}const ee=ue.children;for(let Me=0,Se=ee.length;Me<Se;Me++)no(ee[Me],He,N,W)}function Ja(ue,He,N,W){const q=ue.opaque,ee=ue.transmissive,Me=ue.transparent;y.setupLightsView(N),ae===!0&&at.setGlobalState(b.clippingPlanes,N),W&&ye.viewport(E.copy(W)),q.length>0&&zo(q,He,N),ee.length>0&&zo(ee,He,N),Me.length>0&&zo(Me,He,N),ye.buffers.depth.setTest(!0),ye.buffers.depth.setMask(!0),ye.buffers.color.setMask(!0),ye.setPolygonOffset(!1)}function Ql(ue,He,N,W){if((N.isScene===!0?N.overrideMaterial:null)!==null)return;y.state.transmissionRenderTarget[W.id]===void 0&&(y.state.transmissionRenderTarget[W.id]=new Ti(1,1,{generateMipmaps:!0,type:ie.has("EXT_color_buffer_half_float")||ie.has("EXT_color_buffer_float")?Ki:Wa,minFilter:Cr,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Cn.workingColorSpace}));const ee=y.state.transmissionRenderTarget[W.id],Me=W.viewport||E;ee.setSize(Me.z,Me.w);const Se=b.getRenderTarget();b.setRenderTarget(ee),b.getClearColor(B),F=b.getClearAlpha(),F<1&&b.setClearColor(16777215,.5),b.clear(),Ce&&qe.render(N);const Be=b.toneMapping;b.toneMapping=Al;const nt=W.viewport;if(W.viewport!==void 0&&(W.viewport=void 0),y.setupLightsView(W),ae===!0&&at.setGlobalState(b.clippingPlanes,W),zo(ue,N,W),Pe.updateMultisampleRenderTarget(ee),Pe.updateRenderTargetMipmap(ee),ie.has("WEBGL_multisampled_render_to_texture")===!1){let Xe=!1;for(let Qe=0,st=He.length;Qe<st;Qe++){const bt=He[Qe],Et=bt.object,Pt=bt.geometry,It=bt.material,lt=bt.group;if(It.side===ts&&Et.layers.test(W.layers)){const Lt=It.side;It.side=bs,It.needsUpdate=!0,ec(Et,N,W,Pt,It,lt),It.side=Lt,It.needsUpdate=!0,Xe=!0}}Xe===!0&&(Pe.updateMultisampleRenderTarget(ee),Pe.updateRenderTargetMipmap(ee))}b.setRenderTarget(Se),b.setClearColor(B,F),nt!==void 0&&(W.viewport=nt),b.toneMapping=Be}function zo(ue,He,N){const W=He.isScene===!0?He.overrideMaterial:null;for(let q=0,ee=ue.length;q<ee;q++){const Me=ue[q],Se=Me.object,Be=Me.geometry,nt=W===null?Me.material:W,Xe=Me.group;Se.layers.test(N.layers)&&ec(Se,He,N,Be,nt,Xe)}}function ec(ue,He,N,W,q,ee){ue.onBeforeRender(b,He,N,W,q,ee),ue.modelViewMatrix.multiplyMatrices(N.matrixWorldInverse,ue.matrixWorld),ue.normalMatrix.getNormalMatrix(ue.modelViewMatrix),q.transparent===!0&&q.side===ts&&q.forceSinglePass===!1?(q.side=bs,q.needsUpdate=!0,b.renderBufferDirect(N,He,W,q,ue,ee),q.side=Fo,q.needsUpdate=!0,b.renderBufferDirect(N,He,W,q,ue,ee),q.side=ts):b.renderBufferDirect(N,He,W,q,ue,ee),ue.onAfterRender(b,He,N,W,q,ee)}function fa(ue,He,N){He.isScene!==!0&&(He=Te);const W=be.get(ue),q=y.state.lights,ee=y.state.shadowsArray,Me=q.state.version,Se=fe.getParameters(ue,q.state,ee,He,N),Be=fe.getProgramCacheKey(Se);let nt=W.programs;W.environment=ue.isMeshStandardMaterial?He.environment:null,W.fog=He.fog,W.envMap=(ue.isMeshStandardMaterial?$:Z).get(ue.envMap||W.environment),W.envMapRotation=W.environment!==null&&ue.envMap===null?He.environmentRotation:ue.envMapRotation,nt===void 0&&(ue.addEventListener("dispose",At),nt=new Map,W.programs=nt);let Xe=nt.get(Be);if(Xe!==void 0){if(W.currentProgram===Xe&&W.lightsStateVersion===Me)return Mt(ue,Se),Xe}else Se.uniforms=fe.getUniforms(ue),ue.onBeforeCompile(Se,b),Xe=fe.acquireProgram(Se,Be),nt.set(Be,Xe),W.uniforms=Se.uniforms;const Qe=W.uniforms;return(!ue.isShaderMaterial&&!ue.isRawShaderMaterial||ue.clipping===!0)&&(Qe.clippingPlanes=at.uniform),Mt(ue,Se),W.needsLights=er(ue),W.lightsStateVersion=Me,W.needsLights&&(Qe.ambientLightColor.value=q.state.ambient,Qe.lightProbe.value=q.state.probe,Qe.directionalLights.value=q.state.directional,Qe.directionalLightShadows.value=q.state.directionalShadow,Qe.spotLights.value=q.state.spot,Qe.spotLightShadows.value=q.state.spotShadow,Qe.rectAreaLights.value=q.state.rectArea,Qe.ltc_1.value=q.state.rectAreaLTC1,Qe.ltc_2.value=q.state.rectAreaLTC2,Qe.pointLights.value=q.state.point,Qe.pointLightShadows.value=q.state.pointShadow,Qe.hemisphereLights.value=q.state.hemi,Qe.directionalShadowMap.value=q.state.directionalShadowMap,Qe.directionalShadowMatrix.value=q.state.directionalShadowMatrix,Qe.spotShadowMap.value=q.state.spotShadowMap,Qe.spotLightMatrix.value=q.state.spotLightMatrix,Qe.spotLightMap.value=q.state.spotLightMap,Qe.pointShadowMap.value=q.state.pointShadowMap,Qe.pointShadowMatrix.value=q.state.pointShadowMatrix),W.currentProgram=Xe,W.uniformsList=null,Xe}function it(ue){if(ue.uniformsList===null){const He=ue.currentProgram.getUniforms();ue.uniformsList=C_.seqWithValue(He.seq,ue.uniforms)}return ue.uniformsList}function Mt(ue,He){const N=be.get(ue);N.outputColorSpace=He.outputColorSpace,N.batching=He.batching,N.batchingColor=He.batchingColor,N.instancing=He.instancing,N.instancingColor=He.instancingColor,N.instancingMorph=He.instancingMorph,N.skinning=He.skinning,N.morphTargets=He.morphTargets,N.morphNormals=He.morphNormals,N.morphColors=He.morphColors,N.morphTargetsCount=He.morphTargetsCount,N.numClippingPlanes=He.numClippingPlanes,N.numIntersection=He.numClipIntersection,N.vertexAlphas=He.vertexAlphas,N.vertexTangents=He.vertexTangents,N.toneMapping=He.toneMapping}function Sn(ue,He,N,W,q){He.isScene!==!0&&(He=Te),Pe.resetTextureUnits();const ee=He.fog,Me=W.isMeshStandardMaterial?He.environment:null,Se=C===null?b.outputColorSpace:C.isXRRenderTarget===!0?C.texture.colorSpace:qn,Be=(W.isMeshStandardMaterial?$:Z).get(W.envMap||Me),nt=W.vertexColors===!0&&!!N.attributes.color&&N.attributes.color.itemSize===4,Xe=!!N.attributes.tangent&&(!!W.normalMap||W.anisotropy>0),Qe=!!N.morphAttributes.position,st=!!N.morphAttributes.normal,bt=!!N.morphAttributes.color;let Et=Al;W.toneMapped&&(C===null||C.isXRRenderTarget===!0)&&(Et=b.toneMapping);const Pt=N.morphAttributes.position||N.morphAttributes.normal||N.morphAttributes.color,It=Pt!==void 0?Pt.length:0,lt=be.get(W),Lt=y.state.lights;if(ae===!0&&(_e===!0||ue!==M)){const Bn=ue===M&&W.id===T;at.setState(W,ue,Bn)}let Nt=!1;W.version===lt.__version?(lt.needsLights&&lt.lightsStateVersion!==Lt.state.version||lt.outputColorSpace!==Se||q.isBatchedMesh&&lt.batching===!1||!q.isBatchedMesh&&lt.batching===!0||q.isBatchedMesh&&lt.batchingColor===!0&&q.colorTexture===null||q.isBatchedMesh&&lt.batchingColor===!1&&q.colorTexture!==null||q.isInstancedMesh&&lt.instancing===!1||!q.isInstancedMesh&&lt.instancing===!0||q.isSkinnedMesh&&lt.skinning===!1||!q.isSkinnedMesh&&lt.skinning===!0||q.isInstancedMesh&&lt.instancingColor===!0&&q.instanceColor===null||q.isInstancedMesh&&lt.instancingColor===!1&&q.instanceColor!==null||q.isInstancedMesh&&lt.instancingMorph===!0&&q.morphTexture===null||q.isInstancedMesh&&lt.instancingMorph===!1&&q.morphTexture!==null||lt.envMap!==Be||W.fog===!0&&lt.fog!==ee||lt.numClippingPlanes!==void 0&&(lt.numClippingPlanes!==at.numPlanes||lt.numIntersection!==at.numIntersection)||lt.vertexAlphas!==nt||lt.vertexTangents!==Xe||lt.morphTargets!==Qe||lt.morphNormals!==st||lt.morphColors!==bt||lt.toneMapping!==Et||lt.morphTargetsCount!==It)&&(Nt=!0):(Nt=!0,lt.__version=W.version);let hn=lt.currentProgram;Nt===!0&&(hn=fa(W,He,q));let Yn=!1,ri=!1,Zn=!1;const qt=hn.getUniforms(),Qn=lt.uniforms;if(ye.useProgram(hn.program)&&(Yn=!0,ri=!0,Zn=!0),W.id!==T&&(T=W.id,ri=!0),Yn||M!==ue){qt.setValue(K,"projectionMatrix",ue.projectionMatrix),qt.setValue(K,"viewMatrix",ue.matrixWorldInverse);const Bn=qt.map.cameraPosition;Bn!==void 0&&Bn.setValue(K,xe.setFromMatrixPosition(ue.matrixWorld)),ve.logarithmicDepthBuffer&&qt.setValue(K,"logDepthBufFC",2/(Math.log(ue.far+1)/Math.LN2)),(W.isMeshPhongMaterial||W.isMeshToonMaterial||W.isMeshLambertMaterial||W.isMeshBasicMaterial||W.isMeshStandardMaterial||W.isShaderMaterial)&&qt.setValue(K,"isOrthographic",ue.isOrthographicCamera===!0),M!==ue&&(M=ue,ri=!0,Zn=!0)}if(q.isSkinnedMesh){qt.setOptional(K,q,"bindMatrix"),qt.setOptional(K,q,"bindMatrixInverse");const Bn=q.skeleton;Bn&&(Bn.boneTexture===null&&Bn.computeBoneTexture(),qt.setValue(K,"boneTexture",Bn.boneTexture,Pe))}q.isBatchedMesh&&(qt.setOptional(K,q,"batchingTexture"),qt.setValue(K,"batchingTexture",q._matricesTexture,Pe),qt.setOptional(K,q,"batchingIdTexture"),qt.setValue(K,"batchingIdTexture",q._indirectTexture,Pe),qt.setOptional(K,q,"batchingColorTexture"),q._colorsTexture!==null&&qt.setValue(K,"batchingColorTexture",q._colorsTexture,Pe));const Os=N.morphAttributes;if((Os.position!==void 0||Os.normal!==void 0||Os.color!==void 0)&&Fe.update(q,N,hn),(ri||lt.receiveShadow!==q.receiveShadow)&&(lt.receiveShadow=q.receiveShadow,qt.setValue(K,"receiveShadow",q.receiveShadow)),W.isMeshGouraudMaterial&&W.envMap!==null&&(Qn.envMap.value=Be,Qn.flipEnvMap.value=Be.isCubeTexture&&Be.isRenderTargetTexture===!1?-1:1),W.isMeshStandardMaterial&&W.envMap===null&&He.environment!==null&&(Qn.envMapIntensity.value=He.environmentIntensity),ri&&(qt.setValue(K,"toneMappingExposure",b.toneMappingExposure),lt.needsLights&&Kn(Qn,Zn),ee&&W.fog===!0&&Ge.refreshFogUniforms(Qn,ee),Ge.refreshMaterialUniforms(Qn,W,O,P,y.state.transmissionRenderTarget[ue.id]),C_.upload(K,it(lt),Qn,Pe)),W.isShaderMaterial&&W.uniformsNeedUpdate===!0&&(C_.upload(K,it(lt),Qn,Pe),W.uniformsNeedUpdate=!1),W.isSpriteMaterial&&qt.setValue(K,"center",q.center),qt.setValue(K,"modelViewMatrix",q.modelViewMatrix),qt.setValue(K,"normalMatrix",q.normalMatrix),qt.setValue(K,"modelMatrix",q.matrixWorld),W.isShaderMaterial||W.isRawShaderMaterial){const Bn=W.uniformsGroups;for(let Pn=0,ei=Bn.length;Pn<ei;Pn++){const io=Bn[Pn];ft.update(io,hn),ft.bind(io,hn)}}return hn}function Kn(ue,He){ue.ambientLightColor.needsUpdate=He,ue.lightProbe.needsUpdate=He,ue.directionalLights.needsUpdate=He,ue.directionalLightShadows.needsUpdate=He,ue.pointLights.needsUpdate=He,ue.pointLightShadows.needsUpdate=He,ue.spotLights.needsUpdate=He,ue.spotLightShadows.needsUpdate=He,ue.rectAreaLights.needsUpdate=He,ue.hemisphereLights.needsUpdate=He}function er(ue){return ue.isMeshLambertMaterial||ue.isMeshToonMaterial||ue.isMeshPhongMaterial||ue.isMeshStandardMaterial||ue.isShadowMaterial||ue.isShaderMaterial&&ue.lights===!0}this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return C},this.setRenderTargetTextures=function(ue,He,N){be.get(ue.texture).__webglTexture=He,be.get(ue.depthTexture).__webglTexture=N;const W=be.get(ue);W.__hasExternalTextures=!0,W.__autoAllocateDepthBuffer=N===void 0,W.__autoAllocateDepthBuffer||ie.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),W.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(ue,He){const N=be.get(ue);N.__webglFramebuffer=He,N.__useDefaultFramebuffer=He===void 0},this.setRenderTarget=function(ue,He=0,N=0){C=ue,x=He,S=N;let W=!0,q=null,ee=!1,Me=!1;if(ue){const Be=be.get(ue);Be.__useDefaultFramebuffer!==void 0?(ye.bindFramebuffer(K.FRAMEBUFFER,null),W=!1):Be.__webglFramebuffer===void 0?Pe.setupRenderTarget(ue):Be.__hasExternalTextures&&Pe.rebindTextures(ue,be.get(ue.texture).__webglTexture,be.get(ue.depthTexture).__webglTexture);const nt=ue.texture;(nt.isData3DTexture||nt.isDataArrayTexture||nt.isCompressedArrayTexture)&&(Me=!0);const Xe=be.get(ue).__webglFramebuffer;ue.isWebGLCubeRenderTarget?(Array.isArray(Xe[He])?q=Xe[He][N]:q=Xe[He],ee=!0):ue.samples>0&&Pe.useMultisampledRTT(ue)===!1?q=be.get(ue).__webglMultisampledFramebuffer:Array.isArray(Xe)?q=Xe[N]:q=Xe,E.copy(ue.viewport),A.copy(ue.scissor),I=ue.scissorTest}else E.copy(H).multiplyScalar(O).floor(),A.copy(X).multiplyScalar(O).floor(),I=ne;if(ye.bindFramebuffer(K.FRAMEBUFFER,q)&&W&&ye.drawBuffers(ue,q),ye.viewport(E),ye.scissor(A),ye.setScissorTest(I),ee){const Be=be.get(ue.texture);K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_CUBE_MAP_POSITIVE_X+He,Be.__webglTexture,N)}else if(Me){const Be=be.get(ue.texture),nt=He||0;K.framebufferTextureLayer(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,Be.__webglTexture,N||0,nt)}T=-1},this.readRenderTargetPixels=function(ue,He,N,W,q,ee,Me){if(!(ue&&ue.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Se=be.get(ue).__webglFramebuffer;if(ue.isWebGLCubeRenderTarget&&Me!==void 0&&(Se=Se[Me]),Se){ye.bindFramebuffer(K.FRAMEBUFFER,Se);try{const Be=ue.texture,nt=Be.format,Xe=Be.type;if(!ve.textureFormatReadable(nt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ve.textureTypeReadable(Xe)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}He>=0&&He<=ue.width-W&&N>=0&&N<=ue.height-q&&K.readPixels(He,N,W,q,Le.convert(nt),Le.convert(Xe),ee)}finally{const Be=C!==null?be.get(C).__webglFramebuffer:null;ye.bindFramebuffer(K.FRAMEBUFFER,Be)}}},this.readRenderTargetPixelsAsync=async function(ue,He,N,W,q,ee,Me){if(!(ue&&ue.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Se=be.get(ue).__webglFramebuffer;if(ue.isWebGLCubeRenderTarget&&Me!==void 0&&(Se=Se[Me]),Se){ye.bindFramebuffer(K.FRAMEBUFFER,Se);try{const Be=ue.texture,nt=Be.format,Xe=Be.type;if(!ve.textureFormatReadable(nt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ve.textureTypeReadable(Xe))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(He>=0&&He<=ue.width-W&&N>=0&&N<=ue.height-q){const Qe=K.createBuffer();K.bindBuffer(K.PIXEL_PACK_BUFFER,Qe),K.bufferData(K.PIXEL_PACK_BUFFER,ee.byteLength,K.STREAM_READ),K.readPixels(He,N,W,q,Le.convert(nt),Le.convert(Xe),0),K.flush();const st=K.fenceSync(K.SYNC_GPU_COMMANDS_COMPLETE,0);await gbe(K,st,4);try{K.bindBuffer(K.PIXEL_PACK_BUFFER,Qe),K.getBufferSubData(K.PIXEL_PACK_BUFFER,0,ee)}finally{K.deleteBuffer(Qe),K.deleteSync(st)}return ee}}finally{const Be=C!==null?be.get(C).__webglFramebuffer:null;ye.bindFramebuffer(K.FRAMEBUFFER,Be)}}},this.copyFramebufferToTexture=function(ue,He=null,N=0){ue.isTexture!==!0&&(kf("WebGLRenderer: copyFramebufferToTexture function signature has changed."),He=arguments[0]||null,ue=arguments[1]);const W=Math.pow(2,-N),q=Math.floor(ue.image.width*W),ee=Math.floor(ue.image.height*W),Me=He!==null?He.x:0,Se=He!==null?He.y:0;Pe.setTexture2D(ue,0),K.copyTexSubImage2D(K.TEXTURE_2D,N,0,0,Me,Se,q,ee),ye.unbindTexture()},this.copyTextureToTexture=function(ue,He,N=null,W=null,q=0){ue.isTexture!==!0&&(kf("WebGLRenderer: copyTextureToTexture function signature has changed."),W=arguments[0]||null,ue=arguments[1],He=arguments[2],q=arguments[3]||0,N=null);let ee,Me,Se,Be,nt,Xe;N!==null?(ee=N.max.x-N.min.x,Me=N.max.y-N.min.y,Se=N.min.x,Be=N.min.y):(ee=ue.image.width,Me=ue.image.height,Se=0,Be=0),W!==null?(nt=W.x,Xe=W.y):(nt=0,Xe=0);const Qe=Le.convert(He.format),st=Le.convert(He.type);Pe.setTexture2D(He,0),K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,He.flipY),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,He.premultiplyAlpha),K.pixelStorei(K.UNPACK_ALIGNMENT,He.unpackAlignment);const bt=K.getParameter(K.UNPACK_ROW_LENGTH),Et=K.getParameter(K.UNPACK_IMAGE_HEIGHT),Pt=K.getParameter(K.UNPACK_SKIP_PIXELS),It=K.getParameter(K.UNPACK_SKIP_ROWS),lt=K.getParameter(K.UNPACK_SKIP_IMAGES),Lt=ue.isCompressedTexture?ue.mipmaps[q]:ue.image;K.pixelStorei(K.UNPACK_ROW_LENGTH,Lt.width),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,Lt.height),K.pixelStorei(K.UNPACK_SKIP_PIXELS,Se),K.pixelStorei(K.UNPACK_SKIP_ROWS,Be),ue.isDataTexture?K.texSubImage2D(K.TEXTURE_2D,q,nt,Xe,ee,Me,Qe,st,Lt.data):ue.isCompressedTexture?K.compressedTexSubImage2D(K.TEXTURE_2D,q,nt,Xe,Lt.width,Lt.height,Qe,Lt.data):K.texSubImage2D(K.TEXTURE_2D,q,nt,Xe,ee,Me,Qe,st,Lt),K.pixelStorei(K.UNPACK_ROW_LENGTH,bt),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,Et),K.pixelStorei(K.UNPACK_SKIP_PIXELS,Pt),K.pixelStorei(K.UNPACK_SKIP_ROWS,It),K.pixelStorei(K.UNPACK_SKIP_IMAGES,lt),q===0&&He.generateMipmaps&&K.generateMipmap(K.TEXTURE_2D),ye.unbindTexture()},this.copyTextureToTexture3D=function(ue,He,N=null,W=null,q=0){ue.isTexture!==!0&&(kf("WebGLRenderer: copyTextureToTexture3D function signature has changed."),N=arguments[0]||null,W=arguments[1]||null,ue=arguments[2],He=arguments[3],q=arguments[4]||0);let ee,Me,Se,Be,nt,Xe,Qe,st,bt;const Et=ue.isCompressedTexture?ue.mipmaps[q]:ue.image;N!==null?(ee=N.max.x-N.min.x,Me=N.max.y-N.min.y,Se=N.max.z-N.min.z,Be=N.min.x,nt=N.min.y,Xe=N.min.z):(ee=Et.width,Me=Et.height,Se=Et.depth,Be=0,nt=0,Xe=0),W!==null?(Qe=W.x,st=W.y,bt=W.z):(Qe=0,st=0,bt=0);const Pt=Le.convert(He.format),It=Le.convert(He.type);let lt;if(He.isData3DTexture)Pe.setTexture3D(He,0),lt=K.TEXTURE_3D;else if(He.isDataArrayTexture||He.isCompressedArrayTexture)Pe.setTexture2DArray(He,0),lt=K.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,He.flipY),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,He.premultiplyAlpha),K.pixelStorei(K.UNPACK_ALIGNMENT,He.unpackAlignment);const Lt=K.getParameter(K.UNPACK_ROW_LENGTH),Nt=K.getParameter(K.UNPACK_IMAGE_HEIGHT),hn=K.getParameter(K.UNPACK_SKIP_PIXELS),Yn=K.getParameter(K.UNPACK_SKIP_ROWS),ri=K.getParameter(K.UNPACK_SKIP_IMAGES);K.pixelStorei(K.UNPACK_ROW_LENGTH,Et.width),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,Et.height),K.pixelStorei(K.UNPACK_SKIP_PIXELS,Be),K.pixelStorei(K.UNPACK_SKIP_ROWS,nt),K.pixelStorei(K.UNPACK_SKIP_IMAGES,Xe),ue.isDataTexture||ue.isData3DTexture?K.texSubImage3D(lt,q,Qe,st,bt,ee,Me,Se,Pt,It,Et.data):He.isCompressedArrayTexture?K.compressedTexSubImage3D(lt,q,Qe,st,bt,ee,Me,Se,Pt,Et.data):K.texSubImage3D(lt,q,Qe,st,bt,ee,Me,Se,Pt,It,Et),K.pixelStorei(K.UNPACK_ROW_LENGTH,Lt),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,Nt),K.pixelStorei(K.UNPACK_SKIP_PIXELS,hn),K.pixelStorei(K.UNPACK_SKIP_ROWS,Yn),K.pixelStorei(K.UNPACK_SKIP_IMAGES,ri),q===0&&He.generateMipmaps&&K.generateMipmap(lt),ye.unbindTexture()},this.initRenderTarget=function(ue){be.get(ue).__webglFramebuffer===void 0&&Pe.setupRenderTarget(ue)},this.initTexture=function(ue){ue.isCubeTexture?Pe.setTextureCube(ue,0):ue.isData3DTexture?Pe.setTexture3D(ue,0):ue.isDataArrayTexture||ue.isCompressedArrayTexture?Pe.setTexture2DArray(ue,0):Pe.setTexture2D(ue,0),ye.unbindTexture()},this.resetState=function(){x=0,S=0,C=null,ye.reset(),Ke.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ra}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===sw?"display-p3":"srgb",t.unpackColorSpace=Cn.workingColorSpace===Jv?"display-p3":"srgb"}}class uw{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new gt(e),this.density=t}clone(){return new uw(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class dw{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new gt(e),this.near=t,this.far=i}clone(){return new dw(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class mh extends rn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Js,this.environmentIntensity=1,this.environmentRotation=new Js,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Fp{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=ov,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=qr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return kf("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let s=0,r=this.stride;s<r;s++)this.array[e+s]=t.array[i+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=qr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=qr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const nr=new G;class Nl{constructor(e,t,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)nr.fromBufferAttribute(this,t),nr.applyMatrix4(e),this.setXYZ(t,nr.x,nr.y,nr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)nr.fromBufferAttribute(this,t),nr.applyNormalMatrix(e),this.setXYZ(t,nr.x,nr.y,nr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)nr.fromBufferAttribute(this,t),nr.transformDirection(e),this.setXYZ(t,nr.x,nr.y,nr.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=ar(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=cn(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=cn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=cn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=cn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=cn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ar(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ar(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ar(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ar(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=cn(t,this.array),i=cn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=cn(t,this.array),i=cn(i,this.array),s=cn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this}setXYZW(e,t,i,s,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=cn(t,this.array),i=cn(i,this.array),s=cn(s,this.array),r=cn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this.data.array[e+3]=r,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return new dn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Nl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class O2 extends zi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new gt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Gh;const nm=new G,Wh=new G,Kh=new G,Yh=new tt,im=new tt,Fz=new yt,oy=new G,sm=new G,ay=new G,K3=new tt,qx=new tt,Y3=new tt;class Bz extends rn{constructor(e=new O2){if(super(),this.isSprite=!0,this.type="Sprite",Gh===void 0){Gh=new jt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Fp(t,5);Gh.setIndex([0,1,2,0,2,3]),Gh.setAttribute("position",new Nl(i,3,0,!1)),Gh.setAttribute("uv",new Nl(i,2,3,!1))}this.geometry=Gh,this.material=e,this.center=new tt(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Wh.setFromMatrixScale(this.matrixWorld),Fz.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Kh.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Wh.multiplyScalar(-Kh.z);const i=this.material.rotation;let s,r;i!==0&&(r=Math.cos(i),s=Math.sin(i));const o=this.center;ly(oy.set(-.5,-.5,0),Kh,o,Wh,s,r),ly(sm.set(.5,-.5,0),Kh,o,Wh,s,r),ly(ay.set(.5,.5,0),Kh,o,Wh,s,r),K3.set(0,0),qx.set(1,0),Y3.set(1,1);let a=e.ray.intersectTriangle(oy,sm,ay,!1,nm);if(a===null&&(ly(sm.set(-.5,.5,0),Kh,o,Wh,s,r),qx.set(0,1),a=e.ray.intersectTriangle(oy,ay,sm,!1,nm),a===null))return;const l=e.ray.origin.distanceTo(nm);l<e.near||l>e.far||t.push({distance:l,point:nm.clone(),uv:Vr.getInterpolation(nm,oy,sm,ay,K3,qx,Y3,new tt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function ly(n,e,t,i,s,r){Yh.subVectors(n,t).addScalar(.5).multiply(i),s!==void 0?(im.x=r*Yh.x-s*Yh.y,im.y=s*Yh.x+r*Yh.y):im.copy(Yh),n.copy(e),n.x+=im.x,n.y+=im.y,n.applyMatrix4(Fz)}const cy=new G,X3=new G;class Uz extends rn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,s=t.length;i<s;i++){const r=t[i];this.addLevel(r.object.clone(),r.distance,r.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const s=this.levels;let r;for(r=0;r<s.length&&!(t<s[r].distance);r++);return s.splice(r,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,s;for(i=1,s=t.length;i<s;i++){let r=t[i].distance;if(t[i].object.visible&&(r-=r*t[i].hysteresis),e<r)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){cy.setFromMatrixPosition(this.matrixWorld);const s=e.ray.origin.distanceTo(cy);this.getObjectForDistance(s).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){cy.setFromMatrixPosition(e.matrixWorld),X3.setFromMatrixPosition(this.matrixWorld);const i=cy.distanceTo(X3)/e.zoom;t[0].object.visible=!0;let s,r;for(s=1,r=t.length;s<r;s++){let o=t[s].distance;if(t[s].object.visible&&(o-=o*t[s].hysteresis),i>=o)t[s-1].object.visible=!1,t[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<r;s++)t[s].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let s=0,r=i.length;s<r;s++){const o=i[s];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const j3=new G,q3=new Ln,Z3=new Ln,ECe=new G,J3=new yt,uy=new G,Zx=new bi,Q3=new yt,Jx=new fh;class hw extends ut{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=_M,this.bindMatrix=new yt,this.bindMatrixInverse=new yt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Nn),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,uy),this.boundingBox.expandByPoint(uy)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new bi),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,uy),this.boundingSphere.expandByPoint(uy)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,s=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Zx.copy(this.boundingSphere),Zx.applyMatrix4(s),e.ray.intersectsSphere(Zx)!==!1&&(Q3.copy(s).invert(),Jx.copy(e.ray).applyMatrix4(Q3),!(this.boundingBox!==null&&Jx.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Jx)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ln,t=this.geometry.attributes.skinWeight;for(let i=0,s=t.count;i<s;i++){e.fromBufferAttribute(t,i);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===_M?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===az?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,s=this.geometry;q3.fromBufferAttribute(s.attributes.skinIndex,e),Z3.fromBufferAttribute(s.attributes.skinWeight,e),j3.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const o=Z3.getComponent(r);if(o!==0){const a=q3.getComponent(r);J3.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(ECe.copy(j3).applyMatrix4(J3),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class t0 extends rn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Oa extends Wn{constructor(e=null,t=1,i=1,s,r,o,a,l,c=ii,u=ii,d,h){super(null,o,a,l,c,u,s,r,d,h),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const eL=new yt,TCe=new yt;class Bp{constructor(e=[],t=[]){this.uuid=qr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,s=this.bones.length;i<s;i++)this.boneInverses.push(new yt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new yt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let r=0,o=e.length;r<o;r++){const a=e[r]?e[r].matrixWorld:TCe;eL.multiplyMatrices(a,t[r]),eL.toArray(i,r*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new Bp(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Oa(t,e,e,Oi,is);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,s=e.bones.length;i<s;i++){const r=e.bones[i];let o=t[r];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),o=new t0),this.bones.push(o),this.boneInverses.push(new yt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let s=0,r=t.length;s<r;s++){const o=t[s];e.bones.push(o.uuid);const a=i[s];e.boneInverses.push(a.toArray())}return e}}class cr extends dn{constructor(e,t,i,s=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Xh=new yt,tL=new yt,dy=[],nL=new Nn,ACe=new yt,rm=new ut,om=new bi;class Pa extends ut{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new cr(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<i;s++)this.setMatrixAt(s,ACe)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Nn),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Xh),nL.copy(e.boundingBox).applyMatrix4(Xh),this.boundingBox.union(nL)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new bi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Xh),om.copy(e.boundingSphere).applyMatrix4(Xh),this.boundingSphere.union(om)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,s=this.morphTexture.source.data.data,r=i.length+1,o=e*r+1;for(let a=0;a<i.length;a++)i[a]=s[o+a]}raycast(e,t){const i=this.matrixWorld,s=this.count;if(rm.geometry=this.geometry,rm.material=this.material,rm.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),om.copy(this.boundingSphere),om.applyMatrix4(i),e.ray.intersectsSphere(om)!==!1))for(let r=0;r<s;r++){this.getMatrixAt(r,Xh),tL.multiplyMatrices(i,Xh),rm.matrixWorld=tL,rm.raycast(e,dy);for(let o=0,a=dy.length;o<a;o++){const l=dy[o];l.instanceId=r,l.object=this,t.push(l)}dy.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new cr(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,s=i.length+1;this.morphTexture===null&&(this.morphTexture=new Oa(new Float32Array(s*this.count),s,this.count,qv,is));const r=this.morphTexture.source.data.data;let o=0;for(let c=0;c<i.length;c++)o+=i[c];const a=this.geometry.morphTargetsRelative?1:1-o,l=s*e;r[l]=a,r.set(i,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function ICe(n,e){return n.z-e.z}function RCe(n,e){return e.z-n.z}class PCe{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i){const s=this.pool,r=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const o=s[this.index];r.push(o),this.index++,o.start=e.start,o.count=e.count,o.z=t,o.index=i}reset(){this.list.length=0,this.index=0}}const dc=new yt,Qx=new yt,LCe=new yt,kCe=new gt(1,1,1),iL=new yt,eS=new ph,hy=new Nn,Lu=new bi,am=new G,sL=new G,OCe=new G,tS=new PCe,Fs=new ut,fy=[];function DCe(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const s=n.count;for(let r=0;r<s;r++)for(let o=0;o<i;o++)e.setComponent(r+t,o,n.getComponent(r,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}class zz extends ut{get maxInstanceCount(){return this._maxInstanceCount}constructor(e,t,i=t*2,s){super(new jt,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawInfo=[],this._drawRanges=[],this._reservedRanges=[],this._bounds=[],this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Oa(t,e,e,Oi,is);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new Oa(t,e,e,Zv,Dl);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxIndexCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new Oa(t,e,e,Oi,is);i.colorSpace=Cn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const r in e.attributes){const o=e.getAttribute(r),{array:a,itemSize:l,normalized:c}=o,u=new a.constructor(i*l),d=new dn(u,l,c);t.setAttribute(r,d)}if(e.getIndex()!==null){const r=i>65535?new Uint32Array(s):new Uint16Array(s);t.setIndex(new dn(r,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const s=e.getAttribute(i),r=t.getAttribute(i);if(s.itemSize!==r.itemSize||s.normalized!==r.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Nn);const e=this._geometryCount,t=this.boundingBox,i=this._drawInfo;t.makeEmpty();for(let s=0;s<e;s++){if(i[s].active===!1)continue;const r=i[s].geometryIndex;this.getMatrixAt(s,dc),this.getBoundingBoxAt(r,hy).applyMatrix4(dc),t.union(hy)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new bi);const e=this.boundingSphere,t=this._drawInfo;e.makeEmpty();for(let i=0,s=t.length;i<s;i++){if(t[i].active===!1)continue;const r=t[i].geometryIndex;this.getMatrixAt(i,dc),this.getBoundingSphereAt(r,Lu).applyMatrix4(dc),e.union(Lu)}}addInstance(e){if(this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");this._drawInfo.push({visible:!0,active:!0,geometryIndex:e});const t=this._drawInfo.length-1,i=this._matricesTexture,s=i.image.data;LCe.toArray(s,t*16),i.needsUpdate=!0;const r=this._colorsTexture;return r&&(kCe.toArray(r.image.data,t*4),r.needsUpdate=!0),t}addGeometry(e,t=-1,i=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");const s={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let r=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(r=o[o.length-1]),t===-1?s.vertexCount=e.getAttribute("position").count:s.vertexCount=t,r===null?s.vertexStart=0:s.vertexStart=r.vertexStart+r.vertexCount;const c=e.getIndex(),u=c!==null;if(u&&(i===-1?s.indexCount=c.count:s.indexCount=i,r===null?s.indexStart=0:s.indexStart=r.indexStart+r.indexCount),s.indexStart!==-1&&s.indexStart+s.indexCount>this._maxIndexCount||s.vertexStart+s.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const d=this._geometryCount;return this._geometryCount++,o.push(s),a.push({start:u?s.indexStart:s.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Nn,sphereInitialized:!1,sphere:new bi}),this.setGeometryAt(d,e),d}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,s=i.getIndex()!==null,r=i.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(s&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.vertexCount;for(const f in i.attributes){const m=t.getAttribute(f),p=i.getAttribute(f);DCe(m,p,l);const y=m.itemSize;for(let v=m.count,_=c;v<_;v++){const b=l+v;for(let w=0;w<y;w++)p.setComponent(b,w,0)}p.needsUpdate=!0,p.addUpdateRange(l*y,c*y)}if(s){const f=a.indexStart;for(let m=0;m<o.count;m++)r.setX(f+m,l+o.getX(m));for(let m=o.count,p=a.indexCount;m<p;m++)r.setX(f+m,l);r.needsUpdate=!0,r.addUpdateRange(f,a.indexCount)}const u=this._bounds[e];t.boundingBox!==null?(u.box.copy(t.boundingBox),u.boxInitialized=!0):u.boxInitialized=!1,t.boundingSphere!==null?(u.sphere.copy(t.boundingSphere),u.sphereInitialized=!0):u.sphereInitialized=!1;const d=this._drawRanges[e],h=t.getAttribute("position");return d.count=s?o.count:h.count,this._visibilityChanged=!0,e}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this._bounds[e],s=i.box,r=this.geometry;if(i.boxInitialized===!1){s.makeEmpty();const o=r.index,a=r.attributes.position,l=this._drawRanges[e];for(let c=l.start,u=l.start+l.count;c<u;c++){let d=c;o&&(d=o.getX(d)),s.expandByPoint(am.fromBufferAttribute(a,d))}i.boxInitialized=!0}return t.copy(s),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this._bounds[e],s=i.sphere,r=this.geometry;if(i.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,hy),hy.getCenter(s.center);const o=r.index,a=r.attributes.position,l=this._drawRanges[e];let c=0;for(let u=l.start,d=l.start+l.count;u<d;u++){let h=u;o&&(h=o.getX(h)),am.fromBufferAttribute(a,h),c=Math.max(c,s.center.distanceToSquared(am))}s.radius=Math.sqrt(c),i.sphereInitialized=!0}return t.copy(s),t}setMatrixAt(e,t){const i=this._drawInfo,s=this._matricesTexture,r=this._matricesTexture.image.data;return e>=i.length||i[e].active===!1?this:(t.toArray(r,e*16),s.needsUpdate=!0,this)}getMatrixAt(e,t){const i=this._drawInfo,s=this._matricesTexture.image.data;return e>=i.length||i[e].active===!1?null:t.fromArray(s,e*16)}setColorAt(e,t){this._colorsTexture===null&&this._initColorsTexture();const i=this._colorsTexture,s=this._colorsTexture.image.data,r=this._drawInfo;return e>=r.length||r[e].active===!1?this:(t.toArray(s,e*4),i.needsUpdate=!0,this)}getColorAt(e,t){const i=this._colorsTexture.image.data,s=this._drawInfo;return e>=s.length||s[e].active===!1?null:t.fromArray(i,e*4)}setVisibleAt(e,t){const i=this._drawInfo;return e>=i.length||i[e].active===!1||i[e].visible===t?this:(i[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._drawInfo;return e>=t.length||t[e].active===!1?!1:t[e].visible}raycast(e,t){const i=this._drawInfo,s=this._drawRanges,r=this.matrixWorld,o=this.geometry;Fs.material=this.material,Fs.geometry.index=o.index,Fs.geometry.attributes=o.attributes,Fs.geometry.boundingBox===null&&(Fs.geometry.boundingBox=new Nn),Fs.geometry.boundingSphere===null&&(Fs.geometry.boundingSphere=new bi);for(let a=0,l=i.length;a<l;a++){if(!i[a].visible||!i[a].active)continue;const c=i[a].geometryIndex,u=s[c];Fs.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(a,Fs.matrixWorld).premultiply(r),this.getBoundingBoxAt(c,Fs.geometry.boundingBox),this.getBoundingSphereAt(c,Fs.geometry.boundingSphere),Fs.raycast(e,fy);for(let d=0,h=fy.length;d<h;d++){const f=fy[d];f.object=this,f.batchId=a,t.push(f)}fy.length=0}Fs.material=null,Fs.geometry.index=null,Fs.geometry.attributes={},Fs.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._drawInfo=e._drawInfo.map(t=>({...t})),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,i,s,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=s.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._drawInfo,c=this._multiDrawStarts,u=this._multiDrawCounts,d=this._drawRanges,h=this.perObjectFrustumCulled,f=this._indirectTexture,m=f.image.data;h&&(iL.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),eS.setFromProjectionMatrix(iL,e.coordinateSystem));let p=0;if(this.sortObjects){Qx.copy(this.matrixWorld).invert(),am.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Qx),sL.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Qx);for(let _=0,b=l.length;_<b;_++)if(l[_].visible&&l[_].active){const w=l[_].geometryIndex;this.getMatrixAt(_,dc),this.getBoundingSphereAt(w,Lu).applyMatrix4(dc);let x=!1;if(h&&(x=!eS.intersectsSphere(Lu)),!x){const S=OCe.subVectors(Lu.center,am).dot(sL);tS.push(d[w],S,_)}}const y=tS.list,v=this.customSort;v===null?y.sort(r.transparent?RCe:ICe):v.call(this,y,i);for(let _=0,b=y.length;_<b;_++){const w=y[_];c[p]=w.start*a,u[p]=w.count,m[p]=w.index,p++}tS.reset()}else for(let y=0,v=l.length;y<v;y++)if(l[y].visible&&l[y].active){const _=l[y].geometryIndex;let b=!1;if(h&&(this.getMatrixAt(y,dc),this.getBoundingSphereAt(_,Lu).applyMatrix4(dc),b=!eS.intersectsSphere(Lu)),!b){const w=d[_];c[p]=w.start*a,u[p]=w.count,m[p]=y,p++}}f.needsUpdate=!0,this._multiDrawCount=p,this._visibilityChanged=!1}onBeforeShadow(e,t,i,s,r,o){this.onBeforeRender(e,null,s,r,o)}}class Vi extends zi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new gt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Ub=new G,zb=new G,rL=new yt,lm=new fh,py=new bi,nS=new G,oL=new G;class gs extends rn{constructor(e=new jt,t=new Vi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let s=1,r=t.count;s<r;s++)Ub.fromBufferAttribute(t,s-1),zb.fromBufferAttribute(t,s),i[s]=i[s-1],i[s]+=Ub.distanceTo(zb);e.setAttribute("lineDistance",new kt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,r=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),py.copy(i.boundingSphere),py.applyMatrix4(s),py.radius+=r,e.ray.intersectsSphere(py)===!1)return;rL.copy(s).invert(),lm.copy(e.ray).applyMatrix4(rL);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,u=i.index,h=i.attributes.position;if(u!==null){const f=Math.max(0,o.start),m=Math.min(u.count,o.start+o.count);for(let p=f,y=m-1;p<y;p+=c){const v=u.getX(p),_=u.getX(p+1),b=my(this,e,lm,l,v,_);b&&t.push(b)}if(this.isLineLoop){const p=u.getX(m-1),y=u.getX(f),v=my(this,e,lm,l,p,y);v&&t.push(v)}}else{const f=Math.max(0,o.start),m=Math.min(h.count,o.start+o.count);for(let p=f,y=m-1;p<y;p+=c){const v=my(this,e,lm,l,p,p+1);v&&t.push(v)}if(this.isLineLoop){const p=my(this,e,lm,l,m-1,f);p&&t.push(p)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}function my(n,e,t,i,s,r){const o=n.geometry.attributes.position;if(Ub.fromBufferAttribute(o,s),zb.fromBufferAttribute(o,r),t.distanceSqToSegment(Ub,zb,nS,oL)>i)return;nS.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(nS);if(!(l<e.near||l>e.far))return{distance:l,point:oL.clone().applyMatrix4(n.matrixWorld),index:s,face:null,faceIndex:null,object:n}}const aL=new G,lL=new G;class gr extends gs{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let s=0,r=t.count;s<r;s+=2)aL.fromBufferAttribute(t,s),lL.fromBufferAttribute(t,s+1),i[s]=s===0?0:i[s-1],i[s+1]=i[s]+aL.distanceTo(lL);e.setAttribute("lineDistance",new kt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class fw extends gs{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Up extends zi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new gt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const cL=new yt,CM=new fh,gy=new bi,vy=new G;class n0 extends rn{constructor(e=new jt,t=new Up){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,r=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),gy.copy(i.boundingSphere),gy.applyMatrix4(s),gy.radius+=r,e.ray.intersectsSphere(gy)===!1)return;cL.copy(s).invert(),CM.copy(e.ray).applyMatrix4(cL);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,d=i.attributes.position;if(c!==null){const h=Math.max(0,o.start),f=Math.min(c.count,o.start+o.count);for(let m=h,p=f;m<p;m++){const y=c.getX(m);vy.fromBufferAttribute(d,y),uL(vy,y,l,s,e,t,this)}}else{const h=Math.max(0,o.start),f=Math.min(d.count,o.start+o.count);for(let m=h,p=f;m<p;m++)vy.fromBufferAttribute(d,m),uL(vy,m,l,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}function uL(n,e,t,i,s,r,o){const a=CM.distanceSqToPoint(n);if(a<t){const l=new G;CM.closestPointToPoint(n,l),l.applyMatrix4(i);const c=s.ray.origin.distanceTo(l);if(c<s.near||c>s.far)return;r.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class NCe extends Wn{constructor(e,t,i,s,r,o,a,l,c){super(e,t,i,s,r,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Rn,this.magFilter=r!==void 0?r:Rn,this.generateMipmaps=!1;const u=this;function d(){u.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class FCe extends Wn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=ii,this.minFilter=ii,this.generateMipmaps=!1,this.needsUpdate=!0}}class pw extends Wn{constructor(e,t,i,s,r,o,a,l,c,u,d,h){super(null,o,a,l,c,u,s,r,d,h),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class BCe extends pw{constructor(e,t,i,s,r,o){super(e,t,i,r,o),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=Sr,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class UCe extends pw{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,Ol),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Hz extends Wn{constructor(e,t,i,s,r,o,a,l,c){super(e,t,i,s,r,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class da{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,s=this.getPoint(0),r=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),r+=i.distanceTo(s),t.push(r),s=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let s=0;const r=i.length;let o;t?o=t:o=e*i[r-1];let a=0,l=r-1,c;for(;a<=l;)if(s=Math.floor(a+(l-a)/2),c=i[s]-o,c<0)a=s+1;else if(c>0)l=s-1;else{l=s;break}if(s=l,i[s]===o)return s/(r-1);const u=i[s],h=i[s+1]-u,f=(o-u)/h;return(s+f)/(r-1)}getTangent(e,t){let s=e-1e-4,r=e+1e-4;s<0&&(s=0),r>1&&(r=1);const o=this.getPoint(s),a=this.getPoint(r),l=t||(o.isVector2?new tt:new G);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new G,s=[],r=[],o=[],a=new G,l=new yt;for(let f=0;f<=e;f++){const m=f/e;s[f]=this.getTangentAt(m,new G)}r[0]=new G,o[0]=new G;let c=Number.MAX_VALUE;const u=Math.abs(s[0].x),d=Math.abs(s[0].y),h=Math.abs(s[0].z);u<=c&&(c=u,i.set(1,0,0)),d<=c&&(c=d,i.set(0,1,0)),h<=c&&i.set(0,0,1),a.crossVectors(s[0],i).normalize(),r[0].crossVectors(s[0],a),o[0].crossVectors(s[0],r[0]);for(let f=1;f<=e;f++){if(r[f]=r[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(s[f-1],s[f]),a.length()>Number.EPSILON){a.normalize();const m=Math.acos(Ni(s[f-1].dot(s[f]),-1,1));r[f].applyMatrix4(l.makeRotationAxis(a,m))}o[f].crossVectors(s[f],r[f])}if(t===!0){let f=Math.acos(Ni(r[0].dot(r[e]),-1,1));f/=e,s[0].dot(a.crossVectors(r[0],r[e]))>0&&(f=-f);for(let m=1;m<=e;m++)r[m].applyMatrix4(l.makeRotationAxis(s[m],f*m)),o[m].crossVectors(s[m],r[m])}return{tangents:s,normals:r,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class mw extends da{constructor(e=0,t=0,i=1,s=1,r=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=s,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new tt){const i=t,s=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const o=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=s;for(;r>s;)r-=s;r<Number.EPSILON&&(o?r=0:r=s),this.aClockwise===!0&&!o&&(r===s?r=-s:r=r-s);const a=this.aStartAngle+e*r;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=l-this.aX,f=c-this.aY;l=h*u-f*d+this.aX,c=h*d+f*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Vz extends mw{constructor(e,t,i,s,r,o){super(e,t,i,i,s,r,o),this.isArcCurve=!0,this.type="ArcCurve"}}function D2(){let n=0,e=0,t=0,i=0;function s(r,o,a,l){n=r,e=a,t=-3*r+3*o-2*a-l,i=2*r-2*o+a+l}return{initCatmullRom:function(r,o,a,l,c){s(o,a,c*(a-r),c*(l-o))},initNonuniformCatmullRom:function(r,o,a,l,c,u,d){let h=(o-r)/c-(a-r)/(c+u)+(a-o)/u,f=(a-o)/u-(l-o)/(u+d)+(l-a)/d;h*=u,f*=u,s(o,a,h,f)},calc:function(r){const o=r*r,a=o*r;return n+e*r+t*o+i*a}}}const yy=new G,iS=new D2,sS=new D2,rS=new D2;class $z extends da{constructor(e=[],t=!1,i="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=s}getPoint(e,t=new G){const i=t,s=this.points,r=s.length,o=(r-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/r)+1)*r:l===0&&a===r-1&&(a=r-2,l=1);let c,u;this.closed||a>0?c=s[(a-1)%r]:(yy.subVectors(s[0],s[1]).add(s[0]),c=yy);const d=s[a%r],h=s[(a+1)%r];if(this.closed||a+2<r?u=s[(a+2)%r]:(yy.subVectors(s[r-1],s[r-2]).add(s[r-1]),u=yy),this.curveType==="centripetal"||this.curveType==="chordal"){const f=this.curveType==="chordal"?.5:.25;let m=Math.pow(c.distanceToSquared(d),f),p=Math.pow(d.distanceToSquared(h),f),y=Math.pow(h.distanceToSquared(u),f);p<1e-4&&(p=1),m<1e-4&&(m=p),y<1e-4&&(y=p),iS.initNonuniformCatmullRom(c.x,d.x,h.x,u.x,m,p,y),sS.initNonuniformCatmullRom(c.y,d.y,h.y,u.y,m,p,y),rS.initNonuniformCatmullRom(c.z,d.z,h.z,u.z,m,p,y)}else this.curveType==="catmullrom"&&(iS.initCatmullRom(c.x,d.x,h.x,u.x,this.tension),sS.initCatmullRom(c.y,d.y,h.y,u.y,this.tension),rS.initCatmullRom(c.z,d.z,h.z,u.z,this.tension));return i.set(iS.calc(l),sS.calc(l),rS.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const s=this.points[t];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(new G().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function dL(n,e,t,i,s){const r=(i-e)*.5,o=(s-t)*.5,a=n*n,l=n*a;return(2*t-2*i+r+o)*l+(-3*t+3*i-2*r-o)*a+r*n+t}function zCe(n,e){const t=1-n;return t*t*e}function HCe(n,e){return 2*(1-n)*n*e}function VCe(n,e){return n*n*e}function lg(n,e,t,i){return zCe(n,e)+HCe(n,t)+VCe(n,i)}function $Ce(n,e){const t=1-n;return t*t*t*e}function GCe(n,e){const t=1-n;return 3*t*t*n*e}function WCe(n,e){return 3*(1-n)*n*n*e}function KCe(n,e){return n*n*n*e}function cg(n,e,t,i,s){return $Ce(n,e)+GCe(n,t)+WCe(n,i)+KCe(n,s)}class N2 extends da{constructor(e=new tt,t=new tt,i=new tt,s=new tt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=s}getPoint(e,t=new tt){const i=t,s=this.v0,r=this.v1,o=this.v2,a=this.v3;return i.set(cg(e,s.x,r.x,o.x,a.x),cg(e,s.y,r.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Gz extends da{constructor(e=new G,t=new G,i=new G,s=new G){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=s}getPoint(e,t=new G){const i=t,s=this.v0,r=this.v1,o=this.v2,a=this.v3;return i.set(cg(e,s.x,r.x,o.x,a.x),cg(e,s.y,r.y,o.y,a.y),cg(e,s.z,r.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class F2 extends da{constructor(e=new tt,t=new tt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new tt){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new tt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Wz extends da{constructor(e=new G,t=new G){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new G){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new G){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class B2 extends da{constructor(e=new tt,t=new tt,i=new tt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new tt){const i=t,s=this.v0,r=this.v1,o=this.v2;return i.set(lg(e,s.x,r.x,o.x),lg(e,s.y,r.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class U2 extends da{constructor(e=new G,t=new G,i=new G){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new G){const i=t,s=this.v0,r=this.v1,o=this.v2;return i.set(lg(e,s.x,r.x,o.x),lg(e,s.y,r.y,o.y),lg(e,s.z,r.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class z2 extends da{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new tt){const i=t,s=this.points,r=(s.length-1)*e,o=Math.floor(r),a=r-o,l=s[o===0?o:o-1],c=s[o],u=s[o>s.length-2?s.length-1:o+1],d=s[o>s.length-3?s.length-1:o+2];return i.set(dL(a,l.x,c.x,u.x,d.x),dL(a,l.y,c.y,u.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const s=this.points[t];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(new tt().fromArray(s))}return this}}var Hb=Object.freeze({__proto__:null,ArcCurve:Vz,CatmullRomCurve3:$z,CubicBezierCurve:N2,CubicBezierCurve3:Gz,EllipseCurve:mw,LineCurve:F2,LineCurve3:Wz,QuadraticBezierCurve:B2,QuadraticBezierCurve3:U2,SplineCurve:z2});class Kz extends da{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Hb[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),s=this.getCurveLengths();let r=0;for(;r<s.length;){if(s[r]>=i){const o=s[r]-i,a=this.curves[r],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,s=this.curves.length;i<s;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let s=0,r=this.curves;s<r.length;s++){const o=r[s],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const s=e.curves[t];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const s=this.curves[t];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const s=e.curves[t];this.curves.push(new Hb[s.type]().fromJSON(s))}return this}}class uv extends Kz{constructor(e){super(),this.type="Path",this.currentPoint=new tt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new F2(this.currentPoint.clone(),new tt(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,s){const r=new B2(this.currentPoint.clone(),new tt(e,t),new tt(i,s));return this.curves.push(r),this.currentPoint.set(i,s),this}bezierCurveTo(e,t,i,s,r,o){const a=new N2(this.currentPoint.clone(),new tt(e,t),new tt(i,s),new tt(r,o));return this.curves.push(a),this.currentPoint.set(r,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new z2(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,s,r,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,s,r,o),this}absarc(e,t,i,s,r,o){return this.absellipse(e,t,i,i,s,r,o),this}ellipse(e,t,i,s,r,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,i,s,r,o,a,l),this}absellipse(e,t,i,s,r,o,a,l){const c=new mw(e,t,i,s,r,o,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class i0 extends jt{constructor(e=[new tt(0,-.5),new tt(.5,0),new tt(0,.5)],t=12,i=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:s},t=Math.floor(t),s=Ni(s,0,Math.PI*2);const r=[],o=[],a=[],l=[],c=[],u=1/t,d=new G,h=new tt,f=new G,m=new G,p=new G;let y=0,v=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:y=e[_+1].x-e[_].x,v=e[_+1].y-e[_].y,f.x=v*1,f.y=-y,f.z=v*0,p.copy(f),f.normalize(),l.push(f.x,f.y,f.z);break;case e.length-1:l.push(p.x,p.y,p.z);break;default:y=e[_+1].x-e[_].x,v=e[_+1].y-e[_].y,f.x=v*1,f.y=-y,f.z=v*0,m.copy(f),f.x+=p.x,f.y+=p.y,f.z+=p.z,f.normalize(),l.push(f.x,f.y,f.z),p.copy(m)}for(let _=0;_<=t;_++){const b=i+_*u*s,w=Math.sin(b),x=Math.cos(b);for(let S=0;S<=e.length-1;S++){d.x=e[S].x*w,d.y=e[S].y,d.z=e[S].x*x,o.push(d.x,d.y,d.z),h.x=_/t,h.y=S/(e.length-1),a.push(h.x,h.y);const C=l[3*S+0]*w,T=l[3*S+1],M=l[3*S+0]*x;c.push(C,T,M)}}for(let _=0;_<t;_++)for(let b=0;b<e.length-1;b++){const w=b+_*e.length,x=w,S=w+e.length,C=w+e.length+1,T=w+1;r.push(x,S,T),r.push(C,T,S)}this.setIndex(r),this.setAttribute("position",new kt(o,3)),this.setAttribute("uv",new kt(a,2)),this.setAttribute("normal",new kt(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i0(e.points,e.segments,e.phiStart,e.phiLength)}}class gw extends i0{constructor(e=1,t=1,i=4,s=8){const r=new uv;r.absarc(0,-t/2,e,Math.PI*1.5,0),r.absarc(0,t/2,e,0,Math.PI*.5),super(r.getPoints(i),s),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:s}}static fromJSON(e){return new gw(e.radius,e.length,e.capSegments,e.radialSegments)}}class vw extends jt{constructor(e=1,t=32,i=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:s},t=Math.max(3,t);const r=[],o=[],a=[],l=[],c=new G,u=new tt;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,h=3;d<=t;d++,h+=3){const f=i+d/t*s;c.x=e*Math.cos(f),c.y=e*Math.sin(f),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[h]/e+1)/2,u.y=(o[h+1]/e+1)/2,l.push(u.x,u.y)}for(let d=1;d<=t;d++)r.push(d,d+1,0);this.setIndex(r),this.setAttribute("position",new kt(o,3)),this.setAttribute("normal",new kt(a,3)),this.setAttribute("uv",new kt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vw(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Qi extends jt{constructor(e=1,t=1,i=1,s=32,r=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:s,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:l};const c=this;s=Math.floor(s),r=Math.floor(r);const u=[],d=[],h=[],f=[];let m=0;const p=[],y=i/2;let v=0;_(),o===!1&&(e>0&&b(!0),t>0&&b(!1)),this.setIndex(u),this.setAttribute("position",new kt(d,3)),this.setAttribute("normal",new kt(h,3)),this.setAttribute("uv",new kt(f,2));function _(){const w=new G,x=new G;let S=0;const C=(t-e)/i;for(let T=0;T<=r;T++){const M=[],E=T/r,A=E*(t-e)+e;for(let I=0;I<=s;I++){const B=I/s,F=B*l+a,U=Math.sin(F),P=Math.cos(F);x.x=A*U,x.y=-E*i+y,x.z=A*P,d.push(x.x,x.y,x.z),w.set(U,C,P).normalize(),h.push(w.x,w.y,w.z),f.push(B,1-E),M.push(m++)}p.push(M)}for(let T=0;T<s;T++)for(let M=0;M<r;M++){const E=p[M][T],A=p[M+1][T],I=p[M+1][T+1],B=p[M][T+1];u.push(E,A,B),u.push(A,I,B),S+=6}c.addGroup(v,S,0),v+=S}function b(w){const x=m,S=new tt,C=new G;let T=0;const M=w===!0?e:t,E=w===!0?1:-1;for(let I=1;I<=s;I++)d.push(0,y*E,0),h.push(0,E,0),f.push(.5,.5),m++;const A=m;for(let I=0;I<=s;I++){const F=I/s*l+a,U=Math.cos(F),P=Math.sin(F);C.x=M*P,C.y=y*E,C.z=M*U,d.push(C.x,C.y,C.z),h.push(0,E,0),S.x=U*.5+.5,S.y=P*.5*E+.5,f.push(S.x,S.y),m++}for(let I=0;I<s;I++){const B=x+I,F=A+I;w===!0?u.push(F,F+1,B):u.push(F+1,F,B),T+=3}c.addGroup(v,T,w===!0?1:2),v+=T}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qi(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class yw extends Qi{constructor(e=1,t=1,i=32,s=1,r=!1,o=0,a=Math.PI*2){super(0,e,t,i,s,r,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:s,openEnded:r,thetaStart:o,thetaLength:a}}static fromJSON(e){return new yw(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class yu extends jt{constructor(e=[],t=[],i=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:s};const r=[],o=[];a(s),c(i),u(),this.setAttribute("position",new kt(r,3)),this.setAttribute("normal",new kt(r.slice(),3)),this.setAttribute("uv",new kt(o,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function a(_){const b=new G,w=new G,x=new G;for(let S=0;S<t.length;S+=3)f(t[S+0],b),f(t[S+1],w),f(t[S+2],x),l(b,w,x,_)}function l(_,b,w,x){const S=x+1,C=[];for(let T=0;T<=S;T++){C[T]=[];const M=_.clone().lerp(w,T/S),E=b.clone().lerp(w,T/S),A=S-T;for(let I=0;I<=A;I++)I===0&&T===S?C[T][I]=M:C[T][I]=M.clone().lerp(E,I/A)}for(let T=0;T<S;T++)for(let M=0;M<2*(S-T)-1;M++){const E=Math.floor(M/2);M%2===0?(h(C[T][E+1]),h(C[T+1][E]),h(C[T][E])):(h(C[T][E+1]),h(C[T+1][E+1]),h(C[T+1][E]))}}function c(_){const b=new G;for(let w=0;w<r.length;w+=3)b.x=r[w+0],b.y=r[w+1],b.z=r[w+2],b.normalize().multiplyScalar(_),r[w+0]=b.x,r[w+1]=b.y,r[w+2]=b.z}function u(){const _=new G;for(let b=0;b<r.length;b+=3){_.x=r[b+0],_.y=r[b+1],_.z=r[b+2];const w=y(_)/2/Math.PI+.5,x=v(_)/Math.PI+.5;o.push(w,1-x)}m(),d()}function d(){for(let _=0;_<o.length;_+=6){const b=o[_+0],w=o[_+2],x=o[_+4],S=Math.max(b,w,x),C=Math.min(b,w,x);S>.9&&C<.1&&(b<.2&&(o[_+0]+=1),w<.2&&(o[_+2]+=1),x<.2&&(o[_+4]+=1))}}function h(_){r.push(_.x,_.y,_.z)}function f(_,b){const w=_*3;b.x=e[w+0],b.y=e[w+1],b.z=e[w+2]}function m(){const _=new G,b=new G,w=new G,x=new G,S=new tt,C=new tt,T=new tt;for(let M=0,E=0;M<r.length;M+=9,E+=6){_.set(r[M+0],r[M+1],r[M+2]),b.set(r[M+3],r[M+4],r[M+5]),w.set(r[M+6],r[M+7],r[M+8]),S.set(o[E+0],o[E+1]),C.set(o[E+2],o[E+3]),T.set(o[E+4],o[E+5]),x.copy(_).add(b).add(w).divideScalar(3);const A=y(x);p(S,E+0,_,A),p(C,E+2,b,A),p(T,E+4,w,A)}}function p(_,b,w,x){x<0&&_.x===1&&(o[b]=_.x-1),w.x===0&&w.z===0&&(o[b]=x/2/Math.PI+.5)}function y(_){return Math.atan2(_.z,-_.x)}function v(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yu(e.vertices,e.indices,e.radius,e.details)}}class _w extends yu{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,s=1/i,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-i,0,-s,i,0,s,-i,0,s,i,-s,-i,0,-s,i,0,s,-i,0,s,i,0,-i,0,-s,i,0,-s,-i,0,s,i,0,s],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new _w(e.radius,e.detail)}}const _y=new G,by=new G,oS=new G,wy=new Vr;class H2 extends jt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const s=Math.pow(10,4),r=Math.cos(Rd*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],d=new Array(3),h={},f=[];for(let m=0;m<l;m+=3){o?(c[0]=o.getX(m),c[1]=o.getX(m+1),c[2]=o.getX(m+2)):(c[0]=m,c[1]=m+1,c[2]=m+2);const{a:p,b:y,c:v}=wy;if(p.fromBufferAttribute(a,c[0]),y.fromBufferAttribute(a,c[1]),v.fromBufferAttribute(a,c[2]),wy.getNormal(oS),d[0]=`${Math.round(p.x*s)},${Math.round(p.y*s)},${Math.round(p.z*s)}`,d[1]=`${Math.round(y.x*s)},${Math.round(y.y*s)},${Math.round(y.z*s)}`,d[2]=`${Math.round(v.x*s)},${Math.round(v.y*s)},${Math.round(v.z*s)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let _=0;_<3;_++){const b=(_+1)%3,w=d[_],x=d[b],S=wy[u[_]],C=wy[u[b]],T=`${w}_${x}`,M=`${x}_${w}`;M in h&&h[M]?(oS.dot(h[M].normal)<=r&&(f.push(S.x,S.y,S.z),f.push(C.x,C.y,C.z)),h[M]=null):T in h||(h[T]={index0:c[_],index1:c[b],normal:oS.clone()})}}for(const m in h)if(h[m]){const{index0:p,index1:y}=h[m];_y.fromBufferAttribute(a,p),by.fromBufferAttribute(a,y),f.push(_y.x,_y.y,_y.z),f.push(by.x,by.y,by.z)}this.setAttribute("position",new kt(f,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Pd extends uv{constructor(e){super(e),this.uuid=qr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,s=this.holes.length;i<s;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const s=e.holes[t];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const s=this.holes[t];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const s=e.holes[t];this.holes.push(new uv().fromJSON(s))}return this}}const YCe={triangulate:function(n,e,t=2){const i=e&&e.length,s=i?e[0]*t:n.length;let r=Yz(n,0,s,t,!0);const o=[];if(!r||r.next===r.prev)return o;let a,l,c,u,d,h,f;if(i&&(r=JCe(n,e,r,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let m=t;m<s;m+=t)d=n[m],h=n[m+1],d<a&&(a=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);f=Math.max(c-a,u-l),f=f!==0?32767/f:0}return dv(r,o,t,a,l,f,0),o}};function Yz(n,e,t,i,s){let r,o;if(s===cMe(n,e,t,i)>0)for(r=e;r<t;r+=i)o=hL(r,n[r],n[r+1],o);else for(r=t-i;r>=e;r-=i)o=hL(r,n[r],n[r+1],o);return o&&bw(o,o.next)&&(fv(o),o=o.next),o}function th(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(bw(t,t.next)||Ri(t.prev,t,t.next)===0)){if(fv(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function dv(n,e,t,i,s,r,o){if(!n)return;!o&&r&&iMe(n,i,s,r);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,r?jCe(n,i,s,r):XCe(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),fv(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=qCe(th(n),e,t),dv(n,e,t,i,s,r,2)):o===2&&ZCe(n,e,t,i,s,r):dv(th(n),e,t,i,s,r,1);break}}}function XCe(n){const e=n.prev,t=n,i=n.next;if(Ri(e,t,i)>=0)return!1;const s=e.x,r=t.x,o=i.x,a=e.y,l=t.y,c=i.y,u=s<r?s<o?s:o:r<o?r:o,d=a<l?a<c?a:c:l<c?l:c,h=s>r?s>o?s:o:r>o?r:o,f=a>l?a>c?a:c:l>c?l:c;let m=i.next;for(;m!==e;){if(m.x>=u&&m.x<=h&&m.y>=d&&m.y<=f&&_f(s,a,r,l,o,c,m.x,m.y)&&Ri(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function jCe(n,e,t,i){const s=n.prev,r=n,o=n.next;if(Ri(s,r,o)>=0)return!1;const a=s.x,l=r.x,c=o.x,u=s.y,d=r.y,h=o.y,f=a<l?a<c?a:c:l<c?l:c,m=u<d?u<h?u:h:d<h?d:h,p=a>l?a>c?a:c:l>c?l:c,y=u>d?u>h?u:h:d>h?d:h,v=MM(f,m,e,t,i),_=MM(p,y,e,t,i);let b=n.prevZ,w=n.nextZ;for(;b&&b.z>=v&&w&&w.z<=_;){if(b.x>=f&&b.x<=p&&b.y>=m&&b.y<=y&&b!==s&&b!==o&&_f(a,u,l,d,c,h,b.x,b.y)&&Ri(b.prev,b,b.next)>=0||(b=b.prevZ,w.x>=f&&w.x<=p&&w.y>=m&&w.y<=y&&w!==s&&w!==o&&_f(a,u,l,d,c,h,w.x,w.y)&&Ri(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;b&&b.z>=v;){if(b.x>=f&&b.x<=p&&b.y>=m&&b.y<=y&&b!==s&&b!==o&&_f(a,u,l,d,c,h,b.x,b.y)&&Ri(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;w&&w.z<=_;){if(w.x>=f&&w.x<=p&&w.y>=m&&w.y<=y&&w!==s&&w!==o&&_f(a,u,l,d,c,h,w.x,w.y)&&Ri(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function qCe(n,e,t){let i=n;do{const s=i.prev,r=i.next.next;!bw(s,r)&&Xz(s,i,i.next,r)&&hv(s,r)&&hv(r,s)&&(e.push(s.i/t|0),e.push(i.i/t|0),e.push(r.i/t|0),fv(i),fv(i.next),i=n=r),i=i.next}while(i!==n);return th(i)}function ZCe(n,e,t,i,s,r){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&oMe(o,a)){let l=jz(o,a);o=th(o,o.next),l=th(l,l.next),dv(o,e,t,i,s,r,0),dv(l,e,t,i,s,r,0);return}a=a.next}o=o.next}while(o!==n)}function JCe(n,e,t,i){const s=[];let r,o,a,l,c;for(r=0,o=e.length;r<o;r++)a=e[r]*i,l=r<o-1?e[r+1]*i:n.length,c=Yz(n,a,l,i,!1),c===c.next&&(c.steiner=!0),s.push(rMe(c));for(s.sort(QCe),r=0;r<s.length;r++)t=eMe(s[r],t);return t}function QCe(n,e){return n.x-e.x}function eMe(n,e){const t=tMe(n,e);if(!t)return e;const i=jz(t,n);return th(i,i.next),th(t,t.next)}function tMe(n,e){let t=e,i=-1/0,s;const r=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const h=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=r&&h>i&&(i=h,s=t.x<t.next.x?t:t.next,h===r))return s}t=t.next}while(t!==e);if(!s)return null;const a=s,l=s.x,c=s.y;let u=1/0,d;t=s;do r>=t.x&&t.x>=l&&r!==t.x&&_f(o<c?r:i,o,l,c,o<c?i:r,o,t.x,t.y)&&(d=Math.abs(o-t.y)/(r-t.x),hv(t,n)&&(d<u||d===u&&(t.x>s.x||t.x===s.x&&nMe(s,t)))&&(s=t,u=d)),t=t.next;while(t!==a);return s}function nMe(n,e){return Ri(n.prev,n,e.prev)<0&&Ri(e.next,n,n.next)<0}function iMe(n,e,t,i){let s=n;do s.z===0&&(s.z=MM(s.x,s.y,e,t,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==n);s.prevZ.nextZ=null,s.prevZ=null,sMe(s)}function sMe(n){let e,t,i,s,r,o,a,l,c=1;do{for(t=n,n=null,r=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(s=t,t=t.nextZ,a--):(s=i,i=i.nextZ,l--),r?r.nextZ=s:n=s,s.prevZ=r,r=s;t=i}r.nextZ=null,c*=2}while(o>1);return n}function MM(n,e,t,i,s){return n=(n-t)*s|0,e=(e-i)*s|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function rMe(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function _f(n,e,t,i,s,r,o,a){return(s-o)*(e-a)>=(n-o)*(r-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(r-a)>=(s-o)*(i-a)}function oMe(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!aMe(n,e)&&(hv(n,e)&&hv(e,n)&&lMe(n,e)&&(Ri(n.prev,n,e.prev)||Ri(n,e.prev,e))||bw(n,e)&&Ri(n.prev,n,n.next)>0&&Ri(e.prev,e,e.next)>0)}function Ri(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function bw(n,e){return n.x===e.x&&n.y===e.y}function Xz(n,e,t,i){const s=Sy(Ri(n,e,t)),r=Sy(Ri(n,e,i)),o=Sy(Ri(t,i,n)),a=Sy(Ri(t,i,e));return!!(s!==r&&o!==a||s===0&&xy(n,t,e)||r===0&&xy(n,i,e)||o===0&&xy(t,n,i)||a===0&&xy(t,e,i))}function xy(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Sy(n){return n>0?1:n<0?-1:0}function aMe(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&Xz(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function hv(n,e){return Ri(n.prev,n,n.next)<0?Ri(n,e,n.next)>=0&&Ri(n,n.prev,e)>=0:Ri(n,e,n.prev)<0||Ri(n,n.next,e)<0}function lMe(n,e){let t=n,i=!1;const s=(n.x+e.x)/2,r=(n.y+e.y)/2;do t.y>r!=t.next.y>r&&t.next.y!==t.y&&s<(t.next.x-t.x)*(r-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function jz(n,e){const t=new EM(n.i,n.x,n.y),i=new EM(e.i,e.x,e.y),s=n.next,r=e.prev;return n.next=e,e.prev=n,t.next=s,s.prev=t,i.next=t,t.prev=i,r.next=i,i.prev=r,i}function hL(n,e,t,i){const s=new EM(n,e,t);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function fv(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function EM(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function cMe(n,e,t,i){let s=0;for(let r=e,o=t-i;r<t;r+=i)s+=(n[o]-n[r])*(n[r+1]+n[o+1]),o=r;return s}class Da{static area(e){const t=e.length;let i=0;for(let s=t-1,r=0;r<t;s=r++)i+=e[s].x*e[r].y-e[r].x*e[s].y;return i*.5}static isClockWise(e){return Da.area(e)<0}static triangulateShape(e,t){const i=[],s=[],r=[];fL(e),pL(i,e);let o=e.length;t.forEach(fL);for(let l=0;l<t.length;l++)s.push(o),o+=t[l].length,pL(i,t[l]);const a=YCe.triangulate(i,s);for(let l=0;l<a.length;l+=3)r.push(a.slice(l,l+3));return r}}function fL(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function pL(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class ww extends jt{constructor(e=new Pd([new tt(.5,.5),new tt(-.5,.5),new tt(-.5,-.5),new tt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,s=[],r=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new kt(s,3)),this.setAttribute("uv",new kt(r,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let h=t.bevelEnabled!==void 0?t.bevelEnabled:!0,f=t.bevelThickness!==void 0?t.bevelThickness:.2,m=t.bevelSize!==void 0?t.bevelSize:f-.1,p=t.bevelOffset!==void 0?t.bevelOffset:0,y=t.bevelSegments!==void 0?t.bevelSegments:3;const v=t.extrudePath,_=t.UVGenerator!==void 0?t.UVGenerator:uMe;let b,w=!1,x,S,C,T;v&&(b=v.getSpacedPoints(u),w=!0,h=!1,x=v.computeFrenetFrames(u,!1),S=new G,C=new G,T=new G),h||(y=0,f=0,m=0,p=0);const M=a.extractPoints(c);let E=M.shape;const A=M.holes;if(!Da.isClockWise(E)){E=E.reverse();for(let K=0,j=A.length;K<j;K++){const ie=A[K];Da.isClockWise(ie)&&(A[K]=ie.reverse())}}const B=Da.triangulateShape(E,A),F=E;for(let K=0,j=A.length;K<j;K++){const ie=A[K];E=E.concat(ie)}function U(K,j,ie){return j||console.error("THREE.ExtrudeGeometry: vec does not exist"),K.clone().addScaledVector(j,ie)}const P=E.length,O=B.length;function D(K,j,ie){let ve,ye,me;const be=K.x-j.x,Pe=K.y-j.y,Z=ie.x-K.x,$=ie.y-K.y,de=be*be+Pe*Pe,Ae=be*$-Pe*Z;if(Math.abs(Ae)>Number.EPSILON){const De=Math.sqrt(de),fe=Math.sqrt(Z*Z+$*$),Ge=j.x-Pe/De,We=j.y+be/De,je=ie.x-$/fe,at=ie.y+Z/fe,Ue=((je-Ge)*$-(at-We)*Z)/(be*$-Pe*Z);ve=Ge+be*Ue-K.x,ye=We+Pe*Ue-K.y;const qe=ve*ve+ye*ye;if(qe<=2)return new tt(ve,ye);me=Math.sqrt(qe/2)}else{let De=!1;be>Number.EPSILON?Z>Number.EPSILON&&(De=!0):be<-Number.EPSILON?Z<-Number.EPSILON&&(De=!0):Math.sign(Pe)===Math.sign($)&&(De=!0),De?(ve=-Pe,ye=be,me=Math.sqrt(de)):(ve=be,ye=Pe,me=Math.sqrt(de/2))}return new tt(ve/me,ye/me)}const L=[];for(let K=0,j=F.length,ie=j-1,ve=K+1;K<j;K++,ie++,ve++)ie===j&&(ie=0),ve===j&&(ve=0),L[K]=D(F[K],F[ie],F[ve]);const H=[];let X,ne=L.concat();for(let K=0,j=A.length;K<j;K++){const ie=A[K];X=[];for(let ve=0,ye=ie.length,me=ye-1,be=ve+1;ve<ye;ve++,me++,be++)me===ye&&(me=0),be===ye&&(be=0),X[ve]=D(ie[ve],ie[me],ie[be]);H.push(X),ne=ne.concat(X)}for(let K=0;K<y;K++){const j=K/y,ie=f*Math.cos(j*Math.PI/2),ve=m*Math.sin(j*Math.PI/2)+p;for(let ye=0,me=F.length;ye<me;ye++){const be=U(F[ye],L[ye],ve);xe(be.x,be.y,-ie)}for(let ye=0,me=A.length;ye<me;ye++){const be=A[ye];X=H[ye];for(let Pe=0,Z=be.length;Pe<Z;Pe++){const $=U(be[Pe],X[Pe],ve);xe($.x,$.y,-ie)}}}const ce=m+p;for(let K=0;K<P;K++){const j=h?U(E[K],ne[K],ce):E[K];w?(C.copy(x.normals[0]).multiplyScalar(j.x),S.copy(x.binormals[0]).multiplyScalar(j.y),T.copy(b[0]).add(C).add(S),xe(T.x,T.y,T.z)):xe(j.x,j.y,0)}for(let K=1;K<=u;K++)for(let j=0;j<P;j++){const ie=h?U(E[j],ne[j],ce):E[j];w?(C.copy(x.normals[K]).multiplyScalar(ie.x),S.copy(x.binormals[K]).multiplyScalar(ie.y),T.copy(b[K]).add(C).add(S),xe(T.x,T.y,T.z)):xe(ie.x,ie.y,d/u*K)}for(let K=y-1;K>=0;K--){const j=K/y,ie=f*Math.cos(j*Math.PI/2),ve=m*Math.sin(j*Math.PI/2)+p;for(let ye=0,me=F.length;ye<me;ye++){const be=U(F[ye],L[ye],ve);xe(be.x,be.y,d+ie)}for(let ye=0,me=A.length;ye<me;ye++){const be=A[ye];X=H[ye];for(let Pe=0,Z=be.length;Pe<Z;Pe++){const $=U(be[Pe],X[Pe],ve);w?xe($.x,$.y+b[u-1].y,b[u-1].x+ie):xe($.x,$.y,d+ie)}}}ae(),_e();function ae(){const K=s.length/3;if(h){let j=0,ie=P*j;for(let ve=0;ve<O;ve++){const ye=B[ve];he(ye[2]+ie,ye[1]+ie,ye[0]+ie)}j=u+y*2,ie=P*j;for(let ve=0;ve<O;ve++){const ye=B[ve];he(ye[0]+ie,ye[1]+ie,ye[2]+ie)}}else{for(let j=0;j<O;j++){const ie=B[j];he(ie[2],ie[1],ie[0])}for(let j=0;j<O;j++){const ie=B[j];he(ie[0]+P*u,ie[1]+P*u,ie[2]+P*u)}}i.addGroup(K,s.length/3-K,0)}function _e(){const K=s.length/3;let j=0;re(F,j),j+=F.length;for(let ie=0,ve=A.length;ie<ve;ie++){const ye=A[ie];re(ye,j),j+=ye.length}i.addGroup(K,s.length/3-K,1)}function re(K,j){let ie=K.length;for(;--ie>=0;){const ve=ie;let ye=ie-1;ye<0&&(ye=K.length-1);for(let me=0,be=u+y*2;me<be;me++){const Pe=P*me,Z=P*(me+1),$=j+ve+Pe,de=j+ye+Pe,Ae=j+ye+Z,De=j+ve+Z;Te($,de,Ae,De)}}}function xe(K,j,ie){l.push(K),l.push(j),l.push(ie)}function he(K,j,ie){Ce(K),Ce(j),Ce(ie);const ve=s.length/3,ye=_.generateTopUV(i,s,ve-3,ve-2,ve-1);we(ye[0]),we(ye[1]),we(ye[2])}function Te(K,j,ie,ve){Ce(K),Ce(j),Ce(ve),Ce(j),Ce(ie),Ce(ve);const ye=s.length/3,me=_.generateSideWallUV(i,s,ye-6,ye-3,ye-2,ye-1);we(me[0]),we(me[1]),we(me[3]),we(me[1]),we(me[2]),we(me[3])}function Ce(K){s.push(l[K*3+0]),s.push(l[K*3+1]),s.push(l[K*3+2])}function we(K){r.push(K.x),r.push(K.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return dMe(t,i,e)}static fromJSON(e,t){const i=[];for(let r=0,o=e.shapes.length;r<o;r++){const a=t[e.shapes[r]];i.push(a)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new Hb[s.type]().fromJSON(s)),new ww(i,e.options)}}const uMe={generateTopUV:function(n,e,t,i,s){const r=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[s*3],u=e[s*3+1];return[new tt(r,o),new tt(a,l),new tt(c,u)]},generateSideWallUV:function(n,e,t,i,s,r){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],u=e[i*3+1],d=e[i*3+2],h=e[s*3],f=e[s*3+1],m=e[s*3+2],p=e[r*3],y=e[r*3+1],v=e[r*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new tt(o,1-l),new tt(c,1-d),new tt(h,1-m),new tt(p,1-v)]:[new tt(a,1-l),new tt(u,1-d),new tt(f,1-m),new tt(y,1-v)]}};function dMe(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,s=n.length;i<s;i++){const r=n[i];t.shapes.push(r.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class xw extends yu{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,s=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,r,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new xw(e.radius,e.detail)}}class Sl extends yu{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,s,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Sl(e.radius,e.detail)}}class Sw extends jt{constructor(e=.5,t=1,i=32,s=1,r=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:s,thetaStart:r,thetaLength:o},i=Math.max(3,i),s=Math.max(1,s);const a=[],l=[],c=[],u=[];let d=e;const h=(t-e)/s,f=new G,m=new tt;for(let p=0;p<=s;p++){for(let y=0;y<=i;y++){const v=r+y/i*o;f.x=d*Math.cos(v),f.y=d*Math.sin(v),l.push(f.x,f.y,f.z),c.push(0,0,1),m.x=(f.x/t+1)/2,m.y=(f.y/t+1)/2,u.push(m.x,m.y)}d+=h}for(let p=0;p<s;p++){const y=p*(i+1);for(let v=0;v<i;v++){const _=v+y,b=_,w=_+i+1,x=_+i+2,S=_+1;a.push(b,w,S),a.push(w,x,S)}}this.setIndex(a),this.setAttribute("position",new kt(l,3)),this.setAttribute("normal",new kt(c,3)),this.setAttribute("uv",new kt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sw(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Cw extends jt{constructor(e=new Pd([new tt(0,.5),new tt(-.5,-.5),new tt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],s=[],r=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new kt(s,3)),this.setAttribute("normal",new kt(r,3)),this.setAttribute("uv",new kt(o,2));function c(u){const d=s.length/3,h=u.extractPoints(t);let f=h.shape;const m=h.holes;Da.isClockWise(f)===!1&&(f=f.reverse());for(let y=0,v=m.length;y<v;y++){const _=m[y];Da.isClockWise(_)===!0&&(m[y]=_.reverse())}const p=Da.triangulateShape(f,m);for(let y=0,v=m.length;y<v;y++){const _=m[y];f=f.concat(_)}for(let y=0,v=f.length;y<v;y++){const _=f[y];s.push(_.x,_.y,0),r.push(0,0,1),o.push(_.x,_.y)}for(let y=0,v=p.length;y<v;y++){const _=p[y],b=_[0]+d,w=_[1]+d,x=_[2]+d;i.push(b,w,x),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return hMe(t,e)}static fromJSON(e,t){const i=[];for(let s=0,r=e.shapes.length;s<r;s++){const o=t[e.shapes[s]];i.push(o)}return new Cw(i,e.curveSegments)}}function hMe(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const s=n[t];e.shapes.push(s.uuid)}else e.shapes.push(n.uuid);return e}class gh extends jt{constructor(e=1,t=32,i=16,s=0,r=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:s,phiLength:r,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const u=[],d=new G,h=new G,f=[],m=[],p=[],y=[];for(let v=0;v<=i;v++){const _=[],b=v/i;let w=0;v===0&&o===0?w=.5/t:v===i&&l===Math.PI&&(w=-.5/t);for(let x=0;x<=t;x++){const S=x/t;d.x=-e*Math.cos(s+S*r)*Math.sin(o+b*a),d.y=e*Math.cos(o+b*a),d.z=e*Math.sin(s+S*r)*Math.sin(o+b*a),m.push(d.x,d.y,d.z),h.copy(d).normalize(),p.push(h.x,h.y,h.z),y.push(S+w,1-b),_.push(c++)}u.push(_)}for(let v=0;v<i;v++)for(let _=0;_<t;_++){const b=u[v][_+1],w=u[v][_],x=u[v+1][_],S=u[v+1][_+1];(v!==0||o>0)&&f.push(b,w,S),(v!==i-1||l<Math.PI)&&f.push(w,x,S)}this.setIndex(f),this.setAttribute("position",new kt(m,3)),this.setAttribute("normal",new kt(p,3)),this.setAttribute("uv",new kt(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gh(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Mw extends yu{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,s,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Mw(e.radius,e.detail)}}class yl extends jt{constructor(e=1,t=.4,i=12,s=48,r=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:s,arc:r},i=Math.floor(i),s=Math.floor(s);const o=[],a=[],l=[],c=[],u=new G,d=new G,h=new G;for(let f=0;f<=i;f++)for(let m=0;m<=s;m++){const p=m/s*r,y=f/i*Math.PI*2;d.x=(e+t*Math.cos(y))*Math.cos(p),d.y=(e+t*Math.cos(y))*Math.sin(p),d.z=t*Math.sin(y),a.push(d.x,d.y,d.z),u.x=e*Math.cos(p),u.y=e*Math.sin(p),h.subVectors(d,u).normalize(),l.push(h.x,h.y,h.z),c.push(m/s),c.push(f/i)}for(let f=1;f<=i;f++)for(let m=1;m<=s;m++){const p=(s+1)*f+m-1,y=(s+1)*(f-1)+m-1,v=(s+1)*(f-1)+m,_=(s+1)*f+m;o.push(p,y,_),o.push(y,v,_)}this.setIndex(o),this.setAttribute("position",new kt(a,3)),this.setAttribute("normal",new kt(l,3)),this.setAttribute("uv",new kt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yl(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Ew extends jt{constructor(e=1,t=.4,i=64,s=8,r=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:s,p:r,q:o},i=Math.floor(i),s=Math.floor(s);const a=[],l=[],c=[],u=[],d=new G,h=new G,f=new G,m=new G,p=new G,y=new G,v=new G;for(let b=0;b<=i;++b){const w=b/i*r*Math.PI*2;_(w,r,o,e,f),_(w+.01,r,o,e,m),y.subVectors(m,f),v.addVectors(m,f),p.crossVectors(y,v),v.crossVectors(p,y),p.normalize(),v.normalize();for(let x=0;x<=s;++x){const S=x/s*Math.PI*2,C=-t*Math.cos(S),T=t*Math.sin(S);d.x=f.x+(C*v.x+T*p.x),d.y=f.y+(C*v.y+T*p.y),d.z=f.z+(C*v.z+T*p.z),l.push(d.x,d.y,d.z),h.subVectors(d,f).normalize(),c.push(h.x,h.y,h.z),u.push(b/i),u.push(x/s)}}for(let b=1;b<=i;b++)for(let w=1;w<=s;w++){const x=(s+1)*(b-1)+(w-1),S=(s+1)*b+(w-1),C=(s+1)*b+w,T=(s+1)*(b-1)+w;a.push(x,S,T),a.push(S,C,T)}this.setIndex(a),this.setAttribute("position",new kt(l,3)),this.setAttribute("normal",new kt(c,3)),this.setAttribute("uv",new kt(u,2));function _(b,w,x,S,C){const T=Math.cos(b),M=Math.sin(b),E=x/w*b,A=Math.cos(E);C.x=S*(2+A)*.5*T,C.y=S*(2+A)*M*.5,C.z=S*Math.sin(E)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ew(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Tw extends jt{constructor(e=new U2(new G(-1,-1,0),new G(-1,1,0),new G(1,1,0)),t=64,i=1,s=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:s,closed:r};const o=e.computeFrenetFrames(t,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new G,l=new G,c=new tt;let u=new G;const d=[],h=[],f=[],m=[];p(),this.setIndex(m),this.setAttribute("position",new kt(d,3)),this.setAttribute("normal",new kt(h,3)),this.setAttribute("uv",new kt(f,2));function p(){for(let b=0;b<t;b++)y(b);y(r===!1?t:0),_(),v()}function y(b){u=e.getPointAt(b/t,u);const w=o.normals[b],x=o.binormals[b];for(let S=0;S<=s;S++){const C=S/s*Math.PI*2,T=Math.sin(C),M=-Math.cos(C);l.x=M*w.x+T*x.x,l.y=M*w.y+T*x.y,l.z=M*w.z+T*x.z,l.normalize(),h.push(l.x,l.y,l.z),a.x=u.x+i*l.x,a.y=u.y+i*l.y,a.z=u.z+i*l.z,d.push(a.x,a.y,a.z)}}function v(){for(let b=1;b<=t;b++)for(let w=1;w<=s;w++){const x=(s+1)*(b-1)+(w-1),S=(s+1)*b+(w-1),C=(s+1)*b+w,T=(s+1)*(b-1)+w;m.push(x,S,T),m.push(S,C,T)}}function _(){for(let b=0;b<=t;b++)for(let w=0;w<=s;w++)c.x=b/t,c.y=w/s,f.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Tw(new Hb[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class qz extends jt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,s=new G,r=new G;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const d=l[c],h=d.start,f=d.count;for(let m=h,p=h+f;m<p;m+=3)for(let y=0;y<3;y++){const v=a.getX(m+y),_=a.getX(m+(y+1)%3);s.fromBufferAttribute(o,v),r.fromBufferAttribute(o,_),mL(s,r,i)===!0&&(t.push(s.x,s.y,s.z),t.push(r.x,r.y,r.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,d=3*a+(c+1)%3;s.fromBufferAttribute(o,u),r.fromBufferAttribute(o,d),mL(s,r,i)===!0&&(t.push(s.x,s.y,s.z),t.push(r.x,r.y,r.z))}}this.setAttribute("position",new kt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function mL(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(s)===!0?!1:(t.add(i),t.add(s),!0)}var gL=Object.freeze({__proto__:null,BoxGeometry:Ci,CapsuleGeometry:gw,CircleGeometry:vw,ConeGeometry:yw,CylinderGeometry:Qi,DodecahedronGeometry:_w,EdgesGeometry:H2,ExtrudeGeometry:ww,IcosahedronGeometry:xw,LatheGeometry:i0,OctahedronGeometry:Sl,PlaneGeometry:ua,PolyhedronGeometry:yu,RingGeometry:Sw,ShapeGeometry:Cw,SphereGeometry:gh,TetrahedronGeometry:Mw,TorusGeometry:yl,TorusKnotGeometry:Ew,TubeGeometry:Tw,WireframeGeometry:qz});class Zz extends zi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new gt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Jz extends Bi{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Fl extends zi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new gt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vu,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Js,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ss extends Fl{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new tt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ni(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new gt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new gt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new gt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class s0 extends zi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new gt(16777215),this.specular=new gt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vu,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Js,this.combine=Xv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Qz extends zi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new gt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vu,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class V2 extends zi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vu,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class $2 extends zi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new gt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vu,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Js,this.combine=Xv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class e5 extends zi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new gt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vu,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class t5 extends Vi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function pd(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function n5(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function i5(n){function e(s,r){return n[s]-n[r]}const t=n.length,i=new Array(t);for(let s=0;s!==t;++s)i[s]=s;return i.sort(e),i}function TM(n,e,t){const i=n.length,s=new n.constructor(i);for(let r=0,o=0;o!==i;++r){const a=t[r]*e;for(let l=0;l!==e;++l)s[o++]=n[a+l]}return s}function G2(n,e,t,i){let s=1,r=n[0];for(;r!==void 0&&r[i]===void 0;)r=n[s++];if(r===void 0)return;let o=r[i];if(o!==void 0)if(Array.isArray(o))do o=r[i],o!==void 0&&(e.push(r.time),t.push.apply(t,o)),r=n[s++];while(r!==void 0);else if(o.toArray!==void 0)do o=r[i],o!==void 0&&(e.push(r.time),o.toArray(t,t.length)),r=n[s++];while(r!==void 0);else do o=r[i],o!==void 0&&(e.push(r.time),t.push(o)),r=n[s++];while(r!==void 0)}function fMe(n,e,t,i,s=30){const r=n.clone();r.name=e;const o=[];for(let l=0;l<r.tracks.length;++l){const c=r.tracks[l],u=c.getValueSize(),d=[],h=[];for(let f=0;f<c.times.length;++f){const m=c.times[f]*s;if(!(m<t||m>=i)){d.push(c.times[f]);for(let p=0;p<u;++p)h.push(c.values[f*u+p])}}d.length!==0&&(c.times=pd(d,c.times.constructor),c.values=pd(h,c.values.constructor),o.push(c))}r.tracks=o;let a=1/0;for(let l=0;l<r.tracks.length;++l)a>r.tracks[l].times[0]&&(a=r.tracks[l].times[0]);for(let l=0;l<r.tracks.length;++l)r.tracks[l].shift(-1*a);return r.resetDuration(),r}function pMe(n,e=0,t=n,i=30){i<=0&&(i=30);const s=t.tracks.length,r=e/i;for(let o=0;o<s;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(v){return v.name===a.name&&v.ValueTypeName===l});if(c===void 0)continue;let u=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let h=0;const f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);const m=a.times.length-1;let p;if(r<=a.times[0]){const v=u,_=d-u;p=a.values.slice(v,_)}else if(r>=a.times[m]){const v=m*d+u,_=v+d-u;p=a.values.slice(v,_)}else{const v=a.createInterpolant(),_=u,b=d-u;v.evaluate(r),p=v.resultBuffer.slice(_,b)}l==="quaternion"&&new Mn().fromArray(p).normalize().conjugate().toArray(p);const y=c.times.length;for(let v=0;v<y;++v){const _=v*f+h;if(l==="quaternion")Mn.multiplyQuaternionsFlat(c.values,_,p,0,c.values,_);else{const b=f-h*2;for(let w=0;w<b;++w)c.values[_+w]-=p[w]}}}return n.blendMode=M2,n}const mMe={convertArray:pd,isTypedArray:n5,getKeyframeOrder:i5,sortedArray:TM,flattenJSON:G2,subclip:fMe,makeClipAdditive:pMe};class vh{constructor(e,t,i,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,s=t[i],r=t[i-1];e:{t:{let o;n:{i:if(!(e<s)){for(let a=i+2;;){if(s===void 0){if(e<r)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(r=s,s=t[++i],e<s)break t}o=t.length;break n}if(!(e>=r)){const a=t[1];e<a&&(i=2,r=a);for(let l=i-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(s=r,r=t[--i-1],e>=r)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(s=t[i],r=t[i-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,r,s)}return this.interpolate_(i,r,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=e*s;for(let o=0;o!==s;++o)t[o]=i[r+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class s5 extends vh{constructor(e,t,i,s){super(e,t,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ud,endingEnd:ud}}intervalChanged_(e,t,i){const s=this.parameterPositions;let r=e-2,o=e+1,a=s[r],l=s[o];if(a===void 0)switch(this.getSettings_().endingStart){case dd:r=e,a=2*t-i;break;case tv:r=s.length-2,a=t+s[r]-s[r+1];break;default:r=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case dd:o=e,l=2*i-t;break;case tv:o=1,l=i+s[1]-s[0];break;default:o=e-1,l=t}const c=(i-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=r*u,this._offsetNext=o*u}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,m=(i-t)/(s-t),p=m*m,y=p*m,v=-h*y+2*h*p-h*m,_=(1+h)*y+(-1.5-2*h)*p+(-.5+h)*m+1,b=(-1-f)*y+(1.5+f)*p+.5*m,w=f*y-f*p;for(let x=0;x!==a;++x)r[x]=v*o[u+x]+_*o[c+x]+b*o[l+x]+w*o[d+x];return r}}class W2 extends vh{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(s-t),d=1-u;for(let h=0;h!==a;++h)r[h]=o[c+h]*d+o[l+h]*u;return r}}class r5 extends vh{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class ha{constructor(e,t,i,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=pd(t,this.TimeBufferType),this.values=pd(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:pd(e.times,Array),values:pd(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(i.interpolation=s)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new r5(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new W2(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new s5(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Qd:t=this.InterpolantFactoryMethodDiscrete;break;case lu:t=this.InterpolantFactoryMethodLinear;break;case S_:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Qd;case this.InterpolantFactoryMethodLinear:return lu;case this.InterpolantFactoryMethodSmooth:return S_}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]*=e}return this}trim(e,t){const i=this.times,s=i.length;let r=0,o=s-1;for(;r!==s&&i[r]<e;)++r;for(;o!==-1&&i[o]>t;)--o;if(++o,r!==0||o!==s){r>=o&&(o=Math.max(o,1),r=o-1);const a=this.getValueSize();this.times=i.slice(r,o),this.values=this.values.slice(r*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,s=this.values,r=i.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==r;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(s!==void 0&&n5(s))for(let a=0,l=s.length;a!==l;++a){const c=s[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),s=this.getInterpolation()===S_,r=e.length-1;let o=1;for(let a=1;a<r;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(s)l=!0;else{const d=a*i,h=d-i,f=d+i;for(let m=0;m!==i;++m){const p=t[d+m];if(p!==t[h+m]||p!==t[f+m]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*i,h=o*i;for(let f=0;f!==i;++f)t[h+f]=t[d+f]}++o}}if(r>0){e[o]=e[r];for(let a=r*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,s=new i(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}ha.prototype.TimeBufferType=Float32Array;ha.prototype.ValueBufferType=Float32Array;ha.prototype.DefaultInterpolation=lu;class yh extends ha{constructor(e,t,i){super(e,t,i)}}yh.prototype.ValueTypeName="bool";yh.prototype.ValueBufferType=Array;yh.prototype.DefaultInterpolation=Qd;yh.prototype.InterpolantFactoryMethodLinear=void 0;yh.prototype.InterpolantFactoryMethodSmooth=void 0;class K2 extends ha{}K2.prototype.ValueTypeName="color";class Bl extends ha{}Bl.prototype.ValueTypeName="number";class o5 extends vh{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(s-t);let c=e*a;for(let u=c+a;c!==u;c+=4)Mn.slerpFlat(r,0,o,c-a,o,c,l);return r}}class Ul extends ha{InterpolantFactoryMethodLinear(e){return new o5(this.times,this.values,this.getValueSize(),e)}}Ul.prototype.ValueTypeName="quaternion";Ul.prototype.InterpolantFactoryMethodSmooth=void 0;class _h extends ha{constructor(e,t,i){super(e,t,i)}}_h.prototype.ValueTypeName="string";_h.prototype.ValueBufferType=Array;_h.prototype.DefaultInterpolation=Qd;_h.prototype.InterpolantFactoryMethodLinear=void 0;_h.prototype.InterpolantFactoryMethodSmooth=void 0;class zl extends ha{}zl.prototype.ValueTypeName="vector";class nh{constructor(e="",t=-1,i=[],s=tw){this.name=e,this.tracks=i,this.duration=t,this.blendMode=s,this.uuid=qr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,s=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(vMe(i[o]).scale(s));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],i=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,o=i.length;r!==o;++r)t.push(ha.toJSON(i[r]));return s}static CreateFromMorphTargetSequence(e,t,i,s){const r=t.length,o=[];for(let a=0;a<r;a++){let l=[],c=[];l.push((a+r-1)%r,a,(a+1)%r),c.push(0,1,0);const u=i5(l);l=TM(l,1,u),c=TM(c,1,u),!s&&l[0]===0&&(l.push(r),c.push(c[0])),o.push(new Bl(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const s=e;i=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<i.length;s++)if(i[s].name===t)return i[s];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const s={},r=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(r);if(u&&u.length>1){const d=u[1];let h=s[d];h||(s[d]=h=[]),h.push(c)}}const o=[];for(const a in s)o.push(this.CreateFromMorphTargetSequence(a,s[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,h,f,m,p){if(f.length!==0){const y=[],v=[];G2(f,y,v,m),y.length!==0&&p.push(new d(h,y,v))}},s=[],r=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const h=c[d].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const f={};let m;for(m=0;m<h.length;m++)if(h[m].morphTargets)for(let p=0;p<h[m].morphTargets.length;p++)f[h[m].morphTargets[p]]=-1;for(const p in f){const y=[],v=[];for(let _=0;_!==h[m].morphTargets.length;++_){const b=h[m];y.push(b.time),v.push(b.morphTarget===p?1:0)}s.push(new Bl(".morphTargetInfluence["+p+"]",y,v))}l=f.length*o}else{const f=".bones["+t[d].name+"]";i(zl,f+".position",h,"pos",s),i(Ul,f+".quaternion",h,"rot",s),i(zl,f+".scale",h,"scl",s)}}return s.length===0?null:new this(r,l,s,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,s=e.length;i!==s;++i){const r=this.tracks[i];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function gMe(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Bl;case"vector":case"vector2":case"vector3":case"vector4":return zl;case"color":return K2;case"quaternion":return Ul;case"bool":case"boolean":return yh;case"string":return _h}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function vMe(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=gMe(n.type);if(n.times===void 0){const t=[],i=[];G2(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Cl={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Aw{constructor(e,t,i){const s=this;let r=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,r===!1&&s.onStart!==void 0&&s.onStart(u,o,a),r=!0},this.itemEnd=function(u){o++,s.onProgress!==void 0&&s.onProgress(u,o,a),o===a&&(r=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(u){s.onError!==void 0&&s.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=c.length;d<h;d+=2){const f=c[d],m=c[d+1];if(f.global&&(f.lastIndex=0),f.test(u))return m}return null}}}const bh=new Aw;class ks{constructor(e){this.manager=e!==void 0?e:bh,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(s,r){i.load(e,s,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}ks.DEFAULT_MATERIAL_NAME="__DEFAULT";const rl={};class yMe extends Error{constructor(e,t){super(e),this.response=t}}class pr extends ks{constructor(e){super(e)}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=Cl.get(e);if(r!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(rl[e]!==void 0){rl[e].push({onLoad:t,onProgress:i,onError:s});return}rl[e]=[],rl[e].push({onLoad:t,onProgress:i,onError:s});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=rl[e],d=c.body.getReader(),h=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),f=h?parseInt(h):0,m=f!==0;let p=0;const y=new ReadableStream({start(v){_();function _(){d.read().then(({done:b,value:w})=>{if(b)v.close();else{p+=w.byteLength;const x=new ProgressEvent("progress",{lengthComputable:m,loaded:p,total:f});for(let S=0,C=u.length;S<C;S++){const T=u[S];T.onProgress&&T.onProgress(x)}v.enqueue(w),_()}},b=>{v.error(b)})}}});return new Response(y)}else throw new yMe(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),h=d&&d[1]?d[1].toLowerCase():void 0,f=new TextDecoder(h);return c.arrayBuffer().then(m=>f.decode(m))}}}).then(c=>{Cl.add(e,c);const u=rl[e];delete rl[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onLoad&&f.onLoad(c)}}).catch(c=>{const u=rl[e];if(u===void 0)throw this.manager.itemError(e),c;delete rl[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class _Me extends ks{constructor(e){super(e)}load(e,t,i,s){const r=this,o=new pr(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(r.parse(JSON.parse(a)))}catch(l){s?s(l):console.error(l),r.manager.itemError(e)}},i,s)}parse(e){const t=[];for(let i=0;i<e.length;i++){const s=nh.parse(e[i]);t.push(s)}return t}}class bMe extends ks{constructor(e){super(e)}load(e,t,i,s){const r=this,o=[],a=new pw,l=new pr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(r.withCredentials);let c=0;function u(d){l.load(e[d],function(h){const f=r.parse(h,!0);o[d]={width:f.width,height:f.height,format:f.format,mipmaps:f.mipmaps},c+=1,c===6&&(f.mipmapCount===1&&(a.minFilter=Rn),a.image=o,a.format=f.format,a.needsUpdate=!0,t&&t(a))},i,s)}if(Array.isArray(e))for(let d=0,h=e.length;d<h;++d)u(d);else l.load(e,function(d){const h=r.parse(d,!0);if(h.isCubemap){const f=h.mipmaps.length/h.mipmapCount;for(let m=0;m<f;m++){o[m]={mipmaps:[]};for(let p=0;p<h.mipmapCount;p++)o[m].mipmaps.push(h.mipmaps[m*h.mipmapCount+p]),o[m].format=h.format,o[m].width=h.width,o[m].height=h.height}a.image=o}else a.image.width=h.width,a.image.height=h.height,a.mipmaps=h.mipmaps;h.mipmapCount===1&&(a.minFilter=Rn),a.format=h.format,a.needsUpdate=!0,t&&t(a)},i,s);return a}}class pv extends ks{constructor(e){super(e)}load(e,t,i,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=Cl.get(e);if(o!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;const a=lv("img");function l(){u(),Cl.add(e,this),t&&t(this),r.manager.itemEnd(e)}function c(d){u(),s&&s(d),r.manager.itemError(e),r.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(e),a.src=e,a}}class wMe extends ks{constructor(e){super(e)}load(e,t,i,s){const r=new Qv;r.colorSpace=Ei;const o=new pv(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){r.images[c]=u,a++,a===6&&(r.needsUpdate=!0,t&&t(r))},void 0,s)}for(let c=0;c<e.length;++c)l(c);return r}}class Y2 extends ks{constructor(e){super(e)}load(e,t,i,s){const r=this,o=new Oa,a=new pr(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(r.withCredentials),a.load(e,function(l){let c;try{c=r.parse(l)}catch(u){if(s!==void 0)s(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Sr,o.wrapT=c.wrapT!==void 0?c.wrapT:Sr,o.magFilter=c.magFilter!==void 0?c.magFilter:Rn,o.minFilter=c.minFilter!==void 0?c.minFilter:Rn,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(o.colorSpace=c.colorSpace),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Cr),c.mipmapCount===1&&(o.minFilter=Rn),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},i,s),o}}class Iw extends ks{constructor(e){super(e)}load(e,t,i,s){const r=new Wn,o=new pv(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){r.image=a,r.needsUpdate=!0,t!==void 0&&t(r)},i,s),r}}class _u extends rn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new gt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class a5 extends _u{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(rn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new gt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const aS=new yt,vL=new G,yL=new G;class X2{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new tt(512,512),this.map=null,this.mapPass=null,this.matrix=new yt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ph,this._frameExtents=new tt(1,1),this._viewportCount=1,this._viewports=[new Ln(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;vL.setFromMatrixPosition(e.matrixWorld),t.position.copy(vL),yL.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(yL),t.updateMatrixWorld(),aS.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(aS),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(aS)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class xMe extends X2{constructor(){super(new Yi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=mp*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;(i!==t.fov||s!==t.aspect||r!==t.far)&&(t.fov=i,t.aspect=s,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Rw extends _u{constructor(e,t,i=0,s=Math.PI/3,r=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(rn.DEFAULT_UP),this.updateMatrix(),this.target=new rn,this.distance=i,this.angle=s,this.penumbra=r,this.decay=o,this.map=null,this.shadow=new xMe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const _L=new yt,cm=new G,lS=new G;class SMe extends X2{constructor(){super(new Yi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new tt(4,2),this._viewportCount=6,this._viewports=[new Ln(2,1,1,1),new Ln(0,1,1,1),new Ln(3,1,1,1),new Ln(1,1,1,1),new Ln(3,0,1,1),new Ln(1,0,1,1)],this._cubeDirections=[new G(1,0,0),new G(-1,0,0),new G(0,0,1),new G(0,0,-1),new G(0,1,0),new G(0,-1,0)],this._cubeUps=[new G(0,1,0),new G(0,1,0),new G(0,1,0),new G(0,1,0),new G(0,0,1),new G(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,s=this.matrix,r=e.distance||i.far;r!==i.far&&(i.far=r,i.updateProjectionMatrix()),cm.setFromMatrixPosition(e.matrixWorld),i.position.copy(cm),lS.copy(i.position),lS.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(lS),i.updateMatrixWorld(),s.makeTranslation(-cm.x,-cm.y,-cm.z),_L.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_L)}}class r0 extends _u{constructor(e,t,i=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new SMe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class CMe extends X2{constructor(){super(new eo(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class o0 extends _u{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(rn.DEFAULT_UP),this.updateMatrix(),this.target=new rn,this.shadow=new CMe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Pw extends _u{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class l5 extends _u{constructor(e,t,i=10,s=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class c5{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new G)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,s=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*s),t.addScaledVector(o[2],.488603*r),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*s)),t.addScaledVector(o[5],1.092548*(s*r)),t.addScaledVector(o[6],.315392*(3*r*r-1)),t.addScaledVector(o[7],1.092548*(i*r)),t.addScaledVector(o[8],.546274*(i*i-s*s)),t}getIrradianceAt(e,t){const i=e.x,s=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*s),t.addScaledVector(o[2],2*.511664*r),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*s),t.addScaledVector(o[5],2*.429043*s*r),t.addScaledVector(o[6],.743125*r*r-.247708),t.addScaledVector(o[7],2*.429043*i*r),t.addScaledVector(o[8],.429043*(i*i-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].fromArray(e,t+s*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].toArray(e,t+s*3);return e}static getBasisAt(e,t){const i=e.x,s=e.y,r=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*r,t[3]=.488603*i,t[4]=1.092548*i*s,t[5]=1.092548*s*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*i*r,t[8]=.546274*(i*i-s*s)}}class u5 extends _u{constructor(e=new c5,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Lw extends ks{constructor(e){super(e),this.textures={}}load(e,t,i,s){const r=this,o=new pr(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,function(a){try{t(r.parse(JSON.parse(a)))}catch(l){s?s(l):console.error(l),r.manager.itemError(e)}},i,s)}parse(e){const t=this.textures;function i(r){return t[r]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",r),t[r]}const s=Lw.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new gt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(s.dispersion=e.dispersion),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(s.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(s.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(s.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(s.depthFunc=e.depthFunc),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(s.blendSrc=e.blendSrc),e.blendDst!==void 0&&(s.blendDst=e.blendDst),e.blendEquation!==void 0&&(s.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(s.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(s.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==void 0&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(s.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const r in e.uniforms){const o=e.uniforms[r];switch(s.uniforms[r]={},o.type){case"t":s.uniforms[r].value=i(o.value);break;case"c":s.uniforms[r].value=new gt().setHex(o.value);break;case"v2":s.uniforms[r].value=new tt().fromArray(o.value);break;case"v3":s.uniforms[r].value=new G().fromArray(o.value);break;case"v4":s.uniforms[r].value=new Ln().fromArray(o.value);break;case"m3":s.uniforms[r].value=new ln().fromArray(o.value);break;case"m4":s.uniforms[r].value=new yt().fromArray(o.value);break;default:s.uniforms[r].value=o.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(s.glslVersion=e.glslVersion),e.extensions!==void 0)for(const r in e.extensions)s.extensions[r]=e.extensions[r];if(e.lights!==void 0&&(s.lights=e.lights),e.clipping!==void 0&&(s.clipping=e.clipping),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=i(e.map)),e.matcap!==void 0&&(s.matcap=i(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let r=e.normalScale;Array.isArray(r)===!1&&(r=[r,r]),s.normalScale=new tt().fromArray(r)}return e.displacementMap!==void 0&&(s.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=i(e.envMap)),e.envMapRotation!==void 0&&s.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new tt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(s.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=i(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:Zz,SpriteMaterial:O2,RawShaderMaterial:Jz,ShaderMaterial:Bi,PointsMaterial:Up,MeshPhysicalMaterial:ss,MeshStandardMaterial:Fl,MeshPhongMaterial:s0,MeshToonMaterial:Qz,MeshNormalMaterial:V2,MeshLambertMaterial:$2,MeshDepthMaterial:e0,MeshDistanceMaterial:L2,MeshBasicMaterial:$n,MeshMatcapMaterial:e5,LineDashedMaterial:t5,LineBasicMaterial:Vi,Material:zi};return new t[e]}}class ta{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,s=e.length;i<s;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class d5 extends jt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class h5 extends ks{constructor(e){super(e)}load(e,t,i,s){const r=this,o=new pr(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,function(a){try{t(r.parse(JSON.parse(a)))}catch(l){s?s(l):console.error(l),r.manager.itemError(e)}},i,s)}parse(e){const t={},i={};function s(f,m){if(t[m]!==void 0)return t[m];const y=f.interleavedBuffers[m],v=r(f,y.buffer),_=gf(y.type,v),b=new Fp(_,y.stride);return b.uuid=y.uuid,t[m]=b,b}function r(f,m){if(i[m]!==void 0)return i[m];const y=f.arrayBuffers[m],v=new Uint32Array(y).buffer;return i[m]=v,v}const o=e.isInstancedBufferGeometry?new d5:new jt,a=e.data.index;if(a!==void 0){const f=gf(a.type,a.array);o.setIndex(new dn(f,1))}const l=e.data.attributes;for(const f in l){const m=l[f];let p;if(m.isInterleavedBufferAttribute){const y=s(e.data,m.data);p=new Nl(y,m.itemSize,m.offset,m.normalized)}else{const y=gf(m.type,m.array),v=m.isInstancedBufferAttribute?cr:dn;p=new v(y,m.itemSize,m.normalized)}m.name!==void 0&&(p.name=m.name),m.usage!==void 0&&p.setUsage(m.usage),o.setAttribute(f,p)}const c=e.data.morphAttributes;if(c)for(const f in c){const m=c[f],p=[];for(let y=0,v=m.length;y<v;y++){const _=m[y];let b;if(_.isInterleavedBufferAttribute){const w=s(e.data,_.data);b=new Nl(w,_.itemSize,_.offset,_.normalized)}else{const w=gf(_.type,_.array);b=new dn(w,_.itemSize,_.normalized)}_.name!==void 0&&(b.name=_.name),p.push(b)}o.morphAttributes[f]=p}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let f=0,m=d.length;f!==m;++f){const p=d[f];o.addGroup(p.start,p.count,p.materialIndex)}const h=e.data.boundingSphere;if(h!==void 0){const f=new G;h.center!==void 0&&f.fromArray(h.center),o.boundingSphere=new bi(f,h.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class MMe extends ks{constructor(e){super(e)}load(e,t,i,s){const r=this,o=this.path===""?ta.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new pr(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(d){s!==void 0&&s(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}r.parse(c,t)},i,s)}async loadAsync(e,t){const i=this,s=this.path===""?ta.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const r=new pr(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const o=await r.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,s),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,r,l,a,i),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),this.bindLightTargets(c),t!==void 0){let d=!1;for(const h in o)if(o[h].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),r=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,r),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,s,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,s=e.length;i<s;i++){const r=new Pd().fromJSON(e[i]);t[r.uuid]=r}return t}parseSkeletons(e,t){const i={},s={};if(t.traverse(function(r){r.isBone&&(s[r.uuid]=r)}),e!==void 0)for(let r=0,o=e.length;r<o;r++){const a=new Bp().fromJSON(e[r],s);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const s=new h5;for(let r=0,o=e.length;r<o;r++){let a;const l=e[r];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=s.parse(l);break;default:l.type in gL?a=gL[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},s={};if(e!==void 0){const r=new Lw;r.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=r.parse(l)),s[l.uuid]=i[l.uuid]}}return s}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const s=e[i],r=nh.parse(s);t[r.uuid]=r}return t}parseImages(e,t){const i=this,s={};let r;function o(l){return i.manager.itemStart(l),r.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(u)}else return l.data?{data:gf(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new Aw(t);r=new pv(l),r.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const d=e[c],h=d.url;if(Array.isArray(h)){const f=[];for(let m=0,p=h.length;m<p;m++){const y=h[m],v=a(y);v!==null&&(v instanceof HTMLImageElement?f.push(v):f.push(new Oa(v.data,v.width,v.height)))}s[d.uuid]=new hd(f)}else{const f=a(d.url);s[d.uuid]=new hd(f)}}}return s}async parseImagesAsync(e){const t=this,i={};let s;async function r(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await s.loadAsync(l)}else return o.data?{data:gf(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){s=new pv(this.manager),s.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let d=0,h=c.length;d<h;d++){const f=c[d],m=await r(f);m!==null&&(m instanceof HTMLImageElement?u.push(m):u.push(new Oa(m.data,m.width,m.height)))}i[l.uuid]=new hd(u)}else{const u=await r(l.url);i[l.uuid]=new hd(u)}}}return i}parseTextures(e,t){function i(r,o){return typeof r=="number"?r:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",r),o[r])}const s={};if(e!==void 0)for(let r=0,o=e.length;r<o;r++){const a=e[r];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new Qv,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new Oa:u=new Wn,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=i(a.mapping,EMe)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=i(a.wrap[0],bL),u.wrapT=i(a.wrap[1],bL)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.minFilter!==void 0&&(u.minFilter=i(a.minFilter,wL)),a.magFilter!==void 0&&(u.magFilter=i(a.magFilter,wL)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),s[a.uuid]=u}return s}parseObject(e,t,i,s,r){let o;function a(h){return t[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),t[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){const f=[];for(let m=0,p=h.length;m<p;m++){const y=h[m];i[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),f.push(i[y])}return f}return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),i[h]}}function c(h){return s[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),s[h]}let u,d;switch(e.type){case"Scene":o=new mh,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new gt(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new dw(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new uw(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new Yi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new eo(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new Pw(e.color,e.intensity);break;case"DirectionalLight":o=new o0(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new r0(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new l5(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Rw(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new a5(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new u5().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),d=l(e.material),o=new hw(u,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),d=l(e.material),o=new ut(u,d);break;case"InstancedMesh":u=a(e.geometry),d=l(e.material);const h=e.count,f=e.instanceMatrix,m=e.instanceColor;o=new Pa(u,d,h),o.instanceMatrix=new cr(new Float32Array(f.array),16),m!==void 0&&(o.instanceColor=new cr(new Float32Array(m.array),m.itemSize));break;case"BatchedMesh":u=a(e.geometry),d=l(e.material),o=new zz(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,d),o.geometry=u,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(p=>{const y=new Nn;y.min.fromArray(p.boxMin),y.max.fromArray(p.boxMax);const v=new bi;return v.radius=p.sphereRadius,v.center.fromArray(p.sphereCenter),{boxInitialized:p.boxInitialized,box:y,sphereInitialized:p.sphereInitialized,sphere:v}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=c(e.colorsTexture.uuid));break;case"LOD":o=new Uz;break;case"Line":o=new gs(a(e.geometry),l(e.material));break;case"LineLoop":o=new fw(a(e.geometry),l(e.material));break;case"LineSegments":o=new gr(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new n0(a(e.geometry),l(e.material));break;case"Sprite":o=new Bz(l(e.material));break;case"Group":o=new As;break;case"Bone":o=new t0;break;default:o=new rn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const h=e.children;for(let f=0;f<h.length;f++)o.add(this.parseObject(h[f],t,i,s,r))}if(e.animations!==void 0){const h=e.animations;for(let f=0;f<h.length;f++){const m=h[f];o.animations.push(r[m])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const h=e.levels;for(let f=0;f<h.length;f++){const m=h[f],p=o.getObjectByProperty("uuid",m.object);p!==void 0&&o.addLevel(p,m.distance,m.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const s=t[i.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(s,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,s=e.getObjectByProperty("uuid",i);s!==void 0?t.target=s:t.target=new rn}})}}const EMe={UVMapping:j1,CubeReflectionMapping:Ol,CubeRefractionMapping:au,EquirectangularReflectionMapping:Qg,EquirectangularRefractionMapping:ev,CubeUVReflectionMapping:Dp},bL={RepeatWrapping:Qr,ClampToEdgeWrapping:Sr,MirroredRepeatWrapping:qd},wL={NearestFilter:ii,NearestMipmapNearestFilter:jv,NearestMipmapLinearFilter:Bc,LinearFilter:Rn,LinearMipmapNearestFilter:Ad,LinearMipmapLinearFilter:Cr};class j2 extends ks{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=Cl.get(e);if(o!==void 0){if(r.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),r.manager.itemEnd(e)}).catch(c=>{s&&s(c)});return}return setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(c){return Cl.add(e,c),t&&t(c),r.manager.itemEnd(e),c}).catch(function(c){s&&s(c),Cl.remove(e),r.manager.itemError(e),r.manager.itemEnd(e)});Cl.add(e,l),r.manager.itemStart(e)}}let Cy;class q2{static getContext(){return Cy===void 0&&(Cy=new(window.AudioContext||window.webkitAudioContext)),Cy}static setContext(e){Cy=e}}class TMe extends ks{constructor(e){super(e)}load(e,t,i,s){const r=this,o=new pr(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);q2.getContext().decodeAudioData(c,function(d){t(d)}).catch(a)}catch(c){a(c)}},i,s);function a(l){s?s(l):console.error(l),r.manager.itemError(e)}}}const xL=new yt,SL=new yt,ku=new yt;class AMe{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Yi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Yi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,ku.copy(e.projectionMatrix);const s=t.eyeSep/2,r=s*t.near/t.focus,o=t.near*Math.tan(Rd*t.fov*.5)/t.zoom;let a,l;SL.elements[12]=-s,xL.elements[12]=s,a=-o*t.aspect+r,l=o*t.aspect+r,ku.elements[0]=2*t.near/(l-a),ku.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(ku),a=-o*t.aspect-r,l=o*t.aspect-r,ku.elements[0]=2*t.near/(l-a),ku.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(ku)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(SL),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(xL)}}class kw{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=CL(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=CL();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function CL(){return(typeof performance>"u"?Date:performance).now()}const Ou=new G,ML=new Mn,IMe=new G,Du=new G;class RMe extends rn{constructor(){super(),this.type="AudioListener",this.context=q2.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new kw}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ou,ML,IMe),Du.set(0,0,-1).applyQuaternion(ML),t.positionX){const s=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Ou.x,s),t.positionY.linearRampToValueAtTime(Ou.y,s),t.positionZ.linearRampToValueAtTime(Ou.z,s),t.forwardX.linearRampToValueAtTime(Du.x,s),t.forwardY.linearRampToValueAtTime(Du.y,s),t.forwardZ.linearRampToValueAtTime(Du.z,s),t.upX.linearRampToValueAtTime(i.x,s),t.upY.linearRampToValueAtTime(i.y,s),t.upZ.linearRampToValueAtTime(i.z,s)}else t.setPosition(Ou.x,Ou.y,Ou.z),t.setOrientation(Du.x,Du.y,Du.z,i.x,i.y,i.z)}}class f5 extends rn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Nu=new G,EL=new Mn,PMe=new G,Fu=new G;class LMe extends f5{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Nu,EL,PMe),Fu.set(0,0,1).applyQuaternion(EL);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Nu.x,i),t.positionY.linearRampToValueAtTime(Nu.y,i),t.positionZ.linearRampToValueAtTime(Nu.z,i),t.orientationX.linearRampToValueAtTime(Fu.x,i),t.orientationY.linearRampToValueAtTime(Fu.y,i),t.orientationZ.linearRampToValueAtTime(Fu.z,i)}else t.setPosition(Nu.x,Nu.y,Nu.z),t.setOrientation(Fu.x,Fu.y,Fu.z)}}class kMe{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class p5{constructor(e,t,i){this.binding=e,this.valueSize=i;let s,r,o;switch(t){case"quaternion":s=this._slerp,r=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":s=this._select,r=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:s=this._lerp,r=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=r,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,s=this.valueSize,r=e*s+s;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==s;++a)i[r+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,r,0,a,s)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,s=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,s=e*t+t,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const l=t*this._origIndex;this._mixBufferRegion(i,s,l,1-r,t)}o>0&&this._mixBufferRegionAdditive(i,s,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,s);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,s=i*this._origIndex;e.getValue(t,s);for(let r=i,o=s;r!==o;++r)t[r]=t[s+r%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,s,r){if(s>=.5)for(let o=0;o!==r;++o)e[t+o]=e[i+o]}_slerp(e,t,i,s){Mn.slerpFlat(e,t,e,t,e,i,s)}_slerpAdditive(e,t,i,s,r){const o=this._workIndex*r;Mn.multiplyQuaternionsFlat(e,o,e,t,e,i),Mn.slerpFlat(e,t,e,t,e,o,s)}_lerp(e,t,i,s,r){const o=1-s;for(let a=0;a!==r;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*s}}_lerpAdditive(e,t,i,s,r){for(let o=0;o!==r;++o){const a=t+o;e[a]=e[a]+e[i+o]*s}}}const Z2="\\[\\]\\.:\\/",OMe=new RegExp("["+Z2+"]","g"),J2="[^"+Z2+"]",DMe="[^"+Z2.replace("\\.","")+"]",NMe=/((?:WC+[\/:])*)/.source.replace("WC",J2),FMe=/(WCOD+)?/.source.replace("WCOD",DMe),BMe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",J2),UMe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",J2),zMe=new RegExp("^"+NMe+FMe+BMe+UMe+"$"),HMe=["material","materials","bones","map"];class VMe{constructor(e,t,i){const s=i||Tn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,s=this._bindings[i];s!==void 0&&s.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,r=i.length;s!==r;++s)i[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Tn{constructor(e,t,i){this.path=t,this.parsedPath=i||Tn.parseTrackName(t),this.node=Tn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Tn.Composite(e,t,i):new Tn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(OMe,"")}static parseTrackName(e){const t=zMe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const r=i.nodeName.substring(s+1);HMe.indexOf(r)!==-1&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=r)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(r){for(let o=0;o<r.length;o++){const a=r[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},s=i(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)e[t++]=i[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,s=t.propertyName;let r=t.propertyIndex;if(e||(e=Tn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[s];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+s+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(r!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[r]!==void 0&&(r=e.morphTargetDictionary[r])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=s;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Tn.Composite=VMe;Tn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Tn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Tn.prototype.GetterByBindingType=[Tn.prototype._getValue_direct,Tn.prototype._getValue_array,Tn.prototype._getValue_arrayElement,Tn.prototype._getValue_toArray];Tn.prototype.SetterByBindingTypeAndVersioning=[[Tn.prototype._setValue_direct,Tn.prototype._setValue_direct_setNeedsUpdate,Tn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Tn.prototype._setValue_array,Tn.prototype._setValue_array_setNeedsUpdate,Tn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Tn.prototype._setValue_arrayElement,Tn.prototype._setValue_arrayElement_setNeedsUpdate,Tn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Tn.prototype._setValue_fromArray,Tn.prototype._setValue_fromArray_setNeedsUpdate,Tn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class $Me{constructor(){this.isAnimationObjectGroup=!0,this.uuid=qr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,s=arguments.length;i!==s;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,s=this._parsedPaths,r=this._bindings,o=r.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,d=arguments.length;u!==d;++u){const h=arguments[u],f=h.uuid;let m=t[f];if(m===void 0){m=l++,t[f]=m,e.push(h);for(let p=0,y=o;p!==y;++p)r[p].push(new Tn(h,i[p],s[p]))}else if(m<c){a=e[m];const p=--c,y=e[p];t[y.uuid]=m,e[m]=y,t[f]=p,e[p]=h;for(let v=0,_=o;v!==_;++v){const b=r[v],w=b[p];let x=b[m];b[m]=w,x===void 0&&(x=new Tn(h,i[v],s[v])),b[p]=x}}else e[m]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,s=i.length;let r=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=r){const d=r++,h=e[d];t[h.uuid]=u,e[u]=h,t[c]=d,e[d]=l;for(let f=0,m=s;f!==m;++f){const p=i[f],y=p[d],v=p[u];p[u]=y,p[d]=v}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,s=i.length;let r=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,d=t[u];if(d!==void 0)if(delete t[u],d<r){const h=--r,f=e[h],m=--o,p=e[m];t[f.uuid]=d,e[d]=f,t[p.uuid]=h,e[h]=p,e.pop();for(let y=0,v=s;y!==v;++y){const _=i[y],b=_[h],w=_[m];_[d]=b,_[h]=w,_.pop()}}else{const h=--o,f=e[h];h>0&&(t[f.uuid]=d),e[d]=f,e.pop();for(let m=0,p=s;m!==p;++m){const y=i[m];y[d]=y[h],y.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const i=this._bindingsIndicesByPath;let s=i[e];const r=this._bindings;if(s!==void 0)return r[s];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,d=new Array(c);s=r.length,i[e]=s,o.push(e),a.push(t),r.push(d);for(let h=u,f=l.length;h!==f;++h){const m=l[h];d[h]=new Tn(m,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const s=this._paths,r=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=i,o[i]=l,o.pop(),r[i]=r[a],r.pop(),s[i]=s[a],s.pop()}}}class m5{constructor(e,t,i=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=s;const r=t.tracks,o=r.length,a=new Array(o),l={endingStart:ud,endingEnd:ud};for(let c=0;c!==o;++c){const u=r[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=cz,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const s=this._clip.duration,r=e._clip.duration,o=r/s,a=s/r;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const s=this._mixer,r=s.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=s._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=r,l[1]=r+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,s){if(!this.enabled){this._updateWeight(e);return}const r=this._startTime;if(r!==null){const l=(e-r)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case M2:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case tw:default:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulate(s,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const s=i.evaluate(e)[0];t*=s,e>i.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const s=i.evaluate(e)[0];t*=s,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let s=this.time+e,r=this._loopCount;const o=i===uz;if(e===0)return r===-1?s:o&&(r&1)===1?t-s:s;if(i===lz){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(r===-1&&(e>=0?(r=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),s>=t||s<0){const a=Math.floor(s/t);s-=t*a,r+=Math.abs(a);const l=this.repetitions-r;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=s;if(o&&(r&1)===1)return t-s}return s}_setEndings(e,t,i){const s=this._interpolantSettings;i?(s.endingStart=dd,s.endingEnd=dd):(e?s.endingStart=this.zeroSlopeAtStart?dd:ud:s.endingStart=tv,t?s.endingEnd=this.zeroSlopeAtEnd?dd:ud:s.endingEnd=tv)}_scheduleFading(e,t,i){const s=this._mixer,r=s.time;let o=this._weightInterpolant;o===null&&(o=s._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=r,l[0]=t,a[1]=r+e,l[1]=i,this}}const GMe=new Float32Array(1);class WMe extends qa{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,s=e._clip.tracks,r=s.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let d=0;d!==r;++d){const h=s[d],f=h.name;let m=u[f];if(m!==void 0)++m.referenceCount,o[d]=m;else{if(m=o[d],m!==void 0){m._cacheIndex===null&&(++m.referenceCount,this._addInactiveBinding(m,l,f));continue}const p=t&&t._propertyBindings[d].binding.parsedPath;m=new p5(Tn.create(i,f,p),h.ValueTypeName,h.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,l,f),o[d]=m}a[d].resultBuffer=m.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,s=e._clip.uuid,r=this._actionsByClip[s];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,s,i)}const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const r=t[i];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const r=t[i];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const s=this._actions,r=this._actionsByClip;let o=r[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=s.length,s.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],s=e._cacheIndex;i._cacheIndex=s,t[s]=i,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,o=this._actionsByClip,a=o[r],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete d[h],l.length===0&&delete o[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const r=t[i];--r.referenceCount===0&&this._removeInactiveBinding(r)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,s=this._nActiveActions++,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=i,t[i]=r}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,s=--this._nActiveActions,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=i,t[i]=r}_addInactiveBinding(e,t,i){const s=this._bindingsByRootAndName,r=this._bindings;let o=s[t];o===void 0&&(o={},s[t]=o),o[i]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,s=i.rootNode.uuid,r=i.path,o=this._bindingsByRootAndName,a=o[s],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[r],Object.keys(a).length===0&&delete o[s]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,s=this._nActiveBindings++,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=i,t[i]=r}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,s=--this._nActiveBindings,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=i,t[i]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new W2(new Float32Array(2),new Float32Array(2),1,GMe),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,s=--this._nActiveControlInterpolants,r=t[s];e.__cacheIndex=s,t[s]=e,r.__cacheIndex=i,t[i]=r}clipAction(e,t,i){const s=t||this._root,r=s.uuid;let o=typeof e=="string"?nh.findByName(s,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=tw),l!==void 0){const d=l.actionByRoot[r];if(d!==void 0&&d.blendMode===i)return d;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new m5(this,o,t,i);return this._bindAction(u,c),this._addInactiveAction(u,a,r),u}existingAction(e,t){const i=t||this._root,s=i.uuid,r=typeof e=="string"?nh.findByName(i,e):e,o=r?r.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[s]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,s=this.time+=e,r=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(s,e,r,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,s=this._actionsByClip,r=s[i];if(r!==void 0){const o=r.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,t[u]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete s[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const s=this._bindingsByRootAndName,r=s[t];if(r!==void 0)for(const o in r){const a=r[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class Q2{constructor(e){this.value=e}clone(){return new Q2(this.value.clone===void 0?this.value:this.value.clone())}}let KMe=0;class YMe extends qa{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:KMe++}),this.name="",this.usage=ov,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,s=t.length;i<s;i++){const r=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<r.length;o++)this.uniforms.push(r[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class XMe extends Fp{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class jMe{constructor(e,t,i,s,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=s,this.count=r,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const TL=new yt;class wh{constructor(e,t,i=0,s=1/0){this.ray=new fh(e,t),this.near=i,this.far=s,this.camera=null,this.layers=new ow,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return TL.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(TL),this}intersectObject(e,t=!0,i=[]){return AM(e,this,i,t),i.sort(AL),i}intersectObjects(e,t=!0,i=[]){for(let s=0,r=e.length;s<r;s++)AM(e[s],this,i,t);return i.sort(AL),i}}function AL(n,e){return n.distance-e.distance}function AM(n,e,t,i){let s=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(s=!1),s===!0&&i===!0){const r=n.children;for(let o=0,a=r.length;o<a;o++)AM(r[o],e,t,!0)}}class ug{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Ni(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class qMe{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class eA{constructor(e,t,i,s){eA.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,s)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,s){const r=this.elements;return r[0]=e,r[2]=t,r[1]=i,r[3]=s,this}}const IL=new tt;class ZMe{constructor(e=new tt(1/0,1/0),t=new tt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=IL.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,IL).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const RL=new G,My=new G;class JMe{constructor(e=new G,t=new G){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){RL.subVectors(e,this.start),My.subVectors(this.end,this.start);const i=My.dot(My);let r=My.dot(RL)/i;return t&&(r=Ni(r,0,1)),r}closestPointToPoint(e,t,i){const s=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(s).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const PL=new G;class QMe extends rn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new jt,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;s.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}i.setAttribute("position",new kt(s,3));const r=new Vi({fog:!1,toneMapped:!1});this.cone=new gr(i,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),PL.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(PL),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const hc=new G,Ey=new yt,cS=new yt;class eEe extends gr{constructor(e){const t=g5(e),i=new jt,s=[],r=[],o=new gt(0,0,1),a=new gt(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),r.push(o.r,o.g,o.b),r.push(a.r,a.g,a.b))}i.setAttribute("position",new kt(s,3)),i.setAttribute("color",new kt(r,3));const l=new Vi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,s=i.getAttribute("position");cS.copy(this.root.matrixWorld).invert();for(let r=0,o=0;r<t.length;r++){const a=t[r];a.parent&&a.parent.isBone&&(Ey.multiplyMatrices(cS,a.matrixWorld),hc.setFromMatrixPosition(Ey),s.setXYZ(o,hc.x,hc.y,hc.z),Ey.multiplyMatrices(cS,a.parent.matrixWorld),hc.setFromMatrixPosition(Ey),s.setXYZ(o+1,hc.x,hc.y,hc.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function g5(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,g5(n.children[t]));return e}class tEe extends ut{constructor(e,t,i){const s=new gh(t,4,2),r=new $n({wireframe:!0,fog:!1,toneMapped:!1});super(s,r),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const nEe=new G,LL=new gt,kL=new gt;class iEe extends rn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const s=new Sl(t);s.rotateY(Math.PI*.5),this.material=new $n({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const r=s.getAttribute("position"),o=new Float32Array(r.count*3);s.setAttribute("color",new dn(o,3)),this.add(new ut(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");LL.copy(this.light.color),kL.copy(this.light.groundColor);for(let i=0,s=t.count;i<s;i++){const r=i<s/2?LL:kL;t.setXYZ(i,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(nEe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class sEe extends gr{constructor(e=10,t=10,i=4473924,s=8947848){i=new gt(i),s=new gt(s);const r=t/2,o=e/t,a=e/2,l=[],c=[];for(let h=0,f=0,m=-a;h<=t;h++,m+=o){l.push(-a,0,m,a,0,m),l.push(m,0,-a,m,0,a);const p=h===r?i:s;p.toArray(c,f),f+=3,p.toArray(c,f),f+=3,p.toArray(c,f),f+=3,p.toArray(c,f),f+=3}const u=new jt;u.setAttribute("position",new kt(l,3)),u.setAttribute("color",new kt(c,3));const d=new Vi({vertexColors:!0,toneMapped:!1});super(u,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class rEe extends gr{constructor(e=10,t=16,i=8,s=64,r=4473924,o=8947848){r=new gt(r),o=new gt(o);const a=[],l=[];if(t>1)for(let d=0;d<t;d++){const h=d/t*(Math.PI*2),f=Math.sin(h)*e,m=Math.cos(h)*e;a.push(0,0,0),a.push(f,0,m);const p=d&1?r:o;l.push(p.r,p.g,p.b),l.push(p.r,p.g,p.b)}for(let d=0;d<i;d++){const h=d&1?r:o,f=e-e/i*d;for(let m=0;m<s;m++){let p=m/s*(Math.PI*2),y=Math.sin(p)*f,v=Math.cos(p)*f;a.push(y,0,v),l.push(h.r,h.g,h.b),p=(m+1)/s*(Math.PI*2),y=Math.sin(p)*f,v=Math.cos(p)*f,a.push(y,0,v),l.push(h.r,h.g,h.b)}}const c=new jt;c.setAttribute("position",new kt(a,3)),c.setAttribute("color",new kt(l,3));const u=new Vi({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const OL=new G,Ty=new G,DL=new G;class oEe extends rn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let s=new jt;s.setAttribute("position",new kt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new Vi({fog:!1,toneMapped:!1});this.lightPlane=new gs(s,r),this.add(this.lightPlane),s=new jt,s.setAttribute("position",new kt([0,0,0,0,0,1],3)),this.targetLine=new gs(s,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),OL.setFromMatrixPosition(this.light.matrixWorld),Ty.setFromMatrixPosition(this.light.target.matrixWorld),DL.subVectors(Ty,OL),this.lightPlane.lookAt(Ty),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Ty),this.targetLine.scale.z=DL.length()}}const Ay=new G,Di=new lw;class aEe extends gr{constructor(e){const t=new jt,i=new Vi({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],r=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(m,p){l(m),l(p)}function l(m){s.push(0,0,0),r.push(0,0,0),o[m]===void 0&&(o[m]=[]),o[m].push(s.length/3-1)}t.setAttribute("position",new kt(s,3)),t.setAttribute("color",new kt(r,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new gt(16755200),u=new gt(16711680),d=new gt(43775),h=new gt(16777215),f=new gt(3355443);this.setColors(c,u,d,h,f)}setColors(e,t,i,s,r){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,s.r,s.g,s.b),a.setXYZ(39,s.r,s.g,s.b),a.setXYZ(40,r.r,r.g,r.b),a.setXYZ(41,r.r,r.g,r.b),a.setXYZ(42,r.r,r.g,r.b),a.setXYZ(43,r.r,r.g,r.b),a.setXYZ(44,r.r,r.g,r.b),a.setXYZ(45,r.r,r.g,r.b),a.setXYZ(46,r.r,r.g,r.b),a.setXYZ(47,r.r,r.g,r.b),a.setXYZ(48,r.r,r.g,r.b),a.setXYZ(49,r.r,r.g,r.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,s=1;Di.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Gi("c",t,e,Di,0,0,-1),Gi("t",t,e,Di,0,0,1),Gi("n1",t,e,Di,-i,-s,-1),Gi("n2",t,e,Di,i,-s,-1),Gi("n3",t,e,Di,-i,s,-1),Gi("n4",t,e,Di,i,s,-1),Gi("f1",t,e,Di,-i,-s,1),Gi("f2",t,e,Di,i,-s,1),Gi("f3",t,e,Di,-i,s,1),Gi("f4",t,e,Di,i,s,1),Gi("u1",t,e,Di,i*.7,s*1.1,-1),Gi("u2",t,e,Di,-i*.7,s*1.1,-1),Gi("u3",t,e,Di,0,s*2,-1),Gi("cf1",t,e,Di,-i,0,1),Gi("cf2",t,e,Di,i,0,1),Gi("cf3",t,e,Di,0,-s,1),Gi("cf4",t,e,Di,0,s,1),Gi("cn1",t,e,Di,-i,0,-1),Gi("cn2",t,e,Di,i,0,-1),Gi("cn3",t,e,Di,0,-s,-1),Gi("cn4",t,e,Di,0,s,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Gi(n,e,t,i,s,r,o){Ay.set(s,r,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],Ay.x,Ay.y,Ay.z)}}const Iy=new Nn;class Vb extends gr{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),r=new jt;r.setIndex(new dn(i,1)),r.setAttribute("position",new dn(s,3)),super(r,new Vi({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Iy.setFromObject(this.object),Iy.isEmpty())return;const t=Iy.min,i=Iy.max,s=this.geometry.attributes.position,r=s.array;r[0]=i.x,r[1]=i.y,r[2]=i.z,r[3]=t.x,r[4]=i.y,r[5]=i.z,r[6]=t.x,r[7]=t.y,r[8]=i.z,r[9]=i.x,r[10]=t.y,r[11]=i.z,r[12]=i.x,r[13]=i.y,r[14]=t.z,r[15]=t.x,r[16]=i.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=i.x,r[22]=t.y,r[23]=t.z,s.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class tA extends gr{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new jt;r.setIndex(new dn(i,1)),r.setAttribute("position",new kt(s,3)),super(r,new Vi({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class lEe extends gs{constructor(e,t=1,i=16776960){const s=i,r=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new jt;o.setAttribute("position",new kt(r,3)),o.computeBoundingSphere(),super(o,new Vi({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new jt;l.setAttribute("position",new kt(a,3)),l.computeBoundingSphere(),this.add(new ut(l,new $n({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const NL=new G;let Ry,uS;class M_ extends rn{constructor(e=new G(0,0,1),t=new G(0,0,0),i=1,s=16776960,r=i*.2,o=r*.2){super(),this.type="ArrowHelper",Ry===void 0&&(Ry=new jt,Ry.setAttribute("position",new kt([0,0,0,0,1,0],3)),uS=new Qi(0,.5,1,5,1),uS.translate(0,-.5,0)),this.position.copy(t),this.line=new gs(Ry,new Vi({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ut(uS,new $n({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,r,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{NL.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(NL,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class cEe extends gr{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new jt;s.setAttribute("position",new kt(t,3)),s.setAttribute("color",new kt(i,3));const r=new Vi({vertexColors:!0,toneMapped:!1});super(s,r),this.type="AxesHelper"}setColors(e,t,i){const s=new gt,r=this.geometry.attributes.color.array;return s.set(e),s.toArray(r,0),s.toArray(r,3),s.set(t),s.toArray(r,6),s.toArray(r,9),s.set(i),s.toArray(r,12),s.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class uEe{constructor(){this.type="ShapePath",this.color=new gt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new uv,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,s){return this.currentPath.quadraticCurveTo(e,t,i,s),this}bezierCurveTo(e,t,i,s,r,o){return this.currentPath.bezierCurveTo(e,t,i,s,r,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(v){const _=[];for(let b=0,w=v.length;b<w;b++){const x=v[b],S=new Pd;S.curves=x.curves,_.push(S)}return _}function i(v,_){const b=_.length;let w=!1;for(let x=b-1,S=0;S<b;x=S++){let C=_[x],T=_[S],M=T.x-C.x,E=T.y-C.y;if(Math.abs(E)>Number.EPSILON){if(E<0&&(C=_[S],M=-M,T=_[x],E=-E),v.y<C.y||v.y>T.y)continue;if(v.y===C.y){if(v.x===C.x)return!0}else{const A=E*(v.x-C.x)-M*(v.y-C.y);if(A===0)return!0;if(A<0)continue;w=!w}}else{if(v.y!==C.y)continue;if(T.x<=v.x&&v.x<=C.x||C.x<=v.x&&v.x<=T.x)return!0}}return w}const s=Da.isClockWise,r=this.subPaths;if(r.length===0)return[];let o,a,l;const c=[];if(r.length===1)return a=r[0],l=new Pd,l.curves=a.curves,c.push(l),c;let u=!s(r[0].getPoints());u=e?!u:u;const d=[],h=[];let f=[],m=0,p;h[m]=void 0,f[m]=[];for(let v=0,_=r.length;v<_;v++)a=r[v],p=a.getPoints(),o=s(p),o=e?!o:o,o?(!u&&h[m]&&m++,h[m]={s:new Pd,p},h[m].s.curves=a.curves,u&&m++,f[m]=[]):f[m].push({h:a,p:p[0]});if(!h[0])return t(r);if(h.length>1){let v=!1,_=0;for(let b=0,w=h.length;b<w;b++)d[b]=[];for(let b=0,w=h.length;b<w;b++){const x=f[b];for(let S=0;S<x.length;S++){const C=x[S];let T=!0;for(let M=0;M<h.length;M++)i(C.p,h[M].p)&&(b!==M&&_++,T?(T=!1,d[M].push(C)):v=!0);T&&d[b].push(C)}}_>0&&v===!1&&(f=d)}let y;for(let v=0,_=h.length;v<_;v++){l=h[v].s,c.push(l),y=f[v];for(let b=0,w=y.length;b<w;b++)l.holes.push(y[b].h)}return c}}class dEe extends Ti{constructor(e=1,t=1,i=1,s={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...s,count:i}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:X1}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=X1);const hEe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:iz,AddEquation:Lc,AddOperation:ez,AdditiveAnimationBlendMode:M2,AdditiveBlending:ub,AgXToneMapping:rz,AlphaFormat:_2,AlwaysCompare:bz,AlwaysDepth:YU,AlwaysStencilFunc:bM,AmbientLight:Pw,AnimationAction:m5,AnimationClip:nh,AnimationLoader:_Me,AnimationMixer:WMe,AnimationObjectGroup:$Me,AnimationUtils:mMe,ArcCurve:Vz,ArrayCamera:Nz,ArrowHelper:M_,AttachedBindMode:_M,Audio:f5,AudioAnalyser:kMe,AudioContext:q2,AudioListener:RMe,AudioLoader:TMe,AxesHelper:cEe,BackSide:bs,BasicDepthPacking:hz,BasicShadowMap:x_e,BatchedMesh:zz,Bone:t0,BooleanKeyframeTrack:yh,Box2:ZMe,Box3:Nn,Box3Helper:tA,BoxGeometry:Ci,BoxHelper:Vb,BufferAttribute:dn,BufferGeometry:jt,BufferGeometryLoader:h5,ByteType:g2,Cache:Cl,Camera:lw,CameraHelper:aEe,CanvasTexture:Hz,CapsuleGeometry:gw,CatmullRomCurve3:$z,CineonToneMapping:nz,CircleGeometry:vw,ClampToEdgeWrapping:Sr,Clock:kw,Color:gt,ColorKeyframeTrack:K2,ColorManagement:Cn,CompressedArrayTexture:BCe,CompressedCubeTexture:UCe,CompressedTexture:pw,CompressedTextureLoader:bMe,ConeGeometry:yw,ConstantAlphaFactor:GU,ConstantColorFactor:VU,CubeCamera:Az,CubeReflectionMapping:Ol,CubeRefractionMapping:au,CubeTexture:Qv,CubeTextureLoader:wMe,CubeUVReflectionMapping:Dp,CubicBezierCurve:N2,CubicBezierCurve3:Gz,CubicInterpolant:s5,CullFaceBack:gM,CullFaceFront:TU,CullFaceFrontBack:w_e,CullFaceNone:EU,Curve:da,CurvePath:Kz,CustomBlending:AU,CustomToneMapping:sz,CylinderGeometry:Qi,Cylindrical:qMe,Data3DTexture:A2,DataArrayTexture:rw,DataTexture:Oa,DataTextureLoader:Y2,DataUtils:fd,DecrementStencilOp:k_e,DecrementWrapStencilOp:D_e,DefaultLoadingManager:bh,DepthFormat:Id,DepthStencilFormat:Jd,DepthTexture:P2,DetachedBindMode:az,DirectionalLight:o0,DirectionalLightHelper:oEe,DiscreteInterpolant:r5,DisplayP3ColorSpace:sw,DodecahedronGeometry:_w,DoubleSide:ts,DstAlphaFactor:FU,DstColorFactor:UU,DynamicCopyUsage:q_e,DynamicDrawUsage:G_e,DynamicReadUsage:Y_e,EdgesGeometry:H2,EllipseCurve:mw,EqualCompare:gz,EqualDepth:jU,EqualStencilFunc:U_e,EquirectangularReflectionMapping:Qg,EquirectangularRefractionMapping:ev,Euler:Js,EventDispatcher:qa,ExtrudeGeometry:ww,FileLoader:pr,Float16BufferAttribute:Obe,Float32BufferAttribute:kt,FloatType:is,Fog:dw,FogExp2:uw,FramebufferTexture:FCe,FrontSide:Fo,Frustum:ph,GLBufferAttribute:jMe,GLSL1:J_e,GLSL3:wM,GreaterCompare:vz,GreaterDepth:ZU,GreaterEqualCompare:_z,GreaterEqualDepth:qU,GreaterEqualStencilFunc:$_e,GreaterStencilFunc:H_e,GridHelper:sEe,Group:As,HalfFloatType:Ki,HemisphereLight:a5,HemisphereLightHelper:iEe,IcosahedronGeometry:xw,ImageBitmapLoader:j2,ImageLoader:pv,ImageUtils:Sz,IncrementStencilOp:L_e,IncrementWrapStencilOp:O_e,InstancedBufferAttribute:cr,InstancedBufferGeometry:d5,InstancedInterleavedBuffer:XMe,InstancedMesh:Pa,Int16BufferAttribute:kbe,Int32BufferAttribute:Ez,Int8BufferAttribute:Pbe,IntType:q1,InterleavedBuffer:Fp,InterleavedBufferAttribute:Nl,Interpolant:vh,InterpolateDiscrete:Qd,InterpolateLinear:lu,InterpolateSmooth:S_,InvertStencilOp:N_e,KeepStencilOp:Ku,KeyframeTrack:ha,LOD:Uz,LatheGeometry:i0,Layers:ow,LessCompare:mz,LessDepth:XU,LessEqualCompare:E2,LessEqualDepth:Jg,LessEqualStencilFunc:z_e,LessStencilFunc:B_e,Light:_u,LightProbe:u5,Line:gs,Line3:JMe,LineBasicMaterial:Vi,LineCurve:F2,LineCurve3:Wz,LineDashedMaterial:t5,LineLoop:fw,LineSegments:gr,LinearDisplayP3ColorSpace:Jv,LinearFilter:Rn,LinearInterpolant:W2,LinearMipMapLinearFilter:E_e,LinearMipMapNearestFilter:M_e,LinearMipmapLinearFilter:Cr,LinearMipmapNearestFilter:Ad,LinearSRGBColorSpace:qn,LinearToneMapping:m2,LinearTransfer:iv,Loader:ks,LoaderUtils:ta,LoadingManager:Aw,LoopOnce:lz,LoopPingPong:uz,LoopRepeat:cz,LuminanceAlphaFormat:x2,LuminanceFormat:w2,MOUSE:__e,Material:zi,MaterialLoader:Lw,MathUtils:kc,Matrix2:eA,Matrix3:ln,Matrix4:yt,MaxEquation:LU,Mesh:ut,MeshBasicMaterial:$n,MeshDepthMaterial:e0,MeshDistanceMaterial:L2,MeshLambertMaterial:$2,MeshMatcapMaterial:e5,MeshNormalMaterial:V2,MeshPhongMaterial:s0,MeshPhysicalMaterial:ss,MeshStandardMaterial:Fl,MeshToonMaterial:Qz,MinEquation:PU,MirroredRepeatWrapping:qd,MixOperation:QU,MultiplyBlending:yM,MultiplyOperation:Xv,NearestFilter:ii,NearestMipMapLinearFilter:C_e,NearestMipMapNearestFilter:S_e,NearestMipmapLinearFilter:Bc,NearestMipmapNearestFilter:jv,NeutralToneMapping:oz,NeverCompare:pz,NeverDepth:KU,NeverStencilFunc:F_e,NoBlending:Ro,NoColorSpace:Ea,NoToneMapping:Al,NormalAnimationBlendMode:tw,NormalBlending:Td,NotEqualCompare:yz,NotEqualDepth:JU,NotEqualStencilFunc:V_e,NumberKeyframeTrack:Bl,Object3D:rn,ObjectLoader:MMe,ObjectSpaceNormalMap:fz,OctahedronGeometry:Sl,OneFactor:OU,OneMinusConstantAlphaFactor:WU,OneMinusConstantColorFactor:$U,OneMinusDstAlphaFactor:BU,OneMinusDstColorFactor:zU,OneMinusSrcAlphaFactor:hb,OneMinusSrcColorFactor:NU,OrthographicCamera:eo,P3Primaries:rv,PCFShadowMap:f2,PCFSoftShadowMap:p2,PMREMGenerator:cv,Path:uv,PerspectiveCamera:Yi,Plane:or,PlaneGeometry:ua,PlaneHelper:lEe,PointLight:r0,PointLightHelper:tEe,Points:n0,PointsMaterial:Up,PolarGridHelper:rEe,PolyhedronGeometry:yu,PositionalAudio:LMe,PropertyBinding:Tn,PropertyMixer:p5,QuadraticBezierCurve:B2,QuadraticBezierCurve3:U2,Quaternion:Mn,QuaternionKeyframeTrack:Ul,QuaternionLinearInterpolant:o5,RED_GREEN_RGTC2_Format:Fb,RED_RGTC1_Format:C2,REVISION:X1,RGBADepthPacking:iw,RGBAFormat:Oi,RGBAIntegerFormat:ew,RGBA_ASTC_10x10_Format:Pb,RGBA_ASTC_10x5_Format:Ab,RGBA_ASTC_10x6_Format:Ib,RGBA_ASTC_10x8_Format:Rb,RGBA_ASTC_12x10_Format:Lb,RGBA_ASTC_12x12_Format:kb,RGBA_ASTC_4x4_Format:bb,RGBA_ASTC_5x4_Format:wb,RGBA_ASTC_5x5_Format:xb,RGBA_ASTC_6x5_Format:Sb,RGBA_ASTC_6x6_Format:Cb,RGBA_ASTC_8x5_Format:Mb,RGBA_ASTC_8x6_Format:Eb,RGBA_ASTC_8x8_Format:Tb,RGBA_BPTC_Format:og,RGBA_ETC2_EAC_Format:_b,RGBA_PVRTC_2BPPV1_Format:gb,RGBA_PVRTC_4BPPV1_Format:mb,RGBA_S3TC_DXT1_Format:ig,RGBA_S3TC_DXT3_Format:sg,RGBA_S3TC_DXT5_Format:rg,RGBDepthPacking:A_e,RGBFormat:b2,RGBIntegerFormat:T_e,RGB_BPTC_SIGNED_Format:Ob,RGB_BPTC_UNSIGNED_Format:Db,RGB_ETC1_Format:vb,RGB_ETC2_Format:yb,RGB_PVRTC_2BPPV1_Format:pb,RGB_PVRTC_4BPPV1_Format:fb,RGB_S3TC_DXT1_Format:ng,RGDepthPacking:I_e,RGFormat:S2,RGIntegerFormat:Q1,RawShaderMaterial:Jz,Ray:fh,Raycaster:wh,Rec709Primaries:sv,RectAreaLight:l5,RedFormat:qv,RedIntegerFormat:Zv,ReinhardToneMapping:tz,RenderTarget:Cz,RepeatWrapping:Qr,ReplaceStencilOp:P_e,ReverseSubtractEquation:RU,RingGeometry:Sw,SIGNED_RED_GREEN_RGTC2_Format:Bb,SIGNED_RED_RGTC1_Format:Nb,SRGBColorSpace:Ei,SRGBTransfer:ui,Scene:mh,ShaderChunk:on,ShaderLib:Zo,ShaderMaterial:Bi,ShadowMaterial:Zz,Shape:Pd,ShapeGeometry:Cw,ShapePath:uEe,ShapeUtils:Da,ShortType:v2,Skeleton:Bp,SkeletonHelper:eEe,SkinnedMesh:hw,Source:hd,Sphere:bi,SphereGeometry:gh,Spherical:ug,SphericalHarmonics3:c5,SplineCurve:z2,SpotLight:Rw,SpotLightHelper:QMe,Sprite:Bz,SpriteMaterial:O2,SrcAlphaFactor:db,SrcAlphaSaturateFactor:HU,SrcColorFactor:DU,StaticCopyUsage:j_e,StaticDrawUsage:ov,StaticReadUsage:K_e,StereoCamera:AMe,StreamCopyUsage:Z_e,StreamDrawUsage:W_e,StreamReadUsage:X_e,StringKeyframeTrack:_h,SubtractEquation:IU,SubtractiveBlending:vM,TOUCH:b_e,TangentSpaceNormalMap:vu,TetrahedronGeometry:Mw,Texture:Wn,TextureLoader:Iw,TextureUtils:gCe,TorusGeometry:yl,TorusKnotGeometry:Ew,Triangle:Vr,TriangleFanDrawMode:nv,TriangleStripDrawMode:nw,TrianglesDrawMode:dz,TubeGeometry:Tw,UVMapping:j1,Uint16BufferAttribute:I2,Uint32BufferAttribute:aw,Uint8BufferAttribute:vf,Uint8ClampedBufferAttribute:Lbe,Uniform:Q2,UniformsGroup:YMe,UniformsLib:Dt,UniformsUtils:eh,UnsignedByteType:Wa,UnsignedInt248Type:Zd,UnsignedInt5999Type:y2,UnsignedIntType:Dl,UnsignedShort4444Type:Z1,UnsignedShort5551Type:J1,UnsignedShortType:pp,VSMShadowMap:_a,Vector2:tt,Vector3:G,Vector4:Ln,VectorKeyframeTrack:zl,VideoTexture:NCe,WebGL3DRenderTarget:wbe,WebGLArrayRenderTarget:bbe,WebGLCoordinateSystem:Ra,WebGLCubeRenderTarget:Iz,WebGLMultipleRenderTargets:dEe,WebGLRenderTarget:Ti,WebGLRenderer:k2,WebGLUtils:Dz,WebGPUCoordinateSystem:av,WireframeGeometry:qz,WrapAroundEnding:tv,ZeroCurvatureEnding:ud,ZeroFactor:kU,ZeroSlopeEnding:dd,ZeroStencilOp:R_e,createCanvasElement:xz},Symbol.toStringTag,{value:"Module"}));function v5(n){let e,t,i,s=-1,r=0;for(let c=0;c<n.length;++c){const u=n[c];if(e===void 0&&(e=u.array.constructor),e!==u.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=u.itemSize),t!==u.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(i===void 0&&(i=u.normalized),i!==u.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(s===-1&&(s=u.gpuType),s!==u.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;r+=u.count*t}const o=new e(r),a=new dn(o,t,i);let l=0;for(let c=0;c<n.length;++c){const u=n[c];if(u.isInterleavedBufferAttribute){const d=l/t;for(let h=0,f=u.count;h<f;h++)for(let m=0;m<t;m++){const p=u.getComponent(h,m);a.setComponent(h+d,m,p)}}else o.set(u.array,l);l+=u.count*t}return s!==void 0&&(a.gpuType=s),a}function $b(n,e){if(e===dz)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===nv||e===nw){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,s=[];if(e===nv)for(let o=1;o<=i;o++)s.push(t.getX(0)),s.push(t.getX(o)),s.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(s.push(t.getX(o)),s.push(t.getX(o+1)),s.push(t.getX(o+2))):(s.push(t.getX(o+2)),s.push(t.getX(o+1)),s.push(t.getX(o)));s.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=n.clone();return r.setIndex(s),r.clearGroups(),r}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}const fEe=`
// source: https://timseverien.com/posts/2020-06-19-colour-correction-with-webgl/
vec3 adjustContrast(vec3 color, float value) {
    const vec3 zero = vec3(0.);
    return max(zero, 0.5 + value * (color - 0.5));
}

// source: https://gist.github.com/yiwenl/745bfea7f04c456e0101
vec3 hsv2rgb(vec3 c){
    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}

// source: https://gist.github.com/yiwenl/745bfea7f04c456e0101
vec3 rgb2hsv(vec3 rgb) {
    float Cmax = max(rgb.r, max(rgb.g, rgb.b));
    float Cmin = min(rgb.r, min(rgb.g, rgb.b));
    float delta = Cmax - Cmin;
    vec3 hsv = vec3(0., 0., Cmax);
    if (Cmax > Cmin) {
        hsv.y = delta / Cmax;
        if (rgb.r == Cmax)
            hsv.x = (rgb.g - rgb.b) / delta;
        else {
            if (rgb.g == Cmax)
                hsv.x = 2. + (rgb.b - rgb.r) / delta;
            else
                hsv.x = 4. + (rgb.r - rgb.g) / delta;
        }
        hsv.x = fract(hsv.x / 6.);
    }
    return hsv;
}
`,y5=`

float aoMapClr = 1.;

#ifdef USE_AOMAP
    aoMapClr = (texture2D(aoMap, vUv2).r - 1.) * aoMapIntensity + 1.;
#else
    #ifdef USE_LIGHTMAP
        vec3 lightMapVec = (texture2D(lightMap, vUv2).rgb - vec3(1.)) * (lightMapIntensity / PI) + vec3(1.);
        
        const vec3 luminanceWeight = vec3(0.2126, 0.7152, 0.0722);

        // grayscale the lightmap
        aoMapClr = dot(lightMapVec.rgb, luminanceWeight);
    #endif
#endif

if(aoMapGamma != 1.) aoMapClr = pow(aoMapClr, 1. / aoMapGamma);

// clamp
aoMapClr = min(1., aoMapClr);
`,_5=`
envMapColor.rgb *= aoMapClr;

vec3 origEnvMapColor = vec3(envMapColor.rgb);

float origAoMapClr = aoMapClr;

#ifndef DISABLE_SMOOTHING
    // calculate smoothing
    float smoothingRoughnessInfluence = max(0.75 - roughness, 0.);
    float smoothingAoInfluence = (1. - aoMapClr) * 0.75;

    float totalSmoothing = 0.3 + smoothingPower + (1. - smoothingPower) * smoothingRoughnessInfluence - smoothingAoInfluence;
    vec3 smoothing = vec3(max(totalSmoothing, 0.));

    envMapColor.rgb = pow(envMapColor.rgb, smoothing);
#endif

envMapColor.rgb += pow(envMapColor.rgb, vec3(envPower)) * (aoPower * 0.2);

float aoMapPower = pow(aoMapClr + aoSmoothing * (0.5 - aoMapClr), aoPower);
if(aoMapPower > 1.) aoMapPower = 1.;
`,pEe=`
${_5}

envMapColor.rgb *= irradianceColor;

#ifndef DISABLE_SMOOTHING
    envMapColor.rgb = pow(envMapColor.rgb, smoothing);
#endif

float origAoMapClrPow = origAoMapClr * origAoMapClr;

vec3 hemisphereInfluence = aoMapClr * mix(
    irradianceColor,
    hemisphereColor,
    1. - origAoMapClrPow
) * envMapColor.rgb * envMapIntensity * 0.125;

envMapColor.rgb = mix(envMapColor.rgb, hemisphereColor, 1. - origAoMapClrPow);

vec3 env = irradianceIntensity * envMapColor.rgb * envMapIntensity * aoMapPower + hemisphereInfluence;

if(sunIntensity != 0.){
    env += irradianceIntensity * sunIntensity * irradianceColor * origEnvMapColor * envMapIntensity * pow(aoMapClr, 16.);
}

return env;
`,mEe=`
${_5}

#ifndef DISABLE_SMOOTHING

envMapColor.rgb *= radianceColor;
envMapColor.rgb = pow(envMapColor.rgb, smoothing);

#endif

vec3 env = envMapColor.rgb * envMapIntensity * 0.125 * (aoMapPower * radianceIntensity + aoMapClr * radianceColor);

if(sunIntensity != 0.){
    env += radianceIntensity * sunIntensity * irradianceColor * origEnvMapColor * envMapIntensity * pow(aoMapClr, 16.);
}

return env;
`,gEe=on.map_fragment.replace("diffuseColor *= sampledDiffuseColor;",`
    #ifdef USE_LIGHTMAP
        vec3 lightMapClr = (texture2D(lightMap, vUv2).rgb - vec3(1.)) * (lightMapIntensity / PI) + vec3(1.);
    #else
        vec3 lightMapClr = vec3(1.);
    #endif

    if(lightMapGamma != 1.) lightMapClr = pow(lightMapClr, vec3(1. / lightMapGamma));

    if(lightMapContrast != 1.) lightMapClr = adjustContrast(lightMapClr, lightMapContrast);

    // clamp
    lightMapClr = min(lightMapClr, vec3(1.));

    // source: Chapter 16 of OpenGL Shading Language
    const vec3 W = vec3(0.2125, 0.7154, 0.0721);
    vec3 intensity = vec3(dot(lightMapClr, W));
    lightMapClr = mix(intensity, lightMapClr, lightMapSaturation);

    if(mapContrast != 1.) sampledDiffuseColor = vec4(adjustContrast(sampledDiffuseColor.rgb, mapContrast), 1.);

    vec3 lightMapHsv = rgb2hsv(lightMapClr);
    float saturation = lightMapHsv.y;

    float mixVal = saturation;
    
    float value = pow(lightMapHsv.z, 0.05);
    float darkness = 1. - value;

    // lightMapHsv.y = mix(lightMapHsv.y, lightMapHsv.y * 5., darkness * 1.75);
    
    lightMapHsv = hsv2rgb(lightMapHsv);

    // blend the lightmap color towards the diffuse color the more light this spot receives
    lightMapHsv = mix(lightMapHsv, lightMapHsv * normalize(sampledDiffuseColor.rgb) * length(sampledDiffuseColor.rgb), value);

    mixVal += darkness * 0.2;
    
    lightMapClr = pow(
        mix(lightMapClr, lightMapHsv, mixVal),
        vec3(1.25)
    );

    float lightnessFactor = pow(lightMapHsv.z, 0.1);

    diffuseColor *= lightnessFactor * sampledDiffuseColor * vec4(lightMapClr, 1.);
    `),vEe=on.lights_pars_begin.replace("vec3 irradiance = ambientLightColor;",`
    ${y5}
    aoMapClr *= aoMapClr;

    vec3 irradiance = mix(
        ambientLightColor,
        aoColor * 15. * ((aoMapClr - 1.) * 0.28 + 1.),
        1. - aoMapClr
    );`),yEe=on.lights_fragment_maps.replace("USE_LIGHTMAP","false"),Us=n=>{let e=Math.fround(n).toString();return e.includes(".")||(e+="."),e},Py=n=>"vec3("+Us(n.r)+", "+Us(n.g)+", "+Us(n.b)+")";function _Ee(n,{aoColor:e=new gt(0),hemisphereColor:t=new gt(16777215),irradianceColor:i=new gt(16777215),radianceColor:s=new gt(16777215),aoPower:r=1,aoSmoothing:o=0,aoMapGamma:a=1,lightMapGamma:l=1,lightMapSaturation:c=1,envPower:u=1,roughnessPower:d=1,sunIntensity:h=0,mapContrast:f=1,lightMapContrast:m=1,smoothingPower:p=.25,irradianceIntensity:y=Math.PI,radianceIntensity:v=1,hardcodeValues:_=!1}={}){if(n.defines&&n.fragmentShader.includes("#define ENHANCE_SHADER_LIGHTING"))return;n.defines===void 0&&(n.defines={}),n.defines.ENHANCE_SHADER_LIGHTING="",_?n.fragmentShader=n.fragmentShader.replace("uniform float opacity;",`
            uniform float opacity;
            
            const vec3 aoColor = ${Py(e)};
            const vec3 hemisphereColor = ${Py(t)};
            const vec3 irradianceColor = ${Py(i)};
            const vec3 radianceColor = ${Py(s)};

            const float aoPower = ${Us(r)};
            const float aoSmoothing = ${Us(o)};
            const float aoMapGamma = ${Us(a)};
            const float lightMapGamma = ${Us(l)};
            const float lightMapSaturation = ${Us(c)};
            const float envPower = ${Us(u)};
            const float roughnessPower = ${Us(d)};
            const float sunIntensity = ${Us(h)};
            const float mapContrast = ${Us(f)};
            const float lightMapContrast = ${Us(m)};
            const float smoothingPower = ${Us(p)};
            const float irradianceIntensity = ${Us(y)};
            const float radianceIntensity = ${Us(v)};
            `):(n.uniforms.aoColor={value:e},n.uniforms.hemisphereColor={value:t},n.uniforms.irradianceColor={value:i},n.uniforms.radianceColor={value:s},n.uniforms.aoPower={value:r},n.uniforms.aoSmoothing={value:o},n.uniforms.lightMapGamma={value:l},n.uniforms.lightMapSaturation={value:c},n.uniforms.aoMapGamma={value:a},n.uniforms.envPower={value:u},n.uniforms.smoothingPower={value:p},n.uniforms.roughnessPower={value:d},n.uniforms.sunIntensity={value:h},n.uniforms.mapContrast={value:f},n.uniforms.lightMapContrast={value:m},n.uniforms.irradianceIntensity={value:y},n.uniforms.radianceIntensity={value:v},n.fragmentShader=n.fragmentShader.replace("uniform float opacity;",`
            uniform float opacity;
            
            uniform vec3 aoColor;
            uniform vec3 hemisphereColor;
            uniform vec3 irradianceColor;
            uniform vec3 radianceColor;
            uniform float aoPower;
            uniform float aoSmoothing;
            uniform float aoMapGamma;
            uniform float lightMapGamma;
            uniform float lightMapSaturation;
            uniform float envPower;
            uniform float roughnessPower;
            uniform float sunIntensity;
            uniform float mapContrast;
            uniform float lightMapContrast;
            uniform float smoothingPower;
            uniform float irradianceIntensity;
            uniform float radianceIntensity;
            `));let b=n.vertexShader.replace(/#include <fog_vertex>/,`
    #include <fog_vertex>
#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
    vUv2 = uv2;
#endif
    `);n.vertexShader=`
  #if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
      attribute vec2 uv2;
      varying vec2 vUv2;
  #endif
  `+b,n.fragmentShader=n.fragmentShader.replace("uniform float opacity;",`
  #define ENHANCE_SHADER_LIGHTING
  uniform float opacity;
  #if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
     varying vec2 vUv2;
  #endif
  ${fEe}
  `).replace("main() {",`
      main() {
      ${y5}
      `).replace("#include <aomap_fragment>","").replace("#include <lights_pars_begin>",vEe).replace("#include <lights_fragment_maps>",yEe).replace("#include <map_fragment>",gEe).replace("#include <envmap_physical_pars_fragment>",on.envmap_physical_pars_fragment).replace("getIBLIrradiance( const in vec3 normal )","getIBLIrradiance( const in vec3 normal, float aoMapClr )").replace("getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness )","getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, float aoMapClr )").replace("return PI * envMapColor.rgb * envMapIntensity;",pEe).replace("return envMapColor.rgb * envMapIntensity;",mEe).replace(" #if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )",`
            #include <aomap_fragment>
            #if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
            `).replace("iblIrradiance += getIBLIrradiance( geometryNormal );",`
            iblIrradiance += getIBLIrradiance( geometryNormal, aoMapClr );
            `).replace("radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );",`
            radiance += getIBLRadiance( geometryViewDir, geometryNormal, pow(material.roughness, roughnessPower), aoMapClr );
            `).replace("clearcoatRadiance += getIBLRadiance( geometryViewDir, geometry.clearcoatNormal, material.clearcoatRoughness );",`
            clearcoatRadiance += getIBLRadiance( geometryViewDir, geometry.clearcoatNormal, pow(material.clearcoatRoughness, roughnessPower), aoMapClr );
            `).replace(/vec4 diffuseColor = vec4\( diffuse, opacity \);/,`
              #ifdef USE_COLOR_ALPHA
                // vec4 diffuseColor = vColor;
                // if(vColor.r + vColor.g + vColor.b +vColor.a< 3.99)
                // {
                //   if(opacity<1.0&&vColor.a>0.99)
                //   {
                //     diffuseColor.a
                //   }
                // }
                // else{
                //   diffuseColor = vec4(diffuse, opacity);
                // }
                vec4 diffuseColor = (vColor.r + vColor.g + vColor.b +vColor.a< 3.99) ?  vec4(vColor.rgb,vColor.a*opacity): vec4(diffuse, opacity);
              #elif defined(USE_COLOR) 
                vec4 diffuseColor = (vColor.r + vColor.g + vColor.b < 2.99) ? vec4(vColor,opacity) : vec4(diffuse, opacity);
              #else
                vec4 diffuseColor = vec4( diffuse, opacity );
              #endif
            `)}const i1=class i1 extends Fl{constructor(t){super(t);J(this,"shader")}onBeforeCompile(t,i){this.shader=t,_Ee(t,i1.enhanceShaderLightingParams)}};J(i1,"enhanceShaderLightingParams",{aoColor:new gt(0),hemisphereColor:new gt(16777215),irradianceColor:new gt(16777215),radianceColor:new gt(8900331),sunIntensity:0,smoothingPower:.5,envPower:1,aoPower:1,aoSmoothing:1,radianceIntensity:1,aoMapGamma:1,lightMapGamma:0,lightMapSaturation:.5,roughnessPower:.2,mapContrast:1,lightMapContrast:1,irradianceIntensity:Math.PI,hardcodeValues:!1});let go=i1,nA=class extends ks{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new CEe(t)}),this.register(function(t){return new LEe(t)}),this.register(function(t){return new kEe(t)}),this.register(function(t){return new OEe(t)}),this.register(function(t){return new EEe(t)}),this.register(function(t){return new TEe(t)}),this.register(function(t){return new AEe(t)}),this.register(function(t){return new IEe(t)}),this.register(function(t){return new SEe(t)}),this.register(function(t){return new REe(t)}),this.register(function(t){return new MEe(t)}),this.register(function(t){return new PEe(t)}),this.register(function(t){return new wEe(t)}),this.register(function(t){return new DEe(t)}),this.register(function(t){return new NEe(t)})}load(e,t,i,s){const r=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=ta.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){s?s(c):console.error(c),r.manager.itemError(e),r.manager.itemEnd(e)},l=new pr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{r.parse(c,o,function(u){t(u),r.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,s){let r;const o={},a={},l=new TextDecoder;if(typeof e=="string")r=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===b5){try{o[An.KHR_BINARY_GLTF]=new FEe(e)}catch(d){s&&s(d);return}r=JSON.parse(o[An.KHR_BINARY_GLTF].content)}else r=JSON.parse(l.decode(e));else r=e;if(r.asset===void 0||r.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new qEe(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](c);a[d.name]=d,o[d.name]=!0}if(r.extensionsUsed)for(let u=0;u<r.extensionsUsed.length;++u){const d=r.extensionsUsed[u],h=r.extensionsRequired||[];switch(d){case An.KHR_MATERIALS_UNLIT:o[d]=new xEe;break;case An.KHR_DRACO_MESH_COMPRESSION:o[d]=new BEe(r,this.dracoLoader);break;case An.KHR_TEXTURE_TRANSFORM:o[d]=new UEe;break;case An.KHR_MESH_QUANTIZATION:o[d]=new zEe;break;default:h.indexOf(d)>=0&&a[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(i,s)}parseAsync(e,t){const i=this;return new Promise(function(s,r){i.parse(e,t,s,r)})}};function bEe(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const An={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};let wEe=class{constructor(e){this.parser=e,this.name=An.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,s=t.length;i<s;i++){const r=t[i];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let s=t.cache.get(i);if(s)return s;const r=t.json,l=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let c;const u=new gt(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],qn);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new o0(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new r0(u),c.distance=d;break;case"spot":c=new Rw(u),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,Ac(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),s=Promise.resolve(c),t.cache.add(i,s),s}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,r=i.json.nodes[e],a=(r.extensions&&r.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}},xEe=class{constructor(){this.name=An.KHR_MATERIALS_UNLIT}getMaterialType(){return $n}extendParams(e,t,i){const s=[];e.color=new gt(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const o=r.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],qn),e.opacity=o[3]}r.baseColorTexture!==void 0&&s.push(i.assignTexture(e,"map",r.baseColorTexture,Ei))}return Promise.all(s)}},SEe=class{constructor(e){this.parser=e,this.name=An.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name].emissiveStrength;return r!==void 0&&(t.emissiveIntensity=r),Promise.resolve()}},CEe=class{constructor(e){this.parser=e,this.name=An.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ss}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&r.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&r.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(r.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new tt(a,a)}return Promise.all(r)}},MEe=class{constructor(e){this.parser=e,this.name=An.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ss}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&r.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&r.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(r)}},EEe=class{constructor(e){this.parser=e,this.name=An.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ss}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new gt(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=s.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],qn)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&r.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Ei)),o.sheenRoughnessTexture!==void 0&&r.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}},TEe=class{constructor(e){this.parser=e,this.name=An.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ss}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&r.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)}},AEe=class{constructor(e){this.parser=e,this.name=An.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ss}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&r.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new gt().setRGB(a[0],a[1],a[2],qn),Promise.all(r)}},IEe=class{constructor(e){this.parser=e,this.name=An.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ss}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}},REe=class{constructor(e){this.parser=e,this.name=An.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ss}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&r.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new gt().setRGB(a[0],a[1],a[2],qn),o.specularColorTexture!==void 0&&r.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,Ei)),Promise.all(r)}},PEe=class{constructor(e){this.parser=e,this.name=An.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ss}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&r.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(r)}},LEe=class{constructor(e){this.parser=e,this.name=An.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,s=i.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,o)}},kEe=class{constructor(e){this.parser=e,this.name=An.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],a=s.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}},OEe=class{constructor(e){this.parser=e,this.name=An.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],a=s.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}},DEe=class{constructor(e){this.name=An.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const s=i.extensions[this.name],r=this.parser.getDependency("buffer",s.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(a){const l=s.byteOffset||0,c=s.byteLength||0,u=s.count,d=s.byteStride,h=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,d,h,s.mode,s.filter).then(function(f){return f.buffer}):o.ready.then(function(){const f=new ArrayBuffer(u*d);return o.decodeGltfBuffer(new Uint8Array(f),u,d,h,s.mode,s.filter),f})})}else return null}},NEe=class{constructor(e){this.name=An.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const s=t.meshes[i.mesh];for(const c of s.primitives)if(c.mode!==ho.TRIANGLES&&c.mode!==ho.TRIANGLE_STRIP&&c.mode!==ho.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),d=u.isGroup?u.children:[u],h=c[0].count,f=[];for(const m of d){const p=new yt,y=new G,v=new Mn,_=new G(1,1,1),b=new Pa(m.geometry,m.material,h);for(let w=0;w<h;w++)l.TRANSLATION&&y.fromBufferAttribute(l.TRANSLATION,w),l.ROTATION&&v.fromBufferAttribute(l.ROTATION,w),l.SCALE&&_.fromBufferAttribute(l.SCALE,w),b.setMatrixAt(w,p.compose(y,v,_));for(const w in l)w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&m.geometry.setAttribute(w,l[w]);rn.prototype.copy.call(b,m),this.parser.assignFinalMaterial(b),f.push(b)}return u.isGroup?(u.clear(),u.add(...f),u):f[0]}))}};const b5="glTF",um=12,FL={JSON:1313821514,BIN:5130562};let FEe=class{constructor(e){this.name=An.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,um),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==b5)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const s=this.header.length-um,r=new DataView(e,um);let o=0;for(;o<s;){const a=r.getUint32(o,!0);o+=4;const l=r.getUint32(o,!0);if(o+=4,l===FL.JSON){const c=new Uint8Array(e,um+o,a);this.content=i.decode(c)}else if(l===FL.BIN){const c=um+o;this.body=e.slice(c,c+a)}o+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},BEe=class{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=An.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,s=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const d=IM[u]||u.toLowerCase();a[d]=o[u]}for(const u in e.attributes){const d=IM[u]||u.toLowerCase();if(o[u]!==void 0){const h=i.accessors[e.attributes[u]],f=Df[h.componentType];c[d]=f.name,l[d]=h.normalized===!0}}return t.getDependency("bufferView",r).then(function(u){return new Promise(function(d){s.decodeDracoFile(u,function(h){for(const f in h.attributes){const m=h.attributes[f],p=l[f];p!==void 0&&(m.normalized=p)}d(h)},a,c)})})}},UEe=class{constructor(){this.name=An.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}},zEe=class{constructor(){this.name=An.KHR_MESH_QUANTIZATION}},w5=class extends vh{constructor(e,t,i,s){super(e,t,i,s)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=e*s*3+s;for(let o=0;o!==s;o++)t[o]=i[r+o];return t}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=s-t,d=(i-t)/u,h=d*d,f=h*d,m=e*c,p=m-c,y=-2*f+3*h,v=f-h,_=1-y,b=v-h+d;for(let w=0;w!==a;w++){const x=o[p+w+a],S=o[p+w+l]*u,C=o[m+w+a],T=o[m+w]*u;r[w]=_*x+b*S+y*C+v*T}return r}};const HEe=new Mn;let VEe=class extends w5{interpolate_(e,t,i,s){const r=super.interpolate_(e,t,i,s);return HEe.fromArray(r).normalize().toArray(r),r}};const ho={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Df={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},BL={9728:ii,9729:Rn,9984:jv,9985:Ad,9986:Bc,9987:Cr},UL={33071:Sr,33648:qd,10497:Qr},dS={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},IM={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},fc={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},$Ee={CUBICSPLINE:void 0,LINEAR:lu,STEP:Qd},hS={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function GEe(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new go({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Fo})),n.DefaultMaterial}function Bu(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Ac(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function WEe(n,e,t){let i=!1,s=!1,r=!1;for(let c=0,u=e.length;c<u;c++){const d=e[c];if(d.POSITION!==void 0&&(i=!0),d.NORMAL!==void 0&&(s=!0),d.COLOR_0!==void 0&&(r=!0),i&&s&&r)break}if(!i&&!s&&!r)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const d=e[c];if(i){const h=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):n.attributes.position;o.push(h)}if(s){const h=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(h)}if(r){const h=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;l.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],d=c[1],h=c[2];return i&&(n.morphAttributes.position=u),s&&(n.morphAttributes.normal=d),r&&(n.morphAttributes.color=h),n.morphTargetsRelative=!0,n})}function KEe(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,s=t.length;i<s;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function YEe(n){let e;const t=n.extensions&&n.extensions[An.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+fS(t.attributes):e=n.indices+":"+fS(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,s=n.targets.length;i<s;i++)e+=":"+fS(n.targets[i]);return e}function fS(n){let e="";const t=Object.keys(n).sort();for(let i=0,s=t.length;i<s;i++)e+=t[i]+":"+n[t[i]]+";";return e}function RM(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function XEe(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const jEe=new yt;let qEe=class{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new bEe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,s=!1,r=-1;typeof navigator<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,r=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||s&&r<98?this.textureLoader=new Iw(this.options.manager):this.textureLoader=new j2(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new pr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,s=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][s.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:s.asset,parser:i,userData:{}};Bu(r,a,s),Ac(a,s),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let s=0,r=t.length;s<r;s++){const o=t[s].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let s=0,r=e.length;s<r;s++){const o=e[s];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const s=i.clone(),r=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())r(u,a.children[c])};return r(i,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const s=e(t[i]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let s=0;s<t.length;s++){const r=e(t[s]);r&&i.push(r)}return i}getDependency(e,t){const i=e+":"+t;let s=this.cache.get(i);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(r){return r.loadNode&&r.loadNode(t)});break;case"mesh":s=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(i,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(r,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[An.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(r,o){i.load(ta.resolveURL(t.uri,s.path),r,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteLength||0,r=t.byteOffset||0;return i.slice(r,r+s)})}loadAccessor(e){const t=this,i=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const o=dS[s.type],a=Df[s.componentType],l=s.normalized===!0,c=new a(s.count*o);return Promise.resolve(new dn(c,o,l))}const r=[];return s.bufferView!==void 0?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),s.sparse!==void 0&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(o){const a=o[0],l=dS[s.type],c=Df[s.componentType],u=c.BYTES_PER_ELEMENT,d=u*l,h=s.byteOffset||0,f=s.bufferView!==void 0?i.bufferViews[s.bufferView].byteStride:void 0,m=s.normalized===!0;let p,y;if(f&&f!==d){const v=Math.floor(h/f),_="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+v+":"+s.count;let b=t.cache.get(_);b||(p=new c(a,v*f,s.count*f/u),b=new Fp(p,f/u),t.cache.add(_,b)),y=new Nl(b,l,h%f/u,m)}else a===null?p=new c(s.count*l):p=new c(a,h,s.count*l),y=new dn(p,l,m);if(s.sparse!==void 0){const v=dS.SCALAR,_=Df[s.sparse.indices.componentType],b=s.sparse.indices.byteOffset||0,w=s.sparse.values.byteOffset||0,x=new _(o[1],b,s.sparse.count*v),S=new c(o[2],w,s.sparse.count*l);a!==null&&(y=new dn(y.array.slice(),y.itemSize,y.normalized));for(let C=0,T=x.length;C<T;C++){const M=x[C];if(y.setX(M,S[C*l]),l>=2&&y.setY(M,S[C*l+1]),l>=3&&y.setZ(M,S[C*l+2]),l>=4&&y.setW(M,S[C*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return y})}loadTexture(e){const t=this.json,i=this.options,r=t.textures[e].source,o=t.images[r];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,r,a)}loadTextureImage(e,t,i){const s=this,r=this.json,o=r.textures[e],a=r.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const h=(r.samplers||{})[o.sampler]||{};return u.magFilter=BL[h.magFilter]||Rn,u.minFilter=BL[h.minFilter]||Cr,u.wrapS=UL[h.wrapS]||Qr,u.wrapT=UL[h.wrapT]||Qr,s.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const i=this,s=this.json,r=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const o=s.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(d){c=!0;const h=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(h),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(d){return new Promise(function(h,f){let m=h;t.isImageBitmapLoader===!0&&(m=function(p){const y=new Wn(p);y.needsUpdate=!0,h(y)}),t.load(ta.resolveURL(d,r.path),m,void 0,f)})}).then(function(d){return c===!0&&a.revokeObjectURL(l),d.userData.mimeType=o.mimeType||XEe(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=u,u}assignTexture(e,t,i,s){const r=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),r.extensions[An.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[An.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=r.associations.get(o);o=r.extensions[An.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),r.associations.set(o,l)}}return s!==void 0&&(o.colorSpace=s),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const s=t.attributes.tangent===void 0,r=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Up,zi.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Vi,zi.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(s||r||o){let a="ClonedMaterial:"+i.uuid+":";s&&(a+="derivative-tangents:"),r&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),r&&(l.vertexColors=!0),o&&(l.flatShading=!0),s&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return go}loadMaterial(e){const t=this,i=this.json,s=this.extensions,r=i.materials[e];let o;const a={},l=r.extensions||{},c=[];if(l[An.KHR_MATERIALS_UNLIT]){const d=s[An.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),c.push(d.extendParams(a,r,t))}else{const d=r.pbrMetallicRoughness||{};if(a.color=new gt(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const h=d.baseColorFactor;a.color.setRGB(h[0],h[1],h[2],qn),a.opacity=h[3]}d.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",d.baseColorTexture,Ei)),a.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,a.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}r.doubleSided===!0&&(a.side=ts);const u=r.alphaMode||hS.OPAQUE;if(u===hS.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===hS.MASK&&(a.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&o!==$n&&(c.push(t.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new tt(1,1),r.normalTexture.scale!==void 0)){const d=r.normalTexture.scale;a.normalScale.set(d,d)}if(r.occlusionTexture!==void 0&&o!==$n&&(c.push(t.assignTexture(a,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&o!==$n){const d=r.emissiveFactor;a.emissive=new gt().setRGB(d[0],d[1],d[2],qn)}return r.emissiveTexture!==void 0&&o!==$n&&c.push(t.assignTexture(a,"emissiveMap",r.emissiveTexture,Ei)),Promise.all(c).then(function(){const d=new o(a);return r.name&&(d.name=r.name),Ac(d,r),t.associations.set(d,{materials:e}),r.extensions&&Bu(s,d,r),d})}createUniqueName(e){const t=Tn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,s=this.primitiveCache;function r(a){return i[An.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return zL(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=YEe(c),d=s[u];if(d)o.push(d.promise);else{let h;c.extensions&&c.extensions[An.KHR_DRACO_MESH_COMPRESSION]?h=r(c):h=zL(new jt,c,t),s[u]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,s=this.extensions,r=i.meshes[e],o=r.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?GEe(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],d=[];for(let f=0,m=u.length;f<m;f++){const p=u[f],y=o[f];let v;const _=c[f];if(y.mode===ho.TRIANGLES||y.mode===ho.TRIANGLE_STRIP||y.mode===ho.TRIANGLE_FAN||y.mode===void 0)v=r.isSkinnedMesh===!0?new hw(p,_):new ut(p,_),v.isSkinnedMesh===!0&&v.normalizeSkinWeights(),y.mode===ho.TRIANGLE_STRIP?v.geometry=$b(v.geometry,nw):y.mode===ho.TRIANGLE_FAN&&(v.geometry=$b(v.geometry,nv));else if(y.mode===ho.LINES)v=new gr(p,_);else if(y.mode===ho.LINE_STRIP)v=new gs(p,_);else if(y.mode===ho.LINE_LOOP)v=new fw(p,_);else if(y.mode===ho.POINTS)v=new n0(p,_);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+y.mode);Object.keys(v.geometry.morphAttributes).length>0&&KEe(v,r),v.name=t.createUniqueName(r.name||"mesh_"+e),Ac(v,r),y.extensions&&Bu(s,v,y),t.assignFinalMaterial(v),d.push(v)}for(let f=0,m=d.length;f<m;f++)t.associations.set(d[f],{meshes:e,primitives:f});if(d.length===1)return r.extensions&&Bu(s,d[0],r),d[0];const h=new As;r.extensions&&Bu(s,h,r),t.associations.set(h,{meshes:e});for(let f=0,m=d.length;f<m;f++)h.add(d[f]);return h})}loadCamera(e){let t;const i=this.json.cameras[e],s=i[i.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new Yi(kc.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):i.type==="orthographic"&&(t=new eo(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Ac(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let s=0,r=t.joints.length;s<r;s++)i.push(this._loadNodeShallow(t.joints[s]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(s){const r=s.pop(),o=s,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const d=o[c];if(d){a.push(d);const h=new yt;r!==null&&h.fromArray(r.array,c*16),l.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new Bp(a,l)})}loadAnimation(e){const t=this.json,i=this,s=t.animations[e],r=s.name?s.name:"animation_"+e,o=[],a=[],l=[],c=[],u=[];for(let d=0,h=s.channels.length;d<h;d++){const f=s.channels[d],m=s.samplers[f.sampler],p=f.target,y=p.node,v=s.parameters!==void 0?s.parameters[m.input]:m.input,_=s.parameters!==void 0?s.parameters[m.output]:m.output;p.node!==void 0&&(o.push(this.getDependency("node",y)),a.push(this.getDependency("accessor",v)),l.push(this.getDependency("accessor",_)),c.push(m),u.push(p))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(d){const h=d[0],f=d[1],m=d[2],p=d[3],y=d[4],v=[];for(let _=0,b=h.length;_<b;_++){const w=h[_],x=f[_],S=m[_],C=p[_],T=y[_];if(w===void 0)continue;w.updateMatrix&&w.updateMatrix();const M=i._createAnimationTracks(w,x,S,C,T);if(M)for(let E=0;E<M.length;E++)v.push(M[E])}return new nh(r,void 0,v)})}createNodeMesh(e){const t=this.json,i=this,s=t.nodes[e];return s.mesh===void 0?null:i.getDependency("mesh",s.mesh).then(function(r){const o=i._getNodeRef(i.meshCache,s.mesh,r);return s.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=s.weights.length;l<c;l++)a.morphTargetInfluences[l]=s.weights[l]}),o})}loadNode(e){const t=this.json,i=this,s=t.nodes[e],r=i._loadNodeShallow(e),o=[],a=s.children||[];for(let c=0,u=a.length;c<u;c++)o.push(i.getDependency("node",a[c]));const l=s.skin===void 0?Promise.resolve(null):i.getDependency("skin",s.skin);return Promise.all([r,Promise.all(o),l]).then(function(c){const u=c[0],d=c[1],h=c[2];h!==null&&u.traverse(function(f){f.isSkinnedMesh&&f.bind(h,jEe)});for(let f=0,m=d.length;f<m;f++)u.add(d[f]);return u})}_loadNodeShallow(e){const t=this.json,i=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const r=t.nodes[e],o=r.name?s.createUniqueName(r.name):"",a=[],l=s._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),r.camera!==void 0&&a.push(s.getDependency("camera",r.camera).then(function(c){return s._getNodeRef(s.cameraCache,r.camera,c)})),s._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(r.isBone===!0?u=new t0:c.length>1?u=new As:c.length===1?u=c[0]:u=new rn,u!==c[0])for(let d=0,h=c.length;d<h;d++)u.add(c[d]);if(r.name&&(u.userData.name=r.name,u.name=o),Ac(u,r),r.extensions&&Bu(i,u,r),r.matrix!==void 0){const d=new yt;d.fromArray(r.matrix),u.applyMatrix4(d)}else r.translation!==void 0&&u.position.fromArray(r.translation),r.rotation!==void 0&&u.quaternion.fromArray(r.rotation),r.scale!==void 0&&u.scale.fromArray(r.scale);return s.associations.has(u)||s.associations.set(u,{}),s.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],s=this,r=new As;i.name&&(r.name=s.createUniqueName(i.name)),Ac(r,i),i.extensions&&Bu(t,r,i);const o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(s.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,d=l.length;u<d;u++)r.add(l[u]);const c=u=>{const d=new Map;for(const[h,f]of s.associations)(h instanceof zi||h instanceof Wn)&&d.set(h,f);return u.traverse(h=>{const f=s.associations.get(h);f!=null&&d.set(h,f)}),d};return s.associations=c(r),r})}_createAnimationTracks(e,t,i,s,r){const o=[],a=e.name?e.name:e.uuid,l=[];fc[r.path]===fc.weights?e.traverse(function(h){h.morphTargetInfluences&&l.push(h.name?h.name:h.uuid)}):l.push(a);let c;switch(fc[r.path]){case fc.weights:c=Bl;break;case fc.rotation:c=Ul;break;case fc.position:case fc.scale:c=zl;break;default:switch(i.itemSize){case 1:c=Bl;break;case 2:case 3:default:c=zl;break}break}const u=s.interpolation!==void 0?$Ee[s.interpolation]:lu,d=this._getArrayFromAccessor(i);for(let h=0,f=l.length;h<f;h++){const m=new c(l[h]+"."+fc[r.path],t.array,d,u);s.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(m),o.push(m)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=RM(t.constructor),s=new Float32Array(t.length);for(let r=0,o=t.length;r<o;r++)s[r]=t[r]*i;t=s}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const s=this instanceof Ul?VEe:w5;return new s(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function ZEe(n,e,t){const i=e.attributes,s=new Nn;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(s.set(new G(l[0],l[1],l[2]),new G(c[0],c[1],c[2])),a.normalized){const u=RM(Df[a.componentType]);s.min.multiplyScalar(u),s.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=e.targets;if(r!==void 0){const a=new G,l=new G;for(let c=0,u=r.length;c<u;c++){const d=r[c];if(d.POSITION!==void 0){const h=t.json.accessors[d.POSITION],f=h.min,m=h.max;if(f!==void 0&&m!==void 0){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(m[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(m[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(m[2]))),h.normalized){const p=RM(Df[h.componentType]);l.multiplyScalar(p)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(a)}n.boundingBox=s;const o=new bi;s.getCenter(o.center),o.radius=s.min.distanceTo(s.max)/2,n.boundingSphere=o}function zL(n,e,t){const i=e.attributes,s=[];function r(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=IM[o]||o.toLowerCase();a in n.attributes||s.push(r(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});s.push(o)}return Cn.workingColorSpace!==qn&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Cn.workingColorSpace}" not supported.`),Ac(n,e),ZEe(n,e,t),Promise.all(s).then(function(){return e.targets!==void 0?WEe(n,e.targets,t):n})}const pS=new WeakMap;class iA extends ks{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,s){const r=new pr(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,o=>{this.parse(o,t,s)},i,s)}parse(e,t,i=()=>{}){this.decodeDracoFile(e,t,null,null,Ei,i).catch(i)}decodeDracoFile(e,t,i,s,r=qn,o=()=>{}){const a={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!i,vertexColorSpace:r};return this.decodeGeometry(e,a).then(t).catch(o)}decodeGeometry(e,t){const i=JSON.stringify(t);if(pS.has(e)){const l=pS.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const r=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(r,o).then(l=>(s=l,new Promise((c,u)=>{s._callbacks[r]={resolve:c,reject:u},s.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{s&&r&&this._releaseTask(s,r)}),pS.set(e,{key:i,promise:a}),a}_createGeometry(e){const t=new jt;e.index&&t.setIndex(new dn(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const s=e.attributes[i],r=s.name,o=s.array,a=s.itemSize,l=new dn(o,a);r==="color"&&(this._assignVertexColorSpace(l,s.vertexColorSpace),l.normalized=!(o instanceof Float32Array)),t.setAttribute(r,l)}return t}_assignVertexColorSpace(e,t){if(t!==Ei)return;const i=new gt;for(let s=0,r=e.count;s<r;s++)i.fromBufferAttribute(e,s).convertSRGBToLinear(),e.setXYZ(s,i.r,i.g,i.b)}_loadLibrary(e,t){const i=new pr(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((s,r)=>{i.load(e,s,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const s=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const r=JEe.toString(),o=["/* draco decoder */",s,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(r){const o=r.data;switch(o.type){case"decode":s._callbacks[o.id].resolve(o);break;case"error":s._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,r){return s._taskLoad>r._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function JEe(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(u){n.onModuleLoaded=function(d){u({draco:d})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(u=>{const d=u.draco,h=new d.Decoder;try{const f=t(d,h,new Int8Array(l),c),m=f.attributes.map(p=>p.array.buffer);f.index&&m.push(f.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:f},m)}catch(f){console.error(f),self.postMessage({type:"error",id:a.id,error:f.message})}finally{d.destroy(h)}});break}};function t(o,a,l,c){const u=c.attributeIDs,d=c.attributeTypes;let h,f;const m=a.GetEncodedGeometryType(l);if(m===o.TRIANGULAR_MESH)h=new o.Mesh,f=a.DecodeArrayToMesh(l,l.byteLength,h);else if(m===o.POINT_CLOUD)h=new o.PointCloud,f=a.DecodeArrayToPointCloud(l,l.byteLength,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());const p={index:null,attributes:[]};for(const y in u){const v=self[d[y]];let _,b;if(c.useUniqueIDs)b=u[y],_=a.GetAttributeByUniqueId(h,b);else{if(b=a.GetAttributeId(h,o[u[y]]),b===-1)continue;_=a.GetAttribute(h,b)}const w=s(o,a,h,y,v,_);y==="color"&&(w.vertexColorSpace=c.vertexColorSpace),p.attributes.push(w)}return m===o.TRIANGULAR_MESH&&(p.index=i(o,a,h)),o.destroy(h),p}function i(o,a,l){const u=l.num_faces()*3,d=u*4,h=o._malloc(d);a.GetTrianglesUInt32Array(l,d,h);const f=new Uint32Array(o.HEAPF32.buffer,h,u).slice();return o._free(h),{array:f,itemSize:1}}function s(o,a,l,c,u,d){const h=d.num_components(),m=l.num_points()*h,p=m*u.BYTES_PER_ELEMENT,y=r(o,u),v=o._malloc(p);a.GetAttributeDataArrayForAllPoints(l,d,y,p,v);const _=new u(o.HEAPF32.buffer,v,m).slice();return o._free(v),{name:c,array:_,itemSize:h}}function r(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}class PM{static boxCollision(e){let t=[];for(const i of Ne.scene.mapModels.values())for(const s of i.allElementData.values())s.id!=e.id&&this.intersectAABB(e.boundingBox,s.boundingBox)&&t.push(s);return t}static elementCollision(e){console.time("");let t=[];for(const i of Ne.scene.mapModels.values())for(const s of i.allElementData.values())s.uuid=="80c6b7e4-2dd7-4a4e-ae16-489c86c3eac2-000b3cb3"&&console.log("test"),s.id!=e.id&&(e.boundingBox.containsBox(s.boundingBox)||e.boundingBox.intersectsBox(s.boundingBox))&&e.elementCollision(s)&&(Ne.scene.showBox3(s.boundingBox),t.push(s));return console.timeEnd(""),t}static intersectAABB(e,t){let i=Math.max(e.min.x,t.min.x),s=Math.min(e.max.x,t.max.x);return!(i>s||(i=Math.max(e.min.y,t.min.y),s=Math.min(e.max.y,t.max.y),i>s)||(i=Math.max(e.min.z,t.min.z),s=Math.min(e.max.z,t.max.z),i>s))}static crossProduct(e,t){return{x:e.y*t.z-e.z*t.y,y:e.z*t.x-e.x*t.z,z:e.x*t.y-e.y*t.x}}static vectorBetweenPoints(e,t){return{x:t.x-e.x,y:t.y-e.y,z:t.z-e.z}}static isPointInTriangle(e,t){const i=this.vectorBetweenPoints(t.p1,t.p2),s=this.vectorBetweenPoints(t.p2,t.p3),r=this.vectorBetweenPoints(t.p3,t.p1),o=this.crossProduct(i,this.vectorBetweenPoints(t.p1,e)),a=this.crossProduct(s,this.vectorBetweenPoints(t.p2,e)),l=this.crossProduct(r,this.vectorBetweenPoints(t.p3,e));return o.x>=0&&a.x>=0&&l.x>=0||o.x<=0&&a.x<=0&&l.x<=0}static areTrianglesIntersecting(e,t){if(this.isPointInTriangle(e.p1,t)||this.isPointInTriangle(e.p2,t)||this.isPointInTriangle(e.p3,t)||this.isPointInTriangle(t.p1,e)||this.isPointInTriangle(t.p2,e)||this.isPointInTriangle(t.p3,e))return!0;const i=[[e.p1,e.p2],[e.p2,e.p3],[e.p3,e.p1]],s=[[t.p1,t.p2],[t.p2,t.p3],[t.p3,t.p1]];for(const r of i)for(const o of s){const a=this.vectorBetweenPoints(r[0],r[1]),l=this.vectorBetweenPoints(o[0],o[1]),c=this.crossProduct(a,l);if(Math.abs(c.x)<1e-6&&Math.abs(c.y)<1e-6&&Math.abs(c.z)<1e-6)continue;const u=this.vectorBetweenPoints(o[0],e.p1),d=this.crossProduct(u,l),h=this.crossProduct(a,l),f=d.x/h.x,m=d.y/h.y;if(f>=0&&f<=1&&m>=0&&m<=1)return!0}return!1}}window.CollisionUtils=PM;class Gb{constructor(e,t){J(this,"_matrix");J(this,"batchID");J(this,"indexs");J(this,"mesh");J(this,"_tempPoint");J(this,"_show",!0);J(this,"_color",null);J(this,"_boundingBox");this.mesh=e,this.batchID=t,this.indexs=[],this._matrix=new yt,this._tempPoint=new G,this._matrix.identity()}set matrix(e){this._matrix.copy(e),this.setOrignPositions();let t=this.mesh.geometry.attributes.position,i=this.mesh.geometry.attributes.orignPositions;for(let s=0;s<this.indexs.length;s++){const r=this.indexs[s];this._tempPoint.set(i.getX(r),i.getY(r),i.getZ(r)),this._tempPoint.applyMatrix4(e),t.setX(r,this._tempPoint.x),t.setY(r,this._tempPoint.y),t.setZ(r,this._tempPoint.z)}t.needsUpdate=!0,this._boundingBox=null}get matrix(){return this._matrix}computeBoundingSphere(){this.mesh.geometry.computeBoundingSphere(),this._boundingBox=null}setOrignPositions(){let e=this.mesh.geometry.attributes.position;this.mesh.geometry.attributes.orignPositions==null&&this.mesh.geometry.setAttribute("orignPositions",e.clone())}set show(e){if(this._show==e)return;this._show=e;let t=this.mesh.geometry.attributes.position,i=this.mesh.geometry.attributes.orignPositions;if(this.setOrignPositions(),e)for(let s=0;s<this.indexs.length;s++){const r=this.indexs[s];this._tempPoint.set(i.getX(r),i.getY(r),i.getZ(r)),this._tempPoint.applyMatrix4(this._matrix),t.setX(r,this._tempPoint.x),t.setY(r,this._tempPoint.y),t.setZ(r,this._tempPoint.z)}else for(let s=0;s<this.indexs.length;s++){const r=this.indexs[s];t.setX(r,0),t.setY(r,0),t.setZ(r,0)}t.needsUpdate=!0}get show(){return this._show}set color(e){const t=this.mesh.geometry.attributes.color;if(e&&e.length>=7){const i=e.substring(0,7),s=e.length===9?parseInt(e.substring(7),16)/255:1,r=parseInt(i.slice(1,3),16)/255,o=parseInt(i.slice(3,5),16)/255,a=parseInt(i.slice(5,7),16)/255;for(let l=0;l<this.indexs.length;l++){const c=this.indexs[l];t.itemSize===4?t.setXYZW(c,r,o,a,s):t.setXYZ(c,r,o,a)}s<1&&this.mesh.material.transparent==!1&&(this.mesh.material.orign_transparent=this.mesh.material.transparent,this.mesh.material.orign_side=this.mesh.material.side,this.mesh.material.transparent=!0,this.mesh.material.side=ts,this.mesh.material.opacity=1,this.mesh.material.needsUpdate=!0),t.needsUpdate=!0}else{this.mesh.material.orign_transparent!=null&&(this.mesh.material.transparent=this.mesh.material.orign_transparent,this.mesh.material.side=this.mesh.material.orign_side,delete this.mesh.material.orign_transparent,delete this.mesh.material.orign_side,this.mesh.material.needsUpdate=!0);for(let i=0;i<this.indexs.length;i++){const s=this.indexs[i];t.itemSize==4?t.setXYZW(s,1,1,1,1):t.setXYZ(s,1,1,1)}t.needsUpdate=!0;return}}get color(){return this._color}set boundingBox(e){this._boundingBox=e}get boundingBox(){if(this._boundingBox==null){this.setOrignPositions();let e=Number.MAX_VALUE,t=Number.MAX_VALUE,i=Number.MAX_VALUE,s=-Number.MAX_VALUE,r=-Number.MAX_VALUE,o=-Number.MAX_VALUE,a=this.mesh.geometry.attributes.orignPositions;for(let h=0;h<this.indexs.length;h++){const f=this.indexs[h];this._tempPoint.set(a.getX(f),a.getY(f),a.getZ(f)),this._tempPoint.applyMatrix4(this._matrix),e=Math.min(e,this._tempPoint.x),t=Math.min(t,this._tempPoint.y),i=Math.min(i,this._tempPoint.z),s=Math.max(s,this._tempPoint.x),r=Math.max(r,this._tempPoint.y),o=Math.max(o,this._tempPoint.z)}let l=new G(e,t,i),c=new G(s,r,o);this._boundingBox=new Nn(l,c);let u=this.mesh.matrix.clone(),d=h=>{h.parent&&(u=u.premultiply(h.parent.matrix),d(h.parent))};d(this.mesh),this._boundingBox.applyMatrix4(u)}return this._boundingBox}dispose(){this._boundingBox=null,this._matrix=null,this._matrix=null,this.batchID=null,this.indexs=null,this._color=null}}class x5{constructor(){J(this,"materialCacheDataMap",new Map);J(this,"elementId")}}class QEe{constructor(){J(this,"uuid");J(this,"materialId");J(this,"material")}}class eTe{constructor(){J(this,"locationX");J(this,"locationY");J(this,"locationZ");J(this,"quaternionX");J(this,"quaternionY");J(this,"quaternionZ");J(this,"quaternionW");J(this,"scaleX");J(this,"scaleY");J(this,"scaleZ")}}class tTe{constructor(){J(this,"baseColor");J(this,"materialId");J(this,"materialName");J(this,"alpha");J(this,"roughness");J(this,"metalness");J(this,"aoMapIntensity");J(this,"normalScale");J(this,"uScale");J(this,"vScale");J(this,"rotate");J(this,"xOffset");J(this,"yOffset")}}class nTe{constructor(){J(this,"uuid");J(this,"url");J(this,"transformData");J(this,"materialDatas")}}class HL{static batchIdHighlightShader(e){e.onBeforeCompile=function(t){t.uniforms={highlightedBatchId:{value:-1},highlightColor:{value:new gt(16761095)},unVisableBatchId:{value:-1},...eh.clone(t.uniforms)},e.setHighlightedBatchId=s=>{t.uniforms.highlightedBatchId.value=s,t.uniforms.unVisableBatchId.value=s},e.setHighlightColor=s=>{t.uniforms.highlightedBatchId.value=s};let i=t.vertexShader.replace(/#include <uv_vertex>/,`
                #include <uv_vertex>
                batchid = _batchid;
                `);i=i.replace(/#include <fog_vertex>/,`
                #include <fog_vertex>
                if(abs( batchid - unVisableBatchId ) < 0.5 ) gl_Position = vec4( 0,0,0,0) ;
                `),t.vertexShader=`
                    attribute float _batchid;
                    varying float batchid;
                    uniform float unVisableBatchId;
                `+i,t.fragmentShader=`
                    varying float batchid;
                    uniform float highlightedBatchId;
                    uniform vec3 highlightColor;
                `+t.fragmentShader.replace(/vec4 diffuseColor = vec4\( diffuse, opacity \);/,`
                    vec4 diffuseColor =
                        abs( batchid - highlightedBatchId ) < 0.5 ?
                        vec4( highlightColor, 1 ) :
                        vec4( diffuse, opacity );
                    `)}}static pickShader(e){e.onBeforeCompile=function(t){let i=t.vertexShader.replace(/#include <fog_vertex>/,`
                #include <fog_vertex>
                float r = float((elementID >> 16) & 0xFF) / 255.0;
                float g = float((elementID >> 8) & 0xFF) / 255.0;
                float b = float((elementID >> 0) & 0xFF) / 255.0;
                vpickColor=vec3(r,g,b);
                `);t.vertexShader=`
                attribute int elementID;
                varying  vec3 vpickColor;
                `+i,t.fragmentShader=`
                 varying vec3 vpickColor;
                `+t.fragmentShader.replace(/#include <dithering_fragment>/,`
                    #include <dithering_fragment>
                    gl_FragColor =vec4(vpickColor, gl_FragCoord.z);
                    `)}}static depethShader(e){e.onBeforeCompile=function(t){t.uniforms={far:{value:Ne.scene.camera.far},...eh.clone(t.uniforms)},e.setFar=s=>{t.uniforms.far.value=s};let i=t.vertexShader.replace(/#include <fog_vertex>/,`
                #include <fog_vertex>
                //gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
                depth = gl_Position.z/far;
                `);t.vertexShader=`
                precision highp float;
                uniform float far;
                varying float depth;
                `+i,t.fragmentShader=`
                precision highp float;
                varying float depth;
                `+t.fragmentShader.replace(/#include <dithering_fragment>/,`
                    #include <dithering_fragment>
                    float hex = abs(depth) * 16777215.0; // 0xffffff
                    float r = floor(hex / 65535.0);
                    float g = floor((hex - r * 65535.0) / 255.0);
                    float b = floor(hex - r * 65535.0 - g * 255.0);
                    float a = sign(depth) >= 0.0 ? 1.0 : 0.0; 
                    gl_FragColor = vec4(r / 255.0, g / 255.0, b / 255.0, a);
                    `)}}}class Hn{static get batchColorMaterial(){return this._batchColorMaterial==null&&(this._batchColorMaterial=new go,this._batchColorMaterial.name="batchColorMaterial",this._batchColorMaterial.vertexColors=!0),this._batchColorMaterial}static get pickMaterial(){return this._pickMaterial==null&&(this._pickMaterial=new $n,HL.pickShader(this._pickMaterial)),this._pickMaterial}static get depthMaterial(){return this._depthMaterial==null&&(this._depthMaterial=new $n,HL.depethShader(this._depthMaterial)),this._depthMaterial}static get depthMaterial2(){return this._depthMaterial2==null&&(this._depthMaterial2=new e0({depthPacking:iw})),this._depthMaterial2}static get zeroMatrix4(){return this._zeroMatrix4==null&&(this._zeroMatrix4=new yt,this._zeroMatrix4.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),this._zeroMatrix4}static get selColor(){return this._selColor==null&&(this._selColor="#FFC0CB"),this._selColor}}J(Hn,"_batchColorMaterial"),J(Hn,"_pickMaterial"),J(Hn,"_depthMaterial"),J(Hn,"_depthMaterial2"),J(Hn,"_zeroMatrix4"),J(Hn,"_selColor");class Oc{constructor(e,t){J(this,"_index");J(this,"_orignMatrix4");J(this,"_show",!0);J(this,"_color");J(this,"_matrix");J(this,"mesh");J(this,"_boundingBox");this.mesh=e,this._index=t,this._orignMatrix4=new yt,this._matrix=new yt,this._matrix.identity(),this.mesh.getMatrixAt(t,this._orignMatrix4)}set matrix(e){this._matrix.copy(e);let t=this._orignMatrix4.clone();t.premultiply(e),this.mesh.setMatrixAt(this._index,t),this.mesh.instanceMatrix.needsUpdate=!0,this._boundingBox=null}get matrix(){return this._matrix}computeBoundingSphere(){this.mesh.computeBoundingSphere(),this._boundingBox=null}set show(e){if(this._show!=e){if(this._show=e,e){let t=this._orignMatrix4.clone();t.premultiply(this._matrix),this.mesh.setMatrixAt(this._index,t)}else this.mesh.setMatrixAt(this._index,Hn.zeroMatrix4);this.mesh.instanceMatrix.needsUpdate=!0}}get show(){return this._show}set color(e){const t=this.mesh.geometry.attributes.color;if(t){if(e&&e.length>=7){const i=e.substring(0,7),s=e.length===9?parseInt(e.substring(7),16)/255:1,r=parseInt(i.slice(1,3),16)/255,o=parseInt(i.slice(3,5),16)/255,a=parseInt(i.slice(5,7),16)/255;t.itemSize===4?t.setXYZW(this._index,r,o,a,s):t.setXYZ(this._index,r,o,a),s<1&&this.mesh.material.transparent==!1&&(this.mesh.material.orign_transparent=this.mesh.material.transparent,this.mesh.material.orign_side=this.mesh.material.side,this.mesh.material.transparent=!0,this.mesh.material.side=ts,this.mesh.material.opacity=1,this.mesh.material.needsUpdate=!0)}else this.mesh.material.orign_transparent!=null&&(this.mesh.material.transparent=this.mesh.material.orign_transparent,this.mesh.material.side=this.mesh.material.orign_side,delete this.mesh.material.orign_transparent,delete this.mesh.material.orign_side,this.mesh.material.needsUpdate=!0),t.itemSize===4?t.setXYZW(this._index,1,1,1,1):t.setXYZ(this._index,1,1,1);t.needsUpdate=!0}}get color(){return this._color}set colorOpacity(e){let t=i=>{i.transparent=e<1,i.opacity=e,i.needsUpdate=!0};this.mesh&&this.mesh.material&&(Array.isArray(this.mesh.material)?this.mesh.material.forEach(i=>{t(i)}):t(this.mesh.material))}get colorOpacity(){return this.mesh&&this.mesh.material?Array.isArray(this.mesh.material)?this.mesh.material[0].opacity:this.mesh.material.opacity:1}set boundingBox(e){this._boundingBox=e}get boundingBox(){if(this._boundingBox==null){this.mesh.geometry.boundingBox==null&&this.mesh.geometry.computeBoundingBox(),this._boundingBox=this.mesh.geometry.boundingBox.clone();let e=this._orignMatrix4.clone();e.premultiply(this._matrix);let t=e.multiply(this.mesh.matrix),i=s=>{s.parent&&(t=t.premultiply(s.parent.matrix),i(s.parent))};i(this.mesh),this._boundingBox.applyMatrix4(t)}return this._boundingBox}get orignMatrix4(){return this._orignMatrix4}dispose(){this._boundingBox=null,this._matrix=null,this._color=null,this._orignMatrix4=null}}const s1=class s1{constructor(e){J(this,"id");J(this,"name");J(this,"useData");J(this,"uuid");J(this,"_meshDatas");J(this,"_show");J(this,"_color",null);J(this,"_boundingBox");J(this,"_matrix");J(this,"_position");J(this,"_euler");J(this,"_quaternion");J(this,"_scale");J(this,"_center");J(this,"_tempMatrix4");J(this,"_tempVector3");J(this,"_model");J(this,"_url");J(this,"_triangles");this.show=!0,this._meshDatas=[],this.id=s1.id++,this._matrix=new yt,this._tempMatrix4=new yt,this._tempVector3=new G,this._position=new G(0,0,0),this._euler=new Js(0,0,0),this._quaternion=new Mn(0,0,0,1),this._scale=new G(1,1,1),this._matrix.identity(),this._model=e}get url(){return this._url}set url(e){this._url=e}get model(){return this._model}set matrix(e){if(this._matrix.copy(e),this._meshDatas)for(const t of this._meshDatas)t.matrix=e}get matrix(){return this._matrix}get position(){return this._position}multiplyPosition(e){this._position.add(e),this._tempMatrix4.identity(),this._tempMatrix4.makeTranslation(e.x,e.y,e.z),this.matrix.premultiply(this._tempMatrix4),this.center.x+=e.x,this.center.y+=e.y,this.center.z+=e.z,this.updateMatrix(),this.addCacheData()}get euler(){return this._euler}get quaternion(){return this._quaternion}multiplyQuaternion(e){this._quaternion.premultiply(e);let t=this.center;this._euler.setFromQuaternion(this._quaternion),this._tempMatrix4.identity(),this._tempMatrix4.makeTranslation(-t.x,-t.y,-t.z),this.matrix.premultiply(this._tempMatrix4),this._tempMatrix4.identity(),this._tempMatrix4.makeRotationFromQuaternion(e),this.matrix.premultiply(this._tempMatrix4),this._tempMatrix4.identity(),this._tempMatrix4.makeTranslation(t.x,t.y,t.z),this.matrix.premultiply(this._tempMatrix4),this.updateMatrix(),Ne.scene.showPoint(this.center.x,this.center.y,this.center.z),this.addCacheData()}get scale(){return this._scale}multiplyScale(e){this._scale.multiply(e);let t=this.center;this._tempMatrix4.identity(),this._tempMatrix4.makeTranslation(-t.x,-t.y,-t.z),this.matrix.premultiply(this._tempMatrix4),this._tempMatrix4.identity(),this._tempMatrix4.makeScale(e.x,e.y,e.z),this.matrix.premultiply(this._tempMatrix4),this._tempMatrix4.identity(),this._tempMatrix4.makeTranslation(t.x,t.y,t.z),this.matrix.premultiply(this._tempMatrix4),this.updateMatrix(),this.addCacheData()}updateMatrix(){for(const e of this._meshDatas)e.matrix=this._matrix;if(this._boundingBox==null&&(this._boundingBox=new Nn),this._meshDatas){this._boundingBox.makeEmpty();for(const e of this._meshDatas)this._boundingBox.union(e.boundingBox)}}addCacheData(){this._model.elememtCachelDataMap.has(this.id)||this._model.elememtCachelDataMap.set(this.id,new x5)}set show(e){if(this._show!=e&&(this._show=e,this._meshDatas))for(const t of this._meshDatas)t.show=e}get show(){return this._show}set color(e){if(this._meshDatas)for(const t of this._meshDatas)t.color=e}get color(){return this._color}addMeshData(e){this._meshDatas.push(e)}replaceMeshData(e,t){let i=this._meshDatas.indexOf(e);i!==-1&&(this._meshDatas[i]=t),this._boundingBox=null}set boundingBox(e){this._boundingBox=e}get boundingBox(){if(this._boundingBox==null&&this._meshDatas){this._boundingBox=new Nn;for(const e of this._meshDatas)this._boundingBox.union(e.boundingBox)}return this._boundingBox}computeBoundingSphere(){if(this._meshDatas)for(const e of this._meshDatas)e.computeBoundingSphere()}get center(){return this._center==null&&(this._center=new G,this.boundingBox.getCenter(this._center)),this._center}get meshDatas(){return this._meshDatas}elementCollision(e){if(!PM.intersectAABB(e.boundingBox,this.boundingBox))return!1;let t=this.triangles,i=e.triangles;for(let s=0;s<t.length;s++){const r=t[s];for(let o=0;o<i.length;o++){const a=i[o];if(PM.areTrianglesIntersecting(r,a))return!0}}return!1}get triangles(){if(this._triangles)return this._triangles;let e=[],t=new G;for(const i of this._meshDatas){if(i instanceof Gb){let s=i.mesh.geometry.attributes.position;for(let r=0;r<i.indexs.length/3;r++){const o={p1:{x:0,y:0,z:0},p2:{x:1,y:0,z:0},p3:{x:0,y:1,z:0}};let a=i.indexs[3*r];o.p1.x=s.getX(a),o.p1.y=s.getY(a),o.p1.z=s.getZ(a);let l=i.indexs[3*r+1];o.p2.x=s.getX(l),o.p2.y=s.getY(l),o.p2.z=s.getZ(l);let c=i.indexs[3*r+2];o.p3.x=s.getX(c),o.p3.y=s.getY(c),o.p3.z=s.getZ(c),e.push(o)}}if(i instanceof Oc){let s=i.mesh.geometry.attributes.position,r=i.mesh.geometry.index;for(let o=0;o<r.count/3;o++){const a={p1:{x:0,y:0,z:0},p2:{x:1,y:0,z:0},p3:{x:0,y:1,z:0}};let l=r.getX(3*o);t.set(s.getX(l),s.getY(l),s.getZ(l)),t.applyMatrix4(i.orignMatrix4),a.p1.x=t.x,a.p1.y=t.y,a.p1.z=t.z;let c=r.getX(3*o+1);t.set(s.getX(c),s.getY(c),s.getZ(c)),t.applyMatrix4(i.orignMatrix4),a.p2.x=t.x,a.p2.y=t.y,a.p2.z=t.z;let u=r.getX(3*o+2);t.set(s.getX(u),s.getY(u),s.getZ(u)),t.applyMatrix4(i.orignMatrix4),a.p3.x=t.x,a.p3.y=t.y,a.p3.z=t.z,e.push(a)}}}return this._triangles=e,this._triangles}dispose(){this._meshDatas=[],this._matrix=null,this._tempMatrix4=null,this._position=null,this._euler=null,this._quaternion=null,this._scale=null,this._boundingBox=null,this._color=null,this._triangles=null;for(const e of this._meshDatas)e.dispose();this._meshDatas=null}showWireframe(){if(this._meshDatas)for(const e of this._meshDatas){let t=new H2(e.mesh.geometry,80);t.applyMatrix4(this.matrix);let i=new Vi({color:0,polygonOffset:!0,polygonOffsetFactor:2,polygonOffsetUnits:2}),s=new gr(t,i);Ne.scene.scene.add(s)}}};J(s1,"id",1);let Qo=s1;class bo{}J(bo,"ModelData",V([])),J(bo,"SpaceTreeCheckIDs",V([])),J(bo,"SpaceTreeExpandedIDs",V([])),J(bo,"modelTree"),J(bo,"treeHeight");class S5{constructor(){J(this,"alpha");J(this,"aoMap");J(this,"aoMapIntensity");J(this,"baseColor");J(this,"baseMap");J(this,"displacementMap");J(this,"displacementScale");J(this,"materialId");J(this,"metalness");J(this,"metalnessMap");J(this,"name");J(this,"normalMap");J(this,"normalScale");J(this,"path");J(this,"previewUrl");J(this,"roughness");J(this,"roughnessMap")}}const ps=class ps{static getPBRDataByMaterialId(e){return new Promise(function(i,s){ps._pbrDataMap==null?fetch("./pbr/pbr.json").then(r=>r.json()).then(r=>{if(ps._pbrDataMap=new Map,r&&r.length>0)for(const o of r)o.materialId&&ps._pbrDataMap.set(o.materialId,o),o.previewUrl=o.path+o.previewUrl;i(ps._pbrDataMap.get(e))}):i(ps._pbrDataMap.get(e))})}static getHDRDataById(e){return new Promise(function(i,s){ps._hdrDataMap==null?fetch("./hdr/hdr.json").then(r=>r.json()).then(r=>{if(ps._hdrDataMap=new Map,r&&r.length>0&&r&&r.length>0)for(const o of r)o.id&&ps._hdrDataMap.set(o.id,o);i(ps._hdrDataMap.get(e))}):i(ps._hdrDataMap.get(e))})}static changePBRMaterial(e,t,i){console.log("uv");let s=i.path;this.changePBRMaterialBaseValue(e,t,i);let r=e.material;r.map=this.changeTexture(s,i.baseMap),r.roughnessMap=this.changeTexture(s,i.roughnessMap),r.metalnessMap=this.changeTexture(s,i.metalnessMap);let o=this.changeTexture(s,i.aoMap);if(o){if(r.aoMap=o,!e.geometry.attributes.uv){let a=e.geometry.attributes.position.count,l=new dn(new Float32Array(2*a),2);for(let c=0;c<a;c++)l.setXY(c,1,1);e.geometry.computeTangents(),e.geometry.setAttribute("uv",l)}e.geometry.setAttribute("uv2",e.geometry.attributes.uv)}r.normalMap=this.changeTexture(s,i.normalMap),r.normalMap,r.color.set(i.baseColor),r.needsUpdate=!0,Ne.scene.enableRender()}static changeMaterialMap(e,t,i){let s=e.material,r=this.changeTexture("",i);switch(t){case 0:s.map=r;break;case 1:s.roughnessMap=r;break;case 2:s.metalnessMap=r;break;case 3:s.aoMap=r;break;case 4:s.normalMap=r;break;case 5:s.displacementMap=r;break}s.needsUpdate=!0}static changePBRMaterialBaseValue(e,t,i){let s=e.material,r=i.alpha;r==1?(s.transparent=!1,s.side=Fo):(s.transparent=!0,s.side=ts),s.opacity=r,s.metalness=i.metalness,s.roughness=i.roughness,s.aoMapIntensity=i.aoMapIntensity,s.normalScale.set(i.normalScale,-i.normalScale),s.color.set(i.baseColor),this.saveMaterialData(e,t,i),Ne.scene.enableRender()}static saveMaterialData(e,t,i){for(const s of Ne.scene.mapModels.values())if(s.allElementData.has(t)){let r=s.allElementData.get(t),o;s.elememtCachelDataMap.has(r.id)?o=s.elememtCachelDataMap.get(r.id):(o=new x5,s.elememtCachelDataMap.set(r.id,o)),o.elementId=r.id;let a,l=r.id+e.material.name;o.materialCacheDataMap.has(l)?a=o.materialCacheDataMap.get(l):(a=new QEe,o.materialCacheDataMap.set(l,a)),a.material=e.material,a.uuid=r.uuid,i&&(a.materialId=i.materialId)}}static clonePBR(e){let t=new S5;for(const i in e)t[i]=e[i];return t}static changeScale(e,t,i,s){i&&(this.changeMeshScale(i.map,t,e),this.changeMeshScale(i.roughnessMap,t,e),this.changeMeshScale(i.metalnessMap,t,e),this.changeMeshScale(i.aoMap,t,e),this.changeMeshScale(i.normalMap,t,e),this.changeMeshScale(i.displacementMap,t,e),s&&(this.changeMeshScale(i.map,t,!e),this.changeMeshScale(i.roughnessMap,t,!e),this.changeMeshScale(i.metalnessMap,t,!e),this.changeMeshScale(i.aoMap,t,!e),this.changeMeshScale(i.normalMap,t,!e),this.changeMeshScale(i.displacementMap,t,!e)),Ne.scene.enableRender())}static changeRotate(e,t){t&&(this.changeMeshRotate(t.map,e),this.changeMeshRotate(t.roughnessMap,e),this.changeMeshRotate(t.metalnessMap,e),this.changeMeshRotate(t.aoMap,e),this.changeMeshRotate(t.normalMap,e),this.changeMeshRotate(t.displacementMap,e),Ne.scene.enableRender())}static changeBaseColor(e,t){t&&(e?t.color.set(e):t.color.set(16777215),Ne.scene.enableRender())}static changeOffset(e,t,i,s){i&&(this.changeMeshOffset(i.map,t,e),this.changeMeshOffset(i.roughnessMap,t,e),this.changeMeshOffset(i.metalnessMap,t,e),this.changeMeshOffset(i.aoMap,t,e),this.changeMeshOffset(i.normalMap,t,e),this.changeMeshOffset(i.displacementMap,t,e),s&&(this.changeMeshOffset(i.map,t,!e),this.changeMeshOffset(i.roughnessMap,t,!e),this.changeMeshOffset(i.metalnessMap,t,!e),this.changeMeshOffset(i.aoMap,t,!e),this.changeMeshOffset(i.normalMap,t,!e),this.changeMeshOffset(i.displacementMap,t,!e)),Ne.scene.enableRender())}static changeMaterialSize(e,t,i,s,r,o){e&&(this.changeTextureSize(e.map,t,i,s,r,o),this.changeTextureSize(e.roughnessMap,t,i,s,r,o),this.changeTextureSize(e.metalnessMap,t,i,s,r,o),this.changeTextureSize(e.aoMap,t,i,s,r,o),this.changeTextureSize(e.normalMap,t,i,s,r,o),this.changeTextureSize(e.displacementMap,t,i,s,r,o),Ne.scene.enableRender())}static changeTextureSize(e,t,i,s,r,o){e&&(e.repeat.x=t,e.repeat.y=i,e.rotation=s,e.offset.x=r,e.offset.y=o,Ne.scene.enableRender())}};J(ps,"_pbrDataMap"),J(ps,"_hdrDataMap"),J(ps,"changeTexture",(e,t)=>{if(t!=""){let i=new Iw().load(e+t,function(){Ne.scene.enableRender()});return i.wrapS=Qr,i.wrapT=Qr,i.flipY=!1,i}return null}),J(ps,"changeMeshScale",(e,t,i)=>{e&&(i?e.repeat.x=t:e.repeat.y=t)}),J(ps,"changeMeshRotate",(e,t)=>{e&&(e.rotation=t*Math.PI/180)}),J(ps,"changeMeshOffset",(e,t,i)=>{e&&(i?e.offset.x=t:e.offset.y=t)});let xa=ps;class mv{}J(mv,"showLoading",V(!1));const Sf=class Sf{static insertExternalModel(e,t){return new Promise((s,r)=>{if(this.mapFamilyModel==null&&(this.mapFamilyModel=new Map),this.modelData==null&&(this.modelData=new gv,this.modelData.name="",this.modelData.rootObject=new rn,Ne.scene.obj.add(this.modelData.rootObject),Ne.scene.mapModels.set("",this.modelData)),this.mapFamilyModel.has(e)){let l=this.mapFamilyModel.get(e),c=l[0],u=new Qo(this.modelData);for(let d=0;d<c.meshDatas.length;d++){let f=c.meshDatas[d].mesh;f.geometry.deleteAttribute("elementID"),this.modelData.rootObject.remove(f);let m=new Pa(f.geometry,f.material,f.count+1);m.orignMaterial=f.material,m.pickMaterial=Hn.pickMaterial;let p=new cr(new Int32Array(f.count+1),1);for(let v=0;v<f.count+1;v++)m.setMatrixAt(v,new yt);let y=new Oc(m,f.count);u.addMeshData(y);for(let v=0;v<l.length;v++){const _=l[v];for(const b of _.meshDatas)if(b.mesh==f){let w=new Oc(m,v);_.replaceMeshData(b,w)}p.setX(v,_.id)}p.setX(f.count,u.id),m.geometry.setAttribute("elementID",p),f.dispose(),this.modelData.rootObject.add(m)}for(let d=0;d<l.length;d++){const h=l[d];h.updateMatrix(),h.computeBoundingSphere()}l.push(u),this.modelData.allElementData.set(u.id,u),u.boundingBox,u.center,u.url=e,u.multiplyPosition(t),u.computeBoundingSphere(),this.modelData.computeBoundingbox(),s(u);return}let o=new nA,a=new iA;a.setDecoderPath("./lib/draco/"),o.setDRACOLoader(a),mv.showLoading.value=!0,o.load(e,l=>{console.log(e),new Nn().setFromObject(l.scene),mv.showLoading.value=!1;let c=Sf.batchAndInstance(l);this.mapFamilyModel.set(e,[c]),c.multiplyPosition(t),c.computeBoundingSphere(),c.url=e,this.modelData.computeBoundingbox(),c.showWireframe(),a.dispose(),s(c)},void 0,l=>{window.alert(l),a.dispose()})})}static batchAndInstance(e){let t=new Qo(this.modelData),i=e.scene,s=new Map,r=new Map;i.traverse(function(o){if(o instanceof ut&&o.geometry.getAttribute("position")!=null){let a=o,l=!1,c=m=>{if(!l&&m&&m.parent)if(m.parent.name=="root"){a=m,l=!0;return}else c(m.parent)};c(a);let u=o.geometry,d=o.geometry.getAttribute("position").count,h=[],f=a.id;r.has(a.id)?f=r.get(a.id):(new Nn().expandByObject(a),r.set(a.id,t.id),f=t.id);for(let m=0;m<d;m++)h.push(1),h.push(1),h.push(1);if(u.setAttribute("color",new kt(h,3)),u.elementID=f,o.elementID=f,s.has(o.material.name)){let m=s.get(o.material.name);m.push(o),s.set(o.material.name,m)}else{let m=[];m.push(o),s.set(o.material.name,m)}}});for(let o of s.values()){let a=new Map;for(const u of o)if(a.has(u.geometry.uuid)){let d=a.get(u.geometry.uuid);d.push(u),a.set(u.geometry.uuid,d)}else{let d=[];d.push(u),a.set(u.geometry.uuid,d)}let l=[],c;for(const u of a.values()){let d=u.length;if(d>1){let h=u[0].geometry,f=new Pa(h,u[0].material,d);f.orignMaterial=u[0].material,f.pickMaterial=Hn.pickMaterial;let m=new cr(new Int32Array(d),1);for(let p=0;p<u.length;p++){const y=u[p];let v=y.matrix,_=x=>{x.parent&&(v=v.premultiply(x.parent.matrix),_(x.parent))},b=y.elementID;_(y),v.premultiply(this.zAixMatrix4),f.setMatrixAt(p,v);let w=new Oc(f,p);t.addMeshData(w),m.setX(p,b)}h.setAttribute("elementID",m)}else for(let h=0;h<u.length;h++){let f=u[0],m=f.matrix,p=v=>{v.parent&&(m=m.premultiply(v.parent.matrix),p(v.parent))};p(f),m.premultiply(this.zAixMatrix4);let y=f.geometry.applyMatrix4(m);l.push(y),c=f.material}}if(l.length>0){c.vertexColors=!0;const u=new jt,d=new ut(u,c);d.orignMaterial=c,d.pickMaterial=Hn.pickMaterial;const h=l[0].index!==null,f=new Set(Object.keys(l[0].attributes)),m={};let p=0;const y=[];let v=new cr(new Int32Array(1),1);for(let w=0;w<l.length;++w){const x=l[w];if(x.elementID,h!==(x.index!==null))continue;const S=l[w].index;for(let C=0;C<S.count;++C){let T=S.getX(C)+p;y.push(T)}x.attributes.position.count,p+=l[w].attributes.position.count;for(const C in x.attributes)f.has(C)&&(m[C]===void 0&&(m[C]=[]),m[C].push(x.attributes[C]));x.dispose()}h&&u.setIndex(y);for(const w in m){const x=v5(m[w]);x&&u.setAttribute(w,x)}v.setX(0,t.id),u.setAttribute("elementID",v);let _=new Pa(d.geometry,d.material,1);_.orignMaterial=d.material,_.pickMaterial=Hn.pickMaterial,_.setMatrixAt(0,d.matrix.clone());let b=new Oc(_,0);t.addMeshData(b)}}this.modelData.allElementData.set(t.id,t);for(const o of t.meshDatas)this.modelData.rootObject.add(o.mesh);return t.boundingBox,t.center,this.modelData.computeBoundingbox(),t}static deleteExternalModel(e){if(e.url&&this.mapFamilyModel.has(e.url)){let t=this.mapFamilyModel.get(e.url),i=t.indexOf(e);if(i!==-1){if(t.splice(i,1),this.modelData.allElementData.delete(e.id),t.length==0){for(let s=0;s<e.meshDatas.length;s++){let r=e.meshDatas[s];this.modelData.rootObject.remove(r.mesh),r.mesh.geometry.dispose(),r.mesh.clear()}e.dispose(),this.mapFamilyModel.delete(e.url),e=null;return}for(let s=0;s<e.meshDatas.length;s++){let o=e.meshDatas[s].mesh;o.geometry.deleteAttribute("elementID"),this.modelData.rootObject.remove(o);let a=new Pa(o.geometry,o.material,o.count-1);a.orignMaterial=o.material,a.pickMaterial=Hn.pickMaterial;let l=new cr(new Int32Array(o.count-1),1);for(let c=0;c<a.count;c++)a.setMatrixAt(c,new yt);for(let c=0;c<t.length;c++){const u=t[c];for(const d of u.meshDatas)if(d.mesh==o){let h=new Oc(a,c);u.replaceMeshData(d,h)}l.setX(c,u.id)}a.geometry.setAttribute("elementID",l),o.dispose(),this.modelData.rootObject.add(a)}for(let s=0;s<t.length;s++){const r=t[s];r.updateMatrix(),r.computeBoundingSphere()}}}}};J(Sf,"modelData"),J(Sf,"mapFamilyModel"),J(Sf,"zAixMatrix4",new yt(1,0,0,0,0,0,-1,0,0,1,0,0,0,0,0,1));let Wb=Sf;class VL{static LoaderSaveData(e){fetch(e).then(t=>t.json()).then(async t=>{if(t.elementData)for(const i of Ne.scene.mapModels.values())await i.openElememtSaveDatas(t.elementData);for(const i of t.elementData)await this.openExternalModel(i);t.environmentData&&Ne.scene.openEmviorment(t.environmentData),URL.revokeObjectURL(e)})}static async openElementMaterial(e,t){if(e&&t)for(const i of e)xa.getPBRDataByMaterialId(i.materialId).then(s=>{for(const r of t.meshDatas){let o=r.mesh.material;if(o.name==i.materialName)if(s){let a=xa.clonePBR(s);a.name=o.name,a.alpha=i.alpha,a.roughness=i.roughness,a.baseColor=i.baseColor,a.metalness=i.metalness,a.aoMapIntensity=i.aoMapIntensity,a.normalScale=i.normalScale,xa.changePBRMaterial(r.mesh,t.id,a),xa.changeMaterialSize(o,i.uScale,i.vScale,i.rotate,i.xOffset,i.yOffset)}else{let a=new S5;a.name=o.name,a.baseColor=i.baseColor,a.alpha=i.alpha,a.roughness=i.roughness,a.metalness=i.metalness,a.aoMapIntensity=i.aoMapIntensity,a.normalScale=i.normalScale,xa.changePBRMaterialBaseValue(r.mesh,t.id,a),xa.changeMaterialSize(o,i.uScale,i.vScale,i.rotate,i.xOffset,i.yOffset)}}})}static openElementTransform(e,t){e&&t&&((e.locationX!=0||e.locationY!=0||e.locationZ!=0)&&t.multiplyPosition(new G(e.locationX,e.locationY,e.locationZ)),(e.quaternionX!=0||e.quaternionY!=0||e.quaternionZ!=0||e.quaternionW!=1)&&t.multiplyQuaternion(new Mn(e.quaternionX,e.quaternionY,e.quaternionZ,e.quaternionW)),(e.scaleX!=1||e.scaleY!=1||e.scaleZ!=1)&&t.multiplyScale(new G(e.scaleX,e.scaleY,e.scaleZ)))}static async openExternalModel(e){if(e&&e.url){let t=await Wb.insertExternalModel(e.url,new G);this.openElementMaterial(e.materialDatas,t),this.openElementTransform(e.transformData,t),t.computeBoundingSphere(),Ne.scene.enableRender()}}}class iTe{constructor(){J(this,"name");J(this,"elevation");J(this,"categoryDataMap")}}class sTe{constructor(){J(this,"name");J(this,"elementDataMap")}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ps(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?r(u.value):s(u.value).then(a,l)}c((i=i.apply(n,[])).next())})}class a0{constructor(){this.name="",this.minZoom=0,this.maxZoom=20,this.bounds=[],this.center=[]}fetchTile(e,t,i){return null}getMetaData(){return Ps(this,void 0,void 0,function*(){})}}class rTe extends a0{constructor(e="https://a.tile.openstreetmap.org/"){super(),this.address=e,this.format="png",this.maxZoom=19}fetchTile(e,t,i){return new Promise((s,r)=>{const o=document.createElement("img");o.onload=function(){s(o)},o.onerror=function(){r()},o.crossOrigin="Anonymous",o.src=this.address+e+"/"+t+"/"+i+"."+this.format})}}class sA{static createOffscreenCanvas(e,t){if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(e,t);{let i=document.createElement("canvas");return i.width=e,i.height=t,i}}}class C5{static createFillTexture(e="#000000",t=1,i=1){const s=sA.createOffscreenCanvas(t,i),r=s.getContext("2d");r.fillStyle=e,r.fillRect(0,0,t,i);const o=new Wn(s);return o.format=Oi,o.magFilter=Rn,o.minFilter=Rn,o.generateMipmaps=!1,o.needsUpdate=!0,o}}class Pi{}Pi.root=-1;Pi.topLeft=0;Pi.topRight=1;Pi.bottomLeft=2;Pi.bottomRight=3;class $s extends ut{constructor(e=null,t=null,i=Pi.root,s=0,r=0,o=0,a=null,l=null){super(a,l),this.mapView=null,this.parentNode=null,this.subdivided=!1,this.disposed=!1,this.nodesLoaded=0,this.childrenCache=null,this.isMesh=!0,this.mapView=t,this.parentNode=e,this.disposed=!1,this.location=i,this.level=s,this.x=r,this.y=o,this.initialize()}initialize(){return Ps(this,void 0,void 0,function*(){})}createChildNodes(){}subdivide(){const e=this.mapView.maxZoom();this.children.length>0||this.level+1>e||this.parentNode!==null&&this.parentNode.nodesLoaded<$s.childrens||(this.mapView.cacheTiles&&this.childrenCache!==null?(this.isMesh=!1,this.children=this.childrenCache,this.nodesLoaded=this.childrenCache.length):this.createChildNodes(),this.subdivided=!0)}simplify(){const e=this.mapView.minZoom();if(!(this.level-1<e)){if(this.mapView.cacheTiles)this.childrenCache=this.children;else for(let t=0;t<this.children.length;t++)this.children[t].dispose();this.subdivided=!1,this.isMesh=!0,this.children=[],this.nodesLoaded=0}}loadData(){return Ps(this,void 0,void 0,function*(){if(this.level<this.mapView.provider.minZoom||this.level>this.mapView.provider.maxZoom){console.warn("Geo-Three: Loading tile outside of provider range.",this),this.material.map=$s.defaultTexture,this.material.needsUpdate=!0;return}try{const e=yield this.mapView.provider.fetchTile(this.level,this.x,this.y);if(this.disposed)return;const t=new Wn(e);t.generateMipmaps=!1,t.format=Oi,t.magFilter=Rn,t.minFilter=Rn,t.needsUpdate=!0,this.material.map=t}catch{if(this.disposed)return;console.warn("Geo-Three: Failed to load node tile data.",this),this.material.map=$s.defaultTexture}this.material.needsUpdate=!0})}nodeReady(){if(this.disposed){console.warn("Geo-Three: nodeReady() called for disposed node.",this),this.dispose();return}if(this.parentNode!==null){if(this.parentNode.nodesLoaded++,this.parentNode.nodesLoaded===$s.childrens){this.parentNode.subdivided===!0&&(this.parentNode.isMesh=!1);for(let e=0;e<this.parentNode.children.length;e++)this.parentNode.children[e].visible=!0}this.parentNode.nodesLoaded>$s.childrens&&console.error("Geo-Three: Loaded more children objects than expected.",this.parentNode.nodesLoaded,this)}else this.visible=!0}dispose(){this.disposed=!0;const e=this;try{const t=e.material;t.dispose(),t.map&&t.map!==$s.defaultTexture&&t.map.dispose()}catch{}try{e.geometry.dispose()}catch{}}}$s.defaultTexture=C5.createFillTexture();$s.baseGeometry=null;$s.baseScale=null;$s.childrens=4;class Hl extends jt{constructor(e=1,t=1,i=1,s=1,r=!1,o=10){super();const a=[],l=[],c=[],u=[];Hl.buildPlane(e,t,i,s,a,l,c,u),r&&Hl.buildSkirt(e,t,i,s,o,a,l,c,u),this.setIndex(a),this.setAttribute("position",new kt(l,3)),this.setAttribute("normal",new kt(c,3)),this.setAttribute("uv",new kt(u,2))}static buildPlane(e=1,t=1,i=1,s=1,r,o,a,l){const c=e/2,u=t/2,d=i+1,h=s+1,f=e/i,m=t/s;for(let p=0;p<h;p++){const y=p*m-u;for(let v=0;v<d;v++){const _=v*f-c;o.push(_,0,y),a.push(0,1,0),l.push(v/i,1-p/s)}}for(let p=0;p<s;p++)for(let y=0;y<i;y++){const v=y+d*p,_=y+d*(p+1),b=y+1+d*(p+1),w=y+1+d*p;r.push(v,_,w,_,b,w)}}static buildSkirt(e=1,t=1,i=1,s=1,r,o,a,l,c){const u=e/2,d=t/2,h=i+1,f=s+1,m=e/i,p=t/s;let y=a.length/3;for(let _=0;_<h;_++){const b=_*m-u,w=-d;a.push(b,-r,w),l.push(0,1,0),c.push(_/i,1)}for(let _=0;_<i;_++){const b=_,w=_+1,x=_+y,S=_+y+1;o.push(w,x,b,w,S,x)}y=a.length/3;for(let _=0;_<h;_++){const b=_*m-u,w=s*p-d;a.push(b,-r,w),l.push(0,1,0),c.push(_/i,0)}let v=h*f-i-1;for(let _=0;_<i;_++){const b=v+_,w=v+_+1,x=_+y,S=_+y+1;o.push(b,x,w,x,S,w)}y=a.length/3;for(let _=0;_<f;_++){const b=_*p-d,w=-u;a.push(w,-r,b),l.push(0,1,0),c.push(0,1-_/s)}for(let _=0;_<s;_++){const b=_*f,w=(_+1)*f,x=_+y,S=_+y+1;o.push(b,x,w,x,S,w)}y=a.length/3;for(let _=0;_<f;_++){const b=_*p-d,w=i*m-u;a.push(w,-r,b),l.push(0,1,0),c.push(1,1-_/s)}for(let _=0;_<s;_++){const b=_*f+s,w=(_+1)*f+s,x=_+y,S=_+y+1;o.push(w,x,b,w,S,x)}}}class mS{constructor(e,t){this.latitude=e,this.longitude=t}}class fi{static datumsToSpherical(e,t){const i=t*fi.EARTH_ORIGIN/180;let s=Math.log(Math.tan((90+e)*Math.PI/360))/(Math.PI/180);return s=s*fi.EARTH_ORIGIN/180,new tt(i,s)}static sphericalToDatums(e,t){const i=e/fi.EARTH_ORIGIN*180;let s=t/fi.EARTH_ORIGIN*180;return s=180/Math.PI*(2*Math.atan(Math.exp(s*Math.PI/180))-Math.PI/2),new mS(s,i)}static quadtreeToDatums(e,t,i){const s=Math.pow(2,e),r=t/s*360-180,a=180*(Math.atan(Math.sinh(Math.PI*(1-2*i/s)))/Math.PI);return new mS(a,r)}static vectorToDatums(e){const t=180/Math.PI,i=Math.atan2(e.y,Math.sqrt(Math.pow(e.x,2)+Math.pow(-e.z,2)))*t,s=Math.atan2(-e.z,e.x)*t;return new mS(i,s)}static datumsToVector(e,t){const i=Math.PI/180,s=t*i,r=e*i;var o=Math.cos(r);return new G(-Math.cos(s+Math.PI)*o,Math.sin(r),Math.sin(s+Math.PI)*o)}static mapboxAltitude(e){return(e.r*255*65536+e.g*255*256+e.b*255)*.1-1e4}}fi.EARTH_RADIUS=6371008;fi.EARTH_RADIUS_A=6378137;fi.EARTH_RADIUS_B=6356752314245e-6;fi.EARTH_PERIMETER=2*Math.PI*fi.EARTH_RADIUS;fi.EARTH_ORIGIN=fi.EARTH_PERIMETER/2;class Bo extends $s{constructor(e=null,t=null,i=Pi.root,s=0,r=0,o=0){super(e,t,i,s,r,o,Bo.geometry,new $n({wireframe:!1})),this.matrixAutoUpdate=!1,this.isMesh=!0,this.visible=!1}initialize(){const e=Object.create(null,{initialize:{get:()=>super.initialize}});return Ps(this,void 0,void 0,function*(){e.initialize.call(this),yield this.loadData(),this.nodeReady()})}createChildNodes(){const e=this.level+1,t=this.x*2,i=this.y*2,s=Object.getPrototypeOf(this).constructor;let r=new s(this,this.mapView,Pi.topLeft,e,t,i);r.scale.set(.5,1,.5),r.position.set(-.25,0,-.25),this.add(r),r.updateMatrix(),r.updateMatrixWorld(!0),r=new s(this,this.mapView,Pi.topRight,e,t+1,i),r.scale.set(.5,1,.5),r.position.set(.25,0,-.25),this.add(r),r.updateMatrix(),r.updateMatrixWorld(!0),r=new s(this,this.mapView,Pi.bottomLeft,e,t,i+1),r.scale.set(.5,1,.5),r.position.set(-.25,0,.25),this.add(r),r.updateMatrix(),r.updateMatrixWorld(!0),r=new s(this,this.mapView,Pi.bottomRight,e,t+1,i+1),r.scale.set(.5,1,.5),r.position.set(.25,0,.25),this.add(r),r.updateMatrix(),r.updateMatrixWorld(!0)}raycast(e,t){this.isMesh===!0&&super.raycast(e,t)}}Bo.geometry=new Hl(1,1,1,1,!1);Bo.baseGeometry=Bo.geometry;Bo.baseScale=new G(fi.EARTH_PERIMETER,1,fi.EARTH_PERIMETER);class oTe extends jt{constructor(e=1,t=1,i=1,s=1,r=!1,o=10,a=null,l=!0){super();const c=[],u=[],d=[],h=[];Hl.buildPlane(e,t,i,s,c,u,d,h);const f=a.data;for(let m=0,p=0;m<f.length&&p<u.length;m+=4,p+=3){const y=f[m],v=f[m+1],_=f[m+2],b=(y*65536+v*256+_)*.1-1e4;u[p+1]=b}r&&Hl.buildSkirt(e,t,i,s,o,c,u,d,h),this.setIndex(c),this.setAttribute("position",new kt(u,3)),this.setAttribute("normal",new kt(d,3)),this.setAttribute("uv",new kt(h,2)),l&&this.computeNormals(i,s)}computeNormals(e,t){const i=this.getAttribute("position");if(i!==void 0){let s=this.getAttribute("normal");const r=t*e;for(let p=0;p<r;p++)s.setXYZ(p,0,0,0);const o=new G,a=new G,l=new G,c=new G,u=new G,d=new G,h=new G,f=new G,m=t*e*6;for(let p=0;p<m;p+=3){const y=this.index.getX(p+0),v=this.index.getX(p+1),_=this.index.getX(p+2);o.fromBufferAttribute(i,y),a.fromBufferAttribute(i,v),l.fromBufferAttribute(i,_),h.subVectors(l,a),f.subVectors(o,a),h.cross(f),c.fromBufferAttribute(s,y),u.fromBufferAttribute(s,v),d.fromBufferAttribute(s,_),c.add(h),u.add(h),d.add(h),s.setXYZ(y,c.x,c.y,c.z),s.setXYZ(v,u.x,u.y,u.z),s.setXYZ(_,d.x,d.y,d.z)}this.normalizeNormals(),s.needsUpdate=!0}}}class na extends $s{constructor(e=null,t=null,i=Pi.root,s=0,r=0,o=0,a=na.geometry,l=new s0({wireframe:!1,color:16777215})){super(e,t,i,s,r,o,a,l),this.heightLoaded=!1,this.textureLoaded=!1,this.geometrySize=16,this.geometryNormals=!1,this.isMesh=!0,this.visible=!1,this.matrixAutoUpdate=!1}initialize(){const e=Object.create(null,{initialize:{get:()=>super.initialize}});return Ps(this,void 0,void 0,function*(){e.initialize.call(this),yield this.loadData(),yield this.loadHeightGeometry(),this.nodeReady()})}loadData(){const e=Object.create(null,{loadData:{get:()=>super.loadData}});return Ps(this,void 0,void 0,function*(){yield e.loadData.call(this),this.textureLoaded=!0})}loadHeightGeometry(){return Ps(this,void 0,void 0,function*(){if(this.mapView.heightProvider===null)throw new Error("GeoThree: MapView.heightProvider provider is null.");if(this.level<this.mapView.heightProvider.minZoom||this.level>this.mapView.heightProvider.maxZoom){console.warn("Geo-Three: Loading tile outside of provider range.",this),this.geometry=Bo.baseGeometry;return}try{const e=yield this.mapView.heightProvider.fetchTile(this.level,this.x,this.y);if(this.disposed)return;const t=sA.createOffscreenCanvas(this.geometrySize+1,this.geometrySize+1),i=t.getContext("2d");i.imageSmoothingEnabled=!1,i.drawImage(e,0,0,na.tileSize,na.tileSize,0,0,t.width,t.height);const s=i.getImageData(0,0,t.width,t.height);this.geometry=new oTe(1,1,this.geometrySize,this.geometrySize,!0,10,s,!0)}catch{if(this.disposed)return;this.geometry=Bo.baseGeometry}this.heightLoaded=!0})}createChildNodes(){const e=this.level+1,t=Object.getPrototypeOf(this).constructor,i=this.x*2,s=this.y*2;let r=new t(this,this.mapView,Pi.topLeft,e,i,s);r.scale.set(.5,1,.5),r.position.set(-.25,0,-.25),this.add(r),r.updateMatrix(),r.updateMatrixWorld(!0),r=new t(this,this.mapView,Pi.topRight,e,i+1,s),r.scale.set(.5,1,.5),r.position.set(.25,0,-.25),this.add(r),r.updateMatrix(),r.updateMatrixWorld(!0),r=new t(this,this.mapView,Pi.bottomLeft,e,i,s+1),r.scale.set(.5,1,.5),r.position.set(-.25,0,.25),this.add(r),r.updateMatrix(),r.updateMatrixWorld(!0),r=new t(this,this.mapView,Pi.bottomRight,e,i+1,s+1),r.scale.set(.5,1,.5),r.position.set(.25,0,.25),this.add(r),r.updateMatrix(),r.updateMatrixWorld(!0)}raycast(e,t){this.isMesh===!0&&super.raycast(e,t)}}na.tileSize=256;na.geometry=new Hl(1,1,1,1);na.baseGeometry=Bo.geometry;na.baseScale=new G(fi.EARTH_PERIMETER,1,fi.EARTH_PERIMETER);class M5 extends jt{constructor(e,t,i,s,r,o,a){super();const l=o+a;let c=0;const u=[],d=new G,h=new G,f=[],m=[],p=[],y=[];for(let v=0;v<=i;v++){const _=[],b=v/i;for(let w=0;w<=t;w++){const x=w/t;d.x=-e*Math.cos(s+x*r)*Math.sin(o+b*a),d.y=e*Math.cos(o+b*a),d.z=e*Math.sin(s+x*r)*Math.sin(o+b*a),m.push(d.x,d.y,d.z),h.set(d.x,d.y,d.z).normalize(),p.push(h.x,h.y,h.z),y.push(x,1-b),_.push(c++)}u.push(_)}for(let v=0;v<i;v++)for(let _=0;_<t;_++){const b=u[v][_+1],w=u[v][_],x=u[v+1][_],S=u[v+1][_+1];(v!==0||o>0)&&f.push(b,w,S),(v!==i-1||l<Math.PI)&&f.push(w,x,S)}this.setIndex(f),this.setAttribute("position",new kt(m,3)),this.setAttribute("normal",new kt(p,3)),this.setAttribute("uv",new kt(y,2))}}class ih extends $s{constructor(e=null,t=null,i=Pi.root,s=0,r=0,o=0){super(e,t,i,s,r,o,ih.createGeometry(s,r,o),new $n({wireframe:!1})),this.applyScaleNode(),this.matrixAutoUpdate=!1,this.isMesh=!0,this.visible=!1}initialize(){const e=Object.create(null,{initialize:{get:()=>super.initialize}});return Ps(this,void 0,void 0,function*(){e.initialize.call(this),yield this.loadData(),this.nodeReady()})}static createGeometry(e,t,i){const s=Math.pow(2,e),r=40,o=Math.floor(ih.segments*(r/(e+1))/r),a=1/s*2*Math.PI,l=t*a,c=1/s*Math.PI,u=i*c;return new M5(1,o,o,l,a,u,c)}applyScaleNode(){this.geometry.computeBoundingBox();const t=this.geometry.boundingBox.clone().getCenter(new G),i=new yt;i.compose(new G(-t.x,-t.y,-t.z),new Mn,new G(fi.EARTH_RADIUS,fi.EARTH_RADIUS,fi.EARTH_RADIUS)),this.geometry.applyMatrix4(i),this.position.copy(t),this.updateMatrix(),this.updateMatrixWorld()}updateMatrix(){this.matrix.setPosition(this.position),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e=!1){(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1)}createChildNodes(){const e=this.level+1,t=this.x*2,i=this.y*2,s=Object.getPrototypeOf(this).constructor;let r=new s(this,this.mapView,Pi.topLeft,e,t,i);this.add(r),r=new s(this,this.mapView,Pi.topRight,e,t+1,i),this.add(r),r=new s(this,this.mapView,Pi.bottomLeft,e,t,i+1),this.add(r),r=new s(this,this.mapView,Pi.bottomRight,e,t+1,i+1),this.add(r)}raycast(e,t){this.isMesh===!0&&super.raycast(e,t)}}ih.baseGeometry=new M5(fi.EARTH_RADIUS,64,64,0,2*Math.PI,0,Math.PI);ih.baseScale=new G(1,1,1);ih.segments=80;class Hs extends na{constructor(e=null,t=null,i=Pi.root,s=0,r=0,o=0){const a=Hs.prepareMaterial(new s0({map:$s.defaultTexture,color:16777215}));super(e,t,i,s,r,o,Hs.geometry,a),this.frustumCulled=!1}static prepareMaterial(e){return e.userData={heightMap:{value:Hs.defaultHeightTexture}},e.onBeforeCompile=t=>{for(const i in e.userData)t.uniforms[i]=e.userData[i];t.vertexShader=`
			uniform sampler2D heightMap;
			`+t.vertexShader,t.vertexShader=t.vertexShader.replace("#include <fog_vertex>",`
			#include <fog_vertex>
	
			// Calculate height of the title
			vec4 _theight = texture2D(heightMap, vUv);
			float _height = ((_theight.r * 255.0 * 65536.0 + _theight.g * 255.0 * 256.0 + _theight.b * 255.0) * 0.1) - 10000.0;
			vec3 _transformed = position + _height * normal;
	
			// Vertex position based on height
			gl_Position = projectionMatrix * modelViewMatrix * vec4(_transformed, 1.0);
			`)},e}loadData(){const e=Object.create(null,{loadData:{get:()=>super.loadData}});return Ps(this,void 0,void 0,function*(){yield e.loadData.call(this),this.textureLoaded=!0})}loadHeightGeometry(){return Ps(this,void 0,void 0,function*(){if(this.mapView.heightProvider===null)throw new Error("GeoThree: MapView.heightProvider provider is null.");if(this.level<this.mapView.heightProvider.minZoom||this.level>this.mapView.heightProvider.maxZoom){console.warn("Geo-Three: Loading tile outside of provider range.",this),this.material.map=Hs.defaultTexture,this.material.needsUpdate=!0;return}try{const e=yield this.mapView.heightProvider.fetchTile(this.level,this.x,this.y);if(this.disposed)return;const t=new Wn(e);t.generateMipmaps=!1,t.format=Oi,t.magFilter=ii,t.minFilter=ii,t.needsUpdate=!0,this.material.userData.heightMap.value=t}catch{if(this.disposed)return;console.error("Geo-Three: Failed to load node tile height data.",this),this.material.userData.heightMap.value=Hs.defaultHeightTexture}this.material.needsUpdate=!0,this.heightLoaded=!0})}raycast(e,t){this.isMesh===!0&&(this.geometry=Bo.geometry,super.raycast(e,t),this.geometry=Hs.geometry)}dispose(){super.dispose(),this.material.userData.heightMap.value&&this.material.userData.heightMap.value!==Hs.defaultHeightTexture&&this.material.userData.heightMap.value.dispose()}}Hs.defaultHeightTexture=C5.createFillTexture("#0186C0");Hs.geometrySize=256;Hs.geometry=new Hl(1,1,Hs.geometrySize,Hs.geometrySize,!0);Hs.baseGeometry=Bo.geometry;Hs.baseScale=new G(fi.EARTH_PERIMETER,1,fi.EARTH_PERIMETER);class aTe{constructor(){this.subdivisionRays=1,this.thresholdUp=.6,this.thresholdDown=.15,this.raycaster=new wh,this.mouse=new tt,this.powerDistance=!1,this.scaleDistance=!0}updateLOD(e,t,i,s){const r=[];for(let o=0;o<this.subdivisionRays;o++)this.mouse.set(Math.random()*2-1,Math.random()*2-1),this.raycaster.setFromCamera(this.mouse,t),this.raycaster.intersectObjects(e.children,!0,r);for(let o=0;o<r.length;o++){const a=r[o].object;let l=r[o].distance;if(this.powerDistance&&(l=Math.pow(l*2,a.level)),this.scaleDistance){const c=a.matrixWorld.elements;l=new G(c[0],c[1],c[2]).length()/l}l>this.thresholdUp?a.subdivide():l<this.thresholdDown&&a.parentNode&&a.parentNode.simplify()}}}class lTe{constructor(e=257){this.gridSize=e;const t=e-1;if(t&t-1)throw new Error(`Expected grid size to be 2^n+1, got ${e}.`);this.numTriangles=t*t*2-2,this.numParentTriangles=this.numTriangles-t*t,this.indices=new Uint32Array(this.gridSize*this.gridSize),this.coords=new Uint16Array(this.numTriangles*4);for(let i=0;i<this.numTriangles;i++){let s=i+2,r=0,o=0,a=0,l=0,c=0,u=0;for(s&1?a=l=c=t:r=o=u=t;(s>>=1)>1;){const h=r+a>>1,f=o+l>>1;s&1?(a=r,l=o,r=c,o=u):(r=a,o=l,a=c,l=u),c=h,u=f}const d=i*4;this.coords[d+0]=r,this.coords[d+1]=o,this.coords[d+2]=a,this.coords[d+3]=l}}createTile(e){return new cTe(e,this)}}class cTe{constructor(e,t){const i=t.gridSize;if(e.length!==i*i)throw new Error(`Expected terrain data of length ${i*i} (${i} x ${i}), got ${e.length}.`);this.terrain=e,this.martini=t,this.errors=new Float32Array(e.length),this.update()}update(){const{numTriangles:e,numParentTriangles:t,coords:i,gridSize:s}=this.martini,{terrain:r,errors:o}=this;for(let a=e-1;a>=0;a--){const l=a*4,c=i[l+0],u=i[l+1],d=i[l+2],h=i[l+3],f=c+d>>1,m=u+h>>1,p=f+m-u,y=m+c-f,v=(r[u*s+c]+r[h*s+d])/2,_=m*s+f,b=Math.abs(v-r[_]);if(o[_]=Math.max(o[_],b),a<t){const w=(u+y>>1)*s+(c+p>>1),x=(h+y>>1)*s+(d+p>>1);o[_]=Math.max(o[_],o[w],o[x])}}}getMesh(e=0,t=!1){const{gridSize:i,indices:s}=this.martini,{errors:r}=this;let o=0,a=0;const l=i-1;let c,u,d=0;const h=[],f=[],m=[],p=[];s.fill(0);function y(C,T,M,E,A,I){const B=C+M>>1,F=T+E>>1;Math.abs(C-A)+Math.abs(T-I)>1&&r[F*i+B]>e?(y(A,I,C,T,B,F),y(M,E,A,I,B,F)):(c=T*i+C,u=E*i+M,d=I*i+A,s[c]===0&&(t&&(C===0?h.push(o):C===l&&f.push(o),T===0?m.push(o):T===l&&p.push(o)),s[c]=++o),s[u]===0&&(t&&(M===0?h.push(o):M===l&&f.push(o),E===0?m.push(o):E===l&&p.push(o)),s[u]=++o),s[d]===0&&(t&&(A===0?h.push(o):A===l&&f.push(o),I===0?m.push(o):I===l&&p.push(o)),s[d]=++o),a++)}y(0,0,l,l,l,0),y(l,l,0,0,0,l);let v=o*2,_=a*3;t&&(v+=(h.length+f.length+m.length+p.length)*2,_+=((h.length-1)*2+(f.length-1)*2+(m.length-1)*2+(p.length-1)*2)*3);const b=new Uint16Array(v),w=new Uint32Array(_);let x=0;function S(C,T,M,E,A,I){const B=C+M>>1,F=T+E>>1;if(Math.abs(C-A)+Math.abs(T-I)>1&&r[F*i+B]>e)S(A,I,C,T,B,F),S(M,E,A,I,B,F);else{const U=s[T*i+C]-1,P=s[E*i+M]-1,O=s[I*i+A]-1;b[2*U]=C,b[2*U+1]=T,b[2*P]=M,b[2*P+1]=E,b[2*O]=A,b[2*O+1]=I,w[x++]=U,w[x++]=P,w[x++]=O}}if(S(0,0,l,l,l,0),S(l,l,0,0,0,l),t){let T=function(M){const E=M.length;for(let A=0;A<E-1;A++){const I=M[A],B=M[A+1],F=C/2,U=(C+2)/2;b[C++]=b[2*I],b[C++]=b[2*I+1],w[x++]=I,w[x++]=F,w[x++]=B,w[x++]=F,w[x++]=U,w[x++]=B}b[C++]=b[2*M[E-1]],b[C++]=b[2*M[E-1]+1]};h.sort((M,E)=>b[2*M+1]-b[2*E+1]),f.sort((M,E)=>b[2*E+1]-b[2*M+1]),m.sort((M,E)=>b[2*E]-b[2*M]),p.sort((M,E)=>b[2*M]-b[2*E]);let C=o*2;T(h),T(f),T(m),T(p)}return{vertices:b,triangles:w,numVerticesWithoutSkirts:o}}}class vo extends na{constructor(e=null,t=null,i=Pi.root,s=0,r=0,o=0,{elevationDecoder:a=null,meshMaxError:l=10,exageration:c=1}={}){super(e,t,i,s,r,o,vo.geometry,vo.prepareMaterial(new s0({map:vo.emptyTexture,color:16777215,side:ts}),s,c)),this.elevationDecoder={rScaler:256,gScaler:1,bScaler:1/256,offset:-32768},this.exageration=1,this.meshMaxError=10,a&&(this.elevationDecoder=a),this.meshMaxError=l,this.exageration=c,this.frustumCulled=!1}static prepareMaterial(e,t,i=1){return e.userData={heightMap:{value:vo.emptyTexture},drawNormals:{value:0},drawBlack:{value:0},zoomlevel:{value:t},computeNormals:{value:1},drawTexture:{value:1}},e.onBeforeCompile=s=>{for(let r in e.userData)s.uniforms[r]=e.userData[r];s.vertexShader=`
				uniform bool computeNormals;
				uniform float zoomlevel;
				uniform sampler2D heightMap;
				`+s.vertexShader,s.fragmentShader=`
				uniform bool drawNormals;
				uniform bool drawTexture;
				uniform bool drawBlack;
				`+s.fragmentShader,s.fragmentShader=s.fragmentShader.replace("#include <dithering_fragment>",`
				if(drawBlack) {
					gl_FragColor = vec4( 0.0,0.0,0.0, 1.0 );
				} else if(drawNormals) {
					gl_FragColor = vec4( ( 0.5 * vNormal + 0.5 ), 1.0 );
				} else if (!drawTexture) {
					gl_FragColor = vec4( 0.0,0.0,0.0, 0.0 );
				}`),s.vertexShader=s.vertexShader.replace("#include <fog_vertex>",`
				#include <fog_vertex>

				// queried pixels:
				// +-----------+
				// |   |   |   |
				// | a | b | c |
				// |   |   |   |
				// +-----------+
				// |   |   |   |
				// | d | e | f |
				// |   |   |   |
				// +-----------+
				// |   |   |   |
				// | g | h | i |
				// |   |   |   |
				// +-----------+

				if (computeNormals) {
					float e = getElevation(vUv, 0.0);
					ivec2 size = textureSize(heightMap, 0);
					float offset = 1.0 / float(size.x);
					float a = getElevation(vUv + vec2(-offset, -offset), 0.0);
					float b = getElevation(vUv + vec2(0, -offset), 0.0);
					float c = getElevation(vUv + vec2(offset, -offset), 0.0);
					float d = getElevation(vUv + vec2(-offset, 0), 0.0);
					float f = getElevation(vUv + vec2(offset, 0), 0.0);
					float g = getElevation(vUv + vec2(-offset, offset), 0.0);
					float h = getElevation(vUv + vec2(0, offset), 0.0);
					float i = getElevation(vUv + vec2(offset,offset), 0.0);


					float normalLength = 500.0 / zoomlevel;

					vec3 v0 = vec3(0.0, 0.0, 0.0);
					vec3 v1 = vec3(0.0, normalLength, 0.0);
					vec3 v2 = vec3(normalLength, 0.0, 0.0);
					v0.z = (e + d + g + h) / 4.0;
					v1.z = (e+ b + a + d) / 4.0;
					v2.z = (e+ h + i + f) / 4.0;
					vNormal = (normalize(cross(v2 - v0, v1 - v0))).rbg;
				}
				`)},e}static getTerrain(e,t,i){const{rScaler:s,bScaler:r,gScaler:o,offset:a}=i,l=t+1,c=new Float32Array(l*l);for(let u=0,d=0;d<t;d++)for(let h=0;h<t;h++,u++){const f=u*4,m=e[f+0],p=e[f+1],y=e[f+2];c[u+d]=m*s+p*o+y*r+a}for(let u=l*(l-1),d=0;d<l-1;d++,u++)c[u]=c[u-l];for(let u=l-1,d=0;d<l;d++,u+=l)c[u]=c[u-1];return c}static getMeshAttributes(e,t,i,s,r){const o=i+1,a=e.length/2,l=new Float32Array(a*3),c=new Float32Array(a*2),[u,d,h,f]=s||[0,0,i,i],m=(h-u)/i,p=(f-d)/i;for(let y=0;y<a;y++){const v=e[y*2],_=e[y*2+1],b=_*o+v;l[3*y+0]=v*m+u,l[3*y+1]=-t[b]*r,l[3*y+2]=-_*p+f,c[2*y+0]=v/i,c[2*y+1]=_/i}return{position:{value:l,size:3},uv:{value:c,size:2}}}processHeight(e){return Ps(this,void 0,void 0,function*(){const t=e.width,i=t+1;var s=sA.createOffscreenCanvas(t,t),r=s.getContext("2d");r.imageSmoothingEnabled=!1,r.drawImage(e,0,0,t,t,0,0,s.width,s.height);var o=r.getImageData(0,0,s.width,s.height),a=o.data;const l=vo.getTerrain(a,t,this.elevationDecoder),u=new lTe(i).createTile(l),{vertices:d,triangles:h}=u.getMesh(typeof this.meshMaxError=="function"?this.meshMaxError(this.level):this.meshMaxError),f=vo.getMeshAttributes(d,l,t,[-.5,-.5,.5,.5],this.exageration);this.geometry=new jt,this.geometry.setIndex(new aw(h,1)),this.geometry.setAttribute("position",new kt(f.position.value,f.position.size)),this.geometry.setAttribute("uv",new kt(f.uv.value,f.uv.size)),this.geometry.rotateX(Math.PI);var m=new Wn(e);m.generateMipmaps=!1,m.format=Oi,m.magFilter=ii,m.minFilter=ii,m.needsUpdate=!0,this.material.userData.heightMap.value=m,this.material.map=m,this.material.needsUpdate=!0})}loadHeightGeometry(){return Ps(this,void 0,void 0,function*(){if(this.mapView.heightProvider===null)throw new Error("GeoThree: MapView.heightProvider provider is null.");const e=yield this.mapView.heightProvider.fetchTile(this.level,this.x,this.y);this.disposed||(this.processHeight(e),this.heightLoaded=!0,this.nodeReady())})}}vo.geometrySize=16;vo.emptyTexture=new Wn;vo.geometry=new Hl(1,1,1,1);vo.tileSize=256;class Ms extends ut{constructor(e=Ms.PLANAR,t=new rTe,i=null){super(void 0,new $n({transparent:!0,opacity:0})),this.lod=null,this.provider=null,this.heightProvider=null,this.root=null,this.cacheTiles=!1,this.onBeforeRender=(s,r,o,a,l,c)=>{this.lod.updateLOD(this,o,s,r)},this.lod=new aTe,this.provider=t,this.heightProvider=i,this.setRoot(e),this.preSubdivide()}setRoot(e){if(typeof e=="number"){if(!Ms.mapModes.has(e))throw new Error("Map mode "+e+" does is not registered.");const t=Ms.mapModes.get(e);e=new t(null,this)}this.root!==null&&(this.remove(this.root),this.root=null),this.root=e,this.root!==null&&(this.geometry=this.root.constructor.baseGeometry,this.scale.copy(this.root.constructor.baseScale),this.root.mapView=this,this.add(this.root),this.root.initialize())}preSubdivide(){var e,t;function i(r,o){if(!(o<=0)){r.subdivide();for(let a=0;a<r.children.length;a++)if(r.children[a]instanceof $s){const l=r.children[a];i(l,o-1)}}}const s=Math.max(this.provider.minZoom,(t=(e=this.heightProvider)===null||e===void 0?void 0:e.minZoom)!==null&&t!==void 0?t:-1/0);s>0&&i(this.root,s)}setProvider(e){e!==this.provider&&(this.provider=e,this.clear())}setHeightProvider(e){e!==this.heightProvider&&(this.heightProvider=e,this.clear())}clear(){return this.traverse(function(e){e.childrenCache&&(e.childrenCache=null),e.initialize&&e.initialize()}),this}minZoom(){var e,t;return Math.max(this.provider.minZoom,(t=(e=this.heightProvider)===null||e===void 0?void 0:e.minZoom)!==null&&t!==void 0?t:-1/0)}maxZoom(){var e,t;return Math.min(this.provider.maxZoom,(t=(e=this.heightProvider)===null||e===void 0?void 0:e.maxZoom)!==null&&t!==void 0?t:1/0)}getMetaData(){this.provider.getMetaData()}raycast(e,t){return!1}}Ms.PLANAR=200;Ms.SPHERICAL=201;Ms.HEIGHT=202;Ms.HEIGHT_SHADER=203;Ms.MARTINI=204;Ms.mapModes=new Map([[Ms.PLANAR,Bo],[Ms.SPHERICAL,ih],[Ms.HEIGHT,na],[Ms.HEIGHT_SHADER,Hs],[Ms.MARTINI,vo]]);new G;new G;new yt;new G;new ph;new G;class E5{static get(e){return Ps(this,void 0,void 0,function*(){return new Promise(function(t,i){const s=new XMLHttpRequest;s.overrideMimeType("text/plain"),s.open("GET",e,!0),s.onload=function(){t(s.response)},s.onerror=i,s.send(null)})})}static getRaw(e){return Ps(this,void 0,void 0,function*(){return new Promise(function(t,i){var s=new XMLHttpRequest;s.responseType="arraybuffer",s.open("GET",e,!0),s.onload=function(){t(s.response)},s.onerror=i,s.send(null)})})}static request(e,t,i,s,r,o,a){function l(u){try{return JSON.parse(u)}catch{return u}}const c=new XMLHttpRequest;if(c.overrideMimeType("text/plain"),c.open(t,e,!0),i!=null)for(const u in i)c.setRequestHeader(u,i[u]);return r!==void 0&&(c.onload=function(u){r(l(c.response),c)}),o!==void 0&&(c.onerror=o),a!==void 0&&(c.onprogress=a),c.send(s!==void 0?s:null),c}}class Na extends a0{constructor(e="",t=Na.AERIAL){super(),this.maxZoom=19,this.minZoom=1,this.format="jpeg",this.mapSize=512,this.subdomain="t1",this.meta=null,this.apiKey=e,this.type=t}getMetaData(){return Ps(this,void 0,void 0,function*(){const e=Na.ADDRESS+"/REST/V1/Imagery/Metadata/RoadOnDemand?output=json&include=ImageryProviders&key="+this.apiKey,t=yield E5.get(e);this.meta=JSON.parse(t)})}static quadKey(e,t,i){let s="";for(let r=e;r>0;r--){const o=1<<r-1;let a=0;t&o&&a++,i&o&&(a+=2),s+=a}return s}fetchTile(e,t,i){return new Promise((s,r)=>{const o=document.createElement("img");o.onload=function(){s(o)},o.onerror=function(){r()},o.crossOrigin="Anonymous",o.src="http://ecn."+this.subdomain+".tiles.virtualearth.net/tiles/"+this.type+Na.quadKey(e,t,i)+".jpeg?g=1173"})}}Na.ADDRESS="https://dev.virtualearth.net";Na.AERIAL="a";Na.ROAD="r";Na.AERIAL_LABELS="h";Na.OBLIQUE="o";Na.OBLIQUE_LABELS="b";class uTe extends a0{constructor(e="",t="",i="base",s="normal.day",r="png",o=512){super(),this.appId=e,this.appCode=t,this.style=i,this.scheme=s,this.format=r,this.size=o,this.version="newest",this.server=1}nextServer(){this.server=this.server%4===0?1:this.server+1}getMetaData(){return Ps(this,void 0,void 0,function*(){})}fetchTile(e,t,i){return this.nextServer(),new Promise((s,r)=>{const o=document.createElement("img");o.onload=function(){s(o)},o.onerror=function(){r()},o.crossOrigin="Anonymous",o.src="https://"+this.server+"."+this.style+".maps.api.here.com/maptile/2.1/maptile/"+this.version+"/"+this.scheme+"/"+e+"/"+t+"/"+i+"/"+this.size+"/"+this.format+"?app_id="+this.appId+"&app_code="+this.appCode})}}uTe.PATH="/maptile/2.1/";class _l extends a0{constructor(e="",t="",i=_l.STYLE,s="png",r=!1,o="v4"){super(),this.apiToken=e,this.format=s,this.useHDPI=r,this.mode=i,this.mapId=t,this.style=t,this.version=o}getMetaData(){return Ps(this,void 0,void 0,function*(){const e=_l.ADDRESS+this.version+"/"+this.mapId+".json?access_token="+this.apiToken,t=yield E5.get(e),i=JSON.parse(t);this.name=i.name,this.minZoom=i.minZoom,this.maxZoom=i.maxZoom,this.bounds=i.bounds,this.center=i.center})}fetchTile(e,t,i){return new Promise((s,r)=>{const o=document.createElement("img");o.onload=function(){s(o)},o.onerror=function(){r()},o.crossOrigin="Anonymous",this.mode===_l.STYLE?o.src=_l.ADDRESS+"styles/v1/"+this.style+"/tiles/"+e+"/"+t+"/"+i+(this.useHDPI?"@2x?access_token=":"?access_token=")+this.apiToken:o.src=_l.ADDRESS+"v4/"+this.mapId+"/"+e+"/"+t+"/"+i+(this.useHDPI?"@2x.":".")+this.format+"?access_token="+this.apiToken})}}_l.ADDRESS="https://api.mapbox.com/";_l.STYLE=100;_l.MAP_ID=101;class dTe{constructor(){J(this,"latitude",39.9072);J(this,"longitude",116.3914);J(this,"height",5);J(this,"rotation",0)}}const r1=class r1{constructor(){J(this,"id");J(this,"rootObject");J(this,"allElementData",new Map);J(this,"allUUIDData",new Map);J(this,"tile");J(this,"_boundingBox");J(this,"name");J(this,"url");J(this,"levelDataMap");J(this,"elememtCachelDataMap",new Map);J(this,"gisData");this.id=r1.id++}clear(){this.rootObject.parent.remove(this.rootObject),this.rootObject.clear(),this.tile&&this.tile.dispose(),this.levelDataMap&&this.levelDataMap.clear(),this.allElementData.clear()}set boundingBox(e){this._boundingBox=e}get boundingBox(){return this._boundingBox==null&&this.computeBoundingbox(),this._boundingBox}computeBoundingbox(){this._boundingBox==null&&(this._boundingBox=new Nn),this._boundingBox.makeEmpty();for(const e of this.allElementData.values())this._boundingBox.union(e.boundingBox)}getSpaceDatas(){if(this.levelDataMap)return this.levelDataMap;this.levelDataMap=new Map;for(const e of this.allElementData.keys()){let t=this.allElementData.get(e),i=t.useData.categoryName;i!=null&&typeof i!="string"&&(i=i[0]);let s=t.useData.level;if(s!=null&&typeof s!="string"&&(s=s[0]),s!=null){let r;if(this.levelDataMap.has(s))r=this.levelDataMap.get(s);else{r=new iTe,r.name=s;let o=t.useData.elevation;o!=null&&typeof o!="number"&&(o=o[0]),r.elevation=o,r.categoryDataMap=new Map,this.levelDataMap.set(s,r)}if(i!=null){let o;r.categoryDataMap.has(i)?o=r.categoryDataMap.get(i):(o=new sTe,o.name=i,o.elementDataMap=new Map,r.categoryDataMap.set(i,o)),o.elementDataMap.set(e,t)}}}return this.levelDataMap}showSpaceTree(){this.getSpaceDatas();let e=Array.from(this.levelDataMap.values());if(e.length==0)return null;let t=[],i=[];i.push(0),e.sort(function(o,a){return o.elevation-a.elevation});let s={id:0,label:this.name,children:t};for(const o of e){let a=[];i.push(Qo.id);let l={id:Qo.id++,label:o.name,children:a};for(const c of o.categoryDataMap.keys()){let u=o.categoryDataMap.get(c),d=[];i.push(Qo.id);let h={id:Qo.id++,label:c,children:d};for(const f of u.elementDataMap.values()){i.push(f.id);let m={id:f.id,label:f.name};d.push(m)}a.push(h)}t.push(l)}let r=[...bo.ModelData.value];(r==null||r.length==0)&&(r=[]);for(let o=0;o<r.length;o++)if(r[o].label==this.name){r.splice(o,1);break}r.push(s),bo.ModelData.value=r,bo.SpaceTreeCheckIDs.value=i,bo.SpaceTreeExpandedIDs.value=i}saveModelData(){let e=[];for(const t of this.elememtCachelDataMap.keys()){let i=this.allElementData.get(t);if(!i)continue;let s=this.elememtCachelDataMap.get(t),r=new nTe;if(r.uuid=i.uuid,r.url=i.url,s.materialCacheDataMap){let o=[];for(const a of s.materialCacheDataMap.values()){let l=new tTe;if(l.baseColor="#"+a.material.color.getHexString(),l.materialId=a.materialId,a.material.transparent?l.alpha=a.material.opacity:l.alpha=1,l.materialName=a.material.name,l.roughness=a.material.roughness,l.metalness=a.material.metalness,l.aoMapIntensity=a.material.aoMapIntensity,l.normalScale=a.material.normalScale.x,a.material.map){let c=a.material;l.uScale=c.map.repeat.x,l.vScale=c.map.repeat.y,l.rotate=c.map.rotation,l.xOffset=c.map.offset.x,l.yOffset=c.map.offset.y}o.push(l)}r.materialDatas=o}if(i&&(i.position.x!=0||i.position.y!=0||i.position.z!=0||i.quaternion.x!=0||i.quaternion.y!=0||i.quaternion.z!=0||i.quaternion.w!=1||i.scale.x!=1||i.scale.y!=1||i.scale.z!=1)){let o=new eTe;o.locationX=i.position.x,o.locationY=i.position.y,o.locationZ=i.position.z,o.quaternionX=i.quaternion.x,o.quaternionY=i.quaternion.y,o.quaternionZ=i.quaternion.z,o.quaternionW=i.quaternion.w,o.scaleX=i.scale.x,o.scaleY=i.scale.y,o.scaleZ=i.scale.z,r.transformData=o}e.push(r)}return e}async openElememtSaveDatas(e){await xa.getPBRDataByMaterialId(null);for(const t of e)if(t.uuid&&this.allUUIDData.has(t.uuid)){let i=this.allUUIDData.get(t.uuid);VL.openElementMaterial(t.materialDatas,i),VL.openElementTransform(t.transformData,i)}}setGisData(e){let t=this.boundingBox.clone();this.rootObject.matrix=new yt;let i;this.tile?i=new G(0,0,1):i=new G(0,1,0);let s=new yt;s.makeRotationAxis(i.normalize(),e.rotation*Math.PI/180),this.rootObject.matrix.multiply(s);let r=fi.datumsToSpherical(e.latitude,e.longitude),o;this.tile?o=new yt(1,0,0,r.x,0,0,1,e.height,0,-1,0,-r.y,0,0,0,1):o=new yt(1,0,0,r.x,0,1,0,e.height,0,0,1,-r.y,0,0,0,1),this.rootObject.matrix.premultiply(o),this.rootObject.matrixAutoUpdate=!1,t.applyMatrix4(this.rootObject.matrix),Ne.scene.setCameraByBoxAndRotateTo(t)}};J(r1,"id",1);let gv=r1;class vv{static gltfLoader(e,t,i="test"){if(e.mapModels.has(t))return;e.clearModel();let s=new nA,r=new iA;r.setDecoderPath("./lib/draco/"),s.setDRACOLoader(r),mv.showLoading.value=!0,s.load(t,o=>{let a=new Nn().setFromObject(o.scene),l=new gv;e.mapModels.set(t,l),l.name=i,l.rootObject=new rn,e.obj.add(l.rootObject),vv.batchAndInstance(o,l),mv.showLoading.value=!1,r.dispose(),l.showSpaceTree(),a.applyMatrix4(l.rootObject.matrix),e.setCameraByBox(a),URL.revokeObjectURL(t)},void 0,o=>{window.alert(o),r.dispose()})}static batchAndInstance(e,t){let i=e.scene,s=new Map,r=new Map;const o=4;i.traverse(function(a){if(a instanceof ut&&a.geometry.getAttribute("position")!=null){let l=a,c=!1,u=p=>{if(!c&&p&&p.parent)if(p.parent.name=="root"){l=p,c=!0;return}else u(p.parent)};u(l);let d=a.geometry,h=[],f=l.id;if(r.has(l.id))f=r.get(l.id);else{let p=new Qo(t);const y=new Nn;y.expandByObject(l),p.boundingBox=y,p.name=l.userData.name,p.useData=l.userData,p.useData.UniqueId&&(p.uuid=p.useData.UniqueId,t.allUUIDData.set(p.uuid,p)),t.allElementData.set(p.id,p),r.set(l.id,p.id),f=p.id}a.material.vertexColors=!0;const m=a.geometry.getAttribute("position").count;for(let p=0;p<m;p++)h.push(f);if(d.setAttribute("elementID",new Ez(h,1)),d.elementID=f,a.elementID=f,s.has(a.material.uuid))s.get(a.material.uuid).push(a);else{let p=[];p.push(a),s.set(a.material.uuid,p)}}});for(let a of s.values()){let l=new Map;for(const d of a)if(l.has(d.geometry.uuid)){let h=l.get(d.geometry.uuid);h.push(d),l.set(d.geometry.uuid,h)}else{let h=[];h.push(d),l.set(d.geometry.uuid,h)}let c=[],u;for(const d of l.values()){let h=d.length;if(h>1){let f=d[0].geometry;f.deleteAttribute("elementID"),f.deleteAttribute("color");let m=new Pa(f,d[0].material,h);m.orignMaterial=d[0].material,m.pickMaterial=Hn.pickMaterial;const p=new cr(new Int32Array(h),1),y=new cr(new Uint8Array(h*o).fill(255),o,!0);for(let v=0;v<d.length;v++){const _=d[v];let b=_.matrix,w=C=>{C.parent&&(b=b.premultiply(C.parent.matrix),w(C.parent))},x=_.elementID;w(_),m.setMatrixAt(v,b);let S=new Oc(m,v);t.allElementData.get(x).addMeshData(S),p.setX(v,x)}f.setAttribute("elementID",p),f.setAttribute("color",y),t.rootObject.add(m)}else for(let f=0;f<d.length;f++){let m=d[0];m.geometry.elementID=m.elementID;let p=m.matrix,y=_=>{_.parent&&(p=p.premultiply(_.parent.matrix),y(_.parent))};y(m);let v=m.geometry.applyMatrix4(p);c.push(v),u=m.material}}if(c.length>0){const d=new jt,h=new ut(d,u);h.orignMaterial=u,h.pickMaterial=Hn.pickMaterial,t.rootObject.add(h);const f=c[0].index!==null,m=new Set(Object.keys(c[0].attributes)),p={};let y=0;const v=[];for(let b=0;b<c.length;++b){const w=c[b];let x=w.elementID,S=new Gb(h,x);if(t.allElementData.get(x).addMeshData(S),f!==(w.index!==null))continue;const C=c[b].index;for(let T=0;T<C.count;++T){let M=C.getX(T)+y;v.push(M),S.indexs.push(M)}y+=c[b].attributes.position.count;for(const T in w.attributes)m.has(T)&&(p[T]===void 0&&(p[T]=[]),p[T].push(w.attributes[T]));w.dispose()}f&&d.setIndex(v);for(const b in p){const w=v5(p[b]);w&&d.setAttribute(b,w)}const _=new vf(new Uint8Array(d.attributes.position.count*o).fill(255),o,!0);d.setAttribute("color",_)}}}}function $L(n){let e;try{e=new URL(n,"http://fakehost.com/")}catch{return null}const t=e.pathname.split("/").pop(),i=t.lastIndexOf(".");return i===-1||i===t.length-1?null:t.substring(i+1)}function hTe(n){Promise.resolve().then(n)}class fTe{constructor(){this.maxSize=800,this.minSize=600,this.unloadPercent=.05,this.itemSet=new Map,this.itemList=[],this.usedSet=new Set,this.callbacks=new Map,this.unloadPriorityCallback=null;const e=this.itemSet;this.defaultPriorityCallback=t=>e.get(t)}isFull(){return this.itemSet.size>=this.maxSize}add(e,t){const i=this.itemSet;if(i.has(e)||this.isFull())return!1;const s=this.usedSet,r=this.itemList,o=this.callbacks;return r.push(e),s.add(e),i.set(e,Date.now()),o.set(e,t),!0}remove(e){const t=this.usedSet,i=this.itemSet,s=this.itemList,r=this.callbacks;if(i.has(e)){r.get(e)(e);const o=s.indexOf(e);return s.splice(o,1),t.delete(e),i.delete(e),r.delete(e),!0}return!1}markUsed(e){const t=this.itemSet,i=this.usedSet;t.has(e)&&!i.has(e)&&(t.set(e,Date.now()),i.add(e))}markAllUnused(){this.usedSet.clear()}unloadUnusedContent(){const e=this.unloadPercent,t=this.minSize,i=this.itemList,s=this.itemSet,r=this.usedSet,o=this.callbacks,a=i.length-r.size,l=i.length-t,c=this.unloadPriorityCallback||this.defaultPriorityCallback;if(l>0&&a>0){i.sort((m,p)=>{const y=r.has(m),v=r.has(p);return y&&v?0:!y&&!v?c(p)-c(m):y?1:-1});const u=Math.min(l,a),d=Math.max(t*e,u*e);let h=Math.min(d,a);h=Math.ceil(h);const f=i.splice(0,h);for(let m=0,p=f.length;m<p;m++){const y=f[m];o.get(y)(y),s.delete(y),o.delete(y)}}}scheduleUnload(e=!0){this.scheduled||(this.scheduled=!0,hTe(()=>{this.scheduled=!1,this.unloadUnusedContent(),e&&this.markAllUnused()}))}}class GL{constructor(){this.maxJobs=6,this.items=[],this.callbacks=new Map,this.currJobs=0,this.scheduled=!1,this.autoUpdate=!0,this.priorityCallback=()=>{throw new Error("PriorityQueue: PriorityCallback function not defined.")},this.schedulingCallback=e=>{requestAnimationFrame(e)},this._runjobs=()=>{this.tryRunJobs(),this.scheduled=!1}}sort(){const e=this.priorityCallback;this.items.sort(e)}add(e,t){return new Promise((i,s)=>{const r=(...l)=>t(...l).then(i).catch(s),o=this.items,a=this.callbacks;o.push(e),a.set(e,r),this.autoUpdate&&this.scheduleJobRun()})}remove(e){const t=this.items,i=this.callbacks,s=t.indexOf(e);s!==-1&&(t.splice(s,1),i.delete(e))}tryRunJobs(){this.sort();const e=this.items,t=this.callbacks,i=this.maxJobs;let s=this.currJobs;for(;i>s&&e.length>0;){s++;const r=e.pop(),o=t.get(r);t.delete(r),o(r).then(()=>{this.currJobs--,this.autoUpdate&&this.scheduleJobRun()}).catch(()=>{this.currJobs--,this.autoUpdate&&this.scheduleJobRun()})}this.currJobs=s}scheduleJobRun(){this.scheduled||(this.schedulingCallback(this._runjobs),this.scheduled=!0)}}const Ly=0,ky=1,gS=2,yv=3,Kb=4,Yb=6378137,pTe=1/298.257223563,mTe=-(pTe*Yb-Yb);function rA(n){return n===yv||n===Kb}function Ld(n,e){return n.__lastFrameVisited===e&&n.__used}function T5(n,e){n.__lastFrameVisited!==e&&(n.__lastFrameVisited=e,n.__used=!1,n.__inFrustum=!1,n.__isLeaf=!1,n.__visible=!1,n.__active=!1,n.__error=1/0,n.__distanceFromCamera=1/0,n.__childrenWereVisible=!1,n.__allChildrenLoaded=!1)}function A5(n,e,t){if(T5(n,e),n.__used=!0,t.markUsed(n),n.__contentEmpty){const i=n.children;for(let s=0,r=i.length;s<r;s++)A5(i[s],e,t)}}function I5(n,e,t){if(n.__contentEmpty&&(!n.__externalTileSet||rA(n.__loadingState))){const s=n.children;for(let r=0,o=s.length;r<o;r++){const a=s[r];a.__depthFromRenderedParent=e,I5(a,e,t)}}else t.requestTileContents(n)}function LM(n,e=null,t=null,i=null,s=0){if(e&&e(n,i,s)){t&&t(n,i,s);return}const r=n.children;for(let o=0,a=r.length;o<a;o++)LM(r[o],e,t,n,s+1);t&&t(n,i,s)}function R5(n,e){const t=e.stats,i=e.frameCount,s=e.errorTarget,r=e.maxDepth,o=e.loadSiblings,a=e.lruCache,l=e.stopAtEmptyTiles;if(T5(n,i),e.tileInView(n)===!1)return!1;if(n.__used=!0,a.markUsed(n),n.__inFrustum=!0,t.inFrustum++,(l||!n.__contentEmpty)&&!n.__externalTileSet&&(e.calculateError(n),n.__error<=s||e.maxDepth>0&&n.__depth+1>=r))return!0;let u=!1;const d=n.children;for(let h=0,f=d.length;h<f;h++){const m=d[h],p=R5(m,e);u=u||p}if(u&&o)for(let h=0,f=d.length;h<f;h++){const m=d[h];A5(m,i,a)}return!0}function P5(n,e){const t=e.stats,i=e.frameCount;if(!Ld(n,i))return;t.used++;const s=n.children;let r=!1;for(let o=0,a=s.length;o<a;o++){const l=s[o];r=r||Ld(l,i)}if(!r)n.__isLeaf=!0;else{let o=!1,a=!0;for(let l=0,c=s.length;l<c;l++){const u=s[l];if(P5(u,e),o=o||u.__wasSetVisible||u.__childrenWereVisible,Ld(u,i)){const d=u.__allChildrenLoaded||!u.__contentEmpty&&rA(u.__loadingState)||u.__externalTileSet&&u.__loadingState===Kb;a=a&&d}}n.__childrenWereVisible=o,n.__allChildrenLoaded=a}}function L5(n,e){const t=e.stats,i=e.frameCount;if(!Ld(n,i))return;const s=n.parent,r=s?s.__depthFromRenderedParent:-1;n.__depthFromRenderedParent=r;const o=e.lruCache;if(n.__isLeaf){n.__depthFromRenderedParent++,n.__loadingState===yv?(n.__inFrustum&&(n.__visible=!0,t.visible++),n.__active=!0,t.active++):!o.isFull()&&(!n.__contentEmpty||n.__externalTileSet)&&e.requestTileContents(n);return}const a=(e.errorTarget+1)*e.errorThreshold,l=n.__error<=a,c=l||n.refine==="ADD",u=!n.__contentEmpty,d=u||n.__externalTileSet,h=rA(n.__loadingState)&&d,f=n.__childrenWereVisible,m=n.children,p=n.__allChildrenLoaded;if(c&&u&&n.__depthFromRenderedParent++,c&&!h&&!o.isFull()&&d&&e.requestTileContents(n),(l&&!p&&!f&&h||n.refine==="ADD"&&h)&&(n.__inFrustum&&(n.__visible=!0,t.visible++),n.__active=!0,t.active++),n.refine!=="ADD"&&l&&!p&&h)for(let y=0,v=m.length;y<v;y++){const _=m[y];Ld(_,i)&&!o.isFull()&&(_.__depthFromRenderedParent=n.__depthFromRenderedParent+1,I5(_,_.__depthFromRenderedParent,e))}else for(let y=0,v=m.length;y<v;y++){const _=m[y];Ld(_,i)&&L5(_,e)}}function k5(n,e){const t=e.frameCount,i=Ld(n,t);if(i||n.__usedLastFrame){let s=!1,r=!1;i&&(s=n.__active,e.displayActiveTiles?r=n.__active||n.__visible:r=n.__visible),!n.__contentEmpty&&n.__loadingState===yv&&(n.__wasSetActive!==s&&e.setTileActive(n,s),n.__wasSetVisible!==r&&e.setTileVisible(n,r)),n.__wasSetActive=s,n.__wasSetVisible=r,n.__usedLastFrame=i;const o=n.children;for(let a=0,l=o.length;a<l;a++){const c=o[a];k5(c,e)}}}const WL=(n,e)=>n.__depth!==e.__depth?n.__depth>e.__depth?-1:1:n.__inFrustum!==e.__inFrustum?n.__inFrustum?1:-1:n.__used!==e.__used?n.__used?1:-1:n.__error!==e.__error?n.__error>e.__error?1:-1:n.__distanceFromCamera!==e.__distanceFromCamera?n.__distanceFromCamera>e.__distanceFromCamera?-1:1:0,gTe=n=>1/(n.__depthFromRenderedParent+1);class vTe{get rootTileSet(){const e=this.tileSets[this.rootURL];return!e||e instanceof Promise?null:e}get root(){const e=this.rootTileSet;return e?e.root:null}constructor(e){this.modelData=null,this.tileSets={},this.rootURL=e,this.fetchOptions={},this.preprocessURL=null;const t=new fTe;t.unloadPriorityCallback=gTe;const i=new GL;i.maxJobs=4,i.priorityCallback=WL;const s=new GL;s.maxJobs=1,s.priorityCallback=WL,this.lruCache=t,this.downloadQueue=i,this.parseQueue=s,this.stats={parsing:0,downloading:0,failed:0,inFrustum:0,used:0,active:0,visible:0},this.frameCount=0,this.errorTarget=6,this.errorThreshold=1/0,this.loadSiblings=!0,this.displayActiveTiles=!1,this.maxDepth=1/0,this.stopAtEmptyTiles=!0}traverse(e,t){const s=this.tileSets[this.rootURL];!s||!s.root||LM(s.root,e,t)}update(){const e=this.stats,t=this.lruCache,i=this.tileSets,s=i[this.rootURL];if(this.rootURL in i){if(!s||!s.root)return}else{this.loadRootTileSet(this.rootURL);return}const r=s.root;e.inFrustum=0,e.used=0,e.active=0,e.visible=0,this.frameCount++,R5(r,this),P5(r,this),L5(r,this),k5(r,this),t.scheduleUnload()}parseTile(e,t,i){return null}disposeTile(e){}preprocessNode(e,t,i){if(e.content&&(!("uri"in e.content)&&"url"in e.content&&(e.content.uri=e.content.url,delete e.content.url),e.content.uri&&(e.content.uri=new URL(e.content.uri,i+"/").toString()),e.content.boundingVolume&&!("box"in e.content.boundingVolume||"sphere"in e.content.boundingVolume||"region"in e.content.boundingVolume)&&delete e.content.boundingVolume),e.parent=t,e.children=e.children||[],e.content&&e.content.uri){const r=$L(e.content.uri),o=!!(r&&r.toLowerCase()==="json");e.__externalTileSet=o,e.__contentEmpty=o}else e.__externalTileSet=!1,e.__contentEmpty=!0;e.__distanceFromCamera=1/0,e.__error=1/0,e.__inFrustum=!1,e.__isLeaf=!1,e.__usedLastFrame=!1,e.__used=!1,e.__wasSetVisible=!1,e.__visible=!1,e.__childrenWereVisible=!1,e.__allChildrenLoaded=!1,e.__wasSetActive=!1,e.__active=!1,e.__loadingState=Ly,e.__loadIndex=0,e.__loadAbort=null,e.__depthFromRenderedParent=-1,t===null?(e.__depth=0,e.refine=e.refine||"REPLACE"):(e.__depth=t.__depth+1,e.refine=e.refine||t.refine)}setTileActive(e,t){}setTileVisible(e,t){}calculateError(e){return 0}tileInView(e){return!0}resetFailedTiles(){const e=this.stats;e.failed!==0&&(this.traverse(t=>{t.__loadingState===Kb&&(t.__loadingState=Ly)}),e.failed=0)}fetchTileSet(e,t,i=null){return fetch(e,t).then(s=>{if(s.ok)return s.json();throw new Error(`TilesRenderer: Failed to load tileset "${e}" with status ${s.status} : ${s.statusText}`)}).then(s=>{const r=s.asset.version;console.assert(r==="1.0"||r==="0.0",'asset.version is expected to be a string of "1.0" or "0.0"');let o=e.replace(/\/[^/]*\/?$/,"");return o=new URL(o,window.location.href).toString(),LM(s.root,(a,l)=>this.preprocessNode(a,l,o),null,i,i?i.__depth:0),s})}loadRootTileSet(e){const t=this.tileSets;if(e in t)return t[e]instanceof Error?Promise.reject(t[e]):Promise.resolve(t[e]);{const i=this.fetchTileSet(this.preprocessURL?this.preprocessURL(e):e,this.fetchOptions).then(s=>{t[e]=s});return i.catch(s=>{console.error(s),t[e]=s}),t[e]=i,i}}requestTileContents(e){if(e.__loadingState!==Ly)return;const t=this.stats,i=this.lruCache,s=this.downloadQueue,r=this.parseQueue,o=e.__externalTileSet;i.add(e,d=>{d.__loadingState===ky?(d.__loadAbort.abort(),d.__loadAbort=null):o?d.children.length=0:this.disposeTile(d),d.__loadingState===ky?t.downloading--:d.__loadingState===gS&&t.parsing--,d.__loadingState=Ly,d.__loadIndex++,r.remove(d),s.remove(d)}),e.__loadIndex++;const a=e.__loadIndex,l=new AbortController,c=l.signal;t.downloading++,e.__loadAbort=l,e.__loadingState=ky;const u=d=>{e.__loadIndex===a&&(d.name!=="AbortError"?(r.remove(e),s.remove(e),e.__loadingState===gS?t.parsing--:e.__loadingState===ky&&t.downloading--,t.failed++,console.error(`TilesRenderer : Failed to load tile at url "${e.content.uri}".`),console.error(d),e.__loadingState=Kb):i.remove(e))};o?s.add(e,d=>{if(d.__loadIndex!==a)return Promise.resolve();const h=this.preprocessURL?this.preprocessURL(d.content.uri):d.content.uri;return this.fetchTileSet(h,Object.assign({signal:c},this.fetchOptions),d)}).then(d=>{e.__loadIndex===a&&(t.downloading--,e.__loadAbort=null,e.__loadingState=yv,e.children.push(d.root))}).catch(u):s.add(e,d=>{if(d.__loadIndex!==a)return Promise.resolve();const h=this.preprocessURL?this.preprocessURL(d.content.uri):d.content.uri;return fetch(h,Object.assign({signal:c},this.fetchOptions))}).then(d=>{if(e.__loadIndex===a){if(d.ok)return d.arrayBuffer();throw new Error(`Failed to load model with error code ${d.status}`)}}).then(d=>{if(e.__loadIndex===a)return t.downloading--,t.parsing++,e.__loadAbort=null,e.__loadingState=gS,r.add(e,h=>{if(h.__loadIndex!==a)return Promise.resolve();const f=h.content.uri,m=$L(f);return this.parseTile(d,h,m)})}).then(()=>{e.__loadIndex===a&&(t.parsing--,e.__loadingState=yv,e.__wasSetVisible&&this.setTileVisible(e,!0),e.__wasSetActive&&this.setTileActive(e,!0))}).catch(u)}dispose(){const e=this.lruCache;this.traverse(t=>{e.remove(t)}),this.stats={parsing:0,downloading:0,failed:0,inFrustum:0,used:0,active:0,visible:0},this.frameCount=0}}function O5(n){return new TextDecoder().decode(n)}class Ow{constructor(e,t,i,s){this.buffer=e,this.binOffset=t+i,this.binLength=s;let r=null;if(i!==0){const o=new Uint8Array(e,t,i);r=JSON.parse(O5(o))}else r={};this.header=r}getKeys(){return Object.keys(this.header)}getData(e,t,i=null,s=null){const r=this.header;if(!(e in r))return null;const o=r[e];if(o instanceof Object){if(Array.isArray(o))return o;{const{buffer:a,binOffset:l,binLength:c}=this,u=o.byteOffset||0,d=o.type||s,h=o.componentType||i;if("type"in o&&s&&o.type!==s)throw new Error("FeatureTable: Specified type does not match expected type.");let f;switch(d){case"SCALAR":f=1;break;case"VEC2":f=2;break;case"VEC3":f=3;break;case"VEC4":f=4;break;default:throw new Error(`FeatureTable : Feature type not provided for "${e}".`)}let m;const p=l+u,y=t*f;switch(h){case"BYTE":m=new Int8Array(a,p,y);break;case"UNSIGNED_BYTE":m=new Uint8Array(a,p,y);break;case"SHORT":m=new Int16Array(a,p,y);break;case"UNSIGNED_SHORT":m=new Uint16Array(a,p,y);break;case"INT":m=new Int32Array(a,p,y);break;case"UNSIGNED_INT":m=new Uint32Array(a,p,y);break;case"FLOAT":m=new Float32Array(a,p,y);break;case"DOUBLE":m=new Float64Array(a,p,y);break;default:throw new Error(`FeatureTable : Feature component type not provided for "${e}".`)}if(p+y*m.BYTES_PER_ELEMENT>l+c)throw new Error("FeatureTable: Feature data read outside binary body length.");return m}}else return o}getBuffer(e,t){const{buffer:i,binOffset:s}=this;return i.slice(s+e,s+e+t)}}class oA extends Ow{constructor(e,t,i,s,r){super(e,i,s,r),this.batchSize=t}getData(e,t=null,i=null){return super.getData(e,this.batchSize,t,i)}}class l0{constructor(){this.fetchOptions={},this.workingPath=""}load(e){return fetch(e,this.fetchOptions).then(t=>{if(!t.ok)throw new Error(`Failed to load file "${e}" with status ${t.status} : ${t.statusText}`);return t.arrayBuffer()}).then(t=>(this.workingPath===""&&(this.workingPath=this.workingPathForURL(e)),this.parse(t)))}resolveExternalURL(e){return/^[^\\/]/.test(e)?this.workingPath+"/"+e:e}workingPathForURL(e){const t=e.split(/[\\/]/g);return t.pop(),t.join("/")+"/"}parse(e){throw new Error("LoaderBase: Parse not implemented.")}}function vp(n){let e;if(n instanceof DataView?e=n:e=new DataView(n),String.fromCharCode(e.getUint8(0))==="{")return null;let t="";for(let i=0;i<4;i++)t+=String.fromCharCode(e.getUint8(i));return t}class yTe extends l0{parse(e){const t=new DataView(e),i=vp(t);console.assert(i==="b3dm");const s=t.getUint32(4,!0);console.assert(s===1);const r=t.getUint32(8,!0);console.assert(r===e.byteLength);const o=t.getUint32(12,!0),a=t.getUint32(16,!0),l=t.getUint32(20,!0),c=t.getUint32(24,!0),u=28,d=e.slice(u,u+o+a),h=new Ow(d,0,o,a),f=u+o+a,m=e.slice(f,f+l+c),p=new oA(m,h.getData("BATCH_LENGTH"),0,l,c),y=f+l+c,v=new Uint8Array(e,y,r-y);return{version:s,featureTable:h,batchTable:p,glbBytes:v}}}class aA extends ks{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new STe(t)}),this.register(function(t){return new CTe(t)}),this.register(function(t){return new kTe(t)}),this.register(function(t){return new OTe(t)}),this.register(function(t){return new DTe(t)}),this.register(function(t){return new ETe(t)}),this.register(function(t){return new TTe(t)}),this.register(function(t){return new ATe(t)}),this.register(function(t){return new ITe(t)}),this.register(function(t){return new xTe(t)}),this.register(function(t){return new RTe(t)}),this.register(function(t){return new MTe(t)}),this.register(function(t){return new LTe(t)}),this.register(function(t){return new PTe(t)}),this.register(function(t){return new bTe(t)}),this.register(function(t){return new NTe(t)}),this.register(function(t){return new FTe(t)})}load(e,t,i,s){const r=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=ta.extractUrlBase(e);o=ta.resolveURL(c,this.path)}else o=ta.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){s?s(c):console.error(c),r.manager.itemError(e),r.manager.itemEnd(e)},l=new pr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{r.parse(c,o,function(u){t(u),r.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,s){let r;const o={},a={},l=new TextDecoder;if(typeof e=="string")r=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===D5){try{o[bn.KHR_BINARY_GLTF]=new BTe(e)}catch(d){s&&s(d);return}r=JSON.parse(o[bn.KHR_BINARY_GLTF].content)}else r=JSON.parse(l.decode(e));else r=e;if(r.asset===void 0||r.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new ZTe(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](c);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[d.name]=d,o[d.name]=!0}if(r.extensionsUsed)for(let u=0;u<r.extensionsUsed.length;++u){const d=r.extensionsUsed[u],h=r.extensionsRequired||[];switch(d){case bn.KHR_MATERIALS_UNLIT:o[d]=new wTe;break;case bn.KHR_DRACO_MESH_COMPRESSION:o[d]=new UTe(r,this.dracoLoader);break;case bn.KHR_TEXTURE_TRANSFORM:o[d]=new zTe;break;case bn.KHR_MESH_QUANTIZATION:o[d]=new HTe;break;default:h.indexOf(d)>=0&&a[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(i,s)}parseAsync(e,t){const i=this;return new Promise(function(s,r){i.parse(e,t,s,r)})}}function _Te(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const bn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class bTe{constructor(e){this.parser=e,this.name=bn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,s=t.length;i<s;i++){const r=t[i];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let s=t.cache.get(i);if(s)return s;const r=t.json,l=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let c;const u=new gt(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],qn);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new o0(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new r0(u),c.distance=d;break;case"spot":c=new Rw(u),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,hl(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),s=Promise.resolve(c),t.cache.add(i,s),s}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,r=i.json.nodes[e],a=(r.extensions&&r.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class wTe{constructor(){this.name=bn.KHR_MATERIALS_UNLIT}getMaterialType(){return $n}extendParams(e,t,i){const s=[];e.color=new gt(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const o=r.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],qn),e.opacity=o[3]}r.baseColorTexture!==void 0&&s.push(i.assignTexture(e,"map",r.baseColorTexture,Ei))}return Promise.all(s)}}class xTe{constructor(e){this.parser=e,this.name=bn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name].emissiveStrength;return r!==void 0&&(t.emissiveIntensity=r),Promise.resolve()}}class STe{constructor(e){this.parser=e,this.name=bn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ss}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&r.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&r.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(r.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new tt(a,a)}return Promise.all(r)}}class CTe{constructor(e){this.parser=e,this.name=bn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ss}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}}class MTe{constructor(e){this.parser=e,this.name=bn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ss}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&r.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&r.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(r)}}class ETe{constructor(e){this.parser=e,this.name=bn.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ss}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new gt(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=s.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],qn)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&r.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Ei)),o.sheenRoughnessTexture!==void 0&&r.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class TTe{constructor(e){this.parser=e,this.name=bn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ss}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&r.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}class ATe{constructor(e){this.parser=e,this.name=bn.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ss}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&r.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new gt().setRGB(a[0],a[1],a[2],qn),Promise.all(r)}}class ITe{constructor(e){this.parser=e,this.name=bn.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ss}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class RTe{constructor(e){this.parser=e,this.name=bn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ss}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&r.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new gt().setRGB(a[0],a[1],a[2],qn),o.specularColorTexture!==void 0&&r.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,Ei)),Promise.all(r)}}class PTe{constructor(e){this.parser=e,this.name=bn.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ss}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&r.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(r)}}class LTe{constructor(e){this.parser=e,this.name=bn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ss}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&r.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(r)}}class kTe{constructor(e){this.parser=e,this.name=bn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,s=i.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,o)}}class OTe{constructor(e){this.parser=e,this.name=bn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],a=s.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class DTe{constructor(e){this.parser=e,this.name=bn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],a=s.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class NTe{constructor(e){this.name=bn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const s=i.extensions[this.name],r=this.parser.getDependency("buffer",s.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(a){const l=s.byteOffset||0,c=s.byteLength||0,u=s.count,d=s.byteStride,h=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,d,h,s.mode,s.filter).then(function(f){return f.buffer}):o.ready.then(function(){const f=new ArrayBuffer(u*d);return o.decodeGltfBuffer(new Uint8Array(f),u,d,h,s.mode,s.filter),f})})}else return null}}class FTe{constructor(e){this.name=bn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const s=t.meshes[i.mesh];for(const c of s.primitives)if(c.mode!==fo.TRIANGLES&&c.mode!==fo.TRIANGLE_STRIP&&c.mode!==fo.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),d=u.isGroup?u.children:[u],h=c[0].count,f=[];for(const m of d){const p=new yt,y=new G,v=new Mn,_=new G(1,1,1),b=new Pa(m.geometry,m.material,h);for(let w=0;w<h;w++)l.TRANSLATION&&y.fromBufferAttribute(l.TRANSLATION,w),l.ROTATION&&v.fromBufferAttribute(l.ROTATION,w),l.SCALE&&_.fromBufferAttribute(l.SCALE,w),b.setMatrixAt(w,p.compose(y,v,_));for(const w in l)if(w==="_COLOR_0"){const x=l[w];b.instanceColor=new cr(x.array,x.itemSize,x.normalized)}else w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&m.geometry.setAttribute(w,l[w]);rn.prototype.copy.call(b,m),this.parser.assignFinalMaterial(b),f.push(b)}return u.isGroup?(u.clear(),u.add(...f),u):f[0]}))}}const D5="glTF",dm=12,KL={JSON:1313821514,BIN:5130562};class BTe{constructor(e){this.name=bn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,dm),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==D5)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const s=this.header.length-dm,r=new DataView(e,dm);let o=0;for(;o<s;){const a=r.getUint32(o,!0);o+=4;const l=r.getUint32(o,!0);if(o+=4,l===KL.JSON){const c=new Uint8Array(e,dm+o,a);this.content=i.decode(c)}else if(l===KL.BIN){const c=dm+o;this.body=e.slice(c,c+a)}o+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class UTe{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=bn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,s=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const d=kM[u]||u.toLowerCase();a[d]=o[u]}for(const u in e.attributes){const d=kM[u]||u.toLowerCase();if(o[u]!==void 0){const h=i.accessors[e.attributes[u]],f=Nf[h.componentType];c[d]=f.name,l[d]=h.normalized===!0}}return t.getDependency("bufferView",r).then(function(u){return new Promise(function(d,h){s.decodeDracoFile(u,function(f){for(const m in f.attributes){const p=f.attributes[m],y=l[m];y!==void 0&&(p.normalized=y)}d(f)},a,c,qn,h)})})}}class zTe{constructor(){this.name=bn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class HTe{constructor(){this.name=bn.KHR_MESH_QUANTIZATION}}class N5 extends vh{constructor(e,t,i,s){super(e,t,i,s)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=e*s*3+s;for(let o=0;o!==s;o++)t[o]=i[r+o];return t}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=s-t,d=(i-t)/u,h=d*d,f=h*d,m=e*c,p=m-c,y=-2*f+3*h,v=f-h,_=1-y,b=v-h+d;for(let w=0;w!==a;w++){const x=o[p+w+a],S=o[p+w+l]*u,C=o[m+w+a],T=o[m+w]*u;r[w]=_*x+b*S+y*C+v*T}return r}}const VTe=new Mn;class $Te extends N5{interpolate_(e,t,i,s){const r=super.interpolate_(e,t,i,s);return VTe.fromArray(r).normalize().toArray(r),r}}const fo={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Nf={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},YL={9728:ii,9729:Rn,9984:jv,9985:Ad,9986:Bc,9987:Cr},XL={33071:Sr,33648:qd,10497:Qr},vS={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},kM={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},pc={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},GTe={CUBICSPLINE:void 0,LINEAR:lu,STEP:Qd},yS={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function WTe(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Fl({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Fo})),n.DefaultMaterial}function Uu(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function hl(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function KTe(n,e,t){let i=!1,s=!1,r=!1;for(let c=0,u=e.length;c<u;c++){const d=e[c];if(d.POSITION!==void 0&&(i=!0),d.NORMAL!==void 0&&(s=!0),d.COLOR_0!==void 0&&(r=!0),i&&s&&r)break}if(!i&&!s&&!r)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const d=e[c];if(i){const h=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):n.attributes.position;o.push(h)}if(s){const h=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(h)}if(r){const h=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;l.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],d=c[1],h=c[2];return i&&(n.morphAttributes.position=u),s&&(n.morphAttributes.normal=d),r&&(n.morphAttributes.color=h),n.morphTargetsRelative=!0,n})}function YTe(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,s=t.length;i<s;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function XTe(n){let e;const t=n.extensions&&n.extensions[bn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+_S(t.attributes):e=n.indices+":"+_S(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,s=n.targets.length;i<s;i++)e+=":"+_S(n.targets[i]);return e}function _S(n){let e="";const t=Object.keys(n).sort();for(let i=0,s=t.length;i<s;i++)e+=t[i]+":"+n[t[i]]+";";return e}function OM(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function jTe(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const qTe=new yt;class ZTe{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new _Te,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,s=-1,r=!1,o=-1;if(typeof navigator<"u"){const a=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(a)===!0;const l=a.match(/Version\/(\d+)/);s=i&&l?parseInt(l[1],10):-1,r=a.indexOf("Firefox")>-1,o=r?a.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||i&&s<17||r&&o<98?this.textureLoader=new Iw(this.options.manager):this.textureLoader=new j2(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new pr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,s=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][s.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:s.asset,parser:i,userData:{}};return Uu(r,a,s),hl(a,s),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let s=0,r=t.length;s<r;s++){const o=t[s].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let s=0,r=e.length;s<r;s++){const o=e[s];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const s=i.clone(),r=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())r(u,a.children[c])};return r(i,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const s=e(t[i]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let s=0;s<t.length;s++){const r=e(t[s]);r&&i.push(r)}return i}getDependency(e,t){const i=e+":"+t;let s=this.cache.get(i);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(r){return r.loadNode&&r.loadNode(t)});break;case"mesh":s=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(i,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(r,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[bn.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(r,o){i.load(ta.resolveURL(t.uri,s.path),r,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteLength||0,r=t.byteOffset||0;return i.slice(r,r+s)})}loadAccessor(e){const t=this,i=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const o=vS[s.type],a=Nf[s.componentType],l=s.normalized===!0,c=new a(s.count*o);return Promise.resolve(new dn(c,o,l))}const r=[];return s.bufferView!==void 0?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),s.sparse!==void 0&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(o){const a=o[0],l=vS[s.type],c=Nf[s.componentType],u=c.BYTES_PER_ELEMENT,d=u*l,h=s.byteOffset||0,f=s.bufferView!==void 0?i.bufferViews[s.bufferView].byteStride:void 0,m=s.normalized===!0;let p,y;if(f&&f!==d){const v=Math.floor(h/f),_="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+v+":"+s.count;let b=t.cache.get(_);b||(p=new c(a,v*f,s.count*f/u),b=new Fp(p,f/u),t.cache.add(_,b)),y=new Nl(b,l,h%f/u,m)}else a===null?p=new c(s.count*l):p=new c(a,h,s.count*l),y=new dn(p,l,m);if(s.sparse!==void 0){const v=vS.SCALAR,_=Nf[s.sparse.indices.componentType],b=s.sparse.indices.byteOffset||0,w=s.sparse.values.byteOffset||0,x=new _(o[1],b,s.sparse.count*v),S=new c(o[2],w,s.sparse.count*l);a!==null&&(y=new dn(y.array.slice(),y.itemSize,y.normalized));for(let C=0,T=x.length;C<T;C++){const M=x[C];if(y.setX(M,S[C*l]),l>=2&&y.setY(M,S[C*l+1]),l>=3&&y.setZ(M,S[C*l+2]),l>=4&&y.setW(M,S[C*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return y})}loadTexture(e){const t=this.json,i=this.options,r=t.textures[e].source,o=t.images[r];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,r,a)}loadTextureImage(e,t,i){const s=this,r=this.json,o=r.textures[e],a=r.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const h=(r.samplers||{})[o.sampler]||{};return u.magFilter=YL[h.magFilter]||Rn,u.minFilter=YL[h.minFilter]||Cr,u.wrapS=XL[h.wrapS]||Qr,u.wrapT=XL[h.wrapT]||Qr,s.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const i=this,s=this.json,r=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const o=s.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(d){c=!0;const h=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(h),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(d){return new Promise(function(h,f){let m=h;t.isImageBitmapLoader===!0&&(m=function(p){const y=new Wn(p);y.needsUpdate=!0,h(y)}),t.load(ta.resolveURL(d,r.path),m,void 0,f)})}).then(function(d){return c===!0&&a.revokeObjectURL(l),hl(d,o),d.userData.mimeType=o.mimeType||jTe(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=u,u}assignTexture(e,t,i,s){const r=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),r.extensions[bn.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[bn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=r.associations.get(o);o=r.extensions[bn.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),r.associations.set(o,l)}}return s!==void 0&&(o.colorSpace=s),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const s=t.attributes.tangent===void 0,r=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Up,zi.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Vi,zi.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(s||r||o){let a="ClonedMaterial:"+i.uuid+":";s&&(a+="derivative-tangents:"),r&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),r&&(l.vertexColors=!0),o&&(l.flatShading=!0),s&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return Fl}loadMaterial(e){const t=this,i=this.json,s=this.extensions,r=i.materials[e];let o;const a={},l=r.extensions||{},c=[];if(l[bn.KHR_MATERIALS_UNLIT]){const d=s[bn.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),c.push(d.extendParams(a,r,t))}else{const d=r.pbrMetallicRoughness||{};if(a.color=new gt(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const h=d.baseColorFactor;a.color.setRGB(h[0],h[1],h[2],qn),a.opacity=h[3]}d.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",d.baseColorTexture,Ei)),a.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,a.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}r.doubleSided===!0&&(a.side=ts);const u=r.alphaMode||yS.OPAQUE;if(u===yS.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===yS.MASK&&(a.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&o!==$n&&(c.push(t.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new tt(1,1),r.normalTexture.scale!==void 0)){const d=r.normalTexture.scale;a.normalScale.set(d,d)}if(r.occlusionTexture!==void 0&&o!==$n&&(c.push(t.assignTexture(a,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&o!==$n){const d=r.emissiveFactor;a.emissive=new gt().setRGB(d[0],d[1],d[2],qn)}return r.emissiveTexture!==void 0&&o!==$n&&c.push(t.assignTexture(a,"emissiveMap",r.emissiveTexture,Ei)),Promise.all(c).then(function(){const d=new o(a);return r.name&&(d.name=r.name),hl(d,r),t.associations.set(d,{materials:e}),r.extensions&&Uu(s,d,r),d})}createUniqueName(e){const t=Tn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,s=this.primitiveCache;function r(a){return i[bn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return jL(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=XTe(c),d=s[u];if(d)o.push(d.promise);else{let h;c.extensions&&c.extensions[bn.KHR_DRACO_MESH_COMPRESSION]?h=r(c):h=jL(new jt,c,t),s[u]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,s=this.extensions,r=i.meshes[e],o=r.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?WTe(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],d=[];for(let f=0,m=u.length;f<m;f++){const p=u[f],y=o[f];let v;const _=c[f];if(y.mode===fo.TRIANGLES||y.mode===fo.TRIANGLE_STRIP||y.mode===fo.TRIANGLE_FAN||y.mode===void 0)v=r.isSkinnedMesh===!0?new hw(p,_):new ut(p,_),v.isSkinnedMesh===!0&&v.normalizeSkinWeights(),y.mode===fo.TRIANGLE_STRIP?v.geometry=$b(v.geometry,nw):y.mode===fo.TRIANGLE_FAN&&(v.geometry=$b(v.geometry,nv));else if(y.mode===fo.LINES)v=new gr(p,_);else if(y.mode===fo.LINE_STRIP)v=new gs(p,_);else if(y.mode===fo.LINE_LOOP)v=new fw(p,_);else if(y.mode===fo.POINTS)v=new n0(p,_);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+y.mode);Object.keys(v.geometry.morphAttributes).length>0&&YTe(v,r),v.name=t.createUniqueName(r.name||"mesh_"+e),hl(v,r),y.extensions&&Uu(s,v,y),t.assignFinalMaterial(v),d.push(v)}for(let f=0,m=d.length;f<m;f++)t.associations.set(d[f],{meshes:e,primitives:f});if(d.length===1)return r.extensions&&Uu(s,d[0],r),d[0];const h=new As;r.extensions&&Uu(s,h,r),t.associations.set(h,{meshes:e});for(let f=0,m=d.length;f<m;f++)h.add(d[f]);return h})}loadCamera(e){let t;const i=this.json.cameras[e],s=i[i.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new Yi(kc.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):i.type==="orthographic"&&(t=new eo(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),hl(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let s=0,r=t.joints.length;s<r;s++)i.push(this._loadNodeShallow(t.joints[s]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(s){const r=s.pop(),o=s,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const d=o[c];if(d){a.push(d);const h=new yt;r!==null&&h.fromArray(r.array,c*16),l.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new Bp(a,l)})}loadAnimation(e){const t=this.json,i=this,s=t.animations[e],r=s.name?s.name:"animation_"+e,o=[],a=[],l=[],c=[],u=[];for(let d=0,h=s.channels.length;d<h;d++){const f=s.channels[d],m=s.samplers[f.sampler],p=f.target,y=p.node,v=s.parameters!==void 0?s.parameters[m.input]:m.input,_=s.parameters!==void 0?s.parameters[m.output]:m.output;p.node!==void 0&&(o.push(this.getDependency("node",y)),a.push(this.getDependency("accessor",v)),l.push(this.getDependency("accessor",_)),c.push(m),u.push(p))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(d){const h=d[0],f=d[1],m=d[2],p=d[3],y=d[4],v=[];for(let _=0,b=h.length;_<b;_++){const w=h[_],x=f[_],S=m[_],C=p[_],T=y[_];if(w===void 0)continue;w.updateMatrix&&w.updateMatrix();const M=i._createAnimationTracks(w,x,S,C,T);if(M)for(let E=0;E<M.length;E++)v.push(M[E])}return new nh(r,void 0,v)})}createNodeMesh(e){const t=this.json,i=this,s=t.nodes[e];return s.mesh===void 0?null:i.getDependency("mesh",s.mesh).then(function(r){const o=i._getNodeRef(i.meshCache,s.mesh,r);return s.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=s.weights.length;l<c;l++)a.morphTargetInfluences[l]=s.weights[l]}),o})}loadNode(e){const t=this.json,i=this,s=t.nodes[e],r=i._loadNodeShallow(e),o=[],a=s.children||[];for(let c=0,u=a.length;c<u;c++)o.push(i.getDependency("node",a[c]));const l=s.skin===void 0?Promise.resolve(null):i.getDependency("skin",s.skin);return Promise.all([r,Promise.all(o),l]).then(function(c){const u=c[0],d=c[1],h=c[2];h!==null&&u.traverse(function(f){f.isSkinnedMesh&&f.bind(h,qTe)});for(let f=0,m=d.length;f<m;f++)u.add(d[f]);return u})}_loadNodeShallow(e){const t=this.json,i=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const r=t.nodes[e],o=r.name?s.createUniqueName(r.name):"",a=[],l=s._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),r.camera!==void 0&&a.push(s.getDependency("camera",r.camera).then(function(c){return s._getNodeRef(s.cameraCache,r.camera,c)})),s._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(r.isBone===!0?u=new t0:c.length>1?u=new As:c.length===1?u=c[0]:u=new rn,u!==c[0])for(let d=0,h=c.length;d<h;d++)u.add(c[d]);if(r.name&&(u.userData.name=r.name,u.name=o),hl(u,r),r.extensions&&Uu(i,u,r),r.matrix!==void 0){const d=new yt;d.fromArray(r.matrix),u.applyMatrix4(d)}else r.translation!==void 0&&u.position.fromArray(r.translation),r.rotation!==void 0&&u.quaternion.fromArray(r.rotation),r.scale!==void 0&&u.scale.fromArray(r.scale);return s.associations.has(u)||s.associations.set(u,{}),s.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],s=this,r=new As;i.name&&(r.name=s.createUniqueName(i.name)),hl(r,i),i.extensions&&Uu(t,r,i);const o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(s.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,d=l.length;u<d;u++)r.add(l[u]);const c=u=>{const d=new Map;for(const[h,f]of s.associations)(h instanceof zi||h instanceof Wn)&&d.set(h,f);return u.traverse(h=>{const f=s.associations.get(h);f!=null&&d.set(h,f)}),d};return s.associations=c(r),r})}_createAnimationTracks(e,t,i,s,r){const o=[],a=e.name?e.name:e.uuid,l=[];pc[r.path]===pc.weights?e.traverse(function(h){h.morphTargetInfluences&&l.push(h.name?h.name:h.uuid)}):l.push(a);let c;switch(pc[r.path]){case pc.weights:c=Bl;break;case pc.rotation:c=Ul;break;case pc.position:case pc.scale:c=zl;break;default:switch(i.itemSize){case 1:c=Bl;break;case 2:case 3:default:c=zl;break}break}const u=s.interpolation!==void 0?GTe[s.interpolation]:lu,d=this._getArrayFromAccessor(i);for(let h=0,f=l.length;h<f;h++){const m=new c(l[h]+"."+pc[r.path],t.array,d,u);s.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(m),o.push(m)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=OM(t.constructor),s=new Float32Array(t.length);for(let r=0,o=t.length;r<o;r++)s[r]=t[r]*i;t=s}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const s=this instanceof Ul?$Te:N5;return new s(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function JTe(n,e,t){const i=e.attributes,s=new Nn;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(s.set(new G(l[0],l[1],l[2]),new G(c[0],c[1],c[2])),a.normalized){const u=OM(Nf[a.componentType]);s.min.multiplyScalar(u),s.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=e.targets;if(r!==void 0){const a=new G,l=new G;for(let c=0,u=r.length;c<u;c++){const d=r[c];if(d.POSITION!==void 0){const h=t.json.accessors[d.POSITION],f=h.min,m=h.max;if(f!==void 0&&m!==void 0){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(m[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(m[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(m[2]))),h.normalized){const p=OM(Nf[h.componentType]);l.multiplyScalar(p)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(a)}n.boundingBox=s;const o=new bi;s.getCenter(o.center),o.radius=s.min.distanceTo(s.max)/2,n.boundingSphere=o}function jL(n,e,t){const i=e.attributes,s=[];function r(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=kM[o]||o.toLowerCase();a in n.attributes||s.push(r(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});s.push(o)}return Cn.workingColorSpace!==qn&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Cn.workingColorSpace}" not supported.`),hl(n,e),JTe(n,e,t),Promise.all(s).then(function(){return e.targets!==void 0?KTe(n,e.targets,t):n})}class F5 extends yTe{constructor(e=bh,t){super(),this.manager=e,this.adjustmentTransform=new yt,this.tilesRenderer=t}parse(e){const t=super.parse(e),i=t.glbBytes.slice().buffer;return new Promise((s,r)=>{const o=this.manager,a=this.fetchOptions,l=this.tilesRenderer,c=o.getHandler("path.gltf")||new aA(o);a.credentials==="include"&&a.mode==="cors"&&c.setCrossOrigin("use-credentials"),"credentials"in a&&c.setWithCredentials(a.credentials==="include"),a.headers&&c.setRequestHeader(a.headers);let u=this.workingPath;!/[\\/]$/.test(u)&&u.length&&(u+="/");const d=this.adjustmentTransform;c.parse(i,u,h=>{const{batchTable:f,featureTable:m}=t,{scene:p}=h,y=m.getData("RTC_CENTER");y&&(p.position.x+=y[0],p.position.y+=y[1],p.position.z+=y[2]);let v=null;f&&f.header&&f.header.extensions&&f.header.extensions["3DTILES_batch_table_hierarchy"]!=null&&(v=f.header.extensions["3DTILES_batch_table_hierarchy"].classes);let _=new Map;const b=4;p.traverse(function(w){if(w instanceof ut){w.orignMaterial=w.material,w.pickMaterial=Hn.pickMaterial,w.material.vertexColors=!0;let x=w.geometry.getAttribute("position").count,S=new dn(new Uint8Array(b*x).fill(255),b,!0),C=new dn(new Int32Array(x),1),T=w.geometry.index,M=w.geometry.getAttribute("_batchid");for(let E=0;E<T.count;E++){let A=T.getX(E),I=Math.round(M.getX(A)),B,F;_.has(I)?(F=_.get(I),F.mapbatchData.has(w.material)?B=F.mapbatchData.get(w.material):(B=new Gb(w,F.id),F.addMeshData(B),F.mapbatchData.set(w.material,B))):(F=new Qo(l.modelData),v&&v[I]&&(F.useData=v[I].instances,F.useData.UniqueId&&(F.uuid=F.useData.UniqueId[0],l.modelData.allUUIDData.set(F.uuid,F)),F.useData.name&&(F.name=F.useData.name[0])),F.mapbatchData=new Map,l.modelData.allElementData.set(F.id,F),_.set(I,F),B=new Gb(w,F.id),F.addMeshData(B),F.mapbatchData.set(w.material,B)),C.setX(A,F.id),B.indexs.push(A)}w.geometry.setAttribute("color",S),w.geometry.setAttribute("elementID",C),w.geometry.deleteAttribute("_batchid")}});for(const w of _.values())w.mapbatchData.clear(),w.mapbatchData=null;h.scene.updateMatrix(),h.scene.matrix.multiply(d),h.scene.matrix.decompose(h.scene.position,h.scene.quaternion,h.scene.scale),s(h)},r)})}}class QTe extends l0{parse(e){const t=new DataView(e),i=vp(t);console.assert(i==="pnts");const s=t.getUint32(4,!0);console.assert(s===1);const r=t.getUint32(8,!0);console.assert(r===e.byteLength);const o=t.getUint32(12,!0),a=t.getUint32(16,!0),l=t.getUint32(20,!0),c=t.getUint32(24,!0),u=28,d=e.slice(u,u+o+a),h=new Ow(d,0,o,a),f=u+o+a,m=e.slice(f,f+l+c),p=new oA(m,h.getData("BATCH_LENGTH")||h.getData("POINTS_LENGTH"),0,l,c);return Promise.resolve({version:s,featureTable:h,batchTable:p})}}const qL={RGB:"color",POSITION:"position"};class B5 extends QTe{constructor(e=bh){super(),this.manager=e}parse(e){return super.parse(e).then(async t=>{const{featureTable:i}=t,s=new Up,r=i.header.extensions;let o;if(r&&r["3DTILES_draco_point_compression"]){const{byteOffset:c,byteLength:u,properties:d}=r["3DTILES_draco_point_compression"],h=this.manager.getHandler("draco.drc");if(h==null)throw new Error("PNTSLoader: dracoLoader not available.");const f={};for(const y in d)if(y in qL&&y in d){const v=qL[y];f[v]=d[y]}const m={attributeIDs:f,attributeTypes:{position:"Float32Array",color:"Uint8Array"},useUniqueIDs:!0},p=i.getBuffer(c,u);o=await h.decodeGeometry(p,m),o.attributes.color&&(s.vertexColors=!0)}else{const c=i.getData("POINTS_LENGTH"),u=i.getData("POSITION",c,"FLOAT","VEC3"),d=i.getData("RGB",c,"UNSIGNED_BYTE","VEC3");o=new jt,o.setAttribute("position",new dn(u,3,!1)),d!==null&&(o.setAttribute("color",new dn(d,3,!0)),s.vertexColors=!0)}["QUANTIZED_VOLUME_OFFSET","QUANTIZED_VOLUME_SCALE","CONSTANT_RGBA","BATCH_LENGTH","POSITION_QUANTIZED","RGBA","RGB565","NORMAL","NORMAL_OCT16P"].forEach(c=>{c in i.header&&console.warn(`PNTSLoader: Unsupported FeatureTable feature "${c}" detected.`)});const a=new n0(o,s);t.scene=a,t.scene.featureTable=i;const l=i.getData("RTC_CENTER");return l&&(t.scene.position.x+=l[0],t.scene.position.y+=l[1],t.scene.position.z+=l[2]),t})}}class e2e extends l0{parse(e){const t=new DataView(e),i=vp(t);console.assert(i==="i3dm");const s=t.getUint32(4,!0);console.assert(s===1);const r=t.getUint32(8,!0);console.assert(r===e.byteLength);const o=t.getUint32(12,!0),a=t.getUint32(16,!0),l=t.getUint32(20,!0),c=t.getUint32(24,!0),u=t.getUint32(28,!0),d=32,h=e.slice(d,d+o+a),f=new Ow(h,0,o,a),m=d+o+a,p=e.slice(m,m+l+c),y=new oA(p,f.getData("INSTANCES_LENGTH"),0,l,c),v=m+l+c,_=new Uint8Array(e,v,r-v);let b=null,w=null;if(u)b=_,w=Promise.resolve();else{const x=this.resolveExternalURL(O5(_));w=fetch(x,this.fetchOptions).then(S=>{if(!S.ok)throw new Error(`I3DMLoaderBase : Failed to load file "${x}" with status ${S.status} : ${S.statusText}`);return S.arrayBuffer()}).then(S=>{b=new Uint8Array(S)})}return w.then(()=>({version:s,featureTable:f,batchTable:y,glbBytes:b}))}}const ZL=new G,bS=new G,wS=new G,JL=new G,xS=new Mn,Oy=new G,Dy=new yt;class U5 extends e2e{constructor(e=bh,t){super(),this.manager=e,this.adjustmentTransform=new yt,this.tilesRenderer=t}resolveExternalURL(e){return this.manager.resolveURL(super.resolveExternalURL(e))}parse(e){return super.parse(e).then(t=>{const{featureTable:i,batchTable:s}=t,r=t.glbBytes.slice().buffer;return new Promise((o,a)=>{const l=this.fetchOptions,c=this.tilesRenderer,u=this.manager,d=u.getHandler("path.gltf")||new aA(u);l.credentials==="include"&&l.mode==="cors"&&d.setCrossOrigin("use-credentials"),"credentials"in l&&d.setWithCredentials(l.credentials==="include"),l.headers&&d.setRequestHeader(l.headers);let h=this.workingPath;/[\\/]$/.test(h)||(h+="/");const f=this.adjustmentTransform;d.parse(r,h,m=>{const p=i.getData("INSTANCES_LENGTH"),y=i.getData("POSITION",p,"FLOAT","VEC3"),v=i.getData("NORMAL_UP",p,"FLOAT","VEC3"),_=i.getData("NORMAL_RIGHT",p,"FLOAT","VEC3"),b=i.getData("SCALE_NON_UNIFORM",p,"FLOAT","VEC3"),w=i.getData("SCALE",p,"FLOAT","SCALAR"),x=new Map,S=[];m.scene.traverse(A=>{if(A.isMesh){const{geometry:I,material:B}=A;let F=A.matrix,U=O=>{O.parent&&(F=F.premultiply(O.parent.matrix),U(O.parent))};U(A),I.applyMatrix4(F),B.vertexColors=!0;const P=new Pa(I,B,p);P.position.copy(A.position),P.rotation.copy(A.rotation),P.scale.copy(A.scale),P.orignMaterial=B,P.pickMaterial=Hn.pickMaterial,S.push(P),x.set(A,P)}}),m.scene.clear();const C=new G;x.forEach((A,I)=>{m.scene.add(A)});let T=null;s&&s.header&&s.header.extensions&&s.header.extensions["3DTILES_batch_table_hierarchy"]!=null&&(T=s.header.extensions["3DTILES_batch_table_hierarchy"].classes);const M=new cr(new Int32Array(p),1),E=new cr(new Uint8Array(p*4).fill(255),4,!0);for(let A=0;A<p;A++){JL.set(y[A*3+0]-C.x,y[A*3+1]-C.y,y[A*3+2]-C.z),v?(bS.set(v[A*3+0],v[A*3+1],v[A*3+2]),wS.set(_[A*3+0],_[A*3+1],_[A*3+2]),ZL.crossVectors(wS,bS).normalize(),Dy.makeBasis(wS,bS,ZL),xS.setFromRotationMatrix(Dy)):xS.set(0,0,0,1),w?Oy.setScalar(w[A]):b?Oy.set(b[A*3+0],b[A*3+1],b[A*3+2]):Oy.set(1,1,1),Dy.compose(JL,xS,Oy).multiply(f);let I=new Qo(c.modelData);T&&T[A]&&(I.useData=T[A].instances,I.useData.UniqueId&&(I.uuid=I.useData.UniqueId[0],c.modelData.allUUIDData.set(I.uuid,I)),I.useData.name&&(I.name=I.useData.name[0])),c.modelData.allElementData.set(I.id,I),M.setX(A,I.id);for(let B=0,F=S.length;B<F;B++){const U=S[B];U.setMatrixAt(A,Dy);let P=new Oc(U,A);I.addMeshData(P)}}for(let A=0,I=S.length;A<I;A++){const B=S[A];B.geometry.setAttribute("elementID",M),B.geometry.setAttribute("color",E)}o(m)},a)})})}}class t2e extends l0{parse(e){const t=new DataView(e),i=vp(t);console.assert(i==="cmpt",'CMPTLoader: The magic bytes equal "cmpt".');const s=t.getUint32(4,!0);console.assert(s===1,'CMPTLoader: The version listed in the header is "1".');const r=t.getUint32(8,!0);console.assert(r===e.byteLength,"CMPTLoader: The contents buffer length listed in the header matches the file.");const o=t.getUint32(12,!0),a=[];let l=16;for(let c=0;c<o;c++){const u=new DataView(e,l,12),d=vp(u),h=u.getUint32(4,!0),f=u.getUint32(8,!0),m=new Uint8Array(e,l,f);a.push({type:d,buffer:m,version:h}),l+=f}return{version:s,tiles:a}}}class n2e extends t2e{constructor(e=bh,t){super(),this.manager=e,this.adjustmentTransform=new yt,this.tilesRenderer=t}parse(e){const t=super.parse(e),i=this.manager,s=this.adjustmentTransform,r=[];for(const o in t.tiles){const{type:a,buffer:l}=t.tiles[o];switch(a){case"b3dm":{const c=l.slice(),u=new F5(i,this.tilesRenderer);u.workingPath=this.workingPath,u.fetchOptions=this.fetchOptions,u.adjustmentTransform.copy(s);const d=u.parse(c.buffer);r.push(d);break}case"pnts":{const c=l.slice(),u=new B5(i);u.workingPath=this.workingPath,u.fetchOptions=this.fetchOptions;const d=u.parse(c.buffer);r.push(d);break}case"i3dm":{const c=l.slice(),u=new U5(i,this.tilesRenderer);u.workingPath=this.workingPath,u.fetchOptions=this.fetchOptions,u.adjustmentTransform.copy(s);const d=u.parse(c.buffer);r.push(d);break}}}return Promise.all(r).then(o=>{const a=new As;return o.forEach(l=>{a.add(l.scene)}),{tiles:o,scene:a}})}}class i2e{constructor(){this.name="CESIUM_RTC"}afterRoot(e){if(e.parser.json.extensions&&e.parser.json.extensions.CESIUM_RTC){const{center:t}=e.parser.json.extensions.CESIUM_RTC;t&&(e.scene.position.x+=t[0],e.scene.position.y+=t[1],e.scene.position.z+=t[2])}}}class s2e extends l0{constructor(e=bh){super(),this.manager=e}parse(e){return new Promise((t,i)=>{const s=this.manager,r=this.fetchOptions;let o=s.getHandler("path.gltf")||s.getHandler("path.glb");o||(o=new aA(s),o.register(()=>new i2e),r.credentials==="include"&&r.mode==="cors"&&o.setCrossOrigin("use-credentials"),"credentials"in r&&o.setWithCredentials(r.credentials==="include"),r.headers&&o.setRequestHeader(r.headers));let a=o.resourcePath||o.path||this.workingPath;!/[\\/]$/.test(a)&&a.length&&(a+="/"),o.parse(e,a,l=>{t(l)},i)})}}const Ny=new yt;class r2e extends As{constructor(e){super(),this.name="TilesRenderer.TilesGroup",this.tilesRenderer=e}raycast(e,t){this.tilesRenderer.optimizeRaycast&&this.tilesRenderer.raycast(e,t)}updateMatrixWorld(e){if(this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldNeedsUpdate||e){this.parent===null?Ny.copy(this.matrix):Ny.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1;const t=Ny.elements,i=this.matrixWorld.elements;let s=!1;for(let r=0;r<16;r++){const o=t[r],a=i[r];if(Math.abs(o-a)>Number.EPSILON){s=!0;break}}if(s){this.matrixWorld.copy(Ny);const r=this.children;for(let o=0,a=r.length;o<a;o++)r[o].updateMatrixWorld()}}}}function QL(n){const{x:e,y:t,z:i}=n;n.x=i,n.y=e,n.z=t}function o2e(n){return-n+Math.PI/2}const Fy=new ug,hm=new G,zu=new G;let a2e=class{constructor(e=1,t=1,i=1){this.radius=new G(e,t,i)}getCartographicToPosition(e,t,i,s){const r=this.radius;Fy.set(1,o2e(e),t),hm.setFromSpherical(Fy).normalize(),QL(hm),zu.copy(hm),zu.x*=r.x**2,zu.y*=r.y**2,zu.z*=r.z**2;const o=Math.sqrt(hm.dot(zu));return zu.divideScalar(o),s.copy(zu).addScaledVector(hm,i)}getCartographicToNormal(e,t,i){return Fy.set(1,-e+Math.PI/2,t),i.setFromSpherical(Fy).normalize(),QL(i),i}getPositionToNormal(e,t){const i=this.radius;return t.copy(e),t.x/=i.x**2,t.y/=i.y**2,t.z/=i.z**2,t.normalize(),t}};const Sc=Math.PI,By=Sc/2,fm=new G,jh=new G,qh=new G,ek=new yt;let Am=0;const SS=[];function l2e(n=!1){return n?(SS[Am]||(SS[Am]=new G),Am++,SS[Am-1]):new G}function tk(){Am=0}class c2e extends a2e{constructor(e,t,i,s=-By,r=By,o=0,a=2*Sc,l=0,c=0){super(e,t,i),this.latStart=s,this.latEnd=r,this.lonStart=o,this.lonEnd=a,this.heightStart=l,this.heightEnd=c}_getPoints(e=!1){const{latStart:t,latEnd:i,lonStart:s,lonEnd:r,heightStart:o,heightEnd:a}=this,l=kc.mapLinear(.5,0,1,t,i),c=kc.mapLinear(.5,0,1,s,r),u=Math.floor(s/By)*By,d=[[-Sc/2,0],[Sc/2,0],[0,u],[0,u+Sc/2],[0,u+Sc],[0,u+3*Sc/2],[t,r],[i,r],[t,s],[i,s],[0,s],[0,r],[l,c],[t,c],[i,c],[l,s],[l,r]],h=[],f=d.length;for(let m=0;m<=1;m++){const p=kc.mapLinear(m,0,1,o,a);for(let y=0,v=f;y<v;y++){const[_,b]=d[y];if(_>=t&&_<=i&&b>=s&&b<=r){const w=l2e(e);h.push(w),this.getCartographicToPosition(_,b,p,w)}}}return h}getBoundingBox(e,t){tk();const{latStart:i,latEnd:s,lonStart:r,lonEnd:o}=this;if(s-i<Sc/2){const c=kc.mapLinear(.5,0,1,i,s),u=kc.mapLinear(.5,0,1,r,o);this.getCartographicToNormal(c,u,qh),jh.set(0,0,1),fm.crossVectors(jh,qh),jh.crossVectors(fm,qh),t.makeBasis(fm,jh,qh)}else fm.set(1,0,0),jh.set(0,1,0),qh.set(0,0,1),t.makeBasis(fm,jh,qh);ek.copy(t).invert();const l=this._getPoints(!0);for(let c=0,u=l.length;c<u;c++)l[c].applyMatrix4(ek);e.makeEmpty(),e.setFromPoints(l)}getBoundingSphere(e,t){tk();const i=this._getPoints(!0);e.makeEmpty(),e.setFromPoints(i,t)}}const Ff=new bi,bl=new yt,nk=new G,Zh=new G,nd=new fh,oo=[];function CS(n,e){return n.distance-e.distance}function DM(n,e,t){n.traverse(i=>{Object.getPrototypeOf(i).raycast.call(i,e,t)})}function z5(n,e,t,i){if(t.has(n))if(DM(n.cached.scene,i,oo),oo.length>0){oo.length>1&&oo.sort(CS);const l=oo[0];return oo.length=0,l}else return null;const s=[],r=n.children;for(let l=0,c=r.length;l<c;l++){const u=r[l],d=u.cached,h=e.matrixWorld;bl.copy(h);const f=d.sphere;if(f&&(Ff.copy(f),Ff.applyMatrix4(bl),!i.ray.intersectsSphere(Ff)))continue;const m=d.box,p=d.boxTransform;if(m)if(bl.multiply(p).invert(),nd.copy(i.ray),nd.applyMatrix4(bl),nd.intersectBox(m,nk)){Zh.setFromMatrixScale(bl);const y=Zh.x;Math.abs(Math.max(Zh.x-Zh.y,Zh.x-Zh.z))>1e-6&&console.warn("ThreeTilesRenderer : Non uniform scale used for tile which may cause issues when raycasting.");const v={distance:1/0,tile:null};s.push(v),m.containsPoint(nd.origin)?v.distance=0:v.distance=nk.distanceToSquared(nd.origin)*y*y,v.tile=u}else continue}s.sort(CS);let o=1/0,a=null;for(let l=0,c=s.length;l<c;l++){const u=s[l];if(u.distance>o)break;{const h=u.tile,f=h.cached.scene;let m=null;if(t.has(h)?(DM(f,i,oo),oo.length>0&&(oo.length>1&&oo.sort(CS),m=oo[0])):m=z5(h,e,t,i),m){const p=m.distance*m.distance;p<o&&(o=p,a=m),oo.length=0}}}return a}function H5(n,e,t,i,s){const r=n.cached,o=e.matrixWorld;bl.copy(o);const a=r.sphere;if(a&&(Ff.copy(a),Ff.applyMatrix4(bl),!i.ray.intersectsSphere(Ff)))return;const l=r.box,c=r.boxTransform;if(l&&(bl.multiply(c).invert(),nd.copy(i.ray).applyMatrix4(bl),!nd.intersectsBox(l)))return;const u=r.scene;if(t.has(n)){DM(u,i,s);return}const d=n.children;for(let h=0,f=d.length;h<f;h++)H5(d[h],e,t,i,s)}const V5=Symbol("INITIAL_FRUSTUM_CULLED"),Wo=new yt,MS=new yt,Ko=new G,ol=new G,al=new G,ll=new G,u2e=new G(1,0,0),d2e=new G(0,1,0);function ik(n,e){n.traverse(t=>{t.frustumCulled=t[V5]&&e})}class h2e extends vTe{get autoDisableRendererCulling(){return this._autoDisableRendererCulling}set autoDisableRendererCulling(e){this._autoDisableRendererCulling!==e&&(super._autoDisableRendererCulling=e,this.forEachLoadedModel(t=>{ik(t,!e)}))}constructor(...e){super(...e),this.group=new r2e(this),this.cameras=[],this.cameraMap=new Map,this.cameraInfo=[],this.activeTiles=new Set,this.visibleTiles=new Set,this.notVisibleTiles=new Set,this._autoDisableRendererCulling=!0,this.optimizeRaycast=!0,this.onLoadTileSet=null,this.onLoadModel=null,this.onDisposeModel=null,this.onTileVisibilityChange=null;const t=new Aw;t.setURLModifier(s=>this.preprocessURL?this.preprocessURL(s):s),this.manager=t;const i=this;this._overridenRaycast=function(s,r){i.optimizeRaycast||Object.getPrototypeOf(this).raycast.call(this,s,r)}}getBounds(e){if(!this.root)return!1;const t=this.root.cached,i=t.box,s=t.boxTransform;return i?(e.copy(i),e.applyMatrix4(s),!0):!1}getOrientedBounds(e,t){if(!this.root)return!1;const i=this.root.cached,s=i.box,r=i.boxTransform;return s?(e.copy(s),t.copy(r),!0):!1}getBoundingSphere(e){if(!this.root)return!1;const t=this.root.cached.sphere;return t?(e.copy(t),!0):!1}forEachLoadedModel(e){this.traverse(t=>{const i=t.cached.scene;i&&e(i,t)})}raycast(e,t){if(this.root)if(e.firstHitOnly){const i=z5(this.root,this.group,this.activeTiles,e);i&&t.push(i)}else H5(this.root,this.group,this.activeTiles,e,t)}hasCamera(e){return this.cameraMap.has(e)}setCamera(e){const t=this.cameras,i=this.cameraMap;return i.has(e)?!1:(i.set(e,new tt),t.push(e),!0)}setResolution(e,t,i){const s=this.cameraMap;return s.has(e)?(t instanceof tt?s.get(e).copy(t):s.get(e).set(t,i),!0):!1}setResolutionFromRenderer(e,t){const i=this.cameraMap;if(!i.has(e))return!1;const s=i.get(e);return t.getSize(s),s.multiplyScalar(t.getPixelRatio()),!0}deleteCamera(e){const t=this.cameras,i=this.cameraMap;if(i.has(e)){const s=t.indexOf(e);return t.splice(s,1),i.delete(e),!0}return!1}fetchTileSet(e,...t){const i=super.fetchTileSet(e,...t);return i.then(s=>{this.onLoadTileSet&&Promise.resolve().then(()=>{this.onLoadTileSet(s,e)})}),i}update(){const e=this.group,t=this.cameras,i=this.cameraMap,s=this.cameraInfo;if(t.length===0){console.warn("TilesRenderer: no cameras defined. Cannot update 3d tiles.");return}for(;s.length>t.length;)s.pop();for(;s.length<t.length;)s.push({frustum:new ph,isOrthographic:!1,sseDenominator:-1,position:new G,invScale:-1,pixelSize:0});MS.copy(e.matrixWorld).invert(),Ko.setFromMatrixScale(MS);const r=Ko.x;Math.abs(Math.max(Ko.x-Ko.y,Ko.x-Ko.z))>1e-6&&console.warn("ThreeTilesRenderer : Non uniform scale used for tile which may cause issues when calculating screen space error.");for(let o=0,a=s.length;o<a;o++){const l=t[o],c=s[o],u=c.frustum,d=c.position,h=i.get(l);(h.width===0||h.height===0)&&console.warn("TilesRenderer: resolution for camera error calculation is not set.");const f=l.projectionMatrix.elements;if(c.isOrthographic=f[15]===1,c.isOrthographic){const m=2/f[0],p=2/f[5];c.pixelSize=Math.max(p/h.height,m/h.width)}else c.sseDenominator=2/f[5]/h.height;c.invScale=r,Wo.copy(e.matrixWorld),Wo.premultiply(l.matrixWorldInverse),Wo.premultiply(l.projectionMatrix),u.setFromProjectionMatrix(Wo),d.set(0,0,0),d.applyMatrix4(l.matrixWorld),d.applyMatrix4(MS)}super.update()}preprocessNode(e,t,i){e.parentTile=t,e.tileSetDir=i,super.preprocessNode(e,t,i);const s=new yt;t&&s.premultiply(t.cached.transform);const r=new yt().copy(s).invert();let o=null,a=null,l=null;if("box"in e.boundingVolume){const d=e.boundingVolume.box;o=new Nn,a=new yt,l=new yt,ol.set(d[3],d[4],d[5]),al.set(d[6],d[7],d[8]),ll.set(d[9],d[10],d[11]);const h=ol.length(),f=al.length(),m=ll.length();ol.normalize(),al.normalize(),ll.normalize(),h===0&&ol.crossVectors(al,ll),f===0&&al.crossVectors(ol,ll),m===0&&ll.crossVectors(ol,al),a.set(ol.x,al.x,ll.x,d[0],ol.y,al.y,ll.y,d[1],ol.z,al.z,ll.z,d[2],0,0,0,1),a.premultiply(s),l.copy(a).invert(),o.min.set(-h,-f,-m),o.max.set(h,f,m)}let c=null;if("sphere"in e.boundingVolume){const d=e.boundingVolume.sphere;c=new bi,c.center.set(d[0],d[1],d[2]),c.radius=d[3],c.applyMatrix4(s)}else if("box"in e.boundingVolume){const d=e.boundingVolume.box;c=new bi,o.getBoundingSphere(c),c.center.set(d[0],d[1],d[2]),c.applyMatrix4(s)}let u=null;if("region"in e.boundingVolume){const d=e.boundingVolume.region,[h,f,m,p,y,v]=d;u=new c2e(Yb,Yb,mTe,f,p,h,m,y,v),c===null&&(c=new bi,u.getBoundingSphere(c)),o===null&&(o=new Nn,a=new yt,l=new yt,u.getBoundingBox(o,a),l.copy(a).invert())}e.cached={loadIndex:0,transform:s,transformInverse:r,active:!1,inFrustum:[],box:o,boxTransform:a,boxTransformInverse:l,sphere:c,region:u,scene:null,geometry:null,material:null}}parseTile(e,t,i){t._loadIndex=t._loadIndex||0,t._loadIndex++;const r=t.content.uri.split(/[\\/]/g);r.pop();const o=r.join("/"),a=this.fetchOptions,l=this.manager,c=t._loadIndex;let u=null;const d=this.rootTileSet.asset&&this.rootTileSet.asset.gltfUpAxis||"y",h=t.cached,f=h.transform;switch(d.toLowerCase()){case"x":Wo.makeRotationAxis(d2e,-Math.PI/2);break;case"y":Wo.makeRotationAxis(u2e,Math.PI/2);break;case"z":Wo.identity();break}const m=vp(e)||i;switch(m){case"b3dm":{const p=new F5(l,this);p.workingPath=o,p.fetchOptions=a,p.adjustmentTransform.copy(Wo),u=p.parse(e).then(y=>y.scene);break}case"pnts":{const p=new B5(l);p.workingPath=o,p.fetchOptions=a,u=p.parse(e).then(y=>y.scene);break}case"i3dm":{const p=new U5(l,this);p.workingPath=o,p.fetchOptions=a,p.adjustmentTransform.copy(Wo),u=p.parse(e).then(y=>y.scene);break}case"cmpt":{const p=new n2e(l,this);p.workingPath=o,p.fetchOptions=a,p.adjustmentTransform.copy(Wo),u=p.parse(e).then(y=>y.scene);break}case"gltf":case"glb":{const p=new s2e(l);p.workingPath=o,p.fetchOptions=a,u=p.parse(e).then(y=>y.scene);break}default:console.warn(`TilesRenderer: Content type "${m}" not supported.`),u=Promise.resolve(null);break}return u.then(p=>{if(e=null,t.scene=p,t._loadIndex!==c)return;p.updateMatrix(),(m==="glb"||m==="gltf")&&p.matrix.multiply(Wo),p.matrix.premultiply(f),p.matrix.decompose(p.position,p.quaternion,p.scale),p.traverse(b=>{b[V5]=b.frustumCulled}),ik(p,!this.autoDisableRendererCulling),h.scene=p,p.traverse(b=>{b.raycast=this._overridenRaycast});const y=[],v=[],_=[];p.traverse(b=>{if(b.geometry&&v.push(b.geometry),b.material){const w=b.material;y.push(b.material);for(const x in w){const S=w[x];S&&S.isTexture&&_.push(S)}}}),h.materials=y,h.geometry=v,h.textures=_,this.onLoadModel&&this.onLoadModel(p,t)})}disposeTile(e){const t=e.cached;if(t.scene){const i=t.materials,s=t.geometry,r=t.textures,o=t.scene.parent;for(let a=0,l=s.length;a<l;a++)s[a].dispose();for(let a=0,l=i.length;a<l;a++)i[a].dispose();for(let a=0,l=r.length;a<l;a++)r[a].dispose();o&&o.remove(t.scene),this.onDisposeModel&&this.onDisposeModel(t.scene,e),t.scene=null,t.materials=null,t.textures=null,t.geometry=null,this.lruCache.remove(e)}this.activeTiles.delete(e),this.visibleTiles.delete(e),this.notVisibleTiles.delete(e),e._loadIndex++}setTileVisible(e,t){let i=e.cached.scene;const s=this.visibleTiles,r=this.group;if(t)i?(r.add(i),s.add(e),i.updateMatrixWorld(!0)):(this.requestTileContents(e),console.log("",e)),this.notVisibleTiles.delete(e);else if(i&&(r.remove(i),s.delete(e),this.notVisibleTiles.add(e),performance.memory.usedJSHeapSize>512*1024*1024)){for(var o of this.notVisibleTiles.values())this.disposeTile(o),i=null,console.log("",e);this.notVisibleTiles.clear()}this.onTileVisibilityChange&&this.onTileVisibilityChange(i,e,t)}setTileActive(e,t){const i=this.activeTiles;t?i.add(e):i.delete(e)}calculateError(e){const t=e.cached,i=t.inFrustum,s=this.cameras,r=this.cameraInfo,o=t.sphere,a=t.box,l=t.boxTransformInverse,c=t.transformInverse,u=a&&l;let d=-1/0,h=1/0;for(let f=0,m=s.length;f<m;f++){if(!i[f])continue;const p=r[f],y=p.invScale;let v;if(p.isOrthographic){const _=p.pixelSize;v=e.geometricError/(_*y)}else{Ko.copy(p.position);let _;u?(Ko.applyMatrix4(l),_=a.distanceToPoint(Ko)):(Ko.applyMatrix4(c),_=Math.max(o.distanceToPoint(Ko),0));const b=_*y,w=p.sseDenominator;v=e.geometricError/(b*w),h=Math.min(h,b)}d=Math.max(d,v)}e.__distanceFromCamera=h,e.__error=d}tileInView(e){const t=e.cached,i=t.sphere,s=t.inFrustum;if(i){const r=this.cameraInfo;let o=!1;for(let a=0,l=r.length;a<l;a++)r[a].frustum.intersectsSphere(i)?(o=!0,s[a]=!0):s[a]=!1;return o}return!0}}const vg=class vg{constructor(e,t,i){J(this,"Radii");J(this,"RadiiSquared");J(this,"RadiiToTheFourth");J(this,"OneOverRadii");J(this,"OneOverRadiiSquared");J(this,"MinimumRadius");J(this,"MaximumRadius");J(this,"CenterToleranceSquared");J(this,"SquaredXOverSquaredZ");this.Radii=new G(e,t,i),this.RadiiSquared=new G(e*e,t*t,i*i),this.RadiiToTheFourth=new G(e*e*e*e,t*t*t*t,i*i*i*i),this.OneOverRadii=new G(e==0?0:1/e,t==0?0:1/t,i==0?0:1/i),this.OneOverRadiiSquared=new G(e==0?0:1/(e*e),t==0?0:1/(t*t),i==0?0:1/(i*i)),this.MinimumRadius=Math.min(e,t,i),this.MaximumRadius=Math.max(e,t,i),this.CenterToleranceSquared=.1,this.RadiiSquared.z!=0&&(this.SquaredXOverSquaredZ=this.RadiiSquared.x/this.RadiiSquared.z)}GeodeticSurfaceNormal(e){return e.clone().multiply(this.OneOverRadiiSquared).normalize()}CartesianToCartographic(e){let t=vg.ScaleToGeodeticSurface(e,this.OneOverRadii,this.OneOverRadiiSquared,this.CenterToleranceSquared);if(!t)return t;let i=this.GeodeticSurfaceNormal(t),s=e.clone().sub(t),r=Math.atan2(i.y,i.x),o=Math.asin(i.z),a=s.clone().dot(e),l=0;a>0?l=1:a<0&&(l=-1);let c=l*s.length();return new G(r,o,c)}static ScaleToGeodeticSurface(e,t,i,s){let r=e.x,o=e.y,a=e.z,l=t.x,c=t.y,u=t.z,d=r*r*l*l,h=o*o*c*c,f=a*a*u*u,m=d+h+f,p=Math.sqrt(1/m),y=e.clone().multiplyScalar(p);if(m<s)return Number.isNaN(p)?new G:y;let v=i.x,_=i.y,b=i.z,w=new G(y.x*v*2,y.y*_*2,y.z*b*2),x=(1-p)*e.length()/(.5*w.length()),S=0,C,T,M,E;do{x-=S,C=1/(1+x*v),T=1/(1+x*_),M=1/(1+x*b);let A=C*C,I=T*T,B=M*M,F=A*C,U=I*T,P=B*M;E=d*A+h*I+f*B-1;let D=-2*(d*F*v+h*U*_+f*P*b);S=E/D}while(Math.abs(E)>1e-12);return new G(r*C,o*T,a*M)}};J(vg,"Wgs84",new vg(6378137,6378137,6356752314245179e-9));let Xb=vg;class dg{static ECEFtoWGS84(e,t,i){const r=.0033528106647474805,o=2*r-r*r,a=1e-10;let l=Math.atan2(t,e),c=Math.atan2(i,Math.sqrt(e*e+t*t)),u=0,d=0;do d=c,u=6378137/Math.sqrt(1-o*Math.sin(c)**2),c=Math.atan2(i+o*u*Math.sin(c),Math.sqrt(e**2+t**2));while(Math.abs(c-d)>a);const h=Math.sqrt(e**2+t**2)/Math.cos(c)-u,f=c*180/Math.PI,m=l*180/Math.PI;return{latitude:f,longitude:m,alt:h}}static EastNorthUpToFixedFrame(e,t=Xb.Wgs84){var i="east",s="north";return this.LocalFrameToFixedFrame(e,t,i,s)}static LocalFrameToFixedFrame(e,t,i,s){var r=this.VectorProductLocalFrame.get(i).get(s);let o=null,a=null,l=null;if(Math.abs(e.x)<1e-14&&Math.abs(e.y)<1e-14){var c=0;if(e.z>0?c=1:e.z<0&&(c=-1),!this.DegeneratePositionLocalFrame.has(i)||!this.DegeneratePositionLocalFrame.has(s))return;o=this.DegeneratePositionLocalFrame.get(i),i!="east"&&i!="west"&&(o=o.clone().multiplyScalar(c)),a=this.DegeneratePositionLocalFrame.get(s),s!="east"&&s!="west"&&(a=a.clone().multiplyScalar(c)),l=this.DegeneratePositionLocalFrame.get(r),r!="east"&&r!="west"&&(l=l.clone().multiplyScalar(c))}else t==null&&(t=Xb.Wgs84),this.ScratchCalculateCartesian.up=t.GeodeticSurfaceNormal(e),this.ScratchCalculateCartesian.east=new G(-e.y,e.x,0).normalize(),this.ScratchCalculateCartesian.north=this.ScratchCalculateCartesian.up.clone().cross(this.ScratchCalculateCartesian.east),this.ScratchCalculateCartesian.down=this.ScratchCalculateCartesian.up.clone().multiplyScalar(-1),this.ScratchCalculateCartesian.west=this.ScratchCalculateCartesian.east.clone().multiplyScalar(-1),this.ScratchCalculateCartesian.south=this.ScratchCalculateCartesian.north.clone().multiplyScalar(-1),o=this.ScratchCalculateCartesian[i],a=this.ScratchCalculateCartesian[s],l=this.ScratchCalculateCartesian[r];return new yt(o.x,a.x,l.x,e.x,o.y,a.y,l.y,e.y,o.z,a.z,l.z,e.z,0,0,0,1)}static get VectorProductLocalFrame(){if(!this._VectorProductLocalFrame){this._VectorProductLocalFrame=new Map;let e=new Map;e.set("south","east"),e.set("north","west"),e.set("west","south"),e.set("east","north"),this._VectorProductLocalFrame.set("up",e);let t=new Map;t.set("south","west"),t.set("north","east"),t.set("west","north"),t.set("east","south"),this._VectorProductLocalFrame.set("down",t);let i=new Map;i.set("up","west"),i.set("down","east"),i.set("west","down"),i.set("east","up"),this._VectorProductLocalFrame.set("south",i);let s=new Map;s.set("up","east"),s.set("down","west"),s.set("west","up"),s.set("east","down"),this._VectorProductLocalFrame.set("north",s);let r=new Map;r.set("up","north"),r.set("down","south"),r.set("north","down"),r.set("south","up"),this._VectorProductLocalFrame.set("west",r);let o=new Map;o.set("up","south"),o.set("down","north"),o.set("north","up"),o.set("south","down"),this._VectorProductLocalFrame.set("east",o)}return this._VectorProductLocalFrame}static get DegeneratePositionLocalFrame(){return this._DegeneratePositionLocalFrame||(this._DegeneratePositionLocalFrame=new Map,this._DegeneratePositionLocalFrame.set("north",new G(-1,0,0)),this._DegeneratePositionLocalFrame.set("east",new G(0,1,0)),this._DegeneratePositionLocalFrame.set("up",new G(0,0,1)),this._DegeneratePositionLocalFrame.set("south",new G(1,0,0)),this._DegeneratePositionLocalFrame.set("west",new G(0,-1,0)),this._DegeneratePositionLocalFrame.set("down",new G(0,0,-1))),this._DegeneratePositionLocalFrame}static get ScratchCalculateCartesian(){return this._ScratchCalculateCartesian||(this._ScratchCalculateCartesian=new Map,this._ScratchCalculateCartesian.set("north",new G),this._ScratchCalculateCartesian.set("east",new G),this._ScratchCalculateCartesian.set("up",new G),this._ScratchCalculateCartesian.set("south",new G),this._ScratchCalculateCartesian.set("west",new G),this._ScratchCalculateCartesian.set("down",new G)),this._ScratchCalculateCartesian}static inverseMatrix4(e){let t=e.elements;var i=t[0],s=t[4],r=t[8],o=t[12],a=t[1],l=t[5],c=t[9],u=t[13],d=t[2],h=t[6],f=t[10],m=t[14],p=t[3],y=t[7],v=t[11],_=t[15],b=f*_,w=m*v,x=h*_,S=m*y,C=h*v,T=f*y,M=d*_,E=m*p,A=d*v,I=f*p,B=d*y,F=h*p,U=b*l+S*c+C*u-(w*l+x*c+T*u),P=w*a+M*c+I*u-(b*a+E*c+A*u),O=x*a+E*l+B*u-(S*a+M*l+F*u),D=T*a+A*l+F*c-(C*a+I*l+B*c),L=w*s+x*r+T*o-(b*s+S*r+C*o),H=b*i+E*r+A*o-(w*i+M*r+I*o),X=S*i+M*s+F*o-(x*i+E*s+B*o),ne=C*i+I*s+B*r-(T*i+A*s+F*r);b=r*u,w=o*c,x=s*u,S=o*l,C=s*c,T=r*l,M=i*u,E=o*a,A=i*c,I=r*a,B=i*l,F=s*a;var ce=b*y+S*v+C*_-(w*y+x*v+T*_),ae=w*p+M*v+I*_-(b*p+E*v+A*_),_e=x*p+E*y+B*_-(S*p+M*y+F*_),re=T*p+A*y+F*v-(C*p+I*y+B*v),xe=x*f+T*m+w*h-(C*m+b*h+S*f),he=A*m+b*d+E*f-(M*f+I*m+w*d),Te=M*h+F*m+S*d-(B*m+x*d+E*h),Ce=B*f+C*d+I*h-(A*h+F*f+T*d),we=i*U+s*P+r*O+o*D;let K=new yt,j=K.elements;return we=1/we,j[0]=U*we,j[1]=P*we,j[2]=O*we,j[3]=D*we,j[4]=L*we,j[5]=H*we,j[6]=X*we,j[7]=ne*we,j[8]=ce*we,j[9]=ae*we,j[10]=_e*we,j[11]=re*we,j[12]=xe*we,j[13]=he*we,j[14]=Te*we,j[15]=Ce*we,K}}J(dg,"_VectorProductLocalFrame"),J(dg,"_DegeneratePositionLocalFrame"),J(dg,"_ScratchCalculateCartesian");const Uy=3.141592653589793*3e3/180,ir=3.141592653589793,sk=6378245,rk=.006693421622965943;class $5{static BD09ToGCJ02(e,t){const i=e-.0065,s=t-.006,r=Math.sqrt(i*i+s*s)-2e-5*Math.sin(s*Uy),o=Math.atan2(s,i)-3e-6*Math.cos(i*Uy),a=r*Math.cos(o),l=r*Math.sin(o);return{lng:a,lat:l}}static GCJ02ToBD09(e,t){const i=Math.sqrt(e*e+t*t)+2e-5*Math.sin(t*Uy),s=Math.atan2(t,e)+3e-6*Math.cos(e*Uy),r=i*Math.cos(s)+.0065,o=i*Math.sin(s)+.006;return{lng:r,lat:o}}static WGS84ToGCJ02(e,t){if(this.out_of_china(e,t))return{lng:e,lat:t};{let i=this.delta(e,t);return{lng:e+i[0],lat:t+i[1]}}}static GCJ02ToWGS84(e,t){if(this.out_of_china(e,t))return{lng:e,lat:t};{let i=this.delta(e,t),s=e+i[0],r=t+i[1];return{lng:e*2-s,lat:t*2-r}}}static delta(e,t){let i=this.transformLng(e-105,t-35),s=this.transformLat(e-105,t-35);const r=t/180*ir;let o=Math.sin(r);o=1-rk*o*o;const a=Math.sqrt(o);return i=i*180/(sk/a*Math.cos(r)*ir),s=s*180/(sk*(1-rk)/(o*a)*ir),[i,s]}static transformLng(e,t){let i=300+e+2*t+.1*e*e+.1*e*t+.1*Math.sqrt(Math.abs(e));return i+=(20*Math.sin(6*e*ir)+20*Math.sin(2*e*ir))*2/3,i+=(20*Math.sin(e*ir)+40*Math.sin(e/3*ir))*2/3,i+=(150*Math.sin(e/12*ir)+300*Math.sin(e/30*ir))*2/3,i}static transformLat(e,t){let i=-100+2*e+3*t+.2*t*t+.1*e*t+.2*Math.sqrt(Math.abs(e));return i+=(20*Math.sin(6*e*ir)+20*Math.sin(2*e*ir))*2/3,i+=(20*Math.sin(t*ir)+40*Math.sin(t/3*ir))*2/3,i+=(160*Math.sin(t/12*ir)+320*Math.sin(t*ir/30))*2/3,i}static out_of_china(e,t){return!(e>73.66&&e<135.05&&t>3.86&&t<53.55)}}const o1=class o1{static get gltfloader(){if(this._gltfloader==null){let e=new nA,t=new iA;t.setDecoderPath("./lib/draco/"),e.setDRACOLoader(t),this._gltfloader=e}return this._gltfloader}static tilesLoaders(e,t,i=!1){{if(e.mapModels.has(t))return;e.clearModel(),e.alwaysRender=!0;let s=new h2e(t);s.lruCache.maxSize=1e4,s.lruCache.minSize=9e3,s.modelData=new gv,s.manager.addHandler(/\.gltf$/,o1.gltfloader),s.setCamera(e.camera),s.setResolutionFromRenderer(e.camera,e.renderer),s.onLoadModel=(r,o)=>{e.alwaysRender=!1,e.enableRender(),s.parseQueue.items.length==0&&(s.modelData.name=t,s.modelData.showSpaceTree())},s.modelData.rootObject=s.group,e.mapModels.set(t,s.modelData),s.modelData.tile=s,s.onLoadTileSet=r=>{let o=new Nn,a=r.root.transform;if(s.getBounds(o),s.modelData.boundingBox=o.clone(),a){i&&(e.showMap=!0),s.modelData.gisData=new dTe,s.group.matrix=new yt;let c=dg.EastNorthUpToFixedFrame(new G(a[12],a[13],a[14])).clone().invert(),u=new yt;u.set(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],1);let d=c.multiply(u);s.group.matrix.multiply(d),console.log(d);let h=dg.ECEFtoWGS84(a[12],a[13],a[14]);const f=$5.WGS84ToGCJ02(h.longitude,h.latitude);h.latitude=f.lat,h.longitude=f.lng,s.modelData.gisData.latitude=h.latitude,s.modelData.gisData.longitude=h.longitude,s.modelData.gisData.height=h.alt;let m=fi.datumsToSpherical(h.latitude,h.longitude),p=new yt(1,0,0,m.x,0,0,1,h.alt,0,-1,0,-m.y,0,0,0,1);s.group.matrix.premultiply(p)}s.group.matrixAutoUpdate=!1,o.applyMatrix4(s.group.matrix),e.setCameraByBox(o),s.update()},s.group.modelViewMatrix.elements[12]=0,s.group.modelViewMatrix.elements[13]=0,s.group.modelViewMatrix.elements[14]=0,e.obj.add(s.group),e.enableRender()}}};J(o1,"_gltfloader");let jb=o1;class E_{}J(E_,"editMenuComponent");class Im{}J(Im,"materialComponent");const ms={Base:"Base",MaterialEdit:"MaterialEdit",ModelEdit:"ModelEdit",Roam:"Roam",Measure:"Measure",Carousel:"Carousel"};class NM{}J(NM,"showElementData");let f2e=0;function yr(n,e){if(e==null)return null;e.__id__==null&&(e.__id__=f2e++);let t;return n.hx__closures__==null?n.hx__closures__={}:t=n.hx__closures__[e.__id__],t==null&&(t=e.bind(n),t.scope=n,t.method=e,n.hx__closures__[e.__id__]=t),t}class zp{constructor(){J(this,"operationType");J(this,"lastX",0);J(this,"lastY",0);J(this,"selID",-1);J(this,"_moveId",null);J(this,"isolate",null);J(this,"isMouseMoved",!1);this.operationType=ms.Base}Enter(){this.enter()}Quit(){this.quit()}enter(){this.eventListener(!0)}onMouseDown(e){this.lastX=e.clientX,this.lastY=e.clientY,this.isMouseMoved=!1}onMouseMove(e){let t=e.clientX-this.lastX,i=e.clientY-this.lastY;(Math.abs(t)>1||Math.abs(i)>1)&&(this.isMouseMoved=!0)}onMouseUp(e){if(e.button!=2&&this.isolate==null){if(!this.isMouseMoved){let t=Ne.scene.raycaster.getIntersectObjByGPU(e);this.selElemetByID(t)}Ne.scene.enableRender(),this.lastX=null,this.lastY=null,this._moveId=null,this.isMouseMoved=!1}}selElemetColorByID(e,t){for(const i of Ne.scene.mapModels.values())if(i.allElementData.has(e))return i.allElementData.get(e).color=t,!0;return!1}selTeeClickElement(e){this.selElemetByID(e.eleId)}selElemetByID(e){this.resetSelEntity();const t=Ne.getElementByID(e);t&&(this.selID=e,t.color=Hn.selColor,Ne.scene.setOutlineByElements([t]),t.boundingBox&&Ne.scene.setOrbitPoint(t.center.x,t.center.y,t.center.z)),this.showProperty(e)}resetSelEntity(){Ne.scene.outlinePass&&Ne.scene.setOutlineByObjects(null),Ne.scene.setOutlineByElements(null);for(const e of Ne.scene.mapModels.values())if(e.allElementData.has(this.selID)){const t=e.allElementData.get(this.selID);t.color=null;break}this.selID=-1,Ne.scene.enableRender(),this.showProperty(null)}showProperty(e){if(e==null)NM.showElementData(null);else{let t=Ne.getElementByID(e);t&&NM.showElementData(t)}}quit(){this.selElemetByID(null),this.eventListener(!1)}eventListener(e){e?(Ne.scene.renderer.domElement.addEventListener("pointerdown",yr(this,this.onMouseDown)),Ne.scene.renderer.domElement.addEventListener("mousemove",yr(this,this.onMouseMove)),Ne.scene.renderer.domElement.addEventListener("pointerup",yr(this,this.onMouseUp)),document.addEventListener("keydown",yr(this,this.onKeyDown)),Ne.scene.renderer.domElement.addEventListener("contextmenu",yr(this,this.onContextMenu)),Ne.scene.renderer.domElement.addEventListener("dblclick",yr(this,this.onDoubleClick)),Ne.event.addEventListener("treeClickElement",yr(this,this.selTeeClickElement))):(Ne.scene.renderer.domElement.removeEventListener("pointerdown",yr(this,this.onMouseDown)),Ne.scene.renderer.domElement.removeEventListener("mousemove",yr(this,this.onMouseMove)),Ne.scene.renderer.domElement.removeEventListener("pointerup",yr(this,this.onMouseUp)),document.removeEventListener("keydown",yr(this,this.onKeyDown)),Ne.scene.renderer.domElement.removeEventListener("contextmenu",yr(this,this.onContextMenu)),Ne.scene.renderer.domElement.removeEventListener("dblclick",yr(this,this.onDoubleClick)),Ne.event.removeEventListener("treeClickElement",yr(this,this.selTeeClickElement)))}onKeyDown(e){(e.code==="Escape"||e.keyCode===27)&&(this.changeOperation(),this.resetSelEntity())}onDoubleClick(e){this.selID&&this.selID-1&&this.fitElement(this.selID)}changeOperation(){Ne.currentOperation.operationType!=ms.Base&&(Ne.currentOperation.Quit(),Ne.currentOperation=Ne.Base,Ne.currentOperation.Enter())}onContextMenu(e){e.preventDefault(),this.isMouseMoved||this.showContextMenu(e.clientX,e.clientY,this.selID),this.isMouseMoved=!1}showContextMenu(e,t,i){const s=document.getElementById("context-menu");s&&s.parentNode&&s.parentNode.removeChild(s);const r=document.createElement("div");r.id="context-menu",r.style.position="absolute",r.style.left=`${e}px`,r.style.top=`${t}px`,r.style.backgroundColor="#4B4B4B",r.style.color="#dddddd",r.style.boxShadow="0 2px 5px rgba(0,0,0,0.4)",r.style.borderRadius="3px",r.style.padding="4px 0",r.style.zIndex="1000",r.style.minWidth="120px",r.style.fontSize="12px";const o=[""];i!=null&&i!=-1&&(o.push(""),o.push("()"),o.push("()"),o.push("")),o.forEach(d=>{const h=document.createElement("div");if(h.textContent=d,h.style.padding="6px 12px",h.style.cursor="pointer",h.style.transition="background-color 0.2s",h.addEventListener("mouseover",()=>{h.style.backgroundColor="rgba(0,0,0,0.5)"}),h.addEventListener("mouseout",()=>{h.style.backgroundColor="transparent"}),h.addEventListener("click",()=>{this.handleContextMenuOption(d,i)}),r.appendChild(h),d!==o[o.length-1]){const f=document.createElement("div");f.style.height="1px",f.style.backgroundColor="#555555",f.style.margin="2px 0",r.appendChild(f)}}),document.body.appendChild(r);const a=window.innerWidth,l=window.innerHeight,c=r.getBoundingClientRect();e+c.width>a&&(r.style.left=`${a-c.width-5}px`),t+c.height>l&&(r.style.top=`${l-c.height-5}px`);const u=d=>{const h=document.getElementById("context-menu");h&&!h.contains(d.target)&&(h.parentNode&&h.parentNode.removeChild(h),document.removeEventListener("click",u))};requestAnimationFrame(()=>{document.addEventListener("click",u)})}handleContextMenuOption(e,t){const i=document.getElementById("context-menu");switch(i&&i.parentNode&&i.parentNode.removeChild(i),e){case"":this.fitElement(t);break;case"":this.hideElement(t);break;case"":this.showAllElement();break;case"()":this.isolateElement(t,!1);break;case"()":this.isolateElement(t,!0);break}}isolateElement(e,t){this.resetSelEntity(),this.isolate=e,this.showProperty(e);for(const i of Ne.scene.mapModels.values())for(const s of i.allElementData.values())s.id!=e&&(t?s.show=!1:s.color="#ffffff40")}hideElement(e){const t=Ne.getElementByID(e);t&&(t.show=!1,Ne.scene.enableRender())}showAllElement(){for(const e of Ne.scene.mapModels.values())for(const t of e.allElementData.values())t.show=!0,this.isolate!=null&&(t.color=null);this.isolate=null,Ne.scene.enableRender()}fitElement(e){const t=Ne.getElementByID(e);t&&Ne.scene.setCameraByBoxAndRotateTo(t.boundingBox)}}class p2e extends zp{constructor(){super(),this.operationType=ms.MaterialEdit}Enter(){this.enter(),this.selElemetByID(null),E_.editMenuComponent.value.dialogVisible=!0,Ne.scene.viewCube.show=!1,E_.editMenuComponent.value.showEnvironmentlData()}Quit(){this.quit(),E_.editMenuComponent.value.dialogVisible=!1,this.selElemetByID(null),Ne.scene.setOutlineByObjects(null),Im.materialComponent.value.dialogVisible=!1,Ne.scene.viewCube.show=!0}onMouseUp(e){if(e.button==2)return;let t=e.clientX-this.lastX,i=e.clientY-this.lastY;if(Math.abs(t)<=1&&Math.abs(i)<=0){let s=Ne.scene.raycaster.getIntersectMesh(e);s?(this.selElemetOnMaterialEditByID(s.id),Ne.scene.setOutlineByObjects([s.mesh]),Im.materialComponent.value.dialogVisible=!0,Im.materialComponent.value.showMeshMaterialData(s)):this.reset()}Ne.scene.enableRender(),this.lastX=null,this.lastY=null,this._moveId=null}reset(){this.selElemetOnMaterialEditByID(null),Ne.scene.setOutlineByObjects(null),Im.materialComponent.value.dialogVisible=!1,Ne.scene.enableRender()}selElemetOnMaterialEditByID(e){for(const t of Ne.scene.mapModels.values())if(t.allElementData.has(e)){let i=t.allElementData.get(e);i.boundingBox&&Ne.scene.setOrbitPoint((i.boundingBox.min.x+i.boundingBox.max.x)/2,(i.boundingBox.min.y+i.boundingBox.max.y)/2,(i.boundingBox.min.z+i.boundingBox.max.z)/2);break}}onKeyDown(e){(e.code==="Escape"||e.keyCode===27)&&this.reset()}onContextMenu(e){}}class m2e extends zp{constructor(){super(),this.operationType=ms.Carousel}Enter(){this.enter()}Quit(){this.quit()}onMouseUp(e){}reset(){}onContextMenu(e){}}class ul{}J(ul,"modelComponent");class FM{}J(FM,"editMenuComponent");class Rm{}J(Rm,"modelToolComponent");const Hu=new wh,zs=new G,mc=new G,Si=new Mn,ok={X:new G(1,0,0),Y:new G(0,1,0),Z:new G(0,0,1)},ES={type:"change"},ak={type:"mouseDown",mode:null},lk={type:"mouseUp",mode:null},ck={type:"objectChange"};class g2e extends rn{constructor(e,t){super(),t===void 0&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),this.isTransformControls=!0,this.visible=!1,this.domElement=t,this.domElement.style.touchAction="none";const i=new x2e;this._gizmo=i,this.add(i);const s=new S2e;this._plane=s,this.add(s);const r=this;function o(_,b){let w=b;Object.defineProperty(r,_,{get:function(){return w!==void 0?w:b},set:function(x){w!==x&&(w=x,s[_]=x,i[_]=x,r.dispatchEvent({type:_+"-changed",value:x}),r.dispatchEvent(ES))}}),r[_]=b,s[_]=b,i[_]=b}o("camera",e),o("object",void 0),o("enabled",!0),o("axis",null),o("mode","translate"),o("translationSnap",null),o("rotationSnap",null),o("scaleSnap",null),o("space","world"),o("size",1),o("dragging",!1),o("showX",!0),o("showY",!0),o("showZ",!0);const a=new G,l=new G,c=new Mn,u=new Mn,d=new G,h=new Mn,f=new G,m=new G,p=new G,y=0,v=new G;o("worldPosition",a),o("worldPositionStart",l),o("worldQuaternion",c),o("worldQuaternionStart",u),o("cameraPosition",d),o("cameraQuaternion",h),o("pointStart",f),o("pointEnd",m),o("rotationAxis",p),o("rotationAngle",y),o("eye",v),this._offset=new G,this._startNorm=new G,this._endNorm=new G,this._cameraScale=new G,this._parentPosition=new G,this._parentQuaternion=new Mn,this._parentQuaternionInv=new Mn,this._parentScale=new G,this._worldScaleStart=new G,this._worldQuaternionInv=new Mn,this._worldScale=new G,this._positionStart=new G,this._quaternionStart=new Mn,this._scaleStart=new G,this._getPointer=v2e.bind(this),this._onPointerDown=_2e.bind(this),this._onPointerHover=y2e.bind(this),this._onPointerMove=b2e.bind(this),this._onPointerUp=w2e.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(e){this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.camera.isOrthographicCamera?this.camera.getWorldDirection(this.eye).negate():this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(e)}pointerHover(e){if(this.object===void 0||this.dragging===!0)return;e!==null&&Hu.setFromCamera(e,this.camera);const t=TS(this._gizmo.picker[this.mode],Hu);t?this.axis=t.object.name:this.axis=null}pointerDown(e){if(!(this.object===void 0||this.dragging===!0||e!=null&&e.button!==0)&&this.axis!==null){e!==null&&Hu.setFromCamera(e,this.camera);const t=TS(this._plane,Hu,!0);t&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)),this.dragging=!0,ak.mode=this.mode,this.dispatchEvent(ak)}}pointerMove(e){const t=this.axis,i=this.mode,s=this.object;let r=this.space;if(i==="scale"?r="local":(t==="E"||t==="XYZE"||t==="XYZ")&&(r="world"),s===void 0||t===null||this.dragging===!1||e!==null&&e.button!==-1)return;e!==null&&Hu.setFromCamera(e,this.camera);const o=TS(this._plane,Hu,!0);if(o){if(this.pointEnd.copy(o.point).sub(this.worldPositionStart),i==="translate")this._offset.copy(this.pointEnd).sub(this.pointStart),r==="local"&&t!=="XYZ"&&this._offset.applyQuaternion(this._worldQuaternionInv),t.indexOf("X")===-1&&(this._offset.x=0),t.indexOf("Y")===-1&&(this._offset.y=0),t.indexOf("Z")===-1&&(this._offset.z=0),r==="local"&&t!=="XYZ"?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),s.position.copy(this._offset).add(this._positionStart),this.translationSnap&&(r==="local"&&(s.position.applyQuaternion(Si.copy(this._quaternionStart).invert()),t.search("X")!==-1&&(s.position.x=Math.round(s.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(s.position.y=Math.round(s.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(s.position.z=Math.round(s.position.z/this.translationSnap)*this.translationSnap),s.position.applyQuaternion(this._quaternionStart)),r==="world"&&(s.parent&&s.position.add(zs.setFromMatrixPosition(s.parent.matrixWorld)),t.search("X")!==-1&&(s.position.x=Math.round(s.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(s.position.y=Math.round(s.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(s.position.z=Math.round(s.position.z/this.translationSnap)*this.translationSnap),s.parent&&s.position.sub(zs.setFromMatrixPosition(s.parent.matrixWorld))));else if(i==="scale"){if(t.search("XYZ")!==-1){let a=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(a*=-1),mc.set(a,a,a)}else zs.copy(this.pointStart),mc.copy(this.pointEnd),zs.applyQuaternion(this._worldQuaternionInv),mc.applyQuaternion(this._worldQuaternionInv),mc.divide(zs),t.search("X")===-1&&(mc.x=1),t.search("Y")===-1&&(mc.y=1),t.search("Z")===-1&&(mc.z=1);s.scale.copy(this._scaleStart).multiply(mc),this.scaleSnap&&(t.search("X")!==-1&&(s.scale.x=Math.round(s.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Y")!==-1&&(s.scale.y=Math.round(s.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Z")!==-1&&(s.scale.z=Math.round(s.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(i==="rotate"){this._offset.copy(this.pointEnd).sub(this.pointStart);const a=20/this.worldPosition.distanceTo(zs.setFromMatrixPosition(this.camera.matrixWorld));let l=!1;t==="XYZE"?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(zs.copy(this.rotationAxis).cross(this.eye))*a):(t==="X"||t==="Y"||t==="Z")&&(this.rotationAxis.copy(ok[t]),zs.copy(ok[t]),r==="local"&&zs.applyQuaternion(this.worldQuaternion),zs.cross(this.eye),zs.length()===0?l=!0:this.rotationAngle=this._offset.dot(zs.normalize())*a),(t==="E"||l)&&(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),r==="local"&&t!=="E"&&t!=="XYZE"?(s.quaternion.copy(this._quaternionStart),s.quaternion.multiply(Si.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),s.quaternion.copy(Si.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),s.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(ES),this.dispatchEvent(ck)}}pointerUp(e){e!==null&&e.button!==0||(this.dragging&&this.axis!==null&&(lk.mode=this.mode,this.dispatchEvent(lk)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()})}attach(e){return this.object=e,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(ES),this.dispatchEvent(ck),this.pointStart.copy(this.pointEnd))}getRaycaster(){return Hu}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}}function v2e(n){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:n.button};{const e=this.domElement.getBoundingClientRect();return{x:(n.clientX-e.left)/e.width*2-1,y:-(n.clientY-e.top)/e.height*2+1,button:n.button}}}function y2e(n){if(this.enabled)switch(n.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(n));break}}function _2e(n){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(n)),this.pointerDown(this._getPointer(n)))}function b2e(n){this.enabled&&this.pointerMove(this._getPointer(n))}function w2e(n){this.enabled&&(this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(n)))}function TS(n,e,t){const i=e.intersectObject(n,!0);for(let s=0;s<i.length;s++)if(i[s].object.visible||t)return i[s];return!1}const zy=new Js,ai=new G(0,1,0),uk=new G(0,0,0),dk=new yt,Hy=new Mn,T_=new Mn,ga=new G,hk=new yt,Pm=new G(1,0,0),Xu=new G(0,1,0),Lm=new G(0,0,1),Vy=new G,pm=new G,mm=new G;class x2e extends rn{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";const e=new $n({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),t=new Vi({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),i=e.clone();i.opacity=.15;const s=t.clone();s.opacity=.5;const r=e.clone();r.color.setHex(16711680);const o=e.clone();o.color.setHex(65280);const a=e.clone();a.color.setHex(255);const l=e.clone();l.color.setHex(16711680),l.opacity=.5;const c=e.clone();c.color.setHex(65280),c.opacity=.5;const u=e.clone();u.color.setHex(255),u.opacity=.5;const d=e.clone();d.opacity=.25;const h=e.clone();h.color.setHex(16776960),h.opacity=.25,e.clone().color.setHex(16776960);const m=e.clone();m.color.setHex(7895160);const p=new Qi(0,.04,.1,12);p.translate(0,.05,0);const y=new Ci(.08,.08,.08);y.translate(0,.04,0);const v=new jt;v.setAttribute("position",new kt([0,0,0,1,0,0],3));const _=new Qi(.0075,.0075,.5,3);_.translate(0,.25,0);function b(U,P){const O=new yl(U,.0075,3,64,P*Math.PI*2);return O.rotateY(Math.PI/2),O.rotateX(Math.PI/2),O}function w(){const U=new jt;return U.setAttribute("position",new kt([0,0,0,1,1,1],3)),U}const x={X:[[new ut(p,r),[.5,0,0],[0,0,-Math.PI/2]],[new ut(p,r),[-.5,0,0],[0,0,Math.PI/2]],[new ut(_,r),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new ut(p,o),[0,.5,0]],[new ut(p,o),[0,-.5,0],[Math.PI,0,0]],[new ut(_,o)]],Z:[[new ut(p,a),[0,0,.5],[Math.PI/2,0,0]],[new ut(p,a),[0,0,-.5],[-Math.PI/2,0,0]],[new ut(_,a),null,[Math.PI/2,0,0]]],XYZ:[[new ut(new Sl(.1,0),d.clone()),[0,0,0]]],XY:[[new ut(new Ci(.15,.15,.01),u.clone()),[.15,.15,0]]],YZ:[[new ut(new Ci(.15,.15,.01),l.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new ut(new Ci(.15,.15,.01),c.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},S={X:[[new ut(new Qi(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new ut(new Qi(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new ut(new Qi(.2,0,.6,4),i),[0,.3,0]],[new ut(new Qi(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new ut(new Qi(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new ut(new Qi(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new ut(new Sl(.2,0),i)]],XY:[[new ut(new Ci(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new ut(new Ci(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new ut(new Ci(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]]},C={START:[[new ut(new Sl(.01,2),s),null,null,null,"helper"]],END:[[new ut(new Sl(.01,2),s),null,null,null,"helper"]],DELTA:[[new gs(w(),s),null,null,null,"helper"]],X:[[new gs(v,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new gs(v,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new gs(v,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},T={XYZE:[[new ut(b(.5,1),m),null,[0,Math.PI/2,0]]],X:[[new ut(b(.5,.5),r)]],Y:[[new ut(b(.5,.5),o),null,[0,0,-Math.PI/2]]],Z:[[new ut(b(.5,.5),a),null,[0,Math.PI/2,0]]],E:[[new ut(b(.75,1),h),null,[0,Math.PI/2,0]]]},M={AXIS:[[new gs(v,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},E={XYZE:[[new ut(new gh(.25,10,8),i)]],X:[[new ut(new yl(.5,.1,4,24),i),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new ut(new yl(.5,.1,4,24),i),[0,0,0],[Math.PI/2,0,0]]],Z:[[new ut(new yl(.5,.1,4,24),i),[0,0,0],[0,0,-Math.PI/2]]],E:[[new ut(new yl(.75,.1,2,24),i)]]},A={X:[[new ut(y,r),[.5,0,0],[0,0,-Math.PI/2]],[new ut(_,r),[0,0,0],[0,0,-Math.PI/2]],[new ut(y,r),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new ut(y,o),[0,.5,0]],[new ut(_,o)],[new ut(y,o),[0,-.5,0],[0,0,Math.PI]]],Z:[[new ut(y,a),[0,0,.5],[Math.PI/2,0,0]],[new ut(_,a),[0,0,0],[Math.PI/2,0,0]],[new ut(y,a),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new ut(new Ci(.15,.15,.01),u),[.15,.15,0]]],YZ:[[new ut(new Ci(.15,.15,.01),l),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new ut(new Ci(.15,.15,.01),c),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new ut(new Ci(.1,.1,.1),d.clone())]]},I={X:[[new ut(new Qi(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new ut(new Qi(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new ut(new Qi(.2,0,.6,4),i),[0,.3,0]],[new ut(new Qi(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new ut(new Qi(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new ut(new Qi(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new ut(new Ci(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new ut(new Ci(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new ut(new Ci(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new ut(new Ci(.2,.2,.2),i),[0,0,0]]]},B={X:[[new gs(v,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new gs(v,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new gs(v,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function F(U){const P=new rn;for(const O in U)for(let D=U[O].length;D--;){const L=U[O][D][0].clone(),H=U[O][D][1],X=U[O][D][2],ne=U[O][D][3],ce=U[O][D][4];L.name=O,L.tag=ce,H&&L.position.set(H[0],H[1],H[2]),X&&L.rotation.set(X[0],X[1],X[2]),ne&&L.scale.set(ne[0],ne[1],ne[2]),L.updateMatrix();const ae=L.geometry.clone();ae.applyMatrix4(L.matrix),L.geometry=ae,L.renderOrder=1/0,L.position.set(0,0,0),L.rotation.set(0,0,0),L.scale.set(1,1,1),P.add(L)}return P}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=F(x)),this.add(this.gizmo.rotate=F(T)),this.add(this.gizmo.scale=F(A)),this.add(this.picker.translate=F(S)),this.add(this.picker.rotate=F(E)),this.add(this.picker.scale=F(I)),this.add(this.helper.translate=F(C)),this.add(this.helper.rotate=F(M)),this.add(this.helper.scale=F(B)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(e){const i=(this.mode==="scale"?"local":this.space)==="local"?this.worldQuaternion:T_;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let s=[];s=s.concat(this.picker[this.mode].children),s=s.concat(this.gizmo[this.mode].children),s=s.concat(this.helper[this.mode].children);for(let r=0;r<s.length;r++){const o=s[r];o.visible=!0,o.rotation.set(0,0,0),o.position.copy(this.worldPosition);let a;if(this.camera.isOrthographicCamera?a=(this.camera.top-this.camera.bottom)/this.camera.zoom:a=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),o.scale.set(1,1,1).multiplyScalar(a*this.size/4),o.tag==="helper"){o.visible=!1,o.name==="AXIS"?(o.visible=!!this.axis,this.axis==="X"&&(Si.setFromEuler(zy.set(0,0,0)),o.quaternion.copy(i).multiply(Si),Math.abs(ai.copy(Pm).applyQuaternion(i).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="Y"&&(Si.setFromEuler(zy.set(0,0,Math.PI/2)),o.quaternion.copy(i).multiply(Si),Math.abs(ai.copy(Xu).applyQuaternion(i).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="Z"&&(Si.setFromEuler(zy.set(0,Math.PI/2,0)),o.quaternion.copy(i).multiply(Si),Math.abs(ai.copy(Lm).applyQuaternion(i).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="XYZE"&&(Si.setFromEuler(zy.set(0,Math.PI/2,0)),ai.copy(this.rotationAxis),o.quaternion.setFromRotationMatrix(dk.lookAt(uk,ai,Xu)),o.quaternion.multiply(Si),o.visible=this.dragging),this.axis==="E"&&(o.visible=!1)):o.name==="START"?(o.position.copy(this.worldPositionStart),o.visible=this.dragging):o.name==="END"?(o.position.copy(this.worldPosition),o.visible=this.dragging):o.name==="DELTA"?(o.position.copy(this.worldPositionStart),o.quaternion.copy(this.worldQuaternionStart),zs.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),zs.applyQuaternion(this.worldQuaternionStart.clone().invert()),o.scale.copy(zs),o.visible=this.dragging):(o.quaternion.copy(i),this.dragging?o.position.copy(this.worldPositionStart):o.position.copy(this.worldPosition),this.axis&&(o.visible=this.axis.search(o.name)!==-1));continue}o.quaternion.copy(i),this.mode==="translate"||this.mode==="scale"?(o.name==="X"&&Math.abs(ai.copy(Pm).applyQuaternion(i).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="Y"&&Math.abs(ai.copy(Xu).applyQuaternion(i).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="Z"&&Math.abs(ai.copy(Lm).applyQuaternion(i).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="XY"&&Math.abs(ai.copy(Lm).applyQuaternion(i).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="YZ"&&Math.abs(ai.copy(Pm).applyQuaternion(i).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="XZ"&&Math.abs(ai.copy(Xu).applyQuaternion(i).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1)):this.mode==="rotate"&&(Hy.copy(i),ai.copy(this.eye).applyQuaternion(Si.copy(i).invert()),o.name.search("E")!==-1&&o.quaternion.setFromRotationMatrix(dk.lookAt(this.eye,uk,Xu)),o.name==="X"&&(Si.setFromAxisAngle(Pm,Math.atan2(-ai.y,ai.z)),Si.multiplyQuaternions(Hy,Si),o.quaternion.copy(Si)),o.name==="Y"&&(Si.setFromAxisAngle(Xu,Math.atan2(ai.x,ai.z)),Si.multiplyQuaternions(Hy,Si),o.quaternion.copy(Si)),o.name==="Z"&&(Si.setFromAxisAngle(Lm,Math.atan2(ai.y,ai.x)),Si.multiplyQuaternions(Hy,Si),o.quaternion.copy(Si))),o.visible=o.visible&&(o.name.indexOf("X")===-1||this.showX),o.visible=o.visible&&(o.name.indexOf("Y")===-1||this.showY),o.visible=o.visible&&(o.name.indexOf("Z")===-1||this.showZ),o.visible=o.visible&&(o.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),o.material._color=o.material._color||o.material.color.clone(),o.material._opacity=o.material._opacity||o.material.opacity,o.material.color.copy(o.material._color),o.material.opacity=o.material._opacity,this.enabled&&this.axis&&(o.name===this.axis||this.axis.split("").some(function(l){return o.name===l}))&&(o.material.color.setHex(16776960),o.material.opacity=1)}super.updateMatrixWorld(e)}}class S2e extends ut{constructor(){super(new ua(1e5,1e5,2,2),new $n({visible:!1,wireframe:!0,side:ts,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(e){let t=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(t="local"),Vy.copy(Pm).applyQuaternion(t==="local"?this.worldQuaternion:T_),pm.copy(Xu).applyQuaternion(t==="local"?this.worldQuaternion:T_),mm.copy(Lm).applyQuaternion(t==="local"?this.worldQuaternion:T_),ai.copy(pm),this.mode){case"translate":case"scale":switch(this.axis){case"X":ai.copy(this.eye).cross(Vy),ga.copy(Vy).cross(ai);break;case"Y":ai.copy(this.eye).cross(pm),ga.copy(pm).cross(ai);break;case"Z":ai.copy(this.eye).cross(mm),ga.copy(mm).cross(ai);break;case"XY":ga.copy(mm);break;case"YZ":ga.copy(Vy);break;case"XZ":ai.copy(mm),ga.copy(pm);break;case"XYZ":case"E":ga.set(0,0,0);break}break;case"rotate":default:ga.set(0,0,0)}ga.length()===0?this.quaternion.copy(this.cameraQuaternion):(hk.lookAt(zs.set(0,0,0),ga,ai),this.quaternion.setFromRotationMatrix(hk)),super.updateMatrixWorld(e)}}class C2e{constructor(e,t,i){J(this,"_sence");J(this,"transform_controls");J(this,"sphere_mesh");J(this,"renderer");J(this,"controls");J(this,"_visible",!0);J(this,"_adsorb",!0);this._sence=e,this.sphere_mesh=new ut(new gh(.01),new Fl),this.sphere_mesh.lastPosition=new G,this.sphere_mesh.lastScale=new G(1,1,1),this.sphere_mesh.lastQuaternion=new Mn(0,0,0,1),this._sence.add(this.sphere_mesh),this.transform_controls=new g2e(t.camera,i),this.transform_controls.attach(this.sphere_mesh),this.transform_controls.setSize(.8),this._sence.add(this.transform_controls),this.transform_controls.visible=!0,this.transform_controls.enabled=!0,this.transform_controls.dragging=!0}setElemet(e){let t=e.center;this.position.copy(t),this.lastPosition.copy(this.position),this.lastQuaternion.copy(this.quaternion),this.quaternion.copy(e.quaternion)}set visible(e){this._visible!=e&&(this._visible=e,this.transform_controls.visible=e,this.sphere_mesh.visible=e)}get visible(){return this._visible}set position(e){this.sphere_mesh.position.set(e.x,e.y,e.z)}get position(){return this.sphere_mesh.position}set lastPosition(e){this.sphere_mesh.lastPosition=e}get lastPosition(){return this.sphere_mesh.lastPosition}set quaternion(e){this.sphere_mesh.quaternion.set(e.x,e.y,e.z,e.z)}get quaternion(){return this.sphere_mesh.quaternion}set lastQuaternion(e){this.sphere_mesh.lastQuaternion=e}get lastQuaternion(){return this.sphere_mesh.lastQuaternion}set scale(e){this.sphere_mesh.scale.set(e.x,e.y,e.z)}get scale(){return this.sphere_mesh.scale}set lastScale(e){this.sphere_mesh.lastScale=e}get lastScale(){return this.sphere_mesh.lastScale}set mode(e){this.transform_controls.mode=e}get mode(){return this.transform_controls.mode}set adsorb(e){this._adsorb=e}get adsorb(){return this._adsorb}}class M2e extends rn{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new tt(.5,.5),this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof Element&&t.element.parentNode!==null&&t.element.parentNode.removeChild(t.element)})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}}const Jh=new G,fk=new yt,pk=new yt,mk=new G,gk=new G;class E2e{constructor(e={}){const t=this;let i,s,r,o;const a={objects:new WeakMap},l=e.element!==void 0?e.element:document.createElement("div");l.style.overflow="hidden",this.domElement=l,this.getSize=function(){return{width:i,height:s}},this.render=function(m,p){m.matrixWorldAutoUpdate===!0&&m.updateMatrixWorld(),p.parent===null&&p.matrixWorldAutoUpdate===!0&&p.updateMatrixWorld(),fk.copy(p.matrixWorldInverse),pk.multiplyMatrices(p.projectionMatrix,fk),u(m,m,p),f(m)},this.setSize=function(m,p){i=m,s=p,r=i/2,o=s/2,l.style.width=m+"px",l.style.height=p+"px"};function c(m){m.isCSS2DObject&&(m.element.style.display="none");for(let p=0,y=m.children.length;p<y;p++)c(m.children[p])}function u(m,p,y){if(m.visible===!1){c(m);return}if(m.isCSS2DObject){Jh.setFromMatrixPosition(m.matrixWorld),Jh.applyMatrix4(pk);const v=Jh.z>=-1&&Jh.z<=1&&m.layers.test(y.layers)===!0,_=m.element;_.style.display=v===!0?"":"none",v===!0&&(m.onBeforeRender(t,p,y),_.style.transform="translate("+-100*m.center.x+"%,"+-100*m.center.y+"%)translate("+(Jh.x*r+r)+"px,"+(-Jh.y*o+o)+"px)",_.parentNode!==l&&l.appendChild(_),m.onAfterRender(t,p,y));const b={distanceToCameraSquared:d(y,m)};a.objects.set(m,b)}for(let v=0,_=m.children.length;v<_;v++)u(m.children[v],p,y)}function d(m,p){return mk.setFromMatrixPosition(m.matrixWorld),gk.setFromMatrixPosition(p.matrixWorld),mk.distanceToSquared(gk)}function h(m){const p=[];return m.traverseVisible(function(y){y.isCSS2DObject&&p.push(y)}),p}function f(m){const p=h(m).sort(function(v,_){if(v.renderOrder!==_.renderOrder)return _.renderOrder-v.renderOrder;const b=a.objects.get(v).distanceToCameraSquared,w=a.objects.get(_).distanceToCameraSquared;return b-w}),y=p.length;for(let v=0,_=p.length;v<_;v++)p[v].element.style.zIndex=y-v}}}const a1=class a1{constructor(){J(this,"_geometry");J(this,"_group");J(this,"_ruler");J(this,"_tempLabel");J(this,"_input");J(this,"_distance");J(this,"_show",!0);J(this,"_edit",!0);this._group=new rn,this._geometry=new jt,this._ruler=new gr(this._geometry,a1.material),this._group.add(this._ruler),this._distance=0}set show(e){this._show==e&&this._ruler,this._show=e,this._group.visible=e,e?(this._group.add(this._tempLabel),Ne.scene.scene.add(this._group)):(this._group.remove(this._tempLabel),Ne.scene.scene.remove(this._group))}get show(){return this._show}get input(){return this._tempLabel||(this._tempLabel=this.createLabel(""),this._group.add(this._tempLabel)),this._input}get value(){var e;return Number((e=this._input)==null?void 0:e.value)}get distance(){return this._distance}get edit(){return this._edit}set edit(e){this._edit=e}showRuler(e,t){this._geometry.setFromPoints([e,t]),this._geometry.attributes.position.needsUpdate=!0,this._geometry.computeBoundingSphere();let i=e.clone();i.add(t),i.multiplyScalar(.5);let s=Math.round(e.distanceTo(t)*1e3)/1e3;this._distance=s,this._tempLabel||(this._tempLabel=this.createLabel(s.toString()),this._group.add(this._tempLabel)),this._tempLabel.position.set(i.x,i.y,i.z),this._input.value=s.toString(),this.show=!0,this._input.disabled=this._edit}createLabel(e){Ne.scene.initCss2dRenderer();const t=document.createElement("input");t.type="text",t.value=e,t.style.pointerEvents="auto",t.style.color="#FFD700",t.style.backgroundColor="rgba(0, 0, 0, 0.9)",t.style.border="none",t.style.borderRadius="2px",t.style.fontSize="12px",t.style.padding="2px 4px",t.style.width="auto",t.style.minWidth="30px",t.style.maxWidth="80px",t.style.outline="none",t.style.textAlign="center",t.style.fontFamily="Arial, sans-serif",t.style.boxShadow="0 0 2px rgba(255, 215, 0, 0.5)";const i=()=>{const r=t.value,o=r.indexOf(".");let a;o!==-1?a=r.slice(0,Math.min(o+4,r.length)).length*7+8:a=r.length*7+8,a=Math.max(30,Math.min(a,80)),t.style.width=`${a}px`};return i(),t.addEventListener("input",i),t.addEventListener("focus",function(){this.style.backgroundColor="rgba(0, 0, 0, 0.7)",this.style.boxShadow="0 0 4px rgba(255, 215, 0, 0.8)"}),t.addEventListener("blur",function(){this.style.backgroundColor="rgba(0, 0, 0, 0.5)",this.style.boxShadow="0 0 2px rgba(255, 215, 0, 0.5)"}),this._input=t,new M2e(t)}dispose(){this.show=!1,this._geometry&&(this._geometry.dispose(),this._geometry=null),this._tempLabel&&(this._tempLabel.clear(),this._tempLabel=null),this._group&&(this._group.clear(),this._group=null),this._ruler&&(this._ruler.clear(),this._ruler=null),this._input&&(this._input=null)}};J(a1,"material",new Vi({color:16766720,depthWrite:!0,depthTest:!1,transparent:!0}));let Sa=a1;const l1=class l1 extends zp{constructor(){super();J(this,"threeController");J(this,"boxHelper");J(this,"_euler");J(this,"_tempVector3");J(this,"_rightRule");J(this,"_leftRule");J(this,"_frontRule");J(this,"_afterRule");J(this,"_topRule");J(this,"_bottomRule");J(this,"selElement");J(this,"enableRender",(t=>{Ne.scene.enableRender()}).bind(this));J(this,"transformElementEvent",(t=>{this.transformElement()}).bind(this));J(this,"transformMouseDown",(t=>{this.threeController.visible&&(Ne.scene.controls.enabled=!1,this.eventListener(!1))}).bind(this));J(this,"transformMouseUp",(t=>{Ne.scene.controls.enabled=!0,this.selElement&&(this.selElement.computeBoundingSphere(),Ne.scene.setOrbitPoint(this.selElement.center.x,this.selElement.center.y,this.selElement.center.z),this.threeController.adsorb&&this.adsorbBottom(this.selElement),this.threeController.setElemet(this.selElement),this.showDistance(this.selElement)),this.eventListener(!0)}).bind(this));l1._instance=this,this.operationType=ms.MaterialEdit,this.threeController=new C2e(Ne.scene.scene,Ne.scene.controls,Ne.scene.renderer.domElement),this.threeController.mode="translate",this.threeController.visible=!1,this.boxHelper=new tA(new Nn),this._euler=new Js,this._tempVector3=new G}static get instance(){return this._instance}transformElement(){if(this.selElement){if(this.threeController.mode=="translate"){let t=this.threeController.position.clone().sub(this.threeController.lastPosition);this.threeController.lastPosition.copy(this.threeController.position),this.selElement.multiplyPosition(t)}else if(this.threeController.mode=="rotate"){let t=this.threeController.quaternion.clone();t.multiply(this.threeController.lastQuaternion.invert()),this.selElement.multiplyQuaternion(t),this.threeController.lastQuaternion.copy(this.threeController.quaternion)}else if(this.threeController.mode=="scale"){let t=this.threeController.scale.clone();t.x/=this.threeController.lastScale.x,t.y/=this.threeController.lastScale.y,t.z/=this.threeController.lastScale.z,this.threeController.lastScale.copy(this.threeController.scale),this.selElement.multiplyScale(t)}ul.modelComponent.value.showModelData(this.selElement,this.threeController)}}Enter(){this.enter(),this.selElemetByID(null),Ne.scene.viewCube.show=!1,Rm.modelToolComponent.value.dialogVisible=!0,FM.editMenuComponent.value.dialogVisible=!0,Ne.scene.scene.add(this.boxHelper),this.boxHelper.visible=!1,this.threeController.transform_controls.camera=Ne.scene.camera,this.threeController.transform_controls.addEventListener("change",this.enableRender),this.threeController.transform_controls.addEventListener("objectChange",this.transformElementEvent),this.threeController.transform_controls.addEventListener("mouseDown",this.transformMouseDown),this.threeController.transform_controls.addEventListener("mouseUp",this.transformMouseUp)}Quit(){this.quit(),ul.modelComponent.value.dialogVisible=!1,Rm.modelToolComponent.value.dialogVisible=!1,FM.editMenuComponent.value.dialogVisible=!1,Ne.scene.viewCube.show=!0,this.threeController.visible=!1,this.selElemetByID(null),Ne.scene.scene.remove(this.boxHelper),this.threeController.transform_controls.removeEventListener("change",this.enableRender),this.threeController.transform_controls.removeEventListener("objectChange",this.transformElementEvent),this.threeController.transform_controls.removeEventListener("mouseDown",this.transformMouseDown),this.threeController.transform_controls.removeEventListener("mouseUp",this.transformMouseUp)}onMouseUp(t){if(t.button==2)return;let i=t.clientX-this.lastX,s=t.clientY-this.lastY;if(Math.abs(i)<=1&&Math.abs(s)<=0){let r=Ne.scene.raycaster.getIntersectObjByGPU(t);this.selElemetOnModelEditByID(r)}this.lastX=null,this.lastY=null,this._moveId=null,this.selElement==null?(this.threeController.visible=!1,ul.modelComponent.value.dialogVisible=!1,this.boxHelper.visible=!1,this.showProperty(null),this.reset()):(this.threeController.visible=!0,ul.modelComponent.value.dialogVisible=!0,Rm.modelToolComponent.value.showModelData(this.selElement,this.threeController),ul.modelComponent.value.showModelData(this.selElement,this.threeController),this.threeController.setElemet(this.selElement),this.boxHelper.visible=!0,this.boxHelper.box=this.selElement.boundingBox,this.showProperty(this.selElement.id),this.showDistance(this.selElement)),Ne.scene.enableRender()}selElemetOnModelEditByID(t){this.resetSelEntity();for(const i of Ne.scene.mapModels.values())if(i.allElementData.has(t)){let s=i.allElementData.get(t);this.selID=t,this.selElement=s,s.boundingBox&&Ne.scene.setOrbitPoint(s.center.x,s.center.y,s.center.z);break}}setElemet(t){this.selElemetOnModelEditByID(t.id),this.threeController.visible=!0,ul.modelComponent.value.dialogVisible=!0,Rm.modelToolComponent.value.showModelData(t,this.threeController),ul.modelComponent.value.showModelData(t,this.threeController),this.threeController.setElemet(t),this.showDistance(t),this.boxHelper.visible=!0,this.boxHelper.box=t.boundingBox}onKeyDown(t){t.code==="Escape"||t.keyCode===27?this.reset():t.code==="Delete"&&this.deleteElemenmt(this.selElement)}reset(){this.resetSelEntity(),this.threeController.visible=!1,ul.modelComponent.value.dialogVisible=!1,this.boxHelper.visible=!1,this._rightRule&&(this._rightRule.show=!1),this._leftRule&&(this._leftRule.show=!1),this._frontRule&&(this._frontRule.show=!1),this._afterRule&&(this._afterRule.show=!1),this._topRule&&(this._topRule.show=!1),this._bottomRule&&(this._bottomRule.show=!1)}deleteElemenmt(t){t&&t.url?(Wb.deleteExternalModel(t),this.reset()):wU({message:"",type:"error"})}adsorbBottom(t){if(t!=null&&t.url){t.show=!1;let i=t.center.clone(),s=Ne.scene.raycaster.getIntersectMeshPointByGPU(i,new G(0,0,-1));s&&(t.multiplyPosition(new G(0,0,-(s.distance-(t.boundingBox.max.z-t.boundingBox.min.z)/2))),t.computeBoundingSphere()),t.show=!0}}showDistance(t){if(t!=null){t.show=!1;let i=t.center.clone();t.boundingBox.getSize(this._tempVector3),this._rightRule==null&&(this._rightRule=new Sa,this.initRuler(this._rightRule,new G(1,0,0))),this.showRule(this._rightRule,i,this._tempVector3.x/2,new G(1,0,0)),this._leftRule==null&&(this._leftRule=new Sa,this.initRuler(this._leftRule,new G(-1,0,0))),this.showRule(this._leftRule,i,this._tempVector3.x/2,new G(-1,0,0)),this._frontRule==null&&(this._frontRule=new Sa,this.initRuler(this._frontRule,new G(0,-1,0))),this.showRule(this._frontRule,i,this._tempVector3.y/2,new G(0,-1,0)),this._afterRule==null&&(this._afterRule=new Sa,this.initRuler(this._afterRule,new G(0,1,0))),this.showRule(this._afterRule,i,this._tempVector3.y/2,new G(0,1,0)),this._topRule==null&&(this._topRule=new Sa,this.initRuler(this._topRule,new G(0,0,1))),this.showRule(this._topRule,i,this._tempVector3.z/2,new G(0,0,1)),this._bottomRule==null&&(this._bottomRule=new Sa,this.initRuler(this._bottomRule,new G(0,0,-1))),this.showRule(this._bottomRule,i,this._tempVector3.z/2,new G(0,0,-1)),t.show=!0}}showRule(t,i,s,r){let o=s-.5,a=new G(i.x+r.x*o,i.y+r.y*o,i.z+r.z*o),l=Ne.scene.raycaster.getIntersectMeshPointByGPU(a,r);if(l){let c=new G(i.x+r.x*s,i.y+r.y*s,i.z+r.z*s);a.distanceTo(l.intersectPoint)-.5<.001?t.show=!1:t.showRuler(c,l.intersectPoint)}else t.show=!1}initRuler(t,i){let s=r=>{if(r.key==="Enter"){let o=t.distance-t.value;if(o/=1e3,this.selElement){let a=i.clone();a.multiplyScalar(o),this.selElement.multiplyPosition(a),this.selElement.computeBoundingSphere(),this.threeController.setElemet(this.selElement),this.showDistance(this.selElement),Ne.scene.setOrbitPoint(this.selElement.center.x,this.selElement.center.y,this.selElement.center.z),Ne.scene.enableRender()}}};t.input.addEventListener("keydown",s)}onContextMenu(t){}};J(l1,"_instance");let BM=l1;class T2e{constructor(e){J(this,"raycaster");J(this,"_mouse",new tt);J(this,"goldenContainer");J(this,"v4",new Ln);J(this,"unpackDownscale",255/256);J(this,"unpackFactors",new Ln(this.unpackDownscale/(256*256*256),this.unpackDownscale/(256*256),this.unpackDownscale/256,this.unpackDownscale));this.raycaster=new wh,this._mouse=new tt,this.goldenContainer=e}getIntersect(e){if(e.type=="dragend"){let o=this.goldenContainer.getBoundingClientRect();e={offsetX:e.x-o.x,offsetY:e.y-o.y}}this._mouse.x=e.offsetX/this.goldenContainer.clientWidth*2-1,this._mouse.y=-(e.offsetY/this.goldenContainer.clientHeight)*2+1;let t=new G(0,0,1),i=new or(t,0);this.raycaster.setFromCamera(this._mouse,Ne.scene.camera);let s=this.raycaster.ray,r=new G(0,0,0);return s.intersectPlane(i,r),r}getIntersectObjByGPU(e){let t=e.offsetX,i=e.offsetY;this._mouse.x=t/this.goldenContainer.clientWidth*2-1,this._mouse.y=-(i/this.goldenContainer.clientHeight)*2+1,this.raycaster.setFromCamera(this._mouse,Ne.scene.camera),this.raycaster.ray;let s=Ne.scene.mapModels;Ne.scene.camera.setViewOffset(Ne.scene.renderer.domElement.width,Ne.scene.renderer.domElement.height,t*window.devicePixelRatio|0,i*window.devicePixelRatio|0,1,1),Ne.scene.renderer.setRenderTarget(Ne.scene.pickingTexture),Ne.scene.obj.isScene=!0,Ne.scene.obj.overrideMaterial=Hn.pickMaterial,Ne.scene.obj.pickRender=!0,Ne.scene.renderer.render(Ne.scene.obj,Ne.scene.camera),Ne.scene.obj.pickRender=!1,Ne.scene.obj.overrideMaterial=null,Ne.scene.obj.isScene=!1;for(const a of s.values())if(a.rootObject.notPick=null,a.tile)for(const l of a.tile.visibleTiles)l.cached.scene.notPick=null;const r=new Uint8Array(4);return Ne.scene.camera.clearViewOffset(),Ne.scene.renderer.readRenderTargetPixels(Ne.scene.pickingTexture,0,0,1,1,r),Ne.scene.renderer.setRenderTarget(null),r[0]<<16|r[1]<<8|r[2]}getIntersectMesh(e){if(e.type=="dragend"){let i=this.goldenContainer.getBoundingClientRect();e={offsetX:e.x-i.x,offsetY:e.y-i.y}}let t=this.getIntersectObjByGPU(e);for(const i of Ne.scene.mapModels.values())if(i.allElementData.has(t)){let s=i.allElementData.get(t);this._mouse.x=e.offsetX/this.goldenContainer.clientWidth*2-1,this._mouse.y=-(e.offsetY/this.goldenContainer.clientHeight)*2+1,this.raycaster.setFromCamera(this._mouse,Ne.scene.camera);let r=new Map,o=[];if(i.tile)for(const l of s.meshDatas){let c=l.mesh.matrix.clone(),u=h=>{h.parent&&(c=c.premultiply(h.parent.matrix),u(h.parent))};u(l);let d=l.mesh.clone();d.applyMatrix4(c),o.push(d),r.set(d,l.mesh)}else for(const l of s.meshDatas)o.push(l.mesh);let a=this.raycaster.intersectObjects(o,!0);if(a.length!=0){let l=a[0].object;if(i.tile){l=r.get(a[0].object);for(const c of o)c.geometry.dispose(),c.clear();r.clear()}return{id:t,mesh:l,intersectPoint:a[0].point}}return null}return null}getIntersectPointByGPU(e){if(e.type=="dragend"){let a=this.goldenContainer.getBoundingClientRect();e={offsetX:e.x-a.x,offsetY:e.y-a.y}}let t=Ne.scene.camera,i=t.far;t instanceof eo&&(i=50),Hn.depthMaterial.setFar&&Hn.depthMaterial.setFar(i);let s=e.offsetX,r=e.offsetY;this._mouse.x=s/this.goldenContainer.clientWidth*2-1,this._mouse.y=-(r/this.goldenContainer.clientHeight)*2+1,this.raycaster.setFromCamera(this._mouse,Ne.scene.camera),Ne.scene.camera.setViewOffset(Ne.scene.renderer.domElement.width,Ne.scene.renderer.domElement.height,s*window.devicePixelRatio|0,r*window.devicePixelRatio|0,1,1),Ne.scene.renderer.setRenderTarget(Ne.scene.pickingTexture),Ne.scene.obj.isScene=!0,Ne.scene.obj.overrideMaterial=Hn.depthMaterial,Ne.scene.obj.pickRender=!0,Ne.scene.renderer.render(Ne.scene.obj,Ne.scene.camera),Ne.scene.obj.pickRender=!1,Ne.scene.obj.overrideMaterial=null,Ne.scene.obj.isScene=!1;const o=new Uint8Array(4);if(Ne.scene.camera.clearViewOffset(),Ne.scene.renderer.readRenderTargetPixels(Ne.scene.pickingTexture,0,0,1,1,o),Ne.scene.renderer.setRenderTarget(null),o[2]!==0||o[1]!==0||o[0]!==0){let a=(o[0]*65535+o[1]*255+o[2])/16777215,l=Math.abs(a)*i;console.log(l);let c=new G,u=new G,d=new G;c.set(this._mouse.x,this._mouse.y,1),c.applyMatrix4(t.projectionMatrixInverse),u.set(this._mouse.x,this._mouse.y,-1),u.applyMatrix4(t.projectionMatrixInverse);const h=(-l-c.z)/(u.z-c.z);return d.set(c.x+(u.x-c.x)*h,c.y+(u.y-c.y)*h,-l),d.applyMatrix4(t.matrixWorld),d}return null}getDepthByGPU(e,t){let i=Ne.scene.camera;Hn.depthMaterial.setFar&&Hn.depthMaterial.setFar(i.far);let s=this.goldenContainer.clientWidth/2,r=this.goldenContainer.clientHeight/2,o=s,a=r;Ne.scene.controls.saveState(),e!=null&&(Ne.scene.controls.azimuthAngle=e),t!=null&&(Ne.scene.controls.polarAngle=t),Ne.scene.controls.update(),i.updateMatrixWorld(),i.setViewOffset(Ne.scene.renderer.domElement.width,Ne.scene.renderer.domElement.height,o*window.devicePixelRatio|0,a*window.devicePixelRatio|0,1,1),Ne.scene.renderer.setRenderTarget(Ne.scene.pickingTexture),Ne.scene.obj.isScene=!0,Ne.scene.obj.overrideMaterial=Hn.depthMaterial,Ne.scene.renderer.render(Ne.scene.obj,i),Ne.scene.obj.overrideMaterial=null,Ne.scene.obj.isScene=!1;const l=new Uint8Array(4);if(i.clearViewOffset(),Ne.scene.renderer.readRenderTargetPixels(Ne.scene.pickingTexture,0,0,1,1,l),Ne.scene.renderer.setRenderTarget(null),Ne.scene.controls.reset(),Ne.scene.controls.update(),i.updateMatrixWorld(),!Hn.depthMaterial.setFar)return-1;if(l[2]!==0||l[1]!==0||l[0]!==0){let c=(l[0]*65535+l[1]*255+l[2])/16777215;return Math.abs(c)*i.far}return-1}getIntersectMeshPointByGPU(e,t){Ne.scene.controls.saveState(),Ne.scene.camera.position.copy(e);let i=e.clone();i.add(t),Ne.scene.camera.lookAt(i),Ne.scene.camera.updateMatrixWorld();let s={offsetX:this.goldenContainer.clientWidth/2,offsetY:this.goldenContainer.clientHeight/2},r=this.getIntersectObjByGPU(s);for(const o of Ne.scene.mapModels.values())if(o.allElementData.has(r)){let a=o.allElementData.get(r);this._mouse.x=s.offsetX/this.goldenContainer.clientWidth*2-1,this._mouse.y=-(s.offsetY/this.goldenContainer.clientHeight)*2+1,this.raycaster.setFromCamera(this._mouse,Ne.scene.camera);let l=new Map,c=[];if(o.tile)for(const d of a.meshDatas){let h=d.mesh.matrix.clone(),f=p=>{p.parent&&(h=h.premultiply(p.parent.matrix),f(p.parent))};f(d);let m=d.mesh.clone();m.applyMatrix4(h),c.push(m),l.set(m,d.mesh)}else for(const d of a.meshDatas)c.push(d.mesh);let u=this.raycaster.intersectObjects(c,!0);if(u.length!=0){let d=u[0].object;if(o.tile){d=l.get(u[0].object);for(const h of c)h.geometry.dispose(),h.clear();l.clear()}return Ne.scene.controls.reset(),Ne.scene.controls.update(),Ne.scene.camera.updateMatrixWorld(),{id:r,mesh:d,intersectPoint:u[0].point,distance:u[0].distance}}return Ne.scene.controls.reset(),Ne.scene.controls.update(),Ne.scene.camera.updateMatrixWorld(),null}return Ne.scene.controls.reset(),Ne.scene.controls.update(),Ne.scene.camera.updateMatrixWorld(),null}}class A2e{constructor(e,t,i){J(this,"cameraOrtho");J(this,"sceneOrtho");J(this,"mesh");J(this,"frustumSize",27);J(this,"_raycaster");J(this,"_mouse",new tt);J(this,"goldenContainer");J(this,"renderer");J(this,"view");J(this,"div");J(this,"hoveredObjectId");J(this,"hoveredMesh");J(this,"rgb");J(this,"viewCubeMeshs",[{vertexs:[-15,-10,-10,-15,-10,10,-15,10,-10,-15,10,10],indexes:[0,1,2,2,1,3],uvs:[5,-5,25,-5,5,-25,25,-25],number_of_triangles:2},{vertexs:[-15,-10,-10,-15,-10,10,-14.87,-11.11,-10,-14.5,-12.17,-10,-13.91,-13.12,-10,-13.12,-13.91,-10,-12.17,-14.5,-10,-11.11,-14.87,-10,-10,-15,-10,-10,-15,10,-14.87,-11.11,10,-14.5,-12.17,10,-13.91,-13.12,10,-13.12,-13.91,10,-12.17,-14.5,10,-11.11,-14.87,10],indexes:[10,1,0,10,0,2,11,2,3,11,3,4,11,10,2,12,11,4,13,4,5,13,12,4,14,5,6,14,6,7,14,13,5,15,14,7,9,7,8,9,15,7],uvs:[],number_of_triangles:14},{vertexs:[-10,-10,-15,-11.11,-10,-14.87,-12.17,-10,-14.5,-13.12,-10,-13.91,-13.91,-10,-13.12,-14.5,-10,-12.17,-14.87,-10,-11.11,-15,-10,-10,-10,10,-15,-11.11,10,-14.87,-12.17,10,-14.5,-13.12,10,-13.91,-13.91,10,-13.12,-14.5,10,-12.17,-14.87,10,-11.11,-15,10,-10],indexes:[7,14,6,15,14,7,5,13,4,6,13,5,14,13,6,13,12,4,4,11,3,12,11,4,2,10,1,3,10,2,11,10,3,10,9,1,1,8,0,9,8,1],uvs:[],number_of_triangles:14},{vertexs:[-10,-10,15,-11.11,-10,14.87,-12.17,-10,14.5,-13.12,-10,13.91,-13.91,-10,13.12,-14.5,-10,12.17,-14.87,-10,11.11,-15,-10,10,-10,10,15,-15,10,10,-14.87,10,11.11,-14.5,10,12.17,-13.91,10,13.12,-13.12,10,13.91,-12.17,10,14.5,-11.11,10,14.87],indexes:[10,7,6,10,9,7,11,5,4,11,6,5,11,10,6,12,11,4,13,4,3,13,12,4,14,2,1,14,3,2,14,13,3,15,14,1,8,1,0,8,15,1],uvs:[],number_of_triangles:14},{vertexs:[-15,10,-10,-15,10,10,-14.87,11.11,-10,-14.5,12.17,-10,-13.91,13.12,-10,-13.12,13.91,-10,-12.17,14.5,-10,-11.11,14.87,-10,-10,15,-10,-10,15,10,-11.11,14.87,10,-12.17,14.5,10,-13.12,13.91,10,-13.91,13.12,10,-14.5,12.17,10,-14.87,11.11,10],indexes:[1,15,0,0,15,2,2,14,3,3,14,4,15,14,2,14,13,4,4,12,5,13,12,4,5,11,6,6,11,7,12,11,5,11,10,7,7,9,8,10,9,7],uvs:[],number_of_triangles:14},{vertexs:[-10,-10,-15,-11.11,-10,-14.87,-12.17,-10,-14.5,-13.12,-10,-13.91,-13.91,-10,-13.12,-14.5,-10,-12.17,-14.87,-10,-11.11,-15,-10,-10,-10,-10,-15,-10,-11.11,-14.87,-10,-12.17,-14.5,-10,-13.12,-13.91,-10,-13.91,-13.12,-10,-14.5,-12.17,-10,-14.87,-11.11,-10,-15,-10,-14.87,-11.11,-10,-14.5,-12.17,-10,-13.91,-13.12,-10,-13.12,-13.91,-10,-12.17,-14.5,-10,-11.11,-14.87,-10,-11.53,-10.24,-14.76,-11.38,-10.7,-14.76,-11.09,-11.09,-14.76,-12.8,-10.91,-14.05,-10.7,-11.38,-14.76,-12.38,-11.73,-14.05,-14,-10.63,-12.94,-10.24,-11.53,-14.76,-11.73,-12.38,-14.05,-13.6,-11.84,-12.94,-10.91,-12.8,-14.05,-12.86,-12.86,-12.94,-14.52,-11.47,-11.55,-11.84,-13.6,-12.94,-13.85,-12.8,-11.55,-10.63,-14,-12.94,-12.8,-13.85,-11.55,-11.47,-14.52,-11.55],indexes:[16,7,6,15,21,14,22,2,1,23,1,0,23,22,1,24,0,8,24,23,0,25,3,2,25,2,22,25,22,23,26,8,9,26,24,8,27,23,24,27,25,23,28,4,3,28,5,4,28,3,25,29,9,10,29,26,9,30,27,24,30,24,26,31,25,27,31,28,25,32,10,11,32,26,29,32,29,10,32,30,26,33,27,30,33,31,27,34,6,5,34,17,16,34,5,28,34,28,31,34,16,6,35,30,32,35,33,30,36,18,17,36,19,18,36,17,34,36,31,33,36,34,31,37,11,12,37,12,13,37,32,11,37,35,32,38,20,19,38,19,36,38,33,35,38,36,33,39,13,14,39,21,20,39,20,38,39,14,21,39,37,13,39,35,37,39,38,35],uvs:[],number_of_triangles:56},{vertexs:[-10,-10,15,-11.11,-10,14.87,-12.17,-10,14.5,-13.12,-10,13.91,-13.91,-10,13.12,-14.5,-10,12.17,-14.87,-10,11.11,-15,-10,10,-10,-10,15,-10,-11.11,14.87,-10,-12.17,14.5,-10,-13.12,13.91,-10,-13.91,13.12,-10,-14.5,12.17,-10,-14.87,11.11,-10,-15,10,-14.87,-11.11,10,-14.5,-12.17,10,-13.91,-13.12,10,-13.12,-13.91,10,-12.17,-14.5,10,-11.11,-14.87,10,-11.53,-10.24,14.76,-11.38,-10.7,14.76,-11.09,-11.09,14.76,-12.8,-10.91,14.05,-10.7,-11.38,14.76,-12.38,-11.73,14.05,-14,-10.63,12.94,-10.24,-11.53,14.76,-11.73,-12.38,14.05,-13.6,-11.84,12.94,-10.91,-12.8,14.05,-12.86,-12.86,12.94,-14.52,-11.47,11.55,-11.84,-13.6,12.94,-13.85,-12.8,11.55,-10.63,-14,12.94,-12.8,-13.85,11.55,-11.47,-14.52,11.55],indexes:[7,16,6,21,15,14,2,22,1,1,23,0,22,23,1,0,24,8,23,24,0,3,25,2,2,25,22,22,25,23,8,26,9,24,26,8,23,27,24,25,27,23,4,28,3,5,28,4,3,28,25,9,29,10,26,29,9,27,30,24,24,30,26,25,31,27,28,31,25,10,32,11,26,32,29,29,32,10,30,32,26,27,33,30,31,33,27,6,34,5,17,34,16,5,34,28,28,34,31,16,34,6,30,35,32,33,35,30,18,36,17,19,36,18,17,36,34,31,36,33,34,36,31,11,37,12,12,37,13,32,37,11,35,37,32,20,38,19,19,38,36,33,38,35,36,38,33,13,39,14,21,39,20,20,39,38,14,39,21,37,39,13,35,39,37,38,39,35],uvs:[],number_of_triangles:56},{vertexs:[-10,-15,-10,-10,-15,10,10,-15,10,10,-15,-10],indexes:[0,2,1,3,2,0],uvs:[5,5,25,5,25,25,5,25],number_of_triangles:2},{vertexs:[-10,-10,-15,-10,10,-15,10,-10,-15,10,10,-15],indexes:[1,3,0,0,3,2],uvs:[5,5,5,25,25,5,25,25],number_of_triangles:2},{vertexs:[-10,10,-15,-11.11,10,-14.87,-12.17,10,-14.5,-13.12,10,-13.91,-13.91,10,-13.12,-14.5,10,-12.17,-14.87,10,-11.11,-15,10,-10,-10,10,-15,-10,11.11,-14.87,-10,12.17,-14.5,-10,13.12,-13.91,-10,13.91,-13.12,-10,14.5,-12.17,-10,14.87,-11.11,-10,15,-10,-14.87,11.11,-10,-14.5,12.17,-10,-13.91,13.12,-10,-13.12,13.91,-10,-12.17,14.5,-10,-11.11,14.87,-10,-11.53,10.24,-14.76,-11.38,10.7,-14.76,-11.09,11.09,-14.76,-12.8,10.91,-14.05,-10.7,11.38,-14.76,-12.38,11.73,-14.05,-14,10.63,-12.94,-10.24,11.53,-14.76,-11.73,12.38,-14.05,-13.6,11.84,-12.94,-10.91,12.8,-14.05,-12.86,12.86,-12.94,-14.52,11.47,-11.55,-11.84,13.6,-12.94,-13.85,12.8,-11.55,-10.63,14,-12.94,-12.8,13.85,-11.55,-11.47,14.52,-11.55],indexes:[7,16,6,21,15,14,2,22,1,1,23,0,22,23,1,0,24,8,23,24,0,3,25,2,2,25,22,22,25,23,8,26,9,24,26,8,23,27,24,25,27,23,4,28,3,5,28,4,3,28,25,9,29,10,26,29,9,27,30,24,24,30,26,25,31,27,28,31,25,10,32,11,26,32,29,29,32,10,30,32,26,27,33,30,31,33,27,6,34,5,17,34,16,5,34,28,28,34,31,16,34,6,30,35,32,33,35,30,18,36,17,19,36,18,17,36,34,31,36,33,34,36,31,11,37,12,12,37,13,32,37,11,35,37,32,20,38,19,19,38,36,33,38,35,36,38,33,13,39,14,21,39,20,20,39,38,14,39,21,37,39,13,35,39,37,38,39,35],uvs:[],number_of_triangles:56},{vertexs:[-10,-10,15,-10,10,15,10,-10,15,10,10,15],indexes:[3,1,0,3,0,2],uvs:[5,5,5,25,25,5,25,25],number_of_triangles:2},{vertexs:[-10,15,10,-11.11,14.87,10,-12.17,14.5,10,-13.12,13.91,10,-13.91,13.12,10,-14.5,12.17,10,-14.87,11.11,10,-15,10,10,-10,15,10,-10,14.87,11.11,-10,14.5,12.17,-10,13.91,13.12,-10,13.12,13.91,-10,12.17,14.5,-10,11.11,14.87,-10,10,15,-14.87,10,11.11,-14.5,10,12.17,-13.91,10,13.12,-13.12,10,13.91,-12.17,10,14.5,-11.11,10,14.87,-11.53,14.76,10.24,-11.38,14.76,10.7,-11.09,14.76,11.09,-12.8,14.05,10.91,-10.7,14.76,11.38,-12.38,14.05,11.73,-14,12.94,10.63,-10.24,14.76,11.53,-11.73,14.05,12.38,-13.6,12.94,11.84,-10.91,14.05,12.8,-12.86,12.94,12.86,-14.52,11.55,11.47,-11.84,12.94,13.6,-13.85,11.55,12.8,-10.63,12.94,14,-12.8,11.55,13.85,-11.47,11.55,14.52],indexes:[7,16,6,21,15,14,2,22,1,1,23,0,22,23,1,0,24,8,23,24,0,3,25,2,2,25,22,22,25,23,8,26,9,24,26,8,23,27,24,25,27,23,4,28,3,5,28,4,3,28,25,9,29,10,26,29,9,27,30,24,24,30,26,25,31,27,28,31,25,10,32,11,26,32,29,29,32,10,30,32,26,27,33,30,31,33,27,6,34,5,17,34,16,5,34,28,28,34,31,16,34,6,30,35,32,33,35,30,18,36,17,19,36,18,17,36,34,31,36,33,34,36,31,11,37,12,12,37,13,32,37,11,35,37,32,20,38,19,19,38,36,33,38,35,36,38,33,13,39,14,21,39,20,20,39,38,14,39,21,37,39,13,35,39,37,38,39,35],uvs:[],number_of_triangles:56},{vertexs:[-10,15,-10,-10,15,10,10,15,10,10,15,-10],indexes:[2,0,1,2,3,0],uvs:[5,5,25,5,25,25,5,25],number_of_triangles:2},{vertexs:[-10,-10,-15,-10,-11.11,-14.87,-10,-12.17,-14.5,-10,-13.12,-13.91,-10,-13.91,-13.12,-10,-14.5,-12.17,-10,-14.87,-11.11,-10,-15,-10,10,-10,-15,10,-11.11,-14.87,10,-12.17,-14.5,10,-13.12,-13.91,10,-13.91,-13.12,10,-14.5,-12.17,10,-14.87,-11.11,10,-15,-10],indexes:[14,7,6,14,15,7,13,5,4,13,6,5,13,14,6,12,13,4,11,4,3,11,12,4,10,2,1,10,3,2,10,11,3,9,10,1,8,1,0,8,9,1],uvs:[],number_of_triangles:14},{vertexs:[-10,-10,15,-10,-11.11,14.87,-10,-12.17,14.5,-10,-13.12,13.91,-10,-13.91,13.12,-10,-14.5,12.17,-10,-14.87,11.11,-10,-15,10,10,-10,15,10,-11.11,14.87,10,-12.17,14.5,10,-13.12,13.91,10,-13.91,13.12,10,-14.5,12.17,10,-14.87,11.11,10,-15,10],indexes:[7,14,6,15,14,7,5,13,4,6,13,5,14,13,6,13,12,4,4,11,3,12,11,4,2,10,1,3,10,2,11,10,3,10,9,1,1,8,0,9,8,1],uvs:[],number_of_triangles:14},{vertexs:[15,-10,-10,15,-10,10,14.87,-11.11,-10,14.5,-12.17,-10,13.91,-13.12,-10,13.12,-13.91,-10,12.17,-14.5,-10,11.11,-14.87,-10,10,-15,-10,10,-15,10,14.87,-11.11,10,14.5,-12.17,10,13.91,-13.12,10,13.12,-13.91,10,12.17,-14.5,10,11.11,-14.87,10],indexes:[1,10,0,0,10,2,2,11,3,3,11,4,10,11,2,11,12,4,4,13,5,12,13,4,5,14,6,6,14,7,13,14,5,14,15,7,7,9,8,15,9,7],uvs:[],number_of_triangles:14},{vertexs:[-10,10,-15,-10,11.11,-14.87,-10,12.17,-14.5,-10,13.12,-13.91,-10,13.91,-13.12,-10,14.5,-12.17,-10,14.87,-11.11,-10,15,-10,10,10,-15,10,11.11,-14.87,10,12.17,-14.5,10,13.12,-13.91,10,13.91,-13.12,10,14.5,-12.17,10,14.87,-11.11,10,15,-10],indexes:[7,14,6,15,14,7,5,13,4,6,13,5,14,13,6,13,12,4,4,11,3,12,11,4,2,10,1,3,10,2,11,10,3,10,9,1,1,8,0,9,8,1],uvs:[],number_of_triangles:14},{vertexs:[10,-10,-15,11.11,-10,-14.87,12.17,-10,-14.5,13.12,-10,-13.91,13.91,-10,-13.12,14.5,-10,-12.17,14.87,-10,-11.11,15,-10,-10,10,10,-15,11.11,10,-14.87,12.17,10,-14.5,13.12,10,-13.91,13.91,10,-13.12,14.5,10,-12.17,14.87,10,-11.11,15,10,-10],indexes:[14,7,6,14,15,7,13,5,4,13,6,5,13,14,6,12,13,4,11,4,3,11,12,4,10,2,1,10,3,2,10,11,3,9,10,1,8,1,0,8,9,1],uvs:[],number_of_triangles:14},{vertexs:[-10,15,10,-10,14.87,11.11,-10,14.5,12.17,-10,13.91,13.12,-10,13.12,13.91,-10,12.17,14.5,-10,11.11,14.87,-10,10,15,10,10,15,10,15,10,10,14.87,11.11,10,14.5,12.17,10,13.91,13.12,10,13.12,13.91,10,12.17,14.5,10,11.11,14.87],indexes:[10,0,1,10,9,0,11,1,2,11,2,3,11,10,1,12,11,3,13,3,4,13,12,3,14,4,5,14,5,6,14,13,4,15,14,6,8,6,7,8,15,6],uvs:[],number_of_triangles:14},{vertexs:[10,-10,15,11.11,-10,14.87,12.17,-10,14.5,13.12,-10,13.91,13.91,-10,13.12,14.5,-10,12.17,14.87,-10,11.11,15,-10,10,10,10,15,15,10,10,14.87,10,11.11,14.5,10,12.17,13.91,10,13.12,13.12,10,13.91,12.17,10,14.5,11.11,10,14.87],indexes:[7,10,6,9,10,7,5,11,4,6,11,5,10,11,6,11,12,4,4,13,3,12,13,4,2,14,1,3,14,2,13,14,3,14,15,1,1,8,0,15,8,1],uvs:[],number_of_triangles:14},{vertexs:[15,10,-10,15,10,10,14.87,11.11,-10,14.5,12.17,-10,13.91,13.12,-10,13.12,13.91,-10,12.17,14.5,-10,11.11,14.87,-10,10,15,-10,10,15,10,11.11,14.87,10,12.17,14.5,10,13.12,13.91,10,13.91,13.12,10,14.5,12.17,10,14.87,11.11,10],indexes:[15,1,0,15,0,2,14,2,3,14,3,4,14,15,2,13,14,4,12,4,5,12,13,4,11,5,6,11,6,7,11,12,5,10,11,7,9,7,8,9,10,7],uvs:[],number_of_triangles:14},{vertexs:[10,-10,-15,11.11,-10,-14.87,12.17,-10,-14.5,13.12,-10,-13.91,13.91,-10,-13.12,14.5,-10,-12.17,14.87,-10,-11.11,15,-10,-10,10,-10,-15,10,-11.11,-14.87,10,-12.17,-14.5,10,-13.12,-13.91,10,-13.91,-13.12,10,-14.5,-12.17,10,-14.87,-11.11,10,-15,-10,14.87,-11.11,-10,14.5,-12.17,-10,13.91,-13.12,-10,13.12,-13.91,-10,12.17,-14.5,-10,11.11,-14.87,-10,11.53,-10.24,-14.76,11.38,-10.7,-14.76,11.09,-11.09,-14.76,12.8,-10.91,-14.05,10.7,-11.38,-14.76,12.38,-11.73,-14.05,14,-10.63,-12.94,10.24,-11.53,-14.76,11.73,-12.38,-14.05,13.6,-11.84,-12.94,10.91,-12.8,-14.05,12.86,-12.86,-12.94,14.52,-11.47,-11.55,11.84,-13.6,-12.94,13.85,-12.8,-11.55,10.63,-14,-12.94,12.8,-13.85,-11.55,11.47,-14.52,-11.55],indexes:[7,16,6,21,15,14,2,22,1,1,23,0,22,23,1,0,24,8,23,24,0,3,25,2,2,25,22,22,25,23,8,26,9,24,26,8,23,27,24,25,27,23,4,28,3,5,28,4,3,28,25,9,29,10,26,29,9,27,30,24,24,30,26,25,31,27,28,31,25,10,32,11,26,32,29,29,32,10,30,32,26,27,33,30,31,33,27,6,34,5,17,34,16,5,34,28,28,34,31,16,34,6,30,35,32,33,35,30,18,36,17,19,36,18,17,36,34,31,36,33,34,36,31,11,37,12,12,37,13,32,37,11,35,37,32,20,38,19,19,38,36,33,38,35,36,38,33,13,39,14,21,39,20,20,39,38,14,39,21,37,39,13,35,39,37,38,39,35],uvs:[],number_of_triangles:56},{vertexs:[10,-10,15,11.11,-10,14.87,12.17,-10,14.5,13.12,-10,13.91,13.91,-10,13.12,14.5,-10,12.17,14.87,-10,11.11,15,-10,10,10,-10,15,10,-11.11,14.87,10,-12.17,14.5,10,-13.12,13.91,10,-13.91,13.12,10,-14.5,12.17,10,-14.87,11.11,10,-15,10,14.87,-11.11,10,14.5,-12.17,10,13.91,-13.12,10,13.12,-13.91,10,12.17,-14.5,10,11.11,-14.87,10,11.53,-10.24,14.76,11.38,-10.7,14.76,11.09,-11.09,14.76,12.8,-10.91,14.05,10.7,-11.38,14.76,12.38,-11.73,14.05,14,-10.63,12.94,10.24,-11.53,14.76,11.73,-12.38,14.05,13.6,-11.84,12.94,10.91,-12.8,14.05,12.86,-12.86,12.94,14.52,-11.47,11.55,11.84,-13.6,12.94,13.85,-12.8,11.55,10.63,-14,12.94,12.8,-13.85,11.55,11.47,-14.52,11.55],indexes:[16,7,6,15,21,14,22,2,1,23,1,0,23,22,1,24,0,8,24,23,0,25,3,2,25,2,22,25,22,23,26,8,9,26,24,8,27,23,24,27,25,23,28,4,3,28,5,4,28,3,25,29,9,10,29,26,9,30,27,24,30,24,26,31,25,27,31,28,25,32,10,11,32,26,29,32,29,10,32,30,26,33,27,30,33,31,27,34,6,5,34,17,16,34,5,28,34,28,31,34,16,6,35,30,32,35,33,30,36,18,17,36,19,18,36,17,34,36,31,33,36,34,31,37,11,12,37,12,13,37,32,11,37,35,32,38,20,19,38,19,36,38,33,35,38,36,33,39,13,14,39,21,20,39,20,38,39,14,21,39,37,13,39,35,37,39,38,35],uvs:[],number_of_triangles:56},{vertexs:[15,-10,-10,15,-10,10,15,10,-10,15,10,10],indexes:[1,0,2,1,2,3],uvs:[5,-5,25,-5,5,-25,25,-25],number_of_triangles:2},{vertexs:[10,10,-15,11.11,10,-14.87,12.17,10,-14.5,13.12,10,-13.91,13.91,10,-13.12,14.5,10,-12.17,14.87,10,-11.11,15,10,-10,10,10,-15,10,11.11,-14.87,10,12.17,-14.5,10,13.12,-13.91,10,13.91,-13.12,10,14.5,-12.17,10,14.87,-11.11,10,15,-10,14.87,11.11,-10,14.5,12.17,-10,13.91,13.12,-10,13.12,13.91,-10,12.17,14.5,-10,11.11,14.87,-10,11.53,10.24,-14.76,11.38,10.7,-14.76,11.09,11.09,-14.76,12.8,10.91,-14.05,10.7,11.38,-14.76,12.38,11.73,-14.05,14,10.63,-12.94,10.24,11.53,-14.76,11.73,12.38,-14.05,13.6,11.84,-12.94,10.91,12.8,-14.05,12.86,12.86,-12.94,14.52,11.47,-11.55,11.84,13.6,-12.94,13.85,12.8,-11.55,10.63,14,-12.94,12.8,13.85,-11.55,11.47,14.52,-11.55],indexes:[16,7,6,15,21,14,22,2,1,23,1,0,23,22,1,24,0,8,24,23,0,25,3,2,25,2,22,25,22,23,26,8,9,26,24,8,27,23,24,27,25,23,28,4,3,28,5,4,28,3,25,29,9,10,29,26,9,30,27,24,30,24,26,31,25,27,31,28,25,32,10,11,32,26,29,32,29,10,32,30,26,33,27,30,33,31,27,34,6,5,34,17,16,34,5,28,34,28,31,34,16,6,35,30,32,35,33,30,36,18,17,36,19,18,36,17,34,36,31,33,36,34,31,37,11,12,37,12,13,37,32,11,37,35,32,38,20,19,38,19,36,38,33,35,38,36,33,39,13,14,39,21,20,39,20,38,39,14,21,39,37,13,39,35,37,39,38,35],uvs:[],number_of_triangles:56},{vertexs:[10,15,10,11.11,14.87,10,12.17,14.5,10,13.12,13.91,10,13.91,13.12,10,14.5,12.17,10,14.87,11.11,10,15,10,10,10,15,10,10,14.87,11.11,10,14.5,12.17,10,13.91,13.12,10,13.12,13.91,10,12.17,14.5,10,11.11,14.87,10,10,15,14.87,10,11.11,14.5,10,12.17,13.91,10,13.12,13.12,10,13.91,12.17,10,14.5,11.11,10,14.87,11.53,14.76,10.24,11.38,14.76,10.7,11.09,14.76,11.09,12.8,14.05,10.91,10.7,14.76,11.38,12.38,14.05,11.73,14,12.94,10.63,10.24,14.76,11.53,11.73,14.05,12.38,13.6,12.94,11.84,10.91,14.05,12.8,12.86,12.94,12.86,14.52,11.55,11.47,11.84,12.94,13.6,13.85,11.55,12.8,10.63,12.94,14,12.8,11.55,13.85,11.47,11.55,14.52],indexes:[16,7,6,15,21,14,22,2,1,23,1,0,23,22,1,24,0,8,24,23,0,25,3,2,25,2,22,25,22,23,26,8,9,26,24,8,27,23,24,27,25,23,28,4,3,28,5,4,28,3,25,29,9,10,29,26,9,30,27,24,30,24,26,31,25,27,31,28,25,32,10,11,32,26,29,32,29,10,32,30,26,33,27,30,33,31,27,34,6,5,34,17,16,34,5,28,34,28,31,34,16,6,35,30,32,35,33,30,36,18,17,36,19,18,36,17,34,36,31,33,36,34,31,37,11,12,37,12,13,37,32,11,37,35,32,38,20,19,38,19,36,38,33,35,38,36,33,39,13,14,39,21,20,39,20,38,39,14,21,39,37,13,39,35,37,39,38,35],uvs:[],number_of_triangles:56}]);J(this,"_show",!0);this.goldenContainer=e,this.view=t,this.init(),this.rgb=[];const s=i.substring(0,7);this.rgb.push(parseInt(s.slice(1,3),16)/255),this.rgb.push(parseInt(s.slice(3,5),16)/255),this.rgb.push(parseInt(s.slice(5,7),16)/255)}init(){this.initOrthoCamera(),this.initOrthoScene(),this.setZUpAxis(!1),this._raycaster=new wh,this.renderer=new k2({antialias:!0,alpha:!0}),this.div=document.createElement("div"),this.div.style.width="120px",this.div.style.height="120px",this.div.style.top="30px",this.div.style.right="30px",this.div.style.position="absolute",this.renderer.domElement.width=120,this.renderer.domElement.height=120,this.div.appendChild(this.renderer.domElement),this.goldenContainer.appendChild(this.div),this.div.addEventListener("contextmenu",e=>e.preventDefault()),this._initEvent()}_initEvent(){this.div.addEventListener("click",e=>{const t=this.getIntersection(e);if(t){const i=t.object,s=i.geometry.attributes.elementID.getX(t.face.a);console.log(s),this._setMeshIndexColor(i,s,this.rgb[0],this.rgb[1],this.rgb[2]),this._setViewPosition(s)}}),this.div.addEventListener("mousemove",e=>{const t=this.getIntersection(e);if(t){const i=t.object,s=i.geometry.attributes.elementID.getX(t.face.a);if(this.hoveredObjectId===s)return;this.resetHover(),this.hoveredMesh=i,this.hoveredObjectId=s,this._setMeshIndexColor(i,s,this.rgb[0],this.rgb[1],this.rgb[2])}else this.resetHover()}),this.div.addEventListener("mouseleave",()=>{this.resetHover()})}resetHover(){this.hoveredMesh&&(this._setMeshIndexColor(this.hoveredMesh,this.hoveredObjectId,1,1,1),this.hoveredMesh=null,this.hoveredObjectId=null)}_setMeshIndexColor(e,t,i,s,r){const o=e.geometry.attributes.color,a=e.geometry.attributes.elementID;for(let l=0;l<a.count;l++)a.getX(l)===t&&o.setXYZ(l,i,s,r);o.needsUpdate=!0,this.render()}initOrthoScene(){this.sceneOrtho=new mh,this.mesh=new As,this.sceneOrtho.add(new Pw(16777215,1.4));const e=new G(-15,-15,15);this.sceneOrtho.add(new M_(new G(1,0,0),e,30,8331296,4,2)),this.sceneOrtho.add(new M_(new G(0,1,0),e,30,2129696,4,2)),this.sceneOrtho.add(new M_(new G(0,0,-1),e,30,2105471,4,2)),[{text:"",position:[0,0,15],rotation:[0,0,0],index:10},{text:"",position:[0,0,-15],rotation:[Math.PI,0,0],index:8,rotate:180},{text:"",position:[-15,0,0],rotation:[0,-Math.PI/2,0],index:0},{text:"",position:[15,0,0],rotation:[0,Math.PI/2,0],index:23},{text:"",position:[0,-15,0],rotation:[Math.PI/2,0,0],index:7},{text:"",position:[0,15,0],rotation:[-Math.PI/2,0,0],index:12}].forEach(d=>{const h=this.creatTextMaterial(d.text,d.rotate);h.vertexColors=!0;const f=new ua(20,20);f.rotateX(d.rotation[0]),f.rotateY(d.rotation[1]),f.rotateZ(d.rotation[2]),f.translate(d.position[0],d.position[1],d.position[2]);const m=new vf(new Uint8Array(f.attributes.position.count*3).fill(255),3,!0),p=new vf(new Uint8Array(f.attributes.position.count).fill(d.index),1);f.setAttribute("color",m),f.setAttribute("elementID",p);const y=new ut(f,h);this.mesh.add(y)});const i=[],s=[],r=[];let o=0;for(let d=0;d<this.viewCubeMeshs.length;d++){const h=this.viewCubeMeshs[d];if(h.number_of_triangles!=2){const f=h.vertexs.length/3;for(let p=0;p<f;p++){const y=3*p;i.push(h.vertexs[y]),i.push(h.vertexs[y+1]),i.push(h.vertexs[y+2]),r.push(d)}let m=0;for(const p of h.indexes)s.push(p+o),p>m&&(m=p);o=o+m+1}}const a=new $n;let l=new jt;l.setIndex(s),l.setAttribute("position",new kt(i,3)),l.setAttribute("elementID",new vf(r,1));const c=new vf(new Uint8Array(i.length).fill(255),3,!0);l.setAttribute("color",c),a.vertexColors=!0;const u=new ut(l,a);this.mesh.add(u),this.sceneOrtho.add(this.mesh)}getIntersection(e){this._mouse.x=e.offsetX/this.div.clientWidth*2-1,this._mouse.y=-(e.offsetY/this.div.clientHeight)*2+1,this._raycaster.setFromCamera(this._mouse,this.cameraOrtho);let t=this._raycaster.intersectObjects(this.mesh.children,!0);return t.length>0?t[0]:null}creatTextMaterial(e,t=0){let i=512,s=512,r=document.createElement("canvas");r.width=i,r.height=s;let o=r.getContext("2d");if(o.fillStyle="#ffffff",o.fillRect(0,0,i,s),o.font='200px " bold',o.textAlign="center",o.fillStyle="#000000",o.textBaseline="middle",t!=0){let l=(r.width-i)*.5,c=(r.height-s)*.5,u=l+.5*i,d=c+.5*s;o.translate(u,d),o.rotate(Math.PI/180*t),o.translate(-u,-d)}return o.fillText(e,i/2,s/2),new $2({map:new Hz(r)})}initOrthoCamera(){this.cameraOrtho=new eo(-this.frustumSize,this.frustumSize,this.frustumSize,-this.frustumSize,.1,1e4),this.cameraOrtho.position.set(0,50,100),this.cameraOrtho.lookAt(0,0,0),this.cameraOrtho.up=new G(0,0,1)}setZUpAxis(e){e==!0?this.cameraOrtho.up=new G(0,0,1):this.cameraOrtho.up=new G(0,1,0)}render(){this.cameraOrtho.position.copy(this.view.controls.getPosition()),this.cameraOrtho.position.sub(this.view.controls.getTarget()),this.cameraOrtho.lookAt(this.view.scene.position);let e=this.cameraOrtho.position.normalize();this.cameraOrtho.position.x=e.x*50,this.cameraOrtho.position.y=e.y*50,this.cameraOrtho.position.z=e.z*50,this.renderer.setViewport(0,0,this.div.clientWidth,this.div.clientHeight),this.renderer.render(this.sceneOrtho,this.cameraOrtho)}onWindowResize(){this.cameraOrtho.left=-this.frustumSize,this.cameraOrtho.right=this.frustumSize,this.cameraOrtho.top=this.frustumSize,this.cameraOrtho.bottom=-this.frustumSize,this.cameraOrtho.updateProjectionMatrix()}set show(e){this._show!=e&&(this._show=e,e?this.div.style.display="":this.div.style.display="none")}get show(){return this._show}_setViewPosition(e){switch(e){case 0:this.view.rotateTo(-Math.PI/2,Math.PI/2);break;case 23:this.view.rotateTo(Math.PI/2,Math.PI/2);break;case 10:this.view.rotateTo(0,Math.PI/2);break;case 8:this.view.rotateTo(Math.PI,Math.PI/2);break;case 12:this.view.rotateTo(0,0);break;case 7:this.view.rotateTo(0,Math.PI);break;case 18:this.view.rotateTo(0,Math.PI/4);break;case 14:this.view.rotateTo(0,Math.PI*3/4);break;case 3:this.view.rotateTo(-Math.PI/4,Math.PI/2);break;case 19:this.view.rotateTo(Math.PI/4,Math.PI/2);break;case 11:this.view.rotateTo(-Math.PI/4,Math.PI/4);break;case 6:this.view.rotateTo(-Math.PI/4,Math.PI*3/4);break;case 25:this.view.rotateTo(Math.PI/4,Math.PI/4);break;case 22:this.view.rotateTo(Math.PI/4,Math.PI*3/4);break;case 20:this.view.rotateTo(Math.PI/2,Math.PI/4);break;case 15:this.view.rotateTo(Math.PI/2,Math.PI*3/4);break;case 4:this.view.rotateTo(-Math.PI/2,Math.PI/4);break;case 1:this.view.rotateTo(-Math.PI/2,Math.PI*3/4);break;case 16:this.view.rotateTo(Math.PI,Math.PI/4);break;case 13:this.view.rotateTo(Math.PI,Math.PI*3/4);break;case 2:this.view.rotateTo(-Math.PI*3/4,Math.PI/2);break;case 17:this.view.rotateTo(Math.PI*3/4,Math.PI/2);break;case 21:this.view.rotateTo(Math.PI*3/4,Math.PI*3/4);break;case 5:this.view.rotateTo(-Math.PI*3/4,Math.PI*3/4);break;case 9:this.view.rotateTo(-Math.PI*3/4,Math.PI/4);break;case 24:this.view.rotateTo(Math.PI*3/4,Math.PI/4);break}}}var G5={exports:{}},I2e=G5.exports={};I2e.forEach=function(n,e){for(var t=0;t<n.length;t++){var i=e(n[t]);if(i)return i}};var W5=G5.exports,R2e=function(n){var e=n.stateHandler.getState;function t(o){var a=e(o);return a&&!!a.isDetectable}function i(o){e(o).isDetectable=!0}function s(o){return!!e(o).busy}function r(o,a){e(o).busy=!!a}return{isDetectable:t,markAsDetectable:i,isBusy:s,markBusy:r}},P2e=function(n){var e={};function t(o){var a=n.get(o);return a===void 0?[]:e[a]||[]}function i(o,a){var l=n.get(o);e[l]||(e[l]=[]),e[l].push(a)}function s(o,a){for(var l=t(o),c=0,u=l.length;c<u;++c)if(l[c]===a){l.splice(c,1);break}}function r(o){var a=t(o);a&&(a.length=0)}return{get:t,add:i,removeListener:s,removeAllListeners:r}},L2e=function(){var n=1;function e(){return n++}return{generate:e}},k2e=function(n){var e=n.idGenerator,t=n.stateHandler.getState;function i(r){var o=t(r);return o&&o.id!==void 0?o.id:null}function s(r){var o=t(r);if(!o)throw new Error("setId required the element to have a resize detection state.");var a=e.generate();return o.id=a,a}return{get:i,set:s}},O2e=function(n){function e(){}var t={log:e,warn:e,error:e};if(!n&&window.console){var i=function(s,r){s[r]=function(){var a=console[r];if(a.apply)a.apply(console,arguments);else for(var l=0;l<arguments.length;l++)a(arguments[l])}};i(t,"log"),i(t,"warn"),i(t,"error")}return t},K5={exports:{}},Y5=K5.exports={};Y5.isIE=function(n){function e(){var i=navigator.userAgent.toLowerCase();return i.indexOf("msie")!==-1||i.indexOf("trident")!==-1||i.indexOf(" edge/")!==-1}if(!e())return!1;if(!n)return!0;var t=function(){var i,s=3,r=document.createElement("div"),o=r.getElementsByTagName("i");do r.innerHTML="<!--[if gt IE "+ ++s+"]><i></i><![endif]-->";while(o[0]);return s>4?s:i}();return n===t};Y5.isLegacyOpera=function(){return!!window.opera};var X5=K5.exports,j5={exports:{}},D2e=j5.exports={};D2e.getOption=N2e;function N2e(n,e,t){var i=n[e];return i==null&&t!==void 0?t:i}var F2e=j5.exports,vk=F2e,B2e=function(e){e=e||{};var t=e.reporter,i=vk.getOption(e,"async",!0),s=vk.getOption(e,"auto",!0);s&&!i&&(t&&t.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),i=!0);var r=yk(),o,a=!1;function l(m,p){!a&&s&&i&&r.size()===0&&d(),r.add(m,p)}function c(){for(a=!0;r.size();){var m=r;r=yk(),m.process()}a=!1}function u(m){a||(m===void 0&&(m=i),o&&(h(o),o=null),m?d():c())}function d(){o=f(c)}function h(m){var p=clearTimeout;return p(m)}function f(m){var p=function(y){return setTimeout(y,0)};return p(m)}return{add:l,force:u}};function yk(){var n={},e=0,t=0,i=0;function s(a,l){l||(l=a,a=0),a>t?t=a:a<i&&(i=a),n[a]||(n[a]=[]),n[a].push(l),e++}function r(){for(var a=i;a<=t;a++)for(var l=n[a],c=0;c<l.length;c++){var u=l[c];u()}}function o(){return e}return{add:s,process:r,size:o}}var lA="_erd";function U2e(n){return n[lA]={},q5(n)}function q5(n){return n[lA]}function z2e(n){delete n[lA]}var H2e={initState:U2e,getState:q5,cleanState:z2e},gm=X5,V2e=function(n){n=n||{};var e=n.reporter,t=n.batchProcessor,i=n.stateHandler.getState;if(!e)throw new Error("Missing required dependency: reporter.");function s(c,u){function d(){u(c)}if(gm.isIE(8))i(c).object={proxy:d},c.attachEvent("onresize",d);else{var h=a(c);if(!h)throw new Error("Element is not detectable by this strategy.");h.contentDocument.defaultView.addEventListener("resize",d)}}function r(c){var u=n.important?" !important; ":"; ";return(c.join(u)+u).trim()}function o(c,u,d){d||(d=u,u=c,c=null),c=c||{},c.debug;function h(f,m){var p=r(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),y=!1,v=window.getComputedStyle(f),_=f.offsetWidth,b=f.offsetHeight;i(f).startSize={width:_,height:b};function w(){function x(){if(v.position==="static"){f.style.setProperty("position","relative",c.important?"important":"");var T=function(M,E,A,I){function B(U){return U.replace(/[^-\d\.]/g,"")}var F=A[I];F!=="auto"&&B(F)!=="0"&&(M.warn("An element that is positioned static has style."+I+"="+F+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+I+" will be set to 0. Element: ",E),E.style.setProperty(I,"0",c.important?"important":""))};T(e,f,v,"top"),T(e,f,v,"right"),T(e,f,v,"bottom"),T(e,f,v,"left")}}function S(){y||x();function T(E,A){if(!E.contentDocument){var I=i(E);I.checkForObjectDocumentTimeoutId&&window.clearTimeout(I.checkForObjectDocumentTimeoutId),I.checkForObjectDocumentTimeoutId=setTimeout(function(){I.checkForObjectDocumentTimeoutId=0,T(E,A)},100);return}A(E.contentDocument)}var M=this;T(M,function(A){m(f)})}v.position!==""&&(x(),y=!0);var C=document.createElement("object");C.style.cssText=p,C.tabIndex=-1,C.type="text/html",C.setAttribute("aria-hidden","true"),C.onload=S,gm.isIE()||(C.data="about:blank"),i(f)&&(f.appendChild(C),i(f).object=C,gm.isIE()&&(C.data="about:blank"))}t?t.add(w):w()}gm.isIE(8)?d(u):h(u,d)}function a(c){return i(c).object}function l(c){if(i(c)){var u=a(c);u&&(gm.isIE(8)?c.detachEvent("onresize",u.proxy):c.removeChild(u),i(c).checkForObjectDocumentTimeoutId&&window.clearTimeout(i(c).checkForObjectDocumentTimeoutId),delete i(c).object)}}return{makeDetectable:o,addListener:s,uninstall:l}},$2e=W5.forEach,G2e=function(n){n=n||{};var e=n.reporter,t=n.batchProcessor,i=n.stateHandler.getState;n.stateHandler.hasState;var s=n.idHandler;if(!t)throw new Error("Missing required dependency: batchProcessor");if(!e)throw new Error("Missing required dependency: reporter.");var r=u(),o="erd_scroll_detection_scrollbar_style",a="erd_scroll_detection_container";function l(w){d(w,o,a)}l(window.document);function c(w){var x=n.important?" !important; ":"; ";return(w.join(x)+x).trim()}function u(){var w=500,x=500,S=document.createElement("div");S.style.cssText=c(["position: absolute","width: "+w*2+"px","height: "+x*2+"px","visibility: hidden","margin: 0","padding: 0"]);var C=document.createElement("div");C.style.cssText=c(["position: absolute","width: "+w+"px","height: "+x+"px","overflow: scroll","visibility: none","top: "+-w*3+"px","left: "+-x*3+"px","visibility: hidden","margin: 0","padding: 0"]),C.appendChild(S),document.body.insertBefore(C,document.body.firstChild);var T=w-C.clientWidth,M=x-C.clientHeight;return document.body.removeChild(C),{width:T,height:M}}function d(w,x,S){function C(A,I){I=I||function(F){w.head.appendChild(F)};var B=w.createElement("style");return B.innerHTML=A,B.id=x,I(B),B}if(!w.getElementById(x)){var T=S+"_animation",M=S+"_animation_active",E=`/* Created by the element-resize-detector library. */
`;E+="."+S+" > div::-webkit-scrollbar { "+c(["display: none"])+` }

`,E+="."+M+" { "+c(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+T,"animation-name: "+T])+` }
`,E+="@-webkit-keyframes "+T+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,E+="@keyframes "+T+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",C(E)}}function h(w){w.className+=" "+a+"_animation_active"}function f(w,x,S){if(w.addEventListener)w.addEventListener(x,S);else if(w.attachEvent)w.attachEvent("on"+x,S);else return e.error("[scroll] Don't know how to add event listeners.")}function m(w,x,S){if(w.removeEventListener)w.removeEventListener(x,S);else if(w.detachEvent)w.detachEvent("on"+x,S);else return e.error("[scroll] Don't know how to remove event listeners.")}function p(w){return i(w).container.childNodes[0].childNodes[0].childNodes[0]}function y(w){return i(w).container.childNodes[0].childNodes[0].childNodes[1]}function v(w,x){var S=i(w).listeners;if(!S.push)throw new Error("Cannot add listener to an element that is not detectable.");i(w).listeners.push(x)}function _(w,x,S){S||(S=x,x=w,w=null),w=w||{};function C(){if(w.debug){var Te=Array.prototype.slice.call(arguments);if(Te.unshift(s.get(x),"Scroll: "),e.log.apply)e.log.apply(null,Te);else for(var Ce=0;Ce<Te.length;Ce++)e.log(Te[Ce])}}function T(Te){function Ce(we){var K=we.getRootNode&&we.getRootNode().contains(we);return we===we.ownerDocument.body||we.ownerDocument.body.contains(we)||K}return!Ce(Te)||window.getComputedStyle(Te)===null}function M(Te){var Ce=i(Te).container.childNodes[0],we=window.getComputedStyle(Ce);return!we.width||we.width.indexOf("px")===-1}function E(){var Te=window.getComputedStyle(x),Ce={};return Ce.position=Te.position,Ce.width=x.offsetWidth,Ce.height=x.offsetHeight,Ce.top=Te.top,Ce.right=Te.right,Ce.bottom=Te.bottom,Ce.left=Te.left,Ce.widthCSS=Te.width,Ce.heightCSS=Te.height,Ce}function A(){var Te=E();i(x).startSize={width:Te.width,height:Te.height},C("Element start size",i(x).startSize)}function I(){i(x).listeners=[]}function B(){if(C("storeStyle invoked."),!i(x)){C("Aborting because element has been uninstalled");return}var Te=E();i(x).style=Te}function F(Te,Ce,we){i(Te).lastWidth=Ce,i(Te).lastHeight=we}function U(Te){return p(Te).childNodes[0]}function P(){return 2*r.width+1}function O(){return 2*r.height+1}function D(Te){return Te+10+P()}function L(Te){return Te+10+O()}function H(Te){return Te*2+P()}function X(Te){return Te*2+O()}function ne(Te,Ce,we){var K=p(Te),j=y(Te),ie=D(Ce),ve=L(we),ye=H(Ce),me=X(we);K.scrollLeft=ie,K.scrollTop=ve,j.scrollLeft=ye,j.scrollTop=me}function ce(){var Te=i(x).container;if(!Te){Te=document.createElement("div"),Te.className=a,Te.style.cssText=c(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),i(x).container=Te,h(Te),x.appendChild(Te);var Ce=function(){i(x).onRendered&&i(x).onRendered()};f(Te,"animationstart",Ce),i(x).onAnimationStart=Ce}return Te}function ae(){function Te(){var je=i(x).style;if(je.position==="static"){x.style.setProperty("position","relative",w.important?"important":"");var at=function(Ue,qe,Fe,Ie){function oe(Ke){return Ke.replace(/[^-\d\.]/g,"")}var Le=Fe[Ie];Le!=="auto"&&oe(Le)!=="0"&&(Ue.warn("An element that is positioned static has style."+Ie+"="+Le+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+Ie+" will be set to 0. Element: ",qe),qe.style[Ie]=0)};at(e,x,je,"top"),at(e,x,je,"right"),at(e,x,je,"bottom"),at(e,x,je,"left")}}function Ce(je,at,Ue,qe){return je=je?je+"px":"0",at=at?at+"px":"0",Ue=Ue?Ue+"px":"0",qe=qe?qe+"px":"0",["left: "+je,"top: "+at,"right: "+qe,"bottom: "+Ue]}if(C("Injecting elements"),!i(x)){C("Aborting because element has been uninstalled");return}Te();var we=i(x).container;we||(we=ce());var K=r.width,j=r.height,ie=c(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),ve=c(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(Ce(-(1+K),-(1+j),-j,-K))),ye=c(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),me=c(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),be=c(["position: absolute","left: 0","top: 0"]),Pe=c(["position: absolute","width: 200%","height: 200%"]),Z=document.createElement("div"),$=document.createElement("div"),de=document.createElement("div"),Ae=document.createElement("div"),De=document.createElement("div"),fe=document.createElement("div");Z.dir="ltr",Z.style.cssText=ie,Z.className=a,$.className=a,$.style.cssText=ve,de.style.cssText=ye,Ae.style.cssText=be,De.style.cssText=me,fe.style.cssText=Pe,de.appendChild(Ae),De.appendChild(fe),$.appendChild(de),$.appendChild(De),Z.appendChild($),we.appendChild(Z);function Ge(){var je=i(x);je&&je.onExpand?je.onExpand():C("Aborting expand scroll handler: element has been uninstalled")}function We(){var je=i(x);je&&je.onShrink?je.onShrink():C("Aborting shrink scroll handler: element has been uninstalled")}f(de,"scroll",Ge),f(De,"scroll",We),i(x).onExpandScroll=Ge,i(x).onShrinkScroll=We}function _e(){function Te(ye,me,be){var Pe=U(ye),Z=D(me),$=L(be);Pe.style.setProperty("width",Z+"px",w.important?"important":""),Pe.style.setProperty("height",$+"px",w.important?"important":"")}function Ce(ye){var me=x.offsetWidth,be=x.offsetHeight,Pe=me!==i(x).lastWidth||be!==i(x).lastHeight;C("Storing current size",me,be),F(x,me,be),t.add(0,function(){if(Pe){if(!i(x)){C("Aborting because element has been uninstalled");return}if(!we()){C("Aborting because element container has not been initialized");return}if(w.debug){var $=x.offsetWidth,de=x.offsetHeight;($!==me||de!==be)&&e.warn(s.get(x),"Scroll: Size changed before updating detector elements.")}Te(x,me,be)}}),t.add(1,function(){if(!i(x)){C("Aborting because element has been uninstalled");return}if(!we()){C("Aborting because element container has not been initialized");return}ne(x,me,be)}),Pe&&ye&&t.add(2,function(){if(!i(x)){C("Aborting because element has been uninstalled");return}if(!we()){C("Aborting because element container has not been initialized");return}ye()})}function we(){return!!i(x).container}function K(){function ye(){return i(x).lastNotifiedWidth===void 0}C("notifyListenersIfNeeded invoked");var me=i(x);if(ye()&&me.lastWidth===me.startSize.width&&me.lastHeight===me.startSize.height)return C("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(me.lastWidth===me.lastNotifiedWidth&&me.lastHeight===me.lastNotifiedHeight)return C("Not notifying: Size already notified");C("Current size not notified, notifying..."),me.lastNotifiedWidth=me.lastWidth,me.lastNotifiedHeight=me.lastHeight,$2e(i(x).listeners,function(be){be(x)})}function j(){if(C("startanimation triggered."),M(x)){C("Ignoring since element is still unrendered...");return}C("Element rendered.");var ye=p(x),me=y(x);(ye.scrollLeft===0||ye.scrollTop===0||me.scrollLeft===0||me.scrollTop===0)&&(C("Scrollbars out of sync. Updating detector elements..."),Ce(K))}function ie(){if(C("Scroll detected."),M(x)){C("Scroll event fired while unrendered. Ignoring...");return}Ce(K)}if(C("registerListenersAndPositionElements invoked."),!i(x)){C("Aborting because element has been uninstalled");return}i(x).onRendered=j,i(x).onExpand=ie,i(x).onShrink=ie;var ve=i(x).style;Te(x,ve.width,ve.height)}function re(){if(C("finalizeDomMutation invoked."),!i(x)){C("Aborting because element has been uninstalled");return}var Te=i(x).style;F(x,Te.width,Te.height),ne(x,Te.width,Te.height)}function xe(){S(x)}function he(){C("Installing..."),I(),A(),t.add(0,B),t.add(1,ae),t.add(2,_e),t.add(3,re),t.add(4,xe)}C("Making detectable..."),T(x)?(C("Element is detached"),ce(),C("Waiting until element is attached..."),i(x).onRendered=function(){C("Element is now attached"),he()}):he()}function b(w){var x=i(w);x&&(x.onExpandScroll&&m(p(w),"scroll",x.onExpandScroll),x.onShrinkScroll&&m(y(w),"scroll",x.onShrinkScroll),x.onAnimationStart&&m(x.container,"animationstart",x.onAnimationStart),x.container&&w.removeChild(x.container))}return{makeDetectable:_,addListener:v,uninstall:b,initDocument:l}},km=W5.forEach,W2e=R2e,K2e=P2e,Y2e=L2e,X2e=k2e,j2e=O2e,_k=X5,q2e=B2e,gc=H2e,Z2e=V2e,J2e=G2e;function bk(n){return Array.isArray(n)||n.length!==void 0}function wk(n){if(Array.isArray(n))return n;var e=[];return km(n,function(t){e.push(t)}),e}function xk(n){return n&&n.nodeType===1}var Q2e=function(n){n=n||{};var e;if(n.idHandler)e={get:function(_){return n.idHandler.get(_,!0)},set:n.idHandler.set};else{var t=Y2e(),i=X2e({idGenerator:t,stateHandler:gc});e=i}var s=n.reporter;if(!s){var r=s===!1;s=j2e(r)}var o=vc(n,"batchProcessor",q2e({reporter:s})),a={};a.callOnAdd=!!vc(n,"callOnAdd",!0),a.debug=!!vc(n,"debug",!1);var l=K2e(e),c=W2e({stateHandler:gc}),u,d=vc(n,"strategy","object"),h=vc(n,"important",!1),f={reporter:s,batchProcessor:o,stateHandler:gc,idHandler:e,important:h};if(d==="scroll"&&(_k.isLegacyOpera()?(s.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),d="object"):_k.isIE(9)&&(s.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),d="object")),d==="scroll")u=J2e(f);else if(d==="object")u=Z2e(f);else throw new Error("Invalid strategy name: "+d);var m={};function p(_,b,w){function x(A){var I=l.get(A);km(I,function(F){F(A)})}function S(A,I,B){l.add(I,B),A&&B(I)}if(w||(w=b,b=_,_={}),!b)throw new Error("At least one element required.");if(!w)throw new Error("Listener required.");if(xk(b))b=[b];else if(bk(b))b=wk(b);else return s.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var C=0,T=vc(_,"callOnAdd",a.callOnAdd),M=vc(_,"onReady",function(){}),E=vc(_,"debug",a.debug);km(b,function(I){gc.getState(I)||(gc.initState(I),e.set(I));var B=e.get(I);if(E&&s.log("Attaching listener to element",B,I),!c.isDetectable(I)){if(E&&s.log(B,"Not detectable."),c.isBusy(I)){E&&s.log(B,"System busy making it detectable"),S(T,I,w),m[B]=m[B]||[],m[B].push(function(){C++,C===b.length&&M()});return}return E&&s.log(B,"Making detectable..."),c.markBusy(I,!0),u.makeDetectable({debug:E,important:h},I,function(U){if(E&&s.log(B,"onElementDetectable"),gc.getState(U)){c.markAsDetectable(U),c.markBusy(U,!1),u.addListener(U,x),S(T,U,w);var P=gc.getState(U);if(P&&P.startSize){var O=U.offsetWidth,D=U.offsetHeight;(P.startSize.width!==O||P.startSize.height!==D)&&x(U)}m[B]&&km(m[B],function(L){L()})}else E&&s.log(B,"Element uninstalled before being detectable.");delete m[B],C++,C===b.length&&M()})}E&&s.log(B,"Already detecable, adding listener."),S(T,I,w),C++}),C===b.length&&M()}function y(_){if(!_)return s.error("At least one element is required.");if(xk(_))_=[_];else if(bk(_))_=wk(_);else return s.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");km(_,function(b){l.removeAllListeners(b),u.uninstall(b),gc.cleanState(b)})}function v(_){u.initDocument&&u.initDocument(_)}return{listenTo:p,removeListener:l.removeListener,removeAllListeners:l.removeAllListeners,uninstall:y,initDocument:v}};function vc(n,e,t){var i=n[e];return i==null&&t!==void 0?t:i}const eAe=Xa(Q2e);var hg=function(){var n=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(u){u.preventDefault(),i(++n%e.children.length)},!1);function t(u){return e.appendChild(u.dom),u}function i(u){for(var d=0;d<e.children.length;d++)e.children[d].style.display=d===u?"block":"none";n=u}var s=(performance||Date).now(),r=s,o=0,a=t(new hg.Panel("FPS","#0ff","#002")),l=t(new hg.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=t(new hg.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:e,addPanel:t,showPanel:i,begin:function(){s=(performance||Date).now()},end:function(){o++;var u=(performance||Date).now();if(l.update(u-s,200),u>=r+1e3&&(a.update(o*1e3/(u-r),100),r=u,o=0,c)){var d=performance.memory;c.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return u},update:function(){s=this.end()},domElement:e,setMode:i}};hg.Panel=function(n,e,t){var i=1/0,s=0,r=Math.round,o=r(window.devicePixelRatio||1),a=80*o,l=48*o,c=3*o,u=2*o,d=3*o,h=15*o,f=74*o,m=30*o,p=document.createElement("canvas");p.width=a,p.height=l,p.style.cssText="width:80px;height:48px";var y=p.getContext("2d");return y.font="bold "+9*o+"px Helvetica,Arial,sans-serif",y.textBaseline="top",y.fillStyle=t,y.fillRect(0,0,a,l),y.fillStyle=e,y.fillText(n,c,u),y.fillRect(d,h,f,m),y.fillStyle=t,y.globalAlpha=.9,y.fillRect(d,h,f,m),{dom:p,update:function(v,_){i=Math.min(i,v),s=Math.max(s,v),y.fillStyle=t,y.globalAlpha=1,y.fillRect(0,0,a,h),y.fillStyle=e,y.fillText(r(v)+" "+n+" ("+r(i)+"-"+r(s)+")",c,u),y.drawImage(p,d+o,h,f-o,m,d,h,f-o,m),y.fillRect(d+f-o,h,o,m),y.fillStyle=t,y.globalAlpha=.9,y.fillRect(d+f-o,h,o,r((1-v/_)*m))}}};const nn={LEFT:1,RIGHT:2,MIDDLE:4},ot=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768});function AS(n,e){e.set(0,0),n.forEach(t=>{e.x+=t.clientX,e.y+=t.clientY}),e.x/=n.length,e.y/=n.length}const Z5=1e-5,vm=Math.PI/180;function df(n,e,t){return Math.max(e,Math.min(t,n))}function xi(n,e=Z5){return Math.abs(n)<e}function oi(n,e,t=Z5){return xi(n-e,t)}function Sk(n,e){return Math.round(n/e)*e}function ym(n){return isFinite(n)?n:n<0?-Number.MAX_VALUE:Number.MAX_VALUE}function _m(n){return Math.abs(n)<Number.MAX_VALUE?n:n*(1/0)}function $y(n,e,t,i,s=1/0,r){i=Math.max(1e-4,i);const o=2/i,a=o*r,l=1/(1+a+.48*a*a+.235*a*a*a);let c=n-e;const u=e,d=s*i;c=df(c,-d,d),e=n-c;const h=(t.value+o*c)*r;t.value=(t.value-o*h)*l;let f=e+(c+h)*l;return u-n>0==f>u&&(f=u,t.value=(f-u)/r),f}function Ck(n,e,t,i,s=1/0,r,o){i=Math.max(1e-4,i);const a=2/i,l=a*r,c=1/(1+l+.48*l*l+.235*l*l*l);let u=e.x,d=e.y,h=e.z,f=n.x-u,m=n.y-d,p=n.z-h;const y=u,v=d,_=h,b=s*i,w=b*b,x=f*f+m*m+p*p;if(x>w){const U=Math.sqrt(x);f=f/U*b,m=m/U*b,p=p/U*b}u=n.x-f,d=n.y-m,h=n.z-p;const S=(t.x+a*f)*r,C=(t.y+a*m)*r,T=(t.z+a*p)*r;t.x=(t.x-a*S)*c,t.y=(t.y-a*C)*c,t.z=(t.z-a*T)*c,o.x=u+(f+S)*c,o.y=d+(m+C)*c,o.z=h+(p+T)*c;const M=y-n.x,E=v-n.y,A=_-n.z,I=o.x-y,B=o.y-v,F=o.z-_;return M*I+E*B+A*F>0&&(o.x=y,o.y=v,o.z=_,t.x=(o.x-y)/r,t.y=(o.y-v)/r,t.z=(o.z-_)/r),o}function Vu(n){return n.isPerspectiveCamera}function Cc(n){return n.isOrthographicCamera}function IS(n,e){return Cc(n)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}class J5{constructor(){J(this,"_listeners",{})}addEventListener(e,t){const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const s=this._listeners[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const i=this._listeners[e.type];if(i!==void 0){e.target=this;const s=i.slice(0);for(let r=0,o=s.length;r<o;r++)s[r].call(this,e)}}}const Qh=Math.PI*2,Mk=Math.PI/2,tAe="__VERSION",Gy=1/8,Q5=typeof window<"u",nAe=Q5&&/Mac/.test(navigator.platform),iAe=!(Q5&&"PointerEvent"in window);let Ek,Wy,RS,_r,tn,Xn,ef,va,ya,$u,Tk,Ak,ao,bm,tf,Ik,PS,Rk,LS,kS,Ky;class yo extends J5{constructor(t,i){super();J(this,"minPolarAngle",0);J(this,"maxPolarAngle",Math.PI);J(this,"minAzimuthAngle",-1/0);J(this,"maxAzimuthAngle",1/0);J(this,"minDistance",0);J(this,"maxDistance",1/0);J(this,"infinityDolly",!1);J(this,"minZoom",.01);J(this,"maxZoom",1/0);J(this,"smoothTime",.25);J(this,"draggingSmoothTime",.125);J(this,"maxSpeed",1/0);J(this,"azimuthRotateSpeed",1);J(this,"polarRotateSpeed",1);J(this,"dollySpeed",1);J(this,"dollyDragInverted",!1);J(this,"truckSpeed",2);J(this,"dollyToCursor",!1);J(this,"dollyToOrbitPoint",!1);J(this,"dragToOffset",!1);J(this,"verticalDragToForward",!1);J(this,"boundaryFriction",0);J(this,"restThreshold",.01);J(this,"colliderMeshes",[]);J(this,"mouseButtons");J(this,"touches");J(this,"cancel",()=>{});J(this,"lockPointer");J(this,"unlockPointer");J(this,"_enabled",!0);J(this,"_camera");J(this,"_yAxisUpSpace");J(this,"_yAxisUpSpaceInverse");J(this,"_state",ot.NONE);J(this,"_domElement");J(this,"_viewport",null);J(this,"_target");J(this,"_targetEnd");J(this,"curTarget");J(this,"_focalOffset");J(this,"_focalOffsetEnd");J(this,"_spherical");J(this,"_sphericalEnd");J(this,"_zoom");J(this,"_zoomEnd");J(this,"_cameraUp0");J(this,"_target0");J(this,"_position0");J(this,"_zoom0");J(this,"_focalOffset0");J(this,"_dollyControlAmount",0);J(this,"_dollyControlCoord");J(this,"_nearPlaneCorners");J(this,"_hasRested",!0);J(this,"_boundary");J(this,"_boundaryEnclosesCamera",!1);J(this,"_needsUpdate",!0);J(this,"_updatedLastTime",!1);J(this,"_elementRect",new DOMRect);J(this,"_isDragging",!1);J(this,"_activePointers",[]);J(this,"_lockedPointer",null);J(this,"_isUserControllingRotate",!1);J(this,"_isUserControllingDolly",!1);J(this,"_isUserControllingTruck",!1);J(this,"_isUserControllingOffset",!1);J(this,"_isUserControllingZoom",!1);J(this,"_thetaVelocity",{value:0});J(this,"_phiVelocity",{value:0});J(this,"_radiusVelocity",{value:0});J(this,"_targetVelocity",new G);J(this,"_focalOffsetVelocity",new G);J(this,"_zoomVelocity",{value:0});J(this,"clock",new kw);J(this,"_truckInternal",(t,i,s)=>{let r,o;if(Vu(this._camera)){const a=tn.copy(this._camera.position).sub(this._target),l=this._camera.getEffectiveFOV()*vm,c=a.length()*Math.tan(l*.5);r=this.truckSpeed*t*c/this._elementRect.height,o=this.truckSpeed*i*c/this._elementRect.height}else if(Cc(this._camera)){const a=this._camera;r=t*(a.right-a.left)/a.zoom/this._elementRect.width,o=i*(a.top-a.bottom)/a.zoom/this._elementRect.height}else return;this.verticalDragToForward?(s?this.setFocalOffset(this._focalOffsetEnd.x+r,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(r,0,!0),this.forward(-o,!0)):s?this.setFocalOffset(this._focalOffsetEnd.x+r,this._focalOffsetEnd.y+o,this._focalOffsetEnd.z,!0):this.truck(r,o,!0)});J(this,"_rotateInternal",(t,i)=>{const s=Qh*this.azimuthRotateSpeed*t/this._elementRect.height,r=Qh*this.polarRotateSpeed*i/this._elementRect.height;this.rotate(s,r,!0)});J(this,"_dollyInternal",(t,i,s)=>{const r=Math.pow(.95,-t*this.dollySpeed),o=this._sphericalEnd.radius*r,a=this._sphericalEnd.radius,l=a*(t>=0?-1:1);this.dollyTo(o),this.infinityDolly&&(o<this.minDistance||this.maxDistance===this.minDistance)&&(this._camera.getWorldDirection(tn),this._targetEnd.add(tn.normalize().multiplyScalar(l)),this._target.add(tn.normalize().multiplyScalar(l))),this.dollyToCursor&&(this._dollyControlAmount+=this._sphericalEnd.radius-a,this.infinityDolly&&(o<this.minDistance||this.maxDistance===this.minDistance)&&(this._dollyControlAmount-=l),this._dollyControlCoord.set(i,s))});J(this,"_zoomInternal",(t,i,s)=>{const r=Math.pow(.95,t*this.dollySpeed),o=this._zoomEnd;this.zoomTo(this._zoom*r),this.dollyToCursor&&(this._dollyControlAmount+=this._zoomEnd-o,this._dollyControlCoord.set(i,s))});typeof hEe>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),Ek=new G(0,0,0),Wy=new G(0,1,0),RS=new G(0,0,1),_r=new tt,tn=new G,Xn=new G,ef=new G,va=new G,ya=new G,$u=new G,Tk=new G,Ak=new G,ao=new ug,bm=new ug,tf=new Nn,Ik=new Nn,PS=new bi,Rk=new Mn,LS=new Mn,kS=new yt,Ky=new wh,this._camera=t,this._yAxisUpSpace=new Mn().setFromUnitVectors(this._camera.up,Wy),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=ot.NONE,this._target=new G,this._targetEnd=this._target.clone(),this.curTarget=new G,this._focalOffset=new G,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new ug().setFromVector3(tn.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._nearPlaneCorners=[new G,new G,new G,new G],this._updateNearPlaneCorners(),this._boundary=new Nn(new G(-1/0,-1/0,-1/0),new G(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlAmount=0,this._dollyControlCoord=new tt,this.mouseButtons={left:ot.ROTATE,middle:ot.DOLLY,right:ot.TRUCK,wheel:Vu(this._camera)?ot.DOLLY:Cc(this._camera)?ot.ZOOM:ot.NONE},this.touches={one:ot.TOUCH_ROTATE,two:Vu(this._camera)?ot.TOUCH_DOLLY_TRUCK:Cc(this._camera)?ot.TOUCH_ZOOM_TRUCK:ot.NONE,three:ot.TOUCH_TRUCK};const s=new tt,r=new tt,o=new tt,a=x=>{if(!this._enabled||!this._domElement)return;const S=x.pointerType!=="mouse"?null:(x.buttons&nn.LEFT)===nn.LEFT?nn.LEFT:(x.buttons&nn.MIDDLE)===nn.MIDDLE?nn.MIDDLE:(x.buttons&nn.RIGHT)===nn.RIGHT?nn.RIGHT:null;if(S!==null){const T=this._findPointerByMouseButton(S);T&&this._disposePointer(T)}if((x.buttons&nn.LEFT)===nn.LEFT&&this._lockedPointer)return;const C={pointerId:x.pointerId,clientX:x.clientX,clientY:x.clientY,deltaX:0,deltaY:0,mouseButton:S};this._activePointers.push(C),this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",d),this._domElement.ownerDocument.addEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",d),this._isDragging=!0,y(x)},l=x=>{if(!this._enabled||!this._domElement||this._lockedPointer)return;const S=(x.buttons&nn.LEFT)===nn.LEFT?nn.LEFT:(x.buttons&nn.MIDDLE)===nn.MIDDLE?nn.MIDDLE:(x.buttons&nn.RIGHT)===nn.RIGHT?nn.RIGHT:null;if(S!==null){const T=this._findPointerByMouseButton(S);T&&this._disposePointer(T)}const C={pointerId:1,clientX:x.clientX,clientY:x.clientY,deltaX:0,deltaY:0,mouseButton:(x.buttons&nn.LEFT)===nn.LEFT?nn.LEFT:(x.buttons&nn.MIDDLE)===nn.LEFT?nn.MIDDLE:(x.buttons&nn.RIGHT)===nn.LEFT?nn.RIGHT:null};this._activePointers.push(C),this._domElement.ownerDocument.removeEventListener("mousemove",u),this._domElement.ownerDocument.removeEventListener("mouseup",h),this._domElement.ownerDocument.addEventListener("mousemove",u),this._domElement.ownerDocument.addEventListener("mouseup",h),this._isDragging=!0,y(x)},c=x=>{x.cancelable&&x.preventDefault();const S=x.pointerId,C=this._lockedPointer||this._findPointerById(S);if(C){if(C.clientX=x.clientX,C.clientY=x.clientY,C.deltaX=x.movementX,C.deltaY=x.movementY,this._state=0,x.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(x.buttons&nn.LEFT)===nn.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(x.buttons&nn.MIDDLE)===nn.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(x.buttons&nn.RIGHT)===nn.RIGHT&&(this._state=this._state|this.mouseButtons.right);v()}},u=x=>{const S=this._lockedPointer||this._findPointerById(1);S&&(S.clientX=x.clientX,S.clientY=x.clientY,S.deltaX=x.movementX,S.deltaY=x.movementY,this._state=0,(this._lockedPointer||(x.buttons&nn.LEFT)===nn.LEFT)&&(this._state=this._state|this.mouseButtons.left),(x.buttons&nn.MIDDLE)===nn.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(x.buttons&nn.RIGHT)===nn.RIGHT&&(this._state=this._state|this.mouseButtons.right),v())},d=x=>{const S=this._findPointerById(x.pointerId);if(!(S&&S===this._lockedPointer)){if(S&&this._disposePointer(S),x.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=ot.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=ot.NONE;_()}},h=()=>{const x=this._findPointerById(1);x&&x===this._lockedPointer||(x&&this._disposePointer(x),this._state=ot.NONE,_())};let f=-1;const m=x=>{if(!this._enabled||this.mouseButtons.wheel===ot.NONE)return;if(x.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===ot.ROTATE||this.mouseButtons.wheel===ot.TRUCK){const E=performance.now();f-E<1e3&&this._getClientRect(this._elementRect),f=E}const S=nAe?-1:-3,C=x.deltaMode===1?x.deltaY/S:x.deltaY/(S*10);let T=0,M=0;if(this.dollyToOrbitPoint){let E=this.curTarget.clone().project(t);T=E.x,M=E.y,this.dollyToCursor=!0}else this.dollyToCursor&&(T=(x.clientX-this._elementRect.x)/this._elementRect.width*2-1,M=(x.clientY-this._elementRect.y)/this._elementRect.height*-2+1);switch(this.mouseButtons.wheel){case ot.ROTATE:{this._rotateInternal(x.deltaX,x.deltaY),this._isUserControllingRotate=!0;break}case ot.TRUCK:{this._truckInternal(x.deltaX,x.deltaY,!1),this._isUserControllingTruck=!0;break}case ot.OFFSET:{this._truckInternal(x.deltaX,x.deltaY,!0),this._isUserControllingOffset=!0;break}case ot.DOLLY:{this._dollyInternal(-C,T,M),this._isUserControllingDolly=!0;break}case ot.ZOOM:{this._zoomInternal(-C,T,M),this._isUserControllingZoom=!0;break}}this.update(),(this.dollyToOrbitPoint||this.dollyToCursor)&&this.setOrbitPoint(this.curTarget.x,this.curTarget.y,this.curTarget.z),this.dispatchEvent({type:"control"}),this.dispatchEvent({type:"controlend"})},p=x=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===yo.ACTION.NONE){const S=x instanceof PointerEvent?x.pointerId:(x instanceof MouseEvent,0),C=this._findPointerById(S);C&&this._disposePointer(C),this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",d),this._domElement.ownerDocument.removeEventListener("mousemove",u),this._domElement.ownerDocument.removeEventListener("mouseup",h);return}x.preventDefault()}},y=x=>{if(!this._enabled)return;if(AS(this._activePointers,_r),this._getClientRect(this._elementRect),s.copy(_r),r.copy(_r),this._activePointers.length>=2){const C=_r.x-this._activePointers[1].clientX,T=_r.y-this._activePointers[1].clientY,M=Math.sqrt(C*C+T*T);o.set(0,M);const E=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,A=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;r.set(E,A)}if(this._state=0,!x)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in x&&x.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(x.buttons&nn.LEFT)===nn.LEFT&&(this._state=this._state|this.mouseButtons.left),(x.buttons&nn.MIDDLE)===nn.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(x.buttons&nn.RIGHT)===nn.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&ot.ROTATE)===ot.ROTATE||(this._state&ot.TOUCH_ROTATE)===ot.TOUCH_ROTATE||(this._state&ot.TOUCH_DOLLY_ROTATE)===ot.TOUCH_DOLLY_ROTATE||(this._state&ot.TOUCH_ZOOM_ROTATE)===ot.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&ot.TRUCK)===ot.TRUCK||(this._state&ot.TOUCH_TRUCK)===ot.TOUCH_TRUCK||(this._state&ot.TOUCH_DOLLY_TRUCK)===ot.TOUCH_DOLLY_TRUCK||(this._state&ot.TOUCH_ZOOM_TRUCK)===ot.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&ot.DOLLY)===ot.DOLLY||(this._state&ot.TOUCH_DOLLY)===ot.TOUCH_DOLLY||(this._state&ot.TOUCH_DOLLY_TRUCK)===ot.TOUCH_DOLLY_TRUCK||(this._state&ot.TOUCH_DOLLY_OFFSET)===ot.TOUCH_DOLLY_OFFSET||(this._state&ot.TOUCH_DOLLY_ROTATE)===ot.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&ot.ZOOM)===ot.ZOOM||(this._state&ot.TOUCH_ZOOM)===ot.TOUCH_ZOOM||(this._state&ot.TOUCH_ZOOM_TRUCK)===ot.TOUCH_ZOOM_TRUCK||(this._state&ot.TOUCH_ZOOM_OFFSET)===ot.TOUCH_ZOOM_OFFSET||(this._state&ot.TOUCH_ZOOM_ROTATE)===ot.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&ot.OFFSET)===ot.OFFSET||(this._state&ot.TOUCH_OFFSET)===ot.TOUCH_OFFSET||(this._state&ot.TOUCH_DOLLY_OFFSET)===ot.TOUCH_DOLLY_OFFSET||(this._state&ot.TOUCH_ZOOM_OFFSET)===ot.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},v=()=>{if(!this._enabled)return;AS(this._activePointers,_r);const S=this._domElement&&document.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,C=S?-S.deltaX:r.x-_r.x,T=S?-S.deltaY:r.y-_r.y;if(r.copy(_r),((this._state&ot.ROTATE)===ot.ROTATE||(this._state&ot.TOUCH_ROTATE)===ot.TOUCH_ROTATE||(this._state&ot.TOUCH_DOLLY_ROTATE)===ot.TOUCH_DOLLY_ROTATE||(this._state&ot.TOUCH_ZOOM_ROTATE)===ot.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(C,T),this._isUserControllingRotate=!0),(this._state&ot.DOLLY)===ot.DOLLY||(this._state&ot.ZOOM)===ot.ZOOM){const M=this.dollyToCursor?(s.x-this._elementRect.x)/this._elementRect.width*2-1:0,E=this.dollyToCursor?(s.y-this._elementRect.y)/this._elementRect.height*-2+1:0,A=this.dollyDragInverted?-1:1;(this._state&ot.DOLLY)===ot.DOLLY?(this._dollyInternal(A*T*Gy,M,E),this._isUserControllingDolly=!0):(this._zoomInternal(A*T*Gy,M,E),this._isUserControllingZoom=!0)}if((this._state&ot.TOUCH_DOLLY)===ot.TOUCH_DOLLY||(this._state&ot.TOUCH_ZOOM)===ot.TOUCH_ZOOM||(this._state&ot.TOUCH_DOLLY_TRUCK)===ot.TOUCH_DOLLY_TRUCK||(this._state&ot.TOUCH_ZOOM_TRUCK)===ot.TOUCH_ZOOM_TRUCK||(this._state&ot.TOUCH_DOLLY_OFFSET)===ot.TOUCH_DOLLY_OFFSET||(this._state&ot.TOUCH_ZOOM_OFFSET)===ot.TOUCH_ZOOM_OFFSET||(this._state&ot.TOUCH_DOLLY_ROTATE)===ot.TOUCH_DOLLY_ROTATE||(this._state&ot.TOUCH_ZOOM_ROTATE)===ot.TOUCH_ZOOM_ROTATE){const M=_r.x-this._activePointers[1].clientX,E=_r.y-this._activePointers[1].clientY,A=Math.sqrt(M*M+E*E),I=o.y-A;o.set(0,A);const B=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,F=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&ot.TOUCH_DOLLY)===ot.TOUCH_DOLLY||(this._state&ot.TOUCH_DOLLY_ROTATE)===ot.TOUCH_DOLLY_ROTATE||(this._state&ot.TOUCH_DOLLY_TRUCK)===ot.TOUCH_DOLLY_TRUCK||(this._state&ot.TOUCH_DOLLY_OFFSET)===ot.TOUCH_DOLLY_OFFSET?(this._dollyInternal(I*Gy,B,F),this._isUserControllingDolly=!0):(this._zoomInternal(I*Gy,B,F),this._isUserControllingZoom=!0)}((this._state&ot.TRUCK)===ot.TRUCK||(this._state&ot.TOUCH_TRUCK)===ot.TOUCH_TRUCK||(this._state&ot.TOUCH_DOLLY_TRUCK)===ot.TOUCH_DOLLY_TRUCK||(this._state&ot.TOUCH_ZOOM_TRUCK)===ot.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(C,T,!1),this._isUserControllingTruck=!0),((this._state&ot.OFFSET)===ot.OFFSET||(this._state&ot.TOUCH_OFFSET)===ot.TOUCH_OFFSET||(this._state&ot.TOUCH_DOLLY_OFFSET)===ot.TOUCH_DOLLY_OFFSET||(this._state&ot.TOUCH_ZOOM_OFFSET)===ot.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(C,T,!0),this._isUserControllingOffset=!0),this.update(),this.dispatchEvent({type:"control"})},_=()=>{AS(this._activePointers,_r),r.copy(_r),(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",u),this._domElement.ownerDocument.removeEventListener("pointerup",d),this._domElement.ownerDocument.removeEventListener("mouseup",h),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",d),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",b),this._domElement.ownerDocument.addEventListener("pointerlockerror",w),this._domElement.ownerDocument.addEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",d),y())},this.unlockPointer=()=>{this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),document.exitPointerLock(),this.cancel(),this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointerlockchange",b),this._domElement.ownerDocument.removeEventListener("pointerlockerror",w))};const b=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},w=()=>{this.unlockPointer()};this._addAllEventListeners=x=>{this._domElement=x,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",a),iAe&&this._domElement.addEventListener("mousedown",l),this._domElement.addEventListener("pointercancel",d),this._domElement.addEventListener("wheel",m,{passive:!1}),this._domElement.addEventListener("contextmenu",p)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",a),this._domElement.removeEventListener("mousedown",l),this._domElement.removeEventListener("pointercancel",d),this._domElement.removeEventListener("wheel",m,{passive:!1}),this._domElement.removeEventListener("contextmenu",p),this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",u),this._domElement.ownerDocument.removeEventListener("pointerup",d),this._domElement.ownerDocument.removeEventListener("mouseup",h),this._domElement.ownerDocument.removeEventListener("pointerlockchange",b),this._domElement.ownerDocument.removeEventListener("pointerlockerror",w))},this.cancel=()=>{this._state!==ot.NONE&&(this._state=ot.NONE,this._activePointers.length=0,_())},i&&this.connect(i),this.update(0)}static get ACTION(){return ot}get camera(){return this._camera}set camera(t){this._camera=t,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._domElement&&(t?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(t){this._spherical.radius===t&&this._sphericalEnd.radius===t||(this._spherical.radius=t,this._sphericalEnd.radius=t,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(t){this._spherical.theta===t&&this._sphericalEnd.theta===t||(this._spherical.theta=t,this._sphericalEnd.theta=t,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(t){this._spherical.phi===t&&this._sphericalEnd.phi===t||(this._spherical.phi=t,this._sphericalEnd.phi=t,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(t){this._boundaryEnclosesCamera=t,this._needsUpdate=!0}rotate(t,i,s=!1){return this.rotateTo(this._sphericalEnd.theta+t,this._sphericalEnd.phi+i,s)}rotateAzimuthTo(t,i=!1){return this.rotateTo(t,this._sphericalEnd.phi,i)}rotatePolarTo(t,i=!1){return this.rotateTo(this._sphericalEnd.theta,t,i)}rotateTo(t,i,s=!1){this._isUserControllingRotate=!1;const r=df(t,this.minAzimuthAngle,this.maxAzimuthAngle),o=df(i,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=o,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,s||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const a=!s||oi(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&oi(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(a)}dolly(t,i=!1){return this.dollyTo(this._sphericalEnd.radius-t,i)}dollyTo(t,i=!1){this._isUserControllingDolly=!1;const s=this._sphericalEnd.radius,r=df(t,this.minDistance,this.maxDistance);if(this.colliderMeshes.length>=1){const l=this._collisionTest(),c=oi(l,this._spherical.radius);if(!(s>r)&&c)return Promise.resolve();this._sphericalEnd.radius=Math.min(r,l)}else this._sphericalEnd.radius=r;this._needsUpdate=!0,i||(this._spherical.radius=this._sphericalEnd.radius);const a=!i||oi(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(a)}zoom(t,i=!1){return this.zoomTo(this._zoomEnd+t,i)}zoomTo(t,i=!1){this._isUserControllingZoom=!1,this._zoomEnd=df(t,this.minZoom,this.maxZoom),this._needsUpdate=!0,i||(this._zoom=this._zoomEnd);const s=!i||oi(this._zoom,this._zoomEnd,this.restThreshold);return this._createOnRestPromise(s)}pan(t,i,s=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(t,i,s)}truck(t,i,s=!1){this._camera.updateMatrix(),va.setFromMatrixColumn(this._camera.matrix,0),ya.setFromMatrixColumn(this._camera.matrix,1),va.multiplyScalar(t),ya.multiplyScalar(-i);const r=tn.copy(va).add(ya),o=Xn.copy(this._targetEnd).add(r);return this.moveTo(o.x,o.y,o.z,s)}forward(t,i=!1){tn.setFromMatrixColumn(this._camera.matrix,0),tn.crossVectors(this._camera.up,tn),tn.multiplyScalar(t);const s=Xn.copy(this._targetEnd).add(tn);return this.moveTo(s.x,s.y,s.z,i)}forward2(t,i=!1){tn.set(0,0,-1).applyQuaternion(this._camera.quaternion),tn.multiplyScalar(t);const s=Xn.copy(this._targetEnd).add(tn);return this.moveTo(s.x,s.y,s.z,i)}elevate(t,i=!1){return tn.copy(this._camera.up).multiplyScalar(t),this.moveTo(this._targetEnd.x+tn.x,this._targetEnd.y+tn.y,this._targetEnd.z+tn.z,i)}moveTo(t,i,s,r=!1){this.curTarget.set(t,i,s),this._isUserControllingTruck=!1;const o=tn.set(t,i,s).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,o,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);const a=!r||oi(this._target.x,this._targetEnd.x,this.restThreshold)&&oi(this._target.y,this._targetEnd.y,this.restThreshold)&&oi(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(a)}lookInDirectionOf(t,i,s,r=!1){const l=tn.set(t,i,s).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius);return this.setPosition(l.x,l.y,l.z,r)}fitToBox(t,i,{cover:s=!1,paddingLeft:r=0,paddingRight:o=0,paddingBottom:a=0,paddingTop:l=0}={}){const c=[],u=t.isBox3?tf.copy(t):tf.setFromObject(t);u.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const d=Sk(this._sphericalEnd.theta,Mk),h=Sk(this._sphericalEnd.phi,Mk);c.push(this.rotateTo(d,h,i));const f=tn.setFromSpherical(this._sphericalEnd).normalize(),m=Rk.setFromUnitVectors(f,RS),p=oi(Math.abs(f.y),1);p&&m.multiply(LS.setFromAxisAngle(Wy,d)),m.multiply(this._yAxisUpSpaceInverse);const y=Ik.makeEmpty();Xn.copy(u.min).applyQuaternion(m),y.expandByPoint(Xn),Xn.copy(u.min).setX(u.max.x).applyQuaternion(m),y.expandByPoint(Xn),Xn.copy(u.min).setY(u.max.y).applyQuaternion(m),y.expandByPoint(Xn),Xn.copy(u.max).setZ(u.min.z).applyQuaternion(m),y.expandByPoint(Xn),Xn.copy(u.min).setZ(u.max.z).applyQuaternion(m),y.expandByPoint(Xn),Xn.copy(u.max).setY(u.min.y).applyQuaternion(m),y.expandByPoint(Xn),Xn.copy(u.max).setX(u.min.x).applyQuaternion(m),y.expandByPoint(Xn),Xn.copy(u.max).applyQuaternion(m),y.expandByPoint(Xn),y.min.x-=r,y.min.y-=a,y.max.x+=o,y.max.y+=l,m.setFromUnitVectors(RS,f),p&&m.premultiply(LS.invert()),m.premultiply(this._yAxisUpSpace);const v=y.getSize(tn),_=y.getCenter(Xn).applyQuaternion(m);if(Vu(this._camera)){const b=this.getDistanceToFitBox(v.x,v.y,v.z,s);c.push(this.moveTo(_.x,_.y,_.z,i)),c.push(this.dollyTo(b,i)),c.push(this.setFocalOffset(0,0,0,i))}else if(Cc(this._camera)){const b=this._camera,w=b.right-b.left,x=b.top-b.bottom,S=s?Math.max(w/v.x,x/v.y):Math.min(w/v.x,x/v.y);c.push(this.moveTo(_.x,_.y,_.z,i)),c.push(this.zoomTo(S,i)),c.push(this.setFocalOffset(0,0,0,i))}return Promise.all(c)}fitToSphere(t,i){const s=[],o=t instanceof bi?PS.copy(t):yo.createBoundingSphere(t,PS);if(s.push(this.moveTo(o.center.x,o.center.y,o.center.z,i)),Vu(this._camera)){const a=this.getDistanceToFitSphere(o.radius);s.push(this.dollyTo(a,i))}else if(Cc(this._camera)){const a=this._camera.right-this._camera.left,l=this._camera.top-this._camera.bottom,c=2*o.radius,u=Math.min(a/c,l/c);s.push(this.zoomTo(u,i))}return s.push(this.setFocalOffset(0,0,0,i)),Promise.all(s)}setLookAt(t,i,s,r,o,a,l=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1;const c=Xn.set(r,o,a),u=tn.set(t,i,s);this._targetEnd.copy(c),this._sphericalEnd.setFromVector3(u.sub(c).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,l||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const d=!l||oi(this._target.x,this._targetEnd.x,this.restThreshold)&&oi(this._target.y,this._targetEnd.y,this.restThreshold)&&oi(this._target.z,this._targetEnd.z,this.restThreshold)&&oi(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&oi(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&oi(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(d)}lerpLookAt(t,i,s,r,o,a,l,c,u,d,h,f,m,p=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1;const y=tn.set(r,o,a),v=Xn.set(t,i,s);ao.setFromVector3(v.sub(y).applyQuaternion(this._yAxisUpSpace));const _=ef.set(d,h,f),b=Xn.set(l,c,u);bm.setFromVector3(b.sub(_).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(y.lerp(_,m));const w=bm.theta-ao.theta,x=bm.phi-ao.phi,S=bm.radius-ao.radius;this._sphericalEnd.set(ao.radius+S*m,ao.phi+x*m,ao.theta+w*m),this.normalizeRotations(),this._needsUpdate=!0,p||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const C=!p||oi(this._target.x,this._targetEnd.x,this.restThreshold)&&oi(this._target.y,this._targetEnd.y,this.restThreshold)&&oi(this._target.z,this._targetEnd.z,this.restThreshold)&&oi(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&oi(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&oi(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(C)}setPosition(t,i,s,r=!1){return this.setLookAt(t,i,s,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(t,i,s,r=!1){const o=this.getPosition(tn),a=this.setLookAt(o.x,o.y,o.z,t,i,s,r);return this._sphericalEnd.phi=df(this.polarAngle,this.minPolarAngle,this.maxPolarAngle),a}setFocalOffset(t,i,s,r=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(t,i,s),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);const o=!r||oi(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&oi(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&oi(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}setOrbitPoint(t,i,s){this._camera.updateMatrixWorld(),va.setFromMatrixColumn(this._camera.matrixWorldInverse,0),ya.setFromMatrixColumn(this._camera.matrixWorldInverse,1),$u.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const r=tn.set(t,i,s),o=r.distanceTo(this._camera.position),a=r.sub(this._camera.position);va.multiplyScalar(a.x),ya.multiplyScalar(a.y),$u.multiplyScalar(a.z),tn.copy(va).add(ya).add($u),tn.z=tn.z+o,this.dollyTo(o,!1),this.setFocalOffset(-tn.x,tn.y,-tn.z,!1),this.moveTo(t,i,s,!1)}setBoundary(t){if(!t){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(t),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(t,i,s,r){if(t===null){this._viewport=null;return}this._viewport=this._viewport||new Ln,typeof t=="number"?this._viewport.set(t,i,s,r):this._viewport.copy(t)}getDistanceToFitBox(t,i,s,r=!1){if(IS(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const o=t/i,a=this._camera.getEffectiveFOV()*vm,l=this._camera.aspect;return((r?o>l:o<l)?i:t/l)*.5/Math.tan(a*.5)+s*.5}getDistanceToFitSphere(t){if(IS(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const i=this._camera.getEffectiveFOV()*vm,s=Math.atan(Math.tan(i*.5)*this._camera.aspect)*2,r=1<this._camera.aspect?i:s;return t/Math.sin(r*.5)}getTarget(t){return(t&&t.isVector3?t:new G).copy(this._targetEnd)}getPosition(t){return(t&&t.isVector3?t:new G).setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).add(this._targetEnd)}getFocalOffset(t){return(t&&t.isVector3?t:new G).copy(this._focalOffsetEnd)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%Qh,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=Qh),this._spherical.theta+=Qh*Math.round((this._sphericalEnd.theta-this._spherical.theta)/Qh)}reset(t=!1){if(!oi(this._camera.up.x,this._cameraUp0.x)||!oi(this._camera.up.y,this._cameraUp0.y)||!oi(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const s=this.getPosition(tn);this.updateCameraUp(),this.setPosition(s.x,s.y,s.z)}const i=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,t),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,t),this.zoomTo(this._zoom0,t)];return Promise.all(i)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,Wy),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const t=tn.subVectors(this._target,this._camera.position).normalize(),i=Xn.crossVectors(t,this._camera.up).normalize();this._camera.up.crossVectors(i,t).normalize(),this._camera.updateMatrixWorld();const s=this.getPosition(tn);this.updateCameraUp(),this.setPosition(s.x,s.y,s.z)}update(t){t==null&&(t=.1);const i=this._sphericalEnd.theta-this._spherical.theta,s=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,o=Tk.subVectors(this._targetEnd,this._target),a=Ak.subVectors(this._focalOffsetEnd,this._focalOffset),l=this._zoomEnd-this._zoom;if(xi(i))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const h=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=$y(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,h,1/0,t),this._needsUpdate=!0}if(xi(s))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const h=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=$y(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,h,1/0,t),this._needsUpdate=!0}if(xi(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const h=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=$y(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,h,this.maxSpeed,t),this._needsUpdate=!0}if(xi(o.x)&&xi(o.y)&&xi(o.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const h=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;Ck(this._target,this._targetEnd,this._targetVelocity,h,this.maxSpeed,t,this._target),this._needsUpdate=!0}if(xi(a.x)&&xi(a.y)&&xi(a.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const h=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;Ck(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,h,this.maxSpeed,t,this._focalOffset),this._needsUpdate=!0}if(this._dollyControlAmount!==0){if(Vu(this._camera)){const h=this._camera,f=tn.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).normalize().negate(),m=Xn.copy(f).cross(h.up).normalize();m.lengthSq()===0&&(m.x=1);const p=ef.crossVectors(m,f),y=this._sphericalEnd.radius*Math.tan(h.getEffectiveFOV()*vm*.5),_=(this._sphericalEnd.radius-this._dollyControlAmount-this._sphericalEnd.radius)/this._sphericalEnd.radius,b=tn.copy(this._targetEnd).add(m.multiplyScalar(this._dollyControlCoord.x*y*h.aspect)).add(p.multiplyScalar(this._dollyControlCoord.y*y));this._targetEnd.lerp(b,_)}else if(Cc(this._camera)){const h=this._camera,f=tn.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(h.near+h.far)/(h.near-h.far)).unproject(h),m=Xn.set(0,0,-1).applyQuaternion(h.quaternion),p=ef.copy(f).add(m.multiplyScalar(-f.dot(h.up))),v=-(this._zoom-this._dollyControlAmount-this._zoomEnd)/this._zoom,_=tn.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).normalize().negate(),b=this._targetEnd.dot(_);this._targetEnd.lerp(p,v);const w=this._targetEnd.dot(_),x=_.multiplyScalar(w-b);this._targetEnd.sub(x)}this._target.copy(this._targetEnd),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._dollyControlAmount=0}if(xi(l))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const h=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=$y(this._zoom,this._zoomEnd,this._zoomVelocity,h,1/0,t)}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);const c=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,c),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!xi(this._focalOffset.x)||!xi(this._focalOffset.y)||!xi(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),va.setFromMatrixColumn(this._camera.matrix,0),ya.setFromMatrixColumn(this._camera.matrix,1),$u.setFromMatrixColumn(this._camera.matrix,2),va.multiplyScalar(this._focalOffset.x),ya.multiplyScalar(-this._focalOffset.y),$u.multiplyScalar(this._focalOffset.z),tn.copy(va).add(ya).add($u),this._camera.position.add(tn)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),tn.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const d=this._needsUpdate;return d&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):d?(this.dispatchEvent({type:"update"}),xi(i,this.restThreshold)&&xi(s,this.restThreshold)&&xi(r,this.restThreshold)&&xi(o.x,this.restThreshold)&&xi(o.y,this.restThreshold)&&xi(o.z,this.restThreshold)&&xi(a.x,this.restThreshold)&&xi(a.y,this.restThreshold)&&xi(a.z,this.restThreshold)&&xi(l,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!d&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._updatedLastTime=d,this._needsUpdate=!1,d}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:ym(this.maxDistance),minZoom:this.minZoom,maxZoom:ym(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:ym(this.maxPolarAngle),minAzimuthAngle:ym(this.minAzimuthAngle),maxAzimuthAngle:ym(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:tn.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(t,i=!1){const s=JSON.parse(t);this.enabled=s.enabled,this.minDistance=s.minDistance,this.maxDistance=_m(s.maxDistance),this.minZoom=s.minZoom,this.maxZoom=_m(s.maxZoom),this.minPolarAngle=s.minPolarAngle,this.maxPolarAngle=_m(s.maxPolarAngle),this.minAzimuthAngle=_m(s.minAzimuthAngle),this.maxAzimuthAngle=_m(s.maxAzimuthAngle),this.smoothTime=s.smoothTime,this.draggingSmoothTime=s.draggingSmoothTime,this.dollySpeed=s.dollySpeed,this.truckSpeed=s.truckSpeed,this.dollyToCursor=s.dollyToCursor,this.verticalDragToForward=s.verticalDragToForward,this._target0.fromArray(s.target0),this._position0.fromArray(s.position0),this._zoom0=s.zoom0,this._focalOffset0.fromArray(s.focalOffset0),this.moveTo(s.target[0],s.target[1],s.target[2],i),ao.setFromVector3(tn.fromArray(s.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(ao.theta,ao.phi,i),this.dollyTo(ao.radius,i),this.zoomTo(s.zoom,i),this.setFocalOffset(s.focalOffset[0],s.focalOffset[1],s.focalOffset[2],i),this._needsUpdate=!0}connect(t){if(this._domElement){console.warn("camera-controls is already connected.");return}t.setAttribute("data-camera-controls-version",tAe),this._addAllEventListeners(t)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this._removeAllEventListeners(),this.disconnect()}_findPointerById(t){return this._activePointers.find(i=>i.pointerId===t)}_findPointerByMouseButton(t){return this._activePointers.find(i=>i.mouseButton===t)}_disposePointer(t){this._activePointers.splice(this._activePointers.indexOf(t),1)}_encloseToBoundary(t,i,s){const r=i.lengthSq();if(r===0)return t;const o=Xn.copy(i).add(t),l=this._boundary.clampPoint(o,ef).sub(o),c=l.lengthSq();if(c===0)return t.add(i);if(c===r)return t;if(s===0)return t.add(i).add(l);{const u=1+s*c/i.dot(l);return t.add(Xn.copy(i).multiplyScalar(u)).add(l.multiplyScalar(1-s))}}_updateNearPlaneCorners(){if(Vu(this._camera)){const t=this._camera,i=t.near,s=t.getEffectiveFOV()*vm,r=Math.tan(s*.5)*i,o=r*t.aspect;this._nearPlaneCorners[0].set(-o,-r,0),this._nearPlaneCorners[1].set(o,-r,0),this._nearPlaneCorners[2].set(o,r,0),this._nearPlaneCorners[3].set(-o,r,0)}else if(Cc(this._camera)){const t=this._camera,i=1/t.zoom,s=t.left*i,r=t.right*i,o=t.top*i,a=t.bottom*i;this._nearPlaneCorners[0].set(s,o,0),this._nearPlaneCorners[1].set(r,o,0),this._nearPlaneCorners[2].set(r,a,0),this._nearPlaneCorners[3].set(s,a,0)}}_collisionTest(){let t=1/0;if(!(this.colliderMeshes.length>=1)||IS(this._camera,"_collisionTest"))return t;const s=tn.setFromSpherical(this._spherical).divideScalar(this._spherical.radius);kS.lookAt(Ek,s,this._camera.up);for(let r=0;r<4;r++){const o=Xn.copy(this._nearPlaneCorners[r]);o.applyMatrix4(kS);const a=ef.addVectors(this._target,o);Ky.set(a,s),Ky.far=this._spherical.radius+1;const l=Ky.intersectObjects(this.colliderMeshes);l.length!==0&&l[0].distance<t&&(t=l[0].distance)}return t}_getClientRect(t){if(!this._domElement)return;const i=this._domElement.getBoundingClientRect();return t.x=i.left,t.y=i.top,this._viewport?(t.x+=this._viewport.x,t.y+=i.height-this._viewport.w-this._viewport.y,t.width=this._viewport.z,t.height=this._viewport.w):(t.width=i.width,t.height=i.height),t}_createOnRestPromise(t){return t?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(i=>{const s=()=>{this.removeEventListener("rest",s),i()};this.addEventListener("rest",s)}))}_addAllEventListeners(t){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(t){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(t){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(t,i=new bi){const s=i,r=s.center;tf.makeEmpty(),t.traverseVisible(a=>{a.isMesh&&tf.expandByObject(a)}),tf.getCenter(r);let o=0;return t.traverseVisible(a=>{if(!a.isMesh)return;const l=a,c=l.geometry.clone();c.applyMatrix4(l.matrixWorld);const d=c.attributes.position;for(let h=0,f=d.count;h<f;h++)tn.fromBufferAttribute(d,h),o=Math.max(o,r.distanceToSquared(tn))}),s.radius=Math.sqrt(o),s}}const c1=class c1{constructor(e,t,i,s,r){J(this,"isOpen",!1);J(this,"sectionBox");J(this,"root");J(this,"scene");J(this,"camera");J(this,"renderer");J(this,"goldenContainer");J(this,"controls");J(this,"boxMin",new G);J(this,"boxMax",new G);J(this,"group",new As);J(this,"planes",[]);J(this,"vertices",[new G,new G,new G,new G,new G,new G,new G,new G]);J(this,"faces",[]);J(this,"lines",[]);J(this,"raycaster",new wh);J(this,"mousePosition",new tt);J(this,"activeFace",null);J(this,"onMouseMove",e=>{this.updateMouseAndRay(e);const t=this.raycaster.intersectObjects(this.faces);if(t.length){this.renderer.domElement.style.cursor="pointer";const i=t[0].object;i!==this.activeFace&&(this.activeFace&&this.activeFace.setActive(!1),i.setActive(!0),this.activeFace=i)}else this.activeFace&&(this.activeFace.setActive(!1),this.activeFace=null,this.renderer.domElement.style.cursor="auto")});J(this,"onMouseDown",e=>{const t=e.button===0;if(this.activeFace&&t){this.updateMouseAndRay(e);const i=this.raycaster.intersectObjects(this.faces);if(i.length){const r=i[0].object.axis,o=i[0].point;this.drag.start(r,o)}}});J(this,"drag",{axis:"",point:new G,ground:new ut(new ua(1e12,1e12),new $n({colorWrite:!1,depthWrite:!1,side:ts})),start:(e,t)=>{this.drag.axis=e,this.drag.point=t,this.drag.initGround(),this.controls.enabled=!1,this.renderer.domElement.style.cursor="move",window.removeEventListener("pointermove",this.onMouseMove),window.addEventListener("pointermove",this.drag.mousemove),window.addEventListener("pointerup",this.drag.mouseup)},end:()=>{this.root.remove(this.drag.ground),this.controls.enabled=!0,window.removeEventListener("pointermove",this.drag.mousemove),window.removeEventListener("pointerup",this.drag.mouseup),window.addEventListener("pointermove",this.onMouseMove)},mousemove:e=>{this.updateMouseAndRay(e);const t=this.raycaster.intersectObject(this.drag.ground);t.length&&(this.drag.updateSectionBox(t[0].point),Ne.scene.enableRender())},mouseup:()=>{this.drag.end()},initGround:()=>{const e={xLeft:new G(-1,0,0),xRight:new G(1,0,0),yDown:new G(0,-1,0),yUp:new G(0,1,0),zBack:new G(0,0,-1),zFront:new G(0,0,1)};["xLeft","xRight"].includes(this.drag.axis)?this.drag.point.setX(0):["yDown","yUp"].includes(this.drag.axis)?this.drag.point.setY(0):["zBack","zFront"].includes(this.drag.axis)&&this.drag.point.setZ(0),this.drag.ground.position.copy(this.drag.point);const t=this.camera.position.clone().sub(this.camera.position.clone().projectOnVector(e[this.drag.axis])).add(this.drag.point);this.drag.ground.lookAt(t),this.root.add(this.drag.ground)},updateSectionBox:e=>{const t=c1.MIN_WIDTH;switch(this.drag.axis){case"yUp":this.boxMax.setY(Math.max(this.boxMin.y+t,e.y));break;case"yDown":this.boxMin.setY(Math.min(this.boxMax.y-t,e.y));break;case"xLeft":this.boxMin.setX(Math.min(this.boxMax.x-t,e.x));break;case"xRight":this.boxMax.setX(Math.max(this.boxMin.x+t,e.x));break;case"zFront":this.boxMax.setZ(Math.max(this.boxMin.z+t,e.z));break;case"zBack":this.boxMin.setZ(Math.min(this.boxMax.z-t,e.z));break}this.updatePlanes(),this.initOrUpdateVertices(),this.initOrUpdateFaces(),this.initOrUpdateLines()}});for(this.scene=e,this.root=e;this.root.parent!==null;)this.root=this.root.parent;this.camera=t,this.renderer=i,this.goldenContainer=r,this.controls=s}setSectionBox(e){if(this.sectionBox)throw new Error("sectionBox is assigned already!");this.sectionBox=e}open(){this.initSectionBox(),this.addMouseListener(),this.isOpen=!0,this.renderer.localClippingEnabled=!0}close(){this.isOpen=!1,this.removeMouseListener(),this.clearSectionBox()}reset(){this.close(),this.open()}initSectionBox(){if(!this.sectionBox)throw new Error("Need to set sectionBox first!");this.boxMin=this.sectionBox.min,this.boxMax=this.sectionBox.max,this.group=new As,this.initPlanes(),this.initOrUpdateVertices(),this.initOrUpdateFaces(),this.initOrUpdateLines(),this.root.add(this.group)}initPlanes(){this.planes=[],this.planes.push(new or(new G(0,-1,0),this.boxMax.y),new or(new G(0,1,0),-this.boxMin.y),new or(new G(1,0,0),-this.boxMin.x),new or(new G(-1,0,0),this.boxMax.x),new or(new G(0,0,-1),this.boxMax.z),new or(new G(0,0,1),-this.boxMin.z))}updatePlanes(){this.planes[0].constant=this.boxMax.y,this.planes[1].constant=-this.boxMin.y,this.planes[2].constant=-this.boxMin.x,this.planes[3].constant=this.boxMax.x,this.planes[4].constant=this.boxMax.z,this.planes[5].constant=-this.boxMin.z}initOrUpdateVertices(){this.vertices[0].set(this.boxMin.x,this.boxMax.y,this.boxMin.z),this.vertices[1].set(this.boxMax.x,this.boxMax.y,this.boxMin.z),this.vertices[2].set(this.boxMax.x,this.boxMax.y,this.boxMax.z),this.vertices[3].set(this.boxMin.x,this.boxMax.y,this.boxMax.z),this.vertices[4].set(this.boxMin.x,this.boxMin.y,this.boxMin.z),this.vertices[5].set(this.boxMax.x,this.boxMin.y,this.boxMin.z),this.vertices[6].set(this.boxMax.x,this.boxMin.y,this.boxMax.z),this.vertices[7].set(this.boxMin.x,this.boxMin.y,this.boxMax.z)}initOrUpdateFaces(){const e=this.vertices;if(!this.faces||this.faces.length===0)this.faces=[],this.faces.push(new nf("yUp",[e[0],e[1],e[2],e[3]]),new nf("yDown",[e[4],e[7],e[6],e[5]]),new nf("xLeft",[e[0],e[3],e[7],e[4]]),new nf("xRight",[e[1],e[5],e[6],e[2]]),new nf("zFront",[e[2],e[6],e[7],e[3]]),new nf("zBack",[e[0],e[4],e[5],e[1]])),this.group.add(...this.faces),this.faces.forEach(t=>{this.group.add(t.backFace)});else{const t=this.faces;t[0].setFromPoints([e[0],e[1],e[2],e[3]]),t[1].setFromPoints([e[4],e[7],e[6],e[5]]),t[2].setFromPoints([e[0],e[3],e[7],e[4]]),t[3].setFromPoints([e[1],e[5],e[6],e[2]]),t[4].setFromPoints([e[2],e[6],e[7],e[3]]),t[5].setFromPoints([e[0],e[4],e[5],e[1]])}}initOrUpdateLines(){const e=this.vertices;if(!this.lines||this.lines.length===0){const t=this.faces;if(!t)throw Error("Need to init Face first!");this.lines=[],this.lines.push(new lo([e[0],e[1]],[t[0],t[5]]),new lo([e[1],e[2]],[t[0],t[3]]),new lo([e[2],e[3]],[t[0],t[4]]),new lo([e[3],e[0]],[t[0],t[2]]),new lo([e[4],e[5]],[t[1],t[5]]),new lo([e[5],e[6]],[t[1],t[3]]),new lo([e[6],e[7]],[t[1],t[4]]),new lo([e[7],e[4]],[t[1],t[2]]),new lo([e[0],e[4]],[t[2],t[5]]),new lo([e[1],e[5]],[t[3],t[5]]),new lo([e[2],e[6]],[t[3],t[4]]),new lo([e[3],e[7]],[t[2],t[4]])),this.group.add(...this.lines)}else{let t=0;this.lines[t++].setFromPoints([e[0],e[1]]),this.lines[t++].setFromPoints([e[1],e[2]]),this.lines[t++].setFromPoints([e[2],e[3]]),this.lines[t++].setFromPoints([e[3],e[0]]),this.lines[t++].setFromPoints([e[4],e[5]]),this.lines[t++].setFromPoints([e[5],e[6]]),this.lines[t++].setFromPoints([e[6],e[7]]),this.lines[t++].setFromPoints([e[7],e[4]]),this.lines[t++].setFromPoints([e[0],e[4]]),this.lines[t++].setFromPoints([e[1],e[5]]),this.lines[t++].setFromPoints([e[2],e[6]]),this.lines[t++].setFromPoints([e[3],e[7]])}}clearSectionBox(){this.root.remove(this.group),this.renderer.domElement.style.cursor=""}addMouseListener(){this.goldenContainer.addEventListener("pointermove",this.onMouseMove),this.goldenContainer.addEventListener("pointerdown",this.onMouseDown)}removeMouseListener(){this.goldenContainer.removeEventListener("pointermove",this.onMouseMove),this.goldenContainer.removeEventListener("pointerdown",this.onMouseDown)}updateMouseAndRay(e){this.mousePosition.setX(e.offsetX/this.goldenContainer.clientWidth*2-1),this.mousePosition.setY(-(e.offsetY/this.goldenContainer.clientHeight)*2+1),this.raycaster.setFromCamera(this.mousePosition,this.camera)}};J(c1,"MIN_WIDTH",1);let UM=c1;class lo extends gr{constructor(t,i){super();J(this,"normalMaterial",new Vi({color:0}));J(this,"activeMaterial",new Vi({color:1048575}));i.forEach(s=>s.lines.push(this)),this.geometry=new jt,this.geometry.setFromPoints(t),this.material=this.normalMaterial}setFromPoints(t){this.geometry.setFromPoints(t)}setActive(t){this.material=t?this.activeMaterial:this.normalMaterial}}class nf extends ut{constructor(t,i){super();J(this,"axis");J(this,"lines",[]);J(this,"backFace");this.axis=t,this.lines=[],this.geometry=new jt,this.geometry.setFromPoints(i),this.geometry.setIndex([0,3,2,0,2,1]),this.geometry.computeVertexNormals(),this.material=new $n({colorWrite:!1,depthWrite:!1});const s=new $n({color:11648971,transparent:!0,opacity:.3,side:bs});this.backFace=new ut(this.geometry,s)}setFromPoints(t){this.geometry.setFromPoints(t)}setActive(t){this.lines.forEach(i=>{i.setActive(t)})}}class sAe extends UM{constructor(e,t,i,s,r,o){super(t,i,s,r,o),new Vb(t).geometry.computeBoundingBox(),e.expandByScalar(1.5),super.setSectionBox(e)}resBox(){let e=new Vb(this.scene);e.geometry.computeBoundingBox();const t=e.geometry.boundingBox;this.sectionBox=t}initPlanes(){super.initPlanes(),this.scene.children.forEach(e=>{e&&e.traverse(t=>{["Mesh","LineSegments"].includes(t.type)&&(t.material.clippingPlanes=this.planes,t.material.clipIntersection=!1)})}),Hn.pickMaterial.clippingPlanes=this.planes,Hn.pickMaterial.clipIntersection=!1}clearSectionBox(){super.clearSectionBox(),this.scene.children.forEach(e=>{e&&e.traverse(t=>{["Mesh","LineSegments"].includes(t.type)&&(t.material.clippingPlanes=[])})}),Hn.pickMaterial.clippingPlanes=[]}}const eH={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class Hp{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const rAe=new eo(-1,1,1,-1,0,1);class oAe extends jt{constructor(){super(),this.setAttribute("position",new kt([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new kt([0,2,0,0,2,0],2))}}const aAe=new oAe;class tH{constructor(e){this._mesh=new ut(aAe,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,rAe)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class zM extends Hp{constructor(e,t){super(),this.textureID=t!==void 0?t:"tDiffuse",e instanceof Bi?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=eh.clone(e.uniforms),this.material=new Bi({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new tH(this.material)}render(e,t,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class Pk extends Hp{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,i){const s=e.getContext(),r=e.state;r.buffers.color.setMask(!1),r.buffers.depth.setMask(!1),r.buffers.color.setLocked(!0),r.buffers.depth.setLocked(!0);let o,a;this.inverse?(o=0,a=1):(o=1,a=0),r.buffers.stencil.setTest(!0),r.buffers.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),r.buffers.stencil.setFunc(s.ALWAYS,o,4294967295),r.buffers.stencil.setClear(a),r.buffers.stencil.setLocked(!0),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),r.buffers.color.setLocked(!1),r.buffers.depth.setLocked(!1),r.buffers.color.setMask(!0),r.buffers.depth.setMask(!0),r.buffers.stencil.setLocked(!1),r.buffers.stencil.setFunc(s.EQUAL,1,4294967295),r.buffers.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),r.buffers.stencil.setLocked(!0)}}class lAe extends Hp{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class cAe{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),t===void 0){const i=e.getSize(new tt);this._width=i.width,this._height=i.height,t=new Ti(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Ki}),t.texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new zM(eH),this.copyPass.material.blending=Ro,this.clock=new kw}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let i=!1;for(let s=0,r=this.passes.length;s<r;s++){const o=this.passes[s];if(o.enabled!==!1){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(s),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),o.needsSwap){if(i){const a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}Pk!==void 0&&(o instanceof Pk?i=!0:o instanceof lAe&&(i=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new tt);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const i=this._width*this._pixelRatio,s=this._height*this._pixelRatio;this.renderTarget1.setSize(i,s),this.renderTarget2.setSize(i,s);for(let r=0;r<this.passes.length;r++)this.passes[r].setSize(i,s)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class Uc extends Hp{constructor(e,t,i,s){super(),this.renderScene=t,this.renderCamera=i,this.selectedObjects=s!==void 0?s:[],this.visibleEdgeColor=new gt(1,1,1),this.hiddenEdgeColor=new gt(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=new Map,this.resolution=e!==void 0?new tt(e.x,e.y):new tt(256,256);const r=Math.round(this.resolution.x/this.downSampleRatio),o=Math.round(this.resolution.y/this.downSampleRatio);this.renderTargetMaskBuffer=new Ti(this.resolution.x,this.resolution.y),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new e0,this.depthMaterial.side=ts,this.depthMaterial.depthPacking=iw,this.depthMaterial.blending=Ro,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=ts,this.prepareMaskMaterial.fragmentShader=u(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new Ti(this.resolution.x,this.resolution.y,{type:Ki}),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new Ti(r,o,{type:Ki}),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new Ti(r,o,{type:Ki}),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new Ti(Math.round(r/2),Math.round(o/2),{type:Ki}),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new Ti(r,o,{type:Ki}),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new Ti(Math.round(r/2),Math.round(o/2),{type:Ki}),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1;const a=4,l=4;this.separableBlurMaterial1=this.getSeperableBlurMaterial(a),this.separableBlurMaterial1.uniforms.texSize.value.set(r,o),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(l),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(r/2),Math.round(o/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=l,this.overlayMaterial=this.getOverlayMaterial();const c=eH;this.copyUniforms=eh.clone(c.uniforms),this.materialCopy=new Bi({uniforms:this.copyUniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader,blending:Ro,depthTest:!1,depthWrite:!1}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new gt,this.oldClearAlpha=1,this.fsQuad=new tH(null),this.tempPulseColor1=new gt,this.tempPulseColor2=new gt,this.textureMatrix=new yt;function u(d,h){const f=h.isPerspectiveCamera?"perspective":"orthographic";return d.replace(/DEPTH_TO_VIEW_Z/g,f+"DepthToViewZ")}}dispose(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose(),this.depthMaterial.dispose(),this.prepareMaskMaterial.dispose(),this.edgeDetectionMaterial.dispose(),this.separableBlurMaterial1.dispose(),this.separableBlurMaterial2.dispose(),this.overlayMaterial.dispose(),this.materialCopy.dispose(),this.fsQuad.dispose()}setSize(e,t){this.renderTargetMaskBuffer.setSize(e,t),this.renderTargetDepthBuffer.setSize(e,t);let i=Math.round(e/this.downSampleRatio),s=Math.round(t/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(i,s),this.renderTargetBlurBuffer1.setSize(i,s),this.renderTargetEdgeBuffer1.setSize(i,s),this.separableBlurMaterial1.uniforms.texSize.value.set(i,s),i=Math.round(i/2),s=Math.round(s/2),this.renderTargetBlurBuffer2.setSize(i,s),this.renderTargetEdgeBuffer2.setSize(i,s),this.separableBlurMaterial2.uniforms.texSize.value.set(i,s)}changeVisibilityOfSelectedObjects(e){const t=this._visibilityCache;function i(s){s.isMesh&&(e===!0?s.visible=t.get(s):(t.set(s,s.visible),s.visible=e))}for(let s=0;s<this.selectedObjects.length;s++)this.selectedObjects[s].traverse(i)}changeVisibilityOfNonSelectedObjects(e){const t=this._visibilityCache,i=[];function s(o){o.isMesh&&i.push(o)}for(let o=0;o<this.selectedObjects.length;o++)this.selectedObjects[o].traverse(s);function r(o){if(o.isMesh||o.isSprite){let a=!1;for(let l=0;l<i.length;l++)if(i[l].id===o.id){a=!0;break}if(a===!1){const l=o.visible;(e===!1||t.get(o)===!0)&&(o.visible=e),t.set(o,l)}}else(o.isPoints||o.isLine)&&(e===!0?o.visible=t.get(o):(t.set(o,o.visible),o.visible=e))}this.renderScene.traverse(r)}updateTextureMatrix(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}render(e,t,i,s,r){if(this.selectedObjects.length>0){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const o=e.autoClear;e.autoClear=!1,r&&e.state.buffers.stencil.setTest(!1),e.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);const a=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,e.setRenderTarget(this.renderTargetDepthBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,e.setRenderTarget(this.renderTargetMaskBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this.renderScene.background=a,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,e.setRenderTarget(this.renderTargetMaskDownSampleBuffer),e.clear(),this.fsQuad.render(e),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){const l=.625+Math.cos(performance.now()*.01/this.pulsePeriod)*.75/2;this.tempPulseColor1.multiplyScalar(l),this.tempPulseColor2.multiplyScalar(l)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=Uc.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,e.setRenderTarget(this.renderTargetBlurBuffer1),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=Uc.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=Uc.BlurDirectionX,e.setRenderTarget(this.renderTargetBlurBuffer2),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=Uc.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer2),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,r&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(i),this.fsQuad.render(e),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=o}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=i.texture,e.setRenderTarget(null),this.fsQuad.render(e))}getPrepareMaskMaterial(){return new Bi({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new tt(.5,.5)},textureMatrix:{value:null}},vertexShader:`#include <morphtarget_pars_vertex>
				#include <skinning_pars_vertex>

				varying vec4 projTexCoord;
				varying vec4 vPosition;
				uniform mat4 textureMatrix;

				void main() {

					#include <skinbase_vertex>
					#include <begin_vertex>
					#include <morphtarget_vertex>
					#include <skinning_vertex>
					#include <project_vertex>

					vPosition = mvPosition;

					vec4 worldPosition = vec4( transformed, 1.0 );

					#ifdef USE_INSTANCING

						worldPosition = instanceMatrix * worldPosition;

					#endif
					
					worldPosition = modelMatrix * worldPosition;

					projTexCoord = textureMatrix * worldPosition;

				}`,fragmentShader:`#include <packing>
				varying vec4 vPosition;
				varying vec4 projTexCoord;
				uniform sampler2D depthTexture;
				uniform vec2 cameraNearFar;

				void main() {

					float depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));
					float viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );
					float depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;
					gl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);

				}`})}getEdgeDetectionMaterial(){return new Bi({uniforms:{maskTexture:{value:null},texSize:{value:new tt(.5,.5)},visibleEdgeColor:{value:new G(1,1,1)},hiddenEdgeColor:{value:new G(1,1,1)}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform vec2 texSize;
				uniform vec3 visibleEdgeColor;
				uniform vec3 hiddenEdgeColor;

				void main() {
					vec2 invSize = 1.0 / texSize;
					vec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);
					vec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);
					vec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);
					vec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);
					vec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);
					float diff1 = (c1.r - c2.r)*0.5;
					float diff2 = (c3.r - c4.r)*0.5;
					float d = length( vec2(diff1, diff2) );
					float a1 = min(c1.g, c2.g);
					float a2 = min(c3.g, c4.g);
					float visibilityFactor = min(a1, a2);
					vec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;
					gl_FragColor = vec4(edgeColor, 1.0) * vec4(d);
				}`})}getSeperableBlurMaterial(e){return new Bi({defines:{MAX_RADIUS:e},uniforms:{colorTexture:{value:null},texSize:{value:new tt(.5,.5)},direction:{value:new tt(.5,.5)},kernelRadius:{value:1}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;
				uniform vec2 direction;
				uniform float kernelRadius;

				float gaussianPdf(in float x, in float sigma) {
					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
				}

				void main() {
					vec2 invSize = 1.0 / texSize;
					float sigma = kernelRadius/2.0;
					float weightSum = gaussianPdf(0.0, sigma);
					vec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;
					vec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);
					vec2 uvOffset = delta;
					for( int i = 1; i <= MAX_RADIUS; i ++ ) {
						float x = kernelRadius * float(i) / float(MAX_RADIUS);
						float w = gaussianPdf(x, sigma);
						vec4 sample1 = texture2D( colorTexture, vUv + uvOffset);
						vec4 sample2 = texture2D( colorTexture, vUv - uvOffset);
						diffuseSum += ((sample1 + sample2) * w);
						weightSum += (2.0 * w);
						uvOffset += delta;
					}
					gl_FragColor = diffuseSum/weightSum;
				}`})}getOverlayMaterial(){return new Bi({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform sampler2D edgeTexture1;
				uniform sampler2D edgeTexture2;
				uniform sampler2D patternTexture;
				uniform float edgeStrength;
				uniform float edgeGlow;
				uniform bool usePatternTexture;

				void main() {
					vec4 edgeValue1 = texture2D(edgeTexture1, vUv);
					vec4 edgeValue2 = texture2D(edgeTexture2, vUv);
					vec4 maskColor = texture2D(maskTexture, vUv);
					vec4 patternColor = texture2D(patternTexture, 6.0 * vUv);
					float visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;
					vec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;
					vec4 finalColor = edgeStrength * maskColor.r * edgeValue;
					if(usePatternTexture)
						finalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);
					gl_FragColor = finalColor;
				}`,blending:ub,depthTest:!1,depthWrite:!1,transparent:!0})}}Uc.BlurDirectionX=new tt(1,0);Uc.BlurDirectionY=new tt(0,1);class uAe extends Hp{constructor(e,t,i=null,s=null,r=null){super(),this.scene=e,this.camera=t,this.overrideMaterial=i,this.clearColor=s,this.clearAlpha=r,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new gt}render(e,t,i){const s=e.autoClear;e.autoClear=!1;let r,o;this.overrideMaterial!==null&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(r=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:i),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(r),this.overrideMaterial!==null&&(this.scene.overrideMaterial=o),e.autoClear=s}}const dAe={name:"GammaCorrectionShader",uniforms:{tDiffuse:{value:null}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 tex = texture2D( tDiffuse, vUv );

			gl_FragColor = sRGBTransferOETF( tex );

		}`},HM={name:"FXAAShader",uniforms:{tDiffuse:{value:null},resolution:{value:new tt(1/1024,1/512)}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`
		precision highp float;

		uniform sampler2D tDiffuse;

		uniform vec2 resolution;

		varying vec2 vUv;

		// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)

		//----------------------------------------------------------------------------------
		// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag
		// SDK Version: v3.00
		// Email:       gameworks@nvidia.com
		// Site:        http://developer.nvidia.com/
		//
		// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.
		//
		// Redistribution and use in source and binary forms, with or without
		// modification, are permitted provided that the following conditions
		// are met:
		//  * Redistributions of source code must retain the above copyright
		//    notice, this list of conditions and the following disclaimer.
		//  * Redistributions in binary form must reproduce the above copyright
		//    notice, this list of conditions and the following disclaimer in the
		//    documentation and/or other materials provided with the distribution.
		//  * Neither the name of NVIDIA CORPORATION nor the names of its
		//    contributors may be used to endorse or promote products derived
		//    from this software without specific prior written permission.
		//
		// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ''AS IS'' AND ANY
		// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
		// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
		// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
		// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
		// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
		// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
		// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
		// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
		// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
		// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
		//
		//----------------------------------------------------------------------------------

		#ifndef FXAA_DISCARD
			//
			// Only valid for PC OpenGL currently.
			// Probably will not work when FXAA_GREEN_AS_LUMA = 1.
			//
			// 1 = Use discard on pixels which don't need AA.
			//     For APIs which enable concurrent TEX+ROP from same surface.
			// 0 = Return unchanged color on pixels which don't need AA.
			//
			#define FXAA_DISCARD 0
		#endif

		/*--------------------------------------------------------------------------*/
		#define FxaaTexTop(t, p) texture2D(t, p, -100.0)
		#define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), -100.0)
		/*--------------------------------------------------------------------------*/

		#define NUM_SAMPLES 5

		// assumes colors have premultipliedAlpha, so that the calculated color contrast is scaled by alpha
		float contrast( vec4 a, vec4 b ) {
			vec4 diff = abs( a - b );
			return max( max( max( diff.r, diff.g ), diff.b ), diff.a );
		}

		/*============================================================================

									FXAA3 QUALITY - PC

		============================================================================*/

		/*--------------------------------------------------------------------------*/
		vec4 FxaaPixelShader(
			vec2 posM,
			sampler2D tex,
			vec2 fxaaQualityRcpFrame,
			float fxaaQualityEdgeThreshold,
			float fxaaQualityinvEdgeThreshold
		) {
			vec4 rgbaM = FxaaTexTop(tex, posM);
			vec4 rgbaS = FxaaTexOff(tex, posM, vec2( 0.0, 1.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaE = FxaaTexOff(tex, posM, vec2( 1.0, 0.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaN = FxaaTexOff(tex, posM, vec2( 0.0,-1.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaW = FxaaTexOff(tex, posM, vec2(-1.0, 0.0), fxaaQualityRcpFrame.xy);
			// . S .
			// W M E
			// . N .

			bool earlyExit = max( max( max(
					contrast( rgbaM, rgbaN ),
					contrast( rgbaM, rgbaS ) ),
					contrast( rgbaM, rgbaE ) ),
					contrast( rgbaM, rgbaW ) )
					< fxaaQualityEdgeThreshold;
			// . 0 .
			// 0 0 0
			// . 0 .

			#if (FXAA_DISCARD == 1)
				if(earlyExit) FxaaDiscard;
			#else
				if(earlyExit) return rgbaM;
			#endif

			float contrastN = contrast( rgbaM, rgbaN );
			float contrastS = contrast( rgbaM, rgbaS );
			float contrastE = contrast( rgbaM, rgbaE );
			float contrastW = contrast( rgbaM, rgbaW );

			float relativeVContrast = ( contrastN + contrastS ) - ( contrastE + contrastW );
			relativeVContrast *= fxaaQualityinvEdgeThreshold;

			bool horzSpan = relativeVContrast > 0.;
			// . 1 .
			// 0 0 0
			// . 1 .

			// 45 deg edge detection and corners of objects, aka V/H contrast is too similar
			if( abs( relativeVContrast ) < .3 ) {
				// locate the edge
				vec2 dirToEdge;
				dirToEdge.x = contrastE > contrastW ? 1. : -1.;
				dirToEdge.y = contrastS > contrastN ? 1. : -1.;
				// . 2 .      . 1 .
				// 1 0 2  ~=  0 0 1
				// . 1 .      . 0 .

				// tap 2 pixels and see which ones are "outside" the edge, to
				// determine if the edge is vertical or horizontal

				vec4 rgbaAlongH = FxaaTexOff(tex, posM, vec2( dirToEdge.x, -dirToEdge.y ), fxaaQualityRcpFrame.xy);
				float matchAlongH = contrast( rgbaM, rgbaAlongH );
				// . 1 .
				// 0 0 1
				// . 0 H

				vec4 rgbaAlongV = FxaaTexOff(tex, posM, vec2( -dirToEdge.x, dirToEdge.y ), fxaaQualityRcpFrame.xy);
				float matchAlongV = contrast( rgbaM, rgbaAlongV );
				// V 1 .
				// 0 0 1
				// . 0 .

				relativeVContrast = matchAlongV - matchAlongH;
				relativeVContrast *= fxaaQualityinvEdgeThreshold;

				if( abs( relativeVContrast ) < .3 ) { // 45 deg edge
					// 1 1 .
					// 0 0 1
					// . 0 1

					// do a simple blur
					return mix(
						rgbaM,
						(rgbaN + rgbaS + rgbaE + rgbaW) * .25,
						.4
					);
				}

				horzSpan = relativeVContrast > 0.;
			}

			if(!horzSpan) rgbaN = rgbaW;
			if(!horzSpan) rgbaS = rgbaE;
			// . 0 .      1
			// 1 0 1  ->  0
			// . 0 .      1

			bool pairN = contrast( rgbaM, rgbaN ) > contrast( rgbaM, rgbaS );
			if(!pairN) rgbaN = rgbaS;

			vec2 offNP;
			offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;
			offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;

			bool doneN = false;
			bool doneP = false;

			float nDist = 0.;
			float pDist = 0.;

			vec2 posN = posM;
			vec2 posP = posM;

			int iterationsUsedN = 0;
			int iterationsUsedP = 0;
			for( int i = 0; i < NUM_SAMPLES; i++ ) {

				float increment = float(i + 1);

				if(!doneN) {
					nDist += increment;
					posN = posM + offNP * nDist;
					vec4 rgbaEndN = FxaaTexTop(tex, posN.xy);
					doneN = contrast( rgbaEndN, rgbaM ) > contrast( rgbaEndN, rgbaN );
					iterationsUsedN = i;
				}

				if(!doneP) {
					pDist += increment;
					posP = posM - offNP * pDist;
					vec4 rgbaEndP = FxaaTexTop(tex, posP.xy);
					doneP = contrast( rgbaEndP, rgbaM ) > contrast( rgbaEndP, rgbaN );
					iterationsUsedP = i;
				}

				if(doneN || doneP) break;
			}


			if ( !doneP && !doneN ) return rgbaM; // failed to find end of edge

			float dist = min(
				doneN ? float( iterationsUsedN ) / float( NUM_SAMPLES - 1 ) : 1.,
				doneP ? float( iterationsUsedP ) / float( NUM_SAMPLES - 1 ) : 1.
			);

			// hacky way of reduces blurriness of mostly diagonal edges
			// but reduces AA quality
			dist = pow(dist, .5);

			dist = 1. - dist;

			return mix(
				rgbaM,
				rgbaN,
				dist * .5
			);
		}

		void main() {
			const float edgeDetectionQuality = .2;
			const float invEdgeDetectionQuality = 1. / edgeDetectionQuality;

			gl_FragColor = FxaaPixelShader(
				vUv,
				tDiffuse,
				resolution,
				edgeDetectionQuality, // [0,1] contrast needed, otherwise early discard
				invEdgeDetectionQuality
			);

		}
	`};class hAe extends Y2{constructor(e){super(e),this.type=Ki}parse(e){const o=function(T,M){switch(T){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(M||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(M||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(M||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(M||""))}},u=`
`,d=function(T,M,E){M=M||1024;let I=T.pos,B=-1,F=0,U="",P=String.fromCharCode.apply(null,new Uint16Array(T.subarray(I,I+128)));for(;0>(B=P.indexOf(u))&&F<M&&I<T.byteLength;)U+=P,F+=P.length,I+=128,P+=String.fromCharCode.apply(null,new Uint16Array(T.subarray(I,I+128)));return-1<B?(T.pos+=F+B+1,U+P.slice(0,B)):!1},h=function(T){const M=/^#\?(\S+)/,E=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,A=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,I=/^\s*FORMAT=(\S+)\s*$/,B=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,F={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let U,P;for((T.pos>=T.byteLength||!(U=d(T)))&&o(1,"no header found"),(P=U.match(M))||o(3,"bad initial token"),F.valid|=1,F.programtype=P[1],F.string+=U+`
`;U=d(T),U!==!1;){if(F.string+=U+`
`,U.charAt(0)==="#"){F.comments+=U+`
`;continue}if((P=U.match(E))&&(F.gamma=parseFloat(P[1])),(P=U.match(A))&&(F.exposure=parseFloat(P[1])),(P=U.match(I))&&(F.valid|=2,F.format=P[1]),(P=U.match(B))&&(F.valid|=4,F.height=parseInt(P[1],10),F.width=parseInt(P[2],10)),F.valid&2&&F.valid&4)break}return F.valid&2||o(3,"missing format specifier"),F.valid&4||o(3,"missing image size specifier"),F},f=function(T,M,E){const A=M;if(A<8||A>32767||T[0]!==2||T[1]!==2||T[2]&128)return new Uint8Array(T);A!==(T[2]<<8|T[3])&&o(3,"wrong scanline width");const I=new Uint8Array(4*M*E);I.length||o(4,"unable to allocate buffer space");let B=0,F=0;const U=4*A,P=new Uint8Array(4),O=new Uint8Array(U);let D=E;for(;D>0&&F<T.byteLength;){F+4>T.byteLength&&o(1),P[0]=T[F++],P[1]=T[F++],P[2]=T[F++],P[3]=T[F++],(P[0]!=2||P[1]!=2||(P[2]<<8|P[3])!=A)&&o(3,"bad rgbe scanline format");let L=0,H;for(;L<U&&F<T.byteLength;){H=T[F++];const ne=H>128;if(ne&&(H-=128),(H===0||L+H>U)&&o(3,"bad scanline data"),ne){const ce=T[F++];for(let ae=0;ae<H;ae++)O[L++]=ce}else O.set(T.subarray(F,F+H),L),L+=H,F+=H}const X=A;for(let ne=0;ne<X;ne++){let ce=0;I[B]=O[ne+ce],ce+=A,I[B+1]=O[ne+ce],ce+=A,I[B+2]=O[ne+ce],ce+=A,I[B+3]=O[ne+ce],B+=4}D--}return I},m=function(T,M,E,A){const I=T[M+3],B=Math.pow(2,I-128)/255;E[A+0]=T[M+0]*B,E[A+1]=T[M+1]*B,E[A+2]=T[M+2]*B,E[A+3]=1},p=function(T,M,E,A){const I=T[M+3],B=Math.pow(2,I-128)/255;E[A+0]=fd.toHalfFloat(Math.min(T[M+0]*B,65504)),E[A+1]=fd.toHalfFloat(Math.min(T[M+1]*B,65504)),E[A+2]=fd.toHalfFloat(Math.min(T[M+2]*B,65504)),E[A+3]=fd.toHalfFloat(1)},y=new Uint8Array(e);y.pos=0;const v=h(y),_=v.width,b=v.height,w=f(y.subarray(y.pos),_,b);let x,S,C;switch(this.type){case is:C=w.length/4;const T=new Float32Array(C*4);for(let E=0;E<C;E++)m(w,E*4,T,E*4);x=T,S=is;break;case Ki:C=w.length/4;const M=new Uint16Array(C*4);for(let E=0;E<C;E++)p(w,E*4,M,E*4);x=M,S=Ki;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:_,height:b,data:x,header:v.string,gamma:v.gamma,exposure:v.exposure,type:S}}setDataType(e){return this.type=e,this}load(e,t,i,s){function r(o,a){switch(o.type){case is:case Ki:o.colorSpace=qn,o.minFilter=Rn,o.magFilter=Rn,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,r,i,s)}}/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.8.2
*/var wo=Uint8Array,bf=Uint16Array,fAe=Int32Array,nH=new wo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),iH=new wo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),pAe=new wo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),sH=function(n,e){for(var t=new bf(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var s=new fAe(t[30]),i=1;i<30;++i)for(var r=t[i];r<t[i+1];++r)s[r]=r-t[i]<<5|i;return{b:t,r:s}},rH=sH(nH,2),oH=rH.b,mAe=rH.r;oH[28]=258,mAe[258]=28;var gAe=sH(iH,0),vAe=gAe.b,VM=new bf(32768);for(var yi=0;yi<32768;++yi){var yc=(yi&43690)>>1|(yi&21845)<<1;yc=(yc&52428)>>2|(yc&13107)<<2,yc=(yc&61680)>>4|(yc&3855)<<4,VM[yi]=((yc&65280)>>8|(yc&255)<<8)>>1}var fg=function(n,e,t){for(var i=n.length,s=0,r=new bf(e);s<i;++s)n[s]&&++r[n[s]-1];var o=new bf(e);for(s=1;s<e;++s)o[s]=o[s-1]+r[s-1]<<1;var a;if(t){a=new bf(1<<e);var l=15-e;for(s=0;s<i;++s)if(n[s])for(var c=s<<4|n[s],u=e-n[s],d=o[n[s]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)a[VM[d]>>l]=c}else for(a=new bf(i),s=0;s<i;++s)n[s]&&(a[s]=VM[o[n[s]-1]++]>>15-n[s]);return a},c0=new wo(288);for(var yi=0;yi<144;++yi)c0[yi]=8;for(var yi=144;yi<256;++yi)c0[yi]=9;for(var yi=256;yi<280;++yi)c0[yi]=7;for(var yi=280;yi<288;++yi)c0[yi]=8;var aH=new wo(32);for(var yi=0;yi<32;++yi)aH[yi]=5;var yAe=fg(c0,9,1),_Ae=fg(aH,5,1),OS=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Yo=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},DS=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},bAe=function(n){return(n+7)/8|0},wAe=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new wo(n.subarray(e,t))},xAe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],jo=function(n,e,t){var i=new Error(e||xAe[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,jo),!t)throw i;return i},SAe=function(n,e,t,i){var s=n.length,r=0;if(!s||e.f&&!e.l)return t||new wo(0);var o=!t,a=o||e.i!=2,l=e.i;o&&(t=new wo(s*3));var c=function(we){var K=t.length;if(we>K){var j=new wo(Math.max(K*2,we));j.set(t),t=j}},u=e.f||0,d=e.p||0,h=e.b||0,f=e.l,m=e.d,p=e.m,y=e.n,v=s*8;do{if(!f){u=Yo(n,d,1);var _=Yo(n,d+1,3);if(d+=3,_)if(_==1)f=yAe,m=_Ae,p=9,y=5;else if(_==2){var S=Yo(n,d,31)+257,C=Yo(n,d+10,15)+4,T=S+Yo(n,d+5,31)+1;d+=14;for(var M=new wo(T),E=new wo(19),A=0;A<C;++A)E[pAe[A]]=Yo(n,d+A*3,7);d+=C*3;for(var I=OS(E),B=(1<<I)-1,F=fg(E,I,1),A=0;A<T;){var U=F[Yo(n,d,B)];d+=U&15;var b=U>>4;if(b<16)M[A++]=b;else{var P=0,O=0;for(b==16?(O=3+Yo(n,d,3),d+=2,P=M[A-1]):b==17?(O=3+Yo(n,d,7),d+=3):b==18&&(O=11+Yo(n,d,127),d+=7);O--;)M[A++]=P}}var D=M.subarray(0,S),L=M.subarray(S);p=OS(D),y=OS(L),f=fg(D,p,1),m=fg(L,y,1)}else jo(1);else{var b=bAe(d)+4,w=n[b-4]|n[b-3]<<8,x=b+w;if(x>s){l&&jo(0);break}a&&c(h+w),t.set(n.subarray(b,x),h),e.b=h+=w,e.p=d=x*8,e.f=u;continue}if(d>v){l&&jo(0);break}}a&&c(h+131072);for(var H=(1<<p)-1,X=(1<<y)-1,ne=d;;ne=d){var P=f[DS(n,d)&H],ce=P>>4;if(d+=P&15,d>v){l&&jo(0);break}if(P||jo(2),ce<256)t[h++]=ce;else if(ce==256){ne=d,f=null;break}else{var ae=ce-254;if(ce>264){var A=ce-257,_e=nH[A];ae=Yo(n,d,(1<<_e)-1)+oH[A],d+=_e}var re=m[DS(n,d)&X],xe=re>>4;re||jo(3),d+=re&15;var L=vAe[xe];if(xe>3){var _e=iH[xe];L+=DS(n,d)&(1<<_e)-1,d+=_e}if(d>v){l&&jo(0);break}a&&c(h+131072);var he=h+ae;if(h<L){var Te=r-L,Ce=Math.min(L,he);for(Te+h<0&&jo(3);h<Ce;++h)t[h]=i[Te+h]}for(;h<he;++h)t[h]=t[h-L]}}e.l=f,e.p=ne,e.b=h,e.f=u,f&&(u=1,e.m=p,e.d=m,e.n=y)}while(!u);return h!=t.length&&o?wAe(t,0,h):t.subarray(0,h)},CAe=new wo(0),MAe=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&jo(6,"invalid zlib data"),(n[1]>>5&1)==+!e&&jo(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function Yy(n,e){return SAe(n.subarray(MAe(n,e),-4),{i:2},e,e)}var EAe=typeof TextDecoder<"u"&&new TextDecoder,TAe=0;try{EAe.decode(CAe,{stream:!0}),TAe=1}catch{}class AAe extends Y2{constructor(e){super(e),this.type=Ki}parse(e){const M=Math.pow(2.7182818,2.2);function E(N,W){let q=0;for(let Me=0;Me<65536;++Me)(Me==0||N[Me>>3]&1<<(Me&7))&&(W[q++]=Me);const ee=q-1;for(;q<65536;)W[q++]=0;return ee}function A(N){for(let W=0;W<16384;W++)N[W]={},N[W].len=0,N[W].lit=0,N[W].p=null}const I={l:0,c:0,lc:0};function B(N,W,q,ee,Me){for(;q<N;)W=W<<8|Le(ee,Me),q+=8;q-=N,I.l=W>>q&(1<<N)-1,I.c=W,I.lc=q}const F=new Array(59);function U(N){for(let q=0;q<=58;++q)F[q]=0;for(let q=0;q<65537;++q)F[N[q]]+=1;let W=0;for(let q=58;q>0;--q){const ee=W+F[q]>>1;F[q]=W,W=ee}for(let q=0;q<65537;++q){const ee=N[q];ee>0&&(N[q]=ee|F[ee]++<<6)}}function P(N,W,q,ee,Me,Se){const Be=W;let nt=0,Xe=0;for(;ee<=Me;ee++){if(Be.value-W.value>q)return!1;B(6,nt,Xe,N,Be);const Qe=I.l;if(nt=I.c,Xe=I.lc,Se[ee]=Qe,Qe==63){if(Be.value-W.value>q)throw new Error("Something wrong with hufUnpackEncTable");B(8,nt,Xe,N,Be);let st=I.l+6;if(nt=I.c,Xe=I.lc,ee+st>Me+1)throw new Error("Something wrong with hufUnpackEncTable");for(;st--;)Se[ee++]=0;ee--}else if(Qe>=59){let st=Qe-59+2;if(ee+st>Me+1)throw new Error("Something wrong with hufUnpackEncTable");for(;st--;)Se[ee++]=0;ee--}}U(Se)}function O(N){return N&63}function D(N){return N>>6}function L(N,W,q,ee){for(;W<=q;W++){const Me=D(N[W]),Se=O(N[W]);if(Me>>Se)throw new Error("Invalid table entry");if(Se>14){const Be=ee[Me>>Se-14];if(Be.len)throw new Error("Invalid table entry");if(Be.lit++,Be.p){const nt=Be.p;Be.p=new Array(Be.lit);for(let Xe=0;Xe<Be.lit-1;++Xe)Be.p[Xe]=nt[Xe]}else Be.p=new Array(1);Be.p[Be.lit-1]=W}else if(Se){let Be=0;for(let nt=1<<14-Se;nt>0;nt--){const Xe=ee[(Me<<14-Se)+Be];if(Xe.len||Xe.p)throw new Error("Invalid table entry");Xe.len=Se,Xe.lit=W,Be++}}}return!0}const H={c:0,lc:0};function X(N,W,q,ee){N=N<<8|Le(q,ee),W+=8,H.c=N,H.lc=W}const ne={c:0,lc:0};function ce(N,W,q,ee,Me,Se,Be,nt,Xe){if(N==W){ee<8&&(X(q,ee,Me,Se),q=H.c,ee=H.lc),ee-=8;let Qe=q>>ee;if(Qe=new Uint8Array([Qe])[0],nt.value+Qe>Xe)return!1;const st=Be[nt.value-1];for(;Qe-- >0;)Be[nt.value++]=st}else if(nt.value<Xe)Be[nt.value++]=N;else return!1;ne.c=q,ne.lc=ee}function ae(N){return N&65535}function _e(N){const W=ae(N);return W>32767?W-65536:W}const re={a:0,b:0};function xe(N,W){const q=_e(N),Me=_e(W),Se=q+(Me&1)+(Me>>1),Be=Se,nt=Se-Me;re.a=Be,re.b=nt}function he(N,W){const q=ae(N),ee=ae(W),Me=q-(ee>>1)&65535,Se=ee+Me-32768&65535;re.a=Se,re.b=Me}function Te(N,W,q,ee,Me,Se,Be){const nt=Be<16384,Xe=q>Me?Me:q;let Qe=1,st,bt;for(;Qe<=Xe;)Qe<<=1;for(Qe>>=1,st=Qe,Qe>>=1;Qe>=1;){bt=0;const Et=bt+Se*(Me-st),Pt=Se*Qe,It=Se*st,lt=ee*Qe,Lt=ee*st;let Nt,hn,Yn,ri;for(;bt<=Et;bt+=It){let Zn=bt;const qt=bt+ee*(q-st);for(;Zn<=qt;Zn+=Lt){const Qn=Zn+lt,Os=Zn+Pt,Bn=Os+lt;nt?(xe(N[Zn+W],N[Os+W]),Nt=re.a,Yn=re.b,xe(N[Qn+W],N[Bn+W]),hn=re.a,ri=re.b,xe(Nt,hn),N[Zn+W]=re.a,N[Qn+W]=re.b,xe(Yn,ri),N[Os+W]=re.a,N[Bn+W]=re.b):(he(N[Zn+W],N[Os+W]),Nt=re.a,Yn=re.b,he(N[Qn+W],N[Bn+W]),hn=re.a,ri=re.b,he(Nt,hn),N[Zn+W]=re.a,N[Qn+W]=re.b,he(Yn,ri),N[Os+W]=re.a,N[Bn+W]=re.b)}if(q&Qe){const Qn=Zn+Pt;nt?xe(N[Zn+W],N[Qn+W]):he(N[Zn+W],N[Qn+W]),Nt=re.a,N[Qn+W]=re.b,N[Zn+W]=Nt}}if(Me&Qe){let Zn=bt;const qt=bt+ee*(q-st);for(;Zn<=qt;Zn+=Lt){const Qn=Zn+lt;nt?xe(N[Zn+W],N[Qn+W]):he(N[Zn+W],N[Qn+W]),Nt=re.a,N[Qn+W]=re.b,N[Zn+W]=Nt}}st=Qe,Qe>>=1}return bt}function Ce(N,W,q,ee,Me,Se,Be,nt,Xe){let Qe=0,st=0;const bt=Be,Et=Math.trunc(ee.value+(Me+7)/8);for(;ee.value<Et;)for(X(Qe,st,q,ee),Qe=H.c,st=H.lc;st>=14;){const It=Qe>>st-14&16383,lt=W[It];if(lt.len)st-=lt.len,ce(lt.lit,Se,Qe,st,q,ee,nt,Xe,bt),Qe=ne.c,st=ne.lc;else{if(!lt.p)throw new Error("hufDecode issues");let Lt;for(Lt=0;Lt<lt.lit;Lt++){const Nt=O(N[lt.p[Lt]]);for(;st<Nt&&ee.value<Et;)X(Qe,st,q,ee),Qe=H.c,st=H.lc;if(st>=Nt&&D(N[lt.p[Lt]])==(Qe>>st-Nt&(1<<Nt)-1)){st-=Nt,ce(lt.p[Lt],Se,Qe,st,q,ee,nt,Xe,bt),Qe=ne.c,st=ne.lc;break}}if(Lt==lt.lit)throw new Error("hufDecode issues")}}const Pt=8-Me&7;for(Qe>>=Pt,st-=Pt;st>0;){const It=W[Qe<<14-st&16383];if(It.len)st-=It.len,ce(It.lit,Se,Qe,st,q,ee,nt,Xe,bt),Qe=ne.c,st=ne.lc;else throw new Error("hufDecode issues")}return!0}function we(N,W,q,ee,Me,Se){const Be={value:0},nt=q.value,Xe=oe(W,q),Qe=oe(W,q);q.value+=4;const st=oe(W,q);if(q.value+=4,Xe<0||Xe>=65537||Qe<0||Qe>=65537)throw new Error("Something wrong with HUF_ENCSIZE");const bt=new Array(65537),Et=new Array(16384);A(Et);const Pt=ee-(q.value-nt);if(P(N,q,Pt,Xe,Qe,bt),st>8*(ee-(q.value-nt)))throw new Error("Something wrong with hufUncompress");L(bt,Xe,Qe,Et),Ce(bt,Et,N,q,st,Qe,Se,Me,Be)}function K(N,W,q){for(let ee=0;ee<q;++ee)W[ee]=N[W[ee]]}function j(N){for(let W=1;W<N.length;W++){const q=N[W-1]+N[W]-128;N[W]=q}}function ie(N,W){let q=0,ee=Math.floor((N.length+1)/2),Me=0;const Se=N.length-1;for(;!(Me>Se||(W[Me++]=N[q++],Me>Se));)W[Me++]=N[ee++]}function ve(N){let W=N.byteLength;const q=new Array;let ee=0;const Me=new DataView(N);for(;W>0;){const Se=Me.getInt8(ee++);if(Se<0){const Be=-Se;W-=Be+1;for(let nt=0;nt<Be;nt++)q.push(Me.getUint8(ee++))}else{const Be=Se;W-=2;const nt=Me.getUint8(ee++);for(let Xe=0;Xe<Be+1;Xe++)q.push(nt)}}return q}function ye(N,W,q,ee,Me,Se){let Be=new DataView(Se.buffer);const nt=q[N.idx[0]].width,Xe=q[N.idx[0]].height,Qe=3,st=Math.floor(nt/8),bt=Math.ceil(nt/8),Et=Math.ceil(Xe/8),Pt=nt-(bt-1)*8,It=Xe-(Et-1)*8,lt={value:0},Lt=new Array(Qe),Nt=new Array(Qe),hn=new Array(Qe),Yn=new Array(Qe),ri=new Array(Qe);for(let qt=0;qt<Qe;++qt)ri[qt]=W[N.idx[qt]],Lt[qt]=qt<1?0:Lt[qt-1]+bt*Et,Nt[qt]=new Float32Array(64),hn[qt]=new Uint16Array(64),Yn[qt]=new Uint16Array(bt*64);for(let qt=0;qt<Et;++qt){let Qn=8;qt==Et-1&&(Qn=It);let Os=8;for(let Pn=0;Pn<bt;++Pn){Pn==bt-1&&(Os=Pt);for(let ei=0;ei<Qe;++ei)hn[ei].fill(0),hn[ei][0]=Me[Lt[ei]++],me(lt,ee,hn[ei]),be(hn[ei],Nt[ei]),Pe(Nt[ei]);Z(Nt);for(let ei=0;ei<Qe;++ei)$(Nt[ei],Yn[ei],Pn*64)}let Bn=0;for(let Pn=0;Pn<Qe;++Pn){const ei=q[N.idx[Pn]].type;for(let io=8*qt;io<8*qt+Qn;++io){Bn=ri[Pn][io];for(let Vp=0;Vp<st;++Vp){const pa=Vp*64+(io&7)*8;Be.setUint16(Bn+0*2*ei,Yn[Pn][pa+0],!0),Be.setUint16(Bn+1*2*ei,Yn[Pn][pa+1],!0),Be.setUint16(Bn+2*2*ei,Yn[Pn][pa+2],!0),Be.setUint16(Bn+3*2*ei,Yn[Pn][pa+3],!0),Be.setUint16(Bn+4*2*ei,Yn[Pn][pa+4],!0),Be.setUint16(Bn+5*2*ei,Yn[Pn][pa+5],!0),Be.setUint16(Bn+6*2*ei,Yn[Pn][pa+6],!0),Be.setUint16(Bn+7*2*ei,Yn[Pn][pa+7],!0),Bn+=8*2*ei}}if(st!=bt)for(let io=8*qt;io<8*qt+Qn;++io){const Vp=ri[Pn][io]+8*st*2*ei,pa=st*64+(io&7)*8;for(let d0=0;d0<Os;++d0)Be.setUint16(Vp+d0*2*ei,Yn[Pn][pa+d0],!0)}}}const Zn=new Uint16Array(nt);Be=new DataView(Se.buffer);for(let qt=0;qt<Qe;++qt){q[N.idx[qt]].decoded=!0;const Qn=q[N.idx[qt]].type;if(q[qt].type==2)for(let Os=0;Os<Xe;++Os){const Bn=ri[qt][Os];for(let Pn=0;Pn<nt;++Pn)Zn[Pn]=Be.getUint16(Bn+Pn*2*Qn,!0);for(let Pn=0;Pn<nt;++Pn)Be.setFloat32(Bn+Pn*2*Qn,Oe(Zn[Pn]),!0)}}}function me(N,W,q){let ee,Me=1;for(;Me<64;)ee=W[N.value],ee==65280?Me=64:ee>>8==255?Me+=ee&255:(q[Me]=ee,Me++),N.value++}function be(N,W){W[0]=Oe(N[0]),W[1]=Oe(N[1]),W[2]=Oe(N[5]),W[3]=Oe(N[6]),W[4]=Oe(N[14]),W[5]=Oe(N[15]),W[6]=Oe(N[27]),W[7]=Oe(N[28]),W[8]=Oe(N[2]),W[9]=Oe(N[4]),W[10]=Oe(N[7]),W[11]=Oe(N[13]),W[12]=Oe(N[16]),W[13]=Oe(N[26]),W[14]=Oe(N[29]),W[15]=Oe(N[42]),W[16]=Oe(N[3]),W[17]=Oe(N[8]),W[18]=Oe(N[12]),W[19]=Oe(N[17]),W[20]=Oe(N[25]),W[21]=Oe(N[30]),W[22]=Oe(N[41]),W[23]=Oe(N[43]),W[24]=Oe(N[9]),W[25]=Oe(N[11]),W[26]=Oe(N[18]),W[27]=Oe(N[24]),W[28]=Oe(N[31]),W[29]=Oe(N[40]),W[30]=Oe(N[44]),W[31]=Oe(N[53]),W[32]=Oe(N[10]),W[33]=Oe(N[19]),W[34]=Oe(N[23]),W[35]=Oe(N[32]),W[36]=Oe(N[39]),W[37]=Oe(N[45]),W[38]=Oe(N[52]),W[39]=Oe(N[54]),W[40]=Oe(N[20]),W[41]=Oe(N[22]),W[42]=Oe(N[33]),W[43]=Oe(N[38]),W[44]=Oe(N[46]),W[45]=Oe(N[51]),W[46]=Oe(N[55]),W[47]=Oe(N[60]),W[48]=Oe(N[21]),W[49]=Oe(N[34]),W[50]=Oe(N[37]),W[51]=Oe(N[47]),W[52]=Oe(N[50]),W[53]=Oe(N[56]),W[54]=Oe(N[59]),W[55]=Oe(N[61]),W[56]=Oe(N[35]),W[57]=Oe(N[36]),W[58]=Oe(N[48]),W[59]=Oe(N[49]),W[60]=Oe(N[57]),W[61]=Oe(N[58]),W[62]=Oe(N[62]),W[63]=Oe(N[63])}function Pe(N){const W=.5*Math.cos(.7853975),q=.5*Math.cos(3.14159/16),ee=.5*Math.cos(3.14159/8),Me=.5*Math.cos(3*3.14159/16),Se=.5*Math.cos(5*3.14159/16),Be=.5*Math.cos(3*3.14159/8),nt=.5*Math.cos(7*3.14159/16),Xe=new Array(4),Qe=new Array(4),st=new Array(4),bt=new Array(4);for(let Et=0;Et<8;++Et){const Pt=Et*8;Xe[0]=ee*N[Pt+2],Xe[1]=Be*N[Pt+2],Xe[2]=ee*N[Pt+6],Xe[3]=Be*N[Pt+6],Qe[0]=q*N[Pt+1]+Me*N[Pt+3]+Se*N[Pt+5]+nt*N[Pt+7],Qe[1]=Me*N[Pt+1]-nt*N[Pt+3]-q*N[Pt+5]-Se*N[Pt+7],Qe[2]=Se*N[Pt+1]-q*N[Pt+3]+nt*N[Pt+5]+Me*N[Pt+7],Qe[3]=nt*N[Pt+1]-Se*N[Pt+3]+Me*N[Pt+5]-q*N[Pt+7],st[0]=W*(N[Pt+0]+N[Pt+4]),st[3]=W*(N[Pt+0]-N[Pt+4]),st[1]=Xe[0]+Xe[3],st[2]=Xe[1]-Xe[2],bt[0]=st[0]+st[1],bt[1]=st[3]+st[2],bt[2]=st[3]-st[2],bt[3]=st[0]-st[1],N[Pt+0]=bt[0]+Qe[0],N[Pt+1]=bt[1]+Qe[1],N[Pt+2]=bt[2]+Qe[2],N[Pt+3]=bt[3]+Qe[3],N[Pt+4]=bt[3]-Qe[3],N[Pt+5]=bt[2]-Qe[2],N[Pt+6]=bt[1]-Qe[1],N[Pt+7]=bt[0]-Qe[0]}for(let Et=0;Et<8;++Et)Xe[0]=ee*N[16+Et],Xe[1]=Be*N[16+Et],Xe[2]=ee*N[48+Et],Xe[3]=Be*N[48+Et],Qe[0]=q*N[8+Et]+Me*N[24+Et]+Se*N[40+Et]+nt*N[56+Et],Qe[1]=Me*N[8+Et]-nt*N[24+Et]-q*N[40+Et]-Se*N[56+Et],Qe[2]=Se*N[8+Et]-q*N[24+Et]+nt*N[40+Et]+Me*N[56+Et],Qe[3]=nt*N[8+Et]-Se*N[24+Et]+Me*N[40+Et]-q*N[56+Et],st[0]=W*(N[Et]+N[32+Et]),st[3]=W*(N[Et]-N[32+Et]),st[1]=Xe[0]+Xe[3],st[2]=Xe[1]-Xe[2],bt[0]=st[0]+st[1],bt[1]=st[3]+st[2],bt[2]=st[3]-st[2],bt[3]=st[0]-st[1],N[0+Et]=bt[0]+Qe[0],N[8+Et]=bt[1]+Qe[1],N[16+Et]=bt[2]+Qe[2],N[24+Et]=bt[3]+Qe[3],N[32+Et]=bt[3]-Qe[3],N[40+Et]=bt[2]-Qe[2],N[48+Et]=bt[1]-Qe[1],N[56+Et]=bt[0]-Qe[0]}function Z(N){for(let W=0;W<64;++W){const q=N[0][W],ee=N[1][W],Me=N[2][W];N[0][W]=q+1.5747*Me,N[1][W]=q-.1873*ee-.4682*Me,N[2][W]=q+1.8556*ee}}function $(N,W,q){for(let ee=0;ee<64;++ee)W[q+ee]=fd.toHalfFloat(de(N[ee]))}function de(N){return N<=1?Math.sign(N)*Math.pow(Math.abs(N),2.2):Math.sign(N)*Math.pow(M,Math.abs(N)-1)}function Ae(N){return new DataView(N.array.buffer,N.offset.value,N.size)}function De(N){const W=N.viewer.buffer.slice(N.offset.value,N.offset.value+N.size),q=new Uint8Array(ve(W)),ee=new Uint8Array(q.length);return j(q),ie(q,ee),new DataView(ee.buffer)}function fe(N){const W=N.array.slice(N.offset.value,N.offset.value+N.size),q=Yy(W),ee=new Uint8Array(q.length);return j(q),ie(q,ee),new DataView(ee.buffer)}function Ge(N){const W=N.viewer,q={value:N.offset.value},ee=new Uint16Array(N.columns*N.lines*(N.inputChannels.length*N.type)),Me=new Uint8Array(8192);let Se=0;const Be=new Array(N.inputChannels.length);for(let It=0,lt=N.inputChannels.length;It<lt;It++)Be[It]={},Be[It].start=Se,Be[It].end=Be[It].start,Be[It].nx=N.columns,Be[It].ny=N.lines,Be[It].size=N.type,Se+=Be[It].nx*Be[It].ny*Be[It].size;const nt=et(W,q),Xe=et(W,q);if(Xe>=8192)throw new Error("Something is wrong with PIZ_COMPRESSION BITMAP_SIZE");if(nt<=Xe)for(let It=0;It<Xe-nt+1;It++)Me[It+nt]=Ke(W,q);const Qe=new Uint16Array(65536),st=E(Me,Qe),bt=oe(W,q);we(N.array,W,q,bt,ee,Se);for(let It=0;It<N.inputChannels.length;++It){const lt=Be[It];for(let Lt=0;Lt<Be[It].size;++Lt)Te(ee,lt.start+Lt,lt.nx,lt.size,lt.ny,lt.nx*lt.size,st)}K(Qe,ee,Se);let Et=0;const Pt=new Uint8Array(ee.buffer.byteLength);for(let It=0;It<N.lines;It++)for(let lt=0;lt<N.inputChannels.length;lt++){const Lt=Be[lt],Nt=Lt.nx*Lt.size,hn=new Uint8Array(ee.buffer,Lt.end*2,Nt*2);Pt.set(hn,Et),Et+=Nt*2,Lt.end+=Nt}return new DataView(Pt.buffer)}function We(N){const W=N.array.slice(N.offset.value,N.offset.value+N.size),q=Yy(W),ee=N.inputChannels.length*N.lines*N.columns*N.totalBytes,Me=new ArrayBuffer(ee),Se=new DataView(Me);let Be=0,nt=0;const Xe=new Array(4);for(let Qe=0;Qe<N.lines;Qe++)for(let st=0;st<N.inputChannels.length;st++){let bt=0;switch(N.inputChannels[st].pixelType){case 1:Xe[0]=Be,Xe[1]=Xe[0]+N.columns,Be=Xe[1]+N.columns;for(let Pt=0;Pt<N.columns;++Pt){const It=q[Xe[0]++]<<8|q[Xe[1]++];bt+=It,Se.setUint16(nt,bt,!0),nt+=2}break;case 2:Xe[0]=Be,Xe[1]=Xe[0]+N.columns,Xe[2]=Xe[1]+N.columns,Be=Xe[2]+N.columns;for(let Pt=0;Pt<N.columns;++Pt){const It=q[Xe[0]++]<<24|q[Xe[1]++]<<16|q[Xe[2]++]<<8;bt+=It,Se.setUint32(nt,bt,!0),nt+=4}break}}return Se}function je(N){const W=N.viewer,q={value:N.offset.value},ee=new Uint8Array(N.columns*N.lines*(N.inputChannels.length*N.type*2)),Me={version:ft(W,q),unknownUncompressedSize:ft(W,q),unknownCompressedSize:ft(W,q),acCompressedSize:ft(W,q),dcCompressedSize:ft(W,q),rleCompressedSize:ft(W,q),rleUncompressedSize:ft(W,q),rleRawSize:ft(W,q),totalAcUncompressedCount:ft(W,q),totalDcUncompressedCount:ft(W,q),acCompression:ft(W,q)};if(Me.version<2)throw new Error("EXRLoader.parse: "+ue.compression+" version "+Me.version+" is unsupported");const Se=new Array;let Be=et(W,q)-2;for(;Be>0;){const lt=at(W.buffer,q),Lt=Ke(W,q),Nt=Lt>>2&3,hn=(Lt>>4)-1,Yn=new Int8Array([hn])[0],ri=Ke(W,q);Se.push({name:lt,index:Yn,type:ri,compression:Nt}),Be-=lt.length+3}const nt=ue.channels,Xe=new Array(N.inputChannels.length);for(let lt=0;lt<N.inputChannels.length;++lt){const Lt=Xe[lt]={},Nt=nt[lt];Lt.name=Nt.name,Lt.compression=0,Lt.decoded=!1,Lt.type=Nt.pixelType,Lt.pLinear=Nt.pLinear,Lt.width=N.columns,Lt.height=N.lines}const Qe={idx:new Array(3)};for(let lt=0;lt<N.inputChannels.length;++lt){const Lt=Xe[lt];for(let Nt=0;Nt<Se.length;++Nt){const hn=Se[Nt];Lt.name==hn.name&&(Lt.compression=hn.compression,hn.index>=0&&(Qe.idx[hn.index]=lt),Lt.offset=lt)}}let st,bt,Et;if(Me.acCompressedSize>0)switch(Me.acCompression){case 0:st=new Uint16Array(Me.totalAcUncompressedCount),we(N.array,W,q,Me.acCompressedSize,st,Me.totalAcUncompressedCount);break;case 1:const lt=N.array.slice(q.value,q.value+Me.totalAcUncompressedCount),Lt=Yy(lt);st=new Uint16Array(Lt.buffer),q.value+=Me.totalAcUncompressedCount;break}if(Me.dcCompressedSize>0){const lt={array:N.array,offset:q,size:Me.dcCompressedSize};bt=new Uint16Array(fe(lt).buffer),q.value+=Me.dcCompressedSize}if(Me.rleRawSize>0){const lt=N.array.slice(q.value,q.value+Me.rleCompressedSize),Lt=Yy(lt);Et=ve(Lt.buffer),q.value+=Me.rleCompressedSize}let Pt=0;const It=new Array(Xe.length);for(let lt=0;lt<It.length;++lt)It[lt]=new Array;for(let lt=0;lt<N.lines;++lt)for(let Lt=0;Lt<Xe.length;++Lt)It[Lt].push(Pt),Pt+=Xe[Lt].width*N.type*2;ye(Qe,It,Xe,st,bt,ee);for(let lt=0;lt<Xe.length;++lt){const Lt=Xe[lt];if(!Lt.decoded)switch(Lt.compression){case 2:let Nt=0,hn=0;for(let Yn=0;Yn<N.lines;++Yn){let ri=It[lt][Nt];for(let Zn=0;Zn<Lt.width;++Zn){for(let qt=0;qt<2*Lt.type;++qt)ee[ri++]=Et[hn+qt*Lt.width*Lt.height];hn++}Nt++}break;case 1:default:throw new Error("EXRLoader.parse: unsupported channel compression")}}return new DataView(ee.buffer)}function at(N,W){const q=new Uint8Array(N);let ee=0;for(;q[W.value+ee]!=0;)ee+=1;const Me=new TextDecoder().decode(q.slice(W.value,W.value+ee));return W.value=W.value+ee+1,Me}function Ue(N,W,q){const ee=new TextDecoder().decode(new Uint8Array(N).slice(W.value,W.value+q));return W.value=W.value+q,ee}function qe(N,W){const q=Ie(N,W),ee=oe(N,W);return[q,ee]}function Fe(N,W){const q=oe(N,W),ee=oe(N,W);return[q,ee]}function Ie(N,W){const q=N.getInt32(W.value,!0);return W.value=W.value+4,q}function oe(N,W){const q=N.getUint32(W.value,!0);return W.value=W.value+4,q}function Le(N,W){const q=N[W.value];return W.value=W.value+1,q}function Ke(N,W){const q=N.getUint8(W.value);return W.value=W.value+1,q}const ft=function(N,W){let q;return"getBigInt64"in DataView.prototype?q=Number(N.getBigInt64(W.value,!0)):q=N.getUint32(W.value+4,!0)+Number(N.getUint32(W.value,!0)<<32),W.value+=8,q};function Q(N,W){const q=N.getFloat32(W.value,!0);return W.value+=4,q}function $e(N,W){return fd.toHalfFloat(Q(N,W))}function Oe(N){const W=(N&31744)>>10,q=N&1023;return(N>>15?-1:1)*(W?W===31?q?NaN:1/0:Math.pow(2,W-15)*(1+q/1024):6103515625e-14*(q/1024))}function et(N,W){const q=N.getUint16(W.value,!0);return W.value+=2,q}function ht(N,W){return Oe(et(N,W))}function At(N,W,q,ee){const Me=q.value,Se=[];for(;q.value<Me+ee-1;){const Be=at(W,q),nt=Ie(N,q),Xe=Ke(N,q);q.value+=3;const Qe=Ie(N,q),st=Ie(N,q);Se.push({name:Be,pixelType:nt,pLinear:Xe,xSampling:Qe,ySampling:st})}return q.value+=1,Se}function Ot(N,W){const q=Q(N,W),ee=Q(N,W),Me=Q(N,W),Se=Q(N,W),Be=Q(N,W),nt=Q(N,W),Xe=Q(N,W),Qe=Q(N,W);return{redX:q,redY:ee,greenX:Me,greenY:Se,blueX:Be,blueY:nt,whiteX:Xe,whiteY:Qe}}function pn(N,W){const q=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],ee=Ke(N,W);return q[ee]}function wi(N,W){const q=Ie(N,W),ee=Ie(N,W),Me=Ie(N,W),Se=Ie(N,W);return{xMin:q,yMin:ee,xMax:Me,yMax:Se}}function _n(N,W){const q=["INCREASING_Y","DECREASING_Y","RANDOM_Y"],ee=Ke(N,W);return q[ee]}function Cs(N,W){const q=["ENVMAP_LATLONG","ENVMAP_CUBE"],ee=Ke(N,W);return q[ee]}function $i(N,W){const q=["ONE_LEVEL","MIPMAP_LEVELS","RIPMAP_LEVELS"],ee=["ROUND_DOWN","ROUND_UP"],Me=oe(N,W),Se=oe(N,W),Be=Ke(N,W);return{xSize:Me,ySize:Se,levelMode:q[Be&15],roundingMode:ee[Be>>4]}}function Za(N,W){const q=Q(N,W),ee=Q(N,W);return[q,ee]}function Or(N,W){const q=Q(N,W),ee=Q(N,W),Me=Q(N,W);return[q,ee,Me]}function no(N,W,q,ee,Me){if(ee==="string"||ee==="stringvector"||ee==="iccProfile")return Ue(W,q,Me);if(ee==="chlist")return At(N,W,q,Me);if(ee==="chromaticities")return Ot(N,q);if(ee==="compression")return pn(N,q);if(ee==="box2i")return wi(N,q);if(ee==="envmap")return Cs(N,q);if(ee==="tiledesc")return $i(N,q);if(ee==="lineOrder")return _n(N,q);if(ee==="float")return Q(N,q);if(ee==="v2f")return Za(N,q);if(ee==="v3f")return Or(N,q);if(ee==="int")return Ie(N,q);if(ee==="rational")return qe(N,q);if(ee==="timecode")return Fe(N,q);if(ee==="preview")return q.value+=Me,"skipped";q.value+=Me}function Ja(N,W){const q=Math.log2(N);return W=="ROUND_DOWN"?Math.floor(q):Math.ceil(q)}function Ql(N,W,q){let ee=0;switch(N.levelMode){case"ONE_LEVEL":ee=1;break;case"MIPMAP_LEVELS":ee=Ja(Math.max(W,q),N.roundingMode)+1;break;case"RIPMAP_LEVELS":throw new Error("THREE.EXRLoader: RIPMAP_LEVELS tiles currently unsupported.")}return ee}function zo(N,W,q,ee){const Me=new Array(N);for(let Se=0;Se<N;Se++){const Be=1<<Se;let nt=W/Be|0;ee=="ROUND_UP"&&nt*Be<W&&(nt+=1);const Xe=Math.max(nt,1);Me[Se]=(Xe+q-1)/q|0}return Me}function ec(){const N=this,W=N.offset,q={value:0};for(let ee=0;ee<N.tileCount;ee++){const Me=Ie(N.viewer,W),Se=Ie(N.viewer,W);W.value+=8,N.size=oe(N.viewer,W);const Be=Me*N.blockWidth,nt=Se*N.blockHeight;N.columns=Be+N.blockWidth>N.width?N.width-Be:N.blockWidth,N.lines=nt+N.blockHeight>N.height?N.height-nt:N.blockHeight;const Xe=N.columns*N.totalBytes,st=N.size<N.lines*Xe?N.uncompress(N):Ae(N);W.value+=N.size;for(let bt=0;bt<N.lines;bt++){const Et=bt*N.columns*N.totalBytes;for(let Pt=0;Pt<N.inputChannels.length;Pt++){const It=ue.channels[Pt].name,lt=N.channelByteOffsets[It]*N.columns,Lt=N.decodeChannels[It];if(Lt===void 0)continue;q.value=Et+lt;const Nt=(N.height-(1+nt+bt))*N.outLineWidth;for(let hn=0;hn<N.columns;hn++){const Yn=Nt+(hn+Be)*N.outputChannels+Lt;N.byteArray[Yn]=N.getter(st,q)}}}}}function fa(){const N=this,W=N.offset,q={value:0};for(let ee=0;ee<N.height/N.blockHeight;ee++){const Me=Ie(N.viewer,W)-ue.dataWindow.yMin;N.size=oe(N.viewer,W),N.lines=Me+N.blockHeight>N.height?N.height-Me:N.blockHeight;const Se=N.columns*N.totalBytes,nt=N.size<N.lines*Se?N.uncompress(N):Ae(N);W.value+=N.size;for(let Xe=0;Xe<N.blockHeight;Xe++){const Qe=ee*N.blockHeight,st=Xe+N.scanOrder(Qe);if(st>=N.height)continue;const bt=Xe*Se,Et=(N.height-1-st)*N.outLineWidth;for(let Pt=0;Pt<N.inputChannels.length;Pt++){const It=ue.channels[Pt].name,lt=N.channelByteOffsets[It]*N.columns,Lt=N.decodeChannels[It];if(Lt!==void 0){q.value=bt+lt;for(let Nt=0;Nt<N.columns;Nt++){const hn=Et+Nt*N.outputChannels+Lt;N.byteArray[hn]=N.getter(nt,q)}}}}}}function it(N,W,q){const ee={};if(N.getUint32(0,!0)!=20000630)throw new Error("THREE.EXRLoader: Provided file doesn't appear to be in OpenEXR format.");ee.version=N.getUint8(4);const Me=N.getUint8(5);ee.spec={singleTile:!!(Me&2),longName:!!(Me&4),deepFormat:!!(Me&8),multiPart:!!(Me&16)},q.value=8;let Se=!0;for(;Se;){const Be=at(W,q);if(Be==0)Se=!1;else{const nt=at(W,q),Xe=oe(N,q),Qe=no(N,W,q,nt,Xe);Qe===void 0?console.warn(`THREE.EXRLoader: Skipped unknown header attribute type '${nt}'.`):ee[Be]=Qe}}if(Me&-7)throw console.error("THREE.EXRHeader:",ee),new Error("THREE.EXRLoader: Provided file is currently unsupported.");return ee}function Mt(N,W,q,ee,Me){const Se={size:0,viewer:W,array:q,offset:ee,width:N.dataWindow.xMax-N.dataWindow.xMin+1,height:N.dataWindow.yMax-N.dataWindow.yMin+1,inputChannels:N.channels,channelByteOffsets:{},scanOrder:null,totalBytes:null,columns:null,lines:null,type:null,uncompress:null,getter:null,format:null,colorSpace:qn};switch(N.compression){case"NO_COMPRESSION":Se.blockHeight=1,Se.uncompress=Ae;break;case"RLE_COMPRESSION":Se.blockHeight=1,Se.uncompress=De;break;case"ZIPS_COMPRESSION":Se.blockHeight=1,Se.uncompress=fe;break;case"ZIP_COMPRESSION":Se.blockHeight=16,Se.uncompress=fe;break;case"PIZ_COMPRESSION":Se.blockHeight=32,Se.uncompress=Ge;break;case"PXR24_COMPRESSION":Se.blockHeight=16,Se.uncompress=We;break;case"DWAA_COMPRESSION":Se.blockHeight=32,Se.uncompress=je;break;case"DWAB_COMPRESSION":Se.blockHeight=256,Se.uncompress=je;break;default:throw new Error("EXRLoader.parse: "+N.compression+" is unsupported")}const Be={};for(const st of N.channels)switch(st.name){case"Y":case"R":case"G":case"B":case"A":Be[st.name]=!0,Se.type=st.pixelType}let nt=!1;if(Be.R&&Be.G&&Be.B)nt=!Be.A,Se.outputChannels=4,Se.decodeChannels={R:0,G:1,B:2,A:3};else if(Be.Y)Se.outputChannels=1,Se.decodeChannels={Y:0};else throw new Error("EXRLoader.parse: file contains unsupported data channels.");if(Se.type==1)switch(Me){case is:Se.getter=ht;break;case Ki:Se.getter=et;break}else if(Se.type==2)switch(Me){case is:Se.getter=Q;break;case Ki:Se.getter=$e}else throw new Error("EXRLoader.parse: unsupported pixelType "+Se.type+" for "+N.compression+".");Se.columns=Se.width;const Xe=Se.width*Se.height*Se.outputChannels;switch(Me){case is:Se.byteArray=new Float32Array(Xe),nt&&Se.byteArray.fill(1,0,Xe);break;case Ki:Se.byteArray=new Uint16Array(Xe),nt&&Se.byteArray.fill(15360,0,Xe);break;default:console.error("THREE.EXRLoader: unsupported type: ",Me);break}let Qe=0;for(const st of N.channels)Se.decodeChannels[st.name]!==void 0&&(Se.channelByteOffsets[st.name]=Qe),Qe+=st.pixelType*2;if(Se.totalBytes=Qe,Se.outLineWidth=Se.width*Se.outputChannels,N.lineOrder==="INCREASING_Y"?Se.scanOrder=st=>st:Se.scanOrder=st=>Se.height-1-st,Se.outputChannels==4?(Se.format=Oi,Se.colorSpace=qn):(Se.format=qv,Se.colorSpace=Ea),N.spec.singleTile){Se.blockHeight=N.tiles.ySize,Se.blockWidth=N.tiles.xSize;const st=Ql(N.tiles,Se.width,Se.height),bt=zo(st,Se.width,N.tiles.xSize,N.tiles.roundingMode),Et=zo(st,Se.height,N.tiles.ySize,N.tiles.roundingMode);Se.tileCount=bt[0]*Et[0];for(let Pt=0;Pt<st;Pt++)for(let It=0;It<Et[Pt];It++)for(let lt=0;lt<bt[Pt];lt++)ft(W,ee);Se.decode=ec.bind(Se)}else{Se.blockWidth=Se.width;const st=Math.ceil(Se.height/Se.blockHeight);for(let bt=0;bt<st;bt++)ft(W,ee);Se.decode=fa.bind(Se)}return Se}const Sn={value:0},Kn=new DataView(e),er=new Uint8Array(e),ue=it(Kn,e,Sn),He=Mt(ue,Kn,er,Sn,this.type);return He.decode(),{header:ue,width:He.width,height:He.height,data:He.byteArray,format:He.format,colorSpace:He.colorSpace,type:this.type}}setDataType(e){return this.type=e,this}load(e,t,i,s){function r(o,a){o.colorSpace=a.colorSpace,o.minFilter=Rn,o.magFilter=Rn,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,r,i,s)}}class Dw extends ut{constructor(){const e=Dw.SkyShader,t=new Bi({name:e.name,uniforms:eh.clone(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,side:bs,depthWrite:!1});super(new Ci(1,1,1),t),this.isSky=!0}}Dw.SkyShader={name:"SkyShader",uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new G},up:{value:new G(0,1,0)}},vertexShader:`
		uniform vec3 sunPosition;
		uniform float rayleigh;
		uniform float turbidity;
		uniform float mieCoefficient;
		uniform vec3 up;

		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		// constants for atmospheric scattering
		const float e = 2.71828182845904523536028747135266249775724709369995957;
		const float pi = 3.141592653589793238462643383279502884197169;

		// wavelength of used primaries, according to preetham
		const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
		// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
		// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
		const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

		// mie stuff
		// K coefficient for the primaries
		const float v = 4.0;
		const vec3 K = vec3( 0.686, 0.678, 0.666 );
		// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
		const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

		// earth shadow hack
		// cutoffAngle = pi / 1.95;
		const float cutoffAngle = 1.6110731556870734;
		const float steepness = 1.5;
		const float EE = 1000.0;

		float sunIntensity( float zenithAngleCos ) {
			zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
			return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
		}

		vec3 totalMie( float T ) {
			float c = ( 0.2 * T ) * 10E-18;
			return 0.434 * c * MieConst;
		}

		void main() {

			vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
			vWorldPosition = worldPosition.xyz;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			gl_Position.z = gl_Position.w; // set z to camera.far

			vSunDirection = normalize( sunPosition );

			vSunE = sunIntensity( dot( vSunDirection, up ) );

			vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

			float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

			// extinction (absorbtion + out scattering)
			// rayleigh coefficients
			vBetaR = totalRayleigh * rayleighCoefficient;

			// mie coefficients
			vBetaM = totalMie( turbidity ) * mieCoefficient;

		}`,fragmentShader:`
		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		uniform float mieDirectionalG;
		uniform vec3 up;

		// constants for atmospheric scattering
		const float pi = 3.141592653589793238462643383279502884197169;

		const float n = 1.0003; // refractive index of air
		const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

		// optical length at zenith for molecules
		const float rayleighZenithLength = 8.4E3;
		const float mieZenithLength = 1.25E3;
		// 66 arc seconds -> degrees, and the cosine of that
		const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

		// 3.0 / ( 16.0 * pi )
		const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
		// 1.0 / ( 4.0 * pi )
		const float ONE_OVER_FOURPI = 0.07957747154594767;

		float rayleighPhase( float cosTheta ) {
			return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
		}

		float hgPhase( float cosTheta, float g ) {
			float g2 = pow( g, 2.0 );
			float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
			return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
		}

		void main() {

			vec3 direction = normalize( vWorldPosition - cameraPosition );

			// optical length
			// cutoff angle at 90 to avoid singularity in next formula.
			float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
			float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
			float sR = rayleighZenithLength * inverse;
			float sM = mieZenithLength * inverse;

			// combined extinction factor
			vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

			// in scattering
			float cosTheta = dot( direction, vSunDirection );

			float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
			vec3 betaRTheta = vBetaR * rPhase;

			float mPhase = hgPhase( cosTheta, mieDirectionalG );
			vec3 betaMTheta = vBetaM * mPhase;

			vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
			Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

			// nightsky
			float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
			float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
			vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
			vec3 L0 = vec3( 0.1 ) * Fex;

			// composition + solar disc
			float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
			L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

			vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

			vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

			gl_FragColor = vec4( retColor, 1.0 );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>

		}`};class Lk extends mh{constructor(e=null){super();const t=new Ci;t.deleteAttribute("uv");const i=new Fl({side:bs}),s=new Fl,r=new r0(16777215,900,28,2);r.position.set(.418,16.199,.3),this.add(r);const o=new ut(t,i);o.position.set(-.757,13.219,.717),o.scale.set(31.713,28.305,28.591),this.add(o);const a=new ut(t,s);a.position.set(-10.906,2.009,1.846),a.rotation.set(0,-.195,0),a.scale.set(2.328,7.905,4.651),this.add(a);const l=new ut(t,s);l.position.set(-5.607,-.754,-.758),l.rotation.set(0,.994,0),l.scale.set(1.97,1.534,3.955),this.add(l);const c=new ut(t,s);c.position.set(6.167,.857,7.803),c.rotation.set(0,.561,0),c.scale.set(3.927,6.285,3.687),this.add(c);const u=new ut(t,s);u.position.set(-2.017,.018,6.124),u.rotation.set(0,.333,0),u.scale.set(2.002,4.566,2.064),this.add(u);const d=new ut(t,s);d.position.set(2.291,-.756,-2.621),d.rotation.set(0,-.286,0),d.scale.set(1.546,1.552,1.496),this.add(d);const h=new ut(t,s);h.position.set(-2.193,-.369,-5.547),h.rotation.set(0,.516,0),h.scale.set(3.875,3.487,2.986),this.add(h);const f=new ut(t,sf(50));f.position.set(-16.116,14.37,8.208),f.scale.set(.1,2.428,2.739),this.add(f);const m=new ut(t,sf(50));m.position.set(-16.109,18.021,-8.207),m.scale.set(.1,2.425,2.751),this.add(m);const p=new ut(t,sf(17));p.position.set(14.904,12.198,-1.832),p.scale.set(.15,4.265,6.331),this.add(p);const y=new ut(t,sf(43));y.position.set(-.462,8.89,14.52),y.scale.set(4.38,5.441,.088),this.add(y);const v=new ut(t,sf(20));v.position.set(3.235,11.486,-12.541),v.scale.set(2.5,2,.1),this.add(v);const _=new ut(t,sf(100));_.position.set(0,20,0),_.scale.set(1,.1,1),this.add(_)}dispose(){const e=new Set;this.traverse(t=>{t.isMesh&&(e.add(t.geometry),e.add(t.material))});for(const t of e)t.dispose()}}function sf(n){const e=new $n;return e.color.setScalar(n),e}class lH{}J(lH,"component");class IAe extends a0{constructor(){super(),this.minZoom=3,this.maxZoom=18}datumsToQuadtree(e,t,i){const s=Math.pow(2,e),r=(i+180)/360*s,o=t/180*Math.PI,a=(1-Math.log(Math.tan(o)+1/Math.cos(o))/Math.PI)/2*s;return{x:r,y:a}}quadKey(e,t,i){let s=fi.quadtreeToDatums(e,t,i);console.log(s);let r=$5.WGS84ToGCJ02(s.longitude,s.latitude);console.log(r);let o=this.datumsToQuadtree(e,r.lat,r.lng);return console.log(o),`x=${o.x}&y=${o.y}&z=${e}`}fetchTile(e,t,i){return new Promise((s,r)=>{const o=document.createElement("img");o.onload=function(){s(o)},o.onerror=function(){r()},o.crossOrigin="Anonymous",o.src=`https://webst01.is.autonavi.com/appmaptile?style=6&x=${t}&y=${i}&z=${e}`})}}class RAe{constructor(e){J(this,"_view3D");J(this,"maskBuffer");J(this,"edgeBuffer");J(this,"size");J(this,"oldClearColor");J(this,"scene");J(this,"camera");J(this,"quad");J(this,"maskMaterial");J(this,"edgeMaterial");J(this,"copyMaterial");J(this,"_selectElements");J(this,"_selectObjects");this._view3D=e,this._selectElements=new Set,this._selectObjects=new Set,this.init()}init(){this.size||(this.size=new tt),this._view3D.renderer.getDrawingBufferSize(this.size),this.scene===void 0&&(this.scene=new mh);let e=this.size.x,t=this.size.y;this.camera===void 0&&(this.camera=new eo(-e/2,e/2,t/2,-t/2,0,1),this.camera.position.z=1,this.camera.lookAt(new G)),this.quad===void 0&&(this.quad=new ut(new ua(e,t),null),this.quad.frustumCulled=!1,this.scene.add(this.quad));let i={minFilter:Rn,magFilter:Rn,format:Oi,antialias:!0};this.maskBuffer===void 0&&(this.maskBuffer=new Ti(e,t,i),this.maskBuffer.texture.generateMipmaps=!1),this.edgeBuffer===void 0&&(this.edgeBuffer=new Ti(e,t,i),this.edgeBuffer.texture.generateMipmaps=!1),this.maskMaterial==null&&(this.maskMaterial=new $n({color:"#00FFFF",depthTest:!1})),this.edgeMaterial==null&&(this.edgeMaterial=new Bi({vertexShader:`
                varying vec2 vUv;
                void main() {
                    vUv = uv;
                    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
                }
                `,fragmentShader:`
                uniform sampler2D maskTexture;
                uniform vec2 texSize;
                uniform vec3 color;
                uniform float thickness;
                varying vec2 vUv;

                void main() {
                    vec2 invSize = thickness / texSize;
                    vec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);
                    vec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);
                    vec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);
                    vec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);
                    vec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);
                    float diff1 = (c1.r - c2.r)*0.5;
                    float diff2 = (c3.r - c4.r)*0.5;
                    float d = length(vec2(diff1, diff2));
                    gl_FragColor = d > 0.0 ? vec4(color, 1.0) : vec4(0.0, 0.0, 0.0, 0.0);
                }
                `,uniforms:{maskTexture:{value:this.maskBuffer.texture},texSize:{value:new tt(e,t)},color:{value:new gt(16761035)},thickness:{value:1.1}},depthTest:!1,transparent:!1})),this.copyMaterial===void 0&&(this.copyMaterial=new Bi({vertexShader:HM.vertexShader,fragmentShader:HM.fragmentShader,uniforms:{tDiffuse:{value:this.edgeBuffer.texture},resolution:{value:new tt(1/e,1/t)}},transparent:!0,depthTest:!1}))}selectElements(e){if(this._selectElements.clear(),e!=null)for(const t of e)this._selectElements.add(t)}selectObjects(e){if(this._selectObjects.clear(),e!=null)for(const t of e)this._selectObjects.add(t)}render(){if(this._selectElements.size+this._selectObjects.size==0)return;let e=this._view3D.scene,t=this._view3D.camera,i=this._view3D.renderer,s=this.scene,r=this.camera,o=e.overrideMaterial,a=e.background,l=i.autoClear;this.oldClearColor||(this.oldClearColor=new gt),i.getClearColor(this.oldClearColor);let c=i.getClearAlpha(),u=i.getRenderTarget();e.background=null,i.autoClear=!1,i.setRenderTarget(this.maskBuffer),i.setClearColor(16777215),i.setClearAlpha(1),i.clear(),this.hideNonSelectedElements(),this.hideNonSelectedObjects(),this._view3D.obj.isScene=!0,this._view3D.obj.overrideMaterial=this.maskMaterial,i.render(this._view3D.obj,t),this._view3D.obj.isScene=!1,this._view3D.obj.overrideMaterial=null,this.showNonSelectedElements(),this.showNonSelectedObjects(),this.quad.material=this.edgeMaterial,e.overrideMaterial=null,i.setRenderTarget(this.edgeBuffer),i.clear(),i.render(s,r),this.quad.material=this.copyMaterial,i.setRenderTarget(null),i.render(s,r),e.overrideMaterial=o,e.background=a,i.autoClear=l,i.setClearColor(this.oldClearColor),i.setClearAlpha(c),i.setRenderTarget(u)}hideNonSelectedElements(){const e=this._selectElements;if(e.size==0)return;const t=new Set;for(const i of e)i.meshDatas.forEach(s=>{t.add(s.mesh)});this._view3D.obj.traverse(i=>{i instanceof ut&&!t.has(i)&&(i.oldVisible=i.visible,i.visible=!1)});for(const i of this._view3D.mapModels.values()){let s=i.allElementData;for(const r of s.values())if(!e.has(r))for(const o of r.meshDatas)t.has(o.mesh)&&(o.oldVisible=o.show,o.show=!1)}}showNonSelectedElements(){const e=this._selectElements;if(e.size==0)return;const t=new Set;for(const i of e)i.meshDatas.forEach(s=>{t.add(s.mesh)});this._view3D.obj.traverse(i=>{i instanceof ut&&!t.has(i)&&(i.visible=i.oldVisible)});for(const i of this._view3D.mapModels.values()){const s=i.allElementData;for(const r of s.values())if(!e.has(r))for(const o of r.meshDatas)t.has(o.mesh)&&(o.show=o.oldVisible)}}hideNonSelectedObjects(){const e=this._selectObjects;e.size!=0&&this._view3D.obj.traverse(t=>{t instanceof ut&&!e.has(t)&&(t.oldVisible2=t.visible,t.visible=!1)})}showNonSelectedObjects(){const e=this._selectObjects;e.size!=0&&this._view3D.obj.traverse(t=>{t instanceof ut&&!e.has(t)&&(t.visible=t.oldVisible2,delete t.oldVisible2)})}get edgeThickness(){var e;return(e=this.edgeMaterial)==null?void 0:e.uniforms.thickness.value}set edgeThickness(e){this.edgeMaterial.uniforms.thickness.value=e}get edgeColor(){var e;return(e=this.edgeMaterial)==null?void 0:e.uniforms.color.value}set edgeColor(e){var t;(t=this.edgeMaterial)==null||t.uniforms.color.value.set(e)}}class PAe extends Hp{constructor(t,i,s,r=1,o=.5,a=0){super();J(this,"resolution");J(this,"normalRenderTarget");J(this,"idRenderTarget");J(this,"uniforms");J(this,"material");J(this,"camera");J(this,"scene");J(this,"quad");J(this,"normalMaterial");J(this,"_idMaterial");J(this,"mainScene");J(this,"renderCamera");this.mainScene=i,this.renderCamera=s,this.resolution=new tt(t.x,t.y),this.normalRenderTarget=new Ti(this.resolution.x,this.resolution.y,{minFilter:ii,magFilter:ii,format:Oi}),this.idRenderTarget=new Ti(this.resolution.x,this.resolution.y,{minFilter:ii,magFilter:ii,format:Oi}),this.uniforms={tDiffuse:{value:null},tNormal:{value:this.normalRenderTarget.texture},tId:{value:this.idRenderTarget.texture},resolution:{value:this.resolution},edgeStrength:{value:r},edgeThickness:{value:o},edgeColor:{value:new gt(a)}},this.material=new Bi({uniforms:this.uniforms,vertexShader:`
                varying vec2 vUv;
                void main() {
                    vUv = uv;
                    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
                }
            `,fragmentShader:`
                uniform sampler2D tDiffuse;
                uniform sampler2D tNormal;
                uniform sampler2D tId;
                uniform vec2 resolution;
                uniform float edgeStrength;
                uniform float edgeThickness;
                uniform vec3 edgeColor;
                
                varying vec2 vUv;

                void main() {
                    vec4 color = texture2D(tDiffuse, vUv);
                    vec3 normal = texture2D(tNormal, vUv).rgb;
                    vec3 id = texture2D(tId, vUv).rgb;

                    vec2 texel = vec2(1.0 / resolution.x, 1.0 / resolution.y);
                    float edgeN = 0.0;
                    float edgeId = 0.0;
                    
                    for (int i = -1; i <= 1; i++) {
                        for (int j = -1; j <= 1; j++) {
                            if (i == 0 && j == 0) continue;
                            vec2 offset = vec2(float(i), float(j)) * texel * edgeThickness;
                            vec3 sampleNormal = texture2D(tNormal, vUv + offset).rgb;
                            vec3 sampleId = texture2D(tId, vUv + offset).rgb;
                            edgeN += distance(normal, sampleNormal);
                            edgeId += distance(id, sampleId);
                        }
                    }

                    edgeN = edgeN / 8.0;
                    edgeId = edgeId / 8.0;

                    float idThreshold = 0.001;
                    edgeId = edgeId > idThreshold ? 0.3 : 0.0;

                    float edge = max(edgeN, edgeId);

                    edge = edgeId > 0.0 ? edgeId : clamp((edge - 0.03) * edgeStrength, 0.0, 1.0);

                    float finalEdge = min(edge, 0.3);

                    gl_FragColor = mix(color, vec4(edgeColor, 1.0), finalEdge);
                }
            `}),this.camera=new eo(-1,1,1,-1,0,1),this.scene=new mh,this.quad=new ut(new ua(2,2),this.material),this.scene.add(this.quad),this.normalMaterial=new V2}render(t,i,s,r,o){if(!this.mainScene||!this.renderCamera){console.warn("EdgesPass: mainScene or renderCamera not set");return}if(!this.enabled){this.renderToScreen?(t.setRenderTarget(null),t.render(this.mainScene,this.renderCamera)):(t.setRenderTarget(i),this.clear&&t.clear(),t.render(this.mainScene,this.renderCamera));return}this.mainScene.overrideMaterial=this.normalMaterial,t.setRenderTarget(this.normalRenderTarget),t.render(this.mainScene,this.renderCamera),this._idMaterial&&(this.mainScene.overrideMaterial=this._idMaterial,t.setRenderTarget(this.idRenderTarget),t.render(this.mainScene,this.renderCamera)),this.mainScene.overrideMaterial=null,this.uniforms.tDiffuse.value=s.texture,this.renderToScreen?(t.setRenderTarget(null),t.render(this.scene,this.camera)):(t.setRenderTarget(i),this.clear&&t.clear(),t.render(this.scene,this.camera))}setSize(t,i){this.resolution.set(t,i),this.uniforms.resolution.value=this.resolution,this.normalRenderTarget.setSize(t,i),this.idRenderTarget.setSize(t,i)}setEdgeStrength(t){this.uniforms.edgeStrength.value=t}setEdgeThickness(t){this.uniforms.edgeThickness.value=t}setEdgeColor(t){this.uniforms.edgeColor.value.setHex(t)}get idMaterial(){return this._idMaterial}set idMaterial(t){this._idMaterial=t}}class LAe{constructor(e){J(this,"scene");J(this,"_perspectiveCamera");J(this,"_orthographicCamera");J(this,"_curCamera");J(this,"renderer");J(this,"css2dRenderer");J(this,"controls");J(this,"raycaster");J(this,"obj");J(this,"goldenContainer");J(this,"viewCube");J(this,"stats");J(this,"section");J(this,"renderEnabled",!0);J(this,"autoRender",!1);J(this,"pickingTexture");J(this,"onBeforeRender");J(this,"mapModels");J(this,"progressive",!1);J(this,"_backgroundColor",new gt(1644825));J(this,"_selectPass");J(this,"_interactionTimeout");J(this,"composer");J(this,"effectFXAA");J(this,"outlinePass");J(this,"edgesPass");J(this,"renderPass");J(this,"pmremGenerator");J(this,"envMap");J(this,"_orthographicWidth");J(this,"onWindowResize",()=>{if(!this.goldenContainer.clientWidth||!this.goldenContainer.clientHeight)return;let e=this.goldenContainer.clientWidth/this.goldenContainer.clientHeight;if(this._curCamera instanceof eo){const t=this._orthographicWidth==null?this.goldenContainer.clientWidth:this._orthographicWidth,i=t/e;this._curCamera.left=-t/2,this._curCamera.right=t/2,this._curCamera.top=i/2,this._curCamera.bottom=-i/2}if(this._curCamera instanceof Yi&&(this._curCamera.aspect=e),this._curCamera.updateProjectionMatrix(),this.renderer.setSize(this.goldenContainer.clientWidth,this.goldenContainer.clientHeight),this.composer){this.composer.setSize(this.goldenContainer.clientWidth,this.goldenContainer.clientHeight);let t=this.renderer.getPixelRatio();this.effectFXAA.uniforms.resolution.value.set(1/(this.goldenContainer.clientWidth*t),1/(this.goldenContainer.clientHeight*t)),this.edgesPass.setSize(this.goldenContainer.clientWidth,this.goldenContainer.clientHeight)}this.css2dRenderer&&this.css2dRenderer.setSize(this.goldenContainer.clientWidth,this.goldenContainer.clientHeight),this.viewCube.onWindowResize(),this.enableRender()});J(this,"ambientLight");J(this,"directionalLight");J(this,"alwaysRender",!1);J(this,"animate",()=>{var e;requestAnimationFrame(this.animate),this.alwaysRender?this.render():this.autoRender?this.controls.update()&&(this.render(),this.progressive&&this.render()):this.renderEnabled&&(this.render(),this.progressive&&this.render(),this.renderEnabled=!1),(e=this.stats)==null||e.update()});J(this,"homeTarget");J(this,"homePosition");J(this,"mesh");J(this,"_showEnvironment",!0);J(this,"_showBackground",!1);J(this,"_mapScene");J(this,"_showMap",!1);this.mapModels=new Map,this.goldenContainer=e,this.init(),this.raycaster=new T2e(this.goldenContainer)}get camera(){return this._curCamera}get selectPass(){return this._selectPass==null&&(this._selectPass=new RAe(this),this._selectPass.selectElements(null),this._selectPass.edgeColor.set(Hn.selColor)),this._selectPass}init(){this.initRenderer(),this.initGPURenderer(),this.initCss2dRenderer(),this.initScene(),this.initCamera(!1),this.initLight(),this.initControls(),this.initStats(),this.initBackground(),this.viewCube=new A2e(this.goldenContainer,this,Hn.selColor),eAe().listenTo(this.goldenContainer,()=>{this.onWindowResize()}),this.animate()}initScene(){this.scene=new mh,this.obj=new rn,this.obj.overrideMaterial=null,this.scene.add(this.obj)}setLatitudeAndLongitude(e=39.9072,t=116.3914){let i=fi.datumsToSpherical(e,t);this.flyTo(i.x,100,-i.y,i.x,0,-i.y)}initCamera(e){let t=this.goldenContainer.clientWidth/this.goldenContainer.clientHeight;if(e){if(this._orthographicCamera==null){const i=this.goldenContainer.clientWidth,s=i/t;this._orthographicCamera=new eo(-i/2,i/2,s/2,-s/2,.1,1e4)}this._curCamera=this._orthographicCamera}else this._perspectiveCamera==null&&(this._perspectiveCamera=new Yi(45,1,.1,1e12),this._perspectiveCamera.aspect=t),this._curCamera=this._perspectiveCamera;this._curCamera.position.set(0,400,0),this.scene.add(this._curCamera)}initRenderer(){this.renderer=new k2({antialias:!0,alpha:!0,preserveDrawingBuffer:!0}),this.renderer.setSize(this.goldenContainer.clientWidth,this.goldenContainer.clientHeight),this.goldenContainer.appendChild(this.renderer.domElement),this.renderer.setClearColor(16777215),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.toneMapping=m2}initCss2dRenderer(){this.css2dRenderer||(this.css2dRenderer=new E2e,this.css2dRenderer.setSize(this.goldenContainer.clientWidth,this.goldenContainer.clientHeight),this.goldenContainer.appendChild(this.css2dRenderer.domElement),this.css2dRenderer.domElement.style.position="absolute",this.css2dRenderer.domElement.style.top="0px",this.css2dRenderer.domElement.style.left="0px",this.css2dRenderer.domElement.style.pointerEvents="none")}initGPURenderer(){this.pickingTexture=new Ti(1,1)}initLight(){this.ambientLight==null&&(this.ambientLight=new Pw(16777215,.3)),this._curCamera.add(this.ambientLight),this.directionalLight==null&&(this.directionalLight=new o0(16777215,.8*Math.PI),this.directionalLight.position.set(.5,0,.866)),this._curCamera.add(this.directionalLight)}initControls(){this.controls&&this.controls.dispose(),this.controls=new yo(this._curCamera,this.renderer.domElement),this.controls.mouseButtons.right=yo.ACTION.ROTATE,this.controls.mouseButtons.left=yo.ACTION.TRUCK,this.controls.dollySpeed=.5,this.controls.addEventListener("control",()=>{this.enableRender(),this.edgesPass&&(this.edgesPass.enabled=!1,clearTimeout(this._interactionTimeout))}),this.controls.addEventListener("controlend",()=>{this.edgesPass&&(clearTimeout(this._interactionTimeout),this._interactionTimeout=setTimeout(()=>{this.edgesPass.enabled=!0,this.enableRender()},200))})}initComposer(){if(this.composer==null){this.composer=new cAe(this.renderer),this.renderPass=new uAe(this.scene,this._curCamera),this.composer.addPass(this.renderPass);const e=new zM(dAe);e.uniforms.tDiffuse.value=-1,this.composer.addPass(e),this.outlinePass=new Uc(new tt(this.goldenContainer.clientWidth,this.goldenContainer.clientHeight),this.scene,this._curCamera),this.outlinePass.visibleEdgeColor.set("#eb7812"),this.outlinePass.hiddenEdgeColor.set("#eb7812"),this.outlinePass.edgeStrength=3,this.outlinePass.edgeThickness=1,this.outlinePass.pulsePeriod=0,this.outlinePass.edgeGlow=0,this.composer.addPass(this.outlinePass),this.effectFXAA=new zM(HM);let t=this.renderer.getPixelRatio();this.effectFXAA.uniforms.resolution.value.set(1/(this.goldenContainer.clientWidth*t),1/this.goldenContainer.clientHeight*t),this.composer.addPass(this.effectFXAA),this.edgesPass=new PAe(new tt(this.goldenContainer.clientWidth,this.goldenContainer.clientHeight),this.scene,this._curCamera),this.edgesPass.idMaterial=Hn.pickMaterial}}render(){var e,t,i;this.onBeforeRender&&this.onBeforeRender();for(const s of this.mapModels.values())s.tile&&s.tile.update();this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setViewport(0,0,this.goldenContainer.clientWidth,this.goldenContainer.clientHeight),this.composer&&this.progressive==!1?(this.renderPass.progressive=this.progressive,this.composer.render()):this.renderer.render(this.scene,this._curCamera,this.progressive),(e=this.css2dRenderer)==null||e.render(this.scene,this.camera),(t=this._selectPass)==null||t.render(),(i=this.viewCube)==null||i.render()}clearModel(){for(const e of this.mapModels.values())e.clear();this.mapModels.clear(),bo.ModelData.value=[],bo.SpaceTreeCheckIDs.value=[],bo.SpaceTreeExpandedIDs.value=[]}initStats(){this.stats=new hg,this.stats.showPanel(0),this.stats.dom.style.position="absolute",this.stats.dom.style.bottom="0px",this.stats.dom.style.right="0px",this.stats.dom.style.top=null,this.stats.dom.style.left=null,this.goldenContainer.appendChild(this.stats.dom)}moveTo(e,t,i){this.controls.moveTo(e,t,i),this.controls.polarAngle=Math.PI/4,this.controls.azimuthAngle=2*Math.PI,this.showPoint(e,t,i),this.controls.update()}setOrbitPoint(e,t,i){}setCameraByBox(e){let t=new G((e.max.x+e.min.x)/2,(e.max.y+e.min.y)/2,(e.max.z+e.min.z)/2);this.controls.fitToBox(e,!1,{cover:!1,paddingLeft:0,paddingRight:0,paddingBottom:0,paddingTop:0}),this.moveTo(t.x,t.y,t.z),this.enableRender(),this.homeTarget=this.controls.getTarget(),this.homePosition=this.controls.getPosition()}setCameraByBoxAndRotateTo(e,t=this.controls.azimuthAngle,i=this.controls.polarAngle,s=.1){let r=new G((e.max.x+e.min.x)/2,(e.max.y+e.min.y)/2,(e.max.z+e.min.z)/2);this.controls.enabled=!1,this.autoRender=!0;const o=[];e=e.clone();const a=new G;e.getSize(a);let l=Math.max(a.x,a.y,a.z);e=e.expandByScalar(l*s);let c=(this.controls.azimuthAngle-t)%(Math.PI*2);c=Math.atan2(Math.sin(c),Math.cos(c)),t=this.controls.azimuthAngle-c;let u=(this.controls.polarAngle-i)%(Math.PI*2);u=Math.atan2(Math.sin(u),Math.cos(u)),i=this.controls.polarAngle-u;let d=this.controls.fitToBox(e,!0,{cover:!1,paddingLeft:0,paddingRight:0,paddingBottom:0,paddingTop:0});o.push(d);let h=this.controls.moveTo(r.x,r.y,r.z,!0);o.push(h);let f=this.controls.rotateTo(t,i,!0);o.push(f),Promise.all(o).then(()=>{this.autoRender=!1,this.controls.enabled=!0,this.homeTarget=this.controls.getTarget(),this.homePosition=this.controls.getPosition()})}showPoint(e,t,i){}showBox3(e){let t=new tA(e);this.scene.add(t)}clearObject(){this.obj.clear()}getIntersect(e){return this.raycaster.getIntersect(e)}enableRender(){this.renderEnabled=!0}initBackground(){this.scene.background=this._backgroundColor,this.pmremGenerator==null&&(this.pmremGenerator=new cv(this.renderer),this.pmremGenerator.compileEquirectangularShader()),this.envMap=this.pmremGenerator.fromScene(new Lk).texture,this.scene.environment=this.envMap,this.renderer.toneMappingExposure=1}initEnvironment(e){if(!e.hdrUrl)return this.envMap=this.pmremGenerator.fromScene(new Lk).texture,this.scene.environment=this.envMap,Promise.resolve(null);let t=e.hdrUrl.split(".").pop().toLowerCase();return console.log(t),this.pmremGenerator==null&&(this.pmremGenerator=new cv(this.renderer),this.pmremGenerator.compileEquirectangularShader()),new Promise((i,s)=>{let r;if(t=="hdr")r=new hAe;else if(t=="exr")r=new AAe;else return;r.load(e.hdrUrl,o=>{this.envMap&&this.envMap.dispose();let a=this.pmremGenerator.fromEquirectangular(o).texture;this.envMap=a,this.pmremGenerator.dispose(),this._showEnvironment&&(this.scene.environment=this.envMap,this.scene.environment.userData={id:e.id,previewPath:e.previewUrl}),this._showBackground&&(this.scene.background=this.envMap),this.enableRender(),i(!0)},void 0,s)})}set showEnvironment(e){this._showEnvironment!=e&&(this._showEnvironment=e,e&&this.envMap?this.scene.environment=this.envMap:this.scene.environment=null,this.enableRender())}get showEnvironment(){return this._showEnvironment}set showBackground(e){this._showBackground!=e&&(this._showBackground=e,e&&this.envMap?this.scene.background=this.envMap:this.scene.background=this._backgroundColor,this.enableRender())}get showBackground(){return this._showBackground}flyTo(e,t,i,s,r,o){this.controls.restThreshold=.1,this.controls.enabled=!1,this.autoRender=!0,this.controls.setLookAt(e,t,i,s,r,o,!0).then(()=>{this.autoRender=!1,this.controls.enabled=!0})}rotateTo(e,t){let i=(this.controls.azimuthAngle-e)%(Math.PI*2);i=Math.atan2(Math.sin(i),Math.cos(i)),e=this.controls.azimuthAngle-i;let s=(this.controls.polarAngle-t)%(Math.PI*2);s=Math.atan2(Math.sin(s),Math.cos(s)),t=this.controls.polarAngle-s,this.controls.enabled=!1,this.autoRender=!0,this.controls.rotateTo(e,t,!0).then(()=>{this.autoRender=!1,this.controls.enabled=!0})}setSection(e){if(this.section==null){let t=new Vb(this.obj);t.geometry.computeBoundingBox(),this.section=new sAe(t.geometry.boundingBox,this.obj,this._curCamera,this.renderer,this.controls,this.goldenContainer)}e?this.section.open():(this.section.close(),this.section=null),this.render()}setOutlineByObjects(e){this.selectPass.selectObjects(e)}setOutlineByElements(e){this.selectPass.selectElements(e)}getEmviormentParameter(e){return go.enhanceShaderLightingParams[e]}setEmviormentParameter(e,t){this.obj.traverse(i=>{["Mesh"].includes(i.type)&&i.material.shader&&(i.material.shader.uniforms[e].value=t)}),go.enhanceShaderLightingParams[e]=t,this.enableRender()}saveEmviorment(){let e={emviormentData:{},lightsData:{}};this.scene.environment&&this.scene.environment.userData&&(e.emviormentData.hdrID=this.scene.environment.userData.id),e.emviormentData.showEnvironment=this._showEnvironment,e.emviormentData.showBackground=this._showBackground;for(const t in go.enhanceShaderLightingParams){const i=go.enhanceShaderLightingParams[t];typeof i=="number"&&(e.emviormentData[t]=i)}return e.lightsData.ambientLight={},e.lightsData.ambientLight.color=this.ambientLight.color.getHex(),e.lightsData.ambientLight.intensity=this.ambientLight.intensity,e.lightsData.directionalLight={},e.lightsData.directionalLight.color=this.directionalLight.color.getHex(),e.lightsData.directionalLight.intensity=this.directionalLight.intensity,e}openEmviorment(e){e.emviormentData.hdrID&&xa.getHDRDataById(e.emviormentData.hdrID).then(t=>{t&&this.initEnvironment(t)}),this.showEnvironment=e.emviormentData.showEnvironment,this.showBackground=e.emviormentData.showBackground;for(const t in e.emviormentData)go.enhanceShaderLightingParams[t]!=null&&(go.enhanceShaderLightingParams[t]=e.emviormentData[t],this.setEmviormentParameter(t,e.emviormentData[t]));return console.log(go.enhanceShaderLightingParams),this.ambientLight.color.setHex(e.lightsData.ambientLight.color),this.ambientLight.intensity=e.lightsData.ambientLight.intensity,this.directionalLight.color.setHex(e.lightsData.directionalLight.color),this.directionalLight.intensity=e.lightsData.directionalLight.intensity,this.enableRender(),JSON.stringify(e)}showShadow(e){this.renderer.shadowMap.enabled=e,this.renderer.shadowMap.type=p2,this.obj.children.forEach(t=>{t&&t.traverse(i=>{["Mesh","LineSegments"].includes(i.type)&&(i.castShadow=e,i.receiveShadow=e)})}),this.initComposer(),this.enableRender()}setOrthogonal(e){let t=this._perspectiveCamera.far;this._perspectiveCamera.far=1e4;const i=this._curCamera.position.clone(),s=this._curCamera.rotation.clone();let r=this.controls.toJSON(),o=this.controls.azimuthAngle,a=this.controls.polarAngle;this.scene.remove(this._curCamera),this._curCamera.remove(this.directionalLight),this._curCamera.remove(this.ambientLight),this.initCamera(e),e&&this.setPerCameraToOrthCamera(),this._curCamera.position.set(i.x,i.y,i.z),this._curCamera.rotation.set(s.x,s.y,s.z),this._curCamera.lookAt(this.scene.position),this._curCamera.updateProjectionMatrix(),this.initLight(),this.initControls(),this.controls.fromJSON(r),this.controls.azimuthAngle=o,this.controls.polarAngle=a,this.controls.update(),this.renderPass&&(this.renderPass.camera=this._curCamera),this.outlinePass&&(this.outlinePass.renderCamera=this._curCamera),this._perspectiveCamera.far=t,this.enableRender()}setPerCameraToOrthCamera(){if(this._perspectiveCamera==null||this._orthographicCamera==null)return null;let e=this.scene.position.clone();for(const h of this.mapModels.values())e.applyMatrix4(h.rootObject.matrix);let i=this._perspectiveCamera.position.clone().sub(e).length(),s=this._perspectiveCamera.aspect,r=this._perspectiveCamera.fov,o=i*Math.atan(Math.PI/180*r/2),a=o*s,l=-o,c=-a,u=this._perspectiveCamera.near,d=this._perspectiveCamera.far;this._orthographicCamera.left=c,this._orthographicCamera.right=a,this._orthographicCamera.top=o,this._orthographicCamera.bottom=l,this._orthographicCamera.near=u,this._orthographicCamera.far=d,this._orthographicWidth=a}get backgroundColor(){return this._backgroundColor}set backgroundColor(e){this.backgroundColor.set(e),this.enableRender()}initMapServer(e){if(this._mapScene==null){let t=new IAe,i=new Ms(Ms.PLANAR,t);i.matrixAutoUpdate=!0,i.updateMatrixWorld(!0),this._mapScene=new rn,this._mapScene.add(i),this.initSky(),this.scene.add(this._mapScene)}}initSky(){let e=new Dw;e.scale.setScalar(1e8);let t={turbidity:0,rayleigh:.5,mieCoefficient:.005,mieDirectionalG:.7,inclination:.2,azimuth:.25,exposure:.5};const i=e.material.uniforms;i.turbidity.value=t.turbidity,i.rayleigh.value=t.rayleigh,i.mieCoefficient.value=t.mieCoefficient,i.mieDirectionalG.value=t.mieDirectionalG;let s=Math.PI*(t.inclination-.5),r=2*Math.PI*(t.azimuth-.5),o=new G;o.x=Math.cos(r),o.y=Math.sin(r)*Math.sin(s),o.z=Math.sin(r)*Math.cos(s),i.sunPosition.value.copy(o),this._mapScene.add(e)}get showMap(){return this._showMap}set showMap(e){var t,i;this._showMap=e,e?(this._mapScene==null&&this.initMapServer(),this.scene.add(this._mapScene)):this._mapScene&&this.scene.remove(this._mapScene),(i=(t=lH.component)==null?void 0:t.value)==null||i.showToolbar("",e),this.enableRender()}}class kAe extends J5{constructor(t){super();J(this,"holdIntervalDelay");J(this,"_enabled",!0);J(this,"_holding",!1);J(this,"_intervalId",-1);J(this,"_deltaTime",0);J(this,"_elapsedTime",0);J(this,"_lastTime",0);J(this,"_holdStart",t=>{if(!this._enabled||this._holding)return;this._deltaTime=0,this._elapsedTime=0,this._lastTime=performance.now(),this.dispatchEvent({type:"holdStart",deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:t}),this._holding=!0;const i=()=>{this._intervalId=this.holdIntervalDelay?window.setTimeout(i,this.holdIntervalDelay):window.requestAnimationFrame(i);const s=performance.now();this._deltaTime=s-this._lastTime,this._elapsedTime+=this._deltaTime,this._lastTime=performance.now(),this.dispatchEvent({type:"holding",deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:t})};this._intervalId=this.holdIntervalDelay?window.setTimeout(i,this.holdIntervalDelay):window.requestAnimationFrame(i)});J(this,"_holdEnd",t=>{if(!this._enabled||!this._holding)return;const i=performance.now();this._deltaTime=i-this._lastTime,this._elapsedTime+=this._deltaTime,this._lastTime=performance.now(),this.dispatchEvent({type:"holdEnd",deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:t}),window.clearTimeout(this._intervalId),window.cancelAnimationFrame(this._intervalId),this._holding=!1});this.holdIntervalDelay=t}get enabled(){return this._enabled}set enabled(t){this._enabled!==t&&(this._enabled=t,this._enabled||this._holdEnd())}get holding(){return this._holding}}class rf extends kAe{constructor(e,t){if(typeof e!="string"){console.error("KeyboardKeyHold: the first argument has to be a KeyboardEvent.code string.");return}super(t),this._holdStart=this._holdStart.bind(this),this._holdEnd=this._holdEnd.bind(this);const i=r=>{OAe(r)||r.code===e&&this._holdStart(r)},s=r=>{r.code===e&&this._holdEnd(r)};document.addEventListener("keydown",i),document.addEventListener("keyup",s)}}function OAe(n){const e=n.target;return e.tagName==="INPUT"||e.tagName==="SELECT"||e.tagName==="TEXTAREA"||e.isContentEditable}/**
 * lil-gui
 * https://lil-gui.georgealways.com
 * @version 0.17.0
 * @author George Michael Brower
 * @license MIT
 */class Fa{constructor(e,t,i,s,r="div"){this.parent=e,this.object=t,this.property=i,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(s),this.$name=document.createElement("div"),this.$name.classList.add("name"),Fa.nextNameID=Fa.nextNameID||0,this.$name.id="lil-gui-name-"+ ++Fa.nextNameID,this.$widget=document.createElement(r),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(i)}name(e){return this._name=e,this.$name.innerHTML=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled||(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e)),this}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(e){const t=this.parent.add(this.object,this.property,e);return t.name(this._name),this.destroy(),t}min(e){return this}max(e){return this}step(e){return this}decimals(e){return this}listen(e=!0){return this._listening=e,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const e=this.save();e!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=e}getValue(){return this.object[this.property]}setValue(e){return this.object[this.property]=e,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class DAe extends Fa{constructor(e,t,i){super(e,t,i,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function $M(n){let e,t;return(e=n.match(/(#|0x)?([a-f0-9]{6})/i))?t=e[2]:(e=n.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?t=parseInt(e[1]).toString(16).padStart(2,0)+parseInt(e[2]).toString(16).padStart(2,0)+parseInt(e[3]).toString(16).padStart(2,0):(e=n.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(t=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),!!t&&"#"+t}const NAe={isPrimitive:!0,match:n=>typeof n=="string",fromHexString:$M,toHexString:$M},_v={isPrimitive:!0,match:n=>typeof n=="number",fromHexString:n=>parseInt(n.substring(1),16),toHexString:n=>"#"+n.toString(16).padStart(6,0)},FAe={isPrimitive:!1,match:Array.isArray,fromHexString(n,e,t=1){const i=_v.fromHexString(n);e[0]=(i>>16&255)/255*t,e[1]=(i>>8&255)/255*t,e[2]=(255&i)/255*t},toHexString:([n,e,t],i=1)=>_v.toHexString(n*(i=255/i)<<16^e*i<<8^t*i<<0)},BAe={isPrimitive:!1,match:n=>Object(n)===n,fromHexString(n,e,t=1){const i=_v.fromHexString(n);e.r=(i>>16&255)/255*t,e.g=(i>>8&255)/255*t,e.b=(255&i)/255*t},toHexString:({r:n,g:e,b:t},i=1)=>_v.toHexString(n*(i=255/i)<<16^e*i<<8^t*i<<0)},UAe=[NAe,_v,FAe,BAe];class zAe extends Fa{constructor(e,t,i,s){var r;super(e,t,i,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=(r=this.initialValue,UAe.find(o=>o.match(r))),this._rgbScale=s,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const o=$M(this.$text.value);o&&this._setValueFromHexString(o)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){const t=this._format.fromHexString(e);this.setValue(t)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class NS extends Fa{constructor(e,t,i){super(e,t,i,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",s=>{s.preventDefault(),this.getValue().call(this.object)}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}}class HAe extends Fa{constructor(e,t,i,s,r,o){super(e,t,i,"number"),this._initInput(),this.min(s),this.max(r);const a=o!==void 0;this.step(a?o:this._getImplicitStep(),a),this.updateDisplay()}decimals(e){return this._decimals=e,this.updateDisplay(),this}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,t=!0){return this._step=e,this._stepExplicit=t,this}updateDisplay(){const e=this.getValue();if(this._hasSlider){let t=(e-this._min)/(this._max-this._min);t=Math.max(0,Math.min(t,1)),this.$fill.style.width=100*t+"%"}return this._inputFocused||(this.$input.value=this._decimals===void 0?e:e.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$disable=this.$input;const e=u=>{const d=parseFloat(this.$input.value);isNaN(d)||(this._snapClampSetValue(d+u),this.$input.value=this.getValue())};let t,i,s,r,o,a=!1;const l=u=>{if(a){const d=u.clientX-t,h=u.clientY-i;Math.abs(h)>5?(u.preventDefault(),this.$input.blur(),a=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(d)>5&&c()}if(!a){const d=u.clientY-s;o-=d*this._step*this._arrowKeyMultiplier(u),r+o>this._max?o=this._max-r:r+o<this._min&&(o=this._min-r),this._snapClampSetValue(r+o)}s=u.clientY},c=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",c)};this.$input.addEventListener("input",()=>{let u=parseFloat(this.$input.value);isNaN(u)||(this._stepExplicit&&(u=this._snap(u)),this.setValue(this._clamp(u)))}),this.$input.addEventListener("keydown",u=>{u.code==="Enter"&&this.$input.blur(),u.code==="ArrowUp"&&(u.preventDefault(),e(this._step*this._arrowKeyMultiplier(u))),u.code==="ArrowDown"&&(u.preventDefault(),e(this._step*this._arrowKeyMultiplier(u)*-1))}),this.$input.addEventListener("wheel",u=>{this._inputFocused&&(u.preventDefault(),e(this._step*this._normalizeMouseWheel(u)))},{passive:!1}),this.$input.addEventListener("mousedown",u=>{t=u.clientX,i=s=u.clientY,a=!0,r=this.getValue(),o=0,window.addEventListener("mousemove",l),window.addEventListener("mouseup",c)}),this.$input.addEventListener("focus",()=>{this._inputFocused=!0}),this.$input.addEventListener("blur",()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()})}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const e=h=>{const f=this.$slider.getBoundingClientRect();let m=(p=h,y=f.left,v=f.right,_=this._min,b=this._max,(p-y)/(v-y)*(b-_)+_);var p,y,v,_,b;this._snapClampSetValue(m)},t=h=>{e(h.clientX)},i=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",i)};let s,r,o=!1;const a=h=>{h.preventDefault(),this._setDraggingStyle(!0),e(h.touches[0].clientX),o=!1},l=h=>{if(o){const f=h.touches[0].clientX-s,m=h.touches[0].clientY-r;Math.abs(f)>Math.abs(m)?a(h):(window.removeEventListener("touchmove",l),window.removeEventListener("touchend",c))}else h.preventDefault(),e(h.touches[0].clientX)},c=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",l),window.removeEventListener("touchend",c)},u=this._callOnFinishChange.bind(this);let d;this.$slider.addEventListener("mousedown",h=>{this._setDraggingStyle(!0),e(h.clientX),window.addEventListener("mousemove",t),window.addEventListener("mouseup",i)}),this.$slider.addEventListener("touchstart",h=>{h.touches.length>1||(this._hasScrollBar?(s=h.touches[0].clientX,r=h.touches[0].clientY,o=!0):a(h),window.addEventListener("touchmove",l,{passive:!1}),window.addEventListener("touchend",c))},{passive:!1}),this.$slider.addEventListener("wheel",h=>{if(Math.abs(h.deltaX)<Math.abs(h.deltaY)&&this._hasScrollBar)return;h.preventDefault();const f=this._normalizeMouseWheel(h)*this._step;this._snapClampSetValue(this.getValue()+f),this.$input.value=this.getValue(),clearTimeout(d),d=setTimeout(u,400)},{passive:!1})}_setDraggingStyle(e,t="horizontal"){this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle("lil-gui-"+t,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:t,deltaY:i}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(t=0,i=-e.wheelDelta/120,i*=this._stepExplicit?1:10),t+-i}_arrowKeyMultiplier(e){let t=this._stepExplicit?1:10;return e.shiftKey?t*=10:e.altKey&&(t/=10),t}_snap(e){const t=Math.round(e/this._step)*this._step;return parseFloat(t.toPrecision(15))}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){const e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}}class VAe extends Fa{constructor(e,t,i,s){super(e,t,i,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(s)?s:Object.values(s),this._names=Array.isArray(s)?s:Object.keys(s),this._names.forEach(r=>{const o=document.createElement("option");o.innerHTML=r,this.$select.appendChild(o)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const e=this.getValue(),t=this._values.indexOf(e);return this.$select.selectedIndex=t,this.$display.innerHTML=t===-1?e:this._names[t],this}}class $Ae extends Fa{constructor(e,t,i){super(e,t,i,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",s=>{s.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}let kk=!1;class cA{constructor({parent:e,autoPlace:t=e===void 0,container:i,width:s,title:r="Controls",injectStyles:o=!0,touchStyles:a=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",l=>{l.code!=="Enter"&&l.code!=="Space"||(l.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(r),a&&this.domElement.classList.add("allow-touch-styles"),this.parent)return this.parent.children.push(this),this.parent.folders.push(this),void this.parent.$children.appendChild(this.domElement);this.domElement.classList.add("root"),!kk&&o&&(function(l){const c=document.createElement("style");c.innerHTML=l;const u=document.querySelector("head link[rel=stylesheet], head style");u?document.head.insertBefore(c,u):document.head.appendChild(c)}('.lil-gui{--background-color:#1f1f1f;--text-color:#ebebeb;--title-background-color:#111;--title-text-color:#ebebeb;--widget-color:#424242;--hover-color:#4f4f4f;--focus-color:#595959;--number-color:#2cc9ff;--string-color:#a2db3c;--font-size:11px;--input-font-size:11px;--font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;--font-family-mono:Menlo,Monaco,Consolas,"Droid Sans Mono",monospace;--padding:4px;--spacing:4px;--widget-height:20px;--name-width:45%;--slider-knob-width:2px;--slider-input-width:27%;--color-input-width:27%;--slider-input-min-width:45px;--color-input-min-width:45px;--folder-indent:7px;--widget-padding:0 0 0 3px;--widget-border-radius:2px;--checkbox-size:calc(var(--widget-height)*0.75);--scrollbar-width:5px;background-color:var(--background-color);color:var(--text-color);font-family:var(--font-family);font-size:var(--font-size);font-style:normal;font-weight:400;line-height:1;text-align:left;touch-action:manipulation;user-select:none;-webkit-user-select:none}.lil-gui,.lil-gui *{box-sizing:border-box;margin:0;padding:0}.lil-gui.root{display:flex;flex-direction:column;width:var(--width,245px)}.lil-gui.root>.title{background:var(--title-background-color);color:var(--title-text-color)}.lil-gui.root>.children{overflow-x:hidden;overflow-y:auto}.lil-gui.root>.children::-webkit-scrollbar{background:var(--background-color);height:var(--scrollbar-width);width:var(--scrollbar-width)}.lil-gui.root>.children::-webkit-scrollbar-thumb{background:var(--focus-color);border-radius:var(--scrollbar-width)}.lil-gui.force-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}.lil-gui.autoPlace{max-height:100%;position:fixed;right:15px;top:0;z-index:1001}.lil-gui .controller{align-items:center;display:flex;margin:var(--spacing) 0;padding:0 var(--padding)}.lil-gui .controller.disabled{opacity:.5}.lil-gui .controller.disabled,.lil-gui .controller.disabled *{pointer-events:none!important}.lil-gui .controller>.name{flex-shrink:0;line-height:var(--widget-height);min-width:var(--name-width);padding-right:var(--spacing);white-space:pre}.lil-gui .controller .widget{align-items:center;display:flex;min-height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.string input{color:var(--string-color)}.lil-gui .controller.boolean .widget{cursor:pointer}.lil-gui .controller.color .display{border-radius:var(--widget-border-radius);height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.color input[type=color]{cursor:pointer;height:100%;opacity:0;width:100%}.lil-gui .controller.color input[type=text]{flex-shrink:0;font-family:var(--font-family-mono);margin-left:var(--spacing);min-width:var(--color-input-min-width);width:var(--color-input-width)}.lil-gui .controller.option select{max-width:100%;opacity:0;position:absolute;width:100%}.lil-gui .controller.option .display{background:var(--widget-color);border-radius:var(--widget-border-radius);height:var(--widget-height);line-height:var(--widget-height);max-width:100%;overflow:hidden;padding-left:.55em;padding-right:1.75em;pointer-events:none;position:relative;word-break:break-all}.lil-gui .controller.option .display.active{background:var(--focus-color)}.lil-gui .controller.option .display:after{bottom:0;content:"";font-family:lil-gui;padding-right:.375em;position:absolute;right:0;top:0}.lil-gui .controller.option .widget,.lil-gui .controller.option select{cursor:pointer}.lil-gui .controller.number input{color:var(--number-color)}.lil-gui .controller.number.hasSlider input{flex-shrink:0;margin-left:var(--spacing);min-width:var(--slider-input-min-width);width:var(--slider-input-width)}.lil-gui .controller.number .slider{background-color:var(--widget-color);border-radius:var(--widget-border-radius);cursor:ew-resize;height:var(--widget-height);overflow:hidden;padding-right:var(--slider-knob-width);touch-action:pan-y;width:100%}.lil-gui .controller.number .slider.active{background-color:var(--focus-color)}.lil-gui .controller.number .slider.active .fill{opacity:.95}.lil-gui .controller.number .fill{border-right:var(--slider-knob-width) solid var(--number-color);box-sizing:content-box;height:100%}.lil-gui-dragging .lil-gui{--hover-color:var(--widget-color)}.lil-gui-dragging *{cursor:ew-resize!important}.lil-gui-dragging.lil-gui-vertical *{cursor:ns-resize!important}.lil-gui .title{--title-height:calc(var(--widget-height) + var(--spacing)*1.25);-webkit-tap-highlight-color:transparent;text-decoration-skip:objects;cursor:pointer;font-weight:600;height:var(--title-height);line-height:calc(var(--title-height) - 4px);outline:none;padding:0 var(--padding)}.lil-gui .title:before{content:"";display:inline-block;font-family:lil-gui;padding-right:2px}.lil-gui .title:active{background:var(--title-background-color);opacity:.75}.lil-gui.root>.title:focus{text-decoration:none!important}.lil-gui.closed>.title:before{content:""}.lil-gui.closed>.children{opacity:0;transform:translateY(-7px)}.lil-gui.closed:not(.transition)>.children{display:none}.lil-gui.transition>.children{overflow:hidden;pointer-events:none;transition-duration:.3s;transition-property:height,opacity,transform;transition-timing-function:cubic-bezier(.2,.6,.35,1)}.lil-gui .children:empty:before{content:"Empty";display:block;font-style:italic;height:var(--widget-height);line-height:var(--widget-height);margin:var(--spacing) 0;opacity:.5;padding:0 var(--padding)}.lil-gui.root>.children>.lil-gui>.title{border-width:0;border-bottom:1px solid var(--widget-color);border-left:0 solid var(--widget-color);border-right:0 solid var(--widget-color);border-top:1px solid var(--widget-color);transition:border-color .3s}.lil-gui.root>.children>.lil-gui.closed>.title{border-bottom-color:transparent}.lil-gui+.controller{border-top:1px solid var(--widget-color);margin-top:0;padding-top:var(--spacing)}.lil-gui .lil-gui .lil-gui>.title{border:none}.lil-gui .lil-gui .lil-gui>.children{border:none;border-left:2px solid var(--widget-color);margin-left:var(--folder-indent)}.lil-gui .lil-gui .controller{border:none}.lil-gui input{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:0;border-radius:var(--widget-border-radius);color:var(--text-color);font-family:var(--font-family);font-size:var(--input-font-size);height:var(--widget-height);outline:none;width:100%}.lil-gui input:disabled{opacity:1}.lil-gui input[type=number],.lil-gui input[type=text]{padding:var(--widget-padding)}.lil-gui input[type=number]:focus,.lil-gui input[type=text]:focus{background:var(--focus-color)}.lil-gui input::-webkit-inner-spin-button,.lil-gui input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.lil-gui input[type=number]{-moz-appearance:textfield}.lil-gui input[type=checkbox]{appearance:none;-webkit-appearance:none;border-radius:var(--widget-border-radius);cursor:pointer;height:var(--checkbox-size);text-align:center;width:var(--checkbox-size)}.lil-gui input[type=checkbox]:checked:before{content:"";font-family:lil-gui;font-size:var(--checkbox-size);line-height:var(--checkbox-size)}.lil-gui button{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:1px solid var(--widget-color);border-radius:var(--widget-border-radius);color:var(--text-color);cursor:pointer;font-family:var(--font-family);font-size:var(--font-size);height:var(--widget-height);line-height:calc(var(--widget-height) - 4px);outline:none;text-align:center;text-transform:none;width:100%}.lil-gui button:active{background:var(--focus-color)}@font-face{font-family:lil-gui;src:url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff")}@media (pointer:coarse){.lil-gui.allow-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}}@media (hover:hover){.lil-gui .controller.color .display:hover:before{border:1px solid #fff9;border-radius:var(--widget-border-radius);bottom:0;content:" ";display:block;left:0;position:absolute;right:0;top:0}.lil-gui .controller.option .display.focus{background:var(--focus-color)}.lil-gui .controller.option .widget:hover .display{background:var(--hover-color)}.lil-gui .controller.number .slider:hover{background-color:var(--hover-color)}body:not(.lil-gui-dragging) .lil-gui .title:hover{background:var(--title-background-color);opacity:.85}.lil-gui .title:focus{text-decoration:underline var(--focus-color)}.lil-gui input:hover{background:var(--hover-color)}.lil-gui input:active{background:var(--focus-color)}.lil-gui input[type=checkbox]:focus{box-shadow:inset 0 0 0 1px var(--focus-color)}.lil-gui button:hover{background:var(--hover-color);border-color:var(--hover-color)}.lil-gui button:focus{border-color:var(--focus-color)}}'),kk=!0),i?i.appendChild(this.domElement):t&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),s&&this.domElement.style.setProperty("--width",s+"px"),this.domElement.addEventListener("keydown",l=>l.stopPropagation()),this.domElement.addEventListener("keyup",l=>l.stopPropagation())}add(e,t,i,s,r){if(Object(i)===i)return new VAe(this,e,t,i);const o=e[t];switch(typeof o){case"number":return new HAe(this,e,t,i,s,r);case"boolean":return new DAe(this,e,t);case"string":return new $Ae(this,e,t);case"function":return new NS(this,e,t)}console.error(`gui.add failed
	property:`,t,`
	object:`,e,`
	value:`,o)}addColor(e,t,i=1){return new zAe(this,e,t,i)}addFolder(e){return new cA({parent:this,title:e})}load(e,t=!0){return e.controllers&&this.controllers.forEach(i=>{i instanceof NS||i._name in e.controllers&&i.load(e.controllers[i._name])}),t&&e.folders&&this.folders.forEach(i=>{i._title in e.folders&&i.load(e.folders[i._title])}),this}save(e=!0){const t={controllers:{},folders:{}};return this.controllers.forEach(i=>{if(!(i instanceof NS)){if(i._name in t.controllers)throw new Error(`Cannot save GUI with duplicate property "${i._name}"`);t.controllers[i._name]=i.save()}}),e&&this.folders.forEach(i=>{if(i._title in t.folders)throw new Error(`Cannot save GUI with duplicate folder "${i._title}"`);t.folders[i._title]=i.save()}),t}open(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{const t=this.$children.clientHeight;this.$children.style.height=t+"px",this.domElement.classList.add("transition");const i=r=>{r.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",i))};this.$children.addEventListener("transitionend",i);const s=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame(()=>{this.$children.style.height=s+"px"})}),this}title(e){return this._title=e,this.$title.innerHTML=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach(t=>t.reset()),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),this._onChange!==void 0&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(e=>e.destroy())}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach(t=>{e=e.concat(t.controllersRecursive())}),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach(t=>{e=e.concat(t.foldersRecursive())}),e}}function fl(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function cH(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Zr={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},yp={duration:.5,overwrite:!1,delay:0},uA,js,Ai,Eo=1e8,di=1/Eo,GM=Math.PI*2,GAe=GM/4,WAe=0,uH=Math.sqrt,KAe=Math.cos,YAe=Math.sin,xs=function(e){return typeof e=="string"},Ui=function(e){return typeof e=="function"},Vl=function(e){return typeof e=="number"},dA=function(e){return typeof e>"u"},Ka=function(e){return typeof e=="object"},Tr=function(e){return e!==!1},hA=function(){return typeof window<"u"},Xy=function(e){return Ui(e)||xs(e)},dH=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},qs=Array.isArray,WM=/(?:-?\.?\d|\.)+/gi,hH=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,wf=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,FS=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,fH=/[+-]=-?[.\d]+/,pH=/[^,'"\[\]\s]+/gi,XAe=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Ii,ba,KM,fA,to={},qb={},mH,gH=function(e){return(qb=sh(e,to))&&kr},pA=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},bv=function(e,t){return!t&&console.warn(e)},vH=function(e,t){return e&&(to[e]=t)&&qb&&(qb[e]=t)||to},wv=function(){return 0},jAe={suppressEvents:!0,isStart:!0,kill:!1},A_={suppressEvents:!0,kill:!1},qAe={suppressEvents:!0},mA={},Yc=[],YM={},yH,Ur={},BS={},Ok=30,I_=[],gA="",vA=function(e){var t=e[0],i,s;if(Ka(t)||Ui(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(s=I_.length;s--&&!I_[s].targetTest(t););i=I_[s]}for(s=e.length;s--;)e[s]&&(e[s]._gsap||(e[s]._gsap=new VH(e[s],i)))||e.splice(s,1);return e},kd=function(e){return e._gsap||vA(To(e))[0]._gsap},_H=function(e,t,i){return(i=e[t])&&Ui(i)?e[t]():dA(i)&&e.getAttribute&&e.getAttribute(t)||i},Ar=function(e,t){return(e=e.split(",")).forEach(t)||e},Wi=function(e){return Math.round(e*1e5)/1e5||0},vs=function(e){return Math.round(e*1e7)/1e7||0},Bf=function(e,t){var i=t.charAt(0),s=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+s:i==="-"?e-s:i==="*"?e*s:e/s},ZAe=function(e,t){for(var i=t.length,s=0;e.indexOf(t[s])<0&&++s<i;);return s<i},Zb=function(){var e=Yc.length,t=Yc.slice(0),i,s;for(YM={},Yc.length=0,i=0;i<e;i++)s=t[i],s&&s._lazy&&(s.render(s._lazy[0],s._lazy[1],!0)._lazy=0)},bH=function(e,t,i,s){Yc.length&&!js&&Zb(),e.render(t,i,js&&t<0&&(e._initted||e._startAt)),Yc.length&&!js&&Zb()},wH=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(pH).length<2?t:xs(e)?e.trim():e},xH=function(e){return e},Uo=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},JAe=function(e){return function(t,i){for(var s in i)s in t||s==="duration"&&e||s==="ease"||(t[s]=i[s])}},sh=function(e,t){for(var i in t)e[i]=t[i];return e},Dk=function n(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=Ka(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},Jb=function(e,t){var i={},s;for(s in e)s in t||(i[s]=e[s]);return i},pg=function(e){var t=e.parent||Ii,i=e.keyframes?JAe(qs(e.keyframes)):Uo;if(Tr(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},QAe=function(e,t){for(var i=e.length,s=i===t.length;s&&i--&&e[i]===t[i];);return i<0},SH=function(e,t,i,s,r){var o=e[s],a;if(r)for(a=t[r];o&&o[r]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[s]=t,t._prev=o,t.parent=t._dp=e,t},Nw=function(e,t,i,s){i===void 0&&(i="_first"),s===void 0&&(s="_last");var r=t._prev,o=t._next;r?r._next=o:e[i]===t&&(e[i]=o),o?o._prev=r:e[s]===t&&(e[s]=r),t._next=t._prev=t.parent=null},cu=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Od=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},eIe=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},XM=function(e,t,i,s){return e._startAt&&(js?e._startAt.revert(A_):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,s))},tIe=function n(e){return!e||e._ts&&n(e.parent)},Nk=function(e){return e._repeat?_p(e._tTime,e=e.duration()+e._rDelay)*e:0},_p=function(e,t){var i=Math.floor(e/=t);return e&&i===e?i-1:i},Qb=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Fw=function(e){return e._end=vs(e._start+(e._tDur/Math.abs(e._ts||e._rts||di)||0))},Bw=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=vs(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Fw(e),i._dirty||Od(i,e)),e},CH=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=Qb(e.rawTime(),t),(!t._dur||u0(0,t.totalDuration(),i)-t._tTime>di)&&t.render(i,!0)),Od(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-di}},Ta=function(e,t,i,s){return t.parent&&cu(t),t._start=vs((Vl(i)?i:i||e!==Ii?uo(e,i,t):e._time)+t._delay),t._end=vs(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),SH(e,t,"_first","_last",e._sort?"_start":0),jM(t)||(e._recent=t),s||CH(e,t),e._ts<0&&Bw(e,e._tTime),e},MH=function(e,t){return(to.ScrollTrigger||pA("scrollTrigger",t))&&to.ScrollTrigger.create(t,e)},EH=function(e,t,i,s,r){if(_A(e,t,r),!e._initted)return 1;if(!i&&e._pt&&!js&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&yH!==$r.frame)return Yc.push(e),e._lazy=[r,s],1},nIe=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},jM=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},iIe=function(e,t,i,s){var r=e.ratio,o=t<0||!t&&(!e._start&&nIe(e)&&!(!e._initted&&jM(e))||(e._ts<0||e._dp._ts<0)&&!jM(e))?0:1,a=e._rDelay,l=0,c,u,d;if(a&&e._repeat&&(l=u0(0,e._tDur,t),u=_p(l,a),e._yoyo&&u&1&&(o=1-o),u!==_p(e._tTime,a)&&(r=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==r||js||s||e._zTime===di||!t&&e._zTime){if(!e._initted&&EH(e,t,s,i,l))return;for(d=e._zTime,e._zTime=t||(i?di:0),i||(i=t&&!d),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,c=e._pt;c;)c.r(o,c.d),c=c._next;t<0&&XM(e,t,i,!0),e._onUpdate&&!i&&Kr(e,"onUpdate"),l&&e._repeat&&!i&&e.parent&&Kr(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&cu(e,1),!i&&!js&&(Kr(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},sIe=function(e,t,i){var s;if(i>t)for(s=e._first;s&&s._start<=i;){if(s.data==="isPause"&&s._start>t)return s;s=s._next}else for(s=e._last;s&&s._start>=i;){if(s.data==="isPause"&&s._start<t)return s;s=s._prev}},bp=function(e,t,i,s){var r=e._repeat,o=vs(t)||0,a=e._tTime/e._tDur;return a&&!s&&(e._time*=o/e._dur),e._dur=o,e._tDur=r?r<0?1e10:vs(o*(r+1)+e._rDelay*r):o,a>0&&!s&&Bw(e,e._tTime=e._tDur*a),e.parent&&Fw(e),i||Od(e.parent,e),e},Fk=function(e){return e instanceof lr?Od(e):bp(e,e._dur)},rIe={_start:0,endTime:wv,totalDuration:wv},uo=function n(e,t,i){var s=e.labels,r=e._recent||rIe,o=e.duration()>=Eo?r.endTime(!1):e._dur,a,l,c;return xs(t)&&(isNaN(t)||t in s)?(l=t.charAt(0),c=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?r._start:r.endTime(r._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?r:i).totalDuration()/100:1)):a<0?(t in s||(s[t]=o),s[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&i&&(l=l/100*(qs(i)?i[0]:i).totalDuration()),a>1?n(e,t.substr(0,a-1),i)+l:o+l)):t==null?o:+t},mg=function(e,t,i){var s=Vl(t[1]),r=(s?2:1)+(e<2?0:1),o=t[r],a,l;if(s&&(o.duration=t[1]),o.parent=i,e){for(a=o,l=i;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=Tr(l.vars.inherit)&&l.parent;o.immediateRender=Tr(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[r-1]}return new es(t[0],o,t[r+1])},bu=function(e,t){return e||e===0?t(e):t},u0=function(e,t,i){return i<e?e:i>t?t:i},Ws=function(e,t){return!xs(e)||!(t=XAe.exec(e))?"":t[1]},oIe=function(e,t,i){return bu(i,function(s){return u0(e,t,s)})},qM=[].slice,TH=function(e,t){return e&&Ka(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Ka(e[0]))&&!e.nodeType&&e!==ba},aIe=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(s){var r;return xs(s)&&!t||TH(s,1)?(r=i).push.apply(r,To(s)):i.push(s)})||i},To=function(e,t,i){return Ai&&!t&&Ai.selector?Ai.selector(e):xs(e)&&!i&&(KM||!wp())?qM.call((t||fA).querySelectorAll(e),0):qs(e)?aIe(e,i):TH(e)?qM.call(e,0):e?[e]:[]},ZM=function(e){return e=To(e)[0]||bv("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return To(t,i.querySelectorAll?i:i===e?bv("Invalid scope")||fA.createElement("div"):e)}},AH=function(e){return e.sort(function(){return .5-Math.random()})},IH=function(e){if(Ui(e))return e;var t=Ka(e)?e:{each:e},i=Dd(t.ease),s=t.from||0,r=parseFloat(t.base)||0,o={},a=s>0&&s<1,l=isNaN(s)||a,c=t.axis,u=s,d=s;return xs(s)?u=d={center:.5,edges:.5,end:1}[s]||0:!a&&l&&(u=s[0],d=s[1]),function(h,f,m){var p=(m||t).length,y=o[p],v,_,b,w,x,S,C,T,M;if(!y){if(M=t.grid==="auto"?0:(t.grid||[1,Eo])[1],!M){for(C=-Eo;C<(C=m[M++].getBoundingClientRect().left)&&M<p;);M<p&&M--}for(y=o[p]=[],v=l?Math.min(M,p)*u-.5:s%M,_=M===Eo?0:l?p*d/M-.5:s/M|0,C=0,T=Eo,S=0;S<p;S++)b=S%M-v,w=_-(S/M|0),y[S]=x=c?Math.abs(c==="y"?w:b):uH(b*b+w*w),x>C&&(C=x),x<T&&(T=x);s==="random"&&AH(y),y.max=C-T,y.min=T,y.v=p=(parseFloat(t.amount)||parseFloat(t.each)*(M>p?p-1:c?c==="y"?p/M:M:Math.max(M,p/M))||0)*(s==="edges"?-1:1),y.b=p<0?r-p:r,y.u=Ws(t.amount||t.each)||0,i=i&&p<0?UH(i):i}return p=(y[h]-y.min)/y.max||0,vs(y.b+(i?i(p):p)*y.v)+y.u}},JM=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var s=vs(Math.round(parseFloat(i)/e)*e*t);return(s-s%1)/t+(Vl(i)?0:Ws(i))}},RH=function(e,t){var i=qs(e),s,r;return!i&&Ka(e)&&(s=i=e.radius||Eo,e.values?(e=To(e.values),(r=!Vl(e[0]))&&(s*=s)):e=JM(e.increment)),bu(t,i?Ui(e)?function(o){return r=e(o),Math.abs(r-o)<=s?r:o}:function(o){for(var a=parseFloat(r?o.x:o),l=parseFloat(r?o.y:0),c=Eo,u=0,d=e.length,h,f;d--;)r?(h=e[d].x-a,f=e[d].y-l,h=h*h+f*f):h=Math.abs(e[d]-a),h<c&&(c=h,u=d);return u=!s||c<=s?e[u]:o,r||u===o||Vl(o)?u:u+Ws(o)}:JM(e))},PH=function(e,t,i,s){return bu(qs(e)?!t:i===!0?!!(i=0):!s,function(){return qs(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(s=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*s)/s})},lIe=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(s){return t.reduce(function(r,o){return o(r)},s)}},cIe=function(e,t){return function(i){return e(parseFloat(i))+(t||Ws(i))}},uIe=function(e,t,i){return kH(e,t,0,1,i)},LH=function(e,t,i){return bu(i,function(s){return e[~~t(s)]})},dIe=function n(e,t,i){var s=t-e;return qs(e)?LH(e,n(0,e.length),t):bu(i,function(r){return(s+(r-e)%s)%s+e})},hIe=function n(e,t,i){var s=t-e,r=s*2;return qs(e)?LH(e,n(0,e.length-1),t):bu(i,function(o){return o=(r+(o-e)%r)%r||0,e+(o>s?r-o:o)})},xv=function(e){for(var t=0,i="",s,r,o,a;~(s=e.indexOf("random(",t));)o=e.indexOf(")",s),a=e.charAt(s+7)==="[",r=e.substr(s+7,o-s-7).match(a?pH:WM),i+=e.substr(t,s-t)+PH(a?r:+r[0],a?0:+r[1],+r[2]||1e-5),t=o+1;return i+e.substr(t,e.length-t)},kH=function(e,t,i,s,r){var o=t-e,a=s-i;return bu(r,function(l){return i+((l-e)/o*a||0)})},fIe=function n(e,t,i,s){var r=isNaN(e+t)?0:function(f){return(1-f)*e+f*t};if(!r){var o=xs(e),a={},l,c,u,d,h;if(i===!0&&(s=1)&&(i=null),o)e={p:e},t={p:t};else if(qs(e)&&!qs(t)){for(u=[],d=e.length,h=d-2,c=1;c<d;c++)u.push(n(e[c-1],e[c]));d--,r=function(m){m*=d;var p=Math.min(h,~~m);return u[p](m-p)},i=t}else s||(e=sh(qs(e)?[]:{},e));if(!u){for(l in t)yA.call(a,e,l,"get",t[l]);r=function(m){return xA(m,a)||(o?e.p:e)}}}return bu(i,r)},Bk=function(e,t,i){var s=e.labels,r=Eo,o,a,l;for(o in s)a=s[o]-t,a<0==!!i&&a&&r>(a=Math.abs(a))&&(l=o,r=a);return l},Kr=function(e,t,i){var s=e.vars,r=s[t],o=Ai,a=e._ctx,l,c,u;if(r)return l=s[t+"Params"],c=s.callbackScope||e,i&&Yc.length&&Zb(),a&&(Ai=a),u=l?r.apply(c,l):r.call(c),Ai=o,u},Om=function(e){return cu(e),e.scrollTrigger&&e.scrollTrigger.kill(!!js),e.progress()<1&&Kr(e,"onInterrupt"),e},xf,OH=[],DH=function(e){if(e)if(e=!e.name&&e.default||e,hA()||e.headless){var t=e.name,i=Ui(e),s=t&&!i&&e.init?function(){this._props=[]}:e,r={init:wv,render:xA,add:yA,kill:IIe,modifier:AIe,rawVars:0},o={targetTest:0,get:0,getSetter:wA,aliases:{},register:0};if(wp(),e!==s){if(Ur[t])return;Uo(s,Uo(Jb(e,r),o)),sh(s.prototype,sh(r,Jb(e,o))),Ur[s.prop=t]=s,e.targetTest&&(I_.push(s),mA[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}vH(t,s),e.register&&e.register(kr,s,Ir)}else OH.push(e)},li=255,Dm={aqua:[0,li,li],lime:[0,li,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,li],navy:[0,0,128],white:[li,li,li],olive:[128,128,0],yellow:[li,li,0],orange:[li,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[li,0,0],pink:[li,192,203],cyan:[0,li,li],transparent:[li,li,li,0]},US=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*li+.5|0},NH=function(e,t,i){var s=e?Vl(e)?[e>>16,e>>8&li,e&li]:0:Dm.black,r,o,a,l,c,u,d,h,f,m;if(!s){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Dm[e])s=Dm[e];else if(e.charAt(0)==="#"){if(e.length<6&&(r=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+r+r+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return s=parseInt(e.substr(1,6),16),[s>>16,s>>8&li,s&li,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),s=[e>>16,e>>8&li,e&li]}else if(e.substr(0,3)==="hsl"){if(s=m=e.match(WM),!t)l=+s[0]%360/360,c=+s[1]/100,u=+s[2]/100,o=u<=.5?u*(c+1):u+c-u*c,r=u*2-o,s.length>3&&(s[3]*=1),s[0]=US(l+1/3,r,o),s[1]=US(l,r,o),s[2]=US(l-1/3,r,o);else if(~e.indexOf("="))return s=e.match(hH),i&&s.length<4&&(s[3]=1),s}else s=e.match(WM)||Dm.transparent;s=s.map(Number)}return t&&!m&&(r=s[0]/li,o=s[1]/li,a=s[2]/li,d=Math.max(r,o,a),h=Math.min(r,o,a),u=(d+h)/2,d===h?l=c=0:(f=d-h,c=u>.5?f/(2-d-h):f/(d+h),l=d===r?(o-a)/f+(o<a?6:0):d===o?(a-r)/f+2:(r-o)/f+4,l*=60),s[0]=~~(l+.5),s[1]=~~(c*100+.5),s[2]=~~(u*100+.5)),i&&s.length<4&&(s[3]=1),s},FH=function(e){var t=[],i=[],s=-1;return e.split(Xc).forEach(function(r){var o=r.match(wf)||[];t.push.apply(t,o),i.push(s+=o.length+1)}),t.c=i,t},Uk=function(e,t,i){var s="",r=(e+s).match(Xc),o=t?"hsla(":"rgba(",a=0,l,c,u,d;if(!r)return e;if(r=r.map(function(h){return(h=NH(h,t,1))&&o+(t?h[0]+","+h[1]+"%,"+h[2]+"%,"+h[3]:h.join(","))+")"}),i&&(u=FH(e),l=i.c,l.join(s)!==u.c.join(s)))for(c=e.replace(Xc,"1").split(wf),d=c.length-1;a<d;a++)s+=c[a]+(~l.indexOf(a)?r.shift()||o+"0,0,0,0)":(u.length?u:r.length?r:i).shift());if(!c)for(c=e.split(Xc),d=c.length-1;a<d;a++)s+=c[a]+r[a];return s+c[d]},Xc=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Dm)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),pIe=/hsl[a]?\(/,BH=function(e){var t=e.join(" "),i;if(Xc.lastIndex=0,Xc.test(t))return i=pIe.test(t),e[1]=Uk(e[1],i),e[0]=Uk(e[0],i,FH(e[1])),!0},Sv,$r=function(){var n=Date.now,e=500,t=33,i=n(),s=i,r=1e3/240,o=r,a=[],l,c,u,d,h,f,m=function p(y){var v=n()-s,_=y===!0,b,w,x,S;if((v>e||v<0)&&(i+=v-t),s+=v,x=s-i,b=x-o,(b>0||_)&&(S=++d.frame,h=x-d.time*1e3,d.time=x=x/1e3,o+=b+(b>=r?4:r-b),w=1),_||(l=c(p)),w)for(f=0;f<a.length;f++)a[f](x,h,S,y)};return d={time:0,frame:0,tick:function(){m(!0)},deltaRatio:function(y){return h/(1e3/(y||60))},wake:function(){mH&&(!KM&&hA()&&(ba=KM=window,fA=ba.document||{},to.gsap=kr,(ba.gsapVersions||(ba.gsapVersions=[])).push(kr.version),gH(qb||ba.GreenSockGlobals||!ba.gsap&&ba||{}),OH.forEach(DH)),u=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&d.sleep(),c=u||function(y){return setTimeout(y,o-d.time*1e3+1|0)},Sv=1,m(2))},sleep:function(){(u?cancelAnimationFrame:clearTimeout)(l),Sv=0,c=wv},lagSmoothing:function(y,v){e=y||1/0,t=Math.min(v||33,e)},fps:function(y){r=1e3/(y||240),o=d.time*1e3+r},add:function(y,v,_){var b=v?function(w,x,S,C){y(w,x,S,C),d.remove(b)}:y;return d.remove(y),a[_?"unshift":"push"](b),wp(),b},remove:function(y,v){~(v=a.indexOf(y))&&a.splice(v,1)&&f>=v&&f--},_listeners:a},d}(),wp=function(){return!Sv&&$r.wake()},In={},mIe=/^[\d.\-M][\d.\-,\s]/,gIe=/["']/g,vIe=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),s=i[0],r=1,o=i.length,a,l,c;r<o;r++)l=i[r],a=r!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),t[s]=isNaN(c)?c.replace(gIe,"").trim():+c,s=l.substr(a+1).trim();return t},yIe=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),s=e.indexOf("(",t);return e.substring(t,~s&&s<i?e.indexOf(")",i+1):i)},_Ie=function(e){var t=(e+"").split("("),i=In[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[vIe(t[1])]:yIe(e).split(",").map(wH)):In._CE&&mIe.test(e)?In._CE("",e):i},UH=function(e){return function(t){return 1-e(1-t)}},zH=function n(e,t){for(var i=e._first,s;i;)i instanceof lr?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(s=i._ease,i._ease=i._yEase,i._yEase=s,i._yoyo=t)),i=i._next},Dd=function(e,t){return e&&(Ui(e)?e:In[e]||_Ie(e))||t},xh=function(e,t,i,s){i===void 0&&(i=function(l){return 1-t(1-l)}),s===void 0&&(s=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var r={easeIn:t,easeOut:i,easeInOut:s},o;return Ar(e,function(a){In[a]=to[a]=r,In[o=a.toLowerCase()]=i;for(var l in r)In[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=In[a+"."+l]=r[l]}),r},HH=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},zS=function n(e,t,i){var s=t>=1?t:1,r=(i||(e?.3:.45))/(t<1?t:1),o=r/GM*(Math.asin(1/s)||0),a=function(u){return u===1?1:s*Math.pow(2,-10*u)*YAe((u-o)*r)+1},l=e==="out"?a:e==="in"?function(c){return 1-a(1-c)}:HH(a);return r=GM/r,l.config=function(c,u){return n(e,c,u)},l},HS=function n(e,t){t===void 0&&(t=1.70158);var i=function(o){return o?--o*o*((t+1)*o+t)+1:0},s=e==="out"?i:e==="in"?function(r){return 1-i(1-r)}:HH(i);return s.config=function(r){return n(e,r)},s};Ar("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;xh(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})});In.Linear.easeNone=In.none=In.Linear.easeIn;xh("Elastic",zS("in"),zS("out"),zS());(function(n,e){var t=1/e,i=2*t,s=2.5*t,r=function(a){return a<t?n*a*a:a<i?n*Math.pow(a-1.5/e,2)+.75:a<s?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};xh("Bounce",function(o){return 1-r(1-o)},r)})(7.5625,2.75);xh("Expo",function(n){return n?Math.pow(2,10*(n-1)):0});xh("Circ",function(n){return-(uH(1-n*n)-1)});xh("Sine",function(n){return n===1?1:-KAe(n*GAe)+1});xh("Back",HS("in"),HS("out"),HS());In.SteppedEase=In.steps=to.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,s=e+(t?0:1),r=t?1:0,o=1-di;return function(a){return((s*u0(0,o,a)|0)+r)*i}}};yp.ease=In["quad.out"];Ar("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return gA+=n+","+n+"Params,"});var VH=function(e,t){this.id=WAe++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:_H,this.set=t?t.getSetter:wA},Cv=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,bp(this,+t.duration,1,1),this.data=t.data,Ai&&(this._ctx=Ai,Ai.data.push(this)),Sv||$r.wake()}var e=n.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,bp(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,s){if(wp(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(Bw(this,i),!r._dp||r.parent||CH(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&Ta(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!s||this._initted&&Math.abs(this._zTime)===di||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),bH(this,i,s)),this},e.time=function(i,s){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+Nk(this))%(this._dur+this._rDelay)||(i?this._dur:0),s):this._time},e.totalProgress=function(i,s){return arguments.length?this.totalTime(this.totalDuration()*i,s):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(i,s){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+Nk(this),s):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,s){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*r,s):this._repeat?_p(this._tTime,r)+1:1},e.timeScale=function(i,s){if(!arguments.length)return this._rts===-di?0:this._rts;if(this._rts===i)return this;var r=this.parent&&this._ts?Qb(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-di?0:this._rts,this.totalTime(u0(-Math.abs(this._delay),this._tDur,r),s!==!1),Fw(this),eIe(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(wp(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==di&&(this._tTime-=di)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var s=this.parent||this._dp;return s&&(s._sort||!this.parent)&&Ta(s,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(Tr(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var s=this.parent||this._dp;return s?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Qb(s.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=qAe);var s=js;return js=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),js=s,this},e.globalTime=function(i){for(var s=this,r=arguments.length?i:s.rawTime();s;)r=s._start+r/(Math.abs(s._ts)||1),s=s._dp;return!this.parent&&this._sat?this._sat.globalTime(i):r},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,Fk(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var s=this._time;return this._rDelay=i,Fk(this),s?this.time(s):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,s){return this.totalTime(uo(this,i),Tr(s))},e.restart=function(i,s){return this.play().totalTime(i?-this._delay:0,Tr(s))},e.play=function(i,s){return i!=null&&this.seek(i,s),this.reversed(!1).paused(!1)},e.reverse=function(i,s){return i!=null&&this.seek(i||this.totalDuration(),s),this.reversed(!0).paused(!1)},e.pause=function(i,s){return i!=null&&this.seek(i,s),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-di:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-di,this},e.isActive=function(){var i=this.parent||this._dp,s=this._start,r;return!!(!i||this._ts&&this._initted&&i.isActive()&&(r=i.rawTime(!0))>=s&&r<this.endTime(!0)-di)},e.eventCallback=function(i,s,r){var o=this.vars;return arguments.length>1?(s?(o[i]=s,r&&(o[i+"Params"]=r),i==="onUpdate"&&(this._onUpdate=s)):delete o[i],this):o[i]},e.then=function(i){var s=this;return new Promise(function(r){var o=Ui(i)?i:xH,a=function(){var c=s.then;s.then=null,Ui(o)&&(o=o(s))&&(o.then||o===s)&&(s.then=c),r(o),s.then=c};s._initted&&s.totalProgress()===1&&s._ts>=0||!s._tTime&&s._ts<0?a():s._prom=a})},e.kill=function(){Om(this)},n}();Uo(Cv.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-di,_prom:0,_ps:!1,_rts:1});var lr=function(n){cH(e,n);function e(i,s){var r;return i===void 0&&(i={}),r=n.call(this,i)||this,r.labels={},r.smoothChildTiming=!!i.smoothChildTiming,r.autoRemoveChildren=!!i.autoRemoveChildren,r._sort=Tr(i.sortChildren),Ii&&Ta(i.parent||Ii,fl(r),s),i.reversed&&r.reverse(),i.paused&&r.paused(!0),i.scrollTrigger&&MH(fl(r),i.scrollTrigger),r}var t=e.prototype;return t.to=function(s,r,o){return mg(0,arguments,this),this},t.from=function(s,r,o){return mg(1,arguments,this),this},t.fromTo=function(s,r,o,a){return mg(2,arguments,this),this},t.set=function(s,r,o){return r.duration=0,r.parent=this,pg(r).repeatDelay||(r.repeat=0),r.immediateRender=!!r.immediateRender,new es(s,r,uo(this,o),1),this},t.call=function(s,r,o){return Ta(this,es.delayedCall(0,s,r),o)},t.staggerTo=function(s,r,o,a,l,c,u){return o.duration=r,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=u,o.parent=this,new es(s,o,uo(this,l)),this},t.staggerFrom=function(s,r,o,a,l,c,u){return o.runBackwards=1,pg(o).immediateRender=Tr(o.immediateRender),this.staggerTo(s,r,o,a,l,c,u)},t.staggerFromTo=function(s,r,o,a,l,c,u,d){return a.startAt=o,pg(a).immediateRender=Tr(a.immediateRender),this.staggerTo(s,r,a,l,c,u,d)},t.render=function(s,r,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=s<=0?0:vs(s),d=this._zTime<0!=s<0&&(this._initted||!c),h,f,m,p,y,v,_,b,w,x,S,C;if(this!==Ii&&u>l&&s>=0&&(u=l),u!==this._tTime||o||d){if(a!==this._time&&c&&(u+=this._time-a,s+=this._time-a),h=u,w=this._start,b=this._ts,v=!b,d&&(c||(a=this._zTime),(s||!r)&&(this._zTime=s)),this._repeat){if(S=this._yoyo,y=c+this._rDelay,this._repeat<-1&&s<0)return this.totalTime(y*100+s,r,o);if(h=vs(u%y),u===l?(p=this._repeat,h=c):(p=~~(u/y),p&&p===u/y&&(h=c,p--),h>c&&(h=c)),x=_p(this._tTime,y),!a&&this._tTime&&x!==p&&this._tTime-x*y-this._dur<=0&&(x=p),S&&p&1&&(h=c-h,C=1),p!==x&&!this._lock){var T=S&&x&1,M=T===(S&&p&1);if(p<x&&(T=!T),a=T?0:u%c?c:u,this._lock=1,this.render(a||(C?0:vs(p*y)),r,!c)._lock=0,this._tTime=u,!r&&this.parent&&Kr(this,"onRepeat"),this.vars.repeatRefresh&&!C&&(this.invalidate()._lock=1),a&&a!==this._time||v!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,M&&(this._lock=2,a=T?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!C&&this.invalidate()),this._lock=0,!this._ts&&!v)return this;zH(this,C)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(_=sIe(this,vs(a),vs(h)),_&&(u-=h-(h=_._start))),this._tTime=u,this._time=h,this._act=!b,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=s,a=0),!a&&h&&!r&&!p&&(Kr(this,"onStart"),this._tTime!==u))return this;if(h>=a&&s>=0)for(f=this._first;f;){if(m=f._next,(f._act||h>=f._start)&&f._ts&&_!==f){if(f.parent!==this)return this.render(s,r,o);if(f.render(f._ts>0?(h-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(h-f._start)*f._ts,r,o),h!==this._time||!this._ts&&!v){_=0,m&&(u+=this._zTime=-di);break}}f=m}else{f=this._last;for(var E=s<0?s:h;f;){if(m=f._prev,(f._act||E<=f._end)&&f._ts&&_!==f){if(f.parent!==this)return this.render(s,r,o);if(f.render(f._ts>0?(E-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(E-f._start)*f._ts,r,o||js&&(f._initted||f._startAt)),h!==this._time||!this._ts&&!v){_=0,m&&(u+=this._zTime=E?-di:di);break}}f=m}}if(_&&!r&&(this.pause(),_.render(h>=a?0:-di)._zTime=h>=a?1:-1,this._ts))return this._start=w,Fw(this),this.render(s,r,o);this._onUpdate&&!r&&Kr(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&a)&&(w===this._start||Math.abs(b)!==Math.abs(this._ts))&&(this._lock||((s||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&cu(this,1),!r&&!(s<0&&!a)&&(u||a||!l)&&(Kr(this,u===l&&s>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(s,r){var o=this;if(Vl(r)||(r=uo(this,r,s)),!(s instanceof Cv)){if(qs(s))return s.forEach(function(a){return o.add(a,r)}),this;if(xs(s))return this.addLabel(s,r);if(Ui(s))s=es.delayedCall(0,s);else return this}return this!==s?Ta(this,s,r):this},t.getChildren=function(s,r,o,a){s===void 0&&(s=!0),r===void 0&&(r=!0),o===void 0&&(o=!0),a===void 0&&(a=-Eo);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof es?r&&l.push(c):(o&&l.push(c),s&&l.push.apply(l,c.getChildren(!0,r,o)))),c=c._next;return l},t.getById=function(s){for(var r=this.getChildren(1,1,1),o=r.length;o--;)if(r[o].vars.id===s)return r[o]},t.remove=function(s){return xs(s)?this.removeLabel(s):Ui(s)?this.killTweensOf(s):(Nw(this,s),s===this._recent&&(this._recent=this._last),Od(this))},t.totalTime=function(s,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=vs($r.time-(this._ts>0?s/this._ts:(this.totalDuration()-s)/-this._ts))),n.prototype.totalTime.call(this,s,r),this._forcing=0,this):this._tTime},t.addLabel=function(s,r){return this.labels[s]=uo(this,r),this},t.removeLabel=function(s){return delete this.labels[s],this},t.addPause=function(s,r,o){var a=es.delayedCall(0,r||wv,o);return a.data="isPause",this._hasPause=1,Ta(this,a,uo(this,s))},t.removePause=function(s){var r=this._first;for(s=uo(this,s);r;)r._start===s&&r.data==="isPause"&&cu(r),r=r._next},t.killTweensOf=function(s,r,o){for(var a=this.getTweensOf(s,o),l=a.length;l--;)zc!==a[l]&&a[l].kill(s,r);return this},t.getTweensOf=function(s,r){for(var o=[],a=To(s),l=this._first,c=Vl(r),u;l;)l instanceof es?ZAe(l._targets,a)&&(c?(!zc||l._initted&&l._ts)&&l.globalTime(0)<=r&&l.globalTime(l.totalDuration())>r:!r||l.isActive())&&o.push(l):(u=l.getTweensOf(a,r)).length&&o.push.apply(o,u),l=l._next;return o},t.tweenTo=function(s,r){r=r||{};var o=this,a=uo(o,s),l=r,c=l.startAt,u=l.onStart,d=l.onStartParams,h=l.immediateRender,f,m=es.to(o,Uo({ease:r.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:r.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||di,onStart:function(){if(o.pause(),!f){var y=r.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());m._dur!==y&&bp(m,y,0,1).render(m._time,!0,!0),f=1}u&&u.apply(m,d||[])}},r));return h?m.render(0):m},t.tweenFromTo=function(s,r,o){return this.tweenTo(r,Uo({startAt:{time:uo(this,s)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(s){return s===void 0&&(s=this._time),Bk(this,uo(this,s))},t.previousLabel=function(s){return s===void 0&&(s=this._time),Bk(this,uo(this,s),1)},t.currentLabel=function(s){return arguments.length?this.seek(s,!0):this.previousLabel(this._time+di)},t.shiftChildren=function(s,r,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,c;a;)a._start>=o&&(a._start+=s,a._end+=s),a=a._next;if(r)for(c in l)l[c]>=o&&(l[c]+=s);return Od(this)},t.invalidate=function(s){var r=this._first;for(this._lock=0;r;)r.invalidate(s),r=r._next;return n.prototype.invalidate.call(this,s)},t.clear=function(s){s===void 0&&(s=!0);for(var r=this._first,o;r;)o=r._next,this.remove(r),r=o;return this._dp&&(this._time=this._tTime=this._pTime=0),s&&(this.labels={}),Od(this)},t.totalDuration=function(s){var r=0,o=this,a=o._last,l=Eo,c,u,d;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-s:s));if(o._dirty){for(d=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),u=a._start,u>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,Ta(o,a,u-a._delay,1)._lock=0):l=u,u<0&&a._ts&&(r-=u,(!d&&!o._dp||d&&d.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),l=0),a._end>r&&a._ts&&(r=a._end),a=c;bp(o,o===Ii&&o._time>r?o._time:r,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(s){if(Ii._ts&&(bH(Ii,Qb(s,Ii)),yH=$r.frame),$r.frame>=Ok){Ok+=Zr.autoSleep||120;var r=Ii._first;if((!r||!r._ts)&&Zr.autoSleep&&$r._listeners.length<2){for(;r&&!r._ts;)r=r._next;r||$r.sleep()}}},e}(Cv);Uo(lr.prototype,{_lock:0,_hasPause:0,_forcing:0});var bIe=function(e,t,i,s,r,o,a){var l=new Ir(this._pt,e,t,0,1,XH,null,r),c=0,u=0,d,h,f,m,p,y,v,_;for(l.b=i,l.e=s,i+="",s+="",(v=~s.indexOf("random("))&&(s=xv(s)),o&&(_=[i,s],o(_,e,t),i=_[0],s=_[1]),h=i.match(FS)||[];d=FS.exec(s);)m=d[0],p=s.substring(c,d.index),f?f=(f+1)%5:p.substr(-5)==="rgba("&&(f=1),m!==h[u++]&&(y=parseFloat(h[u-1])||0,l._pt={_next:l._pt,p:p||u===1?p:",",s:y,c:m.charAt(1)==="="?Bf(y,m)-y:parseFloat(m)-y,m:f&&f<4?Math.round:0},c=FS.lastIndex);return l.c=c<s.length?s.substring(c,s.length):"",l.fp=a,(fH.test(s)||v)&&(l.e=0),this._pt=l,l},yA=function(e,t,i,s,r,o,a,l,c,u){Ui(s)&&(s=s(r||0,e,o));var d=e[t],h=i!=="get"?i:Ui(d)?c?e[t.indexOf("set")||!Ui(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():d,f=Ui(d)?c?MIe:KH:bA,m;if(xs(s)&&(~s.indexOf("random(")&&(s=xv(s)),s.charAt(1)==="="&&(m=Bf(h,s)+(Ws(h)||0),(m||m===0)&&(s=m))),!u||h!==s||QM)return!isNaN(h*s)&&s!==""?(m=new Ir(this._pt,e,t,+h||0,s-(h||0),typeof d=="boolean"?TIe:YH,0,f),c&&(m.fp=c),a&&m.modifier(a,this,e),this._pt=m):(!d&&!(t in e)&&pA(t,s),bIe.call(this,e,t,h,s,f,l||Zr.stringFilter,c))},wIe=function(e,t,i,s,r){if(Ui(e)&&(e=gg(e,r,t,i,s)),!Ka(e)||e.style&&e.nodeType||qs(e)||dH(e))return xs(e)?gg(e,r,t,i,s):e;var o={},a;for(a in e)o[a]=gg(e[a],r,t,i,s);return o},$H=function(e,t,i,s,r,o){var a,l,c,u;if(Ur[e]&&(a=new Ur[e]).init(r,a.rawVars?t[e]:wIe(t[e],s,r,o,i),i,s,o)!==!1&&(i._pt=l=new Ir(i._pt,r,e,0,1,a.render,a,0,a.priority),i!==xf))for(c=i._ptLookup[i._targets.indexOf(r)],u=a._props.length;u--;)c[a._props[u]]=l;return a},zc,QM,_A=function n(e,t,i){var s=e.vars,r=s.ease,o=s.startAt,a=s.immediateRender,l=s.lazy,c=s.onUpdate,u=s.runBackwards,d=s.yoyoEase,h=s.keyframes,f=s.autoRevert,m=e._dur,p=e._startAt,y=e._targets,v=e.parent,_=v&&v.data==="nested"?v.vars.targets:y,b=e._overwrite==="auto"&&!uA,w=e.timeline,x,S,C,T,M,E,A,I,B,F,U,P,O;if(w&&(!h||!r)&&(r="none"),e._ease=Dd(r,yp.ease),e._yEase=d?UH(Dd(d===!0?r:d,yp.ease)):0,d&&e._yoyo&&!e._repeat&&(d=e._yEase,e._yEase=e._ease,e._ease=d),e._from=!w&&!!s.runBackwards,!w||h&&!s.stagger){if(I=y[0]?kd(y[0]).harness:0,P=I&&s[I.prop],x=Jb(s,mA),p&&(p._zTime<0&&p.progress(1),t<0&&u&&a&&!f?p.render(-1,!0):p.revert(u&&m?A_:jAe),p._lazy=0),o){if(cu(e._startAt=es.set(y,Uo({data:"isStart",overwrite:!1,parent:v,immediateRender:!0,lazy:!p&&Tr(l),startAt:null,delay:0,onUpdate:c&&function(){return Kr(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(js||!a&&!f)&&e._startAt.revert(A_),a&&m&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(u&&m&&!p){if(t&&(a=!1),C=Uo({overwrite:!1,data:"isFromStart",lazy:a&&!p&&Tr(l),immediateRender:a,stagger:0,parent:v},x),P&&(C[I.prop]=P),cu(e._startAt=es.set(y,C)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(js?e._startAt.revert(A_):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,di,di);else if(!t)return}for(e._pt=e._ptCache=0,l=m&&Tr(l)||l&&!m,S=0;S<y.length;S++){if(M=y[S],A=M._gsap||vA(y)[S]._gsap,e._ptLookup[S]=F={},YM[A.id]&&Yc.length&&Zb(),U=_===y?S:_.indexOf(M),I&&(B=new I).init(M,P||x,e,U,_)!==!1&&(e._pt=T=new Ir(e._pt,M,B.name,0,1,B.render,B,0,B.priority),B._props.forEach(function(D){F[D]=T}),B.priority&&(E=1)),!I||P)for(C in x)Ur[C]&&(B=$H(C,x,e,U,M,_))?B.priority&&(E=1):F[C]=T=yA.call(e,M,C,"get",x[C],U,_,0,s.stringFilter);e._op&&e._op[S]&&e.kill(M,e._op[S]),b&&e._pt&&(zc=e,Ii.killTweensOf(M,F,e.globalTime(t)),O=!e.parent,zc=0),e._pt&&l&&(YM[A.id]=1)}E&&jH(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!O,h&&t<=0&&w.render(Eo,!0,!0)},xIe=function(e,t,i,s,r,o,a,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],u,d,h,f;if(!c)for(c=e._ptCache[t]=[],h=e._ptLookup,f=e._targets.length;f--;){if(u=h[f][t],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==t&&u.fp!==t;)u=u._next;if(!u)return QM=1,e.vars[t]="+=0",_A(e,a),QM=0,l?bv(t+" not eligible for reset"):1;c.push(u)}for(f=c.length;f--;)d=c[f],u=d._pt||d,u.s=(s||s===0)&&!r?s:u.s+(s||0)+o*u.c,u.c=i-u.s,d.e&&(d.e=Wi(i)+Ws(d.e)),d.b&&(d.b=u.s+Ws(d.b))},SIe=function(e,t){var i=e[0]?kd(e[0]).harness:0,s=i&&i.aliases,r,o,a,l;if(!s)return t;r=sh({},t);for(o in s)if(o in r)for(l=s[o].split(","),a=l.length;a--;)r[l[a]]=r[o];return r},CIe=function(e,t,i,s){var r=t.ease||s||"power1.inOut",o,a;if(qs(t))a=i[e]||(i[e]=[]),t.forEach(function(l,c){return a.push({t:c/(t.length-1)*100,v:l,e:r})});else for(o in t)a=i[o]||(i[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:r})},gg=function(e,t,i,s,r){return Ui(e)?e.call(t,i,s,r):xs(e)&&~e.indexOf("random(")?xv(e):e},GH=gA+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",WH={};Ar(GH+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return WH[n]=1});var es=function(n){cH(e,n);function e(i,s,r,o){var a;typeof s=="number"&&(r.duration=s,s=r,r=null),a=n.call(this,o?s:pg(s))||this;var l=a.vars,c=l.duration,u=l.delay,d=l.immediateRender,h=l.stagger,f=l.overwrite,m=l.keyframes,p=l.defaults,y=l.scrollTrigger,v=l.yoyoEase,_=s.parent||Ii,b=(qs(i)||dH(i)?Vl(i[0]):"length"in s)?[i]:To(i),w,x,S,C,T,M,E,A;if(a._targets=b.length?vA(b):bv("GSAP target "+i+" not found. https://gsap.com",!Zr.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=f,m||h||Xy(c)||Xy(u)){if(s=a.vars,w=a.timeline=new lr({data:"nested",defaults:p||{},targets:_&&_.data==="nested"?_.vars.targets:b}),w.kill(),w.parent=w._dp=fl(a),w._start=0,h||Xy(c)||Xy(u)){if(C=b.length,E=h&&IH(h),Ka(h))for(T in h)~GH.indexOf(T)&&(A||(A={}),A[T]=h[T]);for(x=0;x<C;x++)S=Jb(s,WH),S.stagger=0,v&&(S.yoyoEase=v),A&&sh(S,A),M=b[x],S.duration=+gg(c,fl(a),x,M,b),S.delay=(+gg(u,fl(a),x,M,b)||0)-a._delay,!h&&C===1&&S.delay&&(a._delay=u=S.delay,a._start+=u,S.delay=0),w.to(M,S,E?E(x,M,b):0),w._ease=In.none;w.duration()?c=u=0:a.timeline=0}else if(m){pg(Uo(w.vars.defaults,{ease:"none"})),w._ease=Dd(m.ease||s.ease||"none");var I=0,B,F,U;if(qs(m))m.forEach(function(P){return w.to(b,P,">")}),w.duration();else{S={};for(T in m)T==="ease"||T==="easeEach"||CIe(T,m[T],S,m.easeEach);for(T in S)for(B=S[T].sort(function(P,O){return P.t-O.t}),I=0,x=0;x<B.length;x++)F=B[x],U={ease:F.e,duration:(F.t-(x?B[x-1].t:0))/100*c},U[T]=F.v,w.to(b,U,I),I+=U.duration;w.duration()<c&&w.to({},{duration:c-w.duration()})}}c||a.duration(c=w.duration())}else a.timeline=0;return f===!0&&!uA&&(zc=fl(a),Ii.killTweensOf(b),zc=0),Ta(_,fl(a),r),s.reversed&&a.reverse(),s.paused&&a.paused(!0),(d||!c&&!m&&a._start===vs(_._time)&&Tr(d)&&tIe(fl(a))&&_.data!=="nested")&&(a._tTime=-di,a.render(Math.max(0,-u)||0)),y&&MH(fl(a),y),a}var t=e.prototype;return t.render=function(s,r,o){var a=this._time,l=this._tDur,c=this._dur,u=s<0,d=s>l-di&&!u?l:s<di?0:s,h,f,m,p,y,v,_,b,w;if(!c)iIe(this,s,r,o);else if(d!==this._tTime||!s||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(h=d,b=this.timeline,this._repeat){if(p=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(p*100+s,r,o);if(h=vs(d%p),d===l?(m=this._repeat,h=c):(m=~~(d/p),m&&m===vs(d/p)&&(h=c,m--),h>c&&(h=c)),v=this._yoyo&&m&1,v&&(w=this._yEase,h=c-h),y=_p(this._tTime,p),h===a&&!o&&this._initted&&m===y)return this._tTime=d,this;m!==y&&(b&&this._yEase&&zH(b,v),this.vars.repeatRefresh&&!v&&!this._lock&&this._time!==p&&this._initted&&(this._lock=o=1,this.render(vs(p*m),!0).invalidate()._lock=0))}if(!this._initted){if(EH(this,u?s:h,o,r,d))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&m!==y))return this;if(c!==this._dur)return this.render(s,r,o)}if(this._tTime=d,this._time=h,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=_=(w||this._ease)(h/c),this._from&&(this.ratio=_=1-_),h&&!a&&!r&&!m&&(Kr(this,"onStart"),this._tTime!==d))return this;for(f=this._pt;f;)f.r(_,f.d),f=f._next;b&&b.render(s<0?s:b._dur*b._ease(h/this._dur),r,o)||this._startAt&&(this._zTime=s),this._onUpdate&&!r&&(u&&XM(this,s,r,o),Kr(this,"onUpdate")),this._repeat&&m!==y&&this.vars.onRepeat&&!r&&this.parent&&Kr(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(u&&!this._onUpdate&&XM(this,s,!0,!0),(s||!c)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&cu(this,1),!r&&!(u&&!a)&&(d||a||v)&&(Kr(this,d===l?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(s){return(!s||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(s),n.prototype.invalidate.call(this,s)},t.resetTo=function(s,r,o,a,l){Sv||$r.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||_A(this,c),u=this._ease(c/this._dur),xIe(this,s,r,o,a,u,c,l)?this.resetTo(s,r,o,a,1):(Bw(this,0),this.parent||SH(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(s,r){if(r===void 0&&(r="all"),!s&&(!r||r==="all"))return this._lazy=this._pt=0,this.parent?Om(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(s,r,zc&&zc.vars.overwrite!==!0)._first||Om(this),this.parent&&o!==this.timeline.totalDuration()&&bp(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=s?To(s):a,c=this._ptLookup,u=this._pt,d,h,f,m,p,y,v;if((!r||r==="all")&&QAe(a,l))return r==="all"&&(this._pt=0),Om(this);for(d=this._op=this._op||[],r!=="all"&&(xs(r)&&(p={},Ar(r,function(_){return p[_]=1}),r=p),r=SIe(a,r)),v=a.length;v--;)if(~l.indexOf(a[v])){h=c[v],r==="all"?(d[v]=r,m=h,f={}):(f=d[v]=d[v]||{},m=r);for(p in m)y=h&&h[p],y&&((!("kill"in y.d)||y.d.kill(p)===!0)&&Nw(this,y,"_pt"),delete h[p]),f!=="all"&&(f[p]=1)}return this._initted&&!this._pt&&u&&Om(this),this},e.to=function(s,r){return new e(s,r,arguments[2])},e.from=function(s,r){return mg(1,arguments)},e.delayedCall=function(s,r,o,a){return new e(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:s,onComplete:r,onReverseComplete:r,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(s,r,o){return mg(2,arguments)},e.set=function(s,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new e(s,r)},e.killTweensOf=function(s,r,o){return Ii.killTweensOf(s,r,o)},e}(Cv);Uo(es.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Ar("staggerTo,staggerFrom,staggerFromTo",function(n){es[n]=function(){var e=new lr,t=qM.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var bA=function(e,t,i){return e[t]=i},KH=function(e,t,i){return e[t](i)},MIe=function(e,t,i,s){return e[t](s.fp,i)},EIe=function(e,t,i){return e.setAttribute(t,i)},wA=function(e,t){return Ui(e[t])?KH:dA(e[t])&&e.setAttribute?EIe:bA},YH=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},TIe=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},XH=function(e,t){var i=t._pt,s="";if(!e&&t.b)s=t.b;else if(e===1&&t.e)s=t.e;else{for(;i;)s=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+s,i=i._next;s+=t.c}t.set(t.t,t.p,s,t)},xA=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},AIe=function(e,t,i,s){for(var r=this._pt,o;r;)o=r._next,r.p===s&&r.modifier(e,t,i),r=o},IIe=function(e){for(var t=this._pt,i,s;t;)s=t._next,t.p===e&&!t.op||t.op===e?Nw(this,t,"_pt"):t.dep||(i=1),t=s;return!i},RIe=function(e,t,i,s){s.mSet(e,t,s.m.call(s.tween,i,s.mt),s)},jH=function(e){for(var t=e._pt,i,s,r,o;t;){for(i=t._next,s=r;s&&s.pr>t.pr;)s=s._next;(t._prev=s?s._prev:o)?t._prev._next=t:r=t,(t._next=s)?s._prev=t:o=t,t=i}e._pt=r},Ir=function(){function n(t,i,s,r,o,a,l,c,u){this.t=i,this.s=r,this.c=o,this.p=s,this.r=a||YH,this.d=l||this,this.set=c||bA,this.pr=u||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(i,s,r){this.mSet=this.mSet||this.set,this.set=RIe,this.m=i,this.mt=r,this.tween=s},n}();Ar(gA+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return mA[n]=1});to.TweenMax=to.TweenLite=es;to.TimelineLite=to.TimelineMax=lr;Ii=new lr({sortChildren:!1,defaults:yp,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Zr.stringFilter=BH;var Nd=[],R_={},PIe=[],zk=0,LIe=0,VS=function(e){return(R_[e]||PIe).map(function(t){return t()})},eE=function(){var e=Date.now(),t=[];e-zk>2&&(VS("matchMediaInit"),Nd.forEach(function(i){var s=i.queries,r=i.conditions,o,a,l,c;for(a in s)o=ba.matchMedia(s[a]).matches,o&&(l=1),o!==r[a]&&(r[a]=o,c=1);c&&(i.revert(),l&&t.push(i))}),VS("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(s){return i.add(null,s)})}),zk=e,VS("matchMedia"))},qH=function(){function n(t,i){this.selector=i&&ZM(i),this.data=[],this._r=[],this.isReverted=!1,this.id=LIe++,t&&this.add(t)}var e=n.prototype;return e.add=function(i,s,r){Ui(i)&&(r=s,s=i,i=Ui);var o=this,a=function(){var c=Ai,u=o.selector,d;return c&&c!==o&&c.data.push(o),r&&(o.selector=ZM(r)),Ai=o,d=s.apply(o,arguments),Ui(d)&&o._r.push(d),Ai=c,o.selector=u,o.isReverted=!1,d};return o.last=a,i===Ui?a(o,function(l){return o.add(null,l)}):i?o[i]=a:a},e.ignore=function(i){var s=Ai;Ai=null,i(this),Ai=s},e.getTweens=function(){var i=[];return this.data.forEach(function(s){return s instanceof n?i.push.apply(i,s.getTweens()):s instanceof es&&!(s.parent&&s.parent.data==="nested")&&i.push(s)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,s){var r=this;if(i?function(){for(var a=r.getTweens(),l=r.data.length,c;l--;)c=r.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(u){return a.splice(a.indexOf(u),1)}));for(a.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,d){return d.g-u.g||-1/0}).forEach(function(u){return u.t.revert(i)}),l=r.data.length;l--;)c=r.data[l],c instanceof lr?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof es)&&c.revert&&c.revert(i);r._r.forEach(function(u){return u(i,r)}),r.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),s)for(var o=Nd.length;o--;)Nd[o].id===this.id&&Nd.splice(o,1)},e.revert=function(i){this.kill(i||{})},n}(),kIe=function(){function n(t){this.contexts=[],this.scope=t,Ai&&Ai.data.push(this)}var e=n.prototype;return e.add=function(i,s,r){Ka(i)||(i={matches:i});var o=new qH(0,r||this.scope),a=o.conditions={},l,c,u;Ai&&!o.selector&&(o.selector=Ai.selector),this.contexts.push(o),s=o.add("onMatch",s),o.queries=i;for(c in i)c==="all"?u=1:(l=ba.matchMedia(i[c]),l&&(Nd.indexOf(o)<0&&Nd.push(o),(a[c]=l.matches)&&(u=1),l.addListener?l.addListener(eE):l.addEventListener("change",eE)));return u&&s(o,function(d){return o.add(null,d)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(s){return s.kill(i,!0)})},n}(),e1={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(s){return DH(s)})},timeline:function(e){return new lr(e)},getTweensOf:function(e,t){return Ii.getTweensOf(e,t)},getProperty:function(e,t,i,s){xs(e)&&(e=To(e)[0]);var r=kd(e||{}).get,o=i?xH:wH;return i==="native"&&(i=""),e&&(t?o((Ur[t]&&Ur[t].get||r)(e,t,i,s)):function(a,l,c){return o((Ur[a]&&Ur[a].get||r)(e,a,l,c))})},quickSetter:function(e,t,i){if(e=To(e),e.length>1){var s=e.map(function(u){return kr.quickSetter(u,t,i)}),r=s.length;return function(u){for(var d=r;d--;)s[d](u)}}e=e[0]||{};var o=Ur[t],a=kd(e),l=a.harness&&(a.harness.aliases||{})[t]||t,c=o?function(u){var d=new o;xf._pt=0,d.init(e,i?u+i:u,xf,0,[e]),d.render(1,d),xf._pt&&xA(1,xf)}:a.set(e,l);return o?c:function(u){return c(e,l,i?u+i:u,a,1)}},quickTo:function(e,t,i){var s,r=kr.to(e,sh((s={},s[t]="+=0.1",s.paused=!0,s),i||{})),o=function(l,c,u){return r.resetTo(t,l,c,u)};return o.tween=r,o},isTweening:function(e){return Ii.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Dd(e.ease,yp.ease)),Dk(yp,e||{})},config:function(e){return Dk(Zr,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,s=e.plugins,r=e.defaults,o=e.extendTimeline;(s||"").split(",").forEach(function(a){return a&&!Ur[a]&&!to[a]&&bv(t+" effect requires "+a+" plugin.")}),BS[t]=function(a,l,c){return i(To(a),Uo(l||{},r),c)},o&&(lr.prototype[t]=function(a,l,c){return this.add(BS[t](a,Ka(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){In[e]=Dd(t)},parseEase:function(e,t){return arguments.length?Dd(e,t):In},getById:function(e){return Ii.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new lr(e),s,r;for(i.smoothChildTiming=Tr(e.smoothChildTiming),Ii.remove(i),i._dp=0,i._time=i._tTime=Ii._time,s=Ii._first;s;)r=s._next,(t||!(!s._dur&&s instanceof es&&s.vars.onComplete===s._targets[0]))&&Ta(i,s,s._start-s._delay),s=r;return Ta(Ii,i,0),i},context:function(e,t){return e?new qH(e,t):Ai},matchMedia:function(e){return new kIe(e)},matchMediaRefresh:function(){return Nd.forEach(function(e){var t=e.conditions,i,s;for(s in t)t[s]&&(t[s]=!1,i=1);i&&e.revert()})||eE()},addEventListener:function(e,t){var i=R_[e]||(R_[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=R_[e],s=i&&i.indexOf(t);s>=0&&i.splice(s,1)},utils:{wrap:dIe,wrapYoyo:hIe,distribute:IH,random:PH,snap:RH,normalize:uIe,getUnit:Ws,clamp:oIe,splitColor:NH,toArray:To,selector:ZM,mapRange:kH,pipe:lIe,unitize:cIe,interpolate:fIe,shuffle:AH},install:gH,effects:BS,ticker:$r,updateRoot:lr.updateRoot,plugins:Ur,globalTimeline:Ii,core:{PropTween:Ir,globals:vH,Tween:es,Timeline:lr,Animation:Cv,getCache:kd,_removeLinkedListItem:Nw,reverting:function(){return js},context:function(e){return e&&Ai&&(Ai.data.push(e),e._ctx=Ai),Ai},suppressOverwrites:function(e){return uA=e}}};Ar("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return e1[n]=es[n]});$r.add(lr.updateRoot);xf=e1.to({},{duration:0});var OIe=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},DIe=function(e,t){var i=e._targets,s,r,o;for(s in t)for(r=i.length;r--;)o=e._ptLookup[r][s],o&&(o=o.d)&&(o._pt&&(o=OIe(o,s)),o&&o.modifier&&o.modifier(t[s],e,i[r],s))},$S=function(e,t){return{name:e,rawVars:1,init:function(s,r,o){o._onInit=function(a){var l,c;if(xs(r)&&(l={},Ar(r,function(u){return l[u]=1}),r=l),t){l={};for(c in r)l[c]=t(r[c]);r=l}DIe(a,r)}}}},kr=e1.registerPlugin({name:"attr",init:function(e,t,i,s,r){var o,a,l;this.tween=i;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],s,r,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var i=t._pt;i;)js?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},$S("roundProps",JM),$S("modifiers"),$S("snap",RH))||e1;es.version=lr.version=kr.version="3.12.5";mH=1;hA()&&wp();In.Power0;In.Power1;In.Power2;In.Power3;In.Power4;In.Linear;In.Quad;In.Cubic;In.Quart;In.Quint;In.Strong;In.Elastic;In.Back;In.SteppedEase;In.Bounce;In.Sine;In.Expo;In.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Hk,Hc,Uf,SA,md,Vk,CA,NIe=function(){return typeof window<"u"},$l={},ju=180/Math.PI,zf=Math.PI/180,of=Math.atan2,$k=1e8,MA=/([A-Z])/g,FIe=/(left|right|width|margin|padding|x)/i,BIe=/[\s,\(]\S/,La={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},tE=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},UIe=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},zIe=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},HIe=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},ZH=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},JH=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},VIe=function(e,t,i){return e.style[t]=i},$Ie=function(e,t,i){return e.style.setProperty(t,i)},GIe=function(e,t,i){return e._gsap[t]=i},WIe=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},KIe=function(e,t,i,s,r){var o=e._gsap;o.scaleX=o.scaleY=i,o.renderTransform(r,o)},YIe=function(e,t,i,s,r){var o=e._gsap;o[t]=i,o.renderTransform(r,o)},Li="transform",Rr=Li+"Origin",XIe=function n(e,t){var i=this,s=this.target,r=s.style,o=s._gsap;if(e in $l&&r){if(this.tfm=this.tfm||{},e!=="transform")e=La[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return i.tfm[a]=ml(s,a)}):this.tfm[e]=o.x?o[e]:ml(s,e),e===Rr&&(this.tfm.zOrigin=o.zOrigin);else return La.transform.split(",").forEach(function(a){return n.call(i,a,t)});if(this.props.indexOf(Li)>=0)return;o.svg&&(this.svgo=s.getAttribute("data-svg-origin"),this.props.push(Rr,t,"")),e=Li}(r||t)&&this.props.push(e,t,r[e])},QH=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},jIe=function(){var e=this.props,t=this.target,i=t.style,s=t._gsap,r,o;for(r=0;r<e.length;r+=3)e[r+1]?t[e[r]]=e[r+2]:e[r+2]?i[e[r]]=e[r+2]:i.removeProperty(e[r].substr(0,2)==="--"?e[r]:e[r].replace(MA,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)s[o]=this.tfm[o];s.svg&&(s.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),r=CA(),(!r||!r.isStart)&&!i[Li]&&(QH(i),s.zOrigin&&i[Rr]&&(i[Rr]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},e8=function(e,t){var i={target:e,props:[],revert:jIe,save:XIe};return e._gsap||kr.core.getCache(e),t&&t.split(",").forEach(function(s){return i.save(s)}),i},t8,nE=function(e,t){var i=Hc.createElementNS?Hc.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Hc.createElement(e);return i&&i.style?i:Hc.createElement(e)},Ba=function n(e,t,i){var s=getComputedStyle(e);return s[t]||s.getPropertyValue(t.replace(MA,"-$1").toLowerCase())||s.getPropertyValue(t)||!i&&n(e,xp(t)||t,1)||""},Gk="O,Moz,ms,Ms,Webkit".split(","),xp=function(e,t,i){var s=t||md,r=s.style,o=5;if(e in r&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(Gk[o]+e in r););return o<0?null:(o===3?"ms":o>=0?Gk[o]:"")+e},iE=function(){NIe()&&window.document&&(Hk=window,Hc=Hk.document,Uf=Hc.documentElement,md=nE("div")||{style:{}},nE("div"),Li=xp(Li),Rr=Li+"Origin",md.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",t8=!!xp("perspective"),CA=kr.core.reverting,SA=1)},GS=function n(e){var t=nE("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,s=this.nextSibling,r=this.style.cssText,o;if(Uf.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return i&&(s?i.insertBefore(this,s):i.appendChild(this)),Uf.removeChild(t),this.style.cssText=r,o},Wk=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},n8=function(e){var t;try{t=e.getBBox()}catch{t=GS.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===GS||(t=GS.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+Wk(e,["x","cx","x1"])||0,y:+Wk(e,["y","cy","y1"])||0,width:0,height:0}:t},i8=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&n8(e))},rh=function(e,t){if(t){var i=e.style,s;t in $l&&t!==Rr&&(t=Li),i.removeProperty?(s=t.substr(0,2),(s==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(s==="--"?t:t.replace(MA,"-$1").toLowerCase())):i.removeAttribute(t)}},Vc=function(e,t,i,s,r,o){var a=new Ir(e._pt,t,i,0,1,o?JH:ZH);return e._pt=a,a.b=s,a.e=r,e._props.push(i),a},Kk={deg:1,rad:1,turn:1},qIe={grid:1,flex:1},uu=function n(e,t,i,s){var r=parseFloat(i)||0,o=(i+"").trim().substr((r+"").length)||"px",a=md.style,l=FIe.test(t),c=e.tagName.toLowerCase()==="svg",u=(c?"client":"offset")+(l?"Width":"Height"),d=100,h=s==="px",f=s==="%",m,p,y,v;if(s===o||!r||Kk[s]||Kk[o])return r;if(o!=="px"&&!h&&(r=n(e,t,i,"px")),v=e.getCTM&&i8(e),(f||o==="%")&&($l[t]||~t.indexOf("adius")))return m=v?e.getBBox()[l?"width":"height"]:e[u],Wi(f?r/m*d:r/100*m);if(a[l?"width":"height"]=d+(h?o:s),p=~t.indexOf("adius")||s==="em"&&e.appendChild&&!c?e:e.parentNode,v&&(p=(e.ownerSVGElement||{}).parentNode),(!p||p===Hc||!p.appendChild)&&(p=Hc.body),y=p._gsap,y&&f&&y.width&&l&&y.time===$r.time&&!y.uncache)return Wi(r/y.width*d);if(f&&(t==="height"||t==="width")){var _=e.style[t];e.style[t]=d+s,m=e[u],_?e.style[t]=_:rh(e,t)}else(f||o==="%")&&!qIe[Ba(p,"display")]&&(a.position=Ba(e,"position")),p===e&&(a.position="static"),p.appendChild(md),m=md[u],p.removeChild(md),a.position="absolute";return l&&f&&(y=kd(p),y.time=$r.time,y.width=p[u]),Wi(h?m*r/d:m&&r?d/m*r:0)},ml=function(e,t,i,s){var r;return SA||iE(),t in La&&t!=="transform"&&(t=La[t],~t.indexOf(",")&&(t=t.split(",")[0])),$l[t]&&t!=="transform"?(r=Ev(e,s),r=t!=="transformOrigin"?r[t]:r.svg?r.origin:n1(Ba(e,Rr))+" "+r.zOrigin+"px"):(r=e.style[t],(!r||r==="auto"||s||~(r+"").indexOf("calc("))&&(r=t1[t]&&t1[t](e,t,i)||Ba(e,t)||_H(e,t)||(t==="opacity"?1:0))),i&&!~(r+"").trim().indexOf(" ")?uu(e,t,r,i)+i:r},ZIe=function(e,t,i,s){if(!i||i==="none"){var r=xp(t,e,1),o=r&&Ba(e,r,1);o&&o!==i?(t=r,i=o):t==="borderColor"&&(i=Ba(e,"borderTopColor"))}var a=new Ir(this._pt,e.style,t,0,1,XH),l=0,c=0,u,d,h,f,m,p,y,v,_,b,w,x;if(a.b=i,a.e=s,i+="",s+="",s==="auto"&&(p=e.style[t],e.style[t]=s,s=Ba(e,t)||s,p?e.style[t]=p:rh(e,t)),u=[i,s],BH(u),i=u[0],s=u[1],h=i.match(wf)||[],x=s.match(wf)||[],x.length){for(;d=wf.exec(s);)y=d[0],_=s.substring(l,d.index),m?m=(m+1)%5:(_.substr(-5)==="rgba("||_.substr(-5)==="hsla(")&&(m=1),y!==(p=h[c++]||"")&&(f=parseFloat(p)||0,w=p.substr((f+"").length),y.charAt(1)==="="&&(y=Bf(f,y)+w),v=parseFloat(y),b=y.substr((v+"").length),l=wf.lastIndex-b.length,b||(b=b||Zr.units[t]||w,l===s.length&&(s+=b,a.e+=b)),w!==b&&(f=uu(e,t,p,b)||0),a._pt={_next:a._pt,p:_||c===1?_:",",s:f,c:v-f,m:m&&m<4||t==="zIndex"?Math.round:0});a.c=l<s.length?s.substring(l,s.length):""}else a.r=t==="display"&&s==="none"?JH:ZH;return fH.test(s)&&(a.e=0),this._pt=a,a},Yk={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},JIe=function(e){var t=e.split(" "),i=t[0],s=t[1]||"50%";return(i==="top"||i==="bottom"||s==="left"||s==="right")&&(e=i,i=s,s=e),t[0]=Yk[i]||i,t[1]=Yk[s]||s,t.join(" ")},QIe=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,s=i.style,r=t.u,o=i._gsap,a,l,c;if(r==="all"||r===!0)s.cssText="",l=1;else for(r=r.split(","),c=r.length;--c>-1;)a=r[c],$l[a]&&(l=1,a=a==="transformOrigin"?Rr:Li),rh(i,a);l&&(rh(i,Li),o&&(o.svg&&i.removeAttribute("transform"),Ev(i,1),o.uncache=1,QH(s)))}},t1={clearProps:function(e,t,i,s,r){if(r.data!=="isFromStart"){var o=e._pt=new Ir(e._pt,t,i,0,0,QIe);return o.u=s,o.pr=-10,o.tween=r,e._props.push(i),1}}},Mv=[1,0,0,1,0,0],s8={},r8=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},Xk=function(e){var t=Ba(e,Li);return r8(t)?Mv:t.substr(7).match(hH).map(Wi)},EA=function(e,t){var i=e._gsap||kd(e),s=e.style,r=Xk(e),o,a,l,c;return i.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,r=[l.a,l.b,l.c,l.d,l.e,l.f],r.join(",")==="1,0,0,1,0,0"?Mv:r):(r===Mv&&!e.offsetParent&&e!==Uf&&!i.svg&&(l=s.display,s.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(c=1,a=e.nextElementSibling,Uf.appendChild(e)),r=Xk(e),l?s.display=l:rh(e,"display"),c&&(a?o.insertBefore(e,a):o?o.appendChild(e):Uf.removeChild(e))),t&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r)},sE=function(e,t,i,s,r,o){var a=e._gsap,l=r||EA(e,!0),c=a.xOrigin||0,u=a.yOrigin||0,d=a.xOffset||0,h=a.yOffset||0,f=l[0],m=l[1],p=l[2],y=l[3],v=l[4],_=l[5],b=t.split(" "),w=parseFloat(b[0])||0,x=parseFloat(b[1])||0,S,C,T,M;i?l!==Mv&&(C=f*y-m*p)&&(T=w*(y/C)+x*(-p/C)+(p*_-y*v)/C,M=w*(-m/C)+x*(f/C)-(f*_-m*v)/C,w=T,x=M):(S=n8(e),w=S.x+(~b[0].indexOf("%")?w/100*S.width:w),x=S.y+(~(b[1]||b[0]).indexOf("%")?x/100*S.height:x)),s||s!==!1&&a.smooth?(v=w-c,_=x-u,a.xOffset=d+(v*f+_*p)-v,a.yOffset=h+(v*m+_*y)-_):a.xOffset=a.yOffset=0,a.xOrigin=w,a.yOrigin=x,a.smooth=!!s,a.origin=t,a.originIsAbsolute=!!i,e.style[Rr]="0px 0px",o&&(Vc(o,a,"xOrigin",c,w),Vc(o,a,"yOrigin",u,x),Vc(o,a,"xOffset",d,a.xOffset),Vc(o,a,"yOffset",h,a.yOffset)),e.setAttribute("data-svg-origin",w+" "+x)},Ev=function(e,t){var i=e._gsap||new VH(e);if("x"in i&&!t&&!i.uncache)return i;var s=e.style,r=i.scaleX<0,o="px",a="deg",l=getComputedStyle(e),c=Ba(e,Rr)||"0",u,d,h,f,m,p,y,v,_,b,w,x,S,C,T,M,E,A,I,B,F,U,P,O,D,L,H,X,ne,ce,ae,_e;return u=d=h=p=y=v=_=b=w=0,f=m=1,i.svg=!!(e.getCTM&&i8(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(s[Li]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[Li]!=="none"?l[Li]:"")),s.scale=s.rotate=s.translate="none"),C=EA(e,i.svg),i.svg&&(i.uncache?(D=e.getBBox(),c=i.xOrigin-D.x+"px "+(i.yOrigin-D.y)+"px",O=""):O=!t&&e.getAttribute("data-svg-origin"),sE(e,O||c,!!O||i.originIsAbsolute,i.smooth!==!1,C)),x=i.xOrigin||0,S=i.yOrigin||0,C!==Mv&&(A=C[0],I=C[1],B=C[2],F=C[3],u=U=C[4],d=P=C[5],C.length===6?(f=Math.sqrt(A*A+I*I),m=Math.sqrt(F*F+B*B),p=A||I?of(I,A)*ju:0,_=B||F?of(B,F)*ju+p:0,_&&(m*=Math.abs(Math.cos(_*zf))),i.svg&&(u-=x-(x*A+S*B),d-=S-(x*I+S*F))):(_e=C[6],ce=C[7],H=C[8],X=C[9],ne=C[10],ae=C[11],u=C[12],d=C[13],h=C[14],T=of(_e,ne),y=T*ju,T&&(M=Math.cos(-T),E=Math.sin(-T),O=U*M+H*E,D=P*M+X*E,L=_e*M+ne*E,H=U*-E+H*M,X=P*-E+X*M,ne=_e*-E+ne*M,ae=ce*-E+ae*M,U=O,P=D,_e=L),T=of(-B,ne),v=T*ju,T&&(M=Math.cos(-T),E=Math.sin(-T),O=A*M-H*E,D=I*M-X*E,L=B*M-ne*E,ae=F*E+ae*M,A=O,I=D,B=L),T=of(I,A),p=T*ju,T&&(M=Math.cos(T),E=Math.sin(T),O=A*M+I*E,D=U*M+P*E,I=I*M-A*E,P=P*M-U*E,A=O,U=D),y&&Math.abs(y)+Math.abs(p)>359.9&&(y=p=0,v=180-v),f=Wi(Math.sqrt(A*A+I*I+B*B)),m=Wi(Math.sqrt(P*P+_e*_e)),T=of(U,P),_=Math.abs(T)>2e-4?T*ju:0,w=ae?1/(ae<0?-ae:ae):0),i.svg&&(O=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!r8(Ba(e,Li)),O&&e.setAttribute("transform",O))),Math.abs(_)>90&&Math.abs(_)<270&&(r?(f*=-1,_+=p<=0?180:-180,p+=p<=0?180:-180):(m*=-1,_+=_<=0?180:-180)),t=t||i.uncache,i.x=u-((i.xPercent=u&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+o,i.y=d-((i.yPercent=d&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-d)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+o,i.z=h+o,i.scaleX=Wi(f),i.scaleY=Wi(m),i.rotation=Wi(p)+a,i.rotationX=Wi(y)+a,i.rotationY=Wi(v)+a,i.skewX=_+a,i.skewY=b+a,i.transformPerspective=w+o,(i.zOrigin=parseFloat(c.split(" ")[2])||!t&&i.zOrigin||0)&&(s[Rr]=n1(c)),i.xOffset=i.yOffset=0,i.force3D=Zr.force3D,i.renderTransform=i.svg?tRe:t8?o8:eRe,i.uncache=0,i},n1=function(e){return(e=e.split(" "))[0]+" "+e[1]},WS=function(e,t,i){var s=Ws(t);return Wi(parseFloat(t)+parseFloat(uu(e,"x",i+"px",s)))+s},eRe=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,o8(e,t)},Gu="0deg",wm="0px",Wu=") ",o8=function(e,t){var i=t||this,s=i.xPercent,r=i.yPercent,o=i.x,a=i.y,l=i.z,c=i.rotation,u=i.rotationY,d=i.rotationX,h=i.skewX,f=i.skewY,m=i.scaleX,p=i.scaleY,y=i.transformPerspective,v=i.force3D,_=i.target,b=i.zOrigin,w="",x=v==="auto"&&e&&e!==1||v===!0;if(b&&(d!==Gu||u!==Gu)){var S=parseFloat(u)*zf,C=Math.sin(S),T=Math.cos(S),M;S=parseFloat(d)*zf,M=Math.cos(S),o=WS(_,o,C*M*-b),a=WS(_,a,-Math.sin(S)*-b),l=WS(_,l,T*M*-b+b)}y!==wm&&(w+="perspective("+y+Wu),(s||r)&&(w+="translate("+s+"%, "+r+"%) "),(x||o!==wm||a!==wm||l!==wm)&&(w+=l!==wm||x?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+Wu),c!==Gu&&(w+="rotate("+c+Wu),u!==Gu&&(w+="rotateY("+u+Wu),d!==Gu&&(w+="rotateX("+d+Wu),(h!==Gu||f!==Gu)&&(w+="skew("+h+", "+f+Wu),(m!==1||p!==1)&&(w+="scale("+m+", "+p+Wu),_.style[Li]=w||"translate(0, 0)"},tRe=function(e,t){var i=t||this,s=i.xPercent,r=i.yPercent,o=i.x,a=i.y,l=i.rotation,c=i.skewX,u=i.skewY,d=i.scaleX,h=i.scaleY,f=i.target,m=i.xOrigin,p=i.yOrigin,y=i.xOffset,v=i.yOffset,_=i.forceCSS,b=parseFloat(o),w=parseFloat(a),x,S,C,T,M;l=parseFloat(l),c=parseFloat(c),u=parseFloat(u),u&&(u=parseFloat(u),c+=u,l+=u),l||c?(l*=zf,c*=zf,x=Math.cos(l)*d,S=Math.sin(l)*d,C=Math.sin(l-c)*-h,T=Math.cos(l-c)*h,c&&(u*=zf,M=Math.tan(c-u),M=Math.sqrt(1+M*M),C*=M,T*=M,u&&(M=Math.tan(u),M=Math.sqrt(1+M*M),x*=M,S*=M)),x=Wi(x),S=Wi(S),C=Wi(C),T=Wi(T)):(x=d,T=h,S=C=0),(b&&!~(o+"").indexOf("px")||w&&!~(a+"").indexOf("px"))&&(b=uu(f,"x",o,"px"),w=uu(f,"y",a,"px")),(m||p||y||v)&&(b=Wi(b+m-(m*x+p*C)+y),w=Wi(w+p-(m*S+p*T)+v)),(s||r)&&(M=f.getBBox(),b=Wi(b+s/100*M.width),w=Wi(w+r/100*M.height)),M="matrix("+x+","+S+","+C+","+T+","+b+","+w+")",f.setAttribute("transform",M),_&&(f.style[Li]=M)},nRe=function(e,t,i,s,r){var o=360,a=xs(r),l=parseFloat(r)*(a&&~r.indexOf("rad")?ju:1),c=l-s,u=s+c+"deg",d,h;return a&&(d=r.split("_")[1],d==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),d==="cw"&&c<0?c=(c+o*$k)%o-~~(c/o)*o:d==="ccw"&&c>0&&(c=(c-o*$k)%o-~~(c/o)*o)),e._pt=h=new Ir(e._pt,t,i,s,c,UIe),h.e=u,h.u="deg",e._props.push(i),h},jk=function(e,t){for(var i in t)e[i]=t[i];return e},iRe=function(e,t,i){var s=jk({},i._gsap),r="perspective,force3D,transformOrigin,svgOrigin",o=i.style,a,l,c,u,d,h,f,m;s.svg?(c=i.getAttribute("transform"),i.setAttribute("transform",""),o[Li]=t,a=Ev(i,1),rh(i,Li),i.setAttribute("transform",c)):(c=getComputedStyle(i)[Li],o[Li]=t,a=Ev(i,1),o[Li]=c);for(l in $l)c=s[l],u=a[l],c!==u&&r.indexOf(l)<0&&(f=Ws(c),m=Ws(u),d=f!==m?uu(i,l,c,m):parseFloat(c),h=parseFloat(u),e._pt=new Ir(e._pt,a,l,d,h-d,tE),e._pt.u=m||0,e._props.push(l));jk(a,s)};Ar("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",s="Bottom",r="Left",o=(e<3?[t,i,s,r]:[t+r,t+i,s+i,s+r]).map(function(a){return e<2?n+a:"border"+a+n});t1[e>1?"border"+n:n]=function(a,l,c,u,d){var h,f;if(arguments.length<4)return h=o.map(function(m){return ml(a,m,c)}),f=h.join(" "),f.split(h[0]).length===5?h[0]:f;h=(u+"").split(" "),f={},o.forEach(function(m,p){return f[m]=h[p]=h[p]||h[(p-1)/2|0]}),a.init(l,f,d)}});var a8={name:"css",register:iE,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,s,r){var o=this._props,a=e.style,l=i.vars.startAt,c,u,d,h,f,m,p,y,v,_,b,w,x,S,C,T;SA||iE(),this.styles=this.styles||e8(e),T=this.styles.props,this.tween=i;for(p in t)if(p!=="autoRound"&&(u=t[p],!(Ur[p]&&$H(p,t,i,s,e,r)))){if(f=typeof u,m=t1[p],f==="function"&&(u=u.call(i,s,e,r),f=typeof u),f==="string"&&~u.indexOf("random(")&&(u=xv(u)),m)m(this,e,p,u,i)&&(C=1);else if(p.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(p)+"").trim(),u+="",Xc.lastIndex=0,Xc.test(c)||(y=Ws(c),v=Ws(u)),v?y!==v&&(c=uu(e,p,c,v)+v):y&&(u+=y),this.add(a,"setProperty",c,u,s,r,0,0,p),o.push(p),T.push(p,0,a[p]);else if(f!=="undefined"){if(l&&p in l?(c=typeof l[p]=="function"?l[p].call(i,s,e,r):l[p],xs(c)&&~c.indexOf("random(")&&(c=xv(c)),Ws(c+"")||c==="auto"||(c+=Zr.units[p]||Ws(ml(e,p))||""),(c+"").charAt(1)==="="&&(c=ml(e,p))):c=ml(e,p),h=parseFloat(c),_=f==="string"&&u.charAt(1)==="="&&u.substr(0,2),_&&(u=u.substr(2)),d=parseFloat(u),p in La&&(p==="autoAlpha"&&(h===1&&ml(e,"visibility")==="hidden"&&d&&(h=0),T.push("visibility",0,a.visibility),Vc(this,a,"visibility",h?"inherit":"hidden",d?"inherit":"hidden",!d)),p!=="scale"&&p!=="transform"&&(p=La[p],~p.indexOf(",")&&(p=p.split(",")[0]))),b=p in $l,b){if(this.styles.save(p),w||(x=e._gsap,x.renderTransform&&!t.parseTransform||Ev(e,t.parseTransform),S=t.smoothOrigin!==!1&&x.smooth,w=this._pt=new Ir(this._pt,a,Li,0,1,x.renderTransform,x,0,-1),w.dep=1),p==="scale")this._pt=new Ir(this._pt,x,"scaleY",x.scaleY,(_?Bf(x.scaleY,_+d):d)-x.scaleY||0,tE),this._pt.u=0,o.push("scaleY",p),p+="X";else if(p==="transformOrigin"){T.push(Rr,0,a[Rr]),u=JIe(u),x.svg?sE(e,u,0,S,0,this):(v=parseFloat(u.split(" ")[2])||0,v!==x.zOrigin&&Vc(this,x,"zOrigin",x.zOrigin,v),Vc(this,a,p,n1(c),n1(u)));continue}else if(p==="svgOrigin"){sE(e,u,1,S,0,this);continue}else if(p in s8){nRe(this,x,p,h,_?Bf(h,_+u):u);continue}else if(p==="smoothOrigin"){Vc(this,x,"smooth",x.smooth,u);continue}else if(p==="force3D"){x[p]=u;continue}else if(p==="transform"){iRe(this,u,e);continue}}else p in a||(p=xp(p)||p);if(b||(d||d===0)&&(h||h===0)&&!BIe.test(u)&&p in a)y=(c+"").substr((h+"").length),d||(d=0),v=Ws(u)||(p in Zr.units?Zr.units[p]:y),y!==v&&(h=uu(e,p,c,v)),this._pt=new Ir(this._pt,b?x:a,p,h,(_?Bf(h,_+d):d)-h,!b&&(v==="px"||p==="zIndex")&&t.autoRound!==!1?HIe:tE),this._pt.u=v||0,y!==v&&v!=="%"&&(this._pt.b=c,this._pt.r=zIe);else if(p in a)ZIe.call(this,e,p,c,_?_+u:u);else if(p in e)this.add(e,p,c||e[p],_?_+u:u,s,r);else if(p!=="parseTransform"){pA(p,u);continue}b||(p in a?T.push(p,0,a[p]):T.push(p,1,c||e[p])),o.push(p)}}C&&jH(this)},render:function(e,t){if(t.tween._time||!CA())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:ml,aliases:La,getSetter:function(e,t,i){var s=La[t];return s&&s.indexOf(",")<0&&(t=s),t in $l&&t!==Rr&&(e._gsap.x||ml(e,"x"))?i&&Vk===i?t==="scale"?WIe:GIe:(Vk=i||{})&&(t==="scale"?KIe:YIe):e.style&&!dA(e.style[t])?VIe:~t.indexOf("-")?$Ie:wA(e,t)},core:{_removeProperty:rh,_getMatrix:EA}};kr.utils.checkPrefix=xp;kr.core.getStyleSaver=e8;(function(n,e,t,i){var s=Ar(n+","+e+","+t,function(r){$l[r]=1});Ar(e,function(r){Zr.units[r]="deg",s8[r]=1}),La[s[13]]=n+","+e,Ar(i,function(r){var o=r.split(":");La[o[1]]=s[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Ar("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){Zr.units[n]="px"});kr.registerPlugin(a8);var l8=kr.registerPlugin(a8)||kr;l8.core.Tween;class sRe extends zp{constructor(){super();J(this,"keyDownEvent");J(this,"keyDownEvents");J(this,"curTarget");J(this,"point");J(this,"firstPersonSpeed",.005);J(this,"_collision",!1);J(this,"gui");J(this,"_gravity",!1);J(this,"_gravityIng",!1);J(this,"pathAnimation");J(this,"_oldfar");J(this,"_oldfov");this.operationType=ms.Roam,this.keyDownEvent=this.onKeyDown2.bind(this)}get collision(){return this._collision}set collision(t){this._collision=t}Enter(){this._oldfar=Ne.scene.camera.far,Ne.scene.camera.far=1e4,this.enter(),this.selElemetByID(null),this.setFirstPerson(!0),this._oldfov=Ne.scene.camera.fov,Ne.scene.onBeforeRender=()=>{!this._gravityIng&&this._gravity&&this.gravity(!0)},console.log("")}Quit(){this.quit(),Ne.scene.camera.far=this._oldfar,this._oldfov!==Ne.scene.camera.fov&&(Ne.scene.camera.fov=this._oldfov,Ne.scene.raycaster.getDepthByGPU(null,0)),this.selElemetByID(null),this.setFirstPerson(!1),Ne.scene.onBeforeRender=null,console.log("")}onMouseUp(t){super.onMouseUp(t)}onKeyDown(t){}onContextMenu(t){}setFirstPerson(t=!0){let i=Ne.scene.controls;if(t){if(this.keyDownEvents==null){let s=16.666;this.keyDownEvents=new Map,this.keyDownEvents.set("KeyW",new rf("KeyW",s)),this.keyDownEvents.set("KeyA",new rf("KeyA",s)),this.keyDownEvents.set("KeyS",new rf("KeyS",s)),this.keyDownEvents.set("KeyD",new rf("KeyD",s)),this.keyDownEvents.set("KeyQ",new rf("KeyQ",s)),this.keyDownEvents.set("KeyE",new rf("KeyE",s))}this.point==null&&(this.point=document.createElement("div"),this.point.style.position="absolute",this.point.style.background="#ff0000",this.point.style.top="50%",this.point.style.left="50%",this.point.style.width="10px",this.point.style.height="10px",this.point.style.border="2px",this.point.style.borderRadius="5px"),Ne.scene.goldenContainer.appendChild(this.point),i.minDistance=i.maxDistance=1e-6,i.azimuthRotateSpeed=-.3,i.polarRotateSpeed=-.3,i.truckSpeed=10,i.mouseButtons.wheel=yo.ACTION.NONE,i.mouseButtons.right=yo.ACTION.ROTATE,i.mouseButtons.left=yo.ACTION.ROTATE,this.curTarget=i.curTarget.clone(),i.setOrbitPoint(Ne.scene.camera.position.x,Ne.scene.camera.position.y,Ne.scene.camera.position.z),i.update();for(const s of this.keyDownEvents.values())s.addEventListener("holding",this.keyDownEvent)}else{i.minDistance=0,i.maxDistance=1/0,i.azimuthRotateSpeed=1,i.polarRotateSpeed=1,i.truckSpeed=2,i.mouseButtons.wheel=yo.ACTION.DOLLY,i.mouseButtons.right=yo.ACTION.ROTATE,i.mouseButtons.left=yo.ACTION.OFFSET,i.setOrbitPoint(this.curTarget.x,this.curTarget.y,this.curTarget.z),i.update();for(const s of this.keyDownEvents.values())s.removeEventListener("holding",this.keyDownEvent);this.point&&Ne.scene.goldenContainer.removeChild(this.point)}if(this.gui==null){let s=document.getElementById("container");s.style.marginLeft,this.gui=new cA,this.gui.domElement.style.position="absolute",this.gui.domElement.style.left="50%",this.gui.domElement.style.top="5px",this.gui.domElement.style.marginLeft="-122px",s.appendChild(this.gui.domElement),s.style.display,this.gui.root.title(""),this.gui.add({:5},"",1,100).onChange(r=>{this.firstPersonSpeed=r/1e3,window.setTimeout(()=>{Ne.scene.goldenContainer.focus()},100)}),this.gui.add({:!1},"").onChange(r=>{this.setGravity(r)}),this.gui.add({:!1},"").onChange(r=>{this.collision=r,window.setTimeout(()=>{Ne.scene.goldenContainer.focus()},100)}),this.gui.add({:Ne.scene.camera.fov},"",1,100).onChange(r=>{Ne.scene.camera.fov=r,Ne.scene.raycaster.getDepthByGPU(null,0),Ne.scene.enableRender()})}t?(this.gui.domElement.style.display="",this._gravity&&this.setGravity(!0)):this.gui.domElement.style.display="none"}setGravity(t){t?(this.keyDownEvents.get("KeyE").removeEventListener("holding",this.keyDownEvent),this.keyDownEvents.get("KeyQ").removeEventListener("holding",this.keyDownEvent)):(this.keyDownEvents.get("KeyE").addEventListener("holding",this.keyDownEvent),this.keyDownEvents.get("KeyQ").addEventListener("holding",this.keyDownEvent)),this.gravity(t),window.setTimeout(()=>{Ne.scene.goldenContainer.focus()},100)}gravity(t){if(this._gravity=t,this._gravityIng||!this._gravity)return;let i=Ne.scene.raycaster.getDepthByGPU(null,0);if(i>1){let s=i-1.7;if(Math.abs(s)<.001)return;let r=9.8,o=Math.sqrt(2*Math.abs(s)/r);const a=Ne.scene.controls,l={value:0},c=this;let u=0;if(s<.5){a.elevate(-s,!1),a.update(),Ne.scene.enableRender();return}this.pathAnimation&&this.pathAnimation.kill(),this.pathAnimation=l8.fromTo(l,{value:0},{value:o,duration:o,overwrite:!0,paused:!0,ease:"none",onUpdateParams:[l],onUpdate({value:d}){if(!this.isActive())return;let h=d;d=1/2*r*h*h;let f=-(d-u);f!=0&&(a.elevate(f,!1),a.update(),Ne.scene.enableRender(),u=d)},onStart(){c._gravityIng=!0,a.enabled=!1},onComplete(){c._gravityIng=!1,a.enabled=!0}}),this.pathAnimation.play(0)}}onKeyDown2(t){let i=t.deltaTime,s=t.originalEvent.code;const r=this.firstPersonSpeed;switch(s){case"KeyA":if(this.collision){let o=Ne.scene.raycaster.getDepthByGPU(Ne.scene.controls.azimuthAngle+Math.PI/2,Math.PI/2);if(o!=-1&&o<=.5)return}Ne.scene.controls.truck(-r*i,0,!1);break;case"KeyD":if(this.collision){let o=Ne.scene.raycaster.getDepthByGPU(Ne.scene.controls.azimuthAngle-Math.PI/2,Math.PI/2);if(o!=-1&&o<=.5)return}Ne.scene.controls.truck(r*i,0,!1);break;case"KeyW":if(this.collision){let o=Ne.scene.raycaster.getDepthByGPU(null,Math.PI/2);if(o!=-1&&o<=.6)return}Ne.scene.controls.forward(r*i,!1);break;case"KeyS":if(this.collision){let o=Ne.scene.raycaster.getDepthByGPU(Ne.scene.controls.azimuthAngle+Math.PI,Math.PI/2);if(o!=-1&&o<=.6)return}Ne.scene.controls.forward(-r*i,!1);break;case"KeyQ":Ne.scene.controls.elevate(r*i,!1);break;case"KeyE":Ne.scene.controls.elevate(-r*i,!1);break}Ne.scene.controls.update(),Ne.scene.enableRender()}}class rRe extends zp{constructor(){super();J(this,"_tempRulers");J(this,"_startPoint");this.operationType=ms.Measure,this._tempRulers=[],this._startPoint=null}Enter(){this.enter(),this.selElemetByID(null),console.log("")}Quit(){this.quit(),this.selElemetByID(null),this.clearRuler(),console.log("")}onMouseUp(t){if(t.button==2)return;let i=t.clientX-this.lastX,s=t.clientY-this.lastY;if(Math.abs(i)<=1&&Math.abs(s)<=0)if(this._startPoint==null){let r=Ne.scene.raycaster.getIntersectMesh(t);if(r){let o=new Sa;o.edit=!1,this._tempRulers.push(new Sa),this._startPoint=r.intersectPoint}}else this.onMouseMove(t),this._startPoint=null;this.lastX=null,this.lastY=null,this._moveId=null,Ne.scene.enableRender()}onMouseMove(t){if(super.onMouseMove(t),this._startPoint!=null){let i=Ne.scene.raycaster.getIntersectMesh(t);if(i){let s=this._tempRulers[this._tempRulers.length-1];s&&(s.showRuler(this._startPoint,i.intersectPoint),Ne.scene.enableRender())}}}onKeyDown(t){(t.code==="Escape"||t.keyCode===27)&&this.clearRuler()}onContextMenu(t){}clearRuler(){for(const t of this._tempRulers)t.dispose();this._tempRulers=[],Ne.scene.enableRender()}}const jn=class jn{constructor(e){window.App=jn,jn.event=new qa;let t=new URLSearchParams(window.location.search||window.location.hash.substr(1));if(jn.scene=new LAe(e),jn.Base=new zp,jn.allOperation=new Map,jn.allOperation.set(ms.Base,jn.Base),jn.currentOperation=jn.Base,jn.currentOperation.Enter(),t.has("progressive")){jn.scene.progressive=!0;let i=t.get("progressive");i&&(window.randerOnece=Number(i))}if(t.has("model"))switch(t.get("model")){case"1":vv.gltfLoader(jn.scene,"glb/1.glb","rac_basic_sample_project");break;case"2":vv.gltfLoader(jn.scene,"glb/2.glb","rac_advanced_sample_project");break;case"3":jb.tilesLoaders(jn.scene,"3dtiles/tileset.json",!0);break}}static getElementByID(e){if(e==null)return null;for(const t of jn.scene.mapModels.values())if(t.allElementData.has(e))return t.allElementData.get(e);return null}static runCommand(e){if(this.allOperation.get(e)==null)switch(e){case ms.MaterialEdit:jn.allOperation.set(ms.MaterialEdit,new p2e);break;case ms.ModelEdit:jn.allOperation.set(ms.ModelEdit,new BM);break;case ms.Roam:jn.allOperation.set(ms.Roam,new sRe);break;case ms.Measure:jn.allOperation.set(ms.Measure,new rRe);break;case ms.Carousel:jn.allOperation.set(ms.Carousel,new m2e);break}jn.currentOperation.Quit();for(let i of this.allOperation.keys())if(i==e){jn.currentOperation=this.allOperation.get(i),jn.currentOperation.Enter();return}}};J(jn,"scene"),J(jn,"currentOperation"),J(jn,"allOperation"),J(jn,"Base"),J(jn,"event");let Ne=jn;const oRe={class:"dialog-footer"},aRe=se({__name:"OpenTiles",setup(n,{expose:e}){const t=V(!1),i=V("3dtiles/tileset.json"),s=()=>{t.value=!1,jb.tilesLoaders(Ne.scene,i.value)},r=()=>{t.value=!1};return e({dialogVisible:t}),(o,a)=>{const l=Ut("el-input"),c=Ut("el-form-item"),u=Ut("el-form"),d=Ut("el-button"),h=Ut("el-dialog");return k(),Re(h,{modelValue:t.value,"onUpdate:modelValue":a[1]||(a[1]=f=>t.value=f),title:"3Dtiles",width:"500px"},{footer:pe(()=>[te("span",oRe,[le(d,{onClick:r},{default:pe(()=>[Yt(" ")]),_:1}),le(d,{type:"primary",onClick:s},{default:pe(()=>[Yt("")]),_:1})])]),default:pe(()=>[le(u,{"label-width":"70px"},{default:pe(()=>[le(c,{label:"url"},{default:pe(()=>[le(l,{modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=f=>i.value=f)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),lRe=(n,e)=>{const t=n.__vccOpts||n;for(const[i,s]of e)t[i]=s;return t},c8=lRe(aRe,[["__scopeId","data-v-94229a7e"]]),cRe=Object.freeze(Object.defineProperty({__proto__:null,default:c8},Symbol.toStringTag,{value:"Module"}));class rE{}J(rE,"OpenTiles");const uRe={root:{type:St.row,content:[{type:St.column,width:8,minWidth:1,content:[{type:"component",title:"",header:{show:"top",popout:!1},componentType:"ProjectViewComponent",componentState:{},height:50,isClosable:!0},{type:"component",title:"",header:{show:"top",popout:!1},componentType:"AttributeView",componentState:{},isClosable:!0}]},{type:"component",title:"CAD View",header:{show:"top",popout:!1},componentType:"View3D",componentState:{}}]}},dRe={miniRow:uRe},hRe={class:"full-height"},fRe={id:"topnav",class:"topnav"},pRe=te("a",{href:"https://github.com/cowboy1997/Revit2GLTF"},"Cowboy1997",-1),mRe={id:"fileInputGLTF",for:"fileGLTF",title:"Import ifc from File"},gRe=se({__name:"App",setup(n){const e=V(null);Ft(()=>{document.addEventListener("DOMContentLoaded",async()=>{await e.value.loadGLLayout(dRe.miniRow)})});const t=V();rE.OpenTiles=t;const i=r=>{let o=r.srcElement,a=URL.createObjectURL(o.files[0]);vv.gltfLoader(Ne.scene,a,o.files[0].name)},s=()=>{rE.OpenTiles.value.dialogVisible=!0};return(r,o)=>(k(),Y("div",hRe,[te("div",fRe,[pRe,te("label",mRe,[Yt("glb "),te("input",{id:"fileGLTF",name:"fileGLTF",type:"file",accept:".glb",multiple:"",style:{display:"none"},onInput:i},null,32)]),te("a",{href:"#",id:"fileInputTiles",onClick:s},"3dtiles")]),le(y_e,{ref_key:"GLayoutRoot",ref:e,"glc-path":"./",style:{width:"100%",top:"25px",bottom:"0px",position:"absolute"}},null,512),le(c8,{ref_key:"openTiles",ref:t},null,512)]))}}),u8=_D(gRe);u8.use(jye);u8.mount("#app");export{Fo as $,NM as A,xRe as B,$z as C,ARe as D,IRe as E,mt as F,SRe as G,MRe as H,a6 as I,cA as J,dTe as K,sc as L,Im as M,ul as N,ms as O,bo as P,E_ as Q,FM as R,Rm as S,lH as T,y1 as U,G as V,mv as W,un as X,Ee as Y,xa as Z,lRe as _,Ut as a,ts as a0,tt as a1,wn as a2,BM as a3,Mn as a4,Tt as a5,ERe as a6,TRe as a7,vt as a8,Wb as a9,k as b,Y as c,se as d,le as e,Zt as f,Re as g,te as h,l8 as i,Ne as j,Yt as k,_Re as l,m_e as m,y_e as n,Ft as o,yRe as p,Bt as q,V as r,CRe as s,Je as t,g as u,an as v,pe as w,IY as x,bRe as y,wRe as z};
