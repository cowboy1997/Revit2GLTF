var Io=Object.defineProperty;var Po=(le,oe,ie)=>oe in le?Io(le,oe,{enumerable:!0,configurable:!0,writable:!0,value:ie}):le[oe]=ie;var no=(le,oe,ie)=>Po(le,typeof oe!="symbol"?oe+"":oe,ie);import{V as Vector3$1,T as Texture,F as Frustum,O as OrthographicCamera,S as ShaderChunk,C as Color$2,a as Sphere,R as Ray,L as LineBasicMaterial,b as RGBAFormat,c as LinearFilter,B as BufferGeometry,d as Float32BufferAttribute,e as Vector2$1,M as MeshBasicMaterial,f as MeshPhongMaterial,g as MeshStandardMaterial,h as Object3D,i as LineSegments,j as Mesh,k as Matrix4$1,Q as Quaternion$1,N as NearestFilter,D as DoubleSide,U as Uint32BufferAttribute,l as Matrix3$1,m as ShapeUtils$1,n as ShaderMaterial,o as UniformsUtils,p as BackSide,q as BoxGeometry,r as TextureLoader,s as RepeatWrapping,t as Raycaster,E as Euler,u as Box3,v as MeshDepthMaterial,w as RGBADepthPacking,I as InstancedMesh,x as InstancedBufferAttribute,y as BatchedMesh,z as Uint8BufferAttribute,G as Group,P as PlaneGeometry,A as Plane,H as Int32BufferAttribute,J as BufferAttribute,K as FrontSide,W as Loader,X as FileLoader,Y as SRGBColorSpace$1,Z as LinearSRGBColorSpace$1,_ as ColorManagement$1,$ as LoaderUtils,a0 as ClampToEdgeWrapping,a1 as MeshLambertMaterial,a2 as EquirectangularReflectionMapping,a3 as Bone,a4 as PropertyBinding,a5 as SkinnedMesh,a6 as Line,a7 as Skeleton$1,a8 as AmbientLight,a9 as Uint16BufferAttribute,aa as Vector4,ab as AnimationClip,ac as VectorKeyframeTrack,ad as MathUtils$1,ae as QuaternionKeyframeTrack,af as NumberKeyframeTrack,ag as SpotLight,ah as PointLight,ai as DirectionalLight,aj as MeshPhysicalMaterial,ak as ImageBitmapLoader,al as InterleavedBuffer,am as LinearMipmapLinearFilter,an as PointsMaterial,ao as Material,ap as LineLoop,aq as Points,ar as PerspectiveCamera,as as InterpolateLinear,at as BufferGeometryLoader,au as RectAreaLight,av as CanvasTexture,aw as SpriteMaterial,ax as Sprite,ay as Curve$1,az as TrianglesDrawMode,aA as TriangleFanDrawMode,aB as TriangleStripDrawMode,aC as DataTextureLoader,aD as HalfFloatType,aE as NearestMipmapNearestFilter,aF as LinearMipmapNearestFilter,aG as NearestMipmapLinearFilter,aH as MirroredRepeatWrapping,aI as InterpolateDiscrete,aJ as InterleavedBufferAttribute,aK as FloatType,aL as RedFormat,aM as NoColorSpace$1,aN as Interpolant,aO as CatmullRomCurve3$1,aP as DataUtils,aQ as EventDispatcher,aR as Clock,aS as THREE$1,aT as Spherical,aU as Scene,aV as WebGLRenderer,aW as LinearToneMapping,aX as WebGLRenderTarget,aY as BoxHelper,aZ as Box3Helper,a_ as PMREMGenerator,a$ as NoToneMapping,b0 as LoadingManager,b1 as ArrowHelper,b2 as NormalBlending,b3 as DefaultLoadingManager}from"./three@0.172.0-D3jjpEWA.js";import{E as E$3}from"./jspdf@2.5.1-BCR2pA1Q.js";import html2canvas from"./html2canvas@1.4.1-C3fx88d4.js";import{I as IfcAPI2}from"./web-ifc@0.0.59-EuZhwkro.js";import"./index-Cakg7_Yn.js";(function(){const oe=document.createElement("link").relList;if(oe&&oe.supports&&oe.supports("modulepreload"))return;for(const de of document.querySelectorAll('link[rel="modulepreload"]'))ue(de);new MutationObserver(de=>{for(const he of de)if(he.type==="childList")for(const pe of he.addedNodes)pe.tagName==="LINK"&&pe.rel==="modulepreload"&&ue(pe)}).observe(document,{childList:!0,subtree:!0});function ie(de){const he={};return de.integrity&&(he.integrity=de.integrity),de.referrerPolicy&&(he.referrerPolicy=de.referrerPolicy),de.crossOrigin==="use-credentials"?he.credentials="include":de.crossOrigin==="anonymous"?he.credentials="omit":he.credentials="same-origin",he}function ue(de){if(de.ep)return;de.ep=!0;const he=ie(de);fetch(de.href,he)}})();/**
* @vue/shared v3.5.10
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(le){const oe=Object.create(null);for(const ie of le.split(","))oe[ie]=1;return ie=>ie in oe}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=le=>le.charCodeAt(0)===111&&le.charCodeAt(1)===110&&(le.charCodeAt(2)>122||le.charCodeAt(2)<97),isModelListener=le=>le.startsWith("onUpdate:"),extend=Object.assign,remove=(le,oe)=>{const ie=le.indexOf(oe);ie>-1&&le.splice(ie,1)},hasOwnProperty$g=Object.prototype.hasOwnProperty,hasOwn$b=(le,oe)=>hasOwnProperty$g.call(le,oe),isArray$3=Array.isArray,isMap$1=le=>toTypeString(le)==="[object Map]",isSet$1=le=>toTypeString(le)==="[object Set]",isDate=le=>toTypeString(le)==="[object Date]",isFunction$2=le=>typeof le=="function",isString$1=le=>typeof le=="string",isSymbol$4=le=>typeof le=="symbol",isObject$d=le=>le!==null&&typeof le=="object",isPromise$1=le=>(isObject$d(le)||isFunction$2(le))&&isFunction$2(le.then)&&isFunction$2(le.catch),objectToString$1=Object.prototype.toString,toTypeString=le=>objectToString$1.call(le),toRawType=le=>toTypeString(le).slice(8,-1),isPlainObject$1=le=>toTypeString(le)==="[object Object]",isIntegerKey=le=>isString$1(le)&&le!=="NaN"&&le[0]!=="-"&&""+parseInt(le,10)===le,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=le=>{const oe=Object.create(null);return ie=>oe[ie]||(oe[ie]=le(ie))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(le=>le.replace(camelizeRE,(oe,ie)=>ie?ie.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(le=>le.replace(hyphenateRE,"-$1").toLowerCase()),capitalize$1=cacheStringFunction(le=>le.charAt(0).toUpperCase()+le.slice(1)),toHandlerKey=cacheStringFunction(le=>le?`on${capitalize$1(le)}`:""),hasChanged=(le,oe)=>!Object.is(le,oe),invokeArrayFns=(le,...oe)=>{for(let ie=0;ie<le.length;ie++)le[ie](...oe)},def=(le,oe,ie,ue=!1)=>{Object.defineProperty(le,oe,{configurable:!0,enumerable:!1,writable:ue,value:ie})},looseToNumber=le=>{const oe=parseFloat(le);return isNaN(oe)?le:oe},toNumber$1=le=>{const oe=isString$1(le)?Number(le):NaN;return isNaN(oe)?le:oe};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(le){if(isArray$3(le)){const oe={};for(let ie=0;ie<le.length;ie++){const ue=le[ie],de=isString$1(ue)?parseStringStyle(ue):normalizeStyle(ue);if(de)for(const he in de)oe[he]=de[he]}return oe}else if(isString$1(le)||isObject$d(le))return le}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(le){const oe={};return le.replace(styleCommentRE,"").split(listDelimiterRE).forEach(ie=>{if(ie){const ue=ie.split(propertyDelimiterRE);ue.length>1&&(oe[ue[0].trim()]=ue[1].trim())}}),oe}function normalizeClass(le){let oe="";if(isString$1(le))oe=le;else if(isArray$3(le))for(let ie=0;ie<le.length;ie++){const ue=normalizeClass(le[ie]);ue&&(oe+=ue+" ")}else if(isObject$d(le))for(const ie in le)le[ie]&&(oe+=ie+" ");return oe.trim()}function normalizeProps(le){if(!le)return null;let{class:oe,style:ie}=le;return oe&&!isString$1(oe)&&(le.class=normalizeClass(oe)),ie&&(le.style=normalizeStyle(ie)),le}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(le){return!!le||le===""}function looseCompareArrays(le,oe){if(le.length!==oe.length)return!1;let ie=!0;for(let ue=0;ie&&ue<le.length;ue++)ie=looseEqual(le[ue],oe[ue]);return ie}function looseEqual(le,oe){if(le===oe)return!0;let ie=isDate(le),ue=isDate(oe);if(ie||ue)return ie&&ue?le.getTime()===oe.getTime():!1;if(ie=isSymbol$4(le),ue=isSymbol$4(oe),ie||ue)return le===oe;if(ie=isArray$3(le),ue=isArray$3(oe),ie||ue)return ie&&ue?looseCompareArrays(le,oe):!1;if(ie=isObject$d(le),ue=isObject$d(oe),ie||ue){if(!ie||!ue)return!1;const de=Object.keys(le).length,he=Object.keys(oe).length;if(de!==he)return!1;for(const pe in le){const _e=le.hasOwnProperty(pe),Ce=oe.hasOwnProperty(pe);if(_e&&!Ce||!_e&&Ce||!looseEqual(le[pe],oe[pe]))return!1}}return String(le)===String(oe)}function looseIndexOf(le,oe){return le.findIndex(ie=>looseEqual(ie,oe))}const isRef$1=le=>!!(le&&le.__v_isRef===!0),toDisplayString=le=>isString$1(le)?le:le==null?"":isArray$3(le)||isObject$d(le)&&(le.toString===objectToString$1||!isFunction$2(le.toString))?isRef$1(le)?toDisplayString(le.value):JSON.stringify(le,replacer,2):String(le),replacer=(le,oe)=>isRef$1(oe)?replacer(le,oe.value):isMap$1(oe)?{[`Map(${oe.size})`]:[...oe.entries()].reduce((ie,[ue,de],he)=>(ie[stringifySymbol(ue,he)+" =>"]=de,ie),{})}:isSet$1(oe)?{[`Set(${oe.size})`]:[...oe.values()].map(ie=>stringifySymbol(ie))}:isSymbol$4(oe)?stringifySymbol(oe):isObject$d(oe)&&!isArray$3(oe)&&!isPlainObject$1(oe)?String(oe):oe,stringifySymbol=(le,oe="")=>{var ie;return isSymbol$4(le)?`Symbol(${(ie=le.description)!=null?ie:oe})`:le};/**
* @vue/reactivity v3.5.10
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(oe=!1){this.detached=oe,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!oe&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let oe,ie;if(this.scopes)for(oe=0,ie=this.scopes.length;oe<ie;oe++)this.scopes[oe].pause();for(oe=0,ie=this.effects.length;oe<ie;oe++)this.effects[oe].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let oe,ie;if(this.scopes)for(oe=0,ie=this.scopes.length;oe<ie;oe++)this.scopes[oe].resume();for(oe=0,ie=this.effects.length;oe<ie;oe++)this.effects[oe].resume()}}run(oe){if(this._active){const ie=activeEffectScope;try{return activeEffectScope=this,oe()}finally{activeEffectScope=ie}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(oe){if(this._active){let ie,ue;for(ie=0,ue=this.effects.length;ie<ue;ie++)this.effects[ie].stop();for(ie=0,ue=this.cleanups.length;ie<ue;ie++)this.cleanups[ie]();if(this.scopes)for(ie=0,ue=this.scopes.length;ie<ue;ie++)this.scopes[ie].stop(!0);if(!this.detached&&this.parent&&!oe){const de=this.parent.scopes.pop();de&&de!==this&&(this.parent.scopes[this.index]=de,de.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope(le){return new EffectScope(le)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(le,oe=!1){activeEffectScope&&activeEffectScope.cleanups.push(le)}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(oe){this.fn=oe,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const oe=activeSub,ie=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=oe,shouldTrack=ie,this.flags&=-3}}stop(){if(this.flags&1){for(let oe=this.deps;oe;oe=oe.nextDep)removeSub(oe);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub;function batch(le){le.flags|=8,le.next=batchedSub,batchedSub=le}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;let le;for(;batchedSub;){let oe=batchedSub,ie;for(;oe;)oe.flags&1||(oe.flags&=-9),oe=oe.next;for(oe=batchedSub,batchedSub=void 0;oe;){if(ie=oe.next,oe.next=void 0,oe.flags&=-9,oe.flags&1)try{oe.trigger()}catch(ue){le||(le=ue)}oe=ie}}if(le)throw le}function prepareDeps(le){for(let oe=le.deps;oe;oe=oe.nextDep)oe.version=-1,oe.prevActiveLink=oe.dep.activeLink,oe.dep.activeLink=oe}function cleanupDeps(le){let oe,ie=le.depsTail,ue=ie;for(;ue;){const de=ue.prevDep;ue.version===-1?(ue===ie&&(ie=de),removeSub(ue),removeDep(ue)):oe=ue,ue.dep.activeLink=ue.prevActiveLink,ue.prevActiveLink=void 0,ue=de}le.deps=oe,le.depsTail=ie}function isDirty(le){for(let oe=le.deps;oe;oe=oe.nextDep)if(oe.dep.version!==oe.version||oe.dep.computed&&(refreshComputed(oe.dep.computed)||oe.dep.version!==oe.version))return!0;return!!le._dirty}function refreshComputed(le){if(le.flags&4&&!(le.flags&16)||(le.flags&=-17,le.globalVersion===globalVersion))return;le.globalVersion=globalVersion;const oe=le.dep;if(le.flags|=2,oe.version>0&&!le.isSSR&&le.deps&&!isDirty(le)){le.flags&=-3;return}const ie=activeSub,ue=shouldTrack;activeSub=le,shouldTrack=!0;try{prepareDeps(le);const de=le.fn(le._value);(oe.version===0||hasChanged(de,le._value))&&(le._value=de,oe.version++)}catch(de){throw oe.version++,de}finally{activeSub=ie,shouldTrack=ue,cleanupDeps(le),le.flags&=-3}}function removeSub(le,oe=!1){const{dep:ie,prevSub:ue,nextSub:de}=le;if(ue&&(ue.nextSub=de,le.prevSub=void 0),de&&(de.prevSub=ue,le.nextSub=void 0),ie.subs===le&&(ie.subs=ue),!ie.subs&&ie.computed){ie.computed.flags&=-5;for(let he=ie.computed.deps;he;he=he.nextDep)removeSub(he,!0)}!oe&&!--ie.sc&&ie.map&&ie.map.delete(ie.key)}function removeDep(le){const{prevDep:oe,nextDep:ie}=le;oe&&(oe.nextDep=ie,le.prevDep=void 0),ie&&(ie.prevDep=oe,le.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const le=trackStack.pop();shouldTrack=le===void 0?!0:le}function cleanupEffect(le){const{cleanup:oe}=le;if(le.cleanup=void 0,oe){const ie=activeSub;activeSub=void 0;try{oe()}finally{activeSub=ie}}}let globalVersion=0,Link$1=class{constructor(oe,ie){this.sub=oe,this.dep=ie,this.version=ie.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}};class Dep{constructor(oe){this.computed=oe,this.version=0,this.activeLink=void 0,this.subs=void 0,this.target=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(oe){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let ie=this.activeLink;if(ie===void 0||ie.sub!==activeSub)ie=this.activeLink=new Link$1(activeSub,this),activeSub.deps?(ie.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=ie,activeSub.depsTail=ie):activeSub.deps=activeSub.depsTail=ie,addSub(ie);else if(ie.version===-1&&(ie.version=this.version,ie.nextDep)){const ue=ie.nextDep;ue.prevDep=ie.prevDep,ie.prevDep&&(ie.prevDep.nextDep=ue),ie.prevDep=activeSub.depsTail,ie.nextDep=void 0,activeSub.depsTail.nextDep=ie,activeSub.depsTail=ie,activeSub.deps===ie&&(activeSub.deps=ue)}return ie}trigger(oe){this.version++,globalVersion++,this.notify(oe)}notify(oe){startBatch();try{for(let ie=this.subs;ie;ie=ie.prevSub)ie.sub.notify()&&ie.sub.dep.notify()}finally{endBatch()}}}function addSub(le){if(le.dep.sc++,le.sub.flags&4){const oe=le.dep.computed;if(oe&&!le.dep.subs){oe.flags|=20;for(let ue=oe.deps;ue;ue=ue.nextDep)addSub(ue)}const ie=le.dep.subs;ie!==le&&(le.prevSub=ie,ie&&(ie.nextSub=le)),le.dep.subs=le}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(le,oe,ie){if(shouldTrack&&activeSub){let ue=targetMap.get(le);ue||targetMap.set(le,ue=new Map);let de=ue.get(ie);de||(ue.set(ie,de=new Dep),de.target=le,de.map=ue,de.key=ie),de.track()}}function trigger(le,oe,ie,ue,de,he){const pe=targetMap.get(le);if(!pe){globalVersion++;return}const _e=Ce=>{Ce&&Ce.trigger()};if(startBatch(),oe==="clear")pe.forEach(_e);else{const Ce=isArray$3(le),xe=Ce&&isIntegerKey(ie);if(Ce&&ie==="length"){const Ie=Number(ue);pe.forEach(($e,Ne)=>{(Ne==="length"||Ne===ARRAY_ITERATE_KEY||!isSymbol$4(Ne)&&Ne>=Ie)&&_e($e)})}else switch(ie!==void 0&&_e(pe.get(ie)),xe&&_e(pe.get(ARRAY_ITERATE_KEY)),oe){case"add":Ce?xe&&_e(pe.get("length")):(_e(pe.get(ITERATE_KEY)),isMap$1(le)&&_e(pe.get(MAP_KEY_ITERATE_KEY)));break;case"delete":Ce||(_e(pe.get(ITERATE_KEY)),isMap$1(le)&&_e(pe.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap$1(le)&&_e(pe.get(ITERATE_KEY));break}}endBatch()}function getDepFromReactive(le,oe){const ie=targetMap.get(le);return ie&&ie.get(oe)}function reactiveReadArray(le){const oe=toRaw(le);return oe===le?oe:(track(oe,"iterate",ARRAY_ITERATE_KEY),isShallow(le)?oe:oe.map(toReactive))}function shallowReadArray(le){return track(le=toRaw(le),"iterate",ARRAY_ITERATE_KEY),le}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...le){return reactiveReadArray(this).concat(...le.map(oe=>isArray$3(oe)?reactiveReadArray(oe):oe))},entries(){return iterator(this,"entries",le=>(le[1]=toReactive(le[1]),le))},every(le,oe){return apply$5(this,"every",le,oe,void 0,arguments)},filter(le,oe){return apply$5(this,"filter",le,oe,ie=>ie.map(toReactive),arguments)},find(le,oe){return apply$5(this,"find",le,oe,toReactive,arguments)},findIndex(le,oe){return apply$5(this,"findIndex",le,oe,void 0,arguments)},findLast(le,oe){return apply$5(this,"findLast",le,oe,toReactive,arguments)},findLastIndex(le,oe){return apply$5(this,"findLastIndex",le,oe,void 0,arguments)},forEach(le,oe){return apply$5(this,"forEach",le,oe,void 0,arguments)},includes(...le){return searchProxy(this,"includes",le)},indexOf(...le){return searchProxy(this,"indexOf",le)},join(le){return reactiveReadArray(this).join(le)},lastIndexOf(...le){return searchProxy(this,"lastIndexOf",le)},map(le,oe){return apply$5(this,"map",le,oe,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...le){return noTracking(this,"push",le)},reduce(le,...oe){return reduce(this,"reduce",le,oe)},reduceRight(le,...oe){return reduce(this,"reduceRight",le,oe)},shift(){return noTracking(this,"shift")},some(le,oe){return apply$5(this,"some",le,oe,void 0,arguments)},splice(...le){return noTracking(this,"splice",le)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(le){return reactiveReadArray(this).toSorted(le)},toSpliced(...le){return reactiveReadArray(this).toSpliced(...le)},unshift(...le){return noTracking(this,"unshift",le)},values(){return iterator(this,"values",toReactive)}};function iterator(le,oe,ie){const ue=shallowReadArray(le),de=ue[oe]();return ue!==le&&!isShallow(le)&&(de._next=de.next,de.next=()=>{const he=de._next();return he.value&&(he.value=ie(he.value)),he}),de}const arrayProto$1=Array.prototype;function apply$5(le,oe,ie,ue,de,he){const pe=shallowReadArray(le),_e=pe!==le&&!isShallow(le),Ce=pe[oe];if(Ce!==arrayProto$1[oe]){const $e=Ce.apply(le,he);return _e?toReactive($e):$e}let xe=ie;pe!==le&&(_e?xe=function($e,Ne){return ie.call(this,toReactive($e),Ne,le)}:ie.length>2&&(xe=function($e,Ne){return ie.call(this,$e,Ne,le)}));const Ie=Ce.call(pe,xe,ue);return _e&&de?de(Ie):Ie}function reduce(le,oe,ie,ue){const de=shallowReadArray(le);let he=ie;return de!==le&&(isShallow(le)?ie.length>3&&(he=function(pe,_e,Ce){return ie.call(this,pe,_e,Ce,le)}):he=function(pe,_e,Ce){return ie.call(this,pe,toReactive(_e),Ce,le)}),de[oe](he,...ue)}function searchProxy(le,oe,ie){const ue=toRaw(le);track(ue,"iterate",ARRAY_ITERATE_KEY);const de=ue[oe](...ie);return(de===-1||de===!1)&&isProxy(ie[0])?(ie[0]=toRaw(ie[0]),ue[oe](...ie)):de}function noTracking(le,oe,ie=[]){pauseTracking(),startBatch();const ue=toRaw(le)[oe].apply(le,ie);return endBatch(),resetTracking(),ue}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(le=>le!=="arguments"&&le!=="caller").map(le=>Symbol[le]).filter(isSymbol$4));function hasOwnProperty$f(le){isSymbol$4(le)||(le=String(le));const oe=toRaw(this);return track(oe,"has",le),oe.hasOwnProperty(le)}class BaseReactiveHandler{constructor(oe=!1,ie=!1){this._isReadonly=oe,this._isShallow=ie}get(oe,ie,ue){const de=this._isReadonly,he=this._isShallow;if(ie==="__v_isReactive")return!de;if(ie==="__v_isReadonly")return de;if(ie==="__v_isShallow")return he;if(ie==="__v_raw")return ue===(de?he?shallowReadonlyMap:readonlyMap:he?shallowReactiveMap:reactiveMap).get(oe)||Object.getPrototypeOf(oe)===Object.getPrototypeOf(ue)?oe:void 0;const pe=isArray$3(oe);if(!de){let Ce;if(pe&&(Ce=arrayInstrumentations[ie]))return Ce;if(ie==="hasOwnProperty")return hasOwnProperty$f}const _e=Reflect.get(oe,ie,isRef(oe)?oe:ue);return(isSymbol$4(ie)?builtInSymbols.has(ie):isNonTrackableKeys(ie))||(de||track(oe,"get",ie),he)?_e:isRef(_e)?pe&&isIntegerKey(ie)?_e:_e.value:isObject$d(_e)?de?readonly(_e):reactive(_e):_e}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(oe=!1){super(!1,oe)}set(oe,ie,ue,de){let he=oe[ie];if(!this._isShallow){const Ce=isReadonly(he);if(!isShallow(ue)&&!isReadonly(ue)&&(he=toRaw(he),ue=toRaw(ue)),!isArray$3(oe)&&isRef(he)&&!isRef(ue))return Ce?!1:(he.value=ue,!0)}const pe=isArray$3(oe)&&isIntegerKey(ie)?Number(ie)<oe.length:hasOwn$b(oe,ie),_e=Reflect.set(oe,ie,ue,isRef(oe)?oe:de);return oe===toRaw(de)&&(pe?hasChanged(ue,he)&&trigger(oe,"set",ie,ue):trigger(oe,"add",ie,ue)),_e}deleteProperty(oe,ie){const ue=hasOwn$b(oe,ie);oe[ie];const de=Reflect.deleteProperty(oe,ie);return de&&ue&&trigger(oe,"delete",ie,void 0),de}has(oe,ie){const ue=Reflect.has(oe,ie);return(!isSymbol$4(ie)||!builtInSymbols.has(ie))&&track(oe,"has",ie),ue}ownKeys(oe){return track(oe,"iterate",isArray$3(oe)?"length":ITERATE_KEY),Reflect.ownKeys(oe)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(oe=!1){super(!0,oe)}set(oe,ie){return!0}deleteProperty(oe,ie){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=le=>le,getProto=le=>Reflect.getPrototypeOf(le);function get$2(le,oe,ie=!1,ue=!1){le=le.__v_raw;const de=toRaw(le),he=toRaw(oe);ie||(hasChanged(oe,he)&&track(de,"get",oe),track(de,"get",he));const{has:pe}=getProto(de),_e=ue?toShallow:ie?toReadonly:toReactive;if(pe.call(de,oe))return _e(le.get(oe));if(pe.call(de,he))return _e(le.get(he));le!==de&&le.get(oe)}function has$1(le,oe=!1){const ie=this.__v_raw,ue=toRaw(ie),de=toRaw(le);return oe||(hasChanged(le,de)&&track(ue,"has",le),track(ue,"has",de)),le===de?ie.has(le):ie.has(le)||ie.has(de)}function size(le,oe=!1){return le=le.__v_raw,!oe&&track(toRaw(le),"iterate",ITERATE_KEY),Reflect.get(le,"size",le)}function add(le,oe=!1){!oe&&!isShallow(le)&&!isReadonly(le)&&(le=toRaw(le));const ie=toRaw(this);return getProto(ie).has.call(ie,le)||(ie.add(le),trigger(ie,"add",le,le)),this}function set$3(le,oe,ie=!1){!ie&&!isShallow(oe)&&!isReadonly(oe)&&(oe=toRaw(oe));const ue=toRaw(this),{has:de,get:he}=getProto(ue);let pe=de.call(ue,le);pe||(le=toRaw(le),pe=de.call(ue,le));const _e=he.call(ue,le);return ue.set(le,oe),pe?hasChanged(oe,_e)&&trigger(ue,"set",le,oe):trigger(ue,"add",le,oe),this}function deleteEntry(le){const oe=toRaw(this),{has:ie,get:ue}=getProto(oe);let de=ie.call(oe,le);de||(le=toRaw(le),de=ie.call(oe,le)),ue&&ue.call(oe,le);const he=oe.delete(le);return de&&trigger(oe,"delete",le,void 0),he}function clear$1(){const le=toRaw(this),oe=le.size!==0,ie=le.clear();return oe&&trigger(le,"clear",void 0,void 0),ie}function createForEach(le,oe){return function(ue,de){const he=this,pe=he.__v_raw,_e=toRaw(pe),Ce=oe?toShallow:le?toReadonly:toReactive;return!le&&track(_e,"iterate",ITERATE_KEY),pe.forEach((xe,Ie)=>ue.call(de,Ce(xe),Ce(Ie),he))}}function createIterableMethod(le,oe,ie){return function(...ue){const de=this.__v_raw,he=toRaw(de),pe=isMap$1(he),_e=le==="entries"||le===Symbol.iterator&&pe,Ce=le==="keys"&&pe,xe=de[le](...ue),Ie=ie?toShallow:oe?toReadonly:toReactive;return!oe&&track(he,"iterate",Ce?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:$e,done:Ne}=xe.next();return Ne?{value:$e,done:Ne}:{value:_e?[Ie($e[0]),Ie($e[1])]:Ie($e),done:Ne}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(le){return function(...oe){return le==="delete"?!1:le==="clear"?void 0:this}}function createInstrumentations(){const le={get(he){return get$2(this,he)},get size(){return size(this)},has:has$1,add,set:set$3,delete:deleteEntry,clear:clear$1,forEach:createForEach(!1,!1)},oe={get(he){return get$2(this,he,!1,!0)},get size(){return size(this)},has:has$1,add(he){return add.call(this,he,!0)},set(he,pe){return set$3.call(this,he,pe,!0)},delete:deleteEntry,clear:clear$1,forEach:createForEach(!1,!0)},ie={get(he){return get$2(this,he,!0)},get size(){return size(this,!0)},has(he){return has$1.call(this,he,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},ue={get(he){return get$2(this,he,!0,!0)},get size(){return size(this,!0)},has(he){return has$1.call(this,he,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(he=>{le[he]=createIterableMethod(he,!1,!1),ie[he]=createIterableMethod(he,!0,!1),oe[he]=createIterableMethod(he,!1,!0),ue[he]=createIterableMethod(he,!0,!0)}),[le,ie,oe,ue]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(le,oe){const ie=oe?le?shallowReadonlyInstrumentations:shallowInstrumentations:le?readonlyInstrumentations:mutableInstrumentations;return(ue,de,he)=>de==="__v_isReactive"?!le:de==="__v_isReadonly"?le:de==="__v_raw"?ue:Reflect.get(hasOwn$b(ie,de)&&de in ue?ie:ue,de,he)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(le){switch(le){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(le){return le.__v_skip||!Object.isExtensible(le)?0:targetTypeMap(toRawType(le))}function reactive(le){return isReadonly(le)?le:createReactiveObject(le,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(le){return createReactiveObject(le,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(le){return createReactiveObject(le,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(le){return createReactiveObject(le,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(le,oe,ie,ue,de){if(!isObject$d(le)||le.__v_raw&&!(oe&&le.__v_isReactive))return le;const he=de.get(le);if(he)return he;const pe=getTargetType(le);if(pe===0)return le;const _e=new Proxy(le,pe===2?ue:ie);return de.set(le,_e),_e}function isReactive(le){return isReadonly(le)?isReactive(le.__v_raw):!!(le&&le.__v_isReactive)}function isReadonly(le){return!!(le&&le.__v_isReadonly)}function isShallow(le){return!!(le&&le.__v_isShallow)}function isProxy(le){return le?!!le.__v_raw:!1}function toRaw(le){const oe=le&&le.__v_raw;return oe?toRaw(oe):le}function markRaw(le){return!hasOwn$b(le,"__v_skip")&&Object.isExtensible(le)&&def(le,"__v_skip",!0),le}const toReactive=le=>isObject$d(le)?reactive(le):le,toReadonly=le=>isObject$d(le)?readonly(le):le;function isRef(le){return le?le.__v_isRef===!0:!1}function ref(le){return createRef(le,!1)}function shallowRef(le){return createRef(le,!0)}function createRef(le,oe){return isRef(le)?le:new RefImpl(le,oe)}class RefImpl{constructor(oe,ie){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=ie?oe:toRaw(oe),this._value=ie?oe:toReactive(oe),this.__v_isShallow=ie}get value(){return this.dep.track(),this._value}set value(oe){const ie=this._rawValue,ue=this.__v_isShallow||isShallow(oe)||isReadonly(oe);oe=ue?oe:toRaw(oe),hasChanged(oe,ie)&&(this._rawValue=oe,this._value=ue?oe:toReactive(oe),this.dep.trigger())}}function unref(le){return isRef(le)?le.value:le}const shallowUnwrapHandlers={get:(le,oe,ie)=>oe==="__v_raw"?le:unref(Reflect.get(le,oe,ie)),set:(le,oe,ie,ue)=>{const de=le[oe];return isRef(de)&&!isRef(ie)?(de.value=ie,!0):Reflect.set(le,oe,ie,ue)}};function proxyRefs(le){return isReactive(le)?le:new Proxy(le,shallowUnwrapHandlers)}class CustomRefImpl{constructor(oe){this.__v_isRef=!0,this._value=void 0;const ie=this.dep=new Dep,{get:ue,set:de}=oe(ie.track.bind(ie),ie.trigger.bind(ie));this._get=ue,this._set=de}get value(){return this._value=this._get()}set value(oe){this._set(oe)}}function customRef(le){return new CustomRefImpl(le)}function toRefs(le){const oe=isArray$3(le)?new Array(le.length):{};for(const ie in le)oe[ie]=propertyToRef(le,ie);return oe}class ObjectRefImpl{constructor(oe,ie,ue){this._object=oe,this._key=ie,this._defaultValue=ue,this.__v_isRef=!0,this._value=void 0}get value(){const oe=this._object[this._key];return this._value=oe===void 0?this._defaultValue:oe}set value(oe){this._object[this._key]=oe}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(oe){this._getter=oe,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function toRef(le,oe,ie){return isRef(le)?le:isFunction$2(le)?new GetterRefImpl(le):isObject$d(le)&&arguments.length>1?propertyToRef(le,oe,ie):ref(le)}function propertyToRef(le,oe,ie){const ue=le[oe];return isRef(ue)?ue:new ObjectRefImpl(le,oe,ie)}class ComputedRefImpl{constructor(oe,ie,ue){this.fn=oe,this.setter=ie,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!ie,this.isSSR=ue}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this),!0}get value(){const oe=this.dep.track();return refreshComputed(this),oe&&(oe.version=this.dep.version),this._value}set value(oe){this.setter&&this.setter(oe)}}function computed$1(le,oe,ie=!1){let ue,de;return isFunction$2(le)?ue=le:(ue=le.get,de=le.set),new ComputedRefImpl(ue,de,ie)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(le,oe=!1,ie=activeWatcher){if(ie){let ue=cleanupMap.get(ie);ue||cleanupMap.set(ie,ue=[]),ue.push(le)}}function watch$1(le,oe,ie=EMPTY_OBJ){const{immediate:ue,deep:de,once:he,scheduler:pe,augmentJob:_e,call:Ce}=ie,xe=Et=>de?Et:isShallow(Et)||de===!1||de===0?traverse(Et,1):traverse(Et);let Ie,$e,Ne,Oe,Fe=!1,Ve=!1;if(isRef(le)?($e=()=>le.value,Fe=isShallow(le)):isReactive(le)?($e=()=>xe(le),Fe=!0):isArray$3(le)?(Ve=!0,Fe=le.some(Et=>isReactive(Et)||isShallow(Et)),$e=()=>le.map(Et=>{if(isRef(Et))return Et.value;if(isReactive(Et))return xe(Et);if(isFunction$2(Et))return Ce?Ce(Et,2):Et()})):isFunction$2(le)?oe?$e=Ce?()=>Ce(le,2):le:$e=()=>{if(Ne){pauseTracking();try{Ne()}finally{resetTracking()}}const Et=activeWatcher;activeWatcher=Ie;try{return Ce?Ce(le,3,[Oe]):le(Oe)}finally{activeWatcher=Et}}:$e=NOOP,oe&&de){const Et=$e,kt=de===!0?1/0:de;$e=()=>traverse(Et(),kt)}const ze=getCurrentScope(),Ue=()=>{Ie.stop(),ze&&remove(ze.effects,Ie)};if(he&&oe){const Et=oe;oe=(...kt)=>{Et(...kt),Ue()}}let Pt=Ve?new Array(le.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const qe=Et=>{if(!(!(Ie.flags&1)||!Ie.dirty&&!Et))if(oe){const kt=Ie.run();if(de||Fe||(Ve?kt.some((At,Dt)=>hasChanged(At,Pt[Dt])):hasChanged(kt,Pt))){Ne&&Ne();const At=activeWatcher;activeWatcher=Ie;try{const Dt=[kt,Pt===INITIAL_WATCHER_VALUE?void 0:Ve&&Pt[0]===INITIAL_WATCHER_VALUE?[]:Pt,Oe];Ce?Ce(oe,3,Dt):oe(...Dt),Pt=kt}finally{activeWatcher=At}}}else Ie.run()};return _e&&_e(qe),Ie=new ReactiveEffect($e),Ie.scheduler=pe?()=>pe(qe,!1):qe,Oe=Et=>onWatcherCleanup(Et,!1,Ie),Ne=Ie.onStop=()=>{const Et=cleanupMap.get(Ie);if(Et){if(Ce)Ce(Et,4);else for(const kt of Et)kt();cleanupMap.delete(Ie)}},oe?ue?qe(!0):Pt=Ie.run():pe?pe(qe.bind(null,!0),!0):Ie.run(),Ue.pause=Ie.pause.bind(Ie),Ue.resume=Ie.resume.bind(Ie),Ue.stop=Ue,Ue}function traverse(le,oe=1/0,ie){if(oe<=0||!isObject$d(le)||le.__v_skip||(ie=ie||new Set,ie.has(le)))return le;if(ie.add(le),oe--,isRef(le))traverse(le.value,oe,ie);else if(isArray$3(le))for(let ue=0;ue<le.length;ue++)traverse(le[ue],oe,ie);else if(isSet$1(le)||isMap$1(le))le.forEach(ue=>{traverse(ue,oe,ie)});else if(isPlainObject$1(le)){for(const ue in le)traverse(le[ue],oe,ie);for(const ue of Object.getOwnPropertySymbols(le))Object.prototype.propertyIsEnumerable.call(le,ue)&&traverse(le[ue],oe,ie)}return le}/**
* @vue/runtime-core v3.5.10
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1(le,...oe){if(isWarning)return;isWarning=!0,pauseTracking();const ie=stack.length?stack[stack.length-1].component:null,ue=ie&&ie.appContext.config.warnHandler,de=getComponentTrace();if(ue)callWithErrorHandling(ue,ie,11,[le+oe.map(he=>{var pe,_e;return(_e=(pe=he.toString)==null?void 0:pe.call(he))!=null?_e:JSON.stringify(he)}).join(""),ie&&ie.proxy,de.map(({vnode:he})=>`at <${formatComponentName(ie,he.type)}>`).join(`
`),de]);else{const he=[`[Vue warn]: ${le}`,...oe];de.length&&he.push(`
`,...formatTrace(de))}resetTracking(),isWarning=!1}function getComponentTrace(){let le=stack[stack.length-1];if(!le)return[];const oe=[];for(;le;){const ie=oe[0];ie&&ie.vnode===le?ie.recurseCount++:oe.push({vnode:le,recurseCount:0});const ue=le.component&&le.component.parent;le=ue&&ue.vnode}return oe}function formatTrace(le){const oe=[];return le.forEach((ie,ue)=>{oe.push(...ue===0?[]:[`
`],...formatTraceEntry(ie))}),oe}function formatTraceEntry({vnode:le,recurseCount:oe}){const ie=oe>0?`... (${oe} recursive calls)`:"",ue=le.component?le.component.parent==null:!1,de=` at <${formatComponentName(le.component,le.type,ue)}`,he=">"+ie;return le.props?[de,...formatProps(le.props),he]:[de+he]}function formatProps(le){const oe=[],ie=Object.keys(le);return ie.slice(0,3).forEach(ue=>{oe.push(...formatProp(ue,le[ue]))}),ie.length>3&&oe.push(" ..."),oe}function formatProp(le,oe,ie){return isString$1(oe)?(oe=JSON.stringify(oe),ie?oe:[`${le}=${oe}`]):typeof oe=="number"||typeof oe=="boolean"||oe==null?ie?oe:[`${le}=${oe}`]:isRef(oe)?(oe=formatProp(le,toRaw(oe.value),!0),ie?oe:[`${le}=Ref<`,oe,">"]):isFunction$2(oe)?[`${le}=fn${oe.name?`<${oe.name}>`:""}`]:(oe=toRaw(oe),ie?oe:[`${le}=`,oe])}function callWithErrorHandling(le,oe,ie,ue){try{return ue?le(...ue):le()}catch(de){handleError(de,oe,ie)}}function callWithAsyncErrorHandling(le,oe,ie,ue){if(isFunction$2(le)){const de=callWithErrorHandling(le,oe,ie,ue);return de&&isPromise$1(de)&&de.catch(he=>{handleError(he,oe,ie)}),de}if(isArray$3(le)){const de=[];for(let he=0;he<le.length;he++)de.push(callWithAsyncErrorHandling(le[he],oe,ie,ue));return de}}function handleError(le,oe,ie,ue=!0){const de=oe?oe.vnode:null,{errorHandler:he,throwUnhandledErrorInProduction:pe}=oe&&oe.appContext.config||EMPTY_OBJ;if(oe){let _e=oe.parent;const Ce=oe.proxy,xe=`https://vuejs.org/error-reference/#runtime-${ie}`;for(;_e;){const Ie=_e.ec;if(Ie){for(let $e=0;$e<Ie.length;$e++)if(Ie[$e](le,Ce,xe)===!1)return}_e=_e.parent}if(he){pauseTracking(),callWithErrorHandling(he,null,10,[le,Ce,xe]),resetTracking();return}}logError(le,ie,de,ue,pe)}function logError(le,oe,ie,ue=!0,de=!1){if(de)throw le}let isFlushing=!1,isFlushPending=!1;const queue$4=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(le){const oe=currentFlushPromise||resolvedPromise;return le?oe.then(this?le.bind(this):le):oe}function findInsertionIndex(le){let oe=isFlushing?flushIndex+1:0,ie=queue$4.length;for(;oe<ie;){const ue=oe+ie>>>1,de=queue$4[ue],he=getId(de);he<le||he===le&&de.flags&2?oe=ue+1:ie=ue}return oe}function queueJob(le){if(!(le.flags&1)){const oe=getId(le),ie=queue$4[queue$4.length-1];!ie||!(le.flags&2)&&oe>=getId(ie)?queue$4.push(le):queue$4.splice(findInsertionIndex(oe),0,le),le.flags|=1,queueFlush()}}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(le){isArray$3(le)?pendingPostFlushCbs.push(...le):activePostFlushCbs&&le.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,le):le.flags&1||(pendingPostFlushCbs.push(le),le.flags|=1),queueFlush()}function flushPreFlushCbs(le,oe,ie=isFlushing?flushIndex+1:0){for(;ie<queue$4.length;ie++){const ue=queue$4[ie];if(ue&&ue.flags&2){if(le&&ue.id!==le.uid)continue;queue$4.splice(ie,1),ie--,ue.flags&4&&(ue.flags&=-2),ue(),ue.flags&4||(ue.flags&=-2)}}}function flushPostFlushCbs(le){if(pendingPostFlushCbs.length){const oe=[...new Set(pendingPostFlushCbs)].sort((ie,ue)=>getId(ie)-getId(ue));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...oe);return}for(activePostFlushCbs=oe,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const ie=activePostFlushCbs[postFlushIndex];ie.flags&4&&(ie.flags&=-2),ie.flags&8||ie(),ie.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=le=>le.id==null?le.flags&2?-1:1/0:le.id;function flushJobs(le){isFlushPending=!1,isFlushing=!0;try{for(flushIndex=0;flushIndex<queue$4.length;flushIndex++){const oe=queue$4[flushIndex];oe&&!(oe.flags&8)&&(oe.flags&4&&(oe.flags&=-2),callWithErrorHandling(oe,oe.i,oe.i?15:14),oe.flags&4||(oe.flags&=-2))}}finally{for(;flushIndex<queue$4.length;flushIndex++){const oe=queue$4[flushIndex];oe&&(oe.flags&=-2)}flushIndex=0,queue$4.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue$4.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(le){const oe=currentRenderingInstance;return currentRenderingInstance=le,currentScopeId=le&&le.type.__scopeId||null,oe}function withCtx(le,oe=currentRenderingInstance,ie){if(!oe||le._n)return le;const ue=(...de)=>{ue._d&&setBlockTracking(-1);const he=setCurrentRenderingInstance(oe);let pe;try{pe=le(...de)}finally{setCurrentRenderingInstance(he),ue._d&&setBlockTracking(1)}return pe};return ue._n=!0,ue._c=!0,ue._d=!0,ue}function withDirectives(le,oe){if(currentRenderingInstance===null)return le;const ie=getComponentPublicInstance(currentRenderingInstance),ue=le.dirs||(le.dirs=[]);for(let de=0;de<oe.length;de++){let[he,pe,_e,Ce=EMPTY_OBJ]=oe[de];he&&(isFunction$2(he)&&(he={mounted:he,updated:he}),he.deep&&traverse(pe),ue.push({dir:he,instance:ie,value:pe,oldValue:void 0,arg:_e,modifiers:Ce}))}return le}function invokeDirectiveHook(le,oe,ie,ue){const de=le.dirs,he=oe&&oe.dirs;for(let pe=0;pe<de.length;pe++){const _e=de[pe];he&&(_e.oldValue=he[pe].value);let Ce=_e.dir[ue];Ce&&(pauseTracking(),callWithAsyncErrorHandling(Ce,ie,8,[le.el,_e,le,oe]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=le=>le.__isTeleport,isTeleportDisabled=le=>le&&(le.disabled||le.disabled===""),isTeleportDeferred=le=>le&&(le.defer||le.defer===""),isTargetSVG=le=>typeof SVGElement<"u"&&le instanceof SVGElement,isTargetMathML=le=>typeof MathMLElement=="function"&&le instanceof MathMLElement,resolveTarget=(le,oe)=>{const ie=le&&le.to;return isString$1(ie)?oe?oe(ie):null:ie},TeleportImpl={name:"Teleport",__isTeleport:!0,process(le,oe,ie,ue,de,he,pe,_e,Ce,xe){const{mc:Ie,pc:$e,pbc:Ne,o:{insert:Oe,querySelector:Fe,createText:Ve,createComment:ze}}=xe,Ue=isTeleportDisabled(oe.props);let{shapeFlag:Pt,children:qe,dynamicChildren:Et}=oe;if(le==null){const kt=oe.el=Ve(""),At=oe.anchor=Ve("");Oe(kt,ie,ue),Oe(At,ie,ue);const Dt=(jt,_n)=>{Pt&16&&(de&&de.isCE&&(de.ce._teleportTarget=jt),Ie(qe,jt,_n,de,he,pe,_e,Ce))},Lt=()=>{const jt=oe.target=resolveTarget(oe.props,Fe),_n=prepareAnchor(jt,oe,Ve,Oe);jt&&(pe!=="svg"&&isTargetSVG(jt)?pe="svg":pe!=="mathml"&&isTargetMathML(jt)&&(pe="mathml"),Ue||(Dt(jt,_n),updateCssVars(oe)))};Ue&&(Dt(ie,At),updateCssVars(oe)),isTeleportDeferred(oe.props)?queuePostRenderEffect(Lt,he):Lt()}else{oe.el=le.el,oe.targetStart=le.targetStart;const kt=oe.anchor=le.anchor,At=oe.target=le.target,Dt=oe.targetAnchor=le.targetAnchor,Lt=isTeleportDisabled(le.props),jt=Lt?ie:At,_n=Lt?kt:Dt;if(pe==="svg"||isTargetSVG(At)?pe="svg":(pe==="mathml"||isTargetMathML(At))&&(pe="mathml"),Et?(Ne(le.dynamicChildren,Et,jt,de,he,pe,_e),traverseStaticChildren(le,oe,!0)):Ce||$e(le,oe,jt,_n,de,he,pe,_e,!1),Ue)Lt?oe.props&&le.props&&oe.props.to!==le.props.to&&(oe.props.to=le.props.to):moveTeleport(oe,ie,kt,xe,1);else if((oe.props&&oe.props.to)!==(le.props&&le.props.to)){const bn=oe.target=resolveTarget(oe.props,Fe);bn&&moveTeleport(oe,bn,null,xe,0)}else Lt&&moveTeleport(oe,At,Dt,xe,1);updateCssVars(oe)}},remove(le,oe,ie,{um:ue,o:{remove:de}},he){const{shapeFlag:pe,children:_e,anchor:Ce,targetStart:xe,targetAnchor:Ie,target:$e,props:Ne}=le;if($e&&(de(xe),de(Ie)),he&&de(Ce),pe&16){const Oe=he||!isTeleportDisabled(Ne);for(let Fe=0;Fe<_e.length;Fe++){const Ve=_e[Fe];ue(Ve,oe,ie,Oe,!!Ve.dynamicChildren)}}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(le,oe,ie,{o:{insert:ue},m:de},he=2){he===0&&ue(le.targetAnchor,oe,ie);const{el:pe,anchor:_e,shapeFlag:Ce,children:xe,props:Ie}=le,$e=he===2;if($e&&ue(pe,oe,ie),(!$e||isTeleportDisabled(Ie))&&Ce&16)for(let Ne=0;Ne<xe.length;Ne++)de(xe[Ne],oe,ie,2);$e&&ue(_e,oe,ie)}function hydrateTeleport(le,oe,ie,ue,de,he,{o:{nextSibling:pe,parentNode:_e,querySelector:Ce,insert:xe,createText:Ie}},$e){const Ne=oe.target=resolveTarget(oe.props,Ce);if(Ne){const Oe=Ne._lpa||Ne.firstChild;if(oe.shapeFlag&16)if(isTeleportDisabled(oe.props))oe.anchor=$e(pe(le),oe,_e(le),ie,ue,de,he),oe.targetStart=Oe,oe.targetAnchor=Oe&&pe(Oe);else{oe.anchor=pe(le);let Fe=Oe;for(;Fe;){if(Fe&&Fe.nodeType===8){if(Fe.data==="teleport start anchor")oe.targetStart=Fe;else if(Fe.data==="teleport anchor"){oe.targetAnchor=Fe,Ne._lpa=oe.targetAnchor&&pe(oe.targetAnchor);break}}Fe=pe(Fe)}oe.targetAnchor||prepareAnchor(Ne,oe,Ie,xe),$e(Oe&&pe(Oe),oe,Ne,ie,ue,de,he)}updateCssVars(oe)}return oe.anchor&&pe(oe.anchor)}const Teleport$1=TeleportImpl;function updateCssVars(le){const oe=le.ctx;if(oe&&oe.ut){let ie=le.targetStart;for(;ie&&ie!==le.targetAnchor;)ie.nodeType===1&&ie.setAttribute("data-v-owner",oe.uid),ie=ie.nextSibling;oe.ut()}}function prepareAnchor(le,oe,ie,ue){const de=oe.targetStart=ie(""),he=oe.targetAnchor=ie("");return de[TeleportEndKey]=he,le&&(ue(de,le),ue(he,le)),he}const leaveCbKey=Symbol("_leaveCb"),enterCbKey$1=Symbol("_enterCb");function useTransitionState(){const le={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{le.isMounted=!0}),onBeforeUnmount(()=>{le.isUnmounting=!0}),le}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},recursiveGetSubtree=le=>{const oe=le.subTree;return oe.component?recursiveGetSubtree(oe.component):oe},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(le,{slots:oe}){const ie=getCurrentInstance(),ue=useTransitionState();return()=>{const de=oe.default&&getTransitionRawChildren(oe.default(),!0);if(!de||!de.length)return;const he=findNonCommentChild(de),pe=toRaw(le),{mode:_e}=pe;if(ue.isLeaving)return emptyPlaceholder(he);const Ce=getInnerChild$1(he);if(!Ce)return emptyPlaceholder(he);let xe=resolveTransitionHooks(Ce,pe,ue,ie,Ne=>xe=Ne);Ce.type!==Comment&&setTransitionHooks(Ce,xe);const Ie=ie.subTree,$e=Ie&&getInnerChild$1(Ie);if($e&&$e.type!==Comment&&!isSameVNodeType(Ce,$e)&&recursiveGetSubtree(ie).type!==Comment){const Ne=resolveTransitionHooks($e,pe,ue,ie);if(setTransitionHooks($e,Ne),_e==="out-in"&&Ce.type!==Comment)return ue.isLeaving=!0,Ne.afterLeave=()=>{ue.isLeaving=!1,ie.job.flags&8||ie.update(),delete Ne.afterLeave},emptyPlaceholder(he);_e==="in-out"&&Ce.type!==Comment&&(Ne.delayLeave=(Oe,Fe,Ve)=>{const ze=getLeavingNodesForType(ue,$e);ze[String($e.key)]=$e,Oe[leaveCbKey]=()=>{Fe(),Oe[leaveCbKey]=void 0,delete xe.delayedLeave},xe.delayedLeave=Ve})}return he}}};function findNonCommentChild(le){let oe=le[0];if(le.length>1){for(const ie of le)if(ie.type!==Comment){oe=ie;break}}return oe}const BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(le,oe){const{leavingVNodes:ie}=le;let ue=ie.get(oe.type);return ue||(ue=Object.create(null),ie.set(oe.type,ue)),ue}function resolveTransitionHooks(le,oe,ie,ue,de){const{appear:he,mode:pe,persisted:_e=!1,onBeforeEnter:Ce,onEnter:xe,onAfterEnter:Ie,onEnterCancelled:$e,onBeforeLeave:Ne,onLeave:Oe,onAfterLeave:Fe,onLeaveCancelled:Ve,onBeforeAppear:ze,onAppear:Ue,onAfterAppear:Pt,onAppearCancelled:qe}=oe,Et=String(le.key),kt=getLeavingNodesForType(ie,le),At=(jt,_n)=>{jt&&callWithAsyncErrorHandling(jt,ue,9,_n)},Dt=(jt,_n)=>{const bn=_n[1];At(jt,_n),isArray$3(jt)?jt.every(vn=>vn.length<=1)&&bn():jt.length<=1&&bn()},Lt={mode:pe,persisted:_e,beforeEnter(jt){let _n=Ce;if(!ie.isMounted)if(he)_n=ze||Ce;else return;jt[leaveCbKey]&&jt[leaveCbKey](!0);const bn=kt[Et];bn&&isSameVNodeType(le,bn)&&bn.el[leaveCbKey]&&bn.el[leaveCbKey](),At(_n,[jt])},enter(jt){let _n=xe,bn=Ie,vn=$e;if(!ie.isMounted)if(he)_n=Ue||xe,bn=Pt||Ie,vn=qe||$e;else return;let Tn=!1;const $n=jt[enterCbKey$1]=wn=>{Tn||(Tn=!0,wn?At(vn,[jt]):At(bn,[jt]),Lt.delayedLeave&&Lt.delayedLeave(),jt[enterCbKey$1]=void 0)};_n?Dt(_n,[jt,$n]):$n()},leave(jt,_n){const bn=String(le.key);if(jt[enterCbKey$1]&&jt[enterCbKey$1](!0),ie.isUnmounting)return _n();At(Ne,[jt]);let vn=!1;const Tn=jt[leaveCbKey]=$n=>{vn||(vn=!0,_n(),$n?At(Ve,[jt]):At(Fe,[jt]),jt[leaveCbKey]=void 0,kt[bn]===le&&delete kt[bn])};kt[bn]=le,Oe?Dt(Oe,[jt,Tn]):Tn()},clone(jt){const _n=resolveTransitionHooks(jt,oe,ie,ue,de);return de&&de(_n),_n}};return Lt}function emptyPlaceholder(le){if(isKeepAlive(le))return le=cloneVNode(le),le.children=null,le}function getInnerChild$1(le){if(!isKeepAlive(le))return isTeleport(le.type)&&le.children?findNonCommentChild(le.children):le;const{shapeFlag:oe,children:ie}=le;if(ie){if(oe&16)return ie[0];if(oe&32&&isFunction$2(ie.default))return ie.default()}}function setTransitionHooks(le,oe){le.shapeFlag&6&&le.component?(le.transition=oe,setTransitionHooks(le.component.subTree,oe)):le.shapeFlag&128?(le.ssContent.transition=oe.clone(le.ssContent),le.ssFallback.transition=oe.clone(le.ssFallback)):le.transition=oe}function getTransitionRawChildren(le,oe=!1,ie){let ue=[],de=0;for(let he=0;he<le.length;he++){let pe=le[he];const _e=ie==null?pe.key:String(ie)+String(pe.key!=null?pe.key:he);pe.type===Fragment?(pe.patchFlag&128&&de++,ue=ue.concat(getTransitionRawChildren(pe.children,oe,_e))):(oe||pe.type!==Comment)&&ue.push(_e!=null?cloneVNode(pe,{key:_e}):pe)}if(de>1)for(let he=0;he<ue.length;he++)ue[he].patchFlag=-2;return ue}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(le,oe){return isFunction$2(le)?extend({name:le.name},oe,{setup:le}):le}function markAsyncBoundary(le){le.ids=[le.ids[0]+le.ids[2]+++"-",0,0]}function setRef(le,oe,ie,ue,de=!1){if(isArray$3(le)){le.forEach((Fe,Ve)=>setRef(Fe,oe&&(isArray$3(oe)?oe[Ve]:oe),ie,ue,de));return}if(isAsyncWrapper(ue)&&!de)return;const he=ue.shapeFlag&4?getComponentPublicInstance(ue.component):ue.el,pe=de?null:he,{i:_e,r:Ce}=le,xe=oe&&oe.r,Ie=_e.refs===EMPTY_OBJ?_e.refs={}:_e.refs,$e=_e.setupState,Ne=toRaw($e),Oe=$e===EMPTY_OBJ?()=>!1:Fe=>hasOwn$b(Ne,Fe);if(xe!=null&&xe!==Ce&&(isString$1(xe)?(Ie[xe]=null,Oe(xe)&&($e[xe]=null)):isRef(xe)&&(xe.value=null)),isFunction$2(Ce))callWithErrorHandling(Ce,_e,12,[pe,Ie]);else{const Fe=isString$1(Ce),Ve=isRef(Ce);if(Fe||Ve){const ze=()=>{if(le.f){const Ue=Fe?Oe(Ce)?$e[Ce]:Ie[Ce]:Ce.value;de?isArray$3(Ue)&&remove(Ue,he):isArray$3(Ue)?Ue.includes(he)||Ue.push(he):Fe?(Ie[Ce]=[he],Oe(Ce)&&($e[Ce]=Ie[Ce])):(Ce.value=[he],le.k&&(Ie[le.k]=Ce.value))}else Fe?(Ie[Ce]=pe,Oe(Ce)&&($e[Ce]=pe)):Ve&&(Ce.value=pe,le.k&&(Ie[le.k]=pe))};pe?(ze.id=-1,queuePostRenderEffect(ze,ie)):ze()}}}const isComment$1=le=>le.nodeType===8;function forEachElement(le,oe){if(isComment$1(le)&&le.data==="["){let ie=1,ue=le.nextSibling;for(;ue;){if(ue.nodeType===1){if(oe(ue)===!1)break}else if(isComment$1(ue))if(ue.data==="]"){if(--ie===0)break}else ue.data==="["&&ie++;ue=ue.nextSibling}}else oe(le)}const isAsyncWrapper=le=>!!le.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function defineAsyncComponent(le){isFunction$2(le)&&(le={loader:le});const{loader:oe,loadingComponent:ie,errorComponent:ue,delay:de=200,hydrate:he,timeout:pe,suspensible:_e=!0,onError:Ce}=le;let xe=null,Ie,$e=0;const Ne=()=>($e++,xe=null,Oe()),Oe=()=>{let Fe;return xe||(Fe=xe=oe().catch(Ve=>{if(Ve=Ve instanceof Error?Ve:new Error(String(Ve)),Ce)return new Promise((ze,Ue)=>{Ce(Ve,()=>ze(Ne()),()=>Ue(Ve),$e+1)});throw Ve}).then(Ve=>Fe!==xe&&xe?xe:(Ve&&(Ve.__esModule||Ve[Symbol.toStringTag]==="Module")&&(Ve=Ve.default),Ie=Ve,Ve)))};return defineComponent({name:"AsyncComponentWrapper",__asyncLoader:Oe,__asyncHydrate(Fe,Ve,ze){const Ue=he?()=>{const Pt=he(ze,qe=>forEachElement(Fe,qe));Pt&&(Ve.bum||(Ve.bum=[])).push(Pt)}:ze;Ie?Ue():Oe().then(()=>!Ve.isUnmounted&&Ue())},get __asyncResolved(){return Ie},setup(){const Fe=currentInstance;if(markAsyncBoundary(Fe),Ie)return()=>createInnerComp(Ie,Fe);const Ve=qe=>{xe=null,handleError(qe,Fe,13,!ue)};if(_e&&Fe.suspense||isInSSRComponentSetup)return Oe().then(qe=>()=>createInnerComp(qe,Fe)).catch(qe=>(Ve(qe),()=>ue?createVNode(ue,{error:qe}):null));const ze=ref(!1),Ue=ref(),Pt=ref(!!de);return de&&setTimeout(()=>{Pt.value=!1},de),pe!=null&&setTimeout(()=>{if(!ze.value&&!Ue.value){const qe=new Error(`Async component timed out after ${pe}ms.`);Ve(qe),Ue.value=qe}},pe),Oe().then(()=>{ze.value=!0,Fe.parent&&isKeepAlive(Fe.parent.vnode)&&Fe.parent.update()}).catch(qe=>{Ve(qe),Ue.value=qe}),()=>{if(ze.value&&Ie)return createInnerComp(Ie,Fe);if(Ue.value&&ue)return createVNode(ue,{error:Ue.value});if(ie&&!Pt.value)return createVNode(ie)}}})}function createInnerComp(le,oe){const{ref:ie,props:ue,children:de,ce:he}=oe.vnode,pe=createVNode(le,ue,de);return pe.ref=ie,pe.ce=he,delete oe.vnode.ce,pe}const isKeepAlive=le=>le.type.__isKeepAlive;function onActivated(le,oe){registerKeepAliveHook(le,"a",oe)}function onDeactivated(le,oe){registerKeepAliveHook(le,"da",oe)}function registerKeepAliveHook(le,oe,ie=currentInstance){const ue=le.__wdc||(le.__wdc=()=>{let de=ie;for(;de;){if(de.isDeactivated)return;de=de.parent}return le()});if(injectHook(oe,ue,ie),ie){let de=ie.parent;for(;de&&de.parent;)isKeepAlive(de.parent.vnode)&&injectToKeepAliveRoot(ue,oe,ie,de),de=de.parent}}function injectToKeepAliveRoot(le,oe,ie,ue){const de=injectHook(oe,le,ue,!0);onUnmounted(()=>{remove(ue[oe],de)},ie)}function injectHook(le,oe,ie=currentInstance,ue=!1){if(ie){const de=ie[le]||(ie[le]=[]),he=oe.__weh||(oe.__weh=(...pe)=>{pauseTracking();const _e=setCurrentInstance(ie),Ce=callWithAsyncErrorHandling(oe,ie,le,pe);return _e(),resetTracking(),Ce});return ue?de.unshift(he):de.push(he),he}}const createHook=le=>(oe,ie=currentInstance)=>{(!isInSSRComponentSetup||le==="sp")&&injectHook(le,(...ue)=>oe(...ue),ie)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(le,oe=currentInstance){injectHook("ec",le,oe)}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(le,oe){return resolveAsset(COMPONENTS,le,!0,oe)||le}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(le){return isString$1(le)?resolveAsset(COMPONENTS,le,!1)||le:le||NULL_DYNAMIC_COMPONENT}function resolveDirective(le){return resolveAsset(DIRECTIVES,le)}function resolveAsset(le,oe,ie=!0,ue=!1){const de=currentRenderingInstance||currentInstance;if(de){const he=de.type;if(le===COMPONENTS){const _e=getComponentName(he,!1);if(_e&&(_e===oe||_e===camelize(oe)||_e===capitalize$1(camelize(oe))))return he}const pe=resolve(de[le]||he[le],oe)||resolve(de.appContext[le],oe);return!pe&&ue?he:pe}}function resolve(le,oe){return le&&(le[oe]||le[camelize(oe)]||le[capitalize$1(camelize(oe))])}function renderList(le,oe,ie,ue){let de;const he=ie,pe=isArray$3(le);if(pe||isString$1(le)){const _e=pe&&isReactive(le);let Ce=!1;_e&&(Ce=!isShallow(le),le=shallowReadArray(le)),de=new Array(le.length);for(let xe=0,Ie=le.length;xe<Ie;xe++)de[xe]=oe(Ce?toReactive(le[xe]):le[xe],xe,void 0,he)}else if(typeof le=="number"){de=new Array(le);for(let _e=0;_e<le;_e++)de[_e]=oe(_e+1,_e,void 0,he)}else if(isObject$d(le))if(le[Symbol.iterator])de=Array.from(le,(_e,Ce)=>oe(_e,Ce,void 0,he));else{const _e=Object.keys(le);de=new Array(_e.length);for(let Ce=0,xe=_e.length;Ce<xe;Ce++){const Ie=_e[Ce];de[Ce]=oe(le[Ie],Ie,Ce,he)}}else de=[];return de}function createSlots(le,oe){for(let ie=0;ie<oe.length;ie++){const ue=oe[ie];if(isArray$3(ue))for(let de=0;de<ue.length;de++)le[ue[de].name]=ue[de].fn;else ue&&(le[ue.name]=ue.key?(...de)=>{const he=ue.fn(...de);return he&&(he.key=ue.key),he}:ue.fn)}return le}function renderSlot(le,oe,ie={},ue,de){if(currentRenderingInstance.ce||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.ce)return oe!=="default"&&(ie.name=oe),openBlock(),createBlock(Fragment,null,[createVNode("slot",ie,ue&&ue())],64);let he=le[oe];he&&he._c&&(he._d=!1),openBlock();const pe=he&&ensureValidVNode(he(ie)),_e=createBlock(Fragment,{key:(ie.key||pe&&pe.key||`_${oe}`)+(!pe&&ue?"_fb":"")},pe||(ue?ue():[]),pe&&le._===1?64:-2);return _e.scopeId&&(_e.slotScopeIds=[_e.scopeId+"-s"]),he&&he._c&&(he._d=!0),_e}function ensureValidVNode(le){return le.some(oe=>isVNode(oe)?!(oe.type===Comment||oe.type===Fragment&&!ensureValidVNode(oe.children)):!0)?le:null}function toHandlers(le,oe){const ie={};for(const ue in le)ie[toHandlerKey(ue)]=le[ue];return ie}const getPublicInstance=le=>le?isStatefulComponent(le)?getComponentPublicInstance(le):getPublicInstance(le.parent):null,publicPropertiesMap=extend(Object.create(null),{$:le=>le,$el:le=>le.vnode.el,$data:le=>le.data,$props:le=>le.props,$attrs:le=>le.attrs,$slots:le=>le.slots,$refs:le=>le.refs,$parent:le=>getPublicInstance(le.parent),$root:le=>getPublicInstance(le.root),$host:le=>le.ce,$emit:le=>le.emit,$options:le=>resolveMergedOptions(le),$forceUpdate:le=>le.f||(le.f=()=>{queueJob(le.update)}),$nextTick:le=>le.n||(le.n=nextTick.bind(le.proxy)),$watch:le=>instanceWatch.bind(le)}),hasSetupBinding=(le,oe)=>le!==EMPTY_OBJ&&!le.__isScriptSetup&&hasOwn$b(le,oe),PublicInstanceProxyHandlers={get({_:le},oe){if(oe==="__v_skip")return!0;const{ctx:ie,setupState:ue,data:de,props:he,accessCache:pe,type:_e,appContext:Ce}=le;let xe;if(oe[0]!=="$"){const Oe=pe[oe];if(Oe!==void 0)switch(Oe){case 1:return ue[oe];case 2:return de[oe];case 4:return ie[oe];case 3:return he[oe]}else{if(hasSetupBinding(ue,oe))return pe[oe]=1,ue[oe];if(de!==EMPTY_OBJ&&hasOwn$b(de,oe))return pe[oe]=2,de[oe];if((xe=le.propsOptions[0])&&hasOwn$b(xe,oe))return pe[oe]=3,he[oe];if(ie!==EMPTY_OBJ&&hasOwn$b(ie,oe))return pe[oe]=4,ie[oe];shouldCacheAccess&&(pe[oe]=0)}}const Ie=publicPropertiesMap[oe];let $e,Ne;if(Ie)return oe==="$attrs"&&track(le.attrs,"get",""),Ie(le);if(($e=_e.__cssModules)&&($e=$e[oe]))return $e;if(ie!==EMPTY_OBJ&&hasOwn$b(ie,oe))return pe[oe]=4,ie[oe];if(Ne=Ce.config.globalProperties,hasOwn$b(Ne,oe))return Ne[oe]},set({_:le},oe,ie){const{data:ue,setupState:de,ctx:he}=le;return hasSetupBinding(de,oe)?(de[oe]=ie,!0):ue!==EMPTY_OBJ&&hasOwn$b(ue,oe)?(ue[oe]=ie,!0):hasOwn$b(le.props,oe)||oe[0]==="$"&&oe.slice(1)in le?!1:(he[oe]=ie,!0)},has({_:{data:le,setupState:oe,accessCache:ie,ctx:ue,appContext:de,propsOptions:he}},pe){let _e;return!!ie[pe]||le!==EMPTY_OBJ&&hasOwn$b(le,pe)||hasSetupBinding(oe,pe)||(_e=he[0])&&hasOwn$b(_e,pe)||hasOwn$b(ue,pe)||hasOwn$b(publicPropertiesMap,pe)||hasOwn$b(de.config.globalProperties,pe)},defineProperty(le,oe,ie){return ie.get!=null?le._.accessCache[oe]=0:hasOwn$b(ie,"value")&&this.set(le,oe,ie.value,null),Reflect.defineProperty(le,oe,ie)}};function useSlots(){return getContext().slots}function useAttrs$1(){return getContext().attrs}function getContext(){const le=getCurrentInstance();return le.setupContext||(le.setupContext=createSetupContext(le))}function normalizePropsOrEmits(le){return isArray$3(le)?le.reduce((oe,ie)=>(oe[ie]=null,oe),{}):le}let shouldCacheAccess=!0;function applyOptions(le){const oe=resolveMergedOptions(le),ie=le.proxy,ue=le.ctx;shouldCacheAccess=!1,oe.beforeCreate&&callHook$1(oe.beforeCreate,le,"bc");const{data:de,computed:he,methods:pe,watch:_e,provide:Ce,inject:xe,created:Ie,beforeMount:$e,mounted:Ne,beforeUpdate:Oe,updated:Fe,activated:Ve,deactivated:ze,beforeDestroy:Ue,beforeUnmount:Pt,destroyed:qe,unmounted:Et,render:kt,renderTracked:At,renderTriggered:Dt,errorCaptured:Lt,serverPrefetch:jt,expose:_n,inheritAttrs:bn,components:vn,directives:Tn,filters:$n}=oe;if(xe&&resolveInjections(xe,ue,null),pe)for(const Sn in pe){const In=pe[Sn];isFunction$2(In)&&(ue[Sn]=In.bind(ie))}if(de){const Sn=de.call(ie,ie);isObject$d(Sn)&&(le.data=reactive(Sn))}if(shouldCacheAccess=!0,he)for(const Sn in he){const In=he[Sn],En=isFunction$2(In)?In.bind(ie,ie):isFunction$2(In.get)?In.get.bind(ie,ie):NOOP,xn=!isFunction$2(In)&&isFunction$2(In.set)?In.set.bind(ie):NOOP,kn=computed({get:En,set:xn});Object.defineProperty(ue,Sn,{enumerable:!0,configurable:!0,get:()=>kn.value,set:On=>kn.value=On})}if(_e)for(const Sn in _e)createWatcher(_e[Sn],ue,ie,Sn);if(Ce){const Sn=isFunction$2(Ce)?Ce.call(ie):Ce;Reflect.ownKeys(Sn).forEach(In=>{provide(In,Sn[In])})}Ie&&callHook$1(Ie,le,"c");function Cn(Sn,In){isArray$3(In)?In.forEach(En=>Sn(En.bind(ie))):In&&Sn(In.bind(ie))}if(Cn(onBeforeMount,$e),Cn(onMounted,Ne),Cn(onBeforeUpdate,Oe),Cn(onUpdated,Fe),Cn(onActivated,Ve),Cn(onDeactivated,ze),Cn(onErrorCaptured,Lt),Cn(onRenderTracked,At),Cn(onRenderTriggered,Dt),Cn(onBeforeUnmount,Pt),Cn(onUnmounted,Et),Cn(onServerPrefetch,jt),isArray$3(_n))if(_n.length){const Sn=le.exposed||(le.exposed={});_n.forEach(In=>{Object.defineProperty(Sn,In,{get:()=>ie[In],set:En=>ie[In]=En})})}else le.exposed||(le.exposed={});kt&&le.render===NOOP&&(le.render=kt),bn!=null&&(le.inheritAttrs=bn),vn&&(le.components=vn),Tn&&(le.directives=Tn),jt&&markAsyncBoundary(le)}function resolveInjections(le,oe,ie=NOOP){isArray$3(le)&&(le=normalizeInject(le));for(const ue in le){const de=le[ue];let he;isObject$d(de)?"default"in de?he=inject(de.from||ue,de.default,!0):he=inject(de.from||ue):he=inject(de),isRef(he)?Object.defineProperty(oe,ue,{enumerable:!0,configurable:!0,get:()=>he.value,set:pe=>he.value=pe}):oe[ue]=he}}function callHook$1(le,oe,ie){callWithAsyncErrorHandling(isArray$3(le)?le.map(ue=>ue.bind(oe.proxy)):le.bind(oe.proxy),oe,ie)}function createWatcher(le,oe,ie,ue){let de=ue.includes(".")?createPathGetter(ie,ue):()=>ie[ue];if(isString$1(le)){const he=oe[le];isFunction$2(he)&&watch(de,he)}else if(isFunction$2(le))watch(de,le.bind(ie));else if(isObject$d(le))if(isArray$3(le))le.forEach(he=>createWatcher(he,oe,ie,ue));else{const he=isFunction$2(le.handler)?le.handler.bind(ie):oe[le.handler];isFunction$2(he)&&watch(de,he,le)}}function resolveMergedOptions(le){const oe=le.type,{mixins:ie,extends:ue}=oe,{mixins:de,optionsCache:he,config:{optionMergeStrategies:pe}}=le.appContext,_e=he.get(oe);let Ce;return _e?Ce=_e:!de.length&&!ie&&!ue?Ce=oe:(Ce={},de.length&&de.forEach(xe=>mergeOptions$1(Ce,xe,pe,!0)),mergeOptions$1(Ce,oe,pe)),isObject$d(oe)&&he.set(oe,Ce),Ce}function mergeOptions$1(le,oe,ie,ue=!1){const{mixins:de,extends:he}=oe;he&&mergeOptions$1(le,he,ie,!0),de&&de.forEach(pe=>mergeOptions$1(le,pe,ie,!0));for(const pe in oe)if(!(ue&&pe==="expose")){const _e=internalOptionMergeStrats[pe]||ie&&ie[pe];le[pe]=_e?_e(le[pe],oe[pe]):oe[pe]}return le}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(le,oe){return oe?le?function(){return extend(isFunction$2(le)?le.call(this,this):le,isFunction$2(oe)?oe.call(this,this):oe)}:oe:le}function mergeInject(le,oe){return mergeObjectOptions(normalizeInject(le),normalizeInject(oe))}function normalizeInject(le){if(isArray$3(le)){const oe={};for(let ie=0;ie<le.length;ie++)oe[le[ie]]=le[ie];return oe}return le}function mergeAsArray(le,oe){return le?[...new Set([].concat(le,oe))]:oe}function mergeObjectOptions(le,oe){return le?extend(Object.create(null),le,oe):oe}function mergeEmitsOrPropsOptions(le,oe){return le?isArray$3(le)&&isArray$3(oe)?[...new Set([...le,...oe])]:extend(Object.create(null),normalizePropsOrEmits(le),normalizePropsOrEmits(oe??{})):oe}function mergeWatchOptions(le,oe){if(!le)return oe;if(!oe)return le;const ie=extend(Object.create(null),le);for(const ue in oe)ie[ue]=mergeAsArray(le[ue],oe[ue]);return ie}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1$1=0;function createAppAPI(le,oe){return function(ue,de=null){isFunction$2(ue)||(ue=extend({},ue)),de!=null&&!isObject$d(de)&&(de=null);const he=createAppContext(),pe=new WeakSet,_e=[];let Ce=!1;const xe=he.app={_uid:uid$1$1++,_component:ue,_props:de,_container:null,_context:he,_instance:null,version:version$2,get config(){return he.config},set config(Ie){},use(Ie,...$e){return pe.has(Ie)||(Ie&&isFunction$2(Ie.install)?(pe.add(Ie),Ie.install(xe,...$e)):isFunction$2(Ie)&&(pe.add(Ie),Ie(xe,...$e))),xe},mixin(Ie){return he.mixins.includes(Ie)||he.mixins.push(Ie),xe},component(Ie,$e){return $e?(he.components[Ie]=$e,xe):he.components[Ie]},directive(Ie,$e){return $e?(he.directives[Ie]=$e,xe):he.directives[Ie]},mount(Ie,$e,Ne){if(!Ce){const Oe=xe._ceVNode||createVNode(ue,de);return Oe.appContext=he,Ne===!0?Ne="svg":Ne===!1&&(Ne=void 0),$e&&oe?oe(Oe,Ie):le(Oe,Ie,Ne),Ce=!0,xe._container=Ie,Ie.__vue_app__=xe,getComponentPublicInstance(Oe.component)}},onUnmount(Ie){_e.push(Ie)},unmount(){Ce&&(callWithAsyncErrorHandling(_e,xe._instance,16),le(null,xe._container),delete xe._container.__vue_app__)},provide(Ie,$e){return he.provides[Ie]=$e,xe},runWithContext(Ie){const $e=currentApp;currentApp=xe;try{return Ie()}finally{currentApp=$e}}};return xe}}let currentApp=null;function provide(le,oe){if(currentInstance){let ie=currentInstance.provides;const ue=currentInstance.parent&&currentInstance.parent.provides;ue===ie&&(ie=currentInstance.provides=Object.create(ue)),ie[le]=oe}}function inject(le,oe,ie=!1){const ue=currentInstance||currentRenderingInstance;if(ue||currentApp){const de=currentApp?currentApp._context.provides:ue?ue.parent==null?ue.vnode.appContext&&ue.vnode.appContext.provides:ue.parent.provides:void 0;if(de&&le in de)return de[le];if(arguments.length>1)return ie&&isFunction$2(oe)?oe.call(ue&&ue.proxy):oe}}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=le=>Object.getPrototypeOf(le)===internalObjectProto;function initProps(le,oe,ie,ue=!1){const de={},he=createInternalObject();le.propsDefaults=Object.create(null),setFullProps(le,oe,de,he);for(const pe in le.propsOptions[0])pe in de||(de[pe]=void 0);ie?le.props=ue?de:shallowReactive(de):le.type.props?le.props=de:le.props=he,le.attrs=he}function updateProps(le,oe,ie,ue){const{props:de,attrs:he,vnode:{patchFlag:pe}}=le,_e=toRaw(de),[Ce]=le.propsOptions;let xe=!1;if((ue||pe>0)&&!(pe&16)){if(pe&8){const Ie=le.vnode.dynamicProps;for(let $e=0;$e<Ie.length;$e++){let Ne=Ie[$e];if(isEmitListener(le.emitsOptions,Ne))continue;const Oe=oe[Ne];if(Ce)if(hasOwn$b(he,Ne))Oe!==he[Ne]&&(he[Ne]=Oe,xe=!0);else{const Fe=camelize(Ne);de[Fe]=resolvePropValue(Ce,_e,Fe,Oe,le,!1)}else Oe!==he[Ne]&&(he[Ne]=Oe,xe=!0)}}}else{setFullProps(le,oe,de,he)&&(xe=!0);let Ie;for(const $e in _e)(!oe||!hasOwn$b(oe,$e)&&((Ie=hyphenate($e))===$e||!hasOwn$b(oe,Ie)))&&(Ce?ie&&(ie[$e]!==void 0||ie[Ie]!==void 0)&&(de[$e]=resolvePropValue(Ce,_e,$e,void 0,le,!0)):delete de[$e]);if(he!==_e)for(const $e in he)(!oe||!hasOwn$b(oe,$e))&&(delete he[$e],xe=!0)}xe&&trigger(le.attrs,"set","")}function setFullProps(le,oe,ie,ue){const[de,he]=le.propsOptions;let pe=!1,_e;if(oe)for(let Ce in oe){if(isReservedProp(Ce))continue;const xe=oe[Ce];let Ie;de&&hasOwn$b(de,Ie=camelize(Ce))?!he||!he.includes(Ie)?ie[Ie]=xe:(_e||(_e={}))[Ie]=xe:isEmitListener(le.emitsOptions,Ce)||(!(Ce in ue)||xe!==ue[Ce])&&(ue[Ce]=xe,pe=!0)}if(he){const Ce=toRaw(ie),xe=_e||EMPTY_OBJ;for(let Ie=0;Ie<he.length;Ie++){const $e=he[Ie];ie[$e]=resolvePropValue(de,Ce,$e,xe[$e],le,!hasOwn$b(xe,$e))}}return pe}function resolvePropValue(le,oe,ie,ue,de,he){const pe=le[ie];if(pe!=null){const _e=hasOwn$b(pe,"default");if(_e&&ue===void 0){const Ce=pe.default;if(pe.type!==Function&&!pe.skipFactory&&isFunction$2(Ce)){const{propsDefaults:xe}=de;if(ie in xe)ue=xe[ie];else{const Ie=setCurrentInstance(de);ue=xe[ie]=Ce.call(null,oe),Ie()}}else ue=Ce;de.ce&&de.ce._setProp(ie,ue)}pe[0]&&(he&&!_e?ue=!1:pe[1]&&(ue===""||ue===hyphenate(ie))&&(ue=!0))}return ue}const mixinPropsCache=new WeakMap;function normalizePropsOptions(le,oe,ie=!1){const ue=ie?mixinPropsCache:oe.propsCache,de=ue.get(le);if(de)return de;const he=le.props,pe={},_e=[];let Ce=!1;if(!isFunction$2(le)){const Ie=$e=>{Ce=!0;const[Ne,Oe]=normalizePropsOptions($e,oe,!0);extend(pe,Ne),Oe&&_e.push(...Oe)};!ie&&oe.mixins.length&&oe.mixins.forEach(Ie),le.extends&&Ie(le.extends),le.mixins&&le.mixins.forEach(Ie)}if(!he&&!Ce)return isObject$d(le)&&ue.set(le,EMPTY_ARR),EMPTY_ARR;if(isArray$3(he))for(let Ie=0;Ie<he.length;Ie++){const $e=camelize(he[Ie]);validatePropName($e)&&(pe[$e]=EMPTY_OBJ)}else if(he)for(const Ie in he){const $e=camelize(Ie);if(validatePropName($e)){const Ne=he[Ie],Oe=pe[$e]=isArray$3(Ne)||isFunction$2(Ne)?{type:Ne}:extend({},Ne),Fe=Oe.type;let Ve=!1,ze=!0;if(isArray$3(Fe))for(let Ue=0;Ue<Fe.length;++Ue){const Pt=Fe[Ue],qe=isFunction$2(Pt)&&Pt.name;if(qe==="Boolean"){Ve=!0;break}else qe==="String"&&(ze=!1)}else Ve=isFunction$2(Fe)&&Fe.name==="Boolean";Oe[0]=Ve,Oe[1]=ze,(Ve||hasOwn$b(Oe,"default"))&&_e.push($e)}}const xe=[pe,_e];return isObject$d(le)&&ue.set(le,xe),xe}function validatePropName(le){return le[0]!=="$"&&!isReservedProp(le)}const isInternalKey=le=>le[0]==="_"||le==="$stable",normalizeSlotValue=le=>isArray$3(le)?le.map(normalizeVNode):[normalizeVNode(le)],normalizeSlot=(le,oe,ie)=>{if(oe._n)return oe;const ue=withCtx((...de)=>normalizeSlotValue(oe(...de)),ie);return ue._c=!1,ue},normalizeObjectSlots=(le,oe,ie)=>{const ue=le._ctx;for(const de in le){if(isInternalKey(de))continue;const he=le[de];if(isFunction$2(he))oe[de]=normalizeSlot(de,he,ue);else if(he!=null){const pe=normalizeSlotValue(he);oe[de]=()=>pe}}},normalizeVNodeSlots=(le,oe)=>{const ie=normalizeSlotValue(oe);le.slots.default=()=>ie},assignSlots=(le,oe,ie)=>{for(const ue in oe)(ie||ue!=="_")&&(le[ue]=oe[ue])},initSlots=(le,oe,ie)=>{const ue=le.slots=createInternalObject();if(le.vnode.shapeFlag&32){const de=oe._;de?(assignSlots(ue,oe,ie),ie&&def(ue,"_",de,!0)):normalizeObjectSlots(oe,ue)}else oe&&normalizeVNodeSlots(le,oe)},updateSlots=(le,oe,ie)=>{const{vnode:ue,slots:de}=le;let he=!0,pe=EMPTY_OBJ;if(ue.shapeFlag&32){const _e=oe._;_e?ie&&_e===1?he=!1:assignSlots(de,oe,ie):(he=!oe.$stable,normalizeObjectSlots(oe,de)),pe=oe}else oe&&(normalizeVNodeSlots(le,oe),pe={default:1});if(he)for(const _e in de)!isInternalKey(_e)&&pe[_e]==null&&delete de[_e]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(le){return baseCreateRenderer(le)}function baseCreateRenderer(le,oe){const ie=getGlobalThis();ie.__VUE__=!0;const{insert:ue,remove:de,patchProp:he,createElement:pe,createText:_e,createComment:Ce,setText:xe,setElementText:Ie,parentNode:$e,nextSibling:Ne,setScopeId:Oe=NOOP,insertStaticContent:Fe}=le,Ve=(Nn,Dn,jn,ir=null,Fn=null,Kn=null,mr=void 0,yr=null,Cr=!!Dn.dynamicChildren)=>{if(Nn===Dn)return;Nn&&!isSameVNodeType(Nn,Dn)&&(ir=Rn(Nn),On(Nn,Fn,Kn,!0),Nn=null),Dn.patchFlag===-2&&(Cr=!1,Dn.dynamicChildren=null);const{type:br,ref:Pr,shapeFlag:gr}=Dn;switch(br){case Text$1:ze(Nn,Dn,jn,ir);break;case Comment:Ue(Nn,Dn,jn,ir);break;case Static:Nn==null&&Pt(Dn,jn,ir,mr);break;case Fragment:vn(Nn,Dn,jn,ir,Fn,Kn,mr,yr,Cr);break;default:gr&1?kt(Nn,Dn,jn,ir,Fn,Kn,mr,yr,Cr):gr&6?Tn(Nn,Dn,jn,ir,Fn,Kn,mr,yr,Cr):(gr&64||gr&128)&&br.process(Nn,Dn,jn,ir,Fn,Kn,mr,yr,Cr,_r)}Pr!=null&&Fn&&setRef(Pr,Nn&&Nn.ref,Kn,Dn||Nn,!Dn)},ze=(Nn,Dn,jn,ir)=>{if(Nn==null)ue(Dn.el=_e(Dn.children),jn,ir);else{const Fn=Dn.el=Nn.el;Dn.children!==Nn.children&&xe(Fn,Dn.children)}},Ue=(Nn,Dn,jn,ir)=>{Nn==null?ue(Dn.el=Ce(Dn.children||""),jn,ir):Dn.el=Nn.el},Pt=(Nn,Dn,jn,ir)=>{[Nn.el,Nn.anchor]=Fe(Nn.children,Dn,jn,ir,Nn.el,Nn.anchor)},qe=({el:Nn,anchor:Dn},jn,ir)=>{let Fn;for(;Nn&&Nn!==Dn;)Fn=Ne(Nn),ue(Nn,jn,ir),Nn=Fn;ue(Dn,jn,ir)},Et=({el:Nn,anchor:Dn})=>{let jn;for(;Nn&&Nn!==Dn;)jn=Ne(Nn),de(Nn),Nn=jn;de(Dn)},kt=(Nn,Dn,jn,ir,Fn,Kn,mr,yr,Cr)=>{Dn.type==="svg"?mr="svg":Dn.type==="math"&&(mr="mathml"),Nn==null?At(Dn,jn,ir,Fn,Kn,mr,yr,Cr):jt(Nn,Dn,Fn,Kn,mr,yr,Cr)},At=(Nn,Dn,jn,ir,Fn,Kn,mr,yr)=>{let Cr,br;const{props:Pr,shapeFlag:gr,transition:tr,dirs:Sr}=Nn;if(Cr=Nn.el=pe(Nn.type,Kn,Pr&&Pr.is,Pr),gr&8?Ie(Cr,Nn.children):gr&16&&Lt(Nn.children,Cr,null,ir,Fn,resolveChildrenNamespace(Nn,Kn),mr,yr),Sr&&invokeDirectiveHook(Nn,null,ir,"created"),Dt(Cr,Nn,Nn.scopeId,mr,ir),Pr){for(const Lr in Pr)Lr!=="value"&&!isReservedProp(Lr)&&he(Cr,Lr,null,Pr[Lr],Kn,ir);"value"in Pr&&he(Cr,"value",null,Pr.value,Kn),(br=Pr.onVnodeBeforeMount)&&invokeVNodeHook(br,ir,Nn)}Sr&&invokeDirectiveHook(Nn,null,ir,"beforeMount");const Dr=needTransition(Fn,tr);Dr&&tr.beforeEnter(Cr),ue(Cr,Dn,jn),((br=Pr&&Pr.onVnodeMounted)||Dr||Sr)&&queuePostRenderEffect(()=>{br&&invokeVNodeHook(br,ir,Nn),Dr&&tr.enter(Cr),Sr&&invokeDirectiveHook(Nn,null,ir,"mounted")},Fn)},Dt=(Nn,Dn,jn,ir,Fn)=>{if(jn&&Oe(Nn,jn),ir)for(let Kn=0;Kn<ir.length;Kn++)Oe(Nn,ir[Kn]);if(Fn){let Kn=Fn.subTree;if(Dn===Kn||isSuspense(Kn.type)&&(Kn.ssContent===Dn||Kn.ssFallback===Dn)){const mr=Fn.vnode;Dt(Nn,mr,mr.scopeId,mr.slotScopeIds,Fn.parent)}}},Lt=(Nn,Dn,jn,ir,Fn,Kn,mr,yr,Cr=0)=>{for(let br=Cr;br<Nn.length;br++){const Pr=Nn[br]=yr?cloneIfMounted(Nn[br]):normalizeVNode(Nn[br]);Ve(null,Pr,Dn,jn,ir,Fn,Kn,mr,yr)}},jt=(Nn,Dn,jn,ir,Fn,Kn,mr)=>{const yr=Dn.el=Nn.el;let{patchFlag:Cr,dynamicChildren:br,dirs:Pr}=Dn;Cr|=Nn.patchFlag&16;const gr=Nn.props||EMPTY_OBJ,tr=Dn.props||EMPTY_OBJ;let Sr;if(jn&&toggleRecurse(jn,!1),(Sr=tr.onVnodeBeforeUpdate)&&invokeVNodeHook(Sr,jn,Dn,Nn),Pr&&invokeDirectiveHook(Dn,Nn,jn,"beforeUpdate"),jn&&toggleRecurse(jn,!0),(gr.innerHTML&&tr.innerHTML==null||gr.textContent&&tr.textContent==null)&&Ie(yr,""),br?_n(Nn.dynamicChildren,br,yr,jn,ir,resolveChildrenNamespace(Dn,Fn),Kn):mr||In(Nn,Dn,yr,null,jn,ir,resolveChildrenNamespace(Dn,Fn),Kn,!1),Cr>0){if(Cr&16)bn(yr,gr,tr,jn,Fn);else if(Cr&2&&gr.class!==tr.class&&he(yr,"class",null,tr.class,Fn),Cr&4&&he(yr,"style",gr.style,tr.style,Fn),Cr&8){const Dr=Dn.dynamicProps;for(let Lr=0;Lr<Dr.length;Lr++){const Ur=Dr[Lr],Xr=gr[Ur],qr=tr[Ur];(qr!==Xr||Ur==="value")&&he(yr,Ur,Xr,qr,Fn,jn)}}Cr&1&&Nn.children!==Dn.children&&Ie(yr,Dn.children)}else!mr&&br==null&&bn(yr,gr,tr,jn,Fn);((Sr=tr.onVnodeUpdated)||Pr)&&queuePostRenderEffect(()=>{Sr&&invokeVNodeHook(Sr,jn,Dn,Nn),Pr&&invokeDirectiveHook(Dn,Nn,jn,"updated")},ir)},_n=(Nn,Dn,jn,ir,Fn,Kn,mr)=>{for(let yr=0;yr<Dn.length;yr++){const Cr=Nn[yr],br=Dn[yr],Pr=Cr.el&&(Cr.type===Fragment||!isSameVNodeType(Cr,br)||Cr.shapeFlag&70)?$e(Cr.el):jn;Ve(Cr,br,Pr,null,ir,Fn,Kn,mr,!0)}},bn=(Nn,Dn,jn,ir,Fn)=>{if(Dn!==jn){if(Dn!==EMPTY_OBJ)for(const Kn in Dn)!isReservedProp(Kn)&&!(Kn in jn)&&he(Nn,Kn,Dn[Kn],null,Fn,ir);for(const Kn in jn){if(isReservedProp(Kn))continue;const mr=jn[Kn],yr=Dn[Kn];mr!==yr&&Kn!=="value"&&he(Nn,Kn,yr,mr,Fn,ir)}"value"in jn&&he(Nn,"value",Dn.value,jn.value,Fn)}},vn=(Nn,Dn,jn,ir,Fn,Kn,mr,yr,Cr)=>{const br=Dn.el=Nn?Nn.el:_e(""),Pr=Dn.anchor=Nn?Nn.anchor:_e("");let{patchFlag:gr,dynamicChildren:tr,slotScopeIds:Sr}=Dn;Sr&&(yr=yr?yr.concat(Sr):Sr),Nn==null?(ue(br,jn,ir),ue(Pr,jn,ir),Lt(Dn.children||[],jn,Pr,Fn,Kn,mr,yr,Cr)):gr>0&&gr&64&&tr&&Nn.dynamicChildren?(_n(Nn.dynamicChildren,tr,jn,Fn,Kn,mr,yr),(Dn.key!=null||Fn&&Dn===Fn.subTree)&&traverseStaticChildren(Nn,Dn,!0)):In(Nn,Dn,jn,Pr,Fn,Kn,mr,yr,Cr)},Tn=(Nn,Dn,jn,ir,Fn,Kn,mr,yr,Cr)=>{Dn.slotScopeIds=yr,Nn==null?Dn.shapeFlag&512?Fn.ctx.activate(Dn,jn,ir,mr,Cr):$n(Dn,jn,ir,Fn,Kn,mr,Cr):wn(Nn,Dn,Cr)},$n=(Nn,Dn,jn,ir,Fn,Kn,mr)=>{const yr=Nn.component=createComponentInstance(Nn,ir,Fn);if(isKeepAlive(Nn)&&(yr.ctx.renderer=_r),setupComponent(yr,!1,mr),yr.asyncDep){if(Fn&&Fn.registerDep(yr,Cn,mr),!Nn.el){const Cr=yr.subTree=createVNode(Comment);Ue(null,Cr,Dn,jn)}}else Cn(yr,Nn,Dn,jn,Fn,Kn,mr)},wn=(Nn,Dn,jn)=>{const ir=Dn.component=Nn.component;if(shouldUpdateComponent(Nn,Dn,jn))if(ir.asyncDep&&!ir.asyncResolved){Sn(ir,Dn,jn);return}else ir.next=Dn,ir.update();else Dn.el=Nn.el,ir.vnode=Dn},Cn=(Nn,Dn,jn,ir,Fn,Kn,mr)=>{const yr=()=>{if(Nn.isMounted){let{next:gr,bu:tr,u:Sr,parent:Dr,vnode:Lr}=Nn;{const wr=locateNonHydratedAsyncRoot(Nn);if(wr){gr&&(gr.el=Lr.el,Sn(Nn,gr,mr)),wr.asyncDep.then(()=>{Nn.isUnmounted||yr()});return}}let Ur=gr,Xr;toggleRecurse(Nn,!1),gr?(gr.el=Lr.el,Sn(Nn,gr,mr)):gr=Lr,tr&&invokeArrayFns(tr),(Xr=gr.props&&gr.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Xr,Dr,gr,Lr),toggleRecurse(Nn,!0);const qr=renderComponentRoot(Nn),Wn=Nn.subTree;Nn.subTree=qr,Ve(Wn,qr,$e(Wn.el),Rn(Wn),Nn,Fn,Kn),gr.el=qr.el,Ur===null&&updateHOCHostEl(Nn,qr.el),Sr&&queuePostRenderEffect(Sr,Fn),(Xr=gr.props&&gr.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Xr,Dr,gr,Lr),Fn)}else{let gr;const{el:tr,props:Sr}=Dn,{bm:Dr,m:Lr,parent:Ur,root:Xr,type:qr}=Nn,Wn=isAsyncWrapper(Dn);if(toggleRecurse(Nn,!1),Dr&&invokeArrayFns(Dr),!Wn&&(gr=Sr&&Sr.onVnodeBeforeMount)&&invokeVNodeHook(gr,Ur,Dn),toggleRecurse(Nn,!0),tr&&Gn){const wr=()=>{Nn.subTree=renderComponentRoot(Nn),Gn(tr,Nn.subTree,Nn,Fn,null)};Wn&&qr.__asyncHydrate?qr.__asyncHydrate(tr,Nn,wr):wr()}else{Xr.ce&&Xr.ce._injectChildStyle(qr);const wr=Nn.subTree=renderComponentRoot(Nn);Ve(null,wr,jn,ir,Nn,Fn,Kn),Dn.el=wr.el}if(Lr&&queuePostRenderEffect(Lr,Fn),!Wn&&(gr=Sr&&Sr.onVnodeMounted)){const wr=Dn;queuePostRenderEffect(()=>invokeVNodeHook(gr,Ur,wr),Fn)}(Dn.shapeFlag&256||Ur&&isAsyncWrapper(Ur.vnode)&&Ur.vnode.shapeFlag&256)&&Nn.a&&queuePostRenderEffect(Nn.a,Fn),Nn.isMounted=!0,Dn=jn=ir=null}};Nn.scope.on();const Cr=Nn.effect=new ReactiveEffect(yr);Nn.scope.off();const br=Nn.update=Cr.run.bind(Cr),Pr=Nn.job=Cr.runIfDirty.bind(Cr);Pr.i=Nn,Pr.id=Nn.uid,Cr.scheduler=()=>queueJob(Pr),toggleRecurse(Nn,!0),br()},Sn=(Nn,Dn,jn)=>{Dn.component=Nn;const ir=Nn.vnode.props;Nn.vnode=Dn,Nn.next=null,updateProps(Nn,Dn.props,ir,jn),updateSlots(Nn,Dn.children,jn),pauseTracking(),flushPreFlushCbs(Nn),resetTracking()},In=(Nn,Dn,jn,ir,Fn,Kn,mr,yr,Cr=!1)=>{const br=Nn&&Nn.children,Pr=Nn?Nn.shapeFlag:0,gr=Dn.children,{patchFlag:tr,shapeFlag:Sr}=Dn;if(tr>0){if(tr&128){xn(br,gr,jn,ir,Fn,Kn,mr,yr,Cr);return}else if(tr&256){En(br,gr,jn,ir,Fn,Kn,mr,yr,Cr);return}}Sr&8?(Pr&16&&Hn(br,Fn,Kn),gr!==br&&Ie(jn,gr)):Pr&16?Sr&16?xn(br,gr,jn,ir,Fn,Kn,mr,yr,Cr):Hn(br,Fn,Kn,!0):(Pr&8&&Ie(jn,""),Sr&16&&Lt(gr,jn,ir,Fn,Kn,mr,yr,Cr))},En=(Nn,Dn,jn,ir,Fn,Kn,mr,yr,Cr)=>{Nn=Nn||EMPTY_ARR,Dn=Dn||EMPTY_ARR;const br=Nn.length,Pr=Dn.length,gr=Math.min(br,Pr);let tr;for(tr=0;tr<gr;tr++){const Sr=Dn[tr]=Cr?cloneIfMounted(Dn[tr]):normalizeVNode(Dn[tr]);Ve(Nn[tr],Sr,jn,null,Fn,Kn,mr,yr,Cr)}br>Pr?Hn(Nn,Fn,Kn,!0,!1,gr):Lt(Dn,jn,ir,Fn,Kn,mr,yr,Cr,gr)},xn=(Nn,Dn,jn,ir,Fn,Kn,mr,yr,Cr)=>{let br=0;const Pr=Dn.length;let gr=Nn.length-1,tr=Pr-1;for(;br<=gr&&br<=tr;){const Sr=Nn[br],Dr=Dn[br]=Cr?cloneIfMounted(Dn[br]):normalizeVNode(Dn[br]);if(isSameVNodeType(Sr,Dr))Ve(Sr,Dr,jn,null,Fn,Kn,mr,yr,Cr);else break;br++}for(;br<=gr&&br<=tr;){const Sr=Nn[gr],Dr=Dn[tr]=Cr?cloneIfMounted(Dn[tr]):normalizeVNode(Dn[tr]);if(isSameVNodeType(Sr,Dr))Ve(Sr,Dr,jn,null,Fn,Kn,mr,yr,Cr);else break;gr--,tr--}if(br>gr){if(br<=tr){const Sr=tr+1,Dr=Sr<Pr?Dn[Sr].el:ir;for(;br<=tr;)Ve(null,Dn[br]=Cr?cloneIfMounted(Dn[br]):normalizeVNode(Dn[br]),jn,Dr,Fn,Kn,mr,yr,Cr),br++}}else if(br>tr)for(;br<=gr;)On(Nn[br],Fn,Kn,!0),br++;else{const Sr=br,Dr=br,Lr=new Map;for(br=Dr;br<=tr;br++){const nr=Dn[br]=Cr?cloneIfMounted(Dn[br]):normalizeVNode(Dn[br]);nr.key!=null&&Lr.set(nr.key,br)}let Ur,Xr=0;const qr=tr-Dr+1;let Wn=!1,wr=0;const Vn=new Array(qr);for(br=0;br<qr;br++)Vn[br]=0;for(br=Sr;br<=gr;br++){const nr=Nn[br];if(Xr>=qr){On(nr,Fn,Kn,!0);continue}let Ar;if(nr.key!=null)Ar=Lr.get(nr.key);else for(Ur=Dr;Ur<=tr;Ur++)if(Vn[Ur-Dr]===0&&isSameVNodeType(nr,Dn[Ur])){Ar=Ur;break}Ar===void 0?On(nr,Fn,Kn,!0):(Vn[Ar-Dr]=br+1,Ar>=wr?wr=Ar:Wn=!0,Ve(nr,Dn[Ar],jn,null,Fn,Kn,mr,yr,Cr),Xr++)}const sr=Wn?getSequence(Vn):EMPTY_ARR;for(Ur=sr.length-1,br=qr-1;br>=0;br--){const nr=Dr+br,Ar=Dn[nr],Wr=nr+1<Pr?Dn[nr+1].el:ir;Vn[br]===0?Ve(null,Ar,jn,Wr,Fn,Kn,mr,yr,Cr):Wn&&(Ur<0||br!==sr[Ur]?kn(Ar,jn,Wr,2):Ur--)}}},kn=(Nn,Dn,jn,ir,Fn=null)=>{const{el:Kn,type:mr,transition:yr,children:Cr,shapeFlag:br}=Nn;if(br&6){kn(Nn.component.subTree,Dn,jn,ir);return}if(br&128){Nn.suspense.move(Dn,jn,ir);return}if(br&64){mr.move(Nn,Dn,jn,_r);return}if(mr===Fragment){ue(Kn,Dn,jn);for(let gr=0;gr<Cr.length;gr++)kn(Cr[gr],Dn,jn,ir);ue(Nn.anchor,Dn,jn);return}if(mr===Static){qe(Nn,Dn,jn);return}if(ir!==2&&br&1&&yr)if(ir===0)yr.beforeEnter(Kn),ue(Kn,Dn,jn),queuePostRenderEffect(()=>yr.enter(Kn),Fn);else{const{leave:gr,delayLeave:tr,afterLeave:Sr}=yr,Dr=()=>ue(Kn,Dn,jn),Lr=()=>{gr(Kn,()=>{Dr(),Sr&&Sr()})};tr?tr(Kn,Dr,Lr):Lr()}else ue(Kn,Dn,jn)},On=(Nn,Dn,jn,ir=!1,Fn=!1)=>{const{type:Kn,props:mr,ref:yr,children:Cr,dynamicChildren:br,shapeFlag:Pr,patchFlag:gr,dirs:tr,cacheIndex:Sr}=Nn;if(gr===-2&&(Fn=!1),yr!=null&&setRef(yr,null,jn,Nn,!0),Sr!=null&&(Dn.renderCache[Sr]=void 0),Pr&256){Dn.ctx.deactivate(Nn);return}const Dr=Pr&1&&tr,Lr=!isAsyncWrapper(Nn);let Ur;if(Lr&&(Ur=mr&&mr.onVnodeBeforeUnmount)&&invokeVNodeHook(Ur,Dn,Nn),Pr&6)zn(Nn.component,jn,ir);else{if(Pr&128){Nn.suspense.unmount(jn,ir);return}Dr&&invokeDirectiveHook(Nn,null,Dn,"beforeUnmount"),Pr&64?Nn.type.remove(Nn,Dn,jn,_r,ir):br&&!br.hasOnce&&(Kn!==Fragment||gr>0&&gr&64)?Hn(br,Dn,jn,!1,!0):(Kn===Fragment&&gr&384||!Fn&&Pr&16)&&Hn(Cr,Dn,jn),ir&&Mn(Nn)}(Lr&&(Ur=mr&&mr.onVnodeUnmounted)||Dr)&&queuePostRenderEffect(()=>{Ur&&invokeVNodeHook(Ur,Dn,Nn),Dr&&invokeDirectiveHook(Nn,null,Dn,"unmounted")},jn)},Mn=Nn=>{const{type:Dn,el:jn,anchor:ir,transition:Fn}=Nn;if(Dn===Fragment){Un(jn,ir);return}if(Dn===Static){Et(Nn);return}const Kn=()=>{de(jn),Fn&&!Fn.persisted&&Fn.afterLeave&&Fn.afterLeave()};if(Nn.shapeFlag&1&&Fn&&!Fn.persisted){const{leave:mr,delayLeave:yr}=Fn,Cr=()=>mr(jn,Kn);yr?yr(Nn.el,Kn,Cr):Cr()}else Kn()},Un=(Nn,Dn)=>{let jn;for(;Nn!==Dn;)jn=Ne(Nn),de(Nn),Nn=jn;de(Dn)},zn=(Nn,Dn,jn)=>{const{bum:ir,scope:Fn,job:Kn,subTree:mr,um:yr,m:Cr,a:br}=Nn;invalidateMount(Cr),invalidateMount(br),ir&&invokeArrayFns(ir),Fn.stop(),Kn&&(Kn.flags|=8,On(mr,Nn,Dn,jn)),yr&&queuePostRenderEffect(yr,Dn),queuePostRenderEffect(()=>{Nn.isUnmounted=!0},Dn),Dn&&Dn.pendingBranch&&!Dn.isUnmounted&&Nn.asyncDep&&!Nn.asyncResolved&&Nn.suspenseId===Dn.pendingId&&(Dn.deps--,Dn.deps===0&&Dn.resolve())},Hn=(Nn,Dn,jn,ir=!1,Fn=!1,Kn=0)=>{for(let mr=Kn;mr<Nn.length;mr++)On(Nn[mr],Dn,jn,ir,Fn)},Rn=Nn=>{if(Nn.shapeFlag&6)return Rn(Nn.component.subTree);if(Nn.shapeFlag&128)return Nn.suspense.next();const Dn=Ne(Nn.anchor||Nn.el),jn=Dn&&Dn[TeleportEndKey];return jn?Ne(jn):Dn};let Jn=!1;const Qn=(Nn,Dn,jn)=>{Nn==null?Dn._vnode&&On(Dn._vnode,null,null,!0):Ve(Dn._vnode||null,Nn,Dn,null,null,null,jn),Dn._vnode=Nn,Jn||(Jn=!0,flushPreFlushCbs(),flushPostFlushCbs(),Jn=!1)},_r={p:Ve,um:On,m:kn,r:Mn,mt:$n,mc:Lt,pc:In,pbc:_n,n:Rn,o:le};let Zn,Gn;return{render:Qn,hydrate:Zn,createApp:createAppAPI(Qn,Zn)}}function resolveChildrenNamespace({type:le,props:oe},ie){return ie==="svg"&&le==="foreignObject"||ie==="mathml"&&le==="annotation-xml"&&oe&&oe.encoding&&oe.encoding.includes("html")?void 0:ie}function toggleRecurse({effect:le,job:oe},ie){ie?(le.flags|=32,oe.flags|=4):(le.flags&=-33,oe.flags&=-5)}function needTransition(le,oe){return(!le||le&&!le.pendingBranch)&&oe&&!oe.persisted}function traverseStaticChildren(le,oe,ie=!1){const ue=le.children,de=oe.children;if(isArray$3(ue)&&isArray$3(de))for(let he=0;he<ue.length;he++){const pe=ue[he];let _e=de[he];_e.shapeFlag&1&&!_e.dynamicChildren&&((_e.patchFlag<=0||_e.patchFlag===32)&&(_e=de[he]=cloneIfMounted(de[he]),_e.el=pe.el),!ie&&_e.patchFlag!==-2&&traverseStaticChildren(pe,_e)),_e.type===Text$1&&(_e.el=pe.el)}}function getSequence(le){const oe=le.slice(),ie=[0];let ue,de,he,pe,_e;const Ce=le.length;for(ue=0;ue<Ce;ue++){const xe=le[ue];if(xe!==0){if(de=ie[ie.length-1],le[de]<xe){oe[ue]=de,ie.push(ue);continue}for(he=0,pe=ie.length-1;he<pe;)_e=he+pe>>1,le[ie[_e]]<xe?he=_e+1:pe=_e;xe<le[ie[he]]&&(he>0&&(oe[ue]=ie[he-1]),ie[he]=ue)}}for(he=ie.length,pe=ie[he-1];he-- >0;)ie[he]=pe,pe=oe[pe];return ie}function locateNonHydratedAsyncRoot(le){const oe=le.subTree.component;if(oe)return oe.asyncDep&&!oe.asyncResolved?oe:locateNonHydratedAsyncRoot(oe)}function invalidateMount(le){if(le)for(let oe=0;oe<le.length;oe++)le[oe].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect(le,oe){return doWatch(le,null,oe)}function watch(le,oe,ie){return doWatch(le,oe,ie)}function doWatch(le,oe,ie=EMPTY_OBJ){const{immediate:ue,deep:de,flush:he,once:pe}=ie,_e=extend({},ie);let Ce;if(isInSSRComponentSetup)if(he==="sync"){const Ne=useSSRContext();Ce=Ne.__watcherHandles||(Ne.__watcherHandles=[])}else if(!oe||ue)_e.once=!0;else{const Ne=()=>{};return Ne.stop=NOOP,Ne.resume=NOOP,Ne.pause=NOOP,Ne}const xe=currentInstance;_e.call=(Ne,Oe,Fe)=>callWithAsyncErrorHandling(Ne,xe,Oe,Fe);let Ie=!1;he==="post"?_e.scheduler=Ne=>{queuePostRenderEffect(Ne,xe&&xe.suspense)}:he!=="sync"&&(Ie=!0,_e.scheduler=(Ne,Oe)=>{Oe?Ne():queueJob(Ne)}),_e.augmentJob=Ne=>{oe&&(Ne.flags|=4),Ie&&(Ne.flags|=2,xe&&(Ne.id=xe.uid,Ne.i=xe))};const $e=watch$1(le,oe,_e);return Ce&&Ce.push($e),$e}function instanceWatch(le,oe,ie){const ue=this.proxy,de=isString$1(le)?le.includes(".")?createPathGetter(ue,le):()=>ue[le]:le.bind(ue,ue);let he;isFunction$2(oe)?he=oe:(he=oe.handler,ie=oe);const pe=setCurrentInstance(this),_e=doWatch(de,he.bind(ue),ie);return pe(),_e}function createPathGetter(le,oe){const ie=oe.split(".");return()=>{let ue=le;for(let de=0;de<ie.length&&ue;de++)ue=ue[ie[de]];return ue}}const getModelModifiers=(le,oe)=>oe==="modelValue"||oe==="model-value"?le.modelModifiers:le[`${oe}Modifiers`]||le[`${camelize(oe)}Modifiers`]||le[`${hyphenate(oe)}Modifiers`];function emit(le,oe,...ie){if(le.isUnmounted)return;const ue=le.vnode.props||EMPTY_OBJ;let de=ie;const he=oe.startsWith("update:"),pe=he&&getModelModifiers(ue,oe.slice(7));pe&&(pe.trim&&(de=ie.map(Ie=>isString$1(Ie)?Ie.trim():Ie)),pe.number&&(de=ie.map(looseToNumber)));let _e,Ce=ue[_e=toHandlerKey(oe)]||ue[_e=toHandlerKey(camelize(oe))];!Ce&&he&&(Ce=ue[_e=toHandlerKey(hyphenate(oe))]),Ce&&callWithAsyncErrorHandling(Ce,le,6,de);const xe=ue[_e+"Once"];if(xe){if(!le.emitted)le.emitted={};else if(le.emitted[_e])return;le.emitted[_e]=!0,callWithAsyncErrorHandling(xe,le,6,de)}}function normalizeEmitsOptions(le,oe,ie=!1){const ue=oe.emitsCache,de=ue.get(le);if(de!==void 0)return de;const he=le.emits;let pe={},_e=!1;if(!isFunction$2(le)){const Ce=xe=>{const Ie=normalizeEmitsOptions(xe,oe,!0);Ie&&(_e=!0,extend(pe,Ie))};!ie&&oe.mixins.length&&oe.mixins.forEach(Ce),le.extends&&Ce(le.extends),le.mixins&&le.mixins.forEach(Ce)}return!he&&!_e?(isObject$d(le)&&ue.set(le,null),null):(isArray$3(he)?he.forEach(Ce=>pe[Ce]=null):extend(pe,he),isObject$d(le)&&ue.set(le,pe),pe)}function isEmitListener(le,oe){return!le||!isOn(oe)?!1:(oe=oe.slice(2).replace(/Once$/,""),hasOwn$b(le,oe[0].toLowerCase()+oe.slice(1))||hasOwn$b(le,hyphenate(oe))||hasOwn$b(le,oe))}function markAttrsAccessed(){}function renderComponentRoot(le){const{type:oe,vnode:ie,proxy:ue,withProxy:de,propsOptions:[he],slots:pe,attrs:_e,emit:Ce,render:xe,renderCache:Ie,props:$e,data:Ne,setupState:Oe,ctx:Fe,inheritAttrs:Ve}=le,ze=setCurrentRenderingInstance(le);let Ue,Pt;try{if(ie.shapeFlag&4){const Et=de||ue,kt=Et;Ue=normalizeVNode(xe.call(kt,Et,Ie,$e,Oe,Ne,Fe)),Pt=_e}else{const Et=oe;Ue=normalizeVNode(Et.length>1?Et($e,{attrs:_e,slots:pe,emit:Ce}):Et($e,null)),Pt=oe.props?_e:getFunctionalFallthrough(_e)}}catch(Et){blockStack.length=0,handleError(Et,le,1),Ue=createVNode(Comment)}let qe=Ue;if(Pt&&Ve!==!1){const Et=Object.keys(Pt),{shapeFlag:kt}=qe;Et.length&&kt&7&&(he&&Et.some(isModelListener)&&(Pt=filterModelListeners(Pt,he)),qe=cloneVNode(qe,Pt,!1,!0))}return ie.dirs&&(qe=cloneVNode(qe,null,!1,!0),qe.dirs=qe.dirs?qe.dirs.concat(ie.dirs):ie.dirs),ie.transition&&setTransitionHooks(qe,ie.transition),Ue=qe,setCurrentRenderingInstance(ze),Ue}const getFunctionalFallthrough=le=>{let oe;for(const ie in le)(ie==="class"||ie==="style"||isOn(ie))&&((oe||(oe={}))[ie]=le[ie]);return oe},filterModelListeners=(le,oe)=>{const ie={};for(const ue in le)(!isModelListener(ue)||!(ue.slice(9)in oe))&&(ie[ue]=le[ue]);return ie};function shouldUpdateComponent(le,oe,ie){const{props:ue,children:de,component:he}=le,{props:pe,children:_e,patchFlag:Ce}=oe,xe=he.emitsOptions;if(oe.dirs||oe.transition)return!0;if(ie&&Ce>=0){if(Ce&1024)return!0;if(Ce&16)return ue?hasPropsChanged(ue,pe,xe):!!pe;if(Ce&8){const Ie=oe.dynamicProps;for(let $e=0;$e<Ie.length;$e++){const Ne=Ie[$e];if(pe[Ne]!==ue[Ne]&&!isEmitListener(xe,Ne))return!0}}}else return(de||_e)&&(!_e||!_e.$stable)?!0:ue===pe?!1:ue?pe?hasPropsChanged(ue,pe,xe):!0:!!pe;return!1}function hasPropsChanged(le,oe,ie){const ue=Object.keys(oe);if(ue.length!==Object.keys(le).length)return!0;for(let de=0;de<ue.length;de++){const he=ue[de];if(oe[he]!==le[he]&&!isEmitListener(ie,he))return!0}return!1}function updateHOCHostEl({vnode:le,parent:oe},ie){for(;oe;){const ue=oe.subTree;if(ue.suspense&&ue.suspense.activeBranch===le&&(ue.el=le.el),ue===le)(le=oe.vnode).el=ie,oe=oe.parent;else break}}const isSuspense=le=>le.__isSuspense;function queueEffectWithSuspense(le,oe){oe&&oe.pendingBranch?isArray$3(le)?oe.effects.push(...le):oe.effects.push(le):queuePostFlushCb(le)}const Fragment=Symbol.for("v-fgt"),Text$1=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(le=!1){blockStack.push(currentBlock=le?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(le){isBlockTreeEnabled+=le,le<0&&currentBlock&&(currentBlock.hasOnce=!0)}function setupBlock(le){return le.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(le),le}function createElementBlock(le,oe,ie,ue,de,he){return setupBlock(createBaseVNode(le,oe,ie,ue,de,he,!0))}function createBlock(le,oe,ie,ue,de){return setupBlock(createVNode(le,oe,ie,ue,de,!0))}function isVNode(le){return le?le.__v_isVNode===!0:!1}function isSameVNodeType(le,oe){return le.type===oe.type&&le.key===oe.key}const normalizeKey=({key:le})=>le??null,normalizeRef=({ref:le,ref_key:oe,ref_for:ie})=>(typeof le=="number"&&(le=""+le),le!=null?isString$1(le)||isRef(le)||isFunction$2(le)?{i:currentRenderingInstance,r:le,k:oe,f:!!ie}:le:null);function createBaseVNode(le,oe=null,ie=null,ue=0,de=null,he=le===Fragment?0:1,pe=!1,_e=!1){const Ce={__v_isVNode:!0,__v_skip:!0,type:le,props:oe,key:oe&&normalizeKey(oe),ref:oe&&normalizeRef(oe),scopeId:currentScopeId,slotScopeIds:null,children:ie,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:he,patchFlag:ue,dynamicProps:de,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return _e?(normalizeChildren(Ce,ie),he&128&&le.normalize(Ce)):ie&&(Ce.shapeFlag|=isString$1(ie)?8:16),isBlockTreeEnabled>0&&!pe&&currentBlock&&(Ce.patchFlag>0||he&6)&&Ce.patchFlag!==32&&currentBlock.push(Ce),Ce}const createVNode=_createVNode;function _createVNode(le,oe=null,ie=null,ue=0,de=null,he=!1){if((!le||le===NULL_DYNAMIC_COMPONENT)&&(le=Comment),isVNode(le)){const _e=cloneVNode(le,oe,!0);return ie&&normalizeChildren(_e,ie),isBlockTreeEnabled>0&&!he&&currentBlock&&(_e.shapeFlag&6?currentBlock[currentBlock.indexOf(le)]=_e:currentBlock.push(_e)),_e.patchFlag=-2,_e}if(isClassComponent(le)&&(le=le.__vccOpts),oe){oe=guardReactiveProps(oe);let{class:_e,style:Ce}=oe;_e&&!isString$1(_e)&&(oe.class=normalizeClass(_e)),isObject$d(Ce)&&(isProxy(Ce)&&!isArray$3(Ce)&&(Ce=extend({},Ce)),oe.style=normalizeStyle(Ce))}const pe=isString$1(le)?1:isSuspense(le)?128:isTeleport(le)?64:isObject$d(le)?4:isFunction$2(le)?2:0;return createBaseVNode(le,oe,ie,ue,de,pe,he,!0)}function guardReactiveProps(le){return le?isProxy(le)||isInternalObject(le)?extend({},le):le:null}function cloneVNode(le,oe,ie=!1,ue=!1){const{props:de,ref:he,patchFlag:pe,children:_e,transition:Ce}=le,xe=oe?mergeProps(de||{},oe):de,Ie={__v_isVNode:!0,__v_skip:!0,type:le.type,props:xe,key:xe&&normalizeKey(xe),ref:oe&&oe.ref?ie&&he?isArray$3(he)?he.concat(normalizeRef(oe)):[he,normalizeRef(oe)]:normalizeRef(oe):he,scopeId:le.scopeId,slotScopeIds:le.slotScopeIds,children:_e,target:le.target,targetStart:le.targetStart,targetAnchor:le.targetAnchor,staticCount:le.staticCount,shapeFlag:le.shapeFlag,patchFlag:oe&&le.type!==Fragment?pe===-1?16:pe|16:pe,dynamicProps:le.dynamicProps,dynamicChildren:le.dynamicChildren,appContext:le.appContext,dirs:le.dirs,transition:Ce,component:le.component,suspense:le.suspense,ssContent:le.ssContent&&cloneVNode(le.ssContent),ssFallback:le.ssFallback&&cloneVNode(le.ssFallback),el:le.el,anchor:le.anchor,ctx:le.ctx,ce:le.ce};return Ce&&ue&&setTransitionHooks(Ie,Ce.clone(Ie)),Ie}function createTextVNode(le=" ",oe=0){return createVNode(Text$1,null,le,oe)}function createCommentVNode(le="",oe=!1){return oe?(openBlock(),createBlock(Comment,null,le)):createVNode(Comment,null,le)}function normalizeVNode(le){return le==null||typeof le=="boolean"?createVNode(Comment):isArray$3(le)?createVNode(Fragment,null,le.slice()):isVNode(le)?cloneIfMounted(le):createVNode(Text$1,null,String(le))}function cloneIfMounted(le){return le.el===null&&le.patchFlag!==-1||le.memo?le:cloneVNode(le)}function normalizeChildren(le,oe){let ie=0;const{shapeFlag:ue}=le;if(oe==null)oe=null;else if(isArray$3(oe))ie=16;else if(typeof oe=="object")if(ue&65){const de=oe.default;de&&(de._c&&(de._d=!1),normalizeChildren(le,de()),de._c&&(de._d=!0));return}else{ie=32;const de=oe._;!de&&!isInternalObject(oe)?oe._ctx=currentRenderingInstance:de===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?oe._=1:(oe._=2,le.patchFlag|=1024))}else isFunction$2(oe)?(oe={default:oe,_ctx:currentRenderingInstance},ie=32):(oe=String(oe),ue&64?(ie=16,oe=[createTextVNode(oe)]):ie=8);le.children=oe,le.shapeFlag|=ie}function mergeProps(...le){const oe={};for(let ie=0;ie<le.length;ie++){const ue=le[ie];for(const de in ue)if(de==="class")oe.class!==ue.class&&(oe.class=normalizeClass([oe.class,ue.class]));else if(de==="style")oe.style=normalizeStyle([oe.style,ue.style]);else if(isOn(de)){const he=oe[de],pe=ue[de];pe&&he!==pe&&!(isArray$3(he)&&he.includes(pe))&&(oe[de]=he?[].concat(he,pe):pe)}else de!==""&&(oe[de]=ue[de])}return oe}function invokeVNodeHook(le,oe,ie,ue=null){callWithAsyncErrorHandling(le,oe,7,[ie,ue])}const emptyAppContext=createAppContext();let uid$4=0;function createComponentInstance(le,oe,ie){const ue=le.type,de=(oe?oe.appContext:le.appContext)||emptyAppContext,he={uid:uid$4++,vnode:le,type:ue,parent:oe,appContext:de,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:oe?oe.provides:Object.create(de.provides),ids:oe?oe.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(ue,de),emitsOptions:normalizeEmitsOptions(ue,de),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:ue.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:ie,suspenseId:ie?ie.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return he.ctx={_:he},he.root=oe?oe.root:he,he.emit=emit.bind(null,he),le.ce&&le.ce(he),he}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const le=getGlobalThis(),oe=(ie,ue)=>{let de;return(de=le[ie])||(de=le[ie]=[]),de.push(ue),he=>{de.length>1?de.forEach(pe=>pe(he)):de[0](he)}};internalSetCurrentInstance=oe("__VUE_INSTANCE_SETTERS__",ie=>currentInstance=ie),setInSSRSetupState=oe("__VUE_SSR_SETTERS__",ie=>isInSSRComponentSetup=ie)}const setCurrentInstance=le=>{const oe=currentInstance;return internalSetCurrentInstance(le),le.scope.on(),()=>{le.scope.off(),internalSetCurrentInstance(oe)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(le){return le.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(le,oe=!1,ie=!1){oe&&setInSSRSetupState(oe);const{props:ue,children:de}=le.vnode,he=isStatefulComponent(le);initProps(le,ue,he,oe),initSlots(le,de,ie);const pe=he?setupStatefulComponent(le,oe):void 0;return oe&&setInSSRSetupState(!1),pe}function setupStatefulComponent(le,oe){const ie=le.type;le.accessCache=Object.create(null),le.proxy=new Proxy(le.ctx,PublicInstanceProxyHandlers);const{setup:ue}=ie;if(ue){const de=le.setupContext=ue.length>1?createSetupContext(le):null,he=setCurrentInstance(le);pauseTracking();const pe=callWithErrorHandling(ue,le,0,[le.props,de]);if(resetTracking(),he(),isPromise$1(pe)){if(isAsyncWrapper(le)||markAsyncBoundary(le),pe.then(unsetCurrentInstance,unsetCurrentInstance),oe)return pe.then(_e=>{handleSetupResult(le,_e,oe)}).catch(_e=>{handleError(_e,le,0)});le.asyncDep=pe}else handleSetupResult(le,pe,oe)}else finishComponentSetup(le,oe)}function handleSetupResult(le,oe,ie){isFunction$2(oe)?le.type.__ssrInlineRender?le.ssrRender=oe:le.render=oe:isObject$d(oe)&&(le.setupState=proxyRefs(oe)),finishComponentSetup(le,ie)}let compile;function finishComponentSetup(le,oe,ie){const ue=le.type;if(!le.render){if(!oe&&compile&&!ue.render){const de=ue.template||resolveMergedOptions(le).template;if(de){const{isCustomElement:he,compilerOptions:pe}=le.appContext.config,{delimiters:_e,compilerOptions:Ce}=ue,xe=extend(extend({isCustomElement:he,delimiters:_e},pe),Ce);ue.render=compile(de,xe)}}le.render=ue.render||NOOP}{const de=setCurrentInstance(le);pauseTracking();try{applyOptions(le)}finally{resetTracking(),de()}}}const attrsProxyHandlers={get(le,oe){return track(le,"get",""),le[oe]}};function createSetupContext(le){const oe=ie=>{le.exposed=ie||{}};return{attrs:new Proxy(le.attrs,attrsProxyHandlers),slots:le.slots,emit:le.emit,expose:oe}}function getComponentPublicInstance(le){return le.exposed?le.exposeProxy||(le.exposeProxy=new Proxy(proxyRefs(markRaw(le.exposed)),{get(oe,ie){if(ie in oe)return oe[ie];if(ie in publicPropertiesMap)return publicPropertiesMap[ie](le)},has(oe,ie){return ie in oe||ie in publicPropertiesMap}})):le.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=le=>le.replace(classifyRE,oe=>oe.toUpperCase()).replace(/[-_]/g,"");function getComponentName(le,oe=!0){return isFunction$2(le)?le.displayName||le.name:le.name||oe&&le.__name}function formatComponentName(le,oe,ie=!1){let ue=getComponentName(oe);if(!ue&&oe.__file){const de=oe.__file.match(/([^/\\]+)\.\w+$/);de&&(ue=de[1])}if(!ue&&le&&le.parent){const de=he=>{for(const pe in he)if(he[pe]===oe)return pe};ue=de(le.components||le.parent.type.components)||de(le.appContext.components)}return ue?classify(ue):ie?"App":"Anonymous"}function isClassComponent(le){return isFunction$2(le)&&"__vccOpts"in le}const computed=(le,oe)=>computed$1(le,oe,isInSSRComponentSetup);function h$3(le,oe,ie){const ue=arguments.length;return ue===2?isObject$d(oe)&&!isArray$3(oe)?isVNode(oe)?createVNode(le,null,[oe]):createVNode(le,oe):createVNode(le,null,oe):(ue>3?ie=Array.prototype.slice.call(arguments,2):ue===3&&isVNode(ie)&&(ie=[ie]),createVNode(le,oe,ie))}const version$2="3.5.10",warn=NOOP;/**
* @vue/runtime-dom v3.5.10
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt$1=typeof window<"u"&&window.trustedTypes;if(tt$1)try{policy=tt$1.createPolicy("vue",{createHTML:le=>le})}catch{}const unsafeToTrustedHTML=policy?le=>policy.createHTML(le):le=>le,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(le,oe,ie)=>{oe.insertBefore(le,ie||null)},remove:le=>{const oe=le.parentNode;oe&&oe.removeChild(le)},createElement:(le,oe,ie,ue)=>{const de=oe==="svg"?doc.createElementNS(svgNS,le):oe==="mathml"?doc.createElementNS(mathmlNS,le):ie?doc.createElement(le,{is:ie}):doc.createElement(le);return le==="select"&&ue&&ue.multiple!=null&&de.setAttribute("multiple",ue.multiple),de},createText:le=>doc.createTextNode(le),createComment:le=>doc.createComment(le),setText:(le,oe)=>{le.nodeValue=oe},setElementText:(le,oe)=>{le.textContent=oe},parentNode:le=>le.parentNode,nextSibling:le=>le.nextSibling,querySelector:le=>doc.querySelector(le),setScopeId(le,oe){le.setAttribute(oe,"")},insertStaticContent(le,oe,ie,ue,de,he){const pe=ie?ie.previousSibling:oe.lastChild;if(de&&(de===he||de.nextSibling))for(;oe.insertBefore(de.cloneNode(!0),ie),!(de===he||!(de=de.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(ue==="svg"?`<svg>${le}</svg>`:ue==="mathml"?`<math>${le}</math>`:le);const _e=templateContainer.content;if(ue==="svg"||ue==="mathml"){const Ce=_e.firstChild;for(;Ce.firstChild;)_e.appendChild(Ce.firstChild);_e.removeChild(Ce)}oe.insertBefore(_e,ie)}return[pe?pe.nextSibling:oe.firstChild,ie?ie.previousSibling:oe.lastChild]}},TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=extend({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),decorate$1=le=>(le.displayName="Transition",le.props=TransitionPropsValidators,le),Transition=decorate$1((le,{slots:oe})=>h$3(BaseTransition,resolveTransitionProps(le),oe)),callHook=(le,oe=[])=>{isArray$3(le)?le.forEach(ie=>ie(...oe)):le&&le(...oe)},hasExplicitCallback=le=>le?isArray$3(le)?le.some(oe=>oe.length>1):le.length>1:!1;function resolveTransitionProps(le){const oe={};for(const vn in le)vn in DOMTransitionPropsValidators||(oe[vn]=le[vn]);if(le.css===!1)return oe;const{name:ie="v",type:ue,duration:de,enterFromClass:he=`${ie}-enter-from`,enterActiveClass:pe=`${ie}-enter-active`,enterToClass:_e=`${ie}-enter-to`,appearFromClass:Ce=he,appearActiveClass:xe=pe,appearToClass:Ie=_e,leaveFromClass:$e=`${ie}-leave-from`,leaveActiveClass:Ne=`${ie}-leave-active`,leaveToClass:Oe=`${ie}-leave-to`}=le,Fe=normalizeDuration(de),Ve=Fe&&Fe[0],ze=Fe&&Fe[1],{onBeforeEnter:Ue,onEnter:Pt,onEnterCancelled:qe,onLeave:Et,onLeaveCancelled:kt,onBeforeAppear:At=Ue,onAppear:Dt=Pt,onAppearCancelled:Lt=qe}=oe,jt=(vn,Tn,$n)=>{removeTransitionClass(vn,Tn?Ie:_e),removeTransitionClass(vn,Tn?xe:pe),$n&&$n()},_n=(vn,Tn)=>{vn._isLeaving=!1,removeTransitionClass(vn,$e),removeTransitionClass(vn,Oe),removeTransitionClass(vn,Ne),Tn&&Tn()},bn=vn=>(Tn,$n)=>{const wn=vn?Dt:Pt,Cn=()=>jt(Tn,vn,$n);callHook(wn,[Tn,Cn]),nextFrame(()=>{removeTransitionClass(Tn,vn?Ce:he),addTransitionClass(Tn,vn?Ie:_e),hasExplicitCallback(wn)||whenTransitionEnds(Tn,ue,Ve,Cn)})};return extend(oe,{onBeforeEnter(vn){callHook(Ue,[vn]),addTransitionClass(vn,he),addTransitionClass(vn,pe)},onBeforeAppear(vn){callHook(At,[vn]),addTransitionClass(vn,Ce),addTransitionClass(vn,xe)},onEnter:bn(!1),onAppear:bn(!0),onLeave(vn,Tn){vn._isLeaving=!0;const $n=()=>_n(vn,Tn);addTransitionClass(vn,$e),addTransitionClass(vn,Ne),forceReflow(),nextFrame(()=>{vn._isLeaving&&(removeTransitionClass(vn,$e),addTransitionClass(vn,Oe),hasExplicitCallback(Et)||whenTransitionEnds(vn,ue,ze,$n))}),callHook(Et,[vn,$n])},onEnterCancelled(vn){jt(vn,!1),callHook(qe,[vn])},onAppearCancelled(vn){jt(vn,!0),callHook(Lt,[vn])},onLeaveCancelled(vn){_n(vn),callHook(kt,[vn])}})}function normalizeDuration(le){if(le==null)return null;if(isObject$d(le))return[NumberOf(le.enter),NumberOf(le.leave)];{const oe=NumberOf(le);return[oe,oe]}}function NumberOf(le){return toNumber$1(le)}function addTransitionClass(le,oe){oe.split(/\s+/).forEach(ie=>ie&&le.classList.add(ie)),(le[vtcKey]||(le[vtcKey]=new Set)).add(oe)}function removeTransitionClass(le,oe){oe.split(/\s+/).forEach(ue=>ue&&le.classList.remove(ue));const ie=le[vtcKey];ie&&(ie.delete(oe),ie.size||(le[vtcKey]=void 0))}function nextFrame(le){requestAnimationFrame(()=>{requestAnimationFrame(le)})}let endId=0;function whenTransitionEnds(le,oe,ie,ue){const de=le._endId=++endId,he=()=>{de===le._endId&&ue()};if(ie!=null)return setTimeout(he,ie);const{type:pe,timeout:_e,propCount:Ce}=getTransitionInfo(le,oe);if(!pe)return ue();const xe=pe+"end";let Ie=0;const $e=()=>{le.removeEventListener(xe,Ne),he()},Ne=Oe=>{Oe.target===le&&++Ie>=Ce&&$e()};setTimeout(()=>{Ie<Ce&&$e()},_e+1),le.addEventListener(xe,Ne)}function getTransitionInfo(le,oe){const ie=window.getComputedStyle(le),ue=Fe=>(ie[Fe]||"").split(", "),de=ue(`${TRANSITION}Delay`),he=ue(`${TRANSITION}Duration`),pe=getTimeout(de,he),_e=ue(`${ANIMATION}Delay`),Ce=ue(`${ANIMATION}Duration`),xe=getTimeout(_e,Ce);let Ie=null,$e=0,Ne=0;oe===TRANSITION?pe>0&&(Ie=TRANSITION,$e=pe,Ne=he.length):oe===ANIMATION?xe>0&&(Ie=ANIMATION,$e=xe,Ne=Ce.length):($e=Math.max(pe,xe),Ie=$e>0?pe>xe?TRANSITION:ANIMATION:null,Ne=Ie?Ie===TRANSITION?he.length:Ce.length:0);const Oe=Ie===TRANSITION&&/\b(transform|all)(,|$)/.test(ue(`${TRANSITION}Property`).toString());return{type:Ie,timeout:$e,propCount:Ne,hasTransform:Oe}}function getTimeout(le,oe){for(;le.length<oe.length;)le=le.concat(le);return Math.max(...oe.map((ie,ue)=>toMs(ie)+toMs(le[ue])))}function toMs(le){return le==="auto"?0:Number(le.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}function patchClass(le,oe,ie){const ue=le[vtcKey];ue&&(oe=(oe?[oe,...ue]:[...ue]).join(" ")),oe==null?le.removeAttribute("class"):ie?le.setAttribute("class",oe):le.className=oe}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={beforeMount(le,{value:oe},{transition:ie}){le[vShowOriginalDisplay]=le.style.display==="none"?"":le.style.display,ie&&oe?ie.beforeEnter(le):setDisplay(le,oe)},mounted(le,{value:oe},{transition:ie}){ie&&oe&&ie.enter(le)},updated(le,{value:oe,oldValue:ie},{transition:ue}){!oe!=!ie&&(ue?oe?(ue.beforeEnter(le),setDisplay(le,!0),ue.enter(le)):ue.leave(le,()=>{setDisplay(le,!1)}):setDisplay(le,oe))},beforeUnmount(le,{value:oe}){setDisplay(le,oe)}};function setDisplay(le,oe){le.style.display=oe?le[vShowOriginalDisplay]:"none",le[vShowHidden]=!oe}const CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(le,oe,ie){const ue=le.style,de=isString$1(ie);let he=!1;if(ie&&!de){if(oe)if(isString$1(oe))for(const pe of oe.split(";")){const _e=pe.slice(0,pe.indexOf(":")).trim();ie[_e]==null&&setStyle(ue,_e,"")}else for(const pe in oe)ie[pe]==null&&setStyle(ue,pe,"");for(const pe in ie)pe==="display"&&(he=!0),setStyle(ue,pe,ie[pe])}else if(de){if(oe!==ie){const pe=ue[CSS_VAR_TEXT];pe&&(ie+=";"+pe),ue.cssText=ie,he=displayRE.test(ie)}}else oe&&le.removeAttribute("style");vShowOriginalDisplay in le&&(le[vShowOriginalDisplay]=he?ue.display:"",le[vShowHidden]&&(ue.display="none"))}const importantRE=/\s*!important$/;function setStyle(le,oe,ie){if(isArray$3(ie))ie.forEach(ue=>setStyle(le,oe,ue));else if(ie==null&&(ie=""),oe.startsWith("--"))le.setProperty(oe,ie);else{const ue=autoPrefix(le,oe);importantRE.test(ie)?le.setProperty(hyphenate(ue),ie.replace(importantRE,""),"important"):le[ue]=ie}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(le,oe){const ie=prefixCache[oe];if(ie)return ie;let ue=camelize(oe);if(ue!=="filter"&&ue in le)return prefixCache[oe]=ue;ue=capitalize$1(ue);for(let de=0;de<prefixes.length;de++){const he=prefixes[de]+ue;if(he in le)return prefixCache[oe]=he}return oe}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(le,oe,ie,ue,de,he=isSpecialBooleanAttr(oe)){ue&&oe.startsWith("xlink:")?ie==null?le.removeAttributeNS(xlinkNS,oe.slice(6,oe.length)):le.setAttributeNS(xlinkNS,oe,ie):ie==null||he&&!includeBooleanAttr(ie)?le.removeAttribute(oe):le.setAttribute(oe,he?"":isSymbol$4(ie)?String(ie):ie)}function patchDOMProp(le,oe,ie,ue){if(oe==="innerHTML"||oe==="textContent"){ie!=null&&(le[oe]=oe==="innerHTML"?unsafeToTrustedHTML(ie):ie);return}const de=le.tagName;if(oe==="value"&&de!=="PROGRESS"&&!de.includes("-")){const pe=de==="OPTION"?le.getAttribute("value")||"":le.value,_e=ie==null?le.type==="checkbox"?"on":"":String(ie);(pe!==_e||!("_value"in le))&&(le.value=_e),ie==null&&le.removeAttribute(oe),le._value=ie;return}let he=!1;if(ie===""||ie==null){const pe=typeof le[oe];pe==="boolean"?ie=includeBooleanAttr(ie):ie==null&&pe==="string"?(ie="",he=!0):pe==="number"&&(ie=0,he=!0)}try{le[oe]=ie}catch{}he&&le.removeAttribute(oe)}function addEventListener(le,oe,ie,ue){le.addEventListener(oe,ie,ue)}function removeEventListener(le,oe,ie,ue){le.removeEventListener(oe,ie,ue)}const veiKey=Symbol("_vei");function patchEvent(le,oe,ie,ue,de=null){const he=le[veiKey]||(le[veiKey]={}),pe=he[oe];if(ue&&pe)pe.value=ue;else{const[_e,Ce]=parseName(oe);if(ue){const xe=he[oe]=createInvoker(ue,de);addEventListener(le,_e,xe,Ce)}else pe&&(removeEventListener(le,_e,pe,Ce),he[oe]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(le){let oe;if(optionsModifierRE.test(le)){oe={};let ue;for(;ue=le.match(optionsModifierRE);)le=le.slice(0,le.length-ue[0].length),oe[ue[0].toLowerCase()]=!0}return[le[2]===":"?le.slice(3):hyphenate(le.slice(2)),oe]}let cachedNow=0;const p$3=Promise.resolve(),getNow=()=>cachedNow||(p$3.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(le,oe){const ie=ue=>{if(!ue._vts)ue._vts=Date.now();else if(ue._vts<=ie.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(ue,ie.value),oe,5,[ue])};return ie.value=le,ie.attached=getNow(),ie}function patchStopImmediatePropagation(le,oe){if(isArray$3(oe)){const ie=le.stopImmediatePropagation;return le.stopImmediatePropagation=()=>{ie.call(le),le._stopped=!0},oe.map(ue=>de=>!de._stopped&&ue&&ue(de))}else return oe}const isNativeOn=le=>le.charCodeAt(0)===111&&le.charCodeAt(1)===110&&le.charCodeAt(2)>96&&le.charCodeAt(2)<123,patchProp=(le,oe,ie,ue,de,he)=>{const pe=de==="svg";oe==="class"?patchClass(le,ue,pe):oe==="style"?patchStyle(le,ie,ue):isOn(oe)?isModelListener(oe)||patchEvent(le,oe,ie,ue,he):(oe[0]==="."?(oe=oe.slice(1),!0):oe[0]==="^"?(oe=oe.slice(1),!1):shouldSetAsProp(le,oe,ue,pe))?(patchDOMProp(le,oe,ue),!le.tagName.includes("-")&&(oe==="value"||oe==="checked"||oe==="selected")&&patchAttr(le,oe,ue,pe,he,oe!=="value")):le._isVueCE&&(/[A-Z]/.test(oe)||!isString$1(ue))?patchDOMProp(le,camelize(oe),ue):(oe==="true-value"?le._trueValue=ue:oe==="false-value"&&(le._falseValue=ue),patchAttr(le,oe,ue,pe))};function shouldSetAsProp(le,oe,ie,ue){if(ue)return!!(oe==="innerHTML"||oe==="textContent"||oe in le&&isNativeOn(oe)&&isFunction$2(ie));if(oe==="spellcheck"||oe==="draggable"||oe==="translate"||oe==="form"||oe==="list"&&le.tagName==="INPUT"||oe==="type"&&le.tagName==="TEXTAREA")return!1;if(oe==="width"||oe==="height"){const de=le.tagName;if(de==="IMG"||de==="VIDEO"||de==="CANVAS"||de==="SOURCE")return!1}return isNativeOn(oe)&&isString$1(ie)?!1:oe in le}const positionMap=new WeakMap,newPositionMap=new WeakMap,moveCbKey=Symbol("_moveCb"),enterCbKey=Symbol("_enterCb"),decorate=le=>(delete le.props.mode,le),TransitionGroupImpl=decorate({name:"TransitionGroup",props:extend({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(le,{slots:oe}){const ie=getCurrentInstance(),ue=useTransitionState();let de,he;return onUpdated(()=>{if(!de.length)return;const pe=le.moveClass||`${le.name||"v"}-move`;if(!hasCSSTransform(de[0].el,ie.vnode.el,pe))return;de.forEach(callPendingCbs),de.forEach(recordPosition);const _e=de.filter(applyTranslation);forceReflow(),_e.forEach(Ce=>{const xe=Ce.el,Ie=xe.style;addTransitionClass(xe,pe),Ie.transform=Ie.webkitTransform=Ie.transitionDuration="";const $e=xe[moveCbKey]=Ne=>{Ne&&Ne.target!==xe||(!Ne||/transform$/.test(Ne.propertyName))&&(xe.removeEventListener("transitionend",$e),xe[moveCbKey]=null,removeTransitionClass(xe,pe))};xe.addEventListener("transitionend",$e)})}),()=>{const pe=toRaw(le),_e=resolveTransitionProps(pe);let Ce=pe.tag||Fragment;if(de=[],he)for(let xe=0;xe<he.length;xe++){const Ie=he[xe];Ie.el&&Ie.el instanceof Element&&(de.push(Ie),setTransitionHooks(Ie,resolveTransitionHooks(Ie,_e,ue,ie)),positionMap.set(Ie,Ie.el.getBoundingClientRect()))}he=oe.default?getTransitionRawChildren(oe.default()):[];for(let xe=0;xe<he.length;xe++){const Ie=he[xe];Ie.key!=null&&setTransitionHooks(Ie,resolveTransitionHooks(Ie,_e,ue,ie))}return createVNode(Ce,null,he)}}}),TransitionGroup=TransitionGroupImpl;function callPendingCbs(le){const oe=le.el;oe[moveCbKey]&&oe[moveCbKey](),oe[enterCbKey]&&oe[enterCbKey]()}function recordPosition(le){newPositionMap.set(le,le.el.getBoundingClientRect())}function applyTranslation(le){const oe=positionMap.get(le),ie=newPositionMap.get(le),ue=oe.left-ie.left,de=oe.top-ie.top;if(ue||de){const he=le.el.style;return he.transform=he.webkitTransform=`translate(${ue}px,${de}px)`,he.transitionDuration="0s",le}}function hasCSSTransform(le,oe,ie){const ue=le.cloneNode(),de=le[vtcKey];de&&de.forEach(_e=>{_e.split(/\s+/).forEach(Ce=>Ce&&ue.classList.remove(Ce))}),ie.split(/\s+/).forEach(_e=>_e&&ue.classList.add(_e)),ue.style.display="none";const he=oe.nodeType===1?oe:oe.parentNode;he.appendChild(ue);const{hasTransform:pe}=getTransitionInfo(ue);return he.removeChild(ue),pe}const getModelAssigner=le=>{const oe=le.props["onUpdate:modelValue"]||!1;return isArray$3(oe)?ie=>invokeArrayFns(oe,ie):oe};function onCompositionStart(le){le.target.composing=!0}function onCompositionEnd(le){const oe=le.target;oe.composing&&(oe.composing=!1,oe.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(le,{modifiers:{lazy:oe,trim:ie,number:ue}},de){le[assignKey]=getModelAssigner(de);const he=ue||de.props&&de.props.type==="number";addEventListener(le,oe?"change":"input",pe=>{if(pe.target.composing)return;let _e=le.value;ie&&(_e=_e.trim()),he&&(_e=looseToNumber(_e)),le[assignKey](_e)}),ie&&addEventListener(le,"change",()=>{le.value=le.value.trim()}),oe||(addEventListener(le,"compositionstart",onCompositionStart),addEventListener(le,"compositionend",onCompositionEnd),addEventListener(le,"change",onCompositionEnd))},mounted(le,{value:oe}){le.value=oe??""},beforeUpdate(le,{value:oe,oldValue:ie,modifiers:{lazy:ue,trim:de,number:he}},pe){if(le[assignKey]=getModelAssigner(pe),le.composing)return;const _e=(he||le.type==="number")&&!/^0\d/.test(le.value)?looseToNumber(le.value):le.value,Ce=oe??"";_e!==Ce&&(document.activeElement===le&&le.type!=="range"&&(ue&&oe===ie||de&&le.value.trim()===Ce)||(le.value=Ce))}},vModelCheckbox={deep:!0,created(le,oe,ie){le[assignKey]=getModelAssigner(ie),addEventListener(le,"change",()=>{const ue=le._modelValue,de=getValue$2(le),he=le.checked,pe=le[assignKey];if(isArray$3(ue)){const _e=looseIndexOf(ue,de),Ce=_e!==-1;if(he&&!Ce)pe(ue.concat(de));else if(!he&&Ce){const xe=[...ue];xe.splice(_e,1),pe(xe)}}else if(isSet$1(ue)){const _e=new Set(ue);he?_e.add(de):_e.delete(de),pe(_e)}else pe(getCheckboxValue(le,he))})},mounted:setChecked,beforeUpdate(le,oe,ie){le[assignKey]=getModelAssigner(ie),setChecked(le,oe,ie)}};function setChecked(le,{value:oe},ie){le._modelValue=oe;let ue;isArray$3(oe)?ue=looseIndexOf(oe,ie.props.value)>-1:isSet$1(oe)?ue=oe.has(ie.props.value):ue=looseEqual(oe,getCheckboxValue(le,!0)),le.checked!==ue&&(le.checked=ue)}const vModelRadio={created(le,{value:oe},ie){le.checked=looseEqual(oe,ie.props.value),le[assignKey]=getModelAssigner(ie),addEventListener(le,"change",()=>{le[assignKey](getValue$2(le))})},beforeUpdate(le,{value:oe,oldValue:ie},ue){le[assignKey]=getModelAssigner(ue),oe!==ie&&(le.checked=looseEqual(oe,ue.props.value))}};function getValue$2(le){return"_value"in le?le._value:le.value}function getCheckboxValue(le,oe){const ie=oe?"_trueValue":"_falseValue";return ie in le?le[ie]:oe}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:le=>le.stopPropagation(),prevent:le=>le.preventDefault(),self:le=>le.target!==le.currentTarget,ctrl:le=>!le.ctrlKey,shift:le=>!le.shiftKey,alt:le=>!le.altKey,meta:le=>!le.metaKey,left:le=>"button"in le&&le.button!==0,middle:le=>"button"in le&&le.button!==1,right:le=>"button"in le&&le.button!==2,exact:(le,oe)=>systemModifiers.some(ie=>le[`${ie}Key`]&&!oe.includes(ie))},withModifiers=(le,oe)=>{const ie=le._withMods||(le._withMods={}),ue=oe.join(".");return ie[ue]||(ie[ue]=(de,...he)=>{for(let pe=0;pe<oe.length;pe++){const _e=modifierGuards[oe[pe]];if(_e&&_e(de,oe))return}return le(de,...he)})},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(le,oe)=>{const ie=le._withKeys||(le._withKeys={}),ue=oe.join(".");return ie[ue]||(ie[ue]=de=>{if(!("key"in de))return;const he=hyphenate(de.key);if(oe.some(pe=>pe===he||keyNames[pe]===he))return le(de)})},rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const render=(...le)=>{ensureRenderer().render(...le)},createApp=(...le)=>{const oe=ensureRenderer().createApp(...le),{mount:ie}=oe;return oe.mount=ue=>{const de=normalizeContainer(ue);if(!de)return;const he=oe._component;!isFunction$2(he)&&!he.render&&!he.template&&(he.template=de.innerHTML),de.nodeType===1&&(de.textContent="");const pe=ie(de,!1,resolveRootNamespace(de));return de instanceof Element&&(de.removeAttribute("v-cloak"),de.setAttribute("data-v-app","")),pe},oe};function resolveRootNamespace(le){if(le instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&le instanceof MathMLElement)return"mathml"}function normalizeContainer(le){return isString$1(le)?document.querySelector(le):le}const FOCUSABLE_ELEMENT_SELECTORS='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',isVisible=le=>getComputedStyle(le).position==="fixed"?!1:le.offsetParent!==null,obtainAllFocusableElements$1=le=>Array.from(le.querySelectorAll(FOCUSABLE_ELEMENT_SELECTORS)).filter(oe=>isFocusable(oe)&&isVisible(oe)),isFocusable=le=>{if(le.tabIndex>0||le.tabIndex===0&&le.getAttribute("tabIndex")!==null)return!0;if(le.disabled)return!1;switch(le.nodeName){case"A":return!!le.href&&le.rel!=="ignore";case"INPUT":return!(le.type==="hidden"||le.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},triggerEvent=function(le,oe,...ie){let ue;oe.includes("mouse")||oe.includes("click")?ue="MouseEvents":oe.includes("key")?ue="KeyboardEvent":ue="HTMLEvents";const de=document.createEvent(ue);return de.initEvent(oe,...ie),le.dispatchEvent(de),le},isLeaf=le=>!le.getAttribute("aria-owns"),getSibling=(le,oe,ie)=>{const{parentNode:ue}=le;if(!ue)return null;const de=ue.querySelectorAll(ie),he=Array.prototype.indexOf.call(de,le);return de[he+oe]||null},focusNode=le=>{le&&(le.focus(),!isLeaf(le)&&le.click())},composeEventHandlers=(le,oe,{checkForDefaultPrevented:ie=!0}={})=>de=>{const he=le==null?void 0:le(de);if(ie===!1||!he)return oe==null?void 0:oe(de)},whenMouse=le=>oe=>oe.pointerType==="mouse"?le(oe):void 0;var __defProp$9=Object.defineProperty,__defProps$6=Object.defineProperties,__getOwnPropDescs$6=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$b=Object.getOwnPropertySymbols,__hasOwnProp$b=Object.prototype.hasOwnProperty,__propIsEnum$b=Object.prototype.propertyIsEnumerable,__defNormalProp$9=(le,oe,ie)=>oe in le?__defProp$9(le,oe,{enumerable:!0,configurable:!0,writable:!0,value:ie}):le[oe]=ie,__spreadValues$9=(le,oe)=>{for(var ie in oe||(oe={}))__hasOwnProp$b.call(oe,ie)&&__defNormalProp$9(le,ie,oe[ie]);if(__getOwnPropSymbols$b)for(var ie of __getOwnPropSymbols$b(oe))__propIsEnum$b.call(oe,ie)&&__defNormalProp$9(le,ie,oe[ie]);return le},__spreadProps$6=(le,oe)=>__defProps$6(le,__getOwnPropDescs$6(oe));function computedEager(le,oe){var ie;const ue=shallowRef();return watchEffect(()=>{ue.value=le()},__spreadProps$6(__spreadValues$9({},oe),{flush:(ie=void 0)!=null?ie:"sync"})),readonly(ue)}var _a$3;const isClient=typeof window<"u",isDef=le=>typeof le<"u",isFunction$1=le=>typeof le=="function",isString=le=>typeof le=="string",noop$3=()=>{},isIOS=isClient&&((_a$3=window==null?void 0:window.navigator)==null?void 0:_a$3.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function resolveUnref(le){return typeof le=="function"?le():unref(le)}function createFilterWrapper(le,oe){function ie(...ue){return new Promise((de,he)=>{Promise.resolve(le(()=>oe.apply(this,ue),{fn:oe,thisArg:this,args:ue})).then(de).catch(he)})}return ie}function debounceFilter(le,oe={}){let ie,ue,de=noop$3;const he=_e=>{clearTimeout(_e),de(),de=noop$3};return _e=>{const Ce=resolveUnref(le),xe=resolveUnref(oe.maxWait);return ie&&he(ie),Ce<=0||xe!==void 0&&xe<=0?(ue&&(he(ue),ue=null),Promise.resolve(_e())):new Promise((Ie,$e)=>{de=oe.rejectOnCancel?$e:Ie,xe&&!ue&&(ue=setTimeout(()=>{ie&&he(ie),ue=null,Ie(_e())},xe)),ie=setTimeout(()=>{ue&&he(ue),ue=null,Ie(_e())},Ce)})}}function throttleFilter(le,oe=!0,ie=!0,ue=!1){let de=0,he,pe=!0,_e=noop$3,Ce;const xe=()=>{he&&(clearTimeout(he),he=void 0,_e(),_e=noop$3)};return $e=>{const Ne=resolveUnref(le),Oe=Date.now()-de,Fe=()=>Ce=$e();return xe(),Ne<=0?(de=Date.now(),Fe()):(Oe>Ne&&(ie||!pe)?(de=Date.now(),Fe()):oe&&(Ce=new Promise((Ve,ze)=>{_e=ue?ze:Ve,he=setTimeout(()=>{de=Date.now(),pe=!0,Ve(Fe()),xe()},Math.max(0,Ne-Oe))})),!ie&&!he&&(he=setTimeout(()=>pe=!0,Ne)),pe=!1,Ce)}}function identity$1(le){return le}function computedWithControl(le,oe){let ie,ue,de;const he=ref(!0),pe=()=>{he.value=!0,de()};watch(le,pe,{flush:"sync"});const _e=isFunction$1(oe)?oe:oe.get,Ce=isFunction$1(oe)?void 0:oe.set,xe=customRef((Ie,$e)=>(ue=Ie,de=$e,{get(){return he.value&&(ie=_e(),he.value=!1),ue(),ie},set(Ne){Ce==null||Ce(Ne)}}));return Object.isExtensible(xe)&&(xe.trigger=pe),xe}function tryOnScopeDispose(le){return getCurrentScope()?(onScopeDispose(le),!0):!1}function useDebounceFn(le,oe=200,ie={}){return createFilterWrapper(debounceFilter(oe,ie),le)}function refDebounced(le,oe=200,ie={}){const ue=ref(le.value),de=useDebounceFn(()=>{ue.value=le.value},oe,ie);return watch(le,()=>de()),ue}function useThrottleFn(le,oe=200,ie=!1,ue=!0,de=!1){return createFilterWrapper(throttleFilter(oe,ie,ue,de),le)}function tryOnMounted(le,oe=!0){getCurrentInstance()?onMounted(le):oe?le():nextTick(le)}function useTimeoutFn(le,oe,ie={}){const{immediate:ue=!0}=ie,de=ref(!1);let he=null;function pe(){he&&(clearTimeout(he),he=null)}function _e(){de.value=!1,pe()}function Ce(...xe){pe(),de.value=!0,he=setTimeout(()=>{de.value=!1,he=null,le(...xe)},resolveUnref(oe))}return ue&&(de.value=!0,isClient&&Ce()),tryOnScopeDispose(_e),{isPending:readonly(de),start:Ce,stop:_e}}function unrefElement(le){var oe;const ie=resolveUnref(le);return(oe=ie==null?void 0:ie.$el)!=null?oe:ie}const defaultWindow$1=isClient?window:void 0,defaultDocument=isClient?window.document:void 0;function useEventListener(...le){let oe,ie,ue,de;if(isString(le[0])||Array.isArray(le[0])?([ie,ue,de]=le,oe=defaultWindow$1):[oe,ie,ue,de]=le,!oe)return noop$3;Array.isArray(ie)||(ie=[ie]),Array.isArray(ue)||(ue=[ue]);const he=[],pe=()=>{he.forEach(Ie=>Ie()),he.length=0},_e=(Ie,$e,Ne,Oe)=>(Ie.addEventListener($e,Ne,Oe),()=>Ie.removeEventListener($e,Ne,Oe)),Ce=watch(()=>[unrefElement(oe),resolveUnref(de)],([Ie,$e])=>{pe(),Ie&&he.push(...ie.flatMap(Ne=>ue.map(Oe=>_e(Ie,Ne,Oe,$e))))},{immediate:!0,flush:"post"}),xe=()=>{Ce(),pe()};return tryOnScopeDispose(xe),xe}let _iOSWorkaround=!1;function onClickOutside(le,oe,ie={}){const{window:ue=defaultWindow$1,ignore:de=[],capture:he=!0,detectIframe:pe=!1}=ie;if(!ue)return;isIOS&&!_iOSWorkaround&&(_iOSWorkaround=!0,Array.from(ue.document.body.children).forEach(Ne=>Ne.addEventListener("click",noop$3)));let _e=!0;const Ce=Ne=>de.some(Oe=>{if(typeof Oe=="string")return Array.from(ue.document.querySelectorAll(Oe)).some(Fe=>Fe===Ne.target||Ne.composedPath().includes(Fe));{const Fe=unrefElement(Oe);return Fe&&(Ne.target===Fe||Ne.composedPath().includes(Fe))}}),Ie=[useEventListener(ue,"click",Ne=>{const Oe=unrefElement(le);if(!(!Oe||Oe===Ne.target||Ne.composedPath().includes(Oe))){if(Ne.detail===0&&(_e=!Ce(Ne)),!_e){_e=!0;return}oe(Ne)}},{passive:!0,capture:he}),useEventListener(ue,"pointerdown",Ne=>{const Oe=unrefElement(le);Oe&&(_e=!Ne.composedPath().includes(Oe)&&!Ce(Ne))},{passive:!0}),pe&&useEventListener(ue,"blur",Ne=>{var Oe;const Fe=unrefElement(le);((Oe=ue.document.activeElement)==null?void 0:Oe.tagName)==="IFRAME"&&!(Fe!=null&&Fe.contains(ue.document.activeElement))&&oe(Ne)})].filter(Boolean);return()=>Ie.forEach(Ne=>Ne())}function useActiveElement(le={}){var oe;const{window:ie=defaultWindow$1}=le,ue=(oe=le.document)!=null?oe:ie==null?void 0:ie.document,de=computedWithControl(()=>null,()=>ue==null?void 0:ue.activeElement);return ie&&(useEventListener(ie,"blur",he=>{he.relatedTarget===null&&de.trigger()},!0),useEventListener(ie,"focus",de.trigger,!0)),de}function useSupported(le,oe=!1){const ie=ref(),ue=()=>ie.value=!!le();return ue(),tryOnMounted(ue,oe),ie}function cloneFnJSON(le){return JSON.parse(JSON.stringify(le))}const _global=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__";_global[globalKey]=_global[globalKey]||{};function useCssVar(le,oe,{window:ie=defaultWindow$1,initialValue:ue=""}={}){const de=ref(ue),he=computed(()=>{var pe;return unrefElement(oe)||((pe=ie==null?void 0:ie.document)==null?void 0:pe.documentElement)});return watch([he,()=>resolveUnref(le)],([pe,_e])=>{var Ce;if(pe&&ie){const xe=(Ce=ie.getComputedStyle(pe).getPropertyValue(_e))==null?void 0:Ce.trim();de.value=xe||ue}},{immediate:!0}),watch(de,pe=>{var _e;(_e=he.value)!=null&&_e.style&&he.value.style.setProperty(resolveUnref(le),pe)}),de}function useDocumentVisibility({document:le=defaultDocument}={}){if(!le)return ref("visible");const oe=ref(le.visibilityState);return useEventListener(le,"visibilitychange",()=>{oe.value=le.visibilityState}),oe}var __getOwnPropSymbols$g=Object.getOwnPropertySymbols,__hasOwnProp$g=Object.prototype.hasOwnProperty,__propIsEnum$g=Object.prototype.propertyIsEnumerable,__objRest$2=(le,oe)=>{var ie={};for(var ue in le)__hasOwnProp$g.call(le,ue)&&oe.indexOf(ue)<0&&(ie[ue]=le[ue]);if(le!=null&&__getOwnPropSymbols$g)for(var ue of __getOwnPropSymbols$g(le))oe.indexOf(ue)<0&&__propIsEnum$g.call(le,ue)&&(ie[ue]=le[ue]);return ie};function useResizeObserver(le,oe,ie={}){const ue=ie,{window:de=defaultWindow$1}=ue,he=__objRest$2(ue,["window"]);let pe;const _e=useSupported(()=>de&&"ResizeObserver"in de),Ce=()=>{pe&&(pe.disconnect(),pe=void 0)},xe=watch(()=>unrefElement(le),$e=>{Ce(),_e.value&&de&&$e&&(pe=new ResizeObserver(oe),pe.observe($e,he))},{immediate:!0,flush:"post"}),Ie=()=>{Ce(),xe()};return tryOnScopeDispose(Ie),{isSupported:_e,stop:Ie}}function useElementBounding(le,oe={}){const{reset:ie=!0,windowResize:ue=!0,windowScroll:de=!0,immediate:he=!0}=oe,pe=ref(0),_e=ref(0),Ce=ref(0),xe=ref(0),Ie=ref(0),$e=ref(0),Ne=ref(0),Oe=ref(0);function Fe(){const Ve=unrefElement(le);if(!Ve){ie&&(pe.value=0,_e.value=0,Ce.value=0,xe.value=0,Ie.value=0,$e.value=0,Ne.value=0,Oe.value=0);return}const ze=Ve.getBoundingClientRect();pe.value=ze.height,_e.value=ze.bottom,Ce.value=ze.left,xe.value=ze.right,Ie.value=ze.top,$e.value=ze.width,Ne.value=ze.x,Oe.value=ze.y}return useResizeObserver(le,Fe),watch(()=>unrefElement(le),Ve=>!Ve&&Fe()),de&&useEventListener("scroll",Fe,{capture:!0,passive:!0}),ue&&useEventListener("resize",Fe,{passive:!0}),tryOnMounted(()=>{he&&Fe()}),{height:pe,bottom:_e,left:Ce,right:xe,top:Ie,width:$e,x:Ne,y:Oe,update:Fe}}var __getOwnPropSymbols$8=Object.getOwnPropertySymbols,__hasOwnProp$8=Object.prototype.hasOwnProperty,__propIsEnum$8=Object.prototype.propertyIsEnumerable,__objRest$1=(le,oe)=>{var ie={};for(var ue in le)__hasOwnProp$8.call(le,ue)&&oe.indexOf(ue)<0&&(ie[ue]=le[ue]);if(le!=null&&__getOwnPropSymbols$8)for(var ue of __getOwnPropSymbols$8(le))oe.indexOf(ue)<0&&__propIsEnum$8.call(le,ue)&&(ie[ue]=le[ue]);return ie};function useMutationObserver(le,oe,ie={}){const ue=ie,{window:de=defaultWindow$1}=ue,he=__objRest$1(ue,["window"]);let pe;const _e=useSupported(()=>de&&"MutationObserver"in de),Ce=()=>{pe&&(pe.disconnect(),pe=void 0)},xe=watch(()=>unrefElement(le),$e=>{Ce(),_e.value&&de&&$e&&(pe=new MutationObserver(oe),pe.observe($e,he))},{immediate:!0}),Ie=()=>{Ce(),xe()};return tryOnScopeDispose(Ie),{isSupported:_e,stop:Ie}}var SwipeDirection;(function(le){le.UP="UP",le.RIGHT="RIGHT",le.DOWN="DOWN",le.LEFT="LEFT",le.NONE="NONE"})(SwipeDirection||(SwipeDirection={}));var __defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(le,oe,ie)=>oe in le?__defProp(le,oe,{enumerable:!0,configurable:!0,writable:!0,value:ie}):le[oe]=ie,__spreadValues=(le,oe)=>{for(var ie in oe||(oe={}))__hasOwnProp.call(oe,ie)&&__defNormalProp(le,ie,oe[ie]);if(__getOwnPropSymbols)for(var ie of __getOwnPropSymbols(oe))__propIsEnum.call(oe,ie)&&__defNormalProp(le,ie,oe[ie]);return le};const _TransitionPresets={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};__spreadValues({linear:identity$1},_TransitionPresets);function useVModel(le,oe,ie,ue={}){var de,he,pe;const{clone:_e=!1,passive:Ce=!1,eventName:xe,deep:Ie=!1,defaultValue:$e}=ue,Ne=getCurrentInstance(),Oe=ie||(Ne==null?void 0:Ne.emit)||((de=Ne==null?void 0:Ne.$emit)==null?void 0:de.bind(Ne))||((pe=(he=Ne==null?void 0:Ne.proxy)==null?void 0:he.$emit)==null?void 0:pe.bind(Ne==null?void 0:Ne.proxy));let Fe=xe;oe||(oe="modelValue"),Fe=xe||Fe||`update:${oe.toString()}`;const Ve=Ue=>_e?isFunction$1(_e)?_e(Ue):cloneFnJSON(Ue):Ue,ze=()=>isDef(le[oe])?Ve(le[oe]):$e;if(Ce){const Ue=ze(),Pt=ref(Ue);return watch(()=>le[oe],qe=>Pt.value=Ve(qe)),watch(Pt,qe=>{(qe!==le[oe]||Ie)&&Oe(Fe,qe)},{deep:Ie}),Pt}else return computed({get(){return ze()},set(Ue){Oe(Fe,Ue)}})}function useWindowFocus({window:le=defaultWindow$1}={}){if(!le)return ref(!1);const oe=ref(le.document.hasFocus());return useEventListener(le,"blur",()=>{oe.value=!1}),useEventListener(le,"focus",()=>{oe.value=!0}),oe}function useWindowSize(le={}){const{window:oe=defaultWindow$1,initialWidth:ie=1/0,initialHeight:ue=1/0,listenOrientation:de=!0,includeScrollbar:he=!0}=le,pe=ref(ie),_e=ref(ue),Ce=()=>{oe&&(he?(pe.value=oe.innerWidth,_e.value=oe.innerHeight):(pe.value=oe.document.documentElement.clientWidth,_e.value=oe.document.documentElement.clientHeight))};return Ce(),tryOnMounted(Ce),useEventListener("resize",Ce,{passive:!0}),de&&useEventListener("orientationchange",Ce,{passive:!0}),{width:pe,height:_e}}const isFirefox=()=>isClient&&/firefox/i.test(window.navigator.userAgent),isInContainer=(le,oe)=>{if(!isClient||!le||!oe)return!1;const ie=le.getBoundingClientRect();let ue;return oe instanceof Element?ue=oe.getBoundingClientRect():ue={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},ie.top<ue.bottom&&ie.bottom>ue.top&&ie.right>ue.left&&ie.left<ue.right},getOffsetTop=le=>{let oe=0,ie=le;for(;ie;)oe+=ie.offsetTop,ie=ie.offsetParent;return oe},getOffsetTopDistance=(le,oe)=>Math.abs(getOffsetTop(le)-getOffsetTop(oe)),getClientXY=le=>{let oe,ie;return le.type==="touchend"?(ie=le.changedTouches[0].clientY,oe=le.changedTouches[0].clientX):le.type.startsWith("touch")?(ie=le.touches[0].clientY,oe=le.touches[0].clientX):(ie=le.clientY,oe=le.clientX),{clientX:oe,clientY:ie}};function easeInOutCubic(le,oe,ie,ue){const de=ie-oe;return le/=ue/2,le<1?de/2*le*le*le+oe:de/2*((le-=2)*le*le+2)+oe}var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$1=freeGlobal||freeSelf||Function("return this")(),Symbol$2=root$1.Symbol,objectProto$f=Object.prototype,hasOwnProperty$e=objectProto$f.hasOwnProperty,nativeObjectToString$1=objectProto$f.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag(le){var oe=hasOwnProperty$e.call(le,symToStringTag$1),ie=le[symToStringTag$1];try{le[symToStringTag$1]=void 0;var ue=!0}catch{}var de=nativeObjectToString$1.call(le);return ue&&(oe?le[symToStringTag$1]=ie:delete le[symToStringTag$1]),de}var objectProto$e=Object.prototype,nativeObjectToString=objectProto$e.toString;function objectToString(le){return nativeObjectToString.call(le)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag(le){return le==null?le===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(le)?getRawTag(le):objectToString(le)}function isObjectLike(le){return le!=null&&typeof le=="object"}var symbolTag$3="[object Symbol]";function isSymbol$3(le){return typeof le=="symbol"||isObjectLike(le)&&baseGetTag(le)==symbolTag$3}function arrayMap(le,oe){for(var ie=-1,ue=le==null?0:le.length,de=Array(ue);++ie<ue;)de[ie]=oe(le[ie],ie,le);return de}var isArray$2=Array.isArray,INFINITY$3=1/0,symbolProto$2=Symbol$2?Symbol$2.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString(le){if(typeof le=="string")return le;if(isArray$2(le))return arrayMap(le,baseToString)+"";if(isSymbol$3(le))return symbolToString?symbolToString.call(le):"";var oe=le+"";return oe=="0"&&1/le==-INFINITY$3?"-0":oe}var reWhitespace=/\s/;function trimmedEndIndex(le){for(var oe=le.length;oe--&&reWhitespace.test(le.charAt(oe)););return oe}var reTrimStart=/^\s+/;function baseTrim(le){return le&&le.slice(0,trimmedEndIndex(le)+1).replace(reTrimStart,"")}function isObject$c(le){var oe=typeof le;return le!=null&&(oe=="object"||oe=="function")}var NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(le){if(typeof le=="number")return le;if(isSymbol$3(le))return NAN;if(isObject$c(le)){var oe=typeof le.valueOf=="function"?le.valueOf():le;le=isObject$c(oe)?oe+"":oe}if(typeof le!="string")return le===0?le:+le;le=baseTrim(le);var ie=reIsBinary.test(le);return ie||reIsOctal.test(le)?freeParseInt(le.slice(2),ie?2:8):reIsBadHex.test(le)?NAN:+le}function identity(le){return le}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(le){if(!isObject$c(le))return!1;var oe=baseGetTag(le);return oe==funcTag$2||oe==genTag$1||oe==asyncTag||oe==proxyTag}var coreJsData=root$1["__core-js_shared__"],maskSrcKey=function(){var le=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return le?"Symbol(src)_1."+le:""}();function isMasked(le){return!!maskSrcKey&&maskSrcKey in le}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(le){if(le!=null){try{return funcToString$2.call(le)}catch{}try{return le+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$d=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$d=objectProto$d.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$d).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(le){if(!isObject$c(le)||isMasked(le))return!1;var oe=isFunction(le)?reIsNative:reIsHostCtor;return oe.test(toSource(le))}function getValue$1(le,oe){return le==null?void 0:le[oe]}function getNative(le,oe){var ie=getValue$1(le,oe);return baseIsNative(ie)?ie:void 0}var WeakMap$3=getNative(root$1,"WeakMap"),objectCreate$1=Object.create,baseCreate=function(){function le(){}return function(oe){if(!isObject$c(oe))return{};if(objectCreate$1)return objectCreate$1(oe);le.prototype=oe;var ie=new le;return le.prototype=void 0,ie}}();function apply$4(le,oe,ie){switch(ie.length){case 0:return le.call(oe);case 1:return le.call(oe,ie[0]);case 2:return le.call(oe,ie[0],ie[1]);case 3:return le.call(oe,ie[0],ie[1],ie[2])}return le.apply(oe,ie)}function noop$2(){}function copyArray(le,oe){var ie=-1,ue=le.length;for(oe||(oe=Array(ue));++ie<ue;)oe[ie]=le[ie];return oe}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(le){var oe=0,ie=0;return function(){var ue=nativeNow(),de=HOT_SPAN-(ue-ie);if(ie=ue,de>0){if(++oe>=HOT_COUNT)return arguments[0]}else oe=0;return le.apply(void 0,arguments)}}function constant$1(le){return function(){return le}}var defineProperty$6=function(){try{var le=getNative(Object,"defineProperty");return le({},"",{}),le}catch{}}(),baseSetToString=defineProperty$6?function(le,oe){return defineProperty$6(le,"toString",{configurable:!0,enumerable:!1,value:constant$1(oe),writable:!0})}:identity,setToString=shortOut(baseSetToString);function arrayEach(le,oe){for(var ie=-1,ue=le==null?0:le.length;++ie<ue&&oe(le[ie],ie,le)!==!1;);return le}function baseFindIndex(le,oe,ie,ue){for(var de=le.length,he=ie+(ue?1:-1);ue?he--:++he<de;)if(oe(le[he],he,le))return he;return-1}function baseIsNaN(le){return le!==le}function strictIndexOf(le,oe,ie){for(var ue=ie-1,de=le.length;++ue<de;)if(le[ue]===oe)return ue;return-1}function baseIndexOf(le,oe,ie){return oe===oe?strictIndexOf(le,oe,ie):baseFindIndex(le,baseIsNaN,ie)}function arrayIncludes$1(le,oe){var ie=le==null?0:le.length;return!!ie&&baseIndexOf(le,oe,0)>-1}var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(le,oe){var ie=typeof le;return oe=oe??MAX_SAFE_INTEGER$1,!!oe&&(ie=="number"||ie!="symbol"&&reIsUint.test(le))&&le>-1&&le%1==0&&le<oe}function baseAssignValue(le,oe,ie){oe=="__proto__"&&defineProperty$6?defineProperty$6(le,oe,{configurable:!0,enumerable:!0,value:ie,writable:!0}):le[oe]=ie}function eq$1(le,oe){return le===oe||le!==le&&oe!==oe}var objectProto$c=Object.prototype,hasOwnProperty$c=objectProto$c.hasOwnProperty;function assignValue(le,oe,ie){var ue=le[oe];(!(hasOwnProperty$c.call(le,oe)&&eq$1(ue,ie))||ie===void 0&&!(oe in le))&&baseAssignValue(le,oe,ie)}function copyObject(le,oe,ie,ue){var de=!ie;ie||(ie={});for(var he=-1,pe=oe.length;++he<pe;){var _e=oe[he],Ce=void 0;Ce===void 0&&(Ce=le[_e]),de?baseAssignValue(ie,_e,Ce):assignValue(ie,_e,Ce)}return ie}var nativeMax$1=Math.max;function overRest(le,oe,ie){return oe=nativeMax$1(oe===void 0?le.length-1:oe,0),function(){for(var ue=arguments,de=-1,he=nativeMax$1(ue.length-oe,0),pe=Array(he);++de<he;)pe[de]=ue[oe+de];de=-1;for(var _e=Array(oe+1);++de<oe;)_e[de]=ue[de];return _e[oe]=ie(pe),apply$4(le,this,_e)}}function baseRest(le,oe){return setToString(overRest(le,oe,identity),le+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(le){return typeof le=="number"&&le>-1&&le%1==0&&le<=MAX_SAFE_INTEGER}function isArrayLike(le){return le!=null&&isLength(le.length)&&!isFunction(le)}function isIterateeCall(le,oe,ie){if(!isObject$c(ie))return!1;var ue=typeof oe;return(ue=="number"?isArrayLike(ie)&&isIndex(oe,ie.length):ue=="string"&&oe in ie)?eq$1(ie[oe],le):!1}function createAssigner(le){return baseRest(function(oe,ie){var ue=-1,de=ie.length,he=de>1?ie[de-1]:void 0,pe=de>2?ie[2]:void 0;for(he=le.length>3&&typeof he=="function"?(de--,he):void 0,pe&&isIterateeCall(ie[0],ie[1],pe)&&(he=de<3?void 0:he,de=1),oe=Object(oe);++ue<de;){var _e=ie[ue];_e&&le(oe,_e,ue,he)}return oe})}var objectProto$b=Object.prototype;function isPrototype(le){var oe=le&&le.constructor,ie=typeof oe=="function"&&oe.prototype||objectProto$b;return le===ie}function baseTimes(le,oe){for(var ie=-1,ue=Array(le);++ie<le;)ue[ie]=oe(ie);return ue}var argsTag$3="[object Arguments]";function baseIsArguments(le){return isObjectLike(le)&&baseGetTag(le)==argsTag$3}var objectProto$a=Object.prototype,hasOwnProperty$b=objectProto$a.hasOwnProperty,propertyIsEnumerable$1=objectProto$a.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(le){return isObjectLike(le)&&hasOwnProperty$b.call(le,"callee")&&!propertyIsEnumerable$1.call(le,"callee")};function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root$1.Buffer:void 0,nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$5="[object Map]",numberTag$3="[object Number]",objectTag$4="[object Object]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$3="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$5]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$4]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$5]=typedArrayTags[stringTag$3]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(le){return isObjectLike(le)&&isLength(le.length)&&!!typedArrayTags[baseGetTag(le)]}function baseUnary(le){return function(oe){return le(oe)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal.process,nodeUtil=function(){try{var le=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return le||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$9=Object.prototype,hasOwnProperty$a=objectProto$9.hasOwnProperty;function arrayLikeKeys(le,oe){var ie=isArray$2(le),ue=!ie&&isArguments(le),de=!ie&&!ue&&isBuffer(le),he=!ie&&!ue&&!de&&isTypedArray(le),pe=ie||ue||de||he,_e=pe?baseTimes(le.length,String):[],Ce=_e.length;for(var xe in le)(oe||hasOwnProperty$a.call(le,xe))&&!(pe&&(xe=="length"||de&&(xe=="offset"||xe=="parent")||he&&(xe=="buffer"||xe=="byteLength"||xe=="byteOffset")||isIndex(xe,Ce)))&&_e.push(xe);return _e}function overArg(le,oe){return function(ie){return le(oe(ie))}}var nativeKeys=overArg(Object.keys,Object),objectProto$8=Object.prototype,hasOwnProperty$9=objectProto$8.hasOwnProperty;function baseKeys(le){if(!isPrototype(le))return nativeKeys(le);var oe=[];for(var ie in Object(le))hasOwnProperty$9.call(le,ie)&&ie!="constructor"&&oe.push(ie);return oe}function keys$1(le){return isArrayLike(le)?arrayLikeKeys(le):baseKeys(le)}function nativeKeysIn(le){var oe=[];if(le!=null)for(var ie in Object(le))oe.push(ie);return oe}var objectProto$7=Object.prototype,hasOwnProperty$8=objectProto$7.hasOwnProperty;function baseKeysIn(le){if(!isObject$c(le))return nativeKeysIn(le);var oe=isPrototype(le),ie=[];for(var ue in le)ue=="constructor"&&(oe||!hasOwnProperty$8.call(le,ue))||ie.push(ue);return ie}function keysIn(le){return isArrayLike(le)?arrayLikeKeys(le,!0):baseKeysIn(le)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(le,oe){if(isArray$2(le))return!1;var ie=typeof le;return ie=="number"||ie=="symbol"||ie=="boolean"||le==null||isSymbol$3(le)?!0:reIsPlainProp.test(le)||!reIsDeepProp.test(le)||oe!=null&&le in Object(oe)}var nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(le){var oe=this.has(le)&&delete this.__data__[le];return this.size-=oe?1:0,oe}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$6=Object.prototype,hasOwnProperty$7=objectProto$6.hasOwnProperty;function hashGet(le){var oe=this.__data__;if(nativeCreate){var ie=oe[le];return ie===HASH_UNDEFINED$2?void 0:ie}return hasOwnProperty$7.call(oe,le)?oe[le]:void 0}var objectProto$5=Object.prototype,hasOwnProperty$6=objectProto$5.hasOwnProperty;function hashHas(le){var oe=this.__data__;return nativeCreate?oe[le]!==void 0:hasOwnProperty$6.call(oe,le)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(le,oe){var ie=this.__data__;return this.size+=this.has(le)?0:1,ie[le]=nativeCreate&&oe===void 0?HASH_UNDEFINED$1:oe,this}function Hash(le){var oe=-1,ie=le==null?0:le.length;for(this.clear();++oe<ie;){var ue=le[oe];this.set(ue[0],ue[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(le,oe){for(var ie=le.length;ie--;)if(eq$1(le[ie][0],oe))return ie;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(le){var oe=this.__data__,ie=assocIndexOf(oe,le);if(ie<0)return!1;var ue=oe.length-1;return ie==ue?oe.pop():splice.call(oe,ie,1),--this.size,!0}function listCacheGet(le){var oe=this.__data__,ie=assocIndexOf(oe,le);return ie<0?void 0:oe[ie][1]}function listCacheHas(le){return assocIndexOf(this.__data__,le)>-1}function listCacheSet(le,oe){var ie=this.__data__,ue=assocIndexOf(ie,le);return ue<0?(++this.size,ie.push([le,oe])):ie[ue][1]=oe,this}function ListCache(le){var oe=-1,ie=le==null?0:le.length;for(this.clear();++oe<ie;){var ue=le[oe];this.set(ue[0],ue[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root$1,"Map");function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function isKeyable(le){var oe=typeof le;return oe=="string"||oe=="number"||oe=="symbol"||oe=="boolean"?le!=="__proto__":le===null}function getMapData(le,oe){var ie=le.__data__;return isKeyable(oe)?ie[typeof oe=="string"?"string":"hash"]:ie.map}function mapCacheDelete(le){var oe=getMapData(this,le).delete(le);return this.size-=oe?1:0,oe}function mapCacheGet(le){return getMapData(this,le).get(le)}function mapCacheHas(le){return getMapData(this,le).has(le)}function mapCacheSet(le,oe){var ie=getMapData(this,le),ue=ie.size;return ie.set(le,oe),this.size+=ie.size==ue?0:1,this}function MapCache(le){var oe=-1,ie=le==null?0:le.length;for(this.clear();++oe<ie;){var ue=le[oe];this.set(ue[0],ue[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$2="Expected a function";function memoize(le,oe){if(typeof le!="function"||oe!=null&&typeof oe!="function")throw new TypeError(FUNC_ERROR_TEXT$2);var ie=function(){var ue=arguments,de=oe?oe.apply(this,ue):ue[0],he=ie.cache;if(he.has(de))return he.get(de);var pe=le.apply(this,ue);return ie.cache=he.set(de,pe)||he,pe};return ie.cache=new(memoize.Cache||MapCache),ie}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(le){var oe=memoize(le,function(ue){return ie.size===MAX_MEMOIZE_SIZE&&ie.clear(),ue}),ie=oe.cache;return oe}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(le){var oe=[];return le.charCodeAt(0)===46&&oe.push(""),le.replace(rePropName,function(ie,ue,de,he){oe.push(de?he.replace(reEscapeChar,"$1"):ue||ie)}),oe});function toString$c(le){return le==null?"":baseToString(le)}function castPath(le,oe){return isArray$2(le)?le:isKey(le,oe)?[le]:stringToPath(toString$c(le))}var INFINITY$2=1/0;function toKey(le){if(typeof le=="string"||isSymbol$3(le))return le;var oe=le+"";return oe=="0"&&1/le==-INFINITY$2?"-0":oe}function baseGet(le,oe){oe=castPath(oe,le);for(var ie=0,ue=oe.length;le!=null&&ie<ue;)le=le[toKey(oe[ie++])];return ie&&ie==ue?le:void 0}function get$1(le,oe,ie){var ue=le==null?void 0:baseGet(le,oe);return ue===void 0?ie:ue}function arrayPush$1(le,oe){for(var ie=-1,ue=oe.length,de=le.length;++ie<ue;)le[de+ie]=oe[ie];return le}var spreadableSymbol=Symbol$2?Symbol$2.isConcatSpreadable:void 0;function isFlattenable(le){return isArray$2(le)||isArguments(le)||!!(spreadableSymbol&&le&&le[spreadableSymbol])}function baseFlatten(le,oe,ie,ue,de){var he=-1,pe=le.length;for(ie||(ie=isFlattenable),de||(de=[]);++he<pe;){var _e=le[he];oe>0&&ie(_e)?oe>1?baseFlatten(_e,oe-1,ie,ue,de):arrayPush$1(de,_e):ue||(de[de.length]=_e)}return de}function flatten(le){var oe=le==null?0:le.length;return oe?baseFlatten(le,1):[]}function flatRest(le){return setToString(overRest(le,void 0,flatten),le+"")}var getPrototype=overArg(Object.getPrototypeOf,Object),objectTag$3="[object Object]",funcProto=Function.prototype,objectProto$4=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$5=objectProto$4.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject(le){if(!isObjectLike(le)||baseGetTag(le)!=objectTag$3)return!1;var oe=getPrototype(le);if(oe===null)return!0;var ie=hasOwnProperty$5.call(oe,"constructor")&&oe.constructor;return typeof ie=="function"&&ie instanceof ie&&funcToString.call(ie)==objectCtorString}function baseSlice(le,oe,ie){var ue=-1,de=le.length;oe<0&&(oe=-oe>de?0:de+oe),ie=ie>de?de:ie,ie<0&&(ie+=de),de=oe>ie?0:ie-oe>>>0,oe>>>=0;for(var he=Array(de);++ue<de;)he[ue]=le[ue+oe];return he}function castArray$1(){if(!arguments.length)return[];var le=arguments[0];return isArray$2(le)?le:[le]}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(le){var oe=this.__data__,ie=oe.delete(le);return this.size=oe.size,ie}function stackGet(le){return this.__data__.get(le)}function stackHas(le){return this.__data__.has(le)}var LARGE_ARRAY_SIZE$1=200;function stackSet(le,oe){var ie=this.__data__;if(ie instanceof ListCache){var ue=ie.__data__;if(!Map$1||ue.length<LARGE_ARRAY_SIZE$1-1)return ue.push([le,oe]),this.size=++ie.size,this;ie=this.__data__=new MapCache(ue)}return ie.set(le,oe),this.size=ie.size,this}function Stack$1(le){var oe=this.__data__=new ListCache(le);this.size=oe.size}Stack$1.prototype.clear=stackClear;Stack$1.prototype.delete=stackDelete;Stack$1.prototype.get=stackGet;Stack$1.prototype.has=stackHas;Stack$1.prototype.set=stackSet;function baseAssign(le,oe){return le&&copyObject(oe,keys$1(oe),le)}function baseAssignIn(le,oe){return le&&copyObject(oe,keysIn(oe),le)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root$1.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(le,oe){if(oe)return le.slice();var ie=le.length,ue=allocUnsafe?allocUnsafe(ie):new le.constructor(ie);return le.copy(ue),ue}function arrayFilter(le,oe){for(var ie=-1,ue=le==null?0:le.length,de=0,he=[];++ie<ue;){var pe=le[ie];oe(pe,ie,le)&&(he[de++]=pe)}return he}function stubArray(){return[]}var objectProto$3=Object.prototype,propertyIsEnumerable=objectProto$3.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(le){return le==null?[]:(le=Object(le),arrayFilter(nativeGetSymbols$1(le),function(oe){return propertyIsEnumerable.call(le,oe)}))}:stubArray;function copySymbols(le,oe){return copyObject(le,getSymbols(le),oe)}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(le){for(var oe=[];le;)arrayPush$1(oe,getSymbols(le)),le=getPrototype(le);return oe}:stubArray;function copySymbolsIn(le,oe){return copyObject(le,getSymbolsIn(le),oe)}function baseGetAllKeys(le,oe,ie){var ue=oe(le);return isArray$2(le)?ue:arrayPush$1(ue,ie(le))}function getAllKeys(le){return baseGetAllKeys(le,keys$1,getSymbols)}function getAllKeysIn(le){return baseGetAllKeys(le,keysIn,getSymbolsIn)}var DataView$1=getNative(root$1,"DataView"),Promise$2=getNative(root$1,"Promise"),Set$1=getNative(root$1,"Set"),mapTag$4="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$4="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$2),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$3),getTag$1=baseGetTag;(DataView$1&&getTag$1(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$3||Map$1&&getTag$1(new Map$1)!=mapTag$4||Promise$2&&getTag$1(Promise$2.resolve())!=promiseTag||Set$1&&getTag$1(new Set$1)!=setTag$4||WeakMap$3&&getTag$1(new WeakMap$3)!=weakMapTag$1)&&(getTag$1=function(le){var oe=baseGetTag(le),ie=oe==objectTag$2?le.constructor:void 0,ue=ie?toSource(ie):"";if(ue)switch(ue){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$4;case promiseCtorString:return promiseTag;case setCtorString:return setTag$4;case weakMapCtorString:return weakMapTag$1}return oe});var objectProto$2=Object.prototype,hasOwnProperty$4=objectProto$2.hasOwnProperty;function initCloneArray(le){var oe=le.length,ie=new le.constructor(oe);return oe&&typeof le[0]=="string"&&hasOwnProperty$4.call(le,"index")&&(ie.index=le.index,ie.input=le.input),ie}var Uint8Array$1=root$1.Uint8Array;function cloneArrayBuffer(le){var oe=new le.constructor(le.byteLength);return new Uint8Array$1(oe).set(new Uint8Array$1(le)),oe}function cloneDataView(le,oe){var ie=oe?cloneArrayBuffer(le.buffer):le.buffer;return new le.constructor(ie,le.byteOffset,le.byteLength)}var reFlags=/\w*$/;function cloneRegExp(le){var oe=new le.constructor(le.source,reFlags.exec(le));return oe.lastIndex=le.lastIndex,oe}var symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(le){return symbolValueOf$1?Object(symbolValueOf$1.call(le)):{}}function cloneTypedArray(le,oe){var ie=oe?cloneArrayBuffer(le.buffer):le.buffer;return new le.constructor(ie,le.byteOffset,le.length)}var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$3="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$3="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(le,oe,ie){var ue=le.constructor;switch(oe){case arrayBufferTag$2:return cloneArrayBuffer(le);case boolTag$2:case dateTag$2:return new ue(+le);case dataViewTag$2:return cloneDataView(le,ie);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(le,ie);case mapTag$3:return new ue;case numberTag$2:case stringTag$2:return new ue(le);case regexpTag$2:return cloneRegExp(le);case setTag$3:return new ue;case symbolTag$2:return cloneSymbol(le)}}function initCloneObject(le){return typeof le.constructor=="function"&&!isPrototype(le)?baseCreate(getPrototype(le)):{}}var mapTag$2="[object Map]";function baseIsMap(le){return isObjectLike(le)&&getTag$1(le)==mapTag$2}var nodeIsMap=nodeUtil&&nodeUtil.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap,setTag$2="[object Set]";function baseIsSet(le){return isObjectLike(le)&&getTag$1(le)==setTag$2}var nodeIsSet=nodeUtil&&nodeUtil.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,CLONE_DEEP_FLAG$2=1,CLONE_FLAT_FLAG$1=2,CLONE_SYMBOLS_FLAG$3=4,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$1="[object Map]",numberTag$1="[object Number]",objectTag$1="[object Object]",regexpTag$1="[object RegExp]",setTag$1="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$1]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$1]=cloneableTags[numberTag$1]=cloneableTags[objectTag$1]=cloneableTags[regexpTag$1]=cloneableTags[setTag$1]=cloneableTags[stringTag$1]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(le,oe,ie,ue,de,he){var pe,_e=oe&CLONE_DEEP_FLAG$2,Ce=oe&CLONE_FLAT_FLAG$1,xe=oe&CLONE_SYMBOLS_FLAG$3;if(ie&&(pe=de?ie(le,ue,de,he):ie(le)),pe!==void 0)return pe;if(!isObject$c(le))return le;var Ie=isArray$2(le);if(Ie){if(pe=initCloneArray(le),!_e)return copyArray(le,pe)}else{var $e=getTag$1(le),Ne=$e==funcTag||$e==genTag;if(isBuffer(le))return cloneBuffer(le,_e);if($e==objectTag$1||$e==argsTag$1||Ne&&!de){if(pe=Ce||Ne?{}:initCloneObject(le),!_e)return Ce?copySymbolsIn(le,baseAssignIn(pe,le)):copySymbols(le,baseAssign(pe,le))}else{if(!cloneableTags[$e])return de?le:{};pe=initCloneByTag(le,$e,_e)}}he||(he=new Stack$1);var Oe=he.get(le);if(Oe)return Oe;he.set(le,pe),isSet(le)?le.forEach(function(ze){pe.add(baseClone(ze,oe,ie,ze,le,he))}):isMap(le)&&le.forEach(function(ze,Ue){pe.set(Ue,baseClone(ze,oe,ie,Ue,le,he))});var Fe=xe?Ce?getAllKeysIn:getAllKeys:Ce?keysIn:keys$1,Ve=Ie?void 0:Fe(le);return arrayEach(Ve||le,function(ze,Ue){Ve&&(Ue=ze,ze=le[Ue]),assignValue(pe,Ue,baseClone(ze,oe,ie,Ue,le,he))}),pe}var CLONE_SYMBOLS_FLAG$2=4;function clone$1(le){return baseClone(le,CLONE_SYMBOLS_FLAG$2)}var CLONE_DEEP_FLAG$1=1,CLONE_SYMBOLS_FLAG$1=4;function cloneDeep(le){return baseClone(le,CLONE_DEEP_FLAG$1|CLONE_SYMBOLS_FLAG$1)}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(le){return this.__data__.set(le,HASH_UNDEFINED),this}function setCacheHas(le){return this.__data__.has(le)}function SetCache(le){var oe=-1,ie=le==null?0:le.length;for(this.__data__=new MapCache;++oe<ie;)this.add(le[oe])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(le,oe){for(var ie=-1,ue=le==null?0:le.length;++ie<ue;)if(oe(le[ie],ie,le))return!0;return!1}function cacheHas(le,oe){return le.has(oe)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(le,oe,ie,ue,de,he){var pe=ie&COMPARE_PARTIAL_FLAG$5,_e=le.length,Ce=oe.length;if(_e!=Ce&&!(pe&&Ce>_e))return!1;var xe=he.get(le),Ie=he.get(oe);if(xe&&Ie)return xe==oe&&Ie==le;var $e=-1,Ne=!0,Oe=ie&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(he.set(le,oe),he.set(oe,le);++$e<_e;){var Fe=le[$e],Ve=oe[$e];if(ue)var ze=pe?ue(Ve,Fe,$e,oe,le,he):ue(Fe,Ve,$e,le,oe,he);if(ze!==void 0){if(ze)continue;Ne=!1;break}if(Oe){if(!arraySome(oe,function(Ue,Pt){if(!cacheHas(Oe,Pt)&&(Fe===Ue||de(Fe,Ue,ie,ue,he)))return Oe.push(Pt)})){Ne=!1;break}}else if(!(Fe===Ve||de(Fe,Ve,ie,ue,he))){Ne=!1;break}}return he.delete(le),he.delete(oe),Ne}function mapToArray(le){var oe=-1,ie=Array(le.size);return le.forEach(function(ue,de){ie[++oe]=[de,ue]}),ie}function setToArray(le){var oe=-1,ie=Array(le.size);return le.forEach(function(ue){ie[++oe]=ue}),ie}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(le,oe,ie,ue,de,he,pe){switch(ie){case dataViewTag:if(le.byteLength!=oe.byteLength||le.byteOffset!=oe.byteOffset)return!1;le=le.buffer,oe=oe.buffer;case arrayBufferTag:return!(le.byteLength!=oe.byteLength||!he(new Uint8Array$1(le),new Uint8Array$1(oe)));case boolTag:case dateTag:case numberTag:return eq$1(+le,+oe);case errorTag:return le.name==oe.name&&le.message==oe.message;case regexpTag:case stringTag:return le==oe+"";case mapTag:var _e=mapToArray;case setTag:var Ce=ue&COMPARE_PARTIAL_FLAG$4;if(_e||(_e=setToArray),le.size!=oe.size&&!Ce)return!1;var xe=pe.get(le);if(xe)return xe==oe;ue|=COMPARE_UNORDERED_FLAG$2,pe.set(le,oe);var Ie=equalArrays(_e(le),_e(oe),ue,de,he,pe);return pe.delete(le),Ie;case symbolTag:if(symbolValueOf)return symbolValueOf.call(le)==symbolValueOf.call(oe)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$1=Object.prototype,hasOwnProperty$3=objectProto$1.hasOwnProperty;function equalObjects(le,oe,ie,ue,de,he){var pe=ie&COMPARE_PARTIAL_FLAG$3,_e=getAllKeys(le),Ce=_e.length,xe=getAllKeys(oe),Ie=xe.length;if(Ce!=Ie&&!pe)return!1;for(var $e=Ce;$e--;){var Ne=_e[$e];if(!(pe?Ne in oe:hasOwnProperty$3.call(oe,Ne)))return!1}var Oe=he.get(le),Fe=he.get(oe);if(Oe&&Fe)return Oe==oe&&Fe==le;var Ve=!0;he.set(le,oe),he.set(oe,le);for(var ze=pe;++$e<Ce;){Ne=_e[$e];var Ue=le[Ne],Pt=oe[Ne];if(ue)var qe=pe?ue(Pt,Ue,Ne,oe,le,he):ue(Ue,Pt,Ne,le,oe,he);if(!(qe===void 0?Ue===Pt||de(Ue,Pt,ie,ue,he):qe)){Ve=!1;break}ze||(ze=Ne=="constructor")}if(Ve&&!ze){var Et=le.constructor,kt=oe.constructor;Et!=kt&&"constructor"in le&&"constructor"in oe&&!(typeof Et=="function"&&Et instanceof Et&&typeof kt=="function"&&kt instanceof kt)&&(Ve=!1)}return he.delete(le),he.delete(oe),Ve}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty$2=objectProto.hasOwnProperty;function baseIsEqualDeep(le,oe,ie,ue,de,he){var pe=isArray$2(le),_e=isArray$2(oe),Ce=pe?arrayTag:getTag$1(le),xe=_e?arrayTag:getTag$1(oe);Ce=Ce==argsTag?objectTag:Ce,xe=xe==argsTag?objectTag:xe;var Ie=Ce==objectTag,$e=xe==objectTag,Ne=Ce==xe;if(Ne&&isBuffer(le)){if(!isBuffer(oe))return!1;pe=!0,Ie=!1}if(Ne&&!Ie)return he||(he=new Stack$1),pe||isTypedArray(le)?equalArrays(le,oe,ie,ue,de,he):equalByTag(le,oe,Ce,ie,ue,de,he);if(!(ie&COMPARE_PARTIAL_FLAG$2)){var Oe=Ie&&hasOwnProperty$2.call(le,"__wrapped__"),Fe=$e&&hasOwnProperty$2.call(oe,"__wrapped__");if(Oe||Fe){var Ve=Oe?le.value():le,ze=Fe?oe.value():oe;return he||(he=new Stack$1),de(Ve,ze,ie,ue,he)}}return Ne?(he||(he=new Stack$1),equalObjects(le,oe,ie,ue,de,he)):!1}function baseIsEqual(le,oe,ie,ue,de){return le===oe?!0:le==null||oe==null||!isObjectLike(le)&&!isObjectLike(oe)?le!==le&&oe!==oe:baseIsEqualDeep(le,oe,ie,ue,baseIsEqual,de)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(le,oe,ie,ue){var de=ie.length,he=de;if(le==null)return!he;for(le=Object(le);de--;){var pe=ie[de];if(pe[2]?pe[1]!==le[pe[0]]:!(pe[0]in le))return!1}for(;++de<he;){pe=ie[de];var _e=pe[0],Ce=le[_e],xe=pe[1];if(pe[2]){if(Ce===void 0&&!(_e in le))return!1}else{var Ie=new Stack$1,$e;if(!($e===void 0?baseIsEqual(xe,Ce,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,ue,Ie):$e))return!1}}return!0}function isStrictComparable(le){return le===le&&!isObject$c(le)}function getMatchData(le){for(var oe=keys$1(le),ie=oe.length;ie--;){var ue=oe[ie],de=le[ue];oe[ie]=[ue,de,isStrictComparable(de)]}return oe}function matchesStrictComparable(le,oe){return function(ie){return ie==null?!1:ie[le]===oe&&(oe!==void 0||le in Object(ie))}}function baseMatches(le){var oe=getMatchData(le);return oe.length==1&&oe[0][2]?matchesStrictComparable(oe[0][0],oe[0][1]):function(ie){return ie===le||baseIsMatch(ie,le,oe)}}function baseHasIn(le,oe){return le!=null&&oe in Object(le)}function hasPath(le,oe,ie){oe=castPath(oe,le);for(var ue=-1,de=oe.length,he=!1;++ue<de;){var pe=toKey(oe[ue]);if(!(he=le!=null&&ie(le,pe)))break;le=le[pe]}return he||++ue!=de?he:(de=le==null?0:le.length,!!de&&isLength(de)&&isIndex(pe,de)&&(isArray$2(le)||isArguments(le)))}function hasIn(le,oe){return le!=null&&hasPath(le,oe,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(le,oe){return isKey(le)&&isStrictComparable(oe)?matchesStrictComparable(toKey(le),oe):function(ie){var ue=get$1(ie,le);return ue===void 0&&ue===oe?hasIn(ie,le):baseIsEqual(oe,ue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(le){return function(oe){return oe==null?void 0:oe[le]}}function basePropertyDeep(le){return function(oe){return baseGet(oe,le)}}function property(le){return isKey(le)?baseProperty(toKey(le)):basePropertyDeep(le)}function baseIteratee(le){return typeof le=="function"?le:le==null?identity:typeof le=="object"?isArray$2(le)?baseMatchesProperty(le[0],le[1]):baseMatches(le):property(le)}function createBaseFor(le){return function(oe,ie,ue){for(var de=-1,he=Object(oe),pe=ue(oe),_e=pe.length;_e--;){var Ce=pe[++de];if(ie(he[Ce],Ce,he)===!1)break}return oe}}var baseFor=createBaseFor();function baseForOwn(le,oe){return le&&baseFor(le,oe,keys$1)}function createBaseEach(le,oe){return function(ie,ue){if(ie==null)return ie;if(!isArrayLike(ie))return le(ie,ue);for(var de=ie.length,he=-1,pe=Object(ie);++he<de&&ue(pe[he],he,pe)!==!1;);return ie}}var baseEach=createBaseEach(baseForOwn),now$1=function(){return root$1.Date.now()},FUNC_ERROR_TEXT$1="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce(le,oe,ie){var ue,de,he,pe,_e,Ce,xe=0,Ie=!1,$e=!1,Ne=!0;if(typeof le!="function")throw new TypeError(FUNC_ERROR_TEXT$1);oe=toNumber(oe)||0,isObject$c(ie)&&(Ie=!!ie.leading,$e="maxWait"in ie,he=$e?nativeMax(toNumber(ie.maxWait)||0,oe):he,Ne="trailing"in ie?!!ie.trailing:Ne);function Oe(At){var Dt=ue,Lt=de;return ue=de=void 0,xe=At,pe=le.apply(Lt,Dt),pe}function Fe(At){return xe=At,_e=setTimeout(Ue,oe),Ie?Oe(At):pe}function Ve(At){var Dt=At-Ce,Lt=At-xe,jt=oe-Dt;return $e?nativeMin(jt,he-Lt):jt}function ze(At){var Dt=At-Ce,Lt=At-xe;return Ce===void 0||Dt>=oe||Dt<0||$e&&Lt>=he}function Ue(){var At=now$1();if(ze(At))return Pt(At);_e=setTimeout(Ue,Ve(At))}function Pt(At){return _e=void 0,Ne&&ue?Oe(At):(ue=de=void 0,pe)}function qe(){_e!==void 0&&clearTimeout(_e),xe=0,ue=Ce=de=_e=void 0}function Et(){return _e===void 0?pe:Pt(now$1())}function kt(){var At=now$1(),Dt=ze(At);if(ue=arguments,de=this,Ce=At,Dt){if(_e===void 0)return Fe(Ce);if($e)return clearTimeout(_e),_e=setTimeout(Ue,oe),Oe(Ce)}return _e===void 0&&(_e=setTimeout(Ue,oe)),pe}return kt.cancel=qe,kt.flush=Et,kt}function assignMergeValue(le,oe,ie){(ie!==void 0&&!eq$1(le[oe],ie)||ie===void 0&&!(oe in le))&&baseAssignValue(le,oe,ie)}function isArrayLikeObject(le){return isObjectLike(le)&&isArrayLike(le)}function safeGet(le,oe){if(!(oe==="constructor"&&typeof le[oe]=="function")&&oe!="__proto__")return le[oe]}function toPlainObject(le){return copyObject(le,keysIn(le))}function baseMergeDeep(le,oe,ie,ue,de,he,pe){var _e=safeGet(le,ie),Ce=safeGet(oe,ie),xe=pe.get(Ce);if(xe){assignMergeValue(le,ie,xe);return}var Ie=he?he(_e,Ce,ie+"",le,oe,pe):void 0,$e=Ie===void 0;if($e){var Ne=isArray$2(Ce),Oe=!Ne&&isBuffer(Ce),Fe=!Ne&&!Oe&&isTypedArray(Ce);Ie=Ce,Ne||Oe||Fe?isArray$2(_e)?Ie=_e:isArrayLikeObject(_e)?Ie=copyArray(_e):Oe?($e=!1,Ie=cloneBuffer(Ce,!0)):Fe?($e=!1,Ie=cloneTypedArray(Ce,!0)):Ie=[]:isPlainObject(Ce)||isArguments(Ce)?(Ie=_e,isArguments(_e)?Ie=toPlainObject(_e):(!isObject$c(_e)||isFunction(_e))&&(Ie=initCloneObject(Ce))):$e=!1}$e&&(pe.set(Ce,Ie),de(Ie,Ce,ue,he,pe),pe.delete(Ce)),assignMergeValue(le,ie,Ie)}function baseMerge(le,oe,ie,ue,de){le!==oe&&baseFor(oe,function(he,pe){if(de||(de=new Stack$1),isObject$c(he))baseMergeDeep(le,oe,pe,ie,baseMerge,ue,de);else{var _e=ue?ue(safeGet(le,pe),he,pe+"",le,oe,de):void 0;_e===void 0&&(_e=he),assignMergeValue(le,pe,_e)}},keysIn)}function last$1(le){var oe=le==null?0:le.length;return oe?le[oe-1]:void 0}function findLastIndex(le,oe,ie){var ue=le==null?0:le.length;if(!ue)return-1;var de=ue-1;return baseFindIndex(le,baseIteratee(oe),de,!0)}function baseMap(le,oe){var ie=-1,ue=isArrayLike(le)?Array(le.length):[];return baseEach(le,function(de,he,pe){ue[++ie]=oe(de,he,pe)}),ue}function map$1(le,oe){var ie=isArray$2(le)?arrayMap:baseMap;return ie(le,baseIteratee(oe))}function flatMap(le,oe){return baseFlatten(map$1(le,oe),1)}var INFINITY$1=1/0;function flattenDeep(le){var oe=le==null?0:le.length;return oe?baseFlatten(le,INFINITY$1):[]}function fromPairs(le){for(var oe=-1,ie=le==null?0:le.length,ue={};++oe<ie;){var de=le[oe];ue[de[0]]=de[1]}return ue}function parent(le,oe){return oe.length<2?le:baseGet(le,baseSlice(oe,0,-1))}function isEqual$1(le,oe){return baseIsEqual(le,oe)}function isNil(le){return le==null}function isUndefined$1(le){return le===void 0}var merge=createAssigner(function(le,oe,ie){baseMerge(le,oe,ie)});function baseUnset(le,oe){return oe=castPath(oe,le),le=parent(le,oe),le==null||delete le[toKey(last$1(oe))]}function customOmitClone(le){return isPlainObject(le)?void 0:le}var CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,omit=flatRest(function(le,oe){var ie={};if(le==null)return ie;var ue=!1;oe=arrayMap(oe,function(he){return he=castPath(he,le),ue||(ue=he.length>1),he}),copyObject(le,getAllKeysIn(le),ie),ue&&(ie=baseClone(ie,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone));for(var de=oe.length;de--;)baseUnset(ie,oe[de]);return ie});function baseSet(le,oe,ie,ue){if(!isObject$c(le))return le;oe=castPath(oe,le);for(var de=-1,he=oe.length,pe=he-1,_e=le;_e!=null&&++de<he;){var Ce=toKey(oe[de]),xe=ie;if(Ce==="__proto__"||Ce==="constructor"||Ce==="prototype")return le;if(de!=pe){var Ie=_e[Ce];xe=void 0,xe===void 0&&(xe=isObject$c(Ie)?Ie:isIndex(oe[de+1])?[]:{})}assignValue(_e,Ce,xe),_e=_e[Ce]}return le}function basePickBy(le,oe,ie){for(var ue=-1,de=oe.length,he={};++ue<de;){var pe=oe[ue],_e=baseGet(le,pe);ie(_e,pe)&&baseSet(he,castPath(pe,le),_e)}return he}function basePick(le,oe){return basePickBy(le,oe,function(ie,ue){return hasIn(le,ue)})}var pick=flatRest(function(le,oe){return le==null?{}:basePick(le,oe)});function set$2(le,oe,ie){return le==null?le:baseSet(le,oe,ie)}var FUNC_ERROR_TEXT="Expected a function";function throttle(le,oe,ie){var ue=!0,de=!0;if(typeof le!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject$c(ie)&&(ue="leading"in ie?!!ie.leading:ue,de="trailing"in ie?!!ie.trailing:de),debounce(le,oe,{leading:ue,maxWait:oe,trailing:de})}var INFINITY=1/0,createSet=Set$1&&1/setToArray(new Set$1([,-0]))[1]==INFINITY?function(le){return new Set$1(le)}:noop$2,LARGE_ARRAY_SIZE=200;function baseUniq(le,oe,ie){var ue=-1,de=arrayIncludes$1,he=le.length,pe=!0,_e=[],Ce=_e;if(he>=LARGE_ARRAY_SIZE){var xe=createSet(le);if(xe)return setToArray(xe);pe=!1,de=cacheHas,Ce=new SetCache}else Ce=_e;e:for(;++ue<he;){var Ie=le[ue],$e=Ie;if(Ie=Ie!==0?Ie:0,pe&&$e===$e){for(var Ne=Ce.length;Ne--;)if(Ce[Ne]===$e)continue e;_e.push(Ie)}else de(Ce,$e,ie)||(Ce!==_e&&Ce.push($e),_e.push(Ie))}return _e}var union=baseRest(function(le){return baseUniq(baseFlatten(le,1,isArrayLikeObject,!0))});const isUndefined=le=>le===void 0,isBoolean=le=>typeof le=="boolean",isNumber=le=>typeof le=="number",isEmpty=le=>!le&&le!==0||isArray$3(le)&&le.length===0||isObject$d(le)&&!Object.keys(le).length,isElement$1=le=>typeof Element>"u"?!1:le instanceof Element,isPropAbsent=le=>isNil(le),isStringNumber=le=>isString$1(le)?!Number.isNaN(Number(le)):!1,isWindow=le=>le===window,rAF=le=>isClient?window.requestAnimationFrame(le):setTimeout(le,16),cAF=le=>isClient?window.cancelAnimationFrame(le):clearTimeout(le),escapeStringRegexp=(le="")=>le.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),capitalize=le=>capitalize$1(le),keysOf=le=>Object.keys(le),entriesOf=le=>Object.entries(le),getProp=(le,oe,ie)=>({get value(){return get$1(le,oe,ie)},set value(ue){set$2(le,oe,ue)}});class ElementPlusError extends Error{constructor(oe){super(oe),this.name="ElementPlusError"}}function throwError(le,oe){throw new ElementPlusError(`[${le}] ${oe}`)}function debugWarn(le,oe){}const classNameToArray=(le="")=>le.split(" ").filter(oe=>!!oe.trim()),hasClass=(le,oe)=>{if(!le||!oe)return!1;if(oe.includes(" "))throw new Error("className should not contain space.");return le.classList.contains(oe)},addClass=(le,oe)=>{!le||!oe.trim()||le.classList.add(...classNameToArray(oe))},removeClass=(le,oe)=>{!le||!oe.trim()||le.classList.remove(...classNameToArray(oe))},getStyle=(le,oe)=>{var ie;if(!isClient||!le||!oe)return"";let ue=camelize(oe);ue==="float"&&(ue="cssFloat");try{const de=le.style[ue];if(de)return de;const he=(ie=document.defaultView)==null?void 0:ie.getComputedStyle(le,"");return he?he[ue]:""}catch{return le.style[ue]}};function addUnit(le,oe="px"){if(!le)return"";if(isNumber(le)||isStringNumber(le))return`${le}${oe}`;if(isString$1(le))return le}const isScroll=(le,oe)=>{if(!isClient)return!1;const ie={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(oe)],ue=getStyle(le,ie);return["scroll","auto","overlay"].some(de=>ue.includes(de))},getScrollContainer=(le,oe)=>{if(!isClient)return;let ie=le;for(;ie;){if([window,document,document.documentElement].includes(ie))return window;if(isScroll(ie,oe))return ie;ie=ie.parentNode}return ie};let scrollBarWidth;const getScrollBarWidth=le=>{var oe;if(!isClient)return 0;if(scrollBarWidth!==void 0)return scrollBarWidth;const ie=document.createElement("div");ie.className=`${le}-scrollbar__wrap`,ie.style.visibility="hidden",ie.style.width="100px",ie.style.position="absolute",ie.style.top="-9999px",document.body.appendChild(ie);const ue=ie.offsetWidth;ie.style.overflow="scroll";const de=document.createElement("div");de.style.width="100%",ie.appendChild(de);const he=de.offsetWidth;return(oe=ie.parentNode)==null||oe.removeChild(ie),scrollBarWidth=ue-he,scrollBarWidth};function scrollIntoView(le,oe){if(!isClient)return;if(!oe){le.scrollTop=0;return}const ie=[];let ue=oe.offsetParent;for(;ue!==null&&le!==ue&&le.contains(ue);)ie.push(ue),ue=ue.offsetParent;const de=oe.offsetTop+ie.reduce((Ce,xe)=>Ce+xe.offsetTop,0),he=de+oe.offsetHeight,pe=le.scrollTop,_e=pe+le.clientHeight;de<pe?le.scrollTop=de:he>_e&&(le.scrollTop=he-le.clientHeight)}function animateScrollTo(le,oe,ie,ue,de){const he=Date.now();let pe;const _e=()=>{const xe=Date.now()-he,Ie=easeInOutCubic(xe>ue?ue:xe,oe,ie,ue);isWindow(le)?le.scrollTo(window.pageXOffset,Ie):le.scrollTop=Ie,xe<ue?pe=rAF(_e):typeof de=="function"&&de()};return _e(),()=>{pe&&cAF(pe)}}const getScrollElement=(le,oe)=>isWindow(oe)?le.ownerDocument.documentElement:oe,getScrollTop=le=>isWindow(le)?window.scrollY:le.scrollTop,getElement=le=>{if(!isClient||le==="")return null;if(isString$1(le))try{return document.querySelector(le)}catch{return null}return le};/*! Element Plus Icons Vue v2.3.1 */var arrow_down_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"ArrowDown",__name:"arrow-down",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"})]))}}),arrow_down_default=arrow_down_vue_vue_type_script_setup_true_lang_default,arrow_left_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"ArrowLeft",__name:"arrow-left",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"})]))}}),arrow_left_default=arrow_left_vue_vue_type_script_setup_true_lang_default,arrow_right_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"ArrowRight",__name:"arrow-right",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"})]))}}),arrow_right_default=arrow_right_vue_vue_type_script_setup_true_lang_default,arrow_up_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"ArrowUp",__name:"arrow-up",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0"})]))}}),arrow_up_default=arrow_up_vue_vue_type_script_setup_true_lang_default,back_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Back",__name:"back",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64"}),createBaseVNode("path",{fill:"currentColor",d:"m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312z"})]))}}),back_default=back_vue_vue_type_script_setup_true_lang_default,calendar_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Calendar",__name:"calendar",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M128 384v512h768V192H768v32a32 32 0 1 1-64 0v-32H320v32a32 32 0 0 1-64 0v-32H128v128h768v64zm192-256h384V96a32 32 0 1 1 64 0v32h160a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h160V96a32 32 0 0 1 64 0zm-32 384h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64"})]))}}),calendar_default=calendar_vue_vue_type_script_setup_true_lang_default,camera_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Camera",__name:"camera",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M896 256H128v576h768zm-199.424-64-32.064-64h-304.96l-32 64zM96 192h160l46.336-92.608A64 64 0 0 1 359.552 64h304.96a64 64 0 0 1 57.216 35.328L768.192 192H928a32 32 0 0 1 32 32v640a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V224a32 32 0 0 1 32-32m416 512a160 160 0 1 0 0-320 160 160 0 0 0 0 320m0 64a224 224 0 1 1 0-448 224 224 0 0 1 0 448"})]))}}),camera_default=camera_vue_vue_type_script_setup_true_lang_default,caret_right_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"CaretRight",__name:"caret-right",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"})]))}}),caret_right_default=caret_right_vue_vue_type_script_setup_true_lang_default,caret_top_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"CaretTop",__name:"caret-top",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 320 192 704h639.936z"})]))}}),caret_top_default=caret_top_vue_vue_type_script_setup_true_lang_default,check_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Check",__name:"check",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"})]))}}),check_default=check_vue_vue_type_script_setup_true_lang_default,circle_check_filled_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"CircleCheckFilled",__name:"circle-check-filled",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),circle_check_filled_default=circle_check_filled_vue_vue_type_script_setup_true_lang_default,circle_check_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"CircleCheck",__name:"circle-check",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),createBaseVNode("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"})]))}}),circle_check_default=circle_check_vue_vue_type_script_setup_true_lang_default,circle_close_filled_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"CircleCloseFilled",__name:"circle-close-filled",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336z"})]))}}),circle_close_filled_default=circle_close_filled_vue_vue_type_script_setup_true_lang_default,circle_close_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"CircleClose",__name:"circle-close",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),createBaseVNode("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),circle_close_default=circle_close_vue_vue_type_script_setup_true_lang_default,clock_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Clock",__name:"clock",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),createBaseVNode("path",{fill:"currentColor",d:"M480 256a32 32 0 0 1 32 32v256a32 32 0 0 1-64 0V288a32 32 0 0 1 32-32"}),createBaseVNode("path",{fill:"currentColor",d:"M480 512h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32"})]))}}),clock_default=clock_vue_vue_type_script_setup_true_lang_default,close_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Close",__name:"close",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),close_default=close_vue_vue_type_script_setup_true_lang_default,crop_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Crop",__name:"crop",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M256 768h672a32 32 0 1 1 0 64H224a32 32 0 0 1-32-32V96a32 32 0 0 1 64 0z"}),createBaseVNode("path",{fill:"currentColor",d:"M832 224v704a32 32 0 1 1-64 0V256H96a32 32 0 0 1 0-64h704a32 32 0 0 1 32 32"})]))}}),crop_default=crop_vue_vue_type_script_setup_true_lang_default,d_arrow_left_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"DArrowLeft",__name:"d-arrow-left",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L259.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L197.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224zm256 0a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L515.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L453.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224z"})]))}}),d_arrow_left_default=d_arrow_left_vue_vue_type_script_setup_true_lang_default,d_arrow_right_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"DArrowRight",__name:"d-arrow-right",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0 1 41.728.064L826.24 489.664a32 32 0 0 1 0 44.672L494.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L764.736 512 452.864 192a30.592 30.592 0 0 1 0-42.688m-256 0a29.12 29.12 0 0 1 41.728.064L570.24 489.664a32 32 0 0 1 0 44.672L238.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L508.736 512 196.864 192a30.592 30.592 0 0 1 0-42.688z"})]))}}),d_arrow_right_default=d_arrow_right_vue_vue_type_script_setup_true_lang_default,delete_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Delete",__name:"delete",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32zm448-64v-64H416v64zM224 896h576V256H224zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32m192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32"})]))}}),delete_default=delete_vue_vue_type_script_setup_true_lang_default,document_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Document",__name:"document",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h160v64H320zm0 384h384v64H320z"})]))}}),document_default=document_vue_vue_type_script_setup_true_lang_default,edit_pen_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"EditPen",__name:"edit-pen",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"m199.04 672.64 193.984 112 224-387.968-193.92-112-224 388.032zm-23.872 60.16 32.896 148.288 144.896-45.696zM455.04 229.248l193.92 112 56.704-98.112-193.984-112-56.64 98.112zM104.32 708.8l384-665.024 304.768 175.936L409.152 884.8h.064l-248.448 78.336zm384 254.272v-64h448v64h-448z"})]))}}),edit_pen_default=edit_pen_vue_vue_type_script_setup_true_lang_default,edit_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Edit",__name:"edit",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M832 512a32 32 0 1 1 64 0v352a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h352a32 32 0 0 1 0 64H192v640h640z"}),createBaseVNode("path",{fill:"currentColor",d:"m469.952 554.24 52.8-7.552L847.104 222.4a32 32 0 1 0-45.248-45.248L477.44 501.44l-7.552 52.8zm422.4-422.4a96 96 0 0 1 0 135.808l-331.84 331.84a32 32 0 0 1-18.112 9.088L436.8 623.68a32 32 0 0 1-36.224-36.224l15.104-105.6a32 32 0 0 1 9.024-18.112l331.904-331.84a96 96 0 0 1 135.744 0z"})]))}}),edit_default=edit_vue_vue_type_script_setup_true_lang_default,full_screen_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"FullScreen",__name:"full-screen",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64z"})]))}}),full_screen_default=full_screen_vue_vue_type_script_setup_true_lang_default,hide_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Hide",__name:"hide",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"}),createBaseVNode("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"})]))}}),hide_default=hide_vue_vue_type_script_setup_true_lang_default,house_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"House",__name:"house",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M192 413.952V896h640V413.952L512 147.328zM139.52 374.4l352-293.312a32 32 0 0 1 40.96 0l352 293.312A32 32 0 0 1 896 398.976V928a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V398.976a32 32 0 0 1 11.52-24.576"})]))}}),house_default=house_vue_vue_type_script_setup_true_lang_default,info_filled_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"InfoFilled",__name:"info-filled",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64m67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344M590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"})]))}}),info_filled_default=info_filled_vue_vue_type_script_setup_true_lang_default,loading_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Loading",__name:"loading",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})]))}}),loading_default=loading_vue_vue_type_script_setup_true_lang_default,map_location_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"MapLocation",__name:"map-location",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M800 416a288 288 0 1 0-576 0c0 118.144 94.528 272.128 288 456.576C705.472 688.128 800 534.144 800 416M512 960C277.312 746.688 160 565.312 160 416a352 352 0 0 1 704 0c0 149.312-117.312 330.688-352 544"}),createBaseVNode("path",{fill:"currentColor",d:"M512 448a64 64 0 1 0 0-128 64 64 0 0 0 0 128m0 64a128 128 0 1 1 0-256 128 128 0 0 1 0 256m345.6 192L960 960H672v-64H352v64H64l102.4-256zm-68.928 0H235.328l-76.8 192h706.944z"})]))}}),map_location_default=map_location_vue_vue_type_script_setup_true_lang_default,minus_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Minus",__name:"minus",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64"})]))}}),minus_default=minus_vue_vue_type_script_setup_true_lang_default,more_filled_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"MoreFilled",__name:"more-filled",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224"})]))}}),more_filled_default=more_filled_vue_vue_type_script_setup_true_lang_default,more_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"More",__name:"more",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224 112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96 48 48 0 0 1 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96"})]))}}),more_default=more_vue_vue_type_script_setup_true_lang_default,opportunity_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Opportunity",__name:"opportunity",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M384 960v-64h192.064v64zm448-544a350.656 350.656 0 0 1-128.32 271.424C665.344 719.04 640 763.776 640 813.504V832H320v-14.336c0-48-19.392-95.36-57.216-124.992a351.552 351.552 0 0 1-128.448-344.256c25.344-136.448 133.888-248.128 269.76-276.48A352.384 352.384 0 0 1 832 416m-544 32c0-132.288 75.904-224 192-224v-64c-154.432 0-256 122.752-256 288z"})]))}}),opportunity_default=opportunity_vue_vue_type_script_setup_true_lang_default,picture_filled_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"PictureFilled",__name:"picture-filled",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M96 896a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h832a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32zm315.52-228.48-68.928-68.928a32 32 0 0 0-45.248 0L128 768.064h778.688l-242.112-290.56a32 32 0 0 0-49.216 0L458.752 665.408a32 32 0 0 1-47.232 2.112M256 384a96 96 0 1 0 192.064-.064A96 96 0 0 0 256 384"})]))}}),picture_filled_default=picture_filled_vue_vue_type_script_setup_true_lang_default,plus_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Plus",__name:"plus",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"})]))}}),plus_default=plus_vue_vue_type_script_setup_true_lang_default,printer_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Printer",__name:"printer",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M256 768H105.024c-14.272 0-19.456-1.472-24.64-4.288a29.056 29.056 0 0 1-12.16-12.096C65.536 746.432 64 741.248 64 727.04V379.072c0-42.816 4.48-58.304 12.8-73.984 8.384-15.616 20.672-27.904 36.288-36.288 15.68-8.32 31.168-12.8 73.984-12.8H256V64h512v192h68.928c42.816 0 58.304 4.48 73.984 12.8 15.616 8.384 27.904 20.672 36.288 36.288 8.32 15.68 12.8 31.168 12.8 73.984v347.904c0 14.272-1.472 19.456-4.288 24.64a29.056 29.056 0 0 1-12.096 12.16c-5.184 2.752-10.368 4.224-24.64 4.224H768v192H256zm64-192v320h384V576zm-64 128V512h512v192h128V379.072c0-29.376-1.408-36.48-5.248-43.776a23.296 23.296 0 0 0-10.048-10.048c-7.232-3.84-14.4-5.248-43.776-5.248H187.072c-29.376 0-36.48 1.408-43.776 5.248a23.296 23.296 0 0 0-10.048 10.048c-3.84 7.232-5.248 14.4-5.248 43.776V704zm64-448h384V128H320zm-64 128h64v64h-64zm128 0h64v64h-64z"})]))}}),printer_default=printer_vue_vue_type_script_setup_true_lang_default,question_filled_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"QuestionFilled",__name:"question-filled",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992 13.376-19.712 35.2-28.864 66.176-28.864 23.936 0 42.944 6.336 56.32 19.712 12.672 13.376 19.712 31.68 19.712 54.912 0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76 6.336-12.672 15.488-24.64 28.16-35.2 33.792-29.568 54.208-48.576 60.544-55.616 16.896-22.528 26.048-51.392 26.048-86.592 0-42.944-14.08-76.736-42.24-101.376-28.16-25.344-65.472-37.312-111.232-37.312zm-12.672 406.208a54.272 54.272 0 0 0-38.72 14.784 49.408 49.408 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.848 54.848 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72 51.968 51.968 0 0 0-15.488-38.016 55.936 55.936 0 0 0-39.424-14.784z"})]))}}),question_filled_default=question_filled_vue_vue_type_script_setup_true_lang_default,refresh_left_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"RefreshLeft",__name:"refresh-left",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"})]))}}),refresh_left_default=refresh_left_vue_vue_type_script_setup_true_lang_default,refresh_right_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"RefreshRight",__name:"refresh-right",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"})]))}}),refresh_right_default=refresh_right_vue_vue_type_script_setup_true_lang_default,refresh_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Refresh",__name:"refresh",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M771.776 794.88A384 384 0 0 1 128 512h64a320 320 0 0 0 555.712 216.448H654.72a32 32 0 1 1 0-64h149.056a32 32 0 0 1 32 32v148.928a32 32 0 1 1-64 0v-50.56zM276.288 295.616h92.992a32 32 0 0 1 0 64H220.16a32 32 0 0 1-32-32V178.56a32 32 0 0 1 64 0v50.56A384 384 0 0 1 896.128 512h-64a320 320 0 0 0-555.776-216.384z"})]))}}),refresh_default=refresh_vue_vue_type_script_setup_true_lang_default,scale_to_original_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"ScaleToOriginal",__name:"scale-to-original",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zm-361.412 0a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118M512 361.412a30.118 30.118 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.118 30.118 0 0 0 512 361.412M512 512a30.118 30.118 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.118 30.118 0 0 0 512 512"})]))}}),scale_to_original_default=scale_to_original_vue_vue_type_script_setup_true_lang_default,search_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Search",__name:"search",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704"})]))}}),search_default=search_vue_vue_type_script_setup_true_lang_default,sort_down_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"SortDown",__name:"sort-down",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M576 96v709.568L333.312 562.816A32 32 0 1 0 288 608l297.408 297.344A32 32 0 0 0 640 882.688V96a32 32 0 0 0-64 0"})]))}}),sort_down_default=sort_down_vue_vue_type_script_setup_true_lang_default,sort_up_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"SortUp",__name:"sort-up",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M384 141.248V928a32 32 0 1 0 64 0V218.56l242.688 242.688A32 32 0 1 0 736 416L438.592 118.656A32 32 0 0 0 384 141.248"})]))}}),sort_up_default=sort_up_vue_vue_type_script_setup_true_lang_default,star_filled_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"StarFilled",__name:"star-filled",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M283.84 867.84 512 747.776l228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72z"})]))}}),star_filled_default=star_filled_vue_vue_type_script_setup_true_lang_default,star_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Star",__name:"star",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"m512 747.84 228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72zM313.6 924.48a70.4 70.4 0 0 1-102.144-74.24l37.888-220.928L88.96 472.96A70.4 70.4 0 0 1 128 352.896l221.76-32.256 99.2-200.96a70.4 70.4 0 0 1 126.208 0l99.2 200.96 221.824 32.256a70.4 70.4 0 0 1 39.04 120.064L774.72 629.376l37.888 220.928a70.4 70.4 0 0 1-102.144 74.24L512 820.096l-198.4 104.32z"})]))}}),star_default=star_vue_vue_type_script_setup_true_lang_default,success_filled_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"SuccessFilled",__name:"success-filled",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),success_filled_default=success_filled_vue_vue_type_script_setup_true_lang_default,tickets_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"Tickets",__name:"tickets",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M192 128v768h640V128zm-32-64h704a32 32 0 0 1 32 32v832a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h192v64H320zm0 384h384v64H320z"})]))}}),tickets_default=tickets_vue_vue_type_script_setup_true_lang_default,user_filled_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"UserFilled",__name:"user-filled",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M288 320a224 224 0 1 0 448 0 224 224 0 1 0-448 0m544 608H160a32 32 0 0 1-32-32v-96a160 160 0 0 1 160-160h448a160 160 0 0 1 160 160v96a32 32 0 0 1-32 32z"})]))}}),user_filled_default=user_filled_vue_vue_type_script_setup_true_lang_default,video_camera_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"VideoCamera",__name:"video-camera",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M704 768V256H128v512zm64-416 192-96v512l-192-96v128a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V224a32 32 0 0 1 32-32h640a32 32 0 0 1 32 32zm0 71.552v176.896l128 64V359.552zM192 320h192v64H192z"})]))}}),video_camera_default=video_camera_vue_vue_type_script_setup_true_lang_default,view_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"View",__name:"view",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"})]))}}),view_default=view_vue_vue_type_script_setup_true_lang_default,warning_filled_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"WarningFilled",__name:"warning-filled",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"})]))}}),warning_filled_default=warning_filled_vue_vue_type_script_setup_true_lang_default,zoom_in_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"ZoomIn",__name:"zoom-in",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704m-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64z"})]))}}),zoom_in_default=zoom_in_vue_vue_type_script_setup_true_lang_default,zoom_out_vue_vue_type_script_setup_true_lang_default=defineComponent({name:"ZoomOut",__name:"zoom-out",setup(le){return(oe,ie)=>(openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[createBaseVNode("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704M352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64"})]))}}),zoom_out_default=zoom_out_vue_vue_type_script_setup_true_lang_default;const epPropKey="__epPropKey",definePropType=le=>le,isEpProp=le=>isObject$d(le)&&!!le[epPropKey],buildProp=(le,oe)=>{if(!isObject$d(le)||isEpProp(le))return le;const{values:ie,required:ue,default:de,type:he,validator:pe}=le,Ce={type:he,required:!!ue,validator:ie||pe?xe=>{let Ie=!1,$e=[];if(ie&&($e=Array.from(ie),hasOwn$b(le,"default")&&$e.push(de),Ie||(Ie=$e.includes(xe))),pe&&(Ie||(Ie=pe(xe))),!Ie&&$e.length>0){const Ne=[...new Set($e)].map(Oe=>JSON.stringify(Oe)).join(", ");warn(`Invalid prop: validation failed${oe?` for prop "${oe}"`:""}. Expected one of [${Ne}], got value ${JSON.stringify(xe)}.`)}return Ie}:void 0,[epPropKey]:!0};return hasOwn$b(le,"default")&&(Ce.default=de),Ce},buildProps=le=>fromPairs(Object.entries(le).map(([oe,ie])=>[oe,buildProp(ie,oe)])),iconPropType=definePropType([String,Object,Function]),CloseComponents={Close:close_default},TypeComponents={Close:close_default,SuccessFilled:success_filled_default,InfoFilled:info_filled_default,WarningFilled:warning_filled_default,CircleCloseFilled:circle_close_filled_default},TypeComponentsMap={success:success_filled_default,warning:warning_filled_default,error:circle_close_filled_default,info:info_filled_default},ValidateComponentsMap={validating:loading_default,success:circle_check_default,error:circle_close_default},withInstall=(le,oe)=>{if(le.install=ie=>{for(const ue of[le,...Object.values(oe??{})])ie.component(ue.name,ue)},oe)for(const[ie,ue]of Object.entries(oe))le[ie]=ue;return le},withInstallFunction=(le,oe)=>(le.install=ie=>{le._context=ie._context,ie.config.globalProperties[oe]=le},le),withInstallDirective=(le,oe)=>(le.install=ie=>{ie.directive(oe,le)},le),withNoopInstall=le=>(le.install=NOOP,le),composeRefs=(...le)=>oe=>{le.forEach(ie=>{isFunction$2(ie)?ie(oe):ie.value=oe})},EVENT_CODE={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},datePickTypes=["year","years","month","months","date","dates","week","datetime","datetimerange","daterange","monthrange","yearrange"],WEEK_DAYS=["sun","mon","tue","wed","thu","fri","sat"],UPDATE_MODEL_EVENT="update:modelValue",CHANGE_EVENT="change",INPUT_EVENT="input",INSTALLED_KEY=Symbol("INSTALLED_KEY"),componentSizes=["","default","small","large"],isValidComponentSize=le=>["",...componentSizes].includes(le);var PatchFlags=(le=>(le[le.TEXT=1]="TEXT",le[le.CLASS=2]="CLASS",le[le.STYLE=4]="STYLE",le[le.PROPS=8]="PROPS",le[le.FULL_PROPS=16]="FULL_PROPS",le[le.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",le[le.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",le[le.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",le[le.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",le[le.NEED_PATCH=512]="NEED_PATCH",le[le.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",le[le.HOISTED=-1]="HOISTED",le[le.BAIL=-2]="BAIL",le))(PatchFlags||{});function isFragment(le){return isVNode(le)&&le.type===Fragment}function isComment(le){return isVNode(le)&&le.type===Comment}function isValidElementNode(le){return isVNode(le)&&!isFragment(le)&&!isComment(le)}const getNormalizedProps=le=>{if(!isVNode(le))return{};const oe=le.props||{},ie=(isVNode(le.type)?le.type.props:void 0)||{},ue={};return Object.keys(ie).forEach(de=>{hasOwn$b(ie[de],"default")&&(ue[de]=ie[de].default)}),Object.keys(oe).forEach(de=>{ue[camelize(de)]=oe[de]}),ue},ensureOnlyChild=le=>{if(!isArray$3(le)||le.length>1)throw new Error("expect to receive a single Vue element child");return le[0]},flattedChildren=le=>{const oe=isArray$3(le)?le:[le],ie=[];return oe.forEach(ue=>{var de;isArray$3(ue)?ie.push(...flattedChildren(ue)):isVNode(ue)&&isArray$3(ue.children)?ie.push(...flattedChildren(ue.children)):(ie.push(ue),isVNode(ue)&&((de=ue.component)!=null&&de.subTree)&&ie.push(...flattedChildren(ue.component.subTree)))}),ie},unique=le=>[...new Set(le)],castArray=le=>!le&&le!==0?[]:Array.isArray(le)?le:[le],isKorean=le=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(le),mutable=le=>le;function throttleByRaf(le){let oe=0;const ie=(...ue)=>{oe&&cAF(oe),oe=rAF(()=>{le(...ue),oe=0})};return ie.cancel=()=>{cAF(oe),oe=0},ie}const DEFAULT_EXCLUDE_KEYS=["class","style"],LISTENER_PREFIX=/^on[A-Z]/,useAttrs=(le={})=>{const{excludeListeners:oe=!1,excludeKeys:ie}=le,ue=computed(()=>((ie==null?void 0:ie.value)||[]).concat(DEFAULT_EXCLUDE_KEYS)),de=getCurrentInstance();return computed(de?()=>{var he;return fromPairs(Object.entries((he=de.proxy)==null?void 0:he.$attrs).filter(([pe])=>!ue.value.includes(pe)&&!(oe&&LISTENER_PREFIX.test(pe))))}:()=>({}))},useDeprecated=({from:le,replacement:oe,scope:ie,version:ue,ref:de,type:he="API"},pe)=>{watch(()=>unref(pe),_e=>{},{immediate:!0})},useDraggable=(le,oe,ie,ue)=>{let de={offsetX:0,offsetY:0};const he=xe=>{const Ie=xe.clientX,$e=xe.clientY,{offsetX:Ne,offsetY:Oe}=de,Fe=le.value.getBoundingClientRect(),Ve=Fe.left,ze=Fe.top,Ue=Fe.width,Pt=Fe.height,qe=document.documentElement.clientWidth,Et=document.documentElement.clientHeight,kt=-Ve+Ne,At=-ze+Oe,Dt=qe-Ve-Ue+Ne,Lt=Et-ze-Pt+Oe,jt=bn=>{let vn=Ne+bn.clientX-Ie,Tn=Oe+bn.clientY-$e;ue!=null&&ue.value||(vn=Math.min(Math.max(vn,kt),Dt),Tn=Math.min(Math.max(Tn,At),Lt)),de={offsetX:vn,offsetY:Tn},le.value&&(le.value.style.transform=`translate(${addUnit(vn)}, ${addUnit(Tn)})`)},_n=()=>{document.removeEventListener("mousemove",jt),document.removeEventListener("mouseup",_n)};document.addEventListener("mousemove",jt),document.addEventListener("mouseup",_n)},pe=()=>{oe.value&&le.value&&oe.value.addEventListener("mousedown",he)},_e=()=>{oe.value&&le.value&&oe.value.removeEventListener("mousedown",he)},Ce=()=>{de={offsetX:0,offsetY:0},le.value&&(le.value.style.transform="none")};return onMounted(()=>{watchEffect(()=>{ie.value?pe():_e()})}),onBeforeUnmount(()=>{_e()}),{resetPosition:Ce}};var English={name:"en",el:{breadcrumb:{label:"Breadcrumb"},colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color.",alphaLabel:"pick alpha value"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},mention:{loading:"Loading"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tour:{next:"Next",previous:"Previous",finish:"Finish"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},carousel:{leftArrow:"Carousel arrow left",rightArrow:"Carousel arrow right",indicator:"Carousel switch to index {index}"}}};const buildTranslator=le=>(oe,ie)=>translate(oe,ie,unref(le)),translate=(le,oe,ie)=>get$1(ie,le,le).replace(/\{(\w+)\}/g,(ue,de)=>{var he;return`${(he=oe==null?void 0:oe[de])!=null?he:`{${de}}`}`}),buildLocaleContext=le=>{const oe=computed(()=>unref(le).name),ie=isRef(le)?le:ref(le);return{lang:oe,locale:ie,t:buildTranslator(le)}},localeContextKey=Symbol("localeContextKey"),useLocale=le=>{const oe=le||inject(localeContextKey,ref());return buildLocaleContext(computed(()=>oe.value||English))},defaultNamespace="el",statePrefix="is-",_bem=(le,oe,ie,ue,de)=>{let he=`${le}-${oe}`;return ie&&(he+=`-${ie}`),ue&&(he+=`__${ue}`),de&&(he+=`--${de}`),he},namespaceContextKey=Symbol("namespaceContextKey"),useGetDerivedNamespace=le=>{const oe=le||(getCurrentInstance()?inject(namespaceContextKey,ref(defaultNamespace)):ref(defaultNamespace));return computed(()=>unref(oe)||defaultNamespace)},useNamespace=(le,oe)=>{const ie=useGetDerivedNamespace(oe);return{namespace:ie,b:(Ve="")=>_bem(ie.value,le,Ve,"",""),e:Ve=>Ve?_bem(ie.value,le,"",Ve,""):"",m:Ve=>Ve?_bem(ie.value,le,"","",Ve):"",be:(Ve,ze)=>Ve&&ze?_bem(ie.value,le,Ve,ze,""):"",em:(Ve,ze)=>Ve&&ze?_bem(ie.value,le,"",Ve,ze):"",bm:(Ve,ze)=>Ve&&ze?_bem(ie.value,le,Ve,"",ze):"",bem:(Ve,ze,Ue)=>Ve&&ze&&Ue?_bem(ie.value,le,Ve,ze,Ue):"",is:(Ve,...ze)=>{const Ue=ze.length>=1?ze[0]:!0;return Ve&&Ue?`${statePrefix}${Ve}`:""},cssVar:Ve=>{const ze={};for(const Ue in Ve)Ve[Ue]&&(ze[`--${ie.value}-${Ue}`]=Ve[Ue]);return ze},cssVarName:Ve=>`--${ie.value}-${Ve}`,cssVarBlock:Ve=>{const ze={};for(const Ue in Ve)Ve[Ue]&&(ze[`--${ie.value}-${le}-${Ue}`]=Ve[Ue]);return ze},cssVarBlockName:Ve=>`--${ie.value}-${le}-${Ve}`}},useLockscreen=(le,oe={})=>{isRef(le)||throwError("[useLockscreen]","You need to pass a ref param to this function");const ie=oe.ns||useNamespace("popup"),ue=computed(()=>ie.bm("parent","hidden"));if(!isClient||hasClass(document.body,ue.value))return;let de=0,he=!1,pe="0";const _e=()=>{setTimeout(()=>{removeClass(document==null?void 0:document.body,ue.value),he&&document&&(document.body.style.width=pe)},200)};watch(le,Ce=>{if(!Ce){_e();return}he=!hasClass(document.body,ue.value),he&&(pe=document.body.style.width),de=getScrollBarWidth(ie.namespace.value);const xe=document.documentElement.clientHeight<document.body.scrollHeight,Ie=getStyle(document.body,"overflowY");de>0&&(xe||Ie==="scroll")&&he&&(document.body.style.width=`calc(100% - ${de}px)`),addClass(document.body,ue.value)}),onScopeDispose(()=>_e())},_prop=buildProp({type:definePropType(Boolean),default:null}),_event=buildProp({type:definePropType(Function)}),createModelToggleComposable=le=>{const oe=`update:${le}`,ie=`onUpdate:${le}`,ue=[oe],de={[le]:_prop,[ie]:_event};return{useModelToggle:({indicator:pe,toggleReason:_e,shouldHideWhenRouteChanges:Ce,shouldProceed:xe,onShow:Ie,onHide:$e})=>{const Ne=getCurrentInstance(),{emit:Oe}=Ne,Fe=Ne.props,Ve=computed(()=>isFunction$2(Fe[ie])),ze=computed(()=>Fe[le]===null),Ue=Dt=>{pe.value!==!0&&(pe.value=!0,_e&&(_e.value=Dt),isFunction$2(Ie)&&Ie(Dt))},Pt=Dt=>{pe.value!==!1&&(pe.value=!1,_e&&(_e.value=Dt),isFunction$2($e)&&$e(Dt))},qe=Dt=>{if(Fe.disabled===!0||isFunction$2(xe)&&!xe())return;const Lt=Ve.value&&isClient;Lt&&Oe(oe,!0),(ze.value||!Lt)&&Ue(Dt)},Et=Dt=>{if(Fe.disabled===!0||!isClient)return;const Lt=Ve.value&&isClient;Lt&&Oe(oe,!1),(ze.value||!Lt)&&Pt(Dt)},kt=Dt=>{isBoolean(Dt)&&(Fe.disabled&&Dt?Ve.value&&Oe(oe,!1):pe.value!==Dt&&(Dt?Ue():Pt()))},At=()=>{pe.value?Et():qe()};return watch(()=>Fe[le],kt),Ce&&Ne.appContext.config.globalProperties.$route!==void 0&&watch(()=>({...Ne.proxy.$route}),()=>{Ce.value&&pe.value&&Et()}),onMounted(()=>{kt(Fe[le])}),{hide:Et,show:qe,toggle:At,hasUpdateHandler:Ve}},useModelToggleProps:de,useModelToggleEmits:ue}},useProp=le=>{const oe=getCurrentInstance();return computed(()=>{var ie,ue;return(ue=(ie=oe==null?void 0:oe.proxy)==null?void 0:ie.$props)==null?void 0:ue[le]})};var E$2="top",R$1="bottom",W$1="right",P$2="left",me="auto",G$1=[E$2,R$1,W$1,P$2],U$2="start",J$1="end",Xe="clippingParents",je="viewport",K$1="popper",Ye="reference",De=G$1.reduce(function(le,oe){return le.concat([oe+"-"+U$2,oe+"-"+J$1])},[]),Ee=[].concat(G$1,[me]).reduce(function(le,oe){return le.concat([oe,oe+"-"+U$2,oe+"-"+J$1])},[]),Ge="beforeRead",Je="read",Ke="afterRead",Qe="beforeMain",Ze="main",et$2="afterMain",tt="beforeWrite",nt="write",rt$1="afterWrite",ot=[Ge,Je,Ke,Qe,Ze,et$2,tt,nt,rt$1];function C$1(le){return le?(le.nodeName||"").toLowerCase():null}function H$1(le){if(le==null)return window;if(le.toString()!=="[object Window]"){var oe=le.ownerDocument;return oe&&oe.defaultView||window}return le}function Q$1(le){var oe=H$1(le).Element;return le instanceof oe||le instanceof Element}function B$1(le){var oe=H$1(le).HTMLElement;return le instanceof oe||le instanceof HTMLElement}function Pe(le){if(typeof ShadowRoot>"u")return!1;var oe=H$1(le).ShadowRoot;return le instanceof oe||le instanceof ShadowRoot}function Mt(le){var oe=le.state;Object.keys(oe.elements).forEach(function(ie){var ue=oe.styles[ie]||{},de=oe.attributes[ie]||{},he=oe.elements[ie];!B$1(he)||!C$1(he)||(Object.assign(he.style,ue),Object.keys(de).forEach(function(pe){var _e=de[pe];_e===!1?he.removeAttribute(pe):he.setAttribute(pe,_e===!0?"":_e)}))})}function Rt(le){var oe=le.state,ie={popper:{position:oe.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(oe.elements.popper.style,ie.popper),oe.styles=ie,oe.elements.arrow&&Object.assign(oe.elements.arrow.style,ie.arrow),function(){Object.keys(oe.elements).forEach(function(ue){var de=oe.elements[ue],he=oe.attributes[ue]||{},pe=Object.keys(oe.styles.hasOwnProperty(ue)?oe.styles[ue]:ie[ue]),_e=pe.reduce(function(Ce,xe){return Ce[xe]="",Ce},{});!B$1(de)||!C$1(de)||(Object.assign(de.style,_e),Object.keys(he).forEach(function(Ce){de.removeAttribute(Ce)}))})}}var Ae={name:"applyStyles",enabled:!0,phase:"write",fn:Mt,effect:Rt,requires:["computeStyles"]};function q$1(le){return le.split("-")[0]}var X$2=Math.max,ve$1=Math.min,Z$1=Math.round;function ee$1(le,oe){oe===void 0&&(oe=!1);var ie=le.getBoundingClientRect(),ue=1,de=1;if(B$1(le)&&oe){var he=le.offsetHeight,pe=le.offsetWidth;pe>0&&(ue=Z$1(ie.width)/pe||1),he>0&&(de=Z$1(ie.height)/he||1)}return{width:ie.width/ue,height:ie.height/de,top:ie.top/de,right:ie.right/ue,bottom:ie.bottom/de,left:ie.left/ue,x:ie.left/ue,y:ie.top/de}}function ke(le){var oe=ee$1(le),ie=le.offsetWidth,ue=le.offsetHeight;return Math.abs(oe.width-ie)<=1&&(ie=oe.width),Math.abs(oe.height-ue)<=1&&(ue=oe.height),{x:le.offsetLeft,y:le.offsetTop,width:ie,height:ue}}function it(le,oe){var ie=oe.getRootNode&&oe.getRootNode();if(le.contains(oe))return!0;if(ie&&Pe(ie)){var ue=oe;do{if(ue&&le.isSameNode(ue))return!0;ue=ue.parentNode||ue.host}while(ue)}return!1}function N$3(le){return H$1(le).getComputedStyle(le)}function Wt(le){return["table","td","th"].indexOf(C$1(le))>=0}function I$2(le){return((Q$1(le)?le.ownerDocument:le.document)||window.document).documentElement}function ge(le){return C$1(le)==="html"?le:le.assignedSlot||le.parentNode||(Pe(le)?le.host:null)||I$2(le)}function at$1(le){return!B$1(le)||N$3(le).position==="fixed"?null:le.offsetParent}function Bt(le){var oe=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,ie=navigator.userAgent.indexOf("Trident")!==-1;if(ie&&B$1(le)){var ue=N$3(le);if(ue.position==="fixed")return null}var de=ge(le);for(Pe(de)&&(de=de.host);B$1(de)&&["html","body"].indexOf(C$1(de))<0;){var he=N$3(de);if(he.transform!=="none"||he.perspective!=="none"||he.contain==="paint"||["transform","perspective"].indexOf(he.willChange)!==-1||oe&&he.willChange==="filter"||oe&&he.filter&&he.filter!=="none")return de;de=de.parentNode}return null}function se(le){for(var oe=H$1(le),ie=at$1(le);ie&&Wt(ie)&&N$3(ie).position==="static";)ie=at$1(ie);return ie&&(C$1(ie)==="html"||C$1(ie)==="body"&&N$3(ie).position==="static")?oe:ie||Bt(le)||oe}function Le(le){return["top","bottom"].indexOf(le)>=0?"x":"y"}function fe(le,oe,ie){return X$2(le,ve$1(oe,ie))}function St(le,oe,ie){var ue=fe(le,oe,ie);return ue>ie?ie:ue}function st(){return{top:0,right:0,bottom:0,left:0}}function ft(le){return Object.assign({},st(),le)}function ct(le,oe){return oe.reduce(function(ie,ue){return ie[ue]=le,ie},{})}var Tt=function(le,oe){return le=typeof le=="function"?le(Object.assign({},oe.rects,{placement:oe.placement})):le,ft(typeof le!="number"?le:ct(le,G$1))};function Ht(le){var oe,ie=le.state,ue=le.name,de=le.options,he=ie.elements.arrow,pe=ie.modifiersData.popperOffsets,_e=q$1(ie.placement),Ce=Le(_e),xe=[P$2,W$1].indexOf(_e)>=0,Ie=xe?"height":"width";if(!(!he||!pe)){var $e=Tt(de.padding,ie),Ne=ke(he),Oe=Ce==="y"?E$2:P$2,Fe=Ce==="y"?R$1:W$1,Ve=ie.rects.reference[Ie]+ie.rects.reference[Ce]-pe[Ce]-ie.rects.popper[Ie],ze=pe[Ce]-ie.rects.reference[Ce],Ue=se(he),Pt=Ue?Ce==="y"?Ue.clientHeight||0:Ue.clientWidth||0:0,qe=Ve/2-ze/2,Et=$e[Oe],kt=Pt-Ne[Ie]-$e[Fe],At=Pt/2-Ne[Ie]/2+qe,Dt=fe(Et,At,kt),Lt=Ce;ie.modifiersData[ue]=(oe={},oe[Lt]=Dt,oe.centerOffset=Dt-At,oe)}}function Ct(le){var oe=le.state,ie=le.options,ue=ie.element,de=ue===void 0?"[data-popper-arrow]":ue;de!=null&&(typeof de=="string"&&(de=oe.elements.popper.querySelector(de),!de)||!it(oe.elements.popper,de)||(oe.elements.arrow=de))}var pt={name:"arrow",enabled:!0,phase:"main",fn:Ht,effect:Ct,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function te$1(le){return le.split("-")[1]}var qt$1={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Vt(le){var oe=le.x,ie=le.y,ue=window,de=ue.devicePixelRatio||1;return{x:Z$1(oe*de)/de||0,y:Z$1(ie*de)/de||0}}function ut(le){var oe,ie=le.popper,ue=le.popperRect,de=le.placement,he=le.variation,pe=le.offsets,_e=le.position,Ce=le.gpuAcceleration,xe=le.adaptive,Ie=le.roundOffsets,$e=le.isFixed,Ne=pe.x,Oe=Ne===void 0?0:Ne,Fe=pe.y,Ve=Fe===void 0?0:Fe,ze=typeof Ie=="function"?Ie({x:Oe,y:Ve}):{x:Oe,y:Ve};Oe=ze.x,Ve=ze.y;var Ue=pe.hasOwnProperty("x"),Pt=pe.hasOwnProperty("y"),qe=P$2,Et=E$2,kt=window;if(xe){var At=se(ie),Dt="clientHeight",Lt="clientWidth";if(At===H$1(ie)&&(At=I$2(ie),N$3(At).position!=="static"&&_e==="absolute"&&(Dt="scrollHeight",Lt="scrollWidth")),At=At,de===E$2||(de===P$2||de===W$1)&&he===J$1){Et=R$1;var jt=$e&&At===kt&&kt.visualViewport?kt.visualViewport.height:At[Dt];Ve-=jt-ue.height,Ve*=Ce?1:-1}if(de===P$2||(de===E$2||de===R$1)&&he===J$1){qe=W$1;var _n=$e&&At===kt&&kt.visualViewport?kt.visualViewport.width:At[Lt];Oe-=_n-ue.width,Oe*=Ce?1:-1}}var bn=Object.assign({position:_e},xe&&qt$1),vn=Ie===!0?Vt({x:Oe,y:Ve}):{x:Oe,y:Ve};if(Oe=vn.x,Ve=vn.y,Ce){var Tn;return Object.assign({},bn,(Tn={},Tn[Et]=Pt?"0":"",Tn[qe]=Ue?"0":"",Tn.transform=(kt.devicePixelRatio||1)<=1?"translate("+Oe+"px, "+Ve+"px)":"translate3d("+Oe+"px, "+Ve+"px, 0)",Tn))}return Object.assign({},bn,(oe={},oe[Et]=Pt?Ve+"px":"",oe[qe]=Ue?Oe+"px":"",oe.transform="",oe))}function Nt(le){var oe=le.state,ie=le.options,ue=ie.gpuAcceleration,de=ue===void 0?!0:ue,he=ie.adaptive,pe=he===void 0?!0:he,_e=ie.roundOffsets,Ce=_e===void 0?!0:_e,xe={placement:q$1(oe.placement),variation:te$1(oe.placement),popper:oe.elements.popper,popperRect:oe.rects.popper,gpuAcceleration:de,isFixed:oe.options.strategy==="fixed"};oe.modifiersData.popperOffsets!=null&&(oe.styles.popper=Object.assign({},oe.styles.popper,ut(Object.assign({},xe,{offsets:oe.modifiersData.popperOffsets,position:oe.options.strategy,adaptive:pe,roundOffsets:Ce})))),oe.modifiersData.arrow!=null&&(oe.styles.arrow=Object.assign({},oe.styles.arrow,ut(Object.assign({},xe,{offsets:oe.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Ce})))),oe.attributes.popper=Object.assign({},oe.attributes.popper,{"data-popper-placement":oe.placement})}var Me={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Nt,data:{}},ye={passive:!0};function It(le){var oe=le.state,ie=le.instance,ue=le.options,de=ue.scroll,he=de===void 0?!0:de,pe=ue.resize,_e=pe===void 0?!0:pe,Ce=H$1(oe.elements.popper),xe=[].concat(oe.scrollParents.reference,oe.scrollParents.popper);return he&&xe.forEach(function(Ie){Ie.addEventListener("scroll",ie.update,ye)}),_e&&Ce.addEventListener("resize",ie.update,ye),function(){he&&xe.forEach(function(Ie){Ie.removeEventListener("scroll",ie.update,ye)}),_e&&Ce.removeEventListener("resize",ie.update,ye)}}var Re={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:It,data:{}},_t={left:"right",right:"left",bottom:"top",top:"bottom"};function be(le){return le.replace(/left|right|bottom|top/g,function(oe){return _t[oe]})}var zt={start:"end",end:"start"};function lt(le){return le.replace(/start|end/g,function(oe){return zt[oe]})}function We(le){var oe=H$1(le),ie=oe.pageXOffset,ue=oe.pageYOffset;return{scrollLeft:ie,scrollTop:ue}}function Be(le){return ee$1(I$2(le)).left+We(le).scrollLeft}function Ft(le){var oe=H$1(le),ie=I$2(le),ue=oe.visualViewport,de=ie.clientWidth,he=ie.clientHeight,pe=0,_e=0;return ue&&(de=ue.width,he=ue.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(pe=ue.offsetLeft,_e=ue.offsetTop)),{width:de,height:he,x:pe+Be(le),y:_e}}function Ut(le){var oe,ie=I$2(le),ue=We(le),de=(oe=le.ownerDocument)==null?void 0:oe.body,he=X$2(ie.scrollWidth,ie.clientWidth,de?de.scrollWidth:0,de?de.clientWidth:0),pe=X$2(ie.scrollHeight,ie.clientHeight,de?de.scrollHeight:0,de?de.clientHeight:0),_e=-ue.scrollLeft+Be(le),Ce=-ue.scrollTop;return N$3(de||ie).direction==="rtl"&&(_e+=X$2(ie.clientWidth,de?de.clientWidth:0)-he),{width:he,height:pe,x:_e,y:Ce}}function Se(le){var oe=N$3(le),ie=oe.overflow,ue=oe.overflowX,de=oe.overflowY;return/auto|scroll|overlay|hidden/.test(ie+de+ue)}function dt(le){return["html","body","#document"].indexOf(C$1(le))>=0?le.ownerDocument.body:B$1(le)&&Se(le)?le:dt(ge(le))}function ce(le,oe){var ie;oe===void 0&&(oe=[]);var ue=dt(le),de=ue===((ie=le.ownerDocument)==null?void 0:ie.body),he=H$1(ue),pe=de?[he].concat(he.visualViewport||[],Se(ue)?ue:[]):ue,_e=oe.concat(pe);return de?_e:_e.concat(ce(ge(pe)))}function Te(le){return Object.assign({},le,{left:le.x,top:le.y,right:le.x+le.width,bottom:le.y+le.height})}function Xt(le){var oe=ee$1(le);return oe.top=oe.top+le.clientTop,oe.left=oe.left+le.clientLeft,oe.bottom=oe.top+le.clientHeight,oe.right=oe.left+le.clientWidth,oe.width=le.clientWidth,oe.height=le.clientHeight,oe.x=oe.left,oe.y=oe.top,oe}function ht(le,oe){return oe===je?Te(Ft(le)):Q$1(oe)?Xt(oe):Te(Ut(I$2(le)))}function Yt(le){var oe=ce(ge(le)),ie=["absolute","fixed"].indexOf(N$3(le).position)>=0,ue=ie&&B$1(le)?se(le):le;return Q$1(ue)?oe.filter(function(de){return Q$1(de)&&it(de,ue)&&C$1(de)!=="body"}):[]}function Gt(le,oe,ie){var ue=oe==="clippingParents"?Yt(le):[].concat(oe),de=[].concat(ue,[ie]),he=de[0],pe=de.reduce(function(_e,Ce){var xe=ht(le,Ce);return _e.top=X$2(xe.top,_e.top),_e.right=ve$1(xe.right,_e.right),_e.bottom=ve$1(xe.bottom,_e.bottom),_e.left=X$2(xe.left,_e.left),_e},ht(le,he));return pe.width=pe.right-pe.left,pe.height=pe.bottom-pe.top,pe.x=pe.left,pe.y=pe.top,pe}function mt(le){var oe=le.reference,ie=le.element,ue=le.placement,de=ue?q$1(ue):null,he=ue?te$1(ue):null,pe=oe.x+oe.width/2-ie.width/2,_e=oe.y+oe.height/2-ie.height/2,Ce;switch(de){case E$2:Ce={x:pe,y:oe.y-ie.height};break;case R$1:Ce={x:pe,y:oe.y+oe.height};break;case W$1:Ce={x:oe.x+oe.width,y:_e};break;case P$2:Ce={x:oe.x-ie.width,y:_e};break;default:Ce={x:oe.x,y:oe.y}}var xe=de?Le(de):null;if(xe!=null){var Ie=xe==="y"?"height":"width";switch(he){case U$2:Ce[xe]=Ce[xe]-(oe[Ie]/2-ie[Ie]/2);break;case J$1:Ce[xe]=Ce[xe]+(oe[Ie]/2-ie[Ie]/2);break}}return Ce}function ne(le,oe){oe===void 0&&(oe={});var ie=oe,ue=ie.placement,de=ue===void 0?le.placement:ue,he=ie.boundary,pe=he===void 0?Xe:he,_e=ie.rootBoundary,Ce=_e===void 0?je:_e,xe=ie.elementContext,Ie=xe===void 0?K$1:xe,$e=ie.altBoundary,Ne=$e===void 0?!1:$e,Oe=ie.padding,Fe=Oe===void 0?0:Oe,Ve=ft(typeof Fe!="number"?Fe:ct(Fe,G$1)),ze=Ie===K$1?Ye:K$1,Ue=le.rects.popper,Pt=le.elements[Ne?ze:Ie],qe=Gt(Q$1(Pt)?Pt:Pt.contextElement||I$2(le.elements.popper),pe,Ce),Et=ee$1(le.elements.reference),kt=mt({reference:Et,element:Ue,strategy:"absolute",placement:de}),At=Te(Object.assign({},Ue,kt)),Dt=Ie===K$1?At:Et,Lt={top:qe.top-Dt.top+Ve.top,bottom:Dt.bottom-qe.bottom+Ve.bottom,left:qe.left-Dt.left+Ve.left,right:Dt.right-qe.right+Ve.right},jt=le.modifiersData.offset;if(Ie===K$1&&jt){var _n=jt[de];Object.keys(Lt).forEach(function(bn){var vn=[W$1,R$1].indexOf(bn)>=0?1:-1,Tn=[E$2,R$1].indexOf(bn)>=0?"y":"x";Lt[bn]+=_n[Tn]*vn})}return Lt}function Jt(le,oe){oe===void 0&&(oe={});var ie=oe,ue=ie.placement,de=ie.boundary,he=ie.rootBoundary,pe=ie.padding,_e=ie.flipVariations,Ce=ie.allowedAutoPlacements,xe=Ce===void 0?Ee:Ce,Ie=te$1(ue),$e=Ie?_e?De:De.filter(function(Fe){return te$1(Fe)===Ie}):G$1,Ne=$e.filter(function(Fe){return xe.indexOf(Fe)>=0});Ne.length===0&&(Ne=$e);var Oe=Ne.reduce(function(Fe,Ve){return Fe[Ve]=ne(le,{placement:Ve,boundary:de,rootBoundary:he,padding:pe})[q$1(Ve)],Fe},{});return Object.keys(Oe).sort(function(Fe,Ve){return Oe[Fe]-Oe[Ve]})}function Kt(le){if(q$1(le)===me)return[];var oe=be(le);return[lt(le),oe,lt(oe)]}function Qt(le){var oe=le.state,ie=le.options,ue=le.name;if(!oe.modifiersData[ue]._skip){for(var de=ie.mainAxis,he=de===void 0?!0:de,pe=ie.altAxis,_e=pe===void 0?!0:pe,Ce=ie.fallbackPlacements,xe=ie.padding,Ie=ie.boundary,$e=ie.rootBoundary,Ne=ie.altBoundary,Oe=ie.flipVariations,Fe=Oe===void 0?!0:Oe,Ve=ie.allowedAutoPlacements,ze=oe.options.placement,Ue=q$1(ze),Pt=Ue===ze,qe=Ce||(Pt||!Fe?[be(ze)]:Kt(ze)),Et=[ze].concat(qe).reduce(function(Un,zn){return Un.concat(q$1(zn)===me?Jt(oe,{placement:zn,boundary:Ie,rootBoundary:$e,padding:xe,flipVariations:Fe,allowedAutoPlacements:Ve}):zn)},[]),kt=oe.rects.reference,At=oe.rects.popper,Dt=new Map,Lt=!0,jt=Et[0],_n=0;_n<Et.length;_n++){var bn=Et[_n],vn=q$1(bn),Tn=te$1(bn)===U$2,$n=[E$2,R$1].indexOf(vn)>=0,wn=$n?"width":"height",Cn=ne(oe,{placement:bn,boundary:Ie,rootBoundary:$e,altBoundary:Ne,padding:xe}),Sn=$n?Tn?W$1:P$2:Tn?R$1:E$2;kt[wn]>At[wn]&&(Sn=be(Sn));var In=be(Sn),En=[];if(he&&En.push(Cn[vn]<=0),_e&&En.push(Cn[Sn]<=0,Cn[In]<=0),En.every(function(Un){return Un})){jt=bn,Lt=!1;break}Dt.set(bn,En)}if(Lt)for(var xn=Fe?3:1,kn=function(Un){var zn=Et.find(function(Hn){var Rn=Dt.get(Hn);if(Rn)return Rn.slice(0,Un).every(function(Jn){return Jn})});if(zn)return jt=zn,"break"},On=xn;On>0;On--){var Mn=kn(On);if(Mn==="break")break}oe.placement!==jt&&(oe.modifiersData[ue]._skip=!0,oe.placement=jt,oe.reset=!0)}}var vt={name:"flip",enabled:!0,phase:"main",fn:Qt,requiresIfExists:["offset"],data:{_skip:!1}};function gt(le,oe,ie){return ie===void 0&&(ie={x:0,y:0}),{top:le.top-oe.height-ie.y,right:le.right-oe.width+ie.x,bottom:le.bottom-oe.height+ie.y,left:le.left-oe.width-ie.x}}function yt(le){return[E$2,W$1,R$1,P$2].some(function(oe){return le[oe]>=0})}function Zt$1(le){var oe=le.state,ie=le.name,ue=oe.rects.reference,de=oe.rects.popper,he=oe.modifiersData.preventOverflow,pe=ne(oe,{elementContext:"reference"}),_e=ne(oe,{altBoundary:!0}),Ce=gt(pe,ue),xe=gt(_e,de,he),Ie=yt(Ce),$e=yt(xe);oe.modifiersData[ie]={referenceClippingOffsets:Ce,popperEscapeOffsets:xe,isReferenceHidden:Ie,hasPopperEscaped:$e},oe.attributes.popper=Object.assign({},oe.attributes.popper,{"data-popper-reference-hidden":Ie,"data-popper-escaped":$e})}var bt={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Zt$1};function en$1(le,oe,ie){var ue=q$1(le),de=[P$2,E$2].indexOf(ue)>=0?-1:1,he=typeof ie=="function"?ie(Object.assign({},oe,{placement:le})):ie,pe=he[0],_e=he[1];return pe=pe||0,_e=(_e||0)*de,[P$2,W$1].indexOf(ue)>=0?{x:_e,y:pe}:{x:pe,y:_e}}function tn(le){var oe=le.state,ie=le.options,ue=le.name,de=ie.offset,he=de===void 0?[0,0]:de,pe=Ee.reduce(function(Ie,$e){return Ie[$e]=en$1($e,oe.rects,he),Ie},{}),_e=pe[oe.placement],Ce=_e.x,xe=_e.y;oe.modifiersData.popperOffsets!=null&&(oe.modifiersData.popperOffsets.x+=Ce,oe.modifiersData.popperOffsets.y+=xe),oe.modifiersData[ue]=pe}var wt={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:tn};function nn(le){var oe=le.state,ie=le.name;oe.modifiersData[ie]=mt({reference:oe.rects.reference,element:oe.rects.popper,strategy:"absolute",placement:oe.placement})}var He={name:"popperOffsets",enabled:!0,phase:"read",fn:nn,data:{}};function rn$1(le){return le==="x"?"y":"x"}function on(le){var oe=le.state,ie=le.options,ue=le.name,de=ie.mainAxis,he=de===void 0?!0:de,pe=ie.altAxis,_e=pe===void 0?!1:pe,Ce=ie.boundary,xe=ie.rootBoundary,Ie=ie.altBoundary,$e=ie.padding,Ne=ie.tether,Oe=Ne===void 0?!0:Ne,Fe=ie.tetherOffset,Ve=Fe===void 0?0:Fe,ze=ne(oe,{boundary:Ce,rootBoundary:xe,padding:$e,altBoundary:Ie}),Ue=q$1(oe.placement),Pt=te$1(oe.placement),qe=!Pt,Et=Le(Ue),kt=rn$1(Et),At=oe.modifiersData.popperOffsets,Dt=oe.rects.reference,Lt=oe.rects.popper,jt=typeof Ve=="function"?Ve(Object.assign({},oe.rects,{placement:oe.placement})):Ve,_n=typeof jt=="number"?{mainAxis:jt,altAxis:jt}:Object.assign({mainAxis:0,altAxis:0},jt),bn=oe.modifiersData.offset?oe.modifiersData.offset[oe.placement]:null,vn={x:0,y:0};if(At){if(he){var Tn,$n=Et==="y"?E$2:P$2,wn=Et==="y"?R$1:W$1,Cn=Et==="y"?"height":"width",Sn=At[Et],In=Sn+ze[$n],En=Sn-ze[wn],xn=Oe?-Lt[Cn]/2:0,kn=Pt===U$2?Dt[Cn]:Lt[Cn],On=Pt===U$2?-Lt[Cn]:-Dt[Cn],Mn=oe.elements.arrow,Un=Oe&&Mn?ke(Mn):{width:0,height:0},zn=oe.modifiersData["arrow#persistent"]?oe.modifiersData["arrow#persistent"].padding:st(),Hn=zn[$n],Rn=zn[wn],Jn=fe(0,Dt[Cn],Un[Cn]),Qn=qe?Dt[Cn]/2-xn-Jn-Hn-_n.mainAxis:kn-Jn-Hn-_n.mainAxis,_r=qe?-Dt[Cn]/2+xn+Jn+Rn+_n.mainAxis:On+Jn+Rn+_n.mainAxis,Zn=oe.elements.arrow&&se(oe.elements.arrow),Gn=Zn?Et==="y"?Zn.clientTop||0:Zn.clientLeft||0:0,Nn=(Tn=bn==null?void 0:bn[Et])!=null?Tn:0,Dn=Sn+Qn-Nn-Gn,jn=Sn+_r-Nn,ir=fe(Oe?ve$1(In,Dn):In,Sn,Oe?X$2(En,jn):En);At[Et]=ir,vn[Et]=ir-Sn}if(_e){var Fn,Kn=Et==="x"?E$2:P$2,mr=Et==="x"?R$1:W$1,yr=At[kt],Cr=kt==="y"?"height":"width",br=yr+ze[Kn],Pr=yr-ze[mr],gr=[E$2,P$2].indexOf(Ue)!==-1,tr=(Fn=bn==null?void 0:bn[kt])!=null?Fn:0,Sr=gr?br:yr-Dt[Cr]-Lt[Cr]-tr+_n.altAxis,Dr=gr?yr+Dt[Cr]+Lt[Cr]-tr-_n.altAxis:Pr,Lr=Oe&&gr?St(Sr,yr,Dr):fe(Oe?Sr:br,yr,Oe?Dr:Pr);At[kt]=Lr,vn[kt]=Lr-yr}oe.modifiersData[ue]=vn}}var xt={name:"preventOverflow",enabled:!0,phase:"main",fn:on,requiresIfExists:["offset"]};function an$1(le){return{scrollLeft:le.scrollLeft,scrollTop:le.scrollTop}}function sn(le){return le===H$1(le)||!B$1(le)?We(le):an$1(le)}function fn(le){var oe=le.getBoundingClientRect(),ie=Z$1(oe.width)/le.offsetWidth||1,ue=Z$1(oe.height)/le.offsetHeight||1;return ie!==1||ue!==1}function cn(le,oe,ie){ie===void 0&&(ie=!1);var ue=B$1(oe),de=B$1(oe)&&fn(oe),he=I$2(oe),pe=ee$1(le,de),_e={scrollLeft:0,scrollTop:0},Ce={x:0,y:0};return(ue||!ue&&!ie)&&((C$1(oe)!=="body"||Se(he))&&(_e=sn(oe)),B$1(oe)?(Ce=ee$1(oe,!0),Ce.x+=oe.clientLeft,Ce.y+=oe.clientTop):he&&(Ce.x=Be(he))),{x:pe.left+_e.scrollLeft-Ce.x,y:pe.top+_e.scrollTop-Ce.y,width:pe.width,height:pe.height}}function pn(le){var oe=new Map,ie=new Set,ue=[];le.forEach(function(he){oe.set(he.name,he)});function de(he){ie.add(he.name);var pe=[].concat(he.requires||[],he.requiresIfExists||[]);pe.forEach(function(_e){if(!ie.has(_e)){var Ce=oe.get(_e);Ce&&de(Ce)}}),ue.push(he)}return le.forEach(function(he){ie.has(he.name)||de(he)}),ue}function un(le){var oe=pn(le);return ot.reduce(function(ie,ue){return ie.concat(oe.filter(function(de){return de.phase===ue}))},[])}function ln$1(le){var oe;return function(){return oe||(oe=new Promise(function(ie){Promise.resolve().then(function(){oe=void 0,ie(le())})})),oe}}function dn$1(le){var oe=le.reduce(function(ie,ue){var de=ie[ue.name];return ie[ue.name]=de?Object.assign({},de,ue,{options:Object.assign({},de.options,ue.options),data:Object.assign({},de.data,ue.data)}):ue,ie},{});return Object.keys(oe).map(function(ie){return oe[ie]})}var Ot={placement:"bottom",modifiers:[],strategy:"absolute"};function $t(){for(var le=arguments.length,oe=new Array(le),ie=0;ie<le;ie++)oe[ie]=arguments[ie];return!oe.some(function(ue){return!(ue&&typeof ue.getBoundingClientRect=="function")})}function we(le){le===void 0&&(le={});var oe=le,ie=oe.defaultModifiers,ue=ie===void 0?[]:ie,de=oe.defaultOptions,he=de===void 0?Ot:de;return function(pe,_e,Ce){Ce===void 0&&(Ce=he);var xe={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ot,he),modifiersData:{},elements:{reference:pe,popper:_e},attributes:{},styles:{}},Ie=[],$e=!1,Ne={state:xe,setOptions:function(Ve){var ze=typeof Ve=="function"?Ve(xe.options):Ve;Fe(),xe.options=Object.assign({},he,xe.options,ze),xe.scrollParents={reference:Q$1(pe)?ce(pe):pe.contextElement?ce(pe.contextElement):[],popper:ce(_e)};var Ue=un(dn$1([].concat(ue,xe.options.modifiers)));return xe.orderedModifiers=Ue.filter(function(Pt){return Pt.enabled}),Oe(),Ne.update()},forceUpdate:function(){if(!$e){var Ve=xe.elements,ze=Ve.reference,Ue=Ve.popper;if($t(ze,Ue)){xe.rects={reference:cn(ze,se(Ue),xe.options.strategy==="fixed"),popper:ke(Ue)},xe.reset=!1,xe.placement=xe.options.placement,xe.orderedModifiers.forEach(function(Lt){return xe.modifiersData[Lt.name]=Object.assign({},Lt.data)});for(var Pt=0;Pt<xe.orderedModifiers.length;Pt++){if(xe.reset===!0){xe.reset=!1,Pt=-1;continue}var qe=xe.orderedModifiers[Pt],Et=qe.fn,kt=qe.options,At=kt===void 0?{}:kt,Dt=qe.name;typeof Et=="function"&&(xe=Et({state:xe,options:At,name:Dt,instance:Ne})||xe)}}}},update:ln$1(function(){return new Promise(function(Ve){Ne.forceUpdate(),Ve(xe)})}),destroy:function(){Fe(),$e=!0}};if(!$t(pe,_e))return Ne;Ne.setOptions(Ce).then(function(Ve){!$e&&Ce.onFirstUpdate&&Ce.onFirstUpdate(Ve)});function Oe(){xe.orderedModifiers.forEach(function(Ve){var ze=Ve.name,Ue=Ve.options,Pt=Ue===void 0?{}:Ue,qe=Ve.effect;if(typeof qe=="function"){var Et=qe({state:xe,name:ze,instance:Ne,options:Pt}),kt=function(){};Ie.push(Et||kt)}})}function Fe(){Ie.forEach(function(Ve){return Ve()}),Ie=[]}return Ne}}we();var mn=[Re,He,Me,Ae];we({defaultModifiers:mn});var gn=[Re,He,Me,Ae,wt,vt,xt,pt,bt],yn=we({defaultModifiers:gn});const usePopper=(le,oe,ie={})=>{const ue={name:"updateState",enabled:!0,phase:"write",fn:({state:Ce})=>{const xe=deriveState(Ce);Object.assign(pe.value,xe)},requires:["computeStyles"]},de=computed(()=>{const{onFirstUpdate:Ce,placement:xe,strategy:Ie,modifiers:$e}=unref(ie);return{onFirstUpdate:Ce,placement:xe||"bottom",strategy:Ie||"absolute",modifiers:[...$e||[],ue,{name:"applyStyles",enabled:!1}]}}),he=shallowRef(),pe=ref({styles:{popper:{position:unref(de).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),_e=()=>{he.value&&(he.value.destroy(),he.value=void 0)};return watch(de,Ce=>{const xe=unref(he);xe&&xe.setOptions(Ce)},{deep:!0}),watch([le,oe],([Ce,xe])=>{_e(),!(!Ce||!xe)&&(he.value=yn(Ce,xe,unref(de)))}),onBeforeUnmount(()=>{_e()}),{state:computed(()=>{var Ce;return{...((Ce=unref(he))==null?void 0:Ce.state)||{}}}),styles:computed(()=>unref(pe).styles),attributes:computed(()=>unref(pe).attributes),update:()=>{var Ce;return(Ce=unref(he))==null?void 0:Ce.update()},forceUpdate:()=>{var Ce;return(Ce=unref(he))==null?void 0:Ce.forceUpdate()},instanceRef:computed(()=>unref(he))}};function deriveState(le){const oe=Object.keys(le.elements),ie=fromPairs(oe.map(de=>[de,le.styles[de]||{}])),ue=fromPairs(oe.map(de=>[de,le.attributes[de]]));return{styles:ie,attributes:ue}}const useSameTarget=le=>{if(!le)return{onClick:NOOP,onMousedown:NOOP,onMouseup:NOOP};let oe=!1,ie=!1;return{onClick:pe=>{oe&&ie&&le(pe),oe=ie=!1},onMousedown:pe=>{oe=pe.target===pe.currentTarget},onMouseup:pe=>{ie=pe.target===pe.currentTarget}}},useThrottleRender=(le,oe=0)=>{if(oe===0)return le;const ie=ref(!1);let ue=null;const de=()=>{ue&&clearTimeout(ue),ue=setTimeout(()=>{ie.value=le.value},oe)};return onMounted(de),watch(()=>le.value,he=>{he?de():ie.value=he}),ie};function useTimeout(){let le;const oe=(ue,de)=>{ie(),le=window.setTimeout(ue,de)},ie=()=>window.clearTimeout(le);return tryOnScopeDispose(()=>ie()),{registerTimeout:oe,cancelTimeout:ie}}const defaultIdInjection={prefix:Math.floor(Math.random()*1e4),current:0},ID_INJECTION_KEY=Symbol("elIdInjection"),useIdInjection=()=>getCurrentInstance()?inject(ID_INJECTION_KEY,defaultIdInjection):defaultIdInjection,useId=le=>{const oe=useIdInjection(),ie=useGetDerivedNamespace();return computed(()=>unref(le)||`${ie.value}-id-${oe.prefix}-${oe.current++}`)};let registeredEscapeHandlers=[];const cachedHandler=le=>{const oe=le;oe.key===EVENT_CODE.esc&&registeredEscapeHandlers.forEach(ie=>ie(oe))},useEscapeKeydown=le=>{onMounted(()=>{registeredEscapeHandlers.length===0&&document.addEventListener("keydown",cachedHandler),isClient&&registeredEscapeHandlers.push(le)}),onBeforeUnmount(()=>{registeredEscapeHandlers=registeredEscapeHandlers.filter(oe=>oe!==le),registeredEscapeHandlers.length===0&&isClient&&document.removeEventListener("keydown",cachedHandler)})};let cachedContainer;const usePopperContainerId=()=>{const le=useGetDerivedNamespace(),oe=useIdInjection(),ie=computed(()=>`${le.value}-popper-container-${oe.prefix}`),ue=computed(()=>`#${ie.value}`);return{id:ie,selector:ue}},createContainer=le=>{const oe=document.createElement("div");return oe.id=le,document.body.appendChild(oe),oe},usePopperContainer=()=>{const{id:le,selector:oe}=usePopperContainerId();return onBeforeMount(()=>{isClient&&(!cachedContainer||!document.body.querySelector(oe.value))&&(cachedContainer=createContainer(le.value))}),{id:le,selector:oe}},useDelayedToggleProps=buildProps({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),useDelayedToggle=({showAfter:le,hideAfter:oe,autoClose:ie,open:ue,close:de})=>{const{registerTimeout:he}=useTimeout(),{registerTimeout:pe,cancelTimeout:_e}=useTimeout();return{onOpen:Ie=>{he(()=>{ue(Ie);const $e=unref(ie);isNumber($e)&&$e>0&&pe(()=>{de(Ie)},$e)},unref(le))},onClose:Ie=>{_e(),he(()=>{de(Ie)},unref(oe))}}},FORWARD_REF_INJECTION_KEY=Symbol("elForwardRef"),useForwardRef=le=>{provide(FORWARD_REF_INJECTION_KEY,{setForwardRef:ie=>{le.value=ie}})},useForwardRefDirective=le=>({mounted(oe){le(oe)},updated(oe){le(oe)},unmounted(){le(null)}}),initial={current:0},zIndex=ref(0),defaultInitialZIndex=2e3,ZINDEX_INJECTION_KEY=Symbol("elZIndexContextKey"),zIndexContextKey=Symbol("zIndexContextKey"),useZIndex=le=>{const oe=getCurrentInstance()?inject(ZINDEX_INJECTION_KEY,initial):initial,ie=le||(getCurrentInstance()?inject(zIndexContextKey,void 0):void 0),ue=computed(()=>{const pe=unref(ie);return isNumber(pe)?pe:defaultInitialZIndex}),de=computed(()=>ue.value+zIndex.value),he=()=>(oe.current++,zIndex.value=oe.current,de.value);return!isClient&&inject(ZINDEX_INJECTION_KEY),{initialZIndex:ue,currentZIndex:de,nextZIndex:he}},min$7=Math.min,max$5=Math.max,round=Math.round,floor$3=Math.floor,createCoords=le=>({x:le,y:le}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp$3(le,oe,ie){return max$5(le,min$7(oe,ie))}function evaluate(le,oe){return typeof le=="function"?le(oe):le}function getSide(le){return le.split("-")[0]}function getAlignment(le){return le.split("-")[1]}function getOppositeAxis(le){return le==="x"?"y":"x"}function getAxisLength(le){return le==="y"?"height":"width"}function getSideAxis(le){return["top","bottom"].includes(getSide(le))?"y":"x"}function getAlignmentAxis(le){return getOppositeAxis(getSideAxis(le))}function getAlignmentSides(le,oe,ie){ie===void 0&&(ie=!1);const ue=getAlignment(le),de=getAlignmentAxis(le),he=getAxisLength(de);let pe=de==="x"?ue===(ie?"end":"start")?"right":"left":ue==="start"?"bottom":"top";return oe.reference[he]>oe.floating[he]&&(pe=getOppositePlacement(pe)),[pe,getOppositePlacement(pe)]}function getExpandedPlacements(le){const oe=getOppositePlacement(le);return[getOppositeAlignmentPlacement(le),oe,getOppositeAlignmentPlacement(oe)]}function getOppositeAlignmentPlacement(le){return le.replace(/start|end/g,oe=>oppositeAlignmentMap[oe])}function getSideList(le,oe,ie){const ue=["left","right"],de=["right","left"],he=["top","bottom"],pe=["bottom","top"];switch(le){case"top":case"bottom":return ie?oe?de:ue:oe?ue:de;case"left":case"right":return oe?he:pe;default:return[]}}function getOppositeAxisPlacements(le,oe,ie,ue){const de=getAlignment(le);let he=getSideList(getSide(le),ie==="start",ue);return de&&(he=he.map(pe=>pe+"-"+de),oe&&(he=he.concat(he.map(getOppositeAlignmentPlacement)))),he}function getOppositePlacement(le){return le.replace(/left|right|bottom|top/g,oe=>oppositeSideMap[oe])}function expandPaddingObject(le){return{top:0,right:0,bottom:0,left:0,...le}}function getPaddingObject(le){return typeof le!="number"?expandPaddingObject(le):{top:le,right:le,bottom:le,left:le}}function rectToClientRect(le){const{x:oe,y:ie,width:ue,height:de}=le;return{width:ue,height:de,top:ie,left:oe,right:oe+ue,bottom:ie+de,x:oe,y:ie}}function computeCoordsFromPlacement(le,oe,ie){let{reference:ue,floating:de}=le;const he=getSideAxis(oe),pe=getAlignmentAxis(oe),_e=getAxisLength(pe),Ce=getSide(oe),xe=he==="y",Ie=ue.x+ue.width/2-de.width/2,$e=ue.y+ue.height/2-de.height/2,Ne=ue[_e]/2-de[_e]/2;let Oe;switch(Ce){case"top":Oe={x:Ie,y:ue.y-de.height};break;case"bottom":Oe={x:Ie,y:ue.y+ue.height};break;case"right":Oe={x:ue.x+ue.width,y:$e};break;case"left":Oe={x:ue.x-de.width,y:$e};break;default:Oe={x:ue.x,y:ue.y}}switch(getAlignment(oe)){case"start":Oe[pe]-=Ne*(ie&&xe?-1:1);break;case"end":Oe[pe]+=Ne*(ie&&xe?-1:1);break}return Oe}const computePosition$1=async(le,oe,ie)=>{const{placement:ue="bottom",strategy:de="absolute",middleware:he=[],platform:pe}=ie,_e=he.filter(Boolean),Ce=await(pe.isRTL==null?void 0:pe.isRTL(oe));let xe=await pe.getElementRects({reference:le,floating:oe,strategy:de}),{x:Ie,y:$e}=computeCoordsFromPlacement(xe,ue,Ce),Ne=ue,Oe={},Fe=0;for(let Ve=0;Ve<_e.length;Ve++){const{name:ze,fn:Ue}=_e[Ve],{x:Pt,y:qe,data:Et,reset:kt}=await Ue({x:Ie,y:$e,initialPlacement:ue,placement:Ne,strategy:de,middlewareData:Oe,rects:xe,platform:pe,elements:{reference:le,floating:oe}});Ie=Pt??Ie,$e=qe??$e,Oe={...Oe,[ze]:{...Oe[ze],...Et}},kt&&Fe<=50&&(Fe++,typeof kt=="object"&&(kt.placement&&(Ne=kt.placement),kt.rects&&(xe=kt.rects===!0?await pe.getElementRects({reference:le,floating:oe,strategy:de}):kt.rects),{x:Ie,y:$e}=computeCoordsFromPlacement(xe,Ne,Ce)),Ve=-1)}return{x:Ie,y:$e,placement:Ne,strategy:de,middlewareData:Oe}};async function detectOverflow$1(le,oe){var ie;oe===void 0&&(oe={});const{x:ue,y:de,platform:he,rects:pe,elements:_e,strategy:Ce}=le,{boundary:xe="clippingAncestors",rootBoundary:Ie="viewport",elementContext:$e="floating",altBoundary:Ne=!1,padding:Oe=0}=evaluate(oe,le),Fe=getPaddingObject(Oe),ze=_e[Ne?$e==="floating"?"reference":"floating":$e],Ue=rectToClientRect(await he.getClippingRect({element:(ie=await(he.isElement==null?void 0:he.isElement(ze)))==null||ie?ze:ze.contextElement||await(he.getDocumentElement==null?void 0:he.getDocumentElement(_e.floating)),boundary:xe,rootBoundary:Ie,strategy:Ce})),Pt=$e==="floating"?{x:ue,y:de,width:pe.floating.width,height:pe.floating.height}:pe.reference,qe=await(he.getOffsetParent==null?void 0:he.getOffsetParent(_e.floating)),Et=await(he.isElement==null?void 0:he.isElement(qe))?await(he.getScale==null?void 0:he.getScale(qe))||{x:1,y:1}:{x:1,y:1},kt=rectToClientRect(he.convertOffsetParentRelativeRectToViewportRelativeRect?await he.convertOffsetParentRelativeRectToViewportRelativeRect({elements:_e,rect:Pt,offsetParent:qe,strategy:Ce}):Pt);return{top:(Ue.top-kt.top+Fe.top)/Et.y,bottom:(kt.bottom-Ue.bottom+Fe.bottom)/Et.y,left:(Ue.left-kt.left+Fe.left)/Et.x,right:(kt.right-Ue.right+Fe.right)/Et.x}}const arrow$1=le=>({name:"arrow",options:le,async fn(oe){const{x:ie,y:ue,placement:de,rects:he,platform:pe,elements:_e,middlewareData:Ce}=oe,{element:xe,padding:Ie=0}=evaluate(le,oe)||{};if(xe==null)return{};const $e=getPaddingObject(Ie),Ne={x:ie,y:ue},Oe=getAlignmentAxis(de),Fe=getAxisLength(Oe),Ve=await pe.getDimensions(xe),ze=Oe==="y",Ue=ze?"top":"left",Pt=ze?"bottom":"right",qe=ze?"clientHeight":"clientWidth",Et=he.reference[Fe]+he.reference[Oe]-Ne[Oe]-he.floating[Fe],kt=Ne[Oe]-he.reference[Oe],At=await(pe.getOffsetParent==null?void 0:pe.getOffsetParent(xe));let Dt=At?At[qe]:0;(!Dt||!await(pe.isElement==null?void 0:pe.isElement(At)))&&(Dt=_e.floating[qe]||he.floating[Fe]);const Lt=Et/2-kt/2,jt=Dt/2-Ve[Fe]/2-1,_n=min$7($e[Ue],jt),bn=min$7($e[Pt],jt),vn=_n,Tn=Dt-Ve[Fe]-bn,$n=Dt/2-Ve[Fe]/2+Lt,wn=clamp$3(vn,$n,Tn),Cn=!Ce.arrow&&getAlignment(de)!=null&&$n!==wn&&he.reference[Fe]/2-($n<vn?_n:bn)-Ve[Fe]/2<0,Sn=Cn?$n<vn?$n-vn:$n-Tn:0;return{[Oe]:Ne[Oe]+Sn,data:{[Oe]:wn,centerOffset:$n-wn-Sn,...Cn&&{alignmentOffset:Sn}},reset:Cn}}}),flip$1=function(le){return le===void 0&&(le={}),{name:"flip",options:le,async fn(oe){var ie,ue;const{placement:de,middlewareData:he,rects:pe,initialPlacement:_e,platform:Ce,elements:xe}=oe,{mainAxis:Ie=!0,crossAxis:$e=!0,fallbackPlacements:Ne,fallbackStrategy:Oe="bestFit",fallbackAxisSideDirection:Fe="none",flipAlignment:Ve=!0,...ze}=evaluate(le,oe);if((ie=he.arrow)!=null&&ie.alignmentOffset)return{};const Ue=getSide(de),Pt=getSideAxis(_e),qe=getSide(_e)===_e,Et=await(Ce.isRTL==null?void 0:Ce.isRTL(xe.floating)),kt=Ne||(qe||!Ve?[getOppositePlacement(_e)]:getExpandedPlacements(_e)),At=Fe!=="none";!Ne&&At&&kt.push(...getOppositeAxisPlacements(_e,Ve,Fe,Et));const Dt=[_e,...kt],Lt=await detectOverflow$1(oe,ze),jt=[];let _n=((ue=he.flip)==null?void 0:ue.overflows)||[];if(Ie&&jt.push(Lt[Ue]),$e){const $n=getAlignmentSides(de,pe,Et);jt.push(Lt[$n[0]],Lt[$n[1]])}if(_n=[..._n,{placement:de,overflows:jt}],!jt.every($n=>$n<=0)){var bn,vn;const $n=(((bn=he.flip)==null?void 0:bn.index)||0)+1,wn=Dt[$n];if(wn)return{data:{index:$n,overflows:_n},reset:{placement:wn}};let Cn=(vn=_n.filter(Sn=>Sn.overflows[0]<=0).sort((Sn,In)=>Sn.overflows[1]-In.overflows[1])[0])==null?void 0:vn.placement;if(!Cn)switch(Oe){case"bestFit":{var Tn;const Sn=(Tn=_n.filter(In=>{if(At){const En=getSideAxis(In.placement);return En===Pt||En==="y"}return!0}).map(In=>[In.placement,In.overflows.filter(En=>En>0).reduce((En,xn)=>En+xn,0)]).sort((In,En)=>In[1]-En[1])[0])==null?void 0:Tn[0];Sn&&(Cn=Sn);break}case"initialPlacement":Cn=_e;break}if(de!==Cn)return{reset:{placement:Cn}}}return{}}}};async function convertValueToCoords(le,oe){const{placement:ie,platform:ue,elements:de}=le,he=await(ue.isRTL==null?void 0:ue.isRTL(de.floating)),pe=getSide(ie),_e=getAlignment(ie),Ce=getSideAxis(ie)==="y",xe=["left","top"].includes(pe)?-1:1,Ie=he&&Ce?-1:1,$e=evaluate(oe,le);let{mainAxis:Ne,crossAxis:Oe,alignmentAxis:Fe}=typeof $e=="number"?{mainAxis:$e,crossAxis:0,alignmentAxis:null}:{mainAxis:$e.mainAxis||0,crossAxis:$e.crossAxis||0,alignmentAxis:$e.alignmentAxis};return _e&&typeof Fe=="number"&&(Oe=_e==="end"?Fe*-1:Fe),Ce?{x:Oe*Ie,y:Ne*xe}:{x:Ne*xe,y:Oe*Ie}}const offset$1=function(le){return le===void 0&&(le=0),{name:"offset",options:le,async fn(oe){var ie,ue;const{x:de,y:he,placement:pe,middlewareData:_e}=oe,Ce=await convertValueToCoords(oe,le);return pe===((ie=_e.offset)==null?void 0:ie.placement)&&(ue=_e.arrow)!=null&&ue.alignmentOffset?{}:{x:de+Ce.x,y:he+Ce.y,data:{...Ce,placement:pe}}}}},shift$1=function(le){return le===void 0&&(le={}),{name:"shift",options:le,async fn(oe){const{x:ie,y:ue,placement:de}=oe,{mainAxis:he=!0,crossAxis:pe=!1,limiter:_e={fn:ze=>{let{x:Ue,y:Pt}=ze;return{x:Ue,y:Pt}}},...Ce}=evaluate(le,oe),xe={x:ie,y:ue},Ie=await detectOverflow$1(oe,Ce),$e=getSideAxis(getSide(de)),Ne=getOppositeAxis($e);let Oe=xe[Ne],Fe=xe[$e];if(he){const ze=Ne==="y"?"top":"left",Ue=Ne==="y"?"bottom":"right",Pt=Oe+Ie[ze],qe=Oe-Ie[Ue];Oe=clamp$3(Pt,Oe,qe)}if(pe){const ze=$e==="y"?"top":"left",Ue=$e==="y"?"bottom":"right",Pt=Fe+Ie[ze],qe=Fe-Ie[Ue];Fe=clamp$3(Pt,Fe,qe)}const Ve=_e.fn({...oe,[Ne]:Oe,[$e]:Fe});return{...Ve,data:{x:Ve.x-ie,y:Ve.y-ue,enabled:{[Ne]:he,[$e]:pe}}}}}};function hasWindow(){return typeof window<"u"}function getNodeName(le){return isNode(le)?(le.nodeName||"").toLowerCase():"#document"}function getWindow(le){var oe;return(le==null||(oe=le.ownerDocument)==null?void 0:oe.defaultView)||window}function getDocumentElement(le){var oe;return(oe=(isNode(le)?le.ownerDocument:le.document)||window.document)==null?void 0:oe.documentElement}function isNode(le){return hasWindow()?le instanceof Node||le instanceof getWindow(le).Node:!1}function isElement(le){return hasWindow()?le instanceof Element||le instanceof getWindow(le).Element:!1}function isHTMLElement(le){return hasWindow()?le instanceof HTMLElement||le instanceof getWindow(le).HTMLElement:!1}function isShadowRoot(le){return!hasWindow()||typeof ShadowRoot>"u"?!1:le instanceof ShadowRoot||le instanceof getWindow(le).ShadowRoot}function isOverflowElement(le){const{overflow:oe,overflowX:ie,overflowY:ue,display:de}=getComputedStyle$1(le);return/auto|scroll|overlay|hidden|clip/.test(oe+ue+ie)&&!["inline","contents"].includes(de)}function isTableElement(le){return["table","td","th"].includes(getNodeName(le))}function isTopLayer(le){return[":popover-open",":modal"].some(oe=>{try{return le.matches(oe)}catch{return!1}})}function isContainingBlock(le){const oe=isWebKit(),ie=isElement(le)?getComputedStyle$1(le):le;return ie.transform!=="none"||ie.perspective!=="none"||(ie.containerType?ie.containerType!=="normal":!1)||!oe&&(ie.backdropFilter?ie.backdropFilter!=="none":!1)||!oe&&(ie.filter?ie.filter!=="none":!1)||["transform","perspective","filter"].some(ue=>(ie.willChange||"").includes(ue))||["paint","layout","strict","content"].some(ue=>(ie.contain||"").includes(ue))}function getContainingBlock(le){let oe=getParentNode(le);for(;isHTMLElement(oe)&&!isLastTraversableNode(oe);){if(isContainingBlock(oe))return oe;if(isTopLayer(oe))return null;oe=getParentNode(oe)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(le){return["html","body","#document"].includes(getNodeName(le))}function getComputedStyle$1(le){return getWindow(le).getComputedStyle(le)}function getNodeScroll(le){return isElement(le)?{scrollLeft:le.scrollLeft,scrollTop:le.scrollTop}:{scrollLeft:le.scrollX,scrollTop:le.scrollY}}function getParentNode(le){if(getNodeName(le)==="html")return le;const oe=le.assignedSlot||le.parentNode||isShadowRoot(le)&&le.host||getDocumentElement(le);return isShadowRoot(oe)?oe.host:oe}function getNearestOverflowAncestor(le){const oe=getParentNode(le);return isLastTraversableNode(oe)?le.ownerDocument?le.ownerDocument.body:le.body:isHTMLElement(oe)&&isOverflowElement(oe)?oe:getNearestOverflowAncestor(oe)}function getOverflowAncestors(le,oe,ie){var ue;oe===void 0&&(oe=[]),ie===void 0&&(ie=!0);const de=getNearestOverflowAncestor(le),he=de===((ue=le.ownerDocument)==null?void 0:ue.body),pe=getWindow(de);if(he){const _e=getFrameElement(pe);return oe.concat(pe,pe.visualViewport||[],isOverflowElement(de)?de:[],_e&&ie?getOverflowAncestors(_e):[])}return oe.concat(de,getOverflowAncestors(de,[],ie))}function getFrameElement(le){return le.parent&&Object.getPrototypeOf(le.parent)?le.frameElement:null}function getCssDimensions(le){const oe=getComputedStyle$1(le);let ie=parseFloat(oe.width)||0,ue=parseFloat(oe.height)||0;const de=isHTMLElement(le),he=de?le.offsetWidth:ie,pe=de?le.offsetHeight:ue,_e=round(ie)!==he||round(ue)!==pe;return _e&&(ie=he,ue=pe),{width:ie,height:ue,$:_e}}function unwrapElement(le){return isElement(le)?le:le.contextElement}function getScale(le){const oe=unwrapElement(le);if(!isHTMLElement(oe))return createCoords(1);const ie=oe.getBoundingClientRect(),{width:ue,height:de,$:he}=getCssDimensions(oe);let pe=(he?round(ie.width):ie.width)/ue,_e=(he?round(ie.height):ie.height)/de;return(!pe||!Number.isFinite(pe))&&(pe=1),(!_e||!Number.isFinite(_e))&&(_e=1),{x:pe,y:_e}}const noOffsets=createCoords(0);function getVisualOffsets(le){const oe=getWindow(le);return!isWebKit()||!oe.visualViewport?noOffsets:{x:oe.visualViewport.offsetLeft,y:oe.visualViewport.offsetTop}}function shouldAddVisualOffsets(le,oe,ie){return oe===void 0&&(oe=!1),!ie||oe&&ie!==getWindow(le)?!1:oe}function getBoundingClientRect(le,oe,ie,ue){oe===void 0&&(oe=!1),ie===void 0&&(ie=!1);const de=le.getBoundingClientRect(),he=unwrapElement(le);let pe=createCoords(1);oe&&(ue?isElement(ue)&&(pe=getScale(ue)):pe=getScale(le));const _e=shouldAddVisualOffsets(he,ie,ue)?getVisualOffsets(he):createCoords(0);let Ce=(de.left+_e.x)/pe.x,xe=(de.top+_e.y)/pe.y,Ie=de.width/pe.x,$e=de.height/pe.y;if(he){const Ne=getWindow(he),Oe=ue&&isElement(ue)?getWindow(ue):ue;let Fe=Ne,Ve=getFrameElement(Fe);for(;Ve&&ue&&Oe!==Fe;){const ze=getScale(Ve),Ue=Ve.getBoundingClientRect(),Pt=getComputedStyle$1(Ve),qe=Ue.left+(Ve.clientLeft+parseFloat(Pt.paddingLeft))*ze.x,Et=Ue.top+(Ve.clientTop+parseFloat(Pt.paddingTop))*ze.y;Ce*=ze.x,xe*=ze.y,Ie*=ze.x,$e*=ze.y,Ce+=qe,xe+=Et,Fe=getWindow(Ve),Ve=getFrameElement(Fe)}}return rectToClientRect({width:Ie,height:$e,x:Ce,y:xe})}function convertOffsetParentRelativeRectToViewportRelativeRect(le){let{elements:oe,rect:ie,offsetParent:ue,strategy:de}=le;const he=de==="fixed",pe=getDocumentElement(ue),_e=oe?isTopLayer(oe.floating):!1;if(ue===pe||_e&&he)return ie;let Ce={scrollLeft:0,scrollTop:0},xe=createCoords(1);const Ie=createCoords(0),$e=isHTMLElement(ue);if(($e||!$e&&!he)&&((getNodeName(ue)!=="body"||isOverflowElement(pe))&&(Ce=getNodeScroll(ue)),isHTMLElement(ue))){const Ne=getBoundingClientRect(ue);xe=getScale(ue),Ie.x=Ne.x+ue.clientLeft,Ie.y=Ne.y+ue.clientTop}return{width:ie.width*xe.x,height:ie.height*xe.y,x:ie.x*xe.x-Ce.scrollLeft*xe.x+Ie.x,y:ie.y*xe.y-Ce.scrollTop*xe.y+Ie.y}}function getClientRects(le){return Array.from(le.getClientRects())}function getWindowScrollBarX(le,oe){const ie=getNodeScroll(le).scrollLeft;return oe?oe.left+ie:getBoundingClientRect(getDocumentElement(le)).left+ie}function getDocumentRect(le){const oe=getDocumentElement(le),ie=getNodeScroll(le),ue=le.ownerDocument.body,de=max$5(oe.scrollWidth,oe.clientWidth,ue.scrollWidth,ue.clientWidth),he=max$5(oe.scrollHeight,oe.clientHeight,ue.scrollHeight,ue.clientHeight);let pe=-ie.scrollLeft+getWindowScrollBarX(le);const _e=-ie.scrollTop;return getComputedStyle$1(ue).direction==="rtl"&&(pe+=max$5(oe.clientWidth,ue.clientWidth)-de),{width:de,height:he,x:pe,y:_e}}function getViewportRect(le,oe){const ie=getWindow(le),ue=getDocumentElement(le),de=ie.visualViewport;let he=ue.clientWidth,pe=ue.clientHeight,_e=0,Ce=0;if(de){he=de.width,pe=de.height;const xe=isWebKit();(!xe||xe&&oe==="fixed")&&(_e=de.offsetLeft,Ce=de.offsetTop)}return{width:he,height:pe,x:_e,y:Ce}}function getInnerBoundingClientRect(le,oe){const ie=getBoundingClientRect(le,!0,oe==="fixed"),ue=ie.top+le.clientTop,de=ie.left+le.clientLeft,he=isHTMLElement(le)?getScale(le):createCoords(1),pe=le.clientWidth*he.x,_e=le.clientHeight*he.y,Ce=de*he.x,xe=ue*he.y;return{width:pe,height:_e,x:Ce,y:xe}}function getClientRectFromClippingAncestor(le,oe,ie){let ue;if(oe==="viewport")ue=getViewportRect(le,ie);else if(oe==="document")ue=getDocumentRect(getDocumentElement(le));else if(isElement(oe))ue=getInnerBoundingClientRect(oe,ie);else{const de=getVisualOffsets(le);ue={...oe,x:oe.x-de.x,y:oe.y-de.y}}return rectToClientRect(ue)}function hasFixedPositionAncestor(le,oe){const ie=getParentNode(le);return ie===oe||!isElement(ie)||isLastTraversableNode(ie)?!1:getComputedStyle$1(ie).position==="fixed"||hasFixedPositionAncestor(ie,oe)}function getClippingElementAncestors(le,oe){const ie=oe.get(le);if(ie)return ie;let ue=getOverflowAncestors(le,[],!1).filter(_e=>isElement(_e)&&getNodeName(_e)!=="body"),de=null;const he=getComputedStyle$1(le).position==="fixed";let pe=he?getParentNode(le):le;for(;isElement(pe)&&!isLastTraversableNode(pe);){const _e=getComputedStyle$1(pe),Ce=isContainingBlock(pe);!Ce&&_e.position==="fixed"&&(de=null),(he?!Ce&&!de:!Ce&&_e.position==="static"&&!!de&&["absolute","fixed"].includes(de.position)||isOverflowElement(pe)&&!Ce&&hasFixedPositionAncestor(le,pe))?ue=ue.filter(Ie=>Ie!==pe):de=_e,pe=getParentNode(pe)}return oe.set(le,ue),ue}function getClippingRect(le){let{element:oe,boundary:ie,rootBoundary:ue,strategy:de}=le;const pe=[...ie==="clippingAncestors"?isTopLayer(oe)?[]:getClippingElementAncestors(oe,this._c):[].concat(ie),ue],_e=pe[0],Ce=pe.reduce((xe,Ie)=>{const $e=getClientRectFromClippingAncestor(oe,Ie,de);return xe.top=max$5($e.top,xe.top),xe.right=min$7($e.right,xe.right),xe.bottom=min$7($e.bottom,xe.bottom),xe.left=max$5($e.left,xe.left),xe},getClientRectFromClippingAncestor(oe,_e,de));return{width:Ce.right-Ce.left,height:Ce.bottom-Ce.top,x:Ce.left,y:Ce.top}}function getDimensions(le){const{width:oe,height:ie}=getCssDimensions(le);return{width:oe,height:ie}}function getRectRelativeToOffsetParent(le,oe,ie){const ue=isHTMLElement(oe),de=getDocumentElement(oe),he=ie==="fixed",pe=getBoundingClientRect(le,!0,he,oe);let _e={scrollLeft:0,scrollTop:0};const Ce=createCoords(0);if(ue||!ue&&!he)if((getNodeName(oe)!=="body"||isOverflowElement(de))&&(_e=getNodeScroll(oe)),ue){const Oe=getBoundingClientRect(oe,!0,he,oe);Ce.x=Oe.x+oe.clientLeft,Ce.y=Oe.y+oe.clientTop}else de&&(Ce.x=getWindowScrollBarX(de));let xe=0,Ie=0;if(de&&!ue&&!he){const Oe=de.getBoundingClientRect();Ie=Oe.top+_e.scrollTop,xe=Oe.left+_e.scrollLeft-getWindowScrollBarX(de,Oe)}const $e=pe.left+_e.scrollLeft-Ce.x-xe,Ne=pe.top+_e.scrollTop-Ce.y-Ie;return{x:$e,y:Ne,width:pe.width,height:pe.height}}function isStaticPositioned(le){return getComputedStyle$1(le).position==="static"}function getTrueOffsetParent(le,oe){if(!isHTMLElement(le)||getComputedStyle$1(le).position==="fixed")return null;if(oe)return oe(le);let ie=le.offsetParent;return getDocumentElement(le)===ie&&(ie=ie.ownerDocument.body),ie}function getOffsetParent(le,oe){const ie=getWindow(le);if(isTopLayer(le))return ie;if(!isHTMLElement(le)){let de=getParentNode(le);for(;de&&!isLastTraversableNode(de);){if(isElement(de)&&!isStaticPositioned(de))return de;de=getParentNode(de)}return ie}let ue=getTrueOffsetParent(le,oe);for(;ue&&isTableElement(ue)&&isStaticPositioned(ue);)ue=getTrueOffsetParent(ue,oe);return ue&&isLastTraversableNode(ue)&&isStaticPositioned(ue)&&!isContainingBlock(ue)?ie:ue||getContainingBlock(le)||ie}const getElementRects=async function(le){const oe=this.getOffsetParent||getOffsetParent,ie=this.getDimensions,ue=await ie(le.floating);return{reference:getRectRelativeToOffsetParent(le.reference,await oe(le.floating),le.strategy),floating:{x:0,y:0,width:ue.width,height:ue.height}}};function isRTL$1(le){return getComputedStyle$1(le).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL:isRTL$1};function observeMove(le,oe){let ie=null,ue;const de=getDocumentElement(le);function he(){var _e;clearTimeout(ue),(_e=ie)==null||_e.disconnect(),ie=null}function pe(_e,Ce){_e===void 0&&(_e=!1),Ce===void 0&&(Ce=1),he();const{left:xe,top:Ie,width:$e,height:Ne}=le.getBoundingClientRect();if(_e||oe(),!$e||!Ne)return;const Oe=floor$3(Ie),Fe=floor$3(de.clientWidth-(xe+$e)),Ve=floor$3(de.clientHeight-(Ie+Ne)),ze=floor$3(xe),Pt={rootMargin:-Oe+"px "+-Fe+"px "+-Ve+"px "+-ze+"px",threshold:max$5(0,min$7(1,Ce))||1};let qe=!0;function Et(kt){const At=kt[0].intersectionRatio;if(At!==Ce){if(!qe)return pe();At?pe(!1,At):ue=setTimeout(()=>{pe(!1,1e-7)},1e3)}qe=!1}try{ie=new IntersectionObserver(Et,{...Pt,root:de.ownerDocument})}catch{ie=new IntersectionObserver(Et,Pt)}ie.observe(le)}return pe(!0),he}function autoUpdate(le,oe,ie,ue){ue===void 0&&(ue={});const{ancestorScroll:de=!0,ancestorResize:he=!0,elementResize:pe=typeof ResizeObserver=="function",layoutShift:_e=typeof IntersectionObserver=="function",animationFrame:Ce=!1}=ue,xe=unwrapElement(le),Ie=de||he?[...xe?getOverflowAncestors(xe):[],...getOverflowAncestors(oe)]:[];Ie.forEach(Ue=>{de&&Ue.addEventListener("scroll",ie,{passive:!0}),he&&Ue.addEventListener("resize",ie)});const $e=xe&&_e?observeMove(xe,ie):null;let Ne=-1,Oe=null;pe&&(Oe=new ResizeObserver(Ue=>{let[Pt]=Ue;Pt&&Pt.target===xe&&Oe&&(Oe.unobserve(oe),cancelAnimationFrame(Ne),Ne=requestAnimationFrame(()=>{var qe;(qe=Oe)==null||qe.observe(oe)})),ie()}),xe&&!Ce&&Oe.observe(xe),Oe.observe(oe));let Fe,Ve=Ce?getBoundingClientRect(le):null;Ce&&ze();function ze(){const Ue=getBoundingClientRect(le);Ve&&(Ue.x!==Ve.x||Ue.y!==Ve.y||Ue.width!==Ve.width||Ue.height!==Ve.height)&&ie(),Ve=Ue,Fe=requestAnimationFrame(ze)}return ie(),()=>{var Ue;Ie.forEach(Pt=>{de&&Pt.removeEventListener("scroll",ie),he&&Pt.removeEventListener("resize",ie)}),$e==null||$e(),(Ue=Oe)==null||Ue.disconnect(),Oe=null,Ce&&cancelAnimationFrame(Fe)}}const detectOverflow=detectOverflow$1,offset=offset$1,shift=shift$1,flip=flip$1,arrow=arrow$1,computePosition=(le,oe,ie)=>{const ue=new Map,de={platform,...ie},he={...de.platform,_c:ue};return computePosition$1(le,oe,{...de,platform:he})};buildProps({});const unrefReference=le=>{if(!isClient)return;if(!le)return le;const oe=unrefElement(le);return oe||(isRef(le)?oe:le)},useFloating$1=({middleware:le,placement:oe,strategy:ie})=>{const ue=ref(),de=ref(),he=ref(),pe=ref(),_e=ref({}),Ce={x:he,y:pe,placement:oe,strategy:ie,middlewareData:_e},xe=async()=>{if(!isClient)return;const Ie=unrefReference(ue),$e=unrefElement(de);if(!Ie||!$e)return;const Ne=await computePosition(Ie,$e,{placement:unref(oe),strategy:unref(ie),middleware:unref(le)});keysOf(Ce).forEach(Oe=>{Ce[Oe].value=Ne[Oe]})};return onMounted(()=>{watchEffect(()=>{xe()})}),{...Ce,update:xe,referenceRef:ue,contentRef:de}},arrowMiddleware=({arrowRef:le,padding:oe})=>({name:"arrow",options:{element:le,padding:oe},fn(ie){const ue=unref(le);return ue?arrow({element:ue,padding:oe}).fn(ie):{}}});function useCursor(le){let oe;function ie(){if(le.value==null)return;const{selectionStart:de,selectionEnd:he,value:pe}=le.value;if(de==null||he==null)return;const _e=pe.slice(0,Math.max(0,de)),Ce=pe.slice(Math.max(0,he));oe={selectionStart:de,selectionEnd:he,value:pe,beforeTxt:_e,afterTxt:Ce}}function ue(){if(le.value==null||oe==null)return;const{value:de}=le.value,{beforeTxt:he,afterTxt:pe,selectionStart:_e}=oe;if(he==null||pe==null||_e==null)return;let Ce=de.length;if(de.endsWith(pe))Ce=de.length-pe.length;else if(de.startsWith(he))Ce=he.length;else{const xe=he[_e-1],Ie=de.indexOf(xe,_e-1);Ie!==-1&&(Ce=Ie+1)}le.value.setSelectionRange(Ce,Ce)}return[ie,ue]}const getOrderedChildren=(le,oe,ie)=>flattedChildren(le.subTree).filter(he=>{var pe;return isVNode(he)&&((pe=he.type)==null?void 0:pe.name)===oe&&!!he.component}).map(he=>he.component.uid).map(he=>ie[he]).filter(he=>!!he),useOrderedChildren=(le,oe)=>{const ie={},ue=shallowRef([]);return{children:ue,addChild:pe=>{ie[pe.uid]=pe,ue.value=getOrderedChildren(le,oe,ie)},removeChild:pe=>{delete ie[pe],ue.value=ue.value.filter(_e=>_e.uid!==pe)}}},useSizeProp=buildProp({type:String,values:componentSizes,required:!1}),SIZE_INJECTION_KEY=Symbol("size"),useGlobalSize=()=>{const le=inject(SIZE_INJECTION_KEY,{});return computed(()=>unref(le.size)||"")};function useFocusController(le,{beforeFocus:oe,afterFocus:ie,beforeBlur:ue,afterBlur:de}={}){const he=getCurrentInstance(),{emit:pe}=he,_e=shallowRef(),Ce=ref(!1),xe=Ne=>{isFunction$2(oe)&&oe(Ne)||Ce.value||(Ce.value=!0,pe("focus",Ne),ie==null||ie())},Ie=Ne=>{var Oe;isFunction$2(ue)&&ue(Ne)||Ne.relatedTarget&&((Oe=_e.value)!=null&&Oe.contains(Ne.relatedTarget))||(Ce.value=!1,pe("blur",Ne),de==null||de())},$e=()=>{var Ne,Oe;(Ne=_e.value)!=null&&Ne.contains(document.activeElement)&&_e.value!==document.activeElement||(Oe=le.value)==null||Oe.focus()};return watch(_e,Ne=>{Ne&&Ne.setAttribute("tabindex","-1")}),useEventListener(_e,"focus",xe,!0),useEventListener(_e,"blur",Ie,!0),useEventListener(_e,"click",$e,!0),{isFocused:Ce,wrapperRef:_e,handleFocus:xe,handleBlur:Ie}}function useComposition({afterComposition:le,emit:oe}){const ie=ref(!1),ue=_e=>{oe==null||oe("compositionstart",_e),ie.value=!0},de=_e=>{var Ce;oe==null||oe("compositionupdate",_e);const xe=(Ce=_e.target)==null?void 0:Ce.value,Ie=xe[xe.length-1]||"";ie.value=!isKorean(Ie)},he=_e=>{oe==null||oe("compositionend",_e),ie.value&&(ie.value=!1,nextTick(()=>le(_e)))};return{isComposing:ie,handleComposition:_e=>{_e.type==="compositionend"?he(_e):de(_e)},handleCompositionStart:ue,handleCompositionUpdate:de,handleCompositionEnd:he}}const emptyValuesContextKey=Symbol("emptyValuesContextKey"),DEFAULT_EMPTY_VALUES=["",void 0,null],DEFAULT_VALUE_ON_CLEAR=void 0,useEmptyValuesProps=buildProps({emptyValues:Array,valueOnClear:{type:[String,Number,Boolean,Function],default:void 0,validator:le=>isFunction$2(le)?!le():!le}}),useEmptyValues=(le,oe)=>{const ie=getCurrentInstance()?inject(emptyValuesContextKey,ref({})):ref({}),ue=computed(()=>le.emptyValues||ie.value.emptyValues||DEFAULT_EMPTY_VALUES),de=computed(()=>isFunction$2(le.valueOnClear)?le.valueOnClear():le.valueOnClear!==void 0?le.valueOnClear:isFunction$2(ie.value.valueOnClear)?ie.value.valueOnClear():ie.value.valueOnClear!==void 0?ie.value.valueOnClear:oe!==void 0?oe:DEFAULT_VALUE_ON_CLEAR),he=pe=>ue.value.includes(pe);return ue.value.includes(de.value),{emptyValues:ue,valueOnClear:de,isEmptyValue:he}},ariaProps=buildProps({ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical","undefined"]},ariaControls:String}),useAriaProps=le=>pick(ariaProps,le),configProviderContextKey=Symbol(),globalConfig=ref();function useGlobalConfig(le,oe=void 0){const ie=getCurrentInstance()?inject(configProviderContextKey,globalConfig):globalConfig;return le?computed(()=>{var ue,de;return(de=(ue=ie.value)==null?void 0:ue[le])!=null?de:oe}):ie}function useGlobalComponentSettings(le,oe){const ie=useGlobalConfig(),ue=useNamespace(le,computed(()=>{var _e;return((_e=ie.value)==null?void 0:_e.namespace)||defaultNamespace})),de=useLocale(computed(()=>{var _e;return(_e=ie.value)==null?void 0:_e.locale})),he=useZIndex(computed(()=>{var _e;return((_e=ie.value)==null?void 0:_e.zIndex)||defaultInitialZIndex})),pe=computed(()=>{var _e;return unref(oe)||((_e=ie.value)==null?void 0:_e.size)||""});return provideGlobalConfig(computed(()=>unref(ie)||{})),{ns:ue,locale:de,zIndex:he,size:pe}}const provideGlobalConfig=(le,oe,ie=!1)=>{var ue;const de=!!getCurrentInstance(),he=de?useGlobalConfig():void 0,pe=(ue=oe==null?void 0:oe.provide)!=null?ue:de?provide:void 0;if(!pe)return;const _e=computed(()=>{const Ce=unref(le);return he!=null&&he.value?mergeConfig(he.value,Ce):Ce});return pe(configProviderContextKey,_e),pe(localeContextKey,computed(()=>_e.value.locale)),pe(namespaceContextKey,computed(()=>_e.value.namespace)),pe(zIndexContextKey,computed(()=>_e.value.zIndex)),pe(SIZE_INJECTION_KEY,{size:computed(()=>_e.value.size||"")}),pe(emptyValuesContextKey,computed(()=>({emptyValues:_e.value.emptyValues,valueOnClear:_e.value.valueOnClear}))),(ie||!globalConfig.value)&&(globalConfig.value=_e.value),_e},mergeConfig=(le,oe)=>{const ie=[...new Set([...keysOf(le),...keysOf(oe)])],ue={};for(const de of ie)ue[de]=oe[de]!==void 0?oe[de]:le[de];return ue},configProviderProps=buildProps({a11y:{type:Boolean,default:!0},locale:{type:definePropType(Object)},size:useSizeProp,button:{type:definePropType(Object)},experimentalFeatures:{type:definePropType(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:definePropType(Object)},zIndex:Number,namespace:{type:String,default:"el"},...useEmptyValuesProps}),messageConfig={},ConfigProvider=defineComponent({name:"ElConfigProvider",props:configProviderProps,setup(le,{slots:oe}){watch(()=>le.message,ue=>{Object.assign(messageConfig,ue??{})},{immediate:!0,deep:!0});const ie=provideGlobalConfig(le);return()=>renderSlot(oe,"default",{config:ie==null?void 0:ie.value})}}),ElConfigProvider=withInstall(ConfigProvider),version$1="2.8.4",makeInstaller=(le=[])=>({version:version$1,install:(ie,ue)=>{ie[INSTALLED_KEY]||(ie[INSTALLED_KEY]=!0,le.forEach(de=>ie.use(de)),ue&&provideGlobalConfig(ue,ie,!0))}}),affixProps=buildProps({zIndex:{type:definePropType([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),affixEmits={scroll:({scrollTop:le,fixed:oe})=>isNumber(le)&&isBoolean(oe),[CHANGE_EVENT]:le=>isBoolean(le)};var _export_sfc$1=(le,oe)=>{const ie=le.__vccOpts||le;for(const[ue,de]of oe)ie[ue]=de;return ie};const COMPONENT_NAME$n="ElAffix",__default__$1O=defineComponent({name:COMPONENT_NAME$n}),_sfc_main$2K=defineComponent({...__default__$1O,props:affixProps,emits:affixEmits,setup(le,{expose:oe,emit:ie}){const ue=le,de=useNamespace("affix"),he=shallowRef(),pe=shallowRef(),_e=shallowRef(),{height:Ce}=useWindowSize(),{height:xe,width:Ie,top:$e,bottom:Ne,update:Oe}=useElementBounding(pe,{windowScroll:!1}),Fe=useElementBounding(he),Ve=ref(!1),ze=ref(0),Ue=ref(0),Pt=computed(()=>({height:Ve.value?`${xe.value}px`:"",width:Ve.value?`${Ie.value}px`:""})),qe=computed(()=>{if(!Ve.value)return{};const At=ue.offset?addUnit(ue.offset):0;return{height:`${xe.value}px`,width:`${Ie.value}px`,top:ue.position==="top"?At:"",bottom:ue.position==="bottom"?At:"",transform:Ue.value?`translateY(${Ue.value}px)`:"",zIndex:ue.zIndex}}),Et=()=>{if(!_e.value)return;ze.value=_e.value instanceof Window?document.documentElement.scrollTop:_e.value.scrollTop||0;const{position:At,target:Dt,offset:Lt}=ue,jt=Lt+xe.value;if(At==="top")if(Dt){const _n=Fe.bottom.value-jt;Ve.value=Lt>$e.value&&Fe.bottom.value>0,Ue.value=_n<0?_n:0}else Ve.value=Lt>$e.value;else if(Dt){const _n=Ce.value-Fe.top.value-jt;Ve.value=Ce.value-Lt<Ne.value&&Ce.value>Fe.top.value,Ue.value=_n<0?-_n:0}else Ve.value=Ce.value-Lt<Ne.value},kt=()=>{Oe(),ie("scroll",{scrollTop:ze.value,fixed:Ve.value})};return watch(Ve,At=>ie("change",At)),onMounted(()=>{var At;ue.target?(he.value=(At=document.querySelector(ue.target))!=null?At:void 0,he.value||throwError(COMPONENT_NAME$n,`Target does not exist: ${ue.target}`)):he.value=document.documentElement,_e.value=getScrollContainer(pe.value,!0),Oe()}),useEventListener(_e,"scroll",kt),watchEffect(Et),oe({update:Et,updateRoot:Oe}),(At,Dt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:pe,class:normalizeClass(unref(de).b()),style:normalizeStyle(unref(Pt))},[createBaseVNode("div",{class:normalizeClass({[unref(de).m("fixed")]:Ve.value}),style:normalizeStyle(unref(qe))},[renderSlot(At.$slots,"default")],6)],6))}});var Affix=_export_sfc$1(_sfc_main$2K,[["__file","affix.vue"]]);const ElAffix=withInstall(Affix),iconProps=buildProps({size:{type:definePropType([Number,String])},color:{type:String}}),__default__$1N=defineComponent({name:"ElIcon",inheritAttrs:!1}),_sfc_main$2J=defineComponent({...__default__$1N,props:iconProps,setup(le){const oe=le,ie=useNamespace("icon"),ue=computed(()=>{const{size:de,color:he}=oe;return!de&&!he?{}:{fontSize:isUndefined(de)?void 0:addUnit(de),"--color":he}});return(de,he)=>(openBlock(),createElementBlock("i",mergeProps({class:unref(ie).b(),style:unref(ue)},de.$attrs),[renderSlot(de.$slots,"default")],16))}});var Icon=_export_sfc$1(_sfc_main$2J,[["__file","icon.vue"]]);const ElIcon=withInstall(Icon),alertEffects=["light","dark"],alertProps=buildProps({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:keysOf(TypeComponentsMap),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:alertEffects,default:"light"}}),alertEmits={close:le=>le instanceof MouseEvent},__default__$1M=defineComponent({name:"ElAlert"}),_sfc_main$2I=defineComponent({...__default__$1M,props:alertProps,emits:alertEmits,setup(le,{emit:oe}){const ie=le,{Close:ue}=TypeComponents,de=useSlots(),he=useNamespace("alert"),pe=ref(!0),_e=computed(()=>TypeComponentsMap[ie.type]),Ce=computed(()=>[he.e("icon"),{[he.is("big")]:!!ie.description||!!de.default}]),xe=computed(()=>({"with-description":ie.description||de.default})),Ie=$e=>{pe.value=!1,oe("close",$e)};return($e,Ne)=>(openBlock(),createBlock(Transition,{name:unref(he).b("fade"),persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{class:normalizeClass([unref(he).b(),unref(he).m($e.type),unref(he).is("center",$e.center),unref(he).is($e.effect)]),role:"alert"},[$e.showIcon&&unref(_e)?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(Ce))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(_e))))]),_:1},8,["class"])):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(he).e("content"))},[$e.title||$e.$slots.title?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass([unref(he).e("title"),unref(xe)])},[renderSlot($e.$slots,"title",{},()=>[createTextVNode(toDisplayString($e.title),1)])],2)):createCommentVNode("v-if",!0),$e.$slots.default||$e.description?(openBlock(),createElementBlock("p",{key:1,class:normalizeClass(unref(he).e("description"))},[renderSlot($e.$slots,"default",{},()=>[createTextVNode(toDisplayString($e.description),1)])],2)):createCommentVNode("v-if",!0),$e.closable?(openBlock(),createElementBlock(Fragment,{key:2},[$e.closeText?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass([unref(he).e("close-btn"),unref(he).is("customed")]),onClick:Ie},toDisplayString($e.closeText),3)):(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass(unref(he).e("close-btn")),onClick:Ie},{default:withCtx(()=>[createVNode(unref(ue))]),_:1},8,["class"]))],64)):createCommentVNode("v-if",!0)],2)],2),[[vShow,pe.value]])]),_:3},8,["name"]))}});var Alert=_export_sfc$1(_sfc_main$2I,[["__file","alert.vue"]]);const ElAlert=withInstall(Alert),formContextKey=Symbol("formContextKey"),formItemContextKey=Symbol("formItemContextKey"),useFormSize=(le,oe={})=>{const ie=ref(void 0),ue=oe.prop?ie:useProp("size"),de=oe.global?ie:useGlobalSize(),he=oe.form?{size:void 0}:inject(formContextKey,void 0),pe=oe.formItem?{size:void 0}:inject(formItemContextKey,void 0);return computed(()=>ue.value||unref(le)||(pe==null?void 0:pe.size)||(he==null?void 0:he.size)||de.value||"")},useFormDisabled=le=>{const oe=useProp("disabled"),ie=inject(formContextKey,void 0);return computed(()=>oe.value||unref(le)||(ie==null?void 0:ie.disabled)||!1)},useFormItem=()=>{const le=inject(formContextKey,void 0),oe=inject(formItemContextKey,void 0);return{form:le,formItem:oe}},useFormItemInputId=(le,{formItemContext:oe,disableIdGeneration:ie,disableIdManagement:ue})=>{ie||(ie=ref(!1)),ue||(ue=ref(!1));const de=ref();let he;const pe=computed(()=>{var _e;return!!(!(le.label||le.ariaLabel)&&oe&&oe.inputIds&&((_e=oe.inputIds)==null?void 0:_e.length)<=1)});return onMounted(()=>{he=watch([toRef(le,"id"),ie],([_e,Ce])=>{const xe=_e??(Ce?void 0:useId().value);xe!==de.value&&(oe!=null&&oe.removeInputId&&(de.value&&oe.removeInputId(de.value),!(ue!=null&&ue.value)&&!Ce&&xe&&oe.addInputId(xe)),de.value=xe)},{immediate:!0})}),onUnmounted(()=>{he&&he(),oe!=null&&oe.removeInputId&&de.value&&oe.removeInputId(de.value)}),{isLabeledByFormItem:pe,inputId:de}},formMetaProps=buildProps({size:{type:String,values:componentSizes},disabled:Boolean}),formProps=buildProps({...formMetaProps,model:Object,rules:{type:definePropType(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),formEmits={validate:(le,oe,ie)=>(isArray$3(le)||isString$1(le))&&isBoolean(oe)&&isString$1(ie)};function useFormLabelWidth(){const le=ref([]),oe=computed(()=>{if(!le.value.length)return"0";const he=Math.max(...le.value);return he?`${he}px`:""});function ie(he){const pe=le.value.indexOf(he);return pe===-1&&oe.value,pe}function ue(he,pe){if(he&&pe){const _e=ie(pe);le.value.splice(_e,1,he)}else he&&le.value.push(he)}function de(he){const pe=ie(he);pe>-1&&le.value.splice(pe,1)}return{autoLabelWidth:oe,registerLabelWidth:ue,deregisterLabelWidth:de}}const filterFields=(le,oe)=>{const ie=castArray$1(oe);return ie.length>0?le.filter(ue=>ue.prop&&ie.includes(ue.prop)):le},COMPONENT_NAME$m="ElForm",__default__$1L=defineComponent({name:COMPONENT_NAME$m}),_sfc_main$2H=defineComponent({...__default__$1L,props:formProps,emits:formEmits,setup(le,{expose:oe,emit:ie}){const ue=le,de=[],he=useFormSize(),pe=useNamespace("form"),_e=computed(()=>{const{labelPosition:qe,inline:Et}=ue;return[pe.b(),pe.m(he.value||"default"),{[pe.m(`label-${qe}`)]:qe,[pe.m("inline")]:Et}]}),Ce=qe=>de.find(Et=>Et.prop===qe),xe=qe=>{de.push(qe)},Ie=qe=>{qe.prop&&de.splice(de.indexOf(qe),1)},$e=(qe=[])=>{ue.model&&filterFields(de,qe).forEach(Et=>Et.resetField())},Ne=(qe=[])=>{filterFields(de,qe).forEach(Et=>Et.clearValidate())},Oe=computed(()=>!!ue.model),Fe=qe=>{if(de.length===0)return[];const Et=filterFields(de,qe);return Et.length?Et:[]},Ve=async qe=>Ue(void 0,qe),ze=async(qe=[])=>{if(!Oe.value)return!1;const Et=Fe(qe);if(Et.length===0)return!0;let kt={};for(const At of Et)try{await At.validate("")}catch(Dt){kt={...kt,...Dt}}return Object.keys(kt).length===0?!0:Promise.reject(kt)},Ue=async(qe=[],Et)=>{const kt=!isFunction$2(Et);try{const At=await ze(qe);return At===!0&&await(Et==null?void 0:Et(At)),At}catch(At){if(At instanceof Error)throw At;const Dt=At;return ue.scrollToError&&Pt(Object.keys(Dt)[0]),await(Et==null?void 0:Et(!1,Dt)),kt&&Promise.reject(Dt)}},Pt=qe=>{var Et;const kt=filterFields(de,qe)[0];kt&&((Et=kt.$el)==null||Et.scrollIntoView(ue.scrollIntoViewOptions))};return watch(()=>ue.rules,()=>{ue.validateOnRuleChange&&Ve().catch(qe=>void 0)},{deep:!0}),provide(formContextKey,reactive({...toRefs(ue),emit:ie,resetFields:$e,clearValidate:Ne,validateField:Ue,getField:Ce,addField:xe,removeField:Ie,...useFormLabelWidth()})),oe({validate:Ve,validateField:Ue,resetFields:$e,clearValidate:Ne,scrollToField:Pt,fields:de}),(qe,Et)=>(openBlock(),createElementBlock("form",{class:normalizeClass(unref(_e))},[renderSlot(qe.$slots,"default")],2))}});var Form=_export_sfc$1(_sfc_main$2H,[["__file","form.vue"]]),define_process_env_default={};function _extends(){return _extends=Object.assign?Object.assign.bind():function(le){for(var oe=1;oe<arguments.length;oe++){var ie=arguments[oe];for(var ue in ie)Object.prototype.hasOwnProperty.call(ie,ue)&&(le[ue]=ie[ue])}return le},_extends.apply(this,arguments)}function _inheritsLoose$1(le,oe){le.prototype=Object.create(oe.prototype),le.prototype.constructor=le,_setPrototypeOf$1(le,oe)}function _getPrototypeOf(le){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ie){return ie.__proto__||Object.getPrototypeOf(ie)},_getPrototypeOf(le)}function _setPrototypeOf$1(le,oe){return _setPrototypeOf$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ue,de){return ue.__proto__=de,ue},_setPrototypeOf$1(le,oe)}function _isNativeReflectConstruct$1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _construct$1(le,oe,ie){return _isNativeReflectConstruct$1()?_construct$1=Reflect.construct.bind():_construct$1=function(de,he,pe){var _e=[null];_e.push.apply(_e,he);var Ce=Function.bind.apply(de,_e),xe=new Ce;return pe&&_setPrototypeOf$1(xe,pe.prototype),xe},_construct$1.apply(null,arguments)}function _isNativeFunction(le){return Function.toString.call(le).indexOf("[native code]")!==-1}function _wrapNativeSuper(le){var oe=typeof Map=="function"?new Map:void 0;return _wrapNativeSuper=function(ue){if(ue===null||!_isNativeFunction(ue))return ue;if(typeof ue!="function")throw new TypeError("Super expression must either be null or a function");if(typeof oe<"u"){if(oe.has(ue))return oe.get(ue);oe.set(ue,de)}function de(){return _construct$1(ue,arguments,_getPrototypeOf(this).constructor)}return de.prototype=Object.create(ue.prototype,{constructor:{value:de,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf$1(de,ue)},_wrapNativeSuper(le)}var formatRegExp=/%[sdj%]/g,warning=function(){};typeof process<"u";function convertFieldsError(le){if(!le||!le.length)return null;var oe={};return le.forEach(function(ie){var ue=ie.field;oe[ue]=oe[ue]||[],oe[ue].push(ie)}),oe}function format(le){for(var oe=arguments.length,ie=new Array(oe>1?oe-1:0),ue=1;ue<oe;ue++)ie[ue-1]=arguments[ue];var de=0,he=ie.length;if(typeof le=="function")return le.apply(null,ie);if(typeof le=="string"){var pe=le.replace(formatRegExp,function(_e){if(_e==="%%")return"%";if(de>=he)return _e;switch(_e){case"%s":return String(ie[de++]);case"%d":return Number(ie[de++]);case"%j":try{return JSON.stringify(ie[de++])}catch{return"[Circular]"}break;default:return _e}});return pe}return le}function isNativeStringType(le){return le==="string"||le==="url"||le==="hex"||le==="email"||le==="date"||le==="pattern"}function isEmptyValue(le,oe){return!!(le==null||oe==="array"&&Array.isArray(le)&&!le.length||isNativeStringType(oe)&&typeof le=="string"&&!le)}function asyncParallelArray(le,oe,ie){var ue=[],de=0,he=le.length;function pe(_e){ue.push.apply(ue,_e||[]),de++,de===he&&ie(ue)}le.forEach(function(_e){oe(_e,pe)})}function asyncSerialArray(le,oe,ie){var ue=0,de=le.length;function he(pe){if(pe&&pe.length){ie(pe);return}var _e=ue;ue=ue+1,_e<de?oe(le[_e],he):ie([])}he([])}function flattenObjArr(le){var oe=[];return Object.keys(le).forEach(function(ie){oe.push.apply(oe,le[ie]||[])}),oe}var AsyncValidationError=function(le){_inheritsLoose$1(oe,le);function oe(ie,ue){var de;return de=le.call(this,"Async Validation Error")||this,de.errors=ie,de.fields=ue,de}return oe}(_wrapNativeSuper(Error));function asyncMap(le,oe,ie,ue,de){if(oe.first){var he=new Promise(function(Ne,Oe){var Fe=function(Ue){return ue(Ue),Ue.length?Oe(new AsyncValidationError(Ue,convertFieldsError(Ue))):Ne(de)},Ve=flattenObjArr(le);asyncSerialArray(Ve,ie,Fe)});return he.catch(function(Ne){return Ne}),he}var pe=oe.firstFields===!0?Object.keys(le):oe.firstFields||[],_e=Object.keys(le),Ce=_e.length,xe=0,Ie=[],$e=new Promise(function(Ne,Oe){var Fe=function(ze){if(Ie.push.apply(Ie,ze),xe++,xe===Ce)return ue(Ie),Ie.length?Oe(new AsyncValidationError(Ie,convertFieldsError(Ie))):Ne(de)};_e.length||(ue(Ie),Ne(de)),_e.forEach(function(Ve){var ze=le[Ve];pe.indexOf(Ve)!==-1?asyncSerialArray(ze,ie,Fe):asyncParallelArray(ze,ie,Fe)})});return $e.catch(function(Ne){return Ne}),$e}function isErrorObj(le){return!!(le&&le.message!==void 0)}function getValue(le,oe){for(var ie=le,ue=0;ue<oe.length;ue++){if(ie==null)return ie;ie=ie[oe[ue]]}return ie}function complementError(le,oe){return function(ie){var ue;return le.fullFields?ue=getValue(oe,le.fullFields):ue=oe[ie.field||le.fullField],isErrorObj(ie)?(ie.field=ie.field||le.fullField,ie.fieldValue=ue,ie):{message:typeof ie=="function"?ie():ie,fieldValue:ue,field:ie.field||le.fullField}}}function deepMerge(le,oe){if(oe){for(var ie in oe)if(oe.hasOwnProperty(ie)){var ue=oe[ie];typeof ue=="object"&&typeof le[ie]=="object"?le[ie]=_extends({},le[ie],ue):le[ie]=ue}}return le}var required$1=function(oe,ie,ue,de,he,pe){oe.required&&(!ue.hasOwnProperty(oe.field)||isEmptyValue(ie,pe||oe.type))&&de.push(format(he.messages.required,oe.fullField))},whitespace=function(oe,ie,ue,de,he){(/^\s+$/.test(ie)||ie==="")&&de.push(format(he.messages.whitespace,oe.fullField))},urlReg,getUrlRegex=function(){if(urlReg)return urlReg;var le="[a-fA-F\\d:]",oe=function(Et){return Et&&Et.includeBoundaries?"(?:(?<=\\s|^)(?="+le+")|(?<="+le+")(?=\\s|$))":""},ie="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",ue="[a-fA-F\\d]{1,4}",de=(`
(?:
(?:`+ue+":){7}(?:"+ue+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+ue+":){6}(?:"+ie+"|:"+ue+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+ue+":){5}(?::"+ie+"|(?::"+ue+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+ue+":){4}(?:(?::"+ue+"){0,1}:"+ie+"|(?::"+ue+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+ue+":){3}(?:(?::"+ue+"){0,2}:"+ie+"|(?::"+ue+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+ue+":){2}(?:(?::"+ue+"){0,3}:"+ie+"|(?::"+ue+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+ue+":){1}(?:(?::"+ue+"){0,4}:"+ie+"|(?::"+ue+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+ue+"){0,5}:"+ie+"|(?::"+ue+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),he=new RegExp("(?:^"+ie+"$)|(?:^"+de+"$)"),pe=new RegExp("^"+ie+"$"),_e=new RegExp("^"+de+"$"),Ce=function(Et){return Et&&Et.exact?he:new RegExp("(?:"+oe(Et)+ie+oe(Et)+")|(?:"+oe(Et)+de+oe(Et)+")","g")};Ce.v4=function(qe){return qe&&qe.exact?pe:new RegExp(""+oe(qe)+ie+oe(qe),"g")},Ce.v6=function(qe){return qe&&qe.exact?_e:new RegExp(""+oe(qe)+de+oe(qe),"g")};var xe="(?:(?:[a-z]+:)?//)",Ie="(?:\\S+(?::\\S*)?@)?",$e=Ce.v4().source,Ne=Ce.v6().source,Oe="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",Fe="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",Ve="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",ze="(?::\\d{2,5})?",Ue='(?:[/?#][^\\s"]*)?',Pt="(?:"+xe+"|www\\.)"+Ie+"(?:localhost|"+$e+"|"+Ne+"|"+Oe+Fe+Ve+")"+ze+Ue;return urlReg=new RegExp("(?:^"+Pt+"$)","i"),urlReg},pattern$2={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},types={integer:function(oe){return types.number(oe)&&parseInt(oe,10)===oe},float:function(oe){return types.number(oe)&&!types.integer(oe)},array:function(oe){return Array.isArray(oe)},regexp:function(oe){if(oe instanceof RegExp)return!0;try{return!!new RegExp(oe)}catch{return!1}},date:function(oe){return typeof oe.getTime=="function"&&typeof oe.getMonth=="function"&&typeof oe.getYear=="function"&&!isNaN(oe.getTime())},number:function(oe){return isNaN(oe)?!1:typeof oe=="number"},object:function(oe){return typeof oe=="object"&&!types.array(oe)},method:function(oe){return typeof oe=="function"},email:function(oe){return typeof oe=="string"&&oe.length<=320&&!!oe.match(pattern$2.email)},url:function(oe){return typeof oe=="string"&&oe.length<=2048&&!!oe.match(getUrlRegex())},hex:function(oe){return typeof oe=="string"&&!!oe.match(pattern$2.hex)}},type$1=function(oe,ie,ue,de,he){if(oe.required&&ie===void 0){required$1(oe,ie,ue,de,he);return}var pe=["integer","float","array","regexp","object","method","email","number","date","url","hex"],_e=oe.type;pe.indexOf(_e)>-1?types[_e](ie)||de.push(format(he.messages.types[_e],oe.fullField,oe.type)):_e&&typeof ie!==oe.type&&de.push(format(he.messages.types[_e],oe.fullField,oe.type))},range=function(oe,ie,ue,de,he){var pe=typeof oe.len=="number",_e=typeof oe.min=="number",Ce=typeof oe.max=="number",xe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ie=ie,$e=null,Ne=typeof ie=="number",Oe=typeof ie=="string",Fe=Array.isArray(ie);if(Ne?$e="number":Oe?$e="string":Fe&&($e="array"),!$e)return!1;Fe&&(Ie=ie.length),Oe&&(Ie=ie.replace(xe,"_").length),pe?Ie!==oe.len&&de.push(format(he.messages[$e].len,oe.fullField,oe.len)):_e&&!Ce&&Ie<oe.min?de.push(format(he.messages[$e].min,oe.fullField,oe.min)):Ce&&!_e&&Ie>oe.max?de.push(format(he.messages[$e].max,oe.fullField,oe.max)):_e&&Ce&&(Ie<oe.min||Ie>oe.max)&&de.push(format(he.messages[$e].range,oe.fullField,oe.min,oe.max))},ENUM$1="enum",enumerable$1=function(oe,ie,ue,de,he){oe[ENUM$1]=Array.isArray(oe[ENUM$1])?oe[ENUM$1]:[],oe[ENUM$1].indexOf(ie)===-1&&de.push(format(he.messages[ENUM$1],oe.fullField,oe[ENUM$1].join(", ")))},pattern$1=function(oe,ie,ue,de,he){if(oe.pattern){if(oe.pattern instanceof RegExp)oe.pattern.lastIndex=0,oe.pattern.test(ie)||de.push(format(he.messages.pattern.mismatch,oe.fullField,ie,oe.pattern));else if(typeof oe.pattern=="string"){var pe=new RegExp(oe.pattern);pe.test(ie)||de.push(format(he.messages.pattern.mismatch,oe.fullField,ie,oe.pattern))}}},rules={required:required$1,whitespace,type:type$1,range,enum:enumerable$1,pattern:pattern$1},string=function(oe,ie,ue,de,he){var pe=[],_e=oe.required||!oe.required&&de.hasOwnProperty(oe.field);if(_e){if(isEmptyValue(ie,"string")&&!oe.required)return ue();rules.required(oe,ie,de,pe,he,"string"),isEmptyValue(ie,"string")||(rules.type(oe,ie,de,pe,he),rules.range(oe,ie,de,pe,he),rules.pattern(oe,ie,de,pe,he),oe.whitespace===!0&&rules.whitespace(oe,ie,de,pe,he))}ue(pe)},method2=function(oe,ie,ue,de,he){var pe=[],_e=oe.required||!oe.required&&de.hasOwnProperty(oe.field);if(_e){if(isEmptyValue(ie)&&!oe.required)return ue();rules.required(oe,ie,de,pe,he),ie!==void 0&&rules.type(oe,ie,de,pe,he)}ue(pe)},number2=function(oe,ie,ue,de,he){var pe=[],_e=oe.required||!oe.required&&de.hasOwnProperty(oe.field);if(_e){if(ie===""&&(ie=void 0),isEmptyValue(ie)&&!oe.required)return ue();rules.required(oe,ie,de,pe,he),ie!==void 0&&(rules.type(oe,ie,de,pe,he),rules.range(oe,ie,de,pe,he))}ue(pe)},_boolean=function(oe,ie,ue,de,he){var pe=[],_e=oe.required||!oe.required&&de.hasOwnProperty(oe.field);if(_e){if(isEmptyValue(ie)&&!oe.required)return ue();rules.required(oe,ie,de,pe,he),ie!==void 0&&rules.type(oe,ie,de,pe,he)}ue(pe)},regexp2=function(oe,ie,ue,de,he){var pe=[],_e=oe.required||!oe.required&&de.hasOwnProperty(oe.field);if(_e){if(isEmptyValue(ie)&&!oe.required)return ue();rules.required(oe,ie,de,pe,he),isEmptyValue(ie)||rules.type(oe,ie,de,pe,he)}ue(pe)},integer2=function(oe,ie,ue,de,he){var pe=[],_e=oe.required||!oe.required&&de.hasOwnProperty(oe.field);if(_e){if(isEmptyValue(ie)&&!oe.required)return ue();rules.required(oe,ie,de,pe,he),ie!==void 0&&(rules.type(oe,ie,de,pe,he),rules.range(oe,ie,de,pe,he))}ue(pe)},floatFn=function(oe,ie,ue,de,he){var pe=[],_e=oe.required||!oe.required&&de.hasOwnProperty(oe.field);if(_e){if(isEmptyValue(ie)&&!oe.required)return ue();rules.required(oe,ie,de,pe,he),ie!==void 0&&(rules.type(oe,ie,de,pe,he),rules.range(oe,ie,de,pe,he))}ue(pe)},array2=function(oe,ie,ue,de,he){var pe=[],_e=oe.required||!oe.required&&de.hasOwnProperty(oe.field);if(_e){if(ie==null&&!oe.required)return ue();rules.required(oe,ie,de,pe,he,"array"),ie!=null&&(rules.type(oe,ie,de,pe,he),rules.range(oe,ie,de,pe,he))}ue(pe)},object2=function(oe,ie,ue,de,he){var pe=[],_e=oe.required||!oe.required&&de.hasOwnProperty(oe.field);if(_e){if(isEmptyValue(ie)&&!oe.required)return ue();rules.required(oe,ie,de,pe,he),ie!==void 0&&rules.type(oe,ie,de,pe,he)}ue(pe)},ENUM="enum",enumerable2=function(oe,ie,ue,de,he){var pe=[],_e=oe.required||!oe.required&&de.hasOwnProperty(oe.field);if(_e){if(isEmptyValue(ie)&&!oe.required)return ue();rules.required(oe,ie,de,pe,he),ie!==void 0&&rules[ENUM](oe,ie,de,pe,he)}ue(pe)},pattern2=function(oe,ie,ue,de,he){var pe=[],_e=oe.required||!oe.required&&de.hasOwnProperty(oe.field);if(_e){if(isEmptyValue(ie,"string")&&!oe.required)return ue();rules.required(oe,ie,de,pe,he),isEmptyValue(ie,"string")||rules.pattern(oe,ie,de,pe,he)}ue(pe)},date2=function(oe,ie,ue,de,he){var pe=[],_e=oe.required||!oe.required&&de.hasOwnProperty(oe.field);if(_e){if(isEmptyValue(ie,"date")&&!oe.required)return ue();if(rules.required(oe,ie,de,pe,he),!isEmptyValue(ie,"date")){var Ce;ie instanceof Date?Ce=ie:Ce=new Date(ie),rules.type(oe,Ce,de,pe,he),Ce&&rules.range(oe,Ce.getTime(),de,pe,he)}}ue(pe)},required2=function(oe,ie,ue,de,he){var pe=[],_e=Array.isArray(ie)?"array":typeof ie;rules.required(oe,ie,de,pe,he,_e),ue(pe)},type2=function(oe,ie,ue,de,he){var pe=oe.type,_e=[],Ce=oe.required||!oe.required&&de.hasOwnProperty(oe.field);if(Ce){if(isEmptyValue(ie,pe)&&!oe.required)return ue();rules.required(oe,ie,de,_e,he,pe),isEmptyValue(ie,pe)||rules.type(oe,ie,de,_e,he)}ue(_e)},any=function(oe,ie,ue,de,he){var pe=[],_e=oe.required||!oe.required&&de.hasOwnProperty(oe.field);if(_e){if(isEmptyValue(ie)&&!oe.required)return ue();rules.required(oe,ie,de,pe,he)}ue(pe)},validators={string,method:method2,number:number2,boolean:_boolean,regexp:regexp2,integer:integer2,float:floatFn,array:array2,object:object2,enum:enumerable2,pattern:pattern2,date:date2,url:type2,hex:type2,email:type2,required:required2,any};function newMessages(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var oe=JSON.parse(JSON.stringify(this));return oe.clone=this.clone,oe}}}var messages=newMessages(),Schema=function(){function le(ie){this.rules=null,this._messages=messages,this.define(ie)}var oe=le.prototype;return oe.define=function(ue){var de=this;if(!ue)throw new Error("Cannot configure a schema with no rules");if(typeof ue!="object"||Array.isArray(ue))throw new Error("Rules must be an object");this.rules={},Object.keys(ue).forEach(function(he){var pe=ue[he];de.rules[he]=Array.isArray(pe)?pe:[pe]})},oe.messages=function(ue){return ue&&(this._messages=deepMerge(newMessages(),ue)),this._messages},oe.validate=function(ue,de,he){var pe=this;de===void 0&&(de={}),he===void 0&&(he=function(){});var _e=ue,Ce=de,xe=he;if(typeof Ce=="function"&&(xe=Ce,Ce={}),!this.rules||Object.keys(this.rules).length===0)return xe&&xe(null,_e),Promise.resolve(_e);function Ie(Ve){var ze=[],Ue={};function Pt(Et){if(Array.isArray(Et)){var kt;ze=(kt=ze).concat.apply(kt,Et)}else ze.push(Et)}for(var qe=0;qe<Ve.length;qe++)Pt(Ve[qe]);ze.length?(Ue=convertFieldsError(ze),xe(ze,Ue)):xe(null,_e)}if(Ce.messages){var $e=this.messages();$e===messages&&($e=newMessages()),deepMerge($e,Ce.messages),Ce.messages=$e}else Ce.messages=this.messages();var Ne={},Oe=Ce.keys||Object.keys(this.rules);Oe.forEach(function(Ve){var ze=pe.rules[Ve],Ue=_e[Ve];ze.forEach(function(Pt){var qe=Pt;typeof qe.transform=="function"&&(_e===ue&&(_e=_extends({},_e)),Ue=_e[Ve]=qe.transform(Ue)),typeof qe=="function"?qe={validator:qe}:qe=_extends({},qe),qe.validator=pe.getValidationMethod(qe),qe.validator&&(qe.field=Ve,qe.fullField=qe.fullField||Ve,qe.type=pe.getType(qe),Ne[Ve]=Ne[Ve]||[],Ne[Ve].push({rule:qe,value:Ue,source:_e,field:Ve}))})});var Fe={};return asyncMap(Ne,Ce,function(Ve,ze){var Ue=Ve.rule,Pt=(Ue.type==="object"||Ue.type==="array")&&(typeof Ue.fields=="object"||typeof Ue.defaultField=="object");Pt=Pt&&(Ue.required||!Ue.required&&Ve.value),Ue.field=Ve.field;function qe(At,Dt){return _extends({},Dt,{fullField:Ue.fullField+"."+At,fullFields:Ue.fullFields?[].concat(Ue.fullFields,[At]):[At]})}function Et(At){At===void 0&&(At=[]);var Dt=Array.isArray(At)?At:[At];!Ce.suppressWarning&&Dt.length&&le.warning("async-validator:",Dt),Dt.length&&Ue.message!==void 0&&(Dt=[].concat(Ue.message));var Lt=Dt.map(complementError(Ue,_e));if(Ce.first&&Lt.length)return Fe[Ue.field]=1,ze(Lt);if(!Pt)ze(Lt);else{if(Ue.required&&!Ve.value)return Ue.message!==void 0?Lt=[].concat(Ue.message).map(complementError(Ue,_e)):Ce.error&&(Lt=[Ce.error(Ue,format(Ce.messages.required,Ue.field))]),ze(Lt);var jt={};Ue.defaultField&&Object.keys(Ve.value).map(function(vn){jt[vn]=Ue.defaultField}),jt=_extends({},jt,Ve.rule.fields);var _n={};Object.keys(jt).forEach(function(vn){var Tn=jt[vn],$n=Array.isArray(Tn)?Tn:[Tn];_n[vn]=$n.map(qe.bind(null,vn))});var bn=new le(_n);bn.messages(Ce.messages),Ve.rule.options&&(Ve.rule.options.messages=Ce.messages,Ve.rule.options.error=Ce.error),bn.validate(Ve.value,Ve.rule.options||Ce,function(vn){var Tn=[];Lt&&Lt.length&&Tn.push.apply(Tn,Lt),vn&&vn.length&&Tn.push.apply(Tn,vn),ze(Tn.length?Tn:null)})}}var kt;if(Ue.asyncValidator)kt=Ue.asyncValidator(Ue,Ve.value,Et,Ve.source,Ce);else if(Ue.validator){try{kt=Ue.validator(Ue,Ve.value,Et,Ve.source,Ce)}catch(At){console.error==null,Ce.suppressValidatorError||setTimeout(function(){throw At},0),Et(At.message)}kt===!0?Et():kt===!1?Et(typeof Ue.message=="function"?Ue.message(Ue.fullField||Ue.field):Ue.message||(Ue.fullField||Ue.field)+" fails"):kt instanceof Array?Et(kt):kt instanceof Error&&Et(kt.message)}kt&&kt.then&&kt.then(function(){return Et()},function(At){return Et(At)})},function(Ve){Ie(Ve)},_e)},oe.getType=function(ue){if(ue.type===void 0&&ue.pattern instanceof RegExp&&(ue.type="pattern"),typeof ue.validator!="function"&&ue.type&&!validators.hasOwnProperty(ue.type))throw new Error(format("Unknown rule type %s",ue.type));return ue.type||"string"},oe.getValidationMethod=function(ue){if(typeof ue.validator=="function")return ue.validator;var de=Object.keys(ue),he=de.indexOf("message");return he!==-1&&de.splice(he,1),de.length===1&&de[0]==="required"?validators.required:validators[this.getType(ue)]||void 0},le}();Schema.register=function(oe,ie){if(typeof ie!="function")throw new Error("Cannot register a validator by type, validator is not a function");validators[oe]=ie};Schema.warning=warning;Schema.messages=messages;Schema.validators=validators;const formItemValidateStates=["","error","validating","success"],formItemProps=buildProps({label:String,labelWidth:{type:[String,Number],default:""},labelPosition:{type:String,values:["left","right","top",""],default:""},prop:{type:definePropType([String,Array])},required:{type:Boolean,default:void 0},rules:{type:definePropType([Object,Array])},error:String,validateStatus:{type:String,values:formItemValidateStates},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:componentSizes}}),COMPONENT_NAME$l="ElLabelWrap";var FormLabelWrap=defineComponent({name:COMPONENT_NAME$l,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(le,{slots:oe}){const ie=inject(formContextKey,void 0),ue=inject(formItemContextKey);ue||throwError(COMPONENT_NAME$l,"usage: <el-form-item><label-wrap /></el-form-item>");const de=useNamespace("form"),he=ref(),pe=ref(0),_e=()=>{var Ie;if((Ie=he.value)!=null&&Ie.firstElementChild){const $e=window.getComputedStyle(he.value.firstElementChild).width;return Math.ceil(Number.parseFloat($e))}else return 0},Ce=(Ie="update")=>{nextTick(()=>{oe.default&&le.isAutoWidth&&(Ie==="update"?pe.value=_e():Ie==="remove"&&(ie==null||ie.deregisterLabelWidth(pe.value)))})},xe=()=>Ce("update");return onMounted(()=>{xe()}),onBeforeUnmount(()=>{Ce("remove")}),onUpdated(()=>xe()),watch(pe,(Ie,$e)=>{le.updateAll&&(ie==null||ie.registerLabelWidth(Ie,$e))}),useResizeObserver(computed(()=>{var Ie,$e;return($e=(Ie=he.value)==null?void 0:Ie.firstElementChild)!=null?$e:null}),xe),()=>{var Ie,$e;if(!oe)return null;const{isAutoWidth:Ne}=le;if(Ne){const Oe=ie==null?void 0:ie.autoLabelWidth,Fe=ue==null?void 0:ue.hasLabel,Ve={};if(Fe&&Oe&&Oe!=="auto"){const ze=Math.max(0,Number.parseInt(Oe,10)-pe.value),Pt=(ue.labelPosition||ie.labelPosition)==="left"?"marginRight":"marginLeft";ze&&(Ve[Pt]=`${ze}px`)}return createVNode("div",{ref:he,class:[de.be("item","label-wrap")],style:Ve},[(Ie=oe.default)==null?void 0:Ie.call(oe)])}else return createVNode(Fragment,{ref:he},[($e=oe.default)==null?void 0:$e.call(oe)])}}});const __default__$1K=defineComponent({name:"ElFormItem"}),_sfc_main$2G=defineComponent({...__default__$1K,props:formItemProps,setup(le,{expose:oe}){const ie=le,ue=useSlots(),de=inject(formContextKey,void 0),he=inject(formItemContextKey,void 0),pe=useFormSize(void 0,{formItem:!1}),_e=useNamespace("form-item"),Ce=useId().value,xe=ref([]),Ie=ref(""),$e=refDebounced(Ie,100),Ne=ref(""),Oe=ref();let Fe,Ve=!1;const ze=computed(()=>ie.labelPosition||(de==null?void 0:de.labelPosition)),Ue=computed(()=>{if(ze.value==="top")return{};const Jn=addUnit(ie.labelWidth||(de==null?void 0:de.labelWidth)||"");return Jn?{width:Jn}:{}}),Pt=computed(()=>{if(ze.value==="top"||de!=null&&de.inline)return{};if(!ie.label&&!ie.labelWidth&&_n)return{};const Jn=addUnit(ie.labelWidth||(de==null?void 0:de.labelWidth)||"");return!ie.label&&!ue.label?{marginLeft:Jn}:{}}),qe=computed(()=>[_e.b(),_e.m(pe.value),_e.is("error",Ie.value==="error"),_e.is("validating",Ie.value==="validating"),_e.is("success",Ie.value==="success"),_e.is("required",wn.value||ie.required),_e.is("no-asterisk",de==null?void 0:de.hideRequiredAsterisk),(de==null?void 0:de.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[_e.m("feedback")]:de==null?void 0:de.statusIcon,[_e.m(`label-${ze.value}`)]:ze.value}]),Et=computed(()=>isBoolean(ie.inlineMessage)?ie.inlineMessage:(de==null?void 0:de.inlineMessage)||!1),kt=computed(()=>[_e.e("error"),{[_e.em("error","inline")]:Et.value}]),At=computed(()=>ie.prop?isString$1(ie.prop)?ie.prop:ie.prop.join("."):""),Dt=computed(()=>!!(ie.label||ue.label)),Lt=computed(()=>ie.for||(xe.value.length===1?xe.value[0]:void 0)),jt=computed(()=>!Lt.value&&Dt.value),_n=!!he,bn=computed(()=>{const Jn=de==null?void 0:de.model;if(!(!Jn||!ie.prop))return getProp(Jn,ie.prop).value}),vn=computed(()=>{const{required:Jn}=ie,Qn=[];ie.rules&&Qn.push(...castArray$1(ie.rules));const _r=de==null?void 0:de.rules;if(_r&&ie.prop){const Zn=getProp(_r,ie.prop).value;Zn&&Qn.push(...castArray$1(Zn))}if(Jn!==void 0){const Zn=Qn.map((Gn,Nn)=>[Gn,Nn]).filter(([Gn])=>Object.keys(Gn).includes("required"));if(Zn.length>0)for(const[Gn,Nn]of Zn)Gn.required!==Jn&&(Qn[Nn]={...Gn,required:Jn});else Qn.push({required:Jn})}return Qn}),Tn=computed(()=>vn.value.length>0),$n=Jn=>vn.value.filter(_r=>!_r.trigger||!Jn?!0:Array.isArray(_r.trigger)?_r.trigger.includes(Jn):_r.trigger===Jn).map(({trigger:_r,...Zn})=>Zn),wn=computed(()=>vn.value.some(Jn=>Jn.required)),Cn=computed(()=>{var Jn;return $e.value==="error"&&ie.showMessage&&((Jn=de==null?void 0:de.showMessage)!=null?Jn:!0)}),Sn=computed(()=>`${ie.label||""}${(de==null?void 0:de.labelSuffix)||""}`),In=Jn=>{Ie.value=Jn},En=Jn=>{var Qn,_r;const{errors:Zn,fields:Gn}=Jn;In("error"),Ne.value=Zn?(_r=(Qn=Zn==null?void 0:Zn[0])==null?void 0:Qn.message)!=null?_r:`${ie.prop} is required`:"",de==null||de.emit("validate",ie.prop,!1,Ne.value)},xn=()=>{In("success"),de==null||de.emit("validate",ie.prop,!0,"")},kn=async Jn=>{const Qn=At.value;return new Schema({[Qn]:Jn}).validate({[Qn]:bn.value},{firstFields:!0}).then(()=>(xn(),!0)).catch(Zn=>(En(Zn),Promise.reject(Zn)))},On=async(Jn,Qn)=>{if(Ve||!ie.prop)return!1;const _r=isFunction$2(Qn);if(!Tn.value)return Qn==null||Qn(!1),!1;const Zn=$n(Jn);return Zn.length===0?(Qn==null||Qn(!0),!0):(In("validating"),kn(Zn).then(()=>(Qn==null||Qn(!0),!0)).catch(Gn=>{const{fields:Nn}=Gn;return Qn==null||Qn(!1,Nn),_r?!1:Promise.reject(Nn)}))},Mn=()=>{In(""),Ne.value="",Ve=!1},Un=async()=>{const Jn=de==null?void 0:de.model;if(!Jn||!ie.prop)return;const Qn=getProp(Jn,ie.prop);Ve=!0,Qn.value=clone$1(Fe),await nextTick(),Mn(),Ve=!1},zn=Jn=>{xe.value.includes(Jn)||xe.value.push(Jn)},Hn=Jn=>{xe.value=xe.value.filter(Qn=>Qn!==Jn)};watch(()=>ie.error,Jn=>{Ne.value=Jn||"",In(Jn?"error":"")},{immediate:!0}),watch(()=>ie.validateStatus,Jn=>In(Jn||""));const Rn=reactive({...toRefs(ie),$el:Oe,size:pe,validateState:Ie,labelId:Ce,inputIds:xe,isGroup:jt,hasLabel:Dt,fieldValue:bn,addInputId:zn,removeInputId:Hn,resetField:Un,clearValidate:Mn,validate:On});return provide(formItemContextKey,Rn),onMounted(()=>{ie.prop&&(de==null||de.addField(Rn),Fe=clone$1(bn.value))}),onBeforeUnmount(()=>{de==null||de.removeField(Rn)}),oe({size:pe,validateMessage:Ne,validateState:Ie,validate:On,clearValidate:Mn,resetField:Un}),(Jn,Qn)=>{var _r;return openBlock(),createElementBlock("div",{ref_key:"formItemRef",ref:Oe,class:normalizeClass(unref(qe)),role:unref(jt)?"group":void 0,"aria-labelledby":unref(jt)?unref(Ce):void 0},[createVNode(unref(FormLabelWrap),{"is-auto-width":unref(Ue).width==="auto","update-all":((_r=unref(de))==null?void 0:_r.labelWidth)==="auto"},{default:withCtx(()=>[unref(Dt)?(openBlock(),createBlock(resolveDynamicComponent(unref(Lt)?"label":"div"),{key:0,id:unref(Ce),for:unref(Lt),class:normalizeClass(unref(_e).e("label")),style:normalizeStyle(unref(Ue))},{default:withCtx(()=>[renderSlot(Jn.$slots,"label",{label:unref(Sn)},()=>[createTextVNode(toDisplayString(unref(Sn)),1)])]),_:3},8,["id","for","class","style"])):createCommentVNode("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),createBaseVNode("div",{class:normalizeClass(unref(_e).e("content")),style:normalizeStyle(unref(Pt))},[renderSlot(Jn.$slots,"default"),createVNode(TransitionGroup,{name:`${unref(_e).namespace.value}-zoom-in-top`},{default:withCtx(()=>[unref(Cn)?renderSlot(Jn.$slots,"error",{key:0,error:Ne.value},()=>[createBaseVNode("div",{class:normalizeClass(unref(kt))},toDisplayString(Ne.value),3)]):createCommentVNode("v-if",!0)]),_:3},8,["name"])],6)],10,["role","aria-labelledby"])}}});var FormItem=_export_sfc$1(_sfc_main$2G,[["__file","form-item.vue"]]);const ElForm=withInstall(Form,{FormItem}),ElFormItem=withNoopInstall(FormItem);let hiddenTextarea;const HIDDEN_STYLE=`
  height:0 !important;
  visibility:hidden !important;
  ${isFirefox()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,CONTEXT_STYLE=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function calculateNodeStyling(le){const oe=window.getComputedStyle(le),ie=oe.getPropertyValue("box-sizing"),ue=Number.parseFloat(oe.getPropertyValue("padding-bottom"))+Number.parseFloat(oe.getPropertyValue("padding-top")),de=Number.parseFloat(oe.getPropertyValue("border-bottom-width"))+Number.parseFloat(oe.getPropertyValue("border-top-width"));return{contextStyle:CONTEXT_STYLE.map(pe=>`${pe}:${oe.getPropertyValue(pe)}`).join(";"),paddingSize:ue,borderSize:de,boxSizing:ie}}function calcTextareaHeight(le,oe=1,ie){var ue;hiddenTextarea||(hiddenTextarea=document.createElement("textarea"),document.body.appendChild(hiddenTextarea));const{paddingSize:de,borderSize:he,boxSizing:pe,contextStyle:_e}=calculateNodeStyling(le);hiddenTextarea.setAttribute("style",`${_e};${HIDDEN_STYLE}`),hiddenTextarea.value=le.value||le.placeholder||"";let Ce=hiddenTextarea.scrollHeight;const xe={};pe==="border-box"?Ce=Ce+he:pe==="content-box"&&(Ce=Ce-de),hiddenTextarea.value="";const Ie=hiddenTextarea.scrollHeight-de;if(isNumber(oe)){let $e=Ie*oe;pe==="border-box"&&($e=$e+de+he),Ce=Math.max($e,Ce),xe.minHeight=`${$e}px`}if(isNumber(ie)){let $e=Ie*ie;pe==="border-box"&&($e=$e+de+he),Ce=Math.min($e,Ce)}return xe.height=`${Ce}px`,(ue=hiddenTextarea.parentNode)==null||ue.removeChild(hiddenTextarea),hiddenTextarea=void 0,xe}const inputProps=buildProps({id:{type:String,default:void 0},size:useSizeProp,disabled:Boolean,modelValue:{type:definePropType([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:definePropType([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:iconPropType},prefixIcon:{type:iconPropType},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:definePropType([Object,Array,String]),default:()=>mutable({})},autofocus:Boolean,rows:{type:Number,default:2},...useAriaProps(["ariaLabel"])}),inputEmits={[UPDATE_MODEL_EVENT]:le=>isString$1(le),input:le=>isString$1(le),change:le=>isString$1(le),focus:le=>le instanceof FocusEvent,blur:le=>le instanceof FocusEvent,clear:()=>!0,mouseleave:le=>le instanceof MouseEvent,mouseenter:le=>le instanceof MouseEvent,keydown:le=>le instanceof Event,compositionstart:le=>le instanceof CompositionEvent,compositionupdate:le=>le instanceof CompositionEvent,compositionend:le=>le instanceof CompositionEvent},__default__$1J=defineComponent({name:"ElInput",inheritAttrs:!1}),_sfc_main$2F=defineComponent({...__default__$1J,props:inputProps,emits:inputEmits,setup(le,{expose:oe,emit:ie}){const ue=le,de=useAttrs$1(),he=useSlots(),pe=computed(()=>{const tr={};return ue.containerRole==="combobox"&&(tr["aria-haspopup"]=de["aria-haspopup"],tr["aria-owns"]=de["aria-owns"],tr["aria-expanded"]=de["aria-expanded"]),tr}),_e=computed(()=>[ue.type==="textarea"?ze.b():Ve.b(),Ve.m(Oe.value),Ve.is("disabled",Fe.value),Ve.is("exceed",Mn.value),{[Ve.b("group")]:he.prepend||he.append,[Ve.m("prefix")]:he.prefix||ue.prefixIcon,[Ve.m("suffix")]:he.suffix||ue.suffixIcon||ue.clearable||ue.showPassword,[Ve.bm("suffix","password-clear")]:En.value&&xn.value,[Ve.b("hidden")]:ue.type==="hidden"},de.class]),Ce=computed(()=>[Ve.e("wrapper"),Ve.is("focus",jt.value)]),xe=useAttrs({excludeKeys:computed(()=>Object.keys(pe.value))}),{form:Ie,formItem:$e}=useFormItem(),{inputId:Ne}=useFormItemInputId(ue,{formItemContext:$e}),Oe=useFormSize(),Fe=useFormDisabled(),Ve=useNamespace("input"),ze=useNamespace("textarea"),Ue=shallowRef(),Pt=shallowRef(),qe=ref(!1),Et=ref(!1),kt=ref(),At=shallowRef(ue.inputStyle),Dt=computed(()=>Ue.value||Pt.value),{wrapperRef:Lt,isFocused:jt,handleFocus:_n,handleBlur:bn}=useFocusController(Dt,{beforeFocus(){return Fe.value},afterBlur(){var tr;ue.validateEvent&&((tr=$e==null?void 0:$e.validate)==null||tr.call($e,"blur").catch(Sr=>void 0))}}),vn=computed(()=>{var tr;return(tr=Ie==null?void 0:Ie.statusIcon)!=null?tr:!1}),Tn=computed(()=>($e==null?void 0:$e.validateState)||""),$n=computed(()=>Tn.value&&ValidateComponentsMap[Tn.value]),wn=computed(()=>Et.value?view_default:hide_default),Cn=computed(()=>[de.style]),Sn=computed(()=>[ue.inputStyle,At.value,{resize:ue.resize}]),In=computed(()=>isNil(ue.modelValue)?"":String(ue.modelValue)),En=computed(()=>ue.clearable&&!Fe.value&&!ue.readonly&&!!In.value&&(jt.value||qe.value)),xn=computed(()=>ue.showPassword&&!Fe.value&&!ue.readonly&&!!In.value&&(!!In.value||jt.value)),kn=computed(()=>ue.showWordLimit&&!!ue.maxlength&&(ue.type==="text"||ue.type==="textarea")&&!Fe.value&&!ue.readonly&&!ue.showPassword),On=computed(()=>In.value.length),Mn=computed(()=>!!kn.value&&On.value>Number(ue.maxlength)),Un=computed(()=>!!he.suffix||!!ue.suffixIcon||En.value||ue.showPassword||kn.value||!!Tn.value&&vn.value),[zn,Hn]=useCursor(Ue);useResizeObserver(Pt,tr=>{if(Qn(),!kn.value||ue.resize!=="both")return;const Sr=tr[0],{width:Dr}=Sr.contentRect;kt.value={right:`calc(100% - ${Dr+15+6}px)`}});const Rn=()=>{const{type:tr,autosize:Sr}=ue;if(!(!isClient||tr!=="textarea"||!Pt.value))if(Sr){const Dr=isObject$d(Sr)?Sr.minRows:void 0,Lr=isObject$d(Sr)?Sr.maxRows:void 0,Ur=calcTextareaHeight(Pt.value,Dr,Lr);At.value={overflowY:"hidden",...Ur},nextTick(()=>{Pt.value.offsetHeight,At.value=Ur})}else At.value={minHeight:calcTextareaHeight(Pt.value).minHeight}},Qn=(tr=>{let Sr=!1;return()=>{var Dr;if(Sr||!ue.autosize)return;((Dr=Pt.value)==null?void 0:Dr.offsetParent)===null||(tr(),Sr=!0)}})(Rn),_r=()=>{const tr=Dt.value,Sr=ue.formatter?ue.formatter(In.value):In.value;!tr||tr.value===Sr||(tr.value=Sr)},Zn=async tr=>{zn();let{value:Sr}=tr.target;if(ue.formatter&&(Sr=ue.parser?ue.parser(Sr):Sr),!Nn.value){if(Sr===In.value){_r();return}ie(UPDATE_MODEL_EVENT,Sr),ie("input",Sr),await nextTick(),_r(),Hn()}},Gn=tr=>{ie("change",tr.target.value)},{isComposing:Nn,handleCompositionStart:Dn,handleCompositionUpdate:jn,handleCompositionEnd:ir}=useComposition({emit:ie,afterComposition:Zn}),Fn=()=>{Et.value=!Et.value,Kn()},Kn=async()=>{var tr;await nextTick(),(tr=Dt.value)==null||tr.focus()},mr=()=>{var tr;return(tr=Dt.value)==null?void 0:tr.blur()},yr=tr=>{qe.value=!1,ie("mouseleave",tr)},Cr=tr=>{qe.value=!0,ie("mouseenter",tr)},br=tr=>{ie("keydown",tr)},Pr=()=>{var tr;(tr=Dt.value)==null||tr.select()},gr=()=>{ie(UPDATE_MODEL_EVENT,""),ie("change",""),ie("clear"),ie("input","")};return watch(()=>ue.modelValue,()=>{var tr;nextTick(()=>Rn()),ue.validateEvent&&((tr=$e==null?void 0:$e.validate)==null||tr.call($e,"change").catch(Sr=>void 0))}),watch(In,()=>_r()),watch(()=>ue.type,async()=>{await nextTick(),_r(),Rn()}),onMounted(()=>{!ue.formatter&&ue.parser,_r(),nextTick(Rn)}),oe({input:Ue,textarea:Pt,ref:Dt,textareaStyle:Sn,autosize:toRef(ue,"autosize"),isComposing:Nn,focus:Kn,blur:mr,select:Pr,clear:gr,resizeTextarea:Rn}),(tr,Sr)=>(openBlock(),createElementBlock("div",mergeProps(unref(pe),{class:[unref(_e),{[unref(Ve).bm("group","append")]:tr.$slots.append,[unref(Ve).bm("group","prepend")]:tr.$slots.prepend}],style:unref(Cn),role:tr.containerRole,onMouseenter:Cr,onMouseleave:yr}),[createCommentVNode(" input "),tr.type!=="textarea"?(openBlock(),createElementBlock(Fragment,{key:0},[createCommentVNode(" prepend slot "),tr.$slots.prepend?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(Ve).be("group","prepend"))},[renderSlot(tr.$slots,"prepend")],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{ref_key:"wrapperRef",ref:Lt,class:normalizeClass(unref(Ce))},[createCommentVNode(" prefix slot "),tr.$slots.prefix||tr.prefixIcon?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(Ve).e("prefix"))},[createBaseVNode("span",{class:normalizeClass(unref(Ve).e("prefix-inner"))},[renderSlot(tr.$slots,"prefix"),tr.prefixIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(Ve).e("icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(tr.prefixIcon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2)],2)):createCommentVNode("v-if",!0),createBaseVNode("input",mergeProps({id:unref(Ne),ref_key:"input",ref:Ue,class:unref(Ve).e("inner")},unref(xe),{minlength:tr.minlength,maxlength:tr.maxlength,type:tr.showPassword?Et.value?"text":"password":tr.type,disabled:unref(Fe),readonly:tr.readonly,autocomplete:tr.autocomplete,tabindex:tr.tabindex,"aria-label":tr.ariaLabel,placeholder:tr.placeholder,style:tr.inputStyle,form:tr.form,autofocus:tr.autofocus,onCompositionstart:unref(Dn),onCompositionupdate:unref(jn),onCompositionend:unref(ir),onInput:Zn,onChange:Gn,onKeydown:br}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","onCompositionstart","onCompositionupdate","onCompositionend"]),createCommentVNode(" suffix slot "),unref(Un)?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(Ve).e("suffix"))},[createBaseVNode("span",{class:normalizeClass(unref(Ve).e("suffix-inner"))},[!unref(En)||!unref(xn)||!unref(kn)?(openBlock(),createElementBlock(Fragment,{key:0},[renderSlot(tr.$slots,"suffix"),tr.suffixIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(Ve).e("icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(tr.suffixIcon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],64)):createCommentVNode("v-if",!0),unref(En)?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass([unref(Ve).e("icon"),unref(Ve).e("clear")]),onMousedown:withModifiers(unref(NOOP),["prevent"]),onClick:gr},{default:withCtx(()=>[createVNode(unref(circle_close_default))]),_:1},8,["class","onMousedown"])):createCommentVNode("v-if",!0),unref(xn)?(openBlock(),createBlock(unref(ElIcon),{key:2,class:normalizeClass([unref(Ve).e("icon"),unref(Ve).e("password")]),onClick:Fn},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(wn))))]),_:1},8,["class"])):createCommentVNode("v-if",!0),unref(kn)?(openBlock(),createElementBlock("span",{key:3,class:normalizeClass(unref(Ve).e("count"))},[createBaseVNode("span",{class:normalizeClass(unref(Ve).e("count-inner"))},toDisplayString(unref(On))+" / "+toDisplayString(tr.maxlength),3)],2)):createCommentVNode("v-if",!0),unref(Tn)&&unref($n)&&unref(vn)?(openBlock(),createBlock(unref(ElIcon),{key:4,class:normalizeClass([unref(Ve).e("icon"),unref(Ve).e("validateIcon"),unref(Ve).is("loading",unref(Tn)==="validating")])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref($n))))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2)],2)):createCommentVNode("v-if",!0)],2),createCommentVNode(" append slot "),tr.$slots.append?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(Ve).be("group","append"))},[renderSlot(tr.$slots,"append")],2)):createCommentVNode("v-if",!0)],64)):(openBlock(),createElementBlock(Fragment,{key:1},[createCommentVNode(" textarea "),createBaseVNode("textarea",mergeProps({id:unref(Ne),ref_key:"textarea",ref:Pt,class:[unref(ze).e("inner"),unref(Ve).is("focus",unref(jt))]},unref(xe),{minlength:tr.minlength,maxlength:tr.maxlength,tabindex:tr.tabindex,disabled:unref(Fe),readonly:tr.readonly,autocomplete:tr.autocomplete,style:unref(Sn),"aria-label":tr.ariaLabel,placeholder:tr.placeholder,form:tr.form,autofocus:tr.autofocus,rows:tr.rows,onCompositionstart:unref(Dn),onCompositionupdate:unref(jn),onCompositionend:unref(ir),onInput:Zn,onFocus:unref(_n),onBlur:unref(bn),onChange:Gn,onKeydown:br}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),unref(kn)?(openBlock(),createElementBlock("span",{key:0,style:normalizeStyle(kt.value),class:normalizeClass(unref(Ve).e("count"))},toDisplayString(unref(On))+" / "+toDisplayString(tr.maxlength),7)):createCommentVNode("v-if",!0)],64))],16,["role"]))}});var Input=_export_sfc$1(_sfc_main$2F,[["__file","input.vue"]]);const ElInput=withInstall(Input),GAP=4,BAR_MAP={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},renderThumbStyle$1=({move:le,size:oe,bar:ie})=>({[ie.size]:oe,transform:`translate${ie.axis}(${le}%)`}),scrollbarContextKey=Symbol("scrollbarContextKey"),thumbProps=buildProps({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),COMPONENT_NAME$k="Thumb",_sfc_main$2E=defineComponent({__name:"thumb",props:thumbProps,setup(le){const oe=le,ie=inject(scrollbarContextKey),ue=useNamespace("scrollbar");ie||throwError(COMPONENT_NAME$k,"can not inject scrollbar context");const de=ref(),he=ref(),pe=ref({}),_e=ref(!1);let Ce=!1,xe=!1,Ie=isClient?document.onselectstart:null;const $e=computed(()=>BAR_MAP[oe.vertical?"vertical":"horizontal"]),Ne=computed(()=>renderThumbStyle$1({size:oe.size,move:oe.move,bar:$e.value})),Oe=computed(()=>de.value[$e.value.offset]**2/ie.wrapElement[$e.value.scrollSize]/oe.ratio/he.value[$e.value.offset]),Fe=At=>{var Dt;if(At.stopPropagation(),At.ctrlKey||[1,2].includes(At.button))return;(Dt=window.getSelection())==null||Dt.removeAllRanges(),ze(At);const Lt=At.currentTarget;Lt&&(pe.value[$e.value.axis]=Lt[$e.value.offset]-(At[$e.value.client]-Lt.getBoundingClientRect()[$e.value.direction]))},Ve=At=>{if(!he.value||!de.value||!ie.wrapElement)return;const Dt=Math.abs(At.target.getBoundingClientRect()[$e.value.direction]-At[$e.value.client]),Lt=he.value[$e.value.offset]/2,jt=(Dt-Lt)*100*Oe.value/de.value[$e.value.offset];ie.wrapElement[$e.value.scroll]=jt*ie.wrapElement[$e.value.scrollSize]/100},ze=At=>{At.stopImmediatePropagation(),Ce=!0,document.addEventListener("mousemove",Ue),document.addEventListener("mouseup",Pt),Ie=document.onselectstart,document.onselectstart=()=>!1},Ue=At=>{if(!de.value||!he.value||Ce===!1)return;const Dt=pe.value[$e.value.axis];if(!Dt)return;const Lt=(de.value.getBoundingClientRect()[$e.value.direction]-At[$e.value.client])*-1,jt=he.value[$e.value.offset]-Dt,_n=(Lt-jt)*100*Oe.value/de.value[$e.value.offset];ie.wrapElement[$e.value.scroll]=_n*ie.wrapElement[$e.value.scrollSize]/100},Pt=()=>{Ce=!1,pe.value[$e.value.axis]=0,document.removeEventListener("mousemove",Ue),document.removeEventListener("mouseup",Pt),kt(),xe&&(_e.value=!1)},qe=()=>{xe=!1,_e.value=!!oe.size},Et=()=>{xe=!0,_e.value=Ce};onBeforeUnmount(()=>{kt(),document.removeEventListener("mouseup",Pt)});const kt=()=>{document.onselectstart!==Ie&&(document.onselectstart=Ie)};return useEventListener(toRef(ie,"scrollbarElement"),"mousemove",qe),useEventListener(toRef(ie,"scrollbarElement"),"mouseleave",Et),(At,Dt)=>(openBlock(),createBlock(Transition,{name:unref(ue).b("fade"),persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{ref_key:"instance",ref:de,class:normalizeClass([unref(ue).e("bar"),unref(ue).is(unref($e).key)]),onMousedown:Ve},[createBaseVNode("div",{ref_key:"thumb",ref:he,class:normalizeClass(unref(ue).e("thumb")),style:normalizeStyle(unref(Ne)),onMousedown:Fe},null,38)],34),[[vShow,At.always||_e.value]])]),_:1},8,["name"]))}});var Thumb=_export_sfc$1(_sfc_main$2E,[["__file","thumb.vue"]]);const barProps=buildProps({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),_sfc_main$2D=defineComponent({__name:"bar",props:barProps,setup(le,{expose:oe}){const ie=le,ue=inject(scrollbarContextKey),de=ref(0),he=ref(0),pe=ref(""),_e=ref(""),Ce=ref(1),xe=ref(1);return oe({handleScroll:Ne=>{if(Ne){const Oe=Ne.offsetHeight-GAP,Fe=Ne.offsetWidth-GAP;he.value=Ne.scrollTop*100/Oe*Ce.value,de.value=Ne.scrollLeft*100/Fe*xe.value}},update:()=>{const Ne=ue==null?void 0:ue.wrapElement;if(!Ne)return;const Oe=Ne.offsetHeight-GAP,Fe=Ne.offsetWidth-GAP,Ve=Oe**2/Ne.scrollHeight,ze=Fe**2/Ne.scrollWidth,Ue=Math.max(Ve,ie.minSize),Pt=Math.max(ze,ie.minSize);Ce.value=Ve/(Oe-Ve)/(Ue/(Oe-Ue)),xe.value=ze/(Fe-ze)/(Pt/(Fe-Pt)),_e.value=Ue+GAP<Oe?`${Ue}px`:"",pe.value=Pt+GAP<Fe?`${Pt}px`:""}}),(Ne,Oe)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(Thumb,{move:de.value,ratio:xe.value,size:pe.value,always:Ne.always},null,8,["move","ratio","size","always"]),createVNode(Thumb,{move:he.value,ratio:Ce.value,size:_e.value,vertical:"",always:Ne.always},null,8,["move","ratio","size","always"])],64))}});var Bar=_export_sfc$1(_sfc_main$2D,[["__file","bar.vue"]]);const scrollbarProps=buildProps({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:definePropType([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},tabindex:{type:[String,Number],default:void 0},id:String,role:String,...useAriaProps(["ariaLabel","ariaOrientation"])}),scrollbarEmits={scroll:({scrollTop:le,scrollLeft:oe})=>[le,oe].every(isNumber)},COMPONENT_NAME$j="ElScrollbar",__default__$1I=defineComponent({name:COMPONENT_NAME$j}),_sfc_main$2C=defineComponent({...__default__$1I,props:scrollbarProps,emits:scrollbarEmits,setup(le,{expose:oe,emit:ie}){const ue=le,de=useNamespace("scrollbar");let he,pe,_e=0,Ce=0;const xe=ref(),Ie=ref(),$e=ref(),Ne=ref(),Oe=computed(()=>{const kt={};return ue.height&&(kt.height=addUnit(ue.height)),ue.maxHeight&&(kt.maxHeight=addUnit(ue.maxHeight)),[ue.wrapStyle,kt]}),Fe=computed(()=>[ue.wrapClass,de.e("wrap"),{[de.em("wrap","hidden-default")]:!ue.native}]),Ve=computed(()=>[de.e("view"),ue.viewClass]),ze=()=>{var kt;Ie.value&&((kt=Ne.value)==null||kt.handleScroll(Ie.value),_e=Ie.value.scrollTop,Ce=Ie.value.scrollLeft,ie("scroll",{scrollTop:Ie.value.scrollTop,scrollLeft:Ie.value.scrollLeft}))};function Ue(kt,At){isObject$d(kt)?Ie.value.scrollTo(kt):isNumber(kt)&&isNumber(At)&&Ie.value.scrollTo(kt,At)}const Pt=kt=>{isNumber(kt)&&(Ie.value.scrollTop=kt)},qe=kt=>{isNumber(kt)&&(Ie.value.scrollLeft=kt)},Et=()=>{var kt;(kt=Ne.value)==null||kt.update()};return watch(()=>ue.noresize,kt=>{kt?(he==null||he(),pe==null||pe()):({stop:he}=useResizeObserver($e,Et),pe=useEventListener("resize",Et))},{immediate:!0}),watch(()=>[ue.maxHeight,ue.height],()=>{ue.native||nextTick(()=>{var kt;Et(),Ie.value&&((kt=Ne.value)==null||kt.handleScroll(Ie.value))})}),provide(scrollbarContextKey,reactive({scrollbarElement:xe,wrapElement:Ie})),onActivated(()=>{Ie.value&&(Ie.value.scrollTop=_e,Ie.value.scrollLeft=Ce)}),onMounted(()=>{ue.native||nextTick(()=>{Et()})}),onUpdated(()=>Et()),oe({wrapRef:Ie,update:Et,scrollTo:Ue,setScrollTop:Pt,setScrollLeft:qe,handleScroll:ze}),(kt,At)=>(openBlock(),createElementBlock("div",{ref_key:"scrollbarRef",ref:xe,class:normalizeClass(unref(de).b())},[createBaseVNode("div",{ref_key:"wrapRef",ref:Ie,class:normalizeClass(unref(Fe)),style:normalizeStyle(unref(Oe)),tabindex:kt.tabindex,onScroll:ze},[(openBlock(),createBlock(resolveDynamicComponent(kt.tag),{id:kt.id,ref_key:"resizeRef",ref:$e,class:normalizeClass(unref(Ve)),style:normalizeStyle(kt.viewStyle),role:kt.role,"aria-label":kt.ariaLabel,"aria-orientation":kt.ariaOrientation},{default:withCtx(()=>[renderSlot(kt.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],46,["tabindex"]),kt.native?createCommentVNode("v-if",!0):(openBlock(),createBlock(Bar,{key:0,ref_key:"barRef",ref:Ne,always:kt.always,"min-size":kt.minSize},null,8,["always","min-size"]))],2))}});var Scrollbar=_export_sfc$1(_sfc_main$2C,[["__file","scrollbar.vue"]]);const ElScrollbar=withInstall(Scrollbar),POPPER_INJECTION_KEY=Symbol("popper"),POPPER_CONTENT_INJECTION_KEY=Symbol("popperContent"),roleTypes=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],popperProps=buildProps({role:{type:String,values:roleTypes,default:"tooltip"}}),__default__$1H=defineComponent({name:"ElPopper",inheritAttrs:!1}),_sfc_main$2B=defineComponent({...__default__$1H,props:popperProps,setup(le,{expose:oe}){const ie=le,ue=ref(),de=ref(),he=ref(),pe=ref(),_e=computed(()=>ie.role),Ce={triggerRef:ue,popperInstanceRef:de,contentRef:he,referenceRef:pe,role:_e};return oe(Ce),provide(POPPER_INJECTION_KEY,Ce),(xe,Ie)=>renderSlot(xe.$slots,"default")}});var Popper=_export_sfc$1(_sfc_main$2B,[["__file","popper.vue"]]);const popperArrowProps=buildProps({arrowOffset:{type:Number,default:5}}),__default__$1G=defineComponent({name:"ElPopperArrow",inheritAttrs:!1}),_sfc_main$2A=defineComponent({...__default__$1G,props:popperArrowProps,setup(le,{expose:oe}){const ie=le,ue=useNamespace("popper"),{arrowOffset:de,arrowRef:he,arrowStyle:pe}=inject(POPPER_CONTENT_INJECTION_KEY,void 0);return watch(()=>ie.arrowOffset,_e=>{de.value=_e}),onBeforeUnmount(()=>{he.value=void 0}),oe({arrowRef:he}),(_e,Ce)=>(openBlock(),createElementBlock("span",{ref_key:"arrowRef",ref:he,class:normalizeClass(unref(ue).e("arrow")),style:normalizeStyle(unref(pe)),"data-popper-arrow":""},null,6))}});var ElPopperArrow=_export_sfc$1(_sfc_main$2A,[["__file","arrow.vue"]]);const NAME="ElOnlyChild",OnlyChild=defineComponent({name:NAME,setup(le,{slots:oe,attrs:ie}){var ue;const de=inject(FORWARD_REF_INJECTION_KEY),he=useForwardRefDirective((ue=de==null?void 0:de.setForwardRef)!=null?ue:NOOP);return()=>{var pe;const _e=(pe=oe.default)==null?void 0:pe.call(oe,ie);if(!_e||_e.length>1)return null;const Ce=findFirstLegitChild(_e);return Ce?withDirectives(cloneVNode(Ce,ie),[[he]]):null}}});function findFirstLegitChild(le){if(!le)return null;const oe=le;for(const ie of oe){if(isObject$d(ie))switch(ie.type){case Comment:continue;case Text$1:case"svg":return wrapTextContent(ie);case Fragment:return findFirstLegitChild(ie.children);default:return ie}return wrapTextContent(ie)}return null}function wrapTextContent(le){const oe=useNamespace("only-child");return createVNode("span",{class:oe.e("content")},[le])}const popperTriggerProps=buildProps({virtualRef:{type:definePropType(Object)},virtualTriggering:Boolean,onMouseenter:{type:definePropType(Function)},onMouseleave:{type:definePropType(Function)},onClick:{type:definePropType(Function)},onKeydown:{type:definePropType(Function)},onFocus:{type:definePropType(Function)},onBlur:{type:definePropType(Function)},onContextmenu:{type:definePropType(Function)},id:String,open:Boolean}),__default__$1F=defineComponent({name:"ElPopperTrigger",inheritAttrs:!1}),_sfc_main$2z=defineComponent({...__default__$1F,props:popperTriggerProps,setup(le,{expose:oe}){const ie=le,{role:ue,triggerRef:de}=inject(POPPER_INJECTION_KEY,void 0);useForwardRef(de);const he=computed(()=>_e.value?ie.id:void 0),pe=computed(()=>{if(ue&&ue.value==="tooltip")return ie.open&&ie.id?ie.id:void 0}),_e=computed(()=>{if(ue&&ue.value!=="tooltip")return ue.value}),Ce=computed(()=>_e.value?`${ie.open}`:void 0);let xe;const Ie=["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"];return onMounted(()=>{watch(()=>ie.virtualRef,$e=>{$e&&(de.value=unrefElement($e))},{immediate:!0}),watch(de,($e,Ne)=>{xe==null||xe(),xe=void 0,isElement$1($e)&&(Ie.forEach(Oe=>{var Fe;const Ve=ie[Oe];Ve&&($e.addEventListener(Oe.slice(2).toLowerCase(),Ve),(Fe=Ne==null?void 0:Ne.removeEventListener)==null||Fe.call(Ne,Oe.slice(2).toLowerCase(),Ve))}),xe=watch([he,pe,_e,Ce],Oe=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((Fe,Ve)=>{isNil(Oe[Ve])?$e.removeAttribute(Fe):$e.setAttribute(Fe,Oe[Ve])})},{immediate:!0})),isElement$1(Ne)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(Oe=>Ne.removeAttribute(Oe))},{immediate:!0})}),onBeforeUnmount(()=>{if(xe==null||xe(),xe=void 0,de.value&&isElement$1(de.value)){const $e=de.value;Ie.forEach(Ne=>{const Oe=ie[Ne];Oe&&$e.removeEventListener(Ne.slice(2).toLowerCase(),Oe)}),de.value=void 0}}),oe({triggerRef:de}),($e,Ne)=>$e.virtualTriggering?createCommentVNode("v-if",!0):(openBlock(),createBlock(unref(OnlyChild),mergeProps({key:0},$e.$attrs,{"aria-controls":unref(he),"aria-describedby":unref(pe),"aria-expanded":unref(Ce),"aria-haspopup":unref(_e)}),{default:withCtx(()=>[renderSlot($e.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var ElPopperTrigger=_export_sfc$1(_sfc_main$2z,[["__file","trigger.vue"]]);const FOCUS_AFTER_TRAPPED="focus-trap.focus-after-trapped",FOCUS_AFTER_RELEASED="focus-trap.focus-after-released",FOCUSOUT_PREVENTED="focus-trap.focusout-prevented",FOCUS_AFTER_TRAPPED_OPTS={cancelable:!0,bubbles:!1},FOCUSOUT_PREVENTED_OPTS={cancelable:!0,bubbles:!1},ON_TRAP_FOCUS_EVT="focusAfterTrapped",ON_RELEASE_FOCUS_EVT="focusAfterReleased",FOCUS_TRAP_INJECTION_KEY=Symbol("elFocusTrap"),focusReason=ref(),lastUserFocusTimestamp=ref(0),lastAutomatedFocusTimestamp=ref(0);let focusReasonUserCount=0;const obtainAllFocusableElements=le=>{const oe=[],ie=document.createTreeWalker(le,NodeFilter.SHOW_ELEMENT,{acceptNode:ue=>{const de=ue.tagName==="INPUT"&&ue.type==="hidden";return ue.disabled||ue.hidden||de?NodeFilter.FILTER_SKIP:ue.tabIndex>=0||ue===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;ie.nextNode();)oe.push(ie.currentNode);return oe},getVisibleElement=(le,oe)=>{for(const ie of le)if(!isHidden(ie,oe))return ie},isHidden=(le,oe)=>{if(getComputedStyle(le).visibility==="hidden")return!0;for(;le;){if(oe&&le===oe)return!1;if(getComputedStyle(le).display==="none")return!0;le=le.parentElement}return!1},getEdges=le=>{const oe=obtainAllFocusableElements(le),ie=getVisibleElement(oe,le),ue=getVisibleElement(oe.reverse(),le);return[ie,ue]},isSelectable=le=>le instanceof HTMLInputElement&&"select"in le,tryFocus=(le,oe)=>{if(le&&le.focus){const ie=document.activeElement;le.focus({preventScroll:!0}),lastAutomatedFocusTimestamp.value=window.performance.now(),le!==ie&&isSelectable(le)&&oe&&le.select()}};function removeFromStack(le,oe){const ie=[...le],ue=le.indexOf(oe);return ue!==-1&&ie.splice(ue,1),ie}const createFocusableStack=()=>{let le=[];return{push:ue=>{const de=le[0];de&&ue!==de&&de.pause(),le=removeFromStack(le,ue),le.unshift(ue)},remove:ue=>{var de,he;le=removeFromStack(le,ue),(he=(de=le[0])==null?void 0:de.resume)==null||he.call(de)}}},focusFirstDescendant=(le,oe=!1)=>{const ie=document.activeElement;for(const ue of le)if(tryFocus(ue,oe),document.activeElement!==ie)return},focusableStack=createFocusableStack(),isFocusCausedByUserEvent=()=>lastUserFocusTimestamp.value>lastAutomatedFocusTimestamp.value,notifyFocusReasonPointer=()=>{focusReason.value="pointer",lastUserFocusTimestamp.value=window.performance.now()},notifyFocusReasonKeydown=()=>{focusReason.value="keyboard",lastUserFocusTimestamp.value=window.performance.now()},useFocusReason=()=>(onMounted(()=>{focusReasonUserCount===0&&(document.addEventListener("mousedown",notifyFocusReasonPointer),document.addEventListener("touchstart",notifyFocusReasonPointer),document.addEventListener("keydown",notifyFocusReasonKeydown)),focusReasonUserCount++}),onBeforeUnmount(()=>{focusReasonUserCount--,focusReasonUserCount<=0&&(document.removeEventListener("mousedown",notifyFocusReasonPointer),document.removeEventListener("touchstart",notifyFocusReasonPointer),document.removeEventListener("keydown",notifyFocusReasonKeydown))}),{focusReason,lastUserFocusTimestamp,lastAutomatedFocusTimestamp}),createFocusOutPreventedEvent=le=>new CustomEvent(FOCUSOUT_PREVENTED,{...FOCUSOUT_PREVENTED_OPTS,detail:le}),_sfc_main$2y=defineComponent({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[ON_TRAP_FOCUS_EVT,ON_RELEASE_FOCUS_EVT,"focusin","focusout","focusout-prevented","release-requested"],setup(le,{emit:oe}){const ie=ref();let ue,de;const{focusReason:he}=useFocusReason();useEscapeKeydown(Fe=>{le.trapped&&!pe.paused&&oe("release-requested",Fe)});const pe={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},_e=Fe=>{if(!le.loop&&!le.trapped||pe.paused)return;const{key:Ve,altKey:ze,ctrlKey:Ue,metaKey:Pt,currentTarget:qe,shiftKey:Et}=Fe,{loop:kt}=le,At=Ve===EVENT_CODE.tab&&!ze&&!Ue&&!Pt,Dt=document.activeElement;if(At&&Dt){const Lt=qe,[jt,_n]=getEdges(Lt);if(jt&&_n){if(!Et&&Dt===_n){const vn=createFocusOutPreventedEvent({focusReason:he.value});oe("focusout-prevented",vn),vn.defaultPrevented||(Fe.preventDefault(),kt&&tryFocus(jt,!0))}else if(Et&&[jt,Lt].includes(Dt)){const vn=createFocusOutPreventedEvent({focusReason:he.value});oe("focusout-prevented",vn),vn.defaultPrevented||(Fe.preventDefault(),kt&&tryFocus(_n,!0))}}else if(Dt===Lt){const vn=createFocusOutPreventedEvent({focusReason:he.value});oe("focusout-prevented",vn),vn.defaultPrevented||Fe.preventDefault()}}};provide(FOCUS_TRAP_INJECTION_KEY,{focusTrapRef:ie,onKeydown:_e}),watch(()=>le.focusTrapEl,Fe=>{Fe&&(ie.value=Fe)},{immediate:!0}),watch([ie],([Fe],[Ve])=>{Fe&&(Fe.addEventListener("keydown",_e),Fe.addEventListener("focusin",Ie),Fe.addEventListener("focusout",$e)),Ve&&(Ve.removeEventListener("keydown",_e),Ve.removeEventListener("focusin",Ie),Ve.removeEventListener("focusout",$e))});const Ce=Fe=>{oe(ON_TRAP_FOCUS_EVT,Fe)},xe=Fe=>oe(ON_RELEASE_FOCUS_EVT,Fe),Ie=Fe=>{const Ve=unref(ie);if(!Ve)return;const ze=Fe.target,Ue=Fe.relatedTarget,Pt=ze&&Ve.contains(ze);le.trapped||Ue&&Ve.contains(Ue)||(ue=Ue),Pt&&oe("focusin",Fe),!pe.paused&&le.trapped&&(Pt?de=ze:tryFocus(de,!0))},$e=Fe=>{const Ve=unref(ie);if(!(pe.paused||!Ve))if(le.trapped){const ze=Fe.relatedTarget;!isNil(ze)&&!Ve.contains(ze)&&setTimeout(()=>{if(!pe.paused&&le.trapped){const Ue=createFocusOutPreventedEvent({focusReason:he.value});oe("focusout-prevented",Ue),Ue.defaultPrevented||tryFocus(de,!0)}},0)}else{const ze=Fe.target;ze&&Ve.contains(ze)||oe("focusout",Fe)}};async function Ne(){await nextTick();const Fe=unref(ie);if(Fe){focusableStack.push(pe);const Ve=Fe.contains(document.activeElement)?ue:document.activeElement;if(ue=Ve,!Fe.contains(Ve)){const Ue=new Event(FOCUS_AFTER_TRAPPED,FOCUS_AFTER_TRAPPED_OPTS);Fe.addEventListener(FOCUS_AFTER_TRAPPED,Ce),Fe.dispatchEvent(Ue),Ue.defaultPrevented||nextTick(()=>{let Pt=le.focusStartEl;isString$1(Pt)||(tryFocus(Pt),document.activeElement!==Pt&&(Pt="first")),Pt==="first"&&focusFirstDescendant(obtainAllFocusableElements(Fe),!0),(document.activeElement===Ve||Pt==="container")&&tryFocus(Fe)})}}}function Oe(){const Fe=unref(ie);if(Fe){Fe.removeEventListener(FOCUS_AFTER_TRAPPED,Ce);const Ve=new CustomEvent(FOCUS_AFTER_RELEASED,{...FOCUS_AFTER_TRAPPED_OPTS,detail:{focusReason:he.value}});Fe.addEventListener(FOCUS_AFTER_RELEASED,xe),Fe.dispatchEvent(Ve),!Ve.defaultPrevented&&(he.value=="keyboard"||!isFocusCausedByUserEvent()||Fe.contains(document.activeElement))&&tryFocus(ue??document.body),Fe.removeEventListener(FOCUS_AFTER_RELEASED,xe),focusableStack.remove(pe)}}return onMounted(()=>{le.trapped&&Ne(),watch(()=>le.trapped,Fe=>{Fe?Ne():Oe()})}),onBeforeUnmount(()=>{le.trapped&&Oe(),ie.value&&(ie.value.removeEventListener("keydown",_e),ie.value.removeEventListener("focusin",Ie),ie.value.removeEventListener("focusout",$e),ie.value=void 0)}),{onKeydown:_e}}});function _sfc_render$u(le,oe,ie,ue,de,he){return renderSlot(le.$slots,"default",{handleKeydown:le.onKeydown})}var ElFocusTrap=_export_sfc$1(_sfc_main$2y,[["render",_sfc_render$u],["__file","focus-trap.vue"]]);const POSITIONING_STRATEGIES=["fixed","absolute"],popperCoreConfigProps=buildProps({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:definePropType(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:Ee,default:"bottom"},popperOptions:{type:definePropType(Object),default:()=>({})},strategy:{type:String,values:POSITIONING_STRATEGIES,default:"absolute"}}),popperContentProps=buildProps({...popperCoreConfigProps,id:String,style:{type:definePropType([String,Array,Object])},className:{type:definePropType([String,Array,Object])},effect:{type:definePropType(String),default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:definePropType([String,Array,Object])},popperStyle:{type:definePropType([String,Array,Object])},referenceEl:{type:definePropType(Object)},triggerTargetEl:{type:definePropType(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},virtualTriggering:Boolean,zIndex:Number,...useAriaProps(["ariaLabel"])}),popperContentEmits={mouseenter:le=>le instanceof MouseEvent,mouseleave:le=>le instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},buildPopperOptions=(le,oe=[])=>{const{placement:ie,strategy:ue,popperOptions:de}=le,he={placement:ie,strategy:ue,...de,modifiers:[...genModifiers(le),...oe]};return deriveExtraModifiers(he,de==null?void 0:de.modifiers),he},unwrapMeasurableEl=le=>{if(isClient)return unrefElement(le)};function genModifiers(le){const{offset:oe,gpuAcceleration:ie,fallbackPlacements:ue}=le;return[{name:"offset",options:{offset:[0,oe??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:ue}},{name:"computeStyles",options:{gpuAcceleration:ie}}]}function deriveExtraModifiers(le,oe){oe&&(le.modifiers=[...le.modifiers,...oe??[]])}const DEFAULT_ARROW_OFFSET=0,usePopperContent=le=>{const{popperInstanceRef:oe,contentRef:ie,triggerRef:ue,role:de}=inject(POPPER_INJECTION_KEY,void 0),he=ref(),pe=ref(),_e=computed(()=>({name:"eventListeners",enabled:!!le.visible})),Ce=computed(()=>{var Ue;const Pt=unref(he),qe=(Ue=unref(pe))!=null?Ue:DEFAULT_ARROW_OFFSET;return{name:"arrow",enabled:!isUndefined$1(Pt),options:{element:Pt,padding:qe}}}),xe=computed(()=>({onFirstUpdate:()=>{Fe()},...buildPopperOptions(le,[unref(Ce),unref(_e)])})),Ie=computed(()=>unwrapMeasurableEl(le.referenceEl)||unref(ue)),{attributes:$e,state:Ne,styles:Oe,update:Fe,forceUpdate:Ve,instanceRef:ze}=usePopper(Ie,ie,xe);return watch(ze,Ue=>oe.value=Ue),onMounted(()=>{watch(()=>{var Ue;return(Ue=unref(Ie))==null?void 0:Ue.getBoundingClientRect()},()=>{Fe()})}),{attributes:$e,arrowRef:he,contentRef:ie,instanceRef:ze,state:Ne,styles:Oe,role:de,forceUpdate:Ve,update:Fe}},usePopperContentDOM=(le,{attributes:oe,styles:ie,role:ue})=>{const{nextZIndex:de}=useZIndex(),he=useNamespace("popper"),pe=computed(()=>unref(oe).popper),_e=ref(isNumber(le.zIndex)?le.zIndex:de()),Ce=computed(()=>[he.b(),he.is("pure",le.pure),he.is(le.effect),le.popperClass]),xe=computed(()=>[{zIndex:unref(_e)},unref(ie).popper,le.popperStyle||{}]),Ie=computed(()=>ue.value==="dialog"?"false":void 0),$e=computed(()=>unref(ie).arrow||{});return{ariaModal:Ie,arrowStyle:$e,contentAttrs:pe,contentClass:Ce,contentStyle:xe,contentZIndex:_e,updateZIndex:()=>{_e.value=isNumber(le.zIndex)?le.zIndex:de()}}},usePopperContentFocusTrap=(le,oe)=>{const ie=ref(!1),ue=ref();return{focusStartRef:ue,trapped:ie,onFocusAfterReleased:xe=>{var Ie;((Ie=xe.detail)==null?void 0:Ie.focusReason)!=="pointer"&&(ue.value="first",oe("blur"))},onFocusAfterTrapped:()=>{oe("focus")},onFocusInTrap:xe=>{le.visible&&!ie.value&&(xe.target&&(ue.value=xe.target),ie.value=!0)},onFocusoutPrevented:xe=>{le.trapping||(xe.detail.focusReason==="pointer"&&xe.preventDefault(),ie.value=!1)},onReleaseRequested:()=>{ie.value=!1,oe("close")}}},__default__$1E=defineComponent({name:"ElPopperContent"}),_sfc_main$2x=defineComponent({...__default__$1E,props:popperContentProps,emits:popperContentEmits,setup(le,{expose:oe,emit:ie}){const ue=le,{focusStartRef:de,trapped:he,onFocusAfterReleased:pe,onFocusAfterTrapped:_e,onFocusInTrap:Ce,onFocusoutPrevented:xe,onReleaseRequested:Ie}=usePopperContentFocusTrap(ue,ie),{attributes:$e,arrowRef:Ne,contentRef:Oe,styles:Fe,instanceRef:Ve,role:ze,update:Ue}=usePopperContent(ue),{ariaModal:Pt,arrowStyle:qe,contentAttrs:Et,contentClass:kt,contentStyle:At,updateZIndex:Dt}=usePopperContentDOM(ue,{styles:Fe,attributes:$e,role:ze}),Lt=inject(formItemContextKey,void 0),jt=ref();provide(POPPER_CONTENT_INJECTION_KEY,{arrowStyle:qe,arrowRef:Ne,arrowOffset:jt}),Lt&&provide(formItemContextKey,{...Lt,addInputId:NOOP,removeInputId:NOOP});let _n;const bn=(Tn=!0)=>{Ue(),Tn&&Dt()},vn=()=>{bn(!1),ue.visible&&ue.focusOnShow?he.value=!0:ue.visible===!1&&(he.value=!1)};return onMounted(()=>{watch(()=>ue.triggerTargetEl,(Tn,$n)=>{_n==null||_n(),_n=void 0;const wn=unref(Tn||Oe.value),Cn=unref($n||Oe.value);isElement$1(wn)&&(_n=watch([ze,()=>ue.ariaLabel,Pt,()=>ue.id],Sn=>{["role","aria-label","aria-modal","id"].forEach((In,En)=>{isNil(Sn[En])?wn.removeAttribute(In):wn.setAttribute(In,Sn[En])})},{immediate:!0})),Cn!==wn&&isElement$1(Cn)&&["role","aria-label","aria-modal","id"].forEach(Sn=>{Cn.removeAttribute(Sn)})},{immediate:!0}),watch(()=>ue.visible,vn,{immediate:!0})}),onBeforeUnmount(()=>{_n==null||_n(),_n=void 0}),oe({popperContentRef:Oe,popperInstanceRef:Ve,updatePopper:bn,contentStyle:At}),(Tn,$n)=>(openBlock(),createElementBlock("div",mergeProps({ref_key:"contentRef",ref:Oe},unref(Et),{style:unref(At),class:unref(kt),tabindex:"-1",onMouseenter:wn=>Tn.$emit("mouseenter",wn),onMouseleave:wn=>Tn.$emit("mouseleave",wn)}),[createVNode(unref(ElFocusTrap),{trapped:unref(he),"trap-on-focus-in":!0,"focus-trap-el":unref(Oe),"focus-start-el":unref(de),onFocusAfterTrapped:unref(_e),onFocusAfterReleased:unref(pe),onFocusin:unref(Ce),onFocusoutPrevented:unref(xe),onReleaseRequested:unref(Ie)},{default:withCtx(()=>[renderSlot(Tn.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16,["onMouseenter","onMouseleave"]))}});var ElPopperContent=_export_sfc$1(_sfc_main$2x,[["__file","content.vue"]]);const ElPopper=withInstall(Popper),TOOLTIP_INJECTION_KEY=Symbol("elTooltip"),useTooltipContentProps=buildProps({...useDelayedToggleProps,...popperContentProps,appendTo:{type:definePropType([String,Object])},content:{type:String,default:""},rawContent:Boolean,persistent:Boolean,visible:{type:definePropType(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean,...useAriaProps(["ariaLabel"])}),useTooltipTriggerProps=buildProps({...popperTriggerProps,disabled:Boolean,trigger:{type:definePropType([String,Array]),default:"hover"},triggerKeys:{type:definePropType(Array),default:()=>[EVENT_CODE.enter,EVENT_CODE.space]}}),{useModelToggleProps:useTooltipModelToggleProps,useModelToggleEmits:useTooltipModelToggleEmits,useModelToggle:useTooltipModelToggle}=createModelToggleComposable("visible"),useTooltipProps=buildProps({...popperProps,...useTooltipModelToggleProps,...useTooltipContentProps,...useTooltipTriggerProps,...popperArrowProps,showArrow:{type:Boolean,default:!0}}),tooltipEmits=[...useTooltipModelToggleEmits,"before-show","before-hide","show","hide","open","close"],isTriggerType=(le,oe)=>isArray$3(le)?le.includes(oe):le===oe,whenTrigger=(le,oe,ie)=>ue=>{isTriggerType(unref(le),oe)&&ie(ue)},__default__$1D=defineComponent({name:"ElTooltipTrigger"}),_sfc_main$2w=defineComponent({...__default__$1D,props:useTooltipTriggerProps,setup(le,{expose:oe}){const ie=le,ue=useNamespace("tooltip"),{controlled:de,id:he,open:pe,onOpen:_e,onClose:Ce,onToggle:xe}=inject(TOOLTIP_INJECTION_KEY,void 0),Ie=ref(null),$e=()=>{if(unref(de)||ie.disabled)return!0},Ne=toRef(ie,"trigger"),Oe=composeEventHandlers($e,whenTrigger(Ne,"hover",_e)),Fe=composeEventHandlers($e,whenTrigger(Ne,"hover",Ce)),Ve=composeEventHandlers($e,whenTrigger(Ne,"click",Et=>{Et.button===0&&xe(Et)})),ze=composeEventHandlers($e,whenTrigger(Ne,"focus",_e)),Ue=composeEventHandlers($e,whenTrigger(Ne,"focus",Ce)),Pt=composeEventHandlers($e,whenTrigger(Ne,"contextmenu",Et=>{Et.preventDefault(),xe(Et)})),qe=composeEventHandlers($e,Et=>{const{code:kt}=Et;ie.triggerKeys.includes(kt)&&(Et.preventDefault(),xe(Et))});return oe({triggerRef:Ie}),(Et,kt)=>(openBlock(),createBlock(unref(ElPopperTrigger),{id:unref(he),"virtual-ref":Et.virtualRef,open:unref(pe),"virtual-triggering":Et.virtualTriggering,class:normalizeClass(unref(ue).e("trigger")),onBlur:unref(Ue),onClick:unref(Ve),onContextmenu:unref(Pt),onFocus:unref(ze),onMouseenter:unref(Oe),onMouseleave:unref(Fe),onKeydown:unref(qe)},{default:withCtx(()=>[renderSlot(Et.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var ElTooltipTrigger=_export_sfc$1(_sfc_main$2w,[["__file","trigger.vue"]]);const teleportProps=buildProps({to:{type:definePropType([String,Object]),required:!0},disabled:Boolean}),_sfc_main$2v=defineComponent({__name:"teleport",props:teleportProps,setup(le){return(oe,ie)=>oe.disabled?renderSlot(oe.$slots,"default",{key:0}):(openBlock(),createBlock(Teleport$1,{key:1,to:oe.to},[renderSlot(oe.$slots,"default")],8,["to"]))}});var Teleport=_export_sfc$1(_sfc_main$2v,[["__file","teleport.vue"]]);const ElTeleport=withInstall(Teleport),__default__$1C=defineComponent({name:"ElTooltipContent",inheritAttrs:!1}),_sfc_main$2u=defineComponent({...__default__$1C,props:useTooltipContentProps,setup(le,{expose:oe}){const ie=le,{selector:ue}=usePopperContainerId(),de=useNamespace("tooltip"),he=ref(null);let pe;const{controlled:_e,id:Ce,open:xe,trigger:Ie,onClose:$e,onOpen:Ne,onShow:Oe,onHide:Fe,onBeforeShow:Ve,onBeforeHide:ze}=inject(TOOLTIP_INJECTION_KEY,void 0),Ue=computed(()=>ie.transition||`${de.namespace.value}-fade-in-linear`),Pt=computed(()=>ie.persistent);onBeforeUnmount(()=>{pe==null||pe()});const qe=computed(()=>unref(Pt)?!0:unref(xe)),Et=computed(()=>ie.disabled?!1:unref(xe)),kt=computed(()=>ie.appendTo||ue.value),At=computed(()=>{var Cn;return(Cn=ie.style)!=null?Cn:{}}),Dt=ref(!0),Lt=()=>{Fe(),Dt.value=!0},jt=()=>{if(unref(_e))return!0},_n=composeEventHandlers(jt,()=>{ie.enterable&&unref(Ie)==="hover"&&Ne()}),bn=composeEventHandlers(jt,()=>{unref(Ie)==="hover"&&$e()}),vn=()=>{var Cn,Sn;(Sn=(Cn=he.value)==null?void 0:Cn.updatePopper)==null||Sn.call(Cn),Ve==null||Ve()},Tn=()=>{ze==null||ze()},$n=()=>{Oe(),pe=onClickOutside(computed(()=>{var Cn;return(Cn=he.value)==null?void 0:Cn.popperContentRef}),()=>{if(unref(_e))return;unref(Ie)!=="hover"&&$e()})},wn=()=>{ie.virtualTriggering||$e()};return watch(()=>unref(xe),Cn=>{Cn?Dt.value=!1:pe==null||pe()},{flush:"post"}),watch(()=>ie.content,()=>{var Cn,Sn;(Sn=(Cn=he.value)==null?void 0:Cn.updatePopper)==null||Sn.call(Cn)}),oe({contentRef:he}),(Cn,Sn)=>(openBlock(),createBlock(unref(ElTeleport),{disabled:!Cn.teleported,to:unref(kt)},{default:withCtx(()=>[createVNode(Transition,{name:unref(Ue),onAfterLeave:Lt,onBeforeEnter:vn,onAfterEnter:$n,onBeforeLeave:Tn},{default:withCtx(()=>[unref(qe)?withDirectives((openBlock(),createBlock(unref(ElPopperContent),mergeProps({key:0,id:unref(Ce),ref_key:"contentRef",ref:he},Cn.$attrs,{"aria-label":Cn.ariaLabel,"aria-hidden":Dt.value,"boundaries-padding":Cn.boundariesPadding,"fallback-placements":Cn.fallbackPlacements,"gpu-acceleration":Cn.gpuAcceleration,offset:Cn.offset,placement:Cn.placement,"popper-options":Cn.popperOptions,strategy:Cn.strategy,effect:Cn.effect,enterable:Cn.enterable,pure:Cn.pure,"popper-class":Cn.popperClass,"popper-style":[Cn.popperStyle,unref(At)],"reference-el":Cn.referenceEl,"trigger-target-el":Cn.triggerTargetEl,visible:unref(Et),"z-index":Cn.zIndex,onMouseenter:unref(_n),onMouseleave:unref(bn),onBlur:wn,onClose:unref($e)}),{default:withCtx(()=>[renderSlot(Cn.$slots,"default")]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[vShow,unref(Et)]]):createCommentVNode("v-if",!0)]),_:3},8,["name"])]),_:3},8,["disabled","to"]))}});var ElTooltipContent=_export_sfc$1(_sfc_main$2u,[["__file","content.vue"]]);const __default__$1B=defineComponent({name:"ElTooltip"}),_sfc_main$2t=defineComponent({...__default__$1B,props:useTooltipProps,emits:tooltipEmits,setup(le,{expose:oe,emit:ie}){const ue=le;usePopperContainer();const de=useId(),he=ref(),pe=ref(),_e=()=>{var Ue;const Pt=unref(he);Pt&&((Ue=Pt.popperInstanceRef)==null||Ue.update())},Ce=ref(!1),xe=ref(),{show:Ie,hide:$e,hasUpdateHandler:Ne}=useTooltipModelToggle({indicator:Ce,toggleReason:xe}),{onOpen:Oe,onClose:Fe}=useDelayedToggle({showAfter:toRef(ue,"showAfter"),hideAfter:toRef(ue,"hideAfter"),autoClose:toRef(ue,"autoClose"),open:Ie,close:$e}),Ve=computed(()=>isBoolean(ue.visible)&&!Ne.value);provide(TOOLTIP_INJECTION_KEY,{controlled:Ve,id:de,open:readonly(Ce),trigger:toRef(ue,"trigger"),onOpen:Ue=>{Oe(Ue)},onClose:Ue=>{Fe(Ue)},onToggle:Ue=>{unref(Ce)?Fe(Ue):Oe(Ue)},onShow:()=>{ie("show",xe.value)},onHide:()=>{ie("hide",xe.value)},onBeforeShow:()=>{ie("before-show",xe.value)},onBeforeHide:()=>{ie("before-hide",xe.value)},updatePopper:_e}),watch(()=>ue.disabled,Ue=>{Ue&&Ce.value&&(Ce.value=!1)});const ze=Ue=>{var Pt,qe;const Et=(qe=(Pt=pe.value)==null?void 0:Pt.contentRef)==null?void 0:qe.popperContentRef,kt=(Ue==null?void 0:Ue.relatedTarget)||document.activeElement;return Et&&Et.contains(kt)};return onDeactivated(()=>Ce.value&&$e()),oe({popperRef:he,contentRef:pe,isFocusInsideContent:ze,updatePopper:_e,onOpen:Oe,onClose:Fe,hide:$e}),(Ue,Pt)=>(openBlock(),createBlock(unref(ElPopper),{ref_key:"popperRef",ref:he,role:Ue.role},{default:withCtx(()=>[createVNode(ElTooltipTrigger,{disabled:Ue.disabled,trigger:Ue.trigger,"trigger-keys":Ue.triggerKeys,"virtual-ref":Ue.virtualRef,"virtual-triggering":Ue.virtualTriggering},{default:withCtx(()=>[Ue.$slots.default?renderSlot(Ue.$slots,"default",{key:0}):createCommentVNode("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),createVNode(ElTooltipContent,{ref_key:"contentRef",ref:pe,"aria-label":Ue.ariaLabel,"boundaries-padding":Ue.boundariesPadding,content:Ue.content,disabled:Ue.disabled,effect:Ue.effect,enterable:Ue.enterable,"fallback-placements":Ue.fallbackPlacements,"hide-after":Ue.hideAfter,"gpu-acceleration":Ue.gpuAcceleration,offset:Ue.offset,persistent:Ue.persistent,"popper-class":Ue.popperClass,"popper-style":Ue.popperStyle,placement:Ue.placement,"popper-options":Ue.popperOptions,pure:Ue.pure,"raw-content":Ue.rawContent,"reference-el":Ue.referenceEl,"trigger-target-el":Ue.triggerTargetEl,"show-after":Ue.showAfter,strategy:Ue.strategy,teleported:Ue.teleported,transition:Ue.transition,"virtual-triggering":Ue.virtualTriggering,"z-index":Ue.zIndex,"append-to":Ue.appendTo},{default:withCtx(()=>[renderSlot(Ue.$slots,"content",{},()=>[Ue.rawContent?(openBlock(),createElementBlock("span",{key:0,innerHTML:Ue.content},null,8,["innerHTML"])):(openBlock(),createElementBlock("span",{key:1},toDisplayString(Ue.content),1))]),Ue.showArrow?(openBlock(),createBlock(unref(ElPopperArrow),{key:0,"arrow-offset":Ue.arrowOffset},null,8,["arrow-offset"])):createCommentVNode("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var Tooltip=_export_sfc$1(_sfc_main$2t,[["__file","tooltip.vue"]]);const ElTooltip=withInstall(Tooltip),autocompleteProps=buildProps({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:definePropType(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:definePropType([Function,Array]),default:NOOP},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},teleported:useTooltipContentProps.teleported,highlightFirstItem:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:String,...useAriaProps(["ariaLabel"])}),autocompleteEmits={[UPDATE_MODEL_EVENT]:le=>isString$1(le),[INPUT_EVENT]:le=>isString$1(le),[CHANGE_EVENT]:le=>isString$1(le),focus:le=>le instanceof FocusEvent,blur:le=>le instanceof FocusEvent,clear:()=>!0,select:le=>isObject$d(le)},COMPONENT_NAME$i="ElAutocomplete",__default__$1A=defineComponent({name:COMPONENT_NAME$i,inheritAttrs:!1}),_sfc_main$2s=defineComponent({...__default__$1A,props:autocompleteProps,emits:autocompleteEmits,setup(le,{expose:oe,emit:ie}){const ue=le,de=useAttrs(),he=useAttrs$1(),pe=useFormDisabled(),_e=useNamespace("autocomplete"),Ce=ref(),xe=ref(),Ie=ref(),$e=ref();let Ne=!1,Oe=!1;const Fe=ref([]),Ve=ref(-1),ze=ref(""),Ue=ref(!1),Pt=ref(!1),qe=ref(!1),Et=useId(),kt=computed(()=>he.style),At=computed(()=>(Fe.value.length>0||qe.value)&&Ue.value),Dt=computed(()=>!ue.hideLoading&&qe.value),Lt=computed(()=>Ce.value?Array.from(Ce.value.$el.querySelectorAll("input")):[]),jt=()=>{At.value&&(ze.value=`${Ce.value.$el.offsetWidth}px`)},_n=()=>{Ve.value=-1},bn=async Rn=>{if(Pt.value)return;const Jn=Qn=>{qe.value=!1,!Pt.value&&(isArray$3(Qn)?(Fe.value=Qn,Ve.value=ue.highlightFirstItem?0:-1):throwError(COMPONENT_NAME$i,"autocomplete suggestions must be an array"))};if(qe.value=!0,isArray$3(ue.fetchSuggestions))Jn(ue.fetchSuggestions);else{const Qn=await ue.fetchSuggestions(Rn,Jn);isArray$3(Qn)&&Jn(Qn)}},vn=debounce(bn,ue.debounce),Tn=Rn=>{const Jn=!!Rn;if(ie(INPUT_EVENT,Rn),ie(UPDATE_MODEL_EVENT,Rn),Pt.value=!1,Ue.value||(Ue.value=Jn),!ue.triggerOnFocus&&!Rn){Pt.value=!0,Fe.value=[];return}vn(Rn)},$n=Rn=>{var Jn;pe.value||(((Jn=Rn.target)==null?void 0:Jn.tagName)!=="INPUT"||Lt.value.includes(document.activeElement))&&(Ue.value=!0)},wn=Rn=>{ie(CHANGE_EVENT,Rn)},Cn=Rn=>{Oe?Oe=!1:(Ue.value=!0,ie("focus",Rn),ue.triggerOnFocus&&!Ne&&vn(String(ue.modelValue)))},Sn=Rn=>{setTimeout(()=>{var Jn;if((Jn=Ie.value)!=null&&Jn.isFocusInsideContent()){Oe=!0;return}Ue.value&&kn(),ie("blur",Rn)})},In=()=>{Ue.value=!1,ie(UPDATE_MODEL_EVENT,""),ie("clear")},En=async()=>{At.value&&Ve.value>=0&&Ve.value<Fe.value.length?Un(Fe.value[Ve.value]):ue.selectWhenUnmatched&&(ie("select",{value:ue.modelValue}),Fe.value=[],Ve.value=-1)},xn=Rn=>{At.value&&(Rn.preventDefault(),Rn.stopPropagation(),kn())},kn=()=>{Ue.value=!1},On=()=>{var Rn;(Rn=Ce.value)==null||Rn.focus()},Mn=()=>{var Rn;(Rn=Ce.value)==null||Rn.blur()},Un=async Rn=>{ie(INPUT_EVENT,Rn[ue.valueKey]),ie(UPDATE_MODEL_EVENT,Rn[ue.valueKey]),ie("select",Rn),Fe.value=[],Ve.value=-1},zn=Rn=>{if(!At.value||qe.value)return;if(Rn<0){Ve.value=-1;return}Rn>=Fe.value.length&&(Rn=Fe.value.length-1);const Jn=xe.value.querySelector(`.${_e.be("suggestion","wrap")}`),_r=Jn.querySelectorAll(`.${_e.be("suggestion","list")} li`)[Rn],Zn=Jn.scrollTop,{offsetTop:Gn,scrollHeight:Nn}=_r;Gn+Nn>Zn+Jn.clientHeight&&(Jn.scrollTop+=Nn),Gn<Zn&&(Jn.scrollTop-=Nn),Ve.value=Rn,Ce.value.ref.setAttribute("aria-activedescendant",`${Et.value}-item-${Ve.value}`)},Hn=onClickOutside($e,()=>{At.value&&kn()});return onBeforeUnmount(()=>{Hn==null||Hn()}),onMounted(()=>{Ce.value.ref.setAttribute("role","textbox"),Ce.value.ref.setAttribute("aria-autocomplete","list"),Ce.value.ref.setAttribute("aria-controls","id"),Ce.value.ref.setAttribute("aria-activedescendant",`${Et.value}-item-${Ve.value}`),Ne=Ce.value.ref.hasAttribute("readonly")}),oe({highlightedIndex:Ve,activated:Ue,loading:qe,inputRef:Ce,popperRef:Ie,suggestions:Fe,handleSelect:Un,handleKeyEnter:En,focus:On,blur:Mn,close:kn,highlight:zn,getData:bn}),(Rn,Jn)=>(openBlock(),createBlock(unref(ElTooltip),{ref_key:"popperRef",ref:Ie,visible:unref(At),placement:Rn.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[unref(_e).e("popper"),Rn.popperClass],teleported:Rn.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${unref(_e).namespace.value}-zoom-in-top`,persistent:"",role:"listbox",onBeforeShow:jt,onHide:_n},{content:withCtx(()=>[createBaseVNode("div",{ref_key:"regionRef",ref:xe,class:normalizeClass([unref(_e).b("suggestion"),unref(_e).is("loading",unref(Dt))]),style:normalizeStyle({[Rn.fitInputWidth?"width":"minWidth"]:ze.value,outline:"none"}),role:"region"},[createVNode(unref(ElScrollbar),{id:unref(Et),tag:"ul","wrap-class":unref(_e).be("suggestion","wrap"),"view-class":unref(_e).be("suggestion","list"),role:"listbox"},{default:withCtx(()=>[unref(Dt)?(openBlock(),createElementBlock("li",{key:0},[renderSlot(Rn.$slots,"loading",{},()=>[createVNode(unref(ElIcon),{class:normalizeClass(unref(_e).is("loading"))},{default:withCtx(()=>[createVNode(unref(loading_default))]),_:1},8,["class"])])])):(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(Fe.value,(Qn,_r)=>(openBlock(),createElementBlock("li",{id:`${unref(Et)}-item-${_r}`,key:_r,class:normalizeClass({highlighted:Ve.value===_r}),role:"option","aria-selected":Ve.value===_r,onClick:Zn=>Un(Qn)},[renderSlot(Rn.$slots,"default",{item:Qn},()=>[createTextVNode(toDisplayString(Qn[Rn.valueKey]),1)])],10,["id","aria-selected","onClick"]))),128))]),_:3},8,["id","wrap-class","view-class"])],6)]),default:withCtx(()=>[createBaseVNode("div",{ref_key:"listboxRef",ref:$e,class:normalizeClass([unref(_e).b(),Rn.$attrs.class]),style:normalizeStyle(unref(kt)),role:"combobox","aria-haspopup":"listbox","aria-expanded":unref(At),"aria-owns":unref(Et)},[createVNode(unref(ElInput),mergeProps({ref_key:"inputRef",ref:Ce},unref(de),{clearable:Rn.clearable,disabled:unref(pe),name:Rn.name,"model-value":Rn.modelValue,"aria-label":Rn.ariaLabel,onInput:Tn,onChange:wn,onFocus:Cn,onBlur:Sn,onClear:In,onKeydown:[withKeys(withModifiers(Qn=>zn(Ve.value-1),["prevent"]),["up"]),withKeys(withModifiers(Qn=>zn(Ve.value+1),["prevent"]),["down"]),withKeys(En,["enter"]),withKeys(kn,["tab"]),withKeys(xn,["esc"])],onMousedown:$n}),createSlots({_:2},[Rn.$slots.prepend?{name:"prepend",fn:withCtx(()=>[renderSlot(Rn.$slots,"prepend")])}:void 0,Rn.$slots.append?{name:"append",fn:withCtx(()=>[renderSlot(Rn.$slots,"append")])}:void 0,Rn.$slots.prefix?{name:"prefix",fn:withCtx(()=>[renderSlot(Rn.$slots,"prefix")])}:void 0,Rn.$slots.suffix?{name:"suffix",fn:withCtx(()=>[renderSlot(Rn.$slots,"suffix")])}:void 0]),1040,["clearable","disabled","name","model-value","aria-label","onKeydown"])],14,["aria-expanded","aria-owns"])]),_:3},8,["visible","placement","popper-class","teleported","transition"]))}});var Autocomplete=_export_sfc$1(_sfc_main$2s,[["__file","autocomplete.vue"]]);const ElAutocomplete=withInstall(Autocomplete),avatarProps=buildProps({size:{type:[Number,String],values:componentSizes,default:"",validator:le=>isNumber(le)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:iconPropType},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:definePropType(String),default:"cover"}}),avatarEmits={error:le=>le instanceof Event},__default__$1z=defineComponent({name:"ElAvatar"}),_sfc_main$2r=defineComponent({...__default__$1z,props:avatarProps,emits:avatarEmits,setup(le,{emit:oe}){const ie=le,ue=useNamespace("avatar"),de=ref(!1),he=computed(()=>{const{size:xe,icon:Ie,shape:$e}=ie,Ne=[ue.b()];return isString$1(xe)&&Ne.push(ue.m(xe)),Ie&&Ne.push(ue.m("icon")),$e&&Ne.push(ue.m($e)),Ne}),pe=computed(()=>{const{size:xe}=ie;return isNumber(xe)?ue.cssVarBlock({size:addUnit(xe)||""}):void 0}),_e=computed(()=>({objectFit:ie.fit}));watch(()=>ie.src,()=>de.value=!1);function Ce(xe){de.value=!0,oe("error",xe)}return(xe,Ie)=>(openBlock(),createElementBlock("span",{class:normalizeClass(unref(he)),style:normalizeStyle(unref(pe))},[(xe.src||xe.srcSet)&&!de.value?(openBlock(),createElementBlock("img",{key:0,src:xe.src,alt:xe.alt,srcset:xe.srcSet,style:normalizeStyle(unref(_e)),onError:Ce},null,44,["src","alt","srcset"])):xe.icon?(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(xe.icon)))]),_:1})):renderSlot(xe.$slots,"default",{key:2})],6))}});var Avatar=_export_sfc$1(_sfc_main$2r,[["__file","avatar.vue"]]);const ElAvatar=withInstall(Avatar),backtopProps={visibilityHeight:{type:Number,default:200},target:{type:String,default:""},right:{type:Number,default:40},bottom:{type:Number,default:40}},backtopEmits={click:le=>le instanceof MouseEvent},useBackTop=(le,oe,ie)=>{const ue=shallowRef(),de=shallowRef(),he=ref(!1),pe=()=>{ue.value&&(he.value=ue.value.scrollTop>=le.visibilityHeight)},_e=xe=>{var Ie;(Ie=ue.value)==null||Ie.scrollTo({top:0,behavior:"smooth"}),oe("click",xe)},Ce=useThrottleFn(pe,300,!0);return useEventListener(de,"scroll",Ce),onMounted(()=>{var xe;de.value=document,ue.value=document.documentElement,le.target&&(ue.value=(xe=document.querySelector(le.target))!=null?xe:void 0,ue.value||throwError(ie,`target does not exist: ${le.target}`),de.value=ue.value),pe()}),{visible:he,handleClick:_e}},COMPONENT_NAME$h="ElBacktop",__default__$1y=defineComponent({name:COMPONENT_NAME$h}),_sfc_main$2q=defineComponent({...__default__$1y,props:backtopProps,emits:backtopEmits,setup(le,{emit:oe}){const ie=le,ue=useNamespace("backtop"),{handleClick:de,visible:he}=useBackTop(ie,oe,COMPONENT_NAME$h),pe=computed(()=>({right:`${ie.right}px`,bottom:`${ie.bottom}px`}));return(_e,Ce)=>(openBlock(),createBlock(Transition,{name:`${unref(ue).namespace.value}-fade-in`},{default:withCtx(()=>[unref(he)?(openBlock(),createElementBlock("div",{key:0,style:normalizeStyle(unref(pe)),class:normalizeClass(unref(ue).b()),onClick:withModifiers(unref(de),["stop"])},[renderSlot(_e.$slots,"default",{},()=>[createVNode(unref(ElIcon),{class:normalizeClass(unref(ue).e("icon"))},{default:withCtx(()=>[createVNode(unref(caret_top_default))]),_:1},8,["class"])])],14,["onClick"])):createCommentVNode("v-if",!0)]),_:3},8,["name"]))}});var Backtop=_export_sfc$1(_sfc_main$2q,[["__file","backtop.vue"]]);const ElBacktop=withInstall(Backtop),badgeProps=buildProps({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,badgeStyle:{type:definePropType([String,Object,Array])},offset:{type:definePropType(Array),default:[0,0]},badgeClass:{type:String}}),__default__$1x=defineComponent({name:"ElBadge"}),_sfc_main$2p=defineComponent({...__default__$1x,props:badgeProps,setup(le,{expose:oe}){const ie=le,ue=useNamespace("badge"),de=computed(()=>ie.isDot?"":isNumber(ie.value)&&isNumber(ie.max)?ie.max<ie.value?`${ie.max}+`:ie.value===0&&!ie.showZero?"":`${ie.value}`:`${ie.value}`),he=computed(()=>{var pe,_e,Ce,xe,Ie;return[{backgroundColor:ie.color,marginRight:addUnit(-((_e=(pe=ie.offset)==null?void 0:pe[0])!=null?_e:0)),marginTop:addUnit((xe=(Ce=ie.offset)==null?void 0:Ce[1])!=null?xe:0)},(Ie=ie.badgeStyle)!=null?Ie:{}]});return oe({content:de}),(pe,_e)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(ue).b())},[renderSlot(pe.$slots,"default"),createVNode(Transition,{name:`${unref(ue).namespace.value}-zoom-in-center`,persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("sup",{class:normalizeClass([unref(ue).e("content"),unref(ue).em("content",pe.type),unref(ue).is("fixed",!!pe.$slots.default),unref(ue).is("dot",pe.isDot),pe.badgeClass]),style:normalizeStyle(unref(he)),textContent:toDisplayString(unref(de))},null,14,["textContent"]),[[vShow,!pe.hidden&&(unref(de)||pe.isDot)]])]),_:1},8,["name"])],2))}});var Badge=_export_sfc$1(_sfc_main$2p,[["__file","badge.vue"]]);const ElBadge=withInstall(Badge),breadcrumbKey=Symbol("breadcrumbKey"),breadcrumbProps=buildProps({separator:{type:String,default:"/"},separatorIcon:{type:iconPropType}}),__default__$1w=defineComponent({name:"ElBreadcrumb"}),_sfc_main$2o=defineComponent({...__default__$1w,props:breadcrumbProps,setup(le){const oe=le,{t:ie}=useLocale(),ue=useNamespace("breadcrumb"),de=ref();return provide(breadcrumbKey,oe),onMounted(()=>{const he=de.value.querySelectorAll(`.${ue.e("item")}`);he.length&&he[he.length-1].setAttribute("aria-current","page")}),(he,pe)=>(openBlock(),createElementBlock("div",{ref_key:"breadcrumb",ref:de,class:normalizeClass(unref(ue).b()),"aria-label":unref(ie)("el.breadcrumb.label"),role:"navigation"},[renderSlot(he.$slots,"default")],10,["aria-label"]))}});var Breadcrumb=_export_sfc$1(_sfc_main$2o,[["__file","breadcrumb.vue"]]);const breadcrumbItemProps=buildProps({to:{type:definePropType([String,Object]),default:""},replace:Boolean}),__default__$1v=defineComponent({name:"ElBreadcrumbItem"}),_sfc_main$2n=defineComponent({...__default__$1v,props:breadcrumbItemProps,setup(le){const oe=le,ie=getCurrentInstance(),ue=inject(breadcrumbKey,void 0),de=useNamespace("breadcrumb"),he=ie.appContext.config.globalProperties.$router,pe=ref(),_e=()=>{!oe.to||!he||(oe.replace?he.replace(oe.to):he.push(oe.to))};return(Ce,xe)=>{var Ie,$e;return openBlock(),createElementBlock("span",{class:normalizeClass(unref(de).e("item"))},[createBaseVNode("span",{ref_key:"link",ref:pe,class:normalizeClass([unref(de).e("inner"),unref(de).is("link",!!Ce.to)]),role:"link",onClick:_e},[renderSlot(Ce.$slots,"default")],2),(Ie=unref(ue))!=null&&Ie.separatorIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(de).e("separator"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(ue).separatorIcon)))]),_:1},8,["class"])):(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(de).e("separator")),role:"presentation"},toDisplayString(($e=unref(ue))==null?void 0:$e.separator),3))],2)}}});var BreadcrumbItem=_export_sfc$1(_sfc_main$2n,[["__file","breadcrumb-item.vue"]]);const ElBreadcrumb=withInstall(Breadcrumb,{BreadcrumbItem}),ElBreadcrumbItem=withNoopInstall(BreadcrumbItem),buttonGroupContextKey=Symbol("buttonGroupContextKey"),useButton=(le,oe)=>{useDeprecated({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},computed(()=>le.type==="text"));const ie=inject(buttonGroupContextKey,void 0),ue=useGlobalConfig("button"),{form:de}=useFormItem(),he=useFormSize(computed(()=>ie==null?void 0:ie.size)),pe=useFormDisabled(),_e=ref(),Ce=useSlots(),xe=computed(()=>le.type||(ie==null?void 0:ie.type)||""),Ie=computed(()=>{var Fe,Ve,ze;return(ze=(Ve=le.autoInsertSpace)!=null?Ve:(Fe=ue.value)==null?void 0:Fe.autoInsertSpace)!=null?ze:!1}),$e=computed(()=>le.tag==="button"?{ariaDisabled:pe.value||le.loading,disabled:pe.value||le.loading,autofocus:le.autofocus,type:le.nativeType}:{}),Ne=computed(()=>{var Fe;const Ve=(Fe=Ce.default)==null?void 0:Fe.call(Ce);if(Ie.value&&(Ve==null?void 0:Ve.length)===1){const ze=Ve[0];if((ze==null?void 0:ze.type)===Text$1){const Ue=ze.children;return new RegExp("^\\p{Unified_Ideograph}{2}$","u").test(Ue.trim())}}return!1});return{_disabled:pe,_size:he,_type:xe,_ref:_e,_props:$e,shouldAddSpace:Ne,handleClick:Fe=>{if(pe.value||le.loading){Fe.stopPropagation();return}le.nativeType==="reset"&&(de==null||de.resetFields()),oe("click",Fe)}}},buttonTypes=["default","primary","success","warning","info","danger","text",""],buttonNativeTypes=["button","submit","reset"],buttonProps=buildProps({size:useSizeProp,disabled:Boolean,type:{type:String,values:buttonTypes,default:""},icon:{type:iconPropType},nativeType:{type:String,values:buttonNativeTypes,default:"button"},loading:Boolean,loadingIcon:{type:iconPropType,default:()=>loading_default},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:definePropType([String,Object]),default:"button"}}),buttonEmits={click:le=>le instanceof MouseEvent};function bound01$1(le,oe){isOnePointZero$1(le)&&(le="100%");var ie=isPercentage$1(le);return le=oe===360?le:Math.min(oe,Math.max(0,parseFloat(le))),ie&&(le=parseInt(String(le*oe),10)/100),Math.abs(le-oe)<1e-6?1:(oe===360?le=(le<0?le%oe+oe:le%oe)/parseFloat(String(oe)):le=le%oe/parseFloat(String(oe)),le)}function clamp01(le){return Math.min(1,Math.max(0,le))}function isOnePointZero$1(le){return typeof le=="string"&&le.indexOf(".")!==-1&&parseFloat(le)===1}function isPercentage$1(le){return typeof le=="string"&&le.indexOf("%")!==-1}function boundAlpha(le){return le=parseFloat(le),(isNaN(le)||le<0||le>1)&&(le=1),le}function convertToPercentage(le){return le<=1?"".concat(Number(le)*100,"%"):le}function pad2(le){return le.length===1?"0"+le:String(le)}function rgbToRgb(le,oe,ie){return{r:bound01$1(le,255)*255,g:bound01$1(oe,255)*255,b:bound01$1(ie,255)*255}}function rgbToHsl(le,oe,ie){le=bound01$1(le,255),oe=bound01$1(oe,255),ie=bound01$1(ie,255);var ue=Math.max(le,oe,ie),de=Math.min(le,oe,ie),he=0,pe=0,_e=(ue+de)/2;if(ue===de)pe=0,he=0;else{var Ce=ue-de;switch(pe=_e>.5?Ce/(2-ue-de):Ce/(ue+de),ue){case le:he=(oe-ie)/Ce+(oe<ie?6:0);break;case oe:he=(ie-le)/Ce+2;break;case ie:he=(le-oe)/Ce+4;break}he/=6}return{h:he,s:pe,l:_e}}function hue2rgb$1(le,oe,ie){return ie<0&&(ie+=1),ie>1&&(ie-=1),ie<1/6?le+(oe-le)*(6*ie):ie<1/2?oe:ie<2/3?le+(oe-le)*(2/3-ie)*6:le}function hslToRgb(le,oe,ie){var ue,de,he;if(le=bound01$1(le,360),oe=bound01$1(oe,100),ie=bound01$1(ie,100),oe===0)de=ie,he=ie,ue=ie;else{var pe=ie<.5?ie*(1+oe):ie+oe-ie*oe,_e=2*ie-pe;ue=hue2rgb$1(_e,pe,le+1/3),de=hue2rgb$1(_e,pe,le),he=hue2rgb$1(_e,pe,le-1/3)}return{r:ue*255,g:de*255,b:he*255}}function rgbToHsv(le,oe,ie){le=bound01$1(le,255),oe=bound01$1(oe,255),ie=bound01$1(ie,255);var ue=Math.max(le,oe,ie),de=Math.min(le,oe,ie),he=0,pe=ue,_e=ue-de,Ce=ue===0?0:_e/ue;if(ue===de)he=0;else{switch(ue){case le:he=(oe-ie)/_e+(oe<ie?6:0);break;case oe:he=(ie-le)/_e+2;break;case ie:he=(le-oe)/_e+4;break}he/=6}return{h:he,s:Ce,v:pe}}function hsvToRgb(le,oe,ie){le=bound01$1(le,360)*6,oe=bound01$1(oe,100),ie=bound01$1(ie,100);var ue=Math.floor(le),de=le-ue,he=ie*(1-oe),pe=ie*(1-de*oe),_e=ie*(1-(1-de)*oe),Ce=ue%6,xe=[ie,pe,he,he,_e,ie][Ce],Ie=[_e,ie,ie,pe,he,he][Ce],$e=[he,he,_e,ie,ie,pe][Ce];return{r:xe*255,g:Ie*255,b:$e*255}}function rgbToHex(le,oe,ie,ue){var de=[pad2(Math.round(le).toString(16)),pad2(Math.round(oe).toString(16)),pad2(Math.round(ie).toString(16))];return ue&&de[0].startsWith(de[0].charAt(1))&&de[1].startsWith(de[1].charAt(1))&&de[2].startsWith(de[2].charAt(1))?de[0].charAt(0)+de[1].charAt(0)+de[2].charAt(0):de.join("")}function rgbaToHex(le,oe,ie,ue,de){var he=[pad2(Math.round(le).toString(16)),pad2(Math.round(oe).toString(16)),pad2(Math.round(ie).toString(16)),pad2(convertDecimalToHex(ue))];return de&&he[0].startsWith(he[0].charAt(1))&&he[1].startsWith(he[1].charAt(1))&&he[2].startsWith(he[2].charAt(1))&&he[3].startsWith(he[3].charAt(1))?he[0].charAt(0)+he[1].charAt(0)+he[2].charAt(0)+he[3].charAt(0):he.join("")}function convertDecimalToHex(le){return Math.round(parseFloat(le)*255).toString(16)}function convertHexToDecimal(le){return parseIntFromHex(le)/255}function parseIntFromHex(le){return parseInt(le,16)}function numberInputToObject(le){return{r:le>>16,g:(le&65280)>>8,b:le&255}}var names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function inputToRGB(le){var oe={r:0,g:0,b:0},ie=1,ue=null,de=null,he=null,pe=!1,_e=!1;return typeof le=="string"&&(le=stringInputToObject(le)),typeof le=="object"&&(isValidCSSUnit(le.r)&&isValidCSSUnit(le.g)&&isValidCSSUnit(le.b)?(oe=rgbToRgb(le.r,le.g,le.b),pe=!0,_e=String(le.r).substr(-1)==="%"?"prgb":"rgb"):isValidCSSUnit(le.h)&&isValidCSSUnit(le.s)&&isValidCSSUnit(le.v)?(ue=convertToPercentage(le.s),de=convertToPercentage(le.v),oe=hsvToRgb(le.h,ue,de),pe=!0,_e="hsv"):isValidCSSUnit(le.h)&&isValidCSSUnit(le.s)&&isValidCSSUnit(le.l)&&(ue=convertToPercentage(le.s),he=convertToPercentage(le.l),oe=hslToRgb(le.h,ue,he),pe=!0,_e="hsl"),Object.prototype.hasOwnProperty.call(le,"a")&&(ie=le.a)),ie=boundAlpha(ie),{ok:pe,format:le.format||_e,r:Math.min(255,Math.max(oe.r,0)),g:Math.min(255,Math.max(oe.g,0)),b:Math.min(255,Math.max(oe.b,0)),a:ie}}var CSS_INTEGER="[-\\+]?\\d+%?",CSS_NUMBER="[-\\+]?\\d*\\.\\d+%?",CSS_UNIT="(?:".concat(CSS_NUMBER,")|(?:").concat(CSS_INTEGER,")"),PERMISSIVE_MATCH3="[\\s|\\(]+(".concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")\\s*\\)?"),PERMISSIVE_MATCH4="[\\s|\\(]+(".concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")\\s*\\)?"),matchers={CSS_UNIT:new RegExp(CSS_UNIT),rgb:new RegExp("rgb"+PERMISSIVE_MATCH3),rgba:new RegExp("rgba"+PERMISSIVE_MATCH4),hsl:new RegExp("hsl"+PERMISSIVE_MATCH3),hsla:new RegExp("hsla"+PERMISSIVE_MATCH4),hsv:new RegExp("hsv"+PERMISSIVE_MATCH3),hsva:new RegExp("hsva"+PERMISSIVE_MATCH4),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function stringInputToObject(le){if(le=le.trim().toLowerCase(),le.length===0)return!1;var oe=!1;if(names[le])le=names[le],oe=!0;else if(le==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var ie=matchers.rgb.exec(le);return ie?{r:ie[1],g:ie[2],b:ie[3]}:(ie=matchers.rgba.exec(le),ie?{r:ie[1],g:ie[2],b:ie[3],a:ie[4]}:(ie=matchers.hsl.exec(le),ie?{h:ie[1],s:ie[2],l:ie[3]}:(ie=matchers.hsla.exec(le),ie?{h:ie[1],s:ie[2],l:ie[3],a:ie[4]}:(ie=matchers.hsv.exec(le),ie?{h:ie[1],s:ie[2],v:ie[3]}:(ie=matchers.hsva.exec(le),ie?{h:ie[1],s:ie[2],v:ie[3],a:ie[4]}:(ie=matchers.hex8.exec(le),ie?{r:parseIntFromHex(ie[1]),g:parseIntFromHex(ie[2]),b:parseIntFromHex(ie[3]),a:convertHexToDecimal(ie[4]),format:oe?"name":"hex8"}:(ie=matchers.hex6.exec(le),ie?{r:parseIntFromHex(ie[1]),g:parseIntFromHex(ie[2]),b:parseIntFromHex(ie[3]),format:oe?"name":"hex"}:(ie=matchers.hex4.exec(le),ie?{r:parseIntFromHex(ie[1]+ie[1]),g:parseIntFromHex(ie[2]+ie[2]),b:parseIntFromHex(ie[3]+ie[3]),a:convertHexToDecimal(ie[4]+ie[4]),format:oe?"name":"hex8"}:(ie=matchers.hex3.exec(le),ie?{r:parseIntFromHex(ie[1]+ie[1]),g:parseIntFromHex(ie[2]+ie[2]),b:parseIntFromHex(ie[3]+ie[3]),format:oe?"name":"hex"}:!1)))))))))}function isValidCSSUnit(le){return!!matchers.CSS_UNIT.exec(String(le))}var TinyColor=function(){function le(oe,ie){oe===void 0&&(oe=""),ie===void 0&&(ie={});var ue;if(oe instanceof le)return oe;typeof oe=="number"&&(oe=numberInputToObject(oe)),this.originalInput=oe;var de=inputToRGB(oe);this.originalInput=oe,this.r=de.r,this.g=de.g,this.b=de.b,this.a=de.a,this.roundA=Math.round(100*this.a)/100,this.format=(ue=ie.format)!==null&&ue!==void 0?ue:de.format,this.gradientType=ie.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=de.ok}return le.prototype.isDark=function(){return this.getBrightness()<128},le.prototype.isLight=function(){return!this.isDark()},le.prototype.getBrightness=function(){var oe=this.toRgb();return(oe.r*299+oe.g*587+oe.b*114)/1e3},le.prototype.getLuminance=function(){var oe=this.toRgb(),ie,ue,de,he=oe.r/255,pe=oe.g/255,_e=oe.b/255;return he<=.03928?ie=he/12.92:ie=Math.pow((he+.055)/1.055,2.4),pe<=.03928?ue=pe/12.92:ue=Math.pow((pe+.055)/1.055,2.4),_e<=.03928?de=_e/12.92:de=Math.pow((_e+.055)/1.055,2.4),.2126*ie+.7152*ue+.0722*de},le.prototype.getAlpha=function(){return this.a},le.prototype.setAlpha=function(oe){return this.a=boundAlpha(oe),this.roundA=Math.round(100*this.a)/100,this},le.prototype.isMonochrome=function(){var oe=this.toHsl().s;return oe===0},le.prototype.toHsv=function(){var oe=rgbToHsv(this.r,this.g,this.b);return{h:oe.h*360,s:oe.s,v:oe.v,a:this.a}},le.prototype.toHsvString=function(){var oe=rgbToHsv(this.r,this.g,this.b),ie=Math.round(oe.h*360),ue=Math.round(oe.s*100),de=Math.round(oe.v*100);return this.a===1?"hsv(".concat(ie,", ").concat(ue,"%, ").concat(de,"%)"):"hsva(".concat(ie,", ").concat(ue,"%, ").concat(de,"%, ").concat(this.roundA,")")},le.prototype.toHsl=function(){var oe=rgbToHsl(this.r,this.g,this.b);return{h:oe.h*360,s:oe.s,l:oe.l,a:this.a}},le.prototype.toHslString=function(){var oe=rgbToHsl(this.r,this.g,this.b),ie=Math.round(oe.h*360),ue=Math.round(oe.s*100),de=Math.round(oe.l*100);return this.a===1?"hsl(".concat(ie,", ").concat(ue,"%, ").concat(de,"%)"):"hsla(".concat(ie,", ").concat(ue,"%, ").concat(de,"%, ").concat(this.roundA,")")},le.prototype.toHex=function(oe){return oe===void 0&&(oe=!1),rgbToHex(this.r,this.g,this.b,oe)},le.prototype.toHexString=function(oe){return oe===void 0&&(oe=!1),"#"+this.toHex(oe)},le.prototype.toHex8=function(oe){return oe===void 0&&(oe=!1),rgbaToHex(this.r,this.g,this.b,this.a,oe)},le.prototype.toHex8String=function(oe){return oe===void 0&&(oe=!1),"#"+this.toHex8(oe)},le.prototype.toHexShortString=function(oe){return oe===void 0&&(oe=!1),this.a===1?this.toHexString(oe):this.toHex8String(oe)},le.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},le.prototype.toRgbString=function(){var oe=Math.round(this.r),ie=Math.round(this.g),ue=Math.round(this.b);return this.a===1?"rgb(".concat(oe,", ").concat(ie,", ").concat(ue,")"):"rgba(".concat(oe,", ").concat(ie,", ").concat(ue,", ").concat(this.roundA,")")},le.prototype.toPercentageRgb=function(){var oe=function(ie){return"".concat(Math.round(bound01$1(ie,255)*100),"%")};return{r:oe(this.r),g:oe(this.g),b:oe(this.b),a:this.a}},le.prototype.toPercentageRgbString=function(){var oe=function(ie){return Math.round(bound01$1(ie,255)*100)};return this.a===1?"rgb(".concat(oe(this.r),"%, ").concat(oe(this.g),"%, ").concat(oe(this.b),"%)"):"rgba(".concat(oe(this.r),"%, ").concat(oe(this.g),"%, ").concat(oe(this.b),"%, ").concat(this.roundA,")")},le.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var oe="#"+rgbToHex(this.r,this.g,this.b,!1),ie=0,ue=Object.entries(names);ie<ue.length;ie++){var de=ue[ie],he=de[0],pe=de[1];if(oe===pe)return he}return!1},le.prototype.toString=function(oe){var ie=!!oe;oe=oe??this.format;var ue=!1,de=this.a<1&&this.a>=0,he=!ie&&de&&(oe.startsWith("hex")||oe==="name");return he?oe==="name"&&this.a===0?this.toName():this.toRgbString():(oe==="rgb"&&(ue=this.toRgbString()),oe==="prgb"&&(ue=this.toPercentageRgbString()),(oe==="hex"||oe==="hex6")&&(ue=this.toHexString()),oe==="hex3"&&(ue=this.toHexString(!0)),oe==="hex4"&&(ue=this.toHex8String(!0)),oe==="hex8"&&(ue=this.toHex8String()),oe==="name"&&(ue=this.toName()),oe==="hsl"&&(ue=this.toHslString()),oe==="hsv"&&(ue=this.toHsvString()),ue||this.toHexString())},le.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},le.prototype.clone=function(){return new le(this.toString())},le.prototype.lighten=function(oe){oe===void 0&&(oe=10);var ie=this.toHsl();return ie.l+=oe/100,ie.l=clamp01(ie.l),new le(ie)},le.prototype.brighten=function(oe){oe===void 0&&(oe=10);var ie=this.toRgb();return ie.r=Math.max(0,Math.min(255,ie.r-Math.round(255*-(oe/100)))),ie.g=Math.max(0,Math.min(255,ie.g-Math.round(255*-(oe/100)))),ie.b=Math.max(0,Math.min(255,ie.b-Math.round(255*-(oe/100)))),new le(ie)},le.prototype.darken=function(oe){oe===void 0&&(oe=10);var ie=this.toHsl();return ie.l-=oe/100,ie.l=clamp01(ie.l),new le(ie)},le.prototype.tint=function(oe){return oe===void 0&&(oe=10),this.mix("white",oe)},le.prototype.shade=function(oe){return oe===void 0&&(oe=10),this.mix("black",oe)},le.prototype.desaturate=function(oe){oe===void 0&&(oe=10);var ie=this.toHsl();return ie.s-=oe/100,ie.s=clamp01(ie.s),new le(ie)},le.prototype.saturate=function(oe){oe===void 0&&(oe=10);var ie=this.toHsl();return ie.s+=oe/100,ie.s=clamp01(ie.s),new le(ie)},le.prototype.greyscale=function(){return this.desaturate(100)},le.prototype.spin=function(oe){var ie=this.toHsl(),ue=(ie.h+oe)%360;return ie.h=ue<0?360+ue:ue,new le(ie)},le.prototype.mix=function(oe,ie){ie===void 0&&(ie=50);var ue=this.toRgb(),de=new le(oe).toRgb(),he=ie/100,pe={r:(de.r-ue.r)*he+ue.r,g:(de.g-ue.g)*he+ue.g,b:(de.b-ue.b)*he+ue.b,a:(de.a-ue.a)*he+ue.a};return new le(pe)},le.prototype.analogous=function(oe,ie){oe===void 0&&(oe=6),ie===void 0&&(ie=30);var ue=this.toHsl(),de=360/ie,he=[this];for(ue.h=(ue.h-(de*oe>>1)+720)%360;--oe;)ue.h=(ue.h+de)%360,he.push(new le(ue));return he},le.prototype.complement=function(){var oe=this.toHsl();return oe.h=(oe.h+180)%360,new le(oe)},le.prototype.monochromatic=function(oe){oe===void 0&&(oe=6);for(var ie=this.toHsv(),ue=ie.h,de=ie.s,he=ie.v,pe=[],_e=1/oe;oe--;)pe.push(new le({h:ue,s:de,v:he})),he=(he+_e)%1;return pe},le.prototype.splitcomplement=function(){var oe=this.toHsl(),ie=oe.h;return[this,new le({h:(ie+72)%360,s:oe.s,l:oe.l}),new le({h:(ie+216)%360,s:oe.s,l:oe.l})]},le.prototype.onBackground=function(oe){var ie=this.toRgb(),ue=new le(oe).toRgb(),de=ie.a+ue.a*(1-ie.a);return new le({r:(ie.r*ie.a+ue.r*ue.a*(1-ie.a))/de,g:(ie.g*ie.a+ue.g*ue.a*(1-ie.a))/de,b:(ie.b*ie.a+ue.b*ue.a*(1-ie.a))/de,a:de})},le.prototype.triad=function(){return this.polyad(3)},le.prototype.tetrad=function(){return this.polyad(4)},le.prototype.polyad=function(oe){for(var ie=this.toHsl(),ue=ie.h,de=[this],he=360/oe,pe=1;pe<oe;pe++)de.push(new le({h:(ue+pe*he)%360,s:ie.s,l:ie.l}));return de},le.prototype.equals=function(oe){return this.toRgbString()===new le(oe).toRgbString()},le}();function darken(le,oe=20){return le.mix("#141414",oe).toString()}function useButtonCustomStyle(le){const oe=useFormDisabled(),ie=useNamespace("button");return computed(()=>{let ue={},de=le.color;if(de){const he=de.match(/var\((.*?)\)/);he&&(de=window.getComputedStyle(window.document.documentElement).getPropertyValue(he[1]));const pe=new TinyColor(de),_e=le.dark?pe.tint(20).toString():darken(pe,20);if(le.plain)ue=ie.cssVarBlock({"bg-color":le.dark?darken(pe,90):pe.tint(90).toString(),"text-color":de,"border-color":le.dark?darken(pe,50):pe.tint(50).toString(),"hover-text-color":`var(${ie.cssVarName("color-white")})`,"hover-bg-color":de,"hover-border-color":de,"active-bg-color":_e,"active-text-color":`var(${ie.cssVarName("color-white")})`,"active-border-color":_e}),oe.value&&(ue[ie.cssVarBlockName("disabled-bg-color")]=le.dark?darken(pe,90):pe.tint(90).toString(),ue[ie.cssVarBlockName("disabled-text-color")]=le.dark?darken(pe,50):pe.tint(50).toString(),ue[ie.cssVarBlockName("disabled-border-color")]=le.dark?darken(pe,80):pe.tint(80).toString());else{const Ce=le.dark?darken(pe,30):pe.tint(30).toString(),xe=pe.isDark()?`var(${ie.cssVarName("color-white")})`:`var(${ie.cssVarName("color-black")})`;if(ue=ie.cssVarBlock({"bg-color":de,"text-color":xe,"border-color":de,"hover-bg-color":Ce,"hover-text-color":xe,"hover-border-color":Ce,"active-bg-color":_e,"active-border-color":_e}),oe.value){const Ie=le.dark?darken(pe,50):pe.tint(50).toString();ue[ie.cssVarBlockName("disabled-bg-color")]=Ie,ue[ie.cssVarBlockName("disabled-text-color")]=le.dark?"rgba(255, 255, 255, 0.5)":`var(${ie.cssVarName("color-white")})`,ue[ie.cssVarBlockName("disabled-border-color")]=Ie}}}return ue})}const __default__$1u=defineComponent({name:"ElButton"}),_sfc_main$2m=defineComponent({...__default__$1u,props:buttonProps,emits:buttonEmits,setup(le,{expose:oe,emit:ie}){const ue=le,de=useButtonCustomStyle(ue),he=useNamespace("button"),{_ref:pe,_size:_e,_type:Ce,_disabled:xe,_props:Ie,shouldAddSpace:$e,handleClick:Ne}=useButton(ue,ie),Oe=computed(()=>[he.b(),he.m(Ce.value),he.m(_e.value),he.is("disabled",xe.value),he.is("loading",ue.loading),he.is("plain",ue.plain),he.is("round",ue.round),he.is("circle",ue.circle),he.is("text",ue.text),he.is("link",ue.link),he.is("has-bg",ue.bg)]);return oe({ref:pe,size:_e,type:Ce,disabled:xe,shouldAddSpace:$e}),(Fe,Ve)=>(openBlock(),createBlock(resolveDynamicComponent(Fe.tag),mergeProps({ref_key:"_ref",ref:pe},unref(Ie),{class:unref(Oe),style:unref(de),onClick:unref(Ne)}),{default:withCtx(()=>[Fe.loading?(openBlock(),createElementBlock(Fragment,{key:0},[Fe.$slots.loading?renderSlot(Fe.$slots,"loading",{key:0}):(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass(unref(he).is("loading"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(Fe.loadingIcon)))]),_:1},8,["class"]))],64)):Fe.icon||Fe.$slots.icon?(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[Fe.icon?(openBlock(),createBlock(resolveDynamicComponent(Fe.icon),{key:0})):renderSlot(Fe.$slots,"icon",{key:1})]),_:3})):createCommentVNode("v-if",!0),Fe.$slots.default?(openBlock(),createElementBlock("span",{key:2,class:normalizeClass({[unref(he).em("text","expand")]:unref($e)})},[renderSlot(Fe.$slots,"default")],2)):createCommentVNode("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var Button=_export_sfc$1(_sfc_main$2m,[["__file","button.vue"]]);const buttonGroupProps={size:buttonProps.size,type:buttonProps.type},__default__$1t=defineComponent({name:"ElButtonGroup"}),_sfc_main$2l=defineComponent({...__default__$1t,props:buttonGroupProps,setup(le){const oe=le;provide(buttonGroupContextKey,reactive({size:toRef(oe,"size"),type:toRef(oe,"type")}));const ie=useNamespace("button");return(ue,de)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(ie).b("group"))},[renderSlot(ue.$slots,"default")],2))}});var ButtonGroup=_export_sfc$1(_sfc_main$2l,[["__file","button-group.vue"]]);const ElButton=withInstall(Button,{ButtonGroup}),ElButtonGroup$1=withNoopInstall(ButtonGroup);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(le){return le&&le.__esModule&&Object.prototype.hasOwnProperty.call(le,"default")?le.default:le}var dayjs_min={exports:{}};(function(le,oe){(function(ie,ue){le.exports=ue()})(commonjsGlobal,function(){var ie=1e3,ue=6e4,de=36e5,he="millisecond",pe="second",_e="minute",Ce="hour",xe="day",Ie="week",$e="month",Ne="quarter",Oe="year",Fe="date",Ve="Invalid Date",ze=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Ue=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Pt={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($n){var wn=["th","st","nd","rd"],Cn=$n%100;return"["+$n+(wn[(Cn-20)%10]||wn[Cn]||wn[0])+"]"}},qe=function($n,wn,Cn){var Sn=String($n);return!Sn||Sn.length>=wn?$n:""+Array(wn+1-Sn.length).join(Cn)+$n},Et={s:qe,z:function($n){var wn=-$n.utcOffset(),Cn=Math.abs(wn),Sn=Math.floor(Cn/60),In=Cn%60;return(wn<=0?"+":"-")+qe(Sn,2,"0")+":"+qe(In,2,"0")},m:function $n(wn,Cn){if(wn.date()<Cn.date())return-$n(Cn,wn);var Sn=12*(Cn.year()-wn.year())+(Cn.month()-wn.month()),In=wn.clone().add(Sn,$e),En=Cn-In<0,xn=wn.clone().add(Sn+(En?-1:1),$e);return+(-(Sn+(Cn-In)/(En?In-xn:xn-In))||0)},a:function($n){return $n<0?Math.ceil($n)||0:Math.floor($n)},p:function($n){return{M:$e,y:Oe,w:Ie,d:xe,D:Fe,h:Ce,m:_e,s:pe,ms:he,Q:Ne}[$n]||String($n||"").toLowerCase().replace(/s$/,"")},u:function($n){return $n===void 0}},kt="en",At={};At[kt]=Pt;var Dt="$isDayjsObject",Lt=function($n){return $n instanceof vn||!(!$n||!$n[Dt])},jt=function $n(wn,Cn,Sn){var In;if(!wn)return kt;if(typeof wn=="string"){var En=wn.toLowerCase();At[En]&&(In=En),Cn&&(At[En]=Cn,In=En);var xn=wn.split("-");if(!In&&xn.length>1)return $n(xn[0])}else{var kn=wn.name;At[kn]=wn,In=kn}return!Sn&&In&&(kt=In),In||!Sn&&kt},_n=function($n,wn){if(Lt($n))return $n.clone();var Cn=typeof wn=="object"?wn:{};return Cn.date=$n,Cn.args=arguments,new vn(Cn)},bn=Et;bn.l=jt,bn.i=Lt,bn.w=function($n,wn){return _n($n,{locale:wn.$L,utc:wn.$u,x:wn.$x,$offset:wn.$offset})};var vn=function(){function $n(Cn){this.$L=jt(Cn.locale,null,!0),this.parse(Cn),this.$x=this.$x||Cn.x||{},this[Dt]=!0}var wn=$n.prototype;return wn.parse=function(Cn){this.$d=function(Sn){var In=Sn.date,En=Sn.utc;if(In===null)return new Date(NaN);if(bn.u(In))return new Date;if(In instanceof Date)return new Date(In);if(typeof In=="string"&&!/Z$/i.test(In)){var xn=In.match(ze);if(xn){var kn=xn[2]-1||0,On=(xn[7]||"0").substring(0,3);return En?new Date(Date.UTC(xn[1],kn,xn[3]||1,xn[4]||0,xn[5]||0,xn[6]||0,On)):new Date(xn[1],kn,xn[3]||1,xn[4]||0,xn[5]||0,xn[6]||0,On)}}return new Date(In)}(Cn),this.init()},wn.init=function(){var Cn=this.$d;this.$y=Cn.getFullYear(),this.$M=Cn.getMonth(),this.$D=Cn.getDate(),this.$W=Cn.getDay(),this.$H=Cn.getHours(),this.$m=Cn.getMinutes(),this.$s=Cn.getSeconds(),this.$ms=Cn.getMilliseconds()},wn.$utils=function(){return bn},wn.isValid=function(){return this.$d.toString()!==Ve},wn.isSame=function(Cn,Sn){var In=_n(Cn);return this.startOf(Sn)<=In&&In<=this.endOf(Sn)},wn.isAfter=function(Cn,Sn){return _n(Cn)<this.startOf(Sn)},wn.isBefore=function(Cn,Sn){return this.endOf(Sn)<_n(Cn)},wn.$g=function(Cn,Sn,In){return bn.u(Cn)?this[Sn]:this.set(In,Cn)},wn.unix=function(){return Math.floor(this.valueOf()/1e3)},wn.valueOf=function(){return this.$d.getTime()},wn.startOf=function(Cn,Sn){var In=this,En=!!bn.u(Sn)||Sn,xn=bn.p(Cn),kn=function(Qn,_r){var Zn=bn.w(In.$u?Date.UTC(In.$y,_r,Qn):new Date(In.$y,_r,Qn),In);return En?Zn:Zn.endOf(xe)},On=function(Qn,_r){return bn.w(In.toDate()[Qn].apply(In.toDate("s"),(En?[0,0,0,0]:[23,59,59,999]).slice(_r)),In)},Mn=this.$W,Un=this.$M,zn=this.$D,Hn="set"+(this.$u?"UTC":"");switch(xn){case Oe:return En?kn(1,0):kn(31,11);case $e:return En?kn(1,Un):kn(0,Un+1);case Ie:var Rn=this.$locale().weekStart||0,Jn=(Mn<Rn?Mn+7:Mn)-Rn;return kn(En?zn-Jn:zn+(6-Jn),Un);case xe:case Fe:return On(Hn+"Hours",0);case Ce:return On(Hn+"Minutes",1);case _e:return On(Hn+"Seconds",2);case pe:return On(Hn+"Milliseconds",3);default:return this.clone()}},wn.endOf=function(Cn){return this.startOf(Cn,!1)},wn.$set=function(Cn,Sn){var In,En=bn.p(Cn),xn="set"+(this.$u?"UTC":""),kn=(In={},In[xe]=xn+"Date",In[Fe]=xn+"Date",In[$e]=xn+"Month",In[Oe]=xn+"FullYear",In[Ce]=xn+"Hours",In[_e]=xn+"Minutes",In[pe]=xn+"Seconds",In[he]=xn+"Milliseconds",In)[En],On=En===xe?this.$D+(Sn-this.$W):Sn;if(En===$e||En===Oe){var Mn=this.clone().set(Fe,1);Mn.$d[kn](On),Mn.init(),this.$d=Mn.set(Fe,Math.min(this.$D,Mn.daysInMonth())).$d}else kn&&this.$d[kn](On);return this.init(),this},wn.set=function(Cn,Sn){return this.clone().$set(Cn,Sn)},wn.get=function(Cn){return this[bn.p(Cn)]()},wn.add=function(Cn,Sn){var In,En=this;Cn=Number(Cn);var xn=bn.p(Sn),kn=function(Un){var zn=_n(En);return bn.w(zn.date(zn.date()+Math.round(Un*Cn)),En)};if(xn===$e)return this.set($e,this.$M+Cn);if(xn===Oe)return this.set(Oe,this.$y+Cn);if(xn===xe)return kn(1);if(xn===Ie)return kn(7);var On=(In={},In[_e]=ue,In[Ce]=de,In[pe]=ie,In)[xn]||1,Mn=this.$d.getTime()+Cn*On;return bn.w(Mn,this)},wn.subtract=function(Cn,Sn){return this.add(-1*Cn,Sn)},wn.format=function(Cn){var Sn=this,In=this.$locale();if(!this.isValid())return In.invalidDate||Ve;var En=Cn||"YYYY-MM-DDTHH:mm:ssZ",xn=bn.z(this),kn=this.$H,On=this.$m,Mn=this.$M,Un=In.weekdays,zn=In.months,Hn=In.meridiem,Rn=function(_r,Zn,Gn,Nn){return _r&&(_r[Zn]||_r(Sn,En))||Gn[Zn].slice(0,Nn)},Jn=function(_r){return bn.s(kn%12||12,_r,"0")},Qn=Hn||function(_r,Zn,Gn){var Nn=_r<12?"AM":"PM";return Gn?Nn.toLowerCase():Nn};return En.replace(Ue,function(_r,Zn){return Zn||function(Gn){switch(Gn){case"YY":return String(Sn.$y).slice(-2);case"YYYY":return bn.s(Sn.$y,4,"0");case"M":return Mn+1;case"MM":return bn.s(Mn+1,2,"0");case"MMM":return Rn(In.monthsShort,Mn,zn,3);case"MMMM":return Rn(zn,Mn);case"D":return Sn.$D;case"DD":return bn.s(Sn.$D,2,"0");case"d":return String(Sn.$W);case"dd":return Rn(In.weekdaysMin,Sn.$W,Un,2);case"ddd":return Rn(In.weekdaysShort,Sn.$W,Un,3);case"dddd":return Un[Sn.$W];case"H":return String(kn);case"HH":return bn.s(kn,2,"0");case"h":return Jn(1);case"hh":return Jn(2);case"a":return Qn(kn,On,!0);case"A":return Qn(kn,On,!1);case"m":return String(On);case"mm":return bn.s(On,2,"0");case"s":return String(Sn.$s);case"ss":return bn.s(Sn.$s,2,"0");case"SSS":return bn.s(Sn.$ms,3,"0");case"Z":return xn}return null}(_r)||xn.replace(":","")})},wn.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},wn.diff=function(Cn,Sn,In){var En,xn=this,kn=bn.p(Sn),On=_n(Cn),Mn=(On.utcOffset()-this.utcOffset())*ue,Un=this-On,zn=function(){return bn.m(xn,On)};switch(kn){case Oe:En=zn()/12;break;case $e:En=zn();break;case Ne:En=zn()/3;break;case Ie:En=(Un-Mn)/6048e5;break;case xe:En=(Un-Mn)/864e5;break;case Ce:En=Un/de;break;case _e:En=Un/ue;break;case pe:En=Un/ie;break;default:En=Un}return In?En:bn.a(En)},wn.daysInMonth=function(){return this.endOf($e).$D},wn.$locale=function(){return At[this.$L]},wn.locale=function(Cn,Sn){if(!Cn)return this.$L;var In=this.clone(),En=jt(Cn,Sn,!0);return En&&(In.$L=En),In},wn.clone=function(){return bn.w(this.$d,this)},wn.toDate=function(){return new Date(this.valueOf())},wn.toJSON=function(){return this.isValid()?this.toISOString():null},wn.toISOString=function(){return this.$d.toISOString()},wn.toString=function(){return this.$d.toUTCString()},$n}(),Tn=vn.prototype;return _n.prototype=Tn,[["$ms",he],["$s",pe],["$m",_e],["$H",Ce],["$W",xe],["$M",$e],["$y",Oe],["$D",Fe]].forEach(function($n){Tn[$n[1]]=function(wn){return this.$g(wn,$n[0],$n[1])}}),_n.extend=function($n,wn){return $n.$i||($n(wn,vn,_n),$n.$i=!0),_n},_n.locale=jt,_n.isDayjs=Lt,_n.unix=function($n){return _n(1e3*$n)},_n.en=At[kt],_n.Ls=At,_n.p={},_n})})(dayjs_min);var dayjs_minExports=dayjs_min.exports;const dayjs=getDefaultExportFromCjs(dayjs_minExports);var customParseFormat$1={exports:{}};(function(le,oe){(function(ie,ue){le.exports=ue()})(commonjsGlobal,function(){var ie={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},ue=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,de=/\d/,he=/\d\d/,pe=/\d\d?/,_e=/\d*[^-_:/,()\s\d]+/,Ce={},xe=function(ze){return(ze=+ze)+(ze>68?1900:2e3)},Ie=function(ze){return function(Ue){this[ze]=+Ue}},$e=[/[+-]\d\d:?(\d\d)?|Z/,function(ze){(this.zone||(this.zone={})).offset=function(Ue){if(!Ue||Ue==="Z")return 0;var Pt=Ue.match(/([+-]|\d\d)/g),qe=60*Pt[1]+(+Pt[2]||0);return qe===0?0:Pt[0]==="+"?-qe:qe}(ze)}],Ne=function(ze){var Ue=Ce[ze];return Ue&&(Ue.indexOf?Ue:Ue.s.concat(Ue.f))},Oe=function(ze,Ue){var Pt,qe=Ce.meridiem;if(qe){for(var Et=1;Et<=24;Et+=1)if(ze.indexOf(qe(Et,0,Ue))>-1){Pt=Et>12;break}}else Pt=ze===(Ue?"pm":"PM");return Pt},Fe={A:[_e,function(ze){this.afternoon=Oe(ze,!1)}],a:[_e,function(ze){this.afternoon=Oe(ze,!0)}],Q:[de,function(ze){this.month=3*(ze-1)+1}],S:[de,function(ze){this.milliseconds=100*+ze}],SS:[he,function(ze){this.milliseconds=10*+ze}],SSS:[/\d{3}/,function(ze){this.milliseconds=+ze}],s:[pe,Ie("seconds")],ss:[pe,Ie("seconds")],m:[pe,Ie("minutes")],mm:[pe,Ie("minutes")],H:[pe,Ie("hours")],h:[pe,Ie("hours")],HH:[pe,Ie("hours")],hh:[pe,Ie("hours")],D:[pe,Ie("day")],DD:[he,Ie("day")],Do:[_e,function(ze){var Ue=Ce.ordinal,Pt=ze.match(/\d+/);if(this.day=Pt[0],Ue)for(var qe=1;qe<=31;qe+=1)Ue(qe).replace(/\[|\]/g,"")===ze&&(this.day=qe)}],w:[pe,Ie("week")],ww:[he,Ie("week")],M:[pe,Ie("month")],MM:[he,Ie("month")],MMM:[_e,function(ze){var Ue=Ne("months"),Pt=(Ne("monthsShort")||Ue.map(function(qe){return qe.slice(0,3)})).indexOf(ze)+1;if(Pt<1)throw new Error;this.month=Pt%12||Pt}],MMMM:[_e,function(ze){var Ue=Ne("months").indexOf(ze)+1;if(Ue<1)throw new Error;this.month=Ue%12||Ue}],Y:[/[+-]?\d+/,Ie("year")],YY:[he,function(ze){this.year=xe(ze)}],YYYY:[/\d{4}/,Ie("year")],Z:$e,ZZ:$e};function Ve(ze){var Ue,Pt;Ue=ze,Pt=Ce&&Ce.formats;for(var qe=(ze=Ue.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(_n,bn,vn){var Tn=vn&&vn.toUpperCase();return bn||Pt[vn]||ie[vn]||Pt[Tn].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function($n,wn,Cn){return wn||Cn.slice(1)})})).match(ue),Et=qe.length,kt=0;kt<Et;kt+=1){var At=qe[kt],Dt=Fe[At],Lt=Dt&&Dt[0],jt=Dt&&Dt[1];qe[kt]=jt?{regex:Lt,parser:jt}:At.replace(/^\[|\]$/g,"")}return function(_n){for(var bn={},vn=0,Tn=0;vn<Et;vn+=1){var $n=qe[vn];if(typeof $n=="string")Tn+=$n.length;else{var wn=$n.regex,Cn=$n.parser,Sn=_n.slice(Tn),In=wn.exec(Sn)[0];Cn.call(bn,In),_n=_n.replace(In,"")}}return function(En){var xn=En.afternoon;if(xn!==void 0){var kn=En.hours;xn?kn<12&&(En.hours+=12):kn===12&&(En.hours=0),delete En.afternoon}}(bn),bn}}return function(ze,Ue,Pt){Pt.p.customParseFormat=!0,ze&&ze.parseTwoDigitYear&&(xe=ze.parseTwoDigitYear);var qe=Ue.prototype,Et=qe.parse;qe.parse=function(kt){var At=kt.date,Dt=kt.utc,Lt=kt.args;this.$u=Dt;var jt=Lt[1];if(typeof jt=="string"){var _n=Lt[2]===!0,bn=Lt[3]===!0,vn=_n||bn,Tn=Lt[2];bn&&(Tn=Lt[2]),Ce=this.$locale(),!_n&&Tn&&(Ce=Pt.Ls[Tn]),this.$d=function(Sn,In,En,xn){try{if(["x","X"].indexOf(In)>-1)return new Date((In==="X"?1e3:1)*Sn);var kn=Ve(In)(Sn),On=kn.year,Mn=kn.month,Un=kn.day,zn=kn.hours,Hn=kn.minutes,Rn=kn.seconds,Jn=kn.milliseconds,Qn=kn.zone,_r=kn.week,Zn=new Date,Gn=Un||(On||Mn?1:Zn.getDate()),Nn=On||Zn.getFullYear(),Dn=0;On&&!Mn||(Dn=Mn>0?Mn-1:Zn.getMonth());var jn,ir=zn||0,Fn=Hn||0,Kn=Rn||0,mr=Jn||0;return Qn?new Date(Date.UTC(Nn,Dn,Gn,ir,Fn,Kn,mr+60*Qn.offset*1e3)):En?new Date(Date.UTC(Nn,Dn,Gn,ir,Fn,Kn,mr)):(jn=new Date(Nn,Dn,Gn,ir,Fn,Kn,mr),_r&&(jn=xn(jn).week(_r).toDate()),jn)}catch{return new Date("")}}(At,jt,Dt,Pt),this.init(),Tn&&Tn!==!0&&(this.$L=this.locale(Tn).$L),vn&&At!=this.format(jt)&&(this.$d=new Date("")),Ce={}}else if(jt instanceof Array)for(var $n=jt.length,wn=1;wn<=$n;wn+=1){Lt[1]=jt[wn-1];var Cn=Pt.apply(this,Lt);if(Cn.isValid()){this.$d=Cn.$d,this.$L=Cn.$L,this.init();break}wn===$n&&(this.$d=new Date(""))}else Et.call(this,kt)}}})})(customParseFormat$1);var customParseFormatExports=customParseFormat$1.exports;const customParseFormat=getDefaultExportFromCjs(customParseFormatExports),timeUnits$1=["hours","minutes","seconds"],DEFAULT_FORMATS_TIME="HH:mm:ss",DEFAULT_FORMATS_DATE="YYYY-MM-DD",DEFAULT_FORMATS_DATEPICKER={date:DEFAULT_FORMATS_DATE,dates:DEFAULT_FORMATS_DATE,week:"gggg[w]ww",year:"YYYY",years:"YYYY",month:"YYYY-MM",months:"YYYY-MM",datetime:`${DEFAULT_FORMATS_DATE} ${DEFAULT_FORMATS_TIME}`,monthrange:"YYYY-MM",yearrange:"YYYY",daterange:DEFAULT_FORMATS_DATE,datetimerange:`${DEFAULT_FORMATS_DATE} ${DEFAULT_FORMATS_TIME}`},buildTimeList=(le,oe)=>[le>0?le-1:void 0,le,le<oe?le+1:void 0],rangeArr=le=>Array.from(Array.from({length:le}).keys()),extractDateFormat=le=>le.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim(),extractTimeFormat=le=>le.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?Y{2,4}/g,"").trim(),dateEquals=function(le,oe){const ie=isDate(le),ue=isDate(oe);return ie&&ue?le.getTime()===oe.getTime():!ie&&!ue?le===oe:!1},valueEquals=function(le,oe){const ie=isArray$3(le),ue=isArray$3(oe);return ie&&ue?le.length!==oe.length?!1:le.every((de,he)=>dateEquals(de,oe[he])):!ie&&!ue?dateEquals(le,oe):!1},parseDate=function(le,oe,ie){const ue=isEmpty(oe)||oe==="x"?dayjs(le).locale(ie):dayjs(le,oe).locale(ie);return ue.isValid()?ue:void 0},formatter=function(le,oe,ie){return isEmpty(oe)?le:oe==="x"?+le:dayjs(le).locale(ie).format(oe)},makeList=(le,oe)=>{var ie;const ue=[],de=oe==null?void 0:oe();for(let he=0;he<le;he++)ue.push((ie=de==null?void 0:de.includes(he))!=null?ie:!1);return ue},disabledTimeListsProps=buildProps({disabledHours:{type:definePropType(Function)},disabledMinutes:{type:definePropType(Function)},disabledSeconds:{type:definePropType(Function)}}),timePanelSharedProps=buildProps({visible:Boolean,actualVisible:{type:Boolean,default:void 0},format:{type:String,default:""}}),timePickerDefaultProps=buildProps({id:{type:definePropType([Array,String])},name:{type:definePropType([Array,String]),default:""},popperClass:{type:String,default:""},format:String,valueFormat:String,dateFormat:String,timeFormat:String,type:{type:String,default:""},clearable:{type:Boolean,default:!0},clearIcon:{type:definePropType([String,Object]),default:circle_close_default},editable:{type:Boolean,default:!0},prefixIcon:{type:definePropType([String,Object]),default:""},size:useSizeProp,readonly:Boolean,disabled:Boolean,placeholder:{type:String,default:""},popperOptions:{type:definePropType(Object),default:()=>({})},modelValue:{type:definePropType([Date,Array,String,Number]),default:""},rangeSeparator:{type:String,default:"-"},startPlaceholder:String,endPlaceholder:String,defaultValue:{type:definePropType([Date,Array])},defaultTime:{type:definePropType([Date,Array])},isRange:Boolean,...disabledTimeListsProps,disabledDate:{type:Function},cellClassName:{type:Function},shortcuts:{type:Array,default:()=>[]},arrowControl:Boolean,tabindex:{type:definePropType([String,Number]),default:0},validateEvent:{type:Boolean,default:!0},unlinkPanels:Boolean,placement:{type:definePropType(String),values:Ee,default:"bottom"},fallbackPlacements:{type:definePropType(Array),default:["bottom","top","right","left"]},...useEmptyValuesProps,...useAriaProps(["ariaLabel"])}),__default__$1s=defineComponent({name:"Picker"}),_sfc_main$2k=defineComponent({...__default__$1s,props:timePickerDefaultProps,emits:["update:modelValue","change","focus","blur","clear","calendar-change","panel-change","visible-change","keydown"],setup(le,{expose:oe,emit:ie}){const ue=le,de=useAttrs$1(),{lang:he}=useLocale(),pe=useNamespace("date"),_e=useNamespace("input"),Ce=useNamespace("range"),{form:xe,formItem:Ie}=useFormItem(),$e=inject("ElPopperOptions",{}),{valueOnClear:Ne}=useEmptyValues(ue,null),Oe=ref(),Fe=ref(),Ve=ref(!1),ze=ref(!1),Ue=ref(null);let Pt=!1,qe=!1;const Et=computed(()=>[pe.b("editor"),pe.bm("editor",ue.type),_e.e("wrapper"),pe.is("disabled",Mn.value),pe.is("active",Ve.value),Ce.b("editor"),yr?Ce.bm("editor",yr.value):"",de.class]),kt=computed(()=>[_e.e("icon"),Ce.e("close-icon"),Gn.value?"":Ce.e("close-icon--hidden")]);watch(Ve,Yn=>{Yn?nextTick(()=>{Yn&&(Ue.value=ue.modelValue)}):(gr.value=null,nextTick(()=>{At(ue.modelValue)}))});const At=(Yn,Nr)=>{(Nr||!valueEquals(Yn,Ue.value))&&(ie("change",Yn),ue.validateEvent&&(Ie==null||Ie.validate("change").catch(Hr=>void 0)))},Dt=Yn=>{if(!valueEquals(ue.modelValue,Yn)){let Nr;isArray$3(Yn)?Nr=Yn.map(Hr=>formatter(Hr,ue.valueFormat,he.value)):Yn&&(Nr=formatter(Yn,ue.valueFormat,he.value)),ie("update:modelValue",Yn&&Nr,he.value)}},Lt=Yn=>{ie("keydown",Yn)},jt=computed(()=>{if(Fe.value){const Yn=mr.value?Fe.value:Fe.value.$el;return Array.from(Yn.querySelectorAll("input"))}return[]}),_n=(Yn,Nr,Hr)=>{const Pn=jt.value;Pn.length&&(!Hr||Hr==="min"?(Pn[0].setSelectionRange(Yn,Nr),Pn[0].focus()):Hr==="max"&&(Pn[1].setSelectionRange(Yn,Nr),Pn[1].focus()))},bn=()=>{En(!0,!0),nextTick(()=>{qe=!1})},vn=(Yn="",Nr=!1)=>{Nr||(qe=!0),Ve.value=Nr;let Hr;isArray$3(Yn)?Hr=Yn.map(Pn=>Pn.toDate()):Hr=Yn&&Yn.toDate(),gr.value=null,Dt(Hr)},Tn=()=>{ze.value=!0},$n=()=>{ie("visible-change",!0)},wn=Yn=>{(Yn==null?void 0:Yn.key)===EVENT_CODE.esc&&En(!0,!0)},Cn=()=>{ze.value=!1,Ve.value=!1,qe=!1,ie("visible-change",!1)},Sn=()=>{Ve.value=!0},In=()=>{Ve.value=!1},En=(Yn=!0,Nr=!1)=>{qe=Nr;const[Hr,Pn]=unref(jt);let An=Hr;!Yn&&mr.value&&(An=Pn),An&&An.focus()},xn=Yn=>{ue.readonly||Mn.value||Ve.value||qe||(Ve.value=!0,ie("focus",Yn))};let kn;const On=Yn=>{const Nr=async()=>{setTimeout(()=>{var Hr;kn===Nr&&(!((Hr=Oe.value)!=null&&Hr.isFocusInsideContent()&&!Pt)&&jt.value.filter(Pn=>Pn.contains(document.activeElement)).length===0&&(tr(),Ve.value=!1,ie("blur",Yn),ue.validateEvent&&(Ie==null||Ie.validate("blur").catch(Pn=>void 0))),Pt=!1)},0)};kn=Nr,Nr()},Mn=computed(()=>ue.disabled||(xe==null?void 0:xe.disabled)),Un=computed(()=>{let Yn;if(Dn.value?sr.value.getDefaultValue&&(Yn=sr.value.getDefaultValue()):isArray$3(ue.modelValue)?Yn=ue.modelValue.map(Nr=>parseDate(Nr,ue.valueFormat,he.value)):Yn=parseDate(ue.modelValue,ue.valueFormat,he.value),sr.value.getRangeAvailableTime){const Nr=sr.value.getRangeAvailableTime(Yn);isEqual$1(Nr,Yn)||(Yn=Nr,Dn.value||Dt(isArray$3(Yn)?Yn.map(Hr=>Hr.toDate()):Yn.toDate()))}return isArray$3(Yn)&&Yn.some(Nr=>!Nr)&&(Yn=[]),Yn}),zn=computed(()=>{if(!sr.value.panelReady)return"";const Yn=Dr(Un.value);return isArray$3(gr.value)?[gr.value[0]||Yn&&Yn[0]||"",gr.value[1]||Yn&&Yn[1]||""]:gr.value!==null?gr.value:!Rn.value&&Dn.value||!Ve.value&&Dn.value?"":Yn?Jn.value||Qn.value||_r.value?Yn.join(", "):Yn:""}),Hn=computed(()=>ue.type.includes("time")),Rn=computed(()=>ue.type.startsWith("time")),Jn=computed(()=>ue.type==="dates"),Qn=computed(()=>ue.type==="months"),_r=computed(()=>ue.type==="years"),Zn=computed(()=>ue.prefixIcon||(Hn.value?clock_default:calendar_default)),Gn=ref(!1),Nn=Yn=>{ue.readonly||Mn.value||(Gn.value&&(Yn.stopPropagation(),bn(),sr.value.handleClear?sr.value.handleClear():Dt(Ne.value),At(Ne.value,!0),Gn.value=!1,Cn()),ie("clear"))},Dn=computed(()=>{const{modelValue:Yn}=ue;return!Yn||isArray$3(Yn)&&!Yn.filter(Boolean).length}),jn=async Yn=>{var Nr;ue.readonly||Mn.value||(((Nr=Yn.target)==null?void 0:Nr.tagName)!=="INPUT"||jt.value.includes(document.activeElement))&&(Ve.value=!0)},ir=()=>{ue.readonly||Mn.value||!Dn.value&&ue.clearable&&(Gn.value=!0)},Fn=()=>{Gn.value=!1},Kn=Yn=>{var Nr;ue.readonly||Mn.value||(((Nr=Yn.touches[0].target)==null?void 0:Nr.tagName)!=="INPUT"||jt.value.includes(document.activeElement))&&(Ve.value=!0)},mr=computed(()=>ue.type.includes("range")),yr=useFormSize(),Cr=computed(()=>{var Yn,Nr;return(Nr=(Yn=unref(Oe))==null?void 0:Yn.popperRef)==null?void 0:Nr.contentRef}),br=computed(()=>{var Yn;return unref(mr)?unref(Fe):(Yn=unref(Fe))==null?void 0:Yn.$el}),Pr=onClickOutside(br,Yn=>{const Nr=unref(Cr),Hr=unref(br);Nr&&(Yn.target===Nr||Yn.composedPath().includes(Nr))||Yn.target===Hr||Yn.composedPath().includes(Hr)||(Ve.value=!1)});onBeforeUnmount(()=>{Pr==null||Pr()});const gr=ref(null),tr=()=>{if(gr.value){const Yn=Sr(zn.value);Yn&&Lr(Yn)&&(Dt(isArray$3(Yn)?Yn.map(Nr=>Nr.toDate()):Yn.toDate()),gr.value=null)}gr.value===""&&(Dt(Ne.value),At(Ne.value),gr.value=null)},Sr=Yn=>Yn?sr.value.parseUserInput(Yn):null,Dr=Yn=>Yn?sr.value.formatToString(Yn):null,Lr=Yn=>sr.value.isValidValue(Yn),Ur=async Yn=>{if(ue.readonly||Mn.value)return;const{code:Nr}=Yn;if(Lt(Yn),Nr===EVENT_CODE.esc){Ve.value===!0&&(Ve.value=!1,Yn.preventDefault(),Yn.stopPropagation());return}if(Nr===EVENT_CODE.down&&(sr.value.handleFocusPicker&&(Yn.preventDefault(),Yn.stopPropagation()),Ve.value===!1&&(Ve.value=!0,await nextTick()),sr.value.handleFocusPicker)){sr.value.handleFocusPicker();return}if(Nr===EVENT_CODE.tab){Pt=!0;return}if(Nr===EVENT_CODE.enter||Nr===EVENT_CODE.numpadEnter){(gr.value===null||gr.value===""||Lr(Sr(zn.value)))&&(tr(),Ve.value=!1),Yn.stopPropagation();return}if(gr.value){Yn.stopPropagation();return}sr.value.handleKeydownInput&&sr.value.handleKeydownInput(Yn)},Xr=Yn=>{gr.value=Yn,Ve.value||(Ve.value=!0)},qr=Yn=>{const Nr=Yn.target;gr.value?gr.value=[Nr.value,gr.value[1]]:gr.value=[Nr.value,null]},Wn=Yn=>{const Nr=Yn.target;gr.value?gr.value=[gr.value[0],Nr.value]:gr.value=[null,Nr.value]},wr=()=>{var Yn;const Nr=gr.value,Hr=Sr(Nr&&Nr[0]),Pn=unref(Un);if(Hr&&Hr.isValid()){gr.value=[Dr(Hr),((Yn=zn.value)==null?void 0:Yn[1])||null];const An=[Hr,Pn&&(Pn[1]||null)];Lr(An)&&(Dt(An),gr.value=null)}},Vn=()=>{var Yn;const Nr=unref(gr),Hr=Sr(Nr&&Nr[1]),Pn=unref(Un);if(Hr&&Hr.isValid()){gr.value=[((Yn=unref(zn))==null?void 0:Yn[0])||null,Dr(Hr)];const An=[Pn&&Pn[0],Hr];Lr(An)&&(Dt(An),gr.value=null)}},sr=ref({}),nr=Yn=>{sr.value[Yn[0]]=Yn[1],sr.value.panelReady=!0},Ar=Yn=>{ie("calendar-change",Yn)},Wr=(Yn,Nr,Hr)=>{ie("panel-change",Yn,Nr,Hr)};return provide("EP_PICKER_BASE",{props:ue}),oe({focus:En,handleFocusInput:xn,handleBlurInput:On,handleOpen:Sn,handleClose:In,onPick:vn}),(Yn,Nr)=>(openBlock(),createBlock(unref(ElTooltip),mergeProps({ref_key:"refPopper",ref:Oe,visible:Ve.value,effect:"light",pure:"",trigger:"click"},Yn.$attrs,{role:"dialog",teleported:"",transition:`${unref(pe).namespace.value}-zoom-in-top`,"popper-class":[`${unref(pe).namespace.value}-picker__popper`,Yn.popperClass],"popper-options":unref($e),"fallback-placements":Yn.fallbackPlacements,"gpu-acceleration":!1,placement:Yn.placement,"stop-popper-mouse-event":!1,"hide-after":0,persistent:"",onBeforeShow:Tn,onShow:$n,onHide:Cn}),{default:withCtx(()=>[unref(mr)?(openBlock(),createElementBlock("div",{key:1,ref_key:"inputRef",ref:Fe,class:normalizeClass(unref(Et)),style:normalizeStyle(Yn.$attrs.style),onClick:xn,onMouseenter:ir,onMouseleave:Fn,onTouchstartPassive:Kn,onKeydown:Ur},[unref(Zn)?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass([unref(_e).e("icon"),unref(Ce).e("icon")]),onMousedown:withModifiers(jn,["prevent"]),onTouchstartPassive:Kn},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(Zn))))]),_:1},8,["class","onMousedown"])):createCommentVNode("v-if",!0),createBaseVNode("input",{id:Yn.id&&Yn.id[0],autocomplete:"off",name:Yn.name&&Yn.name[0],placeholder:Yn.startPlaceholder,value:unref(zn)&&unref(zn)[0],disabled:unref(Mn),readonly:!Yn.editable||Yn.readonly,class:normalizeClass(unref(Ce).b("input")),onMousedown:jn,onInput:qr,onChange:wr,onFocus:xn,onBlur:On},null,42,["id","name","placeholder","value","disabled","readonly"]),renderSlot(Yn.$slots,"range-separator",{},()=>[createBaseVNode("span",{class:normalizeClass(unref(Ce).b("separator"))},toDisplayString(Yn.rangeSeparator),3)]),createBaseVNode("input",{id:Yn.id&&Yn.id[1],autocomplete:"off",name:Yn.name&&Yn.name[1],placeholder:Yn.endPlaceholder,value:unref(zn)&&unref(zn)[1],disabled:unref(Mn),readonly:!Yn.editable||Yn.readonly,class:normalizeClass(unref(Ce).b("input")),onMousedown:jn,onFocus:xn,onBlur:On,onInput:Wn,onChange:Vn},null,42,["id","name","placeholder","value","disabled","readonly"]),Yn.clearIcon?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass(unref(kt)),onClick:Nn},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(Yn.clearIcon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],38)):(openBlock(),createBlock(unref(ElInput),{key:0,id:Yn.id,ref_key:"inputRef",ref:Fe,"container-role":"combobox","model-value":unref(zn),name:Yn.name,size:unref(yr),disabled:unref(Mn),placeholder:Yn.placeholder,class:normalizeClass([unref(pe).b("editor"),unref(pe).bm("editor",Yn.type),Yn.$attrs.class]),style:normalizeStyle(Yn.$attrs.style),readonly:!Yn.editable||Yn.readonly||unref(Jn)||unref(Qn)||unref(_r)||Yn.type==="week","aria-label":Yn.ariaLabel,tabindex:Yn.tabindex,"validate-event":!1,onInput:Xr,onFocus:xn,onBlur:On,onKeydown:Ur,onChange:tr,onMousedown:jn,onMouseenter:ir,onMouseleave:Fn,onTouchstartPassive:Kn,onClick:withModifiers(()=>{},["stop"])},{prefix:withCtx(()=>[unref(Zn)?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(_e).e("icon")),onMousedown:withModifiers(jn,["prevent"]),onTouchstartPassive:Kn},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(Zn))))]),_:1},8,["class","onMousedown"])):createCommentVNode("v-if",!0)]),suffix:withCtx(()=>[Gn.value&&Yn.clearIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(`${unref(_e).e("icon")} clear-icon`),onClick:withModifiers(Nn,["stop"])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(Yn.clearIcon)))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)]),_:1},8,["id","model-value","name","size","disabled","placeholder","class","style","readonly","aria-label","tabindex","onKeydown","onClick"]))]),content:withCtx(()=>[renderSlot(Yn.$slots,"default",{visible:Ve.value,actualVisible:ze.value,parsedValue:unref(Un),format:Yn.format,dateFormat:Yn.dateFormat,timeFormat:Yn.timeFormat,unlinkPanels:Yn.unlinkPanels,type:Yn.type,defaultValue:Yn.defaultValue,onPick:vn,onSelectRange:_n,onSetPickerOption:nr,onCalendarChange:Ar,onPanelChange:Wr,onKeydown:wn,onMousedown:withModifiers(()=>{},["stop"])})]),_:3},16,["visible","transition","popper-class","popper-options","fallback-placements","placement"]))}});var CommonPicker=_export_sfc$1(_sfc_main$2k,[["__file","picker.vue"]]);const panelTimePickerProps=buildProps({...timePanelSharedProps,datetimeRole:String,parsedValue:{type:definePropType(Object)}}),useTimePanel=({getAvailableHours:le,getAvailableMinutes:oe,getAvailableSeconds:ie})=>{const ue=(pe,_e,Ce,xe)=>{const Ie={hour:le,minute:oe,second:ie};let $e=pe;return["hour","minute","second"].forEach(Ne=>{if(Ie[Ne]){let Oe;const Fe=Ie[Ne];switch(Ne){case"minute":{Oe=Fe($e.hour(),_e,xe);break}case"second":{Oe=Fe($e.hour(),$e.minute(),_e,xe);break}default:{Oe=Fe(_e,xe);break}}if(Oe!=null&&Oe.length&&!Oe.includes($e[Ne]())){const Ve=Ce?0:Oe.length-1;$e=$e[Ne](Oe[Ve])}}}),$e},de={};return{timePickerOptions:de,getAvailableTime:ue,onSetOption:([pe,_e])=>{de[pe]=_e}}},makeAvailableArr=le=>{const oe=(ue,de)=>ue||de,ie=ue=>ue!==!0;return le.map(oe).filter(ie)},getTimeLists=(le,oe,ie)=>({getHoursList:(pe,_e)=>makeList(24,le&&(()=>le==null?void 0:le(pe,_e))),getMinutesList:(pe,_e,Ce)=>makeList(60,oe&&(()=>oe==null?void 0:oe(pe,_e,Ce))),getSecondsList:(pe,_e,Ce,xe)=>makeList(60,ie&&(()=>ie==null?void 0:ie(pe,_e,Ce,xe)))}),buildAvailableTimeSlotGetter=(le,oe,ie)=>{const{getHoursList:ue,getMinutesList:de,getSecondsList:he}=getTimeLists(le,oe,ie);return{getAvailableHours:(xe,Ie)=>makeAvailableArr(ue(xe,Ie)),getAvailableMinutes:(xe,Ie,$e)=>makeAvailableArr(de(xe,Ie,$e)),getAvailableSeconds:(xe,Ie,$e,Ne)=>makeAvailableArr(he(xe,Ie,$e,Ne))}},useOldValue=le=>{const oe=ref(le.parsedValue);return watch(()=>le.visible,ie=>{ie||(oe.value=le.parsedValue)}),oe},nodeList=new Map;if(isClient){let le;document.addEventListener("mousedown",oe=>le=oe),document.addEventListener("mouseup",oe=>{if(le){for(const ie of nodeList.values())for(const{documentHandler:ue}of ie)ue(oe,le);le=void 0}})}function createDocumentHandler(le,oe){let ie=[];return Array.isArray(oe.arg)?ie=oe.arg:isElement$1(oe.arg)&&ie.push(oe.arg),function(ue,de){const he=oe.instance.popperRef,pe=ue.target,_e=de==null?void 0:de.target,Ce=!oe||!oe.instance,xe=!pe||!_e,Ie=le.contains(pe)||le.contains(_e),$e=le===pe,Ne=ie.length&&ie.some(Fe=>Fe==null?void 0:Fe.contains(pe))||ie.length&&ie.includes(_e),Oe=he&&(he.contains(pe)||he.contains(_e));Ce||xe||Ie||$e||Ne||Oe||oe.value(ue,de)}}const ClickOutside={beforeMount(le,oe){nodeList.has(le)||nodeList.set(le,[]),nodeList.get(le).push({documentHandler:createDocumentHandler(le,oe),bindingFn:oe.value})},updated(le,oe){nodeList.has(le)||nodeList.set(le,[]);const ie=nodeList.get(le),ue=ie.findIndex(he=>he.bindingFn===oe.oldValue),de={documentHandler:createDocumentHandler(le,oe),bindingFn:oe.value};ue>=0?ie.splice(ue,1,de):ie.push(de)},unmounted(le){nodeList.delete(le)}},REPEAT_INTERVAL=100,REPEAT_DELAY=600,vRepeatClick={beforeMount(le,oe){const ie=oe.value,{interval:ue=REPEAT_INTERVAL,delay:de=REPEAT_DELAY}=isFunction$2(ie)?{}:ie;let he,pe;const _e=()=>isFunction$2(ie)?ie():ie.handler(),Ce=()=>{pe&&(clearTimeout(pe),pe=void 0),he&&(clearInterval(he),he=void 0)};le.addEventListener("mousedown",xe=>{xe.button===0&&(Ce(),_e(),document.addEventListener("mouseup",()=>Ce(),{once:!0}),pe=setTimeout(()=>{he=setInterval(()=>{_e()},ue)},de))})}},FOCUSABLE_CHILDREN="_trap-focus-children",FOCUS_STACK=[],FOCUS_HANDLER=le=>{if(FOCUS_STACK.length===0)return;const oe=FOCUS_STACK[FOCUS_STACK.length-1][FOCUSABLE_CHILDREN];if(oe.length>0&&le.code===EVENT_CODE.tab){if(oe.length===1){le.preventDefault(),document.activeElement!==oe[0]&&oe[0].focus();return}const ie=le.shiftKey,ue=le.target===oe[0],de=le.target===oe[oe.length-1];ue&&ie&&(le.preventDefault(),oe[oe.length-1].focus()),de&&!ie&&(le.preventDefault(),oe[0].focus())}},TrapFocus={beforeMount(le){le[FOCUSABLE_CHILDREN]=obtainAllFocusableElements$1(le),FOCUS_STACK.push(le),FOCUS_STACK.length<=1&&document.addEventListener("keydown",FOCUS_HANDLER)},updated(le){nextTick(()=>{le[FOCUSABLE_CHILDREN]=obtainAllFocusableElements$1(le)})},unmounted(){FOCUS_STACK.shift(),FOCUS_STACK.length===0&&document.removeEventListener("keydown",FOCUS_HANDLER)}};var v$2=!1,o$1,f$2,s$1,u$2,d$1,N$2,l$2,p$2,m$3,w$1,D$1,x$3,E$1,M$1,F$1;function a$1(){if(!v$2){v$2=!0;var le=navigator.userAgent,oe=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(le),ie=/(Mac OS X)|(Windows)|(Linux)/.exec(le);if(x$3=/\b(iPhone|iP[ao]d)/.exec(le),E$1=/\b(iP[ao]d)/.exec(le),w$1=/Android/i.exec(le),M$1=/FBAN\/\w+;/i.exec(le),F$1=/Mobile/i.exec(le),D$1=!!/Win64/.exec(le),oe){o$1=oe[1]?parseFloat(oe[1]):oe[5]?parseFloat(oe[5]):NaN,o$1&&document&&document.documentMode&&(o$1=document.documentMode);var ue=/(?:Trident\/(\d+.\d+))/.exec(le);N$2=ue?parseFloat(ue[1])+4:o$1,f$2=oe[2]?parseFloat(oe[2]):NaN,s$1=oe[3]?parseFloat(oe[3]):NaN,u$2=oe[4]?parseFloat(oe[4]):NaN,u$2?(oe=/(?:Chrome\/(\d+\.\d+))/.exec(le),d$1=oe&&oe[1]?parseFloat(oe[1]):NaN):d$1=NaN}else o$1=f$2=s$1=d$1=u$2=NaN;if(ie){if(ie[1]){var de=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(le);l$2=de?parseFloat(de[1].replace("_",".")):!0}else l$2=!1;p$2=!!ie[2],m$3=!!ie[3]}else l$2=p$2=m$3=!1}}var _$2={ie:function(){return a$1()||o$1},ieCompatibilityMode:function(){return a$1()||N$2>o$1},ie64:function(){return _$2.ie()&&D$1},firefox:function(){return a$1()||f$2},opera:function(){return a$1()||s$1},webkit:function(){return a$1()||u$2},safari:function(){return _$2.webkit()},chrome:function(){return a$1()||d$1},windows:function(){return a$1()||p$2},osx:function(){return a$1()||l$2},linux:function(){return a$1()||m$3},iphone:function(){return a$1()||x$3},mobile:function(){return a$1()||x$3||E$1||w$1||F$1},nativeApp:function(){return a$1()||M$1},android:function(){return a$1()||w$1},ipad:function(){return a$1()||E$1}},A$1=_$2,c$3=!!(typeof window<"u"&&window.document&&window.document.createElement),U$1={canUseDOM:c$3,canUseWorkers:typeof Worker<"u",canUseEventListeners:c$3&&!!(window.addEventListener||window.attachEvent),canUseViewport:c$3&&!!window.screen,isInWorker:!c$3},h$2=U$1,X$1;h$2.canUseDOM&&(X$1=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function S$1(le,oe){if(!h$2.canUseDOM||oe&&!("addEventListener"in document))return!1;var ie="on"+le,ue=ie in document;if(!ue){var de=document.createElement("div");de.setAttribute(ie,"return;"),ue=typeof de[ie]=="function"}return!ue&&X$1&&le==="wheel"&&(ue=document.implementation.hasFeature("Events.wheel","3.0")),ue}var b$1=S$1,O$2=10,I$1=40,P$1=800;function T$2(le){var oe=0,ie=0,ue=0,de=0;return"detail"in le&&(ie=le.detail),"wheelDelta"in le&&(ie=-le.wheelDelta/120),"wheelDeltaY"in le&&(ie=-le.wheelDeltaY/120),"wheelDeltaX"in le&&(oe=-le.wheelDeltaX/120),"axis"in le&&le.axis===le.HORIZONTAL_AXIS&&(oe=ie,ie=0),ue=oe*O$2,de=ie*O$2,"deltaY"in le&&(de=le.deltaY),"deltaX"in le&&(ue=le.deltaX),(ue||de)&&le.deltaMode&&(le.deltaMode==1?(ue*=I$1,de*=I$1):(ue*=P$1,de*=P$1)),ue&&!oe&&(oe=ue<1?-1:1),de&&!ie&&(ie=de<1?-1:1),{spinX:oe,spinY:ie,pixelX:ue,pixelY:de}}T$2.getEventType=function(){return A$1.firefox()?"DOMMouseScroll":b$1("wheel")?"wheel":"mousewheel"};var Y$1=T$2;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const mousewheel=function(le,oe){if(le&&le.addEventListener){const ie=function(ue){const de=Y$1(ue);oe&&Reflect.apply(oe,this,[ue,de])};le.addEventListener("wheel",ie,{passive:!0})}},Mousewheel={beforeMount(le,oe){mousewheel(le,oe.value)}},basicTimeSpinnerProps=buildProps({role:{type:String,required:!0},spinnerDate:{type:definePropType(Object),required:!0},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:definePropType(String),default:""},...disabledTimeListsProps}),_sfc_main$2j=defineComponent({__name:"basic-time-spinner",props:basicTimeSpinnerProps,emits:["change","select-range","set-option"],setup(le,{emit:oe}){const ie=le,ue=useNamespace("time"),{getHoursList:de,getMinutesList:he,getSecondsList:pe}=getTimeLists(ie.disabledHours,ie.disabledMinutes,ie.disabledSeconds);let _e=!1;const Ce=ref(),xe=ref(),Ie=ref(),$e=ref(),Ne={hours:xe,minutes:Ie,seconds:$e},Oe=computed(()=>ie.showSeconds?timeUnits$1:timeUnits$1.slice(0,2)),Fe=computed(()=>{const{spinnerDate:En}=ie,xn=En.hour(),kn=En.minute(),On=En.second();return{hours:xn,minutes:kn,seconds:On}}),Ve=computed(()=>{const{hours:En,minutes:xn}=unref(Fe);return{hours:de(ie.role),minutes:he(En,ie.role),seconds:pe(En,xn,ie.role)}}),ze=computed(()=>{const{hours:En,minutes:xn,seconds:kn}=unref(Fe);return{hours:buildTimeList(En,23),minutes:buildTimeList(xn,59),seconds:buildTimeList(kn,59)}}),Ue=debounce(En=>{_e=!1,Et(En)},200),Pt=En=>{if(!!!ie.amPmMode)return"";const kn=ie.amPmMode==="A";let On=En<12?" am":" pm";return kn&&(On=On.toUpperCase()),On},qe=En=>{let xn;switch(En){case"hours":xn=[0,2];break;case"minutes":xn=[3,5];break;case"seconds":xn=[6,8];break}const[kn,On]=xn;oe("select-range",kn,On),Ce.value=En},Et=En=>{Dt(En,unref(Fe)[En])},kt=()=>{Et("hours"),Et("minutes"),Et("seconds")},At=En=>En.querySelector(`.${ue.namespace.value}-scrollbar__wrap`),Dt=(En,xn)=>{if(ie.arrowControl)return;const kn=unref(Ne[En]);kn&&kn.$el&&(At(kn.$el).scrollTop=Math.max(0,xn*Lt(En)))},Lt=En=>{const xn=unref(Ne[En]),kn=xn==null?void 0:xn.$el.querySelector("li");return kn&&Number.parseFloat(getStyle(kn,"height"))||0},jt=()=>{bn(1)},_n=()=>{bn(-1)},bn=En=>{Ce.value||qe("hours");const xn=Ce.value,kn=unref(Fe)[xn],On=Ce.value==="hours"?24:60,Mn=vn(xn,kn,En,On);Tn(xn,Mn),Dt(xn,Mn),nextTick(()=>qe(xn))},vn=(En,xn,kn,On)=>{let Mn=(xn+kn+On)%On;const Un=unref(Ve)[En];for(;Un[Mn]&&Mn!==xn;)Mn=(Mn+kn+On)%On;return Mn},Tn=(En,xn)=>{if(unref(Ve)[En][xn])return;const{hours:Mn,minutes:Un,seconds:zn}=unref(Fe);let Hn;switch(En){case"hours":Hn=ie.spinnerDate.hour(xn).minute(Un).second(zn);break;case"minutes":Hn=ie.spinnerDate.hour(Mn).minute(xn).second(zn);break;case"seconds":Hn=ie.spinnerDate.hour(Mn).minute(Un).second(xn);break}oe("change",Hn)},$n=(En,{value:xn,disabled:kn})=>{kn||(Tn(En,xn),qe(En),Dt(En,xn))},wn=En=>{_e=!0,Ue(En);const xn=Math.min(Math.round((At(unref(Ne[En]).$el).scrollTop-(Cn(En)*.5-10)/Lt(En)+3)/Lt(En)),En==="hours"?23:59);Tn(En,xn)},Cn=En=>unref(Ne[En]).$el.offsetHeight,Sn=()=>{const En=xn=>{const kn=unref(Ne[xn]);kn&&kn.$el&&(At(kn.$el).onscroll=()=>{wn(xn)})};En("hours"),En("minutes"),En("seconds")};onMounted(()=>{nextTick(()=>{!ie.arrowControl&&Sn(),kt(),ie.role==="start"&&qe("hours")})});const In=(En,xn)=>{Ne[xn].value=En};return oe("set-option",[`${ie.role}_scrollDown`,bn]),oe("set-option",[`${ie.role}_emitSelectRange`,qe]),watch(()=>ie.spinnerDate,()=>{_e||kt()}),(En,xn)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(ue).b("spinner"),{"has-seconds":En.showSeconds}])},[En.arrowControl?createCommentVNode("v-if",!0):(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(unref(Oe),kn=>(openBlock(),createBlock(unref(ElScrollbar),{key:kn,ref_for:!0,ref:On=>In(On,kn),class:normalizeClass(unref(ue).be("spinner","wrapper")),"wrap-style":"max-height: inherit;","view-class":unref(ue).be("spinner","list"),noresize:"",tag:"ul",onMouseenter:On=>qe(kn),onMousemove:On=>Et(kn)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Ve)[kn],(On,Mn)=>(openBlock(),createElementBlock("li",{key:Mn,class:normalizeClass([unref(ue).be("spinner","item"),unref(ue).is("active",Mn===unref(Fe)[kn]),unref(ue).is("disabled",On)]),onClick:Un=>$n(kn,{value:Mn,disabled:On})},[kn==="hours"?(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString(("0"+(En.amPmMode?Mn%12||12:Mn)).slice(-2))+toDisplayString(Pt(Mn)),1)],64)):(openBlock(),createElementBlock(Fragment,{key:1},[createTextVNode(toDisplayString(("0"+Mn).slice(-2)),1)],64))],10,["onClick"]))),128))]),_:2},1032,["class","view-class","onMouseenter","onMousemove"]))),128)),En.arrowControl?(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(unref(Oe),kn=>(openBlock(),createElementBlock("div",{key:kn,class:normalizeClass([unref(ue).be("spinner","wrapper"),unref(ue).is("arrow")]),onMouseenter:On=>qe(kn)},[withDirectives((openBlock(),createBlock(unref(ElIcon),{class:normalizeClass(["arrow-up",unref(ue).be("spinner","arrow")])},{default:withCtx(()=>[createVNode(unref(arrow_up_default))]),_:1},8,["class"])),[[unref(vRepeatClick),_n]]),withDirectives((openBlock(),createBlock(unref(ElIcon),{class:normalizeClass(["arrow-down",unref(ue).be("spinner","arrow")])},{default:withCtx(()=>[createVNode(unref(arrow_down_default))]),_:1},8,["class"])),[[unref(vRepeatClick),jt]]),createBaseVNode("ul",{class:normalizeClass(unref(ue).be("spinner","list"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(ze)[kn],(On,Mn)=>(openBlock(),createElementBlock("li",{key:Mn,class:normalizeClass([unref(ue).be("spinner","item"),unref(ue).is("active",On===unref(Fe)[kn]),unref(ue).is("disabled",unref(Ve)[kn][On])])},[typeof On=="number"?(openBlock(),createElementBlock(Fragment,{key:0},[kn==="hours"?(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString(("0"+(En.amPmMode?On%12||12:On)).slice(-2))+toDisplayString(Pt(On)),1)],64)):(openBlock(),createElementBlock(Fragment,{key:1},[createTextVNode(toDisplayString(("0"+On).slice(-2)),1)],64))],64)):createCommentVNode("v-if",!0)],2))),128))],2)],42,["onMouseenter"]))),128)):createCommentVNode("v-if",!0)],2))}});var TimeSpinner=_export_sfc$1(_sfc_main$2j,[["__file","basic-time-spinner.vue"]]);const _sfc_main$2i=defineComponent({__name:"panel-time-pick",props:panelTimePickerProps,emits:["pick","select-range","set-picker-option"],setup(le,{emit:oe}){const ie=le,ue=inject("EP_PICKER_BASE"),{arrowControl:de,disabledHours:he,disabledMinutes:pe,disabledSeconds:_e,defaultValue:Ce}=ue.props,{getAvailableHours:xe,getAvailableMinutes:Ie,getAvailableSeconds:$e}=buildAvailableTimeSlotGetter(he,pe,_e),Ne=useNamespace("time"),{t:Oe,lang:Fe}=useLocale(),Ve=ref([0,2]),ze=useOldValue(ie),Ue=computed(()=>isUndefined(ie.actualVisible)?`${Ne.namespace.value}-zoom-in-top`:""),Pt=computed(()=>ie.format.includes("ss")),qe=computed(()=>ie.format.includes("A")?"A":ie.format.includes("a")?"a":""),Et=In=>{const En=dayjs(In).locale(Fe.value),xn=$n(En);return En.isSame(xn)},kt=()=>{oe("pick",ze.value,!1)},At=(In=!1,En=!1)=>{En||oe("pick",ie.parsedValue,In)},Dt=In=>{if(!ie.visible)return;const En=$n(In).millisecond(0);oe("pick",En,!0)},Lt=(In,En)=>{oe("select-range",In,En),Ve.value=[In,En]},jt=In=>{const En=[0,3].concat(Pt.value?[6]:[]),xn=["hours","minutes"].concat(Pt.value?["seconds"]:[]),On=(En.indexOf(Ve.value[0])+In+En.length)%En.length;bn.start_emitSelectRange(xn[On])},_n=In=>{const En=In.code,{left:xn,right:kn,up:On,down:Mn}=EVENT_CODE;if([xn,kn].includes(En)){jt(En===xn?-1:1),In.preventDefault();return}if([On,Mn].includes(En)){const Un=En===On?-1:1;bn.start_scrollDown(Un),In.preventDefault();return}},{timePickerOptions:bn,onSetOption:vn,getAvailableTime:Tn}=useTimePanel({getAvailableHours:xe,getAvailableMinutes:Ie,getAvailableSeconds:$e}),$n=In=>Tn(In,ie.datetimeRole||"",!0),wn=In=>In?dayjs(In,ie.format).locale(Fe.value):null,Cn=In=>In?In.format(ie.format):null,Sn=()=>dayjs(Ce).locale(Fe.value);return oe("set-picker-option",["isValidValue",Et]),oe("set-picker-option",["formatToString",Cn]),oe("set-picker-option",["parseUserInput",wn]),oe("set-picker-option",["handleKeydownInput",_n]),oe("set-picker-option",["getRangeAvailableTime",$n]),oe("set-picker-option",["getDefaultValue",Sn]),(In,En)=>(openBlock(),createBlock(Transition,{name:unref(Ue)},{default:withCtx(()=>[In.actualVisible||In.visible?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(Ne).b("panel"))},[createBaseVNode("div",{class:normalizeClass([unref(Ne).be("panel","content"),{"has-seconds":unref(Pt)}])},[createVNode(TimeSpinner,{ref:"spinner",role:In.datetimeRole||"start","arrow-control":unref(de),"show-seconds":unref(Pt),"am-pm-mode":unref(qe),"spinner-date":In.parsedValue,"disabled-hours":unref(he),"disabled-minutes":unref(pe),"disabled-seconds":unref(_e),onChange:Dt,onSetOption:unref(vn),onSelectRange:Lt},null,8,["role","arrow-control","show-seconds","am-pm-mode","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onSetOption"])],2),createBaseVNode("div",{class:normalizeClass(unref(Ne).be("panel","footer"))},[createBaseVNode("button",{type:"button",class:normalizeClass([unref(Ne).be("panel","btn"),"cancel"]),onClick:kt},toDisplayString(unref(Oe)("el.datepicker.cancel")),3),createBaseVNode("button",{type:"button",class:normalizeClass([unref(Ne).be("panel","btn"),"confirm"]),onClick:xn=>At()},toDisplayString(unref(Oe)("el.datepicker.confirm")),11,["onClick"])],2)],2)):createCommentVNode("v-if",!0)]),_:1},8,["name"]))}});var TimePickPanel=_export_sfc$1(_sfc_main$2i,[["__file","panel-time-pick.vue"]]);const panelTimeRangeProps=buildProps({...timePanelSharedProps,parsedValue:{type:definePropType(Array)}}),_sfc_main$2h=defineComponent({__name:"panel-time-range",props:panelTimeRangeProps,emits:["pick","select-range","set-picker-option"],setup(le,{emit:oe}){const ie=le,ue=(Zn,Gn)=>{const Nn=[];for(let Dn=Zn;Dn<=Gn;Dn++)Nn.push(Dn);return Nn},{t:de,lang:he}=useLocale(),pe=useNamespace("time"),_e=useNamespace("picker"),Ce=inject("EP_PICKER_BASE"),{arrowControl:xe,disabledHours:Ie,disabledMinutes:$e,disabledSeconds:Ne,defaultValue:Oe}=Ce.props,Fe=computed(()=>[pe.be("range-picker","body"),pe.be("panel","content"),pe.is("arrow",xe),Et.value?"has-seconds":""]),Ve=computed(()=>[pe.be("range-picker","body"),pe.be("panel","content"),pe.is("arrow",xe),Et.value?"has-seconds":""]),ze=computed(()=>ie.parsedValue[0]),Ue=computed(()=>ie.parsedValue[1]),Pt=useOldValue(ie),qe=()=>{oe("pick",Pt.value,!1)},Et=computed(()=>ie.format.includes("ss")),kt=computed(()=>ie.format.includes("A")?"A":ie.format.includes("a")?"a":""),At=(Zn=!1)=>{oe("pick",[ze.value,Ue.value],Zn)},Dt=Zn=>{_n(Zn.millisecond(0),Ue.value)},Lt=Zn=>{_n(ze.value,Zn.millisecond(0))},jt=Zn=>{const Gn=Zn.map(Dn=>dayjs(Dn).locale(he.value)),Nn=kn(Gn);return Gn[0].isSame(Nn[0])&&Gn[1].isSame(Nn[1])},_n=(Zn,Gn)=>{oe("pick",[Zn,Gn],!0)},bn=computed(()=>ze.value>Ue.value),vn=ref([0,2]),Tn=(Zn,Gn)=>{oe("select-range",Zn,Gn,"min"),vn.value=[Zn,Gn]},$n=computed(()=>Et.value?11:8),wn=(Zn,Gn)=>{oe("select-range",Zn,Gn,"max");const Nn=unref($n);vn.value=[Zn+Nn,Gn+Nn]},Cn=Zn=>{const Gn=Et.value?[0,3,6,11,14,17]:[0,3,8,11],Nn=["hours","minutes"].concat(Et.value?["seconds"]:[]),jn=(Gn.indexOf(vn.value[0])+Zn+Gn.length)%Gn.length,ir=Gn.length/2;jn<ir?zn.start_emitSelectRange(Nn[jn]):zn.end_emitSelectRange(Nn[jn-ir])},Sn=Zn=>{const Gn=Zn.code,{left:Nn,right:Dn,up:jn,down:ir}=EVENT_CODE;if([Nn,Dn].includes(Gn)){Cn(Gn===Nn?-1:1),Zn.preventDefault();return}if([jn,ir].includes(Gn)){const Fn=Gn===jn?-1:1,Kn=vn.value[0]<$n.value?"start":"end";zn[`${Kn}_scrollDown`](Fn),Zn.preventDefault();return}},In=(Zn,Gn)=>{const Nn=Ie?Ie(Zn):[],Dn=Zn==="start",ir=(Gn||(Dn?Ue.value:ze.value)).hour(),Fn=Dn?ue(ir+1,23):ue(0,ir-1);return union(Nn,Fn)},En=(Zn,Gn,Nn)=>{const Dn=$e?$e(Zn,Gn):[],jn=Gn==="start",ir=Nn||(jn?Ue.value:ze.value),Fn=ir.hour();if(Zn!==Fn)return Dn;const Kn=ir.minute(),mr=jn?ue(Kn+1,59):ue(0,Kn-1);return union(Dn,mr)},xn=(Zn,Gn,Nn,Dn)=>{const jn=Ne?Ne(Zn,Gn,Nn):[],ir=Nn==="start",Fn=Dn||(ir?Ue.value:ze.value),Kn=Fn.hour(),mr=Fn.minute();if(Zn!==Kn||Gn!==mr)return jn;const yr=Fn.second(),Cr=ir?ue(yr+1,59):ue(0,yr-1);return union(jn,Cr)},kn=([Zn,Gn])=>[Hn(Zn,"start",!0,Gn),Hn(Gn,"end",!1,Zn)],{getAvailableHours:On,getAvailableMinutes:Mn,getAvailableSeconds:Un}=buildAvailableTimeSlotGetter(In,En,xn),{timePickerOptions:zn,getAvailableTime:Hn,onSetOption:Rn}=useTimePanel({getAvailableHours:On,getAvailableMinutes:Mn,getAvailableSeconds:Un}),Jn=Zn=>Zn?isArray$3(Zn)?Zn.map(Gn=>dayjs(Gn,ie.format).locale(he.value)):dayjs(Zn,ie.format).locale(he.value):null,Qn=Zn=>Zn?isArray$3(Zn)?Zn.map(Gn=>Gn.format(ie.format)):Zn.format(ie.format):null,_r=()=>{if(isArray$3(Oe))return Oe.map(Gn=>dayjs(Gn).locale(he.value));const Zn=dayjs(Oe).locale(he.value);return[Zn,Zn.add(60,"m")]};return oe("set-picker-option",["formatToString",Qn]),oe("set-picker-option",["parseUserInput",Jn]),oe("set-picker-option",["isValidValue",jt]),oe("set-picker-option",["handleKeydownInput",Sn]),oe("set-picker-option",["getDefaultValue",_r]),oe("set-picker-option",["getRangeAvailableTime",kn]),(Zn,Gn)=>Zn.actualVisible?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass([unref(pe).b("range-picker"),unref(_e).b("panel")])},[createBaseVNode("div",{class:normalizeClass(unref(pe).be("range-picker","content"))},[createBaseVNode("div",{class:normalizeClass(unref(pe).be("range-picker","cell"))},[createBaseVNode("div",{class:normalizeClass(unref(pe).be("range-picker","header"))},toDisplayString(unref(de)("el.datepicker.startTime")),3),createBaseVNode("div",{class:normalizeClass(unref(Fe))},[createVNode(TimeSpinner,{ref:"minSpinner",role:"start","show-seconds":unref(Et),"am-pm-mode":unref(kt),"arrow-control":unref(xe),"spinner-date":unref(ze),"disabled-hours":In,"disabled-minutes":En,"disabled-seconds":xn,onChange:Dt,onSetOption:unref(Rn),onSelectRange:Tn},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),createBaseVNode("div",{class:normalizeClass(unref(pe).be("range-picker","cell"))},[createBaseVNode("div",{class:normalizeClass(unref(pe).be("range-picker","header"))},toDisplayString(unref(de)("el.datepicker.endTime")),3),createBaseVNode("div",{class:normalizeClass(unref(Ve))},[createVNode(TimeSpinner,{ref:"maxSpinner",role:"end","show-seconds":unref(Et),"am-pm-mode":unref(kt),"arrow-control":unref(xe),"spinner-date":unref(Ue),"disabled-hours":In,"disabled-minutes":En,"disabled-seconds":xn,onChange:Lt,onSetOption:unref(Rn),onSelectRange:wn},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),createBaseVNode("div",{class:normalizeClass(unref(pe).be("panel","footer"))},[createBaseVNode("button",{type:"button",class:normalizeClass([unref(pe).be("panel","btn"),"cancel"]),onClick:Nn=>qe()},toDisplayString(unref(de)("el.datepicker.cancel")),11,["onClick"]),createBaseVNode("button",{type:"button",class:normalizeClass([unref(pe).be("panel","btn"),"confirm"]),disabled:unref(bn),onClick:Nn=>At()},toDisplayString(unref(de)("el.datepicker.confirm")),11,["disabled","onClick"])],2)],2)):createCommentVNode("v-if",!0)}});var TimeRangePanel=_export_sfc$1(_sfc_main$2h,[["__file","panel-time-range.vue"]]);dayjs.extend(customParseFormat);var TimePicker=defineComponent({name:"ElTimePicker",install:null,props:{...timePickerDefaultProps,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(le,oe){const ie=ref(),[ue,de]=le.isRange?["timerange",TimeRangePanel]:["time",TimePickPanel],he=pe=>oe.emit("update:modelValue",pe);return provide("ElPopperOptions",le.popperOptions),oe.expose({focus:pe=>{var _e;(_e=ie.value)==null||_e.handleFocusInput(pe)},blur:pe=>{var _e;(_e=ie.value)==null||_e.handleBlurInput(pe)},handleOpen:()=>{var pe;(pe=ie.value)==null||pe.handleOpen()},handleClose:()=>{var pe;(pe=ie.value)==null||pe.handleClose()}}),()=>{var pe;const _e=(pe=le.format)!=null?pe:DEFAULT_FORMATS_TIME;return createVNode(CommonPicker,mergeProps(le,{ref:ie,type:ue,format:_e,"onUpdate:modelValue":he}),{default:Ce=>createVNode(de,Ce,null)})}}});const ElTimePicker=withInstall(TimePicker),getPrevMonthLastDays=(le,oe)=>{const ie=le.subtract(1,"month").endOf("month").date();return rangeArr(oe).map((ue,de)=>ie-(oe-de-1))},getMonthDays=le=>{const oe=le.daysInMonth();return rangeArr(oe).map((ie,ue)=>ue+1)},toNestedArr=le=>rangeArr(le.length/7).map(oe=>{const ie=oe*7;return le.slice(ie,ie+7)}),dateTableProps=buildProps({selectedDay:{type:definePropType(Object)},range:{type:definePropType(Array)},date:{type:definePropType(Object),required:!0},hideHeader:{type:Boolean}}),dateTableEmits={pick:le=>isObject$d(le)};var localeData$1={exports:{}};(function(le,oe){(function(ie,ue){le.exports=ue()})(commonjsGlobal,function(){return function(ie,ue,de){var he=ue.prototype,pe=function($e){return $e&&($e.indexOf?$e:$e.s)},_e=function($e,Ne,Oe,Fe,Ve){var ze=$e.name?$e:$e.$locale(),Ue=pe(ze[Ne]),Pt=pe(ze[Oe]),qe=Ue||Pt.map(function(kt){return kt.slice(0,Fe)});if(!Ve)return qe;var Et=ze.weekStart;return qe.map(function(kt,At){return qe[(At+(Et||0))%7]})},Ce=function(){return de.Ls[de.locale()]},xe=function($e,Ne){return $e.formats[Ne]||function(Oe){return Oe.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(Fe,Ve,ze){return Ve||ze.slice(1)})}($e.formats[Ne.toUpperCase()])},Ie=function(){var $e=this;return{months:function(Ne){return Ne?Ne.format("MMMM"):_e($e,"months")},monthsShort:function(Ne){return Ne?Ne.format("MMM"):_e($e,"monthsShort","months",3)},firstDayOfWeek:function(){return $e.$locale().weekStart||0},weekdays:function(Ne){return Ne?Ne.format("dddd"):_e($e,"weekdays")},weekdaysMin:function(Ne){return Ne?Ne.format("dd"):_e($e,"weekdaysMin","weekdays",2)},weekdaysShort:function(Ne){return Ne?Ne.format("ddd"):_e($e,"weekdaysShort","weekdays",3)},longDateFormat:function(Ne){return xe($e.$locale(),Ne)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};he.localeData=function(){return Ie.bind(this)()},de.localeData=function(){var $e=Ce();return{firstDayOfWeek:function(){return $e.weekStart||0},weekdays:function(){return de.weekdays()},weekdaysShort:function(){return de.weekdaysShort()},weekdaysMin:function(){return de.weekdaysMin()},months:function(){return de.months()},monthsShort:function(){return de.monthsShort()},longDateFormat:function(Ne){return xe($e,Ne)},meridiem:$e.meridiem,ordinal:$e.ordinal}},de.months=function(){return _e(Ce(),"months")},de.monthsShort=function(){return _e(Ce(),"monthsShort","months",3)},de.weekdays=function($e){return _e(Ce(),"weekdays",null,null,$e)},de.weekdaysShort=function($e){return _e(Ce(),"weekdaysShort","weekdays",3,$e)},de.weekdaysMin=function($e){return _e(Ce(),"weekdaysMin","weekdays",2,$e)}}})})(localeData$1);var localeDataExports=localeData$1.exports;const localeData=getDefaultExportFromCjs(localeDataExports),useDateTable=(le,oe)=>{dayjs.extend(localeData);const ie=dayjs.localeData().firstDayOfWeek(),{t:ue,lang:de}=useLocale(),he=dayjs().locale(de.value),pe=computed(()=>!!le.range&&!!le.range.length),_e=computed(()=>{let Ne=[];if(pe.value){const[Oe,Fe]=le.range,Ve=rangeArr(Fe.date()-Oe.date()+1).map(Pt=>({text:Oe.date()+Pt,type:"current"}));let ze=Ve.length%7;ze=ze===0?0:7-ze;const Ue=rangeArr(ze).map((Pt,qe)=>({text:qe+1,type:"next"}));Ne=Ve.concat(Ue)}else{const Oe=le.date.startOf("month").day(),Fe=getPrevMonthLastDays(le.date,(Oe-ie+7)%7).map(Pt=>({text:Pt,type:"prev"})),Ve=getMonthDays(le.date).map(Pt=>({text:Pt,type:"current"}));Ne=[...Fe,...Ve];const ze=7-(Ne.length%7||7),Ue=rangeArr(ze).map((Pt,qe)=>({text:qe+1,type:"next"}));Ne=Ne.concat(Ue)}return toNestedArr(Ne)}),Ce=computed(()=>{const Ne=ie;return Ne===0?WEEK_DAYS.map(Oe=>ue(`el.datepicker.weeks.${Oe}`)):WEEK_DAYS.slice(Ne).concat(WEEK_DAYS.slice(0,Ne)).map(Oe=>ue(`el.datepicker.weeks.${Oe}`))}),xe=(Ne,Oe)=>{switch(Oe){case"prev":return le.date.startOf("month").subtract(1,"month").date(Ne);case"next":return le.date.startOf("month").add(1,"month").date(Ne);case"current":return le.date.date(Ne)}};return{now:he,isInRange:pe,rows:_e,weekDays:Ce,getFormattedDate:xe,handlePickDay:({text:Ne,type:Oe})=>{const Fe=xe(Ne,Oe);oe("pick",Fe)},getSlotData:({text:Ne,type:Oe})=>{const Fe=xe(Ne,Oe);return{isSelected:Fe.isSame(le.selectedDay),type:`${Oe}-month`,day:Fe.format("YYYY-MM-DD"),date:Fe.toDate()}}}},__default__$1r=defineComponent({name:"DateTable"}),_sfc_main$2g=defineComponent({...__default__$1r,props:dateTableProps,emits:dateTableEmits,setup(le,{expose:oe,emit:ie}){const ue=le,{isInRange:de,now:he,rows:pe,weekDays:_e,getFormattedDate:Ce,handlePickDay:xe,getSlotData:Ie}=useDateTable(ue,ie),$e=useNamespace("calendar-table"),Ne=useNamespace("calendar-day"),Oe=({text:Fe,type:Ve})=>{const ze=[Ve];if(Ve==="current"){const Ue=Ce(Fe,Ve);Ue.isSame(ue.selectedDay,"day")&&ze.push(Ne.is("selected")),Ue.isSame(he,"day")&&ze.push(Ne.is("today"))}return ze};return oe({getFormattedDate:Ce}),(Fe,Ve)=>(openBlock(),createElementBlock("table",{class:normalizeClass([unref($e).b(),unref($e).is("range",unref(de))]),cellspacing:"0",cellpadding:"0"},[Fe.hideHeader?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("thead",{key:0},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(_e),ze=>(openBlock(),createElementBlock("th",{key:ze},toDisplayString(ze),1))),128))])),createBaseVNode("tbody",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(pe),(ze,Ue)=>(openBlock(),createElementBlock("tr",{key:Ue,class:normalizeClass({[unref($e).e("row")]:!0,[unref($e).em("row","hide-border")]:Ue===0&&Fe.hideHeader})},[(openBlock(!0),createElementBlock(Fragment,null,renderList(ze,(Pt,qe)=>(openBlock(),createElementBlock("td",{key:qe,class:normalizeClass(Oe(Pt)),onClick:Et=>unref(xe)(Pt)},[createBaseVNode("div",{class:normalizeClass(unref(Ne).b())},[renderSlot(Fe.$slots,"date-cell",{data:unref(Ie)(Pt)},()=>[createBaseVNode("span",null,toDisplayString(Pt.text),1)])],2)],10,["onClick"]))),128))],2))),128))])],2))}});var DateTable$1=_export_sfc$1(_sfc_main$2g,[["__file","date-table.vue"]]);const adjacentMonth=(le,oe)=>{const ie=le.endOf("month"),ue=oe.startOf("month"),he=ie.isSame(ue,"week")?ue.add(1,"week"):ue;return[[le,ie],[he.startOf("week"),oe]]},threeConsecutiveMonth=(le,oe)=>{const ie=le.endOf("month"),ue=le.add(1,"month").startOf("month"),de=ie.isSame(ue,"week")?ue.add(1,"week"):ue,he=de.endOf("month"),pe=oe.startOf("month"),_e=he.isSame(pe,"week")?pe.add(1,"week"):pe;return[[le,ie],[de.startOf("week"),he],[_e.startOf("week"),oe]]},useCalendar=(le,oe,ie)=>{const{lang:ue}=useLocale(),de=ref(),he=dayjs().locale(ue.value),pe=computed({get(){return le.modelValue?Ce.value:de.value},set(ze){if(!ze)return;de.value=ze;const Ue=ze.toDate();oe(INPUT_EVENT,Ue),oe(UPDATE_MODEL_EVENT,Ue)}}),_e=computed(()=>{if(!le.range||!isArray$3(le.range)||le.range.length!==2||le.range.some(qe=>!isDate(qe)))return[];const ze=le.range.map(qe=>dayjs(qe).locale(ue.value)),[Ue,Pt]=ze;return Ue.isAfter(Pt)?[]:Ue.isSame(Pt,"month")?Oe(Ue,Pt):Ue.add(1,"month").month()!==Pt.month()?[]:Oe(Ue,Pt)}),Ce=computed(()=>le.modelValue?dayjs(le.modelValue).locale(ue.value):pe.value||(_e.value.length?_e.value[0][0]:he)),xe=computed(()=>Ce.value.subtract(1,"month").date(1)),Ie=computed(()=>Ce.value.add(1,"month").date(1)),$e=computed(()=>Ce.value.subtract(1,"year").date(1)),Ne=computed(()=>Ce.value.add(1,"year").date(1)),Oe=(ze,Ue)=>{const Pt=ze.startOf("week"),qe=Ue.endOf("week"),Et=Pt.get("month"),kt=qe.get("month");return Et===kt?[[Pt,qe]]:(Et+1)%12===kt?adjacentMonth(Pt,qe):Et+2===kt||(Et+1)%11===kt?threeConsecutiveMonth(Pt,qe):[]},Fe=ze=>{pe.value=ze};return{calculateValidatedDateRange:Oe,date:Ce,realSelectedDay:pe,pickDay:Fe,selectDate:ze=>{const Pt={"prev-month":xe.value,"next-month":Ie.value,"prev-year":$e.value,"next-year":Ne.value,today:he}[ze];Pt.isSame(Ce.value,"day")||Fe(Pt)},validatedRange:_e}},isValidRange$1=le=>isArray$3(le)&&le.length===2&&le.every(oe=>isDate(oe)),calendarProps=buildProps({modelValue:{type:Date},range:{type:definePropType(Array),validator:isValidRange$1}}),calendarEmits={[UPDATE_MODEL_EVENT]:le=>isDate(le),[INPUT_EVENT]:le=>isDate(le)},COMPONENT_NAME$g="ElCalendar",__default__$1q=defineComponent({name:COMPONENT_NAME$g}),_sfc_main$2f=defineComponent({...__default__$1q,props:calendarProps,emits:calendarEmits,setup(le,{expose:oe,emit:ie}){const ue=le,de=useNamespace("calendar"),{calculateValidatedDateRange:he,date:pe,pickDay:_e,realSelectedDay:Ce,selectDate:xe,validatedRange:Ie}=useCalendar(ue,ie),{t:$e}=useLocale(),Ne=computed(()=>{const Oe=`el.datepicker.month${pe.value.format("M")}`;return`${pe.value.year()} ${$e("el.datepicker.year")} ${$e(Oe)}`});return oe({selectedDay:Ce,pickDay:_e,selectDate:xe,calculateValidatedDateRange:he}),(Oe,Fe)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(de).b())},[createBaseVNode("div",{class:normalizeClass(unref(de).e("header"))},[renderSlot(Oe.$slots,"header",{date:unref(Ne)},()=>[createBaseVNode("div",{class:normalizeClass(unref(de).e("title"))},toDisplayString(unref(Ne)),3),unref(Ie).length===0?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(de).e("button-group"))},[createVNode(unref(ElButtonGroup$1),null,{default:withCtx(()=>[createVNode(unref(ElButton),{size:"small",onClick:Ve=>unref(xe)("prev-month")},{default:withCtx(()=>[createTextVNode(toDisplayString(unref($e)("el.datepicker.prevMonth")),1)]),_:1},8,["onClick"]),createVNode(unref(ElButton),{size:"small",onClick:Ve=>unref(xe)("today")},{default:withCtx(()=>[createTextVNode(toDisplayString(unref($e)("el.datepicker.today")),1)]),_:1},8,["onClick"]),createVNode(unref(ElButton),{size:"small",onClick:Ve=>unref(xe)("next-month")},{default:withCtx(()=>[createTextVNode(toDisplayString(unref($e)("el.datepicker.nextMonth")),1)]),_:1},8,["onClick"])]),_:1})],2)):createCommentVNode("v-if",!0)])],2),unref(Ie).length===0?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(de).e("body"))},[createVNode(DateTable$1,{date:unref(pe),"selected-day":unref(Ce),onPick:unref(_e)},createSlots({_:2},[Oe.$slots["date-cell"]?{name:"date-cell",fn:withCtx(Ve=>[renderSlot(Oe.$slots,"date-cell",normalizeProps(guardReactiveProps(Ve)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(de).e("body"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Ie),(Ve,ze)=>(openBlock(),createBlock(DateTable$1,{key:ze,date:Ve[0],"selected-day":unref(Ce),range:Ve,"hide-header":ze!==0,onPick:unref(_e)},createSlots({_:2},[Oe.$slots["date-cell"]?{name:"date-cell",fn:withCtx(Ue=>[renderSlot(Oe.$slots,"date-cell",normalizeProps(guardReactiveProps(Ue)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2))}});var Calendar=_export_sfc$1(_sfc_main$2f,[["__file","calendar.vue"]]);const ElCalendar=withInstall(Calendar),cardProps=buildProps({header:{type:String,default:""},footer:{type:String,default:""},bodyStyle:{type:definePropType([String,Object,Array]),default:""},bodyClass:String,shadow:{type:String,values:["always","hover","never"],default:"always"}}),__default__$1p=defineComponent({name:"ElCard"}),_sfc_main$2e=defineComponent({...__default__$1p,props:cardProps,setup(le){const oe=useNamespace("card");return(ie,ue)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(oe).b(),unref(oe).is(`${ie.shadow}-shadow`)])},[ie.$slots.header||ie.header?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(oe).e("header"))},[renderSlot(ie.$slots,"header",{},()=>[createTextVNode(toDisplayString(ie.header),1)])],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass([unref(oe).e("body"),ie.bodyClass]),style:normalizeStyle(ie.bodyStyle)},[renderSlot(ie.$slots,"default")],6),ie.$slots.footer||ie.footer?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(oe).e("footer"))},[renderSlot(ie.$slots,"footer",{},()=>[createTextVNode(toDisplayString(ie.footer),1)])],2)):createCommentVNode("v-if",!0)],2))}});var Card=_export_sfc$1(_sfc_main$2e,[["__file","card.vue"]]);const ElCard=withInstall(Card),carouselProps=buildProps({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},cardScale:{type:Number,default:.83},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0},motionBlur:Boolean}),carouselEmits={change:(le,oe)=>[le,oe].every(isNumber)},carouselContextKey=Symbol("carouselContextKey"),CAROUSEL_ITEM_NAME="ElCarouselItem",THROTTLE_TIME=300,useCarousel=(le,oe,ie)=>{const{children:ue,addChild:de,removeChild:he}=useOrderedChildren(getCurrentInstance(),CAROUSEL_ITEM_NAME),pe=useSlots(),_e=ref(-1),Ce=ref(null),xe=ref(!1),Ie=ref(),$e=ref(0),Ne=ref(!0),Oe=ref(!0),Fe=ref(!1),Ve=computed(()=>le.arrow!=="never"&&!unref(Pt)),ze=computed(()=>ue.value.some(Hn=>Hn.props.label.toString().length>0)),Ue=computed(()=>le.type==="card"),Pt=computed(()=>le.direction==="vertical"),qe=computed(()=>le.height!=="auto"?{height:le.height}:{height:`${$e.value}px`,overflow:"hidden"}),Et=throttle(Hn=>{_n(Hn)},THROTTLE_TIME,{trailing:!0}),kt=throttle(Hn=>{En(Hn)},THROTTLE_TIME),At=Hn=>Ne.value?_e.value<=1?Hn<=1:Hn>1:!0;function Dt(){Ce.value&&(clearInterval(Ce.value),Ce.value=null)}function Lt(){le.interval<=0||!le.autoplay||Ce.value||(Ce.value=setInterval(()=>jt(),le.interval))}const jt=()=>{Oe.value||(Fe.value=!0),Oe.value=!1,_e.value<ue.value.length-1?_e.value=_e.value+1:le.loop?_e.value=0:Fe.value=!1};function _n(Hn){if(Oe.value||(Fe.value=!0),Oe.value=!1,isString$1(Hn)){const Qn=ue.value.filter(_r=>_r.props.name===Hn);Qn.length>0&&(Hn=ue.value.indexOf(Qn[0]))}if(Hn=Number(Hn),Number.isNaN(Hn)||Hn!==Math.floor(Hn))return;const Rn=ue.value.length,Jn=_e.value;Hn<0?_e.value=le.loop?Rn-1:0:Hn>=Rn?_e.value=le.loop?0:Rn-1:_e.value=Hn,Jn===_e.value&&bn(Jn),On()}function bn(Hn){ue.value.forEach((Rn,Jn)=>{Rn.translateItem(Jn,_e.value,Hn)})}function vn(Hn,Rn){var Jn,Qn,_r,Zn;const Gn=unref(ue),Nn=Gn.length;if(Nn===0||!Hn.states.inStage)return!1;const Dn=Rn+1,jn=Rn-1,ir=Nn-1,Fn=Gn[ir].states.active,Kn=Gn[0].states.active,mr=(Qn=(Jn=Gn[Dn])==null?void 0:Jn.states)==null?void 0:Qn.active,yr=(Zn=(_r=Gn[jn])==null?void 0:_r.states)==null?void 0:Zn.active;return Rn===ir&&Kn||mr?"left":Rn===0&&Fn||yr?"right":!1}function Tn(){xe.value=!0,le.pauseOnHover&&Dt()}function $n(){xe.value=!1,Lt()}function wn(){Fe.value=!1}function Cn(Hn){unref(Pt)||ue.value.forEach((Rn,Jn)=>{Hn===vn(Rn,Jn)&&(Rn.states.hover=!0)})}function Sn(){unref(Pt)||ue.value.forEach(Hn=>{Hn.states.hover=!1})}function In(Hn){Hn!==_e.value&&(Oe.value||(Fe.value=!0)),_e.value=Hn}function En(Hn){le.trigger==="hover"&&Hn!==_e.value&&(_e.value=Hn,Oe.value||(Fe.value=!0))}function xn(){_n(_e.value-1)}function kn(){_n(_e.value+1)}function On(){Dt(),le.pauseOnHover||Lt()}function Mn(Hn){le.height==="auto"&&($e.value=Hn)}function Un(){var Hn;const Rn=(Hn=pe.default)==null?void 0:Hn.call(pe);if(!Rn)return null;const Qn=flattedChildren(Rn).filter(_r=>isVNode(_r)&&_r.type.name===CAROUSEL_ITEM_NAME);return(Qn==null?void 0:Qn.length)===2&&le.loop&&!Ue.value?(Ne.value=!0,Qn):(Ne.value=!1,null)}watch(()=>_e.value,(Hn,Rn)=>{bn(Rn),Ne.value&&(Hn=Hn%2,Rn=Rn%2),Rn>-1&&oe("change",Hn,Rn)}),watch(()=>le.autoplay,Hn=>{Hn?Lt():Dt()}),watch(()=>le.loop,()=>{_n(_e.value)}),watch(()=>le.interval,()=>{On()});const zn=shallowRef();return onMounted(()=>{watch(()=>ue.value,()=>{ue.value.length>0&&_n(le.initialIndex)},{immediate:!0}),zn.value=useResizeObserver(Ie.value,()=>{bn()}),Lt()}),onBeforeUnmount(()=>{Dt(),Ie.value&&zn.value&&zn.value.stop()}),provide(carouselContextKey,{root:Ie,isCardType:Ue,isVertical:Pt,items:ue,loop:le.loop,cardScale:le.cardScale,addItem:de,removeItem:he,setActiveItem:_n,setContainerHeight:Mn}),{root:Ie,activeIndex:_e,arrowDisplay:Ve,hasLabel:ze,hover:xe,isCardType:Ue,isTransitioning:Fe,items:ue,isVertical:Pt,containerStyle:qe,isItemsTwoLength:Ne,handleButtonEnter:Cn,handleTransitionEnd:wn,handleButtonLeave:Sn,handleIndicatorClick:In,handleMouseEnter:Tn,handleMouseLeave:$n,setActiveItem:_n,prev:xn,next:kn,PlaceholderItem:Un,isTwoLengthShow:At,throttledArrowClick:Et,throttledIndicatorHover:kt}},COMPONENT_NAME$f="ElCarousel",__default__$1o=defineComponent({name:COMPONENT_NAME$f}),_sfc_main$2d=defineComponent({...__default__$1o,props:carouselProps,emits:carouselEmits,setup(le,{expose:oe,emit:ie}){const ue=le,{root:de,activeIndex:he,arrowDisplay:pe,hasLabel:_e,hover:Ce,isCardType:xe,items:Ie,isVertical:$e,containerStyle:Ne,handleButtonEnter:Oe,handleButtonLeave:Fe,isTransitioning:Ve,handleIndicatorClick:ze,handleMouseEnter:Ue,handleMouseLeave:Pt,handleTransitionEnd:qe,setActiveItem:Et,prev:kt,next:At,PlaceholderItem:Dt,isTwoLengthShow:Lt,throttledArrowClick:jt,throttledIndicatorHover:_n}=useCarousel(ue,ie),bn=useNamespace("carousel"),{t:vn}=useLocale(),Tn=computed(()=>{const Cn=[bn.b(),bn.m(ue.direction)];return unref(xe)&&Cn.push(bn.m("card")),Cn}),$n=computed(()=>{const Cn=[bn.e("container")];return ue.motionBlur&&unref(Ve)&&Ie.value.length>1&&Cn.push(unref($e)?`${bn.namespace.value}-transitioning-vertical`:`${bn.namespace.value}-transitioning`),Cn}),wn=computed(()=>{const Cn=[bn.e("indicators"),bn.em("indicators",ue.direction)];return unref(_e)&&Cn.push(bn.em("indicators","labels")),ue.indicatorPosition==="outside"&&Cn.push(bn.em("indicators","outside")),unref($e)&&Cn.push(bn.em("indicators","right")),Cn});return oe({activeIndex:he,setActiveItem:Et,prev:kt,next:At}),(Cn,Sn)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:de,class:normalizeClass(unref(Tn)),onMouseenter:withModifiers(unref(Ue),["stop"]),onMouseleave:withModifiers(unref(Pt),["stop"])},[unref(pe)?(openBlock(),createBlock(Transition,{key:0,name:"carousel-arrow-left",persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("button",{type:"button",class:normalizeClass([unref(bn).e("arrow"),unref(bn).em("arrow","left")]),"aria-label":unref(vn)("el.carousel.leftArrow"),onMouseenter:In=>unref(Oe)("left"),onMouseleave:unref(Fe),onClick:withModifiers(In=>unref(jt)(unref(he)-1),["stop"])},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_left_default))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[vShow,(Cn.arrow==="always"||unref(Ce))&&(ue.loop||unref(he)>0)]])]),_:1})):createCommentVNode("v-if",!0),unref(pe)?(openBlock(),createBlock(Transition,{key:1,name:"carousel-arrow-right",persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("button",{type:"button",class:normalizeClass([unref(bn).e("arrow"),unref(bn).em("arrow","right")]),"aria-label":unref(vn)("el.carousel.rightArrow"),onMouseenter:In=>unref(Oe)("right"),onMouseleave:unref(Fe),onClick:withModifiers(In=>unref(jt)(unref(he)+1),["stop"])},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[vShow,(Cn.arrow==="always"||unref(Ce))&&(ue.loop||unref(he)<unref(Ie).length-1)]])]),_:1})):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref($n)),style:normalizeStyle(unref(Ne)),onTransitionend:unref(qe)},[createVNode(unref(Dt)),renderSlot(Cn.$slots,"default")],46,["onTransitionend"]),Cn.indicatorPosition!=="none"?(openBlock(),createElementBlock("ul",{key:2,class:normalizeClass(unref(wn))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Ie),(In,En)=>withDirectives((openBlock(),createElementBlock("li",{key:En,class:normalizeClass([unref(bn).e("indicator"),unref(bn).em("indicator",Cn.direction),unref(bn).is("active",En===unref(he))]),onMouseenter:xn=>unref(_n)(En),onClick:withModifiers(xn=>unref(ze)(En),["stop"])},[createBaseVNode("button",{class:normalizeClass(unref(bn).e("button")),"aria-label":unref(vn)("el.carousel.indicator",{index:En+1})},[unref(_e)?(openBlock(),createElementBlock("span",{key:0},toDisplayString(In.props.label),1)):createCommentVNode("v-if",!0)],10,["aria-label"])],42,["onMouseenter","onClick"])),[[vShow,unref(Lt)(En)]])),128))],2)):createCommentVNode("v-if",!0),ue.motionBlur?(openBlock(),createElementBlock("svg",{key:3,xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{display:"none"}},[createBaseVNode("defs",null,[createBaseVNode("filter",{id:"elCarouselHorizontal"},[createBaseVNode("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"12,0"})]),createBaseVNode("filter",{id:"elCarouselVertical"},[createBaseVNode("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"0,10"})])])])):createCommentVNode("v-if",!0)],42,["onMouseenter","onMouseleave"]))}});var Carousel$2=_export_sfc$1(_sfc_main$2d,[["__file","carousel.vue"]]);const carouselItemProps=buildProps({name:{type:String,default:""},label:{type:[String,Number],default:""}}),useCarouselItem=le=>{const oe=inject(carouselContextKey),ie=getCurrentInstance(),ue=ref(),de=ref(!1),he=ref(0),pe=ref(1),_e=ref(!1),Ce=ref(!1),xe=ref(!1),Ie=ref(!1),{isCardType:$e,isVertical:Ne,cardScale:Oe}=oe;function Fe(qe,Et,kt){const At=kt-1,Dt=Et-1,Lt=Et+1,jt=kt/2;return Et===0&&qe===At?-1:Et===At&&qe===0?kt:qe<Dt&&Et-qe>=jt?kt+1:qe>Lt&&qe-Et>=jt?-2:qe}function Ve(qe,Et){var kt,At;const Dt=unref(Ne)?((kt=oe.root.value)==null?void 0:kt.offsetHeight)||0:((At=oe.root.value)==null?void 0:At.offsetWidth)||0;return xe.value?Dt*((2-Oe)*(qe-Et)+1)/4:qe<Et?-(1+Oe)*Dt/4:(3+Oe)*Dt/4}function ze(qe,Et,kt){const At=oe.root.value;return At?((kt?At.offsetHeight:At.offsetWidth)||0)*(qe-Et):0}const Ue=(qe,Et,kt)=>{var At;const Dt=unref($e),Lt=(At=oe.items.value.length)!=null?At:Number.NaN,jt=qe===Et;!Dt&&!isUndefined(kt)&&(Ie.value=jt||qe===kt),!jt&&Lt>2&&oe.loop&&(qe=Fe(qe,Et,Lt));const _n=unref(Ne);_e.value=jt,Dt?(xe.value=Math.round(Math.abs(qe-Et))<=1,he.value=Ve(qe,Et),pe.value=unref(_e)?1:Oe):he.value=ze(qe,Et,_n),Ce.value=!0,jt&&ue.value&&oe.setContainerHeight(ue.value.offsetHeight)};function Pt(){if(oe&&unref($e)){const qe=oe.items.value.findIndex(({uid:Et})=>Et===ie.uid);oe.setActiveItem(qe)}}return onMounted(()=>{oe.addItem({props:le,states:reactive({hover:de,translate:he,scale:pe,active:_e,ready:Ce,inStage:xe,animating:Ie}),uid:ie.uid,translateItem:Ue})}),onUnmounted(()=>{oe.removeItem(ie.uid)}),{carouselItemRef:ue,active:_e,animating:Ie,hover:de,inStage:xe,isVertical:Ne,translate:he,isCardType:$e,scale:pe,ready:Ce,handleItemClick:Pt}},__default__$1n=defineComponent({name:CAROUSEL_ITEM_NAME}),_sfc_main$2c=defineComponent({...__default__$1n,props:carouselItemProps,setup(le){const oe=le,ie=useNamespace("carousel"),{carouselItemRef:ue,active:de,animating:he,hover:pe,inStage:_e,isVertical:Ce,translate:xe,isCardType:Ie,scale:$e,ready:Ne,handleItemClick:Oe}=useCarouselItem(oe),Fe=computed(()=>[ie.e("item"),ie.is("active",de.value),ie.is("in-stage",_e.value),ie.is("hover",pe.value),ie.is("animating",he.value),{[ie.em("item","card")]:Ie.value,[ie.em("item","card-vertical")]:Ie.value&&Ce.value}]),Ve=computed(()=>{const Ue=`${`translate${unref(Ce)?"Y":"X"}`}(${unref(xe)}px)`,Pt=`scale(${unref($e)})`;return{transform:[Ue,Pt].join(" ")}});return(ze,Ue)=>withDirectives((openBlock(),createElementBlock("div",{ref_key:"carouselItemRef",ref:ue,class:normalizeClass(unref(Fe)),style:normalizeStyle(unref(Ve)),onClick:unref(Oe)},[unref(Ie)?withDirectives((openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(ie).e("mask"))},null,2)),[[vShow,!unref(de)]]):createCommentVNode("v-if",!0),renderSlot(ze.$slots,"default")],14,["onClick"])),[[vShow,unref(Ne)]])}});var CarouselItem=_export_sfc$1(_sfc_main$2c,[["__file","carousel-item.vue"]]);const ElCarousel=withInstall(Carousel$2,{CarouselItem}),ElCarouselItem=withNoopInstall(CarouselItem),checkboxProps={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object],default:void 0},value:{type:[String,Boolean,Number,Object],default:void 0},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueValue:{type:[String,Number],default:void 0},falseValue:{type:[String,Number],default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},border:Boolean,size:useSizeProp,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0},...useAriaProps(["ariaControls"])},checkboxEmits={[UPDATE_MODEL_EVENT]:le=>isString$1(le)||isNumber(le)||isBoolean(le),change:le=>isString$1(le)||isNumber(le)||isBoolean(le)},checkboxGroupContextKey=Symbol("checkboxGroupContextKey"),useCheckboxDisabled=({model:le,isChecked:oe})=>{const ie=inject(checkboxGroupContextKey,void 0),ue=computed(()=>{var he,pe;const _e=(he=ie==null?void 0:ie.max)==null?void 0:he.value,Ce=(pe=ie==null?void 0:ie.min)==null?void 0:pe.value;return!isUndefined(_e)&&le.value.length>=_e&&!oe.value||!isUndefined(Ce)&&le.value.length<=Ce&&oe.value});return{isDisabled:useFormDisabled(computed(()=>(ie==null?void 0:ie.disabled.value)||ue.value)),isLimitDisabled:ue}},useCheckboxEvent=(le,{model:oe,isLimitExceeded:ie,hasOwnLabel:ue,isDisabled:de,isLabeledByFormItem:he})=>{const pe=inject(checkboxGroupContextKey,void 0),{formItem:_e}=useFormItem(),{emit:Ce}=getCurrentInstance();function xe(Fe){var Ve,ze,Ue,Pt;return[!0,le.trueValue,le.trueLabel].includes(Fe)?(ze=(Ve=le.trueValue)!=null?Ve:le.trueLabel)!=null?ze:!0:(Pt=(Ue=le.falseValue)!=null?Ue:le.falseLabel)!=null?Pt:!1}function Ie(Fe,Ve){Ce("change",xe(Fe),Ve)}function $e(Fe){if(ie.value)return;const Ve=Fe.target;Ce("change",xe(Ve.checked),Fe)}async function Ne(Fe){ie.value||!ue.value&&!de.value&&he.value&&(Fe.composedPath().some(Ue=>Ue.tagName==="LABEL")||(oe.value=xe([!1,le.falseValue,le.falseLabel].includes(oe.value)),await nextTick(),Ie(oe.value,Fe)))}const Oe=computed(()=>(pe==null?void 0:pe.validateEvent)||le.validateEvent);return watch(()=>le.modelValue,()=>{Oe.value&&(_e==null||_e.validate("change").catch(Fe=>void 0))}),{handleChange:$e,onClickRoot:Ne}},useCheckboxModel=le=>{const oe=ref(!1),{emit:ie}=getCurrentInstance(),ue=inject(checkboxGroupContextKey,void 0),de=computed(()=>isUndefined(ue)===!1),he=ref(!1),pe=computed({get(){var _e,Ce;return de.value?(_e=ue==null?void 0:ue.modelValue)==null?void 0:_e.value:(Ce=le.modelValue)!=null?Ce:oe.value},set(_e){var Ce,xe;de.value&&isArray$3(_e)?(he.value=((Ce=ue==null?void 0:ue.max)==null?void 0:Ce.value)!==void 0&&_e.length>(ue==null?void 0:ue.max.value)&&_e.length>pe.value.length,he.value===!1&&((xe=ue==null?void 0:ue.changeEvent)==null||xe.call(ue,_e))):(ie(UPDATE_MODEL_EVENT,_e),oe.value=_e)}});return{model:pe,isGroup:de,isLimitExceeded:he}},useCheckboxStatus=(le,oe,{model:ie})=>{const ue=inject(checkboxGroupContextKey,void 0),de=ref(!1),he=computed(()=>isPropAbsent(le.value)?le.label:le.value),pe=computed(()=>{const Ie=ie.value;return isBoolean(Ie)?Ie:isArray$3(Ie)?isObject$d(he.value)?Ie.map(toRaw).some($e=>isEqual$1($e,he.value)):Ie.map(toRaw).includes(he.value):Ie!=null?Ie===le.trueValue||Ie===le.trueLabel:!!Ie}),_e=useFormSize(computed(()=>{var Ie;return(Ie=ue==null?void 0:ue.size)==null?void 0:Ie.value}),{prop:!0}),Ce=useFormSize(computed(()=>{var Ie;return(Ie=ue==null?void 0:ue.size)==null?void 0:Ie.value})),xe=computed(()=>!!oe.default||!isPropAbsent(he.value));return{checkboxButtonSize:_e,isChecked:pe,isFocused:de,checkboxSize:Ce,hasOwnLabel:xe,actualValue:he}},useCheckbox=(le,oe)=>{const{formItem:ie}=useFormItem(),{model:ue,isGroup:de,isLimitExceeded:he}=useCheckboxModel(le),{isFocused:pe,isChecked:_e,checkboxButtonSize:Ce,checkboxSize:xe,hasOwnLabel:Ie,actualValue:$e}=useCheckboxStatus(le,oe,{model:ue}),{isDisabled:Ne}=useCheckboxDisabled({model:ue,isChecked:_e}),{inputId:Oe,isLabeledByFormItem:Fe}=useFormItemInputId(le,{formItemContext:ie,disableIdGeneration:Ie,disableIdManagement:de}),{handleChange:Ve,onClickRoot:ze}=useCheckboxEvent(le,{model:ue,isLimitExceeded:he,hasOwnLabel:Ie,isDisabled:Ne,isLabeledByFormItem:Fe});return(()=>{function Pt(){var qe,Et;isArray$3(ue.value)&&!ue.value.includes($e.value)?ue.value.push($e.value):ue.value=(Et=(qe=le.trueValue)!=null?qe:le.trueLabel)!=null?Et:!0}le.checked&&Pt()})(),useDeprecated({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},computed(()=>de.value&&isPropAbsent(le.value))),useDeprecated({from:"true-label",replacement:"true-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},computed(()=>!!le.trueLabel)),useDeprecated({from:"false-label",replacement:"false-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},computed(()=>!!le.falseLabel)),{inputId:Oe,isLabeledByFormItem:Fe,isChecked:_e,isDisabled:Ne,isFocused:pe,checkboxButtonSize:Ce,checkboxSize:xe,hasOwnLabel:Ie,model:ue,actualValue:$e,handleChange:Ve,onClickRoot:ze}},__default__$1m=defineComponent({name:"ElCheckbox"}),_sfc_main$2b=defineComponent({...__default__$1m,props:checkboxProps,emits:checkboxEmits,setup(le){const oe=le,ie=useSlots(),{inputId:ue,isLabeledByFormItem:de,isChecked:he,isDisabled:pe,isFocused:_e,checkboxSize:Ce,hasOwnLabel:xe,model:Ie,actualValue:$e,handleChange:Ne,onClickRoot:Oe}=useCheckbox(oe,ie),Fe=useNamespace("checkbox"),Ve=computed(()=>[Fe.b(),Fe.m(Ce.value),Fe.is("disabled",pe.value),Fe.is("bordered",oe.border),Fe.is("checked",he.value)]),ze=computed(()=>[Fe.e("input"),Fe.is("disabled",pe.value),Fe.is("checked",he.value),Fe.is("indeterminate",oe.indeterminate),Fe.is("focus",_e.value)]);return(Ue,Pt)=>(openBlock(),createBlock(resolveDynamicComponent(!unref(xe)&&unref(de)?"span":"label"),{class:normalizeClass(unref(Ve)),"aria-controls":Ue.indeterminate?Ue.ariaControls:null,onClick:unref(Oe)},{default:withCtx(()=>{var qe,Et,kt,At;return[createBaseVNode("span",{class:normalizeClass(unref(ze))},[Ue.trueValue||Ue.falseValue||Ue.trueLabel||Ue.falseLabel?withDirectives((openBlock(),createElementBlock("input",{key:0,id:unref(ue),"onUpdate:modelValue":Dt=>isRef(Ie)?Ie.value=Dt:null,class:normalizeClass(unref(Fe).e("original")),type:"checkbox",indeterminate:Ue.indeterminate,name:Ue.name,tabindex:Ue.tabindex,disabled:unref(pe),"true-value":(Et=(qe=Ue.trueValue)!=null?qe:Ue.trueLabel)!=null?Et:!0,"false-value":(At=(kt=Ue.falseValue)!=null?kt:Ue.falseLabel)!=null?At:!1,onChange:unref(Ne),onFocus:Dt=>_e.value=!0,onBlur:Dt=>_e.value=!1,onClick:withModifiers(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[vModelCheckbox,unref(Ie)]]):withDirectives((openBlock(),createElementBlock("input",{key:1,id:unref(ue),"onUpdate:modelValue":Dt=>isRef(Ie)?Ie.value=Dt:null,class:normalizeClass(unref(Fe).e("original")),type:"checkbox",indeterminate:Ue.indeterminate,disabled:unref(pe),value:unref($e),name:Ue.name,tabindex:Ue.tabindex,onChange:unref(Ne),onFocus:Dt=>_e.value=!0,onBlur:Dt=>_e.value=!1,onClick:withModifiers(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","disabled","value","name","tabindex","onChange","onFocus","onBlur","onClick"])),[[vModelCheckbox,unref(Ie)]]),createBaseVNode("span",{class:normalizeClass(unref(Fe).e("inner"))},null,2)],2),unref(xe)?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(Fe).e("label"))},[renderSlot(Ue.$slots,"default"),Ue.$slots.default?createCommentVNode("v-if",!0):(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString(Ue.label),1)],64))],2)):createCommentVNode("v-if",!0)]}),_:3},8,["class","aria-controls","onClick"]))}});var Checkbox=_export_sfc$1(_sfc_main$2b,[["__file","checkbox.vue"]]);const __default__$1l=defineComponent({name:"ElCheckboxButton"}),_sfc_main$2a=defineComponent({...__default__$1l,props:checkboxProps,emits:checkboxEmits,setup(le){const oe=le,ie=useSlots(),{isFocused:ue,isChecked:de,isDisabled:he,checkboxButtonSize:pe,model:_e,actualValue:Ce,handleChange:xe}=useCheckbox(oe,ie),Ie=inject(checkboxGroupContextKey,void 0),$e=useNamespace("checkbox"),Ne=computed(()=>{var Fe,Ve,ze,Ue;const Pt=(Ve=(Fe=Ie==null?void 0:Ie.fill)==null?void 0:Fe.value)!=null?Ve:"";return{backgroundColor:Pt,borderColor:Pt,color:(Ue=(ze=Ie==null?void 0:Ie.textColor)==null?void 0:ze.value)!=null?Ue:"",boxShadow:Pt?`-1px 0 0 0 ${Pt}`:void 0}}),Oe=computed(()=>[$e.b("button"),$e.bm("button",pe.value),$e.is("disabled",he.value),$e.is("checked",de.value),$e.is("focus",ue.value)]);return(Fe,Ve)=>{var ze,Ue,Pt,qe;return openBlock(),createElementBlock("label",{class:normalizeClass(unref(Oe))},[Fe.trueValue||Fe.falseValue||Fe.trueLabel||Fe.falseLabel?withDirectives((openBlock(),createElementBlock("input",{key:0,"onUpdate:modelValue":Et=>isRef(_e)?_e.value=Et:null,class:normalizeClass(unref($e).be("button","original")),type:"checkbox",name:Fe.name,tabindex:Fe.tabindex,disabled:unref(he),"true-value":(Ue=(ze=Fe.trueValue)!=null?ze:Fe.trueLabel)!=null?Ue:!0,"false-value":(qe=(Pt=Fe.falseValue)!=null?Pt:Fe.falseLabel)!=null?qe:!1,onChange:unref(xe),onFocus:Et=>ue.value=!0,onBlur:Et=>ue.value=!1,onClick:withModifiers(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[vModelCheckbox,unref(_e)]]):withDirectives((openBlock(),createElementBlock("input",{key:1,"onUpdate:modelValue":Et=>isRef(_e)?_e.value=Et:null,class:normalizeClass(unref($e).be("button","original")),type:"checkbox",name:Fe.name,tabindex:Fe.tabindex,disabled:unref(he),value:unref(Ce),onChange:unref(xe),onFocus:Et=>ue.value=!0,onBlur:Et=>ue.value=!1,onClick:withModifiers(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","value","onChange","onFocus","onBlur","onClick"])),[[vModelCheckbox,unref(_e)]]),Fe.$slots.default||Fe.label?(openBlock(),createElementBlock("span",{key:2,class:normalizeClass(unref($e).be("button","inner")),style:normalizeStyle(unref(de)?unref(Ne):void 0)},[renderSlot(Fe.$slots,"default",{},()=>[createTextVNode(toDisplayString(Fe.label),1)])],6)):createCommentVNode("v-if",!0)],2)}}});var CheckboxButton=_export_sfc$1(_sfc_main$2a,[["__file","checkbox-button.vue"]]);const checkboxGroupProps=buildProps({modelValue:{type:definePropType(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:useSizeProp,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0},...useAriaProps(["ariaLabel"])}),checkboxGroupEmits={[UPDATE_MODEL_EVENT]:le=>isArray$3(le),change:le=>isArray$3(le)},__default__$1k=defineComponent({name:"ElCheckboxGroup"}),_sfc_main$29=defineComponent({...__default__$1k,props:checkboxGroupProps,emits:checkboxGroupEmits,setup(le,{emit:oe}){const ie=le,ue=useNamespace("checkbox"),{formItem:de}=useFormItem(),{inputId:he,isLabeledByFormItem:pe}=useFormItemInputId(ie,{formItemContext:de}),_e=async xe=>{oe(UPDATE_MODEL_EVENT,xe),await nextTick(),oe("change",xe)},Ce=computed({get(){return ie.modelValue},set(xe){_e(xe)}});return provide(checkboxGroupContextKey,{...pick(toRefs(ie),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:Ce,changeEvent:_e}),watch(()=>ie.modelValue,()=>{ie.validateEvent&&(de==null||de.validate("change").catch(xe=>void 0))}),(xe,Ie)=>{var $e;return openBlock(),createBlock(resolveDynamicComponent(xe.tag),{id:unref(he),class:normalizeClass(unref(ue).b("group")),role:"group","aria-label":unref(pe)?void 0:xe.ariaLabel||"checkbox-group","aria-labelledby":unref(pe)?($e=unref(de))==null?void 0:$e.labelId:void 0},{default:withCtx(()=>[renderSlot(xe.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var CheckboxGroup=_export_sfc$1(_sfc_main$29,[["__file","checkbox-group.vue"]]);const ElCheckbox=withInstall(Checkbox,{CheckboxButton,CheckboxGroup}),ElCheckboxButton=withNoopInstall(CheckboxButton),ElCheckboxGroup$1=withNoopInstall(CheckboxGroup),radioPropsBase=buildProps({modelValue:{type:[String,Number,Boolean],default:void 0},size:useSizeProp,disabled:Boolean,label:{type:[String,Number,Boolean],default:void 0},value:{type:[String,Number,Boolean],default:void 0},name:{type:String,default:void 0}}),radioProps=buildProps({...radioPropsBase,border:Boolean}),radioEmits={[UPDATE_MODEL_EVENT]:le=>isString$1(le)||isNumber(le)||isBoolean(le),[CHANGE_EVENT]:le=>isString$1(le)||isNumber(le)||isBoolean(le)},radioGroupKey=Symbol("radioGroupKey"),useRadio=(le,oe)=>{const ie=ref(),ue=inject(radioGroupKey,void 0),de=computed(()=>!!ue),he=computed(()=>isPropAbsent(le.value)?le.label:le.value),pe=computed({get(){return de.value?ue.modelValue:le.modelValue},set($e){de.value?ue.changeEvent($e):oe&&oe(UPDATE_MODEL_EVENT,$e),ie.value.checked=le.modelValue===he.value}}),_e=useFormSize(computed(()=>ue==null?void 0:ue.size)),Ce=useFormDisabled(computed(()=>ue==null?void 0:ue.disabled)),xe=ref(!1),Ie=computed(()=>Ce.value||de.value&&pe.value!==he.value?-1:0);return useDeprecated({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-radio",ref:"https://element-plus.org/en-US/component/radio.html"},computed(()=>de.value&&isPropAbsent(le.value))),{radioRef:ie,isGroup:de,radioGroup:ue,focus:xe,size:_e,disabled:Ce,tabIndex:Ie,modelValue:pe,actualValue:he}},__default__$1j=defineComponent({name:"ElRadio"}),_sfc_main$28=defineComponent({...__default__$1j,props:radioProps,emits:radioEmits,setup(le,{emit:oe}){const ie=le,ue=useNamespace("radio"),{radioRef:de,radioGroup:he,focus:pe,size:_e,disabled:Ce,modelValue:xe,actualValue:Ie}=useRadio(ie,oe);function $e(){nextTick(()=>oe("change",xe.value))}return(Ne,Oe)=>{var Fe;return openBlock(),createElementBlock("label",{class:normalizeClass([unref(ue).b(),unref(ue).is("disabled",unref(Ce)),unref(ue).is("focus",unref(pe)),unref(ue).is("bordered",Ne.border),unref(ue).is("checked",unref(xe)===unref(Ie)),unref(ue).m(unref(_e))])},[createBaseVNode("span",{class:normalizeClass([unref(ue).e("input"),unref(ue).is("disabled",unref(Ce)),unref(ue).is("checked",unref(xe)===unref(Ie))])},[withDirectives(createBaseVNode("input",{ref_key:"radioRef",ref:de,"onUpdate:modelValue":Ve=>isRef(xe)?xe.value=Ve:null,class:normalizeClass(unref(ue).e("original")),value:unref(Ie),name:Ne.name||((Fe=unref(he))==null?void 0:Fe.name),disabled:unref(Ce),checked:unref(xe)===unref(Ie),type:"radio",onFocus:Ve=>pe.value=!0,onBlur:Ve=>pe.value=!1,onChange:$e,onClick:withModifiers(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","checked","onFocus","onBlur","onClick"]),[[vModelRadio,unref(xe)]]),createBaseVNode("span",{class:normalizeClass(unref(ue).e("inner"))},null,2)],2),createBaseVNode("span",{class:normalizeClass(unref(ue).e("label")),onKeydown:withModifiers(()=>{},["stop"])},[renderSlot(Ne.$slots,"default",{},()=>[createTextVNode(toDisplayString(Ne.label),1)])],42,["onKeydown"])],2)}}});var Radio=_export_sfc$1(_sfc_main$28,[["__file","radio.vue"]]);const radioButtonProps=buildProps({...radioPropsBase}),__default__$1i=defineComponent({name:"ElRadioButton"}),_sfc_main$27=defineComponent({...__default__$1i,props:radioButtonProps,setup(le){const oe=le,ie=useNamespace("radio"),{radioRef:ue,focus:de,size:he,disabled:pe,modelValue:_e,radioGroup:Ce,actualValue:xe}=useRadio(oe),Ie=computed(()=>({backgroundColor:(Ce==null?void 0:Ce.fill)||"",borderColor:(Ce==null?void 0:Ce.fill)||"",boxShadow:Ce!=null&&Ce.fill?`-1px 0 0 0 ${Ce.fill}`:"",color:(Ce==null?void 0:Ce.textColor)||""}));return($e,Ne)=>{var Oe;return openBlock(),createElementBlock("label",{class:normalizeClass([unref(ie).b("button"),unref(ie).is("active",unref(_e)===unref(xe)),unref(ie).is("disabled",unref(pe)),unref(ie).is("focus",unref(de)),unref(ie).bm("button",unref(he))])},[withDirectives(createBaseVNode("input",{ref_key:"radioRef",ref:ue,"onUpdate:modelValue":Fe=>isRef(_e)?_e.value=Fe:null,class:normalizeClass(unref(ie).be("button","original-radio")),value:unref(xe),type:"radio",name:$e.name||((Oe=unref(Ce))==null?void 0:Oe.name),disabled:unref(pe),onFocus:Fe=>de.value=!0,onBlur:Fe=>de.value=!1,onClick:withModifiers(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","onFocus","onBlur","onClick"]),[[vModelRadio,unref(_e)]]),createBaseVNode("span",{class:normalizeClass(unref(ie).be("button","inner")),style:normalizeStyle(unref(_e)===unref(xe)?unref(Ie):{}),onKeydown:withModifiers(()=>{},["stop"])},[renderSlot($e.$slots,"default",{},()=>[createTextVNode(toDisplayString($e.label),1)])],46,["onKeydown"])],2)}}});var RadioButton=_export_sfc$1(_sfc_main$27,[["__file","radio-button.vue"]]);const radioGroupProps=buildProps({id:{type:String,default:void 0},size:useSizeProp,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:void 0},fill:{type:String,default:""},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0},...useAriaProps(["ariaLabel"])}),radioGroupEmits=radioEmits,__default__$1h=defineComponent({name:"ElRadioGroup"}),_sfc_main$26=defineComponent({...__default__$1h,props:radioGroupProps,emits:radioGroupEmits,setup(le,{emit:oe}){const ie=le,ue=useNamespace("radio"),de=useId(),he=ref(),{formItem:pe}=useFormItem(),{inputId:_e,isLabeledByFormItem:Ce}=useFormItemInputId(ie,{formItemContext:pe}),xe=$e=>{oe(UPDATE_MODEL_EVENT,$e),nextTick(()=>oe("change",$e))};onMounted(()=>{const $e=he.value.querySelectorAll("[type=radio]"),Ne=$e[0];!Array.from($e).some(Oe=>Oe.checked)&&Ne&&(Ne.tabIndex=0)});const Ie=computed(()=>ie.name||de.value);return provide(radioGroupKey,reactive({...toRefs(ie),changeEvent:xe,name:Ie})),watch(()=>ie.modelValue,()=>{ie.validateEvent&&(pe==null||pe.validate("change").catch($e=>void 0))}),($e,Ne)=>(openBlock(),createElementBlock("div",{id:unref(_e),ref_key:"radioGroupRef",ref:he,class:normalizeClass(unref(ue).b("group")),role:"radiogroup","aria-label":unref(Ce)?void 0:$e.ariaLabel||"radio-group","aria-labelledby":unref(Ce)?unref(pe).labelId:void 0},[renderSlot($e.$slots,"default")],10,["id","aria-label","aria-labelledby"]))}});var RadioGroup=_export_sfc$1(_sfc_main$26,[["__file","radio-group.vue"]]);const ElRadio=withInstall(Radio,{RadioButton,RadioGroup}),ElRadioGroup=withNoopInstall(RadioGroup),ElRadioButton=withNoopInstall(RadioButton);var NodeContent$1=defineComponent({name:"NodeContent",setup(){return{ns:useNamespace("cascader-node")}},render(){const{ns:le}=this,{node:oe,panel:ie}=this.$parent,{data:ue,label:de}=oe,{renderLabelFn:he}=ie;return h$3("span",{class:le.e("label")},he?he({node:oe,data:ue}):de)}});const CASCADER_PANEL_INJECTION_KEY=Symbol(),_sfc_main$25=defineComponent({name:"ElCascaderNode",components:{ElCheckbox,ElRadio,NodeContent:NodeContent$1,ElIcon,Check:check_default,Loading:loading_default,ArrowRight:arrow_right_default},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(le,{emit:oe}){const ie=inject(CASCADER_PANEL_INJECTION_KEY),ue=useNamespace("cascader-node"),de=computed(()=>ie.isHoverMenu),he=computed(()=>ie.config.multiple),pe=computed(()=>ie.config.checkStrictly),_e=computed(()=>{var At;return(At=ie.checkedNodes[0])==null?void 0:At.uid}),Ce=computed(()=>le.node.isDisabled),xe=computed(()=>le.node.isLeaf),Ie=computed(()=>pe.value&&!xe.value||!Ce.value),$e=computed(()=>Oe(ie.expandingNode)),Ne=computed(()=>pe.value&&ie.checkedNodes.some(Oe)),Oe=At=>{var Dt;const{level:Lt,uid:jt}=le.node;return((Dt=At==null?void 0:At.pathNodes[Lt-1])==null?void 0:Dt.uid)===jt},Fe=()=>{$e.value||ie.expandNode(le.node)},Ve=At=>{const{node:Dt}=le;At!==Dt.checked&&ie.handleCheckChange(Dt,At)},ze=()=>{ie.lazyLoad(le.node,()=>{xe.value||Fe()})},Ue=At=>{de.value&&(Pt(),!xe.value&&oe("expand",At))},Pt=()=>{const{node:At}=le;!Ie.value||At.loading||(At.loaded?Fe():ze())},qe=()=>{de.value&&!xe.value||(xe.value&&!Ce.value&&!pe.value&&!he.value?kt(!0):Pt())},Et=At=>{pe.value?(Ve(At),le.node.loaded&&Fe()):kt(At)},kt=At=>{le.node.loaded?(Ve(At),!pe.value&&Fe()):ze()};return{panel:ie,isHoverMenu:de,multiple:he,checkStrictly:pe,checkedNodeId:_e,isDisabled:Ce,isLeaf:xe,expandable:Ie,inExpandingPath:$e,inCheckedPath:Ne,ns:ue,handleHoverExpand:Ue,handleExpand:Pt,handleClick:qe,handleCheck:kt,handleSelectCheck:Et}}});function _sfc_render$t(le,oe,ie,ue,de,he){const pe=resolveComponent("el-checkbox"),_e=resolveComponent("el-radio"),Ce=resolveComponent("check"),xe=resolveComponent("el-icon"),Ie=resolveComponent("node-content"),$e=resolveComponent("loading"),Ne=resolveComponent("arrow-right");return openBlock(),createElementBlock("li",{id:`${le.menuId}-${le.node.uid}`,role:"menuitem","aria-haspopup":!le.isLeaf,"aria-owns":le.isLeaf?null:le.menuId,"aria-expanded":le.inExpandingPath,tabindex:le.expandable?-1:void 0,class:normalizeClass([le.ns.b(),le.ns.is("selectable",le.checkStrictly),le.ns.is("active",le.node.checked),le.ns.is("disabled",!le.expandable),le.inExpandingPath&&"in-active-path",le.inCheckedPath&&"in-checked-path"]),onMouseenter:le.handleHoverExpand,onFocus:le.handleHoverExpand,onClick:le.handleClick},[createCommentVNode(" prefix "),le.multiple?(openBlock(),createBlock(pe,{key:0,"model-value":le.node.checked,indeterminate:le.node.indeterminate,disabled:le.isDisabled,onClick:withModifiers(()=>{},["stop"]),"onUpdate:modelValue":le.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onClick","onUpdate:modelValue"])):le.checkStrictly?(openBlock(),createBlock(_e,{key:1,"model-value":le.checkedNodeId,label:le.node.uid,disabled:le.isDisabled,"onUpdate:modelValue":le.handleSelectCheck,onClick:withModifiers(()=>{},["stop"])},{default:withCtx(()=>[createCommentVNode(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),createBaseVNode("span")]),_:1},8,["model-value","label","disabled","onUpdate:modelValue","onClick"])):le.isLeaf&&le.node.checked?(openBlock(),createBlock(xe,{key:2,class:normalizeClass(le.ns.e("prefix"))},{default:withCtx(()=>[createVNode(Ce)]),_:1},8,["class"])):createCommentVNode("v-if",!0),createCommentVNode(" content "),createVNode(Ie),createCommentVNode(" postfix "),le.isLeaf?createCommentVNode("v-if",!0):(openBlock(),createElementBlock(Fragment,{key:3},[le.node.loading?(openBlock(),createBlock(xe,{key:0,class:normalizeClass([le.ns.is("loading"),le.ns.e("postfix")])},{default:withCtx(()=>[createVNode($e)]),_:1},8,["class"])):(openBlock(),createBlock(xe,{key:1,class:normalizeClass(["arrow-right",le.ns.e("postfix")])},{default:withCtx(()=>[createVNode(Ne)]),_:1},8,["class"]))],64))],42,["id","aria-haspopup","aria-owns","aria-expanded","tabindex","onMouseenter","onFocus","onClick"])}var ElCascaderNode=_export_sfc$1(_sfc_main$25,[["render",_sfc_render$t],["__file","node.vue"]]);const _sfc_main$24=defineComponent({name:"ElCascaderMenu",components:{Loading:loading_default,ElIcon,ElScrollbar,ElCascaderNode},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(le){const oe=getCurrentInstance(),ie=useNamespace("cascader-menu"),{t:ue}=useLocale(),de=useId();let he=null,pe=null;const _e=inject(CASCADER_PANEL_INJECTION_KEY),Ce=ref(null),xe=computed(()=>!le.nodes.length),Ie=computed(()=>!_e.initialLoaded),$e=computed(()=>`${de.value}-${le.index}`),Ne=ze=>{he=ze.target},Oe=ze=>{if(!(!_e.isHoverMenu||!he||!Ce.value))if(he.contains(ze.target)){Fe();const Ue=oe.vnode.el,{left:Pt}=Ue.getBoundingClientRect(),{offsetWidth:qe,offsetHeight:Et}=Ue,kt=ze.clientX-Pt,At=he.offsetTop,Dt=At+he.offsetHeight;Ce.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${kt} ${At} L${qe} 0 V${At} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${kt} ${Dt} L${qe} ${Et} V${Dt} Z" />
        `}else pe||(pe=window.setTimeout(Ve,_e.config.hoverThreshold))},Fe=()=>{pe&&(clearTimeout(pe),pe=null)},Ve=()=>{Ce.value&&(Ce.value.innerHTML="",Fe())};return{ns:ie,panel:_e,hoverZone:Ce,isEmpty:xe,isLoading:Ie,menuId:$e,t:ue,handleExpand:Ne,handleMouseMove:Oe,clearHoverZone:Ve}}});function _sfc_render$s(le,oe,ie,ue,de,he){const pe=resolveComponent("el-cascader-node"),_e=resolveComponent("loading"),Ce=resolveComponent("el-icon"),xe=resolveComponent("el-scrollbar");return openBlock(),createBlock(xe,{key:le.menuId,tag:"ul",role:"menu",class:normalizeClass(le.ns.b()),"wrap-class":le.ns.e("wrap"),"view-class":[le.ns.e("list"),le.ns.is("empty",le.isEmpty)],onMousemove:le.handleMouseMove,onMouseleave:le.clearHoverZone},{default:withCtx(()=>{var Ie;return[(openBlock(!0),createElementBlock(Fragment,null,renderList(le.nodes,$e=>(openBlock(),createBlock(pe,{key:$e.uid,node:$e,"menu-id":le.menuId,onExpand:le.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),le.isLoading?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(le.ns.e("empty-text"))},[createVNode(Ce,{size:"14",class:normalizeClass(le.ns.is("loading"))},{default:withCtx(()=>[createVNode(_e)]),_:1},8,["class"]),createTextVNode(" "+toDisplayString(le.t("el.cascader.loading")),1)],2)):le.isEmpty?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(le.ns.e("empty-text"))},[renderSlot(le.$slots,"empty",{},()=>[createTextVNode(toDisplayString(le.t("el.cascader.noData")),1)])],2)):(Ie=le.panel)!=null&&Ie.isHoverMenu?(openBlock(),createElementBlock("svg",{key:2,ref:"hoverZone",class:normalizeClass(le.ns.e("hover-zone"))},null,2)):createCommentVNode("v-if",!0)]}),_:3},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var ElCascaderMenu=_export_sfc$1(_sfc_main$24,[["render",_sfc_render$s],["__file","menu.vue"]]);let uid$3=0;const calculatePathNodes=le=>{const oe=[le];let{parent:ie}=le;for(;ie;)oe.unshift(ie),ie=ie.parent;return oe};let Node$4=class go{constructor(oe,ie,ue,de=!1){this.data=oe,this.config=ie,this.parent=ue,this.root=de,this.uid=uid$3++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:he,label:pe,children:_e}=ie,Ce=oe[_e],xe=calculatePathNodes(this);this.level=de?0:ue?ue.level+1:1,this.value=oe[he],this.label=oe[pe],this.pathNodes=xe,this.pathValues=xe.map(Ie=>Ie.value),this.pathLabels=xe.map(Ie=>Ie.label),this.childrenData=Ce,this.children=(Ce||[]).map(Ie=>new go(Ie,ie,this)),this.loaded=!ie.lazy||this.isLeaf||!isEmpty(Ce)}get isDisabled(){const{data:oe,parent:ie,config:ue}=this,{disabled:de,checkStrictly:he}=ue;return(isFunction$2(de)?de(oe,this):!!oe[de])||!he&&(ie==null?void 0:ie.isDisabled)}get isLeaf(){const{data:oe,config:ie,childrenData:ue,loaded:de}=this,{lazy:he,leaf:pe}=ie,_e=isFunction$2(pe)?pe(oe,this):oe[pe];return isUndefined(_e)?he&&!de?!1:!(Array.isArray(ue)&&ue.length):!!_e}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(oe){const{childrenData:ie,children:ue}=this,de=new go(oe,this.config,this);return Array.isArray(ie)?ie.push(oe):this.childrenData=[oe],ue.push(de),de}calcText(oe,ie){const ue=oe?this.pathLabels.join(ie):this.label;return this.text=ue,ue}broadcast(oe,...ie){const ue=`onParent${capitalize(oe)}`;this.children.forEach(de=>{de&&(de.broadcast(oe,...ie),de[ue]&&de[ue](...ie))})}emit(oe,...ie){const{parent:ue}=this,de=`onChild${capitalize(oe)}`;ue&&(ue[de]&&ue[de](...ie),ue.emit(oe,...ie))}onParentCheck(oe){this.isDisabled||this.setCheckState(oe)}onChildCheck(){const{children:oe}=this,ie=oe.filter(de=>!de.isDisabled),ue=ie.length?ie.every(de=>de.checked):!1;this.setCheckState(ue)}setCheckState(oe){const ie=this.children.length,ue=this.children.reduce((de,he)=>{const pe=he.checked?1:he.indeterminate?.5:0;return de+pe},0);this.checked=this.loaded&&this.children.filter(de=>!de.isDisabled).every(de=>de.loaded&&de.checked)&&oe,this.indeterminate=this.loaded&&ue!==ie&&ue>0}doCheck(oe){if(this.checked===oe)return;const{checkStrictly:ie,multiple:ue}=this.config;ie||!ue?this.checked=oe:(this.broadcast("check",oe),this.setCheckState(oe),this.emit("check"))}};const flatNodes=(le,oe)=>le.reduce((ie,ue)=>(ue.isLeaf?ie.push(ue):(!oe&&ie.push(ue),ie=ie.concat(flatNodes(ue.children,oe))),ie),[]);class Store{constructor(oe,ie){this.config=ie;const ue=(oe||[]).map(de=>new Node$4(de,this.config));this.nodes=ue,this.allNodes=flatNodes(ue,!1),this.leafNodes=flatNodes(ue,!0)}getNodes(){return this.nodes}getFlattedNodes(oe){return oe?this.leafNodes:this.allNodes}appendNode(oe,ie){const ue=ie?ie.appendChild(oe):new Node$4(oe,this.config);ie||this.nodes.push(ue),this.allNodes.push(ue),ue.isLeaf&&this.leafNodes.push(ue)}appendNodes(oe,ie){oe.forEach(ue=>this.appendNode(ue,ie))}getNodeByValue(oe,ie=!1){return!oe&&oe!==0?null:this.getFlattedNodes(ie).find(de=>isEqual$1(de.value,oe)||isEqual$1(de.pathValues,oe))||null}getSameNode(oe){return oe&&this.getFlattedNodes(!1).find(({value:ue,level:de})=>isEqual$1(oe.value,ue)&&oe.level===de)||null}}const CommonProps=buildProps({modelValue:{type:definePropType([Number,String,Array])},options:{type:definePropType(Array),default:()=>[]},props:{type:definePropType(Object),default:()=>({})}}),DefaultProps={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:NOOP,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},useCascaderConfig=le=>computed(()=>({...DefaultProps,...le.props})),getMenuIndex=le=>{if(!le)return 0;const oe=le.id.split("-");return Number(oe[oe.length-2])},checkNode=le=>{if(!le)return;const oe=le.querySelector("input");oe?oe.click():isLeaf(le)&&le.click()},sortByOriginalOrder=(le,oe)=>{const ie=oe.slice(0),ue=ie.map(he=>he.uid),de=le.reduce((he,pe)=>{const _e=ue.indexOf(pe.uid);return _e>-1&&(he.push(pe),ie.splice(_e,1),ue.splice(_e,1)),he},[]);return de.push(...ie),de},_sfc_main$23=defineComponent({name:"ElCascaderPanel",components:{ElCascaderMenu},props:{...CommonProps,border:{type:Boolean,default:!0},renderLabel:Function},emits:[UPDATE_MODEL_EVENT,CHANGE_EVENT,"close","expand-change"],setup(le,{emit:oe,slots:ie}){let ue=!1;const de=useNamespace("cascader"),he=useCascaderConfig(le);let pe=null;const _e=ref(!0),Ce=ref([]),xe=ref(null),Ie=ref([]),$e=ref(null),Ne=ref([]),Oe=computed(()=>he.value.expandTrigger==="hover"),Fe=computed(()=>le.renderLabel||ie.default),Ve=()=>{const{options:vn}=le,Tn=he.value;ue=!1,pe=new Store(vn,Tn),Ie.value=[pe.getNodes()],Tn.lazy&&isEmpty(le.options)?(_e.value=!1,ze(void 0,$n=>{$n&&(pe=new Store($n,Tn),Ie.value=[pe.getNodes()]),_e.value=!0,Lt(!1,!0)})):Lt(!1,!0)},ze=(vn,Tn)=>{const $n=he.value;vn=vn||new Node$4({},$n,void 0,!0),vn.loading=!0;const wn=Cn=>{const Sn=vn,In=Sn.root?null:Sn;Cn&&(pe==null||pe.appendNodes(Cn,In)),Sn.loading=!1,Sn.loaded=!0,Sn.childrenData=Sn.childrenData||[],Tn&&Tn(Cn)};$n.lazyLoad(vn,wn)},Ue=(vn,Tn)=>{var $n;const{level:wn}=vn,Cn=Ie.value.slice(0,wn);let Sn;vn.isLeaf?Sn=vn.pathNodes[wn-2]:(Sn=vn,Cn.push(vn.children)),(($n=$e.value)==null?void 0:$n.uid)!==(Sn==null?void 0:Sn.uid)&&($e.value=vn,Ie.value=Cn,!Tn&&oe("expand-change",(vn==null?void 0:vn.pathValues)||[]))},Pt=(vn,Tn,$n=!0)=>{const{checkStrictly:wn,multiple:Cn}=he.value,Sn=Ne.value[0];ue=!0,!Cn&&(Sn==null||Sn.doCheck(!1)),vn.doCheck(Tn),Dt(),$n&&!Cn&&!wn&&oe("close"),!$n&&!Cn&&!wn&&qe(vn)},qe=vn=>{vn&&(vn=vn.parent,qe(vn),vn&&Ue(vn))},Et=vn=>pe==null?void 0:pe.getFlattedNodes(vn),kt=vn=>{var Tn;return(Tn=Et(vn))==null?void 0:Tn.filter($n=>$n.checked!==!1)},At=()=>{Ne.value.forEach(vn=>vn.doCheck(!1)),Dt(),Ie.value=Ie.value.slice(0,1),$e.value=null,oe("expand-change",[])},Dt=()=>{var vn;const{checkStrictly:Tn,multiple:$n}=he.value,wn=Ne.value,Cn=kt(!Tn),Sn=sortByOriginalOrder(wn,Cn),In=Sn.map(En=>En.valueByOption);Ne.value=Sn,xe.value=$n?In:(vn=In[0])!=null?vn:null},Lt=(vn=!1,Tn=!1)=>{const{modelValue:$n}=le,{lazy:wn,multiple:Cn,checkStrictly:Sn}=he.value,In=!Sn;if(!(!_e.value||ue||!Tn&&isEqual$1($n,xe.value)))if(wn&&!vn){const xn=unique(flattenDeep(castArray($n))).map(kn=>pe==null?void 0:pe.getNodeByValue(kn)).filter(kn=>!!kn&&!kn.loaded&&!kn.loading);xn.length?xn.forEach(kn=>{ze(kn,()=>Lt(!1,Tn))}):Lt(!0,Tn)}else{const En=Cn?castArray($n):[$n],xn=unique(En.map(kn=>pe==null?void 0:pe.getNodeByValue(kn,In)));jt(xn,Tn),xe.value=cloneDeep($n)}},jt=(vn,Tn=!0)=>{const{checkStrictly:$n}=he.value,wn=Ne.value,Cn=vn.filter(En=>!!En&&($n||En.isLeaf)),Sn=pe==null?void 0:pe.getSameNode($e.value),In=Tn&&Sn||Cn[0];In?In.pathNodes.forEach(En=>Ue(En,!0)):$e.value=null,wn.forEach(En=>En.doCheck(!1)),reactive(Cn).forEach(En=>En.doCheck(!0)),Ne.value=Cn,nextTick(_n)},_n=()=>{isClient&&Ce.value.forEach(vn=>{const Tn=vn==null?void 0:vn.$el;if(Tn){const $n=Tn.querySelector(`.${de.namespace.value}-scrollbar__wrap`),wn=Tn.querySelector(`.${de.b("node")}.${de.is("active")}`)||Tn.querySelector(`.${de.b("node")}.in-active-path`);scrollIntoView($n,wn)}})},bn=vn=>{const Tn=vn.target,{code:$n}=vn;switch($n){case EVENT_CODE.up:case EVENT_CODE.down:{vn.preventDefault();const wn=$n===EVENT_CODE.up?-1:1;focusNode(getSibling(Tn,wn,`.${de.b("node")}[tabindex="-1"]`));break}case EVENT_CODE.left:{vn.preventDefault();const wn=Ce.value[getMenuIndex(Tn)-1],Cn=wn==null?void 0:wn.$el.querySelector(`.${de.b("node")}[aria-expanded="true"]`);focusNode(Cn);break}case EVENT_CODE.right:{vn.preventDefault();const wn=Ce.value[getMenuIndex(Tn)+1],Cn=wn==null?void 0:wn.$el.querySelector(`.${de.b("node")}[tabindex="-1"]`);focusNode(Cn);break}case EVENT_CODE.enter:checkNode(Tn);break}};return provide(CASCADER_PANEL_INJECTION_KEY,reactive({config:he,expandingNode:$e,checkedNodes:Ne,isHoverMenu:Oe,initialLoaded:_e,renderLabelFn:Fe,lazyLoad:ze,expandNode:Ue,handleCheckChange:Pt})),watch([he,()=>le.options],Ve,{deep:!0,immediate:!0}),watch(()=>le.modelValue,()=>{ue=!1,Lt()},{deep:!0}),watch(()=>xe.value,vn=>{isEqual$1(vn,le.modelValue)||(oe(UPDATE_MODEL_EVENT,vn),oe(CHANGE_EVENT,vn))}),onBeforeUpdate(()=>Ce.value=[]),onMounted(()=>!isEmpty(le.modelValue)&&Lt()),{ns:de,menuList:Ce,menus:Ie,checkedNodes:Ne,handleKeyDown:bn,handleCheckChange:Pt,getFlattedNodes:Et,getCheckedNodes:kt,clearCheckedNodes:At,calculateCheckedValue:Dt,scrollToExpandingNode:_n}}});function _sfc_render$r(le,oe,ie,ue,de,he){const pe=resolveComponent("el-cascader-menu");return openBlock(),createElementBlock("div",{class:normalizeClass([le.ns.b("panel"),le.ns.is("bordered",le.border)]),onKeydown:le.handleKeyDown},[(openBlock(!0),createElementBlock(Fragment,null,renderList(le.menus,(_e,Ce)=>(openBlock(),createBlock(pe,{key:Ce,ref_for:!0,ref:xe=>le.menuList[Ce]=xe,index:Ce,nodes:[..._e]},{empty:withCtx(()=>[renderSlot(le.$slots,"empty")]),_:2},1032,["index","nodes"]))),128))],42,["onKeydown"])}var CascaderPanel=_export_sfc$1(_sfc_main$23,[["render",_sfc_render$r],["__file","index.vue"]]);const ElCascaderPanel=withInstall(CascaderPanel),tagProps=buildProps({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:componentSizes},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),tagEmits={close:le=>le instanceof MouseEvent,click:le=>le instanceof MouseEvent},__default__$1g=defineComponent({name:"ElTag"}),_sfc_main$22=defineComponent({...__default__$1g,props:tagProps,emits:tagEmits,setup(le,{emit:oe}){const ie=le,ue=useFormSize(),de=useNamespace("tag"),he=computed(()=>{const{type:xe,hit:Ie,effect:$e,closable:Ne,round:Oe}=ie;return[de.b(),de.is("closable",Ne),de.m(xe||"primary"),de.m(ue.value),de.m($e),de.is("hit",Ie),de.is("round",Oe)]}),pe=xe=>{oe("close",xe)},_e=xe=>{oe("click",xe)},Ce=xe=>{xe.component.subTree.component.bum=null};return(xe,Ie)=>xe.disableTransitions?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(he)),style:normalizeStyle({backgroundColor:xe.color}),onClick:_e},[createBaseVNode("span",{class:normalizeClass(unref(de).e("content"))},[renderSlot(xe.$slots,"default")],2),xe.closable?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(de).e("close")),onClick:withModifiers(pe,["stop"])},{default:withCtx(()=>[createVNode(unref(close_default))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)],6)):(openBlock(),createBlock(Transition,{key:1,name:`${unref(de).namespace.value}-zoom-in-center`,appear:"",onVnodeMounted:Ce},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(unref(he)),style:normalizeStyle({backgroundColor:xe.color}),onClick:_e},[createBaseVNode("span",{class:normalizeClass(unref(de).e("content"))},[renderSlot(xe.$slots,"default")],2),xe.closable?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(de).e("close")),onClick:withModifiers(pe,["stop"])},{default:withCtx(()=>[createVNode(unref(close_default))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)],6)]),_:3},8,["name"]))}});var Tag=_export_sfc$1(_sfc_main$22,[["__file","tag.vue"]]);const ElTag=withInstall(Tag),cascaderProps=buildProps({...CommonProps,size:useSizeProp,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:definePropType(Function),default:(le,oe)=>le.text.includes(oe)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:definePropType(Function),default:()=>!0},placement:{type:definePropType(String),values:Ee,default:"bottom-start"},fallbackPlacements:{type:definePropType(Array),default:["bottom-start","bottom","top-start","top","right","left"]},popperClass:{type:String,default:""},teleported:useTooltipContentProps.teleported,tagType:{...tagProps.type,default:"info"},tagEffect:{...tagProps.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...useEmptyValuesProps}),cascaderEmits={[UPDATE_MODEL_EVENT]:le=>!0,[CHANGE_EVENT]:le=>!0,focus:le=>le instanceof FocusEvent,blur:le=>le instanceof FocusEvent,clear:()=>!0,visibleChange:le=>isBoolean(le),expandChange:le=>!!le,removeTag:le=>!!le},COMPONENT_NAME$e="ElCascader",__default__$1f=defineComponent({name:COMPONENT_NAME$e}),_sfc_main$21=defineComponent({...__default__$1f,props:cascaderProps,emits:cascaderEmits,setup(le,{expose:oe,emit:ie}){const ue=le,de={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:Vn})=>{const{modifiersData:sr,placement:nr}=Vn;["right","left","bottom","top"].includes(nr)||(sr.arrow.x=35)},requires:["arrow"]}]},he=useAttrs$1();let pe=0,_e=0;const Ce=useNamespace("cascader"),xe=useNamespace("input"),{t:Ie}=useLocale(),{form:$e,formItem:Ne}=useFormItem(),{valueOnClear:Oe}=useEmptyValues(ue),{isComposing:Fe,handleComposition:Ve}=useComposition({afterComposition(Vn){var sr;const nr=(sr=Vn.target)==null?void 0:sr.value;Wn(nr)}}),ze=ref(null),Ue=ref(null),Pt=ref(null),qe=ref(null),Et=ref(null),kt=ref(!1),At=ref(!1),Dt=ref(!1),Lt=ref(!1),jt=ref(""),_n=ref(""),bn=ref([]),vn=ref([]),Tn=ref([]),$n=computed(()=>he.style),wn=computed(()=>ue.disabled||($e==null?void 0:$e.disabled)),Cn=computed(()=>ue.placeholder||Ie("el.cascader.placeholder")),Sn=computed(()=>_n.value||bn.value.length>0||Fe.value?"":Cn.value),In=useFormSize(),En=computed(()=>["small"].includes(In.value)?"small":"default"),xn=computed(()=>!!ue.props.multiple),kn=computed(()=>!ue.filterable||xn.value),On=computed(()=>xn.value?_n.value:jt.value),Mn=computed(()=>{var Vn;return((Vn=qe.value)==null?void 0:Vn.checkedNodes)||[]}),Un=computed(()=>!ue.clearable||wn.value||Dt.value||!At.value?!1:!!Mn.value.length),zn=computed(()=>{const{showAllLevels:Vn,separator:sr}=ue,nr=Mn.value;return nr.length?xn.value?"":nr[0].calcText(Vn,sr):""}),Hn=computed(()=>(Ne==null?void 0:Ne.validateState)||""),Rn=computed({get(){return cloneDeep(ue.modelValue)},set(Vn){const sr=Vn??Oe.value;ie(UPDATE_MODEL_EVENT,sr),ie(CHANGE_EVENT,sr),ue.validateEvent&&(Ne==null||Ne.validate("change").catch(nr=>void 0))}}),Jn=computed(()=>[Ce.b(),Ce.m(In.value),Ce.is("disabled",wn.value),he.class]),Qn=computed(()=>[xe.e("icon"),"icon-arrow-down",Ce.is("reverse",kt.value)]),_r=computed(()=>Ce.is("focus",kt.value||Lt.value)),Zn=computed(()=>{var Vn,sr;return(sr=(Vn=ze.value)==null?void 0:Vn.popperRef)==null?void 0:sr.contentRef}),Gn=Vn=>{var sr,nr,Ar;wn.value||(Vn=Vn??!kt.value,Vn!==kt.value&&(kt.value=Vn,(nr=(sr=Ue.value)==null?void 0:sr.input)==null||nr.setAttribute("aria-expanded",`${Vn}`),Vn?(Nn(),nextTick((Ar=qe.value)==null?void 0:Ar.scrollToExpandingNode)):ue.filterable&&tr(),ie("visibleChange",Vn)))},Nn=()=>{nextTick(()=>{var Vn;(Vn=ze.value)==null||Vn.updatePopper()})},Dn=()=>{Dt.value=!1},jn=Vn=>{const{showAllLevels:sr,separator:nr}=ue;return{node:Vn,key:Vn.uid,text:Vn.calcText(sr,nr),hitState:!1,closable:!wn.value&&!Vn.isDisabled,isCollapseTag:!1}},ir=Vn=>{var sr;const nr=Vn.node;nr.doCheck(!1),(sr=qe.value)==null||sr.calculateCheckedValue(),ie("removeTag",nr.valueByOption)},Fn=()=>{if(!xn.value)return;const Vn=Mn.value,sr=[],nr=[];if(Vn.forEach(Ar=>nr.push(jn(Ar))),vn.value=nr,Vn.length){Vn.slice(0,ue.maxCollapseTags).forEach(Yn=>sr.push(jn(Yn)));const Ar=Vn.slice(ue.maxCollapseTags),Wr=Ar.length;Wr&&(ue.collapseTags?sr.push({key:-1,text:`+ ${Wr}`,closable:!1,isCollapseTag:!0}):Ar.forEach(Yn=>sr.push(jn(Yn))))}bn.value=sr},Kn=()=>{var Vn,sr;const{filterMethod:nr,showAllLevels:Ar,separator:Wr}=ue,Yn=(sr=(Vn=qe.value)==null?void 0:Vn.getFlattedNodes(!ue.props.checkStrictly))==null?void 0:sr.filter(Nr=>Nr.isDisabled?!1:(Nr.calcText(Ar,Wr),nr(Nr,On.value)));xn.value&&(bn.value.forEach(Nr=>{Nr.hitState=!1}),vn.value.forEach(Nr=>{Nr.hitState=!1})),Dt.value=!0,Tn.value=Yn,Nn()},mr=()=>{var Vn;let sr;Dt.value&&Et.value?sr=Et.value.$el.querySelector(`.${Ce.e("suggestion-item")}`):sr=(Vn=qe.value)==null?void 0:Vn.$el.querySelector(`.${Ce.b("node")}[tabindex="-1"]`),sr&&(sr.focus(),!Dt.value&&sr.click())},yr=()=>{var Vn,sr;const nr=(Vn=Ue.value)==null?void 0:Vn.input,Ar=Pt.value,Wr=(sr=Et.value)==null?void 0:sr.$el;if(!(!isClient||!nr)){if(Wr){const Yn=Wr.querySelector(`.${Ce.e("suggestion-list")}`);Yn.style.minWidth=`${nr.offsetWidth}px`}if(Ar){const{offsetHeight:Yn}=Ar,Nr=bn.value.length>0?`${Math.max(Yn+6,pe)}px`:`${pe}px`;nr.style.height=Nr,Nn()}}},Cr=Vn=>{var sr;return(sr=qe.value)==null?void 0:sr.getCheckedNodes(Vn)},br=Vn=>{Nn(),ie("expandChange",Vn)},Pr=Vn=>{if(!Fe.value)switch(Vn.code){case EVENT_CODE.enter:Gn();break;case EVENT_CODE.down:Gn(!0),nextTick(mr),Vn.preventDefault();break;case EVENT_CODE.esc:kt.value===!0&&(Vn.preventDefault(),Vn.stopPropagation(),Gn(!1));break;case EVENT_CODE.tab:Gn(!1);break}},gr=()=>{var Vn;(Vn=qe.value)==null||Vn.clearCheckedNodes(),!kt.value&&ue.filterable&&tr(),Gn(!1),ie("clear")},tr=()=>{const{value:Vn}=zn;jt.value=Vn,_n.value=Vn},Sr=Vn=>{var sr,nr;const{checked:Ar}=Vn;xn.value?(sr=qe.value)==null||sr.handleCheckChange(Vn,!Ar,!1):(!Ar&&((nr=qe.value)==null||nr.handleCheckChange(Vn,!0,!1)),Gn(!1))},Dr=Vn=>{const sr=Vn.target,{code:nr}=Vn;switch(nr){case EVENT_CODE.up:case EVENT_CODE.down:{const Ar=nr===EVENT_CODE.up?-1:1;focusNode(getSibling(sr,Ar,`.${Ce.e("suggestion-item")}[tabindex="-1"]`));break}case EVENT_CODE.enter:sr.click();break}},Lr=()=>{const Vn=bn.value,sr=Vn[Vn.length-1];_e=_n.value?0:_e+1,!(!sr||!_e||ue.collapseTags&&Vn.length>1)&&(sr.hitState?ir(sr):sr.hitState=!0)},Ur=Vn=>{const sr=Vn.target,nr=Ce.e("search-input");sr.className===nr&&(Lt.value=!0),ie("focus",Vn)},Xr=Vn=>{Lt.value=!1,ie("blur",Vn)},qr=debounce(()=>{const{value:Vn}=On;if(!Vn)return;const sr=ue.beforeFilter(Vn);isPromise$1(sr)?sr.then(Kn).catch(()=>{}):sr!==!1?Kn():Dn()},ue.debounce),Wn=(Vn,sr)=>{!kt.value&&Gn(!0),!(sr!=null&&sr.isComposing)&&(Vn?qr():Dn())},wr=Vn=>Number.parseFloat(useCssVar(xe.cssVarName("input-height"),Vn).value)-2;return watch(Dt,Nn),watch([Mn,wn,()=>ue.collapseTags],Fn),watch(bn,()=>{nextTick(()=>yr())}),watch(In,async()=>{await nextTick();const Vn=Ue.value.input;pe=wr(Vn)||pe,yr()}),watch(zn,tr,{immediate:!0}),onMounted(()=>{const Vn=Ue.value.input,sr=wr(Vn);pe=Vn.offsetHeight||sr,useResizeObserver(Vn,yr)}),oe({getCheckedNodes:Cr,cascaderPanelRef:qe,togglePopperVisible:Gn,contentRef:Zn,presentText:zn}),(Vn,sr)=>(openBlock(),createBlock(unref(ElTooltip),{ref_key:"tooltipRef",ref:ze,visible:kt.value,teleported:Vn.teleported,"popper-class":[unref(Ce).e("dropdown"),Vn.popperClass],"popper-options":de,"fallback-placements":Vn.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:Vn.placement,transition:`${unref(Ce).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:Vn.persistent,onHide:Dn},{default:withCtx(()=>[withDirectives((openBlock(),createElementBlock("div",{class:normalizeClass(unref(Jn)),style:normalizeStyle(unref($n)),onClick:()=>Gn(unref(kn)?void 0:!0),onKeydown:Pr,onMouseenter:nr=>At.value=!0,onMouseleave:nr=>At.value=!1},[createVNode(unref(ElInput),{ref_key:"input",ref:Ue,modelValue:jt.value,"onUpdate:modelValue":nr=>jt.value=nr,placeholder:unref(Sn),readonly:unref(kn),disabled:unref(wn),"validate-event":!1,size:unref(In),class:normalizeClass(unref(_r)),tabindex:unref(xn)&&Vn.filterable&&!unref(wn)?-1:void 0,onCompositionstart:unref(Ve),onCompositionupdate:unref(Ve),onCompositionend:unref(Ve),onFocus:Ur,onBlur:Xr,onInput:Wn},{suffix:withCtx(()=>[unref(Un)?(openBlock(),createBlock(unref(ElIcon),{key:"clear",class:normalizeClass([unref(xe).e("icon"),"icon-circle-close"]),onClick:withModifiers(gr,["stop"])},{default:withCtx(()=>[createVNode(unref(circle_close_default))]),_:1},8,["class","onClick"])):(openBlock(),createBlock(unref(ElIcon),{key:"arrow-down",class:normalizeClass(unref(Qn)),onClick:withModifiers(nr=>Gn(),["stop"])},{default:withCtx(()=>[createVNode(unref(arrow_down_default))]),_:1},8,["class","onClick"]))]),_:1},8,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),unref(xn)?(openBlock(),createElementBlock("div",{key:0,ref_key:"tagWrapper",ref:Pt,class:normalizeClass([unref(Ce).e("tags"),unref(Ce).is("validate",!!unref(Hn))])},[(openBlock(!0),createElementBlock(Fragment,null,renderList(bn.value,nr=>(openBlock(),createBlock(unref(ElTag),{key:nr.key,type:Vn.tagType,size:unref(En),effect:Vn.tagEffect,hit:nr.hitState,closable:nr.closable,"disable-transitions":"",onClose:Ar=>ir(nr)},{default:withCtx(()=>[nr.isCollapseTag===!1?(openBlock(),createElementBlock("span",{key:0},toDisplayString(nr.text),1)):(openBlock(),createBlock(unref(ElTooltip),{key:1,disabled:kt.value||!Vn.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(nr.text),1)]),content:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(unref(Ce).e("collapse-tags"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(vn.value.slice(Vn.maxCollapseTags),(Ar,Wr)=>(openBlock(),createElementBlock("div",{key:Wr,class:normalizeClass(unref(Ce).e("collapse-tag"))},[(openBlock(),createBlock(unref(ElTag),{key:Ar.key,class:"in-tooltip",type:Vn.tagType,size:unref(En),effect:Vn.tagEffect,hit:Ar.hitState,closable:Ar.closable,"disable-transitions":"",onClose:Yn=>ir(Ar)},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(Ar.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128)),Vn.filterable&&!unref(wn)?withDirectives((openBlock(),createElementBlock("input",{key:0,"onUpdate:modelValue":nr=>_n.value=nr,type:"text",class:normalizeClass(unref(Ce).e("search-input")),placeholder:unref(zn)?"":unref(Cn),onInput:nr=>Wn(_n.value,nr),onClick:withModifiers(nr=>Gn(!0),["stop"]),onKeydown:withKeys(Lr,["delete"]),onCompositionstart:unref(Ve),onCompositionupdate:unref(Ve),onCompositionend:unref(Ve),onFocus:Ur,onBlur:Xr},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[vModelText,_n.value]]):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[unref(ClickOutside),()=>Gn(!1),unref(Zn)]])]),content:withCtx(()=>[withDirectives(createVNode(unref(ElCascaderPanel),{ref_key:"cascaderPanelRef",ref:qe,modelValue:unref(Rn),"onUpdate:modelValue":nr=>isRef(Rn)?Rn.value=nr:null,options:Vn.options,props:ue.props,border:!1,"render-label":Vn.$slots.default,onExpandChange:br,onClose:nr=>Vn.$nextTick(()=>Gn(!1))},{empty:withCtx(()=>[renderSlot(Vn.$slots,"empty")]),_:3},8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[vShow,!Dt.value]]),Vn.filterable?withDirectives((openBlock(),createBlock(unref(ElScrollbar),{key:0,ref_key:"suggestionPanel",ref:Et,tag:"ul",class:normalizeClass(unref(Ce).e("suggestion-panel")),"view-class":unref(Ce).e("suggestion-list"),onKeydown:Dr},{default:withCtx(()=>[Tn.value.length?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(Tn.value,nr=>(openBlock(),createElementBlock("li",{key:nr.uid,class:normalizeClass([unref(Ce).e("suggestion-item"),unref(Ce).is("checked",nr.checked)]),tabindex:-1,onClick:Ar=>Sr(nr)},[createBaseVNode("span",null,toDisplayString(nr.text),1),nr.checked?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[createVNode(unref(check_default))]),_:1})):createCommentVNode("v-if",!0)],10,["onClick"]))),128)):renderSlot(Vn.$slots,"empty",{key:1},()=>[createBaseVNode("li",{class:normalizeClass(unref(Ce).e("empty-text"))},toDisplayString(unref(Ie)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[vShow,Dt.value]]):createCommentVNode("v-if",!0)]),_:3},8,["visible","teleported","popper-class","fallback-placements","placement","transition","persistent"]))}});var Cascader=_export_sfc$1(_sfc_main$21,[["__file","cascader.vue"]]);const ElCascader=withInstall(Cascader),checkTagProps=buildProps({checked:Boolean,disabled:Boolean,type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"}}),checkTagEmits={"update:checked":le=>isBoolean(le),[CHANGE_EVENT]:le=>isBoolean(le)},__default__$1e=defineComponent({name:"ElCheckTag"}),_sfc_main$20=defineComponent({...__default__$1e,props:checkTagProps,emits:checkTagEmits,setup(le,{emit:oe}){const ie=le,ue=useNamespace("check-tag"),de=computed(()=>ie.disabled),he=computed(()=>[ue.b(),ue.is("checked",ie.checked),ue.is("disabled",de.value),ue.m(ie.type||"primary")]),pe=()=>{if(de.value)return;const _e=!ie.checked;oe(CHANGE_EVENT,_e),oe("update:checked",_e)};return(_e,Ce)=>(openBlock(),createElementBlock("span",{class:normalizeClass(unref(he)),onClick:pe},[renderSlot(_e.$slots,"default")],2))}});var CheckTag=_export_sfc$1(_sfc_main$20,[["__file","check-tag.vue"]]);const ElCheckTag=withInstall(CheckTag),rowContextKey=Symbol("rowContextKey"),RowJustify=["start","center","end","space-around","space-between","space-evenly"],RowAlign=["top","middle","bottom"],rowProps=buildProps({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:RowJustify,default:"start"},align:{type:String,values:RowAlign}}),__default__$1d=defineComponent({name:"ElRow"}),_sfc_main$1$=defineComponent({...__default__$1d,props:rowProps,setup(le){const oe=le,ie=useNamespace("row"),ue=computed(()=>oe.gutter);provide(rowContextKey,{gutter:ue});const de=computed(()=>{const pe={};return oe.gutter&&(pe.marginRight=pe.marginLeft=`-${oe.gutter/2}px`),pe}),he=computed(()=>[ie.b(),ie.is(`justify-${oe.justify}`,oe.justify!=="start"),ie.is(`align-${oe.align}`,!!oe.align)]);return(pe,_e)=>(openBlock(),createBlock(resolveDynamicComponent(pe.tag),{class:normalizeClass(unref(he)),style:normalizeStyle(unref(de))},{default:withCtx(()=>[renderSlot(pe.$slots,"default")]),_:3},8,["class","style"]))}});var Row=_export_sfc$1(_sfc_main$1$,[["__file","row.vue"]]);const ElRow=withInstall(Row),colProps=buildProps({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:definePropType([Number,Object]),default:()=>mutable({})},sm:{type:definePropType([Number,Object]),default:()=>mutable({})},md:{type:definePropType([Number,Object]),default:()=>mutable({})},lg:{type:definePropType([Number,Object]),default:()=>mutable({})},xl:{type:definePropType([Number,Object]),default:()=>mutable({})}}),__default__$1c=defineComponent({name:"ElCol"}),_sfc_main$1_=defineComponent({...__default__$1c,props:colProps,setup(le){const oe=le,{gutter:ie}=inject(rowContextKey,{gutter:computed(()=>0)}),ue=useNamespace("col"),de=computed(()=>{const pe={};return ie.value&&(pe.paddingLeft=pe.paddingRight=`${ie.value/2}px`),pe}),he=computed(()=>{const pe=[];return["span","offset","pull","push"].forEach(xe=>{const Ie=oe[xe];isNumber(Ie)&&(xe==="span"?pe.push(ue.b(`${oe[xe]}`)):Ie>0&&pe.push(ue.b(`${xe}-${oe[xe]}`)))}),["xs","sm","md","lg","xl"].forEach(xe=>{isNumber(oe[xe])?pe.push(ue.b(`${xe}-${oe[xe]}`)):isObject$d(oe[xe])&&Object.entries(oe[xe]).forEach(([Ie,$e])=>{pe.push(Ie!=="span"?ue.b(`${xe}-${Ie}-${$e}`):ue.b(`${xe}-${$e}`))})}),ie.value&&pe.push(ue.is("guttered")),[ue.b(),pe]});return(pe,_e)=>(openBlock(),createBlock(resolveDynamicComponent(pe.tag),{class:normalizeClass(unref(he)),style:normalizeStyle(unref(de))},{default:withCtx(()=>[renderSlot(pe.$slots,"default")]),_:3},8,["class","style"]))}});var Col=_export_sfc$1(_sfc_main$1_,[["__file","col.vue"]]);const ElCol=withInstall(Col),emitChangeFn=le=>isNumber(le)||isString$1(le)||isArray$3(le),collapseProps=buildProps({accordion:Boolean,modelValue:{type:definePropType([Array,String,Number]),default:()=>mutable([])}}),collapseEmits={[UPDATE_MODEL_EVENT]:emitChangeFn,[CHANGE_EVENT]:emitChangeFn},collapseContextKey=Symbol("collapseContextKey"),useCollapse=(le,oe)=>{const ie=ref(castArray$1(le.modelValue)),ue=he=>{ie.value=he;const pe=le.accordion?ie.value[0]:ie.value;oe(UPDATE_MODEL_EVENT,pe),oe(CHANGE_EVENT,pe)},de=he=>{if(le.accordion)ue([ie.value[0]===he?"":he]);else{const pe=[...ie.value],_e=pe.indexOf(he);_e>-1?pe.splice(_e,1):pe.push(he),ue(pe)}};return watch(()=>le.modelValue,()=>ie.value=castArray$1(le.modelValue),{deep:!0}),provide(collapseContextKey,{activeNames:ie,handleItemClick:de}),{activeNames:ie,setActiveNames:ue}},useCollapseDOM=()=>{const le=useNamespace("collapse");return{rootKls:computed(()=>le.b())}},__default__$1b=defineComponent({name:"ElCollapse"}),_sfc_main$1Z=defineComponent({...__default__$1b,props:collapseProps,emits:collapseEmits,setup(le,{expose:oe,emit:ie}){const ue=le,{activeNames:de,setActiveNames:he}=useCollapse(ue,ie),{rootKls:pe}=useCollapseDOM();return oe({activeNames:de,setActiveNames:he}),(_e,Ce)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(pe))},[renderSlot(_e.$slots,"default")],2))}});var Collapse=_export_sfc$1(_sfc_main$1Z,[["__file","collapse.vue"]]);const __default__$1a=defineComponent({name:"ElCollapseTransition"}),_sfc_main$1Y=defineComponent({...__default__$1a,setup(le){const oe=useNamespace("collapse-transition"),ie=de=>{de.style.maxHeight="",de.style.overflow=de.dataset.oldOverflow,de.style.paddingTop=de.dataset.oldPaddingTop,de.style.paddingBottom=de.dataset.oldPaddingBottom},ue={beforeEnter(de){de.dataset||(de.dataset={}),de.dataset.oldPaddingTop=de.style.paddingTop,de.dataset.oldPaddingBottom=de.style.paddingBottom,de.style.height&&(de.dataset.elExistsHeight=de.style.height),de.style.maxHeight=0,de.style.paddingTop=0,de.style.paddingBottom=0},enter(de){requestAnimationFrame(()=>{de.dataset.oldOverflow=de.style.overflow,de.dataset.elExistsHeight?de.style.maxHeight=de.dataset.elExistsHeight:de.scrollHeight!==0?de.style.maxHeight=`${de.scrollHeight}px`:de.style.maxHeight=0,de.style.paddingTop=de.dataset.oldPaddingTop,de.style.paddingBottom=de.dataset.oldPaddingBottom,de.style.overflow="hidden"})},afterEnter(de){de.style.maxHeight="",de.style.overflow=de.dataset.oldOverflow},enterCancelled(de){ie(de)},beforeLeave(de){de.dataset||(de.dataset={}),de.dataset.oldPaddingTop=de.style.paddingTop,de.dataset.oldPaddingBottom=de.style.paddingBottom,de.dataset.oldOverflow=de.style.overflow,de.style.maxHeight=`${de.scrollHeight}px`,de.style.overflow="hidden"},leave(de){de.scrollHeight!==0&&(de.style.maxHeight=0,de.style.paddingTop=0,de.style.paddingBottom=0)},afterLeave(de){ie(de)},leaveCancelled(de){ie(de)}};return(de,he)=>(openBlock(),createBlock(Transition,mergeProps({name:unref(oe).b()},toHandlers(ue)),{default:withCtx(()=>[renderSlot(de.$slots,"default")]),_:3},16,["name"]))}});var CollapseTransition=_export_sfc$1(_sfc_main$1Y,[["__file","collapse-transition.vue"]]);const ElCollapseTransition=withInstall(CollapseTransition),collapseItemProps=buildProps({title:{type:String,default:""},name:{type:definePropType([String,Number]),default:void 0},icon:{type:iconPropType,default:arrow_right_default},disabled:Boolean}),useCollapseItem=le=>{const oe=inject(collapseContextKey),{namespace:ie}=useNamespace("collapse"),ue=ref(!1),de=ref(!1),he=useIdInjection(),pe=computed(()=>he.current++),_e=computed(()=>{var Ne;return(Ne=le.name)!=null?Ne:`${ie.value}-id-${he.prefix}-${unref(pe)}`}),Ce=computed(()=>oe==null?void 0:oe.activeNames.value.includes(unref(_e)));return{focusing:ue,id:pe,isActive:Ce,handleFocus:()=>{setTimeout(()=>{de.value?de.value=!1:ue.value=!0},50)},handleHeaderClick:()=>{le.disabled||(oe==null||oe.handleItemClick(unref(_e)),ue.value=!1,de.value=!0)},handleEnterClick:()=>{oe==null||oe.handleItemClick(unref(_e))}}},useCollapseItemDOM=(le,{focusing:oe,isActive:ie,id:ue})=>{const de=useNamespace("collapse"),he=computed(()=>[de.b("item"),de.is("active",unref(ie)),de.is("disabled",le.disabled)]),pe=computed(()=>[de.be("item","header"),de.is("active",unref(ie)),{focusing:unref(oe)&&!le.disabled}]),_e=computed(()=>[de.be("item","arrow"),de.is("active",unref(ie))]),Ce=computed(()=>de.be("item","wrap")),xe=computed(()=>de.be("item","content")),Ie=computed(()=>de.b(`content-${unref(ue)}`)),$e=computed(()=>de.b(`head-${unref(ue)}`));return{arrowKls:_e,headKls:pe,rootKls:he,itemWrapperKls:Ce,itemContentKls:xe,scopedContentId:Ie,scopedHeadId:$e}},__default__$19=defineComponent({name:"ElCollapseItem"}),_sfc_main$1X=defineComponent({...__default__$19,props:collapseItemProps,setup(le,{expose:oe}){const ie=le,{focusing:ue,id:de,isActive:he,handleFocus:pe,handleHeaderClick:_e,handleEnterClick:Ce}=useCollapseItem(ie),{arrowKls:xe,headKls:Ie,rootKls:$e,itemWrapperKls:Ne,itemContentKls:Oe,scopedContentId:Fe,scopedHeadId:Ve}=useCollapseItemDOM(ie,{focusing:ue,isActive:he,id:de});return oe({isActive:he}),(ze,Ue)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref($e))},[createBaseVNode("button",{id:unref(Ve),class:normalizeClass(unref(Ie)),"aria-expanded":unref(he),"aria-controls":unref(Fe),"aria-describedby":unref(Fe),tabindex:ze.disabled?-1:0,type:"button",onClick:unref(_e),onKeydown:withKeys(withModifiers(unref(Ce),["stop","prevent"]),["space","enter"]),onFocus:unref(pe),onBlur:Pt=>ue.value=!1},[renderSlot(ze.$slots,"title",{},()=>[createTextVNode(toDisplayString(ze.title),1)]),renderSlot(ze.$slots,"icon",{isActive:unref(he)},()=>[createVNode(unref(ElIcon),{class:normalizeClass(unref(xe))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(ze.icon)))]),_:1},8,["class"])])],42,["id","aria-expanded","aria-controls","aria-describedby","tabindex","onClick","onKeydown","onFocus","onBlur"]),createVNode(unref(ElCollapseTransition),null,{default:withCtx(()=>[withDirectives(createBaseVNode("div",{id:unref(Fe),role:"region",class:normalizeClass(unref(Ne)),"aria-hidden":!unref(he),"aria-labelledby":unref(Ve)},[createBaseVNode("div",{class:normalizeClass(unref(Oe))},[renderSlot(ze.$slots,"default")],2)],10,["id","aria-hidden","aria-labelledby"]),[[vShow,unref(he)]])]),_:3})],2))}});var CollapseItem=_export_sfc$1(_sfc_main$1X,[["__file","collapse-item.vue"]]);const ElCollapse=withInstall(Collapse,{CollapseItem}),ElCollapseItem=withNoopInstall(CollapseItem),alphaSliderProps=buildProps({color:{type:definePropType(Object),required:!0},vertical:{type:Boolean,default:!1}});let isDragging=!1;function draggable(le,oe){if(!isClient)return;const ie=function(he){var pe;(pe=oe.drag)==null||pe.call(oe,he)},ue=function(he){var pe;document.removeEventListener("mousemove",ie),document.removeEventListener("mouseup",ue),document.removeEventListener("touchmove",ie),document.removeEventListener("touchend",ue),document.onselectstart=null,document.ondragstart=null,isDragging=!1,(pe=oe.end)==null||pe.call(oe,he)},de=function(he){var pe;isDragging||(he.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",ie),document.addEventListener("mouseup",ue),document.addEventListener("touchmove",ie),document.addEventListener("touchend",ue),isDragging=!0,(pe=oe.start)==null||pe.call(oe,he))};le.addEventListener("mousedown",de),le.addEventListener("touchstart",de,{passive:!1})}const useAlphaSlider=le=>{const oe=getCurrentInstance(),{t:ie}=useLocale(),ue=shallowRef(),de=shallowRef(),he=computed(()=>le.color.get("alpha")),pe=computed(()=>ie("el.colorpicker.alphaLabel"));function _e($e){var Ne;$e.target!==ue.value&&Ce($e),(Ne=ue.value)==null||Ne.focus()}function Ce($e){if(!de.value||!ue.value)return;const Oe=oe.vnode.el.getBoundingClientRect(),{clientX:Fe,clientY:Ve}=getClientXY($e);if(le.vertical){let ze=Ve-Oe.top;ze=Math.max(ue.value.offsetHeight/2,ze),ze=Math.min(ze,Oe.height-ue.value.offsetHeight/2),le.color.set("alpha",Math.round((ze-ue.value.offsetHeight/2)/(Oe.height-ue.value.offsetHeight)*100))}else{let ze=Fe-Oe.left;ze=Math.max(ue.value.offsetWidth/2,ze),ze=Math.min(ze,Oe.width-ue.value.offsetWidth/2),le.color.set("alpha",Math.round((ze-ue.value.offsetWidth/2)/(Oe.width-ue.value.offsetWidth)*100))}}function xe($e){const{code:Ne,shiftKey:Oe}=$e,Fe=Oe?10:1;switch(Ne){case EVENT_CODE.left:case EVENT_CODE.down:$e.preventDefault(),$e.stopPropagation(),Ie(-Fe);break;case EVENT_CODE.right:case EVENT_CODE.up:$e.preventDefault(),$e.stopPropagation(),Ie(Fe);break}}function Ie($e){let Ne=he.value+$e;Ne=Ne<0?0:Ne>100?100:Ne,le.color.set("alpha",Ne)}return{thumb:ue,bar:de,alpha:he,alphaLabel:pe,handleDrag:Ce,handleClick:_e,handleKeydown:xe}},useAlphaSliderDOM=(le,{bar:oe,thumb:ie,handleDrag:ue})=>{const de=getCurrentInstance(),he=useNamespace("color-alpha-slider"),pe=ref(0),_e=ref(0),Ce=ref();function xe(){if(!ie.value||le.vertical)return 0;const Pt=de.vnode.el,qe=le.color.get("alpha");return Pt?Math.round(qe*(Pt.offsetWidth-ie.value.offsetWidth/2)/100):0}function Ie(){if(!ie.value)return 0;const Pt=de.vnode.el;if(!le.vertical)return 0;const qe=le.color.get("alpha");return Pt?Math.round(qe*(Pt.offsetHeight-ie.value.offsetHeight/2)/100):0}function $e(){if(le.color&&le.color.value){const{r:Pt,g:qe,b:Et}=le.color.toRgb();return`linear-gradient(to right, rgba(${Pt}, ${qe}, ${Et}, 0) 0%, rgba(${Pt}, ${qe}, ${Et}, 1) 100%)`}return""}function Ne(){pe.value=xe(),_e.value=Ie(),Ce.value=$e()}onMounted(()=>{if(!oe.value||!ie.value)return;const Pt={drag:qe=>{ue(qe)},end:qe=>{ue(qe)}};draggable(oe.value,Pt),draggable(ie.value,Pt),Ne()}),watch(()=>le.color.get("alpha"),()=>Ne()),watch(()=>le.color.value,()=>Ne());const Oe=computed(()=>[he.b(),he.is("vertical",le.vertical)]),Fe=computed(()=>he.e("bar")),Ve=computed(()=>he.e("thumb")),ze=computed(()=>({background:Ce.value})),Ue=computed(()=>({left:addUnit(pe.value),top:addUnit(_e.value)}));return{rootKls:Oe,barKls:Fe,barStyle:ze,thumbKls:Ve,thumbStyle:Ue,update:Ne}},COMPONENT_NAME$d="ElColorAlphaSlider",__default__$18=defineComponent({name:COMPONENT_NAME$d}),_sfc_main$1W=defineComponent({...__default__$18,props:alphaSliderProps,setup(le,{expose:oe}){const ie=le,{alpha:ue,alphaLabel:de,bar:he,thumb:pe,handleDrag:_e,handleClick:Ce,handleKeydown:xe}=useAlphaSlider(ie),{rootKls:Ie,barKls:$e,barStyle:Ne,thumbKls:Oe,thumbStyle:Fe,update:Ve}=useAlphaSliderDOM(ie,{bar:he,thumb:pe,handleDrag:_e});return oe({update:Ve,bar:he,thumb:pe}),(ze,Ue)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(Ie))},[createBaseVNode("div",{ref_key:"bar",ref:he,class:normalizeClass(unref($e)),style:normalizeStyle(unref(Ne)),onClick:unref(Ce)},null,14,["onClick"]),createBaseVNode("div",{ref_key:"thumb",ref:pe,class:normalizeClass(unref(Oe)),style:normalizeStyle(unref(Fe)),"aria-label":unref(de),"aria-valuenow":unref(ue),"aria-orientation":ze.vertical?"vertical":"horizontal","aria-valuemin":"0","aria-valuemax":"100",role:"slider",tabindex:"0",onKeydown:unref(xe)},null,46,["aria-label","aria-valuenow","aria-orientation","onKeydown"])],2))}});var AlphaSlider=_export_sfc$1(_sfc_main$1W,[["__file","alpha-slider.vue"]]);const _sfc_main$1V=defineComponent({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(le){const oe=useNamespace("color-hue-slider"),ie=getCurrentInstance(),ue=ref(),de=ref(),he=ref(0),pe=ref(0),_e=computed(()=>le.color.get("hue"));watch(()=>_e.value,()=>{Ne()});function Ce(Oe){Oe.target!==ue.value&&xe(Oe)}function xe(Oe){if(!de.value||!ue.value)return;const Ve=ie.vnode.el.getBoundingClientRect(),{clientX:ze,clientY:Ue}=getClientXY(Oe);let Pt;if(le.vertical){let qe=Ue-Ve.top;qe=Math.min(qe,Ve.height-ue.value.offsetHeight/2),qe=Math.max(ue.value.offsetHeight/2,qe),Pt=Math.round((qe-ue.value.offsetHeight/2)/(Ve.height-ue.value.offsetHeight)*360)}else{let qe=ze-Ve.left;qe=Math.min(qe,Ve.width-ue.value.offsetWidth/2),qe=Math.max(ue.value.offsetWidth/2,qe),Pt=Math.round((qe-ue.value.offsetWidth/2)/(Ve.width-ue.value.offsetWidth)*360)}le.color.set("hue",Pt)}function Ie(){if(!ue.value)return 0;const Oe=ie.vnode.el;if(le.vertical)return 0;const Fe=le.color.get("hue");return Oe?Math.round(Fe*(Oe.offsetWidth-ue.value.offsetWidth/2)/360):0}function $e(){if(!ue.value)return 0;const Oe=ie.vnode.el;if(!le.vertical)return 0;const Fe=le.color.get("hue");return Oe?Math.round(Fe*(Oe.offsetHeight-ue.value.offsetHeight/2)/360):0}function Ne(){he.value=Ie(),pe.value=$e()}return onMounted(()=>{if(!de.value||!ue.value)return;const Oe={drag:Fe=>{xe(Fe)},end:Fe=>{xe(Fe)}};draggable(de.value,Oe),draggable(ue.value,Oe),Ne()}),{bar:de,thumb:ue,thumbLeft:he,thumbTop:pe,hueValue:_e,handleClick:Ce,update:Ne,ns:oe}}});function _sfc_render$q(le,oe,ie,ue,de,he){return openBlock(),createElementBlock("div",{class:normalizeClass([le.ns.b(),le.ns.is("vertical",le.vertical)])},[createBaseVNode("div",{ref:"bar",class:normalizeClass(le.ns.e("bar")),onClick:le.handleClick},null,10,["onClick"]),createBaseVNode("div",{ref:"thumb",class:normalizeClass(le.ns.e("thumb")),style:normalizeStyle({left:le.thumbLeft+"px",top:le.thumbTop+"px"})},null,6)],2)}var HueSlider=_export_sfc$1(_sfc_main$1V,[["render",_sfc_render$q],["__file","hue-slider.vue"]]);const colorPickerProps=buildProps({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:useSizeProp,popperClass:{type:String,default:""},tabindex:{type:[String,Number],default:0},teleported:useTooltipContentProps.teleported,predefine:{type:definePropType(Array)},validateEvent:{type:Boolean,default:!0},...useAriaProps(["ariaLabel"])}),colorPickerEmits={[UPDATE_MODEL_EVENT]:le=>isString$1(le)||isNil(le),[CHANGE_EVENT]:le=>isString$1(le)||isNil(le),activeChange:le=>isString$1(le)||isNil(le),focus:le=>le instanceof FocusEvent,blur:le=>le instanceof FocusEvent},colorPickerContextKey=Symbol("colorPickerContextKey"),hsv2hsl=function(le,oe,ie){return[le,oe*ie/((le=(2-oe)*ie)<1?le:2-le)||0,le/2]},isOnePointZero=function(le){return typeof le=="string"&&le.includes(".")&&Number.parseFloat(le)===1},isPercentage=function(le){return typeof le=="string"&&le.includes("%")},bound01=function(le,oe){isOnePointZero(le)&&(le="100%");const ie=isPercentage(le);return le=Math.min(oe,Math.max(0,Number.parseFloat(`${le}`))),ie&&(le=Number.parseInt(`${le*oe}`,10)/100),Math.abs(le-oe)<1e-6?1:le%oe/Number.parseFloat(oe)},INT_HEX_MAP={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},hexOne=le=>{le=Math.min(Math.round(le),255);const oe=Math.floor(le/16),ie=le%16;return`${INT_HEX_MAP[oe]||oe}${INT_HEX_MAP[ie]||ie}`},toHex=function({r:le,g:oe,b:ie}){return Number.isNaN(+le)||Number.isNaN(+oe)||Number.isNaN(+ie)?"":`#${hexOne(le)}${hexOne(oe)}${hexOne(ie)}`},HEX_INT_MAP={A:10,B:11,C:12,D:13,E:14,F:15},parseHexChannel=function(le){return le.length===2?(HEX_INT_MAP[le[0].toUpperCase()]||+le[0])*16+(HEX_INT_MAP[le[1].toUpperCase()]||+le[1]):HEX_INT_MAP[le[1].toUpperCase()]||+le[1]},hsl2hsv=function(le,oe,ie){oe=oe/100,ie=ie/100;let ue=oe;const de=Math.max(ie,.01);ie*=2,oe*=ie<=1?ie:2-ie,ue*=de<=1?de:2-de;const he=(ie+oe)/2,pe=ie===0?2*ue/(de+ue):2*oe/(ie+oe);return{h:le,s:pe*100,v:he*100}},rgb2hsv=(le,oe,ie)=>{le=bound01(le,255),oe=bound01(oe,255),ie=bound01(ie,255);const ue=Math.max(le,oe,ie),de=Math.min(le,oe,ie);let he;const pe=ue,_e=ue-de,Ce=ue===0?0:_e/ue;if(ue===de)he=0;else{switch(ue){case le:{he=(oe-ie)/_e+(oe<ie?6:0);break}case oe:{he=(ie-le)/_e+2;break}case ie:{he=(le-oe)/_e+4;break}}he/=6}return{h:he*360,s:Ce*100,v:pe*100}},hsv2rgb=function(le,oe,ie){le=bound01(le,360)*6,oe=bound01(oe,100),ie=bound01(ie,100);const ue=Math.floor(le),de=le-ue,he=ie*(1-oe),pe=ie*(1-de*oe),_e=ie*(1-(1-de)*oe),Ce=ue%6,xe=[ie,pe,he,he,_e,ie][Ce],Ie=[_e,ie,ie,pe,he,he][Ce],$e=[he,he,_e,ie,ie,pe][Ce];return{r:Math.round(xe*255),g:Math.round(Ie*255),b:Math.round($e*255)}};let Color$1=class{constructor(oe={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const ie in oe)hasOwn$b(oe,ie)&&(this[ie]=oe[ie]);oe.value?this.fromString(oe.value):this.doOnChange()}set(oe,ie){if(arguments.length===1&&typeof oe=="object"){for(const ue in oe)hasOwn$b(oe,ue)&&this.set(ue,oe[ue]);return}this[`_${oe}`]=ie,this.doOnChange()}get(oe){return oe==="alpha"?Math.floor(this[`_${oe}`]):this[`_${oe}`]}toRgb(){return hsv2rgb(this._hue,this._saturation,this._value)}fromString(oe){if(!oe){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const ie=(ue,de,he)=>{this._hue=Math.max(0,Math.min(360,ue)),this._saturation=Math.max(0,Math.min(100,de)),this._value=Math.max(0,Math.min(100,he)),this.doOnChange()};if(oe.includes("hsl")){const ue=oe.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(de=>de!=="").map((de,he)=>he>2?Number.parseFloat(de):Number.parseInt(de,10));if(ue.length===4?this._alpha=Number.parseFloat(ue[3])*100:ue.length===3&&(this._alpha=100),ue.length>=3){const{h:de,s:he,v:pe}=hsl2hsv(ue[0],ue[1],ue[2]);ie(de,he,pe)}}else if(oe.includes("hsv")){const ue=oe.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(de=>de!=="").map((de,he)=>he>2?Number.parseFloat(de):Number.parseInt(de,10));ue.length===4?this._alpha=Number.parseFloat(ue[3])*100:ue.length===3&&(this._alpha=100),ue.length>=3&&ie(ue[0],ue[1],ue[2])}else if(oe.includes("rgb")){const ue=oe.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(de=>de!=="").map((de,he)=>he>2?Number.parseFloat(de):Number.parseInt(de,10));if(ue.length===4?this._alpha=Number.parseFloat(ue[3])*100:ue.length===3&&(this._alpha=100),ue.length>=3){const{h:de,s:he,v:pe}=rgb2hsv(ue[0],ue[1],ue[2]);ie(de,he,pe)}}else if(oe.includes("#")){const ue=oe.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(ue))return;let de,he,pe;ue.length===3?(de=parseHexChannel(ue[0]+ue[0]),he=parseHexChannel(ue[1]+ue[1]),pe=parseHexChannel(ue[2]+ue[2])):(ue.length===6||ue.length===8)&&(de=parseHexChannel(ue.slice(0,2)),he=parseHexChannel(ue.slice(2,4)),pe=parseHexChannel(ue.slice(4,6))),ue.length===8?this._alpha=parseHexChannel(ue.slice(6))/255*100:(ue.length===3||ue.length===6)&&(this._alpha=100);const{h:_e,s:Ce,v:xe}=rgb2hsv(de,he,pe);ie(_e,Ce,xe)}}compare(oe){return Math.abs(oe._hue-this._hue)<2&&Math.abs(oe._saturation-this._saturation)<1&&Math.abs(oe._value-this._value)<1&&Math.abs(oe._alpha-this._alpha)<1}doOnChange(){const{_hue:oe,_saturation:ie,_value:ue,_alpha:de,format:he}=this;if(this.enableAlpha)switch(he){case"hsl":{const pe=hsv2hsl(oe,ie/100,ue/100);this.value=`hsla(${oe}, ${Math.round(pe[1]*100)}%, ${Math.round(pe[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${oe}, ${Math.round(ie)}%, ${Math.round(ue)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${toHex(hsv2rgb(oe,ie,ue))}${hexOne(de*255/100)}`;break}default:{const{r:pe,g:_e,b:Ce}=hsv2rgb(oe,ie,ue);this.value=`rgba(${pe}, ${_e}, ${Ce}, ${this.get("alpha")/100})`}}else switch(he){case"hsl":{const pe=hsv2hsl(oe,ie/100,ue/100);this.value=`hsl(${oe}, ${Math.round(pe[1]*100)}%, ${Math.round(pe[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${oe}, ${Math.round(ie)}%, ${Math.round(ue)}%)`;break}case"rgb":{const{r:pe,g:_e,b:Ce}=hsv2rgb(oe,ie,ue);this.value=`rgb(${pe}, ${_e}, ${Ce})`;break}default:this.value=toHex(hsv2rgb(oe,ie,ue))}}};const _sfc_main$1U=defineComponent({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0}},setup(le){const oe=useNamespace("color-predefine"),{currentColor:ie}=inject(colorPickerContextKey),ue=ref(he(le.colors,le.color));watch(()=>ie.value,pe=>{const _e=new Color$1;_e.fromString(pe),ue.value.forEach(Ce=>{Ce.selected=_e.compare(Ce)})}),watchEffect(()=>{ue.value=he(le.colors,le.color)});function de(pe){le.color.fromString(le.colors[pe])}function he(pe,_e){return pe.map(Ce=>{const xe=new Color$1;return xe.enableAlpha=le.enableAlpha,xe.format="rgba",xe.fromString(Ce),xe.selected=xe.value===_e.value,xe})}return{rgbaColors:ue,handleSelect:de,ns:oe}}});function _sfc_render$p(le,oe,ie,ue,de,he){return openBlock(),createElementBlock("div",{class:normalizeClass(le.ns.b())},[createBaseVNode("div",{class:normalizeClass(le.ns.e("colors"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(le.rgbaColors,(pe,_e)=>(openBlock(),createElementBlock("div",{key:le.colors[_e],class:normalizeClass([le.ns.e("color-selector"),le.ns.is("alpha",pe._alpha<100),{selected:pe.selected}]),onClick:Ce=>le.handleSelect(_e)},[createBaseVNode("div",{style:normalizeStyle({backgroundColor:pe.value})},null,4)],10,["onClick"]))),128))],2)],2)}var Predefine=_export_sfc$1(_sfc_main$1U,[["render",_sfc_render$p],["__file","predefine.vue"]]);const _sfc_main$1T=defineComponent({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(le){const oe=useNamespace("color-svpanel"),ie=getCurrentInstance(),ue=ref(0),de=ref(0),he=ref("hsl(0, 100%, 50%)"),pe=computed(()=>{const xe=le.color.get("hue"),Ie=le.color.get("value");return{hue:xe,value:Ie}});function _e(){const xe=le.color.get("saturation"),Ie=le.color.get("value"),$e=ie.vnode.el,{clientWidth:Ne,clientHeight:Oe}=$e;de.value=xe*Ne/100,ue.value=(100-Ie)*Oe/100,he.value=`hsl(${le.color.get("hue")}, 100%, 50%)`}function Ce(xe){const $e=ie.vnode.el.getBoundingClientRect(),{clientX:Ne,clientY:Oe}=getClientXY(xe);let Fe=Ne-$e.left,Ve=Oe-$e.top;Fe=Math.max(0,Fe),Fe=Math.min(Fe,$e.width),Ve=Math.max(0,Ve),Ve=Math.min(Ve,$e.height),de.value=Fe,ue.value=Ve,le.color.set({saturation:Fe/$e.width*100,value:100-Ve/$e.height*100})}return watch(()=>pe.value,()=>{_e()}),onMounted(()=>{draggable(ie.vnode.el,{drag:xe=>{Ce(xe)},end:xe=>{Ce(xe)}}),_e()}),{cursorTop:ue,cursorLeft:de,background:he,colorValue:pe,handleDrag:Ce,update:_e,ns:oe}}});function _sfc_render$o(le,oe,ie,ue,de,he){return openBlock(),createElementBlock("div",{class:normalizeClass(le.ns.b()),style:normalizeStyle({backgroundColor:le.background})},[createBaseVNode("div",{class:normalizeClass(le.ns.e("white"))},null,2),createBaseVNode("div",{class:normalizeClass(le.ns.e("black"))},null,2),createBaseVNode("div",{class:normalizeClass(le.ns.e("cursor")),style:normalizeStyle({top:le.cursorTop+"px",left:le.cursorLeft+"px"})},[createBaseVNode("div")],6)],6)}var SvPanel=_export_sfc$1(_sfc_main$1T,[["render",_sfc_render$o],["__file","sv-panel.vue"]]);const __default__$17=defineComponent({name:"ElColorPicker"}),_sfc_main$1S=defineComponent({...__default__$17,props:colorPickerProps,emits:colorPickerEmits,setup(le,{expose:oe,emit:ie}){const ue=le,{t:de}=useLocale(),he=useNamespace("color"),{formItem:pe}=useFormItem(),_e=useFormSize(),Ce=useFormDisabled(),{inputId:xe,isLabeledByFormItem:Ie}=useFormItemInputId(ue,{formItemContext:pe}),$e=ref(),Ne=ref(),Oe=ref(),Fe=ref(),Ve=ref(),ze=ref(),{isFocused:Ue,handleFocus:Pt,handleBlur:qe}=useFocusController(Ve,{beforeFocus(){return Ce.value},beforeBlur(Qn){var _r;return(_r=Fe.value)==null?void 0:_r.isFocusInsideContent(Qn)},afterBlur(){wn(!1),En()}});let Et=!0;const kt=reactive(new Color$1({enableAlpha:ue.showAlpha,format:ue.colorFormat||"",value:ue.modelValue})),At=ref(!1),Dt=ref(!1),Lt=ref(""),jt=computed(()=>!ue.modelValue&&!Dt.value?"transparent":$n(kt,ue.showAlpha)),_n=computed(()=>!ue.modelValue&&!Dt.value?"":kt.value),bn=computed(()=>Ie.value?void 0:ue.ariaLabel||de("el.colorpicker.defaultLabel")),vn=computed(()=>Ie.value?pe==null?void 0:pe.labelId:void 0),Tn=computed(()=>[he.b("picker"),he.is("disabled",Ce.value),he.bm("picker",_e.value),he.is("focused",Ue.value)]);function $n(Qn,_r){if(!(Qn instanceof Color$1))throw new TypeError("color should be instance of _color Class");const{r:Zn,g:Gn,b:Nn}=Qn.toRgb();return _r?`rgba(${Zn}, ${Gn}, ${Nn}, ${Qn.get("alpha")/100})`:`rgb(${Zn}, ${Gn}, ${Nn})`}function wn(Qn){At.value=Qn}const Cn=debounce(wn,100,{leading:!0});function Sn(){Ce.value||wn(!0)}function In(){Cn(!1),En()}function En(){nextTick(()=>{ue.modelValue?kt.fromString(ue.modelValue):(kt.value="",nextTick(()=>{Dt.value=!1}))})}function xn(){Ce.value||Cn(!At.value)}function kn(){kt.fromString(Lt.value)}function On(){const Qn=kt.value;ie(UPDATE_MODEL_EVENT,Qn),ie("change",Qn),ue.validateEvent&&(pe==null||pe.validate("change").catch(_r=>void 0)),Cn(!1),nextTick(()=>{const _r=new Color$1({enableAlpha:ue.showAlpha,format:ue.colorFormat||"",value:ue.modelValue});kt.compare(_r)||En()})}function Mn(){Cn(!1),ie(UPDATE_MODEL_EVENT,null),ie("change",null),ue.modelValue!==null&&ue.validateEvent&&(pe==null||pe.validate("change").catch(Qn=>void 0)),En()}function Un(){At.value&&(In(),Ue.value&&Rn())}function zn(Qn){Qn.preventDefault(),Qn.stopPropagation(),wn(!1),En()}function Hn(Qn){switch(Qn.code){case EVENT_CODE.enter:case EVENT_CODE.space:Qn.preventDefault(),Qn.stopPropagation(),Sn(),ze.value.focus();break;case EVENT_CODE.esc:zn(Qn);break}}function Rn(){Ve.value.focus()}function Jn(){Ve.value.blur()}return onMounted(()=>{ue.modelValue&&(Lt.value=_n.value)}),watch(()=>ue.modelValue,Qn=>{Qn?Qn&&Qn!==kt.value&&(Et=!1,kt.fromString(Qn)):Dt.value=!1}),watch(()=>[ue.colorFormat,ue.showAlpha],()=>{kt.enableAlpha=ue.showAlpha,kt.format=ue.colorFormat||kt.format,kt.doOnChange(),ie(UPDATE_MODEL_EVENT,kt.value)}),watch(()=>_n.value,Qn=>{Lt.value=Qn,Et&&ie("activeChange",Qn),Et=!0}),watch(()=>kt.value,()=>{!ue.modelValue&&!Dt.value&&(Dt.value=!0)}),watch(()=>At.value,()=>{nextTick(()=>{var Qn,_r,Zn;(Qn=$e.value)==null||Qn.update(),(_r=Ne.value)==null||_r.update(),(Zn=Oe.value)==null||Zn.update()})}),provide(colorPickerContextKey,{currentColor:_n}),oe({color:kt,show:Sn,hide:In,focus:Rn,blur:Jn}),(Qn,_r)=>(openBlock(),createBlock(unref(ElTooltip),{ref_key:"popper",ref:Fe,visible:At.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[unref(he).be("picker","panel"),unref(he).b("dropdown"),Qn.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",teleported:Qn.teleported,transition:`${unref(he).namespace.value}-zoom-in-top`,persistent:"",onHide:Zn=>wn(!1)},{content:withCtx(()=>[withDirectives((openBlock(),createElementBlock("div",{onKeydown:withKeys(zn,["esc"])},[createBaseVNode("div",{class:normalizeClass(unref(he).be("dropdown","main-wrapper"))},[createVNode(HueSlider,{ref_key:"hue",ref:$e,class:"hue-slider",color:unref(kt),vertical:""},null,8,["color"]),createVNode(SvPanel,{ref_key:"sv",ref:Ne,color:unref(kt)},null,8,["color"])],2),Qn.showAlpha?(openBlock(),createBlock(AlphaSlider,{key:0,ref_key:"alpha",ref:Oe,color:unref(kt)},null,8,["color"])):createCommentVNode("v-if",!0),Qn.predefine?(openBlock(),createBlock(Predefine,{key:1,ref:"predefine","enable-alpha":Qn.showAlpha,color:unref(kt),colors:Qn.predefine},null,8,["enable-alpha","color","colors"])):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(he).be("dropdown","btns"))},[createBaseVNode("span",{class:normalizeClass(unref(he).be("dropdown","value"))},[createVNode(unref(ElInput),{ref_key:"inputRef",ref:ze,modelValue:Lt.value,"onUpdate:modelValue":Zn=>Lt.value=Zn,"validate-event":!1,size:"small",onKeyup:withKeys(kn,["enter"]),onBlur:kn},null,8,["modelValue","onUpdate:modelValue","onKeyup"])],2),createVNode(unref(ElButton),{class:normalizeClass(unref(he).be("dropdown","link-btn")),text:"",size:"small",onClick:Mn},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(de)("el.colorpicker.clear")),1)]),_:1},8,["class"]),createVNode(unref(ElButton),{plain:"",size:"small",class:normalizeClass(unref(he).be("dropdown","btn")),onClick:On},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(de)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,["onKeydown"])),[[unref(ClickOutside),Un]])]),default:withCtx(()=>[createBaseVNode("div",mergeProps({id:unref(xe),ref_key:"triggerRef",ref:Ve},Qn.$attrs,{class:unref(Tn),role:"button","aria-label":unref(bn),"aria-labelledby":unref(vn),"aria-description":unref(de)("el.colorpicker.description",{color:Qn.modelValue||""}),"aria-disabled":unref(Ce),tabindex:unref(Ce)?-1:Qn.tabindex,onKeydown:Hn,onFocus:unref(Pt),onBlur:unref(qe)}),[unref(Ce)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(he).be("picker","mask"))},null,2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(he).be("picker","trigger")),onClick:xn},[createBaseVNode("span",{class:normalizeClass([unref(he).be("picker","color"),unref(he).is("alpha",Qn.showAlpha)])},[createBaseVNode("span",{class:normalizeClass(unref(he).be("picker","color-inner")),style:normalizeStyle({backgroundColor:unref(jt)})},[withDirectives(createVNode(unref(ElIcon),{class:normalizeClass([unref(he).be("picker","icon"),unref(he).is("icon-arrow-down")])},{default:withCtx(()=>[createVNode(unref(arrow_down_default))]),_:1},8,["class"]),[[vShow,Qn.modelValue||Dt.value]]),withDirectives(createVNode(unref(ElIcon),{class:normalizeClass([unref(he).be("picker","empty"),unref(he).is("icon-close")])},{default:withCtx(()=>[createVNode(unref(close_default))]),_:1},8,["class"]),[[vShow,!Qn.modelValue&&!Dt.value]])],6)],2)],2)],16,["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex","onFocus","onBlur"])]),_:1},8,["visible","popper-class","teleported","transition","onHide"]))}});var ColorPicker=_export_sfc$1(_sfc_main$1S,[["__file","color-picker.vue"]]);const ElColorPicker=withInstall(ColorPicker),__default__$16=defineComponent({name:"ElContainer"}),_sfc_main$1R=defineComponent({...__default__$16,props:{direction:{type:String}},setup(le){const oe=le,ie=useSlots(),ue=useNamespace("container"),de=computed(()=>oe.direction==="vertical"?!0:oe.direction==="horizontal"?!1:ie&&ie.default?ie.default().some(pe=>{const _e=pe.type.name;return _e==="ElHeader"||_e==="ElFooter"}):!1);return(he,pe)=>(openBlock(),createElementBlock("section",{class:normalizeClass([unref(ue).b(),unref(ue).is("vertical",unref(de))])},[renderSlot(he.$slots,"default")],2))}});var Container=_export_sfc$1(_sfc_main$1R,[["__file","container.vue"]]);const __default__$15=defineComponent({name:"ElAside"}),_sfc_main$1Q=defineComponent({...__default__$15,props:{width:{type:String,default:null}},setup(le){const oe=le,ie=useNamespace("aside"),ue=computed(()=>oe.width?ie.cssVarBlock({width:oe.width}):{});return(de,he)=>(openBlock(),createElementBlock("aside",{class:normalizeClass(unref(ie).b()),style:normalizeStyle(unref(ue))},[renderSlot(de.$slots,"default")],6))}});var Aside=_export_sfc$1(_sfc_main$1Q,[["__file","aside.vue"]]);const __default__$14=defineComponent({name:"ElFooter"}),_sfc_main$1P=defineComponent({...__default__$14,props:{height:{type:String,default:null}},setup(le){const oe=le,ie=useNamespace("footer"),ue=computed(()=>oe.height?ie.cssVarBlock({height:oe.height}):{});return(de,he)=>(openBlock(),createElementBlock("footer",{class:normalizeClass(unref(ie).b()),style:normalizeStyle(unref(ue))},[renderSlot(de.$slots,"default")],6))}});var Footer$2=_export_sfc$1(_sfc_main$1P,[["__file","footer.vue"]]);const __default__$13=defineComponent({name:"ElHeader"}),_sfc_main$1O=defineComponent({...__default__$13,props:{height:{type:String,default:null}},setup(le){const oe=le,ie=useNamespace("header"),ue=computed(()=>oe.height?ie.cssVarBlock({height:oe.height}):{});return(de,he)=>(openBlock(),createElementBlock("header",{class:normalizeClass(unref(ie).b()),style:normalizeStyle(unref(ue))},[renderSlot(de.$slots,"default")],6))}});var Header$1=_export_sfc$1(_sfc_main$1O,[["__file","header.vue"]]);const __default__$12=defineComponent({name:"ElMain"}),_sfc_main$1N=defineComponent({...__default__$12,setup(le){const oe=useNamespace("main");return(ie,ue)=>(openBlock(),createElementBlock("main",{class:normalizeClass(unref(oe).b())},[renderSlot(ie.$slots,"default")],2))}});var Main=_export_sfc$1(_sfc_main$1N,[["__file","main.vue"]]);const ElContainer=withInstall(Container,{Aside,Footer:Footer$2,Header:Header$1,Main}),ElAside=withNoopInstall(Aside),ElFooter=withNoopInstall(Footer$2),ElHeader=withNoopInstall(Header$1),ElMain=withNoopInstall(Main);var advancedFormat$1={exports:{}};(function(le,oe){(function(ie,ue){le.exports=ue()})(commonjsGlobal,function(){return function(ie,ue){var de=ue.prototype,he=de.format;de.format=function(pe){var _e=this,Ce=this.$locale();if(!this.isValid())return he.bind(this)(pe);var xe=this.$utils(),Ie=(pe||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function($e){switch($e){case"Q":return Math.ceil((_e.$M+1)/3);case"Do":return Ce.ordinal(_e.$D);case"gggg":return _e.weekYear();case"GGGG":return _e.isoWeekYear();case"wo":return Ce.ordinal(_e.week(),"W");case"w":case"ww":return xe.s(_e.week(),$e==="w"?1:2,"0");case"W":case"WW":return xe.s(_e.isoWeek(),$e==="W"?1:2,"0");case"k":case"kk":return xe.s(String(_e.$H===0?24:_e.$H),$e==="k"?1:2,"0");case"X":return Math.floor(_e.$d.getTime()/1e3);case"x":return _e.$d.getTime();case"z":return"["+_e.offsetName()+"]";case"zzz":return"["+_e.offsetName("long")+"]";default:return $e}});return he.bind(this)(Ie)}}})})(advancedFormat$1);var advancedFormatExports=advancedFormat$1.exports;const advancedFormat=getDefaultExportFromCjs(advancedFormatExports);var weekOfYear$1={exports:{}};(function(le,oe){(function(ie,ue){le.exports=ue()})(commonjsGlobal,function(){var ie="week",ue="year";return function(de,he,pe){var _e=he.prototype;_e.week=function(Ce){if(Ce===void 0&&(Ce=null),Ce!==null)return this.add(7*(Ce-this.week()),"day");var xe=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var Ie=pe(this).startOf(ue).add(1,ue).date(xe),$e=pe(this).endOf(ie);if(Ie.isBefore($e))return 1}var Ne=pe(this).startOf(ue).date(xe).startOf(ie).subtract(1,"millisecond"),Oe=this.diff(Ne,ie,!0);return Oe<0?pe(this).startOf("week").week():Math.ceil(Oe)},_e.weeks=function(Ce){return Ce===void 0&&(Ce=null),this.week(Ce)}}})})(weekOfYear$1);var weekOfYearExports=weekOfYear$1.exports;const weekOfYear=getDefaultExportFromCjs(weekOfYearExports);var weekYear$1={exports:{}};(function(le,oe){(function(ie,ue){le.exports=ue()})(commonjsGlobal,function(){return function(ie,ue){ue.prototype.weekYear=function(){var de=this.month(),he=this.week(),pe=this.year();return he===1&&de===11?pe+1:de===0&&he>=52?pe-1:pe}}})})(weekYear$1);var weekYearExports=weekYear$1.exports;const weekYear=getDefaultExportFromCjs(weekYearExports);var dayOfYear$1={exports:{}};(function(le,oe){(function(ie,ue){le.exports=ue()})(commonjsGlobal,function(){return function(ie,ue,de){ue.prototype.dayOfYear=function(he){var pe=Math.round((de(this).startOf("day")-de(this).startOf("year"))/864e5)+1;return he==null?pe:this.add(he-pe,"day")}}})})(dayOfYear$1);var dayOfYearExports=dayOfYear$1.exports;const dayOfYear=getDefaultExportFromCjs(dayOfYearExports);var isSameOrAfter$1={exports:{}};(function(le,oe){(function(ie,ue){le.exports=ue()})(commonjsGlobal,function(){return function(ie,ue){ue.prototype.isSameOrAfter=function(de,he){return this.isSame(de,he)||this.isAfter(de,he)}}})})(isSameOrAfter$1);var isSameOrAfterExports=isSameOrAfter$1.exports;const isSameOrAfter=getDefaultExportFromCjs(isSameOrAfterExports);var isSameOrBefore$1={exports:{}};(function(le,oe){(function(ie,ue){le.exports=ue()})(commonjsGlobal,function(){return function(ie,ue){ue.prototype.isSameOrBefore=function(de,he){return this.isSame(de,he)||this.isBefore(de,he)}}})})(isSameOrBefore$1);var isSameOrBeforeExports=isSameOrBefore$1.exports;const isSameOrBefore=getDefaultExportFromCjs(isSameOrBeforeExports),ROOT_PICKER_INJECTION_KEY=Symbol(),datePickerProps=buildProps({...timePickerDefaultProps,type:{type:definePropType(String),default:"date"}}),selectionModes=["date","dates","year","years","month","months","week","range"],datePickerSharedProps=buildProps({disabledDate:{type:definePropType(Function)},date:{type:definePropType(Object),required:!0},minDate:{type:definePropType(Object)},maxDate:{type:definePropType(Object)},parsedValue:{type:definePropType([Object,Array])},rangeState:{type:definePropType(Object),default:()=>({endDate:null,selecting:!1})}}),panelSharedProps=buildProps({type:{type:definePropType(String),required:!0,values:datePickTypes},dateFormat:String,timeFormat:String}),panelRangeSharedProps=buildProps({unlinkPanels:Boolean,parsedValue:{type:definePropType(Array)}}),selectionModeWithDefault=le=>({type:String,values:selectionModes,default:le}),panelDatePickProps=buildProps({...panelSharedProps,parsedValue:{type:definePropType([Object,Array])},visible:{type:Boolean},format:{type:String,default:""}}),isValidRange=le=>{if(!isArray$3(le))return!1;const[oe,ie]=le;return dayjs.isDayjs(oe)&&dayjs.isDayjs(ie)&&oe.isSameOrBefore(ie)},getDefaultValue=(le,{lang:oe,unit:ie,unlinkPanels:ue})=>{let de;if(isArray$3(le)){let[he,pe]=le.map(_e=>dayjs(_e).locale(oe));return ue||(pe=he.add(1,ie)),[he,pe]}else le?de=dayjs(le):de=dayjs();return de=de.locale(oe),[de,de.add(1,ie)]},buildPickerTable=(le,oe,{columnIndexOffset:ie,startDate:ue,nextEndDate:de,now:he,unit:pe,relativeDateGetter:_e,setCellMetadata:Ce,setRowMetadata:xe})=>{for(let Ie=0;Ie<le.row;Ie++){const $e=oe[Ie];for(let Ne=0;Ne<le.column;Ne++){let Oe=$e[Ne+ie];Oe||(Oe={row:Ie,column:Ne,type:"normal",inRange:!1,start:!1,end:!1});const Fe=Ie*le.column+Ne,Ve=_e(Fe);Oe.dayjs=Ve,Oe.date=Ve.toDate(),Oe.timestamp=Ve.valueOf(),Oe.type="normal",Oe.inRange=!!(ue&&Ve.isSameOrAfter(ue,pe)&&de&&Ve.isSameOrBefore(de,pe))||!!(ue&&Ve.isSameOrBefore(ue,pe)&&de&&Ve.isSameOrAfter(de,pe)),ue!=null&&ue.isSameOrAfter(de)?(Oe.start=!!de&&Ve.isSame(de,pe),Oe.end=ue&&Ve.isSame(ue,pe)):(Oe.start=!!ue&&Ve.isSame(ue,pe),Oe.end=!!de&&Ve.isSame(de,pe)),Ve.isSame(he,pe)&&(Oe.type="today"),Ce==null||Ce(Oe,{rowIndex:Ie,columnIndex:Ne}),$e[Ne+ie]=Oe}xe==null||xe($e)}},datesInMonth=(le,oe,ie)=>{const ue=dayjs().locale(ie).startOf("month").month(oe).year(le),de=ue.daysInMonth();return rangeArr(de).map(he=>ue.add(he,"day").toDate())},getValidDateOfMonth=(le,oe,ie,ue)=>{const de=dayjs().year(le).month(oe).startOf("month"),he=datesInMonth(le,oe,ie).find(pe=>!(ue!=null&&ue(pe)));return he?dayjs(he).locale(ie):de.locale(ie)},getValidDateOfYear=(le,oe,ie)=>{const ue=le.year();if(!(ie!=null&&ie(le.toDate())))return le.locale(oe);const de=le.month();if(!datesInMonth(ue,de,oe).every(ie))return getValidDateOfMonth(ue,de,oe,ie);for(let he=0;he<12;he++)if(!datesInMonth(ue,he,oe).every(ie))return getValidDateOfMonth(ue,he,oe,ie);return le},basicDateTableProps=buildProps({...datePickerSharedProps,cellClassName:{type:definePropType(Function)},showWeekNumber:Boolean,selectionMode:selectionModeWithDefault("date")}),basicDateTableEmits=["changerange","pick","select"],isNormalDay=(le="")=>["normal","today"].includes(le),useBasicDateTable=(le,oe)=>{const{lang:ie}=useLocale(),ue=ref(),de=ref(),he=ref(),pe=ref(),_e=ref([[],[],[],[],[],[]]);let Ce=!1;const xe=le.date.$locale().weekStart||7,Ie=le.date.locale("en").localeData().weekdaysShort().map(En=>En.toLowerCase()),$e=computed(()=>xe>3?7-xe:-xe),Ne=computed(()=>{const En=le.date.startOf("month");return En.subtract(En.day()||7,"day")}),Oe=computed(()=>Ie.concat(Ie).slice(xe,xe+7)),Fe=computed(()=>flatten(unref(Et)).some(En=>En.isCurrent)),Ve=computed(()=>{const En=le.date.startOf("month"),xn=En.day()||7,kn=En.daysInMonth(),On=En.subtract(1,"month").daysInMonth();return{startOfMonthDay:xn,dateCountOfMonth:kn,dateCountOfLastMonth:On}}),ze=computed(()=>le.selectionMode==="dates"?castArray(le.parsedValue):[]),Ue=(En,{count:xn,rowIndex:kn,columnIndex:On})=>{const{startOfMonthDay:Mn,dateCountOfMonth:Un,dateCountOfLastMonth:zn}=unref(Ve),Hn=unref($e);if(kn>=0&&kn<=1){const Rn=Mn+Hn<0?7+Mn+Hn:Mn+Hn;if(On+kn*7>=Rn)return En.text=xn,!0;En.text=zn-(Rn-On%7)+1+kn*7,En.type="prev-month"}else return xn<=Un?En.text=xn:(En.text=xn-Un,En.type="next-month"),!0;return!1},Pt=(En,{columnIndex:xn,rowIndex:kn},On)=>{const{disabledDate:Mn,cellClassName:Un}=le,zn=unref(ze),Hn=Ue(En,{count:On,rowIndex:kn,columnIndex:xn}),Rn=En.dayjs.toDate();return En.selected=zn.find(Jn=>Jn.isSame(En.dayjs,"day")),En.isSelected=!!En.selected,En.isCurrent=At(En),En.disabled=Mn==null?void 0:Mn(Rn),En.customClass=Un==null?void 0:Un(Rn),Hn},qe=En=>{if(le.selectionMode==="week"){const[xn,kn]=le.showWeekNumber?[1,7]:[0,6],On=In(En[xn+1]);En[xn].inRange=On,En[xn].start=On,En[kn].inRange=On,En[kn].end=On}},Et=computed(()=>{const{minDate:En,maxDate:xn,rangeState:kn,showWeekNumber:On}=le,Mn=unref($e),Un=unref(_e),zn="day";let Hn=1;if(On)for(let Rn=0;Rn<6;Rn++)Un[Rn][0]||(Un[Rn][0]={type:"week",text:unref(Ne).add(Rn*7+1,zn).week()});return buildPickerTable({row:6,column:7},Un,{startDate:En,columnIndexOffset:On?1:0,nextEndDate:kn.endDate||xn||kn.selecting&&En||null,now:dayjs().locale(unref(ie)).startOf(zn),unit:zn,relativeDateGetter:Rn=>unref(Ne).add(Rn-Mn,zn),setCellMetadata:(...Rn)=>{Pt(...Rn,Hn)&&(Hn+=1)},setRowMetadata:qe}),Un});watch(()=>le.date,async()=>{var En;(En=unref(ue))!=null&&En.contains(document.activeElement)&&(await nextTick(),await kt())});const kt=async()=>{var En;return(En=unref(de))==null?void 0:En.focus()},At=En=>le.selectionMode==="date"&&isNormalDay(En.type)&&Dt(En,le.parsedValue),Dt=(En,xn)=>xn?dayjs(xn).locale(unref(ie)).isSame(le.date.date(Number(En.text)),"day"):!1,Lt=(En,xn)=>{const kn=En*7+(xn-(le.showWeekNumber?1:0))-unref($e);return unref(Ne).add(kn,"day")},jt=En=>{var xn;if(!le.rangeState.selecting)return;let kn=En.target;if(kn.tagName==="SPAN"&&(kn=(xn=kn.parentNode)==null?void 0:xn.parentNode),kn.tagName==="DIV"&&(kn=kn.parentNode),kn.tagName!=="TD")return;const On=kn.parentNode.rowIndex-1,Mn=kn.cellIndex;unref(Et)[On][Mn].disabled||(On!==unref(he)||Mn!==unref(pe))&&(he.value=On,pe.value=Mn,oe("changerange",{selecting:!0,endDate:Lt(On,Mn)}))},_n=En=>!unref(Fe)&&(En==null?void 0:En.text)===1&&En.type==="normal"||En.isCurrent,bn=En=>{Ce||unref(Fe)||le.selectionMode!=="date"||Sn(En,!0)},vn=En=>{En.target.closest("td")&&(Ce=!0)},Tn=En=>{En.target.closest("td")&&(Ce=!1)},$n=En=>{!le.rangeState.selecting||!le.minDate?(oe("pick",{minDate:En,maxDate:null}),oe("select",!0)):(En>=le.minDate?oe("pick",{minDate:le.minDate,maxDate:En}):oe("pick",{minDate:En,maxDate:le.minDate}),oe("select",!1))},wn=En=>{const xn=En.week(),kn=`${En.year()}w${xn}`;oe("pick",{year:En.year(),week:xn,value:kn,date:En.startOf("week")})},Cn=(En,xn)=>{const kn=xn?castArray(le.parsedValue).filter(On=>(On==null?void 0:On.valueOf())!==En.valueOf()):castArray(le.parsedValue).concat([En]);oe("pick",kn)},Sn=(En,xn=!1)=>{const kn=En.target.closest("td");if(!kn)return;const On=kn.parentNode.rowIndex-1,Mn=kn.cellIndex,Un=unref(Et)[On][Mn];if(Un.disabled||Un.type==="week")return;const zn=Lt(On,Mn);switch(le.selectionMode){case"range":{$n(zn);break}case"date":{oe("pick",zn,xn);break}case"week":{wn(zn);break}case"dates":{Cn(zn,!!Un.selected);break}}},In=En=>{if(le.selectionMode!=="week")return!1;let xn=le.date.startOf("day");if(En.type==="prev-month"&&(xn=xn.subtract(1,"month")),En.type==="next-month"&&(xn=xn.add(1,"month")),xn=xn.date(Number.parseInt(En.text,10)),le.parsedValue&&!Array.isArray(le.parsedValue)){const kn=(le.parsedValue.day()-xe+7)%7-1;return le.parsedValue.subtract(kn,"day").isSame(xn,"day")}return!1};return{WEEKS:Oe,rows:Et,tbodyRef:ue,currentCellRef:de,focus:kt,isCurrent:At,isWeekActive:In,isSelectedCell:_n,handlePickDate:Sn,handleMouseUp:Tn,handleMouseDown:vn,handleMouseMove:jt,handleFocus:bn}},useBasicDateTableDOM=(le,{isCurrent:oe,isWeekActive:ie})=>{const ue=useNamespace("date-table"),{t:de}=useLocale(),he=computed(()=>[ue.b(),{"is-week-mode":le.selectionMode==="week"}]),pe=computed(()=>de("el.datepicker.dateTablePrompt")),_e=computed(()=>de("el.datepicker.week"));return{tableKls:he,tableLabel:pe,weekLabel:_e,getCellClasses:Ie=>{const $e=[];return isNormalDay(Ie.type)&&!Ie.disabled?($e.push("available"),Ie.type==="today"&&$e.push("today")):$e.push(Ie.type),oe(Ie)&&$e.push("current"),Ie.inRange&&(isNormalDay(Ie.type)||le.selectionMode==="week")&&($e.push("in-range"),Ie.start&&$e.push("start-date"),Ie.end&&$e.push("end-date")),Ie.disabled&&$e.push("disabled"),Ie.selected&&$e.push("selected"),Ie.customClass&&$e.push(Ie.customClass),$e.join(" ")},getRowKls:Ie=>[ue.e("row"),{current:ie(Ie)}],t:de}},basicCellProps=buildProps({cell:{type:definePropType(Object)}});var ElDatePickerCell=defineComponent({name:"ElDatePickerCell",props:basicCellProps,setup(le){const oe=useNamespace("date-table-cell"),{slots:ie}=inject(ROOT_PICKER_INJECTION_KEY);return()=>{const{cell:ue}=le;return renderSlot(ie,"default",{...ue},()=>{var de;return[createVNode("div",{class:oe.b()},[createVNode("span",{class:oe.e("text")},[(de=ue==null?void 0:ue.renderText)!=null?de:ue==null?void 0:ue.text])])]})}}});const _sfc_main$1M=defineComponent({__name:"basic-date-table",props:basicDateTableProps,emits:basicDateTableEmits,setup(le,{expose:oe,emit:ie}){const ue=le,{WEEKS:de,rows:he,tbodyRef:pe,currentCellRef:_e,focus:Ce,isCurrent:xe,isWeekActive:Ie,isSelectedCell:$e,handlePickDate:Ne,handleMouseUp:Oe,handleMouseDown:Fe,handleMouseMove:Ve,handleFocus:ze}=useBasicDateTable(ue,ie),{tableLabel:Ue,tableKls:Pt,weekLabel:qe,getCellClasses:Et,getRowKls:kt,t:At}=useBasicDateTableDOM(ue,{isCurrent:xe,isWeekActive:Ie});return oe({focus:Ce}),(Dt,Lt)=>(openBlock(),createElementBlock("table",{"aria-label":unref(Ue),class:normalizeClass(unref(Pt)),cellspacing:"0",cellpadding:"0",role:"grid",onClick:unref(Ne),onMousemove:unref(Ve),onMousedown:withModifiers(unref(Fe),["prevent"]),onMouseup:unref(Oe)},[createBaseVNode("tbody",{ref_key:"tbodyRef",ref:pe},[createBaseVNode("tr",null,[Dt.showWeekNumber?(openBlock(),createElementBlock("th",{key:0,scope:"col"},toDisplayString(unref(qe)),1)):createCommentVNode("v-if",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(de),(jt,_n)=>(openBlock(),createElementBlock("th",{key:_n,"aria-label":unref(At)("el.datepicker.weeksFull."+jt),scope:"col"},toDisplayString(unref(At)("el.datepicker.weeks."+jt)),9,["aria-label"]))),128))]),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(he),(jt,_n)=>(openBlock(),createElementBlock("tr",{key:_n,class:normalizeClass(unref(kt)(jt[1]))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(jt,(bn,vn)=>(openBlock(),createElementBlock("td",{key:`${_n}.${vn}`,ref_for:!0,ref:Tn=>unref($e)(bn)&&(_e.value=Tn),class:normalizeClass(unref(Et)(bn)),"aria-current":bn.isCurrent?"date":void 0,"aria-selected":bn.isCurrent,tabindex:unref($e)(bn)?0:-1,onFocus:unref(ze)},[createVNode(unref(ElDatePickerCell),{cell:bn},null,8,["cell"])],42,["aria-current","aria-selected","tabindex","onFocus"]))),128))],2))),128))],512)],42,["aria-label","onClick","onMousemove","onMousedown","onMouseup"]))}});var DateTable=_export_sfc$1(_sfc_main$1M,[["__file","basic-date-table.vue"]]);const basicMonthTableProps=buildProps({...datePickerSharedProps,selectionMode:selectionModeWithDefault("month")}),_sfc_main$1L=defineComponent({__name:"basic-month-table",props:basicMonthTableProps,emits:["changerange","pick","select"],setup(le,{expose:oe,emit:ie}){const ue=le,de=useNamespace("month-table"),{t:he,lang:pe}=useLocale(),_e=ref(),Ce=ref(),xe=ref(ue.date.locale("en").localeData().monthsShort().map(qe=>qe.toLowerCase())),Ie=ref([[],[],[]]),$e=ref(),Ne=ref(),Oe=computed(()=>{var qe,Et;const kt=Ie.value,At=dayjs().locale(pe.value).startOf("month");for(let Dt=0;Dt<3;Dt++){const Lt=kt[Dt];for(let jt=0;jt<4;jt++){const _n=Lt[jt]||(Lt[jt]={row:Dt,column:jt,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1});_n.type="normal";const bn=Dt*4+jt,vn=ue.date.startOf("year").month(bn),Tn=ue.rangeState.endDate||ue.maxDate||ue.rangeState.selecting&&ue.minDate||null;_n.inRange=!!(ue.minDate&&vn.isSameOrAfter(ue.minDate,"month")&&Tn&&vn.isSameOrBefore(Tn,"month"))||!!(ue.minDate&&vn.isSameOrBefore(ue.minDate,"month")&&Tn&&vn.isSameOrAfter(Tn,"month")),(qe=ue.minDate)!=null&&qe.isSameOrAfter(Tn)?(_n.start=!!(Tn&&vn.isSame(Tn,"month")),_n.end=ue.minDate&&vn.isSame(ue.minDate,"month")):(_n.start=!!(ue.minDate&&vn.isSame(ue.minDate,"month")),_n.end=!!(Tn&&vn.isSame(Tn,"month"))),At.isSame(vn)&&(_n.type="today"),_n.text=bn,_n.disabled=((Et=ue.disabledDate)==null?void 0:Et.call(ue,vn.toDate()))||!1}}return kt}),Fe=()=>{var qe;(qe=Ce.value)==null||qe.focus()},Ve=qe=>{const Et={},kt=ue.date.year(),At=new Date,Dt=qe.text;return Et.disabled=ue.disabledDate?datesInMonth(kt,Dt,pe.value).every(ue.disabledDate):!1,Et.current=castArray(ue.parsedValue).findIndex(Lt=>dayjs.isDayjs(Lt)&&Lt.year()===kt&&Lt.month()===Dt)>=0,Et.today=At.getFullYear()===kt&&At.getMonth()===Dt,qe.inRange&&(Et["in-range"]=!0,qe.start&&(Et["start-date"]=!0),qe.end&&(Et["end-date"]=!0)),Et},ze=qe=>{const Et=ue.date.year(),kt=qe.text;return castArray(ue.date).findIndex(At=>At.year()===Et&&At.month()===kt)>=0},Ue=qe=>{var Et;if(!ue.rangeState.selecting)return;let kt=qe.target;if(kt.tagName==="SPAN"&&(kt=(Et=kt.parentNode)==null?void 0:Et.parentNode),kt.tagName==="DIV"&&(kt=kt.parentNode),kt.tagName!=="TD")return;const At=kt.parentNode.rowIndex,Dt=kt.cellIndex;Oe.value[At][Dt].disabled||(At!==$e.value||Dt!==Ne.value)&&($e.value=At,Ne.value=Dt,ie("changerange",{selecting:!0,endDate:ue.date.startOf("year").month(At*4+Dt)}))},Pt=qe=>{var Et;const kt=(Et=qe.target)==null?void 0:Et.closest("td");if((kt==null?void 0:kt.tagName)!=="TD"||hasClass(kt,"disabled"))return;const At=kt.cellIndex,Lt=kt.parentNode.rowIndex*4+At,jt=ue.date.startOf("year").month(Lt);if(ue.selectionMode==="months"){if(qe.type==="keydown"){ie("pick",castArray(ue.parsedValue),!1);return}const _n=getValidDateOfMonth(ue.date.year(),Lt,pe.value,ue.disabledDate),bn=hasClass(kt,"current")?castArray(ue.parsedValue).filter(vn=>(vn==null?void 0:vn.month())!==_n.month()):castArray(ue.parsedValue).concat([dayjs(_n)]);ie("pick",bn)}else ue.selectionMode==="range"?ue.rangeState.selecting?(ue.minDate&&jt>=ue.minDate?ie("pick",{minDate:ue.minDate,maxDate:jt}):ie("pick",{minDate:jt,maxDate:ue.minDate}),ie("select",!1)):(ie("pick",{minDate:jt,maxDate:null}),ie("select",!0)):ie("pick",Lt)};return watch(()=>ue.date,async()=>{var qe,Et;(qe=_e.value)!=null&&qe.contains(document.activeElement)&&(await nextTick(),(Et=Ce.value)==null||Et.focus())}),oe({focus:Fe}),(qe,Et)=>(openBlock(),createElementBlock("table",{role:"grid","aria-label":unref(he)("el.datepicker.monthTablePrompt"),class:normalizeClass(unref(de).b()),onClick:Pt,onMousemove:Ue},[createBaseVNode("tbody",{ref_key:"tbodyRef",ref:_e},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Oe),(kt,At)=>(openBlock(),createElementBlock("tr",{key:At},[(openBlock(!0),createElementBlock(Fragment,null,renderList(kt,(Dt,Lt)=>(openBlock(),createElementBlock("td",{key:Lt,ref_for:!0,ref:jt=>ze(Dt)&&(Ce.value=jt),class:normalizeClass(Ve(Dt)),"aria-selected":`${ze(Dt)}`,"aria-label":unref(he)(`el.datepicker.month${+Dt.text+1}`),tabindex:ze(Dt)?0:-1,onKeydown:[withKeys(withModifiers(Pt,["prevent","stop"]),["space"]),withKeys(withModifiers(Pt,["prevent","stop"]),["enter"])]},[createVNode(unref(ElDatePickerCell),{cell:{...Dt,renderText:unref(he)("el.datepicker.months."+xe.value[Dt.text])}},null,8,["cell"])],42,["aria-selected","aria-label","tabindex","onKeydown"]))),128))]))),128))],512)],42,["aria-label"]))}});var MonthTable=_export_sfc$1(_sfc_main$1L,[["__file","basic-month-table.vue"]]);const basicYearTableProps=buildProps({...datePickerSharedProps,selectionMode:selectionModeWithDefault("year")}),_sfc_main$1K=defineComponent({__name:"basic-year-table",props:basicYearTableProps,emits:["changerange","pick","select"],setup(le,{expose:oe,emit:ie}){const ue=le,de=(Et,kt)=>{const At=dayjs(String(Et)).locale(kt).startOf("year"),Lt=At.endOf("year").dayOfYear();return rangeArr(Lt).map(jt=>At.add(jt,"day").toDate())},he=useNamespace("year-table"),{t:pe,lang:_e}=useLocale(),Ce=ref(),xe=ref(),Ie=computed(()=>Math.floor(ue.date.year()/10)*10),$e=ref([[],[],[]]),Ne=ref(),Oe=ref(),Fe=computed(()=>{var Et;const kt=$e.value,At=dayjs().locale(_e.value).startOf("year");for(let Dt=0;Dt<3;Dt++){const Lt=kt[Dt];for(let jt=0;jt<4&&!(Dt*4+jt>=10);jt++){let _n=Lt[jt];_n||(_n={row:Dt,column:jt,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1}),_n.type="normal";const bn=Dt*4+jt+Ie.value,vn=dayjs().year(bn),Tn=ue.rangeState.endDate||ue.maxDate||ue.rangeState.selecting&&ue.minDate||null;_n.inRange=!!(ue.minDate&&vn.isSameOrAfter(ue.minDate,"year")&&Tn&&vn.isSameOrBefore(Tn,"year"))||!!(ue.minDate&&vn.isSameOrBefore(ue.minDate,"year")&&Tn&&vn.isSameOrAfter(Tn,"year")),(Et=ue.minDate)!=null&&Et.isSameOrAfter(Tn)?(_n.start=!!(Tn&&vn.isSame(Tn,"year")),_n.end=!!(ue.minDate&&vn.isSame(ue.minDate,"year"))):(_n.start=!!(ue.minDate&&vn.isSame(ue.minDate,"year")),_n.end=!!(Tn&&vn.isSame(Tn,"year"))),At.isSame(vn)&&(_n.type="today"),_n.text=bn;const wn=vn.toDate();_n.disabled=ue.disabledDate&&ue.disabledDate(wn)||!1,Lt[jt]=_n}}return kt}),Ve=()=>{var Et;(Et=xe.value)==null||Et.focus()},ze=Et=>{const kt={},At=dayjs().locale(_e.value),Dt=Et.text;return kt.disabled=ue.disabledDate?de(Dt,_e.value).every(ue.disabledDate):!1,kt.today=At.year()===Dt,kt.current=castArray(ue.parsedValue).findIndex(Lt=>Lt.year()===Dt)>=0,Et.inRange&&(kt["in-range"]=!0,Et.start&&(kt["start-date"]=!0),Et.end&&(kt["end-date"]=!0)),kt},Ue=Et=>{const kt=Et.text;return castArray(ue.date).findIndex(At=>At.year()===kt)>=0},Pt=Et=>{var kt;const At=(kt=Et.target)==null?void 0:kt.closest("td");if(!At||!At.textContent||hasClass(At,"disabled"))return;const Dt=At.cellIndex,jt=At.parentNode.rowIndex*4+Dt+Ie.value,_n=dayjs().year(jt);if(ue.selectionMode==="range")ue.rangeState.selecting?(ue.minDate&&_n>=ue.minDate?ie("pick",{minDate:ue.minDate,maxDate:_n}):ie("pick",{minDate:_n,maxDate:ue.minDate}),ie("select",!1)):(ie("pick",{minDate:_n,maxDate:null}),ie("select",!0));else if(ue.selectionMode==="years"){if(Et.type==="keydown"){ie("pick",castArray(ue.parsedValue),!1);return}const bn=getValidDateOfYear(_n.startOf("year"),_e.value,ue.disabledDate),vn=hasClass(At,"current")?castArray(ue.parsedValue).filter(Tn=>(Tn==null?void 0:Tn.year())!==jt):castArray(ue.parsedValue).concat([bn]);ie("pick",vn)}else ie("pick",jt)},qe=Et=>{var kt;if(!ue.rangeState.selecting)return;const At=(kt=Et.target)==null?void 0:kt.closest("td");if(!At)return;const Dt=At.parentNode.rowIndex,Lt=At.cellIndex;Fe.value[Dt][Lt].disabled||(Dt!==Ne.value||Lt!==Oe.value)&&(Ne.value=Dt,Oe.value=Lt,ie("changerange",{selecting:!0,endDate:dayjs().year(Ie.value).add(Dt*4+Lt,"year")}))};return watch(()=>ue.date,async()=>{var Et,kt;(Et=Ce.value)!=null&&Et.contains(document.activeElement)&&(await nextTick(),(kt=xe.value)==null||kt.focus())}),oe({focus:Ve}),(Et,kt)=>(openBlock(),createElementBlock("table",{role:"grid","aria-label":unref(pe)("el.datepicker.yearTablePrompt"),class:normalizeClass(unref(he).b()),onClick:Pt,onMousemove:qe},[createBaseVNode("tbody",{ref_key:"tbodyRef",ref:Ce},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Fe),(At,Dt)=>(openBlock(),createElementBlock("tr",{key:Dt},[(openBlock(!0),createElementBlock(Fragment,null,renderList(At,(Lt,jt)=>(openBlock(),createElementBlock("td",{key:`${Dt}_${jt}`,ref_for:!0,ref:_n=>Ue(Lt)&&(xe.value=_n),class:normalizeClass(["available",ze(Lt)]),"aria-selected":Ue(Lt),"aria-label":String(Lt.text),tabindex:Ue(Lt)?0:-1,onKeydown:[withKeys(withModifiers(Pt,["prevent","stop"]),["space"]),withKeys(withModifiers(Pt,["prevent","stop"]),["enter"])]},[createVNode(unref(ElDatePickerCell),{cell:Lt},null,8,["cell"])],42,["aria-selected","aria-label","tabindex","onKeydown"]))),128))]))),128))],512)],42,["aria-label"]))}});var YearTable=_export_sfc$1(_sfc_main$1K,[["__file","basic-year-table.vue"]]);const _sfc_main$1J=defineComponent({__name:"panel-date-pick",props:panelDatePickProps,emits:["pick","set-picker-option","panel-change"],setup(le,{emit:oe}){const ie=le,ue=(Wn,wr,Vn)=>!0,de=useNamespace("picker-panel"),he=useNamespace("date-picker"),pe=useAttrs$1(),_e=useSlots(),{t:Ce,lang:xe}=useLocale(),Ie=inject("EP_PICKER_BASE"),$e=inject(TOOLTIP_INJECTION_KEY),{shortcuts:Ne,disabledDate:Oe,cellClassName:Fe,defaultTime:Ve}=Ie.props,ze=toRef(Ie.props,"defaultValue"),Ue=ref(),Pt=ref(dayjs().locale(xe.value)),qe=ref(!1);let Et=!1;const kt=computed(()=>dayjs(Ve).locale(xe.value)),At=computed(()=>Pt.value.month()),Dt=computed(()=>Pt.value.year()),Lt=ref([]),jt=ref(null),_n=ref(null),bn=Wn=>Lt.value.length>0?ue(Wn,Lt.value,ie.format||"HH:mm:ss"):!0,vn=Wn=>Ve&&!jn.value&&!qe.value&&!Et?kt.value.year(Wn.year()).month(Wn.month()).date(Wn.date()):Rn.value?Wn.millisecond(0):Wn.startOf("day"),Tn=(Wn,...wr)=>{if(!Wn)oe("pick",Wn,...wr);else if(isArray$3(Wn)){const Vn=Wn.map(vn);oe("pick",Vn,...wr)}else oe("pick",vn(Wn),...wr);jt.value=null,_n.value=null,qe.value=!1,Et=!1},$n=async(Wn,wr)=>{if(xn.value==="date"){Wn=Wn;let Vn=ie.parsedValue?ie.parsedValue.year(Wn.year()).month(Wn.month()).date(Wn.date()):Wn;bn(Vn)||(Vn=Lt.value[0][0].year(Wn.year()).month(Wn.month()).date(Wn.date())),Pt.value=Vn,Tn(Vn,Rn.value||wr),ie.type==="datetime"&&(await nextTick(),Lr())}else xn.value==="week"?Tn(Wn.date):xn.value==="dates"&&Tn(Wn,!0)},wn=Wn=>{const wr=Wn?"add":"subtract";Pt.value=Pt.value[wr](1,"month"),qr("month")},Cn=Wn=>{const wr=Pt.value,Vn=Wn?"add":"subtract";Pt.value=Sn.value==="year"?wr[Vn](10,"year"):wr[Vn](1,"year"),qr("year")},Sn=ref("date"),In=computed(()=>{const Wn=Ce("el.datepicker.year");if(Sn.value==="year"){const wr=Math.floor(Dt.value/10)*10;return Wn?`${wr} ${Wn} - ${wr+9} ${Wn}`:`${wr} - ${wr+9}`}return`${Dt.value} ${Wn}`}),En=Wn=>{const wr=isFunction$2(Wn.value)?Wn.value():Wn.value;if(wr){Et=!0,Tn(dayjs(wr).locale(xe.value));return}Wn.onClick&&Wn.onClick({attrs:pe,slots:_e,emit:oe})},xn=computed(()=>{const{type:Wn}=ie;return["week","month","months","year","years","dates"].includes(Wn)?Wn:"date"}),kn=computed(()=>xn.value==="dates"||xn.value==="months"||xn.value==="years"),On=computed(()=>xn.value==="date"?Sn.value:xn.value),Mn=computed(()=>!!Ne.length),Un=async(Wn,wr)=>{xn.value==="month"?(Pt.value=getValidDateOfMonth(Pt.value.year(),Wn,xe.value,Oe),Tn(Pt.value,!1)):xn.value==="months"?Tn(Wn,wr??!0):(Pt.value=getValidDateOfMonth(Pt.value.year(),Wn,xe.value,Oe),Sn.value="date",["month","year","date","week"].includes(xn.value)&&(Tn(Pt.value,!0),await nextTick(),Lr())),qr("month")},zn=async(Wn,wr)=>{if(xn.value==="year"){const Vn=Pt.value.startOf("year").year(Wn);Pt.value=getValidDateOfYear(Vn,xe.value,Oe),Tn(Pt.value,!1)}else if(xn.value==="years")Tn(Wn,wr??!0);else{const Vn=Pt.value.year(Wn);Pt.value=getValidDateOfYear(Vn,xe.value,Oe),Sn.value="month",["month","year","date","week"].includes(xn.value)&&(Tn(Pt.value,!0),await nextTick(),Lr())}qr("year")},Hn=async Wn=>{Sn.value=Wn,await nextTick(),Lr()},Rn=computed(()=>ie.type==="datetime"||ie.type==="datetimerange"),Jn=computed(()=>{const Wn=Rn.value||xn.value==="dates",wr=xn.value==="years",Vn=xn.value==="months",sr=Sn.value==="date",nr=Sn.value==="year",Ar=Sn.value==="month";return Wn&&sr||wr&&nr||Vn&&Ar}),Qn=computed(()=>Oe?ie.parsedValue?isArray$3(ie.parsedValue)?Oe(ie.parsedValue[0].toDate()):Oe(ie.parsedValue.toDate()):!0:!1),_r=()=>{if(kn.value)Tn(ie.parsedValue);else{let Wn=ie.parsedValue;if(!Wn){const wr=dayjs(Ve).locale(xe.value),Vn=Dr();Wn=wr.year(Vn.year()).month(Vn.month()).date(Vn.date())}Pt.value=Wn,Tn(Wn)}},Zn=computed(()=>Oe?Oe(dayjs().locale(xe.value).toDate()):!1),Gn=()=>{const wr=dayjs().locale(xe.value).toDate();qe.value=!0,(!Oe||!Oe(wr))&&bn(wr)&&(Pt.value=dayjs().locale(xe.value),Tn(Pt.value))},Nn=computed(()=>ie.timeFormat||extractTimeFormat(ie.format)),Dn=computed(()=>ie.dateFormat||extractDateFormat(ie.format)),jn=computed(()=>{if(_n.value)return _n.value;if(!(!ie.parsedValue&&!ze.value))return(ie.parsedValue||Pt.value).format(Nn.value)}),ir=computed(()=>{if(jt.value)return jt.value;if(!(!ie.parsedValue&&!ze.value))return(ie.parsedValue||Pt.value).format(Dn.value)}),Fn=ref(!1),Kn=()=>{Fn.value=!0},mr=()=>{Fn.value=!1},yr=Wn=>({hour:Wn.hour(),minute:Wn.minute(),second:Wn.second(),year:Wn.year(),month:Wn.month(),date:Wn.date()}),Cr=(Wn,wr,Vn)=>{const{hour:sr,minute:nr,second:Ar}=yr(Wn),Wr=ie.parsedValue?ie.parsedValue.hour(sr).minute(nr).second(Ar):Wn;Pt.value=Wr,Tn(Pt.value,!0),Vn||(Fn.value=wr)},br=Wn=>{const wr=dayjs(Wn,Nn.value).locale(xe.value);if(wr.isValid()&&bn(wr)){const{year:Vn,month:sr,date:nr}=yr(Pt.value);Pt.value=wr.year(Vn).month(sr).date(nr),_n.value=null,Fn.value=!1,Tn(Pt.value,!0)}},Pr=Wn=>{const wr=dayjs(Wn,Dn.value).locale(xe.value);if(wr.isValid()){if(Oe&&Oe(wr.toDate()))return;const{hour:Vn,minute:sr,second:nr}=yr(Pt.value);Pt.value=wr.hour(Vn).minute(sr).second(nr),jt.value=null,Tn(Pt.value,!0)}},gr=Wn=>dayjs.isDayjs(Wn)&&Wn.isValid()&&(Oe?!Oe(Wn.toDate()):!0),tr=Wn=>isArray$3(Wn)?Wn.map(wr=>wr.format(ie.format)):Wn.format(ie.format),Sr=Wn=>dayjs(Wn,ie.format).locale(xe.value),Dr=()=>{const Wn=dayjs(ze.value).locale(xe.value);if(!ze.value){const wr=kt.value;return dayjs().hour(wr.hour()).minute(wr.minute()).second(wr.second()).locale(xe.value)}return Wn},Lr=async()=>{var Wn;["week","month","year","date"].includes(xn.value)&&((Wn=Ue.value)==null||Wn.focus(),xn.value==="week"&&Xr(EVENT_CODE.down))},Ur=Wn=>{const{code:wr}=Wn;[EVENT_CODE.up,EVENT_CODE.down,EVENT_CODE.left,EVENT_CODE.right,EVENT_CODE.home,EVENT_CODE.end,EVENT_CODE.pageUp,EVENT_CODE.pageDown].includes(wr)&&(Xr(wr),Wn.stopPropagation(),Wn.preventDefault()),[EVENT_CODE.enter,EVENT_CODE.space,EVENT_CODE.numpadEnter].includes(wr)&&jt.value===null&&_n.value===null&&(Wn.preventDefault(),Tn(Pt.value,!1))},Xr=Wn=>{var wr;const{up:Vn,down:sr,left:nr,right:Ar,home:Wr,end:Yn,pageUp:Nr,pageDown:Hr}=EVENT_CODE,Pn={year:{[Vn]:-4,[sr]:4,[nr]:-1,[Ar]:1,offset:(Bn,or)=>Bn.setFullYear(Bn.getFullYear()+or)},month:{[Vn]:-4,[sr]:4,[nr]:-1,[Ar]:1,offset:(Bn,or)=>Bn.setMonth(Bn.getMonth()+or)},week:{[Vn]:-1,[sr]:1,[nr]:-1,[Ar]:1,offset:(Bn,or)=>Bn.setDate(Bn.getDate()+or*7)},date:{[Vn]:-7,[sr]:7,[nr]:-1,[Ar]:1,[Wr]:Bn=>-Bn.getDay(),[Yn]:Bn=>-Bn.getDay()+6,[Nr]:Bn=>-new Date(Bn.getFullYear(),Bn.getMonth(),0).getDate(),[Hr]:Bn=>new Date(Bn.getFullYear(),Bn.getMonth()+1,0).getDate(),offset:(Bn,or)=>Bn.setDate(Bn.getDate()+or)}},An=Pt.value.toDate();for(;Math.abs(Pt.value.diff(An,"year",!0))<1;){const Bn=Pn[On.value];if(!Bn)return;if(Bn.offset(An,isFunction$2(Bn[Wn])?Bn[Wn](An):(wr=Bn[Wn])!=null?wr:0),Oe&&Oe(An))break;const or=dayjs(An).locale(xe.value);Pt.value=or,oe("pick",or,!0);break}},qr=Wn=>{oe("panel-change",Pt.value.toDate(),Wn,Sn.value)};return watch(()=>xn.value,Wn=>{if(["month","year"].includes(Wn)){Sn.value=Wn;return}else if(Wn==="years"){Sn.value="year";return}else if(Wn==="months"){Sn.value="month";return}Sn.value="date"},{immediate:!0}),watch(()=>Sn.value,()=>{$e==null||$e.updatePopper()}),watch(()=>ze.value,Wn=>{Wn&&(Pt.value=Dr())},{immediate:!0}),watch(()=>ie.parsedValue,Wn=>{if(Wn){if(kn.value||Array.isArray(Wn))return;Pt.value=Wn}else Pt.value=Dr()},{immediate:!0}),oe("set-picker-option",["isValidValue",gr]),oe("set-picker-option",["formatToString",tr]),oe("set-picker-option",["parseUserInput",Sr]),oe("set-picker-option",["handleFocusPicker",Lr]),(Wn,wr)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(de).b(),unref(he).b(),{"has-sidebar":Wn.$slots.sidebar||unref(Mn),"has-time":unref(Rn)}])},[createBaseVNode("div",{class:normalizeClass(unref(de).e("body-wrapper"))},[renderSlot(Wn.$slots,"sidebar",{class:normalizeClass(unref(de).e("sidebar"))}),unref(Mn)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(de).e("sidebar"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Ne),(Vn,sr)=>(openBlock(),createElementBlock("button",{key:sr,type:"button",class:normalizeClass(unref(de).e("shortcut")),onClick:nr=>En(Vn)},toDisplayString(Vn.text),11,["onClick"]))),128))],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(de).e("body"))},[unref(Rn)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(he).e("time-header"))},[createBaseVNode("span",{class:normalizeClass(unref(he).e("editor-wrap"))},[createVNode(unref(ElInput),{placeholder:unref(Ce)("el.datepicker.selectDate"),"model-value":unref(ir),size:"small","validate-event":!1,onInput:Vn=>jt.value=Vn,onChange:Pr},null,8,["placeholder","model-value","onInput"])],2),withDirectives((openBlock(),createElementBlock("span",{class:normalizeClass(unref(he).e("editor-wrap"))},[createVNode(unref(ElInput),{placeholder:unref(Ce)("el.datepicker.selectTime"),"model-value":unref(jn),size:"small","validate-event":!1,onFocus:Kn,onInput:Vn=>_n.value=Vn,onChange:br},null,8,["placeholder","model-value","onInput"]),createVNode(unref(TimePickPanel),{visible:Fn.value,format:unref(Nn),"parsed-value":Pt.value,onPick:Cr},null,8,["visible","format","parsed-value"])],2)),[[unref(ClickOutside),mr]])],2)):createCommentVNode("v-if",!0),withDirectives(createBaseVNode("div",{class:normalizeClass([unref(he).e("header"),(Sn.value==="year"||Sn.value==="month")&&unref(he).e("header--bordered")])},[createBaseVNode("span",{class:normalizeClass(unref(he).e("prev-btn"))},[createBaseVNode("button",{type:"button","aria-label":unref(Ce)("el.datepicker.prevYear"),class:normalizeClass(["d-arrow-left",unref(de).e("icon-btn")]),onClick:Vn=>Cn(!1)},[renderSlot(Wn.$slots,"prev-year",{},()=>[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_left_default))]),_:1})])],10,["aria-label","onClick"]),withDirectives(createBaseVNode("button",{type:"button","aria-label":unref(Ce)("el.datepicker.prevMonth"),class:normalizeClass([unref(de).e("icon-btn"),"arrow-left"]),onClick:Vn=>wn(!1)},[renderSlot(Wn.$slots,"prev-month",{},()=>[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_left_default))]),_:1})])],10,["aria-label","onClick"]),[[vShow,Sn.value==="date"]])],2),createBaseVNode("span",{role:"button",class:normalizeClass(unref(he).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:withKeys(Vn=>Hn("year"),["enter"]),onClick:Vn=>Hn("year")},toDisplayString(unref(In)),43,["onKeydown","onClick"]),withDirectives(createBaseVNode("span",{role:"button","aria-live":"polite",tabindex:"0",class:normalizeClass([unref(he).e("header-label"),{active:Sn.value==="month"}]),onKeydown:withKeys(Vn=>Hn("month"),["enter"]),onClick:Vn=>Hn("month")},toDisplayString(unref(Ce)(`el.datepicker.month${unref(At)+1}`)),43,["onKeydown","onClick"]),[[vShow,Sn.value==="date"]]),createBaseVNode("span",{class:normalizeClass(unref(he).e("next-btn"))},[withDirectives(createBaseVNode("button",{type:"button","aria-label":unref(Ce)("el.datepicker.nextMonth"),class:normalizeClass([unref(de).e("icon-btn"),"arrow-right"]),onClick:Vn=>wn(!0)},[renderSlot(Wn.$slots,"next-month",{},()=>[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1})])],10,["aria-label","onClick"]),[[vShow,Sn.value==="date"]]),createBaseVNode("button",{type:"button","aria-label":unref(Ce)("el.datepicker.nextYear"),class:normalizeClass([unref(de).e("icon-btn"),"d-arrow-right"]),onClick:Vn=>Cn(!0)},[renderSlot(Wn.$slots,"next-year",{},()=>[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_right_default))]),_:1})])],10,["aria-label","onClick"])],2)],2),[[vShow,Sn.value!=="time"]]),createBaseVNode("div",{class:normalizeClass(unref(de).e("content")),onKeydown:Ur},[Sn.value==="date"?(openBlock(),createBlock(DateTable,{key:0,ref_key:"currentViewRef",ref:Ue,"selection-mode":unref(xn),date:Pt.value,"parsed-value":Wn.parsedValue,"disabled-date":unref(Oe),"cell-class-name":unref(Fe),onPick:$n},null,8,["selection-mode","date","parsed-value","disabled-date","cell-class-name"])):createCommentVNode("v-if",!0),Sn.value==="year"?(openBlock(),createBlock(YearTable,{key:1,ref_key:"currentViewRef",ref:Ue,"selection-mode":unref(xn),date:Pt.value,"disabled-date":unref(Oe),"parsed-value":Wn.parsedValue,onPick:zn},null,8,["selection-mode","date","disabled-date","parsed-value"])):createCommentVNode("v-if",!0),Sn.value==="month"?(openBlock(),createBlock(MonthTable,{key:2,ref_key:"currentViewRef",ref:Ue,"selection-mode":unref(xn),date:Pt.value,"parsed-value":Wn.parsedValue,"disabled-date":unref(Oe),onPick:Un},null,8,["selection-mode","date","parsed-value","disabled-date"])):createCommentVNode("v-if",!0)],34)],2)],2),withDirectives(createBaseVNode("div",{class:normalizeClass(unref(de).e("footer"))},[withDirectives(createVNode(unref(ElButton),{text:"",size:"small",class:normalizeClass(unref(de).e("link-btn")),disabled:unref(Zn),onClick:Gn},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(Ce)("el.datepicker.now")),1)]),_:1},8,["class","disabled"]),[[vShow,!unref(kn)]]),createVNode(unref(ElButton),{plain:"",size:"small",class:normalizeClass(unref(de).e("link-btn")),disabled:unref(Qn),onClick:_r},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(Ce)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2),[[vShow,unref(Jn)]])],2))}});var DatePickPanel=_export_sfc$1(_sfc_main$1J,[["__file","panel-date-pick.vue"]]);const panelDateRangeProps=buildProps({...panelSharedProps,...panelRangeSharedProps,visible:Boolean}),useShortcut=le=>{const{emit:oe}=getCurrentInstance(),ie=useAttrs$1(),ue=useSlots();return he=>{const pe=isFunction$2(he.value)?he.value():he.value;if(pe){oe("pick",[dayjs(pe[0]).locale(le.value),dayjs(pe[1]).locale(le.value)]);return}he.onClick&&he.onClick({attrs:ie,slots:ue,emit:oe})}},useRangePicker=(le,{defaultValue:oe,leftDate:ie,rightDate:ue,unit:de,onParsedValueChanged:he})=>{const{emit:pe}=getCurrentInstance(),{pickerNs:_e}=inject(ROOT_PICKER_INJECTION_KEY),Ce=useNamespace("date-range-picker"),{t:xe,lang:Ie}=useLocale(),$e=useShortcut(Ie),Ne=ref(),Oe=ref(),Fe=ref({endDate:null,selecting:!1}),Ve=Et=>{Fe.value=Et},ze=(Et=!1)=>{const kt=unref(Ne),At=unref(Oe);isValidRange([kt,At])&&pe("pick",[kt,At],Et)},Ue=Et=>{Fe.value.selecting=Et,Et||(Fe.value.endDate=null)},Pt=Et=>{if(isArray$3(Et)&&Et.length===2){const[kt,At]=Et;Ne.value=kt,ie.value=kt,Oe.value=At,he(unref(Ne),unref(Oe))}else qe()},qe=()=>{const[Et,kt]=getDefaultValue(unref(oe),{lang:unref(Ie),unit:de,unlinkPanels:le.unlinkPanels});Ne.value=void 0,Oe.value=void 0,ie.value=Et,ue.value=kt};return watch(oe,Et=>{Et&&qe()},{immediate:!0}),watch(()=>le.parsedValue,Pt,{immediate:!0}),{minDate:Ne,maxDate:Oe,rangeState:Fe,lang:Ie,ppNs:_e,drpNs:Ce,handleChangeRange:Ve,handleRangeConfirm:ze,handleShortcutClick:$e,onSelect:Ue,onReset:Pt,t:xe}},unit$2="month",_sfc_main$1I=defineComponent({__name:"panel-date-range",props:panelDateRangeProps,emits:["pick","set-picker-option","calendar-change","panel-change"],setup(le,{emit:oe}){const ie=le,ue=inject("EP_PICKER_BASE"),{disabledDate:de,cellClassName:he,defaultTime:pe,clearable:_e}=ue.props,Ce=toRef(ue.props,"format"),xe=toRef(ue.props,"shortcuts"),Ie=toRef(ue.props,"defaultValue"),{lang:$e}=useLocale(),Ne=ref(dayjs().locale($e.value)),Oe=ref(dayjs().locale($e.value).add(1,unit$2)),{minDate:Fe,maxDate:Ve,rangeState:ze,ppNs:Ue,drpNs:Pt,handleChangeRange:qe,handleRangeConfirm:Et,handleShortcutClick:kt,onSelect:At,onReset:Dt,t:Lt}=useRangePicker(ie,{defaultValue:Ie,leftDate:Ne,rightDate:Oe,unit:unit$2,onParsedValueChanged:wr});watch(()=>ie.visible,Vn=>{!Vn&&ze.value.selecting&&(Dt(ie.parsedValue),At(!1))});const jt=ref({min:null,max:null}),_n=ref({min:null,max:null}),bn=computed(()=>`${Ne.value.year()} ${Lt("el.datepicker.year")} ${Lt(`el.datepicker.month${Ne.value.month()+1}`)}`),vn=computed(()=>`${Oe.value.year()} ${Lt("el.datepicker.year")} ${Lt(`el.datepicker.month${Oe.value.month()+1}`)}`),Tn=computed(()=>Ne.value.year()),$n=computed(()=>Ne.value.month()),wn=computed(()=>Oe.value.year()),Cn=computed(()=>Oe.value.month()),Sn=computed(()=>!!xe.value.length),In=computed(()=>jt.value.min!==null?jt.value.min:Fe.value?Fe.value.format(Mn.value):""),En=computed(()=>jt.value.max!==null?jt.value.max:Ve.value||Fe.value?(Ve.value||Fe.value).format(Mn.value):""),xn=computed(()=>_n.value.min!==null?_n.value.min:Fe.value?Fe.value.format(On.value):""),kn=computed(()=>_n.value.max!==null?_n.value.max:Ve.value||Fe.value?(Ve.value||Fe.value).format(On.value):""),On=computed(()=>ie.timeFormat||extractTimeFormat(Ce.value)),Mn=computed(()=>ie.dateFormat||extractDateFormat(Ce.value)),Un=Vn=>isValidRange(Vn)&&(de?!de(Vn[0].toDate())&&!de(Vn[1].toDate()):!0),zn=()=>{Ne.value=Ne.value.subtract(1,"year"),ie.unlinkPanels||(Oe.value=Ne.value.add(1,"month")),Nn("year")},Hn=()=>{Ne.value=Ne.value.subtract(1,"month"),ie.unlinkPanels||(Oe.value=Ne.value.add(1,"month")),Nn("month")},Rn=()=>{ie.unlinkPanels?Oe.value=Oe.value.add(1,"year"):(Ne.value=Ne.value.add(1,"year"),Oe.value=Ne.value.add(1,"month")),Nn("year")},Jn=()=>{ie.unlinkPanels?Oe.value=Oe.value.add(1,"month"):(Ne.value=Ne.value.add(1,"month"),Oe.value=Ne.value.add(1,"month")),Nn("month")},Qn=()=>{Ne.value=Ne.value.add(1,"year"),Nn("year")},_r=()=>{Ne.value=Ne.value.add(1,"month"),Nn("month")},Zn=()=>{Oe.value=Oe.value.subtract(1,"year"),Nn("year")},Gn=()=>{Oe.value=Oe.value.subtract(1,"month"),Nn("month")},Nn=Vn=>{oe("panel-change",[Ne.value.toDate(),Oe.value.toDate()],Vn)},Dn=computed(()=>{const Vn=($n.value+1)%12,sr=$n.value+1>=12?1:0;return ie.unlinkPanels&&new Date(Tn.value+sr,Vn)<new Date(wn.value,Cn.value)}),jn=computed(()=>ie.unlinkPanels&&wn.value*12+Cn.value-(Tn.value*12+$n.value+1)>=12),ir=computed(()=>!(Fe.value&&Ve.value&&!ze.value.selecting&&isValidRange([Fe.value,Ve.value]))),Fn=computed(()=>ie.type==="datetime"||ie.type==="datetimerange"),Kn=(Vn,sr)=>{if(Vn)return pe?dayjs(pe[sr]||pe).locale($e.value).year(Vn.year()).month(Vn.month()).date(Vn.date()):Vn},mr=(Vn,sr=!0)=>{const nr=Vn.minDate,Ar=Vn.maxDate,Wr=Kn(nr,0),Yn=Kn(Ar,1);Ve.value===Yn&&Fe.value===Wr||(oe("calendar-change",[nr.toDate(),Ar&&Ar.toDate()]),Ve.value=Yn,Fe.value=Wr,!(!sr||Fn.value)&&Et())},yr=ref(!1),Cr=ref(!1),br=()=>{yr.value=!1},Pr=()=>{Cr.value=!1},gr=(Vn,sr)=>{jt.value[sr]=Vn;const nr=dayjs(Vn,Mn.value).locale($e.value);if(nr.isValid()){if(de&&de(nr.toDate()))return;sr==="min"?(Ne.value=nr,Fe.value=(Fe.value||Ne.value).year(nr.year()).month(nr.month()).date(nr.date()),!ie.unlinkPanels&&(!Ve.value||Ve.value.isBefore(Fe.value))&&(Oe.value=nr.add(1,"month"),Ve.value=Fe.value.add(1,"month"))):(Oe.value=nr,Ve.value=(Ve.value||Oe.value).year(nr.year()).month(nr.month()).date(nr.date()),!ie.unlinkPanels&&(!Fe.value||Fe.value.isAfter(Ve.value))&&(Ne.value=nr.subtract(1,"month"),Fe.value=Ve.value.subtract(1,"month")))}},tr=(Vn,sr)=>{jt.value[sr]=null},Sr=(Vn,sr)=>{_n.value[sr]=Vn;const nr=dayjs(Vn,On.value).locale($e.value);nr.isValid()&&(sr==="min"?(yr.value=!0,Fe.value=(Fe.value||Ne.value).hour(nr.hour()).minute(nr.minute()).second(nr.second())):(Cr.value=!0,Ve.value=(Ve.value||Oe.value).hour(nr.hour()).minute(nr.minute()).second(nr.second()),Oe.value=Ve.value))},Dr=(Vn,sr)=>{_n.value[sr]=null,sr==="min"?(Ne.value=Fe.value,yr.value=!1,(!Ve.value||Ve.value.isBefore(Fe.value))&&(Ve.value=Fe.value)):(Oe.value=Ve.value,Cr.value=!1,Ve.value&&Ve.value.isBefore(Fe.value)&&(Fe.value=Ve.value))},Lr=(Vn,sr,nr)=>{_n.value.min||(Vn&&(Ne.value=Vn,Fe.value=(Fe.value||Ne.value).hour(Vn.hour()).minute(Vn.minute()).second(Vn.second())),nr||(yr.value=sr),(!Ve.value||Ve.value.isBefore(Fe.value))&&(Ve.value=Fe.value,Oe.value=Vn))},Ur=(Vn,sr,nr)=>{_n.value.max||(Vn&&(Oe.value=Vn,Ve.value=(Ve.value||Oe.value).hour(Vn.hour()).minute(Vn.minute()).second(Vn.second())),nr||(Cr.value=sr),Ve.value&&Ve.value.isBefore(Fe.value)&&(Fe.value=Ve.value))},Xr=()=>{Ne.value=getDefaultValue(unref(Ie),{lang:unref($e),unit:"month",unlinkPanels:ie.unlinkPanels})[0],Oe.value=Ne.value.add(1,"month"),Ve.value=void 0,Fe.value=void 0,oe("pick",null)},qr=Vn=>isArray$3(Vn)?Vn.map(sr=>sr.format(Ce.value)):Vn.format(Ce.value),Wn=Vn=>isArray$3(Vn)?Vn.map(sr=>dayjs(sr,Ce.value).locale($e.value)):dayjs(Vn,Ce.value).locale($e.value);function wr(Vn,sr){if(ie.unlinkPanels&&sr){const nr=(Vn==null?void 0:Vn.year())||0,Ar=(Vn==null?void 0:Vn.month())||0,Wr=sr.year(),Yn=sr.month();Oe.value=nr===Wr&&Ar===Yn?sr.add(1,unit$2):sr}else Oe.value=Ne.value.add(1,unit$2),sr&&(Oe.value=Oe.value.hour(sr.hour()).minute(sr.minute()).second(sr.second()))}return oe("set-picker-option",["isValidValue",Un]),oe("set-picker-option",["parseUserInput",Wn]),oe("set-picker-option",["formatToString",qr]),oe("set-picker-option",["handleClear",Xr]),(Vn,sr)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(Ue).b(),unref(Pt).b(),{"has-sidebar":Vn.$slots.sidebar||unref(Sn),"has-time":unref(Fn)}])},[createBaseVNode("div",{class:normalizeClass(unref(Ue).e("body-wrapper"))},[renderSlot(Vn.$slots,"sidebar",{class:normalizeClass(unref(Ue).e("sidebar"))}),unref(Sn)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(Ue).e("sidebar"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(xe),(nr,Ar)=>(openBlock(),createElementBlock("button",{key:Ar,type:"button",class:normalizeClass(unref(Ue).e("shortcut")),onClick:Wr=>unref(kt)(nr)},toDisplayString(nr.text),11,["onClick"]))),128))],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(Ue).e("body"))},[unref(Fn)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(Pt).e("time-header"))},[createBaseVNode("span",{class:normalizeClass(unref(Pt).e("editors-wrap"))},[createBaseVNode("span",{class:normalizeClass(unref(Pt).e("time-picker-wrap"))},[createVNode(unref(ElInput),{size:"small",disabled:unref(ze).selecting,placeholder:unref(Lt)("el.datepicker.startDate"),class:normalizeClass(unref(Pt).e("editor")),"model-value":unref(In),"validate-event":!1,onInput:nr=>gr(nr,"min"),onChange:nr=>tr(nr,"min")},null,8,["disabled","placeholder","class","model-value","onInput","onChange"])],2),withDirectives((openBlock(),createElementBlock("span",{class:normalizeClass(unref(Pt).e("time-picker-wrap"))},[createVNode(unref(ElInput),{size:"small",class:normalizeClass(unref(Pt).e("editor")),disabled:unref(ze).selecting,placeholder:unref(Lt)("el.datepicker.startTime"),"model-value":unref(xn),"validate-event":!1,onFocus:nr=>yr.value=!0,onInput:nr=>Sr(nr,"min"),onChange:nr=>Dr(nr,"min")},null,8,["class","disabled","placeholder","model-value","onFocus","onInput","onChange"]),createVNode(unref(TimePickPanel),{visible:yr.value,format:unref(On),"datetime-role":"start","parsed-value":Ne.value,onPick:Lr},null,8,["visible","format","parsed-value"])],2)),[[unref(ClickOutside),br]])],2),createBaseVNode("span",null,[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1})]),createBaseVNode("span",{class:normalizeClass([unref(Pt).e("editors-wrap"),"is-right"])},[createBaseVNode("span",{class:normalizeClass(unref(Pt).e("time-picker-wrap"))},[createVNode(unref(ElInput),{size:"small",class:normalizeClass(unref(Pt).e("editor")),disabled:unref(ze).selecting,placeholder:unref(Lt)("el.datepicker.endDate"),"model-value":unref(En),readonly:!unref(Fe),"validate-event":!1,onInput:nr=>gr(nr,"max"),onChange:nr=>tr(nr,"max")},null,8,["class","disabled","placeholder","model-value","readonly","onInput","onChange"])],2),withDirectives((openBlock(),createElementBlock("span",{class:normalizeClass(unref(Pt).e("time-picker-wrap"))},[createVNode(unref(ElInput),{size:"small",class:normalizeClass(unref(Pt).e("editor")),disabled:unref(ze).selecting,placeholder:unref(Lt)("el.datepicker.endTime"),"model-value":unref(kn),readonly:!unref(Fe),"validate-event":!1,onFocus:nr=>unref(Fe)&&(Cr.value=!0),onInput:nr=>Sr(nr,"max"),onChange:nr=>Dr(nr,"max")},null,8,["class","disabled","placeholder","model-value","readonly","onFocus","onInput","onChange"]),createVNode(unref(TimePickPanel),{"datetime-role":"end",visible:Cr.value,format:unref(On),"parsed-value":Oe.value,onPick:Ur},null,8,["visible","format","parsed-value"])],2)),[[unref(ClickOutside),Pr]])],2)],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass([[unref(Ue).e("content"),unref(Pt).e("content")],"is-left"])},[createBaseVNode("div",{class:normalizeClass(unref(Pt).e("header"))},[createBaseVNode("button",{type:"button",class:normalizeClass([unref(Ue).e("icon-btn"),"d-arrow-left"]),"aria-label":unref(Lt)("el.datepicker.prevYear"),onClick:zn},[renderSlot(Vn.$slots,"prev-year",{},()=>[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_left_default))]),_:1})])],10,["aria-label"]),createBaseVNode("button",{type:"button",class:normalizeClass([unref(Ue).e("icon-btn"),"arrow-left"]),"aria-label":unref(Lt)("el.datepicker.prevMonth"),onClick:Hn},[renderSlot(Vn.$slots,"prev-month",{},()=>[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_left_default))]),_:1})])],10,["aria-label"]),Vn.unlinkPanels?(openBlock(),createElementBlock("button",{key:0,type:"button",disabled:!unref(jn),class:normalizeClass([[unref(Ue).e("icon-btn"),{"is-disabled":!unref(jn)}],"d-arrow-right"]),"aria-label":unref(Lt)("el.datepicker.nextYear"),onClick:Qn},[renderSlot(Vn.$slots,"next-year",{},()=>[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_right_default))]),_:1})])],10,["disabled","aria-label"])):createCommentVNode("v-if",!0),Vn.unlinkPanels?(openBlock(),createElementBlock("button",{key:1,type:"button",disabled:!unref(Dn),class:normalizeClass([[unref(Ue).e("icon-btn"),{"is-disabled":!unref(Dn)}],"arrow-right"]),"aria-label":unref(Lt)("el.datepicker.nextMonth"),onClick:_r},[renderSlot(Vn.$slots,"next-month",{},()=>[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1})])],10,["disabled","aria-label"])):createCommentVNode("v-if",!0),createBaseVNode("div",null,toDisplayString(unref(bn)),1)],2),createVNode(DateTable,{"selection-mode":"range",date:Ne.value,"min-date":unref(Fe),"max-date":unref(Ve),"range-state":unref(ze),"disabled-date":unref(de),"cell-class-name":unref(he),onChangerange:unref(qe),onPick:mr,onSelect:unref(At)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2),createBaseVNode("div",{class:normalizeClass([[unref(Ue).e("content"),unref(Pt).e("content")],"is-right"])},[createBaseVNode("div",{class:normalizeClass(unref(Pt).e("header"))},[Vn.unlinkPanels?(openBlock(),createElementBlock("button",{key:0,type:"button",disabled:!unref(jn),class:normalizeClass([[unref(Ue).e("icon-btn"),{"is-disabled":!unref(jn)}],"d-arrow-left"]),"aria-label":unref(Lt)("el.datepicker.prevYear"),onClick:Zn},[renderSlot(Vn.$slots,"prev-year",{},()=>[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_left_default))]),_:1})])],10,["disabled","aria-label"])):createCommentVNode("v-if",!0),Vn.unlinkPanels?(openBlock(),createElementBlock("button",{key:1,type:"button",disabled:!unref(Dn),class:normalizeClass([[unref(Ue).e("icon-btn"),{"is-disabled":!unref(Dn)}],"arrow-left"]),"aria-label":unref(Lt)("el.datepicker.prevMonth"),onClick:Gn},[renderSlot(Vn.$slots,"prev-month",{},()=>[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_left_default))]),_:1})])],10,["disabled","aria-label"])):createCommentVNode("v-if",!0),createBaseVNode("button",{type:"button","aria-label":unref(Lt)("el.datepicker.nextYear"),class:normalizeClass([unref(Ue).e("icon-btn"),"d-arrow-right"]),onClick:Rn},[renderSlot(Vn.$slots,"next-year",{},()=>[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_right_default))]),_:1})])],10,["aria-label"]),createBaseVNode("button",{type:"button",class:normalizeClass([unref(Ue).e("icon-btn"),"arrow-right"]),"aria-label":unref(Lt)("el.datepicker.nextMonth"),onClick:Jn},[renderSlot(Vn.$slots,"next-month",{},()=>[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1})])],10,["aria-label"]),createBaseVNode("div",null,toDisplayString(unref(vn)),1)],2),createVNode(DateTable,{"selection-mode":"range",date:Oe.value,"min-date":unref(Fe),"max-date":unref(Ve),"range-state":unref(ze),"disabled-date":unref(de),"cell-class-name":unref(he),onChangerange:unref(qe),onPick:mr,onSelect:unref(At)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2)],2)],2),unref(Fn)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(Ue).e("footer"))},[unref(_e)?(openBlock(),createBlock(unref(ElButton),{key:0,text:"",size:"small",class:normalizeClass(unref(Ue).e("link-btn")),onClick:Xr},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(Lt)("el.datepicker.clear")),1)]),_:1},8,["class"])):createCommentVNode("v-if",!0),createVNode(unref(ElButton),{plain:"",size:"small",class:normalizeClass(unref(Ue).e("link-btn")),disabled:unref(ir),onClick:nr=>unref(Et)(!1)},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(Lt)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled","onClick"])],2)):createCommentVNode("v-if",!0)],2))}});var DateRangePickPanel=_export_sfc$1(_sfc_main$1I,[["__file","panel-date-range.vue"]]);const panelMonthRangeProps=buildProps({...panelRangeSharedProps}),panelMonthRangeEmits=["pick","set-picker-option","calendar-change"],useMonthRangeHeader=({unlinkPanels:le,leftDate:oe,rightDate:ie})=>{const{t:ue}=useLocale(),de=()=>{oe.value=oe.value.subtract(1,"year"),le.value||(ie.value=ie.value.subtract(1,"year"))},he=()=>{le.value||(oe.value=oe.value.add(1,"year")),ie.value=ie.value.add(1,"year")},pe=()=>{oe.value=oe.value.add(1,"year")},_e=()=>{ie.value=ie.value.subtract(1,"year")},Ce=computed(()=>`${oe.value.year()} ${ue("el.datepicker.year")}`),xe=computed(()=>`${ie.value.year()} ${ue("el.datepicker.year")}`),Ie=computed(()=>oe.value.year()),$e=computed(()=>ie.value.year()===oe.value.year()?oe.value.year()+1:ie.value.year());return{leftPrevYear:de,rightNextYear:he,leftNextYear:pe,rightPrevYear:_e,leftLabel:Ce,rightLabel:xe,leftYear:Ie,rightYear:$e}},unit$1="year",__default__$11=defineComponent({name:"DatePickerMonthRange"}),_sfc_main$1H=defineComponent({...__default__$11,props:panelMonthRangeProps,emits:panelMonthRangeEmits,setup(le,{emit:oe}){const ie=le,{lang:ue}=useLocale(),de=inject("EP_PICKER_BASE"),{shortcuts:he,disabledDate:pe}=de.props,_e=toRef(de.props,"format"),Ce=toRef(de.props,"defaultValue"),xe=ref(dayjs().locale(ue.value)),Ie=ref(dayjs().locale(ue.value).add(1,unit$1)),{minDate:$e,maxDate:Ne,rangeState:Oe,ppNs:Fe,drpNs:Ve,handleChangeRange:ze,handleRangeConfirm:Ue,handleShortcutClick:Pt,onSelect:qe}=useRangePicker(ie,{defaultValue:Ce,leftDate:xe,rightDate:Ie,unit:unit$1,onParsedValueChanged:In}),Et=computed(()=>!!he.length),{leftPrevYear:kt,rightNextYear:At,leftNextYear:Dt,rightPrevYear:Lt,leftLabel:jt,rightLabel:_n,leftYear:bn,rightYear:vn}=useMonthRangeHeader({unlinkPanels:toRef(ie,"unlinkPanels"),leftDate:xe,rightDate:Ie}),Tn=computed(()=>ie.unlinkPanels&&vn.value>bn.value+1),$n=(En,xn=!0)=>{const kn=En.minDate,On=En.maxDate;Ne.value===On&&$e.value===kn||(oe("calendar-change",[kn.toDate(),On&&On.toDate()]),Ne.value=On,$e.value=kn,xn&&Ue())},wn=()=>{xe.value=getDefaultValue(unref(Ce),{lang:unref(ue),unit:"year",unlinkPanels:ie.unlinkPanels})[0],Ie.value=xe.value.add(1,"year"),oe("pick",null)},Cn=En=>isArray$3(En)?En.map(xn=>xn.format(_e.value)):En.format(_e.value),Sn=En=>isArray$3(En)?En.map(xn=>dayjs(xn,_e.value).locale(ue.value)):dayjs(En,_e.value).locale(ue.value);function In(En,xn){if(ie.unlinkPanels&&xn){const kn=(En==null?void 0:En.year())||0,On=xn.year();Ie.value=kn===On?xn.add(1,unit$1):xn}else Ie.value=xe.value.add(1,unit$1)}return oe("set-picker-option",["isValidValue",isValidRange]),oe("set-picker-option",["formatToString",Cn]),oe("set-picker-option",["parseUserInput",Sn]),oe("set-picker-option",["handleClear",wn]),(En,xn)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(Fe).b(),unref(Ve).b(),{"has-sidebar":!!En.$slots.sidebar||unref(Et)}])},[createBaseVNode("div",{class:normalizeClass(unref(Fe).e("body-wrapper"))},[renderSlot(En.$slots,"sidebar",{class:normalizeClass(unref(Fe).e("sidebar"))}),unref(Et)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(Fe).e("sidebar"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(he),(kn,On)=>(openBlock(),createElementBlock("button",{key:On,type:"button",class:normalizeClass(unref(Fe).e("shortcut")),onClick:Mn=>unref(Pt)(kn)},toDisplayString(kn.text),11,["onClick"]))),128))],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(Fe).e("body"))},[createBaseVNode("div",{class:normalizeClass([[unref(Fe).e("content"),unref(Ve).e("content")],"is-left"])},[createBaseVNode("div",{class:normalizeClass(unref(Ve).e("header"))},[createBaseVNode("button",{type:"button",class:normalizeClass([unref(Fe).e("icon-btn"),"d-arrow-left"]),onClick:unref(kt)},[renderSlot(En.$slots,"prev-year",{},()=>[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_left_default))]),_:1})])],10,["onClick"]),En.unlinkPanels?(openBlock(),createElementBlock("button",{key:0,type:"button",disabled:!unref(Tn),class:normalizeClass([[unref(Fe).e("icon-btn"),{[unref(Fe).is("disabled")]:!unref(Tn)}],"d-arrow-right"]),onClick:unref(Dt)},[renderSlot(En.$slots,"next-year",{},()=>[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_right_default))]),_:1})])],10,["disabled","onClick"])):createCommentVNode("v-if",!0),createBaseVNode("div",null,toDisplayString(unref(jt)),1)],2),createVNode(MonthTable,{"selection-mode":"range",date:xe.value,"min-date":unref($e),"max-date":unref(Ne),"range-state":unref(Oe),"disabled-date":unref(pe),onChangerange:unref(ze),onPick:$n,onSelect:unref(qe)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2),createBaseVNode("div",{class:normalizeClass([[unref(Fe).e("content"),unref(Ve).e("content")],"is-right"])},[createBaseVNode("div",{class:normalizeClass(unref(Ve).e("header"))},[En.unlinkPanels?(openBlock(),createElementBlock("button",{key:0,type:"button",disabled:!unref(Tn),class:normalizeClass([[unref(Fe).e("icon-btn"),{"is-disabled":!unref(Tn)}],"d-arrow-left"]),onClick:unref(Lt)},[renderSlot(En.$slots,"prev-year",{},()=>[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_left_default))]),_:1})])],10,["disabled","onClick"])):createCommentVNode("v-if",!0),createBaseVNode("button",{type:"button",class:normalizeClass([unref(Fe).e("icon-btn"),"d-arrow-right"]),onClick:unref(At)},[renderSlot(En.$slots,"next-year",{},()=>[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_right_default))]),_:1})])],10,["onClick"]),createBaseVNode("div",null,toDisplayString(unref(_n)),1)],2),createVNode(MonthTable,{"selection-mode":"range",date:Ie.value,"min-date":unref($e),"max-date":unref(Ne),"range-state":unref(Oe),"disabled-date":unref(pe),onChangerange:unref(ze),onPick:$n,onSelect:unref(qe)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2)],2)],2)],2))}});var MonthRangePickPanel=_export_sfc$1(_sfc_main$1H,[["__file","panel-month-range.vue"]]);const panelYearRangeProps=buildProps({...panelRangeSharedProps}),panelYearRangeEmits=["pick","set-picker-option","calendar-change"],useYearRangeHeader=({unlinkPanels:le,leftDate:oe,rightDate:ie})=>{const ue=()=>{oe.value=oe.value.subtract(10,"year"),le.value||(ie.value=ie.value.subtract(10,"year"))},de=()=>{le.value||(oe.value=oe.value.add(10,"year")),ie.value=ie.value.add(10,"year")},he=()=>{oe.value=oe.value.add(10,"year")},pe=()=>{ie.value=ie.value.subtract(10,"year")},_e=computed(()=>{const $e=Math.floor(oe.value.year()/10)*10;return`${$e}-${$e+9}`}),Ce=computed(()=>{const $e=Math.floor(ie.value.year()/10)*10;return`${$e}-${$e+9}`}),xe=computed(()=>Math.floor(oe.value.year()/10)*10+9),Ie=computed(()=>Math.floor(ie.value.year()/10)*10);return{leftPrevYear:ue,rightNextYear:de,leftNextYear:he,rightPrevYear:pe,leftLabel:_e,rightLabel:Ce,leftYear:xe,rightYear:Ie}},unit="year",__default__$10=defineComponent({name:"DatePickerYearRange"}),_sfc_main$1G=defineComponent({...__default__$10,props:panelYearRangeProps,emits:panelYearRangeEmits,setup(le,{emit:oe}){const ie=le,{lang:ue}=useLocale(),de=ref(dayjs().locale(ue.value)),he=ref(de.value.add(10,"year")),{pickerNs:pe}=inject(ROOT_PICKER_INJECTION_KEY),_e=useNamespace("date-range-picker"),Ce=computed(()=>!!$n.length),xe=computed(()=>[pe.b(),_e.b(),{"has-sidebar":!!useSlots().sidebar||Ce.value}]),Ie=computed(()=>({content:[pe.e("content"),_e.e("content"),"is-left"],arrowLeftBtn:[pe.e("icon-btn"),"d-arrow-left"],arrowRightBtn:[pe.e("icon-btn"),{[pe.is("disabled")]:!kt.value},"d-arrow-right"]})),$e=computed(()=>({content:[pe.e("content"),_e.e("content"),"is-right"],arrowLeftBtn:[pe.e("icon-btn"),{"is-disabled":!kt.value},"d-arrow-left"],arrowRightBtn:[pe.e("icon-btn"),"d-arrow-right"]})),Ne=useShortcut(ue),{leftPrevYear:Oe,rightNextYear:Fe,leftNextYear:Ve,rightPrevYear:ze,leftLabel:Ue,rightLabel:Pt,leftYear:qe,rightYear:Et}=useYearRangeHeader({unlinkPanels:toRef(ie,"unlinkPanels"),leftDate:de,rightDate:he}),kt=computed(()=>ie.unlinkPanels&&Et.value>qe.value+1),At=ref(),Dt=ref(),Lt=ref({endDate:null,selecting:!1}),jt=Mn=>{Lt.value=Mn},_n=(Mn,Un=!0)=>{const zn=Mn.minDate,Hn=Mn.maxDate;Dt.value===Hn&&At.value===zn||(oe("calendar-change",[zn.toDate(),Hn&&Hn.toDate()]),Dt.value=Hn,At.value=zn,Un&&bn())},bn=(Mn=!1)=>{isValidRange([At.value,Dt.value])&&oe("pick",[At.value,Dt.value],Mn)},vn=Mn=>{Lt.value.selecting=Mn,Mn||(Lt.value.endDate=null)},Tn=inject("EP_PICKER_BASE"),{shortcuts:$n,disabledDate:wn}=Tn.props,Cn=toRef(Tn.props,"format"),Sn=toRef(Tn.props,"defaultValue"),In=()=>{let Mn;if(isArray$3(Sn.value)){const Un=dayjs(Sn.value[0]);let zn=dayjs(Sn.value[1]);return ie.unlinkPanels||(zn=Un.add(10,unit)),[Un,zn]}else Sn.value?Mn=dayjs(Sn.value):Mn=dayjs();return Mn=Mn.locale(ue.value),[Mn,Mn.add(10,unit)]};watch(()=>Sn.value,Mn=>{if(Mn){const Un=In();de.value=Un[0],he.value=Un[1]}},{immediate:!0}),watch(()=>ie.parsedValue,Mn=>{if(Mn&&Mn.length===2)if(At.value=Mn[0],Dt.value=Mn[1],de.value=At.value,ie.unlinkPanels&&Dt.value){const Un=At.value.year(),zn=Dt.value.year();he.value=Un===zn?Dt.value.add(10,"year"):Dt.value}else he.value=de.value.add(10,"year");else{const Un=In();At.value=void 0,Dt.value=void 0,de.value=Un[0],he.value=Un[1]}},{immediate:!0});const En=Mn=>isArray$3(Mn)?Mn.map(Un=>dayjs(Un,Cn.value).locale(ue.value)):dayjs(Mn,Cn.value).locale(ue.value),xn=Mn=>isArray$3(Mn)?Mn.map(Un=>Un.format(Cn.value)):Mn.format(Cn.value),kn=Mn=>isValidRange(Mn)&&(wn?!wn(Mn[0].toDate())&&!wn(Mn[1].toDate()):!0),On=()=>{const Mn=In();de.value=Mn[0],he.value=Mn[1],Dt.value=void 0,At.value=void 0,oe("pick",null)};return oe("set-picker-option",["isValidValue",kn]),oe("set-picker-option",["parseUserInput",En]),oe("set-picker-option",["formatToString",xn]),oe("set-picker-option",["handleClear",On]),(Mn,Un)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(xe))},[createBaseVNode("div",{class:normalizeClass(unref(pe).e("body-wrapper"))},[renderSlot(Mn.$slots,"sidebar",{class:normalizeClass(unref(pe).e("sidebar"))}),unref(Ce)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(pe).e("sidebar"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref($n),(zn,Hn)=>(openBlock(),createElementBlock("button",{key:Hn,type:"button",class:normalizeClass(unref(pe).e("shortcut")),onClick:Rn=>unref(Ne)(zn)},toDisplayString(zn.text),11,["onClick"]))),128))],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(pe).e("body"))},[createBaseVNode("div",{class:normalizeClass(unref(Ie).content)},[createBaseVNode("div",{class:normalizeClass(unref(_e).e("header"))},[createBaseVNode("button",{type:"button",class:normalizeClass(unref(Ie).arrowLeftBtn),onClick:unref(Oe)},[renderSlot(Mn.$slots,"prev-year",{},()=>[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_left_default))]),_:1})])],10,["onClick"]),Mn.unlinkPanels?(openBlock(),createElementBlock("button",{key:0,type:"button",disabled:!unref(kt),class:normalizeClass(unref(Ie).arrowRightBtn),onClick:unref(Ve)},[renderSlot(Mn.$slots,"next-year",{},()=>[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_right_default))]),_:1})])],10,["disabled","onClick"])):createCommentVNode("v-if",!0),createBaseVNode("div",null,toDisplayString(unref(Ue)),1)],2),createVNode(YearTable,{"selection-mode":"range",date:de.value,"min-date":At.value,"max-date":Dt.value,"range-state":Lt.value,"disabled-date":unref(wn),onChangerange:jt,onPick:_n,onSelect:vn},null,8,["date","min-date","max-date","range-state","disabled-date"])],2),createBaseVNode("div",{class:normalizeClass(unref($e).content)},[createBaseVNode("div",{class:normalizeClass(unref(_e).e("header"))},[Mn.unlinkPanels?(openBlock(),createElementBlock("button",{key:0,type:"button",disabled:!unref(kt),class:normalizeClass(unref($e).arrowLeftBtn),onClick:unref(ze)},[renderSlot(Mn.$slots,"prev-year",{},()=>[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_left_default))]),_:1})])],10,["disabled","onClick"])):createCommentVNode("v-if",!0),createBaseVNode("button",{type:"button",class:normalizeClass(unref($e).arrowRightBtn),onClick:unref(Fe)},[renderSlot(Mn.$slots,"next-year",{},()=>[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_right_default))]),_:1})])],10,["onClick"]),createBaseVNode("div",null,toDisplayString(unref(Pt)),1)],2),createVNode(YearTable,{"selection-mode":"range",date:he.value,"min-date":At.value,"max-date":Dt.value,"range-state":Lt.value,"disabled-date":unref(wn),onChangerange:jt,onPick:_n,onSelect:vn},null,8,["date","min-date","max-date","range-state","disabled-date"])],2)],2)],2)],2))}});var YearRangePickPanel=_export_sfc$1(_sfc_main$1G,[["__file","panel-year-range.vue"]]);const getPanel=function(le){switch(le){case"daterange":case"datetimerange":return DateRangePickPanel;case"monthrange":return MonthRangePickPanel;case"yearrange":return YearRangePickPanel;default:return DatePickPanel}};dayjs.extend(localeData);dayjs.extend(advancedFormat);dayjs.extend(customParseFormat);dayjs.extend(weekOfYear);dayjs.extend(weekYear);dayjs.extend(dayOfYear);dayjs.extend(isSameOrAfter);dayjs.extend(isSameOrBefore);var DatePicker=defineComponent({name:"ElDatePicker",install:null,props:datePickerProps,emits:["update:modelValue"],setup(le,{expose:oe,emit:ie,slots:ue}){const de=useNamespace("picker-panel");provide("ElPopperOptions",reactive(toRef(le,"popperOptions"))),provide(ROOT_PICKER_INJECTION_KEY,{slots:ue,pickerNs:de});const he=ref();oe({focus:(Ce=!0)=>{var xe;(xe=he.value)==null||xe.focus(Ce)},handleOpen:()=>{var Ce;(Ce=he.value)==null||Ce.handleOpen()},handleClose:()=>{var Ce;(Ce=he.value)==null||Ce.handleClose()}});const _e=Ce=>{ie("update:modelValue",Ce)};return()=>{var Ce;const xe=(Ce=le.format)!=null?Ce:DEFAULT_FORMATS_DATEPICKER[le.type]||DEFAULT_FORMATS_DATE,Ie=getPanel(le.type);return createVNode(CommonPicker,mergeProps(le,{format:xe,type:le.type,ref:he,"onUpdate:modelValue":_e}),{default:$e=>createVNode(Ie,$e,{"prev-month":ue["prev-month"],"next-month":ue["next-month"],"prev-year":ue["prev-year"],"next-year":ue["next-year"]}),"range-separator":ue["range-separator"]})}}});const ElDatePicker=withInstall(DatePicker),descriptionsKey=Symbol("elDescriptions");var ElDescriptionsCell=defineComponent({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String,default:"td"},type:{type:String}},setup(){return{descriptions:inject(descriptionsKey,{})}},render(){var le;const oe=getNormalizedProps(this.cell),ie=(((le=this.cell)==null?void 0:le.dirs)||[]).map(ze=>{const{dir:Ue,arg:Pt,modifiers:qe,value:Et}=ze;return[Ue,Et,Pt,qe]}),{border:ue,direction:de}=this.descriptions,he=de==="vertical",pe=()=>{var ze,Ue,Pt;return((Pt=(Ue=(ze=this.cell)==null?void 0:ze.children)==null?void 0:Ue.label)==null?void 0:Pt.call(Ue))||oe.label},_e=()=>{var ze,Ue,Pt;return(Pt=(Ue=(ze=this.cell)==null?void 0:ze.children)==null?void 0:Ue.default)==null?void 0:Pt.call(Ue)},Ce=oe.span,xe=oe.rowspan,Ie=oe.align?`is-${oe.align}`:"",$e=oe.labelAlign?`is-${oe.labelAlign}`:Ie,Ne=oe.className,Oe=oe.labelClassName,Fe={width:addUnit(oe.width),minWidth:addUnit(oe.minWidth)},Ve=useNamespace("descriptions");switch(this.type){case"label":return withDirectives(h$3(this.tag,{style:Fe,class:[Ve.e("cell"),Ve.e("label"),Ve.is("bordered-label",ue),Ve.is("vertical-label",he),$e,Oe],colSpan:he?Ce:1,rowspan:he?1:xe},pe()),ie);case"content":return withDirectives(h$3(this.tag,{style:Fe,class:[Ve.e("cell"),Ve.e("content"),Ve.is("bordered-content",ue),Ve.is("vertical-content",he),Ie,Ne],colSpan:he?Ce:Ce*2-1,rowspan:he?xe*2-1:xe},_e()),ie);default:{const ze=pe();return withDirectives(h$3("td",{style:Fe,class:[Ve.e("cell"),Ie],colSpan:Ce,rowspan:xe},[isNil(ze)?void 0:h$3("span",{class:[Ve.e("label"),Oe]},ze),h$3("span",{class:[Ve.e("content"),Ne]},_e())]),ie)}}}});const descriptionsRowProps=buildProps({row:{type:definePropType(Array),default:()=>[]}}),__default__$$=defineComponent({name:"ElDescriptionsRow"}),_sfc_main$1F=defineComponent({...__default__$$,props:descriptionsRowProps,setup(le){const oe=inject(descriptionsKey,{});return(ie,ue)=>unref(oe).direction==="vertical"?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("tr",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(ie.row,(de,he)=>(openBlock(),createBlock(unref(ElDescriptionsCell),{key:`tr1-${he}`,cell:de,tag:"th",type:"label"},null,8,["cell"]))),128))]),createBaseVNode("tr",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(ie.row,(de,he)=>(openBlock(),createBlock(unref(ElDescriptionsCell),{key:`tr2-${he}`,cell:de,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(openBlock(),createElementBlock("tr",{key:1},[(openBlock(!0),createElementBlock(Fragment,null,renderList(ie.row,(de,he)=>(openBlock(),createElementBlock(Fragment,{key:`tr3-${he}`},[unref(oe).border?(openBlock(),createElementBlock(Fragment,{key:0},[createVNode(unref(ElDescriptionsCell),{cell:de,tag:"td",type:"label"},null,8,["cell"]),createVNode(unref(ElDescriptionsCell),{cell:de,tag:"td",type:"content"},null,8,["cell"])],64)):(openBlock(),createBlock(unref(ElDescriptionsCell),{key:1,cell:de,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}});var ElDescriptionsRow=_export_sfc$1(_sfc_main$1F,[["__file","descriptions-row.vue"]]);const descriptionProps=buildProps({border:Boolean,column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:useSizeProp,title:{type:String,default:""},extra:{type:String,default:""}}),__default__$_=defineComponent({name:"ElDescriptions"}),_sfc_main$1E=defineComponent({...__default__$_,props:descriptionProps,setup(le){const oe=le,ie=useNamespace("descriptions"),ue=useFormSize(),de=useSlots();provide(descriptionsKey,oe);const he=computed(()=>[ie.b(),ie.m(ue.value)]),pe=(Ce,xe,Ie,$e=!1)=>(Ce.props||(Ce.props={}),xe>Ie&&(Ce.props.span=Ie),$e&&(Ce.props.span=xe),Ce),_e=()=>{if(!de.default)return[];const Ce=flattedChildren(de.default()).filter(Fe=>{var Ve;return((Ve=Fe==null?void 0:Fe.type)==null?void 0:Ve.name)==="ElDescriptionsItem"}),xe=[];let Ie=[],$e=oe.column,Ne=0;const Oe=[];return Ce.forEach((Fe,Ve)=>{var ze,Ue,Pt;const qe=((ze=Fe.props)==null?void 0:ze.span)||1,Et=((Ue=Fe.props)==null?void 0:Ue.rowspan)||1,kt=xe.length;if(Oe[kt]||(Oe[kt]=0),Et>1)for(let At=1;At<Et;At++)Oe[Pt=kt+At]||(Oe[Pt]=0),Oe[kt+At]++,Ne++;if(Oe[kt]>0&&($e-=Oe[kt],Oe[kt]=0),Ve<Ce.length-1&&(Ne+=qe>$e?$e:qe),Ve===Ce.length-1){const At=oe.column-Ne%oe.column;Ie.push(pe(Fe,At,$e,!0)),xe.push(Ie);return}qe<$e?($e-=qe,Ie.push(Fe)):(Ie.push(pe(Fe,qe,$e)),xe.push(Ie),$e=oe.column,Ie=[])}),xe};return(Ce,xe)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(he))},[Ce.title||Ce.extra||Ce.$slots.title||Ce.$slots.extra?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(ie).e("header"))},[createBaseVNode("div",{class:normalizeClass(unref(ie).e("title"))},[renderSlot(Ce.$slots,"title",{},()=>[createTextVNode(toDisplayString(Ce.title),1)])],2),createBaseVNode("div",{class:normalizeClass(unref(ie).e("extra"))},[renderSlot(Ce.$slots,"extra",{},()=>[createTextVNode(toDisplayString(Ce.extra),1)])],2)],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(ie).e("body"))},[createBaseVNode("table",{class:normalizeClass([unref(ie).e("table"),unref(ie).is("bordered",Ce.border)])},[createBaseVNode("tbody",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(_e(),(Ie,$e)=>(openBlock(),createBlock(ElDescriptionsRow,{key:$e,row:Ie},null,8,["row"]))),128))])],2)],2)],2))}});var Descriptions=_export_sfc$1(_sfc_main$1E,[["__file","description.vue"]]);const descriptionItemProps=buildProps({label:{type:String,default:""},span:{type:Number,default:1},rowspan:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},align:{type:String,default:"left"},labelAlign:{type:String,default:""},className:{type:String,default:""},labelClassName:{type:String,default:""}}),DescriptionItem=defineComponent({name:"ElDescriptionsItem",props:descriptionItemProps}),ElDescriptions=withInstall(Descriptions,{DescriptionsItem:DescriptionItem}),ElDescriptionsItem=withNoopInstall(DescriptionItem),overlayProps=buildProps({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:definePropType([String,Array,Object])},zIndex:{type:definePropType([String,Number])}}),overlayEmits={click:le=>le instanceof MouseEvent},BLOCK="overlay";var Overlay$1=defineComponent({name:"ElOverlay",props:overlayProps,emits:overlayEmits,setup(le,{slots:oe,emit:ie}){const ue=useNamespace(BLOCK),de=Ce=>{ie("click",Ce)},{onClick:he,onMousedown:pe,onMouseup:_e}=useSameTarget(le.customMaskEvent?void 0:de);return()=>le.mask?createVNode("div",{class:[ue.b(),le.overlayClass],style:{zIndex:le.zIndex},onClick:he,onMousedown:pe,onMouseup:_e},[renderSlot(oe,"default")],PatchFlags.STYLE|PatchFlags.CLASS|PatchFlags.PROPS,["onClick","onMouseup","onMousedown"]):h$3("div",{class:le.overlayClass,style:{zIndex:le.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[renderSlot(oe,"default")])}});const ElOverlay=Overlay$1,dialogInjectionKey=Symbol("dialogInjectionKey"),dialogContentProps=buildProps({center:Boolean,alignCenter:Boolean,closeIcon:{type:iconPropType},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),dialogContentEmits={close:()=>!0},__default__$Z=defineComponent({name:"ElDialogContent"}),_sfc_main$1D=defineComponent({...__default__$Z,props:dialogContentProps,emits:dialogContentEmits,setup(le,{expose:oe}){const ie=le,{t:ue}=useLocale(),{Close:de}=CloseComponents,{dialogRef:he,headerRef:pe,bodyId:_e,ns:Ce,style:xe}=inject(dialogInjectionKey),{focusTrapRef:Ie}=inject(FOCUS_TRAP_INJECTION_KEY),$e=computed(()=>[Ce.b(),Ce.is("fullscreen",ie.fullscreen),Ce.is("draggable",ie.draggable),Ce.is("align-center",ie.alignCenter),{[Ce.m("center")]:ie.center}]),Ne=composeRefs(Ie,he),Oe=computed(()=>ie.draggable),Fe=computed(()=>ie.overflow),{resetPosition:Ve}=useDraggable(he,pe,Oe,Fe);return oe({resetPosition:Ve}),(ze,Ue)=>(openBlock(),createElementBlock("div",{ref:unref(Ne),class:normalizeClass(unref($e)),style:normalizeStyle(unref(xe)),tabindex:"-1"},[createBaseVNode("header",{ref_key:"headerRef",ref:pe,class:normalizeClass([unref(Ce).e("header"),{"show-close":ze.showClose}])},[renderSlot(ze.$slots,"header",{},()=>[createBaseVNode("span",{role:"heading","aria-level":ze.ariaLevel,class:normalizeClass(unref(Ce).e("title"))},toDisplayString(ze.title),11,["aria-level"])]),ze.showClose?(openBlock(),createElementBlock("button",{key:0,"aria-label":unref(ue)("el.dialog.close"),class:normalizeClass(unref(Ce).e("headerbtn")),type:"button",onClick:Pt=>ze.$emit("close")},[createVNode(unref(ElIcon),{class:normalizeClass(unref(Ce).e("close"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(ze.closeIcon||unref(de))))]),_:1},8,["class"])],10,["aria-label","onClick"])):createCommentVNode("v-if",!0)],2),createBaseVNode("div",{id:unref(_e),class:normalizeClass(unref(Ce).e("body"))},[renderSlot(ze.$slots,"default")],10,["id"]),ze.$slots.footer?(openBlock(),createElementBlock("footer",{key:0,class:normalizeClass(unref(Ce).e("footer"))},[renderSlot(ze.$slots,"footer")],2)):createCommentVNode("v-if",!0)],6))}});var ElDialogContent=_export_sfc$1(_sfc_main$1D,[["__file","dialog-content.vue"]]);const dialogProps=buildProps({...dialogContentProps,appendToBody:Boolean,appendTo:{type:definePropType([String,Object]),default:"body"},beforeClose:{type:definePropType(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),dialogEmits={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[UPDATE_MODEL_EVENT]:le=>isBoolean(le),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},useDialog=(le,oe)=>{var ie;const de=getCurrentInstance().emit,{nextZIndex:he}=useZIndex();let pe="";const _e=useId(),Ce=useId(),xe=ref(!1),Ie=ref(!1),$e=ref(!1),Ne=ref((ie=le.zIndex)!=null?ie:he());let Oe,Fe;const Ve=useGlobalConfig("namespace",defaultNamespace),ze=computed(()=>{const wn={},Cn=`--${Ve.value}-dialog`;return le.fullscreen||(le.top&&(wn[`${Cn}-margin-top`]=le.top),le.width&&(wn[`${Cn}-width`]=addUnit(le.width))),wn}),Ue=computed(()=>le.alignCenter?{display:"flex"}:{});function Pt(){de("opened")}function qe(){de("closed"),de(UPDATE_MODEL_EVENT,!1),le.destroyOnClose&&($e.value=!1)}function Et(){de("close")}function kt(){Fe==null||Fe(),Oe==null||Oe(),le.openDelay&&le.openDelay>0?{stop:Oe}=useTimeoutFn(()=>jt(),le.openDelay):jt()}function At(){Oe==null||Oe(),Fe==null||Fe(),le.closeDelay&&le.closeDelay>0?{stop:Fe}=useTimeoutFn(()=>_n(),le.closeDelay):_n()}function Dt(){function wn(Cn){Cn||(Ie.value=!0,xe.value=!1)}le.beforeClose?le.beforeClose(wn):At()}function Lt(){le.closeOnClickModal&&Dt()}function jt(){isClient&&(xe.value=!0)}function _n(){xe.value=!1}function bn(){de("openAutoFocus")}function vn(){de("closeAutoFocus")}function Tn(wn){var Cn;((Cn=wn.detail)==null?void 0:Cn.focusReason)==="pointer"&&wn.preventDefault()}le.lockScroll&&useLockscreen(xe);function $n(){le.closeOnPressEscape&&Dt()}return watch(()=>le.modelValue,wn=>{wn?(Ie.value=!1,kt(),$e.value=!0,Ne.value=isUndefined$1(le.zIndex)?he():Ne.value++,nextTick(()=>{de("open"),oe.value&&(oe.value.scrollTop=0)})):xe.value&&At()}),watch(()=>le.fullscreen,wn=>{oe.value&&(wn?(pe=oe.value.style.transform,oe.value.style.transform=""):oe.value.style.transform=pe)}),onMounted(()=>{le.modelValue&&(xe.value=!0,$e.value=!0,kt())}),{afterEnter:Pt,afterLeave:qe,beforeLeave:Et,handleClose:Dt,onModalClick:Lt,close:At,doClose:_n,onOpenAutoFocus:bn,onCloseAutoFocus:vn,onCloseRequested:$n,onFocusoutPrevented:Tn,titleId:_e,bodyId:Ce,closed:Ie,style:ze,overlayDialogStyle:Ue,rendered:$e,visible:xe,zIndex:Ne}},__default__$Y=defineComponent({name:"ElDialog",inheritAttrs:!1}),_sfc_main$1C=defineComponent({...__default__$Y,props:dialogProps,emits:dialogEmits,setup(le,{expose:oe}){const ie=le,ue=useSlots();useDeprecated({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},computed(()=>!!ue.title));const de=useNamespace("dialog"),he=ref(),pe=ref(),_e=ref(),{visible:Ce,titleId:xe,bodyId:Ie,style:$e,overlayDialogStyle:Ne,rendered:Oe,zIndex:Fe,afterEnter:Ve,afterLeave:ze,beforeLeave:Ue,handleClose:Pt,onModalClick:qe,onOpenAutoFocus:Et,onCloseAutoFocus:kt,onCloseRequested:At,onFocusoutPrevented:Dt}=useDialog(ie,he);provide(dialogInjectionKey,{dialogRef:he,headerRef:pe,bodyId:Ie,ns:de,rendered:Oe,style:$e});const Lt=useSameTarget(qe),jt=computed(()=>ie.draggable&&!ie.fullscreen);return oe({visible:Ce,dialogContentRef:_e,resetPosition:()=>{var bn;(bn=_e.value)==null||bn.resetPosition()}}),(bn,vn)=>(openBlock(),createBlock(unref(ElTeleport),{to:bn.appendTo,disabled:bn.appendTo!=="body"?!1:!bn.appendToBody},{default:withCtx(()=>[createVNode(Transition,{name:"dialog-fade",onAfterEnter:unref(Ve),onAfterLeave:unref(ze),onBeforeLeave:unref(Ue),persisted:""},{default:withCtx(()=>[withDirectives(createVNode(unref(ElOverlay),{"custom-mask-event":"",mask:bn.modal,"overlay-class":bn.modalClass,"z-index":unref(Fe)},{default:withCtx(()=>[createBaseVNode("div",{role:"dialog","aria-modal":"true","aria-label":bn.title||void 0,"aria-labelledby":bn.title?void 0:unref(xe),"aria-describedby":unref(Ie),class:normalizeClass(`${unref(de).namespace.value}-overlay-dialog`),style:normalizeStyle(unref(Ne)),onClick:unref(Lt).onClick,onMousedown:unref(Lt).onMousedown,onMouseup:unref(Lt).onMouseup},[createVNode(unref(ElFocusTrap),{loop:"",trapped:unref(Ce),"focus-start-el":"container",onFocusAfterTrapped:unref(Et),onFocusAfterReleased:unref(kt),onFocusoutPrevented:unref(Dt),onReleaseRequested:unref(At)},{default:withCtx(()=>[unref(Oe)?(openBlock(),createBlock(ElDialogContent,mergeProps({key:0,ref_key:"dialogContentRef",ref:_e},bn.$attrs,{center:bn.center,"align-center":bn.alignCenter,"close-icon":bn.closeIcon,draggable:unref(jt),overflow:bn.overflow,fullscreen:bn.fullscreen,"show-close":bn.showClose,title:bn.title,"aria-level":bn.headerAriaLevel,onClose:unref(Pt)}),createSlots({header:withCtx(()=>[bn.$slots.title?renderSlot(bn.$slots,"title",{key:1}):renderSlot(bn.$slots,"header",{key:0,close:unref(Pt),titleId:unref(xe),titleClass:unref(de).e("title")})]),default:withCtx(()=>[renderSlot(bn.$slots,"default")]),_:2},[bn.$slots.footer?{name:"footer",fn:withCtx(()=>[renderSlot(bn.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","show-close","title","aria-level","onClose"])):createCommentVNode("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[vShow,unref(Ce)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var Dialog=_export_sfc$1(_sfc_main$1C,[["__file","dialog.vue"]]);const ElDialog=withInstall(Dialog),dividerProps=buildProps({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:definePropType(String),default:"solid"}}),__default__$X=defineComponent({name:"ElDivider"}),_sfc_main$1B=defineComponent({...__default__$X,props:dividerProps,setup(le){const oe=le,ie=useNamespace("divider"),ue=computed(()=>ie.cssVar({"border-style":oe.borderStyle}));return(de,he)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(ie).b(),unref(ie).m(de.direction)]),style:normalizeStyle(unref(ue)),role:"separator"},[de.$slots.default&&de.direction!=="vertical"?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass([unref(ie).e("text"),unref(ie).is(de.contentPosition)])},[renderSlot(de.$slots,"default")],2)):createCommentVNode("v-if",!0)],6))}});var Divider=_export_sfc$1(_sfc_main$1B,[["__file","divider.vue"]]);const ElDivider=withInstall(Divider),drawerProps=buildProps({...dialogProps,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),drawerEmits=dialogEmits,__default__$W=defineComponent({name:"ElDrawer",inheritAttrs:!1}),_sfc_main$1A=defineComponent({...__default__$W,props:drawerProps,emits:drawerEmits,setup(le,{expose:oe}){const ie=le,ue=useSlots();useDeprecated({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},computed(()=>!!ue.title));const de=ref(),he=ref(),pe=useNamespace("drawer"),{t:_e}=useLocale(),{afterEnter:Ce,afterLeave:xe,beforeLeave:Ie,visible:$e,rendered:Ne,titleId:Oe,bodyId:Fe,zIndex:Ve,onModalClick:ze,onOpenAutoFocus:Ue,onCloseAutoFocus:Pt,onFocusoutPrevented:qe,onCloseRequested:Et,handleClose:kt}=useDialog(ie,de),At=computed(()=>ie.direction==="rtl"||ie.direction==="ltr"),Dt=computed(()=>addUnit(ie.size));return oe({handleClose:kt,afterEnter:Ce,afterLeave:xe}),(Lt,jt)=>(openBlock(),createBlock(unref(ElTeleport),{to:Lt.appendTo,disabled:Lt.appendTo!=="body"?!1:!Lt.appendToBody},{default:withCtx(()=>[createVNode(Transition,{name:unref(pe).b("fade"),onAfterEnter:unref(Ce),onAfterLeave:unref(xe),onBeforeLeave:unref(Ie),persisted:""},{default:withCtx(()=>[withDirectives(createVNode(unref(ElOverlay),{mask:Lt.modal,"overlay-class":Lt.modalClass,"z-index":unref(Ve),onClick:unref(ze)},{default:withCtx(()=>[createVNode(unref(ElFocusTrap),{loop:"",trapped:unref($e),"focus-trap-el":de.value,"focus-start-el":he.value,onFocusAfterTrapped:unref(Ue),onFocusAfterReleased:unref(Pt),onFocusoutPrevented:unref(qe),onReleaseRequested:unref(Et)},{default:withCtx(()=>[createBaseVNode("div",mergeProps({ref_key:"drawerRef",ref:de,"aria-modal":"true","aria-label":Lt.title||void 0,"aria-labelledby":Lt.title?void 0:unref(Oe),"aria-describedby":unref(Fe)},Lt.$attrs,{class:[unref(pe).b(),Lt.direction,unref($e)&&"open"],style:unref(At)?"width: "+unref(Dt):"height: "+unref(Dt),role:"dialog",onClick:withModifiers(()=>{},["stop"])}),[createBaseVNode("span",{ref_key:"focusStartRef",ref:he,class:normalizeClass(unref(pe).e("sr-focus")),tabindex:"-1"},null,2),Lt.withHeader?(openBlock(),createElementBlock("header",{key:0,class:normalizeClass(unref(pe).e("header"))},[Lt.$slots.title?renderSlot(Lt.$slots,"title",{key:1},()=>[createCommentVNode(" DEPRECATED SLOT ")]):renderSlot(Lt.$slots,"header",{key:0,close:unref(kt),titleId:unref(Oe),titleClass:unref(pe).e("title")},()=>[Lt.$slots.title?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("span",{key:0,id:unref(Oe),role:"heading","aria-level":Lt.headerAriaLevel,class:normalizeClass(unref(pe).e("title"))},toDisplayString(Lt.title),11,["id","aria-level"]))]),Lt.showClose?(openBlock(),createElementBlock("button",{key:2,"aria-label":unref(_e)("el.drawer.close"),class:normalizeClass(unref(pe).e("close-btn")),type:"button",onClick:unref(kt)},[createVNode(unref(ElIcon),{class:normalizeClass(unref(pe).e("close"))},{default:withCtx(()=>[createVNode(unref(close_default))]),_:1},8,["class"])],10,["aria-label","onClick"])):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),unref(Ne)?(openBlock(),createElementBlock("div",{key:1,id:unref(Fe),class:normalizeClass(unref(pe).e("body"))},[renderSlot(Lt.$slots,"default")],10,["id"])):createCommentVNode("v-if",!0),Lt.$slots.footer?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(unref(pe).e("footer"))},[renderSlot(Lt.$slots,"footer")],2)):createCommentVNode("v-if",!0)],16,["aria-label","aria-labelledby","aria-describedby","onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[vShow,unref($e)]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var Drawer=_export_sfc$1(_sfc_main$1A,[["__file","drawer.vue"]]);const ElDrawer=withInstall(Drawer),_sfc_main$1z=defineComponent({inheritAttrs:!1});function _sfc_render$n(le,oe,ie,ue,de,he){return renderSlot(le.$slots,"default")}var Collection=_export_sfc$1(_sfc_main$1z,[["render",_sfc_render$n],["__file","collection.vue"]]);const _sfc_main$1y=defineComponent({name:"ElCollectionItem",inheritAttrs:!1});function _sfc_render$m(le,oe,ie,ue,de,he){return renderSlot(le.$slots,"default")}var CollectionItem=_export_sfc$1(_sfc_main$1y,[["render",_sfc_render$m],["__file","collection-item.vue"]]);const COLLECTION_ITEM_SIGN="data-el-collection-item",createCollectionWithScope=le=>{const oe=`El${le}Collection`,ie=`${oe}Item`,ue=Symbol(oe),de=Symbol(ie),he={...Collection,name:oe,setup(){const _e=ref(null),Ce=new Map;provide(ue,{itemMap:Ce,getItems:()=>{const Ie=unref(_e);if(!Ie)return[];const $e=Array.from(Ie.querySelectorAll(`[${COLLECTION_ITEM_SIGN}]`));return[...Ce.values()].sort((Oe,Fe)=>$e.indexOf(Oe.ref)-$e.indexOf(Fe.ref))},collectionRef:_e})}},pe={...CollectionItem,name:ie,setup(_e,{attrs:Ce}){const xe=ref(null),Ie=inject(ue,void 0);provide(de,{collectionItemRef:xe}),onMounted(()=>{const $e=unref(xe);$e&&Ie.itemMap.set($e,{ref:$e,...Ce})}),onBeforeUnmount(()=>{const $e=unref(xe);Ie.itemMap.delete($e)})}};return{COLLECTION_INJECTION_KEY:ue,COLLECTION_ITEM_INJECTION_KEY:de,ElCollection:he,ElCollectionItem:pe}},rovingFocusGroupProps=buildProps({style:{type:definePropType([String,Array,Object])},currentTabId:{type:definePropType(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:definePropType(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:ElCollection$1,ElCollectionItem:ElCollectionItem$1,COLLECTION_INJECTION_KEY:COLLECTION_INJECTION_KEY$1,COLLECTION_ITEM_INJECTION_KEY:COLLECTION_ITEM_INJECTION_KEY$1}=createCollectionWithScope("RovingFocusGroup"),ROVING_FOCUS_GROUP_INJECTION_KEY=Symbol("elRovingFocusGroup"),ROVING_FOCUS_GROUP_ITEM_INJECTION_KEY=Symbol("elRovingFocusGroupItem"),MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},getDirectionAwareKey=(le,oe)=>le,getFocusIntent=(le,oe,ie)=>{const ue=getDirectionAwareKey(le.key);return MAP_KEY_TO_FOCUS_INTENT[ue]},reorderArray=(le,oe)=>le.map((ie,ue)=>le[(ue+oe)%le.length]),focusFirst=le=>{const{activeElement:oe}=document;for(const ie of le)if(ie===oe||(ie.focus(),oe!==document.activeElement))return},CURRENT_TAB_ID_CHANGE_EVT="currentTabIdChange",ENTRY_FOCUS_EVT="rovingFocusGroup.entryFocus",EVT_OPTS={bubbles:!1,cancelable:!0},_sfc_main$1x=defineComponent({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:rovingFocusGroupProps,emits:[CURRENT_TAB_ID_CHANGE_EVT,"entryFocus"],setup(le,{emit:oe}){var ie;const ue=ref((ie=le.currentTabId||le.defaultCurrentTabId)!=null?ie:null),de=ref(!1),he=ref(!1),pe=ref(null),{getItems:_e}=inject(COLLECTION_INJECTION_KEY$1,void 0),Ce=computed(()=>[{outline:"none"},le.style]),xe=Ve=>{oe(CURRENT_TAB_ID_CHANGE_EVT,Ve)},Ie=()=>{de.value=!0},$e=composeEventHandlers(Ve=>{var ze;(ze=le.onMousedown)==null||ze.call(le,Ve)},()=>{he.value=!0}),Ne=composeEventHandlers(Ve=>{var ze;(ze=le.onFocus)==null||ze.call(le,Ve)},Ve=>{const ze=!unref(he),{target:Ue,currentTarget:Pt}=Ve;if(Ue===Pt&&ze&&!unref(de)){const qe=new Event(ENTRY_FOCUS_EVT,EVT_OPTS);if(Pt==null||Pt.dispatchEvent(qe),!qe.defaultPrevented){const Et=_e().filter(jt=>jt.focusable),kt=Et.find(jt=>jt.active),At=Et.find(jt=>jt.id===unref(ue)),Lt=[kt,At,...Et].filter(Boolean).map(jt=>jt.ref);focusFirst(Lt)}}he.value=!1}),Oe=composeEventHandlers(Ve=>{var ze;(ze=le.onBlur)==null||ze.call(le,Ve)},()=>{de.value=!1}),Fe=(...Ve)=>{oe("entryFocus",...Ve)};provide(ROVING_FOCUS_GROUP_INJECTION_KEY,{currentTabbedId:readonly(ue),loop:toRef(le,"loop"),tabIndex:computed(()=>unref(de)?-1:0),rovingFocusGroupRef:pe,rovingFocusGroupRootStyle:Ce,orientation:toRef(le,"orientation"),dir:toRef(le,"dir"),onItemFocus:xe,onItemShiftTab:Ie,onBlur:Oe,onFocus:Ne,onMousedown:$e}),watch(()=>le.currentTabId,Ve=>{ue.value=Ve??null}),useEventListener(pe,ENTRY_FOCUS_EVT,Fe)}});function _sfc_render$l(le,oe,ie,ue,de,he){return renderSlot(le.$slots,"default")}var ElRovingFocusGroupImpl=_export_sfc$1(_sfc_main$1x,[["render",_sfc_render$l],["__file","roving-focus-group-impl.vue"]]);const _sfc_main$1w=defineComponent({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:ElCollection$1,ElRovingFocusGroupImpl}});function _sfc_render$k(le,oe,ie,ue,de,he){const pe=resolveComponent("el-roving-focus-group-impl"),_e=resolveComponent("el-focus-group-collection");return openBlock(),createBlock(_e,null,{default:withCtx(()=>[createVNode(pe,normalizeProps(guardReactiveProps(le.$attrs)),{default:withCtx(()=>[renderSlot(le.$slots,"default")]),_:3},16)]),_:3})}var ElRovingFocusGroup=_export_sfc$1(_sfc_main$1w,[["render",_sfc_render$k],["__file","roving-focus-group.vue"]]);const _sfc_main$1v=defineComponent({components:{ElRovingFocusCollectionItem:ElCollectionItem$1},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(le,{emit:oe}){const{currentTabbedId:ie,loop:ue,onItemFocus:de,onItemShiftTab:he}=inject(ROVING_FOCUS_GROUP_INJECTION_KEY,void 0),{getItems:pe}=inject(COLLECTION_INJECTION_KEY$1,void 0),_e=useId(),Ce=ref(null),xe=composeEventHandlers(Oe=>{oe("mousedown",Oe)},Oe=>{le.focusable?de(unref(_e)):Oe.preventDefault()}),Ie=composeEventHandlers(Oe=>{oe("focus",Oe)},()=>{de(unref(_e))}),$e=composeEventHandlers(Oe=>{oe("keydown",Oe)},Oe=>{const{key:Fe,shiftKey:Ve,target:ze,currentTarget:Ue}=Oe;if(Fe===EVENT_CODE.tab&&Ve){he();return}if(ze!==Ue)return;const Pt=getFocusIntent(Oe);if(Pt){Oe.preventDefault();let Et=pe().filter(kt=>kt.focusable).map(kt=>kt.ref);switch(Pt){case"last":{Et.reverse();break}case"prev":case"next":{Pt==="prev"&&Et.reverse();const kt=Et.indexOf(Ue);Et=ue.value?reorderArray(Et,kt+1):Et.slice(kt+1);break}}nextTick(()=>{focusFirst(Et)})}}),Ne=computed(()=>ie.value===unref(_e));return provide(ROVING_FOCUS_GROUP_ITEM_INJECTION_KEY,{rovingFocusGroupItemRef:Ce,tabIndex:computed(()=>unref(Ne)?0:-1),handleMousedown:xe,handleFocus:Ie,handleKeydown:$e}),{id:_e,handleKeydown:$e,handleFocus:Ie,handleMousedown:xe}}});function _sfc_render$j(le,oe,ie,ue,de,he){const pe=resolveComponent("el-roving-focus-collection-item");return openBlock(),createBlock(pe,{id:le.id,focusable:le.focusable,active:le.active},{default:withCtx(()=>[renderSlot(le.$slots,"default")]),_:3},8,["id","focusable","active"])}var ElRovingFocusItem=_export_sfc$1(_sfc_main$1v,[["render",_sfc_render$j],["__file","roving-focus-item.vue"]]);const dropdownProps=buildProps({trigger:useTooltipTriggerProps.trigger,effect:{...useTooltipContentProps.effect,default:"light"},type:{type:definePropType(String)},placement:{type:definePropType(String),default:"bottom"},popperOptions:{type:definePropType(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:definePropType([Number,String]),default:0},maxHeight:{type:definePropType([Number,String]),default:""},popperClass:{type:String,default:""},disabled:Boolean,role:{type:String,default:"menu"},buttonProps:{type:definePropType(Object)},teleported:useTooltipContentProps.teleported}),dropdownItemProps=buildProps({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:iconPropType}}),dropdownMenuProps=buildProps({onKeydown:{type:definePropType(Function)}}),FIRST_KEYS=[EVENT_CODE.down,EVENT_CODE.pageDown,EVENT_CODE.home],LAST_KEYS=[EVENT_CODE.up,EVENT_CODE.pageUp,EVENT_CODE.end],FIRST_LAST_KEYS=[...FIRST_KEYS,...LAST_KEYS],{ElCollection,ElCollectionItem,COLLECTION_INJECTION_KEY,COLLECTION_ITEM_INJECTION_KEY}=createCollectionWithScope("Dropdown"),DROPDOWN_INJECTION_KEY=Symbol("elDropdown"),{ButtonGroup:ElButtonGroup}=ElButton,_sfc_main$1u=defineComponent({name:"ElDropdown",components:{ElButton,ElButtonGroup,ElScrollbar,ElDropdownCollection:ElCollection,ElTooltip,ElRovingFocusGroup,ElOnlyChild:OnlyChild,ElIcon,ArrowDown:arrow_down_default},props:dropdownProps,emits:["visible-change","click","command"],setup(le,{emit:oe}){const ie=getCurrentInstance(),ue=useNamespace("dropdown"),{t:de}=useLocale(),he=ref(),pe=ref(),_e=ref(null),Ce=ref(null),xe=ref(null),Ie=ref(null),$e=ref(!1),Ne=[EVENT_CODE.enter,EVENT_CODE.space,EVENT_CODE.down],Oe=computed(()=>({maxHeight:addUnit(le.maxHeight)})),Fe=computed(()=>[ue.m(kt.value)]),Ve=computed(()=>castArray$1(le.trigger)),ze=useId().value,Ue=computed(()=>le.id||ze);watch([he,Ve],([Sn,In],[En])=>{var xn,kn,On;(xn=En==null?void 0:En.$el)!=null&&xn.removeEventListener&&En.$el.removeEventListener("pointerenter",Dt),(kn=Sn==null?void 0:Sn.$el)!=null&&kn.removeEventListener&&Sn.$el.removeEventListener("pointerenter",Dt),(On=Sn==null?void 0:Sn.$el)!=null&&On.addEventListener&&In.includes("hover")&&Sn.$el.addEventListener("pointerenter",Dt)},{immediate:!0}),onBeforeUnmount(()=>{var Sn,In;(In=(Sn=he.value)==null?void 0:Sn.$el)!=null&&In.removeEventListener&&he.value.$el.removeEventListener("pointerenter",Dt)});function Pt(){qe()}function qe(){var Sn;(Sn=_e.value)==null||Sn.onClose()}function Et(){var Sn;(Sn=_e.value)==null||Sn.onOpen()}const kt=useFormSize();function At(...Sn){oe("command",...Sn)}function Dt(){var Sn,In;(In=(Sn=he.value)==null?void 0:Sn.$el)==null||In.focus()}function Lt(){}function jt(){const Sn=unref(Ce);Ve.value.includes("hover")&&(Sn==null||Sn.focus()),Ie.value=null}function _n(Sn){Ie.value=Sn}function bn(Sn){$e.value||(Sn.preventDefault(),Sn.stopImmediatePropagation())}function vn(){oe("visible-change",!0)}function Tn(Sn){(Sn==null?void 0:Sn.type)==="keydown"&&Ce.value.focus()}function $n(){oe("visible-change",!1)}return provide(DROPDOWN_INJECTION_KEY,{contentRef:Ce,role:computed(()=>le.role),triggerId:Ue,isUsingKeyboard:$e,onItemEnter:Lt,onItemLeave:jt}),provide("elDropdown",{instance:ie,dropdownSize:kt,handleClick:Pt,commandHandler:At,trigger:toRef(le,"trigger"),hideOnClick:toRef(le,"hideOnClick")}),{t:de,ns:ue,scrollbar:xe,wrapStyle:Oe,dropdownTriggerKls:Fe,dropdownSize:kt,triggerId:Ue,triggerKeys:Ne,currentTabId:Ie,handleCurrentTabIdChange:_n,handlerMainButtonClick:Sn=>{oe("click",Sn)},handleEntryFocus:bn,handleClose:qe,handleOpen:Et,handleBeforeShowTooltip:vn,handleShowTooltip:Tn,handleBeforeHideTooltip:$n,onFocusAfterTrapped:Sn=>{var In,En;Sn.preventDefault(),(En=(In=Ce.value)==null?void 0:In.focus)==null||En.call(In,{preventScroll:!0})},popperRef:_e,contentRef:Ce,triggeringElementRef:he,referenceElementRef:pe}}});function _sfc_render$i(le,oe,ie,ue,de,he){var pe;const _e=resolveComponent("el-dropdown-collection"),Ce=resolveComponent("el-roving-focus-group"),xe=resolveComponent("el-scrollbar"),Ie=resolveComponent("el-only-child"),$e=resolveComponent("el-tooltip"),Ne=resolveComponent("el-button"),Oe=resolveComponent("arrow-down"),Fe=resolveComponent("el-icon"),Ve=resolveComponent("el-button-group");return openBlock(),createElementBlock("div",{class:normalizeClass([le.ns.b(),le.ns.is("disabled",le.disabled)])},[createVNode($e,{ref:"popperRef",role:le.role,effect:le.effect,"fallback-placements":["bottom","top"],"popper-options":le.popperOptions,"gpu-acceleration":!1,"hide-after":le.trigger==="hover"?le.hideTimeout:0,"manual-mode":!0,placement:le.placement,"popper-class":[le.ns.e("popper"),le.popperClass],"reference-element":(pe=le.referenceElementRef)==null?void 0:pe.$el,trigger:le.trigger,"trigger-keys":le.triggerKeys,"trigger-target-el":le.contentRef,"show-after":le.trigger==="hover"?le.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":le.triggeringElementRef,"virtual-triggering":le.splitButton,disabled:le.disabled,transition:`${le.ns.namespace.value}-zoom-in-top`,teleported:le.teleported,pure:"",persistent:"",onBeforeShow:le.handleBeforeShowTooltip,onShow:le.handleShowTooltip,onBeforeHide:le.handleBeforeHideTooltip},createSlots({content:withCtx(()=>[createVNode(xe,{ref:"scrollbar","wrap-style":le.wrapStyle,tag:"div","view-class":le.ns.e("list")},{default:withCtx(()=>[createVNode(Ce,{loop:le.loop,"current-tab-id":le.currentTabId,orientation:"horizontal",onCurrentTabIdChange:le.handleCurrentTabIdChange,onEntryFocus:le.handleEntryFocus},{default:withCtx(()=>[createVNode(_e,null,{default:withCtx(()=>[renderSlot(le.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[le.splitButton?void 0:{name:"default",fn:withCtx(()=>[createVNode(Ie,{id:le.triggerId,ref:"triggeringElementRef",role:"button",tabindex:le.tabindex},{default:withCtx(()=>[renderSlot(le.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),le.splitButton?(openBlock(),createBlock(Ve,{key:0},{default:withCtx(()=>[createVNode(Ne,mergeProps({ref:"referenceElementRef"},le.buttonProps,{size:le.dropdownSize,type:le.type,disabled:le.disabled,tabindex:le.tabindex,onClick:le.handlerMainButtonClick}),{default:withCtx(()=>[renderSlot(le.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),createVNode(Ne,mergeProps({id:le.triggerId,ref:"triggeringElementRef"},le.buttonProps,{role:"button",size:le.dropdownSize,type:le.type,class:le.ns.e("caret-button"),disabled:le.disabled,tabindex:le.tabindex,"aria-label":le.t("el.dropdown.toggleDropdown")}),{default:withCtx(()=>[createVNode(Fe,{class:normalizeClass(le.ns.e("icon"))},{default:withCtx(()=>[createVNode(Oe)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):createCommentVNode("v-if",!0)],2)}var Dropdown=_export_sfc$1(_sfc_main$1u,[["render",_sfc_render$i],["__file","dropdown.vue"]]);const _sfc_main$1t=defineComponent({name:"DropdownItemImpl",components:{ElIcon},props:dropdownItemProps,emits:["pointermove","pointerleave","click","clickimpl"],setup(le,{emit:oe}){const ie=useNamespace("dropdown"),{role:ue}=inject(DROPDOWN_INJECTION_KEY,void 0),{collectionItemRef:de}=inject(COLLECTION_ITEM_INJECTION_KEY,void 0),{collectionItemRef:he}=inject(COLLECTION_ITEM_INJECTION_KEY$1,void 0),{rovingFocusGroupItemRef:pe,tabIndex:_e,handleFocus:Ce,handleKeydown:xe,handleMousedown:Ie}=inject(ROVING_FOCUS_GROUP_ITEM_INJECTION_KEY,void 0),$e=composeRefs(de,he,pe),Ne=computed(()=>ue.value==="menu"?"menuitem":ue.value==="navigation"?"link":"button"),Oe=composeEventHandlers(Fe=>{const{code:Ve}=Fe;if(Ve===EVENT_CODE.enter||Ve===EVENT_CODE.space)return Fe.preventDefault(),Fe.stopImmediatePropagation(),oe("clickimpl",Fe),!0},xe);return{ns:ie,itemRef:$e,dataset:{[COLLECTION_ITEM_SIGN]:""},role:Ne,tabIndex:_e,handleFocus:Ce,handleKeydown:Oe,handleMousedown:Ie}}});function _sfc_render$h(le,oe,ie,ue,de,he){const pe=resolveComponent("el-icon");return openBlock(),createElementBlock(Fragment,null,[le.divided?(openBlock(),createElementBlock("li",mergeProps({key:0,role:"separator",class:le.ns.bem("menu","item","divided")},le.$attrs),null,16)):createCommentVNode("v-if",!0),createBaseVNode("li",mergeProps({ref:le.itemRef},{...le.dataset,...le.$attrs},{"aria-disabled":le.disabled,class:[le.ns.be("menu","item"),le.ns.is("disabled",le.disabled)],tabindex:le.tabIndex,role:le.role,onClick:_e=>le.$emit("clickimpl",_e),onFocus:le.handleFocus,onKeydown:withModifiers(le.handleKeydown,["self"]),onMousedown:le.handleMousedown,onPointermove:_e=>le.$emit("pointermove",_e),onPointerleave:_e=>le.$emit("pointerleave",_e)}),[le.icon?(openBlock(),createBlock(pe,{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(le.icon)))]),_:1})):createCommentVNode("v-if",!0),renderSlot(le.$slots,"default")],16,["aria-disabled","tabindex","role","onClick","onFocus","onKeydown","onMousedown","onPointermove","onPointerleave"])],64)}var ElDropdownItemImpl=_export_sfc$1(_sfc_main$1t,[["render",_sfc_render$h],["__file","dropdown-item-impl.vue"]]);const useDropdown=()=>{const le=inject("elDropdown",{}),oe=computed(()=>le==null?void 0:le.dropdownSize);return{elDropdown:le,_elDropdownSize:oe}},_sfc_main$1s=defineComponent({name:"ElDropdownItem",components:{ElDropdownCollectionItem:ElCollectionItem,ElRovingFocusItem,ElDropdownItemImpl},inheritAttrs:!1,props:dropdownItemProps,emits:["pointermove","pointerleave","click"],setup(le,{emit:oe,attrs:ie}){const{elDropdown:ue}=useDropdown(),de=getCurrentInstance(),he=ref(null),pe=computed(()=>{var Oe,Fe;return(Fe=(Oe=unref(he))==null?void 0:Oe.textContent)!=null?Fe:""}),{onItemEnter:_e,onItemLeave:Ce}=inject(DROPDOWN_INJECTION_KEY,void 0),xe=composeEventHandlers(Oe=>(oe("pointermove",Oe),Oe.defaultPrevented),whenMouse(Oe=>{if(le.disabled){Ce(Oe);return}const Fe=Oe.currentTarget;Fe===document.activeElement||Fe.contains(document.activeElement)||(_e(Oe),Oe.defaultPrevented||Fe==null||Fe.focus())})),Ie=composeEventHandlers(Oe=>(oe("pointerleave",Oe),Oe.defaultPrevented),whenMouse(Ce)),$e=composeEventHandlers(Oe=>{if(!le.disabled)return oe("click",Oe),Oe.type!=="keydown"&&Oe.defaultPrevented},Oe=>{var Fe,Ve,ze;if(le.disabled){Oe.stopImmediatePropagation();return}(Fe=ue==null?void 0:ue.hideOnClick)!=null&&Fe.value&&((Ve=ue.handleClick)==null||Ve.call(ue)),(ze=ue.commandHandler)==null||ze.call(ue,le.command,de,Oe)}),Ne=computed(()=>({...le,...ie}));return{handleClick:$e,handlePointerMove:xe,handlePointerLeave:Ie,textContent:pe,propsAndAttrs:Ne}}});function _sfc_render$g(le,oe,ie,ue,de,he){var pe;const _e=resolveComponent("el-dropdown-item-impl"),Ce=resolveComponent("el-roving-focus-item"),xe=resolveComponent("el-dropdown-collection-item");return openBlock(),createBlock(xe,{disabled:le.disabled,"text-value":(pe=le.textValue)!=null?pe:le.textContent},{default:withCtx(()=>[createVNode(Ce,{focusable:!le.disabled},{default:withCtx(()=>[createVNode(_e,mergeProps(le.propsAndAttrs,{onPointerleave:le.handlePointerLeave,onPointermove:le.handlePointerMove,onClickimpl:le.handleClick}),{default:withCtx(()=>[renderSlot(le.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var DropdownItem=_export_sfc$1(_sfc_main$1s,[["render",_sfc_render$g],["__file","dropdown-item.vue"]]);const _sfc_main$1r=defineComponent({name:"ElDropdownMenu",props:dropdownMenuProps,setup(le){const oe=useNamespace("dropdown"),{_elDropdownSize:ie}=useDropdown(),ue=ie.value,{focusTrapRef:de,onKeydown:he}=inject(FOCUS_TRAP_INJECTION_KEY,void 0),{contentRef:pe,role:_e,triggerId:Ce}=inject(DROPDOWN_INJECTION_KEY,void 0),{collectionRef:xe,getItems:Ie}=inject(COLLECTION_INJECTION_KEY,void 0),{rovingFocusGroupRef:$e,rovingFocusGroupRootStyle:Ne,tabIndex:Oe,onBlur:Fe,onFocus:Ve,onMousedown:ze}=inject(ROVING_FOCUS_GROUP_INJECTION_KEY,void 0),{collectionRef:Ue}=inject(COLLECTION_INJECTION_KEY$1,void 0),Pt=computed(()=>[oe.b("menu"),oe.bm("menu",ue==null?void 0:ue.value)]),qe=composeRefs(pe,xe,de,$e,Ue),Et=composeEventHandlers(At=>{var Dt;(Dt=le.onKeydown)==null||Dt.call(le,At)},At=>{const{currentTarget:Dt,code:Lt,target:jt}=At;if(Dt.contains(jt),EVENT_CODE.tab===Lt&&At.stopImmediatePropagation(),At.preventDefault(),jt!==unref(pe)||!FIRST_LAST_KEYS.includes(Lt))return;const bn=Ie().filter(vn=>!vn.disabled).map(vn=>vn.ref);LAST_KEYS.includes(Lt)&&bn.reverse(),focusFirst(bn)});return{size:ue,rovingFocusGroupRootStyle:Ne,tabIndex:Oe,dropdownKls:Pt,role:_e,triggerId:Ce,dropdownListWrapperRef:qe,handleKeydown:At=>{Et(At),he(At)},onBlur:Fe,onFocus:Ve,onMousedown:ze}}});function _sfc_render$f(le,oe,ie,ue,de,he){return openBlock(),createElementBlock("ul",{ref:le.dropdownListWrapperRef,class:normalizeClass(le.dropdownKls),style:normalizeStyle(le.rovingFocusGroupRootStyle),tabindex:-1,role:le.role,"aria-labelledby":le.triggerId,onBlur:le.onBlur,onFocus:le.onFocus,onKeydown:withModifiers(le.handleKeydown,["self"]),onMousedown:withModifiers(le.onMousedown,["self"])},[renderSlot(le.$slots,"default")],46,["role","aria-labelledby","onBlur","onFocus","onKeydown","onMousedown"])}var DropdownMenu=_export_sfc$1(_sfc_main$1r,[["render",_sfc_render$f],["__file","dropdown-menu.vue"]]);const ElDropdown=withInstall(Dropdown,{DropdownItem,DropdownMenu}),ElDropdownItem=withNoopInstall(DropdownItem),ElDropdownMenu=withNoopInstall(DropdownMenu),__default__$V=defineComponent({name:"ImgEmpty"}),_sfc_main$1q=defineComponent({...__default__$V,setup(le){const oe=useNamespace("empty"),ie=useId();return(ue,de)=>(openBlock(),createElementBlock("svg",{viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[createBaseVNode("defs",null,[createBaseVNode("linearGradient",{id:`linearGradient-1-${unref(ie)}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},[createBaseVNode("stop",{"stop-color":`var(${unref(oe).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,["stop-color"]),createBaseVNode("stop",{"stop-color":`var(${unref(oe).cssVarBlockName("fill-color-4")})`,offset:"100%"},null,8,["stop-color"])],8,["id"]),createBaseVNode("linearGradient",{id:`linearGradient-2-${unref(ie)}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},[createBaseVNode("stop",{"stop-color":`var(${unref(oe).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,["stop-color"]),createBaseVNode("stop",{"stop-color":`var(${unref(oe).cssVarBlockName("fill-color-6")})`,offset:"100%"},null,8,["stop-color"])],8,["id"]),createBaseVNode("rect",{id:`path-3-${unref(ie)}`,x:"0",y:"0",width:"17",height:"36"},null,8,["id"])]),createBaseVNode("g",{id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},[createBaseVNode("g",{id:"B-type",transform:"translate(-1268.000000, -535.000000)"},[createBaseVNode("g",{id:"Group-2",transform:"translate(1268.000000, 535.000000)"},[createBaseVNode("path",{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:`var(${unref(oe).cssVarBlockName("fill-color-3")})`},null,8,["fill"]),createBaseVNode("polygon",{id:"Rectangle-Copy-14",fill:`var(${unref(oe).cssVarBlockName("fill-color-7")})`,transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,8,["fill"]),createBaseVNode("g",{id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},[createBaseVNode("polygon",{id:"Rectangle-Copy-10",fill:`var(${unref(oe).cssVarBlockName("fill-color-7")})`,transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,8,["fill"]),createBaseVNode("polygon",{id:"Rectangle-Copy-11",fill:`var(${unref(oe).cssVarBlockName("fill-color-5")})`,points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,8,["fill"]),createBaseVNode("rect",{id:"Rectangle-Copy-12",fill:`url(#linearGradient-1-${unref(ie)})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,["fill"]),createBaseVNode("polygon",{id:"Rectangle-Copy-13",fill:`var(${unref(oe).cssVarBlockName("fill-color-2")})`,transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,8,["fill"])]),createBaseVNode("rect",{id:"Rectangle-Copy-15",fill:`url(#linearGradient-2-${unref(ie)})`,x:"13",y:"45",width:"40",height:"36"},null,8,["fill"]),createBaseVNode("g",{id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"},[createBaseVNode("use",{id:"Mask",fill:`var(${unref(oe).cssVarBlockName("fill-color-8")})`,transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${unref(ie)}`},null,8,["fill","xlink:href"]),createBaseVNode("polygon",{id:"Rectangle-Copy",fill:`var(${unref(oe).cssVarBlockName("fill-color-9")})`,mask:`url(#mask-4-${unref(ie)})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 7 16.5"},null,8,["fill","mask"])]),createBaseVNode("polygon",{id:"Rectangle-Copy-18",fill:`var(${unref(oe).cssVarBlockName("fill-color-2")})`,transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,8,["fill"])])])])]))}});var ImgEmpty=_export_sfc$1(_sfc_main$1q,[["__file","img-empty.vue"]]);const emptyProps=buildProps({image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}}),__default__$U=defineComponent({name:"ElEmpty"}),_sfc_main$1p=defineComponent({...__default__$U,props:emptyProps,setup(le){const oe=le,{t:ie}=useLocale(),ue=useNamespace("empty"),de=computed(()=>oe.description||ie("el.table.emptyText")),he=computed(()=>({width:addUnit(oe.imageSize)}));return(pe,_e)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(ue).b())},[createBaseVNode("div",{class:normalizeClass(unref(ue).e("image")),style:normalizeStyle(unref(he))},[pe.image?(openBlock(),createElementBlock("img",{key:0,src:pe.image,ondragstart:"return false"},null,8,["src"])):renderSlot(pe.$slots,"image",{key:1},()=>[createVNode(ImgEmpty)])],6),createBaseVNode("div",{class:normalizeClass(unref(ue).e("description"))},[pe.$slots.description?renderSlot(pe.$slots,"description",{key:0}):(openBlock(),createElementBlock("p",{key:1},toDisplayString(unref(de)),1))],2),pe.$slots.default?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(ue).e("bottom"))},[renderSlot(pe.$slots,"default")],2)):createCommentVNode("v-if",!0)],2))}});var Empty=_export_sfc$1(_sfc_main$1p,[["__file","empty.vue"]]);const ElEmpty=withInstall(Empty),imageViewerProps=buildProps({urlList:{type:definePropType(Array),default:()=>mutable([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:definePropType(String)}}),imageViewerEmits={close:()=>!0,switch:le=>isNumber(le),rotate:le=>isNumber(le)},__default__$T=defineComponent({name:"ElImageViewer"}),_sfc_main$1o=defineComponent({...__default__$T,props:imageViewerProps,emits:imageViewerEmits,setup(le,{expose:oe,emit:ie}){var ue;const de=le,he={CONTAIN:{name:"contain",icon:markRaw(full_screen_default)},ORIGINAL:{name:"original",icon:markRaw(scale_to_original_default)}},{t:pe}=useLocale(),_e=useNamespace("image-viewer"),{nextZIndex:Ce}=useZIndex(),xe=ref(),Ie=ref([]),$e=effectScope(),Ne=ref(!0),Oe=ref(de.initialIndex),Fe=shallowRef(he.CONTAIN),Ve=ref({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),ze=ref((ue=de.zIndex)!=null?ue:Ce()),Ue=computed(()=>{const{urlList:xn}=de;return xn.length<=1}),Pt=computed(()=>Oe.value===0),qe=computed(()=>Oe.value===de.urlList.length-1),Et=computed(()=>de.urlList[Oe.value]),kt=computed(()=>[_e.e("btn"),_e.e("prev"),_e.is("disabled",!de.infinite&&Pt.value)]),At=computed(()=>[_e.e("btn"),_e.e("next"),_e.is("disabled",!de.infinite&&qe.value)]),Dt=computed(()=>{const{scale:xn,deg:kn,offsetX:On,offsetY:Mn,enableTransition:Un}=Ve.value;let zn=On/xn,Hn=Mn/xn;const Rn=kn*Math.PI/180,Jn=Math.cos(Rn),Qn=Math.sin(Rn);zn=zn*Jn+Hn*Qn,Hn=Hn*Jn-On/xn*Qn;const _r={transform:`scale(${xn}) rotate(${kn}deg) translate(${zn}px, ${Hn}px)`,transition:Un?"transform .3s":""};return Fe.value.name===he.CONTAIN.name&&(_r.maxWidth=_r.maxHeight="100%"),_r});function Lt(){_n(),ie("close")}function jt(){const xn=throttle(On=>{switch(On.code){case EVENT_CODE.esc:de.closeOnPressEscape&&Lt();break;case EVENT_CODE.space:wn();break;case EVENT_CODE.left:Sn();break;case EVENT_CODE.up:En("zoomIn");break;case EVENT_CODE.right:In();break;case EVENT_CODE.down:En("zoomOut");break}}),kn=throttle(On=>{const Mn=On.deltaY||On.deltaX;En(Mn<0?"zoomIn":"zoomOut",{zoomRate:de.zoomRate,enableTransition:!1})});$e.run(()=>{useEventListener(document,"keydown",xn),useEventListener(document,"wheel",kn)})}function _n(){$e.stop()}function bn(){Ne.value=!1}function vn(xn){Ne.value=!1,xn.target.alt=pe("el.image.error")}function Tn(xn){if(Ne.value||xn.button!==0||!xe.value)return;Ve.value.enableTransition=!1;const{offsetX:kn,offsetY:On}=Ve.value,Mn=xn.pageX,Un=xn.pageY,zn=throttle(Rn=>{Ve.value={...Ve.value,offsetX:kn+Rn.pageX-Mn,offsetY:On+Rn.pageY-Un}}),Hn=useEventListener(document,"mousemove",zn);useEventListener(document,"mouseup",()=>{Hn()}),xn.preventDefault()}function $n(){Ve.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function wn(){if(Ne.value)return;const xn=keysOf(he),kn=Object.values(he),On=Fe.value.name,Un=(kn.findIndex(zn=>zn.name===On)+1)%xn.length;Fe.value=he[xn[Un]],$n()}function Cn(xn){const kn=de.urlList.length;Oe.value=(xn+kn)%kn}function Sn(){Pt.value&&!de.infinite||Cn(Oe.value-1)}function In(){qe.value&&!de.infinite||Cn(Oe.value+1)}function En(xn,kn={}){if(Ne.value)return;const{minScale:On,maxScale:Mn}=de,{zoomRate:Un,rotateDeg:zn,enableTransition:Hn}={zoomRate:de.zoomRate,rotateDeg:90,enableTransition:!0,...kn};switch(xn){case"zoomOut":Ve.value.scale>On&&(Ve.value.scale=Number.parseFloat((Ve.value.scale/Un).toFixed(3)));break;case"zoomIn":Ve.value.scale<Mn&&(Ve.value.scale=Number.parseFloat((Ve.value.scale*Un).toFixed(3)));break;case"clockwise":Ve.value.deg+=zn,ie("rotate",Ve.value.deg);break;case"anticlockwise":Ve.value.deg-=zn,ie("rotate",Ve.value.deg);break}Ve.value.enableTransition=Hn}return watch(Et,()=>{nextTick(()=>{const xn=Ie.value[0];xn!=null&&xn.complete||(Ne.value=!0)})}),watch(Oe,xn=>{$n(),ie("switch",xn)}),onMounted(()=>{var xn,kn;jt(),(kn=(xn=xe.value)==null?void 0:xn.focus)==null||kn.call(xn)}),oe({setActiveItem:Cn}),(xn,kn)=>(openBlock(),createBlock(unref(ElTeleport),{to:"body",disabled:!xn.teleported},{default:withCtx(()=>[createVNode(Transition,{name:"viewer-fade",appear:""},{default:withCtx(()=>[createBaseVNode("div",{ref_key:"wrapper",ref:xe,tabindex:-1,class:normalizeClass(unref(_e).e("wrapper")),style:normalizeStyle({zIndex:ze.value})},[createBaseVNode("div",{class:normalizeClass(unref(_e).e("mask")),onClick:withModifiers(On=>xn.hideOnClickModal&&Lt(),["self"])},null,10,["onClick"]),createCommentVNode(" CLOSE "),createBaseVNode("span",{class:normalizeClass([unref(_e).e("btn"),unref(_e).e("close")]),onClick:Lt},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(close_default))]),_:1})],2),createCommentVNode(" ARROW "),unref(Ue)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("span",{class:normalizeClass(unref(kt)),onClick:Sn},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_left_default))]),_:1})],2),createBaseVNode("span",{class:normalizeClass(unref(At)),onClick:In},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1})],2)],64)),createCommentVNode(" ACTIONS "),createBaseVNode("div",{class:normalizeClass([unref(_e).e("btn"),unref(_e).e("actions")])},[createBaseVNode("div",{class:normalizeClass(unref(_e).e("actions__inner"))},[createVNode(unref(ElIcon),{onClick:On=>En("zoomOut")},{default:withCtx(()=>[createVNode(unref(zoom_out_default))]),_:1},8,["onClick"]),createVNode(unref(ElIcon),{onClick:On=>En("zoomIn")},{default:withCtx(()=>[createVNode(unref(zoom_in_default))]),_:1},8,["onClick"]),createBaseVNode("i",{class:normalizeClass(unref(_e).e("actions__divider"))},null,2),createVNode(unref(ElIcon),{onClick:wn},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(Fe).icon)))]),_:1}),createBaseVNode("i",{class:normalizeClass(unref(_e).e("actions__divider"))},null,2),createVNode(unref(ElIcon),{onClick:On=>En("anticlockwise")},{default:withCtx(()=>[createVNode(unref(refresh_left_default))]),_:1},8,["onClick"]),createVNode(unref(ElIcon),{onClick:On=>En("clockwise")},{default:withCtx(()=>[createVNode(unref(refresh_right_default))]),_:1},8,["onClick"])],2)],2),createCommentVNode(" CANVAS "),createBaseVNode("div",{class:normalizeClass(unref(_e).e("canvas"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(xn.urlList,(On,Mn)=>withDirectives((openBlock(),createElementBlock("img",{ref_for:!0,ref:Un=>Ie.value[Mn]=Un,key:On,src:On,style:normalizeStyle(unref(Dt)),class:normalizeClass(unref(_e).e("img")),crossorigin:xn.crossorigin,onLoad:bn,onError:vn,onMousedown:Tn},null,46,["src","crossorigin"])),[[vShow,Mn===Oe.value]])),128))],2),renderSlot(xn.$slots,"default")],6)]),_:3})]),_:3},8,["disabled"]))}});var ImageViewer=_export_sfc$1(_sfc_main$1o,[["__file","image-viewer.vue"]]);const ElImageViewer=withInstall(ImageViewer),imageProps=buildProps({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:definePropType([String,Object])},previewSrcList:{type:definePropType(Array),default:()=>mutable([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:definePropType(String)}}),imageEmits={load:le=>le instanceof Event,error:le=>le instanceof Event,switch:le=>isNumber(le),close:()=>!0,show:()=>!0},__default__$S=defineComponent({name:"ElImage",inheritAttrs:!1}),_sfc_main$1n=defineComponent({...__default__$S,props:imageProps,emits:imageEmits,setup(le,{emit:oe}){const ie=le;let ue="";const{t:de}=useLocale(),he=useNamespace("image"),pe=useAttrs$1(),_e=computed(()=>fromPairs(Object.entries(pe).filter(([In])=>/^(data-|on[A-Z])/i.test(In)||["id","style"].includes(In)))),Ce=useAttrs({excludeListeners:!0,excludeKeys:computed(()=>Object.keys(_e.value))}),xe=ref(),Ie=ref(!1),$e=ref(!0),Ne=ref(!1),Oe=ref(),Fe=ref(),Ve=isClient&&"loading"in HTMLImageElement.prototype;let ze,Ue;const Pt=computed(()=>[he.e("inner"),Et.value&&he.e("preview"),$e.value&&he.is("loading")]),qe=computed(()=>{const{fit:In}=ie;return isClient&&In?{objectFit:In}:{}}),Et=computed(()=>{const{previewSrcList:In}=ie;return Array.isArray(In)&&In.length>0}),kt=computed(()=>{const{previewSrcList:In,initialIndex:En}=ie;let xn=En;return En>In.length-1&&(xn=0),xn}),At=computed(()=>ie.loading==="eager"?!1:!Ve&&ie.loading==="lazy"||ie.lazy),Dt=()=>{isClient&&($e.value=!0,Ie.value=!1,xe.value=ie.src)};function Lt(In){$e.value=!1,Ie.value=!1,oe("load",In)}function jt(In){$e.value=!1,Ie.value=!0,oe("error",In)}function _n(){isInContainer(Oe.value,Fe.value)&&(Dt(),Tn())}const bn=useThrottleFn(_n,200,!0);async function vn(){var In;if(!isClient)return;await nextTick();const{scrollContainer:En}=ie;isElement$1(En)?Fe.value=En:isString$1(En)&&En!==""?Fe.value=(In=document.querySelector(En))!=null?In:void 0:Oe.value&&(Fe.value=getScrollContainer(Oe.value)),Fe.value&&(ze=useEventListener(Fe,"scroll",bn),setTimeout(()=>_n(),100))}function Tn(){!isClient||!Fe.value||!bn||(ze==null||ze(),Fe.value=void 0)}function $n(In){if(In.ctrlKey){if(In.deltaY<0)return In.preventDefault(),!1;if(In.deltaY>0)return In.preventDefault(),!1}}function wn(){Et.value&&(Ue=useEventListener("wheel",$n,{passive:!1}),ue=document.body.style.overflow,document.body.style.overflow="hidden",Ne.value=!0,oe("show"))}function Cn(){Ue==null||Ue(),document.body.style.overflow=ue,Ne.value=!1,oe("close")}function Sn(In){oe("switch",In)}return watch(()=>ie.src,()=>{At.value?($e.value=!0,Ie.value=!1,Tn(),vn()):Dt()}),onMounted(()=>{At.value?vn():Dt()}),(In,En)=>(openBlock(),createElementBlock("div",mergeProps({ref_key:"container",ref:Oe},unref(_e),{class:[unref(he).b(),In.$attrs.class]}),[Ie.value?renderSlot(In.$slots,"error",{key:0},()=>[createBaseVNode("div",{class:normalizeClass(unref(he).e("error"))},toDisplayString(unref(de)("el.image.error")),3)]):(openBlock(),createElementBlock(Fragment,{key:1},[xe.value!==void 0?(openBlock(),createElementBlock("img",mergeProps({key:0},unref(Ce),{src:xe.value,loading:In.loading,style:unref(qe),class:unref(Pt),crossorigin:In.crossorigin,onClick:wn,onLoad:Lt,onError:jt}),null,16,["src","loading","crossorigin"])):createCommentVNode("v-if",!0),$e.value?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(he).e("wrapper"))},[renderSlot(In.$slots,"placeholder",{},()=>[createBaseVNode("div",{class:normalizeClass(unref(he).e("placeholder"))},null,2)])],2)):createCommentVNode("v-if",!0)],64)),unref(Et)?(openBlock(),createElementBlock(Fragment,{key:2},[Ne.value?(openBlock(),createBlock(unref(ElImageViewer),{key:0,"z-index":In.zIndex,"initial-index":unref(kt),infinite:In.infinite,"zoom-rate":In.zoomRate,"min-scale":In.minScale,"max-scale":In.maxScale,"url-list":In.previewSrcList,crossorigin:In.crossorigin,"hide-on-click-modal":In.hideOnClickModal,teleported:In.previewTeleported,"close-on-press-escape":In.closeOnPressEscape,onClose:Cn,onSwitch:Sn},{default:withCtx(()=>[In.$slots.viewer?(openBlock(),createElementBlock("div",{key:0},[renderSlot(In.$slots,"viewer")])):createCommentVNode("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):createCommentVNode("v-if",!0)],64)):createCommentVNode("v-if",!0)],16))}});var Image$1=_export_sfc$1(_sfc_main$1n,[["__file","image.vue"]]);const ElImage=withInstall(Image$1),inputNumberProps=buildProps({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:useSizeProp,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:le=>le===null||isNumber(le)||["min","max"].includes(le),default:null},name:String,placeholder:String,precision:{type:Number,validator:le=>le>=0&&le===Number.parseInt(`${le}`,10)},validateEvent:{type:Boolean,default:!0},...useAriaProps(["ariaLabel"])}),inputNumberEmits={[CHANGE_EVENT]:(le,oe)=>oe!==le,blur:le=>le instanceof FocusEvent,focus:le=>le instanceof FocusEvent,[INPUT_EVENT]:le=>isNumber(le)||isNil(le),[UPDATE_MODEL_EVENT]:le=>isNumber(le)||isNil(le)},__default__$R=defineComponent({name:"ElInputNumber"}),_sfc_main$1m=defineComponent({...__default__$R,props:inputNumberProps,emits:inputNumberEmits,setup(le,{expose:oe,emit:ie}){const ue=le,{t:de}=useLocale(),he=useNamespace("input-number"),pe=ref(),_e=reactive({currentValue:ue.modelValue,userInput:null}),{formItem:Ce}=useFormItem(),xe=computed(()=>isNumber(ue.modelValue)&&ue.modelValue<=ue.min),Ie=computed(()=>isNumber(ue.modelValue)&&ue.modelValue>=ue.max),$e=computed(()=>{const wn=Ue(ue.step);return isUndefined(ue.precision)?Math.max(Ue(ue.modelValue),wn):(wn>ue.precision,ue.precision)}),Ne=computed(()=>ue.controls&&ue.controlsPosition==="right"),Oe=useFormSize(),Fe=useFormDisabled(),Ve=computed(()=>{if(_e.userInput!==null)return _e.userInput;let wn=_e.currentValue;if(isNil(wn))return"";if(isNumber(wn)){if(Number.isNaN(wn))return"";isUndefined(ue.precision)||(wn=wn.toFixed(ue.precision))}return wn}),ze=(wn,Cn)=>{if(isUndefined(Cn)&&(Cn=$e.value),Cn===0)return Math.round(wn);let Sn=String(wn);const In=Sn.indexOf(".");if(In===-1||!Sn.replace(".","").split("")[In+Cn])return wn;const kn=Sn.length;return Sn.charAt(kn-1)==="5"&&(Sn=`${Sn.slice(0,Math.max(0,kn-1))}6`),Number.parseFloat(Number(Sn).toFixed(Cn))},Ue=wn=>{if(isNil(wn))return 0;const Cn=wn.toString(),Sn=Cn.indexOf(".");let In=0;return Sn!==-1&&(In=Cn.length-Sn-1),In},Pt=(wn,Cn=1)=>isNumber(wn)?ze(wn+ue.step*Cn):_e.currentValue,qe=()=>{if(ue.readonly||Fe.value||Ie.value)return;const wn=Number(Ve.value)||0,Cn=Pt(wn);At(Cn),ie(INPUT_EVENT,_e.currentValue),Tn()},Et=()=>{if(ue.readonly||Fe.value||xe.value)return;const wn=Number(Ve.value)||0,Cn=Pt(wn,-1);At(Cn),ie(INPUT_EVENT,_e.currentValue),Tn()},kt=(wn,Cn)=>{const{max:Sn,min:In,step:En,precision:xn,stepStrictly:kn,valueOnClear:On}=ue;Sn<In&&throwError("InputNumber","min should not be greater than max.");let Mn=Number(wn);if(isNil(wn)||Number.isNaN(Mn))return null;if(wn===""){if(On===null)return null;Mn=isString$1(On)?{min:In,max:Sn}[On]:On}return kn&&(Mn=ze(Math.round(Mn/En)*En,xn),Mn!==wn&&Cn&&ie(UPDATE_MODEL_EVENT,Mn)),isUndefined(xn)||(Mn=ze(Mn,xn)),(Mn>Sn||Mn<In)&&(Mn=Mn>Sn?Sn:In,Cn&&ie(UPDATE_MODEL_EVENT,Mn)),Mn},At=(wn,Cn=!0)=>{var Sn;const In=_e.currentValue,En=kt(wn);if(!Cn){ie(UPDATE_MODEL_EVENT,En);return}In===En&&wn||(_e.userInput=null,ie(UPDATE_MODEL_EVENT,En),In!==En&&ie(CHANGE_EVENT,En,In),ue.validateEvent&&((Sn=Ce==null?void 0:Ce.validate)==null||Sn.call(Ce,"change").catch(xn=>void 0)),_e.currentValue=En)},Dt=wn=>{_e.userInput=wn;const Cn=wn===""?null:Number(wn);ie(INPUT_EVENT,Cn),At(Cn,!1)},Lt=wn=>{const Cn=wn!==""?Number(wn):"";(isNumber(Cn)&&!Number.isNaN(Cn)||wn==="")&&At(Cn),Tn(),_e.userInput=null},jt=()=>{var wn,Cn;(Cn=(wn=pe.value)==null?void 0:wn.focus)==null||Cn.call(wn)},_n=()=>{var wn,Cn;(Cn=(wn=pe.value)==null?void 0:wn.blur)==null||Cn.call(wn)},bn=wn=>{ie("focus",wn)},vn=wn=>{var Cn;_e.userInput=null,ie("blur",wn),ue.validateEvent&&((Cn=Ce==null?void 0:Ce.validate)==null||Cn.call(Ce,"blur").catch(Sn=>void 0))},Tn=()=>{_e.currentValue!==ue.modelValue&&(_e.currentValue=ue.modelValue)},$n=wn=>{document.activeElement===wn.target&&wn.preventDefault()};return watch(()=>ue.modelValue,(wn,Cn)=>{const Sn=kt(wn,!0);_e.userInput===null&&Sn!==Cn&&(_e.currentValue=Sn)},{immediate:!0}),onMounted(()=>{var wn;const{min:Cn,max:Sn,modelValue:In}=ue,En=(wn=pe.value)==null?void 0:wn.input;if(En.setAttribute("role","spinbutton"),Number.isFinite(Sn)?En.setAttribute("aria-valuemax",String(Sn)):En.removeAttribute("aria-valuemax"),Number.isFinite(Cn)?En.setAttribute("aria-valuemin",String(Cn)):En.removeAttribute("aria-valuemin"),En.setAttribute("aria-valuenow",_e.currentValue||_e.currentValue===0?String(_e.currentValue):""),En.setAttribute("aria-disabled",String(Fe.value)),!isNumber(In)&&In!=null){let xn=Number(In);Number.isNaN(xn)&&(xn=null),ie(UPDATE_MODEL_EVENT,xn)}En.addEventListener("wheel",$n,{passive:!1})}),onUpdated(()=>{var wn,Cn;const Sn=(wn=pe.value)==null?void 0:wn.input;Sn==null||Sn.setAttribute("aria-valuenow",`${(Cn=_e.currentValue)!=null?Cn:""}`)}),oe({focus:jt,blur:_n}),(wn,Cn)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(he).b(),unref(he).m(unref(Oe)),unref(he).is("disabled",unref(Fe)),unref(he).is("without-controls",!wn.controls),unref(he).is("controls-right",unref(Ne))]),onDragstart:withModifiers(()=>{},["prevent"])},[wn.controls?withDirectives((openBlock(),createElementBlock("span",{key:0,role:"button","aria-label":unref(de)("el.inputNumber.decrease"),class:normalizeClass([unref(he).e("decrease"),unref(he).is("disabled",unref(xe))]),onKeydown:withKeys(Et,["enter"])},[renderSlot(wn.$slots,"decrease-icon",{},()=>[createVNode(unref(ElIcon),null,{default:withCtx(()=>[unref(Ne)?(openBlock(),createBlock(unref(arrow_down_default),{key:0})):(openBlock(),createBlock(unref(minus_default),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[unref(vRepeatClick),Et]]):createCommentVNode("v-if",!0),wn.controls?withDirectives((openBlock(),createElementBlock("span",{key:1,role:"button","aria-label":unref(de)("el.inputNumber.increase"),class:normalizeClass([unref(he).e("increase"),unref(he).is("disabled",unref(Ie))]),onKeydown:withKeys(qe,["enter"])},[renderSlot(wn.$slots,"increase-icon",{},()=>[createVNode(unref(ElIcon),null,{default:withCtx(()=>[unref(Ne)?(openBlock(),createBlock(unref(arrow_up_default),{key:0})):(openBlock(),createBlock(unref(plus_default),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[unref(vRepeatClick),qe]]):createCommentVNode("v-if",!0),createVNode(unref(ElInput),{id:wn.id,ref_key:"input",ref:pe,type:"number",step:wn.step,"model-value":unref(Ve),placeholder:wn.placeholder,readonly:wn.readonly,disabled:unref(Fe),size:unref(Oe),max:wn.max,min:wn.min,name:wn.name,"aria-label":wn.ariaLabel,"validate-event":!1,onKeydown:[withKeys(withModifiers(qe,["prevent"]),["up"]),withKeys(withModifiers(Et,["prevent"]),["down"])],onBlur:vn,onFocus:bn,onInput:Dt,onChange:Lt},createSlots({_:2},[wn.$slots.prefix?{name:"prefix",fn:withCtx(()=>[renderSlot(wn.$slots,"prefix")])}:void 0,wn.$slots.suffix?{name:"suffix",fn:withCtx(()=>[renderSlot(wn.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],42,["onDragstart"]))}});var InputNumber=_export_sfc$1(_sfc_main$1m,[["__file","input-number.vue"]]);const ElInputNumber=withInstall(InputNumber),linkProps=buildProps({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:Boolean,href:{type:String,default:""},target:{type:String,default:"_self"},icon:{type:iconPropType}}),linkEmits={click:le=>le instanceof MouseEvent},__default__$Q=defineComponent({name:"ElLink"}),_sfc_main$1l=defineComponent({...__default__$Q,props:linkProps,emits:linkEmits,setup(le,{emit:oe}){const ie=le,ue=useNamespace("link"),de=computed(()=>[ue.b(),ue.m(ie.type),ue.is("disabled",ie.disabled),ue.is("underline",ie.underline&&!ie.disabled)]);function he(pe){ie.disabled||oe("click",pe)}return(pe,_e)=>(openBlock(),createElementBlock("a",{class:normalizeClass(unref(de)),href:pe.disabled||!pe.href?void 0:pe.href,target:pe.disabled||!pe.href?void 0:pe.target,onClick:he},[pe.icon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(pe.icon)))]),_:1})):createCommentVNode("v-if",!0),pe.$slots.default?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(ue).e("inner"))},[renderSlot(pe.$slots,"default")],2)):createCommentVNode("v-if",!0),pe.$slots.icon?renderSlot(pe.$slots,"icon",{key:2}):createCommentVNode("v-if",!0)],10,["href","target"]))}});var Link=_export_sfc$1(_sfc_main$1l,[["__file","link.vue"]]);const ElLink=withInstall(Link);let SubMenu$1=class{constructor(oe,ie){this.parent=oe,this.domNode=ie,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(oe){oe===this.subMenuItems.length?oe=0:oe<0&&(oe=this.subMenuItems.length-1),this.subMenuItems[oe].focus(),this.subIndex=oe}addListeners(){const oe=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,ie=>{ie.addEventListener("keydown",ue=>{let de=!1;switch(ue.code){case EVENT_CODE.down:{this.gotoSubIndex(this.subIndex+1),de=!0;break}case EVENT_CODE.up:{this.gotoSubIndex(this.subIndex-1),de=!0;break}case EVENT_CODE.tab:{triggerEvent(oe,"mouseleave");break}case EVENT_CODE.enter:case EVENT_CODE.space:{de=!0,ue.currentTarget.click();break}}return de&&(ue.preventDefault(),ue.stopPropagation()),!1})})}},MenuItem$1=class{constructor(oe,ie){this.domNode=oe,this.submenu=null,this.submenu=null,this.init(ie)}init(oe){this.domNode.setAttribute("tabindex","0");const ie=this.domNode.querySelector(`.${oe}-menu`);ie&&(this.submenu=new SubMenu$1(this,ie)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",oe=>{let ie=!1;switch(oe.code){case EVENT_CODE.down:{triggerEvent(oe.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),ie=!0;break}case EVENT_CODE.up:{triggerEvent(oe.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),ie=!0;break}case EVENT_CODE.tab:{triggerEvent(oe.currentTarget,"mouseleave");break}case EVENT_CODE.enter:case EVENT_CODE.space:{ie=!0,oe.currentTarget.click();break}}ie&&oe.preventDefault()})}},Menu$1=class{constructor(oe,ie){this.domNode=oe,this.init(ie)}init(oe){const ie=this.domNode.childNodes;Array.from(ie).forEach(ue=>{ue.nodeType===1&&new MenuItem$1(ue,oe)})}};const _sfc_main$1k=defineComponent({name:"ElMenuCollapseTransition",setup(){const le=useNamespace("menu");return{listeners:{onBeforeEnter:ie=>ie.style.opacity="0.2",onEnter(ie,ue){addClass(ie,`${le.namespace.value}-opacity-transition`),ie.style.opacity="1",ue()},onAfterEnter(ie){removeClass(ie,`${le.namespace.value}-opacity-transition`),ie.style.opacity=""},onBeforeLeave(ie){ie.dataset||(ie.dataset={}),hasClass(ie,le.m("collapse"))?(removeClass(ie,le.m("collapse")),ie.dataset.oldOverflow=ie.style.overflow,ie.dataset.scrollWidth=ie.clientWidth.toString(),addClass(ie,le.m("collapse"))):(addClass(ie,le.m("collapse")),ie.dataset.oldOverflow=ie.style.overflow,ie.dataset.scrollWidth=ie.clientWidth.toString(),removeClass(ie,le.m("collapse"))),ie.style.width=`${ie.scrollWidth}px`,ie.style.overflow="hidden"},onLeave(ie){addClass(ie,"horizontal-collapse-transition"),ie.style.width=`${ie.dataset.scrollWidth}px`}}}}});function _sfc_render$e(le,oe,ie,ue,de,he){return openBlock(),createBlock(Transition,mergeProps({mode:"out-in"},le.listeners),{default:withCtx(()=>[renderSlot(le.$slots,"default")]),_:3},16)}var ElMenuCollapseTransition=_export_sfc$1(_sfc_main$1k,[["render",_sfc_render$e],["__file","menu-collapse-transition.vue"]]);function useMenu(le,oe){const ie=computed(()=>{let de=le.parent;const he=[oe.value];for(;de.type.name!=="ElMenu";)de.props.index&&he.unshift(de.props.index),de=de.parent;return he});return{parentMenu:computed(()=>{let de=le.parent;for(;de&&!["ElMenu","ElSubMenu"].includes(de.type.name);)de=de.parent;return de}),indexPath:ie}}function useMenuColor(le){return computed(()=>{const ie=le.backgroundColor;return ie?new TinyColor(ie).shade(20).toString():""})}const useMenuCssVar=(le,oe)=>{const ie=useNamespace("menu");return computed(()=>ie.cssVarBlock({"text-color":le.textColor||"","hover-text-color":le.textColor||"","bg-color":le.backgroundColor||"","hover-bg-color":useMenuColor(le).value||"","active-color":le.activeTextColor||"",level:`${oe}`}))},subMenuProps=buildProps({index:{type:String,required:!0},showTimeout:Number,hideTimeout:Number,popperClass:String,disabled:Boolean,teleported:{type:Boolean,default:void 0},popperOffset:Number,expandCloseIcon:{type:iconPropType},expandOpenIcon:{type:iconPropType},collapseCloseIcon:{type:iconPropType},collapseOpenIcon:{type:iconPropType}}),COMPONENT_NAME$c="ElSubMenu";var SubMenu=defineComponent({name:COMPONENT_NAME$c,props:subMenuProps,setup(le,{slots:oe,expose:ie}){const ue=getCurrentInstance(),{indexPath:de,parentMenu:he}=useMenu(ue,computed(()=>le.index)),pe=useNamespace("menu"),_e=useNamespace("sub-menu"),Ce=inject("rootMenu");Ce||throwError(COMPONENT_NAME$c,"can not inject root menu");const xe=inject(`subMenu:${he.value.uid}`);xe||throwError(COMPONENT_NAME$c,"can not inject sub menu");const Ie=ref({}),$e=ref({});let Ne;const Oe=ref(!1),Fe=ref(),Ve=ref(null),ze=computed(()=>Lt.value==="horizontal"&&Pt.value?"bottom-start":"right-start"),Ue=computed(()=>Lt.value==="horizontal"&&Pt.value||Lt.value==="vertical"&&!Ce.props.collapse?le.expandCloseIcon&&le.expandOpenIcon?At.value?le.expandOpenIcon:le.expandCloseIcon:arrow_down_default:le.collapseCloseIcon&&le.collapseOpenIcon?At.value?le.collapseOpenIcon:le.collapseCloseIcon:arrow_right_default),Pt=computed(()=>xe.level===0),qe=computed(()=>{const xn=le.teleported;return xn===void 0?Pt.value:xn}),Et=computed(()=>Ce.props.collapse?`${pe.namespace.value}-zoom-in-left`:`${pe.namespace.value}-zoom-in-top`),kt=computed(()=>Lt.value==="horizontal"&&Pt.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),At=computed(()=>Ce.openedMenus.includes(le.index)),Dt=computed(()=>{let xn=!1;return Object.values(Ie.value).forEach(kn=>{kn.active&&(xn=!0)}),Object.values($e.value).forEach(kn=>{kn.active&&(xn=!0)}),xn}),Lt=computed(()=>Ce.props.mode),jt=reactive({index:le.index,indexPath:de,active:Dt}),_n=useMenuCssVar(Ce.props,xe.level+1),bn=computed(()=>{var xn;return(xn=le.popperOffset)!=null?xn:Ce.props.popperOffset}),vn=computed(()=>{var xn;return(xn=le.popperClass)!=null?xn:Ce.props.popperClass}),Tn=computed(()=>{var xn;return(xn=le.showTimeout)!=null?xn:Ce.props.showTimeout}),$n=computed(()=>{var xn;return(xn=le.hideTimeout)!=null?xn:Ce.props.hideTimeout}),wn=()=>{var xn,kn,On;return(On=(kn=(xn=Ve.value)==null?void 0:xn.popperRef)==null?void 0:kn.popperInstanceRef)==null?void 0:On.destroy()},Cn=xn=>{xn||wn()},Sn=()=>{Ce.props.menuTrigger==="hover"&&Ce.props.mode==="horizontal"||Ce.props.collapse&&Ce.props.mode==="vertical"||le.disabled||Ce.handleSubMenuClick({index:le.index,indexPath:de.value,active:Dt.value})},In=(xn,kn=Tn.value)=>{var On;if(xn.type!=="focus"){if(Ce.props.menuTrigger==="click"&&Ce.props.mode==="horizontal"||!Ce.props.collapse&&Ce.props.mode==="vertical"||le.disabled){xe.mouseInChild.value=!0;return}xe.mouseInChild.value=!0,Ne==null||Ne(),{stop:Ne}=useTimeoutFn(()=>{Ce.openMenu(le.index,de.value)},kn),qe.value&&((On=he.value.vnode.el)==null||On.dispatchEvent(new MouseEvent("mouseenter")))}},En=(xn=!1)=>{var kn;if(Ce.props.menuTrigger==="click"&&Ce.props.mode==="horizontal"||!Ce.props.collapse&&Ce.props.mode==="vertical"){xe.mouseInChild.value=!1;return}Ne==null||Ne(),xe.mouseInChild.value=!1,{stop:Ne}=useTimeoutFn(()=>!Oe.value&&Ce.closeMenu(le.index,de.value),$n.value),qe.value&&xn&&((kn=xe.handleMouseleave)==null||kn.call(xe,!0))};watch(()=>Ce.props.collapse,xn=>Cn(!!xn));{const xn=On=>{$e.value[On.index]=On},kn=On=>{delete $e.value[On.index]};provide(`subMenu:${ue.uid}`,{addSubMenu:xn,removeSubMenu:kn,handleMouseleave:En,mouseInChild:Oe,level:xe.level+1})}return ie({opened:At}),onMounted(()=>{Ce.addSubMenu(jt),xe.addSubMenu(jt)}),onBeforeUnmount(()=>{xe.removeSubMenu(jt),Ce.removeSubMenu(jt)}),()=>{var xn;const kn=[(xn=oe.title)==null?void 0:xn.call(oe),h$3(ElIcon,{class:_e.e("icon-arrow"),style:{transform:At.value?le.expandCloseIcon&&le.expandOpenIcon||le.collapseCloseIcon&&le.collapseOpenIcon&&Ce.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>isString$1(Ue.value)?h$3(ue.appContext.components[Ue.value]):h$3(Ue.value)})],On=Ce.isMenuPopup?h$3(ElTooltip,{ref:Ve,visible:At.value,effect:"light",pure:!0,offset:bn.value,showArrow:!1,persistent:!0,popperClass:vn.value,placement:ze.value,teleported:qe.value,fallbackPlacements:kt.value,transition:Et.value,gpuAcceleration:!1},{content:()=>{var Mn;return h$3("div",{class:[pe.m(Lt.value),pe.m("popup-container"),vn.value],onMouseenter:Un=>In(Un,100),onMouseleave:()=>En(!0),onFocus:Un=>In(Un,100)},[h$3("ul",{class:[pe.b(),pe.m("popup"),pe.m(`popup-${ze.value}`)],style:_n.value},[(Mn=oe.default)==null?void 0:Mn.call(oe)])])},default:()=>h$3("div",{class:_e.e("title"),onClick:Sn},kn)}):h$3(Fragment,{},[h$3("div",{class:_e.e("title"),ref:Fe,onClick:Sn},kn),h$3(ElCollapseTransition,{},{default:()=>{var Mn;return withDirectives(h$3("ul",{role:"menu",class:[pe.b(),pe.m("inline")],style:_n.value},[(Mn=oe.default)==null?void 0:Mn.call(oe)]),[[vShow,At.value]])}})]);return h$3("li",{class:[_e.b(),_e.is("active",Dt.value),_e.is("opened",At.value),_e.is("disabled",le.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:At.value,onMouseenter:In,onMouseleave:()=>En(),onFocus:In},[On])}}});const menuProps=buildProps({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:definePropType(Array),default:()=>mutable([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,closeOnClickOutside:Boolean,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperOffset:{type:Number,default:6},ellipsisIcon:{type:iconPropType,default:()=>more_default},popperEffect:{type:definePropType(String),default:"dark"},popperClass:String,showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300}}),checkIndexPath=le=>Array.isArray(le)&&le.every(oe=>isString$1(oe)),menuEmits={close:(le,oe)=>isString$1(le)&&checkIndexPath(oe),open:(le,oe)=>isString$1(le)&&checkIndexPath(oe),select:(le,oe,ie,ue)=>isString$1(le)&&checkIndexPath(oe)&&isObject$d(ie)&&(ue===void 0||ue instanceof Promise)};var Menu=defineComponent({name:"ElMenu",props:menuProps,emits:menuEmits,setup(le,{emit:oe,slots:ie,expose:ue}){const de=getCurrentInstance(),he=de.appContext.config.globalProperties.$router,pe=ref(),_e=useNamespace("menu"),Ce=useNamespace("sub-menu"),xe=ref(-1),Ie=ref(le.defaultOpeneds&&!le.collapse?le.defaultOpeneds.slice(0):[]),$e=ref(le.defaultActive),Ne=ref({}),Oe=ref({}),Fe=computed(()=>le.mode==="horizontal"||le.mode==="vertical"&&le.collapse),Ve=()=>{const wn=$e.value&&Ne.value[$e.value];if(!wn||le.mode==="horizontal"||le.collapse)return;wn.indexPath.forEach(Sn=>{const In=Oe.value[Sn];In&&ze(Sn,In.indexPath)})},ze=(wn,Cn)=>{Ie.value.includes(wn)||(le.uniqueOpened&&(Ie.value=Ie.value.filter(Sn=>Cn.includes(Sn))),Ie.value.push(wn),oe("open",wn,Cn))},Ue=wn=>{const Cn=Ie.value.indexOf(wn);Cn!==-1&&Ie.value.splice(Cn,1)},Pt=(wn,Cn)=>{Ue(wn),oe("close",wn,Cn)},qe=({index:wn,indexPath:Cn})=>{Ie.value.includes(wn)?Pt(wn,Cn):ze(wn,Cn)},Et=wn=>{(le.mode==="horizontal"||le.collapse)&&(Ie.value=[]);const{index:Cn,indexPath:Sn}=wn;if(!(isNil(Cn)||isNil(Sn)))if(le.router&&he){const In=wn.route||Cn,En=he.push(In).then(xn=>(xn||($e.value=Cn),xn));oe("select",Cn,Sn,{index:Cn,indexPath:Sn,route:In},En)}else $e.value=Cn,oe("select",Cn,Sn,{index:Cn,indexPath:Sn})},kt=wn=>{const Cn=Ne.value,Sn=Cn[wn]||$e.value&&Cn[$e.value]||Cn[le.defaultActive];Sn?$e.value=Sn.index:$e.value=wn},At=wn=>{const Cn=getComputedStyle(wn),Sn=Number.parseInt(Cn.marginLeft,10),In=Number.parseInt(Cn.marginRight,10);return wn.offsetWidth+Sn+In||0},Dt=()=>{var wn,Cn;if(!pe.value)return-1;const Sn=Array.from((Cn=(wn=pe.value)==null?void 0:wn.childNodes)!=null?Cn:[]).filter(zn=>zn.nodeName!=="#comment"&&(zn.nodeName!=="#text"||zn.nodeValue)),In=64,En=getComputedStyle(pe.value),xn=Number.parseInt(En.paddingLeft,10),kn=Number.parseInt(En.paddingRight,10),On=pe.value.clientWidth-xn-kn;let Mn=0,Un=0;return Sn.forEach((zn,Hn)=>{Mn+=At(zn),Mn<=On-In&&(Un=Hn+1)}),Un===Sn.length?-1:Un},Lt=wn=>Oe.value[wn].indexPath,jt=(wn,Cn=33.34)=>{let Sn;return()=>{Sn&&clearTimeout(Sn),Sn=setTimeout(()=>{wn()},Cn)}};let _n=!0;const bn=()=>{if(xe.value===Dt())return;const wn=()=>{xe.value=-1,nextTick(()=>{xe.value=Dt()})};_n?wn():jt(wn)(),_n=!1};watch(()=>le.defaultActive,wn=>{Ne.value[wn]||($e.value=""),kt(wn)}),watch(()=>le.collapse,wn=>{wn&&(Ie.value=[])}),watch(Ne.value,Ve);let vn;watchEffect(()=>{le.mode==="horizontal"&&le.ellipsis?vn=useResizeObserver(pe,bn).stop:vn==null||vn()});const Tn=ref(!1);{const wn=En=>{Oe.value[En.index]=En},Cn=En=>{delete Oe.value[En.index]};provide("rootMenu",reactive({props:le,openedMenus:Ie,items:Ne,subMenus:Oe,activeIndex:$e,isMenuPopup:Fe,addMenuItem:En=>{Ne.value[En.index]=En},removeMenuItem:En=>{delete Ne.value[En.index]},addSubMenu:wn,removeSubMenu:Cn,openMenu:ze,closeMenu:Pt,handleMenuItemClick:Et,handleSubMenuClick:qe})),provide(`subMenu:${de.uid}`,{addSubMenu:wn,removeSubMenu:Cn,mouseInChild:Tn,level:0})}onMounted(()=>{le.mode==="horizontal"&&new Menu$1(de.vnode.el,_e.namespace.value)}),ue({open:Cn=>{const{indexPath:Sn}=Oe.value[Cn];Sn.forEach(In=>ze(In,Sn))},close:Ue,handleResize:bn});const $n=useMenuCssVar(le,0);return()=>{var wn,Cn;let Sn=(Cn=(wn=ie.default)==null?void 0:wn.call(ie))!=null?Cn:[];const In=[];if(le.mode==="horizontal"&&pe.value){const kn=flattedChildren(Sn),On=xe.value===-1?kn:kn.slice(0,xe.value),Mn=xe.value===-1?[]:kn.slice(xe.value);Mn!=null&&Mn.length&&le.ellipsis&&(Sn=On,In.push(h$3(SubMenu,{index:"sub-menu-more",class:Ce.e("hide-arrow"),popperOffset:le.popperOffset},{title:()=>h$3(ElIcon,{class:Ce.e("icon-more")},{default:()=>h$3(le.ellipsisIcon)}),default:()=>Mn})))}const En=le.closeOnClickOutside?[[ClickOutside,()=>{Ie.value.length&&(Tn.value||(Ie.value.forEach(kn=>oe("close",kn,Lt(kn))),Ie.value=[]))}]]:[],xn=withDirectives(h$3("ul",{key:String(le.collapse),role:"menubar",ref:pe,style:$n.value,class:{[_e.b()]:!0,[_e.m(le.mode)]:!0,[_e.m("collapse")]:le.collapse}},[...Sn,...In]),En);return le.collapseTransition&&le.mode==="vertical"?h$3(ElMenuCollapseTransition,()=>xn):xn}}});const menuItemProps=buildProps({index:{type:definePropType([String,null]),default:null},route:{type:definePropType([String,Object])},disabled:Boolean}),menuItemEmits={click:le=>isString$1(le.index)&&Array.isArray(le.indexPath)},COMPONENT_NAME$b="ElMenuItem",_sfc_main$1j=defineComponent({name:COMPONENT_NAME$b,components:{ElTooltip},props:menuItemProps,emits:menuItemEmits,setup(le,{emit:oe}){const ie=getCurrentInstance(),ue=inject("rootMenu"),de=useNamespace("menu"),he=useNamespace("menu-item");ue||throwError(COMPONENT_NAME$b,"can not inject root menu");const{parentMenu:pe,indexPath:_e}=useMenu(ie,toRef(le,"index")),Ce=inject(`subMenu:${pe.value.uid}`);Ce||throwError(COMPONENT_NAME$b,"can not inject sub menu");const xe=computed(()=>le.index===ue.activeIndex),Ie=reactive({index:le.index,indexPath:_e,active:xe}),$e=()=>{le.disabled||(ue.handleMenuItemClick({index:le.index,indexPath:_e.value,route:le.route}),oe("click",Ie))};return onMounted(()=>{Ce.addSubMenu(Ie),ue.addMenuItem(Ie)}),onBeforeUnmount(()=>{Ce.removeSubMenu(Ie),ue.removeMenuItem(Ie)}),{parentMenu:pe,rootMenu:ue,active:xe,nsMenu:de,nsMenuItem:he,handleClick:$e}}});function _sfc_render$d(le,oe,ie,ue,de,he){const pe=resolveComponent("el-tooltip");return openBlock(),createElementBlock("li",{class:normalizeClass([le.nsMenuItem.b(),le.nsMenuItem.is("active",le.active),le.nsMenuItem.is("disabled",le.disabled)]),role:"menuitem",tabindex:"-1",onClick:le.handleClick},[le.parentMenu.type.name==="ElMenu"&&le.rootMenu.props.collapse&&le.$slots.title?(openBlock(),createBlock(pe,{key:0,effect:le.rootMenu.props.popperEffect,placement:"right","fallback-placements":["left"],persistent:""},{content:withCtx(()=>[renderSlot(le.$slots,"title")]),default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(le.nsMenu.be("tooltip","trigger"))},[renderSlot(le.$slots,"default")],2)]),_:3},8,["effect"])):(openBlock(),createElementBlock(Fragment,{key:1},[renderSlot(le.$slots,"default"),renderSlot(le.$slots,"title")],64))],10,["onClick"])}var MenuItem=_export_sfc$1(_sfc_main$1j,[["render",_sfc_render$d],["__file","menu-item.vue"]]);const menuItemGroupProps={title:String},COMPONENT_NAME$a="ElMenuItemGroup",_sfc_main$1i=defineComponent({name:COMPONENT_NAME$a,props:menuItemGroupProps,setup(){return{ns:useNamespace("menu-item-group")}}});function _sfc_render$c(le,oe,ie,ue,de,he){return openBlock(),createElementBlock("li",{class:normalizeClass(le.ns.b())},[createBaseVNode("div",{class:normalizeClass(le.ns.e("title"))},[le.$slots.title?renderSlot(le.$slots,"title",{key:1}):(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString(le.title),1)],64))],2),createBaseVNode("ul",null,[renderSlot(le.$slots,"default")])],2)}var MenuItemGroup=_export_sfc$1(_sfc_main$1i,[["render",_sfc_render$c],["__file","menu-item-group.vue"]]);const ElMenu=withInstall(Menu,{MenuItem,MenuItemGroup,SubMenu}),ElMenuItem=withNoopInstall(MenuItem),ElMenuItemGroup=withNoopInstall(MenuItemGroup),ElSubMenu=withNoopInstall(SubMenu),pageHeaderProps=buildProps({icon:{type:iconPropType,default:()=>back_default},title:String,content:{type:String,default:""}}),pageHeaderEmits={back:()=>!0},__default__$P=defineComponent({name:"ElPageHeader"}),_sfc_main$1h=defineComponent({...__default__$P,props:pageHeaderProps,emits:pageHeaderEmits,setup(le,{emit:oe}){const ie=useSlots(),{t:ue}=useLocale(),de=useNamespace("page-header"),he=computed(()=>[de.b(),{[de.m("has-breadcrumb")]:!!ie.breadcrumb,[de.m("has-extra")]:!!ie.extra,[de.is("contentful")]:!!ie.default}]);function pe(){oe("back")}return(_e,Ce)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(he))},[_e.$slots.breadcrumb?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(de).e("breadcrumb"))},[renderSlot(_e.$slots,"breadcrumb")],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(de).e("header"))},[createBaseVNode("div",{class:normalizeClass(unref(de).e("left"))},[createBaseVNode("div",{class:normalizeClass(unref(de).e("back")),role:"button",tabindex:"0",onClick:pe},[_e.icon||_e.$slots.icon?(openBlock(),createElementBlock("div",{key:0,"aria-label":_e.title||unref(ue)("el.pageHeader.title"),class:normalizeClass(unref(de).e("icon"))},[renderSlot(_e.$slots,"icon",{},()=>[_e.icon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(_e.icon)))]),_:1})):createCommentVNode("v-if",!0)])],10,["aria-label"])):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(de).e("title"))},[renderSlot(_e.$slots,"title",{},()=>[createTextVNode(toDisplayString(_e.title||unref(ue)("el.pageHeader.title")),1)])],2)],2),createVNode(unref(ElDivider),{direction:"vertical"}),createBaseVNode("div",{class:normalizeClass(unref(de).e("content"))},[renderSlot(_e.$slots,"content",{},()=>[createTextVNode(toDisplayString(_e.content),1)])],2)],2),_e.$slots.extra?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(de).e("extra"))},[renderSlot(_e.$slots,"extra")],2)):createCommentVNode("v-if",!0)],2),_e.$slots.default?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(de).e("main"))},[renderSlot(_e.$slots,"default")],2)):createCommentVNode("v-if",!0)],2))}});var PageHeader=_export_sfc$1(_sfc_main$1h,[["__file","page-header.vue"]]);const ElPageHeader=withInstall(PageHeader),elPaginationKey=Symbol("elPaginationKey"),paginationPrevProps=buildProps({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:iconPropType}}),paginationPrevEmits={click:le=>le instanceof MouseEvent},__default__$O=defineComponent({name:"ElPaginationPrev"}),_sfc_main$1g=defineComponent({...__default__$O,props:paginationPrevProps,emits:paginationPrevEmits,setup(le){const oe=le,{t:ie}=useLocale(),ue=computed(()=>oe.disabled||oe.currentPage<=1);return(de,he)=>(openBlock(),createElementBlock("button",{type:"button",class:"btn-prev",disabled:unref(ue),"aria-label":de.prevText||unref(ie)("el.pagination.prev"),"aria-disabled":unref(ue),onClick:pe=>de.$emit("click",pe)},[de.prevText?(openBlock(),createElementBlock("span",{key:0},toDisplayString(de.prevText),1)):(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(de.prevIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var Prev=_export_sfc$1(_sfc_main$1g,[["__file","prev.vue"]]);const paginationNextProps=buildProps({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:iconPropType}}),__default__$N=defineComponent({name:"ElPaginationNext"}),_sfc_main$1f=defineComponent({...__default__$N,props:paginationNextProps,emits:["click"],setup(le){const oe=le,{t:ie}=useLocale(),ue=computed(()=>oe.disabled||oe.currentPage===oe.pageCount||oe.pageCount===0);return(de,he)=>(openBlock(),createElementBlock("button",{type:"button",class:"btn-next",disabled:unref(ue),"aria-label":de.nextText||unref(ie)("el.pagination.next"),"aria-disabled":unref(ue),onClick:pe=>de.$emit("click",pe)},[de.nextText?(openBlock(),createElementBlock("span",{key:0},toDisplayString(de.nextText),1)):(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(de.nextIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var Next=_export_sfc$1(_sfc_main$1f,[["__file","next.vue"]]);const selectGroupKey=Symbol("ElSelectGroup"),selectKey=Symbol("ElSelect");function useOption$1(le,oe){const ie=inject(selectKey),ue=inject(selectGroupKey,{disabled:!1}),de=computed(()=>Ie(castArray$1(ie.props.modelValue),le.value)),he=computed(()=>{var Oe;if(ie.props.multiple){const Fe=castArray$1((Oe=ie.props.modelValue)!=null?Oe:[]);return!de.value&&Fe.length>=ie.props.multipleLimit&&ie.props.multipleLimit>0}else return!1}),pe=computed(()=>le.label||(isObject$d(le.value)?"":le.value)),_e=computed(()=>le.value||le.label||""),Ce=computed(()=>le.disabled||oe.groupDisabled||he.value),xe=getCurrentInstance(),Ie=(Oe=[],Fe)=>{if(isObject$d(le.value)){const Ve=ie.props.valueKey;return Oe&&Oe.some(ze=>toRaw(get$1(ze,Ve))===get$1(Fe,Ve))}else return Oe&&Oe.includes(Fe)},$e=()=>{!le.disabled&&!ue.disabled&&(ie.states.hoveringIndex=ie.optionsArray.indexOf(xe.proxy))},Ne=Oe=>{const Fe=new RegExp(escapeStringRegexp(Oe),"i");oe.visible=Fe.test(pe.value)||le.created};return watch(()=>pe.value,()=>{!le.created&&!ie.props.remote&&ie.setSelected()}),watch(()=>le.value,(Oe,Fe)=>{const{remote:Ve,valueKey:ze}=ie.props;if(Oe!==Fe&&(ie.onOptionDestroy(Fe,xe.proxy),ie.onOptionCreate(xe.proxy)),!le.created&&!Ve){if(ze&&isObject$d(Oe)&&isObject$d(Fe)&&Oe[ze]===Fe[ze])return;ie.setSelected()}}),watch(()=>ue.disabled,()=>{oe.groupDisabled=ue.disabled},{immediate:!0}),{select:ie,currentLabel:pe,currentValue:_e,itemSelected:de,isDisabled:Ce,hoverItem:$e,updateOption:Ne}}const _sfc_main$1e=defineComponent({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(le){const oe=useNamespace("select"),ie=useId(),ue=computed(()=>[oe.be("dropdown","item"),oe.is("disabled",unref(_e)),oe.is("selected",unref(pe)),oe.is("hovering",unref(Ne))]),de=reactive({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:he,itemSelected:pe,isDisabled:_e,select:Ce,hoverItem:xe,updateOption:Ie}=useOption$1(le,de),{visible:$e,hover:Ne}=toRefs(de),Oe=getCurrentInstance().proxy;Ce.onOptionCreate(Oe),onBeforeUnmount(()=>{const Ve=Oe.value,{selected:ze}=Ce.states,Pt=(Ce.props.multiple?ze:[ze]).some(qe=>qe.value===Oe.value);nextTick(()=>{Ce.states.cachedOptions.get(Ve)===Oe&&!Pt&&Ce.states.cachedOptions.delete(Ve)}),Ce.onOptionDestroy(Ve,Oe)});function Fe(){_e.value||Ce.handleOptionSelect(Oe)}return{ns:oe,id:ie,containerKls:ue,currentLabel:he,itemSelected:pe,isDisabled:_e,select:Ce,hoverItem:xe,updateOption:Ie,visible:$e,hover:Ne,selectOptionClick:Fe,states:de}}});function _sfc_render$b(le,oe,ie,ue,de,he){return withDirectives((openBlock(),createElementBlock("li",{id:le.id,class:normalizeClass(le.containerKls),role:"option","aria-disabled":le.isDisabled||void 0,"aria-selected":le.itemSelected,onMouseenter:le.hoverItem,onClick:withModifiers(le.selectOptionClick,["stop"])},[renderSlot(le.$slots,"default",{},()=>[createBaseVNode("span",null,toDisplayString(le.currentLabel),1)])],42,["id","aria-disabled","aria-selected","onMouseenter","onClick"])),[[vShow,le.visible]])}var Option=_export_sfc$1(_sfc_main$1e,[["render",_sfc_render$b],["__file","option.vue"]]);const _sfc_main$1d=defineComponent({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const le=inject(selectKey),oe=useNamespace("select"),ie=computed(()=>le.props.popperClass),ue=computed(()=>le.props.multiple),de=computed(()=>le.props.fitInputWidth),he=ref("");function pe(){var _e;he.value=`${(_e=le.selectRef)==null?void 0:_e.offsetWidth}px`}return onMounted(()=>{pe(),useResizeObserver(le.selectRef,pe)}),{ns:oe,minWidth:he,popperClass:ie,isMultiple:ue,isFitInputWidth:de}}});function _sfc_render$a(le,oe,ie,ue,de,he){return openBlock(),createElementBlock("div",{class:normalizeClass([le.ns.b("dropdown"),le.ns.is("multiple",le.isMultiple),le.popperClass]),style:normalizeStyle({[le.isFitInputWidth?"width":"minWidth"]:le.minWidth})},[le.$slots.header?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(le.ns.be("dropdown","header"))},[renderSlot(le.$slots,"header")],2)):createCommentVNode("v-if",!0),renderSlot(le.$slots,"default"),le.$slots.footer?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(le.ns.be("dropdown","footer"))},[renderSlot(le.$slots,"footer")],2)):createCommentVNode("v-if",!0)],6)}var ElSelectMenu$1=_export_sfc$1(_sfc_main$1d,[["render",_sfc_render$a],["__file","select-dropdown.vue"]]);const MINIMUM_INPUT_WIDTH$1=11,useSelect$2=(le,oe)=>{const{t:ie}=useLocale(),ue=useId(),de=useNamespace("select"),he=useNamespace("input"),pe=reactive({inputValue:"",options:new Map,cachedOptions:new Map,disabledOptions:new Map,optionValues:[],selected:[],selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),_e=ref(null),Ce=ref(null),xe=ref(null),Ie=ref(null),$e=ref(null),Ne=ref(null),Oe=ref(null),Fe=ref(null),Ve=ref(null),ze=ref(null),Ue=ref(null),Pt=ref(null),{isComposing:qe,handleCompositionStart:Et,handleCompositionUpdate:kt,handleCompositionEnd:At}=useComposition({afterComposition:Xn=>Dr(Xn)}),{wrapperRef:Dt,isFocused:Lt}=useFocusController($e,{beforeFocus(){return Cn.value},afterFocus(){le.automaticDropdown&&!jt.value&&(jt.value=!0,pe.menuVisibleOnFocus=!0)},beforeBlur(Xn){var Tr,Br;return((Tr=xe.value)==null?void 0:Tr.isFocusInsideContent(Xn))||((Br=Ie.value)==null?void 0:Br.isFocusInsideContent(Xn))},afterBlur(){jt.value=!1,pe.menuVisibleOnFocus=!1}}),jt=ref(!1),_n=ref(),{form:bn,formItem:vn}=useFormItem(),{inputId:Tn}=useFormItemInputId(le,{formItemContext:vn}),{valueOnClear:$n,isEmptyValue:wn}=useEmptyValues(le),Cn=computed(()=>le.disabled||(bn==null?void 0:bn.disabled)),Sn=computed(()=>isArray$3(le.modelValue)?le.modelValue.length>0:!wn(le.modelValue)),In=computed(()=>le.clearable&&!Cn.value&&pe.inputHovering&&Sn.value),En=computed(()=>le.remote&&le.filterable&&!le.remoteShowSuffix?"":le.suffixIcon),xn=computed(()=>de.is("reverse",En.value&&jt.value)),kn=computed(()=>(vn==null?void 0:vn.validateState)||""),On=computed(()=>ValidateComponentsMap[kn.value]),Mn=computed(()=>le.remote?300:0),Un=computed(()=>le.loading?le.loadingText||ie("el.select.loading"):le.remote&&!pe.inputValue&&pe.options.size===0?!1:le.filterable&&pe.inputValue&&pe.options.size>0&&zn.value===0?le.noMatchText||ie("el.select.noMatch"):pe.options.size===0?le.noDataText||ie("el.select.noData"):null),zn=computed(()=>Hn.value.filter(Xn=>Xn.visible).length),Hn=computed(()=>{const Xn=Array.from(pe.options.values()),Tr=[];return pe.optionValues.forEach(Br=>{const Gr=Xn.findIndex(Zr=>Zr.value===Br);Gr>-1&&Tr.push(Xn[Gr])}),Tr.length>=Xn.length?Tr:Xn}),Rn=computed(()=>Array.from(pe.cachedOptions.values())),Jn=computed(()=>{const Xn=Hn.value.filter(Tr=>!Tr.created).some(Tr=>Tr.currentLabel===pe.inputValue);return le.filterable&&le.allowCreate&&pe.inputValue!==""&&!Xn}),Qn=()=>{le.filterable&&isFunction$2(le.filterMethod)||le.filterable&&le.remote&&isFunction$2(le.remoteMethod)||Hn.value.forEach(Xn=>{var Tr;(Tr=Xn.updateOption)==null||Tr.call(Xn,pe.inputValue)})},_r=useFormSize(),Zn=computed(()=>["small"].includes(_r.value)?"small":"default"),Gn=computed({get(){return jt.value&&Un.value!==!1},set(Xn){jt.value=Xn}}),Nn=computed(()=>{if(le.multiple&&!isUndefined(le.modelValue))return castArray$1(le.modelValue).length===0&&!pe.inputValue;const Xn=isArray$3(le.modelValue)?le.modelValue[0]:le.modelValue;return le.filterable||isUndefined(Xn)?!pe.inputValue:!0}),Dn=computed(()=>{var Xn;const Tr=(Xn=le.placeholder)!=null?Xn:ie("el.select.placeholder");return le.multiple||!Sn.value?Tr:pe.selectedLabel}),jn=computed(()=>isIOS?null:"mouseenter");watch(()=>le.modelValue,(Xn,Tr)=>{le.multiple&&le.filterable&&!le.reserveKeyword&&(pe.inputValue="",ir("")),Kn(),!isEqual$1(Xn,Tr)&&le.validateEvent&&(vn==null||vn.validate("change").catch(Br=>void 0))},{flush:"post",deep:!0}),watch(()=>jt.value,Xn=>{Xn?ir(pe.inputValue):(pe.inputValue="",pe.previousQuery=null,pe.isBeforeHide=!0),oe("visible-change",Xn)}),watch(()=>pe.options.entries(),()=>{var Xn;if(!isClient)return;const Tr=((Xn=_e.value)==null?void 0:Xn.querySelectorAll("input"))||[];(!le.filterable&&!le.defaultFirstOption&&!isUndefined(le.modelValue)||!Array.from(Tr).includes(document.activeElement))&&Kn(),le.defaultFirstOption&&(le.filterable||le.remote)&&zn.value&&Fn()},{flush:"post"}),watch(()=>pe.hoveringIndex,Xn=>{isNumber(Xn)&&Xn>-1?_n.value=Hn.value[Xn]||{}:_n.value={},Hn.value.forEach(Tr=>{Tr.hover=_n.value===Tr})}),watchEffect(()=>{pe.isBeforeHide||Qn()});const ir=Xn=>{pe.previousQuery===Xn||qe.value||(pe.previousQuery=Xn,le.filterable&&isFunction$2(le.filterMethod)?le.filterMethod(Xn):le.filterable&&le.remote&&isFunction$2(le.remoteMethod)&&le.remoteMethod(Xn),le.defaultFirstOption&&(le.filterable||le.remote)&&zn.value?nextTick(Fn):nextTick(yr))},Fn=()=>{const Xn=Hn.value.filter(Gr=>Gr.visible&&!Gr.disabled&&!Gr.states.groupDisabled),Tr=Xn.find(Gr=>Gr.created),Br=Xn[0];pe.hoveringIndex=sr(Hn.value,Tr||Br)},Kn=()=>{if(le.multiple)pe.selectedLabel="";else{const Tr=isArray$3(le.modelValue)?le.modelValue[0]:le.modelValue,Br=mr(Tr);pe.selectedLabel=Br.currentLabel,pe.selected=[Br];return}const Xn=[];isUndefined(le.modelValue)||castArray$1(le.modelValue).forEach(Tr=>{Xn.push(mr(Tr))}),pe.selected=Xn},mr=Xn=>{let Tr;const Br=toRawType(Xn).toLowerCase()==="object",Gr=toRawType(Xn).toLowerCase()==="null",Zr=toRawType(Xn).toLowerCase()==="undefined";for(let Yr=pe.cachedOptions.size-1;Yr>=0;Yr--){const Qr=Rn.value[Yr];if(Br?get$1(Qr.value,le.valueKey)===get$1(Xn,le.valueKey):Qr.value===Xn){Tr={value:Xn,currentLabel:Qr.currentLabel,get isDisabled(){return Qr.isDisabled}};break}}if(Tr)return Tr;const oo=Br?Xn.label:!Gr&&!Zr?Xn:"";return{value:Xn,currentLabel:oo}},yr=()=>{pe.hoveringIndex=Hn.value.findIndex(Xn=>pe.selected.some(Tr=>kr(Tr)===kr(Xn)))},Cr=()=>{pe.selectionWidth=Ce.value.getBoundingClientRect().width},br=()=>{pe.calculatorWidth=Ne.value.getBoundingClientRect().width},Pr=()=>{pe.collapseItemWidth=Ue.value.getBoundingClientRect().width},gr=()=>{var Xn,Tr;(Tr=(Xn=xe.value)==null?void 0:Xn.updatePopper)==null||Tr.call(Xn)},tr=()=>{var Xn,Tr;(Tr=(Xn=Ie.value)==null?void 0:Xn.updatePopper)==null||Tr.call(Xn)},Sr=()=>{pe.inputValue.length>0&&!jt.value&&(jt.value=!0),ir(pe.inputValue)},Dr=Xn=>{if(pe.inputValue=Xn.target.value,le.remote)Lr();else return Sr()},Lr=debounce(()=>{Sr()},Mn.value),Ur=Xn=>{isEqual$1(le.modelValue,Xn)||oe(CHANGE_EVENT,Xn)},Xr=Xn=>findLastIndex(Xn,Tr=>!pe.disabledOptions.has(Tr)),qr=Xn=>{if(le.multiple&&Xn.code!==EVENT_CODE.delete&&Xn.target.value.length<=0){const Tr=castArray$1(le.modelValue).slice(),Br=Xr(Tr);if(Br<0)return;const Gr=Tr[Br];Tr.splice(Br,1),oe(UPDATE_MODEL_EVENT,Tr),Ur(Tr),oe("remove-tag",Gr)}},Wn=(Xn,Tr)=>{const Br=pe.selected.indexOf(Tr);if(Br>-1&&!Cn.value){const Gr=castArray$1(le.modelValue).slice();Gr.splice(Br,1),oe(UPDATE_MODEL_EVENT,Gr),Ur(Gr),oe("remove-tag",Tr.value)}Xn.stopPropagation(),Hr()},wr=Xn=>{Xn.stopPropagation();const Tr=le.multiple?[]:$n.value;if(le.multiple)for(const Br of pe.selected)Br.isDisabled&&Tr.push(Br.value);oe(UPDATE_MODEL_EVENT,Tr),Ur(Tr),pe.hoveringIndex=-1,jt.value=!1,oe("clear"),Hr()},Vn=Xn=>{var Tr;if(le.multiple){const Br=castArray$1((Tr=le.modelValue)!=null?Tr:[]).slice(),Gr=sr(Br,Xn.value);Gr>-1?Br.splice(Gr,1):(le.multipleLimit<=0||Br.length<le.multipleLimit)&&Br.push(Xn.value),oe(UPDATE_MODEL_EVENT,Br),Ur(Br),Xn.created&&ir(""),le.filterable&&!le.reserveKeyword&&(pe.inputValue="")}else oe(UPDATE_MODEL_EVENT,Xn.value),Ur(Xn.value),jt.value=!1;Hr(),!jt.value&&nextTick(()=>{nr(Xn)})},sr=(Xn=[],Tr)=>{if(!isObject$d(Tr))return Xn.indexOf(Tr);const Br=le.valueKey;let Gr=-1;return Xn.some((Zr,oo)=>toRaw(get$1(Zr,Br))===get$1(Tr,Br)?(Gr=oo,!0):!1),Gr},nr=Xn=>{var Tr,Br,Gr,Zr,oo;const Jr=isArray$3(Xn)?Xn[0]:Xn;let Yr=null;if(Jr!=null&&Jr.value){const Qr=Hn.value.filter(so=>so.value===Jr.value);Qr.length>0&&(Yr=Qr[0].$el)}if(xe.value&&Yr){const Qr=(Zr=(Gr=(Br=(Tr=xe.value)==null?void 0:Tr.popperRef)==null?void 0:Br.contentRef)==null?void 0:Gr.querySelector)==null?void 0:Zr.call(Gr,`.${de.be("dropdown","wrap")}`);Qr&&scrollIntoView(Qr,Yr)}(oo=Pt.value)==null||oo.handleScroll()},Ar=Xn=>{pe.options.set(Xn.value,Xn),pe.cachedOptions.set(Xn.value,Xn),Xn.disabled&&pe.disabledOptions.set(Xn.value,Xn)},Wr=(Xn,Tr)=>{pe.options.get(Xn)===Tr&&pe.options.delete(Xn)},Yn=computed(()=>{var Xn,Tr;return(Tr=(Xn=xe.value)==null?void 0:Xn.popperRef)==null?void 0:Tr.contentRef}),Nr=()=>{pe.isBeforeHide=!1,nextTick(()=>nr(pe.selected))},Hr=()=>{var Xn;(Xn=$e.value)==null||Xn.focus()},Pn=()=>{var Xn;(Xn=$e.value)==null||Xn.blur()},An=Xn=>{wr(Xn)},Bn=()=>{jt.value=!1,Lt.value&&Pn()},or=()=>{pe.inputValue.length>0?pe.inputValue="":jt.value=!1},xr=()=>{Cn.value||(isIOS&&(pe.inputHovering=!0),pe.menuVisibleOnFocus?pe.menuVisibleOnFocus=!1:jt.value=!jt.value)},Er=()=>{jt.value?Hn.value[pe.hoveringIndex]&&Vn(Hn.value[pe.hoveringIndex]):xr()},kr=Xn=>isObject$d(Xn.value)?get$1(Xn.value,le.valueKey):Xn.value,Rr=computed(()=>Hn.value.filter(Xn=>Xn.visible).every(Xn=>Xn.disabled)),Or=computed(()=>le.multiple?le.collapseTags?pe.selected.slice(0,le.maxCollapseTags):pe.selected:[]),Mr=computed(()=>le.multiple?le.collapseTags?pe.selected.slice(le.maxCollapseTags):[]:[]),$r=Xn=>{if(!jt.value){jt.value=!0;return}if(!(pe.options.size===0||pe.filteredOptionsCount===0||qe.value)&&!Rr.value){Xn==="next"?(pe.hoveringIndex++,pe.hoveringIndex===pe.options.size&&(pe.hoveringIndex=0)):Xn==="prev"&&(pe.hoveringIndex--,pe.hoveringIndex<0&&(pe.hoveringIndex=pe.options.size-1));const Tr=Hn.value[pe.hoveringIndex];(Tr.disabled===!0||Tr.states.groupDisabled===!0||!Tr.visible)&&$r(Xn),nextTick(()=>nr(_n.value))}},zr=()=>{if(!Ce.value)return 0;const Xn=window.getComputedStyle(Ce.value);return Number.parseFloat(Xn.gap||"6px")},Vr=computed(()=>{const Xn=zr();return{maxWidth:`${Ue.value&&le.maxCollapseTags===1?pe.selectionWidth-pe.collapseItemWidth-Xn:pe.selectionWidth}px`}}),Fr=computed(()=>({maxWidth:`${pe.selectionWidth}px`})),jr=computed(()=>({width:`${Math.max(pe.calculatorWidth,MINIMUM_INPUT_WIDTH$1)}px`}));return useResizeObserver(Ce,Cr),useResizeObserver(Ne,br),useResizeObserver(Ve,gr),useResizeObserver(Dt,gr),useResizeObserver(ze,tr),useResizeObserver(Ue,Pr),onMounted(()=>{Kn()}),{inputId:Tn,contentId:ue,nsSelect:de,nsInput:he,states:pe,isFocused:Lt,expanded:jt,optionsArray:Hn,hoverOption:_n,selectSize:_r,filteredOptionsCount:zn,resetCalculatorWidth:br,updateTooltip:gr,updateTagTooltip:tr,debouncedOnInputChange:Lr,onInput:Dr,deletePrevTag:qr,deleteTag:Wn,deleteSelected:wr,handleOptionSelect:Vn,scrollToOption:nr,hasModelValue:Sn,shouldShowPlaceholder:Nn,currentPlaceholder:Dn,mouseEnterEventName:jn,showClose:In,iconComponent:En,iconReverse:xn,validateState:kn,validateIcon:On,showNewOption:Jn,updateOptions:Qn,collapseTagSize:Zn,setSelected:Kn,selectDisabled:Cn,emptyText:Un,handleCompositionStart:Et,handleCompositionUpdate:kt,handleCompositionEnd:At,onOptionCreate:Ar,onOptionDestroy:Wr,handleMenuEnter:Nr,focus:Hr,blur:Pn,handleClearClick:An,handleClickOutside:Bn,handleEsc:or,toggleMenu:xr,selectOption:Er,getValueKey:kr,navigateOptions:$r,dropdownMenuVisible:Gn,showTagList:Or,collapseTagList:Mr,tagStyle:Vr,collapseTagStyle:Fr,inputStyle:jr,popperRef:Yn,inputRef:$e,tooltipRef:xe,tagTooltipRef:Ie,calculatorRef:Ne,prefixRef:Oe,suffixRef:Fe,selectRef:_e,wrapperRef:Dt,selectionRef:Ce,scrollbarRef:Pt,menuRef:Ve,tagMenuRef:ze,collapseItemRef:Ue}};var ElOptions=defineComponent({name:"ElOptions",setup(le,{slots:oe}){const ie=inject(selectKey);let ue=[];return()=>{var de,he;const pe=(de=oe.default)==null?void 0:de.call(oe),_e=[];function Ce(xe){isArray$3(xe)&&xe.forEach(Ie=>{var $e,Ne,Oe,Fe;const Ve=($e=(Ie==null?void 0:Ie.type)||{})==null?void 0:$e.name;Ve==="ElOptionGroup"?Ce(!isString$1(Ie.children)&&!isArray$3(Ie.children)&&isFunction$2((Ne=Ie.children)==null?void 0:Ne.default)?(Oe=Ie.children)==null?void 0:Oe.default():Ie.children):Ve==="ElOption"?_e.push((Fe=Ie.props)==null?void 0:Fe.value):isArray$3(Ie.children)&&Ce(Ie.children)})}return pe.length&&Ce((he=pe[0])==null?void 0:he.children),isEqual$1(_e,ue)||(ue=_e,ie&&(ie.states.optionValues=_e)),pe}}});const SelectProps$1=buildProps({name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:useSizeProp,effect:{type:definePropType(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:definePropType(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:useTooltipContentProps.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:iconPropType,default:circle_close_default},fitInputWidth:Boolean,suffixIcon:{type:iconPropType,default:arrow_down_default},tagType:{...tagProps.type,default:"info"},tagEffect:{...tagProps.effect,default:"light"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,placement:{type:definePropType(String),values:Ee,default:"bottom-start"},fallbackPlacements:{type:definePropType(Array),default:["bottom-start","top-start","right","left"]},appendTo:String,...useEmptyValuesProps,...useAriaProps(["ariaLabel"])}),COMPONENT_NAME$9="ElSelect",_sfc_main$1c=defineComponent({name:COMPONENT_NAME$9,componentName:COMPONENT_NAME$9,components:{ElSelectMenu:ElSelectMenu$1,ElOption:Option,ElOptions,ElTag,ElScrollbar,ElTooltip,ElIcon},directives:{ClickOutside},props:SelectProps$1,emits:[UPDATE_MODEL_EVENT,CHANGE_EVENT,"remove-tag","clear","visible-change","focus","blur"],setup(le,{emit:oe}){const ie=computed(()=>{const{modelValue:he,multiple:pe}=le,_e=pe?[]:void 0;return isArray$3(he)?pe?he:_e:pe?_e:he}),ue=reactive({...toRefs(le),modelValue:ie}),de=useSelect$2(ue,oe);return provide(selectKey,reactive({props:ue,states:de.states,optionsArray:de.optionsArray,handleOptionSelect:de.handleOptionSelect,onOptionCreate:de.onOptionCreate,onOptionDestroy:de.onOptionDestroy,selectRef:de.selectRef,setSelected:de.setSelected})),{...de,modelValue:ie}}});function _sfc_render$9(le,oe,ie,ue,de,he){const pe=resolveComponent("el-tag"),_e=resolveComponent("el-tooltip"),Ce=resolveComponent("el-icon"),xe=resolveComponent("el-option"),Ie=resolveComponent("el-options"),$e=resolveComponent("el-scrollbar"),Ne=resolveComponent("el-select-menu"),Oe=resolveDirective("click-outside");return withDirectives((openBlock(),createElementBlock("div",{ref:"selectRef",class:normalizeClass([le.nsSelect.b(),le.nsSelect.m(le.selectSize)]),[toHandlerKey(le.mouseEnterEventName)]:Fe=>le.states.inputHovering=!0,onMouseleave:Fe=>le.states.inputHovering=!1},[createVNode(_e,{ref:"tooltipRef",visible:le.dropdownMenuVisible,placement:le.placement,teleported:le.teleported,"popper-class":[le.nsSelect.e("popper"),le.popperClass],"popper-options":le.popperOptions,"fallback-placements":le.fallbackPlacements,effect:le.effect,pure:"",trigger:"click",transition:`${le.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:le.persistent,"append-to":le.appendTo,onBeforeShow:le.handleMenuEnter,onHide:Fe=>le.states.isBeforeHide=!1},{default:withCtx(()=>{var Fe;return[createBaseVNode("div",{ref:"wrapperRef",class:normalizeClass([le.nsSelect.e("wrapper"),le.nsSelect.is("focused",le.isFocused),le.nsSelect.is("hovering",le.states.inputHovering),le.nsSelect.is("filterable",le.filterable),le.nsSelect.is("disabled",le.selectDisabled)]),onClick:withModifiers(le.toggleMenu,["prevent"])},[le.$slots.prefix?(openBlock(),createElementBlock("div",{key:0,ref:"prefixRef",class:normalizeClass(le.nsSelect.e("prefix"))},[renderSlot(le.$slots,"prefix")],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{ref:"selectionRef",class:normalizeClass([le.nsSelect.e("selection"),le.nsSelect.is("near",le.multiple&&!le.$slots.prefix&&!!le.states.selected.length)])},[le.multiple?renderSlot(le.$slots,"tag",{key:0},()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(le.showTagList,Ve=>(openBlock(),createElementBlock("div",{key:le.getValueKey(Ve),class:normalizeClass(le.nsSelect.e("selected-item"))},[createVNode(pe,{closable:!le.selectDisabled&&!Ve.isDisabled,size:le.collapseTagSize,type:le.tagType,effect:le.tagEffect,"disable-transitions":"",style:normalizeStyle(le.tagStyle),onClose:ze=>le.deleteTag(ze,Ve)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(le.nsSelect.e("tags-text"))},[renderSlot(le.$slots,"label",{label:Ve.currentLabel,value:Ve.value},()=>[createTextVNode(toDisplayString(Ve.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),le.collapseTags&&le.states.selected.length>le.maxCollapseTags?(openBlock(),createBlock(_e,{key:0,ref:"tagTooltipRef",disabled:le.dropdownMenuVisible||!le.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:le.effect,placement:"bottom",teleported:le.teleported},{default:withCtx(()=>[createBaseVNode("div",{ref:"collapseItemRef",class:normalizeClass(le.nsSelect.e("selected-item"))},[createVNode(pe,{closable:!1,size:le.collapseTagSize,type:le.tagType,effect:le.tagEffect,"disable-transitions":"",style:normalizeStyle(le.collapseTagStyle)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(le.nsSelect.e("tags-text"))}," + "+toDisplayString(le.states.selected.length-le.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:withCtx(()=>[createBaseVNode("div",{ref:"tagMenuRef",class:normalizeClass(le.nsSelect.e("selection"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(le.collapseTagList,Ve=>(openBlock(),createElementBlock("div",{key:le.getValueKey(Ve),class:normalizeClass(le.nsSelect.e("selected-item"))},[createVNode(pe,{class:"in-tooltip",closable:!le.selectDisabled&&!Ve.isDisabled,size:le.collapseTagSize,type:le.tagType,effect:le.tagEffect,"disable-transitions":"",onClose:ze=>le.deleteTag(ze,Ve)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(le.nsSelect.e("tags-text"))},[renderSlot(le.$slots,"label",{label:Ve.currentLabel,value:Ve.value},()=>[createTextVNode(toDisplayString(Ve.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):createCommentVNode("v-if",!0)]):createCommentVNode("v-if",!0),le.selectDisabled?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass([le.nsSelect.e("selected-item"),le.nsSelect.e("input-wrapper"),le.nsSelect.is("hidden",!le.filterable)])},[withDirectives(createBaseVNode("input",{id:le.inputId,ref:"inputRef","onUpdate:modelValue":Ve=>le.states.inputValue=Ve,type:"text",name:le.name,class:normalizeClass([le.nsSelect.e("input"),le.nsSelect.is(le.selectSize)]),disabled:le.selectDisabled,autocomplete:le.autocomplete,style:normalizeStyle(le.inputStyle),role:"combobox",readonly:!le.filterable,spellcheck:"false","aria-activedescendant":((Fe=le.hoverOption)==null?void 0:Fe.id)||"","aria-controls":le.contentId,"aria-expanded":le.dropdownMenuVisible,"aria-label":le.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onKeydown:[withKeys(withModifiers(Ve=>le.navigateOptions("next"),["stop","prevent"]),["down"]),withKeys(withModifiers(Ve=>le.navigateOptions("prev"),["stop","prevent"]),["up"]),withKeys(withModifiers(le.handleEsc,["stop","prevent"]),["esc"]),withKeys(withModifiers(le.selectOption,["stop","prevent"]),["enter"]),withKeys(withModifiers(le.deletePrevTag,["stop"]),["delete"])],onCompositionstart:le.handleCompositionStart,onCompositionupdate:le.handleCompositionUpdate,onCompositionend:le.handleCompositionEnd,onInput:le.onInput,onClick:withModifiers(le.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","name","disabled","autocomplete","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onClick"]),[[vModelText,le.states.inputValue]]),le.filterable?(openBlock(),createElementBlock("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:normalizeClass(le.nsSelect.e("input-calculator")),textContent:toDisplayString(le.states.inputValue)},null,10,["textContent"])):createCommentVNode("v-if",!0)],2)),le.shouldShowPlaceholder?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass([le.nsSelect.e("selected-item"),le.nsSelect.e("placeholder"),le.nsSelect.is("transparent",!le.hasModelValue||le.expanded&&!le.states.inputValue)])},[le.hasModelValue?renderSlot(le.$slots,"label",{key:0,label:le.currentPlaceholder,value:le.modelValue},()=>[createBaseVNode("span",null,toDisplayString(le.currentPlaceholder),1)]):(openBlock(),createElementBlock("span",{key:1},toDisplayString(le.currentPlaceholder),1))],2)):createCommentVNode("v-if",!0)],2),createBaseVNode("div",{ref:"suffixRef",class:normalizeClass(le.nsSelect.e("suffix"))},[le.iconComponent&&!le.showClose?(openBlock(),createBlock(Ce,{key:0,class:normalizeClass([le.nsSelect.e("caret"),le.nsSelect.e("icon"),le.iconReverse])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(le.iconComponent)))]),_:1},8,["class"])):createCommentVNode("v-if",!0),le.showClose&&le.clearIcon?(openBlock(),createBlock(Ce,{key:1,class:normalizeClass([le.nsSelect.e("caret"),le.nsSelect.e("icon"),le.nsSelect.e("clear")]),onClick:le.handleClearClick},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(le.clearIcon)))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0),le.validateState&&le.validateIcon?(openBlock(),createBlock(Ce,{key:2,class:normalizeClass([le.nsInput.e("icon"),le.nsInput.e("validateIcon")])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(le.validateIcon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2)],10,["onClick"])]}),content:withCtx(()=>[createVNode(Ne,{ref:"menuRef"},{default:withCtx(()=>[le.$slots.header?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(le.nsSelect.be("dropdown","header")),onClick:withModifiers(()=>{},["stop"])},[renderSlot(le.$slots,"header")],10,["onClick"])):createCommentVNode("v-if",!0),withDirectives(createVNode($e,{id:le.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":le.nsSelect.be("dropdown","wrap"),"view-class":le.nsSelect.be("dropdown","list"),class:normalizeClass([le.nsSelect.is("empty",le.filteredOptionsCount===0)]),role:"listbox","aria-label":le.ariaLabel,"aria-orientation":"vertical"},{default:withCtx(()=>[le.showNewOption?(openBlock(),createBlock(xe,{key:0,value:le.states.inputValue,created:!0},null,8,["value"])):createCommentVNode("v-if",!0),createVNode(Ie,null,{default:withCtx(()=>[renderSlot(le.$slots,"default")]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label"]),[[vShow,le.states.options.size>0&&!le.loading]]),le.$slots.loading&&le.loading?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(le.nsSelect.be("dropdown","loading"))},[renderSlot(le.$slots,"loading")],2)):le.loading||le.filteredOptionsCount===0?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(le.nsSelect.be("dropdown","empty"))},[renderSlot(le.$slots,"empty",{},()=>[createBaseVNode("span",null,toDisplayString(le.emptyText),1)])],2)):createCommentVNode("v-if",!0),le.$slots.footer?(openBlock(),createElementBlock("div",{key:3,class:normalizeClass(le.nsSelect.be("dropdown","footer")),onClick:withModifiers(()=>{},["stop"])},[renderSlot(le.$slots,"footer")],10,["onClick"])):createCommentVNode("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","append-to","onBeforeShow","onHide"])],16,["onMouseleave"])),[[Oe,le.handleClickOutside,le.popperRef]])}var Select$1=_export_sfc$1(_sfc_main$1c,[["render",_sfc_render$9],["__file","select.vue"]]);const _sfc_main$1b=defineComponent({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(le){const oe=useNamespace("select"),ie=ref(null),ue=getCurrentInstance(),de=ref([]);provide(selectGroupKey,reactive({...toRefs(le)}));const he=computed(()=>de.value.some(xe=>xe.visible===!0)),pe=xe=>{var Ie,$e;return((Ie=xe.type)==null?void 0:Ie.name)==="ElOption"&&!!(($e=xe.component)!=null&&$e.proxy)},_e=xe=>{const Ie=castArray$1(xe),$e=[];return Ie.forEach(Ne=>{var Oe,Fe;pe(Ne)?$e.push(Ne.component.proxy):(Oe=Ne.children)!=null&&Oe.length?$e.push(..._e(Ne.children)):(Fe=Ne.component)!=null&&Fe.subTree&&$e.push(..._e(Ne.component.subTree))}),$e},Ce=()=>{de.value=_e(ue.subTree)};return onMounted(()=>{Ce()}),useMutationObserver(ie,Ce,{attributes:!0,subtree:!0,childList:!0}),{groupRef:ie,visible:he,ns:oe}}});function _sfc_render$8(le,oe,ie,ue,de,he){return withDirectives((openBlock(),createElementBlock("ul",{ref:"groupRef",class:normalizeClass(le.ns.be("group","wrap"))},[createBaseVNode("li",{class:normalizeClass(le.ns.be("group","title"))},toDisplayString(le.label),3),createBaseVNode("li",null,[createBaseVNode("ul",{class:normalizeClass(le.ns.b("group"))},[renderSlot(le.$slots,"default")],2)])],2)),[[vShow,le.visible]])}var OptionGroup=_export_sfc$1(_sfc_main$1b,[["render",_sfc_render$8],["__file","option-group.vue"]]);const ElSelect=withInstall(Select$1,{Option,OptionGroup}),ElOption=withNoopInstall(Option),ElOptionGroup=withNoopInstall(OptionGroup),usePagination=()=>inject(elPaginationKey,{}),paginationSizesProps=buildProps({pageSize:{type:Number,required:!0},pageSizes:{type:definePropType(Array),default:()=>mutable([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,teleported:Boolean,size:{type:String,values:componentSizes},appendSizeTo:String}),__default__$M=defineComponent({name:"ElPaginationSizes"}),_sfc_main$1a=defineComponent({...__default__$M,props:paginationSizesProps,emits:["page-size-change"],setup(le,{emit:oe}){const ie=le,{t:ue}=useLocale(),de=useNamespace("pagination"),he=usePagination(),pe=ref(ie.pageSize);watch(()=>ie.pageSizes,(xe,Ie)=>{if(!isEqual$1(xe,Ie)&&Array.isArray(xe)){const $e=xe.includes(ie.pageSize)?ie.pageSize:ie.pageSizes[0];oe("page-size-change",$e)}}),watch(()=>ie.pageSize,xe=>{pe.value=xe});const _e=computed(()=>ie.pageSizes);function Ce(xe){var Ie;xe!==pe.value&&(pe.value=xe,(Ie=he.handleSizeChange)==null||Ie.call(he,Number(xe)))}return(xe,Ie)=>(openBlock(),createElementBlock("span",{class:normalizeClass(unref(de).e("sizes"))},[createVNode(unref(ElSelect),{"model-value":pe.value,disabled:xe.disabled,"popper-class":xe.popperClass,size:xe.size,teleported:xe.teleported,"validate-event":!1,"append-to":xe.appendSizeTo,onChange:Ce},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(_e),$e=>(openBlock(),createBlock(unref(ElOption),{key:$e,value:$e,label:$e+unref(ue)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size","teleported","append-to"])],2))}});var Sizes=_export_sfc$1(_sfc_main$1a,[["__file","sizes.vue"]]);const paginationJumperProps=buildProps({size:{type:String,values:componentSizes}}),__default__$L=defineComponent({name:"ElPaginationJumper"}),_sfc_main$19=defineComponent({...__default__$L,props:paginationJumperProps,setup(le){const{t:oe}=useLocale(),ie=useNamespace("pagination"),{pageCount:ue,disabled:de,currentPage:he,changeEvent:pe}=usePagination(),_e=ref(),Ce=computed(()=>{var $e;return($e=_e.value)!=null?$e:he==null?void 0:he.value});function xe($e){_e.value=$e?+$e:""}function Ie($e){$e=Math.trunc(+$e),pe==null||pe($e),_e.value=void 0}return($e,Ne)=>(openBlock(),createElementBlock("span",{class:normalizeClass(unref(ie).e("jump")),disabled:unref(de)},[createBaseVNode("span",{class:normalizeClass([unref(ie).e("goto")])},toDisplayString(unref(oe)("el.pagination.goto")),3),createVNode(unref(ElInput),{size:$e.size,class:normalizeClass([unref(ie).e("editor"),unref(ie).is("in-pagination")]),min:1,max:unref(ue),disabled:unref(de),"model-value":unref(Ce),"validate-event":!1,"aria-label":unref(oe)("el.pagination.page"),type:"number","onUpdate:modelValue":xe,onChange:Ie},null,8,["size","class","max","disabled","model-value","aria-label"]),createBaseVNode("span",{class:normalizeClass([unref(ie).e("classifier")])},toDisplayString(unref(oe)("el.pagination.pageClassifier")),3)],10,["disabled"]))}});var Jumper=_export_sfc$1(_sfc_main$19,[["__file","jumper.vue"]]);const paginationTotalProps=buildProps({total:{type:Number,default:1e3}}),__default__$K=defineComponent({name:"ElPaginationTotal"}),_sfc_main$18=defineComponent({...__default__$K,props:paginationTotalProps,setup(le){const{t:oe}=useLocale(),ie=useNamespace("pagination"),{disabled:ue}=usePagination();return(de,he)=>(openBlock(),createElementBlock("span",{class:normalizeClass(unref(ie).e("total")),disabled:unref(ue)},toDisplayString(unref(oe)("el.pagination.total",{total:de.total})),11,["disabled"]))}});var Total=_export_sfc$1(_sfc_main$18,[["__file","total.vue"]]);const paginationPagerProps=buildProps({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),__default__$J=defineComponent({name:"ElPaginationPager"}),_sfc_main$17=defineComponent({...__default__$J,props:paginationPagerProps,emits:["change"],setup(le,{emit:oe}){const ie=le,ue=useNamespace("pager"),de=useNamespace("icon"),{t:he}=useLocale(),pe=ref(!1),_e=ref(!1),Ce=ref(!1),xe=ref(!1),Ie=ref(!1),$e=ref(!1),Ne=computed(()=>{const Et=ie.pagerCount,kt=(Et-1)/2,At=Number(ie.currentPage),Dt=Number(ie.pageCount);let Lt=!1,jt=!1;Dt>Et&&(At>Et-kt&&(Lt=!0),At<Dt-kt&&(jt=!0));const _n=[];if(Lt&&!jt){const bn=Dt-(Et-2);for(let vn=bn;vn<Dt;vn++)_n.push(vn)}else if(!Lt&&jt)for(let bn=2;bn<Et;bn++)_n.push(bn);else if(Lt&&jt){const bn=Math.floor(Et/2)-1;for(let vn=At-bn;vn<=At+bn;vn++)_n.push(vn)}else for(let bn=2;bn<Dt;bn++)_n.push(bn);return _n}),Oe=computed(()=>["more","btn-quickprev",de.b(),ue.is("disabled",ie.disabled)]),Fe=computed(()=>["more","btn-quicknext",de.b(),ue.is("disabled",ie.disabled)]),Ve=computed(()=>ie.disabled?-1:0);watchEffect(()=>{const Et=(ie.pagerCount-1)/2;pe.value=!1,_e.value=!1,ie.pageCount>ie.pagerCount&&(ie.currentPage>ie.pagerCount-Et&&(pe.value=!0),ie.currentPage<ie.pageCount-Et&&(_e.value=!0))});function ze(Et=!1){ie.disabled||(Et?Ce.value=!0:xe.value=!0)}function Ue(Et=!1){Et?Ie.value=!0:$e.value=!0}function Pt(Et){const kt=Et.target;if(kt.tagName.toLowerCase()==="li"&&Array.from(kt.classList).includes("number")){const At=Number(kt.textContent);At!==ie.currentPage&&oe("change",At)}else kt.tagName.toLowerCase()==="li"&&Array.from(kt.classList).includes("more")&&qe(Et)}function qe(Et){const kt=Et.target;if(kt.tagName.toLowerCase()==="ul"||ie.disabled)return;let At=Number(kt.textContent);const Dt=ie.pageCount,Lt=ie.currentPage,jt=ie.pagerCount-2;kt.className.includes("more")&&(kt.className.includes("quickprev")?At=Lt-jt:kt.className.includes("quicknext")&&(At=Lt+jt)),Number.isNaN(+At)||(At<1&&(At=1),At>Dt&&(At=Dt)),At!==Lt&&oe("change",At)}return(Et,kt)=>(openBlock(),createElementBlock("ul",{class:normalizeClass(unref(ue).b()),onClick:qe,onKeyup:withKeys(Pt,["enter"])},[Et.pageCount>0?(openBlock(),createElementBlock("li",{key:0,class:normalizeClass([[unref(ue).is("active",Et.currentPage===1),unref(ue).is("disabled",Et.disabled)],"number"]),"aria-current":Et.currentPage===1,"aria-label":unref(he)("el.pagination.currentPage",{pager:1}),tabindex:unref(Ve)}," 1 ",10,["aria-current","aria-label","tabindex"])):createCommentVNode("v-if",!0),pe.value?(openBlock(),createElementBlock("li",{key:1,class:normalizeClass(unref(Oe)),tabindex:unref(Ve),"aria-label":unref(he)("el.pagination.prevPages",{pager:Et.pagerCount-2}),onMouseenter:At=>ze(!0),onMouseleave:At=>Ce.value=!1,onFocus:At=>Ue(!0),onBlur:At=>Ie.value=!1},[(Ce.value||Ie.value)&&!Et.disabled?(openBlock(),createBlock(unref(d_arrow_left_default),{key:0})):(openBlock(),createBlock(unref(more_filled_default),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):createCommentVNode("v-if",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Ne),At=>(openBlock(),createElementBlock("li",{key:At,class:normalizeClass([[unref(ue).is("active",Et.currentPage===At),unref(ue).is("disabled",Et.disabled)],"number"]),"aria-current":Et.currentPage===At,"aria-label":unref(he)("el.pagination.currentPage",{pager:At}),tabindex:unref(Ve)},toDisplayString(At),11,["aria-current","aria-label","tabindex"]))),128)),_e.value?(openBlock(),createElementBlock("li",{key:2,class:normalizeClass(unref(Fe)),tabindex:unref(Ve),"aria-label":unref(he)("el.pagination.nextPages",{pager:Et.pagerCount-2}),onMouseenter:At=>ze(),onMouseleave:At=>xe.value=!1,onFocus:At=>Ue(),onBlur:At=>$e.value=!1},[(xe.value||$e.value)&&!Et.disabled?(openBlock(),createBlock(unref(d_arrow_right_default),{key:0})):(openBlock(),createBlock(unref(more_filled_default),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):createCommentVNode("v-if",!0),Et.pageCount>1?(openBlock(),createElementBlock("li",{key:3,class:normalizeClass([[unref(ue).is("active",Et.currentPage===Et.pageCount),unref(ue).is("disabled",Et.disabled)],"number"]),"aria-current":Et.currentPage===Et.pageCount,"aria-label":unref(he)("el.pagination.currentPage",{pager:Et.pageCount}),tabindex:unref(Ve)},toDisplayString(Et.pageCount),11,["aria-current","aria-label","tabindex"])):createCommentVNode("v-if",!0)],42,["onKeyup"]))}});var Pager=_export_sfc$1(_sfc_main$17,[["__file","pager.vue"]]);const isAbsent=le=>typeof le!="number",paginationProps=buildProps({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:le=>isNumber(le)&&Math.trunc(le)===le&&le>4&&le<22&&le%2===1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:definePropType(Array),default:()=>mutable([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:iconPropType,default:()=>arrow_left_default},nextText:{type:String,default:""},nextIcon:{type:iconPropType,default:()=>arrow_right_default},teleported:{type:Boolean,default:!0},small:Boolean,size:useSizeProp,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean,appendSizeTo:String}),paginationEmits={"update:current-page":le=>isNumber(le),"update:page-size":le=>isNumber(le),"size-change":le=>isNumber(le),change:(le,oe)=>isNumber(le)&&isNumber(oe),"current-change":le=>isNumber(le),"prev-click":le=>isNumber(le),"next-click":le=>isNumber(le)},componentName="ElPagination";var Pagination=defineComponent({name:componentName,props:paginationProps,emits:paginationEmits,setup(le,{emit:oe,slots:ie}){const{t:ue}=useLocale(),de=useNamespace("pagination"),he=getCurrentInstance().vnode.props||{},pe=useGlobalSize(),_e=computed(()=>{var kt;return le.small?"small":(kt=le.size)!=null?kt:pe.value});useDeprecated({from:"small",replacement:"size",version:"3.0.0",scope:"el-pagination",ref:"https://element-plus.org/zh-CN/component/pagination.html"},computed(()=>!!le.small));const Ce="onUpdate:currentPage"in he||"onUpdate:current-page"in he||"onCurrentChange"in he,xe="onUpdate:pageSize"in he||"onUpdate:page-size"in he||"onSizeChange"in he,Ie=computed(()=>{if(isAbsent(le.total)&&isAbsent(le.pageCount)||!isAbsent(le.currentPage)&&!Ce)return!1;if(le.layout.includes("sizes")){if(isAbsent(le.pageCount)){if(!isAbsent(le.total)&&!isAbsent(le.pageSize)&&!xe)return!1}else if(!xe)return!1}return!0}),$e=ref(isAbsent(le.defaultPageSize)?10:le.defaultPageSize),Ne=ref(isAbsent(le.defaultCurrentPage)?1:le.defaultCurrentPage),Oe=computed({get(){return isAbsent(le.pageSize)?$e.value:le.pageSize},set(kt){isAbsent(le.pageSize)&&($e.value=kt),xe&&(oe("update:page-size",kt),oe("size-change",kt))}}),Fe=computed(()=>{let kt=0;return isAbsent(le.pageCount)?isAbsent(le.total)||(kt=Math.max(1,Math.ceil(le.total/Oe.value))):kt=le.pageCount,kt}),Ve=computed({get(){return isAbsent(le.currentPage)?Ne.value:le.currentPage},set(kt){let At=kt;kt<1?At=1:kt>Fe.value&&(At=Fe.value),isAbsent(le.currentPage)&&(Ne.value=At),Ce&&(oe("update:current-page",At),oe("current-change",At))}});watch(Fe,kt=>{Ve.value>kt&&(Ve.value=kt)}),watch([Ve,Oe],kt=>{oe("change",...kt)},{flush:"post"});function ze(kt){Ve.value=kt}function Ue(kt){Oe.value=kt;const At=Fe.value;Ve.value>At&&(Ve.value=At)}function Pt(){le.disabled||(Ve.value-=1,oe("prev-click",Ve.value))}function qe(){le.disabled||(Ve.value+=1,oe("next-click",Ve.value))}function Et(kt,At){kt&&(kt.props||(kt.props={}),kt.props.class=[kt.props.class,At].join(" "))}return provide(elPaginationKey,{pageCount:Fe,disabled:computed(()=>le.disabled),currentPage:Ve,changeEvent:ze,handleSizeChange:Ue}),()=>{var kt,At;if(!Ie.value)return ue("el.pagination.deprecationWarning"),null;if(!le.layout||le.hideOnSinglePage&&Fe.value<=1)return null;const Dt=[],Lt=[],jt=h$3("div",{class:de.e("rightwrapper")},Lt),_n={prev:h$3(Prev,{disabled:le.disabled,currentPage:Ve.value,prevText:le.prevText,prevIcon:le.prevIcon,onClick:Pt}),jumper:h$3(Jumper,{size:_e.value}),pager:h$3(Pager,{currentPage:Ve.value,pageCount:Fe.value,pagerCount:le.pagerCount,onChange:ze,disabled:le.disabled}),next:h$3(Next,{disabled:le.disabled,currentPage:Ve.value,pageCount:Fe.value,nextText:le.nextText,nextIcon:le.nextIcon,onClick:qe}),sizes:h$3(Sizes,{pageSize:Oe.value,pageSizes:le.pageSizes,popperClass:le.popperClass,disabled:le.disabled,teleported:le.teleported,size:_e.value,appendSizeTo:le.appendSizeTo}),slot:(At=(kt=ie==null?void 0:ie.default)==null?void 0:kt.call(ie))!=null?At:null,total:h$3(Total,{total:isAbsent(le.total)?0:le.total})},bn=le.layout.split(",").map(Tn=>Tn.trim());let vn=!1;return bn.forEach(Tn=>{if(Tn==="->"){vn=!0;return}vn?Lt.push(_n[Tn]):Dt.push(_n[Tn])}),Et(Dt[0],de.is("first")),Et(Dt[Dt.length-1],de.is("last")),vn&&Lt.length>0&&(Et(Lt[0],de.is("first")),Et(Lt[Lt.length-1],de.is("last")),Dt.push(jt)),h$3("div",{class:[de.b(),de.is("background",le.background),de.m(_e.value)]},Dt)}}});const ElPagination=withInstall(Pagination),popconfirmProps=buildProps({title:String,confirmButtonText:String,cancelButtonText:String,confirmButtonType:{type:String,values:buttonTypes,default:"primary"},cancelButtonType:{type:String,values:buttonTypes,default:"text"},icon:{type:iconPropType,default:()=>question_filled_default},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1},hideAfter:{type:Number,default:200},teleported:useTooltipContentProps.teleported,persistent:useTooltipContentProps.persistent,width:{type:[String,Number],default:150}}),popconfirmEmits={confirm:le=>le instanceof MouseEvent,cancel:le=>le instanceof MouseEvent},__default__$I=defineComponent({name:"ElPopconfirm"}),_sfc_main$16=defineComponent({...__default__$I,props:popconfirmProps,emits:popconfirmEmits,setup(le,{emit:oe}){const ie=le,{t:ue}=useLocale(),de=useNamespace("popconfirm"),he=ref(),pe=()=>{var Ne,Oe;(Oe=(Ne=he.value)==null?void 0:Ne.onClose)==null||Oe.call(Ne)},_e=computed(()=>({width:addUnit(ie.width)})),Ce=Ne=>{oe("confirm",Ne),pe()},xe=Ne=>{oe("cancel",Ne),pe()},Ie=computed(()=>ie.confirmButtonText||ue("el.popconfirm.confirmButtonText")),$e=computed(()=>ie.cancelButtonText||ue("el.popconfirm.cancelButtonText"));return(Ne,Oe)=>(openBlock(),createBlock(unref(ElTooltip),mergeProps({ref_key:"tooltipRef",ref:he,trigger:"click",effect:"light"},Ne.$attrs,{"popper-class":`${unref(de).namespace.value}-popover`,"popper-style":unref(_e),teleported:Ne.teleported,"fallback-placements":["bottom","top","right","left"],"hide-after":Ne.hideAfter,persistent:Ne.persistent}),{content:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(unref(de).b())},[createBaseVNode("div",{class:normalizeClass(unref(de).e("main"))},[!Ne.hideIcon&&Ne.icon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(de).e("icon")),style:normalizeStyle({color:Ne.iconColor})},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(Ne.icon)))]),_:1},8,["class","style"])):createCommentVNode("v-if",!0),createTextVNode(" "+toDisplayString(Ne.title),1)],2),createBaseVNode("div",{class:normalizeClass(unref(de).e("action"))},[renderSlot(Ne.$slots,"actions",{confirm:Ce,cancel:xe},()=>[createVNode(unref(ElButton),{size:"small",type:Ne.cancelButtonType==="text"?"":Ne.cancelButtonType,text:Ne.cancelButtonType==="text",onClick:xe},{default:withCtx(()=>[createTextVNode(toDisplayString(unref($e)),1)]),_:1},8,["type","text"]),createVNode(unref(ElButton),{size:"small",type:Ne.confirmButtonType==="text"?"":Ne.confirmButtonType,text:Ne.confirmButtonType==="text",onClick:Ce},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(Ie)),1)]),_:1},8,["type","text"])])],2)],2)]),default:withCtx(()=>[Ne.$slots.reference?renderSlot(Ne.$slots,"reference",{key:0}):createCommentVNode("v-if",!0)]),_:3},16,["popper-class","popper-style","teleported","hide-after","persistent"]))}});var Popconfirm=_export_sfc$1(_sfc_main$16,[["__file","popconfirm.vue"]]);const ElPopconfirm=withInstall(Popconfirm),popoverProps=buildProps({trigger:useTooltipTriggerProps.trigger,placement:dropdownProps.placement,disabled:useTooltipTriggerProps.disabled,visible:useTooltipContentProps.visible,transition:useTooltipContentProps.transition,popperOptions:dropdownProps.popperOptions,tabindex:dropdownProps.tabindex,content:useTooltipContentProps.content,popperStyle:useTooltipContentProps.popperStyle,popperClass:useTooltipContentProps.popperClass,enterable:{...useTooltipContentProps.enterable,default:!0},effect:{...useTooltipContentProps.effect,default:"light"},teleported:useTooltipContentProps.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),popoverEmits={"update:visible":le=>isBoolean(le),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},updateEventKeyRaw="onUpdate:visible",__default__$H=defineComponent({name:"ElPopover"}),_sfc_main$15=defineComponent({...__default__$H,props:popoverProps,emits:popoverEmits,setup(le,{expose:oe,emit:ie}){const ue=le,de=computed(()=>ue[updateEventKeyRaw]),he=useNamespace("popover"),pe=ref(),_e=computed(()=>{var ze;return(ze=unref(pe))==null?void 0:ze.popperRef}),Ce=computed(()=>[{width:addUnit(ue.width)},ue.popperStyle]),xe=computed(()=>[he.b(),ue.popperClass,{[he.m("plain")]:!!ue.content}]),Ie=computed(()=>ue.transition===`${he.namespace.value}-fade-in-linear`),$e=()=>{var ze;(ze=pe.value)==null||ze.hide()},Ne=()=>{ie("before-enter")},Oe=()=>{ie("before-leave")},Fe=()=>{ie("after-enter")},Ve=()=>{ie("update:visible",!1),ie("after-leave")};return oe({popperRef:_e,hide:$e}),(ze,Ue)=>(openBlock(),createBlock(unref(ElTooltip),mergeProps({ref_key:"tooltipRef",ref:pe},ze.$attrs,{trigger:ze.trigger,placement:ze.placement,disabled:ze.disabled,visible:ze.visible,transition:ze.transition,"popper-options":ze.popperOptions,tabindex:ze.tabindex,content:ze.content,offset:ze.offset,"show-after":ze.showAfter,"hide-after":ze.hideAfter,"auto-close":ze.autoClose,"show-arrow":ze.showArrow,"aria-label":ze.title,effect:ze.effect,enterable:ze.enterable,"popper-class":unref(xe),"popper-style":unref(Ce),teleported:ze.teleported,persistent:ze.persistent,"gpu-acceleration":unref(Ie),"onUpdate:visible":unref(de),onBeforeShow:Ne,onBeforeHide:Oe,onShow:Fe,onHide:Ve}),{content:withCtx(()=>[ze.title?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(he).e("title")),role:"title"},toDisplayString(ze.title),3)):createCommentVNode("v-if",!0),renderSlot(ze.$slots,"default",{},()=>[createTextVNode(toDisplayString(ze.content),1)])]),default:withCtx(()=>[ze.$slots.reference?renderSlot(ze.$slots,"reference",{key:0}):createCommentVNode("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var Popover=_export_sfc$1(_sfc_main$15,[["__file","popover.vue"]]);const attachEvents=(le,oe)=>{const ie=oe.arg||oe.value,ue=ie==null?void 0:ie.popperRef;ue&&(ue.triggerRef=le)};var PopoverDirective={mounted(le,oe){attachEvents(le,oe)},updated(le,oe){attachEvents(le,oe)}};const VPopover="popover",ElPopoverDirective=withInstallDirective(PopoverDirective,VPopover),ElPopover=withInstall(Popover,{directive:ElPopoverDirective}),progressProps=buildProps({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:le=>le>=0&&le<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:definePropType(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:definePropType([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:definePropType(Function),default:le=>`${le}%`}}),__default__$G=defineComponent({name:"ElProgress"}),_sfc_main$14=defineComponent({...__default__$G,props:progressProps,setup(le){const oe=le,ie={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},ue=useNamespace("progress"),de=computed(()=>{const qe={width:`${oe.percentage}%`,animationDuration:`${oe.duration}s`},Et=Pt(oe.percentage);return Et.includes("gradient")?qe.background=Et:qe.backgroundColor=Et,qe}),he=computed(()=>(oe.strokeWidth/oe.width*100).toFixed(1)),pe=computed(()=>["circle","dashboard"].includes(oe.type)?Number.parseInt(`${50-Number.parseFloat(he.value)/2}`,10):0),_e=computed(()=>{const qe=pe.value,Et=oe.type==="dashboard";return`
          M 50 50
          m 0 ${Et?"":"-"}${qe}
          a ${qe} ${qe} 0 1 1 0 ${Et?"-":""}${qe*2}
          a ${qe} ${qe} 0 1 1 0 ${Et?"":"-"}${qe*2}
          `}),Ce=computed(()=>2*Math.PI*pe.value),xe=computed(()=>oe.type==="dashboard"?.75:1),Ie=computed(()=>`${-1*Ce.value*(1-xe.value)/2}px`),$e=computed(()=>({strokeDasharray:`${Ce.value*xe.value}px, ${Ce.value}px`,strokeDashoffset:Ie.value})),Ne=computed(()=>({strokeDasharray:`${Ce.value*xe.value*(oe.percentage/100)}px, ${Ce.value}px`,strokeDashoffset:Ie.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),Oe=computed(()=>{let qe;return oe.color?qe=Pt(oe.percentage):qe=ie[oe.status]||ie.default,qe}),Fe=computed(()=>oe.status==="warning"?warning_filled_default:oe.type==="line"?oe.status==="success"?circle_check_default:circle_close_default:oe.status==="success"?check_default:close_default),Ve=computed(()=>oe.type==="line"?12+oe.strokeWidth*.4:oe.width*.111111+2),ze=computed(()=>oe.format(oe.percentage));function Ue(qe){const Et=100/qe.length;return qe.map((At,Dt)=>isString$1(At)?{color:At,percentage:(Dt+1)*Et}:At).sort((At,Dt)=>At.percentage-Dt.percentage)}const Pt=qe=>{var Et;const{color:kt}=oe;if(isFunction$2(kt))return kt(qe);if(isString$1(kt))return kt;{const At=Ue(kt);for(const Dt of At)if(Dt.percentage>qe)return Dt.color;return(Et=At[At.length-1])==null?void 0:Et.color}};return(qe,Et)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(ue).b(),unref(ue).m(qe.type),unref(ue).is(qe.status),{[unref(ue).m("without-text")]:!qe.showText,[unref(ue).m("text-inside")]:qe.textInside}]),role:"progressbar","aria-valuenow":qe.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[qe.type==="line"?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(ue).b("bar"))},[createBaseVNode("div",{class:normalizeClass(unref(ue).be("bar","outer")),style:normalizeStyle({height:`${qe.strokeWidth}px`})},[createBaseVNode("div",{class:normalizeClass([unref(ue).be("bar","inner"),{[unref(ue).bem("bar","inner","indeterminate")]:qe.indeterminate},{[unref(ue).bem("bar","inner","striped")]:qe.striped},{[unref(ue).bem("bar","inner","striped-flow")]:qe.stripedFlow}]),style:normalizeStyle(unref(de))},[(qe.showText||qe.$slots.default)&&qe.textInside?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(ue).be("bar","innerText"))},[renderSlot(qe.$slots,"default",{percentage:qe.percentage},()=>[createBaseVNode("span",null,toDisplayString(unref(ze)),1)])],2)):createCommentVNode("v-if",!0)],6)],6)],2)):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(ue).b("circle")),style:normalizeStyle({height:`${qe.width}px`,width:`${qe.width}px`})},[(openBlock(),createElementBlock("svg",{viewBox:"0 0 100 100"},[createBaseVNode("path",{class:normalizeClass(unref(ue).be("circle","track")),d:unref(_e),stroke:`var(${unref(ue).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":qe.strokeLinecap,"stroke-width":unref(he),fill:"none",style:normalizeStyle(unref($e))},null,14,["d","stroke","stroke-linecap","stroke-width"]),createBaseVNode("path",{class:normalizeClass(unref(ue).be("circle","path")),d:unref(_e),stroke:unref(Oe),fill:"none",opacity:qe.percentage?1:0,"stroke-linecap":qe.strokeLinecap,"stroke-width":unref(he),style:normalizeStyle(unref(Ne))},null,14,["d","stroke","opacity","stroke-linecap","stroke-width"])]))],6)),(qe.showText||qe.$slots.default)&&!qe.textInside?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(unref(ue).e("text")),style:normalizeStyle({fontSize:`${unref(Ve)}px`})},[renderSlot(qe.$slots,"default",{percentage:qe.percentage},()=>[qe.status?(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(Fe))))]),_:1})):(openBlock(),createElementBlock("span",{key:0},toDisplayString(unref(ze)),1))])],6)):createCommentVNode("v-if",!0)],10,["aria-valuenow"]))}});var Progress=_export_sfc$1(_sfc_main$14,[["__file","progress.vue"]]);const ElProgress=withInstall(Progress),rateProps=buildProps({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:definePropType([Array,Object]),default:()=>mutable(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:definePropType([Array,Object]),default:()=>[star_filled_default,star_filled_default,star_filled_default]},voidIcon:{type:iconPropType,default:()=>star_default},disabledVoidIcon:{type:iconPropType,default:()=>star_filled_default},disabled:Boolean,allowHalf:Boolean,showText:Boolean,showScore:Boolean,textColor:{type:String,default:""},texts:{type:definePropType(Array),default:()=>mutable(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:useSizeProp,clearable:Boolean,...useAriaProps(["ariaLabel"])}),rateEmits={[CHANGE_EVENT]:le=>isNumber(le),[UPDATE_MODEL_EVENT]:le=>isNumber(le)},__default__$F=defineComponent({name:"ElRate"}),_sfc_main$13=defineComponent({...__default__$F,props:rateProps,emits:rateEmits,setup(le,{expose:oe,emit:ie}){const ue=le;function de(Cn,Sn){const In=kn=>isObject$d(kn),En=Object.keys(Sn).map(kn=>+kn).filter(kn=>{const On=Sn[kn];return(In(On)?On.excluded:!1)?Cn<kn:Cn<=kn}).sort((kn,On)=>kn-On),xn=Sn[En[0]];return In(xn)&&xn.value||xn}const he=inject(formContextKey,void 0),pe=inject(formItemContextKey,void 0),_e=useFormSize(),Ce=useNamespace("rate"),{inputId:xe,isLabeledByFormItem:Ie}=useFormItemInputId(ue,{formItemContext:pe}),$e=ref(ue.modelValue),Ne=ref(-1),Oe=ref(!0),Fe=computed(()=>[Ce.b(),Ce.m(_e.value)]),Ve=computed(()=>ue.disabled||(he==null?void 0:he.disabled)),ze=computed(()=>Ce.cssVarBlock({"void-color":ue.voidColor,"disabled-void-color":ue.disabledVoidColor,"fill-color":Et.value})),Ue=computed(()=>{let Cn="";return ue.showScore?Cn=ue.scoreTemplate.replace(/\{\s*value\s*\}/,Ve.value?`${ue.modelValue}`:`${$e.value}`):ue.showText&&(Cn=ue.texts[Math.ceil($e.value)-1]),Cn}),Pt=computed(()=>ue.modelValue*100-Math.floor(ue.modelValue)*100),qe=computed(()=>isArray$3(ue.colors)?{[ue.lowThreshold]:ue.colors[0],[ue.highThreshold]:{value:ue.colors[1],excluded:!0},[ue.max]:ue.colors[2]}:ue.colors),Et=computed(()=>{const Cn=de($e.value,qe.value);return isObject$d(Cn)?"":Cn}),kt=computed(()=>{let Cn="";return Ve.value?Cn=`${Pt.value}%`:ue.allowHalf&&(Cn="50%"),{color:Et.value,width:Cn}}),At=computed(()=>{let Cn=isArray$3(ue.icons)?[...ue.icons]:{...ue.icons};return Cn=markRaw(Cn),isArray$3(Cn)?{[ue.lowThreshold]:Cn[0],[ue.highThreshold]:{value:Cn[1],excluded:!0},[ue.max]:Cn[2]}:Cn}),Dt=computed(()=>de(ue.modelValue,At.value)),Lt=computed(()=>Ve.value?isString$1(ue.disabledVoidIcon)?ue.disabledVoidIcon:markRaw(ue.disabledVoidIcon):isString$1(ue.voidIcon)?ue.voidIcon:markRaw(ue.voidIcon)),jt=computed(()=>de($e.value,At.value));function _n(Cn){const Sn=Ve.value&&Pt.value>0&&Cn-1<ue.modelValue&&Cn>ue.modelValue,In=ue.allowHalf&&Oe.value&&Cn-.5<=$e.value&&Cn>$e.value;return Sn||In}function bn(Cn){ue.clearable&&Cn===ue.modelValue&&(Cn=0),ie(UPDATE_MODEL_EVENT,Cn),ue.modelValue!==Cn&&ie("change",Cn)}function vn(Cn){Ve.value||(ue.allowHalf&&Oe.value?bn($e.value):bn(Cn))}function Tn(Cn){if(Ve.value)return;let Sn=$e.value;const In=Cn.code;return In===EVENT_CODE.up||In===EVENT_CODE.right?(ue.allowHalf?Sn+=.5:Sn+=1,Cn.stopPropagation(),Cn.preventDefault()):(In===EVENT_CODE.left||In===EVENT_CODE.down)&&(ue.allowHalf?Sn-=.5:Sn-=1,Cn.stopPropagation(),Cn.preventDefault()),Sn=Sn<0?0:Sn,Sn=Sn>ue.max?ue.max:Sn,ie(UPDATE_MODEL_EVENT,Sn),ie("change",Sn),Sn}function $n(Cn,Sn){if(!Ve.value){if(ue.allowHalf&&Sn){let In=Sn.target;hasClass(In,Ce.e("item"))&&(In=In.querySelector(`.${Ce.e("icon")}`)),(In.clientWidth===0||hasClass(In,Ce.e("decimal")))&&(In=In.parentNode),Oe.value=Sn.offsetX*2<=In.clientWidth,$e.value=Oe.value?Cn-.5:Cn}else $e.value=Cn;Ne.value=Cn}}function wn(){Ve.value||(ue.allowHalf&&(Oe.value=ue.modelValue!==Math.floor(ue.modelValue)),$e.value=ue.modelValue,Ne.value=-1)}return watch(()=>ue.modelValue,Cn=>{$e.value=Cn,Oe.value=ue.modelValue!==Math.floor(ue.modelValue)}),ue.modelValue||ie(UPDATE_MODEL_EVENT,0),oe({setCurrentValue:$n,resetCurrentValue:wn}),(Cn,Sn)=>{var In;return openBlock(),createElementBlock("div",{id:unref(xe),class:normalizeClass([unref(Fe),unref(Ce).is("disabled",unref(Ve))]),role:"slider","aria-label":unref(Ie)?void 0:Cn.ariaLabel||"rating","aria-labelledby":unref(Ie)?(In=unref(pe))==null?void 0:In.labelId:void 0,"aria-valuenow":$e.value,"aria-valuetext":unref(Ue)||void 0,"aria-valuemin":"0","aria-valuemax":Cn.max,tabindex:"0",style:normalizeStyle(unref(ze)),onKeydown:Tn},[(openBlock(!0),createElementBlock(Fragment,null,renderList(Cn.max,(En,xn)=>(openBlock(),createElementBlock("span",{key:xn,class:normalizeClass(unref(Ce).e("item")),onMousemove:kn=>$n(En,kn),onMouseleave:wn,onClick:kn=>vn(En)},[createVNode(unref(ElIcon),{class:normalizeClass([unref(Ce).e("icon"),{hover:Ne.value===En},unref(Ce).is("active",En<=$e.value)])},{default:withCtx(()=>[_n(En)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock(Fragment,{key:0},[withDirectives((openBlock(),createBlock(resolveDynamicComponent(unref(jt)),null,null,512)),[[vShow,En<=$e.value]]),withDirectives((openBlock(),createBlock(resolveDynamicComponent(unref(Lt)),null,null,512)),[[vShow,!(En<=$e.value)]])],64)),_n(En)?(openBlock(),createElementBlock(Fragment,{key:1},[(openBlock(),createBlock(resolveDynamicComponent(unref(Lt)),{class:normalizeClass([unref(Ce).em("decimal","box")])},null,8,["class"])),createVNode(unref(ElIcon),{style:normalizeStyle(unref(kt)),class:normalizeClass([unref(Ce).e("icon"),unref(Ce).e("decimal")])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(Dt))))]),_:1},8,["style","class"])],64)):createCommentVNode("v-if",!0)]),_:2},1032,["class"])],42,["onMousemove","onClick"]))),128)),Cn.showText||Cn.showScore?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(Ce).e("text")),style:normalizeStyle({color:Cn.textColor})},toDisplayString(unref(Ue)),7)):createCommentVNode("v-if",!0)],46,["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"])}}});var Rate=_export_sfc$1(_sfc_main$13,[["__file","rate.vue"]]);const ElRate=withInstall(Rate),IconMap={success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},IconComponentMap={[IconMap.success]:circle_check_filled_default,[IconMap.warning]:warning_filled_default,[IconMap.error]:circle_close_filled_default,[IconMap.info]:info_filled_default},resultProps=buildProps({title:{type:String,default:""},subTitle:{type:String,default:""},icon:{type:String,values:["success","warning","info","error"],default:"info"}}),__default__$E=defineComponent({name:"ElResult"}),_sfc_main$12=defineComponent({...__default__$E,props:resultProps,setup(le){const oe=le,ie=useNamespace("result"),ue=computed(()=>{const de=oe.icon,he=de&&IconMap[de]?IconMap[de]:"icon-info",pe=IconComponentMap[he]||IconComponentMap["icon-info"];return{class:he,component:pe}});return(de,he)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(ie).b())},[createBaseVNode("div",{class:normalizeClass(unref(ie).e("icon"))},[renderSlot(de.$slots,"icon",{},()=>[unref(ue).component?(openBlock(),createBlock(resolveDynamicComponent(unref(ue).component),{key:0,class:normalizeClass(unref(ue).class)},null,8,["class"])):createCommentVNode("v-if",!0)])],2),de.title||de.$slots.title?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(ie).e("title"))},[renderSlot(de.$slots,"title",{},()=>[createBaseVNode("p",null,toDisplayString(de.title),1)])],2)):createCommentVNode("v-if",!0),de.subTitle||de.$slots["sub-title"]?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(ie).e("subtitle"))},[renderSlot(de.$slots,"sub-title",{},()=>[createBaseVNode("p",null,toDisplayString(de.subTitle),1)])],2)):createCommentVNode("v-if",!0),de.$slots.extra?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(unref(ie).e("extra"))},[renderSlot(de.$slots,"extra")],2)):createCommentVNode("v-if",!0)],2))}});var Result$1=_export_sfc$1(_sfc_main$12,[["__file","result.vue"]]);const ElResult=withInstall(Result$1);var safeIsNaN=Number.isNaN||function(oe){return typeof oe=="number"&&oe!==oe};function isEqual(le,oe){return!!(le===oe||safeIsNaN(le)&&safeIsNaN(oe))}function areInputsEqual(le,oe){if(le.length!==oe.length)return!1;for(var ie=0;ie<le.length;ie++)if(!isEqual(le[ie],oe[ie]))return!1;return!0}function memoizeOne(le,oe){oe===void 0&&(oe=areInputsEqual);var ie=null;function ue(){for(var de=[],he=0;he<arguments.length;he++)de[he]=arguments[he];if(ie&&ie.lastThis===this&&oe(de,ie.lastArgs))return ie.lastResult;var pe=le.apply(this,de);return ie={lastResult:pe,lastArgs:de,lastThis:this},pe}return ue.clear=function(){ie=null},ue}const useCache=()=>{const oe=getCurrentInstance().proxy.$props;return computed(()=>{const ie=(ue,de,he)=>({});return oe.perfMode?memoize(ie):memoizeOne(ie)})},DEFAULT_DYNAMIC_LIST_ITEM_SIZE=50,ITEM_RENDER_EVT="itemRendered",SCROLL_EVT="scroll",FORWARD="forward",BACKWARD="backward",AUTO_ALIGNMENT="auto",SMART_ALIGNMENT="smart",START_ALIGNMENT="start",CENTERED_ALIGNMENT="center",END_ALIGNMENT="end",HORIZONTAL="horizontal",VERTICAL="vertical",LTR="ltr",RTL="rtl",RTL_OFFSET_NAG="negative",RTL_OFFSET_POS_ASC="positive-ascending",RTL_OFFSET_POS_DESC="positive-descending",ScrollbarDirKey={[HORIZONTAL]:"left",[VERTICAL]:"top"},SCROLLBAR_MIN_SIZE=20,LayoutKeys={[HORIZONTAL]:"deltaX",[VERTICAL]:"deltaY"},useWheel=({atEndEdge:le,atStartEdge:oe,layout:ie},ue)=>{let de,he=0;const pe=Ce=>Ce<0&&oe.value||Ce>0&&le.value;return{hasReachedEdge:pe,onWheel:Ce=>{cAF(de);const xe=Ce[LayoutKeys[ie.value]];pe(he)&&pe(he+xe)||(he+=xe,isFirefox()||Ce.preventDefault(),de=rAF(()=>{ue(he),he=0}))}}},itemSize$1=buildProp({type:definePropType([Number,Function]),required:!0}),estimatedItemSize=buildProp({type:Number}),cache=buildProp({type:Number,default:2}),direction=buildProp({type:String,values:["ltr","rtl"],default:"ltr"}),initScrollOffset=buildProp({type:Number,default:0}),total=buildProp({type:Number,required:!0}),layout=buildProp({type:String,values:["horizontal","vertical"],default:VERTICAL}),virtualizedProps=buildProps({className:{type:String,default:""},containerElement:{type:definePropType([String,Object]),default:"div"},data:{type:definePropType(Array),default:()=>mutable([])},direction,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:definePropType([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),virtualizedListProps=buildProps({cache,estimatedItemSize,layout,initScrollOffset,total,itemSize:itemSize$1,...virtualizedProps}),scrollbarSize={type:Number,default:6},startGap={type:Number,default:0},endGap={type:Number,default:2},virtualizedGridProps=buildProps({columnCache:cache,columnWidth:itemSize$1,estimatedColumnWidth:estimatedItemSize,estimatedRowHeight:estimatedItemSize,initScrollLeft:initScrollOffset,initScrollTop:initScrollOffset,itemKey:{type:definePropType(Function),default:({columnIndex:le,rowIndex:oe})=>`${oe}:${le}`},rowCache:cache,rowHeight:itemSize$1,totalColumn:total,totalRow:total,hScrollbarSize:scrollbarSize,vScrollbarSize:scrollbarSize,scrollbarStartGap:startGap,scrollbarEndGap:endGap,role:String,...virtualizedProps}),virtualizedScrollbarProps=buildProps({alwaysOn:Boolean,class:String,layout,total,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize,startGap,endGap,visible:Boolean}),getScrollDir=(le,oe)=>le<oe?FORWARD:BACKWARD,isHorizontal=le=>le===LTR||le===RTL||le===HORIZONTAL,isRTL=le=>le===RTL;let cachedRTLResult=null;function getRTLOffsetType(le=!1){if(cachedRTLResult===null||le){const oe=document.createElement("div"),ie=oe.style;ie.width="50px",ie.height="50px",ie.overflow="scroll",ie.direction="rtl";const ue=document.createElement("div"),de=ue.style;return de.width="100px",de.height="100px",oe.appendChild(ue),document.body.appendChild(oe),oe.scrollLeft>0?cachedRTLResult=RTL_OFFSET_POS_DESC:(oe.scrollLeft=1,oe.scrollLeft===0?cachedRTLResult=RTL_OFFSET_NAG:cachedRTLResult=RTL_OFFSET_POS_ASC),document.body.removeChild(oe),cachedRTLResult}return cachedRTLResult}function renderThumbStyle({move:le,size:oe,bar:ie},ue){const de={},he=`translate${ie.axis}(${le}px)`;return de[ie.size]=oe,de.transform=he,de.msTransform=he,de.webkitTransform=he,ue==="horizontal"?de.height="100%":de.width="100%",de}const ScrollBar=defineComponent({name:"ElVirtualScrollBar",props:virtualizedScrollbarProps,emits:["scroll","start-move","stop-move"],setup(le,{emit:oe}){const ie=computed(()=>le.startGap+le.endGap),ue=useNamespace("virtual-scrollbar"),de=useNamespace("scrollbar"),he=ref(),pe=ref();let _e=null,Ce=null;const xe=reactive({isDragging:!1,traveled:0}),Ie=computed(()=>BAR_MAP[le.layout]),$e=computed(()=>le.clientSize-unref(ie)),Ne=computed(()=>({position:"absolute",width:`${HORIZONTAL===le.layout?$e.value:le.scrollbarSize}px`,height:`${HORIZONTAL===le.layout?le.scrollbarSize:$e.value}px`,[ScrollbarDirKey[le.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),Oe=computed(()=>{const At=le.ratio,Dt=le.clientSize;if(At>=100)return Number.POSITIVE_INFINITY;if(At>=50)return At*Dt/100;const Lt=Dt/3;return Math.floor(Math.min(Math.max(At*Dt,SCROLLBAR_MIN_SIZE),Lt))}),Fe=computed(()=>{if(!Number.isFinite(Oe.value))return{display:"none"};const At=`${Oe.value}px`;return renderThumbStyle({bar:Ie.value,size:At,move:xe.traveled},le.layout)}),Ve=computed(()=>Math.floor(le.clientSize-Oe.value-unref(ie))),ze=()=>{window.addEventListener("mousemove",Et),window.addEventListener("mouseup",qe);const At=unref(pe);At&&(Ce=document.onselectstart,document.onselectstart=()=>!1,At.addEventListener("touchmove",Et,{passive:!0}),At.addEventListener("touchend",qe))},Ue=()=>{window.removeEventListener("mousemove",Et),window.removeEventListener("mouseup",qe),document.onselectstart=Ce,Ce=null;const At=unref(pe);At&&(At.removeEventListener("touchmove",Et),At.removeEventListener("touchend",qe))},Pt=At=>{At.stopImmediatePropagation(),!(At.ctrlKey||[1,2].includes(At.button))&&(xe.isDragging=!0,xe[Ie.value.axis]=At.currentTarget[Ie.value.offset]-(At[Ie.value.client]-At.currentTarget.getBoundingClientRect()[Ie.value.direction]),oe("start-move"),ze())},qe=()=>{xe.isDragging=!1,xe[Ie.value.axis]=0,oe("stop-move"),Ue()},Et=At=>{const{isDragging:Dt}=xe;if(!Dt||!pe.value||!he.value)return;const Lt=xe[Ie.value.axis];if(!Lt)return;cAF(_e);const jt=(he.value.getBoundingClientRect()[Ie.value.direction]-At[Ie.value.client])*-1,_n=pe.value[Ie.value.offset]-Lt,bn=jt-_n;_e=rAF(()=>{xe.traveled=Math.max(le.startGap,Math.min(bn,Ve.value)),oe("scroll",bn,Ve.value)})},kt=At=>{const Dt=Math.abs(At.target.getBoundingClientRect()[Ie.value.direction]-At[Ie.value.client]),Lt=pe.value[Ie.value.offset]/2,jt=Dt-Lt;xe.traveled=Math.max(0,Math.min(jt,Ve.value)),oe("scroll",jt,Ve.value)};return watch(()=>le.scrollFrom,At=>{xe.isDragging||(xe.traveled=Math.ceil(At*Ve.value))}),onBeforeUnmount(()=>{Ue()}),()=>h$3("div",{role:"presentation",ref:he,class:[ue.b(),le.class,(le.alwaysOn||xe.isDragging)&&"always-on"],style:Ne.value,onMousedown:withModifiers(kt,["stop","prevent"]),onTouchstartPrevent:Pt},h$3("div",{ref:pe,class:de.e("thumb"),style:Fe.value,onMousedown:Pt},[]))}}),createList=({name:le,getOffset:oe,getItemSize:ie,getItemOffset:ue,getEstimatedTotalSize:de,getStartIndexForOffset:he,getStopIndexForStartIndex:pe,initCache:_e,clearCache:Ce,validateProps:xe})=>defineComponent({name:le??"ElVirtualList",props:virtualizedListProps,emits:[ITEM_RENDER_EVT,SCROLL_EVT],setup(Ie,{emit:$e,expose:Ne}){xe(Ie);const Oe=getCurrentInstance(),Fe=useNamespace("vl"),Ve=ref(_e(Ie,Oe)),ze=useCache(),Ue=ref(),Pt=ref(),qe=ref(),Et=ref({isScrolling:!1,scrollDir:"forward",scrollOffset:isNumber(Ie.initScrollOffset)?Ie.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:Ie.scrollbarAlwaysOn}),kt=computed(()=>{const{total:Mn,cache:Un}=Ie,{isScrolling:zn,scrollDir:Hn,scrollOffset:Rn}=unref(Et);if(Mn===0)return[0,0,0,0];const Jn=he(Ie,Rn,unref(Ve)),Qn=pe(Ie,Jn,Rn,unref(Ve)),_r=!zn||Hn===BACKWARD?Math.max(1,Un):1,Zn=!zn||Hn===FORWARD?Math.max(1,Un):1;return[Math.max(0,Jn-_r),Math.max(0,Math.min(Mn-1,Qn+Zn)),Jn,Qn]}),At=computed(()=>de(Ie,unref(Ve))),Dt=computed(()=>isHorizontal(Ie.layout)),Lt=computed(()=>[{position:"relative",[`overflow-${Dt.value?"x":"y"}`]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:Ie.direction,height:isNumber(Ie.height)?`${Ie.height}px`:Ie.height,width:isNumber(Ie.width)?`${Ie.width}px`:Ie.width},Ie.style]),jt=computed(()=>{const Mn=unref(At),Un=unref(Dt);return{height:Un?"100%":`${Mn}px`,pointerEvents:unref(Et).isScrolling?"none":void 0,width:Un?`${Mn}px`:"100%"}}),_n=computed(()=>Dt.value?Ie.width:Ie.height),{onWheel:bn}=useWheel({atStartEdge:computed(()=>Et.value.scrollOffset<=0),atEndEdge:computed(()=>Et.value.scrollOffset>=At.value),layout:computed(()=>Ie.layout)},Mn=>{var Un,zn;(zn=(Un=qe.value).onMouseUp)==null||zn.call(Un),Sn(Math.min(Et.value.scrollOffset+Mn,At.value-_n.value))});useEventListener(Ue,"wheel",bn,{passive:!1});const vn=()=>{const{total:Mn}=Ie;if(Mn>0){const[Rn,Jn,Qn,_r]=unref(kt);$e(ITEM_RENDER_EVT,Rn,Jn,Qn,_r)}const{scrollDir:Un,scrollOffset:zn,updateRequested:Hn}=unref(Et);$e(SCROLL_EVT,Un,zn,Hn)},Tn=Mn=>{const{clientHeight:Un,scrollHeight:zn,scrollTop:Hn}=Mn.currentTarget,Rn=unref(Et);if(Rn.scrollOffset===Hn)return;const Jn=Math.max(0,Math.min(Hn,zn-Un));Et.value={...Rn,isScrolling:!0,scrollDir:getScrollDir(Rn.scrollOffset,Jn),scrollOffset:Jn,updateRequested:!1},nextTick(xn)},$n=Mn=>{const{clientWidth:Un,scrollLeft:zn,scrollWidth:Hn}=Mn.currentTarget,Rn=unref(Et);if(Rn.scrollOffset===zn)return;const{direction:Jn}=Ie;let Qn=zn;if(Jn===RTL)switch(getRTLOffsetType()){case RTL_OFFSET_NAG:{Qn=-zn;break}case RTL_OFFSET_POS_DESC:{Qn=Hn-Un-zn;break}}Qn=Math.max(0,Math.min(Qn,Hn-Un)),Et.value={...Rn,isScrolling:!0,scrollDir:getScrollDir(Rn.scrollOffset,Qn),scrollOffset:Qn,updateRequested:!1},nextTick(xn)},wn=Mn=>{unref(Dt)?$n(Mn):Tn(Mn),vn()},Cn=(Mn,Un)=>{const zn=(At.value-_n.value)/Un*Mn;Sn(Math.min(At.value-_n.value,zn))},Sn=Mn=>{Mn=Math.max(Mn,0),Mn!==unref(Et).scrollOffset&&(Et.value={...unref(Et),scrollOffset:Mn,scrollDir:getScrollDir(unref(Et).scrollOffset,Mn),updateRequested:!0},nextTick(xn))},In=(Mn,Un=AUTO_ALIGNMENT)=>{const{scrollOffset:zn}=unref(Et);Mn=Math.max(0,Math.min(Mn,Ie.total-1)),Sn(oe(Ie,Mn,Un,zn,unref(Ve)))},En=Mn=>{const{direction:Un,itemSize:zn,layout:Hn}=Ie,Rn=ze.value(Ce&&zn,Ce&&Hn,Ce&&Un);let Jn;if(hasOwn$b(Rn,String(Mn)))Jn=Rn[Mn];else{const Qn=ue(Ie,Mn,unref(Ve)),_r=ie(Ie,Mn,unref(Ve)),Zn=unref(Dt),Gn=Un===RTL,Nn=Zn?Qn:0;Rn[Mn]=Jn={position:"absolute",left:Gn?void 0:`${Nn}px`,right:Gn?`${Nn}px`:void 0,top:Zn?0:`${Qn}px`,height:Zn?"100%":`${_r}px`,width:Zn?`${_r}px`:"100%"}}return Jn},xn=()=>{Et.value.isScrolling=!1,nextTick(()=>{ze.value(-1,null,null)})},kn=()=>{const Mn=Ue.value;Mn&&(Mn.scrollTop=0)};onMounted(()=>{if(!isClient)return;const{initScrollOffset:Mn}=Ie,Un=unref(Ue);isNumber(Mn)&&Un&&(unref(Dt)?Un.scrollLeft=Mn:Un.scrollTop=Mn),vn()}),onUpdated(()=>{const{direction:Mn,layout:Un}=Ie,{scrollOffset:zn,updateRequested:Hn}=unref(Et),Rn=unref(Ue);if(Hn&&Rn)if(Un===HORIZONTAL)if(Mn===RTL)switch(getRTLOffsetType()){case RTL_OFFSET_NAG:{Rn.scrollLeft=-zn;break}case RTL_OFFSET_POS_ASC:{Rn.scrollLeft=zn;break}default:{const{clientWidth:Jn,scrollWidth:Qn}=Rn;Rn.scrollLeft=Qn-Jn-zn;break}}else Rn.scrollLeft=zn;else Rn.scrollTop=zn}),onActivated(()=>{unref(Ue).scrollTop=unref(Et).scrollOffset});const On={ns:Fe,clientSize:_n,estimatedTotalSize:At,windowStyle:Lt,windowRef:Ue,innerRef:Pt,innerStyle:jt,itemsToRender:kt,scrollbarRef:qe,states:Et,getItemStyle:En,onScroll:wn,onScrollbarScroll:Cn,onWheel:bn,scrollTo:Sn,scrollToItem:In,resetScrollTop:kn};return Ne({windowRef:Ue,innerRef:Pt,getItemStyleCache:ze,scrollTo:Sn,scrollToItem:In,resetScrollTop:kn,states:Et}),On},render(Ie){var $e;const{$slots:Ne,className:Oe,clientSize:Fe,containerElement:Ve,data:ze,getItemStyle:Ue,innerElement:Pt,itemsToRender:qe,innerStyle:Et,layout:kt,total:At,onScroll:Dt,onScrollbarScroll:Lt,states:jt,useIsScrolling:_n,windowStyle:bn,ns:vn}=Ie,[Tn,$n]=qe,wn=resolveDynamicComponent(Ve),Cn=resolveDynamicComponent(Pt),Sn=[];if(At>0)for(let kn=Tn;kn<=$n;kn++)Sn.push(h$3(Fragment,{key:kn},($e=Ne.default)==null?void 0:$e.call(Ne,{data:ze,index:kn,isScrolling:_n?jt.isScrolling:void 0,style:Ue(kn)})));const In=[h$3(Cn,{style:Et,ref:"innerRef"},isString$1(Cn)?Sn:{default:()=>Sn})],En=h$3(ScrollBar,{ref:"scrollbarRef",clientSize:Fe,layout:kt,onScroll:Lt,ratio:Fe*100/this.estimatedTotalSize,scrollFrom:jt.scrollOffset/(this.estimatedTotalSize-Fe),total:At}),xn=h$3(wn,{class:[vn.e("window"),Oe],style:bn,onScroll:Dt,ref:"windowRef",key:0},isString$1(wn)?[In]:{default:()=>[In]});return h$3("div",{key:0,class:[vn.e("wrapper"),jt.scrollbarAlwaysOn?"always-on":""]},[xn,En])}}),FixedSizeList=createList({name:"ElFixedSizeList",getItemOffset:({itemSize:le},oe)=>oe*le,getItemSize:({itemSize:le})=>le,getEstimatedTotalSize:({total:le,itemSize:oe})=>oe*le,getOffset:({height:le,total:oe,itemSize:ie,layout:ue,width:de},he,pe,_e)=>{const Ce=isHorizontal(ue)?de:le,xe=Math.max(0,oe*ie-Ce),Ie=Math.min(xe,he*ie),$e=Math.max(0,(he+1)*ie-Ce);switch(pe===SMART_ALIGNMENT&&(_e>=$e-Ce&&_e<=Ie+Ce?pe=AUTO_ALIGNMENT:pe=CENTERED_ALIGNMENT),pe){case START_ALIGNMENT:return Ie;case END_ALIGNMENT:return $e;case CENTERED_ALIGNMENT:{const Ne=Math.round($e+(Ie-$e)/2);return Ne<Math.ceil(Ce/2)?0:Ne>xe+Math.floor(Ce/2)?xe:Ne}case AUTO_ALIGNMENT:default:return _e>=$e&&_e<=Ie?_e:_e<$e?$e:Ie}},getStartIndexForOffset:({total:le,itemSize:oe},ie)=>Math.max(0,Math.min(le-1,Math.floor(ie/oe))),getStopIndexForStartIndex:({height:le,total:oe,itemSize:ie,layout:ue,width:de},he,pe)=>{const _e=he*ie,Ce=isHorizontal(ue)?de:le,xe=Math.ceil((Ce+pe-_e)/ie);return Math.max(0,Math.min(oe-1,he+xe-1))},initCache(){},clearCache:!0,validateProps(){}}),getItemFromCache$1=(le,oe,ie)=>{const{itemSize:ue}=le,{items:de,lastVisitedIndex:he}=ie;if(oe>he){let pe=0;if(he>=0){const _e=de[he];pe=_e.offset+_e.size}for(let _e=he+1;_e<=oe;_e++){const Ce=ue(_e);de[_e]={offset:pe,size:Ce},pe+=Ce}ie.lastVisitedIndex=oe}return de[oe]},findItem$1=(le,oe,ie)=>{const{items:ue,lastVisitedIndex:de}=oe;return(de>0?ue[de].offset:0)>=ie?bs$1(le,oe,0,de,ie):es$2(le,oe,Math.max(0,de),ie)},bs$1=(le,oe,ie,ue,de)=>{for(;ie<=ue;){const he=ie+Math.floor((ue-ie)/2),pe=getItemFromCache$1(le,he,oe).offset;if(pe===de)return he;pe<de?ie=he+1:pe>de&&(ue=he-1)}return Math.max(0,ie-1)},es$2=(le,oe,ie,ue)=>{const{total:de}=le;let he=1;for(;ie<de&&getItemFromCache$1(le,ie,oe).offset<ue;)ie+=he,he*=2;return bs$1(le,oe,Math.floor(ie/2),Math.min(ie,de-1),ue)},getEstimatedTotalSize=({total:le},{items:oe,estimatedItemSize:ie,lastVisitedIndex:ue})=>{let de=0;if(ue>=le&&(ue=le-1),ue>=0){const _e=oe[ue];de=_e.offset+_e.size}const pe=(le-ue-1)*ie;return de+pe},DynamicSizeList=createList({name:"ElDynamicSizeList",getItemOffset:(le,oe,ie)=>getItemFromCache$1(le,oe,ie).offset,getItemSize:(le,oe,{items:ie})=>ie[oe].size,getEstimatedTotalSize,getOffset:(le,oe,ie,ue,de)=>{const{height:he,layout:pe,width:_e}=le,Ce=isHorizontal(pe)?_e:he,xe=getItemFromCache$1(le,oe,de),Ie=getEstimatedTotalSize(le,de),$e=Math.max(0,Math.min(Ie-Ce,xe.offset)),Ne=Math.max(0,xe.offset-Ce+xe.size);switch(ie===SMART_ALIGNMENT&&(ue>=Ne-Ce&&ue<=$e+Ce?ie=AUTO_ALIGNMENT:ie=CENTERED_ALIGNMENT),ie){case START_ALIGNMENT:return $e;case END_ALIGNMENT:return Ne;case CENTERED_ALIGNMENT:return Math.round(Ne+($e-Ne)/2);case AUTO_ALIGNMENT:default:return ue>=Ne&&ue<=$e?ue:ue<Ne?Ne:$e}},getStartIndexForOffset:(le,oe,ie)=>findItem$1(le,ie,oe),getStopIndexForStartIndex:(le,oe,ie,ue)=>{const{height:de,total:he,layout:pe,width:_e}=le,Ce=isHorizontal(pe)?_e:de,xe=getItemFromCache$1(le,oe,ue),Ie=ie+Ce;let $e=xe.offset+xe.size,Ne=oe;for(;Ne<he-1&&$e<Ie;)Ne++,$e+=getItemFromCache$1(le,Ne,ue).size;return Ne},initCache({estimatedItemSize:le=DEFAULT_DYNAMIC_LIST_ITEM_SIZE},oe){const ie={items:{},estimatedItemSize:le,lastVisitedIndex:-1};return ie.clearCacheAfterIndex=(ue,de=!0)=>{var he,pe;ie.lastVisitedIndex=Math.min(ie.lastVisitedIndex,ue-1),(he=oe.exposed)==null||he.getItemStyleCache(-1),de&&((pe=oe.proxy)==null||pe.$forceUpdate())},ie},clearCache:!1,validateProps:({itemSize:le})=>{}}),useGridWheel=({atXEndEdge:le,atXStartEdge:oe,atYEndEdge:ie,atYStartEdge:ue},de)=>{let he=null,pe=0,_e=0;const Ce=(Ie,$e)=>{const Ne=Ie<=0&&oe.value||Ie>=0&&le.value,Oe=$e<=0&&ue.value||$e>=0&&ie.value;return Ne&&Oe};return{hasReachedEdge:Ce,onWheel:Ie=>{cAF(he);let $e=Ie.deltaX,Ne=Ie.deltaY;Math.abs($e)>Math.abs(Ne)?Ne=0:$e=0,Ie.shiftKey&&Ne!==0&&($e=Ne,Ne=0),!(Ce(pe,_e)&&Ce(pe+$e,_e+Ne))&&(pe+=$e,_e+=Ne,Ie.preventDefault(),he=rAF(()=>{de(pe,_e),pe=0,_e=0}))}}},createGrid=({name:le,clearCache:oe,getColumnPosition:ie,getColumnStartIndexForOffset:ue,getColumnStopIndexForStartIndex:de,getEstimatedTotalHeight:he,getEstimatedTotalWidth:pe,getColumnOffset:_e,getRowOffset:Ce,getRowPosition:xe,getRowStartIndexForOffset:Ie,getRowStopIndexForStartIndex:$e,initCache:Ne,injectToInstance:Oe,validateProps:Fe})=>defineComponent({name:le??"ElVirtualList",props:virtualizedGridProps,emits:[ITEM_RENDER_EVT,SCROLL_EVT],setup(Ve,{emit:ze,expose:Ue,slots:Pt}){const qe=useNamespace("vl");Fe(Ve);const Et=getCurrentInstance(),kt=ref(Ne(Ve,Et));Oe==null||Oe(Et,kt);const At=ref(),Dt=ref(),Lt=ref(),jt=ref(null),_n=ref({isScrolling:!1,scrollLeft:isNumber(Ve.initScrollLeft)?Ve.initScrollLeft:0,scrollTop:isNumber(Ve.initScrollTop)?Ve.initScrollTop:0,updateRequested:!1,xAxisScrollDir:FORWARD,yAxisScrollDir:FORWARD}),bn=useCache(),vn=computed(()=>Number.parseInt(`${Ve.height}`,10)),Tn=computed(()=>Number.parseInt(`${Ve.width}`,10)),$n=computed(()=>{const{totalColumn:Fn,totalRow:Kn,columnCache:mr}=Ve,{isScrolling:yr,xAxisScrollDir:Cr,scrollLeft:br}=unref(_n);if(Fn===0||Kn===0)return[0,0,0,0];const Pr=ue(Ve,br,unref(kt)),gr=de(Ve,Pr,br,unref(kt)),tr=!yr||Cr===BACKWARD?Math.max(1,mr):1,Sr=!yr||Cr===FORWARD?Math.max(1,mr):1;return[Math.max(0,Pr-tr),Math.max(0,Math.min(Fn-1,gr+Sr)),Pr,gr]}),wn=computed(()=>{const{totalColumn:Fn,totalRow:Kn,rowCache:mr}=Ve,{isScrolling:yr,yAxisScrollDir:Cr,scrollTop:br}=unref(_n);if(Fn===0||Kn===0)return[0,0,0,0];const Pr=Ie(Ve,br,unref(kt)),gr=$e(Ve,Pr,br,unref(kt)),tr=!yr||Cr===BACKWARD?Math.max(1,mr):1,Sr=!yr||Cr===FORWARD?Math.max(1,mr):1;return[Math.max(0,Pr-tr),Math.max(0,Math.min(Kn-1,gr+Sr)),Pr,gr]}),Cn=computed(()=>he(Ve,unref(kt))),Sn=computed(()=>pe(Ve,unref(kt))),In=computed(()=>{var Fn;return[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:Ve.direction,height:isNumber(Ve.height)?`${Ve.height}px`:Ve.height,width:isNumber(Ve.width)?`${Ve.width}px`:Ve.width},(Fn=Ve.style)!=null?Fn:{}]}),En=computed(()=>{const Fn=`${unref(Sn)}px`;return{height:`${unref(Cn)}px`,pointerEvents:unref(_n).isScrolling?"none":void 0,width:Fn}}),xn=()=>{const{totalColumn:Fn,totalRow:Kn}=Ve;if(Fn>0&&Kn>0){const[gr,tr,Sr,Dr]=unref($n),[Lr,Ur,Xr,qr]=unref(wn);ze(ITEM_RENDER_EVT,{columnCacheStart:gr,columnCacheEnd:tr,rowCacheStart:Lr,rowCacheEnd:Ur,columnVisibleStart:Sr,columnVisibleEnd:Dr,rowVisibleStart:Xr,rowVisibleEnd:qr})}const{scrollLeft:mr,scrollTop:yr,updateRequested:Cr,xAxisScrollDir:br,yAxisScrollDir:Pr}=unref(_n);ze(SCROLL_EVT,{xAxisScrollDir:br,scrollLeft:mr,yAxisScrollDir:Pr,scrollTop:yr,updateRequested:Cr})},kn=Fn=>{const{clientHeight:Kn,clientWidth:mr,scrollHeight:yr,scrollLeft:Cr,scrollTop:br,scrollWidth:Pr}=Fn.currentTarget,gr=unref(_n);if(gr.scrollTop===br&&gr.scrollLeft===Cr)return;let tr=Cr;if(isRTL(Ve.direction))switch(getRTLOffsetType()){case RTL_OFFSET_NAG:tr=-Cr;break;case RTL_OFFSET_POS_DESC:tr=Pr-mr-Cr;break}_n.value={...gr,isScrolling:!0,scrollLeft:tr,scrollTop:Math.max(0,Math.min(br,yr-Kn)),updateRequested:!0,xAxisScrollDir:getScrollDir(gr.scrollLeft,tr),yAxisScrollDir:getScrollDir(gr.scrollTop,br)},nextTick(()=>Jn()),Qn(),xn()},On=(Fn,Kn)=>{const mr=unref(vn),yr=(Cn.value-mr)/Kn*Fn;zn({scrollTop:Math.min(Cn.value-mr,yr)})},Mn=(Fn,Kn)=>{const mr=unref(Tn),yr=(Sn.value-mr)/Kn*Fn;zn({scrollLeft:Math.min(Sn.value-mr,yr)})},{onWheel:Un}=useGridWheel({atXStartEdge:computed(()=>_n.value.scrollLeft<=0),atXEndEdge:computed(()=>_n.value.scrollLeft>=Sn.value-unref(Tn)),atYStartEdge:computed(()=>_n.value.scrollTop<=0),atYEndEdge:computed(()=>_n.value.scrollTop>=Cn.value-unref(vn))},(Fn,Kn)=>{var mr,yr,Cr,br;(yr=(mr=Dt.value)==null?void 0:mr.onMouseUp)==null||yr.call(mr),(br=(Cr=Lt.value)==null?void 0:Cr.onMouseUp)==null||br.call(Cr);const Pr=unref(Tn),gr=unref(vn);zn({scrollLeft:Math.min(_n.value.scrollLeft+Fn,Sn.value-Pr),scrollTop:Math.min(_n.value.scrollTop+Kn,Cn.value-gr)})});useEventListener(At,"wheel",Un,{passive:!1});const zn=({scrollLeft:Fn=_n.value.scrollLeft,scrollTop:Kn=_n.value.scrollTop})=>{Fn=Math.max(Fn,0),Kn=Math.max(Kn,0);const mr=unref(_n);Kn===mr.scrollTop&&Fn===mr.scrollLeft||(_n.value={...mr,xAxisScrollDir:getScrollDir(mr.scrollLeft,Fn),yAxisScrollDir:getScrollDir(mr.scrollTop,Kn),scrollLeft:Fn,scrollTop:Kn,updateRequested:!0},nextTick(()=>Jn()),Qn(),xn())},Hn=(Fn=0,Kn=0,mr=AUTO_ALIGNMENT)=>{const yr=unref(_n);Kn=Math.max(0,Math.min(Kn,Ve.totalColumn-1)),Fn=Math.max(0,Math.min(Fn,Ve.totalRow-1));const Cr=getScrollBarWidth(qe.namespace.value),br=unref(kt),Pr=he(Ve,br),gr=pe(Ve,br);zn({scrollLeft:_e(Ve,Kn,mr,yr.scrollLeft,br,gr>Ve.width?Cr:0),scrollTop:Ce(Ve,Fn,mr,yr.scrollTop,br,Pr>Ve.height?Cr:0)})},Rn=(Fn,Kn)=>{const{columnWidth:mr,direction:yr,rowHeight:Cr}=Ve,br=bn.value(oe&&mr,oe&&Cr,oe&&yr),Pr=`${Fn},${Kn}`;if(hasOwn$b(br,Pr))return br[Pr];{const[,gr]=ie(Ve,Kn,unref(kt)),tr=unref(kt),Sr=isRTL(yr),[Dr,Lr]=xe(Ve,Fn,tr),[Ur]=ie(Ve,Kn,tr);return br[Pr]={position:"absolute",left:Sr?void 0:`${gr}px`,right:Sr?`${gr}px`:void 0,top:`${Lr}px`,height:`${Dr}px`,width:`${Ur}px`},br[Pr]}},Jn=()=>{_n.value.isScrolling=!1,nextTick(()=>{bn.value(-1,null,null)})};onMounted(()=>{if(!isClient)return;const{initScrollLeft:Fn,initScrollTop:Kn}=Ve,mr=unref(At);mr&&(isNumber(Fn)&&(mr.scrollLeft=Fn),isNumber(Kn)&&(mr.scrollTop=Kn)),xn()});const Qn=()=>{const{direction:Fn}=Ve,{scrollLeft:Kn,scrollTop:mr,updateRequested:yr}=unref(_n),Cr=unref(At);if(yr&&Cr){if(Fn===RTL)switch(getRTLOffsetType()){case RTL_OFFSET_NAG:{Cr.scrollLeft=-Kn;break}case RTL_OFFSET_POS_ASC:{Cr.scrollLeft=Kn;break}default:{const{clientWidth:br,scrollWidth:Pr}=Cr;Cr.scrollLeft=Pr-br-Kn;break}}else Cr.scrollLeft=Math.max(0,Kn);Cr.scrollTop=Math.max(0,mr)}},{resetAfterColumnIndex:_r,resetAfterRowIndex:Zn,resetAfter:Gn}=Et.proxy;Ue({windowRef:At,innerRef:jt,getItemStyleCache:bn,scrollTo:zn,scrollToItem:Hn,states:_n,resetAfterColumnIndex:_r,resetAfterRowIndex:Zn,resetAfter:Gn});const Nn=()=>{const{scrollbarAlwaysOn:Fn,scrollbarStartGap:Kn,scrollbarEndGap:mr,totalColumn:yr,totalRow:Cr}=Ve,br=unref(Tn),Pr=unref(vn),gr=unref(Sn),tr=unref(Cn),{scrollLeft:Sr,scrollTop:Dr}=unref(_n),Lr=h$3(ScrollBar,{ref:Dt,alwaysOn:Fn,startGap:Kn,endGap:mr,class:qe.e("horizontal"),clientSize:br,layout:"horizontal",onScroll:Mn,ratio:br*100/gr,scrollFrom:Sr/(gr-br),total:Cr,visible:!0}),Ur=h$3(ScrollBar,{ref:Lt,alwaysOn:Fn,startGap:Kn,endGap:mr,class:qe.e("vertical"),clientSize:Pr,layout:"vertical",onScroll:On,ratio:Pr*100/tr,scrollFrom:Dr/(tr-Pr),total:yr,visible:!0});return{horizontalScrollbar:Lr,verticalScrollbar:Ur}},Dn=()=>{var Fn;const[Kn,mr]=unref($n),[yr,Cr]=unref(wn),{data:br,totalColumn:Pr,totalRow:gr,useIsScrolling:tr,itemKey:Sr}=Ve,Dr=[];if(gr>0&&Pr>0)for(let Lr=yr;Lr<=Cr;Lr++)for(let Ur=Kn;Ur<=mr;Ur++){const Xr=Sr({columnIndex:Ur,data:br,rowIndex:Lr});Dr.push(h$3(Fragment,{key:Xr},(Fn=Pt.default)==null?void 0:Fn.call(Pt,{columnIndex:Ur,data:br,isScrolling:tr?unref(_n).isScrolling:void 0,style:Rn(Lr,Ur),rowIndex:Lr})))}return Dr},jn=()=>{const Fn=resolveDynamicComponent(Ve.innerElement),Kn=Dn();return[h$3(Fn,{style:unref(En),ref:jt},isString$1(Fn)?Kn:{default:()=>Kn})]};return()=>{const Fn=resolveDynamicComponent(Ve.containerElement),{horizontalScrollbar:Kn,verticalScrollbar:mr}=Nn(),yr=jn();return h$3("div",{key:0,class:qe.e("wrapper"),role:Ve.role},[h$3(Fn,{class:Ve.className,style:unref(In),onScroll:kn,ref:At},isString$1(Fn)?yr:{default:()=>yr}),Kn,mr])}}}),FixedSizeGrid=createGrid({name:"ElFixedSizeGrid",getColumnPosition:({columnWidth:le},oe)=>[le,oe*le],getRowPosition:({rowHeight:le},oe)=>[le,oe*le],getEstimatedTotalHeight:({totalRow:le,rowHeight:oe})=>oe*le,getEstimatedTotalWidth:({totalColumn:le,columnWidth:oe})=>oe*le,getColumnOffset:({totalColumn:le,columnWidth:oe,width:ie},ue,de,he,pe,_e)=>{ie=Number(ie);const Ce=Math.max(0,le*oe-ie),xe=Math.min(Ce,ue*oe),Ie=Math.max(0,ue*oe-ie+_e+oe);switch(de==="smart"&&(he>=Ie-ie&&he<=xe+ie?de=AUTO_ALIGNMENT:de=CENTERED_ALIGNMENT),de){case START_ALIGNMENT:return xe;case END_ALIGNMENT:return Ie;case CENTERED_ALIGNMENT:{const $e=Math.round(Ie+(xe-Ie)/2);return $e<Math.ceil(ie/2)?0:$e>Ce+Math.floor(ie/2)?Ce:$e}case AUTO_ALIGNMENT:default:return he>=Ie&&he<=xe?he:Ie>xe||he<Ie?Ie:xe}},getRowOffset:({rowHeight:le,height:oe,totalRow:ie},ue,de,he,pe,_e)=>{oe=Number(oe);const Ce=Math.max(0,ie*le-oe),xe=Math.min(Ce,ue*le),Ie=Math.max(0,ue*le-oe+_e+le);switch(de===SMART_ALIGNMENT&&(he>=Ie-oe&&he<=xe+oe?de=AUTO_ALIGNMENT:de=CENTERED_ALIGNMENT),de){case START_ALIGNMENT:return xe;case END_ALIGNMENT:return Ie;case CENTERED_ALIGNMENT:{const $e=Math.round(Ie+(xe-Ie)/2);return $e<Math.ceil(oe/2)?0:$e>Ce+Math.floor(oe/2)?Ce:$e}case AUTO_ALIGNMENT:default:return he>=Ie&&he<=xe?he:Ie>xe||he<Ie?Ie:xe}},getColumnStartIndexForOffset:({columnWidth:le,totalColumn:oe},ie)=>Math.max(0,Math.min(oe-1,Math.floor(ie/le))),getColumnStopIndexForStartIndex:({columnWidth:le,totalColumn:oe,width:ie},ue,de)=>{const he=ue*le,pe=Math.ceil((ie+de-he)/le);return Math.max(0,Math.min(oe-1,ue+pe-1))},getRowStartIndexForOffset:({rowHeight:le,totalRow:oe},ie)=>Math.max(0,Math.min(oe-1,Math.floor(ie/le))),getRowStopIndexForStartIndex:({rowHeight:le,totalRow:oe,height:ie},ue,de)=>{const he=ue*le,pe=Math.ceil((ie+de-he)/le);return Math.max(0,Math.min(oe-1,ue+pe-1))},initCache:()=>{},clearCache:!0,validateProps:({columnWidth:le,rowHeight:oe})=>{}}),{max:max$4,min:min$6,floor:floor$2}=Math,ACCESS_SIZER_KEY_MAP={column:"columnWidth",row:"rowHeight"},ACCESS_LAST_VISITED_KEY_MAP={column:"lastVisitedColumnIndex",row:"lastVisitedRowIndex"},getItemFromCache=(le,oe,ie,ue)=>{const[de,he,pe]=[ie[ue],le[ACCESS_SIZER_KEY_MAP[ue]],ie[ACCESS_LAST_VISITED_KEY_MAP[ue]]];if(oe>pe){let _e=0;if(pe>=0){const Ce=de[pe];_e=Ce.offset+Ce.size}for(let Ce=pe+1;Ce<=oe;Ce++){const xe=he(Ce);de[Ce]={offset:_e,size:xe},_e+=xe}ie[ACCESS_LAST_VISITED_KEY_MAP[ue]]=oe}return de[oe]},bs=(le,oe,ie,ue,de,he)=>{for(;ie<=ue;){const pe=ie+floor$2((ue-ie)/2),_e=getItemFromCache(le,pe,oe,he).offset;if(_e===de)return pe;_e<de?ie=pe+1:ue=pe-1}return max$4(0,ie-1)},es$1=(le,oe,ie,ue,de)=>{const he=de==="column"?le.totalColumn:le.totalRow;let pe=1;for(;ie<he&&getItemFromCache(le,ie,oe,de).offset<ue;)ie+=pe,pe*=2;return bs(le,oe,floor$2(ie/2),min$6(ie,he-1),ue,de)},findItem=(le,oe,ie,ue)=>{const[de,he]=[oe[ue],oe[ACCESS_LAST_VISITED_KEY_MAP[ue]]];return(he>0?de[he].offset:0)>=ie?bs(le,oe,0,he,ie,ue):es$1(le,oe,max$4(0,he),ie,ue)},getEstimatedTotalHeight=({totalRow:le},{estimatedRowHeight:oe,lastVisitedRowIndex:ie,row:ue})=>{let de=0;if(ie>=le&&(ie=le-1),ie>=0){const _e=ue[ie];de=_e.offset+_e.size}const pe=(le-ie-1)*oe;return de+pe},getEstimatedTotalWidth=({totalColumn:le},{column:oe,estimatedColumnWidth:ie,lastVisitedColumnIndex:ue})=>{let de=0;if(ue>le&&(ue=le-1),ue>=0){const _e=oe[ue];de=_e.offset+_e.size}const pe=(le-ue-1)*ie;return de+pe},ACCESS_ESTIMATED_SIZE_KEY_MAP={column:getEstimatedTotalWidth,row:getEstimatedTotalHeight},getOffset$2=(le,oe,ie,ue,de,he,pe)=>{const[_e,Ce]=[he==="row"?le.height:le.width,ACCESS_ESTIMATED_SIZE_KEY_MAP[he]],xe=getItemFromCache(le,oe,de,he),Ie=Ce(le,de),$e=max$4(0,min$6(Ie-_e,xe.offset)),Ne=max$4(0,xe.offset-_e+pe+xe.size);switch(ie===SMART_ALIGNMENT&&(ue>=Ne-_e&&ue<=$e+_e?ie=AUTO_ALIGNMENT:ie=CENTERED_ALIGNMENT),ie){case START_ALIGNMENT:return $e;case END_ALIGNMENT:return Ne;case CENTERED_ALIGNMENT:return Math.round(Ne+($e-Ne)/2);case AUTO_ALIGNMENT:default:return ue>=Ne&&ue<=$e?ue:Ne>$e||ue<Ne?Ne:$e}},DynamicSizeGrid=createGrid({name:"ElDynamicSizeGrid",getColumnPosition:(le,oe,ie)=>{const ue=getItemFromCache(le,oe,ie,"column");return[ue.size,ue.offset]},getRowPosition:(le,oe,ie)=>{const ue=getItemFromCache(le,oe,ie,"row");return[ue.size,ue.offset]},getColumnOffset:(le,oe,ie,ue,de,he)=>getOffset$2(le,oe,ie,ue,de,"column",he),getRowOffset:(le,oe,ie,ue,de,he)=>getOffset$2(le,oe,ie,ue,de,"row",he),getColumnStartIndexForOffset:(le,oe,ie)=>findItem(le,ie,oe,"column"),getColumnStopIndexForStartIndex:(le,oe,ie,ue)=>{const de=getItemFromCache(le,oe,ue,"column"),he=ie+le.width;let pe=de.offset+de.size,_e=oe;for(;_e<le.totalColumn-1&&pe<he;)_e++,pe+=getItemFromCache(le,oe,ue,"column").size;return _e},getEstimatedTotalHeight,getEstimatedTotalWidth,getRowStartIndexForOffset:(le,oe,ie)=>findItem(le,ie,oe,"row"),getRowStopIndexForStartIndex:(le,oe,ie,ue)=>{const{totalRow:de,height:he}=le,pe=getItemFromCache(le,oe,ue,"row"),_e=ie+he;let Ce=pe.size+pe.offset,xe=oe;for(;xe<de-1&&Ce<_e;)xe++,Ce+=getItemFromCache(le,xe,ue,"row").size;return xe},injectToInstance:(le,oe)=>{const ie=({columnIndex:he,rowIndex:pe},_e)=>{var Ce,xe;_e=isUndefined(_e)?!0:_e,isNumber(he)&&(oe.value.lastVisitedColumnIndex=Math.min(oe.value.lastVisitedColumnIndex,he-1)),isNumber(pe)&&(oe.value.lastVisitedRowIndex=Math.min(oe.value.lastVisitedRowIndex,pe-1)),(Ce=le.exposed)==null||Ce.getItemStyleCache.value(-1,null,null),_e&&((xe=le.proxy)==null||xe.$forceUpdate())},ue=(he,pe)=>{ie({columnIndex:he},pe)},de=(he,pe)=>{ie({rowIndex:he},pe)};Object.assign(le.proxy,{resetAfterColumnIndex:ue,resetAfterRowIndex:de,resetAfter:ie})},initCache:({estimatedColumnWidth:le=DEFAULT_DYNAMIC_LIST_ITEM_SIZE,estimatedRowHeight:oe=DEFAULT_DYNAMIC_LIST_ITEM_SIZE})=>({column:{},estimatedColumnWidth:le,estimatedRowHeight:oe,lastVisitedColumnIndex:-1,lastVisitedRowIndex:-1,row:{}}),clearCache:!1,validateProps:({columnWidth:le,rowHeight:oe})=>{}}),_sfc_main$11=defineComponent({props:{item:{type:Object,required:!0},style:{type:Object},height:Number},setup(){return{ns:useNamespace("select")}}});function _sfc_render$7(le,oe,ie,ue,de,he){return openBlock(),createElementBlock("div",{class:normalizeClass(le.ns.be("group","title")),style:normalizeStyle({...le.style,lineHeight:`${le.height}px`})},toDisplayString(le.item.label),7)}var GroupItem=_export_sfc$1(_sfc_main$11,[["render",_sfc_render$7],["__file","group-item.vue"]]);function useOption(le,{emit:oe}){return{hoverItem:()=>{le.disabled||oe("hover",le.index)},selectOptionClick:()=>{le.disabled||oe("select",le.item,le.index)}}}const defaultProps$3={label:"label",value:"value",disabled:"disabled",options:"options"};function useProps(le){const oe=computed(()=>({...defaultProps$3,...le.props}));return{aliasProps:oe,getLabel:pe=>get$1(pe,oe.value.label),getValue:pe=>get$1(pe,oe.value.value),getDisabled:pe=>get$1(pe,oe.value.disabled),getOptions:pe=>get$1(pe,oe.value.options)}}const SelectProps=buildProps({allowCreate:Boolean,autocomplete:{type:definePropType(String),default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:iconPropType,default:circle_close_default},effect:{type:definePropType(String),default:"light"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:274},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,modelValue:{type:definePropType([Array,String,Number,Boolean,Object])},multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:definePropType(Array),required:!0},placeholder:{type:String},teleported:useTooltipContentProps.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:definePropType(Object),default:()=>({})},remote:Boolean,size:useSizeProp,props:{type:definePropType(Object),default:()=>defaultProps$3},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:Boolean,validateEvent:{type:Boolean,default:!0},placement:{type:definePropType(String),values:Ee,default:"bottom-start"},fallbackPlacements:{type:definePropType(Array),default:["bottom-start","top-start","right","left"]},tagType:{...tagProps.type,default:"info"},tagEffect:{...tagProps.effect,default:"light"},...useEmptyValuesProps,...useAriaProps(["ariaLabel"])}),OptionProps=buildProps({data:Array,disabled:Boolean,hovering:Boolean,item:{type:definePropType(Object),required:!0},index:Number,style:Object,selected:Boolean,created:Boolean}),selectEmits={[UPDATE_MODEL_EVENT]:le=>!0,[CHANGE_EVENT]:le=>!0,"remove-tag":le=>!0,"visible-change":le=>!0,focus:le=>le instanceof FocusEvent,blur:le=>le instanceof FocusEvent,clear:()=>!0},optionEmits={hover:le=>isNumber(le),select:(le,oe)=>!0},selectV2InjectionKey=Symbol("ElSelectV2Injection"),_sfc_main$10=defineComponent({props:OptionProps,emits:optionEmits,setup(le,{emit:oe}){const ie=inject(selectV2InjectionKey),ue=useNamespace("select"),{hoverItem:de,selectOptionClick:he}=useOption(le,{emit:oe}),{getLabel:pe}=useProps(ie.props);return{ns:ue,hoverItem:de,selectOptionClick:he,getLabel:pe}}});function _sfc_render$6(le,oe,ie,ue,de,he){return openBlock(),createElementBlock("li",{"aria-selected":le.selected,style:normalizeStyle(le.style),class:normalizeClass([le.ns.be("dropdown","item"),le.ns.is("selected",le.selected),le.ns.is("disabled",le.disabled),le.ns.is("created",le.created),le.ns.is("hovering",le.hovering)]),onMouseenter:le.hoverItem,onClick:withModifiers(le.selectOptionClick,["stop"])},[renderSlot(le.$slots,"default",{item:le.item,index:le.index,disabled:le.disabled},()=>[createBaseVNode("span",null,toDisplayString(le.getLabel(le.item)),1)])],46,["aria-selected","onMouseenter","onClick"])}var OptionItem=_export_sfc$1(_sfc_main$10,[["render",_sfc_render$6],["__file","option-item.vue"]]);const props={loading:Boolean,data:{type:Array,required:!0},hoveringIndex:Number,width:Number};var ElSelectMenu=defineComponent({name:"ElSelectDropdown",props,setup(le,{slots:oe,expose:ie}){const ue=inject(selectV2InjectionKey),de=useNamespace("select"),{getLabel:he,getValue:pe,getDisabled:_e}=useProps(ue.props),Ce=ref([]),xe=ref(),Ie=computed(()=>le.data.length);watch(()=>Ie.value,()=>{var bn,vn;(vn=(bn=ue.tooltipRef.value).updatePopper)==null||vn.call(bn)});const $e=computed(()=>isUndefined(ue.props.estimatedOptionHeight)),Ne=computed(()=>$e.value?{itemSize:ue.props.itemHeight}:{estimatedSize:ue.props.estimatedOptionHeight,itemSize:bn=>Ce.value[bn]}),Oe=(bn=[],vn)=>{const{props:{valueKey:Tn}}=ue;return isObject$d(vn)?bn&&bn.some($n=>toRaw(get$1($n,Tn))===get$1(vn,Tn)):bn.includes(vn)},Fe=(bn,vn)=>{if(isObject$d(vn)){const{valueKey:Tn}=ue.props;return get$1(bn,Tn)===get$1(vn,Tn)}else return bn===vn},Ve=(bn,vn)=>ue.props.multiple?Oe(bn,pe(vn)):Fe(bn,pe(vn)),ze=(bn,vn)=>{const{disabled:Tn,multiple:$n,multipleLimit:wn}=ue.props;return Tn||!vn&&($n?wn>0&&bn.length>=wn:!1)},Ue=bn=>le.hoveringIndex===bn;ie({listRef:xe,isSized:$e,isItemDisabled:ze,isItemHovering:Ue,isItemSelected:Ve,scrollToItem:bn=>{const vn=xe.value;vn&&vn.scrollToItem(bn)},resetScrollTop:()=>{const bn=xe.value;bn&&bn.resetScrollTop()}});const kt=bn=>{const{index:vn,data:Tn,style:$n}=bn,wn=unref($e),{itemSize:Cn,estimatedSize:Sn}=unref(Ne),{modelValue:In}=ue.props,{onSelect:En,onHover:xn}=ue,kn=Tn[vn];if(kn.type==="Group")return createVNode(GroupItem,{item:kn,style:$n,height:wn?Cn:Sn},null);const On=Ve(In,kn),Mn=ze(In,On),Un=Ue(vn);return createVNode(OptionItem,mergeProps(bn,{selected:On,disabled:_e(kn)||Mn,created:!!kn.created,hovering:Un,item:kn,onSelect:En,onHover:xn}),{default:zn=>{var Hn;return((Hn=oe.default)==null?void 0:Hn.call(oe,zn))||createVNode("span",null,[he(kn)])}})},{onKeyboardNavigate:At,onKeyboardSelect:Dt}=ue,Lt=()=>{At("forward")},jt=()=>{At("backward")},_n=bn=>{const{code:vn}=bn,{tab:Tn,esc:$n,down:wn,up:Cn,enter:Sn}=EVENT_CODE;switch(vn!==Tn&&(bn.preventDefault(),bn.stopPropagation()),vn){case Tn:case $n:break;case wn:{Lt();break}case Cn:{jt();break}case Sn:{Dt();break}}};return()=>{var bn,vn,Tn,$n;const{data:wn,width:Cn}=le,{height:Sn,multiple:In,scrollbarAlwaysOn:En}=ue.props,xn=unref($e)?FixedSizeList:DynamicSizeList;return createVNode("div",{class:[de.b("dropdown"),de.is("multiple",In)],style:{width:`${Cn}px`}},[(bn=oe.header)==null?void 0:bn.call(oe),((vn=oe.loading)==null?void 0:vn.call(oe))||((Tn=oe.empty)==null?void 0:Tn.call(oe))||createVNode(xn,mergeProps({ref:xe},unref(Ne),{className:de.be("dropdown","list"),scrollbarAlwaysOn:En,data:wn,height:Sn,width:Cn,total:wn.length,onKeydown:_n}),{default:kn=>createVNode(kt,kn,null)}),($n=oe.footer)==null?void 0:$n.call(oe)])}}});function useAllowCreate(le,oe){const{aliasProps:ie,getLabel:ue,getValue:de}=useProps(le),he=ref(0),pe=ref(),_e=computed(()=>le.allowCreate&&le.filterable);function Ce(Oe){const Fe=Ve=>ue(Ve)===Oe;return le.options&&le.options.some(Fe)||oe.createdOptions.some(Fe)}function xe(Oe){_e.value&&(le.multiple&&Oe.created?he.value++:pe.value=Oe)}function Ie(Oe){if(_e.value)if(Oe&&Oe.length>0){if(Ce(Oe))return;const Fe={[ie.value.value]:Oe,[ie.value.label]:Oe,created:!0,[ie.value.disabled]:!1};oe.createdOptions.length>=he.value?oe.createdOptions[he.value]=Fe:oe.createdOptions.push(Fe)}else if(le.multiple)oe.createdOptions.length=he.value;else{const Fe=pe.value;oe.createdOptions.length=0,Fe&&Fe.created&&oe.createdOptions.push(Fe)}}function $e(Oe){if(!_e.value||!Oe||!Oe.created||Oe.created&&le.reserveKeyword&&oe.inputValue===ue(Oe))return;const Fe=oe.createdOptions.findIndex(Ve=>de(Ve)===de(Oe));~Fe&&(oe.createdOptions.splice(Fe,1),he.value--)}function Ne(){_e.value&&(oe.createdOptions.length=0,he.value=0)}return{createNewOption:Ie,removeNewOption:$e,selectNewOption:xe,clearAllNewOption:Ne}}const MINIMUM_INPUT_WIDTH=11,useSelect$1=(le,oe)=>{const{t:ie}=useLocale(),ue=useNamespace("select"),de=useNamespace("input"),{form:he,formItem:pe}=useFormItem(),{inputId:_e}=useFormItemInputId(le,{formItemContext:pe}),{aliasProps:Ce,getLabel:xe,getValue:Ie,getDisabled:$e,getOptions:Ne}=useProps(le),{valueOnClear:Oe,isEmptyValue:Fe}=useEmptyValues(le),Ve=reactive({inputValue:"",cachedOptions:[],createdOptions:[],hoveringIndex:-1,inputHovering:!1,selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,previousQuery:null,previousValue:void 0,selectedLabel:"",menuVisibleOnFocus:!1,isBeforeHide:!1}),ze=ref(-1),Ue=ref(),Pt=ref(),qe=ref(),Et=ref(),kt=ref(),At=ref(),Dt=ref(),Lt=ref(),jt=ref(),_n=ref(),bn=ref(),{isComposing:vn,handleCompositionStart:Tn,handleCompositionEnd:$n,handleCompositionUpdate:wn}=useComposition({afterComposition:qn=>Zr(qn)}),{wrapperRef:Cn,isFocused:Sn}=useFocusController(kt,{beforeFocus(){return kn.value},afterFocus(){le.automaticDropdown&&!xn.value&&(xn.value=!0,Ve.menuVisibleOnFocus=!0)},beforeBlur(qn){var Ln,vr;return((Ln=qe.value)==null?void 0:Ln.isFocusInsideContent(qn))||((vr=Et.value)==null?void 0:vr.isFocusInsideContent(qn))},afterBlur(){xn.value=!1,Ve.menuVisibleOnFocus=!1}}),In=ref([]),En=ref([]),xn=ref(!1),kn=computed(()=>le.disabled||(he==null?void 0:he.disabled)),On=computed(()=>{const qn=En.value.length*le.itemHeight;return qn>le.height?le.height:qn}),Mn=computed(()=>le.multiple?isArray$3(le.modelValue)&&le.modelValue.length>0:!Fe(le.modelValue)),Un=computed(()=>le.clearable&&!kn.value&&Ve.inputHovering&&Mn.value),zn=computed(()=>le.remote&&le.filterable?"":arrow_down_default),Hn=computed(()=>zn.value&&ue.is("reverse",xn.value)),Rn=computed(()=>(pe==null?void 0:pe.validateState)||""),Jn=computed(()=>{if(Rn.value)return ValidateComponentsMap[Rn.value]}),Qn=computed(()=>le.remote?300:0),_r=computed(()=>le.loading?le.loadingText||ie("el.select.loading"):le.remote&&!Ve.inputValue&&In.value.length===0?!1:le.filterable&&Ve.inputValue&&In.value.length>0&&En.value.length===0?le.noMatchText||ie("el.select.noMatch"):In.value.length===0?le.noDataText||ie("el.select.noData"):null),Zn=qn=>{const Ln=vr=>{if(le.filterable&&isFunction$2(le.filterMethod)||le.filterable&&le.remote&&isFunction$2(le.remoteMethod))return!0;const Ir=new RegExp(escapeStringRegexp(qn),"i");return qn?Ir.test(xe(vr)||""):!0};return le.loading?[]:[...Ve.createdOptions,...le.options].reduce((vr,Ir)=>{const Kr=Ne(Ir);if(isArray$3(Kr)){const to=Kr.filter(Ln);to.length>0&&vr.push({label:xe(Ir),type:"Group"},...to)}else(le.remote||Ln(Ir))&&vr.push(Ir);return vr},[])},Gn=()=>{In.value=Zn(""),En.value=Zn(Ve.inputValue)},Nn=computed(()=>{const qn=new Map;return In.value.forEach((Ln,vr)=>{qn.set(Pn(Ie(Ln)),{option:Ln,index:vr})}),qn}),Dn=computed(()=>{const qn=new Map;return En.value.forEach((Ln,vr)=>{qn.set(Pn(Ie(Ln)),{option:Ln,index:vr})}),qn}),jn=computed(()=>En.value.every(qn=>$e(qn))),ir=useFormSize(),Fn=computed(()=>ir.value==="small"?"small":"default"),Kn=()=>{var qn;ze.value=((qn=Ue.value)==null?void 0:qn.offsetWidth)||200},mr=()=>{if(!Pt.value)return 0;const qn=window.getComputedStyle(Pt.value);return Number.parseFloat(qn.gap||"6px")},yr=computed(()=>{const qn=mr();return{maxWidth:`${bn.value&&le.maxCollapseTags===1?Ve.selectionWidth-Ve.collapseItemWidth-qn:Ve.selectionWidth}px`}}),Cr=computed(()=>({maxWidth:`${Ve.selectionWidth}px`})),br=computed(()=>({width:`${Math.max(Ve.calculatorWidth,MINIMUM_INPUT_WIDTH)}px`})),Pr=computed(()=>isArray$3(le.modelValue)?le.modelValue.length===0&&!Ve.inputValue:le.filterable?!Ve.inputValue:!0),gr=computed(()=>{var qn;const Ln=(qn=le.placeholder)!=null?qn:ie("el.select.placeholder");return le.multiple||!Mn.value?Ln:Ve.selectedLabel}),tr=computed(()=>{var qn,Ln;return(Ln=(qn=qe.value)==null?void 0:qn.popperRef)==null?void 0:Ln.contentRef}),Sr=computed(()=>{if(le.multiple){const qn=le.modelValue.length;if(le.modelValue.length>0&&Dn.value.has(le.modelValue[qn-1])){const{index:Ln}=Dn.value.get(le.modelValue[qn-1]);return Ln}}else if(le.modelValue&&Dn.value.has(le.modelValue)){const{index:qn}=Dn.value.get(le.modelValue);return qn}return-1}),Dr=computed({get(){return xn.value&&_r.value!==!1},set(qn){xn.value=qn}}),Lr=computed(()=>le.multiple?le.collapseTags?Ve.cachedOptions.slice(0,le.maxCollapseTags):Ve.cachedOptions:[]),Ur=computed(()=>le.multiple?le.collapseTags?Ve.cachedOptions.slice(le.maxCollapseTags):[]:[]),{createNewOption:Xr,removeNewOption:qr,selectNewOption:Wn,clearAllNewOption:wr}=useAllowCreate(le,Ve),Vn=()=>{kn.value||(Ve.menuVisibleOnFocus?Ve.menuVisibleOnFocus=!1:xn.value=!xn.value)},sr=()=>{Ve.inputValue.length>0&&!xn.value&&(xn.value=!0),Xr(Ve.inputValue),Ar(Ve.inputValue)},nr=debounce(sr,Qn.value),Ar=qn=>{Ve.previousQuery===qn||vn.value||(Ve.previousQuery=qn,le.filterable&&isFunction$2(le.filterMethod)?le.filterMethod(qn):le.filterable&&le.remote&&isFunction$2(le.remoteMethod)&&le.remoteMethod(qn),le.defaultFirstOption&&(le.filterable||le.remote)&&En.value.length?nextTick(Wr):nextTick(Gr))},Wr=()=>{const qn=En.value.filter(Ir=>!Ir.disabled&&Ir.type!=="Group"),Ln=qn.find(Ir=>Ir.created),vr=qn[0];Ve.hoveringIndex=Hr(En.value,Ln||vr)},Yn=qn=>{isEqual$1(le.modelValue,qn)||oe(CHANGE_EVENT,qn)},Nr=qn=>{oe(UPDATE_MODEL_EVENT,qn),Yn(qn),Ve.previousValue=le.multiple?String(qn):qn},Hr=(qn=[],Ln)=>{if(!isObject$d(Ln))return qn.indexOf(Ln);const vr=le.valueKey;let Ir=-1;return qn.some((Kr,to)=>get$1(Kr,vr)===get$1(Ln,vr)?(Ir=to,!0):!1),Ir},Pn=qn=>isObject$d(qn)?get$1(qn,le.valueKey):qn,An=()=>{Kn()},Bn=()=>{Ve.selectionWidth=Pt.value.getBoundingClientRect().width},or=()=>{Ve.calculatorWidth=At.value.getBoundingClientRect().width},xr=()=>{Ve.collapseItemWidth=bn.value.getBoundingClientRect().width},Er=()=>{var qn,Ln;(Ln=(qn=qe.value)==null?void 0:qn.updatePopper)==null||Ln.call(qn)},kr=()=>{var qn,Ln;(Ln=(qn=Et.value)==null?void 0:qn.updatePopper)==null||Ln.call(qn)},Rr=qn=>{if(le.multiple){let Ln=le.modelValue.slice();const vr=Hr(Ln,Ie(qn));vr>-1?(Ln=[...Ln.slice(0,vr),...Ln.slice(vr+1)],Ve.cachedOptions.splice(vr,1),qr(qn)):(le.multipleLimit<=0||Ln.length<le.multipleLimit)&&(Ln=[...Ln,Ie(qn)],Ve.cachedOptions.push(qn),Wn(qn)),Nr(Ln),qn.created&&Ar(""),le.filterable&&!le.reserveKeyword&&(Ve.inputValue="")}else Ve.selectedLabel=xe(qn),Nr(Ie(qn)),xn.value=!1,Wn(qn),qn.created||wr();Mr()},Or=(qn,Ln)=>{let vr=le.modelValue.slice();const Ir=Hr(vr,Ie(Ln));Ir>-1&&!kn.value&&(vr=[...le.modelValue.slice(0,Ir),...le.modelValue.slice(Ir+1)],Ve.cachedOptions.splice(Ir,1),Nr(vr),oe("remove-tag",Ie(Ln)),qr(Ln)),qn.stopPropagation(),Mr()},Mr=()=>{var qn;(qn=kt.value)==null||qn.focus()},$r=()=>{var qn;(qn=kt.value)==null||qn.blur()},zr=()=>{Ve.inputValue.length>0?Ve.inputValue="":xn.value=!1},Vr=qn=>findLastIndex(qn,Ln=>!Ve.cachedOptions.some(vr=>Ie(vr)===Ln&&$e(vr))),Fr=qn=>{if(le.multiple&&qn.code!==EVENT_CODE.delete&&Ve.inputValue.length===0){qn.preventDefault();const Ln=le.modelValue.slice(),vr=Vr(Ln);if(vr<0)return;const Ir=Ln[vr];Ln.splice(vr,1);const Kr=Ve.cachedOptions[vr];Ve.cachedOptions.splice(vr,1),qr(Kr),Nr(Ln),oe("remove-tag",Ir)}},jr=()=>{let qn;isArray$3(le.modelValue)?qn=[]:qn=Oe.value,le.multiple?Ve.cachedOptions=[]:Ve.selectedLabel="",xn.value=!1,Nr(qn),oe("clear"),wr(),Mr()},Xn=(qn,Ln=void 0)=>{const vr=En.value;if(!["forward","backward"].includes(qn)||kn.value||vr.length<=0||jn.value||vn.value)return;if(!xn.value)return Vn();Ln===void 0&&(Ln=Ve.hoveringIndex);let Ir=-1;qn==="forward"?(Ir=Ln+1,Ir>=vr.length&&(Ir=0)):qn==="backward"&&(Ir=Ln-1,(Ir<0||Ir>=vr.length)&&(Ir=vr.length-1));const Kr=vr[Ir];if($e(Kr)||Kr.type==="Group")return Xn(qn,Ir);Ve.hoveringIndex=Ir,Yr(Ir)},Tr=()=>{if(xn.value)~Ve.hoveringIndex&&En.value[Ve.hoveringIndex]&&Rr(En.value[Ve.hoveringIndex]);else return Vn()},Br=qn=>{Ve.hoveringIndex=qn??-1},Gr=()=>{le.multiple?Ve.hoveringIndex=En.value.findIndex(qn=>le.modelValue.some(Ln=>Pn(Ln)===Pn(qn))):Ve.hoveringIndex=En.value.findIndex(qn=>Pn(qn)===Pn(le.modelValue))},Zr=qn=>{if(Ve.inputValue=qn.target.value,le.remote)nr();else return sr()},oo=()=>{xn.value=!1,Sn.value&&$r()},Jr=()=>(Ve.isBeforeHide=!1,nextTick(()=>{~Sr.value&&Yr(Ve.hoveringIndex)})),Yr=qn=>{jt.value.scrollToItem(qn)},Qr=(qn,Ln)=>{const vr=Pn(qn);if(Nn.value.has(vr)){const{option:Ir}=Nn.value.get(vr);return Ir}if(Ln&&Ln.length){const Ir=Ln.find(Kr=>Pn(Ie(Kr))===vr);if(Ir)return Ir}return{[Ce.value.value]:qn,[Ce.value.label]:qn}},so=()=>{if(le.multiple)if(le.modelValue.length>0){const qn=Ve.cachedOptions.slice();Ve.cachedOptions.length=0,Ve.previousValue=le.modelValue.toString();for(const Ln of le.modelValue){const vr=Qr(Ln,qn);Ve.cachedOptions.push(vr)}}else Ve.cachedOptions=[],Ve.previousValue=void 0;else if(Mn.value){Ve.previousValue=le.modelValue;const qn=En.value,Ln=qn.findIndex(vr=>Pn(Ie(vr))===Pn(le.modelValue));~Ln?Ve.selectedLabel=xe(qn[Ln]):Ve.selectedLabel=Pn(le.modelValue)}else Ve.selectedLabel="",Ve.previousValue=void 0;wr(),Kn()};return watch(xn,qn=>{qn?Ar(""):(Ve.inputValue="",Ve.previousQuery=null,Ve.isBeforeHide=!0,Xr("")),oe("visible-change",qn)}),watch(()=>le.modelValue,(qn,Ln)=>{var vr;(!qn||le.multiple&&qn.toString()!==Ve.previousValue||!le.multiple&&Pn(qn)!==Pn(Ve.previousValue))&&so(),!isEqual$1(qn,Ln)&&le.validateEvent&&((vr=pe==null?void 0:pe.validate)==null||vr.call(pe,"change").catch(Ir=>void 0))},{deep:!0}),watch(()=>le.options,()=>{const qn=kt.value;(!qn||qn&&document.activeElement!==qn)&&so()},{deep:!0,flush:"post"}),watch(()=>En.value,()=>jt.value&&nextTick(jt.value.resetScrollTop)),watchEffect(()=>{Ve.isBeforeHide||Gn()}),watchEffect(()=>{const{valueKey:qn,options:Ln}=le,vr=new Map;for(const Ir of Ln){const Kr=Ie(Ir);let to=Kr;if(isObject$d(to)&&(to=get$1(Kr,qn)),vr.get(to))break;vr.set(to,!0)}}),onMounted(()=>{so()}),useResizeObserver(Ue,An),useResizeObserver(Pt,Bn),useResizeObserver(At,or),useResizeObserver(jt,Er),useResizeObserver(Cn,Er),useResizeObserver(_n,kr),useResizeObserver(bn,xr),{inputId:_e,collapseTagSize:Fn,currentPlaceholder:gr,expanded:xn,emptyText:_r,popupHeight:On,debounce:Qn,allOptions:In,filteredOptions:En,iconComponent:zn,iconReverse:Hn,tagStyle:yr,collapseTagStyle:Cr,inputStyle:br,popperSize:ze,dropdownMenuVisible:Dr,hasModelValue:Mn,shouldShowPlaceholder:Pr,selectDisabled:kn,selectSize:ir,showClearBtn:Un,states:Ve,isFocused:Sn,nsSelect:ue,nsInput:de,calculatorRef:At,inputRef:kt,menuRef:jt,tagMenuRef:_n,tooltipRef:qe,tagTooltipRef:Et,selectRef:Ue,wrapperRef:Cn,selectionRef:Pt,prefixRef:Dt,suffixRef:Lt,collapseItemRef:bn,popperRef:tr,validateState:Rn,validateIcon:Jn,showTagList:Lr,collapseTagList:Ur,debouncedOnInputChange:nr,deleteTag:Or,getLabel:xe,getValue:Ie,getDisabled:$e,getValueKey:Pn,handleClear:jr,handleClickOutside:oo,handleDel:Fr,handleEsc:zr,focus:Mr,blur:$r,handleMenuEnter:Jr,handleResize:An,resetSelectionWidth:Bn,resetCalculatorWidth:or,updateTooltip:Er,updateTagTooltip:kr,updateOptions:Gn,toggleMenu:Vn,scrollTo:Yr,onInput:Zr,onKeyboardNavigate:Xn,onKeyboardSelect:Tr,onSelect:Rr,onHover:Br,handleCompositionStart:Tn,handleCompositionEnd:$n,handleCompositionUpdate:wn}},_sfc_main$$=defineComponent({name:"ElSelectV2",components:{ElSelectMenu,ElTag,ElTooltip,ElIcon},directives:{ClickOutside},props:SelectProps,emits:selectEmits,setup(le,{emit:oe}){const ie=computed(()=>{const{modelValue:de,multiple:he}=le,pe=he?[]:void 0;return isArray$3(de)?he?de:pe:he?pe:de}),ue=useSelect$1(reactive({...toRefs(le),modelValue:ie}),oe);return provide(selectV2InjectionKey,{props:reactive({...toRefs(le),height:ue.popupHeight,modelValue:ie}),expanded:ue.expanded,tooltipRef:ue.tooltipRef,onSelect:ue.onSelect,onHover:ue.onHover,onKeyboardNavigate:ue.onKeyboardNavigate,onKeyboardSelect:ue.onKeyboardSelect}),{...ue,modelValue:ie}}});function _sfc_render$5(le,oe,ie,ue,de,he){const pe=resolveComponent("el-tag"),_e=resolveComponent("el-tooltip"),Ce=resolveComponent("el-icon"),xe=resolveComponent("el-select-menu"),Ie=resolveDirective("click-outside");return withDirectives((openBlock(),createElementBlock("div",{ref:"selectRef",class:normalizeClass([le.nsSelect.b(),le.nsSelect.m(le.selectSize)]),onMouseenter:$e=>le.states.inputHovering=!0,onMouseleave:$e=>le.states.inputHovering=!1},[createVNode(_e,{ref:"tooltipRef",visible:le.dropdownMenuVisible,teleported:le.teleported,"popper-class":[le.nsSelect.e("popper"),le.popperClass],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":le.popperOptions,"fallback-placements":le.fallbackPlacements,effect:le.effect,placement:le.placement,pure:"",transition:`${le.nsSelect.namespace.value}-zoom-in-top`,trigger:"click",persistent:le.persistent,onBeforeShow:le.handleMenuEnter,onHide:$e=>le.states.isBeforeHide=!1},{default:withCtx(()=>[createBaseVNode("div",{ref:"wrapperRef",class:normalizeClass([le.nsSelect.e("wrapper"),le.nsSelect.is("focused",le.isFocused),le.nsSelect.is("hovering",le.states.inputHovering),le.nsSelect.is("filterable",le.filterable),le.nsSelect.is("disabled",le.selectDisabled)]),onClick:withModifiers(le.toggleMenu,["prevent"])},[le.$slots.prefix?(openBlock(),createElementBlock("div",{key:0,ref:"prefixRef",class:normalizeClass(le.nsSelect.e("prefix"))},[renderSlot(le.$slots,"prefix")],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{ref:"selectionRef",class:normalizeClass([le.nsSelect.e("selection"),le.nsSelect.is("near",le.multiple&&!le.$slots.prefix&&!!le.modelValue.length)])},[le.multiple?renderSlot(le.$slots,"tag",{key:0},()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(le.showTagList,$e=>(openBlock(),createElementBlock("div",{key:le.getValueKey(le.getValue($e)),class:normalizeClass(le.nsSelect.e("selected-item"))},[createVNode(pe,{closable:!le.selectDisabled&&!le.getDisabled($e),size:le.collapseTagSize,type:le.tagType,effect:le.tagEffect,"disable-transitions":"",style:normalizeStyle(le.tagStyle),onClose:Ne=>le.deleteTag(Ne,$e)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(le.nsSelect.e("tags-text"))},[renderSlot(le.$slots,"label",{label:le.getLabel($e),value:le.getValue($e)},()=>[createTextVNode(toDisplayString(le.getLabel($e)),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),le.collapseTags&&le.modelValue.length>le.maxCollapseTags?(openBlock(),createBlock(_e,{key:0,ref:"tagTooltipRef",disabled:le.dropdownMenuVisible||!le.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:le.effect,placement:"bottom",teleported:le.teleported},{default:withCtx(()=>[createBaseVNode("div",{ref:"collapseItemRef",class:normalizeClass(le.nsSelect.e("selected-item"))},[createVNode(pe,{closable:!1,size:le.collapseTagSize,type:le.tagType,effect:le.tagEffect,style:normalizeStyle(le.collapseTagStyle),"disable-transitions":""},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(le.nsSelect.e("tags-text"))}," + "+toDisplayString(le.modelValue.length-le.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:withCtx(()=>[createBaseVNode("div",{ref:"tagMenuRef",class:normalizeClass(le.nsSelect.e("selection"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(le.collapseTagList,$e=>(openBlock(),createElementBlock("div",{key:le.getValueKey(le.getValue($e)),class:normalizeClass(le.nsSelect.e("selected-item"))},[createVNode(pe,{class:"in-tooltip",closable:!le.selectDisabled&&!le.getDisabled($e),size:le.collapseTagSize,type:le.tagType,effect:le.tagEffect,"disable-transitions":"",onClose:Ne=>le.deleteTag(Ne,$e)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(le.nsSelect.e("tags-text"))},[renderSlot(le.$slots,"label",{label:le.getLabel($e),value:le.getValue($e)},()=>[createTextVNode(toDisplayString(le.getLabel($e)),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):createCommentVNode("v-if",!0)]):createCommentVNode("v-if",!0),le.selectDisabled?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass([le.nsSelect.e("selected-item"),le.nsSelect.e("input-wrapper"),le.nsSelect.is("hidden",!le.filterable)])},[withDirectives(createBaseVNode("input",{id:le.inputId,ref:"inputRef","onUpdate:modelValue":$e=>le.states.inputValue=$e,style:normalizeStyle(le.inputStyle),autocomplete:le.autocomplete,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":le.expanded,"aria-label":le.ariaLabel,class:normalizeClass([le.nsSelect.e("input"),le.nsSelect.is(le.selectSize)]),disabled:le.selectDisabled,role:"combobox",readonly:!le.filterable,spellcheck:"false",type:"text",name:le.name,onInput:le.onInput,onCompositionstart:le.handleCompositionStart,onCompositionupdate:le.handleCompositionUpdate,onCompositionend:le.handleCompositionEnd,onKeydown:[withKeys(withModifiers($e=>le.onKeyboardNavigate("backward"),["stop","prevent"]),["up"]),withKeys(withModifiers($e=>le.onKeyboardNavigate("forward"),["stop","prevent"]),["down"]),withKeys(withModifiers(le.onKeyboardSelect,["stop","prevent"]),["enter"]),withKeys(withModifiers(le.handleEsc,["stop","prevent"]),["esc"]),withKeys(withModifiers(le.handleDel,["stop"]),["delete"])],onClick:withModifiers(le.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","autocomplete","aria-expanded","aria-label","disabled","readonly","name","onInput","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown","onClick"]),[[vModelText,le.states.inputValue]]),le.filterable?(openBlock(),createElementBlock("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:normalizeClass(le.nsSelect.e("input-calculator")),textContent:toDisplayString(le.states.inputValue)},null,10,["textContent"])):createCommentVNode("v-if",!0)],2)),le.shouldShowPlaceholder?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass([le.nsSelect.e("selected-item"),le.nsSelect.e("placeholder"),le.nsSelect.is("transparent",!le.hasModelValue||le.expanded&&!le.states.inputValue)])},[le.hasModelValue?renderSlot(le.$slots,"label",{key:0,label:le.currentPlaceholder,value:le.modelValue},()=>[createBaseVNode("span",null,toDisplayString(le.currentPlaceholder),1)]):(openBlock(),createElementBlock("span",{key:1},toDisplayString(le.currentPlaceholder),1))],2)):createCommentVNode("v-if",!0)],2),createBaseVNode("div",{ref:"suffixRef",class:normalizeClass(le.nsSelect.e("suffix"))},[le.iconComponent?withDirectives((openBlock(),createBlock(Ce,{key:0,class:normalizeClass([le.nsSelect.e("caret"),le.nsInput.e("icon"),le.iconReverse])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(le.iconComponent)))]),_:1},8,["class"])),[[vShow,!le.showClearBtn]]):createCommentVNode("v-if",!0),le.showClearBtn&&le.clearIcon?(openBlock(),createBlock(Ce,{key:1,class:normalizeClass([le.nsSelect.e("caret"),le.nsInput.e("icon"),le.nsSelect.e("clear")]),onClick:withModifiers(le.handleClear,["prevent","stop"])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(le.clearIcon)))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0),le.validateState&&le.validateIcon?(openBlock(),createBlock(Ce,{key:2,class:normalizeClass([le.nsInput.e("icon"),le.nsInput.e("validateIcon")])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(le.validateIcon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2)],10,["onClick"])]),content:withCtx(()=>[createVNode(xe,{ref:"menuRef",data:le.filteredOptions,width:le.popperSize,"hovering-index":le.states.hoveringIndex,"scrollbar-always-on":le.scrollbarAlwaysOn},createSlots({default:withCtx($e=>[renderSlot(le.$slots,"default",normalizeProps(guardReactiveProps($e)))]),_:2},[le.$slots.header?{name:"header",fn:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(le.nsSelect.be("dropdown","header"))},[renderSlot(le.$slots,"header")],2)])}:void 0,le.$slots.loading&&le.loading?{name:"loading",fn:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(le.nsSelect.be("dropdown","loading"))},[renderSlot(le.$slots,"loading")],2)])}:le.loading||le.filteredOptions.length===0?{name:"empty",fn:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(le.nsSelect.be("dropdown","empty"))},[renderSlot(le.$slots,"empty",{},()=>[createBaseVNode("span",null,toDisplayString(le.emptyText),1)])],2)])}:void 0,le.$slots.footer?{name:"footer",fn:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(le.nsSelect.be("dropdown","footer"))},[renderSlot(le.$slots,"footer")],2)])}:void 0]),1032,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","teleported","popper-class","popper-options","fallback-placements","effect","placement","transition","persistent","onBeforeShow","onHide"])],42,["onMouseenter","onMouseleave"])),[[Ie,le.handleClickOutside,le.popperRef]])}var Select=_export_sfc$1(_sfc_main$$,[["render",_sfc_render$5],["__file","select.vue"]]);const ElSelectV2=withInstall(Select),skeletonProps=buildProps({animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:Number}}),skeletonItemProps=buildProps({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),__default__$D=defineComponent({name:"ElSkeletonItem"}),_sfc_main$_=defineComponent({...__default__$D,props:skeletonItemProps,setup(le){const oe=useNamespace("skeleton");return(ie,ue)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(oe).e("item"),unref(oe).e(ie.variant)])},[ie.variant==="image"?(openBlock(),createBlock(unref(picture_filled_default),{key:0})):createCommentVNode("v-if",!0)],2))}});var SkeletonItem=_export_sfc$1(_sfc_main$_,[["__file","skeleton-item.vue"]]);const __default__$C=defineComponent({name:"ElSkeleton"}),_sfc_main$Z=defineComponent({...__default__$C,props:skeletonProps,setup(le,{expose:oe}){const ie=le,ue=useNamespace("skeleton"),de=useThrottleRender(toRef(ie,"loading"),ie.throttle);return oe({uiLoading:de}),(he,pe)=>unref(de)?(openBlock(),createElementBlock("div",mergeProps({key:0,class:[unref(ue).b(),unref(ue).is("animated",he.animated)]},he.$attrs),[(openBlock(!0),createElementBlock(Fragment,null,renderList(he.count,_e=>(openBlock(),createElementBlock(Fragment,{key:_e},[he.loading?renderSlot(he.$slots,"template",{key:_e},()=>[createVNode(SkeletonItem,{class:normalizeClass(unref(ue).is("first")),variant:"p"},null,8,["class"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(he.rows,Ce=>(openBlock(),createBlock(SkeletonItem,{key:Ce,class:normalizeClass([unref(ue).e("paragraph"),unref(ue).is("last",Ce===he.rows&&he.rows>1)]),variant:"p"},null,8,["class"]))),128))]):createCommentVNode("v-if",!0)],64))),128))],16)):renderSlot(he.$slots,"default",normalizeProps(mergeProps({key:1},he.$attrs)))}});var Skeleton=_export_sfc$1(_sfc_main$Z,[["__file","skeleton.vue"]]);const ElSkeleton=withInstall(Skeleton,{SkeletonItem}),ElSkeletonItem=withNoopInstall(SkeletonItem),sliderContextKey=Symbol("sliderContextKey"),sliderProps=buildProps({modelValue:{type:definePropType([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:useSizeProp,inputSize:useSizeProp,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:definePropType(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:definePropType(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:Ee,default:"top"},marks:{type:definePropType(Object)},validateEvent:{type:Boolean,default:!0},...useAriaProps(["ariaLabel"])}),isValidValue$1=le=>isNumber(le)||isArray$3(le)&&le.every(isNumber),sliderEmits={[UPDATE_MODEL_EVENT]:isValidValue$1,[INPUT_EVENT]:isValidValue$1,[CHANGE_EVENT]:isValidValue$1},useLifecycle=(le,oe,ie)=>{const ue=ref();return onMounted(async()=>{le.range?(Array.isArray(le.modelValue)?(oe.firstValue=Math.max(le.min,le.modelValue[0]),oe.secondValue=Math.min(le.max,le.modelValue[1])):(oe.firstValue=le.min,oe.secondValue=le.max),oe.oldValue=[oe.firstValue,oe.secondValue]):(typeof le.modelValue!="number"||Number.isNaN(le.modelValue)?oe.firstValue=le.min:oe.firstValue=Math.min(le.max,Math.max(le.min,le.modelValue)),oe.oldValue=oe.firstValue),useEventListener(window,"resize",ie),await nextTick(),ie()}),{sliderWrapper:ue}},useMarks=le=>computed(()=>le.marks?Object.keys(le.marks).map(Number.parseFloat).sort((ie,ue)=>ie-ue).filter(ie=>ie<=le.max&&ie>=le.min).map(ie=>({point:ie,position:(ie-le.min)*100/(le.max-le.min),mark:le.marks[ie]})):[]),useSlide=(le,oe,ie)=>{const{form:ue,formItem:de}=useFormItem(),he=shallowRef(),pe=ref(),_e=ref(),Ce={firstButton:pe,secondButton:_e},xe=computed(()=>le.disabled||(ue==null?void 0:ue.disabled)||!1),Ie=computed(()=>Math.min(oe.firstValue,oe.secondValue)),$e=computed(()=>Math.max(oe.firstValue,oe.secondValue)),Ne=computed(()=>le.range?`${100*($e.value-Ie.value)/(le.max-le.min)}%`:`${100*(oe.firstValue-le.min)/(le.max-le.min)}%`),Oe=computed(()=>le.range?`${100*(Ie.value-le.min)/(le.max-le.min)}%`:"0%"),Fe=computed(()=>le.vertical?{height:le.height}:{}),Ve=computed(()=>le.vertical?{height:Ne.value,bottom:Oe.value}:{width:Ne.value,left:Oe.value}),ze=()=>{he.value&&(oe.sliderSize=he.value[`client${le.vertical?"Height":"Width"}`])},Ue=vn=>{const Tn=le.min+vn*(le.max-le.min)/100;if(!le.range)return pe;let $n;return Math.abs(Ie.value-Tn)<Math.abs($e.value-Tn)?$n=oe.firstValue<oe.secondValue?"firstButton":"secondButton":$n=oe.firstValue>oe.secondValue?"firstButton":"secondButton",Ce[$n]},Pt=vn=>{const Tn=Ue(vn);return Tn.value.setPosition(vn),Tn},qe=vn=>{oe.firstValue=vn??le.min,kt(le.range?[Ie.value,$e.value]:vn??le.min)},Et=vn=>{oe.secondValue=vn,le.range&&kt([Ie.value,$e.value])},kt=vn=>{ie(UPDATE_MODEL_EVENT,vn),ie(INPUT_EVENT,vn)},At=async()=>{await nextTick(),ie(CHANGE_EVENT,le.range?[Ie.value,$e.value]:le.modelValue)},Dt=vn=>{var Tn,$n,wn,Cn,Sn,In;if(xe.value||oe.dragging)return;ze();let En=0;if(le.vertical){const xn=(wn=($n=(Tn=vn.touches)==null?void 0:Tn.item(0))==null?void 0:$n.clientY)!=null?wn:vn.clientY;En=(he.value.getBoundingClientRect().bottom-xn)/oe.sliderSize*100}else{const xn=(In=(Sn=(Cn=vn.touches)==null?void 0:Cn.item(0))==null?void 0:Sn.clientX)!=null?In:vn.clientX,kn=he.value.getBoundingClientRect().left;En=(xn-kn)/oe.sliderSize*100}if(!(En<0||En>100))return Pt(En)};return{elFormItem:de,slider:he,firstButton:pe,secondButton:_e,sliderDisabled:xe,minValue:Ie,maxValue:$e,runwayStyle:Fe,barStyle:Ve,resetSize:ze,setPosition:Pt,emitChange:At,onSliderWrapperPrevent:vn=>{var Tn,$n;((Tn=Ce.firstButton.value)!=null&&Tn.dragging||($n=Ce.secondButton.value)!=null&&$n.dragging)&&vn.preventDefault()},onSliderClick:vn=>{Dt(vn)&&At()},onSliderDown:async vn=>{const Tn=Dt(vn);Tn&&(await nextTick(),Tn.value.onButtonDown(vn))},onSliderMarkerDown:vn=>{xe.value||oe.dragging||Pt(vn)},setFirstValue:qe,setSecondValue:Et}},{left,down,right,up,home,end,pageUp,pageDown}=EVENT_CODE,useTooltip=(le,oe,ie)=>{const ue=ref(),de=ref(!1),he=computed(()=>oe.value instanceof Function),pe=computed(()=>he.value&&oe.value(le.modelValue)||le.modelValue),_e=debounce(()=>{ie.value&&(de.value=!0)},50),Ce=debounce(()=>{ie.value&&(de.value=!1)},50);return{tooltip:ue,tooltipVisible:de,formatValue:pe,displayTooltip:_e,hideTooltip:Ce}},useSliderButton=(le,oe,ie)=>{const{disabled:ue,min:de,max:he,step:pe,showTooltip:_e,precision:Ce,sliderSize:xe,formatTooltip:Ie,emitChange:$e,resetSize:Ne,updateDragging:Oe}=inject(sliderContextKey),{tooltip:Fe,tooltipVisible:Ve,formatValue:ze,displayTooltip:Ue,hideTooltip:Pt}=useTooltip(le,Ie,_e),qe=ref(),Et=computed(()=>`${(le.modelValue-de.value)/(he.value-de.value)*100}%`),kt=computed(()=>le.vertical?{bottom:Et.value}:{left:Et.value}),At=()=>{oe.hovering=!0,Ue()},Dt=()=>{oe.hovering=!1,oe.dragging||Pt()},Lt=On=>{ue.value||(On.preventDefault(),In(On),window.addEventListener("mousemove",En),window.addEventListener("touchmove",En),window.addEventListener("mouseup",xn),window.addEventListener("touchend",xn),window.addEventListener("contextmenu",xn),qe.value.focus())},jt=On=>{ue.value||(oe.newPosition=Number.parseFloat(Et.value)+On/(he.value-de.value)*100,kn(oe.newPosition),$e())},_n=()=>{jt(-pe.value)},bn=()=>{jt(pe.value)},vn=()=>{jt(-pe.value*4)},Tn=()=>{jt(pe.value*4)},$n=()=>{ue.value||(kn(0),$e())},wn=()=>{ue.value||(kn(100),$e())},Cn=On=>{let Mn=!0;[left,down].includes(On.key)?_n():[right,up].includes(On.key)?bn():On.key===home?$n():On.key===end?wn():On.key===pageDown?vn():On.key===pageUp?Tn():Mn=!1,Mn&&On.preventDefault()},Sn=On=>{let Mn,Un;return On.type.startsWith("touch")?(Un=On.touches[0].clientY,Mn=On.touches[0].clientX):(Un=On.clientY,Mn=On.clientX),{clientX:Mn,clientY:Un}},In=On=>{oe.dragging=!0,oe.isClick=!0;const{clientX:Mn,clientY:Un}=Sn(On);le.vertical?oe.startY=Un:oe.startX=Mn,oe.startPosition=Number.parseFloat(Et.value),oe.newPosition=oe.startPosition},En=On=>{if(oe.dragging){oe.isClick=!1,Ue(),Ne();let Mn;const{clientX:Un,clientY:zn}=Sn(On);le.vertical?(oe.currentY=zn,Mn=(oe.startY-oe.currentY)/xe.value*100):(oe.currentX=Un,Mn=(oe.currentX-oe.startX)/xe.value*100),oe.newPosition=oe.startPosition+Mn,kn(oe.newPosition)}},xn=()=>{oe.dragging&&(setTimeout(()=>{oe.dragging=!1,oe.hovering||Pt(),oe.isClick||kn(oe.newPosition),$e()},0),window.removeEventListener("mousemove",En),window.removeEventListener("touchmove",En),window.removeEventListener("mouseup",xn),window.removeEventListener("touchend",xn),window.removeEventListener("contextmenu",xn))},kn=async On=>{if(On===null||Number.isNaN(+On))return;On<0?On=0:On>100&&(On=100);const Mn=100/((he.value-de.value)/pe.value);let zn=Math.round(On/Mn)*Mn*(he.value-de.value)*.01+de.value;zn=Number.parseFloat(zn.toFixed(Ce.value)),zn!==le.modelValue&&ie(UPDATE_MODEL_EVENT,zn),!oe.dragging&&le.modelValue!==oe.oldValue&&(oe.oldValue=le.modelValue),await nextTick(),oe.dragging&&Ue(),Fe.value.updatePopper()};return watch(()=>oe.dragging,On=>{Oe(On)}),useEventListener(qe,"touchstart",Lt,{passive:!1}),{disabled:ue,button:qe,tooltip:Fe,tooltipVisible:Ve,showTooltip:_e,wrapperStyle:kt,formatValue:ze,handleMouseEnter:At,handleMouseLeave:Dt,onButtonDown:Lt,onKeyDown:Cn,setPosition:kn}},useStops=(le,oe,ie,ue)=>({stops:computed(()=>{if(!le.showStops||le.min>le.max)return[];if(le.step===0)return[];const pe=(le.max-le.min)/le.step,_e=100*le.step/(le.max-le.min),Ce=Array.from({length:pe-1}).map((xe,Ie)=>(Ie+1)*_e);return le.range?Ce.filter(xe=>xe<100*(ie.value-le.min)/(le.max-le.min)||xe>100*(ue.value-le.min)/(le.max-le.min)):Ce.filter(xe=>xe>100*(oe.firstValue-le.min)/(le.max-le.min))}),getStopStyle:pe=>le.vertical?{bottom:`${pe}%`}:{left:`${pe}%`}}),useWatch=(le,oe,ie,ue,de,he)=>{const pe=xe=>{de(UPDATE_MODEL_EVENT,xe),de(INPUT_EVENT,xe)},_e=()=>le.range?![ie.value,ue.value].every((xe,Ie)=>xe===oe.oldValue[Ie]):le.modelValue!==oe.oldValue,Ce=()=>{var xe,Ie;le.min>le.max&&throwError("Slider","min should not be greater than max.");const $e=le.modelValue;le.range&&Array.isArray($e)?$e[1]<le.min?pe([le.min,le.min]):$e[0]>le.max?pe([le.max,le.max]):$e[0]<le.min?pe([le.min,$e[1]]):$e[1]>le.max?pe([$e[0],le.max]):(oe.firstValue=$e[0],oe.secondValue=$e[1],_e()&&(le.validateEvent&&((xe=he==null?void 0:he.validate)==null||xe.call(he,"change").catch(Ne=>void 0)),oe.oldValue=$e.slice())):!le.range&&typeof $e=="number"&&!Number.isNaN($e)&&($e<le.min?pe(le.min):$e>le.max?pe(le.max):(oe.firstValue=$e,_e()&&(le.validateEvent&&((Ie=he==null?void 0:he.validate)==null||Ie.call(he,"change").catch(Ne=>void 0)),oe.oldValue=$e)))};Ce(),watch(()=>oe.dragging,xe=>{xe||Ce()}),watch(()=>le.modelValue,(xe,Ie)=>{oe.dragging||Array.isArray(xe)&&Array.isArray(Ie)&&xe.every(($e,Ne)=>$e===Ie[Ne])&&oe.firstValue===xe[0]&&oe.secondValue===xe[1]||Ce()},{deep:!0}),watch(()=>[le.min,le.max],()=>{Ce()})},sliderButtonProps=buildProps({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:Ee,default:"top"}}),sliderButtonEmits={[UPDATE_MODEL_EVENT]:le=>isNumber(le)},__default__$B=defineComponent({name:"ElSliderButton"}),_sfc_main$Y=defineComponent({...__default__$B,props:sliderButtonProps,emits:sliderButtonEmits,setup(le,{expose:oe,emit:ie}){const ue=le,de=useNamespace("slider"),he=reactive({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:ue.modelValue}),{disabled:pe,button:_e,tooltip:Ce,showTooltip:xe,tooltipVisible:Ie,wrapperStyle:$e,formatValue:Ne,handleMouseEnter:Oe,handleMouseLeave:Fe,onButtonDown:Ve,onKeyDown:ze,setPosition:Ue}=useSliderButton(ue,he,ie),{hovering:Pt,dragging:qe}=toRefs(he);return oe({onButtonDown:Ve,onKeyDown:ze,setPosition:Ue,hovering:Pt,dragging:qe}),(Et,kt)=>(openBlock(),createElementBlock("div",{ref_key:"button",ref:_e,class:normalizeClass([unref(de).e("button-wrapper"),{hover:unref(Pt),dragging:unref(qe)}]),style:normalizeStyle(unref($e)),tabindex:unref(pe)?-1:0,onMouseenter:unref(Oe),onMouseleave:unref(Fe),onMousedown:unref(Ve),onFocus:unref(Oe),onBlur:unref(Fe),onKeydown:unref(ze)},[createVNode(unref(ElTooltip),{ref_key:"tooltip",ref:Ce,visible:unref(Ie),placement:Et.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":Et.tooltipClass,disabled:!unref(xe),persistent:""},{content:withCtx(()=>[createBaseVNode("span",null,toDisplayString(unref(Ne)),1)]),default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass([unref(de).e("button"),{hover:unref(Pt),dragging:unref(qe)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}});var SliderButton=_export_sfc$1(_sfc_main$Y,[["__file","button.vue"]]);const sliderMarkerProps=buildProps({mark:{type:definePropType([String,Object]),default:void 0}});var SliderMarker=defineComponent({name:"ElSliderMarker",props:sliderMarkerProps,setup(le){const oe=useNamespace("slider"),ie=computed(()=>isString$1(le.mark)?le.mark:le.mark.label),ue=computed(()=>isString$1(le.mark)?void 0:le.mark.style);return()=>h$3("div",{class:oe.e("marks-text"),style:ue.value},ie.value)}});const __default__$A=defineComponent({name:"ElSlider"}),_sfc_main$X=defineComponent({...__default__$A,props:sliderProps,emits:sliderEmits,setup(le,{expose:oe,emit:ie}){const ue=le,de=useNamespace("slider"),{t:he}=useLocale(),pe=reactive({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:_e,slider:Ce,firstButton:xe,secondButton:Ie,sliderDisabled:$e,minValue:Ne,maxValue:Oe,runwayStyle:Fe,barStyle:Ve,resetSize:ze,emitChange:Ue,onSliderWrapperPrevent:Pt,onSliderClick:qe,onSliderDown:Et,onSliderMarkerDown:kt,setFirstValue:At,setSecondValue:Dt}=useSlide(ue,pe,ie),{stops:Lt,getStopStyle:jt}=useStops(ue,pe,Ne,Oe),{inputId:_n,isLabeledByFormItem:bn}=useFormItemInputId(ue,{formItemContext:_e}),vn=useFormSize(),Tn=computed(()=>ue.inputSize||vn.value),$n=computed(()=>ue.ariaLabel||he("el.slider.defaultLabel",{min:ue.min,max:ue.max})),wn=computed(()=>ue.range?ue.rangeStartLabel||he("el.slider.defaultRangeStartLabel"):$n.value),Cn=computed(()=>ue.formatValueText?ue.formatValueText(Mn.value):`${Mn.value}`),Sn=computed(()=>ue.rangeEndLabel||he("el.slider.defaultRangeEndLabel")),In=computed(()=>ue.formatValueText?ue.formatValueText(Un.value):`${Un.value}`),En=computed(()=>[de.b(),de.m(vn.value),de.is("vertical",ue.vertical),{[de.m("with-input")]:ue.showInput}]),xn=useMarks(ue);useWatch(ue,pe,Ne,Oe,ie,_e);const kn=computed(()=>{const Rn=[ue.min,ue.max,ue.step].map(Jn=>{const Qn=`${Jn}`.split(".")[1];return Qn?Qn.length:0});return Math.max.apply(null,Rn)}),{sliderWrapper:On}=useLifecycle(ue,pe,ze),{firstValue:Mn,secondValue:Un,sliderSize:zn}=toRefs(pe),Hn=Rn=>{pe.dragging=Rn};return useEventListener(On,"touchstart",Pt,{passive:!1}),useEventListener(On,"touchmove",Pt,{passive:!1}),provide(sliderContextKey,{...toRefs(ue),sliderSize:zn,disabled:$e,precision:kn,emitChange:Ue,resetSize:ze,updateDragging:Hn}),oe({onSliderClick:qe}),(Rn,Jn)=>{var Qn,_r;return openBlock(),createElementBlock("div",{id:Rn.range?unref(_n):void 0,ref_key:"sliderWrapper",ref:On,class:normalizeClass(unref(En)),role:Rn.range?"group":void 0,"aria-label":Rn.range&&!unref(bn)?unref($n):void 0,"aria-labelledby":Rn.range&&unref(bn)?(Qn=unref(_e))==null?void 0:Qn.labelId:void 0},[createBaseVNode("div",{ref_key:"slider",ref:Ce,class:normalizeClass([unref(de).e("runway"),{"show-input":Rn.showInput&&!Rn.range},unref(de).is("disabled",unref($e))]),style:normalizeStyle(unref(Fe)),onMousedown:unref(Et),onTouchstartPassive:unref(Et)},[createBaseVNode("div",{class:normalizeClass(unref(de).e("bar")),style:normalizeStyle(unref(Ve))},null,6),createVNode(SliderButton,{id:Rn.range?void 0:unref(_n),ref_key:"firstButton",ref:xe,"model-value":unref(Mn),vertical:Rn.vertical,"tooltip-class":Rn.tooltipClass,placement:Rn.placement,role:"slider","aria-label":Rn.range||!unref(bn)?unref(wn):void 0,"aria-labelledby":!Rn.range&&unref(bn)?(_r=unref(_e))==null?void 0:_r.labelId:void 0,"aria-valuemin":Rn.min,"aria-valuemax":Rn.range?unref(Un):Rn.max,"aria-valuenow":unref(Mn),"aria-valuetext":unref(Cn),"aria-orientation":Rn.vertical?"vertical":"horizontal","aria-disabled":unref($e),"onUpdate:modelValue":unref(At)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),Rn.range?(openBlock(),createBlock(SliderButton,{key:0,ref_key:"secondButton",ref:Ie,"model-value":unref(Un),vertical:Rn.vertical,"tooltip-class":Rn.tooltipClass,placement:Rn.placement,role:"slider","aria-label":unref(Sn),"aria-valuemin":unref(Mn),"aria-valuemax":Rn.max,"aria-valuenow":unref(Un),"aria-valuetext":unref(In),"aria-orientation":Rn.vertical?"vertical":"horizontal","aria-disabled":unref($e),"onUpdate:modelValue":unref(Dt)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):createCommentVNode("v-if",!0),Rn.showStops?(openBlock(),createElementBlock("div",{key:1},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Lt),(Zn,Gn)=>(openBlock(),createElementBlock("div",{key:Gn,class:normalizeClass(unref(de).e("stop")),style:normalizeStyle(unref(jt)(Zn))},null,6))),128))])):createCommentVNode("v-if",!0),unref(xn).length>0?(openBlock(),createElementBlock(Fragment,{key:2},[createBaseVNode("div",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(xn),(Zn,Gn)=>(openBlock(),createElementBlock("div",{key:Gn,style:normalizeStyle(unref(jt)(Zn.position)),class:normalizeClass([unref(de).e("stop"),unref(de).e("marks-stop")])},null,6))),128))]),createBaseVNode("div",{class:normalizeClass(unref(de).e("marks"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(xn),(Zn,Gn)=>(openBlock(),createBlock(unref(SliderMarker),{key:Gn,mark:Zn.mark,style:normalizeStyle(unref(jt)(Zn.position)),onMousedown:withModifiers(Nn=>unref(kt)(Zn.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):createCommentVNode("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),Rn.showInput&&!Rn.range?(openBlock(),createBlock(unref(ElInputNumber),{key:0,ref:"input","model-value":unref(Mn),class:normalizeClass(unref(de).e("input")),step:Rn.step,disabled:unref($e),controls:Rn.showInputControls,min:Rn.min,max:Rn.max,precision:unref(kn),debounce:Rn.debounce,size:unref(Tn),"onUpdate:modelValue":unref(At),onChange:unref(Ue)},null,8,["model-value","class","step","disabled","controls","min","max","precision","debounce","size","onUpdate:modelValue","onChange"])):createCommentVNode("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}});var Slider=_export_sfc$1(_sfc_main$X,[["__file","slider.vue"]]);const ElSlider=withInstall(Slider),spaceItemProps=buildProps({prefixCls:{type:String}}),SpaceItem=defineComponent({name:"ElSpaceItem",props:spaceItemProps,setup(le,{slots:oe}){const ie=useNamespace("space"),ue=computed(()=>`${le.prefixCls||ie.b()}__item`);return()=>h$3("div",{class:ue.value},renderSlot(oe,"default"))}}),SIZE_MAP={small:8,default:12,large:16};function useSpace(le){const oe=useNamespace("space"),ie=computed(()=>[oe.b(),oe.m(le.direction),le.class]),ue=ref(0),de=ref(0),he=computed(()=>{const _e=le.wrap||le.fill?{flexWrap:"wrap"}:{},Ce={alignItems:le.alignment},xe={rowGap:`${de.value}px`,columnGap:`${ue.value}px`};return[_e,Ce,xe,le.style]}),pe=computed(()=>le.fill?{flexGrow:1,minWidth:`${le.fillRatio}%`}:{});return watchEffect(()=>{const{size:_e="small",wrap:Ce,direction:xe,fill:Ie}=le;if(isArray$3(_e)){const[$e=0,Ne=0]=_e;ue.value=$e,de.value=Ne}else{let $e;isNumber(_e)?$e=_e:$e=SIZE_MAP[_e||"small"]||SIZE_MAP.small,(Ce||Ie)&&xe==="horizontal"?ue.value=de.value=$e:xe==="horizontal"?(ue.value=$e,de.value=0):(de.value=$e,ue.value=0)}}),{classes:ie,containerStyle:he,itemStyle:pe}}const spaceProps=buildProps({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:definePropType([String,Object,Array]),default:""},style:{type:definePropType([String,Array,Object]),default:""},alignment:{type:definePropType(String),default:"center"},prefixCls:{type:String},spacer:{type:definePropType([Object,String,Number,Array]),default:null,validator:le=>isVNode(le)||isNumber(le)||isString$1(le)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:componentSizes,validator:le=>isNumber(le)||isArray$3(le)&&le.length===2&&le.every(isNumber)}}),Space=defineComponent({name:"ElSpace",props:spaceProps,setup(le,{slots:oe}){const{classes:ie,containerStyle:ue,itemStyle:de}=useSpace(le);function he(pe,_e="",Ce=[]){const{prefixCls:xe}=le;return pe.forEach((Ie,$e)=>{isFragment(Ie)?isArray$3(Ie.children)&&Ie.children.forEach((Ne,Oe)=>{isFragment(Ne)&&isArray$3(Ne.children)?he(Ne.children,`${_e+Oe}-`,Ce):Ce.push(createVNode(SpaceItem,{style:de.value,prefixCls:xe,key:`nested-${_e+Oe}`},{default:()=>[Ne]},PatchFlags.PROPS|PatchFlags.STYLE,["style","prefixCls"]))}):isValidElementNode(Ie)&&Ce.push(createVNode(SpaceItem,{style:de.value,prefixCls:xe,key:`LoopKey${_e+$e}`},{default:()=>[Ie]},PatchFlags.PROPS|PatchFlags.STYLE,["style","prefixCls"]))}),Ce}return()=>{var pe;const{spacer:_e,direction:Ce}=le,xe=renderSlot(oe,"default",{key:0},()=>[]);if(((pe=xe.children)!=null?pe:[]).length===0)return null;if(isArray$3(xe.children)){let Ie=he(xe.children);if(_e){const $e=Ie.length-1;Ie=Ie.reduce((Ne,Oe,Fe)=>{const Ve=[...Ne,Oe];return Fe!==$e&&Ve.push(createVNode("span",{style:[de.value,Ce==="vertical"?"width: 100%":null],key:Fe},[isVNode(_e)?_e:createTextVNode(_e,PatchFlags.TEXT)],PatchFlags.STYLE)),Ve},[])}return createVNode("div",{class:ie.value,style:ue.value},Ie,PatchFlags.STYLE|PatchFlags.CLASS)}return xe.children}}}),ElSpace=withInstall(Space),statisticProps=buildProps({decimalSeparator:{type:String,default:"."},groupSeparator:{type:String,default:","},precision:{type:Number,default:0},formatter:Function,value:{type:definePropType([Number,Object]),default:0},prefix:String,suffix:String,title:String,valueStyle:{type:definePropType([String,Object,Array])}}),__default__$z=defineComponent({name:"ElStatistic"}),_sfc_main$W=defineComponent({...__default__$z,props:statisticProps,setup(le,{expose:oe}){const ie=le,ue=useNamespace("statistic"),de=computed(()=>{const{value:he,formatter:pe,precision:_e,decimalSeparator:Ce,groupSeparator:xe}=ie;if(isFunction$2(pe))return pe(he);if(!isNumber(he)||Number.isNaN(he))return he;let[Ie,$e=""]=String(he).split(".");return $e=$e.padEnd(_e,"0").slice(0,_e>0?_e:0),Ie=Ie.replace(/\B(?=(\d{3})+(?!\d))/g,xe),[Ie,$e].join($e?Ce:"")});return oe({displayValue:de}),(he,pe)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(ue).b())},[he.$slots.title||he.title?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(ue).e("head"))},[renderSlot(he.$slots,"title",{},()=>[createTextVNode(toDisplayString(he.title),1)])],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(ue).e("content"))},[he.$slots.prefix||he.prefix?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(ue).e("prefix"))},[renderSlot(he.$slots,"prefix",{},()=>[createBaseVNode("span",null,toDisplayString(he.prefix),1)])],2)):createCommentVNode("v-if",!0),createBaseVNode("span",{class:normalizeClass(unref(ue).e("number")),style:normalizeStyle(he.valueStyle)},toDisplayString(unref(de)),7),he.$slots.suffix||he.suffix?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(ue).e("suffix"))},[renderSlot(he.$slots,"suffix",{},()=>[createBaseVNode("span",null,toDisplayString(he.suffix),1)])],2)):createCommentVNode("v-if",!0)],2)],2))}});var Statistic=_export_sfc$1(_sfc_main$W,[["__file","statistic.vue"]]);const ElStatistic=withInstall(Statistic),countdownProps=buildProps({format:{type:String,default:"HH:mm:ss"},prefix:String,suffix:String,title:String,value:{type:definePropType([Number,Object]),default:0},valueStyle:{type:definePropType([String,Object,Array])}}),countdownEmits={finish:()=>!0,[CHANGE_EVENT]:le=>isNumber(le)},timeUnits=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]],getTime=le=>isNumber(le)?new Date(le).getTime():le.valueOf(),formatTime$1=(le,oe)=>{let ie=le;const ue=/\[([^\]]*)]/g;return timeUnits.reduce((he,[pe,_e])=>{const Ce=new RegExp(`${pe}+(?![^\\[\\]]*\\])`,"g");if(Ce.test(he)){const xe=Math.floor(ie/_e);return ie-=xe*_e,he.replace(Ce,Ie=>String(xe).padStart(Ie.length,"0"))}return he},oe).replace(ue,"$1")},__default__$y=defineComponent({name:"ElCountdown"}),_sfc_main$V=defineComponent({...__default__$y,props:countdownProps,emits:countdownEmits,setup(le,{expose:oe,emit:ie}){const ue=le;let de;const he=ref(0),pe=computed(()=>formatTime$1(he.value,ue.format)),_e=Ie=>formatTime$1(Ie,ue.format),Ce=()=>{de&&(cAF(de),de=void 0)},xe=()=>{const Ie=getTime(ue.value),$e=()=>{let Ne=Ie-Date.now();ie("change",Ne),Ne<=0?(Ne=0,Ce(),ie("finish")):de=rAF($e),he.value=Ne};de=rAF($e)};return onMounted(()=>{he.value=getTime(ue.value)-Date.now(),watch(()=>[ue.value,ue.format],()=>{Ce(),xe()},{immediate:!0})}),onBeforeUnmount(()=>{Ce()}),oe({displayValue:pe}),(Ie,$e)=>(openBlock(),createBlock(unref(ElStatistic),{value:he.value,title:Ie.title,prefix:Ie.prefix,suffix:Ie.suffix,"value-style":Ie.valueStyle,formatter:_e},createSlots({_:2},[renderList(Ie.$slots,(Ne,Oe)=>({name:Oe,fn:withCtx(()=>[renderSlot(Ie.$slots,Oe)])}))]),1032,["value","title","prefix","suffix","value-style"]))}});var Countdown=_export_sfc$1(_sfc_main$V,[["__file","countdown.vue"]]);const ElCountdown=withInstall(Countdown),stepsProps=buildProps({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),stepsEmits={[CHANGE_EVENT]:(le,oe)=>[le,oe].every(isNumber)},__default__$x=defineComponent({name:"ElSteps"}),_sfc_main$U=defineComponent({...__default__$x,props:stepsProps,emits:stepsEmits,setup(le,{emit:oe}){const ie=le,ue=useNamespace("steps"),{children:de,addChild:he,removeChild:pe}=useOrderedChildren(getCurrentInstance(),"ElStep");return watch(de,()=>{de.value.forEach((_e,Ce)=>{_e.setIndex(Ce)})}),provide("ElSteps",{props:ie,steps:de,addStep:he,removeStep:pe}),watch(()=>ie.active,(_e,Ce)=>{oe(CHANGE_EVENT,_e,Ce)}),(_e,Ce)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(ue).b(),unref(ue).m(_e.simple?"simple":_e.direction)])},[renderSlot(_e.$slots,"default")],2))}});var Steps=_export_sfc$1(_sfc_main$U,[["__file","steps.vue"]]);const stepProps=buildProps({title:{type:String,default:""},icon:{type:iconPropType},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),__default__$w=defineComponent({name:"ElStep"}),_sfc_main$T=defineComponent({...__default__$w,props:stepProps,setup(le){const oe=le,ie=useNamespace("step"),ue=ref(-1),de=ref({}),he=ref(""),pe=inject("ElSteps"),_e=getCurrentInstance();onMounted(()=>{watch([()=>pe.props.active,()=>pe.props.processStatus,()=>pe.props.finishStatus],([At])=>{Et(At)},{immediate:!0})}),onBeforeUnmount(()=>{pe.removeStep(kt.uid)});const Ce=computed(()=>oe.status||he.value),xe=computed(()=>{const At=pe.steps.value[ue.value-1];return At?At.currentStatus:"wait"}),Ie=computed(()=>pe.props.alignCenter),$e=computed(()=>pe.props.direction==="vertical"),Ne=computed(()=>pe.props.simple),Oe=computed(()=>pe.steps.value.length),Fe=computed(()=>{var At;return((At=pe.steps.value[Oe.value-1])==null?void 0:At.uid)===(_e==null?void 0:_e.uid)}),Ve=computed(()=>Ne.value?"":pe.props.space),ze=computed(()=>[ie.b(),ie.is(Ne.value?"simple":pe.props.direction),ie.is("flex",Fe.value&&!Ve.value&&!Ie.value),ie.is("center",Ie.value&&!$e.value&&!Ne.value)]),Ue=computed(()=>{const At={flexBasis:isNumber(Ve.value)?`${Ve.value}px`:Ve.value?Ve.value:`${100/(Oe.value-(Ie.value?0:1))}%`};return $e.value||Fe.value&&(At.maxWidth=`${100/Oe.value}%`),At}),Pt=At=>{ue.value=At},qe=At=>{const Dt=At==="wait",Lt={transitionDelay:`${Dt?"-":""}${150*ue.value}ms`},jt=At===pe.props.processStatus||Dt?0:100;Lt.borderWidth=jt&&!Ne.value?"1px":0,Lt[pe.props.direction==="vertical"?"height":"width"]=`${jt}%`,de.value=Lt},Et=At=>{At>ue.value?he.value=pe.props.finishStatus:At===ue.value&&xe.value!=="error"?he.value=pe.props.processStatus:he.value="wait";const Dt=pe.steps.value[ue.value-1];Dt&&Dt.calcProgress(he.value)},kt=reactive({uid:_e.uid,currentStatus:Ce,setIndex:Pt,calcProgress:qe});return pe.addStep(kt),(At,Dt)=>(openBlock(),createElementBlock("div",{style:normalizeStyle(unref(Ue)),class:normalizeClass(unref(ze))},[createCommentVNode(" icon & line "),createBaseVNode("div",{class:normalizeClass([unref(ie).e("head"),unref(ie).is(unref(Ce))])},[unref(Ne)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(ie).e("line"))},[createBaseVNode("i",{class:normalizeClass(unref(ie).e("line-inner")),style:normalizeStyle(de.value)},null,6)],2)),createBaseVNode("div",{class:normalizeClass([unref(ie).e("icon"),unref(ie).is(At.icon||At.$slots.icon?"icon":"text")])},[renderSlot(At.$slots,"icon",{},()=>[At.icon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(ie).e("icon-inner"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(At.icon)))]),_:1},8,["class"])):unref(Ce)==="success"?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass([unref(ie).e("icon-inner"),unref(ie).is("status")])},{default:withCtx(()=>[createVNode(unref(check_default))]),_:1},8,["class"])):unref(Ce)==="error"?(openBlock(),createBlock(unref(ElIcon),{key:2,class:normalizeClass([unref(ie).e("icon-inner"),unref(ie).is("status")])},{default:withCtx(()=>[createVNode(unref(close_default))]),_:1},8,["class"])):unref(Ne)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("div",{key:3,class:normalizeClass(unref(ie).e("icon-inner"))},toDisplayString(ue.value+1),3))])],2)],2),createCommentVNode(" title & description "),createBaseVNode("div",{class:normalizeClass(unref(ie).e("main"))},[createBaseVNode("div",{class:normalizeClass([unref(ie).e("title"),unref(ie).is(unref(Ce))])},[renderSlot(At.$slots,"title",{},()=>[createTextVNode(toDisplayString(At.title),1)])],2),unref(Ne)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(ie).e("arrow"))},null,2)):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass([unref(ie).e("description"),unref(ie).is(unref(Ce))])},[renderSlot(At.$slots,"description",{},()=>[createTextVNode(toDisplayString(At.description),1)])],2))],2)],6))}});var Step=_export_sfc$1(_sfc_main$T,[["__file","item.vue"]]);const ElSteps=withInstall(Steps,{Step}),ElStep=withNoopInstall(Step),switchProps=buildProps({modelValue:{type:[Boolean,String,Number],default:!1},disabled:Boolean,loading:Boolean,size:{type:String,validator:isValidComponentSize},width:{type:[String,Number],default:""},inlinePrompt:Boolean,inactiveActionIcon:{type:iconPropType},activeActionIcon:{type:iconPropType},activeIcon:{type:iconPropType},inactiveIcon:{type:iconPropType},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:definePropType(Function)},id:String,tabindex:{type:[String,Number]},...useAriaProps(["ariaLabel"])}),switchEmits={[UPDATE_MODEL_EVENT]:le=>isBoolean(le)||isString$1(le)||isNumber(le),[CHANGE_EVENT]:le=>isBoolean(le)||isString$1(le)||isNumber(le),[INPUT_EVENT]:le=>isBoolean(le)||isString$1(le)||isNumber(le)},COMPONENT_NAME$8="ElSwitch",__default__$v=defineComponent({name:COMPONENT_NAME$8}),_sfc_main$S=defineComponent({...__default__$v,props:switchProps,emits:switchEmits,setup(le,{expose:oe,emit:ie}){const ue=le,{formItem:de}=useFormItem(),he=useFormSize(),pe=useNamespace("switch"),{inputId:_e}=useFormItemInputId(ue,{formItemContext:de}),Ce=useFormDisabled(computed(()=>ue.loading)),xe=ref(ue.modelValue!==!1),Ie=ref(),$e=ref(),Ne=computed(()=>[pe.b(),pe.m(he.value),pe.is("disabled",Ce.value),pe.is("checked",Ue.value)]),Oe=computed(()=>[pe.e("label"),pe.em("label","left"),pe.is("active",!Ue.value)]),Fe=computed(()=>[pe.e("label"),pe.em("label","right"),pe.is("active",Ue.value)]),Ve=computed(()=>({width:addUnit(ue.width)}));watch(()=>ue.modelValue,()=>{xe.value=!0});const ze=computed(()=>xe.value?ue.modelValue:!1),Ue=computed(()=>ze.value===ue.activeValue);[ue.activeValue,ue.inactiveValue].includes(ze.value)||(ie(UPDATE_MODEL_EVENT,ue.inactiveValue),ie(CHANGE_EVENT,ue.inactiveValue),ie(INPUT_EVENT,ue.inactiveValue)),watch(Ue,kt=>{var At;Ie.value.checked=kt,ue.validateEvent&&((At=de==null?void 0:de.validate)==null||At.call(de,"change").catch(Dt=>void 0))});const Pt=()=>{const kt=Ue.value?ue.inactiveValue:ue.activeValue;ie(UPDATE_MODEL_EVENT,kt),ie(CHANGE_EVENT,kt),ie(INPUT_EVENT,kt),nextTick(()=>{Ie.value.checked=Ue.value})},qe=()=>{if(Ce.value)return;const{beforeChange:kt}=ue;if(!kt){Pt();return}const At=kt();[isPromise$1(At),isBoolean(At)].includes(!0)||throwError(COMPONENT_NAME$8,"beforeChange must return type `Promise<boolean>` or `boolean`"),isPromise$1(At)?At.then(Lt=>{Lt&&Pt()}).catch(Lt=>{}):At&&Pt()},Et=()=>{var kt,At;(At=(kt=Ie.value)==null?void 0:kt.focus)==null||At.call(kt)};return onMounted(()=>{Ie.value.checked=Ue.value}),oe({focus:Et,checked:Ue}),(kt,At)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(Ne)),onClick:withModifiers(qe,["prevent"])},[createBaseVNode("input",{id:unref(_e),ref_key:"input",ref:Ie,class:normalizeClass(unref(pe).e("input")),type:"checkbox",role:"switch","aria-checked":unref(Ue),"aria-disabled":unref(Ce),"aria-label":kt.ariaLabel,name:kt.name,"true-value":kt.activeValue,"false-value":kt.inactiveValue,disabled:unref(Ce),tabindex:kt.tabindex,onChange:Pt,onKeydown:withKeys(qe,["enter"])},null,42,["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"]),!kt.inlinePrompt&&(kt.inactiveIcon||kt.inactiveText)?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(Oe))},[kt.inactiveIcon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(kt.inactiveIcon)))]),_:1})):createCommentVNode("v-if",!0),!kt.inactiveIcon&&kt.inactiveText?(openBlock(),createElementBlock("span",{key:1,"aria-hidden":unref(Ue)},toDisplayString(kt.inactiveText),9,["aria-hidden"])):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("span",{ref_key:"core",ref:$e,class:normalizeClass(unref(pe).e("core")),style:normalizeStyle(unref(Ve))},[kt.inlinePrompt?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(pe).e("inner"))},[kt.activeIcon||kt.inactiveIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(pe).is("icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(Ue)?kt.activeIcon:kt.inactiveIcon)))]),_:1},8,["class"])):kt.activeText||kt.inactiveText?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(pe).is("text")),"aria-hidden":!unref(Ue)},toDisplayString(unref(Ue)?kt.activeText:kt.inactiveText),11,["aria-hidden"])):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(pe).e("action"))},[kt.loading?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(pe).is("loading"))},{default:withCtx(()=>[createVNode(unref(loading_default))]),_:1},8,["class"])):unref(Ue)?renderSlot(kt.$slots,"active-action",{key:1},()=>[kt.activeActionIcon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(kt.activeActionIcon)))]),_:1})):createCommentVNode("v-if",!0)]):unref(Ue)?createCommentVNode("v-if",!0):renderSlot(kt.$slots,"inactive-action",{key:2},()=>[kt.inactiveActionIcon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(kt.inactiveActionIcon)))]),_:1})):createCommentVNode("v-if",!0)])],2)],6),!kt.inlinePrompt&&(kt.activeIcon||kt.activeText)?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(Fe))},[kt.activeIcon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(kt.activeIcon)))]),_:1})):createCommentVNode("v-if",!0),!kt.activeIcon&&kt.activeText?(openBlock(),createElementBlock("span",{key:1,"aria-hidden":!unref(Ue)},toDisplayString(kt.activeText),9,["aria-hidden"])):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0)],10,["onClick"]))}});var Switch=_export_sfc$1(_sfc_main$S,[["__file","switch.vue"]]);const ElSwitch=withInstall(Switch),getCell=function(le){var oe;return(oe=le.target)==null?void 0:oe.closest("td")},orderBy=function(le,oe,ie,ue,de){if(!oe&&!ue&&(!de||Array.isArray(de)&&!de.length))return le;typeof ie=="string"?ie=ie==="descending"?-1:1:ie=ie&&ie<0?-1:1;const he=ue?null:function(_e,Ce){return de?(Array.isArray(de)||(de=[de]),de.map(xe=>typeof xe=="string"?get$1(_e,xe):xe(_e,Ce,le))):(oe!=="$key"&&isObject$d(_e)&&"$value"in _e&&(_e=_e.$value),[isObject$d(_e)?get$1(_e,oe):_e])},pe=function(_e,Ce){if(ue)return ue(_e.value,Ce.value);for(let xe=0,Ie=_e.key.length;xe<Ie;xe++){if(_e.key[xe]<Ce.key[xe])return-1;if(_e.key[xe]>Ce.key[xe])return 1}return 0};return le.map((_e,Ce)=>({value:_e,index:Ce,key:he?he(_e,Ce):null})).sort((_e,Ce)=>{let xe=pe(_e,Ce);return xe||(xe=_e.index-Ce.index),xe*+ie}).map(_e=>_e.value)},getColumnById=function(le,oe){let ie=null;return le.columns.forEach(ue=>{ue.id===oe&&(ie=ue)}),ie},getColumnByKey=function(le,oe){let ie=null;for(let ue=0;ue<le.columns.length;ue++){const de=le.columns[ue];if(de.columnKey===oe){ie=de;break}}return ie||throwError("ElTable",`No column matching with column-key: ${oe}`),ie},getColumnByCell=function(le,oe,ie){const ue=(oe.className||"").match(new RegExp(`${ie}-table_[^\\s]+`,"gm"));return ue?getColumnById(le,ue[0]):null},getRowIdentity=(le,oe)=>{if(!le)throw new Error("Row is required when get row identity");if(typeof oe=="string"){if(!oe.includes("."))return`${le[oe]}`;const ie=oe.split(".");let ue=le;for(const de of ie)ue=ue[de];return`${ue}`}else if(typeof oe=="function")return oe.call(null,le)},getKeysMap=function(le,oe){const ie={};return(le||[]).forEach((ue,de)=>{ie[getRowIdentity(ue,oe)]={row:ue,index:de}}),ie};function mergeOptions(le,oe){const ie={};let ue;for(ue in le)ie[ue]=le[ue];for(ue in oe)if(hasOwn$b(oe,ue)){const de=oe[ue];typeof de<"u"&&(ie[ue]=de)}return ie}function parseWidth(le){return le===""||le!==void 0&&(le=Number.parseInt(le,10),Number.isNaN(le)&&(le="")),le}function parseMinWidth(le){return le===""||le!==void 0&&(le=parseWidth(le),Number.isNaN(le)&&(le=80)),le}function parseHeight(le){return typeof le=="number"?le:typeof le=="string"?/^\d+(?:px)?$/.test(le)?Number.parseInt(le,10):le:null}function compose(...le){return le.length===0?oe=>oe:le.length===1?le[0]:le.reduce((oe,ie)=>(...ue)=>oe(ie(...ue)))}function toggleRowStatus(le,oe,ie,ue,de,he){let pe=he??0,_e=!1;const Ce=le.indexOf(oe),xe=Ce!==-1,Ie=de==null?void 0:de.call(null,oe,he),$e=Oe=>{Oe==="add"?le.push(oe):le.splice(Ce,1),_e=!0},Ne=Oe=>{let Fe=0;const Ve=(ue==null?void 0:ue.children)&&Oe[ue.children];return Ve&&isArray$3(Ve)&&(Fe+=Ve.length,Ve.forEach(ze=>{Fe+=Ne(ze)})),Fe};return(!de||Ie)&&(isBoolean(ie)?ie&&!xe?$e("add"):!ie&&xe&&$e("remove"):$e(xe?"remove":"add")),!(ue!=null&&ue.checkStrictly)&&(ue!=null&&ue.children)&&isArray$3(oe[ue.children])&&oe[ue.children].forEach(Oe=>{toggleRowStatus(le,Oe,ie??!xe,ue,de,pe+1),pe+=Ne(Oe)+1}),_e}function walkTreeNode(le,oe,ie="children",ue="hasChildren"){const de=pe=>!(Array.isArray(pe)&&pe.length);function he(pe,_e,Ce){oe(pe,_e,Ce),_e.forEach(xe=>{if(xe[ue]){oe(xe,null,Ce+1);return}const Ie=xe[ie];de(Ie)||he(xe,Ie,Ce+1)})}le.forEach(pe=>{if(pe[ue]){oe(pe,null,0);return}const _e=pe[ie];de(_e)||he(pe,_e,0)})}let removePopper=null;function createTablePopper(le,oe,ie,ue){if((removePopper==null?void 0:removePopper.trigger)===ie)return;removePopper==null||removePopper();const de=ue==null?void 0:ue.refs.tableWrapper,he=de==null?void 0:de.dataset.prefix,pe={strategy:"fixed",...le.popperOptions},_e=createVNode(ElTooltip,{content:oe,virtualTriggering:!0,virtualRef:ie,appendTo:de,placement:"top",transition:"none",offset:0,hideAfter:0,...le,popperOptions:pe,onHide:()=>{removePopper==null||removePopper()}});_e.appContext={...ue.appContext,...ue};const Ce=document.createElement("div");render(_e,Ce),_e.component.exposed.onOpen();const xe=de==null?void 0:de.querySelector(`.${he}-scrollbar__wrap`);removePopper=()=>{render(null,Ce),xe==null||xe.removeEventListener("scroll",removePopper),removePopper=null},removePopper.trigger=ie,xe==null||xe.addEventListener("scroll",removePopper)}function getCurrentColumns(le){return le.children?flatMap(le.children,getCurrentColumns):[le]}function getColSpan(le,oe){return le+oe.colSpan}const isFixedColumn=(le,oe,ie,ue)=>{let de=0,he=le;const pe=ie.states.columns.value;if(ue){const Ce=getCurrentColumns(ue[le]);de=pe.slice(0,pe.indexOf(Ce[0])).reduce(getColSpan,0),he=de+Ce.reduce(getColSpan,0)-1}else de=le;let _e;switch(oe){case"left":he<ie.states.fixedLeafColumnsLength.value&&(_e="left");break;case"right":de>=pe.length-ie.states.rightFixedLeafColumnsLength.value&&(_e="right");break;default:he<ie.states.fixedLeafColumnsLength.value?_e="left":de>=pe.length-ie.states.rightFixedLeafColumnsLength.value&&(_e="right")}return _e?{direction:_e,start:de,after:he}:{}},getFixedColumnsClass=(le,oe,ie,ue,de,he=0)=>{const pe=[],{direction:_e,start:Ce,after:xe}=isFixedColumn(oe,ie,ue,de);if(_e){const Ie=_e==="left";pe.push(`${le}-fixed-column--${_e}`),Ie&&xe+he===ue.states.fixedLeafColumnsLength.value-1?pe.push("is-last-column"):!Ie&&Ce-he===ue.states.columns.value.length-ue.states.rightFixedLeafColumnsLength.value&&pe.push("is-first-column")}return pe};function getOffset$1(le,oe){return le+(oe.realWidth===null||Number.isNaN(oe.realWidth)?Number(oe.width):oe.realWidth)}const getFixedColumnOffset=(le,oe,ie,ue)=>{const{direction:de,start:he=0,after:pe=0}=isFixedColumn(le,oe,ie,ue);if(!de)return;const _e={},Ce=de==="left",xe=ie.states.columns.value;return Ce?_e.left=xe.slice(0,he).reduce(getOffset$1,0):_e.right=xe.slice(pe+1).reverse().reduce(getOffset$1,0),_e},ensurePosition=(le,oe)=>{le&&(Number.isNaN(le[oe])||(le[oe]=`${le[oe]}px`))};function useExpand(le){const oe=getCurrentInstance(),ie=ref(!1),ue=ref([]);return{updateExpandRows:()=>{const Ce=le.data.value||[],xe=le.rowKey.value;if(ie.value)ue.value=Ce.slice();else if(xe){const Ie=getKeysMap(ue.value,xe);ue.value=Ce.reduce(($e,Ne)=>{const Oe=getRowIdentity(Ne,xe);return Ie[Oe]&&$e.push(Ne),$e},[])}else ue.value=[]},toggleRowExpansion:(Ce,xe)=>{toggleRowStatus(ue.value,Ce,xe)&&oe.emit("expand-change",Ce,ue.value.slice())},setExpandRowKeys:Ce=>{oe.store.assertRowKey();const xe=le.data.value||[],Ie=le.rowKey.value,$e=getKeysMap(xe,Ie);ue.value=Ce.reduce((Ne,Oe)=>{const Fe=$e[Oe];return Fe&&Ne.push(Fe.row),Ne},[])},isRowExpanded:Ce=>{const xe=le.rowKey.value;return xe?!!getKeysMap(ue.value,xe)[getRowIdentity(Ce,xe)]:ue.value.includes(Ce)},states:{expandRows:ue,defaultExpandAll:ie}}}function useCurrent(le){const oe=getCurrentInstance(),ie=ref(null),ue=ref(null),de=xe=>{oe.store.assertRowKey(),ie.value=xe,pe(xe)},he=()=>{ie.value=null},pe=xe=>{const{data:Ie,rowKey:$e}=le;let Ne=null;$e.value&&(Ne=(unref(Ie)||[]).find(Oe=>getRowIdentity(Oe,$e.value)===xe)),ue.value=Ne,oe.emit("current-change",ue.value,null)};return{setCurrentRowKey:de,restoreCurrentRowKey:he,setCurrentRowByKey:pe,updateCurrentRow:xe=>{const Ie=ue.value;if(xe&&xe!==Ie){ue.value=xe,oe.emit("current-change",ue.value,Ie);return}!xe&&Ie&&(ue.value=null,oe.emit("current-change",null,Ie))},updateCurrentRowData:()=>{const xe=le.rowKey.value,Ie=le.data.value||[],$e=ue.value;if(!Ie.includes($e)&&$e){if(xe){const Ne=getRowIdentity($e,xe);pe(Ne)}else ue.value=null;ue.value===null&&oe.emit("current-change",null,$e)}else ie.value&&(pe(ie.value),he())},states:{_currentRowKey:ie,currentRow:ue}}}function useTree$2(le){const oe=ref([]),ie=ref({}),ue=ref(16),de=ref(!1),he=ref({}),pe=ref("hasChildren"),_e=ref("children"),Ce=ref(!1),xe=getCurrentInstance(),Ie=computed(()=>{if(!le.rowKey.value)return{};const qe=le.data.value||[];return Ne(qe)}),$e=computed(()=>{const qe=le.rowKey.value,Et=Object.keys(he.value),kt={};return Et.length&&Et.forEach(At=>{if(he.value[At].length){const Dt={children:[]};he.value[At].forEach(Lt=>{const jt=getRowIdentity(Lt,qe);Dt.children.push(jt),Lt[pe.value]&&!kt[jt]&&(kt[jt]={children:[]})}),kt[At]=Dt}}),kt}),Ne=qe=>{const Et=le.rowKey.value,kt={};return walkTreeNode(qe,(At,Dt,Lt)=>{const jt=getRowIdentity(At,Et);Array.isArray(Dt)?kt[jt]={children:Dt.map(_n=>getRowIdentity(_n,Et)),level:Lt}:de.value&&(kt[jt]={children:[],lazy:!0,level:Lt})},_e.value,pe.value),kt},Oe=(qe=!1,Et=(kt=>(kt=xe.store)==null?void 0:kt.states.defaultExpandAll.value)())=>{var kt;const At=Ie.value,Dt=$e.value,Lt=Object.keys(At),jt={};if(Lt.length){const _n=unref(ie),bn=[],vn=($n,wn)=>{if(qe)return oe.value?Et||oe.value.includes(wn):!!(Et||$n!=null&&$n.expanded);{const Cn=Et||oe.value&&oe.value.includes(wn);return!!($n!=null&&$n.expanded||Cn)}};Lt.forEach($n=>{const wn=_n[$n],Cn={...At[$n]};if(Cn.expanded=vn(wn,$n),Cn.lazy){const{loaded:Sn=!1,loading:In=!1}=wn||{};Cn.loaded=!!Sn,Cn.loading=!!In,bn.push($n)}jt[$n]=Cn});const Tn=Object.keys(Dt);de.value&&Tn.length&&bn.length&&Tn.forEach($n=>{const wn=_n[$n],Cn=Dt[$n].children;if(bn.includes($n)){if(jt[$n].children.length!==0)throw new Error("[ElTable]children must be an empty array.");jt[$n].children=Cn}else{const{loaded:Sn=!1,loading:In=!1}=wn||{};jt[$n]={lazy:!0,loaded:!!Sn,loading:!!In,expanded:vn(wn,$n),children:Cn,level:""}}})}ie.value=jt,(kt=xe.store)==null||kt.updateTableScrollY()};watch(()=>oe.value,()=>{Oe(!0)}),watch(()=>Ie.value,()=>{Oe()}),watch(()=>$e.value,()=>{Oe()});const Fe=qe=>{oe.value=qe,Oe()},Ve=(qe,Et)=>{xe.store.assertRowKey();const kt=le.rowKey.value,At=getRowIdentity(qe,kt),Dt=At&&ie.value[At];if(At&&Dt&&"expanded"in Dt){const Lt=Dt.expanded;Et=typeof Et>"u"?!Dt.expanded:Et,ie.value[At].expanded=Et,Lt!==Et&&xe.emit("expand-change",qe,Et),xe.store.updateTableScrollY()}},ze=qe=>{xe.store.assertRowKey();const Et=le.rowKey.value,kt=getRowIdentity(qe,Et),At=ie.value[kt];de.value&&At&&"loaded"in At&&!At.loaded?Ue(qe,kt,At):Ve(qe,void 0)},Ue=(qe,Et,kt)=>{const{load:At}=xe.props;At&&!ie.value[Et].loaded&&(ie.value[Et].loading=!0,At(qe,kt,Dt=>{if(!Array.isArray(Dt))throw new TypeError("[ElTable] data must be an array");ie.value[Et].loading=!1,ie.value[Et].loaded=!0,ie.value[Et].expanded=!0,Dt.length&&(he.value[Et]=Dt),xe.emit("expand-change",qe,!0)}))};return{loadData:Ue,loadOrToggle:ze,toggleTreeExpansion:Ve,updateTreeExpandKeys:Fe,updateTreeData:Oe,updateKeyChildren:(qe,Et)=>{const{lazy:kt,rowKey:At}=xe.props;if(kt){if(!At)throw new Error("[Table] rowKey is required in updateKeyChild");he.value[qe]&&(he.value[qe]=Et)}},normalize:Ne,states:{expandRowKeys:oe,treeData:ie,indent:ue,lazy:de,lazyTreeNodeMap:he,lazyColumnIdentifier:pe,childrenColumnName:_e,checkStrictly:Ce}}}const sortData=(le,oe)=>{const ie=oe.sortingColumn;return!ie||typeof ie.sortable=="string"?le:orderBy(le,oe.sortProp,oe.sortOrder,ie.sortMethod,ie.sortBy)},doFlattenColumns=le=>{const oe=[];return le.forEach(ie=>{ie.children&&ie.children.length>0?oe.push.apply(oe,doFlattenColumns(ie.children)):oe.push(ie)}),oe};function useWatcher$1(){var le;const oe=getCurrentInstance(),{size:ie}=toRefs((le=oe.proxy)==null?void 0:le.$props),ue=ref(null),de=ref([]),he=ref([]),pe=ref(!1),_e=ref([]),Ce=ref([]),xe=ref([]),Ie=ref([]),$e=ref([]),Ne=ref([]),Oe=ref([]),Fe=ref([]),Ve=[],ze=ref(0),Ue=ref(0),Pt=ref(0),qe=ref(!1),Et=ref([]),kt=ref(!1),At=ref(!1),Dt=ref(null),Lt=ref({}),jt=ref(null),_n=ref(null),bn=ref(null),vn=ref(null),Tn=ref(null);watch(de,()=>oe.state&&In(!1),{deep:!0});const $n=()=>{if(!ue.value)throw new Error("[ElTable] prop row-key is required")},wn=Wn=>{var wr;(wr=Wn.children)==null||wr.forEach(Vn=>{Vn.fixed=Wn.fixed,wn(Vn)})};let Cn;const Sn=()=>{_e.value.forEach(nr=>{wn(nr)}),Ie.value=_e.value.filter(nr=>nr.fixed===!0||nr.fixed==="left"),$e.value=_e.value.filter(nr=>nr.fixed==="right"),isUndefined(Cn)&&_e.value[0]&&_e.value[0].type==="selection"&&(Cn=!!_e.value[0].fixed),Ie.value.length>0&&_e.value[0]&&_e.value[0].type==="selection"&&(_e.value[0].fixed?Ie.value.some(Ar=>Ar.type!=="selection")?Cn=void 0:(_e.value[0].fixed=Cn,Cn||Ie.value.shift()):(_e.value[0].fixed=!0,Ie.value.unshift(_e.value[0])));const Wn=_e.value.filter(nr=>!nr.fixed);Ce.value=[].concat(Ie.value).concat(Wn).concat($e.value);const wr=doFlattenColumns(Wn),Vn=doFlattenColumns(Ie.value),sr=doFlattenColumns($e.value);ze.value=wr.length,Ue.value=Vn.length,Pt.value=sr.length,xe.value=[].concat(Vn).concat(wr).concat(sr),pe.value=Ie.value.length>0||$e.value.length>0},In=(Wn,wr=!1)=>{Wn&&Sn(),wr?oe.state.doLayout():oe.state.debouncedUpdateLayout()},En=Wn=>Et.value.some(wr=>isEqual$1(wr,Wn)),xn=()=>{qe.value=!1;const Wn=Et.value;Et.value=[],Wn.length&&oe.emit("selection-change",[])},kn=()=>{let Wn;if(ue.value){Wn=[];const wr=getKeysMap(Et.value,ue.value),Vn=getKeysMap(de.value,ue.value);for(const sr in wr)hasOwn$b(wr,sr)&&!Vn[sr]&&Wn.push(wr[sr].row)}else Wn=Et.value.filter(wr=>!de.value.includes(wr));if(Wn.length){const wr=Et.value.filter(Vn=>!Wn.includes(Vn));Et.value=wr,oe.emit("selection-change",wr.slice())}},On=()=>(Et.value||[]).slice(),Mn=(Wn,wr,Vn=!0,sr=!1)=>{var nr,Ar,Wr,Yn;const Nr={children:(Ar=(nr=oe==null?void 0:oe.store)==null?void 0:nr.states)==null?void 0:Ar.childrenColumnName.value,checkStrictly:(Yn=(Wr=oe==null?void 0:oe.store)==null?void 0:Wr.states)==null?void 0:Yn.checkStrictly.value};if(toggleRowStatus(Et.value,Wn,wr,Nr,sr?void 0:Dt.value)){const Pn=(Et.value||[]).slice();Vn&&oe.emit("select",Pn,Wn),oe.emit("selection-change",Pn)}},Un=()=>{var Wn,wr;const Vn=At.value?!qe.value:!(qe.value||Et.value.length);qe.value=Vn;let sr=!1,nr=0;const Ar=(wr=(Wn=oe==null?void 0:oe.store)==null?void 0:Wn.states)==null?void 0:wr.rowKey.value,{childrenColumnName:Wr}=oe.store.states,Yn={children:Wr.value,checkStrictly:!1};de.value.forEach((Nr,Hr)=>{const Pn=Hr+nr;toggleRowStatus(Et.value,Nr,Vn,Yn,Dt.value,Pn)&&(sr=!0),nr+=Rn(getRowIdentity(Nr,Ar))}),sr&&oe.emit("selection-change",Et.value?Et.value.slice():[]),oe.emit("select-all",(Et.value||[]).slice())},zn=()=>{const Wn=getKeysMap(Et.value,ue.value);de.value.forEach(wr=>{const Vn=getRowIdentity(wr,ue.value),sr=Wn[Vn];sr&&(Et.value[sr.index]=wr)})},Hn=()=>{var Wn;if(((Wn=de.value)==null?void 0:Wn.length)===0){qe.value=!1;return}const{childrenColumnName:wr}=oe.store.states,Vn=ue.value?getKeysMap(Et.value,ue.value):void 0;let sr=0,nr=0;const Ar=Nr=>Vn?!!Vn[getRowIdentity(Nr,ue.value)]:Et.value.includes(Nr),Wr=Nr=>{var Hr;for(const Pn of Nr){const An=Dt.value&&Dt.value.call(null,Pn,sr);if(Ar(Pn))nr++;else if(!Dt.value||An)return!1;if(sr++,(Hr=Pn[wr.value])!=null&&Hr.length&&!Wr(Pn[wr.value]))return!1}return!0},Yn=Wr(de.value||[]);qe.value=nr===0?!1:Yn},Rn=Wn=>{var wr;if(!oe||!oe.store)return 0;const{treeData:Vn}=oe.store.states;let sr=0;const nr=(wr=Vn.value[Wn])==null?void 0:wr.children;return nr&&(sr+=nr.length,nr.forEach(Ar=>{sr+=Rn(Ar)})),sr},Jn=(Wn,wr)=>{Array.isArray(Wn)||(Wn=[Wn]);const Vn={};return Wn.forEach(sr=>{Lt.value[sr.id]=wr,Vn[sr.columnKey||sr.id]=wr}),Vn},Qn=(Wn,wr,Vn)=>{_n.value&&_n.value!==Wn&&(_n.value.order=null),_n.value=Wn,bn.value=wr,vn.value=Vn},_r=()=>{let Wn=unref(he);Object.keys(Lt.value).forEach(wr=>{const Vn=Lt.value[wr];if(!Vn||Vn.length===0)return;const sr=getColumnById({columns:xe.value},wr);sr&&sr.filterMethod&&(Wn=Wn.filter(nr=>Vn.some(Ar=>sr.filterMethod.call(null,Ar,nr,sr))))}),jt.value=Wn},Zn=()=>{de.value=sortData(jt.value,{sortingColumn:_n.value,sortProp:bn.value,sortOrder:vn.value})},Gn=(Wn=void 0)=>{Wn&&Wn.filter||_r(),Zn()},Nn=Wn=>{const{tableHeaderRef:wr}=oe.refs;if(!wr)return;const Vn=Object.assign({},wr.filterPanels),sr=Object.keys(Vn);if(sr.length)if(typeof Wn=="string"&&(Wn=[Wn]),Array.isArray(Wn)){const nr=Wn.map(Ar=>getColumnByKey({columns:xe.value},Ar));sr.forEach(Ar=>{const Wr=nr.find(Yn=>Yn.id===Ar);Wr&&(Wr.filteredValue=[])}),oe.store.commit("filterChange",{column:nr,values:[],silent:!0,multi:!0})}else sr.forEach(nr=>{const Ar=xe.value.find(Wr=>Wr.id===nr);Ar&&(Ar.filteredValue=[])}),Lt.value={},oe.store.commit("filterChange",{column:{},values:[],silent:!0})},Dn=()=>{_n.value&&(Qn(null,null,null),oe.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:jn,toggleRowExpansion:ir,updateExpandRows:Fn,states:Kn,isRowExpanded:mr}=useExpand({data:de,rowKey:ue}),{updateTreeExpandKeys:yr,toggleTreeExpansion:Cr,updateTreeData:br,updateKeyChildren:Pr,loadOrToggle:gr,states:tr}=useTree$2({data:de,rowKey:ue}),{updateCurrentRowData:Sr,updateCurrentRow:Dr,setCurrentRowKey:Lr,states:Ur}=useCurrent({data:de,rowKey:ue});return{assertRowKey:$n,updateColumns:Sn,scheduleLayout:In,isSelected:En,clearSelection:xn,cleanSelection:kn,getSelectionRows:On,toggleRowSelection:Mn,_toggleAllSelection:Un,toggleAllSelection:null,updateSelectionByRowKey:zn,updateAllSelected:Hn,updateFilters:Jn,updateCurrentRow:Dr,updateSort:Qn,execFilter:_r,execSort:Zn,execQuery:Gn,clearFilter:Nn,clearSort:Dn,toggleRowExpansion:ir,setExpandRowKeysAdapter:Wn=>{jn(Wn),yr(Wn)},setCurrentRowKey:Lr,toggleRowExpansionAdapter:(Wn,wr)=>{xe.value.some(({type:sr})=>sr==="expand")?ir(Wn,wr):Cr(Wn,wr)},isRowExpanded:mr,updateExpandRows:Fn,updateCurrentRowData:Sr,loadOrToggle:gr,updateTreeData:br,updateKeyChildren:Pr,states:{tableSize:ie,rowKey:ue,data:de,_data:he,isComplex:pe,_columns:_e,originColumns:Ce,columns:xe,fixedColumns:Ie,rightFixedColumns:$e,leafColumns:Ne,fixedLeafColumns:Oe,rightFixedLeafColumns:Fe,updateOrderFns:Ve,leafColumnsLength:ze,fixedLeafColumnsLength:Ue,rightFixedLeafColumnsLength:Pt,isAllSelected:qe,selection:Et,reserveSelection:kt,selectOnIndeterminate:At,selectable:Dt,filters:Lt,filteredData:jt,sortingColumn:_n,sortProp:bn,sortOrder:vn,hoverRow:Tn,...Kn,...tr,...Ur}}}function replaceColumn(le,oe){return le.map(ie=>{var ue;return ie.id===oe.id?oe:((ue=ie.children)!=null&&ue.length&&(ie.children=replaceColumn(ie.children,oe)),ie)})}function sortColumn(le){le.forEach(oe=>{var ie,ue;oe.no=(ie=oe.getColumnIndex)==null?void 0:ie.call(oe),(ue=oe.children)!=null&&ue.length&&sortColumn(oe.children)}),le.sort((oe,ie)=>oe.no-ie.no)}function useStore(){const le=getCurrentInstance(),oe=useWatcher$1();return{ns:useNamespace("table"),...oe,mutations:{setData(pe,_e){const Ce=unref(pe._data)!==_e;pe.data.value=_e,pe._data.value=_e,le.store.execQuery(),le.store.updateCurrentRowData(),le.store.updateExpandRows(),le.store.updateTreeData(le.store.states.defaultExpandAll.value),unref(pe.reserveSelection)?(le.store.assertRowKey(),le.store.updateSelectionByRowKey()):Ce?le.store.clearSelection():le.store.cleanSelection(),le.store.updateAllSelected(),le.$ready&&le.store.scheduleLayout()},insertColumn(pe,_e,Ce,xe){const Ie=unref(pe._columns);let $e=[];Ce?(Ce&&!Ce.children&&(Ce.children=[]),Ce.children.push(_e),$e=replaceColumn(Ie,Ce)):(Ie.push(_e),$e=Ie),sortColumn($e),pe._columns.value=$e,pe.updateOrderFns.push(xe),_e.type==="selection"&&(pe.selectable.value=_e.selectable,pe.reserveSelection.value=_e.reserveSelection),le.$ready&&(le.store.updateColumns(),le.store.scheduleLayout())},updateColumnOrder(pe,_e){var Ce;((Ce=_e.getColumnIndex)==null?void 0:Ce.call(_e))!==_e.no&&(sortColumn(pe._columns.value),le.$ready&&le.store.updateColumns())},removeColumn(pe,_e,Ce,xe){const Ie=unref(pe._columns)||[];if(Ce)Ce.children.splice(Ce.children.findIndex(Ne=>Ne.id===_e.id),1),nextTick(()=>{var Ne;((Ne=Ce.children)==null?void 0:Ne.length)===0&&delete Ce.children}),pe._columns.value=replaceColumn(Ie,Ce);else{const Ne=Ie.indexOf(_e);Ne>-1&&(Ie.splice(Ne,1),pe._columns.value=Ie)}const $e=pe.updateOrderFns.indexOf(xe);$e>-1&&pe.updateOrderFns.splice($e,1),le.$ready&&(le.store.updateColumns(),le.store.scheduleLayout())},sort(pe,_e){const{prop:Ce,order:xe,init:Ie}=_e;if(Ce){const $e=unref(pe.columns).find(Ne=>Ne.property===Ce);$e&&($e.order=xe,le.store.updateSort($e,Ce,xe),le.store.commit("changeSortCondition",{init:Ie}))}},changeSortCondition(pe,_e){const{sortingColumn:Ce,sortProp:xe,sortOrder:Ie}=pe,$e=unref(Ce),Ne=unref(xe),Oe=unref(Ie);Oe===null&&(pe.sortingColumn.value=null,pe.sortProp.value=null);const Fe={filter:!0};le.store.execQuery(Fe),(!_e||!(_e.silent||_e.init))&&le.emit("sort-change",{column:$e,prop:Ne,order:Oe}),le.store.updateTableScrollY()},filterChange(pe,_e){const{column:Ce,values:xe,silent:Ie}=_e,$e=le.store.updateFilters(Ce,xe);le.store.execQuery(),Ie||le.emit("filter-change",$e),le.store.updateTableScrollY()},toggleAllSelection(){le.store.toggleAllSelection()},rowSelectedChanged(pe,_e){le.store.toggleRowSelection(_e),le.store.updateAllSelected()},setHoverRow(pe,_e){pe.hoverRow.value=_e},setCurrentRow(pe,_e){le.store.updateCurrentRow(_e)}},commit:function(pe,..._e){const Ce=le.store.mutations;if(Ce[pe])Ce[pe].apply(le,[le.store.states].concat(_e));else throw new Error(`Action not found: ${pe}`)},updateTableScrollY:function(){nextTick(()=>le.layout.updateScrollY.apply(le.layout))}}}const InitialStateMap={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data","treeProps.hasChildren":{key:"lazyColumnIdentifier",default:"hasChildren"},"treeProps.children":{key:"childrenColumnName",default:"children"},"treeProps.checkStrictly":{key:"checkStrictly",default:!1}};function createStore(le,oe){if(!le)throw new Error("Table is required.");const ie=useStore();return ie.toggleAllSelection=debounce(ie._toggleAllSelection,10),Object.keys(InitialStateMap).forEach(ue=>{handleValue(getArrKeysValue(oe,ue),ue,ie)}),proxyTableProps(ie,oe),ie}function proxyTableProps(le,oe){Object.keys(InitialStateMap).forEach(ie=>{watch(()=>getArrKeysValue(oe,ie),ue=>{handleValue(ue,ie,le)})})}function handleValue(le,oe,ie){let ue=le,de=InitialStateMap[oe];typeof InitialStateMap[oe]=="object"&&(de=de.key,ue=ue||InitialStateMap[oe].default),ie.states[de].value=ue}function getArrKeysValue(le,oe){if(oe.includes(".")){const ie=oe.split(".");let ue=le;return ie.forEach(de=>{ue=ue[de]}),ue}else return le[oe]}class TableLayout{constructor(oe){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=ref(null),this.scrollX=ref(!1),this.scrollY=ref(!1),this.bodyWidth=ref(null),this.fixedWidth=ref(null),this.rightFixedWidth=ref(null),this.gutterWidth=0;for(const ie in oe)hasOwn$b(oe,ie)&&(isRef(this[ie])?this[ie].value=oe[ie]:this[ie]=oe[ie]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){if(this.height.value===null)return!1;const ie=this.table.refs.scrollBarRef;if(this.table.vnode.el&&(ie!=null&&ie.wrapRef)){let ue=!0;const de=this.scrollY.value;return ue=ie.wrapRef.scrollHeight>ie.wrapRef.clientHeight,this.scrollY.value=ue,de!==ue}return!1}setHeight(oe,ie="height"){if(!isClient)return;const ue=this.table.vnode.el;if(oe=parseHeight(oe),this.height.value=Number(oe),!ue&&(oe||oe===0))return nextTick(()=>this.setHeight(oe,ie));typeof oe=="number"?(ue.style[ie]=`${oe}px`,this.updateElsHeight()):typeof oe=="string"&&(ue.style[ie]=oe,this.updateElsHeight())}setMaxHeight(oe){this.setHeight(oe,"max-height")}getFlattenColumns(){const oe=[];return this.table.store.states.columns.value.forEach(ue=>{ue.isColumnGroup?oe.push.apply(oe,ue.columns):oe.push(ue)}),oe}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(oe){if(!oe)return!0;let ie=oe;for(;ie.tagName!=="DIV";){if(getComputedStyle(ie).display==="none")return!0;ie=ie.parentElement}return!1}updateColumnsWidth(){if(!isClient)return;const oe=this.fit,ie=this.table.vnode.el.clientWidth;let ue=0;const de=this.getFlattenColumns(),he=de.filter(Ce=>typeof Ce.width!="number");if(de.forEach(Ce=>{typeof Ce.width=="number"&&Ce.realWidth&&(Ce.realWidth=null)}),he.length>0&&oe){if(de.forEach(Ce=>{ue+=Number(Ce.width||Ce.minWidth||80)}),ue<=ie){this.scrollX.value=!1;const Ce=ie-ue;if(he.length===1)he[0].realWidth=Number(he[0].minWidth||80)+Ce;else{const xe=he.reduce((Ne,Oe)=>Ne+Number(Oe.minWidth||80),0),Ie=Ce/xe;let $e=0;he.forEach((Ne,Oe)=>{if(Oe===0)return;const Fe=Math.floor(Number(Ne.minWidth||80)*Ie);$e+=Fe,Ne.realWidth=Number(Ne.minWidth||80)+Fe}),he[0].realWidth=Number(he[0].minWidth||80)+Ce-$e}}else this.scrollX.value=!0,he.forEach(Ce=>{Ce.realWidth=Number(Ce.minWidth)});this.bodyWidth.value=Math.max(ue,ie),this.table.state.resizeState.value.width=this.bodyWidth.value}else de.forEach(Ce=>{!Ce.width&&!Ce.minWidth?Ce.realWidth=80:Ce.realWidth=Number(Ce.width||Ce.minWidth),ue+=Ce.realWidth}),this.scrollX.value=ue>ie,this.bodyWidth.value=ue;const pe=this.store.states.fixedColumns.value;if(pe.length>0){let Ce=0;pe.forEach(xe=>{Ce+=Number(xe.realWidth||xe.width)}),this.fixedWidth.value=Ce}const _e=this.store.states.rightFixedColumns.value;if(_e.length>0){let Ce=0;_e.forEach(xe=>{Ce+=Number(xe.realWidth||xe.width)}),this.rightFixedWidth.value=Ce}this.notifyObservers("columns")}addObserver(oe){this.observers.push(oe)}removeObserver(oe){const ie=this.observers.indexOf(oe);ie!==-1&&this.observers.splice(ie,1)}notifyObservers(oe){this.observers.forEach(ue=>{var de,he;switch(oe){case"columns":(de=ue.state)==null||de.onColumnsChange(this);break;case"scrollable":(he=ue.state)==null||he.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${oe}.`)}})}}const{CheckboxGroup:ElCheckboxGroup}=ElCheckbox,_sfc_main$R=defineComponent({name:"ElTableFilterPanel",components:{ElCheckbox,ElCheckboxGroup,ElScrollbar,ElTooltip,ElIcon,ArrowDown:arrow_down_default,ArrowUp:arrow_up_default},directives:{ClickOutside},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function},appendTo:{type:String}},setup(le){const oe=getCurrentInstance(),{t:ie}=useLocale(),ue=useNamespace("table-filter"),de=oe==null?void 0:oe.parent;de.filterPanels.value[le.column.id]||(de.filterPanels.value[le.column.id]=oe);const he=ref(!1),pe=ref(null),_e=computed(()=>le.column&&le.column.filters),Ce=computed(()=>le.column.filterClassName?`${ue.b()} ${le.column.filterClassName}`:ue.b()),xe=computed({get:()=>{var kt;return(((kt=le.column)==null?void 0:kt.filteredValue)||[])[0]},set:kt=>{Ie.value&&(typeof kt<"u"&&kt!==null?Ie.value.splice(0,1,kt):Ie.value.splice(0,1))}}),Ie=computed({get(){return le.column?le.column.filteredValue||[]:[]},set(kt){le.column&&le.upDataColumn("filteredValue",kt)}}),$e=computed(()=>le.column?le.column.filterMultiple:!0),Ne=kt=>kt.value===xe.value,Oe=()=>{he.value=!1},Fe=kt=>{kt.stopPropagation(),he.value=!he.value},Ve=()=>{he.value=!1},ze=()=>{qe(Ie.value),Oe()},Ue=()=>{Ie.value=[],qe(Ie.value),Oe()},Pt=kt=>{xe.value=kt,qe(typeof kt<"u"&&kt!==null?Ie.value:[]),Oe()},qe=kt=>{le.store.commit("filterChange",{column:le.column,values:kt}),le.store.updateAllSelected()};watch(he,kt=>{le.column&&le.upDataColumn("filterOpened",kt)},{immediate:!0});const Et=computed(()=>{var kt,At;return(At=(kt=pe.value)==null?void 0:kt.popperRef)==null?void 0:At.contentRef});return{tooltipVisible:he,multiple:$e,filterClassName:Ce,filteredValue:Ie,filterValue:xe,filters:_e,handleConfirm:ze,handleReset:Ue,handleSelect:Pt,isActive:Ne,t:ie,ns:ue,showFilterPanel:Fe,hideFilterPanel:Ve,popperPaneRef:Et,tooltip:pe}}});function _sfc_render$4(le,oe,ie,ue,de,he){const pe=resolveComponent("el-checkbox"),_e=resolveComponent("el-checkbox-group"),Ce=resolveComponent("el-scrollbar"),xe=resolveComponent("arrow-up"),Ie=resolveComponent("arrow-down"),$e=resolveComponent("el-icon"),Ne=resolveComponent("el-tooltip"),Oe=resolveDirective("click-outside");return openBlock(),createBlock(Ne,{ref:"tooltip",visible:le.tooltipVisible,offset:0,placement:le.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":le.filterClassName,persistent:"","append-to":le.appendTo},{content:withCtx(()=>[le.multiple?(openBlock(),createElementBlock("div",{key:0},[createBaseVNode("div",{class:normalizeClass(le.ns.e("content"))},[createVNode(Ce,{"wrap-class":le.ns.e("wrap")},{default:withCtx(()=>[createVNode(_e,{modelValue:le.filteredValue,"onUpdate:modelValue":Fe=>le.filteredValue=Fe,class:normalizeClass(le.ns.e("checkbox-group"))},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(le.filters,Fe=>(openBlock(),createBlock(pe,{key:Fe.value,value:Fe.value},{default:withCtx(()=>[createTextVNode(toDisplayString(Fe.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","class"])]),_:1},8,["wrap-class"])],2),createBaseVNode("div",{class:normalizeClass(le.ns.e("bottom"))},[createBaseVNode("button",{class:normalizeClass({[le.ns.is("disabled")]:le.filteredValue.length===0}),disabled:le.filteredValue.length===0,type:"button",onClick:le.handleConfirm},toDisplayString(le.t("el.table.confirmFilter")),11,["disabled","onClick"]),createBaseVNode("button",{type:"button",onClick:le.handleReset},toDisplayString(le.t("el.table.resetFilter")),9,["onClick"])],2)])):(openBlock(),createElementBlock("ul",{key:1,class:normalizeClass(le.ns.e("list"))},[createBaseVNode("li",{class:normalizeClass([le.ns.e("list-item"),{[le.ns.is("active")]:le.filterValue===void 0||le.filterValue===null}]),onClick:Fe=>le.handleSelect(null)},toDisplayString(le.t("el.table.clearFilter")),11,["onClick"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(le.filters,Fe=>(openBlock(),createElementBlock("li",{key:Fe.value,class:normalizeClass([le.ns.e("list-item"),le.ns.is("active",le.isActive(Fe))]),label:Fe.value,onClick:Ve=>le.handleSelect(Fe.value)},toDisplayString(Fe.text),11,["label","onClick"]))),128))],2))]),default:withCtx(()=>[withDirectives((openBlock(),createElementBlock("span",{class:normalizeClass([`${le.ns.namespace.value}-table__column-filter-trigger`,`${le.ns.namespace.value}-none-outline`]),onClick:le.showFilterPanel},[createVNode($e,null,{default:withCtx(()=>[renderSlot(le.$slots,"filter-icon",{},()=>[le.column.filterOpened?(openBlock(),createBlock(xe,{key:0})):(openBlock(),createBlock(Ie,{key:1}))])]),_:3})],10,["onClick"])),[[Oe,le.hideFilterPanel,le.popperPaneRef]])]),_:3},8,["visible","placement","popper-class","append-to"])}var FilterPanel=_export_sfc$1(_sfc_main$R,[["render",_sfc_render$4],["__file","filter-panel.vue"]]);function useLayoutObserver(le){const oe=getCurrentInstance();onBeforeMount(()=>{ie.value.addObserver(oe)}),onMounted(()=>{ue(ie.value),de(ie.value)}),onUpdated(()=>{ue(ie.value),de(ie.value)}),onUnmounted(()=>{ie.value.removeObserver(oe)});const ie=computed(()=>{const he=le.layout;if(!he)throw new Error("Can not find table layout.");return he}),ue=he=>{var pe;const _e=((pe=le.vnode.el)==null?void 0:pe.querySelectorAll("colgroup > col"))||[];if(!_e.length)return;const Ce=he.getFlattenColumns(),xe={};Ce.forEach(Ie=>{xe[Ie.id]=Ie});for(let Ie=0,$e=_e.length;Ie<$e;Ie++){const Ne=_e[Ie],Oe=Ne.getAttribute("name"),Fe=xe[Oe];Fe&&Ne.setAttribute("width",Fe.realWidth||Fe.width)}},de=he=>{var pe,_e;const Ce=((pe=le.vnode.el)==null?void 0:pe.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let Ie=0,$e=Ce.length;Ie<$e;Ie++)Ce[Ie].setAttribute("width",he.scrollY.value?he.gutterWidth:"0");const xe=((_e=le.vnode.el)==null?void 0:_e.querySelectorAll("th.gutter"))||[];for(let Ie=0,$e=xe.length;Ie<$e;Ie++){const Ne=xe[Ie];Ne.style.width=he.scrollY.value?`${he.gutterWidth}px`:"0",Ne.style.display=he.scrollY.value?"":"none"}};return{tableLayout:ie.value,onColumnsChange:ue,onScrollableChange:de}}const TABLE_INJECTION_KEY=Symbol("ElTable");function useEvent(le,oe){const ie=getCurrentInstance(),ue=inject(TABLE_INJECTION_KEY),de=Ve=>{Ve.stopPropagation()},he=(Ve,ze)=>{!ze.filters&&ze.sortable?Fe(Ve,ze,!1):ze.filterable&&!ze.sortable&&de(Ve),ue==null||ue.emit("header-click",ze,Ve)},pe=(Ve,ze)=>{ue==null||ue.emit("header-contextmenu",ze,Ve)},_e=ref(null),Ce=ref(!1),xe=ref({}),Ie=(Ve,ze)=>{if(isClient&&!(ze.children&&ze.children.length>0)&&_e.value&&le.border){Ce.value=!0;const Ue=ue;oe("set-drag-visible",!0);const qe=(Ue==null?void 0:Ue.vnode.el).getBoundingClientRect().left,Et=ie.vnode.el.querySelector(`th.${ze.id}`),kt=Et.getBoundingClientRect(),At=kt.left-qe+30;addClass(Et,"noclick"),xe.value={startMouseLeft:Ve.clientX,startLeft:kt.right-qe,startColumnLeft:kt.left-qe,tableLeft:qe};const Dt=Ue==null?void 0:Ue.refs.resizeProxy;Dt.style.left=`${xe.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const Lt=_n=>{const bn=_n.clientX-xe.value.startMouseLeft,vn=xe.value.startLeft+bn;Dt.style.left=`${Math.max(At,vn)}px`},jt=()=>{if(Ce.value){const{startColumnLeft:_n,startLeft:bn}=xe.value,Tn=Number.parseInt(Dt.style.left,10)-_n;ze.width=ze.realWidth=Tn,Ue==null||Ue.emit("header-dragend",ze.width,bn-_n,ze,Ve),requestAnimationFrame(()=>{le.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",Ce.value=!1,_e.value=null,xe.value={},oe("set-drag-visible",!1)}document.removeEventListener("mousemove",Lt),document.removeEventListener("mouseup",jt),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{removeClass(Et,"noclick")},0)};document.addEventListener("mousemove",Lt),document.addEventListener("mouseup",jt)}},$e=(Ve,ze)=>{if(ze.children&&ze.children.length>0)return;const Ue=Ve.target;if(!isElement$1(Ue))return;const Pt=Ue==null?void 0:Ue.closest("th");if(!(!ze||!ze.resizable)&&!Ce.value&&le.border){const qe=Pt.getBoundingClientRect(),Et=document.body.style;qe.width>12&&qe.right-Ve.pageX<8?(Et.cursor="col-resize",hasClass(Pt,"is-sortable")&&(Pt.style.cursor="col-resize"),_e.value=ze):Ce.value||(Et.cursor="",hasClass(Pt,"is-sortable")&&(Pt.style.cursor="pointer"),_e.value=null)}},Ne=()=>{isClient&&(document.body.style.cursor="")},Oe=({order:Ve,sortOrders:ze})=>{if(Ve==="")return ze[0];const Ue=ze.indexOf(Ve||null);return ze[Ue>ze.length-2?0:Ue+1]},Fe=(Ve,ze,Ue)=>{var Pt;Ve.stopPropagation();const qe=ze.order===Ue?null:Ue||Oe(ze),Et=(Pt=Ve.target)==null?void 0:Pt.closest("th");if(Et&&hasClass(Et,"noclick")){removeClass(Et,"noclick");return}if(!ze.sortable)return;const kt=Ve.currentTarget;if(["ascending","descending"].some(_n=>hasClass(kt,_n)&&!ze.sortOrders.includes(_n)))return;const At=le.store.states;let Dt=At.sortProp.value,Lt;const jt=At.sortingColumn.value;(jt!==ze||jt===ze&&jt.order===null)&&(jt&&(jt.order=null),At.sortingColumn.value=ze,Dt=ze.property),qe?Lt=ze.order=qe:Lt=ze.order=null,At.sortProp.value=Dt,At.sortOrder.value=Lt,ue==null||ue.store.commit("changeSortCondition")};return{handleHeaderClick:he,handleHeaderContextMenu:pe,handleMouseDown:Ie,handleMouseMove:$e,handleMouseOut:Ne,handleSortClick:Fe,handleFilterClick:de}}function useStyle$2(le){const oe=inject(TABLE_INJECTION_KEY),ie=useNamespace("table");return{getHeaderRowStyle:_e=>{const Ce=oe==null?void 0:oe.props.headerRowStyle;return typeof Ce=="function"?Ce.call(null,{rowIndex:_e}):Ce},getHeaderRowClass:_e=>{const Ce=[],xe=oe==null?void 0:oe.props.headerRowClassName;return typeof xe=="string"?Ce.push(xe):typeof xe=="function"&&Ce.push(xe.call(null,{rowIndex:_e})),Ce.join(" ")},getHeaderCellStyle:(_e,Ce,xe,Ie)=>{var $e;let Ne=($e=oe==null?void 0:oe.props.headerCellStyle)!=null?$e:{};typeof Ne=="function"&&(Ne=Ne.call(null,{rowIndex:_e,columnIndex:Ce,row:xe,column:Ie}));const Oe=getFixedColumnOffset(Ce,Ie.fixed,le.store,xe);return ensurePosition(Oe,"left"),ensurePosition(Oe,"right"),Object.assign({},Ne,Oe)},getHeaderCellClass:(_e,Ce,xe,Ie)=>{const $e=getFixedColumnsClass(ie.b(),Ce,Ie.fixed,le.store,xe),Ne=[Ie.id,Ie.order,Ie.headerAlign,Ie.className,Ie.labelClassName,...$e];Ie.children||Ne.push("is-leaf"),Ie.sortable&&Ne.push("is-sortable");const Oe=oe==null?void 0:oe.props.headerCellClassName;return typeof Oe=="string"?Ne.push(Oe):typeof Oe=="function"&&Ne.push(Oe.call(null,{rowIndex:_e,columnIndex:Ce,row:xe,column:Ie})),Ne.push(ie.e("cell")),Ne.filter(Fe=>!!Fe).join(" ")}}}const getAllColumns=le=>{const oe=[];return le.forEach(ie=>{ie.children?(oe.push(ie),oe.push.apply(oe,getAllColumns(ie.children))):oe.push(ie)}),oe},convertToRows=le=>{let oe=1;const ie=(he,pe)=>{if(pe&&(he.level=pe.level+1,oe<he.level&&(oe=he.level)),he.children){let _e=0;he.children.forEach(Ce=>{ie(Ce,he),_e+=Ce.colSpan}),he.colSpan=_e}else he.colSpan=1};le.forEach(he=>{he.level=1,ie(he,void 0)});const ue=[];for(let he=0;he<oe;he++)ue.push([]);return getAllColumns(le).forEach(he=>{he.children?(he.rowSpan=1,he.children.forEach(pe=>pe.isSubColumn=!0)):he.rowSpan=oe-he.level+1,ue[he.level-1].push(he)}),ue};function useUtils$1(le){const oe=inject(TABLE_INJECTION_KEY),ie=computed(()=>convertToRows(le.store.states.originColumns.value));return{isGroup:computed(()=>{const he=ie.value.length>1;return he&&oe&&(oe.state.isGroup.value=!0),he}),toggleAllSelection:he=>{he.stopPropagation(),oe==null||oe.store.commit("toggleAllSelection")},columnRows:ie}}var TableHeader=defineComponent({name:"ElTableHeader",components:{ElCheckbox},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})},appendFilterPanelTo:{type:String}},setup(le,{emit:oe}){const ie=getCurrentInstance(),ue=inject(TABLE_INJECTION_KEY),de=useNamespace("table"),he=ref({}),{onColumnsChange:pe,onScrollableChange:_e}=useLayoutObserver(ue);onMounted(async()=>{await nextTick(),await nextTick();const{prop:At,order:Dt}=le.defaultSort;ue==null||ue.store.commit("sort",{prop:At,order:Dt,init:!0})});const{handleHeaderClick:Ce,handleHeaderContextMenu:xe,handleMouseDown:Ie,handleMouseMove:$e,handleMouseOut:Ne,handleSortClick:Oe,handleFilterClick:Fe}=useEvent(le,oe),{getHeaderRowStyle:Ve,getHeaderRowClass:ze,getHeaderCellStyle:Ue,getHeaderCellClass:Pt}=useStyle$2(le),{isGroup:qe,toggleAllSelection:Et,columnRows:kt}=useUtils$1(le);return ie.state={onColumnsChange:pe,onScrollableChange:_e},ie.filterPanels=he,{ns:de,filterPanels:he,onColumnsChange:pe,onScrollableChange:_e,columnRows:kt,getHeaderRowClass:ze,getHeaderRowStyle:Ve,getHeaderCellClass:Pt,getHeaderCellStyle:Ue,handleHeaderClick:Ce,handleHeaderContextMenu:xe,handleMouseDown:Ie,handleMouseMove:$e,handleMouseOut:Ne,handleSortClick:Oe,handleFilterClick:Fe,isGroup:qe,toggleAllSelection:Et}},render(){const{ns:le,isGroup:oe,columnRows:ie,getHeaderCellStyle:ue,getHeaderCellClass:de,getHeaderRowClass:he,getHeaderRowStyle:pe,handleHeaderClick:_e,handleHeaderContextMenu:Ce,handleMouseDown:xe,handleMouseMove:Ie,handleSortClick:$e,handleMouseOut:Ne,store:Oe,$parent:Fe}=this;let Ve=1;return h$3("thead",{class:{[le.is("group")]:oe}},ie.map((ze,Ue)=>h$3("tr",{class:he(Ue),key:Ue,style:pe(Ue)},ze.map((Pt,qe)=>(Pt.rowSpan>Ve&&(Ve=Pt.rowSpan),h$3("th",{class:de(Ue,qe,ze,Pt),colspan:Pt.colSpan,key:`${Pt.id}-thead`,rowspan:Pt.rowSpan,style:ue(Ue,qe,ze,Pt),onClick:Et=>{Et.currentTarget.classList.contains("noclick")||_e(Et,Pt)},onContextmenu:Et=>Ce(Et,Pt),onMousedown:Et=>xe(Et,Pt),onMousemove:Et=>Ie(Et,Pt),onMouseout:Ne},[h$3("div",{class:["cell",Pt.filteredValue&&Pt.filteredValue.length>0?"highlight":""]},[Pt.renderHeader?Pt.renderHeader({column:Pt,$index:qe,store:Oe,_self:Fe}):Pt.label,Pt.sortable&&h$3("span",{onClick:Et=>$e(Et,Pt),class:"caret-wrapper"},[h$3("i",{onClick:Et=>$e(Et,Pt,"ascending"),class:"sort-caret ascending"}),h$3("i",{onClick:Et=>$e(Et,Pt,"descending"),class:"sort-caret descending"})]),Pt.filterable&&h$3(FilterPanel,{store:Oe,placement:Pt.filterPlacement||"bottom-start",appendTo:Fe.appendFilterPanelTo,column:Pt,upDataColumn:(Et,kt)=>{Pt[Et]=kt}},{"filter-icon":()=>Pt.renderFilterIcon?Pt.renderFilterIcon({filterOpened:Pt.filterOpened}):null})])]))))))}});function isGreaterThan(le,oe,ie=.03){return le-oe>ie}function useEvents(le){const oe=inject(TABLE_INJECTION_KEY),ie=ref(""),ue=ref(h$3("div")),de=(Fe,Ve,ze)=>{var Ue;const Pt=oe,qe=getCell(Fe);let Et;const kt=(Ue=Pt==null?void 0:Pt.vnode.el)==null?void 0:Ue.dataset.prefix;qe&&(Et=getColumnByCell({columns:le.store.states.columns.value},qe,kt),Et&&(Pt==null||Pt.emit(`cell-${ze}`,Ve,Et,qe,Fe))),Pt==null||Pt.emit(`row-${ze}`,Ve,Et,Fe)},he=(Fe,Ve)=>{de(Fe,Ve,"dblclick")},pe=(Fe,Ve)=>{le.store.commit("setCurrentRow",Ve),de(Fe,Ve,"click")},_e=(Fe,Ve)=>{de(Fe,Ve,"contextmenu")},Ce=debounce(Fe=>{le.store.commit("setHoverRow",Fe)},30),xe=debounce(()=>{le.store.commit("setHoverRow",null)},30),Ie=Fe=>{const Ve=window.getComputedStyle(Fe,null),ze=Number.parseInt(Ve.paddingLeft,10)||0,Ue=Number.parseInt(Ve.paddingRight,10)||0,Pt=Number.parseInt(Ve.paddingTop,10)||0,qe=Number.parseInt(Ve.paddingBottom,10)||0;return{left:ze,right:Ue,top:Pt,bottom:qe}},$e=(Fe,Ve,ze)=>{let Ue=Ve.target.parentNode;for(;Fe>1&&(Ue=Ue==null?void 0:Ue.nextSibling,!(!Ue||Ue.nodeName!=="TR"));)ze(Ue,"hover-row hover-fixed-row"),Fe--};return{handleDoubleClick:he,handleClick:pe,handleContextMenu:_e,handleMouseEnter:Ce,handleMouseLeave:xe,handleCellMouseEnter:(Fe,Ve,ze)=>{var Ue;const Pt=oe,qe=getCell(Fe),Et=(Ue=Pt==null?void 0:Pt.vnode.el)==null?void 0:Ue.dataset.prefix;if(qe){const Sn=getColumnByCell({columns:le.store.states.columns.value},qe,Et);qe.rowSpan>1&&$e(qe.rowSpan,Fe,addClass);const In=Pt.hoverState={cell:qe,column:Sn,row:Ve};Pt==null||Pt.emit("cell-mouse-enter",In.row,In.column,In.cell,Fe)}if(!ze)return;const kt=Fe.target.querySelector(".cell");if(!(hasClass(kt,`${Et}-tooltip`)&&kt.childNodes.length))return;const At=document.createRange();At.setStart(kt,0),At.setEnd(kt,kt.childNodes.length);const{width:Dt,height:Lt}=At.getBoundingClientRect(),{width:jt,height:_n}=kt.getBoundingClientRect(),{top:bn,left:vn,right:Tn,bottom:$n}=Ie(kt),wn=vn+Tn,Cn=bn+$n;(isGreaterThan(Dt+wn,jt)||isGreaterThan(Lt+Cn,_n)||isGreaterThan(kt.scrollWidth,jt))&&createTablePopper(ze,qe.innerText||qe.textContent,qe,Pt)},handleCellMouseLeave:Fe=>{const Ve=getCell(Fe);if(!Ve)return;Ve.rowSpan>1&&$e(Ve.rowSpan,Fe,removeClass);const ze=oe==null?void 0:oe.hoverState;oe==null||oe.emit("cell-mouse-leave",ze==null?void 0:ze.row,ze==null?void 0:ze.column,ze==null?void 0:ze.cell,Fe)},tooltipContent:ie,tooltipTrigger:ue}}function useStyles$1(le){const oe=inject(TABLE_INJECTION_KEY),ie=useNamespace("table");return{getRowStyle:(xe,Ie)=>{const $e=oe==null?void 0:oe.props.rowStyle;return typeof $e=="function"?$e.call(null,{row:xe,rowIndex:Ie}):$e||null},getRowClass:(xe,Ie)=>{const $e=[ie.e("row")];oe!=null&&oe.props.highlightCurrentRow&&xe===le.store.states.currentRow.value&&$e.push("current-row"),le.stripe&&Ie%2===1&&$e.push(ie.em("row","striped"));const Ne=oe==null?void 0:oe.props.rowClassName;return typeof Ne=="string"?$e.push(Ne):typeof Ne=="function"&&$e.push(Ne.call(null,{row:xe,rowIndex:Ie})),$e},getCellStyle:(xe,Ie,$e,Ne)=>{const Oe=oe==null?void 0:oe.props.cellStyle;let Fe=Oe??{};typeof Oe=="function"&&(Fe=Oe.call(null,{rowIndex:xe,columnIndex:Ie,row:$e,column:Ne}));const Ve=getFixedColumnOffset(Ie,le==null?void 0:le.fixed,le.store);return ensurePosition(Ve,"left"),ensurePosition(Ve,"right"),Object.assign({},Fe,Ve)},getCellClass:(xe,Ie,$e,Ne,Oe)=>{const Fe=getFixedColumnsClass(ie.b(),Ie,le==null?void 0:le.fixed,le.store,void 0,Oe),Ve=[Ne.id,Ne.align,Ne.className,...Fe],ze=oe==null?void 0:oe.props.cellClassName;return typeof ze=="string"?Ve.push(ze):typeof ze=="function"&&Ve.push(ze.call(null,{rowIndex:xe,columnIndex:Ie,row:$e,column:Ne})),Ve.push(ie.e("cell")),Ve.filter(Ue=>!!Ue).join(" ")},getSpan:(xe,Ie,$e,Ne)=>{let Oe=1,Fe=1;const Ve=oe==null?void 0:oe.props.spanMethod;if(typeof Ve=="function"){const ze=Ve({row:xe,column:Ie,rowIndex:$e,columnIndex:Ne});Array.isArray(ze)?(Oe=ze[0],Fe=ze[1]):typeof ze=="object"&&(Oe=ze.rowspan,Fe=ze.colspan)}return{rowspan:Oe,colspan:Fe}},getColspanRealWidth:(xe,Ie,$e)=>{if(Ie<1)return xe[$e].realWidth;const Ne=xe.map(({realWidth:Oe,width:Fe})=>Oe||Fe).slice($e,$e+Ie);return Number(Ne.reduce((Oe,Fe)=>Number(Oe)+Number(Fe),-1))}}}function useRender$1(le){const oe=inject(TABLE_INJECTION_KEY),ie=useNamespace("table"),{handleDoubleClick:ue,handleClick:de,handleContextMenu:he,handleMouseEnter:pe,handleMouseLeave:_e,handleCellMouseEnter:Ce,handleCellMouseLeave:xe,tooltipContent:Ie,tooltipTrigger:$e}=useEvents(le),{getRowStyle:Ne,getRowClass:Oe,getCellStyle:Fe,getCellClass:Ve,getSpan:ze,getColspanRealWidth:Ue}=useStyles$1(le),Pt=computed(()=>le.store.states.columns.value.findIndex(({type:Dt})=>Dt==="default")),qe=(Dt,Lt)=>{const jt=oe.props.rowKey;return jt?getRowIdentity(Dt,jt):Lt},Et=(Dt,Lt,jt,_n=!1)=>{const{tooltipEffect:bn,tooltipOptions:vn,store:Tn}=le,{indent:$n,columns:wn}=Tn.states,Cn=Oe(Dt,Lt);let Sn=!0;return jt&&(Cn.push(ie.em("row",`level-${jt.level}`)),Sn=jt.display),h$3("tr",{style:[Sn?null:{display:"none"},Ne(Dt,Lt)],class:Cn,key:qe(Dt,Lt),onDblclick:En=>ue(En,Dt),onClick:En=>de(En,Dt),onContextmenu:En=>he(En,Dt),onMouseenter:()=>pe(Lt),onMouseleave:_e},wn.value.map((En,xn)=>{const{rowspan:kn,colspan:On}=ze(Dt,En,Lt,xn);if(!kn||!On)return null;const Mn=Object.assign({},En);Mn.realWidth=Ue(wn.value,On,xn);const Un={store:le.store,_self:le.context||oe,column:Mn,row:Dt,$index:Lt,cellIndex:xn,expanded:_n};xn===Pt.value&&jt&&(Un.treeNode={indent:jt.level*$n.value,level:jt.level},typeof jt.expanded=="boolean"&&(Un.treeNode.expanded=jt.expanded,"loading"in jt&&(Un.treeNode.loading=jt.loading),"noLazyChildren"in jt&&(Un.treeNode.noLazyChildren=jt.noLazyChildren)));const zn=`${qe(Dt,Lt)},${xn}`,Hn=Mn.columnKey||Mn.rawColumnKey||"",Rn=kt(xn,En,Un),Jn=En.showOverflowTooltip&&merge({effect:bn},vn,En.showOverflowTooltip);return h$3("td",{style:Fe(Lt,xn,Dt,En),class:Ve(Lt,xn,Dt,En,On-1),key:`${Hn}${zn}`,rowspan:kn,colspan:On,onMouseenter:Qn=>Ce(Qn,Dt,Jn),onMouseleave:xe},[Rn])}))},kt=(Dt,Lt,jt)=>Lt.renderCell(jt);return{wrappedRowRender:(Dt,Lt)=>{const jt=le.store,{isRowExpanded:_n,assertRowKey:bn}=jt,{treeData:vn,lazyTreeNodeMap:Tn,childrenColumnName:$n,rowKey:wn}=jt.states,Cn=jt.states.columns.value;if(Cn.some(({type:In})=>In==="expand")){const In=_n(Dt),En=Et(Dt,Lt,void 0,In),xn=oe.renderExpanded;return In?xn?[[En,h$3("tr",{key:`expanded-row__${En.key}`},[h$3("td",{colspan:Cn.length,class:`${ie.e("cell")} ${ie.e("expanded-cell")}`},[xn({row:Dt,$index:Lt,store:jt,expanded:In})])])]]:En:[[En]]}else if(Object.keys(vn.value).length){bn();const In=getRowIdentity(Dt,wn.value);let En=vn.value[In],xn=null;En&&(xn={expanded:En.expanded,level:En.level,display:!0},typeof En.lazy=="boolean"&&(typeof En.loaded=="boolean"&&En.loaded&&(xn.noLazyChildren=!(En.children&&En.children.length)),xn.loading=En.loading));const kn=[Et(Dt,Lt,xn)];if(En){let On=0;const Mn=(zn,Hn)=>{zn&&zn.length&&Hn&&zn.forEach(Rn=>{const Jn={display:Hn.display&&Hn.expanded,level:Hn.level+1,expanded:!1,noLazyChildren:!1,loading:!1},Qn=getRowIdentity(Rn,wn.value);if(Qn==null)throw new Error("For nested data item, row-key is required.");if(En={...vn.value[Qn]},En&&(Jn.expanded=En.expanded,En.level=En.level||Jn.level,En.display=!!(En.expanded&&Jn.display),typeof En.lazy=="boolean"&&(typeof En.loaded=="boolean"&&En.loaded&&(Jn.noLazyChildren=!(En.children&&En.children.length)),Jn.loading=En.loading)),On++,kn.push(Et(Rn,Lt+On,Jn)),En){const _r=Tn.value[Qn]||Rn[$n.value];Mn(_r,En)}})};En.display=!0;const Un=Tn.value[In]||Dt[$n.value];Mn(Un,En)}return kn}else return Et(Dt,Lt,void 0)},tooltipContent:Ie,tooltipTrigger:$e}}const defaultProps$2={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,tooltipOptions:{type:Object},context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var TableBody=defineComponent({name:"ElTableBody",props:defaultProps$2,setup(le){const oe=getCurrentInstance(),ie=inject(TABLE_INJECTION_KEY),ue=useNamespace("table"),{wrappedRowRender:de,tooltipContent:he,tooltipTrigger:pe}=useRender$1(le),{onColumnsChange:_e,onScrollableChange:Ce}=useLayoutObserver(ie),xe=[];return watch(le.store.states.hoverRow,(Ie,$e)=>{var Ne;const Oe=oe==null?void 0:oe.vnode.el,Fe=Array.from((Oe==null?void 0:Oe.children)||[]).filter(Ue=>Ue==null?void 0:Ue.classList.contains(`${ue.e("row")}`));let Ve=Ie;const ze=(Ne=Fe[Ve])==null?void 0:Ne.childNodes;if(ze!=null&&ze.length){let Ue=0;Array.from(ze).reduce((qe,Et,kt)=>{var At,Dt;return((At=ze[kt])==null?void 0:At.colSpan)>1&&(Ue=(Dt=ze[kt])==null?void 0:Dt.colSpan),Et.nodeName!=="TD"&&Ue===0&&qe.push(kt),Ue>0&&Ue--,qe},[]).forEach(qe=>{var Et;for(Ve=Ie;Ve>0;){const kt=(Et=Fe[Ve-1])==null?void 0:Et.childNodes;if(kt[qe]&&kt[qe].nodeName==="TD"&&kt[qe].rowSpan>1){addClass(kt[qe],"hover-cell"),xe.push(kt[qe]);break}Ve--}})}else xe.forEach(Ue=>removeClass(Ue,"hover-cell")),xe.length=0;!le.store.states.isComplex.value||!isClient||rAF(()=>{const Ue=Fe[$e],Pt=Fe[Ie];Ue&&!Ue.classList.contains("hover-fixed-row")&&removeClass(Ue,"hover-row"),Pt&&addClass(Pt,"hover-row")})}),onUnmounted(()=>{var Ie;(Ie=removePopper)==null||Ie()}),{ns:ue,onColumnsChange:_e,onScrollableChange:Ce,wrappedRowRender:de,tooltipContent:he,tooltipTrigger:pe}},render(){const{wrappedRowRender:le,store:oe}=this,ie=oe.states.data.value||[];return h$3("tbody",{tabIndex:-1},[ie.reduce((ue,de)=>ue.concat(le(de,ue.length)),[])])}});function useMapState(){const le=inject(TABLE_INJECTION_KEY),oe=le==null?void 0:le.store,ie=computed(()=>oe.states.fixedLeafColumnsLength.value),ue=computed(()=>oe.states.rightFixedColumns.value.length),de=computed(()=>oe.states.columns.value.length),he=computed(()=>oe.states.fixedColumns.value.length),pe=computed(()=>oe.states.rightFixedColumns.value.length);return{leftFixedLeafCount:ie,rightFixedLeafCount:ue,columnsCount:de,leftFixedCount:he,rightFixedCount:pe,columns:oe.states.columns}}function useStyle$1(le){const{columns:oe}=useMapState(),ie=useNamespace("table");return{getCellClasses:(he,pe)=>{const _e=he[pe],Ce=[ie.e("cell"),_e.id,_e.align,_e.labelClassName,...getFixedColumnsClass(ie.b(),pe,_e.fixed,le.store)];return _e.className&&Ce.push(_e.className),_e.children||Ce.push(ie.is("leaf")),Ce},getCellStyles:(he,pe)=>{const _e=getFixedColumnOffset(pe,he.fixed,le.store);return ensurePosition(_e,"left"),ensurePosition(_e,"right"),_e},columns:oe}}var TableFooter=defineComponent({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(le){const{getCellClasses:oe,getCellStyles:ie,columns:ue}=useStyle$1(le);return{ns:useNamespace("table"),getCellClasses:oe,getCellStyles:ie,columns:ue}},render(){const{columns:le,getCellStyles:oe,getCellClasses:ie,summaryMethod:ue,sumText:de}=this,he=this.store.states.data.value;let pe=[];return ue?pe=ue({columns:le,data:he}):le.forEach((_e,Ce)=>{if(Ce===0){pe[Ce]=de;return}const xe=he.map(Oe=>Number(Oe[_e.property])),Ie=[];let $e=!0;xe.forEach(Oe=>{if(!Number.isNaN(+Oe)){$e=!1;const Fe=`${Oe}`.split(".")[1];Ie.push(Fe?Fe.length:0)}});const Ne=Math.max.apply(null,Ie);$e?pe[Ce]="":pe[Ce]=xe.reduce((Oe,Fe)=>{const Ve=Number(Fe);return Number.isNaN(+Ve)?Oe:Number.parseFloat((Oe+Fe).toFixed(Math.min(Ne,20)))},0)}),h$3(h$3("tfoot",[h$3("tr",{},[...le.map((_e,Ce)=>h$3("td",{key:Ce,colspan:_e.colSpan,rowspan:_e.rowSpan,class:ie(le,Ce),style:oe(_e,Ce)},[h$3("div",{class:["cell",_e.labelClassName]},[pe[Ce]])]))])]))}});function useUtils(le){return{setCurrentRow:$e=>{le.commit("setCurrentRow",$e)},getSelectionRows:()=>le.getSelectionRows(),toggleRowSelection:($e,Ne,Oe=!0)=>{le.toggleRowSelection($e,Ne,!1,Oe),le.updateAllSelected()},clearSelection:()=>{le.clearSelection()},clearFilter:$e=>{le.clearFilter($e)},toggleAllSelection:()=>{le.commit("toggleAllSelection")},toggleRowExpansion:($e,Ne)=>{le.toggleRowExpansionAdapter($e,Ne)},clearSort:()=>{le.clearSort()},sort:($e,Ne)=>{le.commit("sort",{prop:$e,order:Ne})},updateKeyChildren:($e,Ne)=>{le.updateKeyChildren($e,Ne)}}}function useStyle(le,oe,ie,ue){const de=ref(!1),he=ref(null),pe=ref(!1),_e=En=>{pe.value=En},Ce=ref({width:null,height:null,headerHeight:null}),xe=ref(!1),Ie={display:"inline-block",verticalAlign:"middle"},$e=ref(),Ne=ref(0),Oe=ref(0),Fe=ref(0),Ve=ref(0),ze=ref(0);watchEffect(()=>{oe.setHeight(le.height)}),watchEffect(()=>{oe.setMaxHeight(le.maxHeight)}),watch(()=>[le.currentRowKey,ie.states.rowKey],([En,xn])=>{!unref(xn)||!unref(En)||ie.setCurrentRowKey(`${En}`)},{immediate:!0}),watch(()=>le.data,En=>{ue.store.commit("setData",En)},{immediate:!0,deep:!0}),watchEffect(()=>{le.expandRowKeys&&ie.setExpandRowKeysAdapter(le.expandRowKeys)});const Ue=()=>{ue.store.commit("setHoverRow",null),ue.hoverState&&(ue.hoverState=null)},Pt=(En,xn)=>{const{pixelX:kn,pixelY:On}=xn;Math.abs(kn)>=Math.abs(On)&&(ue.refs.bodyWrapper.scrollLeft+=xn.pixelX/5)},qe=computed(()=>le.height||le.maxHeight||ie.states.fixedColumns.value.length>0||ie.states.rightFixedColumns.value.length>0),Et=computed(()=>({width:oe.bodyWidth.value?`${oe.bodyWidth.value}px`:""})),kt=()=>{qe.value&&oe.updateElsHeight(),oe.updateColumnsWidth(),requestAnimationFrame(jt)};onMounted(async()=>{await nextTick(),ie.updateColumns(),_n(),requestAnimationFrame(kt);const En=ue.vnode.el,xn=ue.refs.headerWrapper;le.flexible&&En&&En.parentElement&&(En.parentElement.style.minWidth="0"),Ce.value={width:$e.value=En.offsetWidth,height:En.offsetHeight,headerHeight:le.showHeader&&xn?xn.offsetHeight:null},ie.states.columns.value.forEach(kn=>{kn.filteredValue&&kn.filteredValue.length&&ue.store.commit("filterChange",{column:kn,values:kn.filteredValue,silent:!0})}),ue.$ready=!0});const At=(En,xn)=>{if(!En)return;const kn=Array.from(En.classList).filter(On=>!On.startsWith("is-scrolling-"));kn.push(oe.scrollX.value?xn:"is-scrolling-none"),En.className=kn.join(" ")},Dt=En=>{const{tableWrapper:xn}=ue.refs;At(xn,En)},Lt=En=>{const{tableWrapper:xn}=ue.refs;return!!(xn&&xn.classList.contains(En))},jt=function(){if(!ue.refs.scrollBarRef)return;if(!oe.scrollX.value){const Hn="is-scrolling-none";Lt(Hn)||Dt(Hn);return}const En=ue.refs.scrollBarRef.wrapRef;if(!En)return;const{scrollLeft:xn,offsetWidth:kn,scrollWidth:On}=En,{headerWrapper:Mn,footerWrapper:Un}=ue.refs;Mn&&(Mn.scrollLeft=xn),Un&&(Un.scrollLeft=xn);const zn=On-kn-1;xn>=zn?Dt("is-scrolling-right"):Dt(xn===0?"is-scrolling-left":"is-scrolling-middle")},_n=()=>{ue.refs.scrollBarRef&&(ue.refs.scrollBarRef.wrapRef&&useEventListener(ue.refs.scrollBarRef.wrapRef,"scroll",jt,{passive:!0}),le.fit?useResizeObserver(ue.vnode.el,bn):useEventListener(window,"resize",bn),useResizeObserver(ue.refs.bodyWrapper,()=>{var En,xn;bn(),(xn=(En=ue.refs)==null?void 0:En.scrollBarRef)==null||xn.update()}))},bn=()=>{var En,xn,kn,On;const Mn=ue.vnode.el;if(!ue.$ready||!Mn)return;let Un=!1;const{width:zn,height:Hn,headerHeight:Rn}=Ce.value,Jn=$e.value=Mn.offsetWidth;zn!==Jn&&(Un=!0);const Qn=Mn.offsetHeight;(le.height||qe.value)&&Hn!==Qn&&(Un=!0);const _r=le.tableLayout==="fixed"?ue.refs.headerWrapper:(En=ue.refs.tableHeaderRef)==null?void 0:En.$el;le.showHeader&&(_r==null?void 0:_r.offsetHeight)!==Rn&&(Un=!0),Ne.value=((xn=ue.refs.tableWrapper)==null?void 0:xn.scrollHeight)||0,Fe.value=(_r==null?void 0:_r.scrollHeight)||0,Ve.value=((kn=ue.refs.footerWrapper)==null?void 0:kn.offsetHeight)||0,ze.value=((On=ue.refs.appendWrapper)==null?void 0:On.offsetHeight)||0,Oe.value=Ne.value-Fe.value-Ve.value-ze.value,Un&&(Ce.value={width:Jn,height:Qn,headerHeight:le.showHeader&&(_r==null?void 0:_r.offsetHeight)||0},kt())},vn=useFormSize(),Tn=computed(()=>{const{bodyWidth:En,scrollY:xn,gutterWidth:kn}=oe;return En.value?`${En.value-(xn.value?kn:0)}px`:""}),$n=computed(()=>le.maxHeight?"fixed":le.tableLayout),wn=computed(()=>{if(le.data&&le.data.length)return null;let En="100%";le.height&&Oe.value&&(En=`${Oe.value}px`);const xn=$e.value;return{width:xn?`${xn}px`:"",height:En}}),Cn=computed(()=>le.height?{height:Number.isNaN(Number(le.height))?le.height:`${le.height}px`}:le.maxHeight?{maxHeight:Number.isNaN(Number(le.maxHeight))?le.maxHeight:`${le.maxHeight}px`}:{}),Sn=computed(()=>le.height?{height:"100%"}:le.maxHeight?Number.isNaN(Number(le.maxHeight))?{maxHeight:`calc(${le.maxHeight} - ${Fe.value+Ve.value}px)`}:{maxHeight:`${le.maxHeight-Fe.value-Ve.value}px`}:{});return{isHidden:de,renderExpanded:he,setDragVisible:_e,isGroup:xe,handleMouseLeave:Ue,handleHeaderFooterMousewheel:Pt,tableSize:vn,emptyBlockStyle:wn,handleFixedMousewheel:(En,xn)=>{const kn=ue.refs.bodyWrapper;if(Math.abs(xn.spinY)>0){const On=kn.scrollTop;xn.pixelY<0&&On!==0&&En.preventDefault(),xn.pixelY>0&&kn.scrollHeight-kn.clientHeight>On&&En.preventDefault(),kn.scrollTop+=Math.ceil(xn.pixelY/5)}else kn.scrollLeft+=Math.ceil(xn.pixelX/5)},resizeProxyVisible:pe,bodyWidth:Tn,resizeState:Ce,doLayout:kt,tableBodyStyles:Et,tableLayout:$n,scrollbarViewStyle:Ie,tableInnerStyle:Cn,scrollbarStyle:Sn}}function useKeyRender(le){const oe=ref(),ie=()=>{const de=le.vnode.el.querySelector(".hidden-columns"),he={childList:!0,subtree:!0},pe=le.store.states.updateOrderFns;oe.value=new MutationObserver(()=>{pe.forEach(_e=>_e())}),oe.value.observe(de,he)};onMounted(()=>{ie()}),onUnmounted(()=>{var ue;(ue=oe.value)==null||ue.disconnect()})}var defaultProps$1={data:{type:Array,default:()=>[]},size:useSizeProp,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children",checkStrictly:!1})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:Boolean,flexible:Boolean,showOverflowTooltip:[Boolean,Object],appendFilterPanelTo:String,scrollbarTabindex:{type:[Number,String],default:void 0}};function hColgroup(le){const oe=le.tableLayout==="auto";let ie=le.columns||[];oe&&ie.every(de=>de.width===void 0)&&(ie=[]);const ue=de=>{const he={key:`${le.tableLayout}_${de.id}`,style:{},name:void 0};return oe?he.style={width:`${de.width}px`}:he.name=de.id,he};return h$3("colgroup",{},ie.map(de=>h$3("col",ue(de))))}hColgroup.props=["columns","tableLayout"];const useScrollbar$1=()=>{const le=ref(),oe=(he,pe)=>{const _e=le.value;_e&&_e.scrollTo(he,pe)},ie=(he,pe)=>{const _e=le.value;_e&&isNumber(pe)&&["Top","Left"].includes(he)&&_e[`setScroll${he}`](pe)};return{scrollBarRef:le,scrollTo:oe,setScrollTop:he=>ie("Top",he),setScrollLeft:he=>ie("Left",he)}};let tableIdSeed=1;const _sfc_main$Q=defineComponent({name:"ElTable",directives:{Mousewheel},components:{TableHeader,TableBody,TableFooter,ElScrollbar,hColgroup},props:defaultProps$1,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change"],setup(le){const{t:oe}=useLocale(),ie=useNamespace("table"),ue=getCurrentInstance();provide(TABLE_INJECTION_KEY,ue);const de=createStore(ue,le);ue.store=de;const he=new TableLayout({store:ue.store,table:ue,fit:le.fit,showHeader:le.showHeader});ue.layout=he;const pe=computed(()=>(de.states.data.value||[]).length===0),{setCurrentRow:_e,getSelectionRows:Ce,toggleRowSelection:xe,clearSelection:Ie,clearFilter:$e,toggleAllSelection:Ne,toggleRowExpansion:Oe,clearSort:Fe,sort:Ve,updateKeyChildren:ze}=useUtils(de),{isHidden:Ue,renderExpanded:Pt,setDragVisible:qe,isGroup:Et,handleMouseLeave:kt,handleHeaderFooterMousewheel:At,tableSize:Dt,emptyBlockStyle:Lt,handleFixedMousewheel:jt,resizeProxyVisible:_n,bodyWidth:bn,resizeState:vn,doLayout:Tn,tableBodyStyles:$n,tableLayout:wn,scrollbarViewStyle:Cn,tableInnerStyle:Sn,scrollbarStyle:In}=useStyle(le,he,de,ue),{scrollBarRef:En,scrollTo:xn,setScrollLeft:kn,setScrollTop:On}=useScrollbar$1(),Mn=debounce(Tn,50),Un=`${ie.namespace.value}-table_${tableIdSeed++}`;ue.tableId=Un,ue.state={isGroup:Et,resizeState:vn,doLayout:Tn,debouncedUpdateLayout:Mn};const zn=computed(()=>{var Jn;return(Jn=le.sumText)!=null?Jn:oe("el.table.sumText")}),Hn=computed(()=>{var Jn;return(Jn=le.emptyText)!=null?Jn:oe("el.table.emptyText")}),Rn=computed(()=>convertToRows(de.states.originColumns.value)[0]);return useKeyRender(ue),{ns:ie,layout:he,store:de,columns:Rn,handleHeaderFooterMousewheel:At,handleMouseLeave:kt,tableId:Un,tableSize:Dt,isHidden:Ue,isEmpty:pe,renderExpanded:Pt,resizeProxyVisible:_n,resizeState:vn,isGroup:Et,bodyWidth:bn,tableBodyStyles:$n,emptyBlockStyle:Lt,debouncedUpdateLayout:Mn,handleFixedMousewheel:jt,setCurrentRow:_e,getSelectionRows:Ce,toggleRowSelection:xe,clearSelection:Ie,clearFilter:$e,toggleAllSelection:Ne,toggleRowExpansion:Oe,clearSort:Fe,doLayout:Tn,sort:Ve,updateKeyChildren:ze,t:oe,setDragVisible:qe,context:ue,computedSumText:zn,computedEmptyText:Hn,tableLayout:wn,scrollbarViewStyle:Cn,tableInnerStyle:Sn,scrollbarStyle:In,scrollBarRef:En,scrollTo:xn,setScrollLeft:kn,setScrollTop:On}}});function _sfc_render$3(le,oe,ie,ue,de,he){const pe=resolveComponent("hColgroup"),_e=resolveComponent("table-header"),Ce=resolveComponent("table-body"),xe=resolveComponent("table-footer"),Ie=resolveComponent("el-scrollbar"),$e=resolveDirective("mousewheel");return openBlock(),createElementBlock("div",{ref:"tableWrapper",class:normalizeClass([{[le.ns.m("fit")]:le.fit,[le.ns.m("striped")]:le.stripe,[le.ns.m("border")]:le.border||le.isGroup,[le.ns.m("hidden")]:le.isHidden,[le.ns.m("group")]:le.isGroup,[le.ns.m("fluid-height")]:le.maxHeight,[le.ns.m("scrollable-x")]:le.layout.scrollX.value,[le.ns.m("scrollable-y")]:le.layout.scrollY.value,[le.ns.m("enable-row-hover")]:!le.store.states.isComplex.value,[le.ns.m("enable-row-transition")]:(le.store.states.data.value||[]).length!==0&&(le.store.states.data.value||[]).length<100,"has-footer":le.showSummary},le.ns.m(le.tableSize),le.className,le.ns.b(),le.ns.m(`layout-${le.tableLayout}`)]),style:normalizeStyle(le.style),"data-prefix":le.ns.namespace.value,onMouseleave:le.handleMouseLeave},[createBaseVNode("div",{class:normalizeClass(le.ns.e("inner-wrapper")),style:normalizeStyle(le.tableInnerStyle)},[createBaseVNode("div",{ref:"hiddenColumns",class:"hidden-columns"},[renderSlot(le.$slots,"default")],512),le.showHeader&&le.tableLayout==="fixed"?withDirectives((openBlock(),createElementBlock("div",{key:0,ref:"headerWrapper",class:normalizeClass(le.ns.e("header-wrapper"))},[createBaseVNode("table",{ref:"tableHeader",class:normalizeClass(le.ns.e("header")),style:normalizeStyle(le.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[createVNode(pe,{columns:le.store.states.columns.value,"table-layout":le.tableLayout},null,8,["columns","table-layout"]),createVNode(_e,{ref:"tableHeaderRef",border:le.border,"default-sort":le.defaultSort,store:le.store,"append-filter-panel-to":le.appendFilterPanelTo,onSetDragVisible:le.setDragVisible},null,8,["border","default-sort","store","append-filter-panel-to","onSetDragVisible"])],6)],2)),[[$e,le.handleHeaderFooterMousewheel]]):createCommentVNode("v-if",!0),createBaseVNode("div",{ref:"bodyWrapper",class:normalizeClass(le.ns.e("body-wrapper"))},[createVNode(Ie,{ref:"scrollBarRef","view-style":le.scrollbarViewStyle,"wrap-style":le.scrollbarStyle,always:le.scrollbarAlwaysOn,tabindex:le.scrollbarTabindex},{default:withCtx(()=>[createBaseVNode("table",{ref:"tableBody",class:normalizeClass(le.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:normalizeStyle({width:le.bodyWidth,tableLayout:le.tableLayout})},[createVNode(pe,{columns:le.store.states.columns.value,"table-layout":le.tableLayout},null,8,["columns","table-layout"]),le.showHeader&&le.tableLayout==="auto"?(openBlock(),createBlock(_e,{key:0,ref:"tableHeaderRef",class:normalizeClass(le.ns.e("body-header")),border:le.border,"default-sort":le.defaultSort,store:le.store,"append-filter-panel-to":le.appendFilterPanelTo,onSetDragVisible:le.setDragVisible},null,8,["class","border","default-sort","store","append-filter-panel-to","onSetDragVisible"])):createCommentVNode("v-if",!0),createVNode(Ce,{context:le.context,highlight:le.highlightCurrentRow,"row-class-name":le.rowClassName,"tooltip-effect":le.tooltipEffect,"tooltip-options":le.tooltipOptions,"row-style":le.rowStyle,store:le.store,stripe:le.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"]),le.showSummary&&le.tableLayout==="auto"?(openBlock(),createBlock(xe,{key:1,class:normalizeClass(le.ns.e("body-footer")),border:le.border,"default-sort":le.defaultSort,store:le.store,"sum-text":le.computedSumText,"summary-method":le.summaryMethod},null,8,["class","border","default-sort","store","sum-text","summary-method"])):createCommentVNode("v-if",!0)],6),le.isEmpty?(openBlock(),createElementBlock("div",{key:0,ref:"emptyBlock",style:normalizeStyle(le.emptyBlockStyle),class:normalizeClass(le.ns.e("empty-block"))},[createBaseVNode("span",{class:normalizeClass(le.ns.e("empty-text"))},[renderSlot(le.$slots,"empty",{},()=>[createTextVNode(toDisplayString(le.computedEmptyText),1)])],2)],6)):createCommentVNode("v-if",!0),le.$slots.append?(openBlock(),createElementBlock("div",{key:1,ref:"appendWrapper",class:normalizeClass(le.ns.e("append-wrapper"))},[renderSlot(le.$slots,"append")],2)):createCommentVNode("v-if",!0)]),_:3},8,["view-style","wrap-style","always","tabindex"])],2),le.showSummary&&le.tableLayout==="fixed"?withDirectives((openBlock(),createElementBlock("div",{key:1,ref:"footerWrapper",class:normalizeClass(le.ns.e("footer-wrapper"))},[createBaseVNode("table",{class:normalizeClass(le.ns.e("footer")),cellspacing:"0",cellpadding:"0",border:"0",style:normalizeStyle(le.tableBodyStyles)},[createVNode(pe,{columns:le.store.states.columns.value,"table-layout":le.tableLayout},null,8,["columns","table-layout"]),createVNode(xe,{border:le.border,"default-sort":le.defaultSort,store:le.store,"sum-text":le.computedSumText,"summary-method":le.summaryMethod},null,8,["border","default-sort","store","sum-text","summary-method"])],6)],2)),[[vShow,!le.isEmpty],[$e,le.handleHeaderFooterMousewheel]]):createCommentVNode("v-if",!0),le.border||le.isGroup?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(le.ns.e("border-left-patch"))},null,2)):createCommentVNode("v-if",!0)],6),withDirectives(createBaseVNode("div",{ref:"resizeProxy",class:normalizeClass(le.ns.e("column-resize-proxy"))},null,2),[[vShow,le.resizeProxyVisible]])],46,["data-prefix","onMouseleave"])}var Table$1=_export_sfc$1(_sfc_main$Q,[["render",_sfc_render$3],["__file","table.vue"]]);const defaultClassNames={selection:"table-column--selection",expand:"table__expand-column"},cellStarts={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},getDefaultClassName=le=>defaultClassNames[le]||"",cellForced={selection:{renderHeader({store:le,column:oe}){function ie(){return le.states.data.value&&le.states.data.value.length===0}return h$3(ElCheckbox,{disabled:ie(),size:le.states.tableSize.value,indeterminate:le.states.selection.value.length>0&&!le.states.isAllSelected.value,"onUpdate:modelValue":le.toggleAllSelection,modelValue:le.states.isAllSelected.value,ariaLabel:oe.label})},renderCell({row:le,column:oe,store:ie,$index:ue}){return h$3(ElCheckbox,{disabled:oe.selectable?!oe.selectable.call(null,le,ue):!1,size:ie.states.tableSize.value,onChange:()=>{ie.commit("rowSelectedChanged",le)},onClick:de=>de.stopPropagation(),modelValue:ie.isSelected(le),ariaLabel:oe.label})},sortable:!1,resizable:!1},index:{renderHeader({column:le}){return le.label||"#"},renderCell({column:le,$index:oe}){let ie=oe+1;const ue=le.index;return typeof ue=="number"?ie=oe+ue:typeof ue=="function"&&(ie=ue(oe)),h$3("div",{},[ie])},sortable:!1},expand:{renderHeader({column:le}){return le.label||""},renderCell({row:le,store:oe,expanded:ie}){const{ns:ue}=oe,de=[ue.e("expand-icon")];return ie&&de.push(ue.em("expand-icon","expanded")),h$3("div",{class:de,onClick:function(pe){pe.stopPropagation(),oe.toggleRowExpansion(le)}},{default:()=>[h$3(ElIcon,null,{default:()=>[h$3(arrow_right_default)]})]})},sortable:!1,resizable:!1}};function defaultRenderCell({row:le,column:oe,$index:ie}){var ue;const de=oe.property,he=de&&getProp(le,de).value;return oe&&oe.formatter?oe.formatter(le,oe,he,ie):((ue=he==null?void 0:he.toString)==null?void 0:ue.call(he))||""}function treeCellPrefix({row:le,treeNode:oe,store:ie},ue=!1){const{ns:de}=ie;if(!oe)return ue?[h$3("span",{class:de.e("placeholder")})]:null;const he=[],pe=function(_e){_e.stopPropagation(),!oe.loading&&ie.loadOrToggle(le)};if(oe.indent&&he.push(h$3("span",{class:de.e("indent"),style:{"padding-left":`${oe.indent}px`}})),typeof oe.expanded=="boolean"&&!oe.noLazyChildren){const _e=[de.e("expand-icon"),oe.expanded?de.em("expand-icon","expanded"):""];let Ce=arrow_right_default;oe.loading&&(Ce=loading_default),he.push(h$3("div",{class:_e,onClick:pe},{default:()=>[h$3(ElIcon,{class:{[de.is("loading")]:oe.loading}},{default:()=>[h$3(Ce)]})]}))}else he.push(h$3("span",{class:de.e("placeholder")}));return he}function getAllAliases(le,oe){return le.reduce((ie,ue)=>(ie[ue]=ue,ie),oe)}function useWatcher(le,oe){const ie=getCurrentInstance();return{registerComplexWatchers:()=>{const he=["fixed"],pe={realWidth:"width",realMinWidth:"minWidth"},_e=getAllAliases(he,pe);Object.keys(_e).forEach(Ce=>{const xe=pe[Ce];hasOwn$b(oe,xe)&&watch(()=>oe[xe],Ie=>{let $e=Ie;xe==="width"&&Ce==="realWidth"&&($e=parseWidth(Ie)),xe==="minWidth"&&Ce==="realMinWidth"&&($e=parseMinWidth(Ie)),ie.columnConfig.value[xe]=$e,ie.columnConfig.value[Ce]=$e;const Ne=xe==="fixed";le.value.store.scheduleLayout(Ne)})})},registerNormalWatchers:()=>{const he=["label","filters","filterMultiple","filteredValue","sortable","index","formatter","className","labelClassName","filterClassName","showOverflowTooltip"],pe={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},_e=getAllAliases(he,pe);Object.keys(_e).forEach(Ce=>{const xe=pe[Ce];hasOwn$b(oe,xe)&&watch(()=>oe[xe],Ie=>{ie.columnConfig.value[Ce]=Ie})})}}}function useRender(le,oe,ie){const ue=getCurrentInstance(),de=ref(""),he=ref(!1),pe=ref(),_e=ref(),Ce=useNamespace("table");watchEffect(()=>{pe.value=le.align?`is-${le.align}`:null,pe.value}),watchEffect(()=>{_e.value=le.headerAlign?`is-${le.headerAlign}`:pe.value,_e.value});const xe=computed(()=>{let Et=ue.vnode.vParent||ue.parent;for(;Et&&!Et.tableId&&!Et.columnId;)Et=Et.vnode.vParent||Et.parent;return Et}),Ie=computed(()=>{const{store:Et}=ue.parent;if(!Et)return!1;const{treeData:kt}=Et.states,At=kt.value;return At&&Object.keys(At).length>0}),$e=ref(parseWidth(le.width)),Ne=ref(parseMinWidth(le.minWidth)),Oe=Et=>($e.value&&(Et.width=$e.value),Ne.value&&(Et.minWidth=Ne.value),!$e.value&&Ne.value&&(Et.width=void 0),Et.minWidth||(Et.minWidth=80),Et.realWidth=Number(Et.width===void 0?Et.minWidth:Et.width),Et),Fe=Et=>{const kt=Et.type,At=cellForced[kt]||{};Object.keys(At).forEach(Lt=>{const jt=At[Lt];Lt!=="className"&&jt!==void 0&&(Et[Lt]=jt)});const Dt=getDefaultClassName(kt);if(Dt){const Lt=`${unref(Ce.namespace)}-${Dt}`;Et.className=Et.className?`${Et.className} ${Lt}`:Lt}return Et},Ve=Et=>{Array.isArray(Et)?Et.forEach(At=>kt(At)):kt(Et);function kt(At){var Dt;((Dt=At==null?void 0:At.type)==null?void 0:Dt.name)==="ElTableColumn"&&(At.vParent=ue)}};return{columnId:de,realAlign:pe,isSubColumn:he,realHeaderAlign:_e,columnOrTableParent:xe,setColumnWidth:Oe,setColumnForcedProps:Fe,setColumnRenders:Et=>{le.renderHeader||Et.type!=="selection"&&(Et.renderHeader=At=>(ue.columnConfig.value.label,renderSlot(oe,"header",At,()=>[Et.label]))),oe["filter-icon"]&&(Et.renderFilterIcon=At=>renderSlot(oe,"filter-icon",At));let kt=Et.renderCell;return Et.type==="expand"?(Et.renderCell=At=>h$3("div",{class:"cell"},[kt(At)]),ie.value.renderExpanded=At=>oe.default?oe.default(At):oe.default):(kt=kt||defaultRenderCell,Et.renderCell=At=>{let Dt=null;if(oe.default){const Tn=oe.default(At);Dt=Tn.some($n=>$n.type!==Comment)?Tn:kt(At)}else Dt=kt(At);const{columns:Lt}=ie.value.store.states,jt=Lt.value.findIndex(Tn=>Tn.type==="default"),_n=Ie.value&&At.cellIndex===jt,bn=treeCellPrefix(At,_n),vn={class:"cell",style:{}};return Et.showOverflowTooltip&&(vn.class=`${vn.class} ${unref(Ce.namespace)}-tooltip`,vn.style={width:`${(At.column.realWidth||Number(At.column.width))-1}px`}),Ve(Dt),h$3("div",vn,[bn,Dt])}),Et},getPropsData:(...Et)=>Et.reduce((kt,At)=>(Array.isArray(At)&&At.forEach(Dt=>{kt[Dt]=le[Dt]}),kt),{}),getColumnElIndex:(Et,kt)=>Array.prototype.indexOf.call(Et,kt),updateColumnOrder:()=>{ie.value.store.commit("updateColumnOrder",ue.columnConfig.value)}}}var defaultProps={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:{type:[Boolean,Object],default:void 0},fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},filterClassName:String,index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:le=>le.every(oe=>["ascending","descending",null].includes(oe))}};let columnIdSeed=1;var ElTableColumn$1=defineComponent({name:"ElTableColumn",components:{ElCheckbox},props:defaultProps,setup(le,{slots:oe}){const ie=getCurrentInstance(),ue=ref({}),de=computed(()=>{let qe=ie.parent;for(;qe&&!qe.tableId;)qe=qe.parent;return qe}),{registerNormalWatchers:he,registerComplexWatchers:pe}=useWatcher(de,le),{columnId:_e,isSubColumn:Ce,realHeaderAlign:xe,columnOrTableParent:Ie,setColumnWidth:$e,setColumnForcedProps:Ne,setColumnRenders:Oe,getPropsData:Fe,getColumnElIndex:Ve,realAlign:ze,updateColumnOrder:Ue}=useRender(le,oe,de),Pt=Ie.value;_e.value=`${Pt.tableId||Pt.columnId}_column_${columnIdSeed++}`,onBeforeMount(()=>{Ce.value=de.value!==Pt;const qe=le.type||"default",Et=le.sortable===""?!0:le.sortable,kt=isUndefined(le.showOverflowTooltip)?Pt.props.showOverflowTooltip:le.showOverflowTooltip,At={...cellStarts[qe],id:_e.value,type:qe,property:le.prop||le.property,align:ze,headerAlign:xe,showOverflowTooltip:kt,filterable:le.filters||le.filterMethod,filteredValue:[],filterPlacement:"",filterClassName:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:Et,index:le.index,rawColumnKey:ie.vnode.key};let bn=Fe(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement","filterClassName"]);bn=mergeOptions(At,bn),bn=compose(Oe,$e,Ne)(bn),ue.value=bn,he(),pe()}),onMounted(()=>{var qe;const Et=Ie.value,kt=Ce.value?Et.vnode.el.children:(qe=Et.refs.hiddenColumns)==null?void 0:qe.children,At=()=>Ve(kt||[],ie.vnode.el);ue.value.getColumnIndex=At,At()>-1&&de.value.store.commit("insertColumn",ue.value,Ce.value?Et.columnConfig.value:null,Ue)}),onBeforeUnmount(()=>{const qe=ue.value.getColumnIndex;(qe?qe():-1)>-1&&de.value.store.commit("removeColumn",ue.value,Ce.value?Pt.columnConfig.value:null,Ue)}),ie.columnId=_e.value,ie.columnConfig=ue},render(){var le,oe,ie;try{const ue=(oe=(le=this.$slots).default)==null?void 0:oe.call(le,{row:{},column:{},$index:-1}),de=[];if(Array.isArray(ue))for(const pe of ue)((ie=pe.type)==null?void 0:ie.name)==="ElTableColumn"||pe.shapeFlag&2?de.push(pe):pe.type===Fragment&&Array.isArray(pe.children)&&pe.children.forEach(_e=>{(_e==null?void 0:_e.patchFlag)!==1024&&!isString$1(_e==null?void 0:_e.children)&&de.push(_e)});return h$3("div",de)}catch{return h$3("div",[])}}});const ElTable=withInstall(Table$1,{TableColumn:ElTableColumn$1}),ElTableColumn=withNoopInstall(ElTableColumn$1);var SortOrder=(le=>(le.ASC="asc",le.DESC="desc",le))(SortOrder||{}),Alignment=(le=>(le.CENTER="center",le.RIGHT="right",le))(Alignment||{}),FixedDir=(le=>(le.LEFT="left",le.RIGHT="right",le))(FixedDir||{});const oppositeOrderMap={asc:"desc",desc:"asc"},placeholderSign=Symbol("placeholder"),calcColumnStyle=(le,oe,ie)=>{var ue;const de={flexGrow:0,flexShrink:0,...ie?{}:{flexGrow:le.flexGrow||0,flexShrink:le.flexShrink||1}};ie||(de.flexShrink=1);const he={...(ue=le.style)!=null?ue:{},...de,flexBasis:"auto",width:le.width};return oe||(le.maxWidth&&(he.maxWidth=le.maxWidth),le.minWidth&&(he.minWidth=le.minWidth)),he};function useColumns(le,oe,ie){const ue=computed(()=>unref(oe).map((ze,Ue)=>{var Pt,qe;return{...ze,key:(qe=(Pt=ze.key)!=null?Pt:ze.dataKey)!=null?qe:Ue}})),de=computed(()=>unref(ue).filter(ze=>!ze.hidden)),he=computed(()=>unref(de).filter(ze=>ze.fixed==="left"||ze.fixed===!0)),pe=computed(()=>unref(de).filter(ze=>ze.fixed==="right")),_e=computed(()=>unref(de).filter(ze=>!ze.fixed)),Ce=computed(()=>{const ze=[];return unref(he).forEach(Ue=>{ze.push({...Ue,placeholderSign})}),unref(_e).forEach(Ue=>{ze.push(Ue)}),unref(pe).forEach(Ue=>{ze.push({...Ue,placeholderSign})}),ze}),xe=computed(()=>unref(he).length||unref(pe).length),Ie=computed(()=>unref(ue).reduce((ze,Ue)=>(ze[Ue.key]=calcColumnStyle(Ue,unref(ie),le.fixed),ze),{})),$e=computed(()=>unref(de).reduce((ze,Ue)=>ze+Ue.width,0)),Ne=ze=>unref(ue).find(Ue=>Ue.key===ze),Oe=ze=>unref(Ie)[ze],Fe=(ze,Ue)=>{ze.width=Ue};function Ve(ze){var Ue;const{key:Pt}=ze.currentTarget.dataset;if(!Pt)return;const{sortState:qe,sortBy:Et}=le;let kt=SortOrder.ASC;isObject$d(qe)?kt=oppositeOrderMap[qe[Pt]]:kt=oppositeOrderMap[Et.order],(Ue=le.onColumnSort)==null||Ue.call(le,{column:Ne(Pt),key:Pt,order:kt})}return{columns:ue,columnsStyles:Ie,columnsTotalWidth:$e,fixedColumnsOnLeft:he,fixedColumnsOnRight:pe,hasFixedColumns:xe,mainColumns:Ce,normalColumns:_e,visibleColumns:de,getColumn:Ne,getColumnStyle:Oe,updateColumnWidth:Fe,onColumnSorted:Ve}}const useScrollbar=(le,{mainTableRef:oe,leftTableRef:ie,rightTableRef:ue,onMaybeEndReached:de})=>{const he=ref({scrollLeft:0,scrollTop:0});function pe(Oe){var Fe,Ve,ze;const{scrollTop:Ue}=Oe;(Fe=oe.value)==null||Fe.scrollTo(Oe),(Ve=ie.value)==null||Ve.scrollToTop(Ue),(ze=ue.value)==null||ze.scrollToTop(Ue)}function _e(Oe){he.value=Oe,pe(Oe)}function Ce(Oe){he.value.scrollTop=Oe,pe(unref(he))}function xe(Oe){var Fe,Ve;he.value.scrollLeft=Oe,(Ve=(Fe=oe.value)==null?void 0:Fe.scrollTo)==null||Ve.call(Fe,unref(he))}function Ie(Oe){var Fe;_e(Oe),(Fe=le.onScroll)==null||Fe.call(le,Oe)}function $e({scrollTop:Oe}){const{scrollTop:Fe}=unref(he);Oe!==Fe&&Ce(Oe)}function Ne(Oe,Fe="auto"){var Ve;(Ve=oe.value)==null||Ve.scrollToRow(Oe,Fe)}return watch(()=>unref(he).scrollTop,(Oe,Fe)=>{Oe>Fe&&de()}),{scrollPos:he,scrollTo:_e,scrollToLeft:xe,scrollToTop:Ce,scrollToRow:Ne,onScroll:Ie,onVerticalScroll:$e}},useRow=(le,{mainTableRef:oe,leftTableRef:ie,rightTableRef:ue,tableInstance:de,ns:he,isScrolling:pe})=>{const _e=getCurrentInstance(),{emit:Ce}=_e,xe=shallowRef(!1),Ie=ref(le.defaultExpandedRowKeys||[]),$e=ref(-1),Ne=shallowRef(null),Oe=ref({}),Fe=ref({}),Ve=shallowRef({}),ze=shallowRef({}),Ue=shallowRef({}),Pt=computed(()=>isNumber(le.estimatedRowHeight));function qe(_n){var bn;(bn=le.onRowsRendered)==null||bn.call(le,_n),_n.rowCacheEnd>unref($e)&&($e.value=_n.rowCacheEnd)}function Et({hovered:_n,rowKey:bn}){if(pe.value)return;de.vnode.el.querySelectorAll(`[rowkey="${String(bn)}"]`).forEach($n=>{_n?$n.classList.add(he.is("hovered")):$n.classList.remove(he.is("hovered"))})}function kt({expanded:_n,rowData:bn,rowIndex:vn,rowKey:Tn}){var $n,wn;const Cn=[...unref(Ie)],Sn=Cn.indexOf(Tn);_n?Sn===-1&&Cn.push(Tn):Sn>-1&&Cn.splice(Sn,1),Ie.value=Cn,Ce("update:expandedRowKeys",Cn),($n=le.onRowExpand)==null||$n.call(le,{expanded:_n,rowData:bn,rowIndex:vn,rowKey:Tn}),(wn=le.onExpandedRowsChange)==null||wn.call(le,Cn)}const At=debounce(()=>{var _n,bn,vn,Tn;xe.value=!0,Oe.value={...unref(Oe),...unref(Fe)},Dt(unref(Ne),!1),Fe.value={},Ne.value=null,(_n=oe.value)==null||_n.forceUpdate(),(bn=ie.value)==null||bn.forceUpdate(),(vn=ue.value)==null||vn.forceUpdate(),(Tn=_e.proxy)==null||Tn.$forceUpdate(),xe.value=!1},0);function Dt(_n,bn=!1){unref(Pt)&&[oe,ie,ue].forEach(vn=>{const Tn=unref(vn);Tn&&Tn.resetAfterRowIndex(_n,bn)})}function Lt(_n,bn,vn){const Tn=unref(Ne);(Tn===null||Tn>vn)&&(Ne.value=vn),Fe.value[_n]=bn}function jt({rowKey:_n,height:bn,rowIndex:vn},Tn){Tn?Tn===FixedDir.RIGHT?Ue.value[_n]=bn:Ve.value[_n]=bn:ze.value[_n]=bn;const $n=Math.max(...[Ve,Ue,ze].map(wn=>wn.value[_n]||0));unref(Oe)[_n]!==$n&&(Lt(_n,$n,vn),At())}return{expandedRowKeys:Ie,lastRenderedRowIndex:$e,isDynamic:Pt,isResetting:xe,rowHeights:Oe,resetAfterIndex:Dt,onRowExpanded:kt,onRowHovered:Et,onRowsRendered:qe,onRowHeightChange:jt}},useData=(le,{expandedRowKeys:oe,lastRenderedRowIndex:ie,resetAfterIndex:ue})=>{const de=ref({}),he=computed(()=>{const _e={},{data:Ce,rowKey:xe}=le,Ie=unref(oe);if(!Ie||!Ie.length)return Ce;const $e=[],Ne=new Set;Ie.forEach(Fe=>Ne.add(Fe));let Oe=Ce.slice();for(Oe.forEach(Fe=>_e[Fe[xe]]=0);Oe.length>0;){const Fe=Oe.shift();$e.push(Fe),Ne.has(Fe[xe])&&Array.isArray(Fe.children)&&Fe.children.length>0&&(Oe=[...Fe.children,...Oe],Fe.children.forEach(Ve=>_e[Ve[xe]]=_e[Fe[xe]]+1))}return de.value=_e,$e}),pe=computed(()=>{const{data:_e,expandColumnKey:Ce}=le;return Ce?unref(he):_e});return watch(pe,(_e,Ce)=>{_e!==Ce&&(ie.value=-1,ue(0,!0))}),{data:pe,depthMap:de}},sumReducer=(le,oe)=>le+oe,sum=le=>isArray$3(le)?le.reduce(sumReducer,0):le,tryCall=(le,oe,ie={})=>isFunction$2(le)?le(oe):le??ie,enforceUnit=le=>(["width","maxWidth","minWidth","height"].forEach(oe=>{le[oe]=addUnit(le[oe])}),le),componentToSlot=le=>isVNode(le)?oe=>h$3(le,oe):le,useStyles=(le,{columnsTotalWidth:oe,data:ie,fixedColumnsOnLeft:ue,fixedColumnsOnRight:de})=>{const he=computed(()=>{const{fixed:qe,width:Et,vScrollbarSize:kt}=le,At=Et-kt;return qe?Math.max(Math.round(unref(oe)),At):At}),pe=computed(()=>unref(he)+le.vScrollbarSize),_e=computed(()=>{const{height:qe=0,maxHeight:Et=0,footerHeight:kt,hScrollbarSize:At}=le;if(Et>0){const Dt=unref(Fe),Lt=unref(Ce),_n=unref(Oe)+Dt+Lt+At;return Math.min(_n,Et-kt)}return qe-kt}),Ce=computed(()=>{const{rowHeight:qe,estimatedRowHeight:Et}=le,kt=unref(ie);return isNumber(Et)?kt.length*Et:kt.length*qe}),xe=computed(()=>{const{maxHeight:qe}=le,Et=unref(_e);if(isNumber(qe)&&qe>0)return Et;const kt=unref(Ce)+unref(Oe)+unref(Fe);return Math.min(Et,kt)}),Ie=qe=>qe.width,$e=computed(()=>sum(unref(ue).map(Ie))),Ne=computed(()=>sum(unref(de).map(Ie))),Oe=computed(()=>sum(le.headerHeight)),Fe=computed(()=>{var qe;return(((qe=le.fixedData)==null?void 0:qe.length)||0)*le.rowHeight}),Ve=computed(()=>unref(_e)-unref(Oe)-unref(Fe)),ze=computed(()=>{const{style:qe={},height:Et,width:kt}=le;return enforceUnit({...qe,height:Et,width:kt})}),Ue=computed(()=>enforceUnit({height:le.footerHeight})),Pt=computed(()=>({top:addUnit(unref(Oe)),bottom:addUnit(le.footerHeight),width:addUnit(le.width)}));return{bodyWidth:he,fixedTableHeight:xe,mainTableHeight:_e,leftTableWidth:$e,rightTableWidth:Ne,headerWidth:pe,rowsHeight:Ce,windowHeight:Ve,footerHeight:Ue,emptyStyle:Pt,rootStyle:ze,headerHeight:Oe}},useAutoResize=le=>{const oe=ref(),ie=ref(0),ue=ref(0);let de;return onMounted(()=>{de=useResizeObserver(oe,([he])=>{const{width:pe,height:_e}=he.contentRect,{paddingLeft:Ce,paddingRight:xe,paddingTop:Ie,paddingBottom:$e}=getComputedStyle(he.target),Ne=Number.parseInt(Ce)||0,Oe=Number.parseInt(xe)||0,Fe=Number.parseInt(Ie)||0,Ve=Number.parseInt($e)||0;ie.value=pe-Ne-Oe,ue.value=_e-Fe-Ve}).stop}),onBeforeUnmount(()=>{de==null||de()}),watch([ie,ue],([he,pe])=>{var _e;(_e=le.onResize)==null||_e.call(le,{width:he,height:pe})}),{sizer:oe,width:ie,height:ue}};function useTable(le){const oe=ref(),ie=ref(),ue=ref(),{columns:de,columnsStyles:he,columnsTotalWidth:pe,fixedColumnsOnLeft:_e,fixedColumnsOnRight:Ce,hasFixedColumns:xe,mainColumns:Ie,onColumnSorted:$e}=useColumns(le,toRef(le,"columns"),toRef(le,"fixed")),{scrollTo:Ne,scrollToLeft:Oe,scrollToTop:Fe,scrollToRow:Ve,onScroll:ze,onVerticalScroll:Ue,scrollPos:Pt}=useScrollbar(le,{mainTableRef:oe,leftTableRef:ie,rightTableRef:ue,onMaybeEndReached:Nn}),qe=useNamespace("table-v2"),Et=getCurrentInstance(),kt=shallowRef(!1),{expandedRowKeys:At,lastRenderedRowIndex:Dt,isDynamic:Lt,isResetting:jt,rowHeights:_n,resetAfterIndex:bn,onRowExpanded:vn,onRowHeightChange:Tn,onRowHovered:$n,onRowsRendered:wn}=useRow(le,{mainTableRef:oe,leftTableRef:ie,rightTableRef:ue,tableInstance:Et,ns:qe,isScrolling:kt}),{data:Cn,depthMap:Sn}=useData(le,{expandedRowKeys:At,lastRenderedRowIndex:Dt,resetAfterIndex:bn}),{bodyWidth:In,fixedTableHeight:En,mainTableHeight:xn,leftTableWidth:kn,rightTableWidth:On,headerWidth:Mn,rowsHeight:Un,windowHeight:zn,footerHeight:Hn,emptyStyle:Rn,rootStyle:Jn,headerHeight:Qn}=useStyles(le,{columnsTotalWidth:pe,data:Cn,fixedColumnsOnLeft:_e,fixedColumnsOnRight:Ce}),_r=ref(),Zn=computed(()=>{const Dn=unref(Cn).length===0;return isArray$3(le.fixedData)?le.fixedData.length===0&&Dn:Dn});function Gn(Dn){const{estimatedRowHeight:jn,rowHeight:ir,rowKey:Fn}=le;return jn?unref(_n)[unref(Cn)[Dn][Fn]]||jn:ir}function Nn(){const{onEndReached:Dn}=le;if(!Dn)return;const{scrollTop:jn}=unref(Pt),ir=unref(Un),Fn=unref(zn),Kn=ir-(jn+Fn)+le.hScrollbarSize;unref(Dt)>=0&&ir===jn+unref(xn)-unref(Qn)&&Dn(Kn)}return watch(()=>le.expandedRowKeys,Dn=>At.value=Dn,{deep:!0}),{columns:de,containerRef:_r,mainTableRef:oe,leftTableRef:ie,rightTableRef:ue,isDynamic:Lt,isResetting:jt,isScrolling:kt,hasFixedColumns:xe,columnsStyles:he,columnsTotalWidth:pe,data:Cn,expandedRowKeys:At,depthMap:Sn,fixedColumnsOnLeft:_e,fixedColumnsOnRight:Ce,mainColumns:Ie,bodyWidth:In,emptyStyle:Rn,rootStyle:Jn,headerWidth:Mn,footerHeight:Hn,mainTableHeight:xn,fixedTableHeight:En,leftTableWidth:kn,rightTableWidth:On,showEmpty:Zn,getRowHeight:Gn,onColumnSorted:$e,onRowHovered:$n,onRowExpanded:vn,onRowsRendered:wn,onRowHeightChange:Tn,scrollTo:Ne,scrollToLeft:Oe,scrollToTop:Fe,scrollToRow:Ve,onScroll:ze,onVerticalScroll:Ue}}const TableV2InjectionKey=Symbol("tableV2"),classType=String,columns={type:definePropType(Array),required:!0},fixedDataType={type:definePropType(Array)},dataType={...fixedDataType,required:!0},expandColumnKey=String,expandKeys={type:definePropType(Array),default:()=>mutable([])},requiredNumber={type:Number,required:!0},rowKey={type:definePropType([String,Number,Symbol]),default:"id"},styleType={type:definePropType(Object)},tableV2RowProps=buildProps({class:String,columns,columnsStyles:{type:definePropType(Object),required:!0},depth:Number,expandColumnKey,estimatedRowHeight:{...virtualizedGridProps.estimatedRowHeight,default:void 0},isScrolling:Boolean,onRowExpand:{type:definePropType(Function)},onRowHover:{type:definePropType(Function)},onRowHeightChange:{type:definePropType(Function)},rowData:{type:definePropType(Object),required:!0},rowEventHandlers:{type:definePropType(Object)},rowIndex:{type:Number,required:!0},rowKey,style:{type:definePropType(Object)}}),requiredNumberType={type:Number,required:!0},tableV2HeaderProps=buildProps({class:String,columns,fixedHeaderData:{type:definePropType(Array)},headerData:{type:definePropType(Array),required:!0},headerHeight:{type:definePropType([Number,Array]),default:50},rowWidth:requiredNumberType,rowHeight:{type:Number,default:50},height:requiredNumberType,width:requiredNumberType}),tableV2GridProps=buildProps({columns,data:dataType,fixedData:fixedDataType,estimatedRowHeight:tableV2RowProps.estimatedRowHeight,width:requiredNumber,height:requiredNumber,headerWidth:requiredNumber,headerHeight:tableV2HeaderProps.headerHeight,bodyWidth:requiredNumber,rowHeight:requiredNumber,cache:virtualizedListProps.cache,useIsScrolling:Boolean,scrollbarAlwaysOn:virtualizedGridProps.scrollbarAlwaysOn,scrollbarStartGap:virtualizedGridProps.scrollbarStartGap,scrollbarEndGap:virtualizedGridProps.scrollbarEndGap,class:classType,style:styleType,containerStyle:styleType,getRowHeight:{type:definePropType(Function),required:!0},rowKey:tableV2RowProps.rowKey,onRowsRendered:{type:definePropType(Function)},onScroll:{type:definePropType(Function)}}),tableV2Props=buildProps({cache:tableV2GridProps.cache,estimatedRowHeight:tableV2RowProps.estimatedRowHeight,rowKey,headerClass:{type:definePropType([String,Function])},headerProps:{type:definePropType([Object,Function])},headerCellProps:{type:definePropType([Object,Function])},headerHeight:tableV2HeaderProps.headerHeight,footerHeight:{type:Number,default:0},rowClass:{type:definePropType([String,Function])},rowProps:{type:definePropType([Object,Function])},rowHeight:{type:Number,default:50},cellProps:{type:definePropType([Object,Function])},columns,data:dataType,dataGetter:{type:definePropType(Function)},fixedData:fixedDataType,expandColumnKey:tableV2RowProps.expandColumnKey,expandedRowKeys:expandKeys,defaultExpandedRowKeys:expandKeys,class:classType,fixed:Boolean,style:{type:definePropType(Object)},width:requiredNumber,height:requiredNumber,maxHeight:Number,useIsScrolling:Boolean,indentSize:{type:Number,default:12},iconSize:{type:Number,default:12},hScrollbarSize:virtualizedGridProps.hScrollbarSize,vScrollbarSize:virtualizedGridProps.vScrollbarSize,scrollbarAlwaysOn:virtualizedScrollbarProps.alwaysOn,sortBy:{type:definePropType(Object),default:()=>({})},sortState:{type:definePropType(Object),default:void 0},onColumnSort:{type:definePropType(Function)},onExpandedRowsChange:{type:definePropType(Function)},onEndReached:{type:definePropType(Function)},onRowExpand:tableV2RowProps.onRowExpand,onScroll:tableV2GridProps.onScroll,onRowsRendered:tableV2GridProps.onRowsRendered,rowEventHandlers:tableV2RowProps.rowEventHandlers}),TableV2Cell=(le,{slots:oe})=>{var ie;const{cellData:ue,style:de}=le,he=((ie=ue==null?void 0:ue.toString)==null?void 0:ie.call(ue))||"",pe=renderSlot(oe,"default",le,()=>[he]);return createVNode("div",{class:le.class,title:he,style:de},[pe])};TableV2Cell.displayName="ElTableV2Cell";TableV2Cell.inheritAttrs=!1;const HeaderCell=(le,{slots:oe})=>renderSlot(oe,"default",le,()=>{var ie,ue;return[createVNode("div",{class:le.class,title:(ie=le.column)==null?void 0:ie.title},[(ue=le.column)==null?void 0:ue.title])]});HeaderCell.displayName="ElTableV2HeaderCell";HeaderCell.inheritAttrs=!1;const tableV2HeaderRowProps=buildProps({class:String,columns,columnsStyles:{type:definePropType(Object),required:!0},headerIndex:Number,style:{type:definePropType(Object)}}),TableV2HeaderRow=defineComponent({name:"ElTableV2HeaderRow",props:tableV2HeaderRowProps,setup(le,{slots:oe}){return()=>{const{columns:ie,columnsStyles:ue,headerIndex:de,style:he}=le;let pe=ie.map((_e,Ce)=>oe.cell({columns:ie,column:_e,columnIndex:Ce,headerIndex:de,style:ue[_e.key]}));return oe.header&&(pe=oe.header({cells:pe.map(_e=>isArray$3(_e)&&_e.length===1?_e[0]:_e),columns:ie,headerIndex:de})),createVNode("div",{class:le.class,style:he,role:"row"},[pe])}}}),COMPONENT_NAME$7="ElTableV2Header",TableV2Header=defineComponent({name:COMPONENT_NAME$7,props:tableV2HeaderProps,setup(le,{slots:oe,expose:ie}){const ue=useNamespace("table-v2"),de=ref(),he=computed(()=>enforceUnit({width:le.width,height:le.height})),pe=computed(()=>enforceUnit({width:le.rowWidth,height:le.height})),_e=computed(()=>castArray$1(unref(le.headerHeight))),Ce=$e=>{const Ne=unref(de);nextTick(()=>{Ne!=null&&Ne.scroll&&Ne.scroll({left:$e})})},xe=()=>{const $e=ue.e("fixed-header-row"),{columns:Ne,fixedHeaderData:Oe,rowHeight:Fe}=le;return Oe==null?void 0:Oe.map((Ve,ze)=>{var Ue;const Pt=enforceUnit({height:Fe,width:"100%"});return(Ue=oe.fixed)==null?void 0:Ue.call(oe,{class:$e,columns:Ne,rowData:Ve,rowIndex:-(ze+1),style:Pt})})},Ie=()=>{const $e=ue.e("dynamic-header-row"),{columns:Ne}=le;return unref(_e).map((Oe,Fe)=>{var Ve;const ze=enforceUnit({width:"100%",height:Oe});return(Ve=oe.dynamic)==null?void 0:Ve.call(oe,{class:$e,columns:Ne,headerIndex:Fe,style:ze})})};return ie({scrollToLeft:Ce}),()=>{if(!(le.height<=0))return createVNode("div",{ref:de,class:le.class,style:unref(he),role:"rowgroup"},[createVNode("div",{style:unref(pe),class:ue.e("header")},[Ie(),xe()])])}}}),useTableRow=le=>{const{isScrolling:oe}=inject(TableV2InjectionKey),ie=ref(!1),ue=ref(),de=computed(()=>isNumber(le.estimatedRowHeight)&&le.rowIndex>=0),he=(Ce=!1)=>{const xe=unref(ue);if(!xe)return;const{columns:Ie,onRowHeightChange:$e,rowKey:Ne,rowIndex:Oe,style:Fe}=le,{height:Ve}=xe.getBoundingClientRect();ie.value=!0,nextTick(()=>{if(Ce||Ve!==Number.parseInt(Fe.height)){const ze=Ie[0],Ue=(ze==null?void 0:ze.placeholderSign)===placeholderSign;$e==null||$e({rowKey:Ne,height:Ve,rowIndex:Oe},ze&&!Ue&&ze.fixed)}})},pe=computed(()=>{const{rowData:Ce,rowIndex:xe,rowKey:Ie,onRowHover:$e}=le,Ne=le.rowEventHandlers||{},Oe={};return Object.entries(Ne).forEach(([Fe,Ve])=>{isFunction$2(Ve)&&(Oe[Fe]=ze=>{Ve({event:ze,rowData:Ce,rowIndex:xe,rowKey:Ie})})}),$e&&[{name:"onMouseleave",hovered:!1},{name:"onMouseenter",hovered:!0}].forEach(({name:Fe,hovered:Ve})=>{const ze=Oe[Fe];Oe[Fe]=Ue=>{$e({event:Ue,hovered:Ve,rowData:Ce,rowIndex:xe,rowKey:Ie}),ze==null||ze(Ue)}}),Oe}),_e=Ce=>{const{onRowExpand:xe,rowData:Ie,rowIndex:$e,rowKey:Ne}=le;xe==null||xe({expanded:Ce,rowData:Ie,rowIndex:$e,rowKey:Ne})};return onMounted(()=>{unref(de)&&he(!0)}),{isScrolling:oe,measurable:de,measured:ie,rowRef:ue,eventHandlers:pe,onExpand:_e}},COMPONENT_NAME$6="ElTableV2TableRow",TableV2Row=defineComponent({name:COMPONENT_NAME$6,props:tableV2RowProps,setup(le,{expose:oe,slots:ie,attrs:ue}){const{eventHandlers:de,isScrolling:he,measurable:pe,measured:_e,rowRef:Ce,onExpand:xe}=useTableRow(le);return oe({onExpand:xe}),()=>{const{columns:Ie,columnsStyles:$e,expandColumnKey:Ne,depth:Oe,rowData:Fe,rowIndex:Ve,style:ze}=le;let Ue=Ie.map((Pt,qe)=>{const Et=isArray$3(Fe.children)&&Fe.children.length>0&&Pt.key===Ne;return ie.cell({column:Pt,columns:Ie,columnIndex:qe,depth:Oe,style:$e[Pt.key],rowData:Fe,rowIndex:Ve,isScrolling:unref(he),expandIconProps:Et?{rowData:Fe,rowIndex:Ve,onExpand:xe}:void 0})});if(ie.row&&(Ue=ie.row({cells:Ue.map(Pt=>isArray$3(Pt)&&Pt.length===1?Pt[0]:Pt),style:ze,columns:Ie,depth:Oe,rowData:Fe,rowIndex:Ve,isScrolling:unref(he)})),unref(pe)){const{height:Pt,...qe}=ze||{},Et=unref(_e);return createVNode("div",mergeProps({ref:Ce,class:le.class,style:Et?ze:qe,role:"row"},ue,unref(de)),[Ue])}return createVNode("div",mergeProps(ue,{ref:Ce,class:le.class,style:ze,role:"row"},unref(de)),[Ue])}}}),SortIcon=le=>{const{sortOrder:oe}=le;return createVNode(ElIcon,{size:14,class:le.class},{default:()=>[oe===SortOrder.ASC?createVNode(sort_up_default,null,null):createVNode(sort_down_default,null,null)]})},ExpandIcon=le=>{const{expanded:oe,expandable:ie,onExpand:ue,style:de,size:he}=le,pe={onClick:ie?()=>ue(!oe):void 0,class:le.class};return createVNode(ElIcon,mergeProps(pe,{size:he,style:de}),{default:()=>[createVNode(arrow_right_default,null,null)]})},COMPONENT_NAME$5="ElTableV2Grid",useTableGrid=le=>{const oe=ref(),ie=ref(),ue=computed(()=>{const{data:Ve,rowHeight:ze,estimatedRowHeight:Ue}=le;if(!Ue)return Ve.length*ze}),de=computed(()=>{const{fixedData:Ve,rowHeight:ze}=le;return((Ve==null?void 0:Ve.length)||0)*ze}),he=computed(()=>sum(le.headerHeight)),pe=computed(()=>{const{height:Ve}=le;return Math.max(0,Ve-unref(he)-unref(de))}),_e=computed(()=>unref(he)+unref(de)>0),Ce=({data:Ve,rowIndex:ze})=>Ve[ze][le.rowKey];function xe({rowCacheStart:Ve,rowCacheEnd:ze,rowVisibleStart:Ue,rowVisibleEnd:Pt}){var qe;(qe=le.onRowsRendered)==null||qe.call(le,{rowCacheStart:Ve,rowCacheEnd:ze,rowVisibleStart:Ue,rowVisibleEnd:Pt})}function Ie(Ve,ze){var Ue;(Ue=ie.value)==null||Ue.resetAfterRowIndex(Ve,ze)}function $e(Ve,ze){const Ue=unref(oe),Pt=unref(ie);isObject$d(Ve)?(Ue==null||Ue.scrollToLeft(Ve.scrollLeft),Pt==null||Pt.scrollTo(Ve)):(Ue==null||Ue.scrollToLeft(Ve),Pt==null||Pt.scrollTo({scrollLeft:Ve,scrollTop:ze}))}function Ne(Ve){var ze;(ze=unref(ie))==null||ze.scrollTo({scrollTop:Ve})}function Oe(Ve,ze){var Ue;(Ue=unref(ie))==null||Ue.scrollToItem(Ve,1,ze)}function Fe(){var Ve,ze;(Ve=unref(ie))==null||Ve.$forceUpdate(),(ze=unref(oe))==null||ze.$forceUpdate()}return{bodyRef:ie,forceUpdate:Fe,fixedRowHeight:de,gridHeight:pe,hasHeader:_e,headerHeight:he,headerRef:oe,totalHeight:ue,itemKey:Ce,onItemRendered:xe,resetAfterRowIndex:Ie,scrollTo:$e,scrollToTop:Ne,scrollToRow:Oe}},TableGrid=defineComponent({name:COMPONENT_NAME$5,props:tableV2GridProps,setup(le,{slots:oe,expose:ie}){const{ns:ue}=inject(TableV2InjectionKey),{bodyRef:de,fixedRowHeight:he,gridHeight:pe,hasHeader:_e,headerRef:Ce,headerHeight:xe,totalHeight:Ie,forceUpdate:$e,itemKey:Ne,onItemRendered:Oe,resetAfterRowIndex:Fe,scrollTo:Ve,scrollToTop:ze,scrollToRow:Ue}=useTableGrid(le);ie({forceUpdate:$e,totalHeight:Ie,scrollTo:Ve,scrollToTop:ze,scrollToRow:Ue,resetAfterRowIndex:Fe});const Pt=()=>le.bodyWidth;return()=>{const{cache:qe,columns:Et,data:kt,fixedData:At,useIsScrolling:Dt,scrollbarAlwaysOn:Lt,scrollbarEndGap:jt,scrollbarStartGap:_n,style:bn,rowHeight:vn,bodyWidth:Tn,estimatedRowHeight:$n,headerWidth:wn,height:Cn,width:Sn,getRowHeight:In,onScroll:En}=le,xn=isNumber($n),kn=xn?DynamicSizeGrid:FixedSizeGrid,On=unref(xe);return createVNode("div",{role:"table",class:[ue.e("table"),le.class],style:bn},[createVNode(kn,{ref:de,data:kt,useIsScrolling:Dt,itemKey:Ne,columnCache:0,columnWidth:xn?Pt:Tn,totalColumn:1,totalRow:kt.length,rowCache:qe,rowHeight:xn?In:vn,width:Sn,height:unref(pe),class:ue.e("body"),role:"rowgroup",scrollbarStartGap:_n,scrollbarEndGap:jt,scrollbarAlwaysOn:Lt,onScroll:En,onItemRendered:Oe,perfMode:!1},{default:Mn=>{var Un;const zn=kt[Mn.rowIndex];return(Un=oe.row)==null?void 0:Un.call(oe,{...Mn,columns:Et,rowData:zn})}}),unref(_e)&&createVNode(TableV2Header,{ref:Ce,class:ue.e("header-wrapper"),columns:Et,headerData:kt,headerHeight:le.headerHeight,fixedHeaderData:At,rowWidth:wn,rowHeight:vn,width:Sn,height:Math.min(On+unref(he),Cn)},{dynamic:oe.header,fixed:oe.row})])}}});function _isSlot$5(le){return typeof le=="function"||Object.prototype.toString.call(le)==="[object Object]"&&!isVNode(le)}const MainTable=(le,{slots:oe})=>{const{mainTableRef:ie,...ue}=le;return createVNode(TableGrid,mergeProps({ref:ie},ue),_isSlot$5(oe)?oe:{default:()=>[oe]})};function _isSlot$4(le){return typeof le=="function"||Object.prototype.toString.call(le)==="[object Object]"&&!isVNode(le)}const LeftTable$1=(le,{slots:oe})=>{if(!le.columns.length)return;const{leftTableRef:ie,...ue}=le;return createVNode(TableGrid,mergeProps({ref:ie},ue),_isSlot$4(oe)?oe:{default:()=>[oe]})};function _isSlot$3(le){return typeof le=="function"||Object.prototype.toString.call(le)==="[object Object]"&&!isVNode(le)}const LeftTable=(le,{slots:oe})=>{if(!le.columns.length)return;const{rightTableRef:ie,...ue}=le;return createVNode(TableGrid,mergeProps({ref:ie},ue),_isSlot$3(oe)?oe:{default:()=>[oe]})};function _isSlot$2(le){return typeof le=="function"||Object.prototype.toString.call(le)==="[object Object]"&&!isVNode(le)}const RowRenderer=(le,{slots:oe})=>{const{columns:ie,columnsStyles:ue,depthMap:de,expandColumnKey:he,expandedRowKeys:pe,estimatedRowHeight:_e,hasFixedColumns:Ce,rowData:xe,rowIndex:Ie,style:$e,isScrolling:Ne,rowProps:Oe,rowClass:Fe,rowKey:Ve,rowEventHandlers:ze,ns:Ue,onRowHovered:Pt,onRowExpanded:qe}=le,Et=tryCall(Fe,{columns:ie,rowData:xe,rowIndex:Ie},""),kt=tryCall(Oe,{columns:ie,rowData:xe,rowIndex:Ie}),At=xe[Ve],Dt=de[At]||0,Lt=!!he,jt=Ie<0,_n=[Ue.e("row"),Et,{[Ue.e(`row-depth-${Dt}`)]:Lt&&Ie>=0,[Ue.is("expanded")]:Lt&&pe.includes(At),[Ue.is("fixed")]:!Dt&&jt,[Ue.is("customized")]:!!oe.row}],bn=Ce?Pt:void 0,vn={...kt,columns:ie,columnsStyles:ue,class:_n,depth:Dt,expandColumnKey:he,estimatedRowHeight:jt?void 0:_e,isScrolling:Ne,rowIndex:Ie,rowData:xe,rowKey:At,rowEventHandlers:ze,style:$e};return createVNode(TableV2Row,mergeProps(vn,{onRowExpand:qe,onMouseenter:wn=>{bn==null||bn({hovered:!0,rowKey:At,event:wn,rowData:xe,rowIndex:Ie})},onMouseleave:wn=>{bn==null||bn({hovered:!1,rowKey:At,event:wn,rowData:xe,rowIndex:Ie})},rowkey:At}),_isSlot$2(oe)?oe:{default:()=>[oe]})},CellRenderer=({columns:le,column:oe,columnIndex:ie,depth:ue,expandIconProps:de,isScrolling:he,rowData:pe,rowIndex:_e,style:Ce,expandedRowKeys:xe,ns:Ie,cellProps:$e,expandColumnKey:Ne,indentSize:Oe,iconSize:Fe,rowKey:Ve},{slots:ze})=>{const Ue=enforceUnit(Ce);if(oe.placeholderSign===placeholderSign)return createVNode("div",{class:Ie.em("row-cell","placeholder"),style:Ue},null);const{cellRenderer:Pt,dataKey:qe,dataGetter:Et}=oe,kt=isFunction$2(Et)?Et({columns:le,column:oe,columnIndex:ie,rowData:pe,rowIndex:_e}):get$1(pe,qe??""),At=tryCall($e,{cellData:kt,columns:le,column:oe,columnIndex:ie,rowIndex:_e,rowData:pe}),Dt={class:Ie.e("cell-text"),columns:le,column:oe,columnIndex:ie,cellData:kt,isScrolling:he,rowData:pe,rowIndex:_e},Lt=componentToSlot(Pt),jt=Lt?Lt(Dt):renderSlot(ze,"default",Dt,()=>[createVNode(TableV2Cell,Dt,null)]),_n=[Ie.e("row-cell"),oe.class,oe.align===Alignment.CENTER&&Ie.is("align-center"),oe.align===Alignment.RIGHT&&Ie.is("align-right")],bn=_e>=0&&Ne&&oe.key===Ne,vn=_e>=0&&xe.includes(pe[Ve]);let Tn;const $n=`margin-inline-start: ${ue*Oe}px;`;return bn&&(isObject$d(de)?Tn=createVNode(ExpandIcon,mergeProps(de,{class:[Ie.e("expand-icon"),Ie.is("expanded",vn)],size:Fe,expanded:vn,style:$n,expandable:!0}),null):Tn=createVNode("div",{style:[$n,`width: ${Fe}px; height: ${Fe}px;`].join(" ")},null)),createVNode("div",mergeProps({class:_n,style:Ue},At,{role:"cell"}),[Tn,jt])};CellRenderer.inheritAttrs=!1;function _isSlot$1(le){return typeof le=="function"||Object.prototype.toString.call(le)==="[object Object]"&&!isVNode(le)}const HeaderRenderer=({columns:le,columnsStyles:oe,headerIndex:ie,style:ue,headerClass:de,headerProps:he,ns:pe},{slots:_e})=>{const Ce={columns:le,headerIndex:ie},xe=[pe.e("header-row"),tryCall(de,Ce,""),{[pe.is("customized")]:!!_e.header}],Ie={...tryCall(he,Ce),columnsStyles:oe,class:xe,columns:le,headerIndex:ie,style:ue};return createVNode(TableV2HeaderRow,Ie,_isSlot$1(_e)?_e:{default:()=>[_e]})},HeaderCellRenderer=(le,{slots:oe})=>{const{column:ie,ns:ue,style:de,onColumnSorted:he}=le,pe=enforceUnit(de);if(ie.placeholderSign===placeholderSign)return createVNode("div",{class:ue.em("header-row-cell","placeholder"),style:pe},null);const{headerCellRenderer:_e,headerClass:Ce,sortable:xe}=ie,Ie={...le,class:ue.e("header-cell-text")},$e=componentToSlot(_e),Ne=$e?$e(Ie):renderSlot(oe,"default",Ie,()=>[createVNode(HeaderCell,Ie,null)]),{sortBy:Oe,sortState:Fe,headerCellProps:Ve}=le;let ze,Ue;if(Fe){const Et=Fe[ie.key];ze=!!oppositeOrderMap[Et],Ue=ze?Et:SortOrder.ASC}else ze=ie.key===Oe.key,Ue=ze?Oe.order:SortOrder.ASC;const Pt=[ue.e("header-cell"),tryCall(Ce,le,""),ie.align===Alignment.CENTER&&ue.is("align-center"),ie.align===Alignment.RIGHT&&ue.is("align-right"),xe&&ue.is("sortable")],qe={...tryCall(Ve,le),onClick:ie.sortable?he:void 0,class:Pt,style:pe,"data-key":ie.key};return createVNode("div",mergeProps(qe,{role:"columnheader"}),[Ne,xe&&createVNode(SortIcon,{class:[ue.e("sort-icon"),ze&&ue.is("sorting")],sortOrder:Ue},null)])},Footer$1=(le,{slots:oe})=>{var ie;return createVNode("div",{class:le.class,style:le.style},[(ie=oe.default)==null?void 0:ie.call(oe)])};Footer$1.displayName="ElTableV2Footer";const Footer=(le,{slots:oe})=>{const ie=renderSlot(oe,"default",{},()=>[createVNode(ElEmpty,null,null)]);return createVNode("div",{class:le.class,style:le.style},[ie])};Footer.displayName="ElTableV2Empty";const Overlay=(le,{slots:oe})=>{var ie;return createVNode("div",{class:le.class,style:le.style},[(ie=oe.default)==null?void 0:ie.call(oe)])};Overlay.displayName="ElTableV2Overlay";function _isSlot(le){return typeof le=="function"||Object.prototype.toString.call(le)==="[object Object]"&&!isVNode(le)}const COMPONENT_NAME$4="ElTableV2",TableV2=defineComponent({name:COMPONENT_NAME$4,props:tableV2Props,setup(le,{slots:oe,expose:ie}){const ue=useNamespace("table-v2"),{columnsStyles:de,fixedColumnsOnLeft:he,fixedColumnsOnRight:pe,mainColumns:_e,mainTableHeight:Ce,fixedTableHeight:xe,leftTableWidth:Ie,rightTableWidth:$e,data:Ne,depthMap:Oe,expandedRowKeys:Fe,hasFixedColumns:Ve,mainTableRef:ze,leftTableRef:Ue,rightTableRef:Pt,isDynamic:qe,isResetting:Et,isScrolling:kt,bodyWidth:At,emptyStyle:Dt,rootStyle:Lt,headerWidth:jt,footerHeight:_n,showEmpty:bn,scrollTo:vn,scrollToLeft:Tn,scrollToTop:$n,scrollToRow:wn,getRowHeight:Cn,onColumnSorted:Sn,onRowHeightChange:In,onRowHovered:En,onRowExpanded:xn,onRowsRendered:kn,onScroll:On,onVerticalScroll:Mn}=useTable(le);return ie({scrollTo:vn,scrollToLeft:Tn,scrollToTop:$n,scrollToRow:wn}),provide(TableV2InjectionKey,{ns:ue,isResetting:Et,isScrolling:kt}),()=>{const{cache:Un,cellProps:zn,estimatedRowHeight:Hn,expandColumnKey:Rn,fixedData:Jn,headerHeight:Qn,headerClass:_r,headerProps:Zn,headerCellProps:Gn,sortBy:Nn,sortState:Dn,rowHeight:jn,rowClass:ir,rowEventHandlers:Fn,rowKey:Kn,rowProps:mr,scrollbarAlwaysOn:yr,indentSize:Cr,iconSize:br,useIsScrolling:Pr,vScrollbarSize:gr,width:tr}=le,Sr=unref(Ne),Dr={cache:Un,class:ue.e("main"),columns:unref(_e),data:Sr,fixedData:Jn,estimatedRowHeight:Hn,bodyWidth:unref(At)+gr,headerHeight:Qn,headerWidth:unref(jt),height:unref(Ce),mainTableRef:ze,rowKey:Kn,rowHeight:jn,scrollbarAlwaysOn:yr,scrollbarStartGap:2,scrollbarEndGap:gr,useIsScrolling:Pr,width:tr,getRowHeight:Cn,onRowsRendered:kn,onScroll:On},Lr=unref(Ie),Ur=unref(xe),Xr={cache:Un,class:ue.e("left"),columns:unref(he),data:Sr,estimatedRowHeight:Hn,leftTableRef:Ue,rowHeight:jn,bodyWidth:Lr,headerWidth:Lr,headerHeight:Qn,height:Ur,rowKey:Kn,scrollbarAlwaysOn:yr,scrollbarStartGap:2,scrollbarEndGap:gr,useIsScrolling:Pr,width:Lr,getRowHeight:Cn,onScroll:Mn},Wn=unref($e)+gr,wr={cache:Un,class:ue.e("right"),columns:unref(pe),data:Sr,estimatedRowHeight:Hn,rightTableRef:Pt,rowHeight:jn,bodyWidth:Wn,headerWidth:Wn,headerHeight:Qn,height:Ur,rowKey:Kn,scrollbarAlwaysOn:yr,scrollbarStartGap:2,scrollbarEndGap:gr,width:Wn,style:`--${unref(ue.namespace)}-table-scrollbar-size: ${gr}px`,useIsScrolling:Pr,getRowHeight:Cn,onScroll:Mn},Vn=unref(de),sr={ns:ue,depthMap:unref(Oe),columnsStyles:Vn,expandColumnKey:Rn,expandedRowKeys:unref(Fe),estimatedRowHeight:Hn,hasFixedColumns:unref(Ve),rowProps:mr,rowClass:ir,rowKey:Kn,rowEventHandlers:Fn,onRowHovered:En,onRowExpanded:xn,onRowHeightChange:In},nr={cellProps:zn,expandColumnKey:Rn,indentSize:Cr,iconSize:br,rowKey:Kn,expandedRowKeys:unref(Fe),ns:ue},Ar={ns:ue,headerClass:_r,headerProps:Zn,columnsStyles:Vn},Wr={ns:ue,sortBy:Nn,sortState:Dn,headerCellProps:Gn,onColumnSorted:Sn},Yn={row:Pn=>createVNode(RowRenderer,mergeProps(Pn,sr),{row:oe.row,cell:An=>{let Bn;return oe.cell?createVNode(CellRenderer,mergeProps(An,nr,{style:Vn[An.column.key]}),_isSlot(Bn=oe.cell(An))?Bn:{default:()=>[Bn]}):createVNode(CellRenderer,mergeProps(An,nr,{style:Vn[An.column.key]}),null)}}),header:Pn=>createVNode(HeaderRenderer,mergeProps(Pn,Ar),{header:oe.header,cell:An=>{let Bn;return oe["header-cell"]?createVNode(HeaderCellRenderer,mergeProps(An,Wr,{style:Vn[An.column.key]}),_isSlot(Bn=oe["header-cell"](An))?Bn:{default:()=>[Bn]}):createVNode(HeaderCellRenderer,mergeProps(An,Wr,{style:Vn[An.column.key]}),null)}})},Nr=[le.class,ue.b(),ue.e("root"),{[ue.is("dynamic")]:unref(qe)}],Hr={class:ue.e("footer"),style:unref(_n)};return createVNode("div",{class:Nr,style:unref(Lt)},[createVNode(MainTable,Dr,_isSlot(Yn)?Yn:{default:()=>[Yn]}),createVNode(LeftTable$1,Xr,_isSlot(Yn)?Yn:{default:()=>[Yn]}),createVNode(LeftTable,wr,_isSlot(Yn)?Yn:{default:()=>[Yn]}),oe.footer&&createVNode(Footer$1,Hr,{default:oe.footer}),unref(bn)&&createVNode(Footer,{class:ue.e("empty"),style:unref(Dt)},{default:oe.empty}),oe.overlay&&createVNode(Overlay,{class:ue.e("overlay")},{default:oe.overlay})])}}}),autoResizerProps=buildProps({disableWidth:Boolean,disableHeight:Boolean,onResize:{type:definePropType(Function)}}),AutoResizer=defineComponent({name:"ElAutoResizer",props:autoResizerProps,setup(le,{slots:oe}){const ie=useNamespace("auto-resizer"),{height:ue,width:de,sizer:he}=useAutoResize(le),pe={width:"100%",height:"100%"};return()=>{var _e;return createVNode("div",{ref:he,class:ie.b(),style:pe},[(_e=oe.default)==null?void 0:_e.call(oe,{height:ue.value,width:de.value})])}}}),ElTableV2=withInstall(TableV2),ElAutoResizer=withInstall(AutoResizer),tabsRootContextKey=Symbol("tabsRootContextKey"),tabBarProps=buildProps({tabs:{type:definePropType(Array),default:()=>mutable([])}}),COMPONENT_NAME$3="ElTabBar",__default__$u=defineComponent({name:COMPONENT_NAME$3}),_sfc_main$P=defineComponent({...__default__$u,props:tabBarProps,setup(le,{expose:oe}){const ie=le,ue=getCurrentInstance(),de=inject(tabsRootContextKey);de||throwError(COMPONENT_NAME$3,"<el-tabs><el-tab-bar /></el-tabs>");const he=useNamespace("tabs"),pe=ref(),_e=ref(),Ce=()=>{let Oe=0,Fe=0;const Ve=["top","bottom"].includes(de.props.tabPosition)?"width":"height",ze=Ve==="width"?"x":"y",Ue=ze==="x"?"left":"top";return ie.tabs.every(Pt=>{var qe,Et;const kt=(Et=(qe=ue.parent)==null?void 0:qe.refs)==null?void 0:Et[`tab-${Pt.uid}`];if(!kt)return!1;if(!Pt.active)return!0;Oe=kt[`offset${capitalize(Ue)}`],Fe=kt[`client${capitalize(Ve)}`];const At=window.getComputedStyle(kt);return Ve==="width"&&(Fe-=Number.parseFloat(At.paddingLeft)+Number.parseFloat(At.paddingRight),Oe+=Number.parseFloat(At.paddingLeft)),!1}),{[Ve]:`${Fe}px`,transform:`translate${capitalize(ze)}(${Oe}px)`}},xe=()=>_e.value=Ce(),Ie=[],$e=()=>{var Oe;Ie.forEach(Ve=>Ve.stop()),Ie.length=0;const Fe=(Oe=ue.parent)==null?void 0:Oe.refs;if(Fe){for(const Ve in Fe)if(Ve.startsWith("tab-")){const ze=Fe[Ve];ze&&Ie.push(useResizeObserver(ze,xe))}}};watch(()=>ie.tabs,async()=>{await nextTick(),xe(),$e()},{immediate:!0});const Ne=useResizeObserver(pe,()=>xe());return onBeforeUnmount(()=>{Ie.forEach(Oe=>Oe.stop()),Ie.length=0,Ne.stop()}),oe({ref:pe,update:xe}),(Oe,Fe)=>(openBlock(),createElementBlock("div",{ref_key:"barRef",ref:pe,class:normalizeClass([unref(he).e("active-bar"),unref(he).is(unref(de).props.tabPosition)]),style:normalizeStyle(_e.value)},null,6))}});var TabBar=_export_sfc$1(_sfc_main$P,[["__file","tab-bar.vue"]]);const tabNavProps=buildProps({panes:{type:definePropType(Array),default:()=>mutable([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),tabNavEmits={tabClick:(le,oe,ie)=>ie instanceof Event,tabRemove:(le,oe)=>oe instanceof Event},COMPONENT_NAME$2="ElTabNav",TabNav=defineComponent({name:COMPONENT_NAME$2,props:tabNavProps,emits:tabNavEmits,setup(le,{expose:oe,emit:ie}){const ue=inject(tabsRootContextKey);ue||throwError(COMPONENT_NAME$2,"<el-tabs><tab-nav /></el-tabs>");const de=useNamespace("tabs"),he=useDocumentVisibility(),pe=useWindowFocus(),_e=ref(),Ce=ref(),xe=ref(),Ie=ref(),$e=ref(!1),Ne=ref(0),Oe=ref(!1),Fe=ref(!0),Ve=computed(()=>["top","bottom"].includes(ue.props.tabPosition)?"width":"height"),ze=computed(()=>({transform:`translate${Ve.value==="width"?"X":"Y"}(-${Ne.value}px)`})),Ue=()=>{if(!_e.value)return;const Lt=_e.value[`offset${capitalize(Ve.value)}`],jt=Ne.value;if(!jt)return;const _n=jt>Lt?jt-Lt:0;Ne.value=_n},Pt=()=>{if(!_e.value||!Ce.value)return;const Lt=Ce.value[`offset${capitalize(Ve.value)}`],jt=_e.value[`offset${capitalize(Ve.value)}`],_n=Ne.value;if(Lt-_n<=jt)return;const bn=Lt-_n>jt*2?_n+jt:Lt-jt;Ne.value=bn},qe=async()=>{const Lt=Ce.value;if(!$e.value||!xe.value||!_e.value||!Lt)return;await nextTick();const jt=xe.value.querySelector(".is-active");if(!jt)return;const _n=_e.value,bn=["top","bottom"].includes(ue.props.tabPosition),vn=jt.getBoundingClientRect(),Tn=_n.getBoundingClientRect(),$n=bn?Lt.offsetWidth-Tn.width:Lt.offsetHeight-Tn.height,wn=Ne.value;let Cn=wn;bn?(vn.left<Tn.left&&(Cn=wn-(Tn.left-vn.left)),vn.right>Tn.right&&(Cn=wn+vn.right-Tn.right)):(vn.top<Tn.top&&(Cn=wn-(Tn.top-vn.top)),vn.bottom>Tn.bottom&&(Cn=wn+(vn.bottom-Tn.bottom))),Cn=Math.max(Cn,0),Ne.value=Math.min(Cn,$n)},Et=()=>{var Lt;if(!Ce.value||!_e.value)return;le.stretch&&((Lt=Ie.value)==null||Lt.update());const jt=Ce.value[`offset${capitalize(Ve.value)}`],_n=_e.value[`offset${capitalize(Ve.value)}`],bn=Ne.value;_n<jt?($e.value=$e.value||{},$e.value.prev=bn,$e.value.next=bn+_n<jt,jt-bn<_n&&(Ne.value=jt-_n)):($e.value=!1,bn>0&&(Ne.value=0))},kt=Lt=>{const jt=Lt.code,{up:_n,down:bn,left:vn,right:Tn}=EVENT_CODE;if(![_n,bn,vn,Tn].includes(jt))return;const $n=Array.from(Lt.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),wn=$n.indexOf(Lt.target);let Cn;jt===vn||jt===_n?wn===0?Cn=$n.length-1:Cn=wn-1:wn<$n.length-1?Cn=wn+1:Cn=0,$n[Cn].focus({preventScroll:!0}),$n[Cn].click(),At()},At=()=>{Fe.value&&(Oe.value=!0)},Dt=()=>Oe.value=!1;return watch(he,Lt=>{Lt==="hidden"?Fe.value=!1:Lt==="visible"&&setTimeout(()=>Fe.value=!0,50)}),watch(pe,Lt=>{Lt?setTimeout(()=>Fe.value=!0,50):Fe.value=!1}),useResizeObserver(xe,Et),onMounted(()=>setTimeout(()=>qe(),0)),onUpdated(()=>Et()),oe({scrollToActiveTab:qe,removeFocus:Dt}),()=>{const Lt=$e.value?[createVNode("span",{class:[de.e("nav-prev"),de.is("disabled",!$e.value.prev)],onClick:Ue},[createVNode(ElIcon,null,{default:()=>[createVNode(arrow_left_default,null,null)]})]),createVNode("span",{class:[de.e("nav-next"),de.is("disabled",!$e.value.next)],onClick:Pt},[createVNode(ElIcon,null,{default:()=>[createVNode(arrow_right_default,null,null)]})])]:null,jt=le.panes.map((_n,bn)=>{var vn,Tn,$n,wn;const Cn=_n.uid,Sn=_n.props.disabled,In=(Tn=(vn=_n.props.name)!=null?vn:_n.index)!=null?Tn:`${bn}`,En=!Sn&&(_n.isClosable||le.editable);_n.index=`${bn}`;const xn=En?createVNode(ElIcon,{class:"is-icon-close",onClick:Mn=>ie("tabRemove",_n,Mn)},{default:()=>[createVNode(close_default,null,null)]}):null,kn=((wn=($n=_n.slots).label)==null?void 0:wn.call($n))||_n.props.label,On=!Sn&&_n.active?0:-1;return createVNode("div",{ref:`tab-${Cn}`,class:[de.e("item"),de.is(ue.props.tabPosition),de.is("active",_n.active),de.is("disabled",Sn),de.is("closable",En),de.is("focus",Oe.value)],id:`tab-${In}`,key:`tab-${Cn}`,"aria-controls":`pane-${In}`,role:"tab","aria-selected":_n.active,tabindex:On,onFocus:()=>At(),onBlur:()=>Dt(),onClick:Mn=>{Dt(),ie("tabClick",_n,In,Mn)},onKeydown:Mn=>{En&&(Mn.code===EVENT_CODE.delete||Mn.code===EVENT_CODE.backspace)&&ie("tabRemove",_n,Mn)}},[kn,xn])});return createVNode("div",{ref:xe,class:[de.e("nav-wrap"),de.is("scrollable",!!$e.value),de.is(ue.props.tabPosition)]},[Lt,createVNode("div",{class:de.e("nav-scroll"),ref:_e},[createVNode("div",{class:[de.e("nav"),de.is(ue.props.tabPosition),de.is("stretch",le.stretch&&["top","bottom"].includes(ue.props.tabPosition))],ref:Ce,style:ze.value,role:"tablist",onKeydown:kt},[le.type?null:createVNode(TabBar,{ref:Ie,tabs:[...le.panes]},null),jt])])])}}}),tabsProps=buildProps({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:definePropType(Function),default:()=>!0},stretch:Boolean}),isPaneName=le=>isString$1(le)||isNumber(le),tabsEmits={[UPDATE_MODEL_EVENT]:le=>isPaneName(le),tabClick:(le,oe)=>oe instanceof Event,tabChange:le=>isPaneName(le),edit:(le,oe)=>["remove","add"].includes(oe),tabRemove:le=>isPaneName(le),tabAdd:()=>!0},Tabs=defineComponent({name:"ElTabs",props:tabsProps,emits:tabsEmits,setup(le,{emit:oe,slots:ie,expose:ue}){var de;const he=useNamespace("tabs"),pe=computed(()=>["left","right"].includes(le.tabPosition)),{children:_e,addChild:Ce,removeChild:xe}=useOrderedChildren(getCurrentInstance(),"ElTabPane"),Ie=ref(),$e=ref((de=le.modelValue)!=null?de:"0"),Ne=async(Ue,Pt=!1)=>{var qe,Et,kt;if(!($e.value===Ue||isUndefined(Ue)))try{await((qe=le.beforeLeave)==null?void 0:qe.call(le,Ue,$e.value))!==!1&&($e.value=Ue,Pt&&(oe(UPDATE_MODEL_EVENT,Ue),oe("tabChange",Ue)),(kt=(Et=Ie.value)==null?void 0:Et.removeFocus)==null||kt.call(Et))}catch{}},Oe=(Ue,Pt,qe)=>{Ue.props.disabled||(Ne(Pt,!0),oe("tabClick",Ue,qe))},Fe=(Ue,Pt)=>{Ue.props.disabled||isUndefined(Ue.props.name)||(Pt.stopPropagation(),oe("edit",Ue.props.name,"remove"),oe("tabRemove",Ue.props.name))},Ve=()=>{oe("edit",void 0,"add"),oe("tabAdd")};watch(()=>le.modelValue,Ue=>Ne(Ue)),watch($e,async()=>{var Ue;await nextTick(),(Ue=Ie.value)==null||Ue.scrollToActiveTab()}),provide(tabsRootContextKey,{props:le,currentName:$e,registerPane:Ue=>{_e.value.push(Ue)},sortPane:Ce,unregisterPane:xe}),ue({currentName:$e});const ze=({render:Ue})=>Ue();return()=>{const Ue=ie["add-icon"],Pt=le.editable||le.addable?createVNode("div",{class:[he.e("new-tab"),pe.value&&he.e("new-tab-vertical")],tabindex:"0",onClick:Ve,onKeydown:kt=>{kt.code===EVENT_CODE.enter&&Ve()}},[Ue?renderSlot(ie,"add-icon"):createVNode(ElIcon,{class:he.is("icon-plus")},{default:()=>[createVNode(plus_default,null,null)]})]):null,qe=createVNode("div",{class:[he.e("header"),pe.value&&he.e("header-vertical"),he.is(le.tabPosition)]},[createVNode(ze,{render:()=>{const kt=_e.value.some(At=>At.slots.label);return createVNode(TabNav,{ref:Ie,currentName:$e.value,editable:le.editable,type:le.type,panes:_e.value,stretch:le.stretch,onTabClick:Oe,onTabRemove:Fe},{$stable:!kt})}},null),Pt]),Et=createVNode("div",{class:he.e("content")},[renderSlot(ie,"default")]);return createVNode("div",{class:[he.b(),he.m(le.tabPosition),{[he.m("card")]:le.type==="card",[he.m("border-card")]:le.type==="border-card"}]},[Et,qe])}}}),tabPaneProps=buildProps({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),COMPONENT_NAME$1="ElTabPane",__default__$t=defineComponent({name:COMPONENT_NAME$1}),_sfc_main$O=defineComponent({...__default__$t,props:tabPaneProps,setup(le){const oe=le,ie=getCurrentInstance(),ue=useSlots(),de=inject(tabsRootContextKey);de||throwError(COMPONENT_NAME$1,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const he=useNamespace("tab-pane"),pe=ref(),_e=computed(()=>oe.closable||de.props.closable),Ce=computedEager(()=>{var Oe;return de.currentName.value===((Oe=oe.name)!=null?Oe:pe.value)}),xe=ref(Ce.value),Ie=computed(()=>{var Oe;return(Oe=oe.name)!=null?Oe:pe.value}),$e=computedEager(()=>!oe.lazy||xe.value||Ce.value);watch(Ce,Oe=>{Oe&&(xe.value=!0)});const Ne=reactive({uid:ie.uid,slots:ue,props:oe,paneName:Ie,active:Ce,index:pe,isClosable:_e});return de.registerPane(Ne),onMounted(()=>{de.sortPane(Ne)}),onUnmounted(()=>{de.unregisterPane(Ne.uid)}),(Oe,Fe)=>unref($e)?withDirectives((openBlock(),createElementBlock("div",{key:0,id:`pane-${unref(Ie)}`,class:normalizeClass(unref(he).b()),role:"tabpanel","aria-hidden":!unref(Ce),"aria-labelledby":`tab-${unref(Ie)}`},[renderSlot(Oe.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[vShow,unref(Ce)]]):createCommentVNode("v-if",!0)}});var TabPane=_export_sfc$1(_sfc_main$O,[["__file","tab-pane.vue"]]);const ElTabs=withInstall(Tabs,{TabPane}),ElTabPane=withNoopInstall(TabPane),textProps=buildProps({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:componentSizes,default:""},truncated:Boolean,lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),__default__$s=defineComponent({name:"ElText"}),_sfc_main$N=defineComponent({...__default__$s,props:textProps,setup(le){const oe=le,ie=useFormSize(),ue=useNamespace("text"),de=computed(()=>[ue.b(),ue.m(oe.type),ue.m(ie.value),ue.is("truncated",oe.truncated),ue.is("line-clamp",!isUndefined(oe.lineClamp))]);return(he,pe)=>(openBlock(),createBlock(resolveDynamicComponent(he.tag),{class:normalizeClass(unref(de)),style:normalizeStyle({"-webkit-line-clamp":he.lineClamp})},{default:withCtx(()=>[renderSlot(he.$slots,"default")]),_:3},8,["class","style"]))}});var Text=_export_sfc$1(_sfc_main$N,[["__file","text.vue"]]);const ElText=withInstall(Text),timeSelectProps=buildProps({format:{type:String,default:"HH:mm"},modelValue:String,disabled:Boolean,editable:{type:Boolean,default:!0},effect:{type:definePropType(String),default:"light"},clearable:{type:Boolean,default:!0},size:useSizeProp,placeholder:String,start:{type:String,default:"09:00"},end:{type:String,default:"18:00"},step:{type:String,default:"00:30"},minTime:String,maxTime:String,name:String,prefixIcon:{type:definePropType([String,Object]),default:()=>clock_default},clearIcon:{type:definePropType([String,Object]),default:()=>circle_close_default},...useEmptyValuesProps}),parseTime=le=>{const oe=(le||"").split(":");if(oe.length>=2){let ie=Number.parseInt(oe[0],10);const ue=Number.parseInt(oe[1],10),de=le.toUpperCase();return de.includes("AM")&&ie===12?ie=0:de.includes("PM")&&ie!==12&&(ie+=12),{hours:ie,minutes:ue}}return null},compareTime=(le,oe)=>{const ie=parseTime(le);if(!ie)return-1;const ue=parseTime(oe);if(!ue)return-1;const de=ie.minutes+ie.hours*60,he=ue.minutes+ue.hours*60;return de===he?0:de>he?1:-1},padTime=le=>`${le}`.padStart(2,"0"),formatTime=le=>`${padTime(le.hours)}:${padTime(le.minutes)}`,nextTime=(le,oe)=>{const ie=parseTime(le);if(!ie)return"";const ue=parseTime(oe);if(!ue)return"";const de={hours:ie.hours,minutes:ie.minutes};return de.minutes+=ue.minutes,de.hours+=ue.hours,de.hours+=Math.floor(de.minutes/60),de.minutes=de.minutes%60,formatTime(de)},__default__$r=defineComponent({name:"ElTimeSelect"}),_sfc_main$M=defineComponent({...__default__$r,props:timeSelectProps,emits:["change","blur","focus","clear","update:modelValue"],setup(le,{expose:oe}){const ie=le;dayjs.extend(customParseFormat);const{Option:ue}=ElSelect,de=useNamespace("input"),he=ref(),pe=useFormDisabled(),{lang:_e}=useLocale(),Ce=computed(()=>ie.modelValue),xe=computed(()=>{const Ue=parseTime(ie.start);return Ue?formatTime(Ue):null}),Ie=computed(()=>{const Ue=parseTime(ie.end);return Ue?formatTime(Ue):null}),$e=computed(()=>{const Ue=parseTime(ie.step);return Ue?formatTime(Ue):null}),Ne=computed(()=>{const Ue=parseTime(ie.minTime||"");return Ue?formatTime(Ue):null}),Oe=computed(()=>{const Ue=parseTime(ie.maxTime||"");return Ue?formatTime(Ue):null}),Fe=computed(()=>{const Ue=[];if(ie.start&&ie.end&&ie.step){let Pt=xe.value,qe;for(;Pt&&Ie.value&&compareTime(Pt,Ie.value)<=0;)qe=dayjs(Pt,"HH:mm").locale(_e.value).format(ie.format),Ue.push({value:qe,disabled:compareTime(Pt,Ne.value||"-1:-1")<=0||compareTime(Pt,Oe.value||"100:100")>=0}),Pt=nextTime(Pt,$e.value)}return Ue});return oe({blur:()=>{var Ue,Pt;(Pt=(Ue=he.value)==null?void 0:Ue.blur)==null||Pt.call(Ue)},focus:()=>{var Ue,Pt;(Pt=(Ue=he.value)==null?void 0:Ue.focus)==null||Pt.call(Ue)}}),(Ue,Pt)=>(openBlock(),createBlock(unref(ElSelect),{ref_key:"select",ref:he,"model-value":unref(Ce),disabled:unref(pe),clearable:Ue.clearable,"clear-icon":Ue.clearIcon,size:Ue.size,effect:Ue.effect,placeholder:Ue.placeholder,"default-first-option":"",filterable:Ue.editable,"empty-values":Ue.emptyValues,"value-on-clear":Ue.valueOnClear,"onUpdate:modelValue":qe=>Ue.$emit("update:modelValue",qe),onChange:qe=>Ue.$emit("change",qe),onBlur:qe=>Ue.$emit("blur",qe),onFocus:qe=>Ue.$emit("focus",qe),onClear:()=>Ue.$emit("clear")},{prefix:withCtx(()=>[Ue.prefixIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(de).e("prefix-icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(Ue.prefixIcon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)]),default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Fe),qe=>(openBlock(),createBlock(unref(ue),{key:qe.value,label:qe.value,value:qe.value,disabled:qe.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["model-value","disabled","clearable","clear-icon","size","effect","placeholder","filterable","empty-values","value-on-clear","onUpdate:modelValue","onChange","onBlur","onFocus","onClear"]))}});var TimeSelect=_export_sfc$1(_sfc_main$M,[["__file","time-select.vue"]]);const ElTimeSelect=withInstall(TimeSelect),Timeline$1=defineComponent({name:"ElTimeline",setup(le,{slots:oe}){const ie=useNamespace("timeline");return provide("timeline",oe),()=>h$3("ul",{class:[ie.b()]},[renderSlot(oe,"default")])}}),timelineItemProps=buildProps({timestamp:{type:String,default:""},hideTimestamp:Boolean,center:Boolean,placement:{type:String,values:["top","bottom"],default:"bottom"},type:{type:String,values:["primary","success","warning","danger","info"],default:""},color:{type:String,default:""},size:{type:String,values:["normal","large"],default:"normal"},icon:{type:iconPropType},hollow:Boolean}),__default__$q=defineComponent({name:"ElTimelineItem"}),_sfc_main$L=defineComponent({...__default__$q,props:timelineItemProps,setup(le){const oe=le,ie=useNamespace("timeline-item"),ue=computed(()=>[ie.e("node"),ie.em("node",oe.size||""),ie.em("node",oe.type||""),ie.is("hollow",oe.hollow)]);return(de,he)=>(openBlock(),createElementBlock("li",{class:normalizeClass([unref(ie).b(),{[unref(ie).e("center")]:de.center}])},[createBaseVNode("div",{class:normalizeClass(unref(ie).e("tail"))},null,2),de.$slots.dot?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(ue)),style:normalizeStyle({backgroundColor:de.color})},[de.icon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(ie).e("icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(de.icon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],6)),de.$slots.dot?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(ie).e("dot"))},[renderSlot(de.$slots,"dot")],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(ie).e("wrapper"))},[!de.hideTimestamp&&de.placement==="top"?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass([unref(ie).e("timestamp"),unref(ie).is("top")])},toDisplayString(de.timestamp),3)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(ie).e("content"))},[renderSlot(de.$slots,"default")],2),!de.hideTimestamp&&de.placement==="bottom"?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass([unref(ie).e("timestamp"),unref(ie).is("bottom")])},toDisplayString(de.timestamp),3)):createCommentVNode("v-if",!0)],2)],2))}});var TimelineItem=_export_sfc$1(_sfc_main$L,[["__file","timeline-item.vue"]]);const ElTimeline=withInstall(Timeline$1,{TimelineItem}),ElTimelineItem=withNoopInstall(TimelineItem),tooltipV2CommonProps=buildProps({nowrap:Boolean});var TooltipV2Sides=(le=>(le.top="top",le.bottom="bottom",le.left="left",le.right="right",le))(TooltipV2Sides||{});const tooltipV2Sides=Object.values(TooltipV2Sides),tooltipV2ArrowProps=buildProps({width:{type:Number,default:10},height:{type:Number,default:10},style:{type:definePropType(Object),default:null}}),tooltipV2ArrowSpecialProps=buildProps({side:{type:definePropType(String),values:tooltipV2Sides,required:!0}}),tooltipV2Strategies=["absolute","fixed"],tooltipV2Placements=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],tooltipV2ContentProps=buildProps({arrowPadding:{type:definePropType(Number),default:5},effect:{type:definePropType(String),default:"light"},contentClass:String,placement:{type:definePropType(String),values:tooltipV2Placements,default:"bottom"},reference:{type:definePropType(Object),default:null},offset:{type:Number,default:8},strategy:{type:definePropType(String),values:tooltipV2Strategies,default:"absolute"},showArrow:Boolean,...useAriaProps(["ariaLabel"])}),tooltipV2RootProps=buildProps({delayDuration:{type:Number,default:300},defaultOpen:Boolean,open:{type:Boolean,default:void 0},onOpenChange:{type:definePropType(Function)},"onUpdate:open":{type:definePropType(Function)}}),EventHandler={type:definePropType(Function)},tooltipV2TriggerProps=buildProps({onBlur:EventHandler,onClick:EventHandler,onFocus:EventHandler,onMouseDown:EventHandler,onMouseEnter:EventHandler,onMouseLeave:EventHandler}),tooltipV2Props=buildProps({...tooltipV2RootProps,...tooltipV2ArrowProps,...tooltipV2TriggerProps,...tooltipV2ContentProps,alwaysOn:Boolean,fullTransition:Boolean,transitionProps:{type:definePropType(Object),default:null},teleported:Boolean,to:{type:definePropType(String),default:"body"}}),tooltipV2RootKey=Symbol("tooltipV2"),tooltipV2ContentKey=Symbol("tooltipV2Content"),TOOLTIP_V2_OPEN="tooltip_v2.open",__default__$p=defineComponent({name:"ElTooltipV2Root"}),_sfc_main$K=defineComponent({...__default__$p,props:tooltipV2RootProps,setup(le,{expose:oe}){const ie=le,ue=ref(ie.defaultOpen),de=ref(null),he=computed({get:()=>isPropAbsent(ie.open)?ue.value:ie.open,set:ze=>{var Ue;ue.value=ze,(Ue=ie["onUpdate:open"])==null||Ue.call(ie,ze)}}),pe=computed(()=>isNumber(ie.delayDuration)&&ie.delayDuration>0),{start:_e,stop:Ce}=useTimeoutFn(()=>{he.value=!0},computed(()=>ie.delayDuration),{immediate:!1}),xe=useNamespace("tooltip-v2"),Ie=useId(),$e=()=>{Ce(),he.value=!0},Ne=()=>{unref(pe)?_e():$e()},Oe=$e,Fe=()=>{Ce(),he.value=!1};return watch(he,ze=>{var Ue;ze&&(document.dispatchEvent(new CustomEvent(TOOLTIP_V2_OPEN)),Oe()),(Ue=ie.onOpenChange)==null||Ue.call(ie,ze)}),onMounted(()=>{document.addEventListener(TOOLTIP_V2_OPEN,Fe)}),onBeforeUnmount(()=>{Ce(),document.removeEventListener(TOOLTIP_V2_OPEN,Fe)}),provide(tooltipV2RootKey,{contentId:Ie,triggerRef:de,ns:xe,onClose:Fe,onDelayOpen:Ne,onOpen:Oe}),oe({onOpen:Oe,onClose:Fe}),(ze,Ue)=>renderSlot(ze.$slots,"default",{open:unref(he)})}});var TooltipV2Root=_export_sfc$1(_sfc_main$K,[["__file","root.vue"]]);const __default__$o=defineComponent({name:"ElTooltipV2Arrow"}),_sfc_main$J=defineComponent({...__default__$o,props:{...tooltipV2ArrowProps,...tooltipV2ArrowSpecialProps},setup(le){const oe=le,{ns:ie}=inject(tooltipV2RootKey),{arrowRef:ue}=inject(tooltipV2ContentKey),de=computed(()=>{const{style:he,width:pe,height:_e}=oe,Ce=ie.namespace.value;return{[`--${Ce}-tooltip-v2-arrow-width`]:`${pe}px`,[`--${Ce}-tooltip-v2-arrow-height`]:`${_e}px`,[`--${Ce}-tooltip-v2-arrow-border-width`]:`${pe/2}px`,[`--${Ce}-tooltip-v2-arrow-cover-width`]:pe/2-1,...he||{}}});return(he,pe)=>(openBlock(),createElementBlock("span",{ref_key:"arrowRef",ref:ue,style:normalizeStyle(unref(de)),class:normalizeClass(unref(ie).e("arrow"))},null,6))}});var TooltipV2Arrow=_export_sfc$1(_sfc_main$J,[["__file","arrow.vue"]]);const visualHiddenProps=buildProps({style:{type:definePropType([String,Object,Array]),default:()=>({})}}),__default__$n=defineComponent({name:"ElVisuallyHidden"}),_sfc_main$I=defineComponent({...__default__$n,props:visualHiddenProps,setup(le){const oe=le,ie=computed(()=>[oe.style,{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}]);return(ue,de)=>(openBlock(),createElementBlock("span",mergeProps(ue.$attrs,{style:unref(ie)}),[renderSlot(ue.$slots,"default")],16))}});var ElVisuallyHidden=_export_sfc$1(_sfc_main$I,[["__file","visual-hidden.vue"]]);const __default__$m=defineComponent({name:"ElTooltipV2Content"}),_sfc_main$H=defineComponent({...__default__$m,props:{...tooltipV2ContentProps,...tooltipV2CommonProps},setup(le){const oe=le,{triggerRef:ie,contentId:ue}=inject(tooltipV2RootKey),de=ref(oe.placement),he=ref(oe.strategy),pe=ref(null),{referenceRef:_e,contentRef:Ce,middlewareData:xe,x:Ie,y:$e,update:Ne}=useFloating$1({placement:de,strategy:he,middleware:computed(()=>{const qe=[offset(oe.offset)];return oe.showArrow&&qe.push(arrowMiddleware({arrowRef:pe})),qe})}),Oe=useZIndex().nextZIndex(),Fe=useNamespace("tooltip-v2"),Ve=computed(()=>de.value.split("-")[0]),ze=computed(()=>({position:unref(he),top:`${unref($e)||0}px`,left:`${unref(Ie)||0}px`,zIndex:Oe})),Ue=computed(()=>{if(!oe.showArrow)return{};const{arrow:qe}=unref(xe);return{[`--${Fe.namespace.value}-tooltip-v2-arrow-x`]:`${qe==null?void 0:qe.x}px`||"",[`--${Fe.namespace.value}-tooltip-v2-arrow-y`]:`${qe==null?void 0:qe.y}px`||""}}),Pt=computed(()=>[Fe.e("content"),Fe.is("dark",oe.effect==="dark"),Fe.is(unref(he)),oe.contentClass]);return watch(pe,()=>Ne()),watch(()=>oe.placement,qe=>de.value=qe),onMounted(()=>{watch(()=>oe.reference||ie.value,qe=>{_e.value=qe||void 0},{immediate:!0})}),provide(tooltipV2ContentKey,{arrowRef:pe}),(qe,Et)=>(openBlock(),createElementBlock("div",{ref_key:"contentRef",ref:Ce,style:normalizeStyle(unref(ze)),"data-tooltip-v2-root":""},[qe.nowrap?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("div",{key:0,"data-side":unref(Ve),class:normalizeClass(unref(Pt))},[renderSlot(qe.$slots,"default",{contentStyle:unref(ze),contentClass:unref(Pt)}),createVNode(unref(ElVisuallyHidden),{id:unref(ue),role:"tooltip"},{default:withCtx(()=>[qe.ariaLabel?(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString(qe.ariaLabel),1)],64)):renderSlot(qe.$slots,"default",{key:1})]),_:3},8,["id"]),renderSlot(qe.$slots,"arrow",{style:normalizeStyle(unref(Ue)),side:unref(Ve)})],10,["data-side"]))],4))}});var TooltipV2Content=_export_sfc$1(_sfc_main$H,[["__file","content.vue"]]);const forwardRefProps=buildProps({setRef:{type:definePropType(Function),required:!0},onlyChild:Boolean});var ForwardRef=defineComponent({props:forwardRefProps,setup(le,{slots:oe}){const ie=ref(),ue=composeRefs(ie,de=>{de?le.setRef(de.nextElementSibling):le.setRef(null)});return()=>{var de;const[he]=((de=oe.default)==null?void 0:de.call(oe))||[],pe=le.onlyChild?ensureOnlyChild(he.children):he.children;return createVNode(Fragment,{ref:ue},[pe])}}});const __default__$l=defineComponent({name:"ElTooltipV2Trigger"}),_sfc_main$G=defineComponent({...__default__$l,props:{...tooltipV2CommonProps,...tooltipV2TriggerProps},setup(le){const oe=le,{onClose:ie,onOpen:ue,onDelayOpen:de,triggerRef:he,contentId:pe}=inject(tooltipV2RootKey);let _e=!1;const Ce=Pt=>{he.value=Pt},xe=()=>{_e=!1},Ie=composeEventHandlers(oe.onMouseEnter,de),$e=composeEventHandlers(oe.onMouseLeave,ie),Ne=composeEventHandlers(oe.onMouseDown,()=>{ie(),_e=!0,document.addEventListener("mouseup",xe,{once:!0})}),Oe=composeEventHandlers(oe.onFocus,()=>{_e||ue()}),Fe=composeEventHandlers(oe.onBlur,ie),Ve=composeEventHandlers(oe.onClick,Pt=>{Pt.detail===0&&ie()}),ze={blur:Fe,click:Ve,focus:Oe,mousedown:Ne,mouseenter:Ie,mouseleave:$e},Ue=(Pt,qe,Et)=>{Pt&&Object.entries(qe).forEach(([kt,At])=>{Pt[Et](kt,At)})};return watch(he,(Pt,qe)=>{Ue(Pt,ze,"addEventListener"),Ue(qe,ze,"removeEventListener"),Pt&&Pt.setAttribute("aria-describedby",pe.value)}),onBeforeUnmount(()=>{Ue(he.value,ze,"removeEventListener"),document.removeEventListener("mouseup",xe)}),(Pt,qe)=>Pt.nowrap?(openBlock(),createBlock(unref(ForwardRef),{key:0,"set-ref":Ce,"only-child":""},{default:withCtx(()=>[renderSlot(Pt.$slots,"default")]),_:3})):(openBlock(),createElementBlock("button",mergeProps({key:1,ref_key:"triggerRef",ref:he},Pt.$attrs),[renderSlot(Pt.$slots,"default")],16))}});var TooltipV2Trigger=_export_sfc$1(_sfc_main$G,[["__file","trigger.vue"]]);const __default__$k=defineComponent({name:"ElTooltipV2"}),_sfc_main$F=defineComponent({...__default__$k,props:tooltipV2Props,setup(le){const ie=toRefs(le),ue=reactive(pick(ie,Object.keys(tooltipV2ArrowProps))),de=reactive(pick(ie,Object.keys(tooltipV2ContentProps))),he=reactive(pick(ie,Object.keys(tooltipV2RootProps))),pe=reactive(pick(ie,Object.keys(tooltipV2TriggerProps)));return(_e,Ce)=>(openBlock(),createBlock(TooltipV2Root,normalizeProps(guardReactiveProps(he)),{default:withCtx(({open:xe})=>[createVNode(TooltipV2Trigger,mergeProps(pe,{nowrap:""}),{default:withCtx(()=>[renderSlot(_e.$slots,"trigger")]),_:3},16),createVNode(unref(ElTeleport),{to:_e.to,disabled:!_e.teleported},{default:withCtx(()=>[_e.fullTransition?(openBlock(),createBlock(Transition,normalizeProps(mergeProps({key:0},_e.transitionProps)),{default:withCtx(()=>[_e.alwaysOn||xe?(openBlock(),createBlock(TooltipV2Content,normalizeProps(mergeProps({key:0},de)),{arrow:withCtx(({style:Ie,side:$e})=>[_e.showArrow?(openBlock(),createBlock(TooltipV2Arrow,mergeProps({key:0},ue,{style:Ie,side:$e}),null,16,["style","side"])):createCommentVNode("v-if",!0)]),default:withCtx(()=>[renderSlot(_e.$slots,"default")]),_:3},16)):createCommentVNode("v-if",!0)]),_:2},1040)):(openBlock(),createElementBlock(Fragment,{key:1},[_e.alwaysOn||xe?(openBlock(),createBlock(TooltipV2Content,normalizeProps(mergeProps({key:0},de)),{arrow:withCtx(({style:Ie,side:$e})=>[_e.showArrow?(openBlock(),createBlock(TooltipV2Arrow,mergeProps({key:0},ue,{style:Ie,side:$e}),null,16,["style","side"])):createCommentVNode("v-if",!0)]),default:withCtx(()=>[renderSlot(_e.$slots,"default")]),_:3},16)):createCommentVNode("v-if",!0)],64))]),_:2},1032,["to","disabled"])]),_:3},16))}});var TooltipV2=_export_sfc$1(_sfc_main$F,[["__file","tooltip.vue"]]);const ElTooltipV2=withInstall(TooltipV2),LEFT_CHECK_CHANGE_EVENT="left-check-change",RIGHT_CHECK_CHANGE_EVENT="right-check-change",transferProps=buildProps({data:{type:definePropType(Array),default:()=>[]},titles:{type:definePropType(Array),default:()=>[]},buttonTexts:{type:definePropType(Array),default:()=>[]},filterPlaceholder:String,filterMethod:{type:definePropType(Function)},leftDefaultChecked:{type:definePropType(Array),default:()=>[]},rightDefaultChecked:{type:definePropType(Array),default:()=>[]},renderContent:{type:definePropType(Function)},modelValue:{type:definePropType(Array),default:()=>[]},format:{type:definePropType(Object),default:()=>({})},filterable:Boolean,props:{type:definePropType(Object),default:()=>mutable({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,values:["original","push","unshift"],default:"original"},validateEvent:{type:Boolean,default:!0}}),transferCheckedChangeFn=(le,oe)=>[le,oe].every(isArray$3)||isArray$3(le)&&isNil(oe),transferEmits={[CHANGE_EVENT]:(le,oe,ie)=>[le,ie].every(isArray$3)&&["left","right"].includes(oe),[UPDATE_MODEL_EVENT]:le=>isArray$3(le),[LEFT_CHECK_CHANGE_EVENT]:transferCheckedChangeFn,[RIGHT_CHECK_CHANGE_EVENT]:transferCheckedChangeFn},CHECKED_CHANGE_EVENT="checked-change",transferPanelProps=buildProps({data:transferProps.data,optionRender:{type:definePropType(Function)},placeholder:String,title:String,filterable:Boolean,format:transferProps.format,filterMethod:transferProps.filterMethod,defaultChecked:transferProps.leftDefaultChecked,props:transferProps.props}),transferPanelEmits={[CHECKED_CHANGE_EVENT]:transferCheckedChangeFn},usePropsAlias=le=>{const oe={label:"label",key:"key",disabled:"disabled"};return computed(()=>({...oe,...le.props}))},useCheck$1=(le,oe,ie)=>{const ue=usePropsAlias(le),de=computed(()=>le.data.filter(Ie=>isFunction$2(le.filterMethod)?le.filterMethod(oe.query,Ie):String(Ie[ue.value.label]||Ie[ue.value.key]).toLowerCase().includes(oe.query.toLowerCase()))),he=computed(()=>de.value.filter(Ie=>!Ie[ue.value.disabled])),pe=computed(()=>{const Ie=oe.checked.length,$e=le.data.length,{noChecked:Ne,hasChecked:Oe}=le.format;return Ne&&Oe?Ie>0?Oe.replace(/\${checked}/g,Ie.toString()).replace(/\${total}/g,$e.toString()):Ne.replace(/\${total}/g,$e.toString()):`${Ie}/${$e}`}),_e=computed(()=>{const Ie=oe.checked.length;return Ie>0&&Ie<he.value.length}),Ce=()=>{const Ie=he.value.map($e=>$e[ue.value.key]);oe.allChecked=Ie.length>0&&Ie.every($e=>oe.checked.includes($e))},xe=Ie=>{oe.checked=Ie?he.value.map($e=>$e[ue.value.key]):[]};return watch(()=>oe.checked,(Ie,$e)=>{if(Ce(),oe.checkChangeByUser){const Ne=Ie.concat($e).filter(Oe=>!Ie.includes(Oe)||!$e.includes(Oe));ie(CHECKED_CHANGE_EVENT,Ie,Ne)}else ie(CHECKED_CHANGE_EVENT,Ie),oe.checkChangeByUser=!0}),watch(he,()=>{Ce()}),watch(()=>le.data,()=>{const Ie=[],$e=de.value.map(Ne=>Ne[ue.value.key]);oe.checked.forEach(Ne=>{$e.includes(Ne)&&Ie.push(Ne)}),oe.checkChangeByUser=!1,oe.checked=Ie}),watch(()=>le.defaultChecked,(Ie,$e)=>{if($e&&Ie.length===$e.length&&Ie.every(Fe=>$e.includes(Fe)))return;const Ne=[],Oe=he.value.map(Fe=>Fe[ue.value.key]);Ie.forEach(Fe=>{Oe.includes(Fe)&&Ne.push(Fe)}),oe.checkChangeByUser=!1,oe.checked=Ne},{immediate:!0}),{filteredData:de,checkableData:he,checkedSummary:pe,isIndeterminate:_e,updateAllChecked:Ce,handleAllCheckedChange:xe}},useCheckedChange=(le,oe)=>({onSourceCheckedChange:(de,he)=>{le.leftChecked=de,he&&oe(LEFT_CHECK_CHANGE_EVENT,de,he)},onTargetCheckedChange:(de,he)=>{le.rightChecked=de,he&&oe(RIGHT_CHECK_CHANGE_EVENT,de,he)}}),useComputedData=le=>{const oe=usePropsAlias(le),ie=computed(()=>le.data.reduce((he,pe)=>(he[pe[oe.value.key]]=pe)&&he,{})),ue=computed(()=>le.data.filter(he=>!le.modelValue.includes(he[oe.value.key]))),de=computed(()=>le.targetOrder==="original"?le.data.filter(he=>le.modelValue.includes(he[oe.value.key])):le.modelValue.reduce((he,pe)=>{const _e=ie.value[pe];return _e&&he.push(_e),he},[]));return{sourceData:ue,targetData:de}},useMove=(le,oe,ie)=>{const ue=usePropsAlias(le),de=(_e,Ce,xe)=>{ie(UPDATE_MODEL_EVENT,_e),ie(CHANGE_EVENT,_e,Ce,xe)};return{addToLeft:()=>{const _e=le.modelValue.slice();oe.rightChecked.forEach(Ce=>{const xe=_e.indexOf(Ce);xe>-1&&_e.splice(xe,1)}),de(_e,"left",oe.rightChecked)},addToRight:()=>{let _e=le.modelValue.slice();const Ce=le.data.filter(xe=>{const Ie=xe[ue.value.key];return oe.leftChecked.includes(Ie)&&!le.modelValue.includes(Ie)}).map(xe=>xe[ue.value.key]);_e=le.targetOrder==="unshift"?Ce.concat(_e):_e.concat(Ce),le.targetOrder==="original"&&(_e=le.data.filter(xe=>_e.includes(xe[ue.value.key])).map(xe=>xe[ue.value.key])),de(_e,"right",oe.leftChecked)}}},__default__$j=defineComponent({name:"ElTransferPanel"}),_sfc_main$E=defineComponent({...__default__$j,props:transferPanelProps,emits:transferPanelEmits,setup(le,{expose:oe,emit:ie}){const ue=le,de=useSlots(),he=({option:qe})=>qe,{t:pe}=useLocale(),_e=useNamespace("transfer"),Ce=reactive({checked:[],allChecked:!1,query:"",checkChangeByUser:!0}),xe=usePropsAlias(ue),{filteredData:Ie,checkedSummary:$e,isIndeterminate:Ne,handleAllCheckedChange:Oe}=useCheck$1(ue,Ce,ie),Fe=computed(()=>!isEmpty(Ce.query)&&isEmpty(Ie.value)),Ve=computed(()=>!isEmpty(de.default()[0].children)),{checked:ze,allChecked:Ue,query:Pt}=toRefs(Ce);return oe({query:Pt}),(qe,Et)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(_e).b("panel"))},[createBaseVNode("p",{class:normalizeClass(unref(_e).be("panel","header"))},[createVNode(unref(ElCheckbox),{modelValue:unref(Ue),"onUpdate:modelValue":kt=>isRef(Ue)?Ue.value=kt:null,indeterminate:unref(Ne),"validate-event":!1,onChange:unref(Oe)},{default:withCtx(()=>[createTextVNode(toDisplayString(qe.title)+" ",1),createBaseVNode("span",null,toDisplayString(unref($e)),1)]),_:1},8,["modelValue","onUpdate:modelValue","indeterminate","onChange"])],2),createBaseVNode("div",{class:normalizeClass([unref(_e).be("panel","body"),unref(_e).is("with-footer",unref(Ve))])},[qe.filterable?(openBlock(),createBlock(unref(ElInput),{key:0,modelValue:unref(Pt),"onUpdate:modelValue":kt=>isRef(Pt)?Pt.value=kt:null,class:normalizeClass(unref(_e).be("panel","filter")),size:"default",placeholder:qe.placeholder,"prefix-icon":unref(search_default),clearable:"","validate-event":!1},null,8,["modelValue","onUpdate:modelValue","class","placeholder","prefix-icon"])):createCommentVNode("v-if",!0),withDirectives(createVNode(unref(ElCheckboxGroup$1),{modelValue:unref(ze),"onUpdate:modelValue":kt=>isRef(ze)?ze.value=kt:null,"validate-event":!1,class:normalizeClass([unref(_e).is("filterable",qe.filterable),unref(_e).be("panel","list")])},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Ie),kt=>(openBlock(),createBlock(unref(ElCheckbox),{key:kt[unref(xe).key],class:normalizeClass(unref(_e).be("panel","item")),value:kt[unref(xe).key],disabled:kt[unref(xe).disabled],"validate-event":!1},{default:withCtx(()=>{var At;return[createVNode(he,{option:(At=qe.optionRender)==null?void 0:At.call(qe,kt)},null,8,["option"])]}),_:2},1032,["class","value","disabled"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","class"]),[[vShow,!unref(Fe)&&!unref(isEmpty)(qe.data)]]),withDirectives(createBaseVNode("p",{class:normalizeClass(unref(_e).be("panel","empty"))},toDisplayString(unref(Fe)?unref(pe)("el.transfer.noMatch"):unref(pe)("el.transfer.noData")),3),[[vShow,unref(Fe)||unref(isEmpty)(qe.data)]])],2),unref(Ve)?(openBlock(),createElementBlock("p",{key:0,class:normalizeClass(unref(_e).be("panel","footer"))},[renderSlot(qe.$slots,"default")],2)):createCommentVNode("v-if",!0)],2))}});var TransferPanel=_export_sfc$1(_sfc_main$E,[["__file","transfer-panel.vue"]]);const __default__$i=defineComponent({name:"ElTransfer"}),_sfc_main$D=defineComponent({...__default__$i,props:transferProps,emits:transferEmits,setup(le,{expose:oe,emit:ie}){const ue=le,de=useSlots(),{t:he}=useLocale(),pe=useNamespace("transfer"),{formItem:_e}=useFormItem(),Ce=reactive({leftChecked:[],rightChecked:[]}),xe=usePropsAlias(ue),{sourceData:Ie,targetData:$e}=useComputedData(ue),{onSourceCheckedChange:Ne,onTargetCheckedChange:Oe}=useCheckedChange(Ce,ie),{addToLeft:Fe,addToRight:Ve}=useMove(ue,Ce,ie),ze=ref(),Ue=ref(),Pt=Lt=>{switch(Lt){case"left":ze.value.query="";break;case"right":Ue.value.query="";break}},qe=computed(()=>ue.buttonTexts.length===2),Et=computed(()=>ue.titles[0]||he("el.transfer.titles.0")),kt=computed(()=>ue.titles[1]||he("el.transfer.titles.1")),At=computed(()=>ue.filterPlaceholder||he("el.transfer.filterPlaceholder"));watch(()=>ue.modelValue,()=>{var Lt;ue.validateEvent&&((Lt=_e==null?void 0:_e.validate)==null||Lt.call(_e,"change").catch(jt=>void 0))});const Dt=computed(()=>Lt=>ue.renderContent?ue.renderContent(h$3,Lt):de.default?de.default({option:Lt}):h$3("span",Lt[xe.value.label]||Lt[xe.value.key]));return oe({clearQuery:Pt,leftPanel:ze,rightPanel:Ue}),(Lt,jt)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(pe).b())},[createVNode(TransferPanel,{ref_key:"leftPanel",ref:ze,data:unref(Ie),"option-render":unref(Dt),placeholder:unref(At),title:unref(Et),filterable:Lt.filterable,format:Lt.format,"filter-method":Lt.filterMethod,"default-checked":Lt.leftDefaultChecked,props:ue.props,onCheckedChange:unref(Ne)},{default:withCtx(()=>[renderSlot(Lt.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),createBaseVNode("div",{class:normalizeClass(unref(pe).e("buttons"))},[createVNode(unref(ElButton),{type:"primary",class:normalizeClass([unref(pe).e("button"),unref(pe).is("with-texts",unref(qe))]),disabled:unref(isEmpty)(Ce.rightChecked),onClick:unref(Fe)},{default:withCtx(()=>[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_left_default))]),_:1}),unref(isUndefined)(Lt.buttonTexts[0])?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("span",{key:0},toDisplayString(Lt.buttonTexts[0]),1))]),_:1},8,["class","disabled","onClick"]),createVNode(unref(ElButton),{type:"primary",class:normalizeClass([unref(pe).e("button"),unref(pe).is("with-texts",unref(qe))]),disabled:unref(isEmpty)(Ce.leftChecked),onClick:unref(Ve)},{default:withCtx(()=>[unref(isUndefined)(Lt.buttonTexts[1])?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("span",{key:0},toDisplayString(Lt.buttonTexts[1]),1)),createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1})]),_:1},8,["class","disabled","onClick"])],2),createVNode(TransferPanel,{ref_key:"rightPanel",ref:Ue,data:unref($e),"option-render":unref(Dt),placeholder:unref(At),filterable:Lt.filterable,format:Lt.format,"filter-method":Lt.filterMethod,title:unref(kt),"default-checked":Lt.rightDefaultChecked,props:ue.props,onCheckedChange:unref(Oe)},{default:withCtx(()=>[renderSlot(Lt.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2))}});var Transfer=_export_sfc$1(_sfc_main$D,[["__file","transfer.vue"]]);const ElTransfer=withInstall(Transfer),NODE_KEY="$treeNodeId",markNodeData=function(le,oe){!oe||oe[NODE_KEY]||Object.defineProperty(oe,NODE_KEY,{value:le.id,enumerable:!1,configurable:!1,writable:!1})},getNodeKey=function(le,oe){return le?oe[le]:oe[NODE_KEY]},handleCurrentChange=(le,oe,ie)=>{const ue=le.value.currentNode;ie();const de=le.value.currentNode;ue!==de&&oe("current-change",de?de.data:null,de)},getChildState=le=>{let oe=!0,ie=!0,ue=!0;for(let de=0,he=le.length;de<he;de++){const pe=le[de];(pe.checked!==!0||pe.indeterminate)&&(oe=!1,pe.disabled||(ue=!1)),(pe.checked!==!1||pe.indeterminate)&&(ie=!1)}return{all:oe,none:ie,allWithoutDisable:ue,half:!oe&&!ie}},reInitChecked=function(le){if(le.childNodes.length===0||le.loading)return;const{all:oe,none:ie,half:ue}=getChildState(le.childNodes);oe?(le.checked=!0,le.indeterminate=!1):ue?(le.checked=!1,le.indeterminate=!0):ie&&(le.checked=!1,le.indeterminate=!1);const de=le.parent;!de||de.level===0||le.store.checkStrictly||reInitChecked(de)},getPropertyFromData=function(le,oe){const ie=le.store.props,ue=le.data||{},de=ie[oe];if(typeof de=="function")return de(ue,le);if(typeof de=="string")return ue[de];if(typeof de>"u"){const he=ue[oe];return he===void 0?"":he}};let nodeIdSeed=0,Node$3=class fo{constructor(oe){this.id=nodeIdSeed++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const ie in oe)hasOwn$b(oe,ie)&&(this[ie]=oe[ie]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const oe=this.store;if(!oe)throw new Error("[Node]store is required!");oe.registerNode(this);const ie=oe.props;if(ie&&typeof ie.isLeaf<"u"){const he=getPropertyFromData(this,"isLeaf");typeof he=="boolean"&&(this.isLeafByUser=he)}if(oe.lazy!==!0&&this.data?(this.setData(this.data),oe.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&oe.lazy&&oe.defaultExpandAll&&!this.isLeafByUser&&this.expand(),Array.isArray(this.data)||markNodeData(this,this.data),!this.data)return;const ue=oe.defaultExpandedKeys,de=oe.key;de&&ue&&ue.includes(this.key)&&this.expand(null,oe.autoExpandParent),de&&oe.currentNodeKey!==void 0&&this.key===oe.currentNodeKey&&(oe.currentNode=this,oe.currentNode.isCurrent=!0),oe.lazy&&oe._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(oe){Array.isArray(oe)||markNodeData(this,oe),this.data=oe,this.childNodes=[];let ie;this.level===0&&Array.isArray(this.data)?ie=this.data:ie=getPropertyFromData(this,"children")||[];for(let ue=0,de=ie.length;ue<de;ue++)this.insertChild({data:ie[ue]})}get label(){return getPropertyFromData(this,"label")}get key(){const oe=this.store.key;return this.data?this.data[oe]:null}get disabled(){return getPropertyFromData(this,"disabled")}get nextSibling(){const oe=this.parent;if(oe){const ie=oe.childNodes.indexOf(this);if(ie>-1)return oe.childNodes[ie+1]}return null}get previousSibling(){const oe=this.parent;if(oe){const ie=oe.childNodes.indexOf(this);if(ie>-1)return ie>0?oe.childNodes[ie-1]:null}return null}contains(oe,ie=!0){return(this.childNodes||[]).some(ue=>ue===oe||ie&&ue.contains(oe))}remove(){const oe=this.parent;oe&&oe.removeChild(this)}insertChild(oe,ie,ue){if(!oe)throw new Error("InsertChild error: child is required.");if(!(oe instanceof fo)){if(!ue){const de=this.getChildren(!0);de.includes(oe.data)||(typeof ie>"u"||ie<0?de.push(oe.data):de.splice(ie,0,oe.data))}Object.assign(oe,{parent:this,store:this.store}),oe=reactive(new fo(oe)),oe instanceof fo&&oe.initialize()}oe.level=this.level+1,typeof ie>"u"||ie<0?this.childNodes.push(oe):this.childNodes.splice(ie,0,oe),this.updateLeafState()}insertBefore(oe,ie){let ue;ie&&(ue=this.childNodes.indexOf(ie)),this.insertChild(oe,ue)}insertAfter(oe,ie){let ue;ie&&(ue=this.childNodes.indexOf(ie),ue!==-1&&(ue+=1)),this.insertChild(oe,ue)}removeChild(oe){const ie=this.getChildren()||[],ue=ie.indexOf(oe.data);ue>-1&&ie.splice(ue,1);const de=this.childNodes.indexOf(oe);de>-1&&(this.store&&this.store.deregisterNode(oe),oe.parent=null,this.childNodes.splice(de,1)),this.updateLeafState()}removeChildByData(oe){let ie=null;for(let ue=0;ue<this.childNodes.length;ue++)if(this.childNodes[ue].data===oe){ie=this.childNodes[ue];break}ie&&this.removeChild(ie)}expand(oe,ie){const ue=()=>{if(ie){let de=this.parent;for(;de.level>0;)de.expanded=!0,de=de.parent}this.expanded=!0,oe&&oe(),this.childNodes.forEach(de=>{de.canFocus=!0})};this.shouldLoadData()?this.loadData(de=>{Array.isArray(de)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||reInitChecked(this),ue())}):ue()}doCreateChildren(oe,ie={}){oe.forEach(ue=>{this.insertChild(Object.assign({data:ue},ie),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(oe=>{oe.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const oe=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!oe||oe.length===0;return}this.isLeaf=!1}setChecked(oe,ie,ue,de){if(this.indeterminate=oe==="half",this.checked=oe===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:pe,allWithoutDisable:_e}=getChildState(this.childNodes);!this.isLeaf&&!pe&&_e&&(this.checked=!1,oe=!1);const Ce=()=>{if(ie){const xe=this.childNodes;for(let Ne=0,Oe=xe.length;Ne<Oe;Ne++){const Fe=xe[Ne];de=de||oe!==!1;const Ve=Fe.disabled?Fe.checked:de;Fe.setChecked(Ve,ie,!0,de)}const{half:Ie,all:$e}=getChildState(xe);$e||(this.checked=$e,this.indeterminate=Ie)}};if(this.shouldLoadData()){this.loadData(()=>{Ce(),reInitChecked(this)},{checked:oe!==!1});return}else Ce()}const he=this.parent;!he||he.level===0||ue||reInitChecked(he)}getChildren(oe=!1){if(this.level===0)return this.data;const ie=this.data;if(!ie)return null;const ue=this.store.props;let de="children";return ue&&(de=ue.children||"children"),ie[de]===void 0&&(ie[de]=null),oe&&!ie[de]&&(ie[de]=[]),ie[de]}updateChildren(){const oe=this.getChildren()||[],ie=this.childNodes.map(he=>he.data),ue={},de=[];oe.forEach((he,pe)=>{const _e=he[NODE_KEY];!!_e&&ie.findIndex(xe=>xe[NODE_KEY]===_e)>=0?ue[_e]={index:pe,data:he}:de.push({index:pe,data:he})}),this.store.lazy||ie.forEach(he=>{ue[he[NODE_KEY]]||this.removeChildByData(he)}),de.forEach(({index:he,data:pe})=>{this.insertChild({data:pe},he)}),this.updateLeafState()}loadData(oe,ie={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(ie).length)){this.loading=!0;const ue=he=>{this.childNodes=[],this.doCreateChildren(he,ie),this.loaded=!0,this.loading=!1,this.updateLeafState(),oe&&oe.call(this,he)},de=()=>{this.loading=!1};this.store.load(this,ue,de)}else oe&&oe.call(this)}eachNode(oe){const ie=[this];for(;ie.length;){const ue=ie.shift();ie.unshift(...ue.childNodes),oe(ue)}}reInitChecked(){this.store.checkStrictly||reInitChecked(this)}};class TreeStore{constructor(oe){this.currentNode=null,this.currentNodeKey=null;for(const ie in oe)hasOwn$b(oe,ie)&&(this[ie]=oe[ie]);this.nodesMap={}}initialize(){if(this.root=new Node$3({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const oe=this.load;oe(this.root,ie=>{this.root.doCreateChildren(ie),this._initDefaultCheckedNodes()})}else this._initDefaultCheckedNodes()}filter(oe){const ie=this.filterNodeMethod,ue=this.lazy,de=function(he){const pe=he.root?he.root.childNodes:he.childNodes;if(pe.forEach(_e=>{_e.visible=ie.call(_e,oe,_e.data,_e),de(_e)}),!he.visible&&pe.length){let _e=!0;_e=!pe.some(Ce=>Ce.visible),he.root?he.root.visible=_e===!1:he.visible=_e===!1}oe&&he.visible&&!he.isLeaf&&(!ue||he.loaded)&&he.expand()};de(this)}setData(oe){oe!==this.root.data?(this.nodesMap={},this.root.setData(oe),this._initDefaultCheckedNodes()):this.root.updateChildren()}getNode(oe){if(oe instanceof Node$3)return oe;const ie=isObject$d(oe)?getNodeKey(this.key,oe):oe;return this.nodesMap[ie]||null}insertBefore(oe,ie){const ue=this.getNode(ie);ue.parent.insertBefore({data:oe},ue)}insertAfter(oe,ie){const ue=this.getNode(ie);ue.parent.insertAfter({data:oe},ue)}remove(oe){const ie=this.getNode(oe);ie&&ie.parent&&(ie===this.currentNode&&(this.currentNode=null),ie.parent.removeChild(ie))}append(oe,ie){const ue=isPropAbsent(ie)?this.root:this.getNode(ie);ue&&ue.insertChild({data:oe})}_initDefaultCheckedNodes(){const oe=this.defaultCheckedKeys||[],ie=this.nodesMap;oe.forEach(ue=>{const de=ie[ue];de&&de.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(oe){(this.defaultCheckedKeys||[]).includes(oe.key)&&oe.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(oe){oe!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=oe,this._initDefaultCheckedNodes())}registerNode(oe){const ie=this.key;!oe||!oe.data||(ie?oe.key!==void 0&&(this.nodesMap[oe.key]=oe):this.nodesMap[oe.id]=oe)}deregisterNode(oe){!this.key||!oe||!oe.data||(oe.childNodes.forEach(ue=>{this.deregisterNode(ue)}),delete this.nodesMap[oe.key])}getCheckedNodes(oe=!1,ie=!1){const ue=[],de=function(he){(he.root?he.root.childNodes:he.childNodes).forEach(_e=>{(_e.checked||ie&&_e.indeterminate)&&(!oe||oe&&_e.isLeaf)&&ue.push(_e.data),de(_e)})};return de(this),ue}getCheckedKeys(oe=!1){return this.getCheckedNodes(oe).map(ie=>(ie||{})[this.key])}getHalfCheckedNodes(){const oe=[],ie=function(ue){(ue.root?ue.root.childNodes:ue.childNodes).forEach(he=>{he.indeterminate&&oe.push(he.data),ie(he)})};return ie(this),oe}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(oe=>(oe||{})[this.key])}_getAllNodes(){const oe=[],ie=this.nodesMap;for(const ue in ie)hasOwn$b(ie,ue)&&oe.push(ie[ue]);return oe}updateChildren(oe,ie){const ue=this.nodesMap[oe];if(!ue)return;const de=ue.childNodes;for(let he=de.length-1;he>=0;he--){const pe=de[he];this.remove(pe.data)}for(let he=0,pe=ie.length;he<pe;he++){const _e=ie[he];this.append(_e,ue.data)}}_setCheckedKeys(oe,ie=!1,ue){const de=this._getAllNodes().sort((Ce,xe)=>Ce.level-xe.level),he=Object.create(null),pe=Object.keys(ue);de.forEach(Ce=>Ce.setChecked(!1,!1));const _e=Ce=>{Ce.childNodes.forEach(xe=>{var Ie;he[xe.data[oe]]=!0,(Ie=xe.childNodes)!=null&&Ie.length&&_e(xe)})};for(let Ce=0,xe=de.length;Ce<xe;Ce++){const Ie=de[Ce],$e=Ie.data[oe].toString();if(!pe.includes($e)){Ie.checked&&!he[$e]&&Ie.setChecked(!1,!1);continue}if(Ie.childNodes.length&&_e(Ie),Ie.isLeaf||this.checkStrictly){Ie.setChecked(!0,!1);continue}if(Ie.setChecked(!0,!0),ie){Ie.setChecked(!1,!1);const Oe=function(Fe){Fe.childNodes.forEach(ze=>{ze.isLeaf||ze.setChecked(!1,!1),Oe(ze)})};Oe(Ie)}}}setCheckedNodes(oe,ie=!1){const ue=this.key,de={};oe.forEach(he=>{de[(he||{})[ue]]=!0}),this._setCheckedKeys(ue,ie,de)}setCheckedKeys(oe,ie=!1){this.defaultCheckedKeys=oe;const ue=this.key,de={};oe.forEach(he=>{de[he]=!0}),this._setCheckedKeys(ue,ie,de)}setDefaultExpandedKeys(oe){oe=oe||[],this.defaultExpandedKeys=oe,oe.forEach(ie=>{const ue=this.getNode(ie);ue&&ue.expand(null,this.autoExpandParent)})}setChecked(oe,ie,ue){const de=this.getNode(oe);de&&de.setChecked(!!ie,ue)}getCurrentNode(){return this.currentNode}setCurrentNode(oe){const ie=this.currentNode;ie&&(ie.isCurrent=!1),this.currentNode=oe,this.currentNode.isCurrent=!0}setUserCurrentNode(oe,ie=!0){const ue=oe[this.key],de=this.nodesMap[ue];this.setCurrentNode(de),ie&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(oe,ie=!0){if(oe==null){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const ue=this.getNode(oe);ue&&(this.setCurrentNode(ue),ie&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const _sfc_main$C=defineComponent({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(le){const oe=useNamespace("tree"),ie=inject("NodeInstance"),ue=inject("RootTree");return()=>{const de=le.node,{data:he,store:pe}=de;return le.renderContent?le.renderContent(h$3,{_self:ie,node:de,data:he,store:pe}):renderSlot(ue.ctx.slots,"default",{node:de,data:he},()=>[h$3("span",{class:oe.be("node","label")},[de.label])])}}});var NodeContent=_export_sfc$1(_sfc_main$C,[["__file","tree-node-content.vue"]]);function useNodeExpandEventBroadcast(le){const oe=inject("TreeNodeMap",null),ie={treeNodeExpand:ue=>{le.node!==ue&&le.node.collapse()},children:[]};return oe&&oe.children.push(ie),provide("TreeNodeMap",ie),{broadcastExpanded:ue=>{if(le.accordion)for(const de of ie.children)de.treeNodeExpand(ue)}}}const dragEventsKey=Symbol("dragEvents");function useDragNodeHandler({props:le,ctx:oe,el$:ie,dropIndicator$:ue,store:de}){const he=useNamespace("tree"),pe=ref({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return provide(dragEventsKey,{treeNodeDragStart:({event:Ie,treeNode:$e})=>{if(typeof le.allowDrag=="function"&&!le.allowDrag($e.node))return Ie.preventDefault(),!1;Ie.dataTransfer.effectAllowed="move";try{Ie.dataTransfer.setData("text/plain","")}catch{}pe.value.draggingNode=$e,oe.emit("node-drag-start",$e.node,Ie)},treeNodeDragOver:({event:Ie,treeNode:$e})=>{const Ne=$e,Oe=pe.value.dropNode;Oe&&Oe.node.id!==Ne.node.id&&removeClass(Oe.$el,he.is("drop-inner"));const Fe=pe.value.draggingNode;if(!Fe||!Ne)return;let Ve=!0,ze=!0,Ue=!0,Pt=!0;typeof le.allowDrop=="function"&&(Ve=le.allowDrop(Fe.node,Ne.node,"prev"),Pt=ze=le.allowDrop(Fe.node,Ne.node,"inner"),Ue=le.allowDrop(Fe.node,Ne.node,"next")),Ie.dataTransfer.dropEffect=ze||Ve||Ue?"move":"none",(Ve||ze||Ue)&&(Oe==null?void 0:Oe.node.id)!==Ne.node.id&&(Oe&&oe.emit("node-drag-leave",Fe.node,Oe.node,Ie),oe.emit("node-drag-enter",Fe.node,Ne.node,Ie)),Ve||ze||Ue?pe.value.dropNode=Ne:pe.value.dropNode=null,Ne.node.nextSibling===Fe.node&&(Ue=!1),Ne.node.previousSibling===Fe.node&&(Ve=!1),Ne.node.contains(Fe.node,!1)&&(ze=!1),(Fe.node===Ne.node||Fe.node.contains(Ne.node))&&(Ve=!1,ze=!1,Ue=!1);const qe=Ne.$el.querySelector(`.${he.be("node","content")}`).getBoundingClientRect(),Et=ie.value.getBoundingClientRect();let kt;const At=Ve?ze?.25:Ue?.45:1:-1,Dt=Ue?ze?.75:Ve?.55:0:1;let Lt=-9999;const jt=Ie.clientY-qe.top;jt<qe.height*At?kt="before":jt>qe.height*Dt?kt="after":ze?kt="inner":kt="none";const _n=Ne.$el.querySelector(`.${he.be("node","expand-icon")}`).getBoundingClientRect(),bn=ue.value;kt==="before"?Lt=_n.top-Et.top:kt==="after"&&(Lt=_n.bottom-Et.top),bn.style.top=`${Lt}px`,bn.style.left=`${_n.right-Et.left}px`,kt==="inner"?addClass(Ne.$el,he.is("drop-inner")):removeClass(Ne.$el,he.is("drop-inner")),pe.value.showDropIndicator=kt==="before"||kt==="after",pe.value.allowDrop=pe.value.showDropIndicator||Pt,pe.value.dropType=kt,oe.emit("node-drag-over",Fe.node,Ne.node,Ie)},treeNodeDragEnd:Ie=>{const{draggingNode:$e,dropType:Ne,dropNode:Oe}=pe.value;if(Ie.preventDefault(),Ie.dataTransfer&&(Ie.dataTransfer.dropEffect="move"),$e&&Oe){const Fe={data:$e.node.data};Ne!=="none"&&$e.node.remove(),Ne==="before"?Oe.node.parent.insertBefore(Fe,Oe.node):Ne==="after"?Oe.node.parent.insertAfter(Fe,Oe.node):Ne==="inner"&&Oe.node.insertChild(Fe),Ne!=="none"&&(de.value.registerNode(Fe),de.value.key&&$e.node.eachNode(Ve=>{var ze;(ze=de.value.nodesMap[Ve.data[de.value.key]])==null||ze.setChecked(Ve.checked,!de.value.checkStrictly)})),removeClass(Oe.$el,he.is("drop-inner")),oe.emit("node-drag-end",$e.node,Oe.node,Ne,Ie),Ne!=="none"&&oe.emit("node-drop",$e.node,Oe.node,Ne,Ie)}$e&&!Oe&&oe.emit("node-drag-end",$e.node,null,Ne,Ie),pe.value.showDropIndicator=!1,pe.value.draggingNode=null,pe.value.dropNode=null,pe.value.allowDrop=!0}}),{dragState:pe}}const _sfc_main$B=defineComponent({name:"ElTreeNode",components:{ElCollapseTransition,ElCheckbox,NodeContent,ElIcon,Loading:loading_default},props:{node:{type:Node$3,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(le,oe){const ie=useNamespace("tree"),{broadcastExpanded:ue}=useNodeExpandEventBroadcast(le),de=inject("RootTree"),he=ref(!1),pe=ref(!1),_e=ref(null),Ce=ref(null),xe=ref(null),Ie=inject(dragEventsKey),$e=getCurrentInstance();provide("NodeInstance",$e),le.node.expanded&&(he.value=!0,pe.value=!0);const Ne=de.props.props.children||"children";watch(()=>{const jt=le.node.data[Ne];return jt&&[...jt]},()=>{le.node.updateChildren()}),watch(()=>le.node.indeterminate,jt=>{Ve(le.node.checked,jt)}),watch(()=>le.node.checked,jt=>{Ve(jt,le.node.indeterminate)}),watch(()=>le.node.childNodes.length,()=>le.node.reInitChecked()),watch(()=>le.node.expanded,jt=>{nextTick(()=>he.value=jt),jt&&(pe.value=!0)});const Oe=jt=>getNodeKey(de.props.nodeKey,jt.data),Fe=jt=>{const _n=le.props.class;if(!_n)return{};let bn;if(isFunction$2(_n)){const{data:vn}=jt;bn=_n(vn,jt)}else bn=_n;return isString$1(bn)?{[bn]:!0}:bn},Ve=(jt,_n)=>{(_e.value!==jt||Ce.value!==_n)&&de.ctx.emit("check-change",le.node.data,jt,_n),_e.value=jt,Ce.value=_n},ze=jt=>{handleCurrentChange(de.store,de.ctx.emit,()=>de.store.value.setCurrentNode(le.node)),de.currentNode.value=le.node,de.props.expandOnClickNode&&Pt(),de.props.checkOnClickNode&&!le.node.disabled&&qe(null,{target:{checked:!le.node.checked}}),de.ctx.emit("node-click",le.node.data,le.node,$e,jt)},Ue=jt=>{de.instance.vnode.props.onNodeContextmenu&&(jt.stopPropagation(),jt.preventDefault()),de.ctx.emit("node-contextmenu",jt,le.node.data,le.node,$e)},Pt=()=>{le.node.isLeaf||(he.value?(de.ctx.emit("node-collapse",le.node.data,le.node,$e),le.node.collapse()):le.node.expand(()=>{oe.emit("node-expand",le.node.data,le.node,$e)}))},qe=(jt,_n)=>{le.node.setChecked(_n.target.checked,!de.props.checkStrictly),nextTick(()=>{const bn=de.store.value;de.ctx.emit("check",le.node.data,{checkedNodes:bn.getCheckedNodes(),checkedKeys:bn.getCheckedKeys(),halfCheckedNodes:bn.getHalfCheckedNodes(),halfCheckedKeys:bn.getHalfCheckedKeys()})})};return{ns:ie,node$:xe,tree:de,expanded:he,childNodeRendered:pe,oldChecked:_e,oldIndeterminate:Ce,getNodeKey:Oe,getNodeClass:Fe,handleSelectChange:Ve,handleClick:ze,handleContextMenu:Ue,handleExpandIconClick:Pt,handleCheckChange:qe,handleChildNodeExpand:(jt,_n,bn)=>{ue(_n),de.ctx.emit("node-expand",jt,_n,bn)},handleDragStart:jt=>{de.props.draggable&&Ie.treeNodeDragStart({event:jt,treeNode:le})},handleDragOver:jt=>{jt.preventDefault(),de.props.draggable&&Ie.treeNodeDragOver({event:jt,treeNode:{$el:xe.value,node:le.node}})},handleDrop:jt=>{jt.preventDefault()},handleDragEnd:jt=>{de.props.draggable&&Ie.treeNodeDragEnd(jt)},CaretRight:caret_right_default}}});function _sfc_render$2(le,oe,ie,ue,de,he){const pe=resolveComponent("el-icon"),_e=resolveComponent("el-checkbox"),Ce=resolveComponent("loading"),xe=resolveComponent("node-content"),Ie=resolveComponent("el-tree-node"),$e=resolveComponent("el-collapse-transition");return withDirectives((openBlock(),createElementBlock("div",{ref:"node$",class:normalizeClass([le.ns.b("node"),le.ns.is("expanded",le.expanded),le.ns.is("current",le.node.isCurrent),le.ns.is("hidden",!le.node.visible),le.ns.is("focusable",!le.node.disabled),le.ns.is("checked",!le.node.disabled&&le.node.checked),le.getNodeClass(le.node)]),role:"treeitem",tabindex:"-1","aria-expanded":le.expanded,"aria-disabled":le.node.disabled,"aria-checked":le.node.checked,draggable:le.tree.props.draggable,"data-key":le.getNodeKey(le.node),onClick:withModifiers(le.handleClick,["stop"]),onContextmenu:le.handleContextMenu,onDragstart:withModifiers(le.handleDragStart,["stop"]),onDragover:withModifiers(le.handleDragOver,["stop"]),onDragend:withModifiers(le.handleDragEnd,["stop"]),onDrop:withModifiers(le.handleDrop,["stop"])},[createBaseVNode("div",{class:normalizeClass(le.ns.be("node","content")),style:normalizeStyle({paddingLeft:(le.node.level-1)*le.tree.props.indent+"px"})},[le.tree.props.icon||le.CaretRight?(openBlock(),createBlock(pe,{key:0,class:normalizeClass([le.ns.be("node","expand-icon"),le.ns.is("leaf",le.node.isLeaf),{expanded:!le.node.isLeaf&&le.expanded}]),onClick:withModifiers(le.handleExpandIconClick,["stop"])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(le.tree.props.icon||le.CaretRight)))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0),le.showCheckbox?(openBlock(),createBlock(_e,{key:1,"model-value":le.node.checked,indeterminate:le.node.indeterminate,disabled:!!le.node.disabled,onClick:withModifiers(()=>{},["stop"]),onChange:le.handleCheckChange},null,8,["model-value","indeterminate","disabled","onClick","onChange"])):createCommentVNode("v-if",!0),le.node.loading?(openBlock(),createBlock(pe,{key:2,class:normalizeClass([le.ns.be("node","loading-icon"),le.ns.is("loading")])},{default:withCtx(()=>[createVNode(Ce)]),_:1},8,["class"])):createCommentVNode("v-if",!0),createVNode(xe,{node:le.node,"render-content":le.renderContent},null,8,["node","render-content"])],6),createVNode($e,null,{default:withCtx(()=>[!le.renderAfterExpand||le.childNodeRendered?withDirectives((openBlock(),createElementBlock("div",{key:0,class:normalizeClass(le.ns.be("node","children")),role:"group","aria-expanded":le.expanded},[(openBlock(!0),createElementBlock(Fragment,null,renderList(le.node.childNodes,Ne=>(openBlock(),createBlock(Ie,{key:le.getNodeKey(Ne),"render-content":le.renderContent,"render-after-expand":le.renderAfterExpand,"show-checkbox":le.showCheckbox,node:Ne,accordion:le.accordion,props:le.props,onNodeExpand:le.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,["aria-expanded"])),[[vShow,le.expanded]]):createCommentVNode("v-if",!0)]),_:1})],42,["aria-expanded","aria-disabled","aria-checked","draggable","data-key","onClick","onContextmenu","onDragstart","onDragover","onDragend","onDrop"])),[[vShow,le.node.visible]])}var ElTreeNode$1=_export_sfc$1(_sfc_main$B,[["render",_sfc_render$2],["__file","tree-node.vue"]]);function useKeydown({el$:le},oe){const ie=useNamespace("tree"),ue=shallowRef([]),de=shallowRef([]);onMounted(()=>{pe()}),onUpdated(()=>{ue.value=Array.from(le.value.querySelectorAll("[role=treeitem]")),de.value=Array.from(le.value.querySelectorAll("input[type=checkbox]"))}),watch(de,_e=>{_e.forEach(Ce=>{Ce.setAttribute("tabindex","-1")})}),useEventListener(le,"keydown",_e=>{const Ce=_e.target;if(!Ce.className.includes(ie.b("node")))return;const xe=_e.code;ue.value=Array.from(le.value.querySelectorAll(`.${ie.is("focusable")}[role=treeitem]`));const Ie=ue.value.indexOf(Ce);let $e;if([EVENT_CODE.up,EVENT_CODE.down].includes(xe)){if(_e.preventDefault(),xe===EVENT_CODE.up){$e=Ie===-1?0:Ie!==0?Ie-1:ue.value.length-1;const Oe=$e;for(;!oe.value.getNode(ue.value[$e].dataset.key).canFocus;){if($e--,$e===Oe){$e=-1;break}$e<0&&($e=ue.value.length-1)}}else{$e=Ie===-1?0:Ie<ue.value.length-1?Ie+1:0;const Oe=$e;for(;!oe.value.getNode(ue.value[$e].dataset.key).canFocus;){if($e++,$e===Oe){$e=-1;break}$e>=ue.value.length&&($e=0)}}$e!==-1&&ue.value[$e].focus()}[EVENT_CODE.left,EVENT_CODE.right].includes(xe)&&(_e.preventDefault(),Ce.click());const Ne=Ce.querySelector('[type="checkbox"]');[EVENT_CODE.enter,EVENT_CODE.space].includes(xe)&&Ne&&(_e.preventDefault(),Ne.click())});const pe=()=>{var _e;ue.value=Array.from(le.value.querySelectorAll(`.${ie.is("focusable")}[role=treeitem]`)),de.value=Array.from(le.value.querySelectorAll("input[type=checkbox]"));const Ce=le.value.querySelectorAll(`.${ie.is("checked")}[role=treeitem]`);if(Ce.length){Ce[0].setAttribute("tabindex","0");return}(_e=ue.value[0])==null||_e.setAttribute("tabindex","0")}}const _sfc_main$A=defineComponent({name:"ElTree",components:{ElTreeNode:ElTreeNode$1},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:iconPropType}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(le,oe){const{t:ie}=useLocale(),ue=useNamespace("tree"),de=inject(selectKey,null),he=ref(new TreeStore({key:le.nodeKey,data:le.data,lazy:le.lazy,props:le.props,load:le.load,currentNodeKey:le.currentNodeKey,checkStrictly:le.checkStrictly,checkDescendants:le.checkDescendants,defaultCheckedKeys:le.defaultCheckedKeys,defaultExpandedKeys:le.defaultExpandedKeys,autoExpandParent:le.autoExpandParent,defaultExpandAll:le.defaultExpandAll,filterNodeMethod:le.filterNodeMethod}));he.value.initialize();const pe=ref(he.value.root),_e=ref(null),Ce=ref(null),xe=ref(null),{broadcastExpanded:Ie}=useNodeExpandEventBroadcast(le),{dragState:$e}=useDragNodeHandler({props:le,ctx:oe,el$:Ce,dropIndicator$:xe,store:he});useKeydown({el$:Ce},he);const Ne=computed(()=>{const{childNodes:In}=pe.value,En=de?de.hasFilteredOptions!==0:!1;return(!In||In.length===0||In.every(({visible:xn})=>!xn))&&!En});watch(()=>le.currentNodeKey,In=>{he.value.setCurrentNodeKey(In)}),watch(()=>le.defaultCheckedKeys,In=>{he.value.setDefaultCheckedKey(In)}),watch(()=>le.defaultExpandedKeys,In=>{he.value.setDefaultExpandedKeys(In)}),watch(()=>le.data,In=>{he.value.setData(In)},{deep:!0}),watch(()=>le.checkStrictly,In=>{he.value.checkStrictly=In});const Oe=In=>{if(!le.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");he.value.filter(In)},Fe=In=>getNodeKey(le.nodeKey,In.data),Ve=In=>{if(!le.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const En=he.value.getNode(In);if(!En)return[];const xn=[En.data];let kn=En.parent;for(;kn&&kn!==pe.value;)xn.push(kn.data),kn=kn.parent;return xn.reverse()},ze=(In,En)=>he.value.getCheckedNodes(In,En),Ue=In=>he.value.getCheckedKeys(In),Pt=()=>{const In=he.value.getCurrentNode();return In?In.data:null},qe=()=>{if(!le.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const In=Pt();return In?In[le.nodeKey]:null},Et=(In,En)=>{if(!le.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");he.value.setCheckedNodes(In,En)},kt=(In,En)=>{if(!le.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");he.value.setCheckedKeys(In,En)},At=(In,En,xn)=>{he.value.setChecked(In,En,xn)},Dt=()=>he.value.getHalfCheckedNodes(),Lt=()=>he.value.getHalfCheckedKeys(),jt=(In,En=!0)=>{if(!le.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");handleCurrentChange(he,oe.emit,()=>{Ie(In),he.value.setUserCurrentNode(In,En)})},_n=(In,En=!0)=>{if(!le.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");handleCurrentChange(he,oe.emit,()=>{Ie(),he.value.setCurrentNodeKey(In,En)})},bn=In=>he.value.getNode(In),vn=In=>{he.value.remove(In)},Tn=(In,En)=>{he.value.append(In,En)},$n=(In,En)=>{he.value.insertBefore(In,En)},wn=(In,En)=>{he.value.insertAfter(In,En)},Cn=(In,En,xn)=>{Ie(En),oe.emit("node-expand",In,En,xn)},Sn=(In,En)=>{if(!le.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");he.value.updateChildren(In,En)};return provide("RootTree",{ctx:oe,props:le,store:he,root:pe,currentNode:_e,instance:getCurrentInstance()}),provide(formItemContextKey,void 0),{ns:ue,store:he,root:pe,currentNode:_e,dragState:$e,el$:Ce,dropIndicator$:xe,isEmpty:Ne,filter:Oe,getNodeKey:Fe,getNodePath:Ve,getCheckedNodes:ze,getCheckedKeys:Ue,getCurrentNode:Pt,getCurrentKey:qe,setCheckedNodes:Et,setCheckedKeys:kt,setChecked:At,getHalfCheckedNodes:Dt,getHalfCheckedKeys:Lt,setCurrentNode:jt,setCurrentKey:_n,t:ie,getNode:bn,remove:vn,append:Tn,insertBefore:$n,insertAfter:wn,handleNodeExpand:Cn,updateKeyChildren:Sn}}});function _sfc_render$1(le,oe,ie,ue,de,he){const pe=resolveComponent("el-tree-node");return openBlock(),createElementBlock("div",{ref:"el$",class:normalizeClass([le.ns.b(),le.ns.is("dragging",!!le.dragState.draggingNode),le.ns.is("drop-not-allow",!le.dragState.allowDrop),le.ns.is("drop-inner",le.dragState.dropType==="inner"),{[le.ns.m("highlight-current")]:le.highlightCurrent}]),role:"tree"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(le.root.childNodes,_e=>(openBlock(),createBlock(pe,{key:le.getNodeKey(_e),node:_e,props:le.props,accordion:le.accordion,"render-after-expand":le.renderAfterExpand,"show-checkbox":le.showCheckbox,"render-content":le.renderContent,onNodeExpand:le.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),le.isEmpty?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(le.ns.e("empty-block"))},[renderSlot(le.$slots,"empty",{},()=>{var _e;return[createBaseVNode("span",{class:normalizeClass(le.ns.e("empty-text"))},toDisplayString((_e=le.emptyText)!=null?_e:le.t("el.tree.emptyText")),3)]})],2)):createCommentVNode("v-if",!0),withDirectives(createBaseVNode("div",{ref:"dropIndicator$",class:normalizeClass(le.ns.e("drop-indicator"))},null,2),[[vShow,le.dragState.showDropIndicator]])],2)}var Tree$1=_export_sfc$1(_sfc_main$A,[["render",_sfc_render$1],["__file","tree.vue"]]);const ElTree=withInstall(Tree$1),useSelect=(le,{attrs:oe,emit:ie},{select:ue,tree:de,key:he})=>{const pe=useNamespace("tree-select");return watch(()=>le.data,()=>{le.filterable&&nextTick(()=>{var Ce,xe;(xe=de.value)==null||xe.filter((Ce=ue.value)==null?void 0:Ce.states.inputValue)})},{flush:"post"}),{...pick(toRefs(le),Object.keys(ElSelect.props)),...oe,"onUpdate:modelValue":Ce=>ie(UPDATE_MODEL_EVENT,Ce),valueKey:he,popperClass:computed(()=>{const Ce=[pe.e("popper")];return le.popperClass&&Ce.push(le.popperClass),Ce.join(" ")}),filterMethod:(Ce="")=>{var xe;le.filterMethod?le.filterMethod(Ce):le.remoteMethod?le.remoteMethod(Ce):(xe=de.value)==null||xe.filter(Ce)}}},component=defineComponent({extends:ElOption,setup(le,oe){const ie=ElOption.setup(le,oe);delete ie.selectOptionClick;const ue=getCurrentInstance().proxy;return nextTick(()=>{ie.select.states.cachedOptions.get(ue.value)||ie.select.onOptionCreate(ue)}),watch(()=>oe.attrs.visible,de=>{ie.states.visible=de},{immediate:!0}),ie},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function isValidValue(le){return le||le===0}function isValidArray(le){return Array.isArray(le)&&le.length}function toValidArray(le){return Array.isArray(le)?le:isValidValue(le)?[le]:[]}function treeFind(le,oe,ie,ue,de){for(let he=0;he<le.length;he++){const pe=le[he];if(oe(pe,he,le,de))return ue?ue(pe,he,le,de):pe;{const _e=ie(pe);if(isValidArray(_e)){const Ce=treeFind(_e,oe,ie,ue,pe);if(Ce)return Ce}}}}function treeEach(le,oe,ie,ue){for(let de=0;de<le.length;de++){const he=le[de];oe(he,de,le,ue);const pe=ie(he);isValidArray(pe)&&treeEach(pe,oe,ie,he)}}const useTree$1=(le,{attrs:oe,slots:ie,emit:ue},{select:de,tree:he,key:pe})=>{watch(()=>le.modelValue,()=>{le.showCheckbox&&nextTick(()=>{const Ne=he.value;Ne&&!isEqual$1(Ne.getCheckedKeys(),toValidArray(le.modelValue))&&Ne.setCheckedKeys(toValidArray(le.modelValue))})},{immediate:!0,deep:!0});const _e=computed(()=>({value:pe.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...le.props})),Ce=(Ne,Oe)=>{var Fe;const Ve=_e.value[Ne];return isFunction$2(Ve)?Ve(Oe,(Fe=he.value)==null?void 0:Fe.getNode(Ce("value",Oe))):Oe[Ve]},xe=toValidArray(le.modelValue).map(Ne=>treeFind(le.data||[],Oe=>Ce("value",Oe)===Ne,Oe=>Ce("children",Oe),(Oe,Fe,Ve,ze)=>ze&&Ce("value",ze))).filter(Ne=>isValidValue(Ne)),Ie=computed(()=>{if(!le.renderAfterExpand&&!le.lazy)return[];const Ne=[];return treeEach(le.data.concat(le.cacheData),Oe=>{const Fe=Ce("value",Oe);Ne.push({value:Fe,currentLabel:Ce("label",Oe),isDisabled:Ce("disabled",Oe)})},Oe=>Ce("children",Oe)),Ne}),$e=()=>{var Ne;return(Ne=he.value)==null?void 0:Ne.getCheckedKeys().filter(Oe=>{var Fe;const Ve=(Fe=he.value)==null?void 0:Fe.getNode(Oe);return!isNil(Ve)&&isEmpty(Ve.childNodes)})};return{...pick(toRefs(le),Object.keys(ElTree.props)),...oe,nodeKey:pe,expandOnClickNode:computed(()=>!le.checkStrictly&&le.expandOnClickNode),defaultExpandedKeys:computed(()=>le.defaultExpandedKeys?le.defaultExpandedKeys.concat(xe):xe),renderContent:(Ne,{node:Oe,data:Fe,store:Ve})=>Ne(component,{value:Ce("value",Fe),label:Ce("label",Fe),disabled:Ce("disabled",Fe),visible:Oe.visible},le.renderContent?()=>le.renderContent(Ne,{node:Oe,data:Fe,store:Ve}):ie.default?()=>ie.default({node:Oe,data:Fe,store:Ve}):void 0),filterNodeMethod:(Ne,Oe,Fe)=>le.filterNodeMethod?le.filterNodeMethod(Ne,Oe,Fe):Ne?new RegExp(escapeStringRegexp(Ne),"i").test(Ce("label",Oe)||""):!0,onNodeClick:(Ne,Oe,Fe)=>{var Ve,ze,Ue,Pt;if((Ve=oe.onNodeClick)==null||Ve.call(oe,Ne,Oe,Fe),!(le.showCheckbox&&le.checkOnClickNode)){if(!le.showCheckbox&&(le.checkStrictly||Oe.isLeaf)){if(!Ce("disabled",Ne)){const qe=(ze=de.value)==null?void 0:ze.states.options.get(Ce("value",Ne));(Ue=de.value)==null||Ue.handleOptionSelect(qe)}}else le.expandOnClickNode&&Fe.proxy.handleExpandIconClick();(Pt=de.value)==null||Pt.focus()}},onCheck:(Ne,Oe)=>{var Fe;if(!le.showCheckbox)return;const Ve=Ce("value",Ne),ze={};treeEach([he.value.store.root],Et=>ze[Et.key]=Et,Et=>Et.childNodes);const Ue=Oe.checkedKeys,Pt=le.multiple?toValidArray(le.modelValue).filter(Et=>!(Et in ze)&&!Ue.includes(Et)):[],qe=Pt.concat(Ue);if(le.checkStrictly)ue(UPDATE_MODEL_EVENT,le.multiple?qe:qe.includes(Ve)?Ve:void 0);else if(le.multiple){const Et=$e();ue(UPDATE_MODEL_EVENT,Pt.concat(Et))}else{const Et=treeFind([Ne],Dt=>!isValidArray(Ce("children",Dt))&&!Ce("disabled",Dt),Dt=>Ce("children",Dt)),kt=Et?Ce("value",Et):void 0,At=isValidValue(le.modelValue)&&!!treeFind([Ne],Dt=>Ce("value",Dt)===le.modelValue,Dt=>Ce("children",Dt));ue(UPDATE_MODEL_EVENT,kt===le.modelValue||At?void 0:kt)}nextTick(()=>{var Et;const kt=toValidArray(le.modelValue);he.value.setCheckedKeys(kt),(Et=oe.onCheck)==null||Et.call(oe,Ne,{checkedKeys:he.value.getCheckedKeys(),checkedNodes:he.value.getCheckedNodes(),halfCheckedKeys:he.value.getHalfCheckedKeys(),halfCheckedNodes:he.value.getHalfCheckedNodes()})}),(Fe=de.value)==null||Fe.focus()},onNodeExpand:(Ne,Oe,Fe)=>{var Ve;(Ve=oe.onNodeExpand)==null||Ve.call(oe,Ne,Oe,Fe),nextTick(()=>{if(!le.checkStrictly&&le.lazy&&le.multiple&&Oe.checked){const ze={},Ue=he.value.getCheckedKeys();treeEach([he.value.store.root],Et=>ze[Et.key]=Et,Et=>Et.childNodes);const Pt=toValidArray(le.modelValue).filter(Et=>!(Et in ze)&&!Ue.includes(Et)),qe=$e();ue(UPDATE_MODEL_EVENT,Pt.concat(qe))}})},cacheOptions:Ie}};var CacheOptions=defineComponent({props:{data:{type:Array,default:()=>[]}},setup(le){const oe=inject(selectKey);return watch(()=>le.data,()=>{var ie;le.data.forEach(de=>{oe.states.cachedOptions.has(de.value)||oe.states.cachedOptions.set(de.value,de)});const ue=((ie=oe.selectRef)==null?void 0:ie.querySelectorAll("input"))||[];isClient&&!Array.from(ue).includes(document.activeElement)&&oe.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const _sfc_main$z=defineComponent({name:"ElTreeSelect",inheritAttrs:!1,props:{...ElSelect.props,...ElTree.props,cacheData:{type:Array,default:()=>[]}},setup(le,oe){const{slots:ie,expose:ue}=oe,de=ref(),he=ref(),pe=computed(()=>le.nodeKey||le.valueKey||"value"),_e=useSelect(le,oe,{select:de,tree:he,key:pe}),{cacheOptions:Ce,...xe}=useTree$1(le,oe,{select:de,tree:he,key:pe}),Ie=reactive({});return ue(Ie),onMounted(()=>{Object.assign(Ie,{...pick(he.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...pick(de.value,["focus","blur"])})}),()=>h$3(ElSelect,reactive({..._e,ref:$e=>de.value=$e}),{...ie,default:()=>[h$3(CacheOptions,{data:Ce.value}),h$3(ElTree,reactive({...xe,ref:$e=>he.value=$e}))]})}});var TreeSelect=_export_sfc$1(_sfc_main$z,[["__file","tree-select.vue"]]);const ElTreeSelect=withInstall(TreeSelect),ROOT_TREE_INJECTION_KEY=Symbol(),EMPTY_NODE={key:-1,level:-1,data:{}};var TreeOptionsEnum=(le=>(le.KEY="id",le.LABEL="label",le.CHILDREN="children",le.DISABLED="disabled",le))(TreeOptionsEnum||{}),SetOperationEnum=(le=>(le.ADD="add",le.DELETE="delete",le))(SetOperationEnum||{});const itemSize={type:Number,default:26},treeProps=buildProps({data:{type:definePropType(Array),default:()=>mutable([])},emptyText:{type:String},height:{type:Number,default:200},props:{type:definePropType(Object),default:()=>mutable({children:"children",label:"label",disabled:"disabled",value:"id"})},highlightCurrent:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},defaultCheckedKeys:{type:definePropType(Array),default:()=>mutable([])},checkStrictly:{type:Boolean,default:!1},defaultExpandedKeys:{type:definePropType(Array),default:()=>mutable([])},indent:{type:Number,default:16},itemSize,icon:{type:iconPropType},expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:{type:Boolean,default:!1},currentNodeKey:{type:definePropType([String,Number])},accordion:{type:Boolean,default:!1},filterMethod:{type:definePropType(Function)},perfMode:{type:Boolean,default:!0}}),treeNodeProps=buildProps({node:{type:definePropType(Object),default:()=>mutable(EMPTY_NODE)},expanded:{type:Boolean,default:!1},checked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},current:{type:Boolean,default:!1},hiddenExpandIcon:{type:Boolean,default:!1},itemSize}),treeNodeContentProps=buildProps({node:{type:definePropType(Object),required:!0}}),NODE_CLICK="node-click",NODE_DROP="node-drop",NODE_EXPAND="node-expand",NODE_COLLAPSE="node-collapse",CURRENT_CHANGE="current-change",NODE_CHECK="check",NODE_CHECK_CHANGE="check-change",NODE_CONTEXTMENU="node-contextmenu",treeEmits={[NODE_CLICK]:(le,oe,ie)=>le&&oe&&ie,[NODE_DROP]:(le,oe,ie)=>le&&oe&&ie,[NODE_EXPAND]:(le,oe)=>le&&oe,[NODE_COLLAPSE]:(le,oe)=>le&&oe,[CURRENT_CHANGE]:(le,oe)=>le&&oe,[NODE_CHECK]:(le,oe)=>le&&oe,[NODE_CHECK_CHANGE]:(le,oe)=>le&&typeof oe=="boolean",[NODE_CONTEXTMENU]:(le,oe,ie)=>le&&oe&&ie},treeNodeEmits={click:(le,oe)=>!!(le&&oe),drop:(le,oe)=>!!(le&&oe),toggle:le=>!!le,check:(le,oe)=>le&&typeof oe=="boolean"};function useCheck(le,oe){const ie=ref(new Set),ue=ref(new Set),{emit:de}=getCurrentInstance();watch([()=>oe.value,()=>le.defaultCheckedKeys],()=>nextTick(()=>{Pt(le.defaultCheckedKeys)}),{immediate:!0});const he=()=>{if(!oe.value||!le.showCheckbox||le.checkStrictly)return;const{levelTreeNodeMap:qe,maxLevel:Et}=oe.value,kt=ie.value,At=new Set;for(let Dt=Et-1;Dt>=1;--Dt){const Lt=qe.get(Dt);Lt&&Lt.forEach(jt=>{const _n=jt.children;if(_n){let bn=!0,vn=!1;for(const Tn of _n){const $n=Tn.key;if(kt.has($n))vn=!0;else if(At.has($n)){bn=!1,vn=!0;break}else bn=!1}bn?kt.add(jt.key):vn?(At.add(jt.key),kt.delete(jt.key)):(kt.delete(jt.key),At.delete(jt.key))}})}ue.value=At},pe=qe=>ie.value.has(qe.key),_e=qe=>ue.value.has(qe.key),Ce=(qe,Et,kt=!0)=>{const At=ie.value,Dt=(Lt,jt)=>{At[jt?SetOperationEnum.ADD:SetOperationEnum.DELETE](Lt.key);const _n=Lt.children;!le.checkStrictly&&_n&&_n.forEach(bn=>{bn.disabled||Dt(bn,jt)})};Dt(qe,Et),he(),kt&&xe(qe,Et)},xe=(qe,Et)=>{const{checkedNodes:kt,checkedKeys:At}=Fe(),{halfCheckedNodes:Dt,halfCheckedKeys:Lt}=Ve();de(NODE_CHECK,qe.data,{checkedKeys:At,checkedNodes:kt,halfCheckedKeys:Lt,halfCheckedNodes:Dt}),de(NODE_CHECK_CHANGE,qe.data,Et)};function Ie(qe=!1){return Fe(qe).checkedKeys}function $e(qe=!1){return Fe(qe).checkedNodes}function Ne(){return Ve().halfCheckedKeys}function Oe(){return Ve().halfCheckedNodes}function Fe(qe=!1){const Et=[],kt=[];if(oe!=null&&oe.value&&le.showCheckbox){const{treeNodeMap:At}=oe.value;ie.value.forEach(Dt=>{const Lt=At.get(Dt);Lt&&(!qe||qe&&Lt.isLeaf)&&(kt.push(Dt),Et.push(Lt.data))})}return{checkedKeys:kt,checkedNodes:Et}}function Ve(){const qe=[],Et=[];if(oe!=null&&oe.value&&le.showCheckbox){const{treeNodeMap:kt}=oe.value;ue.value.forEach(At=>{const Dt=kt.get(At);Dt&&(Et.push(At),qe.push(Dt.data))})}return{halfCheckedNodes:qe,halfCheckedKeys:Et}}function ze(qe){ie.value.clear(),ue.value.clear(),nextTick(()=>{Pt(qe)})}function Ue(qe,Et){if(oe!=null&&oe.value&&le.showCheckbox){const kt=oe.value.treeNodeMap.get(qe);kt&&Ce(kt,Et,!1)}}function Pt(qe){if(oe!=null&&oe.value){const{treeNodeMap:Et}=oe.value;if(le.showCheckbox&&Et&&qe)for(const kt of qe){const At=Et.get(kt);At&&!pe(At)&&Ce(At,!0,!1)}}}return{updateCheckedKeys:he,toggleCheckbox:Ce,isChecked:pe,isIndeterminate:_e,getCheckedKeys:Ie,getCheckedNodes:$e,getHalfCheckedKeys:Ne,getHalfCheckedNodes:Oe,setChecked:Ue,setCheckedKeys:ze}}function useFilter(le,oe){const ie=ref(new Set([])),ue=ref(new Set([])),de=computed(()=>isFunction$2(le.filterMethod));function he(_e){var Ce;if(!de.value)return;const xe=new Set,Ie=ue.value,$e=ie.value,Ne=[],Oe=((Ce=oe.value)==null?void 0:Ce.treeNodes)||[],Fe=le.filterMethod;$e.clear();function Ve(ze){ze.forEach(Ue=>{Ne.push(Ue),Fe!=null&&Fe(_e,Ue.data)?Ne.forEach(qe=>{xe.add(qe.key)}):Ue.isLeaf&&$e.add(Ue.key);const Pt=Ue.children;if(Pt&&Ve(Pt),!Ue.isLeaf){if(!xe.has(Ue.key))$e.add(Ue.key);else if(Pt){let qe=!0;for(const Et of Pt)if(!$e.has(Et.key)){qe=!1;break}qe?Ie.add(Ue.key):Ie.delete(Ue.key)}}Ne.pop()})}return Ve(Oe),xe}function pe(_e){return ue.value.has(_e.key)}return{hiddenExpandIconKeySet:ue,hiddenNodeKeySet:ie,doFilter:he,isForceHiddenExpandIcon:pe}}function useTree(le,oe){const ie=ref(new Set(le.defaultExpandedKeys)),ue=ref(),de=shallowRef(),he=ref();watch(()=>le.currentNodeKey,Gn=>{ue.value=Gn},{immediate:!0}),watch(()=>le.data,Gn=>{Jn(Gn)},{immediate:!0});const{isIndeterminate:pe,isChecked:_e,toggleCheckbox:Ce,getCheckedKeys:xe,getCheckedNodes:Ie,getHalfCheckedKeys:$e,getHalfCheckedNodes:Ne,setChecked:Oe,setCheckedKeys:Fe}=useCheck(le,de),{doFilter:Ve,hiddenNodeKeySet:ze,isForceHiddenExpandIcon:Ue}=useFilter(le,de),Pt=computed(()=>{var Gn;return((Gn=le.props)==null?void 0:Gn.value)||TreeOptionsEnum.KEY}),qe=computed(()=>{var Gn;return((Gn=le.props)==null?void 0:Gn.children)||TreeOptionsEnum.CHILDREN}),Et=computed(()=>{var Gn;return((Gn=le.props)==null?void 0:Gn.disabled)||TreeOptionsEnum.DISABLED}),kt=computed(()=>{var Gn;return((Gn=le.props)==null?void 0:Gn.label)||TreeOptionsEnum.LABEL}),At=computed(()=>{var Gn;const Nn=ie.value,Dn=ze.value,jn=[],ir=((Gn=de.value)==null?void 0:Gn.treeNodes)||[],Fn=[];for(let Kn=ir.length-1;Kn>=0;--Kn)Fn.push(ir[Kn]);for(;Fn.length;){const Kn=Fn.pop();if(!Dn.has(Kn.key)&&(jn.push(Kn),Kn.children&&Nn.has(Kn.key)))for(let mr=Kn.children.length-1;mr>=0;--mr)Fn.push(Kn.children[mr])}return jn}),Dt=computed(()=>At.value.length>0);function Lt(Gn){const Nn=new Map,Dn=new Map;let jn=1;function ir(Kn,mr=1,yr=void 0){var Cr;const br=[];for(const Pr of Kn){const gr=bn(Pr),tr={level:mr,key:gr,data:Pr};tr.label=Tn(Pr),tr.parent=yr;const Sr=_n(Pr);tr.disabled=vn(Pr),tr.isLeaf=!Sr||Sr.length===0,Sr&&Sr.length&&(tr.children=ir(Sr,mr+1,tr)),br.push(tr),Nn.set(gr,tr),Dn.has(mr)||Dn.set(mr,[]),(Cr=Dn.get(mr))==null||Cr.push(tr)}return mr>jn&&(jn=mr),br}const Fn=ir(Gn);return{treeNodeMap:Nn,levelTreeNodeMap:Dn,maxLevel:jn,treeNodes:Fn}}function jt(Gn){const Nn=Ve(Gn);Nn&&(ie.value=Nn)}function _n(Gn){return Gn[qe.value]}function bn(Gn){return Gn?Gn[Pt.value]:""}function vn(Gn){return Gn[Et.value]}function Tn(Gn){return Gn[kt.value]}function $n(Gn){ie.value.has(Gn.key)?kn(Gn):xn(Gn)}function wn(Gn){const Nn=new Set,Dn=de.value.treeNodeMap;Gn.forEach(jn=>{let ir=Dn.get(jn);for(;ir&&!Nn.has(ir.key);)Nn.add(ir.key),ir=ir.parent}),ie.value=Nn}function Cn(Gn,Nn){oe(NODE_CLICK,Gn.data,Gn,Nn),In(Gn),le.expandOnClickNode&&$n(Gn),le.showCheckbox&&le.checkOnClickNode&&!Gn.disabled&&Ce(Gn,!_e(Gn),!0)}function Sn(Gn,Nn){oe(NODE_DROP,Gn.data,Gn,Nn)}function In(Gn){Un(Gn)||(ue.value=Gn.key,oe(CURRENT_CHANGE,Gn.data,Gn))}function En(Gn,Nn){Ce(Gn,Nn)}function xn(Gn){const Nn=ie.value;if(de.value&&le.accordion){const{treeNodeMap:Dn}=de.value;Nn.forEach(jn=>{const ir=Dn.get(jn);Gn&&Gn.level===(ir==null?void 0:ir.level)&&Nn.delete(jn)})}Nn.add(Gn.key),oe(NODE_EXPAND,Gn.data,Gn)}function kn(Gn){ie.value.delete(Gn.key),oe(NODE_COLLAPSE,Gn.data,Gn)}function On(Gn){return ie.value.has(Gn.key)}function Mn(Gn){return!!Gn.disabled}function Un(Gn){const Nn=ue.value;return Nn!==void 0&&Nn===Gn.key}function zn(){var Gn,Nn;if(ue.value)return(Nn=(Gn=de.value)==null?void 0:Gn.treeNodeMap.get(ue.value))==null?void 0:Nn.data}function Hn(){return ue.value}function Rn(Gn){ue.value=Gn}function Jn(Gn){nextTick(()=>de.value=Lt(Gn))}function Qn(Gn){var Nn;const Dn=isObject$d(Gn)?bn(Gn):Gn;return(Nn=de.value)==null?void 0:Nn.treeNodeMap.get(Dn)}function _r(Gn,Nn="auto"){const Dn=Qn(Gn);Dn&&he.value&&he.value.scrollToItem(At.value.indexOf(Dn),Nn)}function Zn(Gn){var Nn;(Nn=he.value)==null||Nn.scrollTo(Gn)}return{tree:de,flattenTree:At,isNotEmpty:Dt,listRef:he,getKey:bn,getChildren:_n,toggleExpand:$n,toggleCheckbox:Ce,isExpanded:On,isChecked:_e,isIndeterminate:pe,isDisabled:Mn,isCurrent:Un,isForceHiddenExpandIcon:Ue,handleNodeClick:Cn,handleNodeDrop:Sn,handleNodeCheck:En,getCurrentNode:zn,getCurrentKey:Hn,setCurrentKey:Rn,getCheckedKeys:xe,getCheckedNodes:Ie,getHalfCheckedKeys:$e,getHalfCheckedNodes:Ne,setChecked:Oe,setCheckedKeys:Fe,filter:jt,setData:Jn,getNode:Qn,expandNode:xn,collapseNode:kn,setExpandedKeys:wn,scrollToNode:_r,scrollTo:Zn}}var ElNodeContent=defineComponent({name:"ElTreeNodeContent",props:treeNodeContentProps,setup(le){const oe=inject(ROOT_TREE_INJECTION_KEY),ie=useNamespace("tree");return()=>{const ue=le.node,{data:de}=ue;return oe!=null&&oe.ctx.slots.default?oe.ctx.slots.default({node:ue,data:de}):h$3("span",{class:ie.be("node","label")},[ue==null?void 0:ue.label])}}});const __default__$h=defineComponent({name:"ElTreeNode"}),_sfc_main$y=defineComponent({...__default__$h,props:treeNodeProps,emits:treeNodeEmits,setup(le,{emit:oe}){const ie=le,ue=inject(ROOT_TREE_INJECTION_KEY),de=useNamespace("tree"),he=computed(()=>{var Ne;return(Ne=ue==null?void 0:ue.props.indent)!=null?Ne:16}),pe=computed(()=>{var Ne;return(Ne=ue==null?void 0:ue.props.icon)!=null?Ne:caret_right_default}),_e=Ne=>{oe("click",ie.node,Ne)},Ce=Ne=>{oe("drop",ie.node,Ne)},xe=()=>{oe("toggle",ie.node)},Ie=Ne=>{oe("check",ie.node,Ne)},$e=Ne=>{var Oe,Fe,Ve,ze;(Ve=(Fe=(Oe=ue==null?void 0:ue.instance)==null?void 0:Oe.vnode)==null?void 0:Fe.props)!=null&&Ve.onNodeContextmenu&&(Ne.stopPropagation(),Ne.preventDefault()),ue==null||ue.ctx.emit(NODE_CONTEXTMENU,Ne,(ze=ie.node)==null?void 0:ze.data,ie.node)};return(Ne,Oe)=>{var Fe,Ve,ze;return openBlock(),createElementBlock("div",{ref:"node$",class:normalizeClass([unref(de).b("node"),unref(de).is("expanded",Ne.expanded),unref(de).is("current",Ne.current),unref(de).is("focusable",!Ne.disabled),unref(de).is("checked",!Ne.disabled&&Ne.checked)]),role:"treeitem",tabindex:"-1","aria-expanded":Ne.expanded,"aria-disabled":Ne.disabled,"aria-checked":Ne.checked,"data-key":(Fe=Ne.node)==null?void 0:Fe.key,onClick:withModifiers(_e,["stop"]),onContextmenu:$e,onDragover:withModifiers(()=>{},["prevent"]),onDragenter:withModifiers(()=>{},["prevent"]),onDrop:withModifiers(Ce,["stop"])},[createBaseVNode("div",{class:normalizeClass(unref(de).be("node","content")),style:normalizeStyle({paddingLeft:`${(Ne.node.level-1)*unref(he)}px`,height:Ne.itemSize+"px"})},[unref(pe)?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass([unref(de).is("leaf",!!((Ve=Ne.node)!=null&&Ve.isLeaf)),unref(de).is("hidden",Ne.hiddenExpandIcon),{expanded:!((ze=Ne.node)!=null&&ze.isLeaf)&&Ne.expanded},unref(de).be("node","expand-icon")]),onClick:withModifiers(xe,["stop"])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(pe))))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0),Ne.showCheckbox?(openBlock(),createBlock(unref(ElCheckbox),{key:1,"model-value":Ne.checked,indeterminate:Ne.indeterminate,disabled:Ne.disabled,onChange:Ie,onClick:withModifiers(()=>{},["stop"])},null,8,["model-value","indeterminate","disabled","onClick"])):createCommentVNode("v-if",!0),createVNode(unref(ElNodeContent),{node:Ne.node},null,8,["node"])],6)],42,["aria-expanded","aria-disabled","aria-checked","data-key","onClick","onDragover","onDragenter","onDrop"])}}});var ElTreeNode=_export_sfc$1(_sfc_main$y,[["__file","tree-node.vue"]]);const __default__$g=defineComponent({name:"ElTreeV2"}),_sfc_main$x=defineComponent({...__default__$g,props:treeProps,emits:treeEmits,setup(le,{expose:oe,emit:ie}){const ue=le,de=useSlots(),he=computed(()=>ue.itemSize);provide(ROOT_TREE_INJECTION_KEY,{ctx:{emit:ie,slots:de},props:ue,instance:getCurrentInstance()}),provide(formItemContextKey,void 0);const{t:pe}=useLocale(),_e=useNamespace("tree"),{flattenTree:Ce,isNotEmpty:xe,listRef:Ie,toggleExpand:$e,isExpanded:Ne,isIndeterminate:Oe,isChecked:Fe,isDisabled:Ve,isCurrent:ze,isForceHiddenExpandIcon:Ue,handleNodeClick:Pt,handleNodeDrop:qe,handleNodeCheck:Et,toggleCheckbox:kt,getCurrentNode:At,getCurrentKey:Dt,setCurrentKey:Lt,getCheckedKeys:jt,getCheckedNodes:_n,getHalfCheckedKeys:bn,getHalfCheckedNodes:vn,setChecked:Tn,setCheckedKeys:$n,filter:wn,setData:Cn,getNode:Sn,expandNode:In,collapseNode:En,setExpandedKeys:xn,scrollToNode:kn,scrollTo:On}=useTree(ue,ie);return oe({toggleCheckbox:kt,getCurrentNode:At,getCurrentKey:Dt,setCurrentKey:Lt,getCheckedKeys:jt,getCheckedNodes:_n,getHalfCheckedKeys:bn,getHalfCheckedNodes:vn,setChecked:Tn,setCheckedKeys:$n,filter:wn,setData:Cn,getNode:Sn,expandNode:In,collapseNode:En,setExpandedKeys:xn,scrollToNode:kn,scrollTo:On}),(Mn,Un)=>{var zn;return openBlock(),createElementBlock("div",{class:normalizeClass([unref(_e).b(),{[unref(_e).m("highlight-current")]:Mn.highlightCurrent}]),role:"tree"},[unref(xe)?(openBlock(),createBlock(unref(FixedSizeList),{key:0,ref_key:"listRef",ref:Ie,"class-name":unref(_e).b("virtual-list"),data:unref(Ce),total:unref(Ce).length,height:Mn.height,"item-size":unref(he),"perf-mode":Mn.perfMode},{default:withCtx(({data:Hn,index:Rn,style:Jn})=>[(openBlock(),createBlock(ElTreeNode,{key:Hn[Rn].key,style:normalizeStyle(Jn),node:Hn[Rn],expanded:unref(Ne)(Hn[Rn]),"show-checkbox":Mn.showCheckbox,checked:unref(Fe)(Hn[Rn]),indeterminate:unref(Oe)(Hn[Rn]),"item-size":unref(he),disabled:unref(Ve)(Hn[Rn]),current:unref(ze)(Hn[Rn]),"hidden-expand-icon":unref(Ue)(Hn[Rn]),onClick:unref(Pt),onToggle:unref($e),onCheck:unref(Et),onDrop:unref(qe)},null,8,["style","node","expanded","show-checkbox","checked","indeterminate","item-size","disabled","current","hidden-expand-icon","onClick","onToggle","onCheck","onDrop"]))]),_:1},8,["class-name","data","total","height","item-size","perf-mode"])):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(_e).e("empty-block"))},[createBaseVNode("span",{class:normalizeClass(unref(_e).e("empty-text"))},toDisplayString((zn=Mn.emptyText)!=null?zn:unref(pe)("el.tree.emptyText")),3)],2))],2)}}});var TreeV2=_export_sfc$1(_sfc_main$x,[["__file","tree.vue"]]);const ElTreeV2=withInstall(TreeV2),uploadContextKey=Symbol("uploadContextKey"),SCOPE$2="ElUpload";class UploadAjaxError extends Error{constructor(oe,ie,ue,de){super(oe),this.name="UploadAjaxError",this.status=ie,this.method=ue,this.url=de}}function getError(le,oe,ie){let ue;return ie.response?ue=`${ie.response.error||ie.response}`:ie.responseText?ue=`${ie.responseText}`:ue=`fail to ${oe.method} ${le} ${ie.status}`,new UploadAjaxError(ue,ie.status,oe.method,le)}function getBody(le){const oe=le.responseText||le.response;if(!oe)return oe;try{return JSON.parse(oe)}catch{return oe}}const ajaxUpload=le=>{typeof XMLHttpRequest>"u"&&throwError(SCOPE$2,"XMLHttpRequest is undefined");const oe=new XMLHttpRequest,ie=le.action;oe.upload&&oe.upload.addEventListener("progress",he=>{const pe=he;pe.percent=he.total>0?he.loaded/he.total*100:0,le.onProgress(pe)});const ue=new FormData;if(le.data)for(const[he,pe]of Object.entries(le.data))isArray$3(pe)&&pe.length?ue.append(he,...pe):ue.append(he,pe);ue.append(le.filename,le.file,le.file.name),oe.addEventListener("error",()=>{le.onError(getError(ie,le,oe))}),oe.addEventListener("load",()=>{if(oe.status<200||oe.status>=300)return le.onError(getError(ie,le,oe));le.onSuccess(getBody(oe))}),oe.open(le.method,ie,!0),le.withCredentials&&"withCredentials"in oe&&(oe.withCredentials=!0);const de=le.headers||{};if(de instanceof Headers)de.forEach((he,pe)=>oe.setRequestHeader(pe,he));else for(const[he,pe]of Object.entries(de))isNil(pe)||oe.setRequestHeader(he,String(pe));return oe.send(ue),oe},uploadListTypes=["text","picture","picture-card"];let fileId=1;const genFileId=()=>Date.now()+fileId++,uploadBaseProps=buildProps({action:{type:String,default:"#"},headers:{type:definePropType(Object)},method:{type:String,default:"post"},data:{type:definePropType([Object,Function,Promise]),default:()=>mutable({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:definePropType(Array),default:()=>mutable([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:uploadListTypes,default:"text"},httpRequest:{type:definePropType(Function),default:ajaxUpload},disabled:Boolean,limit:Number}),uploadProps=buildProps({...uploadBaseProps,beforeUpload:{type:definePropType(Function),default:NOOP},beforeRemove:{type:definePropType(Function)},onRemove:{type:definePropType(Function),default:NOOP},onChange:{type:definePropType(Function),default:NOOP},onPreview:{type:definePropType(Function),default:NOOP},onSuccess:{type:definePropType(Function),default:NOOP},onProgress:{type:definePropType(Function),default:NOOP},onError:{type:definePropType(Function),default:NOOP},onExceed:{type:definePropType(Function),default:NOOP},crossorigin:{type:definePropType(String)}}),uploadListProps=buildProps({files:{type:definePropType(Array),default:()=>mutable([])},disabled:{type:Boolean,default:!1},handlePreview:{type:definePropType(Function),default:NOOP},listType:{type:String,values:uploadListTypes,default:"text"},crossorigin:{type:definePropType(String)}}),uploadListEmits={remove:le=>!!le},__default__$f=defineComponent({name:"ElUploadList"}),_sfc_main$w=defineComponent({...__default__$f,props:uploadListProps,emits:uploadListEmits,setup(le,{emit:oe}){const ie=le,{t:ue}=useLocale(),de=useNamespace("upload"),he=useNamespace("icon"),pe=useNamespace("list"),_e=useFormDisabled(),Ce=ref(!1),xe=computed(()=>[de.b("list"),de.bm("list",ie.listType),de.is("disabled",ie.disabled)]),Ie=$e=>{oe("remove",$e)};return($e,Ne)=>(openBlock(),createBlock(TransitionGroup,{tag:"ul",class:normalizeClass(unref(xe)),name:unref(pe).b()},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList($e.files,(Oe,Fe)=>(openBlock(),createElementBlock("li",{key:Oe.uid||Oe.name,class:normalizeClass([unref(de).be("list","item"),unref(de).is(Oe.status),{focusing:Ce.value}]),tabindex:"0",onKeydown:withKeys(Ve=>!unref(_e)&&Ie(Oe),["delete"]),onFocus:Ve=>Ce.value=!0,onBlur:Ve=>Ce.value=!1,onClick:Ve=>Ce.value=!1},[renderSlot($e.$slots,"default",{file:Oe,index:Fe},()=>[$e.listType==="picture"||Oe.status!=="uploading"&&$e.listType==="picture-card"?(openBlock(),createElementBlock("img",{key:0,class:normalizeClass(unref(de).be("list","item-thumbnail")),src:Oe.url,crossorigin:$e.crossorigin,alt:""},null,10,["src","crossorigin"])):createCommentVNode("v-if",!0),Oe.status==="uploading"||$e.listType!=="picture-card"?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(de).be("list","item-info"))},[createBaseVNode("a",{class:normalizeClass(unref(de).be("list","item-name")),onClick:withModifiers(Ve=>$e.handlePreview(Oe),["prevent"])},[createVNode(unref(ElIcon),{class:normalizeClass(unref(he).m("document"))},{default:withCtx(()=>[createVNode(unref(document_default))]),_:1},8,["class"]),createBaseVNode("span",{class:normalizeClass(unref(de).be("list","item-file-name")),title:Oe.name},toDisplayString(Oe.name),11,["title"])],10,["onClick"]),Oe.status==="uploading"?(openBlock(),createBlock(unref(ElProgress),{key:0,type:$e.listType==="picture-card"?"circle":"line","stroke-width":$e.listType==="picture-card"?6:2,percentage:Number(Oe.percentage),style:normalizeStyle($e.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("label",{class:normalizeClass(unref(de).be("list","item-status-label"))},[$e.listType==="text"?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass([unref(he).m("upload-success"),unref(he).m("circle-check")])},{default:withCtx(()=>[createVNode(unref(circle_check_default))]),_:1},8,["class"])):["picture-card","picture"].includes($e.listType)?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass([unref(he).m("upload-success"),unref(he).m("check")])},{default:withCtx(()=>[createVNode(unref(check_default))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2),unref(_e)?createCommentVNode("v-if",!0):(openBlock(),createBlock(unref(ElIcon),{key:2,class:normalizeClass(unref(he).m("close")),onClick:Ve=>Ie(Oe)},{default:withCtx(()=>[createVNode(unref(close_default))]),_:2},1032,["class","onClick"])),createCommentVNode(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),createCommentVNode(" This is a bug which needs to be fixed "),createCommentVNode(" TODO: Fix the incorrect navigation interaction "),unref(_e)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("i",{key:3,class:normalizeClass(unref(he).m("close-tip"))},toDisplayString(unref(ue)("el.upload.deleteTip")),3)),$e.listType==="picture-card"?(openBlock(),createElementBlock("span",{key:4,class:normalizeClass(unref(de).be("list","item-actions"))},[createBaseVNode("span",{class:normalizeClass(unref(de).be("list","item-preview")),onClick:Ve=>$e.handlePreview(Oe)},[createVNode(unref(ElIcon),{class:normalizeClass(unref(he).m("zoom-in"))},{default:withCtx(()=>[createVNode(unref(zoom_in_default))]),_:1},8,["class"])],10,["onClick"]),unref(_e)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(de).be("list","item-delete")),onClick:Ve=>Ie(Oe)},[createVNode(unref(ElIcon),{class:normalizeClass(unref(he).m("delete"))},{default:withCtx(()=>[createVNode(unref(delete_default))]),_:1},8,["class"])],10,["onClick"]))],2)):createCommentVNode("v-if",!0)])],42,["onKeydown","onFocus","onBlur","onClick"]))),128)),renderSlot($e.$slots,"append")]),_:3},8,["class","name"]))}});var UploadList=_export_sfc$1(_sfc_main$w,[["__file","upload-list.vue"]]);const uploadDraggerProps=buildProps({disabled:{type:Boolean,default:!1}}),uploadDraggerEmits={file:le=>isArray$3(le)},COMPONENT_NAME="ElUploadDrag",__default__$e=defineComponent({name:COMPONENT_NAME}),_sfc_main$v=defineComponent({...__default__$e,props:uploadDraggerProps,emits:uploadDraggerEmits,setup(le,{emit:oe}){inject(uploadContextKey)||throwError(COMPONENT_NAME,"usage: <el-upload><el-upload-dragger /></el-upload>");const ue=useNamespace("upload"),de=ref(!1),he=useFormDisabled(),pe=Ce=>{if(he.value)return;de.value=!1,Ce.stopPropagation();const xe=Array.from(Ce.dataTransfer.files);oe("file",xe)},_e=()=>{he.value||(de.value=!0)};return(Ce,xe)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(ue).b("dragger"),unref(ue).is("dragover",de.value)]),onDrop:withModifiers(pe,["prevent"]),onDragover:withModifiers(_e,["prevent"]),onDragleave:withModifiers(Ie=>de.value=!1,["prevent"])},[renderSlot(Ce.$slots,"default")],42,["onDrop","onDragover","onDragleave"]))}});var UploadDragger=_export_sfc$1(_sfc_main$v,[["__file","upload-dragger.vue"]]);const uploadContentProps=buildProps({...uploadBaseProps,beforeUpload:{type:definePropType(Function),default:NOOP},onRemove:{type:definePropType(Function),default:NOOP},onStart:{type:definePropType(Function),default:NOOP},onSuccess:{type:definePropType(Function),default:NOOP},onProgress:{type:definePropType(Function),default:NOOP},onError:{type:definePropType(Function),default:NOOP},onExceed:{type:definePropType(Function),default:NOOP}}),__default__$d=defineComponent({name:"ElUploadContent",inheritAttrs:!1}),_sfc_main$u=defineComponent({...__default__$d,props:uploadContentProps,setup(le,{expose:oe}){const ie=le,ue=useNamespace("upload"),de=useFormDisabled(),he=shallowRef({}),pe=shallowRef(),_e=Ve=>{if(Ve.length===0)return;const{autoUpload:ze,limit:Ue,fileList:Pt,multiple:qe,onStart:Et,onExceed:kt}=ie;if(Ue&&Pt.length+Ve.length>Ue){kt(Ve,Pt);return}qe||(Ve=Ve.slice(0,1));for(const At of Ve){const Dt=At;Dt.uid=genFileId(),Et(Dt),ze&&Ce(Dt)}},Ce=async Ve=>{if(pe.value.value="",!ie.beforeUpload)return Ie(Ve);let ze,Ue={};try{const qe=ie.data,Et=ie.beforeUpload(Ve);Ue=isPlainObject$1(ie.data)?cloneDeep(ie.data):ie.data,ze=await Et,isPlainObject$1(ie.data)&&isEqual$1(qe,Ue)&&(Ue=cloneDeep(ie.data))}catch{ze=!1}if(ze===!1){ie.onRemove(Ve);return}let Pt=Ve;ze instanceof Blob&&(ze instanceof File?Pt=ze:Pt=new File([ze],Ve.name,{type:Ve.type})),Ie(Object.assign(Pt,{uid:Ve.uid}),Ue)},xe=async(Ve,ze)=>isFunction$2(Ve)?Ve(ze):Ve,Ie=async(Ve,ze)=>{const{headers:Ue,data:Pt,method:qe,withCredentials:Et,name:kt,action:At,onProgress:Dt,onSuccess:Lt,onError:jt,httpRequest:_n}=ie;try{ze=await xe(ze??Pt,Ve)}catch{ie.onRemove(Ve);return}const{uid:bn}=Ve,vn={headers:Ue||{},withCredentials:Et,file:Ve,data:ze,method:qe,filename:kt,action:At,onProgress:$n=>{Dt($n,Ve)},onSuccess:$n=>{Lt($n,Ve),delete he.value[bn]},onError:$n=>{jt($n,Ve),delete he.value[bn]}},Tn=_n(vn);he.value[bn]=Tn,Tn instanceof Promise&&Tn.then(vn.onSuccess,vn.onError)},$e=Ve=>{const ze=Ve.target.files;ze&&_e(Array.from(ze))},Ne=()=>{de.value||(pe.value.value="",pe.value.click())},Oe=()=>{Ne()};return oe({abort:Ve=>{entriesOf(he.value).filter(Ve?([Ue])=>String(Ve.uid)===Ue:()=>!0).forEach(([Ue,Pt])=>{Pt instanceof XMLHttpRequest&&Pt.abort(),delete he.value[Ue]})},upload:Ce}),(Ve,ze)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(ue).b(),unref(ue).m(Ve.listType),unref(ue).is("drag",Ve.drag),unref(ue).is("disabled",unref(de))]),tabindex:unref(de)?"-1":"0",onClick:Ne,onKeydown:withKeys(withModifiers(Oe,["self"]),["enter","space"])},[Ve.drag?(openBlock(),createBlock(UploadDragger,{key:0,disabled:unref(de),onFile:_e},{default:withCtx(()=>[renderSlot(Ve.$slots,"default")]),_:3},8,["disabled"])):renderSlot(Ve.$slots,"default",{key:1}),createBaseVNode("input",{ref_key:"inputRef",ref:pe,class:normalizeClass(unref(ue).e("input")),name:Ve.name,disabled:unref(de),multiple:Ve.multiple,accept:Ve.accept,type:"file",onChange:$e,onClick:withModifiers(()=>{},["stop"])},null,42,["name","disabled","multiple","accept","onClick"])],42,["tabindex","onKeydown"]))}});var UploadContent=_export_sfc$1(_sfc_main$u,[["__file","upload-content.vue"]]);const SCOPE$1="ElUpload",revokeFileObjectURL=le=>{var oe;(oe=le.url)!=null&&oe.startsWith("blob:")&&URL.revokeObjectURL(le.url)},useHandlers=(le,oe)=>{const ie=useVModel(le,"fileList",void 0,{passive:!0}),ue=Oe=>ie.value.find(Fe=>Fe.uid===Oe.uid);function de(Oe){var Fe;(Fe=oe.value)==null||Fe.abort(Oe)}function he(Oe=["ready","uploading","success","fail"]){ie.value=ie.value.filter(Fe=>!Oe.includes(Fe.status))}function pe(Oe){ie.value=ie.value.filter(Fe=>Fe!==Oe)}const _e=(Oe,Fe)=>{const Ve=ue(Fe);Ve&&(Ve.status="fail",pe(Ve),le.onError(Oe,Ve,ie.value),le.onChange(Ve,ie.value))},Ce=(Oe,Fe)=>{const Ve=ue(Fe);Ve&&(le.onProgress(Oe,Ve,ie.value),Ve.status="uploading",Ve.percentage=Math.round(Oe.percent))},xe=(Oe,Fe)=>{const Ve=ue(Fe);Ve&&(Ve.status="success",Ve.response=Oe,le.onSuccess(Oe,Ve,ie.value),le.onChange(Ve,ie.value))},Ie=Oe=>{isNil(Oe.uid)&&(Oe.uid=genFileId());const Fe={name:Oe.name,percentage:0,status:"ready",size:Oe.size,raw:Oe,uid:Oe.uid};if(le.listType==="picture-card"||le.listType==="picture")try{Fe.url=URL.createObjectURL(Oe)}catch(Ve){Ve.message,le.onError(Ve,Fe,ie.value)}ie.value=[...ie.value,Fe],le.onChange(Fe,ie.value)},$e=async Oe=>{const Fe=Oe instanceof File?ue(Oe):Oe;Fe||throwError(SCOPE$1,"file to be removed not found");const Ve=ze=>{de(ze),pe(ze),le.onRemove(ze,ie.value),revokeFileObjectURL(ze)};le.beforeRemove?await le.beforeRemove(Fe,ie.value)!==!1&&Ve(Fe):Ve(Fe)};function Ne(){ie.value.filter(({status:Oe})=>Oe==="ready").forEach(({raw:Oe})=>{var Fe;return Oe&&((Fe=oe.value)==null?void 0:Fe.upload(Oe))})}return watch(()=>le.listType,Oe=>{Oe!=="picture-card"&&Oe!=="picture"||(ie.value=ie.value.map(Fe=>{const{raw:Ve,url:ze}=Fe;if(!ze&&Ve)try{Fe.url=URL.createObjectURL(Ve)}catch(Ue){le.onError(Ue,Fe,ie.value)}return Fe}))}),watch(ie,Oe=>{for(const Fe of Oe)Fe.uid||(Fe.uid=genFileId()),Fe.status||(Fe.status="success")},{immediate:!0,deep:!0}),{uploadFiles:ie,abort:de,clearFiles:he,handleError:_e,handleProgress:Ce,handleStart:Ie,handleSuccess:xe,handleRemove:$e,submit:Ne,revokeFileObjectURL}},__default__$c=defineComponent({name:"ElUpload"}),_sfc_main$t=defineComponent({...__default__$c,props:uploadProps,setup(le,{expose:oe}){const ie=le,ue=useFormDisabled(),de=shallowRef(),{abort:he,submit:pe,clearFiles:_e,uploadFiles:Ce,handleStart:xe,handleError:Ie,handleRemove:$e,handleSuccess:Ne,handleProgress:Oe,revokeFileObjectURL:Fe}=useHandlers(ie,de),Ve=computed(()=>ie.listType==="picture-card"),ze=computed(()=>({...ie,fileList:Ce.value,onStart:xe,onProgress:Oe,onSuccess:Ne,onError:Ie,onRemove:$e}));return onBeforeUnmount(()=>{Ce.value.forEach(Fe)}),provide(uploadContextKey,{accept:toRef(ie,"accept")}),oe({abort:he,submit:pe,clearFiles:_e,handleStart:xe,handleRemove:$e}),(Ue,Pt)=>(openBlock(),createElementBlock("div",null,[unref(Ve)&&Ue.showFileList?(openBlock(),createBlock(UploadList,{key:0,disabled:unref(ue),"list-type":Ue.listType,files:unref(Ce),crossorigin:Ue.crossorigin,"handle-preview":Ue.onPreview,onRemove:unref($e)},createSlots({append:withCtx(()=>[createVNode(UploadContent,mergeProps({ref_key:"uploadRef",ref:de},unref(ze)),{default:withCtx(()=>[Ue.$slots.trigger?renderSlot(Ue.$slots,"trigger",{key:0}):createCommentVNode("v-if",!0),!Ue.$slots.trigger&&Ue.$slots.default?renderSlot(Ue.$slots,"default",{key:1}):createCommentVNode("v-if",!0)]),_:3},16)]),_:2},[Ue.$slots.file?{name:"default",fn:withCtx(({file:qe,index:Et})=>[renderSlot(Ue.$slots,"file",{file:qe,index:Et})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):createCommentVNode("v-if",!0),!unref(Ve)||unref(Ve)&&!Ue.showFileList?(openBlock(),createBlock(UploadContent,mergeProps({key:1,ref_key:"uploadRef",ref:de},unref(ze)),{default:withCtx(()=>[Ue.$slots.trigger?renderSlot(Ue.$slots,"trigger",{key:0}):createCommentVNode("v-if",!0),!Ue.$slots.trigger&&Ue.$slots.default?renderSlot(Ue.$slots,"default",{key:1}):createCommentVNode("v-if",!0)]),_:3},16)):createCommentVNode("v-if",!0),Ue.$slots.trigger?renderSlot(Ue.$slots,"default",{key:2}):createCommentVNode("v-if",!0),renderSlot(Ue.$slots,"tip"),!unref(Ve)&&Ue.showFileList?(openBlock(),createBlock(UploadList,{key:3,disabled:unref(ue),"list-type":Ue.listType,files:unref(Ce),crossorigin:Ue.crossorigin,"handle-preview":Ue.onPreview,onRemove:unref($e)},createSlots({_:2},[Ue.$slots.file?{name:"default",fn:withCtx(({file:qe,index:Et})=>[renderSlot(Ue.$slots,"file",{file:qe,index:Et})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):createCommentVNode("v-if",!0)]))}});var Upload=_export_sfc$1(_sfc_main$t,[["__file","upload.vue"]]);const ElUpload=withInstall(Upload),watermarkProps=buildProps({zIndex:{type:Number,default:9},rotate:{type:Number,default:-22},width:Number,height:Number,image:String,content:{type:definePropType([String,Array]),default:"Element Plus"},font:{type:definePropType(Object)},gap:{type:definePropType(Array),default:()=>[100,100]},offset:{type:definePropType(Array)}});function toLowercaseSeparator(le){return le.replace(/([A-Z])/g,"-$1").toLowerCase()}function getStyleStr(le){return Object.keys(le).map(oe=>`${toLowercaseSeparator(oe)}: ${le[oe]};`).join(" ")}function getPixelRatio(){return window.devicePixelRatio||1}const reRendering=(le,oe)=>{let ie=!1;return le.removedNodes.length&&oe&&(ie=Array.from(le.removedNodes).includes(oe)),le.type==="attributes"&&le.target===oe&&(ie=!0),ie},FontGap=3;function prepareCanvas(le,oe,ie=1){const ue=document.createElement("canvas"),de=ue.getContext("2d"),he=le*ie,pe=oe*ie;return ue.setAttribute("width",`${he}px`),ue.setAttribute("height",`${pe}px`),de.save(),[de,ue,he,pe]}function useClips(){function le(oe,ie,ue,de,he,pe,_e,Ce){const[xe,Ie,$e,Ne]=prepareCanvas(de,he,ue);if(oe instanceof HTMLImageElement)xe.drawImage(oe,0,0,$e,Ne);else{const{color:kn,fontSize:On,fontStyle:Mn,fontWeight:Un,fontFamily:zn,textAlign:Hn,textBaseline:Rn}=pe,Jn=Number(On)*ue;xe.font=`${Mn} normal ${Un} ${Jn}px/${he}px ${zn}`,xe.fillStyle=kn,xe.textAlign=Hn,xe.textBaseline=Rn;const Qn=Array.isArray(oe)?oe:[oe];Qn==null||Qn.forEach((_r,Zn)=>{xe.fillText(_r??"",$e/2,Zn*(Jn+FontGap*ue))})}const Oe=Math.PI/180*Number(ie),Fe=Math.max(de,he),[Ve,ze,Ue]=prepareCanvas(Fe,Fe,ue);Ve.translate(Ue/2,Ue/2),Ve.rotate(Oe),$e>0&&Ne>0&&Ve.drawImage(Ie,-$e/2,-Ne/2);function Pt(kn,On){const Mn=kn*Math.cos(Oe)-On*Math.sin(Oe),Un=kn*Math.sin(Oe)+On*Math.cos(Oe);return[Mn,Un]}let qe=0,Et=0,kt=0,At=0;const Dt=$e/2,Lt=Ne/2;[[0-Dt,0-Lt],[0+Dt,0-Lt],[0+Dt,0+Lt],[0-Dt,0+Lt]].forEach(([kn,On])=>{const[Mn,Un]=Pt(kn,On);qe=Math.min(qe,Mn),Et=Math.max(Et,Mn),kt=Math.min(kt,Un),At=Math.max(At,Un)});const _n=qe+Ue/2,bn=kt+Ue/2,vn=Et-qe,Tn=At-kt,$n=_e*ue,wn=Ce*ue,Cn=(vn+$n)*2,Sn=Tn+wn,[In,En]=prepareCanvas(Cn,Sn);function xn(kn=0,On=0){In.drawImage(ze,_n,bn,vn,Tn,kn,On,vn,Tn)}return xn(),xn(vn+$n,-Tn/2-wn/2),xn(vn+$n,+Tn/2+wn/2),[En.toDataURL(),Cn/ue,Sn/ue]}return le}const __default__$b=defineComponent({name:"ElWatermark"}),_sfc_main$s=defineComponent({...__default__$b,props:watermarkProps,setup(le){const oe=le,ie={position:"relative"},ue=computed(()=>{var _n,bn;return(bn=(_n=oe.font)==null?void 0:_n.color)!=null?bn:"rgba(0,0,0,.15)"}),de=computed(()=>{var _n,bn;return(bn=(_n=oe.font)==null?void 0:_n.fontSize)!=null?bn:16}),he=computed(()=>{var _n,bn;return(bn=(_n=oe.font)==null?void 0:_n.fontWeight)!=null?bn:"normal"}),pe=computed(()=>{var _n,bn;return(bn=(_n=oe.font)==null?void 0:_n.fontStyle)!=null?bn:"normal"}),_e=computed(()=>{var _n,bn;return(bn=(_n=oe.font)==null?void 0:_n.fontFamily)!=null?bn:"sans-serif"}),Ce=computed(()=>{var _n,bn;return(bn=(_n=oe.font)==null?void 0:_n.textAlign)!=null?bn:"center"}),xe=computed(()=>{var _n,bn;return(bn=(_n=oe.font)==null?void 0:_n.textBaseline)!=null?bn:"hanging"}),Ie=computed(()=>oe.gap[0]),$e=computed(()=>oe.gap[1]),Ne=computed(()=>Ie.value/2),Oe=computed(()=>$e.value/2),Fe=computed(()=>{var _n,bn;return(bn=(_n=oe.offset)==null?void 0:_n[0])!=null?bn:Ne.value}),Ve=computed(()=>{var _n,bn;return(bn=(_n=oe.offset)==null?void 0:_n[1])!=null?bn:Oe.value}),ze=()=>{const _n={zIndex:oe.zIndex,position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",backgroundRepeat:"repeat"};let bn=Fe.value-Ne.value,vn=Ve.value-Oe.value;return bn>0&&(_n.left=`${bn}px`,_n.width=`calc(100% - ${bn}px)`,bn=0),vn>0&&(_n.top=`${vn}px`,_n.height=`calc(100% - ${vn}px)`,vn=0),_n.backgroundPosition=`${bn}px ${vn}px`,_n},Ue=shallowRef(null),Pt=shallowRef(),qe=ref(!1),Et=()=>{Pt.value&&(Pt.value.remove(),Pt.value=void 0)},kt=(_n,bn)=>{var vn;Ue.value&&Pt.value&&(qe.value=!0,Pt.value.setAttribute("style",getStyleStr({...ze(),backgroundImage:`url('${_n}')`,backgroundSize:`${Math.floor(bn)}px`})),(vn=Ue.value)==null||vn.append(Pt.value),setTimeout(()=>{qe.value=!1}))},At=_n=>{let bn=120,vn=64;const Tn=oe.image,$n=oe.content,wn=oe.width,Cn=oe.height;if(!Tn&&_n.measureText){_n.font=`${Number(de.value)}px ${_e.value}`;const Sn=Array.isArray($n)?$n:[$n],In=Sn.map(En=>{const xn=_n.measureText(En);return[xn.width,xn.fontBoundingBoxAscent!==void 0?xn.fontBoundingBoxAscent+xn.fontBoundingBoxDescent:xn.actualBoundingBoxAscent+xn.actualBoundingBoxDescent]});bn=Math.ceil(Math.max(...In.map(En=>En[0]))),vn=Math.ceil(Math.max(...In.map(En=>En[1])))*Sn.length+(Sn.length-1)*FontGap}return[wn??bn,Cn??vn]},Dt=useClips(),Lt=()=>{const bn=document.createElement("canvas").getContext("2d"),vn=oe.image,Tn=oe.content,$n=oe.rotate;if(bn){Pt.value||(Pt.value=document.createElement("div"));const wn=getPixelRatio(),[Cn,Sn]=At(bn),In=En=>{const[xn,kn]=Dt(En||"",$n,wn,Cn,Sn,{color:ue.value,fontSize:de.value,fontStyle:pe.value,fontWeight:he.value,fontFamily:_e.value,textAlign:Ce.value,textBaseline:xe.value},Ie.value,$e.value);kt(xn,kn)};if(vn){const En=new Image;En.onload=()=>{In(En)},En.onerror=()=>{In(Tn)},En.crossOrigin="anonymous",En.referrerPolicy="no-referrer",En.src=vn}else In(Tn)}};return onMounted(()=>{Lt()}),watch(()=>oe,()=>{Lt()},{deep:!0,flush:"post"}),onBeforeUnmount(()=>{Et()}),useMutationObserver(Ue,_n=>{qe.value||_n.forEach(bn=>{reRendering(bn,Pt.value)&&(Et(),Lt())})},{attributes:!0,subtree:!0,childList:!0}),(_n,bn)=>(openBlock(),createElementBlock("div",{ref_key:"containerRef",ref:Ue,style:normalizeStyle([ie])},[renderSlot(_n.$slots,"default")],4))}});var Watermark=_export_sfc$1(_sfc_main$s,[["__file","watermark.vue"]]);const ElWatermark=withInstall(Watermark),maskProps=buildProps({zIndex:{type:Number,default:1001},visible:Boolean,fill:{type:String,default:"rgba(0,0,0,0.5)"},pos:{type:definePropType(Object)},targetAreaClickable:{type:Boolean,default:!0}}),useTarget=(le,oe,ie,ue,de)=>{const he=ref(null),pe=()=>{let $e;return isString$1(le.value)?$e=document.querySelector(le.value):isFunction$2(le.value)?$e=le.value():$e=le.value,$e},_e=()=>{const $e=pe();if(!$e||!oe.value){he.value=null;return}!isInViewPort($e)&&oe.value&&$e.scrollIntoView(de.value);const{left:Ne,top:Oe,width:Fe,height:Ve}=$e.getBoundingClientRect();he.value={left:Ne,top:Oe,width:Fe,height:Ve,radius:0}};onMounted(()=>{watch([oe,le],()=>{_e()},{immediate:!0}),window.addEventListener("resize",_e)}),onBeforeUnmount(()=>{window.removeEventListener("resize",_e)});const Ce=$e=>{var Ne;return(Ne=isArray$3(ie.value.offset)?ie.value.offset[$e]:ie.value.offset)!=null?Ne:6},xe=computed(()=>{var $e;if(!he.value)return he.value;const Ne=Ce(0),Oe=Ce(1),Fe=(($e=ie.value)==null?void 0:$e.radius)||2;return{left:he.value.left-Ne,top:he.value.top-Oe,width:he.value.width+Ne*2,height:he.value.height+Oe*2,radius:Fe}}),Ie=computed(()=>{const $e=pe();return!ue.value||!$e||!window.DOMRect?$e||void 0:{getBoundingClientRect(){var Ne,Oe,Fe,Ve;return window.DOMRect.fromRect({width:((Ne=xe.value)==null?void 0:Ne.width)||0,height:((Oe=xe.value)==null?void 0:Oe.height)||0,x:((Fe=xe.value)==null?void 0:Fe.left)||0,y:((Ve=xe.value)==null?void 0:Ve.top)||0})}}});return{mergedPosInfo:xe,triggerTarget:Ie}},tourKey=Symbol("ElTour");function isInViewPort(le){const oe=window.innerWidth||document.documentElement.clientWidth,ie=window.innerHeight||document.documentElement.clientHeight,{top:ue,right:de,bottom:he,left:pe}=le.getBoundingClientRect();return ue>=0&&pe>=0&&de<=oe&&he<=ie}const useFloating=(le,oe,ie,ue,de,he,pe,_e)=>{const Ce=ref(),xe=ref(),Ie=ref({}),$e={x:Ce,y:xe,placement:ue,strategy:de,middlewareData:Ie},Ne=computed(()=>{const Ue=[offset(unref(he)),flip(),shift(),overflowMiddleware()];return unref(_e)&&unref(ie)&&Ue.push(arrow({element:unref(ie)})),Ue}),Oe=async()=>{if(!isClient)return;const Ue=unref(le),Pt=unref(oe);if(!Ue||!Pt)return;const qe=await computePosition(Ue,Pt,{placement:unref(ue),strategy:unref(de),middleware:unref(Ne)});keysOf($e).forEach(Et=>{$e[Et].value=qe[Et]})},Fe=computed(()=>{if(!unref(le))return{position:"fixed",top:"50%",left:"50%",transform:"translate3d(-50%, -50%, 0)",maxWidth:"100vw",zIndex:unref(pe)};const{overflow:Ue}=unref(Ie);return{position:unref(de),zIndex:unref(pe),top:unref(xe)!=null?`${unref(xe)}px`:"",left:unref(Ce)!=null?`${unref(Ce)}px`:"",maxWidth:Ue!=null&&Ue.maxWidth?`${Ue==null?void 0:Ue.maxWidth}px`:""}}),Ve=computed(()=>{if(!unref(_e))return{};const{arrow:Ue}=unref(Ie);return{left:(Ue==null?void 0:Ue.x)!=null?`${Ue==null?void 0:Ue.x}px`:"",top:(Ue==null?void 0:Ue.y)!=null?`${Ue==null?void 0:Ue.y}px`:""}});let ze;return onMounted(()=>{const Ue=unref(le),Pt=unref(oe);Ue&&Pt&&(ze=autoUpdate(Ue,Pt,Oe)),watchEffect(()=>{Oe()})}),onBeforeUnmount(()=>{ze&&ze()}),{update:Oe,contentStyle:Fe,arrowStyle:Ve}},overflowMiddleware=()=>({name:"overflow",async fn(le){const oe=await detectOverflow(le);let ie=0;return oe.left>0&&(ie=oe.left),oe.right>0&&(ie=oe.right),{data:{maxWidth:le.rects.floating.width-ie}}}}),__default__$a=defineComponent({name:"ElTourMask",inheritAttrs:!1}),_sfc_main$r=defineComponent({...__default__$a,props:maskProps,setup(le){const oe=le,{ns:ie}=inject(tourKey),ue=computed(()=>{var _e,Ce;return(Ce=(_e=oe.pos)==null?void 0:_e.radius)!=null?Ce:2}),de=computed(()=>{const _e=ue.value,Ce=`a${_e},${_e} 0 0 1`;return{topRight:`${Ce} ${_e},${_e}`,bottomRight:`${Ce} ${-_e},${_e}`,bottomLeft:`${Ce} ${-_e},${-_e}`,topLeft:`${Ce} ${_e},${-_e}`}}),he=computed(()=>{const _e=window.innerWidth,Ce=window.innerHeight,xe=de.value,Ie=`M${_e},0 L0,0 L0,${Ce} L${_e},${Ce} L${_e},0 Z`,$e=ue.value;return oe.pos?`${Ie} M${oe.pos.left+$e},${oe.pos.top} h${oe.pos.width-$e*2} ${xe.topRight} v${oe.pos.height-$e*2} ${xe.bottomRight} h${-oe.pos.width+$e*2} ${xe.bottomLeft} v${-oe.pos.height+$e*2} ${xe.topLeft} z`:Ie}),pe=computed(()=>({fill:oe.fill,pointerEvents:"auto",cursor:"auto"}));return useLockscreen(toRef(oe,"visible"),{ns:ie}),(_e,Ce)=>_e.visible?(openBlock(),createElementBlock("div",mergeProps({key:0,class:unref(ie).e("mask"),style:{position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:_e.zIndex,pointerEvents:_e.pos&&_e.targetAreaClickable?"none":"auto"}},_e.$attrs),[(openBlock(),createElementBlock("svg",{style:{width:"100%",height:"100%"}},[createBaseVNode("path",{class:normalizeClass(unref(ie).e("hollow")),style:normalizeStyle(unref(pe)),d:unref(he)},null,14,["d"])]))],16)):createCommentVNode("v-if",!0)}});var ElTourMask=_export_sfc$1(_sfc_main$r,[["__file","mask.vue"]]);const tourStrategies=["absolute","fixed"],tourPlacements=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],tourContentProps=buildProps({placement:{type:definePropType(String),values:tourPlacements,default:"bottom"},reference:{type:definePropType(Object),default:null},strategy:{type:definePropType(String),values:tourStrategies,default:"absolute"},offset:{type:Number,default:10},showArrow:Boolean,zIndex:{type:Number,default:2001}}),tourContentEmits={close:()=>!0},__default__$9=defineComponent({name:"ElTourContent"}),_sfc_main$q=defineComponent({...__default__$9,props:tourContentProps,emits:tourContentEmits,setup(le,{emit:oe}){const ie=le,ue=ref(ie.placement),de=ref(ie.strategy),he=ref(null),pe=ref(null);watch(()=>ie.placement,()=>{ue.value=ie.placement});const{contentStyle:_e,arrowStyle:Ce}=useFloating(toRef(ie,"reference"),he,pe,ue,de,toRef(ie,"offset"),toRef(ie,"zIndex"),toRef(ie,"showArrow")),xe=computed(()=>ue.value.split("-")[0]),{ns:Ie}=inject(tourKey),$e=()=>{oe("close")},Ne=Oe=>{Oe.detail.focusReason==="pointer"&&Oe.preventDefault()};return(Oe,Fe)=>(openBlock(),createElementBlock("div",{ref_key:"contentRef",ref:he,style:normalizeStyle(unref(_e)),class:normalizeClass(unref(Ie).e("content")),"data-side":unref(xe),tabindex:"-1"},[createVNode(unref(ElFocusTrap),{loop:"",trapped:"","focus-start-el":"container","focus-trap-el":he.value||void 0,onReleaseRequested:$e,onFocusoutPrevented:Ne},{default:withCtx(()=>[renderSlot(Oe.$slots,"default")]),_:3},8,["focus-trap-el"]),Oe.showArrow?(openBlock(),createElementBlock("span",{key:0,ref_key:"arrowRef",ref:pe,style:normalizeStyle(unref(Ce)),class:normalizeClass(unref(Ie).e("arrow"))},null,6)):createCommentVNode("v-if",!0)],14,["data-side"]))}});var ElTourContent=_export_sfc$1(_sfc_main$q,[["__file","content.vue"]]),ElTourSteps=defineComponent({name:"ElTourSteps",props:{current:{type:Number,default:0}},emits:["update-total"],setup(le,{slots:oe,emit:ie}){let ue=0;return()=>{var de,he;const pe=(de=oe.default)==null?void 0:de.call(oe),_e=[];let Ce=0;function xe(Ie){isArray$3(Ie)&&Ie.forEach($e=>{var Ne;((Ne=($e==null?void 0:$e.type)||{})==null?void 0:Ne.name)==="ElTourStep"&&(_e.push($e),Ce+=1)})}return pe.length&&xe(flattedChildren((he=pe[0])==null?void 0:he.children)),ue!==Ce&&(ue=Ce,ie("update-total",Ce)),_e.length?_e[le.current]:null}}});const tourProps=buildProps({modelValue:Boolean,current:{type:Number,default:0},showArrow:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeIcon:{type:iconPropType},placement:tourContentProps.placement,contentStyle:{type:definePropType([Object])},mask:{type:definePropType([Boolean,Object]),default:!0},gap:{type:definePropType(Object),default:()=>({offset:6,radius:2})},zIndex:{type:Number},scrollIntoViewOptions:{type:definePropType([Boolean,Object]),default:()=>({block:"center"})},type:{type:definePropType(String)},appendTo:{type:definePropType([String,Object]),default:"body"},closeOnPressEscape:{type:Boolean,default:!0},targetAreaClickable:{type:Boolean,default:!0}}),tourEmits={[UPDATE_MODEL_EVENT]:le=>isBoolean(le),"update:current":le=>isNumber(le),close:le=>isNumber(le),finish:()=>!0,change:le=>isNumber(le)},__default__$8=defineComponent({name:"ElTour"}),_sfc_main$p=defineComponent({...__default__$8,props:tourProps,emits:tourEmits,setup(le,{emit:oe}){const ie=le,ue=useNamespace("tour"),de=ref(0),he=ref(),pe=useVModel(ie,"current",oe,{passive:!0}),_e=computed(()=>{var jt;return(jt=he.value)==null?void 0:jt.target}),Ce=computed(()=>[ue.b(),ze.value==="primary"?ue.m("primary"):""]),xe=computed(()=>{var jt;return((jt=he.value)==null?void 0:jt.placement)||ie.placement}),Ie=computed(()=>{var jt,_n;return(_n=(jt=he.value)==null?void 0:jt.contentStyle)!=null?_n:ie.contentStyle}),$e=computed(()=>{var jt,_n;return(_n=(jt=he.value)==null?void 0:jt.mask)!=null?_n:ie.mask}),Ne=computed(()=>!!$e.value&&ie.modelValue),Oe=computed(()=>isBoolean($e.value)?void 0:$e.value),Fe=computed(()=>{var jt,_n;return!!_e.value&&((_n=(jt=he.value)==null?void 0:jt.showArrow)!=null?_n:ie.showArrow)}),Ve=computed(()=>{var jt,_n;return(_n=(jt=he.value)==null?void 0:jt.scrollIntoViewOptions)!=null?_n:ie.scrollIntoViewOptions}),ze=computed(()=>{var jt,_n;return(_n=(jt=he.value)==null?void 0:jt.type)!=null?_n:ie.type}),{nextZIndex:Ue}=useZIndex(),Pt=Ue(),qe=computed(()=>{var jt;return(jt=ie.zIndex)!=null?jt:Pt}),{mergedPosInfo:Et,triggerTarget:kt}=useTarget(_e,toRef(ie,"modelValue"),toRef(ie,"gap"),$e,Ve);watch(()=>ie.modelValue,jt=>{jt||(pe.value=0)});const At=()=>{ie.closeOnPressEscape&&(oe("update:modelValue",!1),oe("close",pe.value))},Dt=jt=>{de.value=jt},Lt=useSlots();return provide(tourKey,{currentStep:he,current:pe,total:de,showClose:toRef(ie,"showClose"),closeIcon:toRef(ie,"closeIcon"),mergedType:ze,ns:ue,slots:Lt,updateModelValue(jt){oe("update:modelValue",jt)},onClose(){oe("close",pe.value)},onFinish(){oe("finish")},onChange(){oe("change",pe.value)}}),(jt,_n)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(unref(ElTeleport),{to:jt.appendTo},{default:withCtx(()=>{var bn,vn;return[createBaseVNode("div",mergeProps({class:unref(Ce)},jt.$attrs),[createVNode(ElTourMask,{visible:unref(Ne),fill:(bn=unref(Oe))==null?void 0:bn.color,style:normalizeStyle((vn=unref(Oe))==null?void 0:vn.style),pos:unref(Et),"z-index":unref(qe),"target-area-clickable":jt.targetAreaClickable},null,8,["visible","fill","style","pos","z-index","target-area-clickable"]),jt.modelValue?(openBlock(),createBlock(ElTourContent,{key:unref(pe),reference:unref(kt),placement:unref(xe),"show-arrow":unref(Fe),"z-index":unref(qe),style:normalizeStyle(unref(Ie)),onClose:At},{default:withCtx(()=>[createVNode(unref(ElTourSteps),{current:unref(pe),onUpdateTotal:Dt},{default:withCtx(()=>[renderSlot(jt.$slots,"default")]),_:3},8,["current"])]),_:3},8,["reference","placement","show-arrow","z-index","style"])):createCommentVNode("v-if",!0)],16)]}),_:3},8,["to"]),createCommentVNode(" just for IDE "),createCommentVNode("v-if",!0)],64))}});var Tour=_export_sfc$1(_sfc_main$p,[["__file","tour.vue"]]);const tourStepProps=buildProps({target:{type:definePropType([String,Object,Function])},title:String,description:String,showClose:{type:Boolean,default:void 0},closeIcon:{type:iconPropType},showArrow:{type:Boolean,default:void 0},placement:tourContentProps.placement,mask:{type:definePropType([Boolean,Object]),default:void 0},contentStyle:{type:definePropType([Object])},prevButtonProps:{type:definePropType(Object)},nextButtonProps:{type:definePropType(Object)},scrollIntoViewOptions:{type:definePropType([Boolean,Object]),default:void 0},type:{type:definePropType(String)}}),tourStepEmits={close:()=>!0},__default__$7=defineComponent({name:"ElTourStep"}),_sfc_main$o=defineComponent({...__default__$7,props:tourStepProps,emits:tourStepEmits,setup(le,{emit:oe}){const ie=le,{Close:ue}=CloseComponents,{t:de}=useLocale(),{currentStep:he,current:pe,total:_e,showClose:Ce,closeIcon:xe,mergedType:Ie,ns:$e,slots:Ne,updateModelValue:Oe,onClose:Fe,onFinish:Ve,onChange:ze}=inject(tourKey);watch(ie,Lt=>{he.value=Lt},{immediate:!0});const Ue=computed(()=>{var Lt;return(Lt=ie.showClose)!=null?Lt:Ce.value}),Pt=computed(()=>{var Lt,jt;return(jt=(Lt=ie.closeIcon)!=null?Lt:xe.value)!=null?jt:ue}),qe=Lt=>{if(Lt)return omit(Lt,["children","onClick"])},Et=()=>{var Lt,jt;pe.value-=1,(Lt=ie.prevButtonProps)!=null&&Lt.onClick&&((jt=ie.prevButtonProps)==null||jt.onClick()),ze()},kt=()=>{var Lt;pe.value>=_e.value-1?At():pe.value+=1,(Lt=ie.nextButtonProps)!=null&&Lt.onClick&&ie.nextButtonProps.onClick(),ze()},At=()=>{Dt(),Ve()},Dt=()=>{Oe(!1),Fe(),oe("close")};return(Lt,jt)=>(openBlock(),createElementBlock(Fragment,null,[unref(Ue)?(openBlock(),createElementBlock("button",{key:0,"aria-label":"Close",class:normalizeClass(unref($e).e("closebtn")),type:"button",onClick:Dt},[createVNode(unref(ElIcon),{class:normalizeClass(unref($e).e("close"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(Pt))))]),_:1},8,["class"])],2)):createCommentVNode("v-if",!0),createBaseVNode("header",{class:normalizeClass([unref($e).e("header"),{"show-close":unref(Ce)}])},[renderSlot(Lt.$slots,"header",{},()=>[createBaseVNode("span",{role:"heading",class:normalizeClass(unref($e).e("title"))},toDisplayString(Lt.title),3)])],2),createBaseVNode("div",{class:normalizeClass(unref($e).e("body"))},[renderSlot(Lt.$slots,"default",{},()=>[createBaseVNode("span",null,toDisplayString(Lt.description),1)])],2),createBaseVNode("footer",{class:normalizeClass(unref($e).e("footer"))},[createBaseVNode("div",{class:normalizeClass(unref($e).b("indicators"))},[unref(Ne).indicators?(openBlock(),createBlock(resolveDynamicComponent(unref(Ne).indicators),{key:0,current:unref(pe),total:unref(_e)},null,8,["current","total"])):(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(unref(_e),(_n,bn)=>(openBlock(),createElementBlock("span",{key:_n,class:normalizeClass([unref($e).b("indicator"),bn===unref(pe)?"is-active":""])},null,2))),128))],2),createBaseVNode("div",{class:normalizeClass(unref($e).b("buttons"))},[unref(pe)>0?(openBlock(),createBlock(unref(ElButton),mergeProps({key:0,size:"small",type:unref(Ie)},qe(Lt.prevButtonProps),{onClick:Et}),{default:withCtx(()=>{var _n,bn;return[createTextVNode(toDisplayString((bn=(_n=Lt.prevButtonProps)==null?void 0:_n.children)!=null?bn:unref(de)("el.tour.previous")),1)]}),_:1},16,["type"])):createCommentVNode("v-if",!0),unref(pe)<=unref(_e)-1?(openBlock(),createBlock(unref(ElButton),mergeProps({key:1,size:"small",type:unref(Ie)==="primary"?"default":"primary"},qe(Lt.nextButtonProps),{onClick:kt}),{default:withCtx(()=>{var _n,bn;return[createTextVNode(toDisplayString((bn=(_n=Lt.nextButtonProps)==null?void 0:_n.children)!=null?bn:unref(pe)===unref(_e)-1?unref(de)("el.tour.finish"):unref(de)("el.tour.next")),1)]}),_:1},16,["type"])):createCommentVNode("v-if",!0)],2)],2)],64))}});var TourStep=_export_sfc$1(_sfc_main$o,[["__file","step.vue"]]);const ElTour=withInstall(Tour,{TourStep}),ElTourStep=withNoopInstall(TourStep),anchorProps=buildProps({container:{type:definePropType([String,Object])},offset:{type:Number,default:0},bound:{type:Number,default:15},duration:{type:Number,default:300},marker:{type:Boolean,default:!0},type:{type:definePropType(String),default:"default"},direction:{type:definePropType(String),default:"vertical"}}),anchorEmits={change:le=>isString$1(le),click:(le,oe)=>le instanceof MouseEvent&&(isString$1(oe)||isUndefined(oe))},anchorKey=Symbol("anchor"),__default__$6=defineComponent({name:"ElAnchor"}),_sfc_main$n=defineComponent({...__default__$6,props:anchorProps,emits:anchorEmits,setup(le,{expose:oe,emit:ie}){const ue=le,de=ref(""),he=ref(null),pe=ref(null),_e=ref(),Ce={};let xe=!1,Ie=0;const $e=useNamespace("anchor"),Ne=computed(()=>[$e.b(),ue.type==="underline"?$e.m("underline"):"",$e.m(ue.direction)]),Oe=Lt=>{Ce[Lt.href]=Lt.el},Fe=Lt=>{delete Ce[Lt]},Ve=Lt=>{de.value!==Lt&&(de.value=Lt,ie("change",Lt))};let ze=null;const Ue=Lt=>{if(!_e.value)return;const jt=getElement(Lt);if(!jt)return;ze&&ze(),xe=!0;const _n=getScrollElement(jt,_e.value),bn=getOffsetTopDistance(jt,_n),vn=_n.scrollHeight-_n.clientHeight,Tn=Math.min(bn-ue.offset,vn);ze=animateScrollTo(_e.value,Ie,Tn,ue.duration,()=>{setTimeout(()=>{xe=!1},20)})},Pt=Lt=>{Lt&&(Ve(Lt),Ue(Lt))},qe=(Lt,jt)=>{ie("click",Lt,jt),Pt(jt)},Et=throttleByRaf(()=>{_e.value&&(Ie=getScrollTop(_e.value));const Lt=kt();xe||isUndefined(Lt)||Ve(Lt)}),kt=()=>{if(!_e.value)return;const Lt=getScrollTop(_e.value),jt=[];for(const _n of Object.keys(Ce)){const bn=getElement(_n);if(!bn)continue;const vn=getScrollElement(bn,_e.value),Tn=getOffsetTopDistance(bn,vn);jt.push({top:Tn-ue.offset-ue.bound,href:_n})}jt.sort((_n,bn)=>_n.top-bn.top);for(let _n=0;_n<jt.length;_n++){const bn=jt[_n],vn=jt[_n+1];if(_n===0&&Lt===0)return"";if(bn.top<=Lt&&(!vn||vn.top>Lt))return bn.href}},At=()=>{const Lt=getElement(ue.container);!Lt||isWindow(Lt)?_e.value=window:_e.value=Lt};useEventListener(_e,"scroll",Et);const Dt=computed(()=>{if(!he.value||!pe.value||!de.value)return{};const Lt=Ce[de.value];if(!Lt)return{};const jt=he.value.getBoundingClientRect(),_n=pe.value.getBoundingClientRect(),bn=Lt.getBoundingClientRect();return ue.direction==="horizontal"?{left:`${bn.left-jt.left}px`,width:`${bn.width}px`,opacity:1}:{top:`${bn.top-jt.top+(bn.height-_n.height)/2}px`,opacity:1}});return onMounted(()=>{At();const Lt=decodeURIComponent(window.location.hash);getElement(Lt)?Pt(Lt):Et()}),watch(()=>ue.container,()=>{At()}),provide(anchorKey,{ns:$e,direction:ue.direction,currentAnchor:de,addLink:Oe,removeLink:Fe,handleClick:qe}),oe({scrollTo:Pt}),(Lt,jt)=>(openBlock(),createElementBlock("div",{ref_key:"anchorRef",ref:he,class:normalizeClass(unref(Ne))},[Lt.marker?(openBlock(),createElementBlock("div",{key:0,ref_key:"markerRef",ref:pe,class:normalizeClass(unref($e).e("marker")),style:normalizeStyle(unref(Dt))},null,6)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref($e).e("list"))},[renderSlot(Lt.$slots,"default")],2)],2))}});var Anchor=_export_sfc$1(_sfc_main$n,[["__file","anchor.vue"]]);const anchorLinkProps=buildProps({title:String,href:String}),__default__$5=defineComponent({name:"ElAnchorLink"}),_sfc_main$m=defineComponent({...__default__$5,props:anchorLinkProps,setup(le){const oe=le,ie=ref(null),{ns:ue,direction:de,currentAnchor:he,addLink:pe,removeLink:_e,handleClick:Ce}=inject(anchorKey),xe=computed(()=>[ue.e("link"),ue.is("active",he.value===oe.href)]),Ie=$e=>{Ce($e,oe.href)};return watch(()=>oe.href,($e,Ne)=>{nextTick(()=>{Ne&&_e(Ne),$e&&pe({href:$e,el:ie.value})})}),onMounted(()=>{const{href:$e}=oe;$e&&pe({href:$e,el:ie.value})}),onBeforeUnmount(()=>{const{href:$e}=oe;$e&&_e($e)}),($e,Ne)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(ue).e("item"))},[createBaseVNode("a",{ref_key:"linkRef",ref:ie,class:normalizeClass(unref(xe)),href:$e.href,onClick:Ie},[renderSlot($e.$slots,"default",{},()=>[createTextVNode(toDisplayString($e.title),1)])],10,["href"]),$e.$slots["sub-link"]&&unref(de)==="vertical"?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(ue).e("list"))},[renderSlot($e.$slots,"sub-link")],2)):createCommentVNode("v-if",!0)],2))}});var AnchorLink=_export_sfc$1(_sfc_main$m,[["__file","anchor-link.vue"]]);const ElAnchor=withInstall(Anchor,{AnchorLink}),ElAnchorLink=withNoopInstall(AnchorLink),segmentedProps=buildProps({options:{type:definePropType(Array),default:()=>[]},modelValue:{type:[String,Number,Boolean],default:void 0},block:Boolean,size:useSizeProp,disabled:Boolean,validateEvent:{type:Boolean,default:!0},id:String,name:String,...useAriaProps(["ariaLabel"])}),segmentedEmits={[UPDATE_MODEL_EVENT]:le=>isString$1(le)||isNumber(le)||isBoolean(le),[CHANGE_EVENT]:le=>isString$1(le)||isNumber(le)||isBoolean(le)},__default__$4=defineComponent({name:"ElSegmented"}),_sfc_main$l=defineComponent({...__default__$4,props:segmentedProps,emits:segmentedEmits,setup(le,{emit:oe}){const ie=le,ue=useNamespace("segmented"),de=useId(),he=useFormSize(),pe=useFormDisabled(),{formItem:_e}=useFormItem(),{inputId:Ce,isLabeledByFormItem:xe}=useFormItemInputId(ie,{formItemContext:_e}),Ie=ref(null),$e=useActiveElement(),Ne=reactive({isInit:!1,width:0,translateX:0,focusVisible:!1}),Oe=jt=>{const _n=Fe(jt);oe(UPDATE_MODEL_EVENT,_n),oe(CHANGE_EVENT,_n)},Fe=jt=>isObject$d(jt)?jt.value:jt,Ve=jt=>isObject$d(jt)?jt.label:jt,ze=jt=>!!(pe.value||isObject$d(jt)&&jt.disabled),Ue=jt=>ie.modelValue===Fe(jt),Pt=jt=>ie.options.find(_n=>Fe(_n)===jt),qe=jt=>[ue.e("item"),ue.is("selected",Ue(jt)),ue.is("disabled",ze(jt))],Et=()=>{if(!Ie.value)return;const jt=Ie.value.querySelector(".is-selected"),_n=Ie.value.querySelector(".is-selected input");if(!jt||!_n){Ne.width=0,Ne.translateX=0,Ne.focusVisible=!1;return}const bn=jt.getBoundingClientRect();Ne.isInit=!0,Ne.width=bn.width,Ne.translateX=jt.offsetLeft;try{Ne.focusVisible=_n.matches(":focus-visible")}catch{}},kt=computed(()=>[ue.b(),ue.m(he.value),ue.is("block",ie.block)]),At=computed(()=>({width:`${Ne.width}px`,transform:`translateX(${Ne.translateX}px)`,display:Ne.isInit?"block":"none"})),Dt=computed(()=>[ue.e("item-selected"),ue.is("disabled",ze(Pt(ie.modelValue))),ue.is("focus-visible",Ne.focusVisible)]),Lt=computed(()=>ie.name||de.value);return useResizeObserver(Ie,Et),watch($e,Et),watch(()=>ie.modelValue,()=>{var jt;Et(),ie.validateEvent&&((jt=_e==null?void 0:_e.validate)==null||jt.call(_e,"change").catch(_n=>void 0))},{flush:"post"}),(jt,_n)=>(openBlock(),createElementBlock("div",{id:unref(Ce),ref_key:"segmentedRef",ref:Ie,class:normalizeClass(unref(kt)),role:"radiogroup","aria-label":unref(xe)?void 0:jt.ariaLabel||"segmented","aria-labelledby":unref(xe)?unref(_e).labelId:void 0},[createBaseVNode("div",{class:normalizeClass(unref(ue).e("group"))},[createBaseVNode("div",{style:normalizeStyle(unref(At)),class:normalizeClass(unref(Dt))},null,6),(openBlock(!0),createElementBlock(Fragment,null,renderList(jt.options,(bn,vn)=>(openBlock(),createElementBlock("label",{key:vn,class:normalizeClass(qe(bn))},[createBaseVNode("input",{class:normalizeClass(unref(ue).e("item-input")),type:"radio",name:unref(Lt),disabled:ze(bn),checked:Ue(bn),onChange:Tn=>Oe(bn)},null,42,["name","disabled","checked","onChange"]),createBaseVNode("div",{class:normalizeClass(unref(ue).e("item-label"))},[renderSlot(jt.$slots,"default",{item:bn},()=>[createTextVNode(toDisplayString(Ve(bn)),1)])],2)],2))),128))],2)],10,["id","aria-label","aria-labelledby"]))}});var Segmented=_export_sfc$1(_sfc_main$l,[["__file","segmented.vue"]]);const ElSegmented=withInstall(Segmented),filterOption=(le,oe)=>{const ie=le.toLowerCase();return(oe.label||oe.value).toLowerCase().includes(ie)},getMentionCtx=(le,oe,ie)=>{const{selectionEnd:ue}=le;if(ue===null)return;const de=le.value,he=castArray$1(oe);let pe=-1,_e;for(let Ce=ue-1;Ce>=0;--Ce){const xe=de[Ce];if(xe===ie||xe===`
`||xe==="\r"){pe=Ce;continue}if(he.includes(xe)){const Ie=pe===-1?ue:pe;_e={pattern:de.slice(Ce+1,Ie),start:Ce+1,end:Ie,prefix:xe,prefixIndex:Ce,splitIndex:pe,selectionEnd:ue};break}}return _e},getCursorPosition=(le,oe={debug:!1,useSelectionEnd:!1})=>{const ie=le.selectionStart!==null?le.selectionStart:0,ue=le.selectionEnd!==null?le.selectionEnd:0,de=oe.useSelectionEnd?ue:ie,he=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"];if(oe.debug){const Ne=document.querySelector("#input-textarea-caret-position-mirror-div");Ne!=null&&Ne.parentNode&&Ne.parentNode.removeChild(Ne)}const pe=document.createElement("div");pe.id="input-textarea-caret-position-mirror-div",document.body.appendChild(pe);const _e=pe.style,Ce=window.getComputedStyle(le),xe=le.nodeName==="INPUT";_e.whiteSpace=xe?"nowrap":"pre-wrap",xe||(_e.wordWrap="break-word"),_e.position="absolute",oe.debug||(_e.visibility="hidden"),he.forEach(Ne=>{if(xe&&Ne==="lineHeight")if(Ce.boxSizing==="border-box"){const Oe=Number.parseInt(Ce.height),Fe=Number.parseInt(Ce.paddingTop)+Number.parseInt(Ce.paddingBottom)+Number.parseInt(Ce.borderTopWidth)+Number.parseInt(Ce.borderBottomWidth),Ve=Fe+Number.parseInt(Ce.lineHeight);Oe>Ve?_e.lineHeight=`${Oe-Fe}px`:Oe===Ve?_e.lineHeight=Ce.lineHeight:_e.lineHeight="0"}else _e.lineHeight=Ce.height;else _e[Ne]=Ce[Ne]}),isFirefox()?le.scrollHeight>Number.parseInt(Ce.height)&&(_e.overflowY="scroll"):_e.overflow="hidden",pe.textContent=le.value.slice(0,Math.max(0,de)),xe&&pe.textContent&&(pe.textContent=pe.textContent.replace(/\s/g,""));const Ie=document.createElement("span");Ie.textContent=le.value.slice(Math.max(0,de))||".",Ie.style.position="relative",Ie.style.left=`${-le.scrollLeft}px`,Ie.style.top=`${-le.scrollTop}px`,pe.appendChild(Ie);const $e={top:Ie.offsetTop+Number.parseInt(Ce.borderTopWidth),left:Ie.offsetLeft+Number.parseInt(Ce.borderLeftWidth),height:Number.parseInt(Ce.fontSize)*1.5};return oe.debug?Ie.style.backgroundColor="#aaa":document.body.removeChild(pe),$e.left>=le.clientWidth&&($e.left=le.clientWidth),$e},mentionProps=buildProps({...inputProps,options:{type:definePropType(Array),default:()=>[]},prefix:{type:definePropType([String,Array]),default:"@",validator:le=>isString$1(le)?le.length===1:le.every(oe=>isString$1(oe)&&oe.length===1)},split:{type:String,default:" ",validator:le=>le.length===1},filterOption:{type:definePropType([Boolean,Function]),default:()=>filterOption,validator:le=>le===!1?!0:isFunction$2(le)},placement:{type:definePropType(String),default:"bottom"},showArrow:Boolean,offset:{type:Number,default:0},whole:Boolean,checkIsWhole:{type:definePropType(Function)},modelValue:String,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:definePropType(Object),default:()=>({})}}),mentionEmits={[UPDATE_MODEL_EVENT]:le=>isString$1(le),search:(le,oe)=>isString$1(le)&&isString$1(oe),select:(le,oe)=>isString$1(le.value)&&isString$1(oe),focus:le=>le instanceof FocusEvent,blur:le=>le instanceof FocusEvent},mentionDropdownProps=buildProps({options:{type:definePropType(Array),default:()=>[]},loading:Boolean,disabled:Boolean,contentId:String,ariaLabel:String}),mentionDropdownEmits={select:le=>isString$1(le.value)},__default__$3=defineComponent({name:"ElMentionDropdown"}),_sfc_main$k=defineComponent({...__default__$3,props:mentionDropdownProps,emits:mentionDropdownEmits,setup(le,{expose:oe,emit:ie}){const ue=le,de=useNamespace("mention"),{t:he}=useLocale(),pe=ref(-1),_e=ref(),Ce=ref(),xe=ref(),Ie=(qe,Et)=>[de.be("dropdown","item"),de.is("hovering",pe.value===Et),de.is("disabled",qe.disabled||ue.disabled)],$e=qe=>{qe.disabled||ue.disabled||ie("select",qe)},Ne=qe=>{pe.value=qe},Oe=computed(()=>ue.disabled||ue.options.every(qe=>qe.disabled)),Fe=computed(()=>ue.options[pe.value]),Ve=()=>{Fe.value&&ie("select",Fe.value)},ze=qe=>{const{options:Et}=ue;if(Et.length===0||Oe.value)return;qe==="next"?(pe.value++,pe.value===Et.length&&(pe.value=0)):qe==="prev"&&(pe.value--,pe.value<0&&(pe.value=Et.length-1));const kt=Et[pe.value];if(kt.disabled){ze(qe);return}nextTick(()=>Ue(kt))},Ue=qe=>{var Et,kt,At,Dt;const{options:Lt}=ue,jt=Lt.findIndex(bn=>bn.value===qe.value),_n=(Et=Ce.value)==null?void 0:Et[jt];if(_n){const bn=(At=(kt=xe.value)==null?void 0:kt.querySelector)==null?void 0:At.call(kt,`.${de.be("dropdown","wrap")}`);bn&&scrollIntoView(bn,_n)}(Dt=_e.value)==null||Dt.handleScroll()};return watch(()=>ue.options,()=>{Oe.value||ue.options.length===0?pe.value=-1:pe.value=0},{immediate:!0}),oe({hoveringIndex:pe,navigateOptions:ze,selectHoverOption:Ve,hoverOption:Fe}),(qe,Et)=>(openBlock(),createElementBlock("div",{ref_key:"dropdownRef",ref:xe,class:normalizeClass(unref(de).b("dropdown"))},[qe.$slots.header?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(de).be("dropdown","header"))},[renderSlot(qe.$slots,"header")],2)):createCommentVNode("v-if",!0),withDirectives(createVNode(unref(ElScrollbar),{id:qe.contentId,ref_key:"scrollbarRef",ref:_e,tag:"ul","wrap-class":unref(de).be("dropdown","wrap"),"view-class":unref(de).be("dropdown","list"),role:"listbox","aria-label":qe.ariaLabel,"aria-orientation":"vertical"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(qe.options,(kt,At)=>(openBlock(),createElementBlock("li",{id:`${qe.contentId}-${At}`,ref_for:!0,ref_key:"optionRefs",ref:Ce,key:kt.value,class:normalizeClass(Ie(kt,At)),role:"option","aria-disabled":kt.disabled||qe.disabled||void 0,"aria-selected":pe.value===At,onMouseenter:Dt=>Ne(At),onClick:withModifiers(Dt=>$e(kt),["stop"])},[renderSlot(qe.$slots,"label",{item:kt,index:At},()=>{var Dt;return[createBaseVNode("span",null,toDisplayString((Dt=kt.label)!=null?Dt:kt.value),1)]})],42,["id","aria-disabled","aria-selected","onMouseenter","onClick"]))),128))]),_:3},8,["id","wrap-class","view-class","aria-label"]),[[vShow,qe.options.length>0&&!qe.loading]]),qe.loading?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(de).be("dropdown","loading"))},[renderSlot(qe.$slots,"loading",{},()=>[createTextVNode(toDisplayString(unref(he)("el.mention.loading")),1)])],2)):createCommentVNode("v-if",!0),qe.$slots.footer?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(unref(de).be("dropdown","footer"))},[renderSlot(qe.$slots,"footer")],2)):createCommentVNode("v-if",!0)],2))}});var ElMentionDropdown=_export_sfc$1(_sfc_main$k,[["__file","mention-dropdown.vue"]]);const __default__$2=defineComponent({name:"ElMention"}),_sfc_main$j=defineComponent({...__default__$2,props:mentionProps,emits:mentionEmits,setup(le,{expose:oe,emit:ie}){const ue=le,de=computed(()=>pick(ue,Object.keys(inputProps))),he=useNamespace("mention"),pe=useFormDisabled(),_e=useId(),Ce=ref(),xe=ref(),Ie=ref(),$e=ref(!1),Ne=ref(),Oe=ref(),Fe=computed(()=>ue.showArrow?ue.placement:`${ue.placement}-start`),Ve=computed(()=>ue.showArrow?["bottom","top"]:["bottom-start","top-start"]),ze=computed(()=>{const{filterOption:vn,options:Tn}=ue;return!Oe.value||!vn?Tn:Tn.filter($n=>vn(Oe.value.pattern,$n))}),Ue=computed(()=>$e.value&&(!!ze.value.length||ue.loading)),Pt=computed(()=>{var vn;return`${_e.value}-${(vn=Ie.value)==null?void 0:vn.hoveringIndex}`}),qe=vn=>{ie("update:modelValue",vn),jt()},Et=vn=>{var Tn,$n,wn,Cn;if("key"in vn&&!((Tn=Ce.value)!=null&&Tn.isComposing)){if(["ArrowLeft","ArrowRight"].includes(vn.key))jt();else if(["ArrowUp","ArrowDown"].includes(vn.key)){if(!$e.value)return;vn.preventDefault();const Sn=vn.key==="ArrowUp"?"prev":"next";($n=Ie.value)==null||$n.navigateOptions(Sn)}else if(["Enter"].includes(vn.key)){if(!$e.value)return;vn.preventDefault(),(wn=Ie.value)!=null&&wn.hoverOption?(Cn=Ie.value)==null||Cn.selectHoverOption():$e.value=!1}else if(["Escape"].includes(vn.key)){if(!$e.value)return;vn.preventDefault(),$e.value=!1}else if(["Backspace"].includes(vn.key)&&ue.whole&&Oe.value){const{splitIndex:Sn,selectionEnd:In,pattern:En,prefixIndex:xn,prefix:kn}=Oe.value,On=Lt();if(!On)return;const Mn=On.value,Un=ue.options.find(Hn=>Hn.value===En);if((isFunction$2(ue.checkIsWhole)?ue.checkIsWhole(En,kn):Un)&&Sn!==-1&&Sn+1===In){vn.preventDefault();const Hn=Mn.slice(0,xn)+Mn.slice(Sn+1);ie(UPDATE_MODEL_EVENT,Hn);const Rn=xn;nextTick(()=>{On.selectionStart=Rn,On.selectionEnd=Rn,bn()})}}}},{wrapperRef:kt}=useFocusController(Ce,{beforeFocus(){return pe.value},afterFocus(){jt()},beforeBlur(vn){var Tn;return(Tn=xe.value)==null?void 0:Tn.isFocusInsideContent(vn)},afterBlur(){$e.value=!1}}),At=()=>{jt()},Dt=vn=>{if(!Oe.value)return;const Tn=Lt();if(!Tn)return;const $n=Tn.value,{split:wn}=ue,Cn=$n.slice(Oe.value.end),Sn=Cn.startsWith(wn),In=`${vn.value}${Sn?"":wn}`,En=$n.slice(0,Oe.value.start)+In+Cn;ie(UPDATE_MODEL_EVENT,En),ie("select",vn,Oe.value.prefix);const xn=Oe.value.start+In.length+(Sn?1:0);nextTick(()=>{Tn.selectionStart=xn,Tn.selectionEnd=xn,Tn.focus(),bn()})},Lt=()=>{var vn,Tn;return ue.type==="textarea"?(vn=Ce.value)==null?void 0:vn.textarea:(Tn=Ce.value)==null?void 0:Tn.input},jt=()=>{setTimeout(()=>{_n(),bn(),nextTick(()=>{var vn;return(vn=xe.value)==null?void 0:vn.updatePopper()})},0)},_n=()=>{const vn=Lt();if(!vn)return;const Tn=getCursorPosition(vn),$n=vn.getBoundingClientRect(),wn=Ce.value.$el.getBoundingClientRect();Ne.value={position:"absolute",width:0,height:`${Tn.height}px`,left:`${Tn.left+$n.left-wn.left}px`,top:`${Tn.top+$n.top-wn.top}px`}},bn=()=>{const vn=Lt();if(document.activeElement!==vn){$e.value=!1;return}const{prefix:Tn,split:$n}=ue;if(Oe.value=getMentionCtx(vn,Tn,$n),Oe.value&&Oe.value.splitIndex===-1){$e.value=!0,ie("search",Oe.value.pattern,Oe.value.prefix);return}$e.value=!1};return oe({input:Ce,tooltip:xe}),(vn,Tn)=>(openBlock(),createElementBlock("div",{ref_key:"wrapperRef",ref:kt,class:normalizeClass(unref(he).b())},[createVNode(unref(ElInput),mergeProps(mergeProps(unref(de),vn.$attrs),{ref_key:"elInputRef",ref:Ce,"model-value":vn.modelValue,disabled:unref(pe),role:unref(Ue)?"combobox":void 0,"aria-activedescendant":unref(Ue)?unref(Pt)||"":void 0,"aria-controls":unref(Ue)?unref(_e):void 0,"aria-expanded":unref(Ue)||void 0,"aria-label":vn.ariaLabel,"aria-autocomplete":unref(Ue)?"none":void 0,"aria-haspopup":unref(Ue)?"listbox":void 0,onInput:qe,onKeydown:Et,onMousedown:At}),createSlots({_:2},[renderList(vn.$slots,($n,wn)=>({name:wn,fn:withCtx(Cn=>[renderSlot(vn.$slots,wn,normalizeProps(guardReactiveProps(Cn)))])}))]),1040,["model-value","disabled","role","aria-activedescendant","aria-controls","aria-expanded","aria-label","aria-autocomplete","aria-haspopup"]),createVNode(unref(ElTooltip),{ref_key:"tooltipRef",ref:xe,visible:unref(Ue),"popper-class":[unref(he).e("popper"),vn.popperClass],"popper-options":vn.popperOptions,placement:unref(Fe),"fallback-placements":unref(Ve),effect:"light",pure:"",offset:vn.offset,"show-arrow":vn.showArrow},{default:withCtx(()=>[createBaseVNode("div",{style:normalizeStyle(Ne.value)},null,4)]),content:withCtx(()=>{var $n;return[createVNode(ElMentionDropdown,{ref_key:"dropdownRef",ref:Ie,options:unref(ze),disabled:unref(pe),loading:vn.loading,"content-id":unref(_e),"aria-label":vn.ariaLabel,onSelect:Dt,onClick:withModifiers(($n=Ce.value)==null?void 0:$n.focus,["stop"])},createSlots({_:2},[renderList(vn.$slots,(wn,Cn)=>({name:Cn,fn:withCtx(Sn=>[renderSlot(vn.$slots,Cn,normalizeProps(guardReactiveProps(Sn)))])}))]),1032,["options","disabled","loading","content-id","aria-label","onClick"])]}),_:3},8,["visible","popper-class","popper-options","placement","fallback-placements","offset","show-arrow"])],2))}});var Mention=_export_sfc$1(_sfc_main$j,[["__file","mention.vue"]]);const ElMention=withInstall(Mention);var Components=[ElAffix,ElAlert,ElAutocomplete,ElAutoResizer,ElAvatar,ElBacktop,ElBadge,ElBreadcrumb,ElBreadcrumbItem,ElButton,ElButtonGroup$1,ElCalendar,ElCard,ElCarousel,ElCarouselItem,ElCascader,ElCascaderPanel,ElCheckTag,ElCheckbox,ElCheckboxButton,ElCheckboxGroup$1,ElCol,ElCollapse,ElCollapseItem,ElCollapseTransition,ElColorPicker,ElConfigProvider,ElContainer,ElAside,ElFooter,ElHeader,ElMain,ElDatePicker,ElDescriptions,ElDescriptionsItem,ElDialog,ElDivider,ElDrawer,ElDropdown,ElDropdownItem,ElDropdownMenu,ElEmpty,ElForm,ElFormItem,ElIcon,ElImage,ElImageViewer,ElInput,ElInputNumber,ElLink,ElMenu,ElMenuItem,ElMenuItemGroup,ElSubMenu,ElPageHeader,ElPagination,ElPopconfirm,ElPopover,ElPopper,ElProgress,ElRadio,ElRadioButton,ElRadioGroup,ElRate,ElResult,ElRow,ElScrollbar,ElSelect,ElOption,ElOptionGroup,ElSelectV2,ElSkeleton,ElSkeletonItem,ElSlider,ElSpace,ElStatistic,ElCountdown,ElSteps,ElStep,ElSwitch,ElTable,ElTableColumn,ElTableV2,ElTabs,ElTabPane,ElTag,ElText,ElTimePicker,ElTimeSelect,ElTimeline,ElTimelineItem,ElTooltip,ElTooltipV2,ElTransfer,ElTree,ElTreeSelect,ElTreeV2,ElUpload,ElWatermark,ElTour,ElTourStep,ElAnchor,ElAnchorLink,ElSegmented,ElMention];const SCOPE="ElInfiniteScroll",CHECK_INTERVAL=50,DEFAULT_DELAY=200,DEFAULT_DISTANCE=0,attributes={delay:{type:Number,default:DEFAULT_DELAY},distance:{type:Number,default:DEFAULT_DISTANCE},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},getScrollOptions=(le,oe)=>Object.entries(attributes).reduce((ie,[ue,de])=>{var he,pe;const{type:_e,default:Ce}=de,xe=le.getAttribute(`infinite-scroll-${ue}`);let Ie=(pe=(he=oe[xe])!=null?he:xe)!=null?pe:Ce;return Ie=Ie==="false"?!1:Ie,Ie=_e(Ie),ie[ue]=Number.isNaN(Ie)?Ce:Ie,ie},{}),destroyObserver=le=>{const{observer:oe}=le[SCOPE];oe&&(oe.disconnect(),delete le[SCOPE].observer)},handleScroll=(le,oe)=>{const{container:ie,containerEl:ue,instance:de,observer:he,lastScrollTop:pe}=le[SCOPE],{disabled:_e,distance:Ce}=getScrollOptions(le,de),{clientHeight:xe,scrollHeight:Ie,scrollTop:$e}=ue,Ne=$e-pe;if(le[SCOPE].lastScrollTop=$e,he||_e||Ne<0)return;let Oe=!1;if(ie===le)Oe=Ie-(xe+$e)<=Ce;else{const{clientTop:Fe,scrollHeight:Ve}=le,ze=getOffsetTopDistance(le,ue);Oe=$e+xe>=ze+Fe+Ve-Ce}Oe&&oe.call(de)};function checkFull(le,oe){const{containerEl:ie,instance:ue}=le[SCOPE],{disabled:de}=getScrollOptions(le,ue);de||ie.clientHeight===0||(ie.scrollHeight<=ie.clientHeight?oe.call(ue):destroyObserver(le))}const InfiniteScroll={async mounted(le,oe){const{instance:ie,value:ue}=oe;isFunction$2(ue)||throwError(SCOPE,"'v-infinite-scroll' binding value must be a function"),await nextTick();const{delay:de,immediate:he}=getScrollOptions(le,ie),pe=getScrollContainer(le,!0),_e=pe===window?document.documentElement:pe,Ce=throttle(handleScroll.bind(null,le,ue),de);if(pe){if(le[SCOPE]={instance:ie,container:pe,containerEl:_e,delay:de,cb:ue,onScroll:Ce,lastScrollTop:_e.scrollTop},he){const xe=new MutationObserver(throttle(checkFull.bind(null,le,ue),CHECK_INTERVAL));le[SCOPE].observer=xe,xe.observe(le,{childList:!0,subtree:!0}),checkFull(le,ue)}pe.addEventListener("scroll",Ce)}},unmounted(le){if(!le[SCOPE])return;const{container:oe,onScroll:ie}=le[SCOPE];oe==null||oe.removeEventListener("scroll",ie),destroyObserver(le)},async updated(le){if(!le[SCOPE])await nextTick();else{const{containerEl:oe,cb:ie,observer:ue}=le[SCOPE];oe.clientHeight&&ue&&checkFull(le,ie)}}},_InfiniteScroll=InfiniteScroll;_InfiniteScroll.install=le=>{le.directive("InfiniteScroll",_InfiniteScroll)};const ElInfiniteScroll=_InfiniteScroll;function createLoadingComponent(le){let oe;const ie=ref(!1),ue=reactive({...le,originalPosition:"",originalOverflow:"",visible:!1});function de(Ne){ue.text=Ne}function he(){const Ne=ue.parent,Oe=$e.ns;if(!Ne.vLoadingAddClassList){let Fe=Ne.getAttribute("loading-number");Fe=Number.parseInt(Fe)-1,Fe?Ne.setAttribute("loading-number",Fe.toString()):(removeClass(Ne,Oe.bm("parent","relative")),Ne.removeAttribute("loading-number")),removeClass(Ne,Oe.bm("parent","hidden"))}pe(),Ie.unmount()}function pe(){var Ne,Oe;(Oe=(Ne=$e.$el)==null?void 0:Ne.parentNode)==null||Oe.removeChild($e.$el)}function _e(){var Ne;le.beforeClose&&!le.beforeClose()||(ie.value=!0,clearTimeout(oe),oe=setTimeout(Ce,400),ue.visible=!1,(Ne=le.closed)==null||Ne.call(le))}function Ce(){if(!ie.value)return;const Ne=ue.parent;ie.value=!1,Ne.vLoadingAddClassList=void 0,he()}const Ie=createApp(defineComponent({name:"ElLoading",setup(Ne,{expose:Oe}){const{ns:Fe,zIndex:Ve}=useGlobalComponentSettings("loading");return Oe({ns:Fe,zIndex:Ve}),()=>{const ze=ue.spinner||ue.svg,Ue=h$3("svg",{class:"circular",viewBox:ue.svgViewBox?ue.svgViewBox:"0 0 50 50",...ze?{innerHTML:ze}:{}},[h$3("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),Pt=ue.text?h$3("p",{class:Fe.b("text")},[ue.text]):void 0;return h$3(Transition,{name:Fe.b("fade"),onAfterLeave:Ce},{default:withCtx(()=>[withDirectives(createVNode("div",{style:{backgroundColor:ue.background||""},class:[Fe.b("mask"),ue.customClass,ue.fullscreen?"is-fullscreen":""]},[h$3("div",{class:Fe.b("spinner")},[Ue,Pt])]),[[vShow,ue.visible]])])})}}})),$e=Ie.mount(document.createElement("div"));return{...toRefs(ue),setText:de,removeElLoadingChild:pe,close:_e,handleAfterLeave:Ce,vm:$e,get $el(){return $e.$el}}}let fullscreenInstance;const Loading=function(le={}){if(!isClient)return;const oe=resolveOptions(le);if(oe.fullscreen&&fullscreenInstance)return fullscreenInstance;const ie=createLoadingComponent({...oe,closed:()=>{var de;(de=oe.closed)==null||de.call(oe),oe.fullscreen&&(fullscreenInstance=void 0)}});addStyle(oe,oe.parent,ie),addClassList(oe,oe.parent,ie),oe.parent.vLoadingAddClassList=()=>addClassList(oe,oe.parent,ie);let ue=oe.parent.getAttribute("loading-number");return ue?ue=`${Number.parseInt(ue)+1}`:ue="1",oe.parent.setAttribute("loading-number",ue),oe.parent.appendChild(ie.$el),nextTick(()=>ie.visible.value=oe.visible),oe.fullscreen&&(fullscreenInstance=ie),ie},resolveOptions=le=>{var oe,ie,ue,de;let he;return isString$1(le.target)?he=(oe=document.querySelector(le.target))!=null?oe:document.body:he=le.target||document.body,{parent:he===document.body||le.body?document.body:he,background:le.background||"",svg:le.svg||"",svgViewBox:le.svgViewBox||"",spinner:le.spinner||!1,text:le.text||"",fullscreen:he===document.body&&((ie=le.fullscreen)!=null?ie:!0),lock:(ue=le.lock)!=null?ue:!1,customClass:le.customClass||"",visible:(de=le.visible)!=null?de:!0,beforeClose:le.beforeClose,closed:le.closed,target:he}},addStyle=async(le,oe,ie)=>{const{nextZIndex:ue}=ie.vm.zIndex||ie.vm._.exposed.zIndex,de={};if(le.fullscreen)ie.originalPosition.value=getStyle(document.body,"position"),ie.originalOverflow.value=getStyle(document.body,"overflow"),de.zIndex=ue();else if(le.parent===document.body){ie.originalPosition.value=getStyle(document.body,"position"),await nextTick();for(const he of["top","left"]){const pe=he==="top"?"scrollTop":"scrollLeft";de[he]=`${le.target.getBoundingClientRect()[he]+document.body[pe]+document.documentElement[pe]-Number.parseInt(getStyle(document.body,`margin-${he}`),10)}px`}for(const he of["height","width"])de[he]=`${le.target.getBoundingClientRect()[he]}px`}else ie.originalPosition.value=getStyle(oe,"position");for(const[he,pe]of Object.entries(de))ie.$el.style[he]=pe},addClassList=(le,oe,ie)=>{const ue=ie.vm.ns||ie.vm._.exposed.ns;["absolute","fixed","sticky"].includes(ie.originalPosition.value)?removeClass(oe,ue.bm("parent","relative")):addClass(oe,ue.bm("parent","relative")),le.fullscreen&&le.lock?addClass(oe,ue.bm("parent","hidden")):removeClass(oe,ue.bm("parent","hidden"))},INSTANCE_KEY=Symbol("ElLoading"),createInstance=(le,oe)=>{var ie,ue,de,he;const pe=oe.instance,_e=Ne=>isObject$d(oe.value)?oe.value[Ne]:void 0,Ce=Ne=>{const Oe=isString$1(Ne)&&(pe==null?void 0:pe[Ne])||Ne;return Oe&&ref(Oe)},xe=Ne=>Ce(_e(Ne)||le.getAttribute(`element-loading-${hyphenate(Ne)}`)),Ie=(ie=_e("fullscreen"))!=null?ie:oe.modifiers.fullscreen,$e={text:xe("text"),svg:xe("svg"),svgViewBox:xe("svgViewBox"),spinner:xe("spinner"),background:xe("background"),customClass:xe("customClass"),fullscreen:Ie,target:(ue=_e("target"))!=null?ue:Ie?void 0:le,body:(de=_e("body"))!=null?de:oe.modifiers.body,lock:(he=_e("lock"))!=null?he:oe.modifiers.lock};le[INSTANCE_KEY]={options:$e,instance:Loading($e)}},updateOptions=(le,oe)=>{for(const ie of Object.keys(oe))isRef(oe[ie])&&(oe[ie].value=le[ie])},vLoading={mounted(le,oe){oe.value&&createInstance(le,oe)},updated(le,oe){const ie=le[INSTANCE_KEY];oe.oldValue!==oe.value&&(oe.value&&!oe.oldValue?createInstance(le,oe):oe.value&&oe.oldValue?isObject$d(oe.value)&&updateOptions(oe.value,ie.options):ie==null||ie.instance.close())},unmounted(le){var oe;(oe=le[INSTANCE_KEY])==null||oe.instance.close(),le[INSTANCE_KEY]=null}},ElLoading={install(le){le.directive("loading",vLoading),le.config.globalProperties.$loading=Loading},directive:vLoading,service:Loading},messageTypes=["success","info","warning","error"],messageDefaults=mutable({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:isClient?document.body:void 0}),messageProps=buildProps({customClass:{type:String,default:messageDefaults.customClass},center:{type:Boolean,default:messageDefaults.center},dangerouslyUseHTMLString:{type:Boolean,default:messageDefaults.dangerouslyUseHTMLString},duration:{type:Number,default:messageDefaults.duration},icon:{type:iconPropType,default:messageDefaults.icon},id:{type:String,default:messageDefaults.id},message:{type:definePropType([String,Object,Function]),default:messageDefaults.message},onClose:{type:definePropType(Function),default:messageDefaults.onClose},showClose:{type:Boolean,default:messageDefaults.showClose},type:{type:String,values:messageTypes,default:messageDefaults.type},plain:{type:Boolean,default:messageDefaults.plain},offset:{type:Number,default:messageDefaults.offset},zIndex:{type:Number,default:messageDefaults.zIndex},grouping:{type:Boolean,default:messageDefaults.grouping},repeatNum:{type:Number,default:messageDefaults.repeatNum}}),messageEmits={destroy:()=>!0},instances=shallowReactive([]),getInstance=le=>{const oe=instances.findIndex(de=>de.id===le),ie=instances[oe];let ue;return oe>0&&(ue=instances[oe-1]),{current:ie,prev:ue}},getLastOffset=le=>{const{prev:oe}=getInstance(le);return oe?oe.vm.exposed.bottom.value:0},getOffsetOrSpace=(le,oe)=>instances.findIndex(ue=>ue.id===le)>0?16:oe,__default__$1=defineComponent({name:"ElMessage"}),_sfc_main$i=defineComponent({...__default__$1,props:messageProps,emits:messageEmits,setup(le,{expose:oe}){const ie=le,{Close:ue}=TypeComponents,{ns:de,zIndex:he}=useGlobalComponentSettings("message"),{currentZIndex:pe,nextZIndex:_e}=he,Ce=ref(),xe=ref(!1),Ie=ref(0);let $e;const Ne=computed(()=>ie.type?ie.type==="error"?"danger":ie.type:"info"),Oe=computed(()=>{const Dt=ie.type;return{[de.bm("icon",Dt)]:Dt&&TypeComponentsMap[Dt]}}),Fe=computed(()=>ie.icon||TypeComponentsMap[ie.type]||""),Ve=computed(()=>getLastOffset(ie.id)),ze=computed(()=>getOffsetOrSpace(ie.id,ie.offset)+Ve.value),Ue=computed(()=>Ie.value+ze.value),Pt=computed(()=>({top:`${ze.value}px`,zIndex:pe.value}));function qe(){ie.duration!==0&&({stop:$e}=useTimeoutFn(()=>{kt()},ie.duration))}function Et(){$e==null||$e()}function kt(){xe.value=!1}function At({code:Dt}){Dt===EVENT_CODE.esc&&kt()}return onMounted(()=>{qe(),_e(),xe.value=!0}),watch(()=>ie.repeatNum,()=>{Et(),qe()}),useEventListener(document,"keydown",At),useResizeObserver(Ce,()=>{Ie.value=Ce.value.getBoundingClientRect().height}),oe({visible:xe,bottom:Ue,close:kt}),(Dt,Lt)=>(openBlock(),createBlock(Transition,{name:unref(de).b("fade"),onBeforeLeave:Dt.onClose,onAfterLeave:jt=>Dt.$emit("destroy"),persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{id:Dt.id,ref_key:"messageRef",ref:Ce,class:normalizeClass([unref(de).b(),{[unref(de).m(Dt.type)]:Dt.type},unref(de).is("center",Dt.center),unref(de).is("closable",Dt.showClose),unref(de).is("plain",Dt.plain),Dt.customClass]),style:normalizeStyle(unref(Pt)),role:"alert",onMouseenter:Et,onMouseleave:qe},[Dt.repeatNum>1?(openBlock(),createBlock(unref(ElBadge),{key:0,value:Dt.repeatNum,type:unref(Ne),class:normalizeClass(unref(de).e("badge"))},null,8,["value","type","class"])):createCommentVNode("v-if",!0),unref(Fe)?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass([unref(de).e("icon"),unref(Oe)])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(Fe))))]),_:1},8,["class"])):createCommentVNode("v-if",!0),renderSlot(Dt.$slots,"default",{},()=>[Dt.dangerouslyUseHTMLString?(openBlock(),createElementBlock(Fragment,{key:1},[createCommentVNode(" Caution here, message could've been compromised, never use user's input as message "),createBaseVNode("p",{class:normalizeClass(unref(de).e("content")),innerHTML:Dt.message},null,10,["innerHTML"])],2112)):(openBlock(),createElementBlock("p",{key:0,class:normalizeClass(unref(de).e("content"))},toDisplayString(Dt.message),3))]),Dt.showClose?(openBlock(),createBlock(unref(ElIcon),{key:2,class:normalizeClass(unref(de).e("closeBtn")),onClick:withModifiers(kt,["stop"])},{default:withCtx(()=>[createVNode(unref(ue))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)],46,["id"]),[[vShow,xe.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var MessageConstructor=_export_sfc$1(_sfc_main$i,[["__file","message.vue"]]);let seed$1=1;const normalizeOptions=le=>{const oe=!le||isString$1(le)||isVNode(le)||isFunction$2(le)?{message:le}:le,ie={...messageDefaults,...oe};if(!ie.appendTo)ie.appendTo=document.body;else if(isString$1(ie.appendTo)){let ue=document.querySelector(ie.appendTo);isElement$1(ue)||(ue=document.body),ie.appendTo=ue}return isBoolean(messageConfig.grouping)&&!ie.grouping&&(ie.grouping=messageConfig.grouping),isNumber(messageConfig.duration)&&ie.duration===3e3&&(ie.duration=messageConfig.duration),isNumber(messageConfig.offset)&&ie.offset===16&&(ie.offset=messageConfig.offset),isBoolean(messageConfig.showClose)&&!ie.showClose&&(ie.showClose=messageConfig.showClose),ie},closeMessage=le=>{const oe=instances.indexOf(le);if(oe===-1)return;instances.splice(oe,1);const{handler:ie}=le;ie.close()},createMessage=({appendTo:le,...oe},ie)=>{const ue=`message_${seed$1++}`,de=oe.onClose,he=document.createElement("div"),pe={...oe,id:ue,onClose:()=>{de==null||de(),closeMessage(Ie)},onDestroy:()=>{render(null,he)}},_e=createVNode(MessageConstructor,pe,isFunction$2(pe.message)||isVNode(pe.message)?{default:isFunction$2(pe.message)?pe.message:()=>pe.message}:null);_e.appContext=ie||message._context,render(_e,he),le.appendChild(he.firstElementChild);const Ce=_e.component,Ie={id:ue,vnode:_e,vm:Ce,handler:{close:()=>{Ce.exposed.visible.value=!1}},props:_e.component.props};return Ie},message=(le={},oe)=>{if(!isClient)return{close:()=>{}};const ie=normalizeOptions(le);if(ie.grouping&&instances.length){const de=instances.find(({vnode:he})=>{var pe;return((pe=he.props)==null?void 0:pe.message)===ie.message});if(de)return de.props.repeatNum+=1,de.props.type=ie.type,de.handler}if(isNumber(messageConfig.max)&&instances.length>=messageConfig.max)return{close:()=>{}};const ue=createMessage(ie,oe);return instances.push(ue),ue.handler};messageTypes.forEach(le=>{message[le]=(oe={},ie)=>{const ue=normalizeOptions(oe);return message({...ue,type:le},ie)}});function closeAll$1(le){for(const oe of instances)(!le||le===oe.props.type)&&oe.handler.close()}message.closeAll=closeAll$1;message._context=null;const ElMessage=withInstallFunction(message,"$message"),_sfc_main$h=defineComponent({name:"ElMessageBox",directives:{TrapFocus},components:{ElButton,ElFocusTrap,ElInput,ElOverlay,ElIcon,...TypeComponents},inheritAttrs:!1,props:{buttonSize:{type:String,validator:isValidComponentSize},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(le,{emit:oe}){const{locale:ie,zIndex:ue,ns:de,size:he}=useGlobalComponentSettings("message-box",computed(()=>le.buttonSize)),{t:pe}=ie,{nextZIndex:_e}=ue,Ce=ref(!1),xe=reactive({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonLoadingIcon:markRaw(loading_default),cancelButtonLoadingIcon:markRaw(loading_default),confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:_e()}),Ie=computed(()=>{const Cn=xe.type;return{[de.bm("icon",Cn)]:Cn&&TypeComponentsMap[Cn]}}),$e=useId(),Ne=useId(),Oe=computed(()=>xe.icon||TypeComponentsMap[xe.type]||""),Fe=computed(()=>!!xe.message),Ve=ref(),ze=ref(),Ue=ref(),Pt=ref(),qe=ref(),Et=computed(()=>xe.confirmButtonClass);watch(()=>xe.inputValue,async Cn=>{await nextTick(),le.boxType==="prompt"&&Cn!==null&&vn()},{immediate:!0}),watch(()=>Ce.value,Cn=>{var Sn,In;Cn&&(le.boxType!=="prompt"&&(xe.autofocus?Ue.value=(In=(Sn=qe.value)==null?void 0:Sn.$el)!=null?In:Ve.value:Ue.value=Ve.value),xe.zIndex=_e()),le.boxType==="prompt"&&(Cn?nextTick().then(()=>{var En;Pt.value&&Pt.value.$el&&(xe.autofocus?Ue.value=(En=Tn())!=null?En:Ve.value:Ue.value=Ve.value)}):(xe.editorErrorMessage="",xe.validateError=!1))});const kt=computed(()=>le.draggable),At=computed(()=>le.overflow);useDraggable(Ve,ze,kt,At),onMounted(async()=>{await nextTick(),le.closeOnHashChange&&window.addEventListener("hashchange",Dt)}),onBeforeUnmount(()=>{le.closeOnHashChange&&window.removeEventListener("hashchange",Dt)});function Dt(){Ce.value&&(Ce.value=!1,nextTick(()=>{xe.action&&oe("action",xe.action)}))}const Lt=()=>{le.closeOnClickModal&&bn(xe.distinguishCancelAndClose?"close":"cancel")},jt=useSameTarget(Lt),_n=Cn=>{if(xe.inputType!=="textarea")return Cn.preventDefault(),bn("confirm")},bn=Cn=>{var Sn;le.boxType==="prompt"&&Cn==="confirm"&&!vn()||(xe.action=Cn,xe.beforeClose?(Sn=xe.beforeClose)==null||Sn.call(xe,Cn,xe,Dt):Dt())},vn=()=>{if(le.boxType==="prompt"){const Cn=xe.inputPattern;if(Cn&&!Cn.test(xe.inputValue||""))return xe.editorErrorMessage=xe.inputErrorMessage||pe("el.messagebox.error"),xe.validateError=!0,!1;const Sn=xe.inputValidator;if(typeof Sn=="function"){const In=Sn(xe.inputValue);if(In===!1)return xe.editorErrorMessage=xe.inputErrorMessage||pe("el.messagebox.error"),xe.validateError=!0,!1;if(typeof In=="string")return xe.editorErrorMessage=In,xe.validateError=!0,!1}}return xe.editorErrorMessage="",xe.validateError=!1,!0},Tn=()=>{const Cn=Pt.value.$refs;return Cn.input||Cn.textarea},$n=()=>{bn("close")},wn=()=>{le.closeOnPressEscape&&$n()};return le.lockScroll&&useLockscreen(Ce),{...toRefs(xe),ns:de,overlayEvent:jt,visible:Ce,hasMessage:Fe,typeClass:Ie,contentId:$e,inputId:Ne,btnSize:he,iconComponent:Oe,confirmButtonClasses:Et,rootRef:Ve,focusStartRef:Ue,headerRef:ze,inputRef:Pt,confirmRef:qe,doClose:Dt,handleClose:$n,onCloseRequested:wn,handleWrapperClick:Lt,handleInputEnter:_n,handleAction:bn,t:pe}}});function _sfc_render(le,oe,ie,ue,de,he){const pe=resolveComponent("el-icon"),_e=resolveComponent("close"),Ce=resolveComponent("el-input"),xe=resolveComponent("el-button"),Ie=resolveComponent("el-focus-trap"),$e=resolveComponent("el-overlay");return openBlock(),createBlock(Transition,{name:"fade-in-linear",onAfterLeave:Ne=>le.$emit("vanish"),persisted:""},{default:withCtx(()=>[withDirectives(createVNode($e,{"z-index":le.zIndex,"overlay-class":[le.ns.is("message-box"),le.modalClass],mask:le.modal},{default:withCtx(()=>[createBaseVNode("div",{role:"dialog","aria-label":le.title,"aria-modal":"true","aria-describedby":le.showInput?void 0:le.contentId,class:normalizeClass(`${le.ns.namespace.value}-overlay-message-box`),onClick:le.overlayEvent.onClick,onMousedown:le.overlayEvent.onMousedown,onMouseup:le.overlayEvent.onMouseup},[createVNode(Ie,{loop:"",trapped:le.visible,"focus-trap-el":le.rootRef,"focus-start-el":le.focusStartRef,onReleaseRequested:le.onCloseRequested},{default:withCtx(()=>[createBaseVNode("div",{ref:"rootRef",class:normalizeClass([le.ns.b(),le.customClass,le.ns.is("draggable",le.draggable),{[le.ns.m("center")]:le.center}]),style:normalizeStyle(le.customStyle),tabindex:"-1",onClick:withModifiers(()=>{},["stop"])},[le.title!==null&&le.title!==void 0?(openBlock(),createElementBlock("div",{key:0,ref:"headerRef",class:normalizeClass([le.ns.e("header"),{"show-close":le.showClose}])},[createBaseVNode("div",{class:normalizeClass(le.ns.e("title"))},[le.iconComponent&&le.center?(openBlock(),createBlock(pe,{key:0,class:normalizeClass([le.ns.e("status"),le.typeClass])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(le.iconComponent)))]),_:1},8,["class"])):createCommentVNode("v-if",!0),createBaseVNode("span",null,toDisplayString(le.title),1)],2),le.showClose?(openBlock(),createElementBlock("button",{key:0,type:"button",class:normalizeClass(le.ns.e("headerbtn")),"aria-label":le.t("el.messagebox.close"),onClick:Ne=>le.handleAction(le.distinguishCancelAndClose?"close":"cancel"),onKeydown:withKeys(withModifiers(Ne=>le.handleAction(le.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"])},[createVNode(pe,{class:normalizeClass(le.ns.e("close"))},{default:withCtx(()=>[createVNode(_e)]),_:1},8,["class"])],42,["aria-label","onClick","onKeydown"])):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{id:le.contentId,class:normalizeClass(le.ns.e("content"))},[createBaseVNode("div",{class:normalizeClass(le.ns.e("container"))},[le.iconComponent&&!le.center&&le.hasMessage?(openBlock(),createBlock(pe,{key:0,class:normalizeClass([le.ns.e("status"),le.typeClass])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(le.iconComponent)))]),_:1},8,["class"])):createCommentVNode("v-if",!0),le.hasMessage?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(le.ns.e("message"))},[renderSlot(le.$slots,"default",{},()=>[le.dangerouslyUseHTMLString?(openBlock(),createBlock(resolveDynamicComponent(le.showInput?"label":"p"),{key:1,for:le.showInput?le.inputId:void 0,innerHTML:le.message},null,8,["for","innerHTML"])):(openBlock(),createBlock(resolveDynamicComponent(le.showInput?"label":"p"),{key:0,for:le.showInput?le.inputId:void 0},{default:withCtx(()=>[createTextVNode(toDisplayString(le.dangerouslyUseHTMLString?"":le.message),1)]),_:1},8,["for"]))])],2)):createCommentVNode("v-if",!0)],2),withDirectives(createBaseVNode("div",{class:normalizeClass(le.ns.e("input"))},[createVNode(Ce,{id:le.inputId,ref:"inputRef",modelValue:le.inputValue,"onUpdate:modelValue":Ne=>le.inputValue=Ne,type:le.inputType,placeholder:le.inputPlaceholder,"aria-invalid":le.validateError,class:normalizeClass({invalid:le.validateError}),onKeydown:withKeys(le.handleInputEnter,["enter"])},null,8,["id","modelValue","onUpdate:modelValue","type","placeholder","aria-invalid","class","onKeydown"]),createBaseVNode("div",{class:normalizeClass(le.ns.e("errormsg")),style:normalizeStyle({visibility:le.editorErrorMessage?"visible":"hidden"})},toDisplayString(le.editorErrorMessage),7)],2),[[vShow,le.showInput]])],10,["id"]),createBaseVNode("div",{class:normalizeClass(le.ns.e("btns"))},[le.showCancelButton?(openBlock(),createBlock(xe,{key:0,loading:le.cancelButtonLoading,"loading-icon":le.cancelButtonLoadingIcon,class:normalizeClass([le.cancelButtonClass]),round:le.roundButton,size:le.btnSize,onClick:Ne=>le.handleAction("cancel"),onKeydown:withKeys(withModifiers(Ne=>le.handleAction("cancel"),["prevent"]),["enter"])},{default:withCtx(()=>[createTextVNode(toDisplayString(le.cancelButtonText||le.t("el.messagebox.cancel")),1)]),_:1},8,["loading","loading-icon","class","round","size","onClick","onKeydown"])):createCommentVNode("v-if",!0),withDirectives(createVNode(xe,{ref:"confirmRef",type:"primary",loading:le.confirmButtonLoading,"loading-icon":le.confirmButtonLoadingIcon,class:normalizeClass([le.confirmButtonClasses]),round:le.roundButton,disabled:le.confirmButtonDisabled,size:le.btnSize,onClick:Ne=>le.handleAction("confirm"),onKeydown:withKeys(withModifiers(Ne=>le.handleAction("confirm"),["prevent"]),["enter"])},{default:withCtx(()=>[createTextVNode(toDisplayString(le.confirmButtonText||le.t("el.messagebox.confirm")),1)]),_:1},8,["loading","loading-icon","class","round","disabled","size","onClick","onKeydown"]),[[vShow,le.showConfirmButton]])],2)],14,["onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,["aria-label","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["z-index","overlay-class","mask"]),[[vShow,le.visible]])]),_:3},8,["onAfterLeave"])}var MessageBoxConstructor=_export_sfc$1(_sfc_main$h,[["render",_sfc_render],["__file","index.vue"]]);const messageInstance=new Map,getAppendToElement=le=>{let oe=document.body;return le.appendTo&&(isString$1(le.appendTo)&&(oe=document.querySelector(le.appendTo)),isElement$1(le.appendTo)&&(oe=le.appendTo),isElement$1(oe)||(oe=document.body)),oe},initInstance=(le,oe,ie=null)=>{const ue=createVNode(MessageBoxConstructor,le,isFunction$2(le.message)||isVNode(le.message)?{default:isFunction$2(le.message)?le.message:()=>le.message}:null);return ue.appContext=ie,render(ue,oe),getAppendToElement(le).appendChild(oe.firstElementChild),ue.component},genContainer=()=>document.createElement("div"),showMessage=(le,oe)=>{const ie=genContainer();le.onVanish=()=>{render(null,ie),messageInstance.delete(de)},le.onAction=he=>{const pe=messageInstance.get(de);let _e;le.showInput?_e={value:de.inputValue,action:he}:_e=he,le.callback?le.callback(_e,ue.proxy):he==="cancel"||he==="close"?le.distinguishCancelAndClose&&he!=="cancel"?pe.reject("close"):pe.reject("cancel"):pe.resolve(_e)};const ue=initInstance(le,ie,oe),de=ue.proxy;for(const he in le)hasOwn$b(le,he)&&!hasOwn$b(de.$props,he)&&(de[he]=le[he]);return de.visible=!0,de};function MessageBox(le,oe=null){if(!isClient)return Promise.reject();let ie;return isString$1(le)||isVNode(le)?le={message:le}:ie=le.callback,new Promise((ue,de)=>{const he=showMessage(le,oe??MessageBox._context);messageInstance.set(he,{options:le,callback:ie,resolve:ue,reject:de})})}const MESSAGE_BOX_VARIANTS=["alert","confirm","prompt"],MESSAGE_BOX_DEFAULT_OPTS={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};MESSAGE_BOX_VARIANTS.forEach(le=>{MessageBox[le]=messageBoxFactory(le)});function messageBoxFactory(le){return(oe,ie,ue,de)=>{let he="";return isObject$d(ie)?(ue=ie,he=""):isUndefined(ie)?he="":he=ie,MessageBox(Object.assign({title:he,message:oe,type:"",...MESSAGE_BOX_DEFAULT_OPTS[le]},ue,{boxType:le}),de)}}MessageBox.close=()=>{messageInstance.forEach((le,oe)=>{oe.doClose()}),messageInstance.clear()};MessageBox._context=null;const _MessageBox=MessageBox;_MessageBox.install=le=>{_MessageBox._context=le._context,le.config.globalProperties.$msgbox=_MessageBox,le.config.globalProperties.$messageBox=_MessageBox,le.config.globalProperties.$alert=_MessageBox.alert,le.config.globalProperties.$confirm=_MessageBox.confirm,le.config.globalProperties.$prompt=_MessageBox.prompt};const ElMessageBox=_MessageBox,notificationTypes=["success","info","warning","error"],notificationProps=buildProps({customClass:{type:String,default:""},dangerouslyUseHTMLString:Boolean,duration:{type:Number,default:4500},icon:{type:iconPropType},id:{type:String,default:""},message:{type:definePropType([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:definePropType(Function),default:()=>{}},onClose:{type:definePropType(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...notificationTypes,""],default:""},zIndex:Number}),notificationEmits={destroy:()=>!0},__default__=defineComponent({name:"ElNotification"}),_sfc_main$g=defineComponent({...__default__,props:notificationProps,emits:notificationEmits,setup(le,{expose:oe}){const ie=le,{ns:ue,zIndex:de}=useGlobalComponentSettings("notification"),{nextZIndex:he,currentZIndex:pe}=de,{Close:_e}=CloseComponents,Ce=ref(!1);let xe;const Ie=computed(()=>{const qe=ie.type;return qe&&TypeComponentsMap[ie.type]?ue.m(qe):""}),$e=computed(()=>ie.type&&TypeComponentsMap[ie.type]||ie.icon),Ne=computed(()=>ie.position.endsWith("right")?"right":"left"),Oe=computed(()=>ie.position.startsWith("top")?"top":"bottom"),Fe=computed(()=>{var qe;return{[Oe.value]:`${ie.offset}px`,zIndex:(qe=ie.zIndex)!=null?qe:pe.value}});function Ve(){ie.duration>0&&({stop:xe}=useTimeoutFn(()=>{Ce.value&&Ue()},ie.duration))}function ze(){xe==null||xe()}function Ue(){Ce.value=!1}function Pt({code:qe}){qe===EVENT_CODE.delete||qe===EVENT_CODE.backspace?ze():qe===EVENT_CODE.esc?Ce.value&&Ue():Ve()}return onMounted(()=>{Ve(),he(),Ce.value=!0}),useEventListener(document,"keydown",Pt),oe({visible:Ce,close:Ue}),(qe,Et)=>(openBlock(),createBlock(Transition,{name:unref(ue).b("fade"),onBeforeLeave:qe.onClose,onAfterLeave:kt=>qe.$emit("destroy"),persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{id:qe.id,class:normalizeClass([unref(ue).b(),qe.customClass,unref(Ne)]),style:normalizeStyle(unref(Fe)),role:"alert",onMouseenter:ze,onMouseleave:Ve,onClick:qe.onClick},[unref($e)?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass([unref(ue).e("icon"),unref(Ie)])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref($e))))]),_:1},8,["class"])):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(ue).e("group"))},[createBaseVNode("h2",{class:normalizeClass(unref(ue).e("title")),textContent:toDisplayString(qe.title)},null,10,["textContent"]),withDirectives(createBaseVNode("div",{class:normalizeClass(unref(ue).e("content")),style:normalizeStyle(qe.title?void 0:{margin:0})},[renderSlot(qe.$slots,"default",{},()=>[qe.dangerouslyUseHTMLString?(openBlock(),createElementBlock(Fragment,{key:1},[createCommentVNode(" Caution here, message could've been compromised, never use user's input as message "),createBaseVNode("p",{innerHTML:qe.message},null,8,["innerHTML"])],2112)):(openBlock(),createElementBlock("p",{key:0},toDisplayString(qe.message),1))])],6),[[vShow,qe.message]]),qe.showClose?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(ue).e("closeBtn")),onClick:withModifiers(Ue,["stop"])},{default:withCtx(()=>[createVNode(unref(_e))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)],2)],46,["id","onClick"]),[[vShow,Ce.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var NotificationConstructor=_export_sfc$1(_sfc_main$g,[["__file","notification.vue"]]);const notifications={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},GAP_SIZE=16;let seed=1;const notify$2=function(le={},oe=null){if(!isClient)return{close:()=>{}};(typeof le=="string"||isVNode(le))&&(le={message:le});const ie=le.position||"top-right";let ue=le.offset||0;notifications[ie].forEach(({vm:Ie})=>{var $e;ue+=((($e=Ie.el)==null?void 0:$e.offsetHeight)||0)+GAP_SIZE}),ue+=GAP_SIZE;const de=`notification_${seed++}`,he=le.onClose,pe={...le,offset:ue,id:de,onClose:()=>{close(de,ie,he)}};let _e=document.body;isElement$1(le.appendTo)?_e=le.appendTo:isString$1(le.appendTo)&&(_e=document.querySelector(le.appendTo)),isElement$1(_e)||(_e=document.body);const Ce=document.createElement("div"),xe=createVNode(NotificationConstructor,pe,isVNode(pe.message)?{default:()=>pe.message}:null);return xe.appContext=oe??notify$2._context,xe.props.onDestroy=()=>{render(null,Ce)},render(xe,Ce),notifications[ie].push({vm:xe}),_e.appendChild(Ce.firstElementChild),{close:()=>{xe.component.exposed.visible.value=!1}}};notificationTypes.forEach(le=>{notify$2[le]=(oe={})=>((typeof oe=="string"||isVNode(oe))&&(oe={message:oe}),notify$2({...oe,type:le}))});function close(le,oe,ie){const ue=notifications[oe],de=ue.findIndex(({vm:xe})=>{var Ie;return((Ie=xe.component)==null?void 0:Ie.props.id)===le});if(de===-1)return;const{vm:he}=ue[de];if(!he)return;ie==null||ie(he);const pe=he.el.offsetHeight,_e=oe.split("-")[0];ue.splice(de,1);const Ce=ue.length;if(!(Ce<1))for(let xe=de;xe<Ce;xe++){const{el:Ie,component:$e}=ue[xe].vm,Ne=Number.parseInt(Ie.style[_e],10)-pe-GAP_SIZE;$e.props.offset=Ne}}function closeAll(){for(const le of Object.values(notifications))le.forEach(({vm:oe})=>{oe.component.exposed.visible.value=!1})}notify$2.closeAll=closeAll;notify$2._context=null;const ElNotification=withInstallFunction(notify$2,"$notify");var Plugins=[ElInfiniteScroll,ElLoading,ElMessage,ElMessageBox,ElNotification,ElPopoverDirective],installer=makeInstaller([...Components,...Plugins]);class ExternalError extends Error{constructor(oe,ie){super(ie),this.type=oe}}class ConfigurationError extends ExternalError{constructor(oe,ie){super("Configuration",oe),this.node=ie}}class PopoutBlockedError extends ExternalError{constructor(oe){super("PopoutBlocked",oe)}}class BindError extends ExternalError{constructor(oe){super("Bind",oe)}}class InternalError extends Error{constructor(oe,ie,ue){super(`${oe}: ${ie}${ue===void 0?"":": "+ue}`)}}class AssertError extends InternalError{constructor(oe,ie){super("Assert",oe,ie)}}class UnreachableCaseError extends InternalError{constructor(oe,ie,ue){super("UnreachableCase",oe,`${ie}${ue===void 0?"":": "+ue}`)}}class UnexpectedNullError extends InternalError{constructor(oe,ie){super("UnexpectedNull",oe,ie)}}class UnexpectedUndefinedError extends InternalError{constructor(oe,ie){super("UnexpectedUndefined",oe,ie)}}var I18nStrings;(function(le){let oe=!1;const ie={PopoutCannotBeCreatedWithGroundItemConfig:{id:0,default:"Popout cannot be created with ground ItemConfig"},PleaseRegisterAConstructorFunction:{id:1,default:"Please register a constructor function"},ComponentTypeNotRegisteredAndBindComponentEventHandlerNotAssigned:{id:2,default:"Component type not registered and BindComponentEvent handler not assigned"},ComponentIsAlreadyRegistered:{id:3,default:"Component is already registered"},ComponentIsNotVirtuable:{id:4,default:"Component is not virtuable. Requires rootHtmlElement field/getter"},VirtualComponentDoesNotHaveRootHtmlElement:{id:5,default:'Virtual component does not have getter "rootHtmlElement"'},ItemConfigIsNotTypeComponent:{id:6,default:"ItemConfig is not of type component"},InvalidNumberPartInSizeString:{id:7,default:"Invalid number part in size string"},UnknownUnitInSizeString:{id:8,default:"Unknown unit in size string"},UnsupportedUnitInSizeString:{id:9,default:"Unsupported unit in size string"}};le.idCount=Object.keys(ie).length;const ue=Object.values(ie);function de(){if(!oe)for(let he=0;he<le.idCount;he++){const pe=ue[he];if(pe.id!==he)throw new AssertError("INSI00110",`${he}: ${pe.id}`);i18nStrings[he]=pe.default}oe=!0}le.checkInitialise=de})(I18nStrings||(I18nStrings={}));const i18nStrings=new Array(I18nStrings.idCount);var StyleConstants;(function(le){le.defaultComponentBaseZIndex="auto",le.defaultComponentDragZIndex="32",le.defaultComponentStackMaximisedZIndex="41"})(StyleConstants||(StyleConstants={}));var WidthOrHeightPropertyName;(function(le){le.width="width",le.height="height"})(WidthOrHeightPropertyName||(WidthOrHeightPropertyName={}));var Side;(function(le){le.top="top",le.left="left",le.right="right",le.bottom="bottom"})(Side||(Side={}));var LogicalZIndex;(function(le){le.base="base",le.drag="drag",le.stackMaximised="stackMaximised"})(LogicalZIndex||(LogicalZIndex={}));const LogicalZIndexToDefaultMap={base:StyleConstants.defaultComponentBaseZIndex,drag:StyleConstants.defaultComponentDragZIndex,stackMaximised:StyleConstants.defaultComponentStackMaximisedZIndex};var JsonValue;(function(le){function oe(ue){return ie(ue)}le.isJson=oe;function ie(ue){return!Array.isArray(ue)&&ue!==null&&typeof ue=="object"}le.isJsonObject=ie})(JsonValue||(JsonValue={}));var ItemType;(function(le){le.ground="ground",le.row="row",le.column="column",le.stack="stack",le.component="component"})(ItemType||(ItemType={}));var ResponsiveMode;(function(le){le.none="none",le.always="always",le.onload="onload"})(ResponsiveMode||(ResponsiveMode={}));var SizeUnitEnum;(function(le){le.Pixel="px",le.Percent="%",le.Fractional="fr",le.Em="em"})(SizeUnitEnum||(SizeUnitEnum={}));(function(le){function oe(ue){switch(ue){case le.Pixel:return le.Pixel;case le.Percent:return le.Percent;case le.Fractional:return le.Fractional;case le.Em:return le.Em;default:return}}le.tryParse=oe;function ie(ue){switch(ue){case le.Pixel:return le.Pixel;case le.Percent:return le.Percent;case le.Fractional:return le.Fractional;case le.Em:return le.Em;default:throw new UnreachableCaseError("SUEF44998",ue)}}le.format=ie})(SizeUnitEnum||(SizeUnitEnum={}));function numberToPixels(le){return le.toString(10)+"px"}function pixelsToNumber(le){const oe=le.replace("px","");return parseFloat(oe)}function splitStringAtFirstNonNumericChar(le){le=le.trimStart();const oe=le.length;if(oe===0)return{numericPart:"",firstNonNumericCharPart:""};{let ie=oe,ue=!1;for(let pe=0;pe<oe;pe++){const _e=le[pe];if(!isDigit(_e))if(_e!=="."){ie=pe;break}else if(ue){ie=pe;break}else ue=!0}const de=le.substring(0,ie),he=le.substring(ie).trim();return{numericPart:de,firstNonNumericCharPart:he}}}function isDigit(le){return le>="0"&&le<="9"}function getElementWidth(le){return le.offsetWidth}function setElementWidth(le,oe){const ie=numberToPixels(oe);le.style.width=ie}function getElementHeight(le){return le.offsetHeight}function setElementHeight(le,oe){const ie=numberToPixels(oe);le.style.height=ie}function getElementWidthAndHeight(le){return{width:le.offsetWidth,height:le.offsetHeight}}function setElementDisplayVisibility(le,oe){oe?le.style.display="":le.style.display="none"}function deepExtend(le,oe){if(oe!==void 0){for(const ie in oe)if(oe.hasOwnProperty(ie)){const ue=oe[ie],de=le[ie];le[ie]=deepExtendValue(de,ue)}}return le}function deepExtendValue(le,oe){if(typeof oe!="object")return oe;if(Array.isArray(oe)){const ie=oe.length,ue=new Array(ie);for(let de=0;de<ie;de++){const he=oe[de];ue[de]=deepExtendValue({},he)}return ue}else{if(oe===null)return null;{const ie=oe;return le===void 0?deepExtend({},ie):typeof le!="object"?deepExtend({},ie):Array.isArray(le)?deepExtend({},ie):deepExtend(le===null?{}:le,ie)}}}function removeFromArray(le,oe){const ie=oe.indexOf(le);if(ie===-1)throw new Error("Can't remove item from array. Item is not in the array");oe.splice(ie,1)}function getUniqueId(){return(Math.random()*1e15).toString(36).replace(".","")}function getErrorMessage(le){return le instanceof Error?le.message:typeof le=="string"?le:"Unknown Error"}var ConfigMinifier;(function(le){const oe=["settings","hasHeaders","constrainDragToContainer","selectionEnabled","dimensions","borderWidth","minItemHeight","minItemWidth","headerHeight","dragProxyWidth","dragProxyHeight","labels","close","maximise","minimise","popout","content","componentType","componentState","id","width","type","height","isClosable","title","popoutWholeStack","openPopouts","parentId","activeItemIndex","reorderEnabled","borderGrabWidth"],ie=[!0,!1,"row","column","stack","component","close","maximise","minimise","open in new window"];function ue(){if(oe.length>36)throw new Error("Too many keys in config minifier map")}le.checkInitialise=ue;function de(Oe,Fe){const Ve={};for(const ze in Oe)if(Oe.hasOwnProperty(ze)){let Ue;Fe?Ue=_e(ze):Ue=Ce(ze);const Pt=Oe[ze];Ve[Ue]=pe(Pt,Fe)}return Ve}le.translateObject=de;function he(Oe,Fe){const Ve=Oe.length,ze=new Array(Ve);for(let Ue=0;Ue<Ve;Ue++){const Pt=Oe[Ue];ze[Ue]=pe(Pt,Fe)}return ze}function pe(Oe,Fe){return typeof Oe=="object"?Oe===null?null:Array.isArray(Oe)?he(Oe,Fe):de(Oe,Fe):Fe?xe(Oe):Ie(Oe)}function _e(Oe){if(typeof Oe=="string"&&Oe.length===1)return"___"+Oe;const Fe=$e(Oe);return Fe===-1?Oe:Fe.toString(36)}function Ce(Oe){return Oe.length===1?oe[parseInt(Oe,36)]:Oe.substr(0,3)==="___"?Oe[3]:Oe}function xe(Oe){if(typeof Oe=="string"&&Oe.length===1)return"___"+Oe;const Fe=Ne(Oe);return Fe===-1?Oe:Fe.toString(36)}function Ie(Oe){return typeof Oe=="string"&&Oe.length===1?ie[parseInt(Oe,36)]:typeof Oe=="string"&&Oe.substr(0,3)==="___"?Oe[3]:Oe}function $e(Oe){for(let Fe=0;Fe<oe.length;Fe++)if(oe[Fe]===Oe)return Fe;return-1}function Ne(Oe){for(let Fe=0;Fe<ie.length;Fe++)if(ie[Fe]===Oe)return Fe;return-1}})(ConfigMinifier||(ConfigMinifier={}));var ResolvedItemConfig;(function(le){le.defaults={type:ItemType.ground,content:[],size:1,sizeUnit:SizeUnitEnum.Fractional,minSize:void 0,minSizeUnit:SizeUnitEnum.Pixel,id:"",isClosable:!0};function oe(pe,_e){switch(pe.type){case ItemType.ground:case ItemType.row:case ItemType.column:return ResolvedRowOrColumnItemConfig.createCopy(pe,_e);case ItemType.stack:return ResolvedStackItemConfig.createCopy(pe,_e);case ItemType.component:return ResolvedComponentItemConfig.createCopy(pe);default:throw new UnreachableCaseError("CICC91354",pe.type,"Invalid Config Item type specified")}}le.createCopy=oe;function ie(pe){switch(pe){case ItemType.ground:throw new AssertError("CICCDR91562");case ItemType.row:case ItemType.column:return ResolvedRowOrColumnItemConfig.createDefault(pe);case ItemType.stack:return ResolvedStackItemConfig.createDefault();case ItemType.component:return ResolvedComponentItemConfig.createDefault();default:throw new UnreachableCaseError("CICCDD91563",pe,"Invalid Config Item type specified")}}le.createDefault=ie;function ue(pe){return pe.type===ItemType.component}le.isComponentItem=ue;function de(pe){return pe.type===ItemType.stack}le.isStackItem=de;function he(pe){return pe.type===ItemType.ground}le.isGroundItem=he})(ResolvedItemConfig||(ResolvedItemConfig={}));var ResolvedHeaderedItemConfig;(function(le){le.defaultMaximised=!1,function(oe){function ie(ue,de){if(ue!==void 0)return{show:de??ue.show,popout:ue.popout,close:ue.close,maximise:ue.maximise,minimise:ue.minimise,tabDropdown:ue.tabDropdown}}oe.createCopy=ie}(le.Header||(le.Header={}))})(ResolvedHeaderedItemConfig||(ResolvedHeaderedItemConfig={}));var ResolvedStackItemConfig;(function(le){le.defaultActiveItemIndex=0;function oe(de,he){return{type:de.type,content:ie(he!==void 0?he:de.content),size:de.size,sizeUnit:de.sizeUnit,minSize:de.minSize,minSizeUnit:de.minSizeUnit,id:de.id,maximised:de.maximised,isClosable:de.isClosable,activeItemIndex:de.activeItemIndex,header:ResolvedHeaderedItemConfig.Header.createCopy(de.header)}}le.createCopy=oe;function ie(de){const he=de.length,pe=new Array(he);for(let _e=0;_e<he;_e++)pe[_e]=ResolvedItemConfig.createCopy(de[_e]);return pe}le.copyContent=ie;function ue(){return{type:ItemType.stack,content:[],size:ResolvedItemConfig.defaults.size,sizeUnit:ResolvedItemConfig.defaults.sizeUnit,minSize:ResolvedItemConfig.defaults.minSize,minSizeUnit:ResolvedItemConfig.defaults.minSizeUnit,id:ResolvedItemConfig.defaults.id,maximised:ResolvedHeaderedItemConfig.defaultMaximised,isClosable:ResolvedItemConfig.defaults.isClosable,activeItemIndex:le.defaultActiveItemIndex,header:void 0}}le.createDefault=ue})(ResolvedStackItemConfig||(ResolvedStackItemConfig={}));var ResolvedComponentItemConfig;(function(le){le.defaultReorderEnabled=!0;function oe(he){const pe=he.componentType;if(typeof pe=="string")return pe}le.resolveComponentTypeName=oe;function ie(he){return{type:he.type,content:[],size:he.size,sizeUnit:he.sizeUnit,minSize:he.minSize,minSizeUnit:he.minSizeUnit,id:he.id,maximised:he.maximised,isClosable:he.isClosable,reorderEnabled:he.reorderEnabled,title:he.title,header:ResolvedHeaderedItemConfig.Header.createCopy(he.header),componentType:he.componentType,componentState:deepExtendValue(void 0,he.componentState)}}le.createCopy=ie;function ue(he="",pe,_e=""){return{type:ItemType.component,content:[],size:ResolvedItemConfig.defaults.size,sizeUnit:ResolvedItemConfig.defaults.sizeUnit,minSize:ResolvedItemConfig.defaults.minSize,minSizeUnit:ResolvedItemConfig.defaults.minSizeUnit,id:ResolvedItemConfig.defaults.id,maximised:ResolvedHeaderedItemConfig.defaultMaximised,isClosable:ResolvedItemConfig.defaults.isClosable,reorderEnabled:le.defaultReorderEnabled,title:_e,header:void 0,componentType:he,componentState:pe}}le.createDefault=ue;function de(he){return deepExtendValue({},he)}le.copyComponentType=de})(ResolvedComponentItemConfig||(ResolvedComponentItemConfig={}));var ResolvedRowOrColumnItemConfig;(function(le){function oe(he){switch(he.type){case ItemType.row:case ItemType.column:case ItemType.stack:case ItemType.component:return!0;case ItemType.ground:return!1;default:throw new UnreachableCaseError("CROCOSPCICIC13687",he.type)}}le.isChildItemConfig=oe;function ie(he,pe){return{type:he.type,content:ue(pe!==void 0?pe:he.content),size:he.size,sizeUnit:he.sizeUnit,minSize:he.minSize,minSizeUnit:he.minSizeUnit,id:he.id,isClosable:he.isClosable}}le.createCopy=ie;function ue(he){const pe=he.length,_e=new Array(pe);for(let Ce=0;Ce<pe;Ce++)_e[Ce]=ResolvedItemConfig.createCopy(he[Ce]);return _e}le.copyContent=ue;function de(he){return{type:he,content:[],size:ResolvedItemConfig.defaults.size,sizeUnit:ResolvedItemConfig.defaults.sizeUnit,minSize:ResolvedItemConfig.defaults.minSize,minSizeUnit:ResolvedItemConfig.defaults.minSizeUnit,id:ResolvedItemConfig.defaults.id,isClosable:ResolvedItemConfig.defaults.isClosable}}le.createDefault=de})(ResolvedRowOrColumnItemConfig||(ResolvedRowOrColumnItemConfig={}));var ResolvedRootItemConfig;(function(le){function oe(ue){return ResolvedItemConfig.createCopy(ue)}le.createCopy=oe;function ie(ue){switch(ue.type){case ItemType.row:case ItemType.column:case ItemType.stack:case ItemType.component:return!0;case ItemType.ground:return!1;default:throw new UnreachableCaseError("CROCOSPCICIC13687",ue.type)}}le.isRootItemConfig=ie})(ResolvedRootItemConfig||(ResolvedRootItemConfig={}));var ResolvedGroundItemConfig;(function(le){function oe(ie){const ue=ie===void 0?[]:[ie];return{type:ItemType.ground,content:ue,size:100,sizeUnit:SizeUnitEnum.Percent,minSize:0,minSizeUnit:SizeUnitEnum.Pixel,id:"",isClosable:!1,title:"",reorderEnabled:!1}}le.create=oe})(ResolvedGroundItemConfig||(ResolvedGroundItemConfig={}));var ResolvedLayoutConfig;(function(le){(function(_e){_e.defaults={constrainDragToContainer:!0,reorderEnabled:!0,popoutWholeStack:!1,blockedPopoutsThrowError:!0,closePopoutsOnUnload:!0,responsiveMode:ResponsiveMode.none,tabOverlapAllowance:0,reorderOnTabMenuClick:!0,tabControlOffset:10,popInOnClose:!1};function Ce(xe){return{constrainDragToContainer:xe.constrainDragToContainer,reorderEnabled:xe.reorderEnabled,popoutWholeStack:xe.popoutWholeStack,blockedPopoutsThrowError:xe.blockedPopoutsThrowError,closePopoutsOnUnload:xe.closePopoutsOnUnload,responsiveMode:xe.responsiveMode,tabOverlapAllowance:xe.tabOverlapAllowance,reorderOnTabMenuClick:xe.reorderOnTabMenuClick,tabControlOffset:xe.tabControlOffset,popInOnClose:xe.popInOnClose}}_e.createCopy=Ce})(le.Settings||(le.Settings={})),function(_e){function Ce(xe){return{borderWidth:xe.borderWidth,borderGrabWidth:xe.borderGrabWidth,defaultMinItemHeight:xe.defaultMinItemHeight,defaultMinItemHeightUnit:xe.defaultMinItemHeightUnit,defaultMinItemWidth:xe.defaultMinItemWidth,defaultMinItemWidthUnit:xe.defaultMinItemWidthUnit,headerHeight:xe.headerHeight,dragProxyWidth:xe.dragProxyWidth,dragProxyHeight:xe.dragProxyHeight}}_e.createCopy=Ce,_e.defaults={borderWidth:5,borderGrabWidth:5,defaultMinItemHeight:0,defaultMinItemHeightUnit:SizeUnitEnum.Pixel,defaultMinItemWidth:10,defaultMinItemWidthUnit:SizeUnitEnum.Pixel,headerHeight:20,dragProxyWidth:300,dragProxyHeight:200}}(le.Dimensions||(le.Dimensions={})),function(_e){function Ce(xe){return{show:xe.show,popout:xe.popout,dock:xe.dock,close:xe.close,maximise:xe.maximise,minimise:xe.minimise,tabDropdown:xe.tabDropdown}}_e.createCopy=Ce,_e.defaults={show:Side.top,popout:"open in new window",dock:"dock",maximise:"maximise",minimise:"minimise",close:"close",tabDropdown:"additional tabs"}}(le.Header||(le.Header={}));function oe(_e){return"parentId"in _e}le.isPopout=oe;function ie(){return{root:void 0,openPopouts:[],dimensions:le.Dimensions.defaults,settings:le.Settings.defaults,header:le.Header.defaults,resolved:!0}}le.createDefault=ie;function ue(_e){return oe(_e)?ResolvedPopoutLayoutConfig.createCopy(_e):{root:_e.root===void 0?void 0:ResolvedRootItemConfig.createCopy(_e.root),openPopouts:le.copyOpenPopouts(_e.openPopouts),settings:le.Settings.createCopy(_e.settings),dimensions:le.Dimensions.createCopy(_e.dimensions),header:le.Header.createCopy(_e.header),resolved:_e.resolved}}le.createCopy=ue;function de(_e){const Ce=_e.length,xe=new Array(Ce);for(let Ie=0;Ie<Ce;Ie++)xe[Ie]=ResolvedPopoutLayoutConfig.createCopy(_e[Ie]);return xe}le.copyOpenPopouts=de;function he(_e){return ConfigMinifier.translateObject(_e,!0)}le.minifyConfig=he;function pe(_e){return ConfigMinifier.translateObject(_e,!1)}le.unminifyConfig=pe})(ResolvedLayoutConfig||(ResolvedLayoutConfig={}));var ResolvedPopoutLayoutConfig;(function(le){(function(ie){function ue(de){return{width:de.width,height:de.height,left:de.left,top:de.top}}ie.createCopy=ue,ie.defaults={width:null,height:null,left:null,top:null}})(le.Window||(le.Window={}));function oe(ie){return{root:ie.root===void 0?void 0:ResolvedRootItemConfig.createCopy(ie.root),openPopouts:ResolvedLayoutConfig.copyOpenPopouts(ie.openPopouts),settings:ResolvedLayoutConfig.Settings.createCopy(ie.settings),dimensions:ResolvedLayoutConfig.Dimensions.createCopy(ie.dimensions),header:ResolvedLayoutConfig.Header.createCopy(ie.header),parentId:ie.parentId,indexInParent:ie.indexInParent,window:le.Window.createCopy(ie.window),resolved:ie.resolved}}le.createCopy=oe})(ResolvedPopoutLayoutConfig||(ResolvedPopoutLayoutConfig={}));var ItemConfig;(function(le){function oe(Ne,Oe){switch(Ne.type){case ItemType.ground:throw new ConfigurationError("ItemConfig cannot specify type ground",JSON.stringify(Ne));case ItemType.row:case ItemType.column:return RowOrColumnItemConfig.resolve(Ne,Oe);case ItemType.stack:return StackItemConfig.resolve(Ne,Oe);case ItemType.component:return ComponentItemConfig.resolve(Ne,Oe);default:throw new UnreachableCaseError("UCUICR55499",Ne.type)}}le.resolve=oe;function ie(Ne){if(Ne===void 0)return[];{const Oe=Ne.length,Fe=new Array(Oe);for(let Ve=0;Ve<Oe;Ve++)Fe[Ve]=le.resolve(Ne[Ve],!1);return Fe}}le.resolveContent=ie;function ue(Ne){return Ne===void 0?ResolvedItemConfig.defaults.id:Array.isArray(Ne)?Ne.length===0?ResolvedItemConfig.defaults.id:Ne[0]:Ne}le.resolveId=ue;function de(Ne,Oe,Fe,Ve){if(Ne!==void 0)return parseSize(Ne,[SizeUnitEnum.Percent,SizeUnitEnum.Fractional]);if(Oe!==void 0||Fe!==void 0){if(Oe!==void 0)return{size:Oe,sizeUnit:SizeUnitEnum.Percent};if(Fe!==void 0)return{size:Fe,sizeUnit:SizeUnitEnum.Percent};throw new UnexpectedUndefinedError("CRS33390")}else return Ve?{size:50,sizeUnit:SizeUnitEnum.Percent}:{size:ResolvedItemConfig.defaults.size,sizeUnit:ResolvedItemConfig.defaults.sizeUnit}}le.resolveSize=de;function he(Ne,Oe,Fe){if(Ne!==void 0)return parseSize(Ne,[SizeUnitEnum.Pixel]);{const Ve=Oe!==void 0;return Ve||Fe!==void 0?Ve?{size:Oe,sizeUnit:SizeUnitEnum.Pixel}:{size:Fe,sizeUnit:SizeUnitEnum.Pixel}:{size:ResolvedItemConfig.defaults.minSize,sizeUnit:ResolvedItemConfig.defaults.minSizeUnit}}}le.resolveMinSize=he;function pe(Ne){return Ne.size!==void 0?1:Ne.width!==void 0||Ne.height!==void 0?2:0}le.calculateSizeWidthHeightSpecificationType=pe;function _e(Ne){return Ne.type===ItemType.ground}le.isGround=_e;function Ce(Ne){return Ne.type===ItemType.row}le.isRow=Ce;function xe(Ne){return Ne.type===ItemType.column}le.isColumn=xe;function Ie(Ne){return Ne.type===ItemType.stack}le.isStack=Ie;function $e(Ne){return Ne.type===ItemType.component}le.isComponent=$e})(ItemConfig||(ItemConfig={}));var HeaderedItemConfig;(function(le){const oe="__glMaximised";(function(ue){function de(he,pe){var _e;if(!(he===void 0&&pe===void 0))return{show:(_e=he==null?void 0:he.show)!==null&&_e!==void 0?_e:pe===void 0?void 0:pe?ResolvedLayoutConfig.Header.defaults.show:!1,popout:he==null?void 0:he.popout,maximise:he==null?void 0:he.maximise,close:he==null?void 0:he.close,minimise:he==null?void 0:he.minimise,tabDropdown:he==null?void 0:he.tabDropdown}}ue.resolve=de})(le.Header||(le.Header={}));function ie(ue){let de,he=ue.id,pe=!1;if(he===void 0)de=ResolvedItemConfig.defaults.id;else if(Array.isArray(he)){const Ce=he.findIndex(xe=>xe===oe);Ce>0&&(pe=!0,he=he.splice(Ce,1)),he.length>0?de=he[0]:de=ResolvedItemConfig.defaults.id}else de=he;let _e;return ue.maximised!==void 0?_e=ue.maximised:_e=pe,{id:de,maximised:_e}}le.resolveIdAndMaximised=ie})(HeaderedItemConfig||(HeaderedItemConfig={}));var StackItemConfig;(function(le){function oe(he,pe){var _e,Ce;const{id:xe,maximised:Ie}=HeaderedItemConfig.resolveIdAndMaximised(he),{size:$e,sizeUnit:Ne}=ItemConfig.resolveSize(he.size,he.width,he.height,pe),{size:Oe,sizeUnit:Fe}=ItemConfig.resolveMinSize(he.minSize,he.minWidth,he.minHeight);return{type:ItemType.stack,content:ue(he.content),size:$e,sizeUnit:Ne,minSize:Oe,minSizeUnit:Fe,id:xe,maximised:Ie,isClosable:(_e=he.isClosable)!==null&&_e!==void 0?_e:ResolvedItemConfig.defaults.isClosable,activeItemIndex:(Ce=he.activeItemIndex)!==null&&Ce!==void 0?Ce:ResolvedStackItemConfig.defaultActiveItemIndex,header:HeaderedItemConfig.Header.resolve(he.header,he.hasHeaders)}}le.resolve=oe;function ie(he){return{type:ItemType.stack,content:de(he.content),size:formatSize(he.size,he.sizeUnit),minSize:formatUndefinableSize(he.minSize,he.minSizeUnit),id:he.id,maximised:he.maximised,isClosable:he.isClosable,activeItemIndex:he.activeItemIndex,header:ResolvedHeaderedItemConfig.Header.createCopy(he.header)}}le.fromResolved=ie;function ue(he){if(he===void 0)return[];{const pe=he.length,_e=new Array(pe);for(let Ce=0;Ce<pe;Ce++){const xe=he[Ce],Ie=ItemConfig.resolve(xe,!1);if(ResolvedItemConfig.isComponentItem(Ie))_e[Ce]=Ie;else throw new AssertError("UCUSICRC91114",JSON.stringify(Ie))}return _e}}function de(he){const pe=he.length,_e=new Array(pe);for(let Ce=0;Ce<pe;Ce++){const xe=he[Ce];_e[Ce]=ComponentItemConfig.fromResolved(xe)}return _e}})(StackItemConfig||(StackItemConfig={}));var ComponentItemConfig;(function(le){function oe(de,he){var pe,_e,Ce;let xe=de.componentType;if(xe===void 0&&(xe=de.componentName),xe===void 0)throw new Error("ComponentItemConfig.componentType is undefined");{const{id:Ie,maximised:$e}=HeaderedItemConfig.resolveIdAndMaximised(de);let Ne;de.title===void 0||de.title===""?Ne=le.componentTypeToTitle(xe):Ne=de.title;const{size:Oe,sizeUnit:Fe}=ItemConfig.resolveSize(de.size,de.width,de.height,he),{size:Ve,sizeUnit:ze}=ItemConfig.resolveMinSize(de.minSize,de.minWidth,de.minHeight);return{type:de.type,content:[],size:Oe,sizeUnit:Fe,minSize:Ve,minSizeUnit:ze,id:Ie,maximised:$e,isClosable:(pe=de.isClosable)!==null&&pe!==void 0?pe:ResolvedItemConfig.defaults.isClosable,reorderEnabled:(_e=de.reorderEnabled)!==null&&_e!==void 0?_e:ResolvedComponentItemConfig.defaultReorderEnabled,title:Ne,header:HeaderedItemConfig.Header.resolve(de.header,de.hasHeaders),componentType:xe,componentState:(Ce=de.componentState)!==null&&Ce!==void 0?Ce:{}}}}le.resolve=oe;function ie(de){return{type:ItemType.component,size:formatSize(de.size,de.sizeUnit),minSize:formatUndefinableSize(de.minSize,de.minSizeUnit),id:de.id,maximised:de.maximised,isClosable:de.isClosable,reorderEnabled:de.reorderEnabled,title:de.title,header:ResolvedHeaderedItemConfig.Header.createCopy(de.header),componentType:de.componentType,componentState:deepExtendValue(void 0,de.componentState)}}le.fromResolved=ie;function ue(de){switch(typeof de){case"string":return de;case"number":return de.toString();case"boolean":return de.toString();default:return""}}le.componentTypeToTitle=ue})(ComponentItemConfig||(ComponentItemConfig={}));var RowOrColumnItemConfig;(function(le){function oe(pe){switch(pe.type){case ItemType.row:case ItemType.column:case ItemType.stack:case ItemType.component:return!0;case ItemType.ground:return!1;default:throw new UnreachableCaseError("UROCOSPCICIC13687",pe.type)}}le.isChildItemConfig=oe;function ie(pe,_e){var Ce;const{size:xe,sizeUnit:Ie}=ItemConfig.resolveSize(pe.size,pe.width,pe.height,_e),{size:$e,sizeUnit:Ne}=ItemConfig.resolveMinSize(pe.minSize,pe.minWidth,pe.minHeight);return{type:pe.type,content:le.resolveContent(pe.content),size:xe,sizeUnit:Ie,minSize:$e,minSizeUnit:Ne,id:ItemConfig.resolveId(pe.id),isClosable:(Ce=pe.isClosable)!==null&&Ce!==void 0?Ce:ResolvedItemConfig.defaults.isClosable}}le.resolve=ie;function ue(pe){return{type:pe.type,content:he(pe.content),size:formatSize(pe.size,pe.sizeUnit),minSize:formatUndefinableSize(pe.minSize,pe.minSizeUnit),id:pe.id,isClosable:pe.isClosable}}le.fromResolved=ue;function de(pe){if(pe===void 0)return[];{const _e=pe.length,Ce=new Array(_e);let xe=!1,Ie=!1;for(let Oe=0;Oe<_e;Oe++){const Fe=pe[Oe];if(le.isChildItemConfig(Fe)){if(!Ie){const Ve=ItemConfig.calculateSizeWidthHeightSpecificationType(Fe);switch(Ve){case 0:break;case 2:xe=!0;break;case 1:Ie=!0;break;default:throw new UnreachableCaseError("ROCICRC87556",Ve)}}Ce[Oe]=Fe}else throw new ConfigurationError("ItemConfig is not Row, Column or Stack",Fe)}let $e;Ie?$e=!1:xe?$e=!0:$e=!1;const Ne=new Array(_e);for(let Oe=0;Oe<_e;Oe++){const Fe=Ce[Oe],Ve=ItemConfig.resolve(Fe,$e);if(ResolvedRowOrColumnItemConfig.isChildItemConfig(Ve))Ne[Oe]=Ve;else throw new AssertError("UROCOSPIC99512",JSON.stringify(Ve))}return Ne}}le.resolveContent=de;function he(pe){const _e=pe.length,Ce=new Array(_e);for(let xe=0;xe<_e;xe++){const Ie=pe[xe],$e=Ie.type;let Ne;switch($e){case ItemType.row:case ItemType.column:Ne=le.fromResolved(Ie);break;case ItemType.stack:Ne=StackItemConfig.fromResolved(Ie);break;case ItemType.component:Ne=ComponentItemConfig.fromResolved(Ie);break;default:throw new UnreachableCaseError("ROCICFRC44797",$e)}Ce[xe]=Ne}return Ce}})(RowOrColumnItemConfig||(RowOrColumnItemConfig={}));var RootItemConfig;(function(le){function oe(de){switch(de.type){case ItemType.row:case ItemType.column:case ItemType.stack:case ItemType.component:return!0;case ItemType.ground:return!1;default:throw new UnreachableCaseError("URICIR23687",de.type)}}le.isRootItemConfig=oe;function ie(de){if(de!==void 0){const he=ItemConfig.resolve(de,!1);if(ResolvedRootItemConfig.isRootItemConfig(he))return he;throw new ConfigurationError("ItemConfig is not Row, Column or Stack",JSON.stringify(de))}}le.resolve=ie;function ue(de){if(de!==void 0){const he=de.type;switch(he){case ItemType.row:case ItemType.column:return RowOrColumnItemConfig.fromResolved(de);case ItemType.stack:return StackItemConfig.fromResolved(de);case ItemType.component:return ComponentItemConfig.fromResolved(de);default:throw new UnreachableCaseError("RICFROU89921",he)}}}le.fromResolvedOrUndefined=ue})(RootItemConfig||(RootItemConfig={}));var LayoutConfig;(function(le){(function(pe){function _e(Ce){var xe,Ie,$e,Ne,Oe,Fe,Ve,ze,Ue,Pt;return{constrainDragToContainer:(xe=Ce==null?void 0:Ce.constrainDragToContainer)!==null&&xe!==void 0?xe:ResolvedLayoutConfig.Settings.defaults.constrainDragToContainer,reorderEnabled:(Ie=Ce==null?void 0:Ce.reorderEnabled)!==null&&Ie!==void 0?Ie:ResolvedLayoutConfig.Settings.defaults.reorderEnabled,popoutWholeStack:($e=Ce==null?void 0:Ce.popoutWholeStack)!==null&&$e!==void 0?$e:ResolvedLayoutConfig.Settings.defaults.popoutWholeStack,blockedPopoutsThrowError:(Ne=Ce==null?void 0:Ce.blockedPopoutsThrowError)!==null&&Ne!==void 0?Ne:ResolvedLayoutConfig.Settings.defaults.blockedPopoutsThrowError,closePopoutsOnUnload:(Oe=Ce==null?void 0:Ce.closePopoutsOnUnload)!==null&&Oe!==void 0?Oe:ResolvedLayoutConfig.Settings.defaults.closePopoutsOnUnload,responsiveMode:(Fe=Ce==null?void 0:Ce.responsiveMode)!==null&&Fe!==void 0?Fe:ResolvedLayoutConfig.Settings.defaults.responsiveMode,tabOverlapAllowance:(Ve=Ce==null?void 0:Ce.tabOverlapAllowance)!==null&&Ve!==void 0?Ve:ResolvedLayoutConfig.Settings.defaults.tabOverlapAllowance,reorderOnTabMenuClick:(ze=Ce==null?void 0:Ce.reorderOnTabMenuClick)!==null&&ze!==void 0?ze:ResolvedLayoutConfig.Settings.defaults.reorderOnTabMenuClick,tabControlOffset:(Ue=Ce==null?void 0:Ce.tabControlOffset)!==null&&Ue!==void 0?Ue:ResolvedLayoutConfig.Settings.defaults.tabControlOffset,popInOnClose:(Pt=Ce==null?void 0:Ce.popInOnClose)!==null&&Pt!==void 0?Pt:ResolvedLayoutConfig.Settings.defaults.popInOnClose}}pe.resolve=_e})(le.Settings||(le.Settings={})),function(pe){function _e($e){var Ne,Oe,Fe,Ve,ze;const{size:Ue,sizeUnit:Pt}=pe.resolveDefaultMinItemHeight($e),{size:qe,sizeUnit:Et}=pe.resolveDefaultMinItemWidth($e);return{borderWidth:(Ne=$e==null?void 0:$e.borderWidth)!==null&&Ne!==void 0?Ne:ResolvedLayoutConfig.Dimensions.defaults.borderWidth,borderGrabWidth:(Oe=$e==null?void 0:$e.borderGrabWidth)!==null&&Oe!==void 0?Oe:ResolvedLayoutConfig.Dimensions.defaults.borderGrabWidth,defaultMinItemHeight:Ue,defaultMinItemHeightUnit:Pt,defaultMinItemWidth:qe,defaultMinItemWidthUnit:Et,headerHeight:(Fe=$e==null?void 0:$e.headerHeight)!==null&&Fe!==void 0?Fe:ResolvedLayoutConfig.Dimensions.defaults.headerHeight,dragProxyWidth:(Ve=$e==null?void 0:$e.dragProxyWidth)!==null&&Ve!==void 0?Ve:ResolvedLayoutConfig.Dimensions.defaults.dragProxyWidth,dragProxyHeight:(ze=$e==null?void 0:$e.dragProxyHeight)!==null&&ze!==void 0?ze:ResolvedLayoutConfig.Dimensions.defaults.dragProxyHeight}}pe.resolve=_e;function Ce($e){return{borderWidth:$e.borderWidth,borderGrabWidth:$e.borderGrabWidth,defaultMinItemHeight:formatSize($e.defaultMinItemHeight,$e.defaultMinItemHeightUnit),defaultMinItemWidth:formatSize($e.defaultMinItemWidth,$e.defaultMinItemWidthUnit),headerHeight:$e.headerHeight,dragProxyWidth:$e.dragProxyWidth,dragProxyHeight:$e.dragProxyHeight}}pe.fromResolved=Ce;function xe($e){const Ne=$e==null?void 0:$e.defaultMinItemHeight;return Ne===void 0?{size:ResolvedLayoutConfig.Dimensions.defaults.defaultMinItemHeight,sizeUnit:ResolvedLayoutConfig.Dimensions.defaults.defaultMinItemHeightUnit}:parseSize(Ne,[SizeUnitEnum.Pixel])}pe.resolveDefaultMinItemHeight=xe;function Ie($e){const Ne=$e==null?void 0:$e.defaultMinItemWidth;return Ne===void 0?{size:ResolvedLayoutConfig.Dimensions.defaults.defaultMinItemWidth,sizeUnit:ResolvedLayoutConfig.Dimensions.defaults.defaultMinItemWidthUnit}:parseSize(Ne,[SizeUnitEnum.Pixel])}pe.resolveDefaultMinItemWidth=Ie}(le.Dimensions||(le.Dimensions={})),function(pe){function _e(Ce,xe,Ie){var $e,Ne,Oe,Fe,Ve,ze,Ue,Pt,qe,Et,kt,At;let Dt;return(Ce==null?void 0:Ce.show)!==void 0?Dt=Ce.show:xe!==void 0&&xe.hasHeaders!==void 0?Dt=xe.hasHeaders?ResolvedLayoutConfig.Header.defaults.show:!1:Dt=ResolvedLayoutConfig.Header.defaults.show,{show:Dt,popout:(Ne=($e=Ce==null?void 0:Ce.popout)!==null&&$e!==void 0?$e:Ie==null?void 0:Ie.popout)!==null&&Ne!==void 0?Ne:(xe==null?void 0:xe.showPopoutIcon)===!1?!1:ResolvedLayoutConfig.Header.defaults.popout,dock:(Fe=(Oe=Ce==null?void 0:Ce.popin)!==null&&Oe!==void 0?Oe:Ie==null?void 0:Ie.popin)!==null&&Fe!==void 0?Fe:ResolvedLayoutConfig.Header.defaults.dock,maximise:(ze=(Ve=Ce==null?void 0:Ce.maximise)!==null&&Ve!==void 0?Ve:Ie==null?void 0:Ie.maximise)!==null&&ze!==void 0?ze:(xe==null?void 0:xe.showMaximiseIcon)===!1?!1:ResolvedLayoutConfig.Header.defaults.maximise,close:(Pt=(Ue=Ce==null?void 0:Ce.close)!==null&&Ue!==void 0?Ue:Ie==null?void 0:Ie.close)!==null&&Pt!==void 0?Pt:(xe==null?void 0:xe.showCloseIcon)===!1?!1:ResolvedLayoutConfig.Header.defaults.close,minimise:(Et=(qe=Ce==null?void 0:Ce.minimise)!==null&&qe!==void 0?qe:Ie==null?void 0:Ie.minimise)!==null&&Et!==void 0?Et:ResolvedLayoutConfig.Header.defaults.minimise,tabDropdown:(At=(kt=Ce==null?void 0:Ce.tabDropdown)!==null&&kt!==void 0?kt:Ie==null?void 0:Ie.tabDropdown)!==null&&At!==void 0?At:ResolvedLayoutConfig.Header.defaults.tabDropdown}}pe.resolve=_e}(le.Header||(le.Header={}));function oe(pe){return"parentId"in pe||"indexInParent"in pe||"window"in pe}le.isPopout=oe;function ie(pe){if(oe(pe))return PopoutLayoutConfig.resolve(pe);{let _e;return pe.root!==void 0?_e=pe.root:pe.content!==void 0&&pe.content.length>0?_e=pe.content[0]:_e=void 0,{resolved:!0,root:RootItemConfig.resolve(_e),openPopouts:le.resolveOpenPopouts(pe.openPopouts),dimensions:le.Dimensions.resolve(pe.dimensions),settings:le.Settings.resolve(pe.settings),header:le.Header.resolve(pe.header,pe.settings,pe.labels)}}}le.resolve=ie;function ue(pe){return{root:RootItemConfig.fromResolvedOrUndefined(pe.root),openPopouts:PopoutLayoutConfig.fromResolvedArray(pe.openPopouts),settings:ResolvedLayoutConfig.Settings.createCopy(pe.settings),dimensions:le.Dimensions.fromResolved(pe.dimensions),header:ResolvedLayoutConfig.Header.createCopy(pe.header)}}le.fromResolved=ue;function de(pe){const _e=pe;return _e.resolved!==void 0&&_e.resolved===!0}le.isResolved=de;function he(pe){if(pe===void 0)return[];{const _e=pe.length,Ce=new Array(_e);for(let xe=0;xe<_e;xe++)Ce[xe]=PopoutLayoutConfig.resolve(pe[xe]);return Ce}}le.resolveOpenPopouts=he})(LayoutConfig||(LayoutConfig={}));var PopoutLayoutConfig;(function(le){(function(de){function he(_e,Ce){var xe,Ie,$e,Ne,Oe,Fe,Ve,ze;let Ue;const Pt=ResolvedPopoutLayoutConfig.Window.defaults;return _e!==void 0?Ue={width:(xe=_e.width)!==null&&xe!==void 0?xe:Pt.width,height:(Ie=_e.height)!==null&&Ie!==void 0?Ie:Pt.height,left:($e=_e.left)!==null&&$e!==void 0?$e:Pt.left,top:(Ne=_e.top)!==null&&Ne!==void 0?Ne:Pt.top}:Ue={width:(Oe=Ce==null?void 0:Ce.width)!==null&&Oe!==void 0?Oe:Pt.width,height:(Fe=Ce==null?void 0:Ce.height)!==null&&Fe!==void 0?Fe:Pt.height,left:(Ve=Ce==null?void 0:Ce.left)!==null&&Ve!==void 0?Ve:Pt.left,top:(ze=Ce==null?void 0:Ce.top)!==null&&ze!==void 0?ze:Pt.top},Ue}de.resolve=he;function pe(_e){return{width:_e.width===null?void 0:_e.width,height:_e.height===null?void 0:_e.height,left:_e.left===null?void 0:_e.left,top:_e.top===null?void 0:_e.top}}de.fromResolved=pe})(le.Window||(le.Window={}));function oe(de){var he,pe;let _e;return de.root!==void 0?_e=de.root:de.content!==void 0&&de.content.length>0?_e=de.content[0]:_e=void 0,{root:RootItemConfig.resolve(_e),openPopouts:LayoutConfig.resolveOpenPopouts(de.openPopouts),dimensions:LayoutConfig.Dimensions.resolve(de.dimensions),settings:LayoutConfig.Settings.resolve(de.settings),header:LayoutConfig.Header.resolve(de.header,de.settings,de.labels),parentId:(he=de.parentId)!==null&&he!==void 0?he:null,indexInParent:(pe=de.indexInParent)!==null&&pe!==void 0?pe:null,window:le.Window.resolve(de.window,de.dimensions),resolved:!0}}le.resolve=oe;function ie(de){return{root:RootItemConfig.fromResolvedOrUndefined(de.root),openPopouts:ue(de.openPopouts),dimensions:LayoutConfig.Dimensions.fromResolved(de.dimensions),settings:ResolvedLayoutConfig.Settings.createCopy(de.settings),header:ResolvedLayoutConfig.Header.createCopy(de.header),parentId:de.parentId,indexInParent:de.indexInParent,window:le.Window.fromResolved(de.window)}}le.fromResolved=ie;function ue(de){const he=de.length,pe=new Array(he);for(let _e=0;_e<he;_e++){const Ce=de[_e];pe[_e]=le.fromResolved(Ce)}return pe}le.fromResolvedArray=ue})(PopoutLayoutConfig||(PopoutLayoutConfig={}));function parseSize(le,oe){const{numericPart:ie,firstNonNumericCharPart:ue}=splitStringAtFirstNonNumericChar(le),de=Number.parseInt(ie,10);if(isNaN(de))throw new ConfigurationError(`${i18nStrings[7]}: ${le}`);{const he=SizeUnitEnum.tryParse(ue);if(he===void 0)throw new ConfigurationError(`${i18nStrings[8]}: ${le}`);if(oe.includes(he))return{size:de,sizeUnit:he};throw new ConfigurationError(`${i18nStrings[9]}: ${le}`)}}function formatSize(le,oe){return le.toString(10)+SizeUnitEnum.format(oe)}function formatUndefinableSize(le,oe){if(le!==void 0)return le.toString(10)+SizeUnitEnum.format(oe)}let EventEmitter$1=class ho{constructor(){this._allEventSubscriptions=[],this._subscriptionsMap=new Map,this.unbind=this.removeEventListener,this.trigger=this.emit}tryBubbleEvent(oe,ie){}emit(oe,...ie){let ue=this._subscriptionsMap.get(oe);if(ue!==void 0){ue=ue.slice();for(let de=0;de<ue.length;de++){const he=ue[de];he(...ie)}}this.emitAllEvent(oe,ie),this.tryBubbleEvent(oe,ie)}emitUnknown(oe,...ie){let ue=this._subscriptionsMap.get(oe);if(ue!==void 0){ue=ue.slice();for(let de=0;de<ue.length;de++)ue[de](...ie)}this.emitAllEvent(oe,ie),this.tryBubbleEvent(oe,ie)}emitBaseBubblingEvent(oe){const ie=new ho.BubblingEvent(oe,this);this.emitUnknown(oe,ie)}emitUnknownBubblingEvent(oe){const ie=new ho.BubblingEvent(oe,this);this.emitUnknown(oe,ie)}removeEventListener(oe,ie){const ue=ie;this.removeUnknownEventListener(oe,ue)}off(oe,ie){this.removeEventListener(oe,ie)}addEventListener(oe,ie){const ue=ie;this.addUnknownEventListener(oe,ue)}on(oe,ie){this.addEventListener(oe,ie)}addUnknownEventListener(oe,ie){if(oe===ho.ALL_EVENT)this._allEventSubscriptions.push(ie);else{let ue=this._subscriptionsMap.get(oe);ue!==void 0?ue.push(ie):(ue=[ie],this._subscriptionsMap.set(oe,ue))}}removeUnknownEventListener(oe,ie){if(oe===ho.ALL_EVENT)this.removeSubscription(oe,this._allEventSubscriptions,ie);else{const ue=this._subscriptionsMap.get(oe);if(ue===void 0)throw new Error("No subscribtions to unsubscribe for event "+oe);this.removeSubscription(oe,ue,ie)}}removeSubscription(oe,ie,ue){const de=ie.indexOf(ue);if(de<0)throw new Error("Nothing to unbind for "+oe);ie.splice(de,1)}emitAllEvent(oe,ie){const ue=this._allEventSubscriptions.length;if(ue>0){const de=ie.slice();de.unshift(oe);const he=this._allEventSubscriptions.slice();for(let pe=0;pe<ue;pe++)he[pe](...de)}}};(function(le){le.ALL_EVENT="__all",le.headerClickEventName="stackHeaderClick",le.headerTouchStartEventName="stackHeaderTouchStart";class oe{constructor(he,pe){this._name=he,this._target=pe,this._isPropagationStopped=!1}get name(){return this._name}get target(){return this._target}get origin(){return this._target}get isPropagationStopped(){return this._isPropagationStopped}stopPropagation(){this._isPropagationStopped=!0}}le.BubblingEvent=oe;class ie extends oe{constructor(he,pe,_e){super(he,pe),this._mouseEvent=_e}get mouseEvent(){return this._mouseEvent}}le.ClickBubblingEvent=ie;class ue extends oe{constructor(he,pe,_e){super(he,pe),this._touchEvent=_e}get touchEvent(){return this._touchEvent}}le.TouchStartBubblingEvent=ue})(EventEmitter$1||(EventEmitter$1={}));class ComponentContainer extends EventEmitter$1{constructor(oe,ie,ue,de,he,pe,_e,Ce,xe){super(),this._config=oe,this._parent=ie,this._layoutManager=ue,this._element=de,this._updateItemConfigEvent=he,this._showEvent=pe,this._hideEvent=_e,this._focusEvent=Ce,this._blurEvent=xe,this._stackMaximised=!1,this._width=0,this._height=0,this._visible=!0,this._isShownWithZeroDimensions=!0,this._componentType=oe.componentType,this._isClosable=oe.isClosable,this._initialState=oe.componentState,this._state=this._initialState,this._boundComponent=this.layoutManager.bindComponent(this,oe),this.updateElementPositionPropertyFromBoundComponent()}get width(){return this._width}get height(){return this._height}get parent(){return this._parent}get componentName(){return this._componentType}get componentType(){return this._componentType}get virtual(){return this._boundComponent.virtual}get component(){return this._boundComponent.component}get tab(){return this._tab}get title(){return this._parent.title}get layoutManager(){return this._layoutManager}get isHidden(){return!this._visible}get visible(){return this._visible}get state(){return this._state}get initialState(){return this._initialState}get element(){return this._element}destroy(){this.releaseComponent(),this.stateRequestEvent=void 0,this.emit("destroy")}getElement(){return this._element}hide(){this._hideEvent()}show(){this._showEvent()}focus(oe=!1){this._focusEvent(oe)}blur(oe=!1){this._blurEvent(oe)}setSize(oe,ie){let ue=this._parent;if(ue.isColumn||ue.isRow||ue.parent===null)throw new AssertError("ICSSPRC","ComponentContainer cannot have RowColumn Parent");{let de;do de=ue,ue=ue.parent;while(ue!==null&&!ue.isColumn&&!ue.isRow);if(ue===null)return!1;{const he=ue.isColumn?"height":"width",pe=this[he];if(pe===null)throw new UnexpectedNullError("ICSSCS11194");{const _e=he==="height"?ie:oe,Ce=pe*(1/(de.size/100)),xe=_e/Ce*100,Ie=(de.size-xe)/(ue.contentItems.length-1);for(let $e=0;$e<ue.contentItems.length;$e++){const Ne=ue.contentItems[$e];Ne===de?Ne.size=xe:Ne.size+=Ie}return ue.updateSize(!1),!0}}}}close(){this._isClosable&&(this.emit("close"),this._parent.close())}replaceComponent(oe){if(this.releaseComponent(),ItemConfig.isComponent(oe)){const ie=ComponentItemConfig.resolve(oe,!1);if(this._initialState=ie.componentState,this._state=this._initialState,this._componentType=ie.componentType,this._updateItemConfigEvent(ie),this._boundComponent=this.layoutManager.bindComponent(this,ie),this.updateElementPositionPropertyFromBoundComponent(),this._boundComponent.virtual){if(this.virtualVisibilityChangeRequiredEvent!==void 0&&this.virtualVisibilityChangeRequiredEvent(this,this._visible),this.virtualRectingRequiredEvent!==void 0){this._layoutManager.fireBeforeVirtualRectingEvent(1);try{this.virtualRectingRequiredEvent(this,this._width,this._height)}finally{this._layoutManager.fireAfterVirtualRectingEvent()}}this.setBaseLogicalZIndex()}this.emit("stateChanged")}else throw new Error("ReplaceComponent not passed a component ItemConfig")}getState(){return this._state}extendState(oe){const ie=deepExtend(this._state,oe);this.setState(ie)}setState(oe){this._state=oe,this._parent.emitBaseBubblingEvent("stateChanged")}setTitle(oe){this._parent.setTitle(oe)}setTab(oe){this._tab=oe,this.emit("tab",oe)}setVisibility(oe){this._boundComponent.virtual&&this.virtualVisibilityChangeRequiredEvent!==void 0&&this.virtualVisibilityChangeRequiredEvent(this,oe),oe?this._visible?this._isShownWithZeroDimensions&&(this._height!==0||this._width!==0)&&(this._isShownWithZeroDimensions=!1,this.setSizeToNodeSize(this._width,this._height,!0),this.emitShow()):(this._visible=!0,this._height===0&&this._width===0?this._isShownWithZeroDimensions=!0:(this._isShownWithZeroDimensions=!1,this.setSizeToNodeSize(this._width,this._height,!0),this.emitShow())):this._visible&&(this._visible=!1,this._isShownWithZeroDimensions=!1,this.emitHide())}setBaseLogicalZIndex(){this.setLogicalZIndex(LogicalZIndex.base)}setLogicalZIndex(oe){oe!==this._logicalZIndex&&(this._logicalZIndex=oe,this.notifyVirtualZIndexChangeRequired())}enterDragMode(oe,ie){this._width=oe,this._height=ie,setElementWidth(this._element,oe),setElementHeight(this._element,ie),this.setLogicalZIndex(LogicalZIndex.drag),this.drag()}exitDragMode(){this.setBaseLogicalZIndex()}enterStackMaximised(){this._stackMaximised=!0,this.setLogicalZIndex(LogicalZIndex.stackMaximised)}exitStackMaximised(){this.setBaseLogicalZIndex(),this._stackMaximised=!1}drag(){if(this._boundComponent.virtual&&this.virtualRectingRequiredEvent!==void 0){this._layoutManager.fireBeforeVirtualRectingEvent(1);try{this.virtualRectingRequiredEvent(this,this._width,this._height)}finally{this._layoutManager.fireAfterVirtualRectingEvent()}}}setSizeToNodeSize(oe,ie,ue){(oe!==this._width||ie!==this._height||ue)&&(this._width=oe,this._height=ie,setElementWidth(this._element,oe),setElementHeight(this._element,ie),this._boundComponent.virtual?this.addVirtualSizedContainerToLayoutManager():(this.emit("resize"),this.checkShownFromZeroDimensions()))}notifyVirtualRectingRequired(){this.virtualRectingRequiredEvent!==void 0&&(this.virtualRectingRequiredEvent(this,this._width,this._height),this.emit("resize"),this.checkShownFromZeroDimensions())}notifyVirtualZIndexChangeRequired(){if(this.virtualZIndexChangeRequiredEvent!==void 0){const oe=this._logicalZIndex,ie=LogicalZIndexToDefaultMap[oe];this.virtualZIndexChangeRequiredEvent(this,oe,ie)}}updateElementPositionPropertyFromBoundComponent(){this._boundComponent.virtual?this._element.style.position="static":this._element.style.position=""}addVirtualSizedContainerToLayoutManager(){this._layoutManager.beginVirtualSizedContainerAdding();try{this._layoutManager.addVirtualSizedContainer(this)}finally{this._layoutManager.endVirtualSizedContainerAdding()}}checkShownFromZeroDimensions(){this._isShownWithZeroDimensions&&(this._height!==0||this._width!==0)&&(this._isShownWithZeroDimensions=!1,this.emitShow())}emitShow(){this.emit("shown"),this.emit("show")}emitHide(){this.emit("hide")}releaseComponent(){this._stackMaximised&&this.exitStackMaximised(),this.emit("beforeComponentRelease",this._boundComponent.component),this.layoutManager.unbindComponent(this,this._boundComponent.virtual,this._boundComponent.component)}}class BrowserPopout extends EventEmitter$1{constructor(oe,ie,ue){super(),this._config=oe,this._initialWindowSize=ie,this._layoutManager=ue,this._isInitialised=!1,this._popoutWindow=null,this.createWindow()}toConfig(){var oe,ie;if(this._isInitialised===!1)throw new Error("Can't create config, layout not yet initialised");const de=this.getGlInstance().saveLayout();let he,pe;this._popoutWindow===null?(he=null,pe=null):(he=(oe=this._popoutWindow.screenX)!==null&&oe!==void 0?oe:this._popoutWindow.screenLeft,pe=(ie=this._popoutWindow.screenY)!==null&&ie!==void 0?ie:this._popoutWindow.screenTop);const _e={width:this.getGlInstance().width,height:this.getGlInstance().height,left:he,top:pe};return{root:de.root,openPopouts:de.openPopouts,settings:de.settings,dimensions:de.dimensions,header:de.header,window:_e,parentId:this._config.parentId,indexInParent:this._config.indexInParent,resolved:!0}}getGlInstance(){if(this._popoutWindow===null)throw new UnexpectedNullError("BPGGI24693");return this._popoutWindow.__glInstance}getWindow(){if(this._popoutWindow===null)throw new UnexpectedNullError("BPGW087215");return this._popoutWindow}close(){if(this.getGlInstance())this.getGlInstance().closeWindow();else try{this.getWindow().close()}catch{}}popIn(){let oe,ie=this._config.indexInParent;if(!this._config.parentId)return;const ue=this.getGlInstance().saveLayout(),he=deepExtend({},ue).root;if(he===void 0)throw new UnexpectedUndefinedError("BPPIR19998");const pe=this._layoutManager.groundItem;if(pe===void 0)throw new UnexpectedUndefinedError("BPPIG34972");oe=pe.getItemsByPopInParentId(this._config.parentId)[0],oe||(pe.contentItems.length>0?oe=pe.contentItems[0]:oe=pe,ie=0);const _e=this._layoutManager.createAndInitContentItem(he,oe);oe.addChild(_e,ie),this._layoutManager.layoutConfig.settings.popInOnClose?this._onClose():this.close()}createWindow(){const oe=this.createUrl(),ie=Math.floor(Math.random()*1e6).toString(36),ue=this.serializeWindowFeatures({width:this._initialWindowSize.width,height:this._initialWindowSize.height,innerWidth:this._initialWindowSize.width,innerHeight:this._initialWindowSize.height,menubar:"no",toolbar:"no",location:"no",personalbar:"no",resizable:"yes",scrollbars:"no",status:"no"});if(this._popoutWindow=globalThis.open(oe,ie,ue),!this._popoutWindow){if(this._layoutManager.layoutConfig.settings.blockedPopoutsThrowError===!0)throw new PopoutBlockedError("Popout blocked");return}this._popoutWindow.addEventListener("load",()=>this.positionWindow(),{passive:!0}),this._popoutWindow.addEventListener("beforeunload",()=>{this._layoutManager.layoutConfig.settings.popInOnClose?this.popIn():this._onClose()},{passive:!0}),this._checkReadyInterval=setInterval(()=>this.checkReady(),10)}checkReady(){if(this._popoutWindow===null)throw new UnexpectedNullError("BPCR01844");this._popoutWindow.__glInstance&&this._popoutWindow.__glInstance.isInitialised&&(this.onInitialised(),this._checkReadyInterval!==void 0&&(clearInterval(this._checkReadyInterval),this._checkReadyInterval=void 0))}serializeWindowFeatures(oe){const ie=[];for(const ue in oe)ie.push(ue+"="+oe[ue].toString());return ie.join(",")}createUrl(){const oe="gl-window-config-"+getUniqueId(),ie=ResolvedLayoutConfig.minifyConfig(this._config);try{localStorage.setItem(oe,JSON.stringify(ie))}catch(de){throw new Error("Error while writing to localStorage "+getErrorMessage(de))}const ue=new URL(location.href);return ue.searchParams.set("gl-window",oe),ue.toString()}positionWindow(){if(this._popoutWindow===null)throw new Error("BrowserPopout.positionWindow: null popoutWindow");this._popoutWindow.moveTo(this._initialWindowSize.left,this._initialWindowSize.top),this._popoutWindow.focus()}onInitialised(){this._isInitialised=!0,this.getGlInstance().on("popIn",()=>this.popIn()),this.emit("initialised")}_onClose(){setTimeout(()=>this.emit("closed"),50)}}class ContentItem extends EventEmitter$1{constructor(oe,ie,ue,de){super(),this.layoutManager=oe,this._parent=ue,this._element=de,this._popInParentIds=[],this._type=ie.type,this._id=ie.id,this._isInitialised=!1,this.isGround=!1,this.isRow=!1,this.isColumn=!1,this.isStack=!1,this.isComponent=!1,this.size=ie.size,this.sizeUnit=ie.sizeUnit,this.minSize=ie.minSize,this.minSizeUnit=ie.minSizeUnit,this._isClosable=ie.isClosable,this._pendingEventPropagations={},this._throttledEvents=["stateChanged"],this._contentItems=this.createContentItems(ie.content)}get type(){return this._type}get id(){return this._id}set id(oe){this._id=oe}get popInParentIds(){return this._popInParentIds}get parent(){return this._parent}get contentItems(){return this._contentItems}get isClosable(){return this._isClosable}get element(){return this._element}get isInitialised(){return this._isInitialised}static isStack(oe){return oe.isStack}static isComponentItem(oe){return oe.isComponent}static isComponentParentableItem(oe){return oe.isStack||oe.isGround}removeChild(oe,ie=!1){const ue=this._contentItems.indexOf(oe);if(ue===-1)throw new Error("Can't remove child item. Unknown content item");if(ie||this._contentItems[ue].destroy(),this._contentItems.splice(ue,1),this._contentItems.length>0)this.updateSize(!1);else if(!this.isGround&&this._isClosable===!0){if(this._parent===null)throw new UnexpectedNullError("CIUC00874");this._parent.removeChild(this)}}addChild(oe,ie,ue){return ie??(ie=this._contentItems.length),this._contentItems.splice(ie,0,oe),oe.setParent(this),this._isInitialised===!0&&oe._isInitialised===!1&&oe.init(),ie}replaceChild(oe,ie,ue=!1){const de=this._contentItems.indexOf(oe),he=oe._element.parentNode;if(de===-1)throw new AssertError("CIRCI23232","Can't replace child. oldChild is not child of this");if(he===null)throw new UnexpectedNullError("CIRCP23232");if(he.replaceChild(ie._element,oe._element),ue===!0&&(oe._parent=null,oe.destroy()),this._contentItems[de]=ie,ie.setParent(this),ie.size=oe.size,ie.sizeUnit=oe.sizeUnit,ie.minSize=oe.minSize,ie.minSizeUnit=oe.minSizeUnit,ie._parent===null)throw new UnexpectedNullError("CIRCNC45699");ie._parent._isInitialised===!0&&ie._isInitialised===!1&&ie.init(),this.updateSize(!1)}remove(){if(this._parent===null)throw new UnexpectedNullError("CIR11110");this._parent.removeChild(this)}popout(){const oe=getUniqueId(),ie=this.layoutManager.createPopoutFromContentItem(this,void 0,oe,void 0);return this.emitBaseBubblingEvent("stateChanged"),ie}calculateConfigContent(){const oe=this._contentItems,ie=oe.length,ue=new Array(ie);for(let de=0;de<ie;de++){const he=oe[de];ue[de]=he.toConfig()}return ue}highlightDropZone(oe,ie,ue){const de=this.layoutManager.dropTargetIndicator;if(de===null)throw new UnexpectedNullError("ACIHDZ5593");de.highlightArea(ue,1)}onDrop(oe,ie){this.addChild(oe)}show(){this.layoutManager.beginSizeInvalidation();try{setElementDisplayVisibility(this._element,!0);for(let oe=0;oe<this._contentItems.length;oe++)this._contentItems[oe].show()}finally{this.layoutManager.endSizeInvalidation()}}destroy(){for(let oe=0;oe<this._contentItems.length;oe++)this._contentItems[oe].destroy();this._contentItems=[],this.emitBaseBubblingEvent("beforeItemDestroyed"),this._element.remove(),this.emitBaseBubblingEvent("itemDestroyed")}getElementArea(oe){oe=oe??this._element;const ie=oe.getBoundingClientRect(),ue=ie.top+document.body.scrollTop,de=ie.left+document.body.scrollLeft,he=ie.width,pe=ie.height;return{x1:de,y1:ue,x2:de+he,y2:ue+pe,surface:he*pe,contentItem:this}}init(){this._isInitialised=!0,this.emitBaseBubblingEvent("itemCreated"),this.emitUnknownBubblingEvent(this.type+"Created")}setParent(oe){this._parent=oe}addPopInParentId(oe){this.popInParentIds.includes(oe)||this.popInParentIds.push(oe)}initContentItems(){for(let oe=0;oe<this._contentItems.length;oe++)this._contentItems[oe].init()}hide(){this.layoutManager.beginSizeInvalidation();try{setElementDisplayVisibility(this._element,!1)}finally{this.layoutManager.endSizeInvalidation()}}updateContentItemsSize(oe){for(let ie=0;ie<this._contentItems.length;ie++)this._contentItems[ie].updateSize(oe)}createContentItems(oe){const ie=oe.length,ue=new Array(ie);for(let de=0;de<oe.length;de++)ue[de]=this.layoutManager.createContentItem(oe[de],this);return ue}propagateEvent(oe,ie){if(ie.length===1){const ue=ie[0];ue instanceof EventEmitter$1.BubblingEvent&&ue.isPropagationStopped===!1&&this._isInitialised===!0&&(this.isGround===!1&&this._parent?this._parent.emitUnknown(oe,ue):this.scheduleEventPropagationToLayoutManager(oe,ue))}}tryBubbleEvent(oe,ie){if(ie.length===1){const ue=ie[0];ue instanceof EventEmitter$1.BubblingEvent&&ue.isPropagationStopped===!1&&this._isInitialised===!0&&(this.isGround===!1&&this._parent?this._parent.emitUnknown(oe,ue):this.scheduleEventPropagationToLayoutManager(oe,ue))}}scheduleEventPropagationToLayoutManager(oe,ie){this._throttledEvents.indexOf(oe)===-1?this.layoutManager.emitUnknown(oe,ie):this._pendingEventPropagations[oe]!==!0&&(this._pendingEventPropagations[oe]=!0,globalThis.requestAnimationFrame(()=>this.propagateEventToLayoutManager(oe,ie)))}propagateEventToLayoutManager(oe,ie){this._pendingEventPropagations[oe]=!1,this.layoutManager.emitUnknown(oe,ie)}}class ComponentItem extends ContentItem{constructor(oe,ie,ue){super(oe,ie,ue,document.createElement("div")),this._parentItem=ue,this._focused=!1,this.isComponent=!0,this._reorderEnabled=ie.reorderEnabled,this.applyUpdatableConfig(ie),this._initialWantMaximise=ie.maximised;const de=document.createElement("div");de.classList.add("lm_content"),this.element.appendChild(de),this._container=new ComponentContainer(ie,this,oe,de,he=>this.handleUpdateItemConfigEvent(he),()=>this.show(),()=>this.hide(),he=>this.focus(he),he=>this.blur(he))}get componentName(){return this._container.componentType}get componentType(){return this._container.componentType}get reorderEnabled(){return this._reorderEnabled}get initialWantMaximise(){return this._initialWantMaximise}get component(){return this._container.component}get container(){return this._container}get parentItem(){return this._parentItem}get headerConfig(){return this._headerConfig}get title(){return this._title}get tab(){return this._tab}get focused(){return this._focused}destroy(){this._container.destroy(),super.destroy()}applyUpdatableConfig(oe){this.setTitle(oe.title),this._headerConfig=oe.header}toConfig(){const oe=this._container.stateRequestEvent,ie=oe===void 0?this._container.state:oe();return{type:ItemType.component,content:[],size:this.size,sizeUnit:this.sizeUnit,minSize:this.minSize,minSizeUnit:this.minSizeUnit,id:this.id,maximised:!1,isClosable:this.isClosable,reorderEnabled:this._reorderEnabled,title:this._title,header:ResolvedHeaderedItemConfig.Header.createCopy(this._headerConfig),componentType:ResolvedComponentItemConfig.copyComponentType(this.componentType),componentState:ie}}close(){if(this.parent===null)throw new UnexpectedNullError("CIC68883");this.parent.removeChild(this,!1)}enterDragMode(oe,ie){setElementWidth(this.element,oe),setElementHeight(this.element,ie),this._container.enterDragMode(oe,ie)}exitDragMode(){this._container.exitDragMode()}enterStackMaximised(){this._container.enterStackMaximised()}exitStackMaximised(){this._container.exitStackMaximised()}drag(){this._container.drag()}updateSize(oe){this.updateNodeSize(oe)}init(){this.updateNodeSize(!1),super.init(),this._container.emit("open"),this.initContentItems()}setTitle(oe){this._title=oe,this.emit("titleChanged",oe),this.emit("stateChanged")}setTab(oe){this._tab=oe,this.emit("tab",oe),this._container.setTab(oe)}hide(){super.hide(),this._container.setVisibility(!1)}show(){super.show(),this._container.setVisibility(!0)}focus(oe=!1){this.parentItem.setActiveComponentItem(this,!0,oe)}setFocused(oe){this._focused=!0,this.tab.setFocused(),oe||this.emitBaseBubblingEvent("focus")}blur(oe=!1){this._focused&&this.layoutManager.setFocusedComponentItem(void 0,oe)}setBlurred(oe){this._focused=!1,this.tab.setBlurred(),oe||this.emitBaseBubblingEvent("blur")}setParent(oe){this._parentItem=oe,super.setParent(oe)}handleUpdateItemConfigEvent(oe){this.applyUpdatableConfig(oe)}updateNodeSize(oe){if(this.element.style.display!=="none"){const{width:ie,height:ue}=getElementWidthAndHeight(this.element);this._container.setSizeToNodeSize(ie,ue,oe)}}}class ComponentParentableItem extends ContentItem{constructor(){super(...arguments),this._focused=!1}get focused(){return this._focused}setFocusedValue(oe){this._focused=oe}}class DragListener extends EventEmitter$1{constructor(oe,ie){super(),this._eElement=oe,this._pointerTracking=!1,this._pointerDownEventListener=ue=>this.onPointerDown(ue),this._pointerMoveEventListener=ue=>this.onPointerMove(ue),this._pointerUpEventListener=ue=>this.onPointerUp(ue),this._timeout=void 0,this._allowableTargets=[oe,...ie],this._oDocument=document,this._eBody=document.body,this._nDelay=1800,this._nDistance=10,this._nX=0,this._nY=0,this._nOriginalX=0,this._nOriginalY=0,this._dragging=!1,this._eElement.addEventListener("pointerdown",this._pointerDownEventListener,{passive:!0})}destroy(){this.checkRemovePointerTrackingEventListeners(),this._eElement.removeEventListener("pointerdown",this._pointerDownEventListener)}cancelDrag(){this.processDragStop(void 0)}onPointerDown(oe){if(this._allowableTargets.includes(oe.target)&&oe.isPrimary){const ie=this.getPointerCoordinates(oe);this.processPointerDown(ie)}}processPointerDown(oe){this._nOriginalX=oe.x,this._nOriginalY=oe.y,this._oDocument.addEventListener("pointermove",this._pointerMoveEventListener),this._oDocument.addEventListener("pointerup",this._pointerUpEventListener,{passive:!0}),this._pointerTracking=!0,this._timeout=setTimeout(()=>{try{this.startDrag()}catch(ie){throw ie}},this._nDelay)}onPointerMove(oe){this._pointerTracking&&(this.processDragMove(oe),oe.preventDefault())}processDragMove(oe){this._nX=oe.pageX-this._nOriginalX,this._nY=oe.pageY-this._nOriginalY,this._dragging===!1&&(Math.abs(this._nX)>this._nDistance||Math.abs(this._nY)>this._nDistance)&&this.startDrag(),this._dragging&&this.emit("drag",this._nX,this._nY,oe)}onPointerUp(oe){this.processDragStop(oe)}processDragStop(oe){var ie;this._timeout!==void 0&&(clearTimeout(this._timeout),this._timeout=void 0),this.checkRemovePointerTrackingEventListeners(),this._dragging===!0&&(this._eBody.classList.remove("lm_dragging"),this._eElement.classList.remove("lm_dragging"),(ie=this._oDocument.querySelector("iframe"))===null||ie===void 0||ie.style.setProperty("pointer-events",""),this._dragging=!1,this.emit("dragStop",oe))}checkRemovePointerTrackingEventListeners(){this._pointerTracking&&(this._oDocument.removeEventListener("pointermove",this._pointerMoveEventListener),this._oDocument.removeEventListener("pointerup",this._pointerUpEventListener),this._pointerTracking=!1)}startDrag(){var oe;this._timeout!==void 0&&(clearTimeout(this._timeout),this._timeout=void 0),this._dragging=!0,this._eBody.classList.add("lm_dragging"),this._eElement.classList.add("lm_dragging"),(oe=this._oDocument.querySelector("iframe"))===null||oe===void 0||oe.style.setProperty("pointer-events","none"),this.emit("dragStart",this._nOriginalX,this._nOriginalY)}getPointerCoordinates(oe){return{x:oe.pageX,y:oe.pageY}}}class Splitter{constructor(oe,ie,ue){this._isVertical=oe,this._size=ie,this._grabSize=ue<this._size?this._size:ue,this._element=document.createElement("div"),this._element.classList.add("lm_splitter");const de=document.createElement("div");de.classList.add("lm_drag_handle");const he=this._grabSize-this._size,pe=he/2;this._isVertical?(de.style.top=numberToPixels(-pe),de.style.height=numberToPixels(this._size+he),this._element.classList.add("lm_vertical"),this._element.style.height=numberToPixels(this._size)):(de.style.left=numberToPixels(-pe),de.style.width=numberToPixels(this._size+he),this._element.classList.add("lm_horizontal"),this._element.style.width=numberToPixels(this._size)),this._element.appendChild(de),this._dragListener=new DragListener(this._element,[de])}get element(){return this._element}destroy(){this._element.remove()}on(oe,ie){this._dragListener.on(oe,ie)}}class RowOrColumn extends ContentItem{constructor(oe,ie,ue,de){switch(super(ie,ue,de,RowOrColumn.createElement(document,oe)),this._rowOrColumnParent=de,this._splitter=[],this.isRow=!oe,this.isColumn=oe,this._childElementContainer=this.element,this._splitterSize=ie.layoutConfig.dimensions.borderWidth,this._splitterGrabSize=ie.layoutConfig.dimensions.borderGrabWidth,this._isColumn=oe,this._dimension=oe?"height":"width",this._splitterPosition=null,this._splitterMinPosition=null,this._splitterMaxPosition=null,ue.type){case ItemType.row:case ItemType.column:this._configType=ue.type;break;default:throw new AssertError("ROCCCT00925")}}newComponent(oe,ie,ue,de){const he={type:"component",componentType:oe,componentState:ie,title:ue};return this.newItem(he,de)}addComponent(oe,ie,ue,de){const he={type:"component",componentType:oe,componentState:ie,title:ue};return this.addItem(he,de)}newItem(oe,ie){ie=this.addItem(oe,ie);const ue=this.contentItems[ie];return ContentItem.isStack(ue)&&ItemConfig.isComponent(oe)?ue.contentItems[0]:ue}addItem(oe,ie){this.layoutManager.checkMinimiseMaximisedStack();const ue=ItemConfig.resolve(oe,!1),de=this.layoutManager.createAndInitContentItem(ue,this);return this.addChild(de,ie,!1)}addChild(oe,ie,ue){if(ie===void 0&&(ie=this.contentItems.length),this.contentItems.length>0){const he=this.createSplitter(Math.max(0,ie-1)).element;ie>0?(this.contentItems[ie-1].element.insertAdjacentElement("afterend",he),he.insertAdjacentElement("afterend",oe.element)):(this.contentItems[0].element.insertAdjacentElement("beforebegin",he),he.insertAdjacentElement("beforebegin",oe.element))}else this._childElementContainer.appendChild(oe.element);super.addChild(oe,ie);const de=1/this.contentItems.length*100;if(ue===!0)return this.emitBaseBubblingEvent("stateChanged"),ie;for(let he=0;he<this.contentItems.length;he++){const pe=this.contentItems[he];if(pe===oe)oe.size=de;else{const _e=pe.size*=(100-de)/100;pe.size=_e}}return this.updateSize(!1),this.emitBaseBubblingEvent("stateChanged"),ie}removeChild(oe,ie){const ue=this.contentItems.indexOf(oe),de=Math.max(ue-1,0);if(ue===-1)throw new Error("Can't remove child. ContentItem is not child of this Row or Column");if(this._splitter[de]&&(this._splitter[de].destroy(),this._splitter.splice(de,1)),super.removeChild(oe,ie),this.contentItems.length===1&&this.isClosable===!0){const he=this.contentItems[0];this.contentItems.length=0,this._rowOrColumnParent.replaceChild(this,he,!0)}else this.updateSize(!1),this.emitBaseBubblingEvent("stateChanged")}replaceChild(oe,ie){const ue=oe.size;super.replaceChild(oe,ie),ie.size=ue,this.updateSize(!1),this.emitBaseBubblingEvent("stateChanged")}updateSize(oe){this.layoutManager.beginVirtualSizedContainerAdding();try{this.updateNodeSize(),this.updateContentItemsSize(oe)}finally{this.layoutManager.endVirtualSizedContainerAdding()}}init(){if(this.isInitialised!==!0){this.updateNodeSize();for(let oe=0;oe<this.contentItems.length;oe++)this._childElementContainer.appendChild(this.contentItems[oe].element);super.init();for(let oe=0;oe<this.contentItems.length-1;oe++)this.contentItems[oe].element.insertAdjacentElement("afterend",this.createSplitter(oe).element);this.initContentItems()}}toConfig(){return{type:this.type,content:this.calculateConfigContent(),size:this.size,sizeUnit:this.sizeUnit,minSize:this.minSize,minSizeUnit:this.minSizeUnit,id:this.id,isClosable:this.isClosable}}setParent(oe){this._rowOrColumnParent=oe,super.setParent(oe)}updateNodeSize(){this.contentItems.length>0&&(this.calculateRelativeSizes(),this.setAbsoluteSizes()),this.emitBaseBubblingEvent("stateChanged"),this.emit("resize")}setAbsoluteSizes(){const oe=this.calculateAbsoluteSizes();for(let ie=0;ie<this.contentItems.length;ie++)oe.additionalPixel-ie>0&&oe.itemSizes[ie]++,this._isColumn?(setElementWidth(this.contentItems[ie].element,oe.crossAxisSize),setElementHeight(this.contentItems[ie].element,oe.itemSizes[ie])):(setElementWidth(this.contentItems[ie].element,oe.itemSizes[ie]),setElementHeight(this.contentItems[ie].element,oe.crossAxisSize))}calculateAbsoluteSizes(){const oe=(this.contentItems.length-1)*this._splitterSize,{width:ie,height:ue}=getElementWidthAndHeight(this.element);let de,he;this._isColumn?(de=ue-oe,he=ie):(de=ie-oe,he=ue);let pe=0;const _e=[];for(let xe=0;xe<this.contentItems.length;xe++){const Ie=this.contentItems[xe];let $e;if(Ie.sizeUnit===SizeUnitEnum.Percent)$e=Math.floor(de*(Ie.size/100));else throw new AssertError("ROCCAS6692");pe+=$e,_e.push($e)}const Ce=Math.floor(de-pe);return{itemSizes:_e,additionalPixel:Ce,totalSize:de,crossAxisSize:he}}calculateRelativeSizes(){let oe=0;const ie=[];let ue=0;for(let de=0;de<this.contentItems.length;de++){const he=this.contentItems[de];switch(he.sizeUnit){case SizeUnitEnum.Percent:{oe+=he.size;break}case SizeUnitEnum.Fractional:{ie.push(he),ue+=he.size;break}default:throw new AssertError("ROCCRS49110",JSON.stringify(he))}}if(Math.round(oe)===100){this.respectMinItemSize();return}else if(Math.round(oe)<100&&ie.length>0){const de=100-oe;for(let he=0;he<ie.length;he++){const pe=ie[he];pe.size=de*(pe.size/ue),pe.sizeUnit=SizeUnitEnum.Percent}this.respectMinItemSize();return}else{if(Math.round(oe)>100&&ie.length>0){for(let de=0;de<ie.length;de++){const he=ie[de];he.size=50*(he.size/ue),he.sizeUnit=SizeUnitEnum.Percent}oe+=50}for(let de=0;de<this.contentItems.length;de++){const he=this.contentItems[de];he.size=he.size/oe*100}this.respectMinItemSize()}}respectMinItemSize(){const oe=this.calculateContentItemMinSize(this);if(!(oe<=0||this.contentItems.length<=1)){let ie=0,ue=0;const de=[],he=[],pe=this.calculateAbsoluteSizes();for(let _e=0;_e<pe.itemSizes.length;_e++){const Ce=pe.itemSizes[_e];let xe;Ce<oe?(ue+=oe-Ce,xe={size:oe}):(ie+=Ce-oe,xe={size:Ce},de.push(xe)),he.push(xe)}if(ue===0||ue>ie)return;{const _e=ue/ie;let Ce=ue;for(let xe=0;xe<de.length;xe++){const Ie=de[xe],$e=Math.round((Ie.size-oe)*_e);Ce-=$e,Ie.size-=$e}Ce!==0&&(he[he.length-1].size-=Ce);for(let xe=0;xe<this.contentItems.length;xe++){const Ie=this.contentItems[xe];Ie.size=he[xe].size/pe.totalSize*100}}}}createSplitter(oe){const ie=new Splitter(this._isColumn,this._splitterSize,this._splitterGrabSize);return ie.on("drag",(ue,de)=>this.onSplitterDrag(ie,ue,de)),ie.on("dragStop",()=>this.onSplitterDragStop(ie)),ie.on("dragStart",()=>this.onSplitterDragStart(ie)),this._splitter.splice(oe,0,ie),ie}getSplitItems(oe){const ie=this._splitter.indexOf(oe);return{before:this.contentItems[ie],after:this.contentItems[ie+1]}}calculateContentItemMinSize(oe){const ie=oe.minSize;if(ie!==void 0){if(oe.minSizeUnit===SizeUnitEnum.Pixel)return ie;throw new AssertError("ROCGMD98831",JSON.stringify(oe))}else{const ue=this.layoutManager.layoutConfig.dimensions;return this._isColumn?ue.defaultMinItemHeight:ue.defaultMinItemWidth}}calculateContentItemsTotalMinSize(oe){let ie=0;for(const ue of oe)ie+=this.calculateContentItemMinSize(ue);return ie}onSplitterDragStart(oe){const ie=this.getSplitItems(oe),ue=pixelsToNumber(ie.before.element.style[this._dimension]),de=pixelsToNumber(ie.after.element.style[this._dimension]),he=this.calculateContentItemsTotalMinSize(ie.before.contentItems),pe=this.calculateContentItemsTotalMinSize(ie.after.contentItems);this._splitterPosition=0,this._splitterMinPosition=-1*(ue-he),this._splitterMaxPosition=de-pe}onSplitterDrag(oe,ie,ue){let de=this._isColumn?ue:ie;if(this._splitterMinPosition===null||this._splitterMaxPosition===null)throw new UnexpectedNullError("ROCOSD59226");de=Math.max(de,this._splitterMinPosition),de=Math.min(de,this._splitterMaxPosition),this._splitterPosition=de;const he=numberToPixels(de);this._isColumn?oe.element.style.top=he:oe.element.style.left=he}onSplitterDragStop(oe){if(this._splitterPosition===null)throw new UnexpectedNullError("ROCOSDS66932");{const ie=this.getSplitItems(oe),ue=pixelsToNumber(ie.before.element.style[this._dimension]),de=pixelsToNumber(ie.after.element.style[this._dimension]),he=(this._splitterPosition+ue)/(ue+de),pe=ie.before.size+ie.after.size;ie.before.size=he*pe,ie.after.size=(1-he)*pe,oe.element.style.top=numberToPixels(0),oe.element.style.left=numberToPixels(0),globalThis.requestAnimationFrame(()=>this.updateSize(!1))}}}(function(le){function oe(de,he){return he==="width"?getElementWidth(de):getElementHeight(de)}le.getElementDimensionSize=oe;function ie(de,he,pe){return he==="width"?setElementWidth(de,pe):setElementHeight(de,pe)}le.setElementDimensionSize=ie;function ue(de,he){const pe=de.createElement("div");return pe.classList.add("lm_item"),he?pe.classList.add("lm_column"):pe.classList.add("lm_row"),pe}le.createElement=ue})(RowOrColumn||(RowOrColumn={}));class GroundItem extends ComponentParentableItem{constructor(oe,ie,ue){super(oe,ResolvedGroundItemConfig.create(ie),null,GroundItem.createElement(document)),this.isGround=!0,this._childElementContainer=this.element,this._containerElement=ue;let de=null;for(;;){const he=de?de.previousSibling:this._containerElement.lastChild;if(he instanceof Element&&he.classList.contains("lm_content"))de=he;else break}this._containerElement.insertBefore(this.element,de)}init(){if(this.isInitialised!==!0){this.updateNodeSize();for(let oe=0;oe<this.contentItems.length;oe++)this._childElementContainer.appendChild(this.contentItems[oe].element);super.init(),this.initContentItems()}}loadRoot(oe){if(this.clearRoot(),oe!==void 0){const ie=this.layoutManager.createAndInitContentItem(oe,this);this.addChild(ie,0)}}clearRoot(){const oe=this.contentItems;switch(oe.length){case 0:return;case 1:{oe[0].remove();return}default:throw new AssertError("GILR07721")}}addItem(oe,ie){this.layoutManager.checkMinimiseMaximisedStack();const ue=ItemConfig.resolve(oe,!1);let de;if(this.contentItems.length>0?de=this.contentItems[0]:de=this,de.isComponent)throw new Error("Cannot add item as child to ComponentItem");{const he=this.layoutManager.createAndInitContentItem(ue,de);return ie=de.addChild(he,ie),de===this?-1:ie}}loadComponentAsRoot(oe){this.clearRoot();const ie=ItemConfig.resolve(oe,!1);if(ie.maximised)throw new Error("Root Component cannot be maximised");{const ue=new ComponentItem(this.layoutManager,ie,this);ue.init(),this.addChild(ue,0)}}addChild(oe,ie){if(this.contentItems.length>0)throw new Error("Ground node can only have a single child");return this._childElementContainer.appendChild(oe.element),ie=super.addChild(oe,ie),this.updateSize(!1),this.emitBaseBubblingEvent("stateChanged"),ie}calculateConfigContent(){const oe=this.contentItems,ie=oe.length,ue=new Array(ie);for(let de=0;de<ie;de++){const pe=oe[de].toConfig();if(ResolvedRootItemConfig.isRootItemConfig(pe))ue[de]=pe;else throw new AssertError("RCCC66832")}return ue}setSize(oe,ie){oe===void 0||ie===void 0?this.updateSize(!1):(setElementWidth(this.element,oe),setElementHeight(this.element,ie),this.contentItems.length>0&&(setElementWidth(this.contentItems[0].element,oe),setElementHeight(this.contentItems[0].element,ie)),this.updateContentItemsSize(!1))}updateSize(oe){this.layoutManager.beginVirtualSizedContainerAdding();try{this.updateNodeSize(),this.updateContentItemsSize(oe)}finally{this.layoutManager.endVirtualSizedContainerAdding()}}createSideAreas(){const ie=GroundItem.Area.oppositeSides,ue=new Array(Object.keys(ie).length);let de=0;for(const he in ie){const pe=he,_e=this.getElementArea();if(_e===null)throw new UnexpectedNullError("RCSA77553");_e.side=pe,ie[pe][1]==="2"?_e[pe]=_e[ie[pe]]-50:_e[pe]=_e[ie[pe]]+50,_e.surface=(_e.x2-_e.x1)*(_e.y2-_e.y1),ue[de++]=_e}return ue}highlightDropZone(oe,ie,ue){this.layoutManager.tabDropPlaceholder.remove(),super.highlightDropZone(oe,ie,ue)}onDrop(oe,ie){if(oe.isComponent){const ue=ResolvedStackItemConfig.createDefault(),de=oe;ue.header=ResolvedHeaderedItemConfig.Header.createCopy(de.headerConfig);const he=this.layoutManager.createAndInitContentItem(ue,this);he.addChild(oe),oe=he}if(this.contentItems.length===0)this.addChild(oe);else{if(oe.type===ItemType.row||oe.type===ItemType.column){const pe=ResolvedStackItemConfig.createDefault(),_e=this.layoutManager.createContentItem(pe,this);_e.addChild(oe),oe=_e}const ue=ie.side[0]=="x"?ItemType.row:ItemType.column,de=ie.side[1]=="2",he=this.contentItems[0];if(!(he instanceof RowOrColumn)||he.type!==ue){const pe=ResolvedItemConfig.createDefault(ue),_e=this.layoutManager.createContentItem(pe,this);this.replaceChild(he,_e),_e.addChild(oe,de?0:void 0,!0),_e.addChild(he,de?void 0:0,!0),he.size=50,oe.size=50,oe.sizeUnit=SizeUnitEnum.Percent,_e.updateSize(!1)}else{const pe=he.contentItems[de?0:he.contentItems.length-1];he.addChild(oe,de?0:void 0,!0),pe.size*=.5,oe.size=pe.size,oe.sizeUnit=SizeUnitEnum.Percent,he.updateSize(!1)}}}dock(){throw new AssertError("GID87731")}validateDocking(){throw new AssertError("GIVD87732")}getAllContentItems(){const oe=[this];return this.deepGetAllContentItems(this.contentItems,oe),oe}getConfigMaximisedItems(){const oe=[];return this.deepFilterContentItems(this.contentItems,oe,ie=>ContentItem.isStack(ie)&&ie.initialWantMaximise?!0:!!(ContentItem.isComponentItem(ie)&&ie.initialWantMaximise)),oe}getItemsByPopInParentId(oe){const ie=[];return this.deepFilterContentItems(this.contentItems,ie,ue=>ue.popInParentIds.includes(oe)),ie}toConfig(){throw new Error("Cannot generate GroundItem config")}setActiveComponentItem(oe,ie,ue){}updateNodeSize(){const{width:oe,height:ie}=getElementWidthAndHeight(this._containerElement);setElementWidth(this.element,oe),setElementHeight(this.element,ie),this.contentItems.length>0&&(setElementWidth(this.contentItems[0].element,oe),setElementHeight(this.contentItems[0].element,ie))}deepGetAllContentItems(oe,ie){for(let ue=0;ue<oe.length;ue++){const de=oe[ue];ie.push(de),this.deepGetAllContentItems(de.contentItems,ie)}}deepFilterContentItems(oe,ie,ue){for(let de=0;de<oe.length;de++){const he=oe[de];ue(he)&&ie.push(he),this.deepFilterContentItems(he.contentItems,ie,ue)}}}(function(le){(function(ie){ie.oppositeSides={y2:"y1",x2:"x1",y1:"y2",x1:"x2"}})(le.Area||(le.Area={}));function oe(ie){const ue=ie.createElement("div");return ue.classList.add("lm_goldenlayout"),ue.classList.add("lm_item"),ue.classList.add("lm_root"),ue}le.createElement=oe})(GroundItem||(GroundItem={}));class HeaderButton{constructor(oe,ie,ue,de){this._header=oe,this._pushEvent=de,this._clickEventListener=he=>this.onClick(he),this._touchStartEventListener=he=>this.onTouchStart(he),this._element=document.createElement("div"),this._element.classList.add(ue),this._element.title=ie,this._header.on("destroy",()=>this.destroy()),this._element.addEventListener("click",this._clickEventListener,{passive:!0}),this._element.addEventListener("touchstart",this._touchStartEventListener,{passive:!0}),this._header.controlsContainerElement.appendChild(this._element)}get element(){return this._element}destroy(){var oe;this._element.removeEventListener("click",this._clickEventListener),this._element.removeEventListener("touchstart",this._touchStartEventListener),(oe=this._element.parentNode)===null||oe===void 0||oe.removeChild(this._element)}onClick(oe){this._pushEvent(oe)}onTouchStart(oe){this._pushEvent(oe)}}class Tab{constructor(oe,ie,ue,de,he){var pe;this._layoutManager=oe,this._componentItem=ie,this._closeEvent=ue,this._focusEvent=de,this._dragStartEvent=he,this._isActive=!1,this._tabClickListener=Ce=>this.onTabClickDown(Ce),this._tabTouchStartListener=Ce=>this.onTabTouchStart(Ce),this._closeClickListener=()=>this.onCloseClick(),this._closeTouchStartListener=()=>this.onCloseTouchStart(),this._dragStartListener=(Ce,xe)=>this.onDragStart(Ce,xe),this._contentItemDestroyListener=()=>this.onContentItemDestroy(),this._tabTitleChangedListener=Ce=>this.setTitle(Ce),this._element=document.createElement("div"),this._element.classList.add("lm_tab"),this._titleElement=document.createElement("span"),this._titleElement.classList.add("lm_title"),this._closeElement=document.createElement("div"),this._closeElement.classList.add("lm_close_tab"),this._element.appendChild(this._titleElement),this._element.appendChild(this._closeElement),ie.isClosable?this._closeElement.style.display="":this._closeElement.style.display="none",this.setTitle(ie.title),this._componentItem.on("titleChanged",this._tabTitleChangedListener),((pe=ie.reorderEnabled)!==null&&pe!==void 0?pe:this._layoutManager.layoutConfig.settings.reorderEnabled)&&this.enableReorder(),this._element.addEventListener("click",this._tabClickListener,{passive:!0}),this._element.addEventListener("touchstart",this._tabTouchStartListener,{passive:!0}),this._componentItem.isClosable?(this._closeElement.addEventListener("click",this._closeClickListener,{passive:!0}),this._closeElement.addEventListener("touchstart",this._closeTouchStartListener,{passive:!0})):(this._closeElement.remove(),this._closeElement=void 0),this._componentItem.setTab(this),this._layoutManager.emit("tabCreated",this)}get isActive(){return this._isActive}get componentItem(){return this._componentItem}get contentItem(){return this._componentItem}get element(){return this._element}get titleElement(){return this._titleElement}get closeElement(){return this._closeElement}get reorderEnabled(){return this._dragListener!==void 0}set reorderEnabled(oe){oe!==this.reorderEnabled&&(oe?this.enableReorder():this.disableReorder())}setTitle(oe){this._titleElement.innerText=oe,this._element.title=oe}setActive(oe){oe!==this._isActive&&(this._isActive=oe,oe?this._element.classList.add("lm_active"):this._element.classList.remove("lm_active"))}destroy(){var oe,ie;this._closeEvent=void 0,this._focusEvent=void 0,this._dragStartEvent=void 0,this._element.removeEventListener("click",this._tabClickListener),this._element.removeEventListener("touchstart",this._tabTouchStartListener),(oe=this._closeElement)===null||oe===void 0||oe.removeEventListener("click",this._closeClickListener),(ie=this._closeElement)===null||ie===void 0||ie.removeEventListener("touchstart",this._closeTouchStartListener),this._componentItem.off("titleChanged",this._tabTitleChangedListener),this.reorderEnabled&&this.disableReorder(),this._element.remove()}setBlurred(){this._element.classList.remove("lm_focused"),this._titleElement.classList.remove("lm_focused")}setFocused(){this._element.classList.add("lm_focused"),this._titleElement.classList.add("lm_focused")}onDragStart(oe,ie){if(this._dragListener===void 0)throw new UnexpectedUndefinedError("TODSDLU10093");if(this._dragStartEvent===void 0)throw new UnexpectedUndefinedError("TODS23309");this._dragStartEvent(oe,ie,this._dragListener,this.componentItem)}onContentItemDestroy(){this._dragListener!==void 0&&(this._dragListener.destroy(),this._dragListener=void 0)}onTabClickDown(oe){const ie=oe.target;(ie===this._element||ie===this._titleElement)&&(oe.button===0?this.notifyFocus():oe.button===1&&this._componentItem.isClosable&&this.notifyClose())}onTabTouchStart(oe){oe.target===this._element&&this.notifyFocus()}onCloseClick(){this.notifyClose()}onCloseTouchStart(){this.notifyClose()}notifyClose(){if(this._closeEvent===void 0)throw new UnexpectedUndefinedError("TNC15007");this._closeEvent(this._componentItem)}notifyFocus(){if(this._focusEvent===void 0)throw new UnexpectedUndefinedError("TNA15007");this._focusEvent(this._componentItem)}enableReorder(){this._dragListener=new DragListener(this._element,[this._titleElement]),this._dragListener.on("dragStart",this._dragStartListener),this._componentItem.on("destroy",this._contentItemDestroyListener)}disableReorder(){if(this._dragListener===void 0)throw new UnexpectedUndefinedError("TDR87745");this._componentItem.off("destroy",this._contentItemDestroyListener),this._dragListener.off("dragStart",this._dragStartListener),this._dragListener=void 0}}class TabsContainer{constructor(oe,ie,ue,de,he){this._layoutManager=oe,this._componentRemoveEvent=ie,this._componentFocusEvent=ue,this._componentDragStartEvent=de,this._dropdownActiveChangedEvent=he,this._tabs=[],this._lastVisibleTabIndex=-1,this._dropdownActive=!1,this._element=document.createElement("section"),this._element.classList.add("lm_tabs"),this._dropdownElement=document.createElement("section"),this._dropdownElement.classList.add("lm_tabdropdown_list"),this._dropdownElement.style.display="none"}get tabs(){return this._tabs}get tabCount(){return this._tabs.length}get lastVisibleTabIndex(){return this._lastVisibleTabIndex}get element(){return this._element}get dropdownElement(){return this._dropdownElement}get dropdownActive(){return this._dropdownActive}destroy(){for(let oe=0;oe<this._tabs.length;oe++)this._tabs[oe].destroy()}createTab(oe,ie){for(let de=0;de<this._tabs.length;de++)if(this._tabs[de].componentItem===oe)return;const ue=new Tab(this._layoutManager,oe,de=>this.handleTabCloseEvent(de),de=>this.handleTabFocusEvent(de),(de,he,pe,_e)=>this.handleTabDragStartEvent(de,he,pe,_e));ie===void 0&&(ie=this._tabs.length),this._tabs.splice(ie,0,ue),ie<this._element.childNodes.length?this._element.insertBefore(ue.element,this._element.childNodes[ie]):this._element.appendChild(ue.element)}removeTab(oe){for(let ie=0;ie<this._tabs.length;ie++)if(this._tabs[ie].componentItem===oe){this._tabs[ie].destroy(),this._tabs.splice(ie,1);return}throw new Error("contentItem is not controlled by this header")}processActiveComponentChanged(oe){let ie=-1;for(let ue=0;ue<this._tabs.length;ue++){const de=this._tabs[ue].componentItem===oe;this._tabs[ue].setActive(de),de&&(ie=ue)}if(ie<0)throw new AssertError("HSACI56632");if(this._layoutManager.layoutConfig.settings.reorderOnTabMenuClick&&this._lastVisibleTabIndex!==-1&&ie>this._lastVisibleTabIndex){const ue=this._tabs[ie];for(let de=ie;de>0;de--)this._tabs[de]=this._tabs[de-1];this._tabs[0]=ue}}updateTabSizes(oe,ie){let ue=!1;this.tryUpdateTabSizes(ue,oe,ie)||(ue=!0,this.tryUpdateTabSizes(ue,oe,ie)),ue!==this._dropdownActive&&(this._dropdownActive=ue,this._dropdownActiveChangedEvent())}tryUpdateTabSizes(oe,ie,ue){if(this._tabs.length>0){if(ue===void 0)throw new Error("non-empty tabs must have active component item");let de=0,he=!1;const pe=this._layoutManager.layoutConfig.settings.tabOverlapAllowance,_e=this._tabs.indexOf(ue.tab),Ce=this._tabs[_e];this._lastVisibleTabIndex=-1;for(let xe=0;xe<this._tabs.length;xe++){const Ie=this._tabs[xe].element;Ie.parentElement!==this._element&&this._element.appendChild(Ie);const $e=getComputedStyle(Ce.element).marginRight,Ne=pixelsToNumber($e),Oe=Ie.offsetWidth+Ne;de+=Oe;let Fe=0;if(_e<=xe)Fe=de;else{const Ve=getComputedStyle(Ce.element).marginRight,ze=pixelsToNumber(Ve);Fe=de+Ce.element.offsetWidth+ze}if(Fe>ie){if(he)xe===_e&&(Ie.style.zIndex="auto",Ie.style.marginLeft="",Ie.parentElement!==this._element&&this._element.appendChild(Ie));else{let Ve;if(_e>0&&_e<=xe?Ve=(Fe-ie)/(xe-1):Ve=(Fe-ie)/xe,Ve<pe){for(let ze=0;ze<=xe;ze++){const Ue=ze!==_e&&ze!==0?"-"+numberToPixels(Ve):"";this._tabs[ze].element.style.zIndex=numberToPixels(xe-ze),this._tabs[ze].element.style.marginLeft=Ue}this._lastVisibleTabIndex=xe,Ie.parentElement!==this._element&&this._element.appendChild(Ie)}else he=!0}if(he&&xe!==_e)if(oe)Ie.style.zIndex="auto",Ie.style.marginLeft="",Ie.parentElement!==this._dropdownElement&&this._dropdownElement.appendChild(Ie);else return!1}else this._lastVisibleTabIndex=xe,Ie.style.zIndex="auto",Ie.style.marginLeft="",Ie.parentElement!==this._element&&this._element.appendChild(Ie)}}return!0}showAdditionalTabsDropdown(){this._dropdownElement.style.display=""}hideAdditionalTabsDropdown(){this._dropdownElement.style.display="none"}handleTabCloseEvent(oe){this._componentRemoveEvent(oe)}handleTabFocusEvent(oe){this._componentFocusEvent(oe)}handleTabDragStartEvent(oe,ie,ue,de){this._componentDragStartEvent(oe,ie,ue,de)}}class Header extends EventEmitter$1{constructor(oe,ie,ue,de,he,pe,_e,Ce,xe,Ie,$e,Ne,Oe){super(),this._layoutManager=oe,this._parent=ie,this._configClosable=de,this._getActiveComponentItemEvent=he,this._popoutEvent=_e,this._maximiseToggleEvent=Ce,this._clickEvent=xe,this._touchStartEvent=Ie,this._componentRemoveEvent=$e,this._componentFocusEvent=Ne,this._componentDragStartEvent=Oe,this._clickListener=Fe=>this.onClick(Fe),this._touchStartListener=Fe=>this.onTouchStart(Fe),this._rowColumnClosable=!0,this._closeButton=null,this._popoutButton=null,this._tabsContainer=new TabsContainer(this._layoutManager,Fe=>this.handleTabInitiatedComponentRemoveEvent(Fe),Fe=>this.handleTabInitiatedComponentFocusEvent(Fe),(Fe,Ve,ze,Ue)=>this.handleTabInitiatedDragStartEvent(Fe,Ve,ze,Ue),()=>this.processTabDropdownActiveChanged()),this._show=ue.show,this._popoutEnabled=ue.popoutEnabled,this._popoutLabel=ue.popoutLabel,this._maximiseEnabled=ue.maximiseEnabled,this._maximiseLabel=ue.maximiseLabel,this._minimiseEnabled=ue.minimiseEnabled,this._minimiseLabel=ue.minimiseLabel,this._closeEnabled=ue.closeEnabled,this._closeLabel=ue.closeLabel,this._tabDropdownEnabled=ue.tabDropdownEnabled,this._tabDropdownLabel=ue.tabDropdownLabel,this.setSide(ue.side),this._canRemoveComponent=this._configClosable,this._element=document.createElement("section"),this._element.classList.add("lm_header"),this._controlsContainerElement=document.createElement("section"),this._controlsContainerElement.classList.add("lm_controls"),this._element.appendChild(this._tabsContainer.element),this._element.appendChild(this._controlsContainerElement),this._element.appendChild(this._tabsContainer.dropdownElement),this._element.addEventListener("click",this._clickListener,{passive:!0}),this._element.addEventListener("touchstart",this._touchStartListener,{passive:!0}),this._documentMouseUpListener=()=>this._tabsContainer.hideAdditionalTabsDropdown(),globalThis.document.addEventListener("mouseup",this._documentMouseUpListener,{passive:!0}),this._tabControlOffset=this._layoutManager.layoutConfig.settings.tabControlOffset,this._tabDropdownEnabled&&(this._tabDropdownButton=new HeaderButton(this,this._tabDropdownLabel,"lm_tabdropdown",()=>this._tabsContainer.showAdditionalTabsDropdown())),this._popoutEnabled&&(this._popoutButton=new HeaderButton(this,this._popoutLabel,"lm_popout",()=>this.handleButtonPopoutEvent())),this._maximiseEnabled&&(this._maximiseButton=new HeaderButton(this,this._maximiseLabel,"lm_maximise",Fe=>this.handleButtonMaximiseToggleEvent(Fe))),this._configClosable&&(this._closeButton=new HeaderButton(this,this._closeLabel,"lm_close",()=>pe())),this.processTabDropdownActiveChanged()}get show(){return this._show}get side(){return this._side}get leftRightSided(){return this._leftRightSided}get layoutManager(){return this._layoutManager}get parent(){return this._parent}get tabs(){return this._tabsContainer.tabs}get lastVisibleTabIndex(){return this._tabsContainer.lastVisibleTabIndex}get element(){return this._element}get tabsContainerElement(){return this._tabsContainer.element}get controlsContainerElement(){return this._controlsContainerElement}destroy(){this.emit("destroy"),this._popoutEvent=void 0,this._maximiseToggleEvent=void 0,this._clickEvent=void 0,this._touchStartEvent=void 0,this._componentRemoveEvent=void 0,this._componentFocusEvent=void 0,this._componentDragStartEvent=void 0,this._tabsContainer.destroy(),globalThis.document.removeEventListener("mouseup",this._documentMouseUpListener),this._element.remove()}createTab(oe,ie){this._tabsContainer.createTab(oe,ie)}removeTab(oe){this._tabsContainer.removeTab(oe)}processActiveComponentChanged(oe){this._tabsContainer.processActiveComponentChanged(oe),this.updateTabSizes()}setSide(oe){this._side=oe,this._leftRightSided=[Side.right,Side.left].includes(this._side)}setRowColumnClosable(oe){this._rowColumnClosable=oe,this.updateClosability()}updateClosability(){let oe;if(!this._configClosable)oe=!1;else if(!this._rowColumnClosable)oe=!1;else{oe=!0;const ie=this.tabs.length;for(let ue=0;ue<ie;ue++)if(!this._tabsContainer.tabs[ue].componentItem.isClosable){oe=!1;break}}this._closeButton!==null&&setElementDisplayVisibility(this._closeButton.element,oe),this._popoutButton!==null&&setElementDisplayVisibility(this._popoutButton.element,oe),this._canRemoveComponent=oe||this._tabsContainer.tabCount>1}applyFocusedValue(oe){oe?this._element.classList.add("lm_focused"):this._element.classList.remove("lm_focused")}processMaximised(){if(this._maximiseButton===void 0)throw new UnexpectedUndefinedError("HPMAX16997");this._maximiseButton.element.setAttribute("title",this._minimiseLabel)}processMinimised(){if(this._maximiseButton===void 0)throw new UnexpectedUndefinedError("HPMIN16997");this._maximiseButton.element.setAttribute("title",this._maximiseLabel)}updateTabSizes(){if(this._tabsContainer.tabCount>0){const oe=this._show?this._layoutManager.layoutConfig.dimensions.headerHeight:0;this._leftRightSided?(this._element.style.height="",this._element.style.width=numberToPixels(oe)):(this._element.style.width="",this._element.style.height=numberToPixels(oe));let ie;this._leftRightSided?ie=this._element.offsetHeight-this._controlsContainerElement.offsetHeight-this._tabControlOffset:ie=this._element.offsetWidth-this._controlsContainerElement.offsetWidth-this._tabControlOffset,this._tabsContainer.updateTabSizes(ie,this._getActiveComponentItemEvent())}}handleTabInitiatedComponentRemoveEvent(oe){if(this._canRemoveComponent){if(this._componentRemoveEvent===void 0)throw new UnexpectedUndefinedError("HHTCE22294");this._componentRemoveEvent(oe)}}handleTabInitiatedComponentFocusEvent(oe){if(this._componentFocusEvent===void 0)throw new UnexpectedUndefinedError("HHTAE22294");this._componentFocusEvent(oe)}handleTabInitiatedDragStartEvent(oe,ie,ue,de){if(!this._canRemoveComponent)ue.cancelDrag();else{if(this._componentDragStartEvent===void 0)throw new UnexpectedUndefinedError("HHTDSE22294");this._componentDragStartEvent(oe,ie,ue,de)}}processTabDropdownActiveChanged(){this._tabDropdownButton!==void 0&&setElementDisplayVisibility(this._tabDropdownButton.element,this._tabsContainer.dropdownActive)}handleButtonPopoutEvent(){if(this._layoutManager.layoutConfig.settings.popoutWholeStack){if(this._popoutEvent===void 0)throw new UnexpectedUndefinedError("HHBPOE17834");this._popoutEvent()}else{const oe=this._getActiveComponentItemEvent();oe&&oe.popout()}}handleButtonMaximiseToggleEvent(oe){if(this._maximiseToggleEvent===void 0)throw new UnexpectedUndefinedError("HHBMTE16834");this._maximiseToggleEvent()}onClick(oe){oe.target===this._element&&this.notifyClick(oe)}onTouchStart(oe){oe.target===this._element&&this.notifyTouchStart(oe)}notifyClick(oe){if(this._clickEvent===void 0)throw new UnexpectedUndefinedError("HNHC46834");this._clickEvent(oe)}notifyTouchStart(oe){if(this._touchStartEvent===void 0)throw new UnexpectedUndefinedError("HNHTS46834");this._touchStartEvent(oe)}}class Stack extends ComponentParentableItem{constructor(oe,ie,ue){var de,he,pe,_e,Ce,xe,Ie,$e,Ne,Oe,Fe,Ve,ze,Ue,Pt,qe,Et,kt,At;super(oe,ie,ue,Stack.createElement(document)),this._headerSideChanged=!1,this._resizeListener=()=>this.handleResize(),this._maximisedListener=()=>this.handleMaximised(),this._minimisedListener=()=>this.handleMinimised(),this._headerConfig=ie.header;const Dt=oe.layoutConfig.header,Lt=ie.content;let jt;Lt.length!==1?jt=void 0:jt=Lt[0].header,this._initialWantMaximise=ie.maximised,this._initialActiveItemIndex=(de=ie.activeItemIndex)!==null&&de!==void 0?de:0;const _n=(_e=(pe=(he=this._headerConfig)===null||he===void 0?void 0:he.show)!==null&&pe!==void 0?pe:jt==null?void 0:jt.show)!==null&&_e!==void 0?_e:Dt.show,bn=(Ie=(xe=(Ce=this._headerConfig)===null||Ce===void 0?void 0:Ce.popout)!==null&&xe!==void 0?xe:jt==null?void 0:jt.popout)!==null&&Ie!==void 0?Ie:Dt.popout,vn=(Oe=(Ne=($e=this._headerConfig)===null||$e===void 0?void 0:$e.maximise)!==null&&Ne!==void 0?Ne:jt==null?void 0:jt.maximise)!==null&&Oe!==void 0?Oe:Dt.maximise,Tn=(ze=(Ve=(Fe=this._headerConfig)===null||Fe===void 0?void 0:Fe.close)!==null&&Ve!==void 0?Ve:jt==null?void 0:jt.close)!==null&&ze!==void 0?ze:Dt.close,$n=(qe=(Pt=(Ue=this._headerConfig)===null||Ue===void 0?void 0:Ue.minimise)!==null&&Pt!==void 0?Pt:jt==null?void 0:jt.minimise)!==null&&qe!==void 0?qe:Dt.minimise,wn=(At=(kt=(Et=this._headerConfig)===null||Et===void 0?void 0:Et.tabDropdown)!==null&&kt!==void 0?kt:jt==null?void 0:jt.tabDropdown)!==null&&At!==void 0?At:Dt.tabDropdown;this._maximisedEnabled=vn!==!1;const Cn={show:_n!==!1,side:_n===!1?Side.top:_n,popoutEnabled:bn!==!1,popoutLabel:bn===!1?"":bn,maximiseEnabled:this._maximisedEnabled,maximiseLabel:vn===!1?"":vn,closeEnabled:Tn!==!1,closeLabel:Tn===!1?"":Tn,minimiseEnabled:!0,minimiseLabel:$n,tabDropdownEnabled:wn!==!1,tabDropdownLabel:wn===!1?"":wn};this._header=new Header(oe,this,Cn,ie.isClosable&&Tn!==!1,()=>this.getActiveComponentItem(),()=>this.remove(),()=>this.handlePopoutEvent(),()=>this.toggleMaximise(),Sn=>this.handleHeaderClickEvent(Sn),Sn=>this.handleHeaderTouchStartEvent(Sn),Sn=>this.handleHeaderComponentRemoveEvent(Sn),Sn=>this.handleHeaderComponentFocusEvent(Sn),(Sn,In,En,xn)=>this.handleHeaderComponentStartDragEvent(Sn,In,En,xn)),this.isStack=!0,this._childElementContainer=document.createElement("section"),this._childElementContainer.classList.add("lm_items"),this.on("resize",this._resizeListener),this._maximisedEnabled&&(this.on("maximised",this._maximisedListener),this.on("minimised",this._minimisedListener)),this.element.appendChild(this._header.element),this.element.appendChild(this._childElementContainer),this.setupHeaderPosition(),this._header.updateClosability()}get childElementContainer(){return this._childElementContainer}get header(){return this._header}get headerShow(){return this._header.show}get headerSide(){return this._header.side}get headerLeftRightSided(){return this._header.leftRightSided}get contentAreaDimensions(){return this._contentAreaDimensions}get initialWantMaximise(){return this._initialWantMaximise}get isMaximised(){return this===this.layoutManager.maximisedStack}get stackParent(){if(!this.parent)throw new Error("Stack should always have a parent");return this.parent}updateSize(oe){this.layoutManager.beginVirtualSizedContainerAdding();try{this.updateNodeSize(),this.updateContentItemsSize(oe)}finally{this.layoutManager.endVirtualSizedContainerAdding()}}init(){if(this.isInitialised===!0)return;this.updateNodeSize();for(let ue=0;ue<this.contentItems.length;ue++)this._childElementContainer.appendChild(this.contentItems[ue].element);super.init();const oe=this.contentItems,ie=oe.length;if(ie>0){if(this._initialActiveItemIndex<0||this._initialActiveItemIndex>=ie)throw new Error(`ActiveItemIndex out of range: ${this._initialActiveItemIndex} id: ${this.id}`);for(let ue=0;ue<ie;ue++){const de=oe[ue];if(de instanceof ComponentItem)this._header.createTab(de,ue),de.hide(),de.container.setBaseLogicalZIndex();else throw new Error(`Stack Content Item is not of type ComponentItem: ${ue} id: ${this.id}`)}this.setActiveComponentItem(oe[this._initialActiveItemIndex],!1),this._header.updateTabSizes()}this._header.updateClosability(),this.initContentItems()}setActiveContentItem(oe){if(ContentItem.isComponentItem(oe))this.setActiveComponentItem(oe,!1);else throw new Error("Stack.setActiveContentItem: item is not a ComponentItem")}setActiveComponentItem(oe,ie,ue=!1){if(this._activeComponentItem!==oe){if(this.contentItems.indexOf(oe)===-1)throw new Error("componentItem is not a child of this stack");this.layoutManager.beginSizeInvalidation();try{this._activeComponentItem!==void 0&&this._activeComponentItem.hide(),this._activeComponentItem=oe,this._header.processActiveComponentChanged(oe),oe.show()}finally{this.layoutManager.endSizeInvalidation()}this.emit("activeContentItemChanged",oe),this.layoutManager.emit("activeContentItemChanged",oe),this.emitStateChangedEvent()}(this.focused||ie)&&this.layoutManager.setFocusedComponentItem(oe,ue)}getActiveContentItem(){var oe;return(oe=this.getActiveComponentItem())!==null&&oe!==void 0?oe:null}getActiveComponentItem(){return this._activeComponentItem}focusActiveContentItem(){var oe;(oe=this._activeComponentItem)===null||oe===void 0||oe.focus()}setFocusedValue(oe){this._header.applyFocusedValue(oe),super.setFocusedValue(oe)}setRowColumnClosable(oe){this._header.setRowColumnClosable(oe)}newComponent(oe,ie,ue,de){const he={type:"component",componentType:oe,componentState:ie,title:ue};return this.newItem(he,de)}addComponent(oe,ie,ue,de){const he={type:"component",componentType:oe,componentState:ie,title:ue};return this.addItem(he,de)}newItem(oe,ie){return ie=this.addItem(oe,ie),this.contentItems[ie]}addItem(oe,ie){this.layoutManager.checkMinimiseMaximisedStack();const ue=ItemConfig.resolve(oe,!1),de=this.layoutManager.createAndInitContentItem(ue,this);return this.addChild(de,ie)}addChild(oe,ie,ue=!1){if(ie!==void 0&&ie>this.contentItems.length)throw ie-=1,new AssertError("SAC99728");if(oe instanceof ComponentItem)return ie=super.addChild(oe,ie),this._childElementContainer.appendChild(oe.element),this._header.createTab(oe,ie),this.setActiveComponentItem(oe,ue),this._header.updateTabSizes(),this.updateSize(!1),oe.container.setBaseLogicalZIndex(),this._header.updateClosability(),this.emitStateChangedEvent(),ie;throw new AssertError("SACC88532")}removeChild(oe,ie){const ue=oe,de=this.contentItems.indexOf(ue),he=this.contentItems.length===1;if(this._activeComponentItem===ue&&(ue.focused&&ue.blur(),!he)){const pe=de===0?1:de-1;this.setActiveComponentItem(this.contentItems[pe],!1)}this._header.removeTab(ue),super.removeChild(ue,ie),he||this._header.updateClosability(),this.emitStateChangedEvent()}toggleMaximise(){this.isMaximised?this.minimise():this.maximise()}maximise(){if(!this.isMaximised){this.layoutManager.setMaximisedStack(this);const oe=this.contentItems,ie=oe.length;for(let ue=0;ue<ie;ue++){const de=oe[ue];if(de instanceof ComponentItem)de.enterStackMaximised();else throw new AssertError("SMAXI87773")}this.emitStateChangedEvent()}}minimise(){if(this.isMaximised){this.layoutManager.setMaximisedStack(void 0);const oe=this.contentItems,ie=oe.length;for(let ue=0;ue<ie;ue++){const de=oe[ue];if(de instanceof ComponentItem)de.exitStackMaximised();else throw new AssertError("SMINI87773")}this.emitStateChangedEvent()}}destroy(){var oe;!((oe=this._activeComponentItem)===null||oe===void 0)&&oe.focused&&this._activeComponentItem.blur(),super.destroy(),this.off("resize",this._resizeListener),this._maximisedEnabled&&(this.off("maximised",this._maximisedListener),this.off("minimised",this._minimisedListener)),this._header.destroy()}toConfig(){let oe;if(this._activeComponentItem&&(oe=this.contentItems.indexOf(this._activeComponentItem),oe<0))throw new Error("active component item not found in stack");if(this.contentItems.length>0&&oe===void 0)throw new Error("expected non-empty stack to have an active component item");return{type:"stack",content:this.calculateConfigContent(),size:this.size,sizeUnit:this.sizeUnit,minSize:this.minSize,minSizeUnit:this.minSizeUnit,id:this.id,isClosable:this.isClosable,maximised:this.isMaximised,header:this.createHeaderConfig(),activeItemIndex:oe}}onDrop(oe,ie){if(this._dropSegment==="header"){if(this.resetHeaderDropZone(),this._dropIndex===void 0)throw new UnexpectedUndefinedError("SODDI68990");this.addChild(oe,this._dropIndex);return}if(this._dropSegment==="body"){this.addChild(oe,0,!0);return}const ue=this._dropSegment==="top"||this._dropSegment==="bottom",de=this._dropSegment==="left"||this._dropSegment==="right",he=this._dropSegment==="top"||this._dropSegment==="left",pe=ue&&this.stackParent.isColumn||de&&this.stackParent.isRow;if(oe.isComponent){const _e=ResolvedStackItemConfig.createDefault();_e.header=this.createHeaderConfig();const Ce=this.layoutManager.createAndInitContentItem(_e,this);Ce.addChild(oe),oe=Ce}if(oe.type===ItemType.row||oe.type===ItemType.column){const _e=ResolvedStackItemConfig.createDefault();_e.header=this.createHeaderConfig();const Ce=this.layoutManager.createContentItem(_e,this);Ce.addChild(oe),oe=Ce}if(pe){const _e=this.stackParent.contentItems.indexOf(this);this.stackParent.addChild(oe,he?_e:_e+1,!0),this.size*=.5,oe.size=this.size,oe.sizeUnit=this.sizeUnit,this.stackParent.updateSize(!1)}else{const _e=ue?ItemType.column:ItemType.row,Ce=ResolvedItemConfig.createDefault(_e),xe=this.layoutManager.createContentItem(Ce,this);this.stackParent.replaceChild(this,xe),xe.addChild(oe,he?0:void 0,!0),xe.addChild(this,he?void 0:0,!0),this.size=50,oe.size=50,oe.sizeUnit=SizeUnitEnum.Percent,xe.updateSize(!1)}}highlightDropZone(oe,ie){for(const ue in this._contentAreaDimensions){const de=ue,he=this._contentAreaDimensions[de].hoverArea;if(he.x1<oe&&he.x2>oe&&he.y1<ie&&he.y2>ie){de==="header"?(this._dropSegment="header",this.highlightHeaderDropZone(this._header.leftRightSided?ie:oe)):(this.resetHeaderDropZone(),this.highlightBodyDropZone(de));return}}}getArea(){if(this.element.style.display==="none")return null;const oe=super.getElementArea(this._header.element),ie=super.getElementArea(this._childElementContainer);if(oe===null||ie===null)throw new UnexpectedNullError("SGAHC13086");const ue=ie.x2-ie.x1,de=ie.y2-ie.y1;return this._contentAreaDimensions={header:{hoverArea:{x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2},highlightArea:{x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2}}},this.contentItems.length===0?(this._contentAreaDimensions.body={hoverArea:{x1:ie.x1,y1:ie.y1,x2:ie.x2,y2:ie.y2},highlightArea:{x1:ie.x1,y1:ie.y1,x2:ie.x2,y2:ie.y2}},super.getElementArea(this.element)):(this._contentAreaDimensions.left={hoverArea:{x1:ie.x1,y1:ie.y1,x2:ie.x1+ue*.25,y2:ie.y2},highlightArea:{x1:ie.x1,y1:ie.y1,x2:ie.x1+ue*.5,y2:ie.y2}},this._contentAreaDimensions.top={hoverArea:{x1:ie.x1+ue*.25,y1:ie.y1,x2:ie.x1+ue*.75,y2:ie.y1+de*.5},highlightArea:{x1:ie.x1,y1:ie.y1,x2:ie.x2,y2:ie.y1+de*.5}},this._contentAreaDimensions.right={hoverArea:{x1:ie.x1+ue*.75,y1:ie.y1,x2:ie.x2,y2:ie.y2},highlightArea:{x1:ie.x1+ue*.5,y1:ie.y1,x2:ie.x2,y2:ie.y2}},this._contentAreaDimensions.bottom={hoverArea:{x1:ie.x1+ue*.25,y1:ie.y1+de*.5,x2:ie.x1+ue*.75,y2:ie.y2},highlightArea:{x1:ie.x1,y1:ie.y1+de*.5,x2:ie.x2,y2:ie.y2}},super.getElementArea(this.element))}positionHeader(oe){this._header.side!==oe&&(this._header.setSide(oe),this._headerSideChanged=!0,this.setupHeaderPosition())}updateNodeSize(){if(this.element.style.display!=="none"){const oe=getElementWidthAndHeight(this.element);if(this._header.show){const ie=this._header.leftRightSided?WidthOrHeightPropertyName.width:WidthOrHeightPropertyName.height;oe[ie]-=this.layoutManager.layoutConfig.dimensions.headerHeight}this._childElementContainer.style.width=numberToPixels(oe.width),this._childElementContainer.style.height=numberToPixels(oe.height);for(let ie=0;ie<this.contentItems.length;ie++)this.contentItems[ie].element.style.width=numberToPixels(oe.width),this.contentItems[ie].element.style.height=numberToPixels(oe.height);this.emit("resize"),this.emitStateChangedEvent()}}highlightHeaderDropZone(oe){const ie=this._header.lastVisibleTabIndex+1,de=this._header.tabsContainerElement.childNodes,he=new Array(ie);let pe=0,_e=0;for(;_e<ie;){const Ie=de[pe++];Ie!==this.layoutManager.tabDropPlaceholder&&(he[_e++]=Ie)}const Ce=this.layoutManager.dropTargetIndicator;if(Ce===null)throw new UnexpectedNullError("SHHDZDTI97110");let xe;if(ie===0){const Ie=this._header.element.getBoundingClientRect(),$e=Ie.top+document.body.scrollTop,Ne=Ie.left+document.body.scrollLeft;xe={x1:Ne,x2:Ne+100,y1:$e+Ie.height-20,y2:$e+Ie.height},this._dropIndex=0}else{let Ie=0,$e=!1,Ne,Oe,Fe,Ve;do{Ve=he[Ie];const kt=Ve.getBoundingClientRect(),At=kt.top+document.body.scrollTop,Dt=kt.left+document.body.scrollLeft;this._header.leftRightSided?(Oe=At,Ne=Dt,Fe=kt.height):(Oe=Dt,Ne=At,Fe=kt.width),oe>=Oe&&oe<Oe+Fe?$e=!0:Ie++}while(Ie<ie&&!$e);if($e===!1&&oe<Oe)return;const ze=Oe+Fe/2;oe<ze?(this._dropIndex=Ie,Ve.insertAdjacentElement("beforebegin",this.layoutManager.tabDropPlaceholder)):(this._dropIndex=Math.min(Ie+1,ie),Ve.insertAdjacentElement("afterend",this.layoutManager.tabDropPlaceholder));const Ue=this.layoutManager.tabDropPlaceholder.getBoundingClientRect(),Pt=Ue.top+document.body.scrollTop,qe=Ue.left+document.body.scrollLeft,Et=Ue.width;if(this._header.leftRightSided){const kt=Pt;xe={x1:Ne,x2:Ne+Ve.clientHeight,y1:kt,y2:kt+Et}}else{const kt=qe;xe={x1:kt,x2:kt+Et,y1:Ne,y2:Ne+Ve.clientHeight}}}Ce.highlightArea(xe,0)}resetHeaderDropZone(){this.layoutManager.tabDropPlaceholder.remove()}setupHeaderPosition(){setElementDisplayVisibility(this._header.element,this._header.show),this.element.classList.remove("lm_left","lm_right","lm_bottom"),this._header.leftRightSided&&this.element.classList.add("lm_"+this._header.side),this.updateSize(!1)}highlightBodyDropZone(oe){if(this._contentAreaDimensions===void 0)throw new UnexpectedUndefinedError("SHBDZC82265");{const ie=this._contentAreaDimensions[oe].highlightArea,ue=this.layoutManager.dropTargetIndicator;if(ue===null)throw new UnexpectedNullError("SHBDZD96110");ue.highlightArea(ie,1),this._dropSegment=oe}}handleResize(){this._header.updateTabSizes()}handleMaximised(){this._header.processMaximised()}handleMinimised(){this._header.processMinimised()}handlePopoutEvent(){this.popout()}handleHeaderClickEvent(oe){const ie=EventEmitter$1.headerClickEventName,ue=new EventEmitter$1.ClickBubblingEvent(ie,this,oe);this.emit(ie,ue)}handleHeaderTouchStartEvent(oe){const ie=EventEmitter$1.headerTouchStartEventName,ue=new EventEmitter$1.TouchStartBubblingEvent(ie,this,oe);this.emit(ie,ue)}handleHeaderComponentRemoveEvent(oe){this.removeChild(oe,!1)}handleHeaderComponentFocusEvent(oe){this.setActiveComponentItem(oe,!0)}handleHeaderComponentStartDragEvent(oe,ie,ue,de){this.isMaximised===!0&&this.toggleMaximise(),this.layoutManager.startComponentDrag(oe,ie,ue,de,this)}createHeaderConfig(){if(this._headerSideChanged){const oe=this._header.show?this._header.side:!1;let ie=ResolvedHeaderedItemConfig.Header.createCopy(this._headerConfig,oe);return ie===void 0&&(ie={show:oe,popout:void 0,maximise:void 0,close:void 0,minimise:void 0,tabDropdown:void 0}),ie}else return ResolvedHeaderedItemConfig.Header.createCopy(this._headerConfig)}emitStateChangedEvent(){this.emitBaseBubblingEvent("stateChanged")}}(function(le){function oe(ie){const ue=ie.createElement("div");return ue.classList.add("lm_item"),ue.classList.add("lm_stack"),ue}le.createElement=oe})(Stack||(Stack={}));class DragProxy extends EventEmitter$1{constructor(oe,ie,ue,de,he,pe){if(super(),this._dragListener=ue,this._layoutManager=de,this._componentItem=he,this._originalParent=pe,this._area=null,this._lastValidArea=null,this._dragListener.on("drag",(_e,Ce,xe)=>this.onDrag(_e,Ce,xe)),this._dragListener.on("dragStop",()=>this.onDrop()),this.createDragProxyElements(oe,ie),this._componentItem.parent===null)throw new UnexpectedNullError("DPC10097");this._componentItemFocused=this._componentItem.focused,this._componentItemFocused&&this._componentItem.blur(),this._componentItem.parent.removeChild(this._componentItem,!0),this.setDimensions(),document.body.appendChild(this._element),this.determineMinMaxXY(),this._layoutManager.calculateItemAreas(),this.setDropPosition(oe,ie)}get element(){return this._element}createDragProxyElements(oe,ie){this._element=document.createElement("div"),this._element.classList.add("lm_dragProxy");const ue=document.createElement("div");ue.classList.add("lm_header");const de=document.createElement("div");de.classList.add("lm_tabs");const he=document.createElement("div");he.classList.add("lm_tab");const pe=document.createElement("span");pe.classList.add("lm_title"),he.appendChild(pe),de.appendChild(he),ue.appendChild(de),this._proxyContainerElement=document.createElement("div"),this._proxyContainerElement.classList.add("lm_content"),this._element.appendChild(ue),this._element.appendChild(this._proxyContainerElement),this._originalParent instanceof Stack&&this._originalParent.headerShow&&(this._sided=this._originalParent.headerLeftRightSided,this._element.classList.add("lm_"+this._originalParent.headerSide),[Side.right,Side.bottom].indexOf(this._originalParent.headerSide)>=0&&this._proxyContainerElement.insertAdjacentElement("afterend",ue)),this._element.style.left=numberToPixels(oe),this._element.style.top=numberToPixels(ie),he.setAttribute("title",this._componentItem.title),pe.insertAdjacentText("afterbegin",this._componentItem.title),this._proxyContainerElement.appendChild(this._componentItem.element)}determineMinMaxXY(){const oe=this._layoutManager.groundItem;if(oe===void 0)throw new UnexpectedUndefinedError("DPDMMXY73109");{const ue=oe.element.getBoundingClientRect();this._minX=ue.left+document.body.scrollLeft,this._minY=ue.top+document.body.scrollTop,this._maxX=this._minX+ue.width,this._maxY=this._minY+ue.height}}onDrag(oe,ie,ue){const de=ue.pageX,he=ue.pageY;this.setDropPosition(de,he),this._componentItem.drag()}setDropPosition(oe,ie){this._layoutManager.layoutConfig.settings.constrainDragToContainer&&(oe<=this._minX?oe=Math.ceil(this._minX):oe>=this._maxX&&(oe=Math.floor(this._maxX)),ie<=this._minY?ie=Math.ceil(this._minY):ie>=this._maxY&&(ie=Math.floor(this._maxY))),this._element.style.left=numberToPixels(oe),this._element.style.top=numberToPixels(ie),this._area=this._layoutManager.getArea(oe,ie),this._area!==null&&(this._lastValidArea=this._area,this._area.contentItem.highlightDropZone(oe,ie,this._area))}onDrop(){const oe=this._layoutManager.dropTargetIndicator;if(oe===null)throw new UnexpectedNullError("DPOD30011");oe.hide(),this._componentItem.exitDragMode();let ie;this._area!==null?(ie=this._componentItem,this._area.contentItem.onDrop(ie,this._area)):this._lastValidArea!==null?(ie=this._componentItem,this._lastValidArea.contentItem.onDrop(ie,this._lastValidArea)):this._originalParent?(ie=this._componentItem,this._originalParent.addChild(ie)):this._componentItem.destroy(),this._element.remove(),this._layoutManager.emit("itemDropped",this._componentItem),this._componentItemFocused&&ie!==void 0&&ie.focus()}setDimensions(){const oe=this._layoutManager.layoutConfig.dimensions;if(oe===void 0)throw new Error("DragProxy.setDimensions: dimensions undefined");let ie=oe.dragProxyWidth,ue=oe.dragProxyHeight;if(ie===void 0||ue===void 0)throw new Error("DragProxy.setDimensions: width and/or height undefined");const de=this._layoutManager.layoutConfig.header.show===!1?0:oe.headerHeight;this._element.style.width=numberToPixels(ie),this._element.style.height=numberToPixels(ue),ie-=this._sided?de:0,ue-=this._sided?0:de,this._proxyContainerElement.style.width=numberToPixels(ie),this._proxyContainerElement.style.height=numberToPixels(ue),this._componentItem.enterDragMode(ie,ue),this._componentItem.show()}}class DragSource{constructor(oe,ie,ue,de,he,pe,_e){this._layoutManager=oe,this._element=ie,this._extraAllowableChildTargets=ue,this._componentTypeOrFtn=de,this._componentState=he,this._title=pe,this._id=_e,this._dragListener=null,this._dummyGroundContainer=document.createElement("div");const Ce=ResolvedRowOrColumnItemConfig.createDefault("row");this._dummyGroundContentItem=new GroundItem(this._layoutManager,Ce,this._dummyGroundContainer),this.createDragListener()}destroy(){this.removeDragListener()}createDragListener(){this.removeDragListener(),this._dragListener=new DragListener(this._element,this._extraAllowableChildTargets),this._dragListener.on("dragStart",(oe,ie)=>this.onDragStart(oe,ie)),this._dragListener.on("dragStop",()=>this.onDragStop())}onDragStart(oe,ie){var ue;const de="component";let he;if(typeof this._componentTypeOrFtn=="function"){const Ce=this._componentTypeOrFtn();DragSource.isDragSourceComponentItemConfig(Ce)?he={type:de,componentState:Ce.state,componentType:Ce.type,title:(ue=Ce.title)!==null&&ue!==void 0?ue:this._title}:he=Ce}else he={type:de,componentState:this._componentState,componentType:this._componentTypeOrFtn,title:this._title,id:this._id};const pe=ComponentItemConfig.resolve(he,!1),_e=new ComponentItem(this._layoutManager,pe,this._dummyGroundContentItem);if(this._dummyGroundContentItem.contentItems.push(_e),this._dragListener===null)throw new UnexpectedNullError("DSODSD66746");{const Ce=new DragProxy(oe,ie,this._dragListener,this._layoutManager,_e,this._dummyGroundContentItem),xe=this._layoutManager.transitionIndicator;if(xe===null)throw new UnexpectedNullError("DSODST66746");xe.transitionElements(this._element,Ce.element)}}onDragStop(){this.createDragListener()}removeDragListener(){this._dragListener!==null&&(this._dragListener.destroy(),this._dragListener=null)}}(function(le){function oe(ie){return!("componentType"in ie)}le.isDragSourceComponentItemConfig=oe})(DragSource||(DragSource={}));class DropTargetIndicator{constructor(){this._element=document.createElement("div"),this._element.classList.add("lm_dropTargetIndicator");const oe=document.createElement("div");oe.classList.add("lm_inner"),this._element.appendChild(oe),document.body.appendChild(this._element)}destroy(){this._element.remove()}highlightArea(oe,ie){this._element.style.left=numberToPixels(oe.x1+ie),this._element.style.top=numberToPixels(oe.y1+ie),this._element.style.width=numberToPixels(oe.x2-oe.x1-ie),this._element.style.height=numberToPixels(oe.y2-oe.y1-ie),this._element.style.display="block"}hide(){setElementDisplayVisibility(this._element,!1)}}class TransitionIndicator{constructor(){this._element=document.createElement("div"),this._element.classList.add("lm_transition_indicator"),document.body.appendChild(this._element),this._toElement=null,this._fromDimensions=null,this._totalAnimationDuration=200,this._animationStartTime=null}destroy(){this._element.remove()}transitionElements(oe,ie){}nextAnimationFrame(){}measure(oe){const ie=oe.getBoundingClientRect();return{left:ie.left,top:ie.top,width:oe.offsetWidth,height:oe.offsetHeight}}}class EventHub extends EventEmitter$1{constructor(oe){super(),this._layoutManager=oe,this._childEventListener=ie=>this.onEventFromChild(ie),globalThis.addEventListener(EventHub.ChildEventName,this._childEventListener,{passive:!0})}emit(oe,...ie){oe==="userBroadcast"?this.emitUserBroadcast(...ie):super.emit(oe,...ie)}emitUserBroadcast(...oe){this.handleUserBroadcastEvent("userBroadcast",oe)}destroy(){globalThis.removeEventListener(EventHub.ChildEventName,this._childEventListener)}handleUserBroadcastEvent(oe,ie){this._layoutManager.isSubWindow?this.propagateToParent(oe,ie):this.propagateToThisAndSubtree(oe,ie)}onEventFromChild(oe){const ie=oe.detail;this.handleUserBroadcastEvent(ie.eventName,ie.args)}propagateToParent(oe,ie){const de={bubbles:!0,cancelable:!0,detail:{layoutManager:this._layoutManager,eventName:oe,args:ie}},he=new CustomEvent(EventHub.ChildEventName,de),pe=globalThis.opener;if(pe===null)throw new UnexpectedNullError("EHPTP15778");pe.dispatchEvent(he)}propagateToThisAndSubtree(oe,ie){this.emitUnknown(oe,...ie);for(let ue=0;ue<this._layoutManager.openPopouts.length;ue++){const de=this._layoutManager.openPopouts[ue].getGlInstance();de&&de.eventHub.propagateToThisAndSubtree(oe,ie)}}}(function(le){le.ChildEventName="gl_child_event"})(EventHub||(EventHub={}));class LayoutManager extends EventEmitter$1{constructor(oe){super(),this.resizeWithContainerAutomatically=!1,this.resizeDebounceInterval=100,this.resizeDebounceExtendedWhenPossible=!0,this._isInitialised=!1,this._groundItem=void 0,this._openPopouts=[],this._dropTargetIndicator=null,this._transitionIndicator=null,this._itemAreas=[],this._maximisePlaceholder=LayoutManager.createMaximisePlaceElement(document),this._tabDropPlaceholder=LayoutManager.createTabDropPlaceholderElement(document),this._dragSources=[],this._updatingColumnsResponsive=!1,this._firstLoad=!0,this._eventHub=new EventHub(this),this._width=null,this._height=null,this._virtualSizedContainers=[],this._virtualSizedContainerAddingBeginCount=0,this._sizeInvalidationBeginCount=0,this._resizeObserver=new ResizeObserver(()=>this.handleContainerResize()),this._windowBeforeUnloadListener=()=>this.onBeforeUnload(),this._windowBeforeUnloadListening=!1,this._maximisedStackBeforeDestroyedListener=ie=>this.cleanupBeforeMaximisedStackDestroyed(ie),this.isSubWindow=oe.isSubWindow,this._constructorOrSubWindowLayoutConfig=oe.constructorOrSubWindowLayoutConfig,I18nStrings.checkInitialise(),ConfigMinifier.checkInitialise(),oe.containerElement!==void 0&&(this._containerElement=oe.containerElement)}get container(){return this._containerElement}get isInitialised(){return this._isInitialised}get groundItem(){return this._groundItem}get root(){return this._groundItem}get openPopouts(){return this._openPopouts}get dropTargetIndicator(){return this._dropTargetIndicator}get transitionIndicator(){return this._transitionIndicator}get width(){return this._width}get height(){return this._height}get eventHub(){return this._eventHub}get rootItem(){if(this._groundItem===void 0)throw new Error("Cannot access rootItem before init");return this._groundItem.contentItems.length===0?void 0:this._groundItem.contentItems[0]}get focusedComponentItem(){return this._focusedComponentItem}get tabDropPlaceholder(){return this._tabDropPlaceholder}get maximisedStack(){return this._maximisedStack}get deprecatedConstructor(){return!this.isSubWindow&&this._constructorOrSubWindowLayoutConfig!==void 0}destroy(){if(this._isInitialised){this._windowBeforeUnloadListening&&(globalThis.removeEventListener("beforeunload",this._windowBeforeUnloadListener),this._windowBeforeUnloadListening=!1),this.layoutConfig.settings.closePopoutsOnUnload===!0&&this.closeAllOpenPopouts(),this._resizeObserver.disconnect(),this.checkClearResizeTimeout(),this._groundItem!==void 0&&this._groundItem.destroy(),this._tabDropPlaceholder.remove(),this._dropTargetIndicator!==null&&this._dropTargetIndicator.destroy(),this._transitionIndicator!==null&&this._transitionIndicator.destroy(),this._eventHub.destroy();for(const oe of this._dragSources)oe.destroy();this._dragSources=[],this._isInitialised=!1}}minifyConfig(oe){return ResolvedLayoutConfig.minifyConfig(oe)}unminifyConfig(oe){return ResolvedLayoutConfig.unminifyConfig(oe)}init(){this.setContainer(),this._dropTargetIndicator=new DropTargetIndicator,this._transitionIndicator=new TransitionIndicator,this.updateSizeFromContainer();let oe;if(this.isSubWindow){if(this._constructorOrSubWindowLayoutConfig===void 0)throw new UnexpectedUndefinedError("LMIU07155");{const ue=this._constructorOrSubWindowLayoutConfig.root;if(ue===void 0)throw new AssertError("LMIC07156");if(ItemConfig.isComponent(ue))oe=ue;else throw new AssertError("LMIC07157");const de=LayoutConfig.resolve(this._constructorOrSubWindowLayoutConfig);this.layoutConfig=Object.assign(Object.assign({},de),{root:void 0})}}else this._constructorOrSubWindowLayoutConfig===void 0?this.layoutConfig=ResolvedLayoutConfig.createDefault():this.layoutConfig=LayoutConfig.resolve(this._constructorOrSubWindowLayoutConfig);const ie=this.layoutConfig;this._groundItem=new GroundItem(this,ie.root,this._containerElement),this._groundItem.init(),this.checkLoadedLayoutMaximiseItem(),this._resizeObserver.observe(this._containerElement),this._isInitialised=!0,this.adjustColumnsResponsive(),this.emit("initialised"),oe!==void 0&&this.loadComponentAsRoot(oe)}loadLayout(oe){if(this.isInitialised){if(this._groundItem===void 0)throw new UnexpectedUndefinedError("LMLL11119");this.createSubWindows(),this.layoutConfig=LayoutConfig.resolve(oe),this._groundItem.loadRoot(this.layoutConfig.root),this.checkLoadedLayoutMaximiseItem(),this.adjustColumnsResponsive()}else throw new Error("GoldenLayout: Need to call init() if LayoutConfig with defined root passed to constructor")}saveLayout(){if(this._isInitialised===!1)throw new Error("Can't create config, layout not yet initialised");if(this._groundItem===void 0)throw new UnexpectedUndefinedError("LMTC18244");{const oe=this._groundItem.calculateConfigContent();let ie;oe.length!==1?ie=void 0:ie=oe[0],this.reconcilePopoutWindows();const ue=[];for(let he=0;he<this._openPopouts.length;he++)ue.push(this._openPopouts[he].toConfig());return{root:ie,openPopouts:ue,settings:ResolvedLayoutConfig.Settings.createCopy(this.layoutConfig.settings),dimensions:ResolvedLayoutConfig.Dimensions.createCopy(this.layoutConfig.dimensions),header:ResolvedLayoutConfig.Header.createCopy(this.layoutConfig.header),resolved:!0}}}clear(){if(this._groundItem===void 0)throw new UnexpectedUndefinedError("LMCL11129");this._groundItem.clearRoot()}toConfig(){return this.saveLayout()}newComponent(oe,ie,ue){const de=this.newComponentAtLocation(oe,ie,ue);if(de===void 0)throw new AssertError("LMNC65588");return de}newComponentAtLocation(oe,ie,ue,de){if(this._groundItem===void 0)throw new Error("Cannot add component before init");{const he=this.addComponentAtLocation(oe,ie,ue,de);if(he===void 0)return;{const pe=he.parentItem.contentItems[he.index];if(ContentItem.isComponentItem(pe))return pe;throw new AssertError("LMNC992877533")}}}addComponent(oe,ie,ue){const de=this.addComponentAtLocation(oe,ie,ue);if(de===void 0)throw new AssertError("LMAC99943");return de}addComponentAtLocation(oe,ie,ue,de){const he={type:"component",componentType:oe,componentState:ie,title:ue};return this.addItemAtLocation(he,de)}newItem(oe){const ie=this.newItemAtLocation(oe);if(ie===void 0)throw new AssertError("LMNC65588");return ie}newItemAtLocation(oe,ie){if(this._groundItem===void 0)throw new Error("Cannot add component before init");{const ue=this.addItemAtLocation(oe,ie);return ue===void 0?void 0:ue.parentItem.contentItems[ue.index]}}addItem(oe){const ie=this.addItemAtLocation(oe);if(ie===void 0)throw new AssertError("LMAI99943");return ie}addItemAtLocation(oe,ie){if(this._groundItem===void 0)throw new Error("Cannot add component before init");{ie===void 0&&(ie=LayoutManager.defaultLocationSelectors);const ue=this.findFirstLocation(ie);if(ue===void 0)return;{let de=ue.parentItem,he;switch(de.type){case ItemType.ground:{he=de.addItem(oe,ue.index),he>=0?de=this._groundItem.contentItems[0]:he=0;break}case ItemType.row:case ItemType.column:{he=de.addItem(oe,ue.index);break}case ItemType.stack:if(ItemConfig.isComponent(oe)){he=de.addItem(oe,ue.index);break}else throw Error(i18nStrings[6]);case ItemType.component:throw new AssertError("LMAIALC87444602");default:throw new UnreachableCaseError("LMAIALU98881733",de.type)}if(ItemConfig.isComponent(oe)){const pe=de.contentItems[he];ContentItem.isStack(pe)&&(de=pe,he=0)}return ue.parentItem=de,ue.index=he,ue}}}loadComponentAsRoot(oe){if(this._groundItem===void 0)throw new Error("Cannot add item before init");this._groundItem.loadComponentAsRoot(oe)}updateSize(oe,ie){this.setSize(oe,ie)}setSize(oe,ie){if(this._width=oe,this._height=ie,this._isInitialised===!0){if(this._groundItem===void 0)throw new UnexpectedUndefinedError("LMUS18881");if(this._groundItem.setSize(this._width,this._height),this._maximisedStack){const{width:ue,height:de}=getElementWidthAndHeight(this._containerElement);setElementWidth(this._maximisedStack.element,ue),setElementHeight(this._maximisedStack.element,de),this._maximisedStack.updateSize(!1)}this.adjustColumnsResponsive()}}beginSizeInvalidation(){this._sizeInvalidationBeginCount++}endSizeInvalidation(){--this._sizeInvalidationBeginCount===0&&this.updateSizeFromContainer()}updateSizeFromContainer(){const{width:oe,height:ie}=getElementWidthAndHeight(this._containerElement);this.setSize(oe,ie)}updateRootSize(oe=!1){if(this._groundItem===void 0)throw new UnexpectedUndefinedError("LMURS28881");this._groundItem.updateSize(oe)}createAndInitContentItem(oe,ie){const ue=this.createContentItem(oe,ie);return ue.init(),ue}createContentItem(oe,ie){if(typeof oe.type!="string")throw new ConfigurationError("Missing parameter 'type'",JSON.stringify(oe));return ResolvedItemConfig.isComponentItem(oe)&&!(ie instanceof Stack)&&ie&&!(this.isSubWindow===!0&&ie instanceof GroundItem)&&(oe={type:ItemType.stack,content:[oe],size:oe.size,sizeUnit:oe.sizeUnit,minSize:oe.minSize,minSizeUnit:oe.minSizeUnit,id:oe.id,maximised:oe.maximised,isClosable:oe.isClosable,activeItemIndex:0,header:void 0}),this.createContentItemFromConfig(oe,ie)}findFirstComponentItemById(oe){if(this._groundItem===void 0)throw new UnexpectedUndefinedError("LMFFCIBI82446");return this.findFirstContentItemTypeByIdRecursive(ItemType.component,oe,this._groundItem)}createPopout(oe,ie,ue,de){return oe instanceof ContentItem?this.createPopoutFromContentItem(oe,ie,ue,de):this.createPopoutFromItemConfig(oe,ie,ue,de)}createPopoutFromContentItem(oe,ie,ue,de){let he=oe.parent,pe=oe;for(;he!==null&&he.contentItems.length===1&&!he.isGround;)pe=he,he=he.parent;if(he===null)throw new UnexpectedNullError("LMCPFCI00834");{if(de===void 0&&(de=he.contentItems.indexOf(pe)),ue!==null&&he.addPopInParentId(ue),ie===void 0){const Ce=globalThis.screenX||globalThis.screenLeft,xe=globalThis.screenY||globalThis.screenTop,Ie=oe.element.offsetLeft,$e=oe.element.offsetTop,{width:Ne,height:Oe}=getElementWidthAndHeight(oe.element);ie={left:Ce+Ie,top:xe+$e,width:Ne,height:Oe}}const _e=oe.toConfig();if(oe.remove(),ResolvedRootItemConfig.isRootItemConfig(_e))return this.createPopoutFromItemConfig(_e,ie,ue,de);throw new Error(`${i18nStrings[0]}`)}}beginVirtualSizedContainerAdding(){++this._virtualSizedContainerAddingBeginCount===0&&(this._virtualSizedContainers.length=0)}addVirtualSizedContainer(oe){this._virtualSizedContainers.push(oe)}endVirtualSizedContainerAdding(){if(--this._virtualSizedContainerAddingBeginCount===0){const oe=this._virtualSizedContainers.length;if(oe>0){this.fireBeforeVirtualRectingEvent(oe);for(let ie=0;ie<oe;ie++)this._virtualSizedContainers[ie].notifyVirtualRectingRequired();this.fireAfterVirtualRectingEvent(),this._virtualSizedContainers.length=0}}}fireBeforeVirtualRectingEvent(oe){this.beforeVirtualRectingEvent!==void 0&&this.beforeVirtualRectingEvent(oe)}fireAfterVirtualRectingEvent(){this.afterVirtualRectingEvent!==void 0&&this.afterVirtualRectingEvent()}createPopoutFromItemConfig(oe,ie,ue,de){const he=this.toConfig(),pe={root:oe,openPopouts:[],settings:he.settings,dimensions:he.dimensions,header:he.header,window:ie,parentId:ue,indexInParent:de,resolved:!0};return this.createPopoutFromPopoutLayoutConfig(pe)}createPopoutFromPopoutLayoutConfig(oe){var ie,ue,de,he;const pe=oe.window,_e={left:(ie=pe.left)!==null&&ie!==void 0?ie:globalThis.screenX||globalThis.screenLeft+20,top:(ue=pe.top)!==null&&ue!==void 0?ue:globalThis.screenY||globalThis.screenTop+20,width:(de=pe.width)!==null&&de!==void 0?de:500,height:(he=pe.height)!==null&&he!==void 0?he:309},Ce=new BrowserPopout(oe,_e,this);return Ce.on("initialised",()=>this.emit("windowOpened",Ce)),Ce.on("closed",()=>this.reconcilePopoutWindows()),this._openPopouts.push(Ce),this.layoutConfig.settings.closePopoutsOnUnload&&!this._windowBeforeUnloadListening&&(globalThis.addEventListener("beforeunload",this._windowBeforeUnloadListener,{passive:!0}),this._windowBeforeUnloadListening=!0),Ce}closeAllOpenPopouts(){for(let oe=0;oe<this._openPopouts.length;oe++)this._openPopouts[oe].close();this._openPopouts.length=0,this._windowBeforeUnloadListening&&(globalThis.removeEventListener("beforeunload",this._windowBeforeUnloadListener),this._windowBeforeUnloadListening=!1)}newDragSource(oe,ie,ue,de,he){const pe=new DragSource(this,oe,[],ie,ue,de,he);return this._dragSources.push(pe),pe}removeDragSource(oe){removeFromArray(oe,this._dragSources),oe.destroy()}startComponentDrag(oe,ie,ue,de,he){new DragProxy(oe,ie,ue,this,de,he)}focusComponent(oe,ie=!1){oe.focus(ie)}clearComponentFocus(oe=!1){this.setFocusedComponentItem(void 0,oe)}setFocusedComponentItem(oe,ie=!1){if(oe!==this._focusedComponentItem){let ue;if(oe===void 0||(ue=oe.parentItem),this._focusedComponentItem!==void 0){const de=this._focusedComponentItem;this._focusedComponentItem=void 0,de.setBlurred(ie);const he=de.parentItem;ue===he?ue=void 0:he.setFocusedValue(!1)}oe!==void 0&&(this._focusedComponentItem=oe,oe.setFocused(ie),ue!==void 0&&ue.setFocusedValue(!0))}}createContentItemFromConfig(oe,ie){switch(oe.type){case ItemType.ground:throw new AssertError("LMCCIFC68871");case ItemType.row:return new RowOrColumn(!1,this,oe,ie);case ItemType.column:return new RowOrColumn(!0,this,oe,ie);case ItemType.stack:return new Stack(this,oe,ie);case ItemType.component:return new ComponentItem(this,oe,ie);default:throw new UnreachableCaseError("CCC913564",oe.type,"Invalid Config Item type specified")}}setMaximisedStack(oe){oe===void 0?this._maximisedStack!==void 0&&this.processMinimiseMaximisedStack():oe!==this._maximisedStack&&(this._maximisedStack!==void 0&&this.processMinimiseMaximisedStack(),this.processMaximiseStack(oe))}checkMinimiseMaximisedStack(){this._maximisedStack!==void 0&&this._maximisedStack.minimise()}cleanupBeforeMaximisedStackDestroyed(oe){this._maximisedStack!==null&&this._maximisedStack===oe.target&&(this._maximisedStack.off("beforeItemDestroyed",this._maximisedStackBeforeDestroyedListener),this._maximisedStack=void 0)}closeWindow(){globalThis.setTimeout(()=>globalThis.close(),1)}getArea(oe,ie){let ue=null,de=1/0;for(let he=0;he<this._itemAreas.length;he++){const pe=this._itemAreas[he];oe>=pe.x1&&oe<pe.x2&&ie>=pe.y1&&ie<pe.y2&&de>pe.surface&&(de=pe.surface,ue=pe)}return ue}calculateItemAreas(){const oe=this.getAllContentItems(),ie=this._groundItem;if(ie===void 0)throw new UnexpectedUndefinedError("LMCIAR44365");if(oe.length===1){const ue=ie.getElementArea();if(ue===null)throw new UnexpectedNullError("LMCIARA44365");this._itemAreas=[ue];return}else{ie.contentItems[0].isStack?this._itemAreas=[]:this._itemAreas=ie.createSideAreas();for(let ue=0;ue<oe.length;ue++){const de=oe[ue];if(ContentItem.isStack(de)){const he=de.getArea();if(he===null)continue;{this._itemAreas.push(he);const pe=de.contentAreaDimensions;if(pe===void 0)throw new UnexpectedUndefinedError("LMCIASC45599");{const _e=pe.header.highlightArea,Ce=(_e.x2-_e.x1)*(_e.y2-_e.y1),xe={x1:_e.x1,x2:_e.x2,y1:_e.y1,y2:_e.y2,contentItem:de,surface:Ce};this._itemAreas.push(xe)}}}}}}checkLoadedLayoutMaximiseItem(){if(this._groundItem===void 0)throw new UnexpectedUndefinedError("LMCLLMI43432");{const oe=this._groundItem.getConfigMaximisedItems();if(oe.length>0){let ie=oe[0];if(ContentItem.isComponentItem(ie)){const ue=ie.parent;if(ue===null)throw new UnexpectedNullError("LMXLLMI69999");ie=ue}if(ContentItem.isStack(ie))ie.maximise();else throw new AssertError("LMCLLMI19993")}}}processMaximiseStack(oe){if(this._maximisedStack=oe,oe.on("beforeItemDestroyed",this._maximisedStackBeforeDestroyedListener),oe.element.classList.add("lm_maximised"),oe.element.insertAdjacentElement("afterend",this._maximisePlaceholder),this._groundItem===void 0)throw new UnexpectedUndefinedError("LMMXI19993");{this._groundItem.element.prepend(oe.element);const{width:ie,height:ue}=getElementWidthAndHeight(this._containerElement);setElementWidth(oe.element,ie),setElementHeight(oe.element,ue),oe.updateSize(!0),oe.focusActiveContentItem(),this._maximisedStack.emit("maximised"),this.emit("stateChanged")}}processMinimiseMaximisedStack(){if(this._maximisedStack===void 0)throw new AssertError("LMMMS74422");{const oe=this._maximisedStack;if(oe.parent===null)throw new UnexpectedNullError("LMMI13668");oe.element.classList.remove("lm_maximised"),this._maximisePlaceholder.insertAdjacentElement("afterend",oe.element),this._maximisePlaceholder.remove(),this.updateRootSize(!0),this._maximisedStack=void 0,oe.off("beforeItemDestroyed",this._maximisedStackBeforeDestroyedListener),oe.emit("minimised"),this.emit("stateChanged")}}reconcilePopoutWindows(){const oe=[];for(let ie=0;ie<this._openPopouts.length;ie++)this._openPopouts[ie].getWindow().closed===!1?oe.push(this._openPopouts[ie]):this.emit("windowClosed",this._openPopouts[ie]);this._openPopouts.length!==oe.length&&(this._openPopouts=oe,this.emit("stateChanged"))}getAllContentItems(){if(this._groundItem===void 0)throw new UnexpectedUndefinedError("LMGACI13130");return this._groundItem.getAllContentItems()}createSubWindows(){for(let oe=0;oe<this.layoutConfig.openPopouts.length;oe++){const ie=this.layoutConfig.openPopouts[oe];this.createPopoutFromPopoutLayoutConfig(ie)}}handleContainerResize(){this.resizeWithContainerAutomatically&&this.processResizeWithDebounce()}processResizeWithDebounce(){this.resizeDebounceExtendedWhenPossible&&this.checkClearResizeTimeout(),this._resizeTimeoutId===void 0&&(this._resizeTimeoutId=setTimeout(()=>{this._resizeTimeoutId=void 0,this.beginSizeInvalidation(),this.endSizeInvalidation()},this.resizeDebounceInterval))}checkClearResizeTimeout(){this._resizeTimeoutId!==void 0&&(clearTimeout(this._resizeTimeoutId),this._resizeTimeoutId=void 0)}setContainer(){var oe;const ie=document.body,ue=(oe=this._containerElement)!==null&&oe!==void 0?oe:ie;if(ue===ie){this.resizeWithContainerAutomatically=!0;const de=document.documentElement;de.style.height="100%",de.style.margin="0",de.style.padding="0",de.style.overflow="clip",ie.style.height="100%",ie.style.margin="0",ie.style.padding="0",ie.style.overflow="clip"}this._containerElement=ue}onBeforeUnload(){this.destroy()}adjustColumnsResponsive(){if(this._groundItem===void 0)throw new UnexpectedUndefinedError("LMACR20883");if(this._firstLoad=!1,this.useResponsiveLayout()&&!this._updatingColumnsResponsive&&this._groundItem.contentItems.length>0&&this._groundItem.contentItems[0].isRow){if(this._groundItem===void 0||this._width===null)throw new UnexpectedUndefinedError("LMACR77412");{const oe=this._groundItem.contentItems[0].contentItems.length;if(oe<=1)return;{const ie=this.layoutConfig.dimensions.defaultMinItemWidth;if(oe*ie<=this._width)return;{this._updatingColumnsResponsive=!0;const de=Math.max(Math.floor(this._width/ie),1),he=oe-de,pe=this._groundItem.contentItems[0],_e=this.getAllStacks();if(_e.length===0)throw new AssertError("LMACRS77413");{const Ce=_e[0];for(let xe=0;xe<he;xe++){const Ie=pe.contentItems[pe.contentItems.length-1];this.addChildContentItemsToContainer(Ce,Ie)}this._updatingColumnsResponsive=!1}}}}}}useResponsiveLayout(){const oe=this.layoutConfig.settings,ie=oe.responsiveMode===ResponsiveMode.always,ue=oe.responsiveMode===ResponsiveMode.onload&&this._firstLoad;return ie||ue}addChildContentItemsToContainer(oe,ie){const ue=ie.contentItems;if(ie instanceof Stack)for(let de=0;de<ue.length;de++){const he=ue[de];ie.removeChild(he,!0),oe.addChild(he)}else for(let de=0;de<ue.length;de++){const he=ue[de];this.addChildContentItemsToContainer(oe,he)}}getAllStacks(){if(this._groundItem===void 0)throw new UnexpectedUndefinedError("LMFASC52778");{const oe=[];return this.findAllStacksRecursive(oe,this._groundItem),oe}}findFirstContentItemType(oe){if(this._groundItem===void 0)throw new UnexpectedUndefinedError("LMFFCIT82446");return this.findFirstContentItemTypeRecursive(oe,this._groundItem)}findFirstContentItemTypeRecursive(oe,ie){const ue=ie.contentItems,de=ue.length;if(de!==0){for(let he=0;he<de;he++){const pe=ue[he];if(pe.type===oe)return pe}for(let he=0;he<de;he++){const pe=ue[he],_e=this.findFirstContentItemTypeRecursive(oe,pe);if(_e!==void 0)return _e}return}}findFirstContentItemTypeByIdRecursive(oe,ie,ue){const de=ue.contentItems,he=de.length;if(he!==0){for(let pe=0;pe<he;pe++){const _e=de[pe];if(_e.type===oe&&_e.id===ie)return _e}for(let pe=0;pe<he;pe++){const _e=de[pe],Ce=this.findFirstContentItemTypeByIdRecursive(oe,ie,_e);if(Ce!==void 0)return Ce}return}}findAllStacksRecursive(oe,ie){const ue=ie.contentItems;for(let de=0;de<ue.length;de++){const he=ue[de];he instanceof Stack?oe.push(he):he.isComponent||this.findAllStacksRecursive(oe,he)}}findFirstLocation(oe){const ie=oe.length;for(let ue=0;ue<ie;ue++){const de=oe[ue],he=this.findLocation(de);if(he!==void 0)return he}}findLocation(oe){const ie=oe.index;switch(oe.typeId){case 0:{if(this._focusedComponentItem===void 0)return;{const ue=this._focusedComponentItem.parentItem,de=ue.contentItems,he=de.length;if(ie===void 0)return{parentItem:ue,index:he};{const _e=de.indexOf(this._focusedComponentItem)+ie;return _e<0||_e>he?void 0:{parentItem:ue,index:_e}}}}case 1:{if(this._focusedComponentItem===void 0)return;{const ue=this._focusedComponentItem.parentItem;return this.tryCreateLocationFromParentItem(ue,ie)}}case 2:{const ue=this.findFirstContentItemType(ItemType.stack);return ue===void 0?void 0:this.tryCreateLocationFromParentItem(ue,ie)}case 3:{let ue=this.findFirstContentItemType(ItemType.row);return ue!==void 0?this.tryCreateLocationFromParentItem(ue,ie):(ue=this.findFirstContentItemType(ItemType.column),ue!==void 0?this.tryCreateLocationFromParentItem(ue,ie):void 0)}case 4:{const ue=this.findFirstContentItemType(ItemType.row);return ue===void 0?void 0:this.tryCreateLocationFromParentItem(ue,ie)}case 5:{const ue=this.findFirstContentItemType(ItemType.column);return ue===void 0?void 0:this.tryCreateLocationFromParentItem(ue,ie)}case 6:{if(this._groundItem===void 0)throw new UnexpectedUndefinedError("LMFLRIF18244");return this.rootItem!==void 0?void 0:ie===void 0||ie===0?{parentItem:this._groundItem,index:0}:void 0}case 7:{if(this._groundItem===void 0)throw new UnexpectedUndefinedError("LMFLF18244");{const ue=this._groundItem.contentItems;if(ue.length===0)return ie===void 0||ie===0?{parentItem:this._groundItem,index:0}:void 0;{const de=ue[0];return this.tryCreateLocationFromParentItem(de,ie)}}}}}tryCreateLocationFromParentItem(oe,ie){const de=oe.contentItems.length;return ie===void 0?{parentItem:oe,index:de}:ie<0||ie>de?void 0:{parentItem:oe,index:ie}}}(function(le){function oe(ue){const de=ue.createElement("div");return de.classList.add("lm_maximise_place"),de}le.createMaximisePlaceElement=oe;function ie(ue){const de=ue.createElement("div");return de.classList.add("lm_drop_tab_placeholder"),de}le.createTabDropPlaceholderElement=ie,le.defaultLocationSelectors=[{typeId:1,index:void 0},{typeId:2,index:void 0},{typeId:3,index:void 0},{typeId:7,index:void 0}],le.afterFocusedItemIfPossibleLocationSelectors=[{typeId:0,index:1},{typeId:2,index:void 0},{typeId:3,index:void 0},{typeId:7,index:void 0}]})(LayoutManager||(LayoutManager={}));class VirtualLayout extends LayoutManager{constructor(oe,ie,ue,de){if(super(VirtualLayout.createLayoutManagerConstructorParameters(oe,ie)),this._bindComponentEventHanlderPassedInConstructor=!1,this._creationTimeoutPassed=!1,ie!==void 0&&typeof ie=="function"&&(this.bindComponentEvent=ie,this._bindComponentEventHanlderPassedInConstructor=!0,ue!==void 0&&(this.unbindComponentEvent=ue)),!this._bindComponentEventHanlderPassedInConstructor&&this.isSubWindow){if(this._constructorOrSubWindowLayoutConfig===void 0)throw new UnexpectedUndefinedError("VLC98823");{const he=LayoutConfig.resolve(this._constructorOrSubWindowLayoutConfig);this.layoutConfig=Object.assign(Object.assign({},he),{root:void 0})}}de!==!0&&(this.deprecatedConstructor||this.init())}destroy(){this.bindComponentEvent=void 0,this.unbindComponentEvent=void 0,super.destroy()}init(){if(!this._bindComponentEventHanlderPassedInConstructor&&(document.readyState==="loading"||document.body===null)){document.addEventListener("DOMContentLoaded",()=>this.init(),{passive:!0});return}if(!this._bindComponentEventHanlderPassedInConstructor&&this.isSubWindow===!0&&!this._creationTimeoutPassed){setTimeout(()=>this.init(),7),this._creationTimeoutPassed=!0;return}this.isSubWindow===!0&&(this._bindComponentEventHanlderPassedInConstructor||this.clearHtmlAndAdjustStylesForSubWindow(),window.__glInstance=this),super.init()}clearHtmlAndAdjustStylesForSubWindow(){const oe=document.head,ie=new Array(4);ie[0]=document.querySelectorAll("body link"),ie[1]=document.querySelectorAll("body style"),ie[2]=document.querySelectorAll("template"),ie[3]=document.querySelectorAll(".gl_keep");for(let de=0;de<ie.length;de++){const he=ie[de];for(let pe=0;pe<he.length;pe++){const _e=he[pe];oe.appendChild(_e)}}const ue=document.body;ue.innerHTML="",ue.style.visibility="visible",this.checkAddDefaultPopinButton(),document.body.offsetHeight}checkAddDefaultPopinButton(){if(this.layoutConfig.settings.popInOnClose)return!1;{const oe=document.createElement("div");oe.classList.add("lm_popin"),oe.setAttribute("title",this.layoutConfig.header.dock);const ie=document.createElement("div");ie.classList.add("lm_icon");const ue=document.createElement("div");return ue.classList.add("lm_bg"),oe.appendChild(ie),oe.appendChild(ue),oe.addEventListener("click",()=>this.emit("popIn")),document.body.appendChild(oe),!0}}bindComponent(oe,ie){if(this.bindComponentEvent!==void 0)return this.bindComponentEvent(oe,ie);if(this.getComponentEvent!==void 0)return{virtual:!1,component:this.getComponentEvent(oe,ie)};{const de=`${i18nStrings[2]}: ${JSON.stringify(ie)}`;throw new BindError(de)}}unbindComponent(oe,ie,ue){if(this.unbindComponentEvent!==void 0)this.unbindComponentEvent(oe);else if(!ie&&this.releaseComponentEvent!==void 0){if(ue===void 0)throw new UnexpectedUndefinedError("VCUCRCU333998");this.releaseComponentEvent(oe,ue)}}}(function(le){let oe=!1;function ie(ue,de){const he=oe?null:new URL(document.location.href).searchParams.get("gl-window");oe=!0;const pe=he!==null;let _e,Ce;if(he!==null){const xe=localStorage.getItem(he);if(xe===null)throw new Error("Null gl-window Config");localStorage.removeItem(he);const Ie=JSON.parse(xe),$e=ResolvedLayoutConfig.unminifyConfig(Ie);Ce=LayoutConfig.fromResolved($e),ue instanceof HTMLElement&&(_e=ue)}else ue===void 0?Ce=void 0:ue instanceof HTMLElement?(Ce=void 0,_e=ue):Ce=ue,_e===void 0&&de instanceof HTMLElement&&(_e=de);return{constructorOrSubWindowLayoutConfig:Ce,isSubWindow:pe,containerElement:_e}}le.createLayoutManagerConstructorParameters=ie})(VirtualLayout||(VirtualLayout={}));const miniRowConfig={root:{type:ItemType.row,content:[{type:ItemType.column,width:8,minWidth:1,content:[{type:"component",title:"",header:{show:"top",popout:!1},componentType:"view/projectView/ProjectView",componentState:{},height:50,isClosable:!1},{type:"component",title:"",header:{show:"top",popout:!1},componentType:"view/attributeView/AttributeView",componentState:{},isClosable:!1}]},{type:"component",title:"View",header:{show:"top",popout:!1},componentType:"view/View",componentState:{},isClosable:!1}]}},prefinedLayouts={miniRow:miniRowConfig},scriptRel="modulepreload",assetsURL=function(le,oe){return new URL(le,oe).href},seen={},__vitePreload=function(oe,ie,ue){let de=Promise.resolve();if(ie&&ie.length>0){const pe=document.getElementsByTagName("link"),_e=document.querySelector("meta[property=csp-nonce]"),Ce=(_e==null?void 0:_e.nonce)||(_e==null?void 0:_e.getAttribute("nonce"));de=Promise.allSettled(ie.map(xe=>{if(xe=assetsURL(xe,ue),xe in seen)return;seen[xe]=!0;const Ie=xe.endsWith(".css"),$e=Ie?'[rel="stylesheet"]':"";if(!!ue)for(let Fe=pe.length-1;Fe>=0;Fe--){const Ve=pe[Fe];if(Ve.href===xe&&(!Ie||Ve.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${xe}"]${$e}`))return;const Oe=document.createElement("link");if(Oe.rel=Ie?"stylesheet":scriptRel,Ie||(Oe.as="script"),Oe.crossOrigin="",Oe.href=xe,Ce&&Oe.setAttribute("nonce",Ce),document.head.appendChild(Oe),Ie)return new Promise((Fe,Ve)=>{Oe.addEventListener("load",Fe),Oe.addEventListener("error",()=>Ve(new Error(`Unable to preload CSS for ${xe}`)))})}))}function he(pe){const _e=new Event("vite:preloadError",{cancelable:!0});if(_e.payload=pe,window.dispatchEvent(_e),!_e.defaultPrevented)throw pe}return de.then(pe=>{for(const _e of pe||[])_e.status==="rejected"&&he(_e.reason);return oe().catch(he)})},_sfc_main$f=defineComponent({__name:"GlComponent",setup(le,{expose:oe}){const ie=ref(null),ue=Ce=>Ce.toString(10)+"px";return oe({setPosAndSize:(Ce,xe,Ie,$e)=>{if(ie.value){const Ne=ie.value;Ne.style.left=ue(Ce),Ne.style.top=ue(xe),Ne.style.width=ue(Ie),Ne.style.height=ue($e)}},setVisibility:Ce=>{if(ie.value){const xe=ie.value;Ce?xe.style.display="":xe.style.display="none"}},setZIndex:Ce=>{if(ie.value){const xe=ie.value;xe.style.zIndex=Ce}},getElement:()=>{if(ie.value)return ie.value}}),(Ce,xe)=>(openBlock(),createElementBlock("div",{ref_key:"GLComponent",ref:ie,style:{position:"absolute",overflow:"hidden"}},[renderSlot(Ce.$slots,"default")],512))}}),GlComponent=Object.freeze(Object.defineProperty({__proto__:null,default:_sfc_main$f},Symbol.toStringTag,{value:"Module"})),_hoisted_1$d={style:{position:"relative"}},_hoisted_2$b={style:{position:"absolute",width:"100%",height:"100%"}},_sfc_main$e=defineComponent({__name:"Glayout",props:{glcPath:String},setup(le,{expose:oe}){const ie=Object.assign({"./GlComponent.vue":()=>__vitePreload(()=>Promise.resolve().then(()=>GlComponent),void 0,import.meta.url),"./Glayout.vue":()=>__vitePreload(()=>Promise.resolve().then(()=>Glayout),void 0,import.meta.url),"../openTiles/OpenTiles.vue":()=>__vitePreload(()=>Promise.resolve().then(()=>OpenTiles$1),void 0,import.meta.url),"../view/View.vue":()=>__vitePreload(()=>Promise.resolve().then(()=>View$1),void 0,import.meta.url),"../view/attributeView/AttributeView.vue":()=>__vitePreload(()=>Promise.resolve().then(()=>AttributeView$1),void 0,import.meta.url),"../view/materialEdit/MaterialEditMenu.vue":()=>__vitePreload(()=>Promise.resolve().then(()=>MaterialEditMenu),void 0,import.meta.url),"../view/materialEdit/environment/EnvironmentEdit.vue":()=>__vitePreload(()=>Promise.resolve().then(()=>EnvironmentEdit$1),void 0,import.meta.url),"../view/materialEdit/environment/hdr/HDRLib.vue":()=>__vitePreload(()=>Promise.resolve().then(()=>HDRLib$1),void 0,import.meta.url),"../view/materialEdit/material/MaterialComponentUI.vue":()=>__vitePreload(()=>Promise.resolve().then(()=>MaterialComponentUI$1),void 0,import.meta.url),"../view/materialEdit/material/MaterialLib.vue":()=>__vitePreload(()=>Promise.resolve().then(()=>MaterialLib$1),void 0,import.meta.url),"../view/projectView/ProjectView.vue":()=>__vitePreload(()=>Promise.resolve().then(()=>ProjectView$1),void 0,import.meta.url),"../view/toolbar/ImageButtonCheckbox.vue":()=>__vitePreload(()=>Promise.resolve().then(()=>ImageButtonCheckbox$1),void 0,import.meta.url),"../view/toolbar/Toolbar.vue":()=>__vitePreload(()=>Promise.resolve().then(()=>Toolbar$1),void 0,import.meta.url),"../view/toolbar/carousel/Carousel.vue":()=>__vitePreload(()=>Promise.resolve().then(()=>Carousel$1),void 0,import.meta.url),"../view/toolbar/roam/RoamControls.vue":()=>__vitePreload(()=>Promise.resolve().then(()=>RoamControls$1),void 0,import.meta.url)}),ue=le,de=ref(null);let he;const pe=readonly(ref("glc_")),_e=new Map,Ce=ref(new Map),xe=[];let Ie=0,$e;const Ne=getCurrentInstance(),Oe=(qe,Et)=>{const kt=markRaw(defineAsyncComponent(ie[ue.glcPath+qe+".vue"]));let At=Ie;return xe.length>0?At=xe.pop():Ie++,Ce.value.set(At,kt),At},Fe=async(qe,Et)=>{if(qe.length==0)throw new Error("addGLComponent: Component's type is empty");const kt=Oe(qe);await nextTick(),he.addComponent(qe,{refId:kt},Et)},Ve=qe=>{for(const Et of _e.keys())if(_e.get(Et),Et.title==qe){he.focusComponent(Et);return}},ze=async qe=>{he.clear(),Ce.value.clear();const Et=qe.resolved?LayoutConfig.fromResolved(qe):qe;let kt=[Et.root.content],At=0;for(;kt.length>0;){const Dt=kt.shift();for(let Lt of Dt)Lt.type=="component"?(At=Oe(Lt.componentType,Lt.title),typeof Lt.componentState=="object"?Lt.componentState.refId=At:Lt.componentState={refId:At}):Lt.content.length>0&&kt.push(Lt.content)}await nextTick(),he.loadLayout(Et)},Ue=()=>he.saveLayout(),Pt=qe=>{for(const Et of _e.keys()){let At=_e.get(Et).glc.getElement();if(qe==At)return Et.title}};return onMounted(()=>{if(de.value==null)throw new Error("Golden Layout can't find the root DOM!");const qe=()=>{const _n=de.value;let bn=_n?_n.offsetWidth:0,vn=_n?_n.offsetHeight:0;he.setSize(bn,vn)};window.addEventListener("resize",qe,{passive:!0});const Et=_n=>{$e=de.value.getBoundingClientRect()},kt=(_n,bn,vn)=>{const Tn=_e.get(_n);if(!Tn||!(Tn!=null&&Tn.glc))throw new Error("handleContainerVirtualRectingRequiredEvent: Component not found");const $n=_n.element.getBoundingClientRect(),wn=$n.left-$e.left,Cn=$n.top-$e.top;Tn.glc.setPosAndSize(wn,Cn,bn,vn)},At=(_n,bn)=>{const vn=_e.get(_n);if(!vn||!(vn!=null&&vn.glc))throw new Error("handleContainerVirtualVisibilityChangeRequiredEvent: Component not found");vn.glc.setVisibility(bn)},Dt=(_n,bn,vn)=>{const Tn=_e.get(_n);if(!Tn||!(Tn!=null&&Tn.glc))throw new Error("handleContainerVirtualZIndexChangeRequiredEvent: Component not found");Tn.glc.setZIndex(vn)},Lt=(_n,bn)=>{let vn=-1;if(bn&&bn.componentState)vn=bn.componentState.refId;else throw new Error("bindComponentEventListener: component's ref id is required");const Tn=pe.value+vn,$n=Ne==null?void 0:Ne.refs[Tn][0];return _e.set(_n,{refId:vn,glc:$n}),_n.virtualRectingRequiredEvent=(wn,Cn,Sn)=>kt(wn,Cn,Sn),_n.virtualVisibilityChangeRequiredEvent=(wn,Cn)=>At(wn,Cn),_n.virtualZIndexChangeRequiredEvent=(wn,Cn,Sn)=>Dt(wn,Cn,Sn),{component:$n,virtual:!0}},jt=_n=>{const bn=_e.get(_n);if(!bn||!(bn!=null&&bn.glc))throw new Error("handleUnbindComponentEvent: Component not found");_e.delete(_n),Ce.value.delete(bn.refId),xe.push(bn.refId)};he=new VirtualLayout(de.value,Lt,jt),he.beforeVirtualRectingEvent=Et}),oe({addGLComponent:Fe,focusComponent:Ve,loadGLLayout:ze,getLayoutConfig:Ue,getTitleByElement:Pt}),(qe,Et)=>(openBlock(),createElementBlock("div",_hoisted_1$d,[createBaseVNode("div",{ref_key:"GLRoot",ref:de,style:{position:"absolute",width:"100%",height:"100%"}},null,512),createBaseVNode("div",_hoisted_2$b,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Ce.value,kt=>(openBlock(),createBlock(_sfc_main$f,{key:kt[0],ref_for:!0,ref:unref(pe)+kt[0]},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(kt[1])))]),_:2},1024))),128))])]))}}),Glayout=Object.freeze(Object.defineProperty({__proto__:null,default:_sfc_main$e},Symbol.toStringTag,{value:"Module"}));function _typeof$2(le){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(oe){return typeof oe}:function(oe){return oe&&typeof Symbol=="function"&&oe.constructor===Symbol&&oe!==Symbol.prototype?"symbol":typeof oe},_typeof$2(le)}var u8$1=Uint8Array,u16$1=Uint16Array,u32=Uint32Array,fleb$1=new u8$1([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb$1=new u8$1([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim$1=new u8$1([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb$1=function(le,oe){for(var ie=new u16$1(31),ue=0;ue<31;++ue)ie[ue]=oe+=1<<le[ue-1];for(var de=new u32(ie[30]),ue=1;ue<30;++ue)for(var he=ie[ue];he<ie[ue+1];++he)de[he]=he-ie[ue]<<5|ue;return[ie,de]},_a$2=freb$1(fleb$1,2),fl$1=_a$2[0],revfl$1=_a$2[1];fl$1[28]=258,revfl$1[258]=28;var _b$2=freb$1(fdeb$1,0),fd$1=_b$2[0],revfd=_b$2[1],rev$1=new u16$1(32768);for(var i$3=0;i$3<32768;++i$3){var x$2=(i$3&43690)>>>1|(i$3&21845)<<1;x$2=(x$2&52428)>>>2|(x$2&13107)<<2,x$2=(x$2&61680)>>>4|(x$2&3855)<<4,rev$1[i$3]=((x$2&65280)>>>8|(x$2&255)<<8)>>>1}var hMap$1=function(le,oe,ie){for(var ue=le.length,de=0,he=new u16$1(oe);de<ue;++de)++he[le[de]-1];var pe=new u16$1(oe);for(de=0;de<oe;++de)pe[de]=pe[de-1]+he[de-1]<<1;var _e;if(ie){_e=new u16$1(1<<oe);var Ce=15-oe;for(de=0;de<ue;++de)if(le[de])for(var xe=de<<4|le[de],Ie=oe-le[de],$e=pe[le[de]-1]++<<Ie,Ne=$e|(1<<Ie)-1;$e<=Ne;++$e)_e[rev$1[$e]>>>Ce]=xe}else for(_e=new u16$1(ue),de=0;de<ue;++de)_e[de]=rev$1[pe[le[de]-1]++]>>>15-le[de];return _e},flt$1=new u8$1(288);for(var i$3=0;i$3<144;++i$3)flt$1[i$3]=8;for(var i$3=144;i$3<256;++i$3)flt$1[i$3]=9;for(var i$3=256;i$3<280;++i$3)flt$1[i$3]=7;for(var i$3=280;i$3<288;++i$3)flt$1[i$3]=8;var fdt$1=new u8$1(32);for(var i$3=0;i$3<32;++i$3)fdt$1[i$3]=5;var flm=hMap$1(flt$1,9,0),flrm$1=hMap$1(flt$1,9,1),fdm=hMap$1(fdt$1,5,0),fdrm$1=hMap$1(fdt$1,5,1),max$3=function(le){for(var oe=le[0],ie=1;ie<le.length;++ie)le[ie]>oe&&(oe=le[ie]);return oe},bits$1=function(le,oe,ie){var ue=oe/8>>0;return(le[ue]|le[ue+1]<<8)>>>(oe&7)&ie},bits16$1=function(le,oe){var ie=oe/8>>0;return(le[ie]|le[ie+1]<<8|le[ie+2]<<16)>>>(oe&7)},shft$1=function(le){return(le/8>>0)+(le&7&&1)},slc$1=function(le,oe,ie){(ie==null||ie>le.length)&&(ie=le.length);var ue=new(le instanceof u16$1?u16$1:le instanceof u32?u32:u8$1)(ie-oe);return ue.set(le.subarray(oe,ie)),ue},inflt$1=function(le,oe,ie){var ue=le.length,de=!oe||ie,he=!ie||ie.i;ie||(ie={}),oe||(oe=new u8$1(ue*3));var pe=function(Hn){var Rn=oe.length;if(Hn>Rn){var Jn=new u8$1(Math.max(Rn*2,Hn));Jn.set(oe),oe=Jn}},_e=ie.f||0,Ce=ie.p||0,xe=ie.b||0,Ie=ie.l,$e=ie.d,Ne=ie.m,Oe=ie.n,Fe=ue*8;do{if(!Ie){ie.f=_e=bits$1(le,Ce,1);var Ve=bits$1(le,Ce+1,3);if(Ce+=3,Ve)if(Ve==1)Ie=flrm$1,$e=fdrm$1,Ne=9,Oe=5;else if(Ve==2){var qe=bits$1(le,Ce,31)+257,Et=bits$1(le,Ce+10,15)+4,kt=qe+bits$1(le,Ce+5,31)+1;Ce+=14;for(var At=new u8$1(kt),Dt=new u8$1(19),Lt=0;Lt<Et;++Lt)Dt[clim$1[Lt]]=bits$1(le,Ce+Lt*3,7);Ce+=Et*3;var jt=max$3(Dt),_n=(1<<jt)-1;if(!he&&Ce+kt*(jt+7)>Fe)break;for(var bn=hMap$1(Dt,jt,1),Lt=0;Lt<kt;){var vn=bn[bits$1(le,Ce,_n)];Ce+=vn&15;var ze=vn>>>4;if(ze<16)At[Lt++]=ze;else{var Tn=0,$n=0;for(ze==16?($n=3+bits$1(le,Ce,3),Ce+=2,Tn=At[Lt-1]):ze==17?($n=3+bits$1(le,Ce,7),Ce+=3):ze==18&&($n=11+bits$1(le,Ce,127),Ce+=7);$n--;)At[Lt++]=Tn}}var wn=At.subarray(0,qe),Cn=At.subarray(qe);Ne=max$3(wn),Oe=max$3(Cn),Ie=hMap$1(wn,Ne,1),$e=hMap$1(Cn,Oe,1)}else throw"invalid block type";else{var ze=shft$1(Ce)+4,Ue=le[ze-4]|le[ze-3]<<8,Pt=ze+Ue;if(Pt>ue){if(he)throw"unexpected EOF";break}de&&pe(xe+Ue),oe.set(le.subarray(ze,Pt),xe),ie.b=xe+=Ue,ie.p=Ce=Pt*8;continue}if(Ce>Fe)throw"unexpected EOF"}de&&pe(xe+131072);for(var Sn=(1<<Ne)-1,In=(1<<Oe)-1,En=Ne+Oe+18;he||Ce+En<Fe;){var Tn=Ie[bits16$1(le,Ce)&Sn],xn=Tn>>>4;if(Ce+=Tn&15,Ce>Fe)throw"unexpected EOF";if(!Tn)throw"invalid length/literal";if(xn<256)oe[xe++]=xn;else if(xn==256){Ie=null;break}else{var kn=xn-254;if(xn>264){var Lt=xn-257,On=fleb$1[Lt];kn=bits$1(le,Ce,(1<<On)-1)+fl$1[Lt],Ce+=On}var Mn=$e[bits16$1(le,Ce)&In],Un=Mn>>>4;if(!Mn)throw"invalid distance";Ce+=Mn&15;var Cn=fd$1[Un];if(Un>3){var On=fdeb$1[Un];Cn+=bits16$1(le,Ce)&(1<<On)-1,Ce+=On}if(Ce>Fe)throw"unexpected EOF";de&&pe(xe+131072);for(var zn=xe+kn;xe<zn;xe+=4)oe[xe]=oe[xe-Cn],oe[xe+1]=oe[xe+1-Cn],oe[xe+2]=oe[xe+2-Cn],oe[xe+3]=oe[xe+3-Cn];xe=zn}}ie.l=Ie,ie.p=Ce,ie.b=xe,Ie&&(_e=1,ie.m=Ne,ie.d=$e,ie.n=Oe)}while(!_e);return xe==oe.length?oe:slc$1(oe,0,xe)},wbits=function(le,oe,ie){ie<<=oe&7;var ue=oe/8>>0;le[ue]|=ie,le[ue+1]|=ie>>>8},wbits16=function(le,oe,ie){ie<<=oe&7;var ue=oe/8>>0;le[ue]|=ie,le[ue+1]|=ie>>>8,le[ue+2]|=ie>>>16},hTree=function(le,oe){for(var ie=[],ue=0;ue<le.length;++ue)le[ue]&&ie.push({s:ue,f:le[ue]});var de=ie.length,he=ie.slice();if(!de)return[new u8$1(0),0];if(de==1){var pe=new u8$1(ie[0].s+1);return pe[ie[0].s]=1,[pe,1]}ie.sort(function(kt,At){return kt.f-At.f}),ie.push({s:-1,f:25001});var _e=ie[0],Ce=ie[1],xe=0,Ie=1,$e=2;for(ie[0]={s:-1,f:_e.f+Ce.f,l:_e,r:Ce};Ie!=de-1;)_e=ie[ie[xe].f<ie[$e].f?xe++:$e++],Ce=ie[xe!=Ie&&ie[xe].f<ie[$e].f?xe++:$e++],ie[Ie++]={s:-1,f:_e.f+Ce.f,l:_e,r:Ce};for(var Ne=he[0].s,ue=1;ue<de;++ue)he[ue].s>Ne&&(Ne=he[ue].s);var Oe=new u16$1(Ne+1),Fe=ln(ie[Ie-1],Oe,0);if(Fe>oe){var ue=0,Ve=0,ze=Fe-oe,Ue=1<<ze;for(he.sort(function(At,Dt){return Oe[Dt.s]-Oe[At.s]||At.f-Dt.f});ue<de;++ue){var Pt=he[ue].s;if(Oe[Pt]>oe)Ve+=Ue-(1<<Fe-Oe[Pt]),Oe[Pt]=oe;else break}for(Ve>>>=ze;Ve>0;){var qe=he[ue].s;Oe[qe]<oe?Ve-=1<<oe-Oe[qe]++-1:++ue}for(;ue>=0&&Ve;--ue){var Et=he[ue].s;Oe[Et]==oe&&(--Oe[Et],++Ve)}Fe=oe}return[new u8$1(Oe),Fe]},ln=function(le,oe,ie){return le.s==-1?Math.max(ln(le.l,oe,ie+1),ln(le.r,oe,ie+1)):oe[le.s]=ie},lc=function(le){for(var oe=le.length;oe&&!le[--oe];);for(var ie=new u16$1(++oe),ue=0,de=le[0],he=1,pe=function(Ce){ie[ue++]=Ce},_e=1;_e<=oe;++_e)if(le[_e]==de&&_e!=oe)++he;else{if(!de&&he>2){for(;he>138;he-=138)pe(32754);he>2&&(pe(he>10?he-11<<5|28690:he-3<<5|12305),he=0)}else if(he>3){for(pe(de),--he;he>6;he-=6)pe(8304);he>2&&(pe(he-3<<5|8208),he=0)}for(;he--;)pe(de);he=1,de=le[_e]}return[ie.subarray(0,ue),oe]},clen=function(le,oe){for(var ie=0,ue=0;ue<oe.length;++ue)ie+=le[ue]*oe[ue];return ie},wfblk=function(le,oe,ie){var ue=ie.length,de=shft$1(oe+2);le[de]=ue&255,le[de+1]=ue>>>8,le[de+2]=le[de]^255,le[de+3]=le[de+1]^255;for(var he=0;he<ue;++he)le[de+he+4]=ie[he];return(de+4+ue)*8},wblk=function(le,oe,ie,ue,de,he,pe,_e,Ce,xe,Ie){wbits(oe,Ie++,ie),++de[256];for(var $e=hTree(de,15),Ne=$e[0],Oe=$e[1],Fe=hTree(he,15),Ve=Fe[0],ze=Fe[1],Ue=lc(Ne),Pt=Ue[0],qe=Ue[1],Et=lc(Ve),kt=Et[0],At=Et[1],Dt=new u16$1(19),Lt=0;Lt<Pt.length;++Lt)Dt[Pt[Lt]&31]++;for(var Lt=0;Lt<kt.length;++Lt)Dt[kt[Lt]&31]++;for(var jt=hTree(Dt,7),_n=jt[0],bn=jt[1],vn=19;vn>4&&!_n[clim$1[vn-1]];--vn);var Tn=xe+5<<3,$n=clen(de,flt$1)+clen(he,fdt$1)+pe,wn=clen(de,Ne)+clen(he,Ve)+pe+14+3*vn+clen(Dt,_n)+(2*Dt[16]+3*Dt[17]+7*Dt[18]);if(Tn<=$n&&Tn<=wn)return wfblk(oe,Ie,le.subarray(Ce,Ce+xe));var Cn,Sn,In,En;if(wbits(oe,Ie,1+(wn<$n)),Ie+=2,wn<$n){Cn=hMap$1(Ne,Oe,0),Sn=Ne,In=hMap$1(Ve,ze,0),En=Ve;var xn=hMap$1(_n,bn,0);wbits(oe,Ie,qe-257),wbits(oe,Ie+5,At-1),wbits(oe,Ie+10,vn-4),Ie+=14;for(var Lt=0;Lt<vn;++Lt)wbits(oe,Ie+3*Lt,_n[clim$1[Lt]]);Ie+=3*vn;for(var kn=[Pt,kt],On=0;On<2;++On)for(var Mn=kn[On],Lt=0;Lt<Mn.length;++Lt){var Un=Mn[Lt]&31;wbits(oe,Ie,xn[Un]),Ie+=_n[Un],Un>15&&(wbits(oe,Ie,Mn[Lt]>>>5&127),Ie+=Mn[Lt]>>>12)}}else Cn=flm,Sn=flt$1,In=fdm,En=fdt$1;for(var Lt=0;Lt<_e;++Lt)if(ue[Lt]>255){var Un=ue[Lt]>>>18&31;wbits16(oe,Ie,Cn[Un+257]),Ie+=Sn[Un+257],Un>7&&(wbits(oe,Ie,ue[Lt]>>>23&31),Ie+=fleb$1[Un]);var zn=ue[Lt]&31;wbits16(oe,Ie,In[zn]),Ie+=En[zn],zn>3&&(wbits16(oe,Ie,ue[Lt]>>>5&8191),Ie+=fdeb$1[zn])}else wbits16(oe,Ie,Cn[ue[Lt]]),Ie+=Sn[ue[Lt]];return wbits16(oe,Ie,Cn[256]),Ie+Sn[256]},deo=new u32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),dflt=function(le,oe,ie,ue,de,he){var pe=le.length,_e=new u8$1(ue+pe+5*(1+Math.floor(pe/7e3))+de),Ce=_e.subarray(ue,_e.length-de),xe=0;if(!oe||pe<8)for(var Ie=0;Ie<=pe;Ie+=65535){var $e=Ie+65535;$e<pe?xe=wfblk(Ce,xe,le.subarray(Ie,$e)):(Ce[Ie]=he,xe=wfblk(Ce,xe,le.subarray(Ie,pe)))}else{for(var Ne=deo[oe-1],Oe=Ne>>>13,Fe=Ne&8191,Ve=(1<<ie)-1,ze=new u16$1(32768),Ue=new u16$1(Ve+1),Pt=Math.ceil(ie/3),qe=2*Pt,Et=function(Dn){return(le[Dn]^le[Dn+1]<<Pt^le[Dn+2]<<qe)&Ve},kt=new u32(25e3),At=new u16$1(288),Dt=new u16$1(32),Lt=0,jt=0,Ie=0,_n=0,bn=0,vn=0;Ie<pe;++Ie){var Tn=Et(Ie),$n=Ie&32767,wn=Ue[Tn];if(ze[$n]=wn,Ue[Tn]=$n,bn<=Ie){var Cn=pe-Ie;if((Lt>7e3||_n>24576)&&Cn>423){xe=wblk(le,Ce,0,kt,At,Dt,jt,_n,vn,Ie-vn,xe),_n=Lt=jt=0,vn=Ie;for(var Sn=0;Sn<286;++Sn)At[Sn]=0;for(var Sn=0;Sn<30;++Sn)Dt[Sn]=0}var In=2,En=0,xn=Fe,kn=$n-wn&32767;if(Cn>2&&Tn==Et(Ie-kn))for(var On=Math.min(Oe,Cn)-1,Mn=Math.min(32767,Ie),Un=Math.min(258,Cn);kn<=Mn&&--xn&&$n!=wn;){if(le[Ie+In]==le[Ie+In-kn]){for(var zn=0;zn<Un&&le[Ie+zn]==le[Ie+zn-kn];++zn);if(zn>In){if(In=zn,En=kn,zn>On)break;for(var Hn=Math.min(kn,zn-2),Rn=0,Sn=0;Sn<Hn;++Sn){var Jn=Ie-kn+Sn+32768&32767,Qn=ze[Jn],_r=Jn-Qn+32768&32767;_r>Rn&&(Rn=_r,wn=Jn)}}}$n=wn,wn=ze[$n],kn+=$n-wn+32768&32767}if(En){kt[_n++]=268435456|revfl$1[In]<<18|revfd[En];var Zn=revfl$1[In]&31,Gn=revfd[En]&31;jt+=fleb$1[Zn]+fdeb$1[Gn],++At[257+Zn],++Dt[Gn],bn=Ie+In,++Lt}else kt[_n++]=le[Ie],++At[le[Ie]]}}xe=wblk(le,Ce,he,kt,At,Dt,jt,_n,vn,Ie-vn,xe)}return slc$1(_e,0,ue+shft$1(xe)+de)},adler=function(){var le=1,oe=0;return{p:function(ie){for(var ue=le,de=oe,he=ie.length,pe=0;pe!=he;){for(var _e=Math.min(pe+5552,he);pe<_e;++pe)ue+=ie[pe],de+=ue;ue%=65521,de%=65521}le=ue,oe=de},d:function(){return(le>>>8<<16|(oe&255)<<8|oe>>>8)+((le&255)<<23)*2}}},dopt=function(le,oe,ie,ue,de){return dflt(le,oe.level==null?6:oe.level,oe.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(le.length)))*1.5):12+oe.mem,ie,ue,!de)},wbytes=function(le,oe,ie){for(;ie;++oe)le[oe]=ie,ie>>>=8},zlh=function(le,oe){var ie=oe.level,ue=ie==0?0:ie<6?1:ie==9?3:2;le[0]=120,le[1]=ue<<6|(ue?32-2*ue:1)},zlv=function(le){if((le[0]&15)!=8||le[0]>>>4>7||(le[0]<<8|le[1])%31)throw"invalid zlib data";if(le[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function zlibSync(le,oe){oe===void 0&&(oe={});var ie=adler();ie.p(le);var ue=dopt(le,oe,2,4);return zlh(ue,oe),wbytes(ue,ue.length-4,ie.d()),ue}function unzlibSync$1(le,oe){return inflt$1((zlv(le),le.subarray(2,-4)),oe)}var hn=Object.defineProperty,dn=(le,oe,ie)=>oe in le?hn(le,oe,{enumerable:!0,configurable:!0,writable:!0,value:ie}):le[oe]=ie,ve=(le,oe,ie)=>dn(le,typeof oe!="symbol"?oe+"":oe,ie);function isIterable(le){return typeof(le==null?void 0:le[Symbol.iterator])=="function"}function isAsyncIterable(le){return typeof(le==null?void 0:le[Symbol.asyncIterator])=="function"}const isPromise=le=>le instanceof Promise||le!==null&&typeof le=="object"&&typeof le.then=="function"&&typeof le.catch=="function";class AsyncFunctionException extends Error{constructor(oe=AsyncFunctionException.MESSAGE){super(oe)}}AsyncFunctionException.MESSAGE=`'Iterable' can not used with async function.
If you want to deal with async function, see: [toAsync](https://fxts.dev/docs/toAsync)`;function sync$1(le,oe){const ie=oe[Symbol.iterator]();return{next(){const{done:ue,value:de}=ie.next();if(ue)return{done:!0,value:void 0};const he=le(de);if(isPromise(he))throw new AsyncFunctionException;return{done:!1,value:he}},[Symbol.iterator](){return this}}}function async$1(le,oe){const ie=oe[Symbol.asyncIterator]();return{async next(ue){const{done:de,value:he}=await ie.next(ue);return de?{done:de,value:he}:{done:!1,value:await le(he)}},[Symbol.asyncIterator](){return this}}}function map(le,oe){if(oe===void 0)return ie=>map(le,ie);if(isIterable(oe))return sync$1(le,oe);if(isAsyncIterable(oe))return async$1(le,oe);throw new TypeError("'iterable' must be type of Iterable or AsyncIterable")}const pipe1=(le,oe)=>isPromise(le)?le.then(oe):oe(le);class Concurrent{constructor(oe){this.length=oe}static of(oe){return new Concurrent(oe)}}const isConcurrent=le=>le instanceof Concurrent;function concurrent(le,oe){if(oe===void 0)return Oe=>concurrent(le,Oe);if(!Number.isFinite(le)||le<=0)throw new RangeError("'length' must be positive integer");if(!isAsyncIterable(oe))throw new TypeError("'iterable' must be type of AsyncIterable");const ie=oe[Symbol.asyncIterator](),ue=[];let de=Promise.resolve(),he=0,pe=0,_e=!1,Ce=!1;const xe=[],Ie=()=>{for(;ue.length>0&&he>pe;){const Oe=ue.shift(),[Fe,Ve]=xe.shift();if(Oe.status==="fulfilled")pe++,Fe(Oe.value),Oe.value.done&&(_e=!0);else{Ve(Oe.reason),_e=!0;break}}},$e=()=>{if(Ce)de=de.then(()=>void(!_e&&he>pe&&$e()));else{const Oe=Promise.allSettled(Array.from({length:le},()=>ie.next(Concurrent.of(le))));Ce=!0,de=de.then(()=>Oe).then(Fe=>{ue.push(...Fe),Ce=!1,Ne()})}};function Ne(){_e||he===pe||(ue.length>0?Ie():$e())}return{[Symbol.asyncIterator](){return this},next(){return he++,_e?{done:!0,value:void 0}:new Promise((Oe,Fe)=>{xe.push([Oe,Fe]),Ne()})}}}async function*asyncSequential(le,oe){for await(const ie of oe)await le(ie)&&(yield ie)}function asyncConcurrent(le){const oe=le[Symbol.asyncIterator](),ie=[],ue=[];let de=!1,he=0,pe=0,_e=Promise.resolve();function Ce($e){const Ne=oe.next($e);_e=_e.then(()=>Ne).then(({done:Oe,value:Fe})=>{if(Oe){for(;ie.length>0;){const[Ue]=ie.shift();Ue({done:!0,value:void 0})}return void(de=!0)}const[Ve,ze]=Fe;Ve&&ue.push(ze),Ie($e)}).catch(Oe=>{for(de=!0;ie.length>0;){const[,Fe]=ie.shift();Fe(Oe)}})}function xe(){for(;ue.length>0&&he>pe;){const $e=ue.shift(),[Ne]=ie.shift();Ne({done:!1,value:$e}),pe++}}function Ie($e){de||he===pe||(ue.length>0?xe():Ce($e))}return{async next($e){return he++,de?{done:!0,value:void 0}:new Promise((Ne,Oe)=>{ie.push([Ne,Oe]),Ie($e)})},[Symbol.asyncIterator](){return this}}}function toFilterIterator(le,oe){const ie=oe[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return this},async next(ue){const{done:de,value:he}=await ie.next(ue);return de?{done:!0,value:void 0}:pipe1(le(he),pe=>({done:de,value:[!!pe,he]}))}}}function async(le,oe){let ie;return{async next(ue){return ie===void 0&&(ie=isConcurrent(ue)?asyncConcurrent(concurrent(ue.length,toFilterIterator(le,oe))):asyncSequential(le,oe)),ie.next(ue)},[Symbol.asyncIterator](){return this}}}function*sync(le,oe){for(const ie of oe){const ue=le(ie);if(isPromise(ue))throw new AsyncFunctionException;ue&&(yield ie)}}function filter(le,oe){if(oe===void 0)return ie=>filter(le,ie);if(isIterable(oe))return sync(le,oe);if(isAsyncIterable(oe))return async(le,oe);throw new TypeError("'iterable' must be type of Iterable or AsyncIterable")}(H=eE||(eE={}))[H.None=0]="None",H[H.Anonymous=1]="Anonymous",H[H.NonConstant=2]="NonConstant",H[H.Xref=4]="Xref",H[H.XrefOverlay=8]="XrefOverlay",H[H.ExternallyDependent=16]="ExternallyDependent",H[H.ResolvedOrDependent=32]="ResolvedOrDependent",H[H.ReferencedXref=64]="ReferencedXref",(G=eI||(eI={}))[G.BYBLOCK=0]="BYBLOCK",G[G.BYLAYER=256]="BYLAYER";(U=eh||(eh={}))[U.Rotated=0]="Rotated",U[U.Aligned=1]="Aligned",U[U.Angular=2]="Angular",U[U.Diameter=3]="Diameter",U[U.Radius=4]="Radius",U[U.Angular3Point=5]="Angular3Point",U[U.Ordinate=6]="Ordinate",U[U.ReferenceIsExclusive=32]="ReferenceIsExclusive",U[U.IsOrdinateXTypeFlag=64]="IsOrdinateXTypeFlag",U[U.IsCustomTextPositionFlag=128]="IsCustomTextPositionFlag",(Y=ef||(ef={}))[Y.TopLeft=1]="TopLeft",Y[Y.TopCenter=2]="TopCenter",Y[Y.TopRight=3]="TopRight",Y[Y.MiddleLeft=4]="MiddleLeft",Y[Y.MiddleCenter=5]="MiddleCenter",Y[Y.MiddleRight=6]="MiddleRight",Y[Y.BottomLeft=7]="BottomLeft",Y[Y.BottomCenter=8]="BottomCenter",Y[Y.BottomRight=9]="BottomRight",(W=eb||(eb={}))[W.AtLeast=1]="AtLeast",W[W.Exact=2]="Exact",(j=eT||(eT={}))[j.Center=0]="Center",j[j.Above=1]="Above",j[j.Outside=2]="Outside",j[j.JIS=3]="JIS",j[j.Below=4]="Below",(X=eD||(eD={}))[X.Feet=0]="Feet",X[X.None=1]="None",X[X.Inch=2]="Inch",X[X.FeetAndInch=3]="FeetAndInch",X[X.Leading=4]="Leading",X[X.Trailing=8]="Trailing",X[X.LeadingAndTrailing=12]="LeadingAndTrailing",(z=eO||(eO={}))[z.None=0]="None",z[z.Leading=1]="Leading",z[z.Trailing=2]="Trailing",z[z.LeadingAndTrailing=3]="LeadingAndTrailing",(K=eS||(eS={}))[K.Center=0]="Center",K[K.Left=1]="Left",K[K.Right=2]="Right",K[K.OverFirst=3]="OverFirst",K[K.OverSecond=4]="OverSecond",(Z=eN||(eN={}))[Z.Bottom=0]="Bottom",Z[Z.Center=1]="Center",Z[Z.Top=2]="Top",(J=eg||(eg={}))[J.PatternFill=0]="PatternFill",J[J.SolidFill=1]="SolidFill",($$f=e_||(e_={}))[$$f.NonAssociative=0]="NonAssociative",$$f[$$f.Associative=1]="Associative",(q=eL||(eL={}))[q.Normal=0]="Normal",q[q.Outer=1]="Outer",q[q.Ignore=2]="Ignore",(Q=eA||(eA={}))[Q.UserDefined=0]="UserDefined",Q[Q.Predefined=1]="Predefined",Q[Q.Custom=2]="Custom",(ee=ey||(ey={}))[ee.NotAnnotated=0]="NotAnnotated",ee[ee.Annotated=1]="Annotated",(ea=eP||(eP={}))[ea.Solid=0]="Solid",ea[ea.Gradient=1]="Gradient",(er=eC||(eC={}))[er.TwoColor=0]="TwoColor",er[er.OneColor=1]="OneColor",(et$1=eM||(eM={}))[et$1.Default=0]="Default",et$1[et$1.External=1]="External",et$1[et$1.Polyline=2]="Polyline",et$1[et$1.Derived=4]="Derived",et$1[et$1.Textbox=8]="Textbox",et$1[et$1.Outermost=16]="Outermost",(en=ev||(ev={}))[en.Line=1]="Line",en[en.Circular=2]="Circular",en[en.Elliptic=3]="Elliptic",en[en.Spline=4]="Spline",(eo=eR||(eR={}))[eo.Off=0]="Off",eo[eo.Solid=1]="Solid",eo[eo.Dashed=2]="Dashed",eo[eo.Dotted=3]="Dotted",eo[eo.ShotDash=4]="ShotDash",eo[eo.MediumDash=5]="MediumDash",eo[eo.LongDash=6]="LongDash",eo[eo.DoubleShortDash=7]="DoubleShortDash",eo[eo.DoubleMediumDash=8]="DoubleMediumDash",eo[eo.DoubleLongDash=9]="DoubleLongDash",eo[eo.DoubleMediumLongDash=10]="DoubleMediumLongDash",eo[eo.SparseDot=11]="SparseDot";eR.Off;(es=ek||(ek={}))[es.Standard=-3]="Standard",es[es.ByLayer=-2]="ByLayer",es[es.ByBlock=-1]="ByBlock",(ei=ex||(ex={}))[ei.English=0]="English",ei[ei.Metric=1]="Metric";function i$1$1(le,oe,ie){return le.code===oe&&(ie==null||le.value===ie)}function c$2(le){let oe={};le.rewind();let ie=le.next(),ue=ie.code;if(oe.x=ie.value,(ie=le.next()).code!==ue+10)throw Error("Expected code for point value to be 20 but got "+ie.code+".");return oe.y=ie.value,(ie=le.next()).code!==ue+20?le.rewind():oe.z=ie.value,oe}(ec$1=eF||(eF={}))[ec$1.PERSPECTIVE_MODE=1]="PERSPECTIVE_MODE",ec$1[ec$1.FRONT_CLIPPING=2]="FRONT_CLIPPING",ec$1[ec$1.BACK_CLIPPING=4]="BACK_CLIPPING",ec$1[ec$1.UCS_FOLLOW=8]="UCS_FOLLOW",ec$1[ec$1.FRONT_CLIP_NOT_AT_EYE=16]="FRONT_CLIP_NOT_AT_EYE",ec$1[ec$1.UCS_ICON_VISIBILITY=32]="UCS_ICON_VISIBILITY",ec$1[ec$1.UCS_ICON_AT_ORIGIN=64]="UCS_ICON_AT_ORIGIN",ec$1[ec$1.FAST_ZOOM=128]="FAST_ZOOM",ec$1[ec$1.SNAP_MODE=256]="SNAP_MODE",ec$1[ec$1.GRID_MODE=512]="GRID_MODE",ec$1[ec$1.ISOMETRIC_SNAP_STYLE=1024]="ISOMETRIC_SNAP_STYLE",ec$1[ec$1.HIDE_PLOT_MODE=2048]="HIDE_PLOT_MODE",ec$1[ec$1.K_ISO_PAIR_TOP=4096]="K_ISO_PAIR_TOP",ec$1[ec$1.K_ISO_PAIR_RIGHT=8192]="K_ISO_PAIR_RIGHT",ec$1[ec$1.VIEWPORT_ZOOM_LOCKING=16384]="VIEWPORT_ZOOM_LOCKING",ec$1[ec$1.UNUSED=32768]="UNUSED",ec$1[ec$1.NON_RECTANGULAR_CLIPPING=65536]="NON_RECTANGULAR_CLIPPING",ec$1[ec$1.VIEWPORT_OFF=131072]="VIEWPORT_OFF",ec$1[ec$1.GRID_BEYOND_DRAWING_LIMITS=262144]="GRID_BEYOND_DRAWING_LIMITS",ec$1[ec$1.ADAPTIVE_GRID_DISPLAY=524288]="ADAPTIVE_GRID_DISPLAY",ec$1[ec$1.SUBDIVISION_BELOW_SPACING=1048576]="SUBDIVISION_BELOW_SPACING",ec$1[ec$1.GRID_FOLLOWS_WORKPLANE=2097152]="GRID_FOLLOWS_WORKPLANE",(el=ew||(ew={}))[el.OPTIMIZED_2D=0]="OPTIMIZED_2D",el[el.WIREFRAME=1]="WIREFRAME",el[el.HIDDEN_LINE=2]="HIDDEN_LINE",el[el.FLAT_SHADED=3]="FLAT_SHADED",el[el.GOURAUD_SHADED=4]="GOURAUD_SHADED",el[el.FLAT_SHADED_WITH_WIREFRAME=5]="FLAT_SHADED_WITH_WIREFRAME",el[el.GOURAUD_SHADED_WITH_WIREFRAME=6]="GOURAUD_SHADED_WITH_WIREFRAME",(ed=eV||(eV={}))[ed.UCS_UNCHANGED=0]="UCS_UNCHANGED",ed[ed.HAS_OWN_UCS=1]="HAS_OWN_UCS",(eu=eB||(eB={}))[eu.NON_ORTHOGRAPHIC=0]="NON_ORTHOGRAPHIC",eu[eu.TOP=1]="TOP",eu[eu.BOTTOM=2]="BOTTOM",eu[eu.FRONT=3]="FRONT",eu[eu.BACK=4]="BACK",eu[eu.LEFT=5]="LEFT",eu[eu.RIGHT=6]="RIGHT",(ep=eH||(eH={}))[ep.AS_DISPLAYED=0]="AS_DISPLAYED",ep[ep.WIREFRAME=1]="WIREFRAME",ep[ep.HIDDEN=2]="HIDDEN",ep[ep.RENDERED=3]="RENDERED",(em=eG||(eG={}))[em.ONE_DISTANT_LIGHT=0]="ONE_DISTANT_LIGHT",em[em.TWO_DISTANT_LIGHTS=1]="TWO_DISTANT_LIGHTS";let l$1=Symbol();function d(le,oe){return(ie,ue,de)=>{let he=le.reduce((Ce,xe)=>{xe.pushContext&&Ce.push({});let Ie=Ce[Ce.length-1];for(let $e of typeof xe.code=="number"?[xe.code]:xe.code){let Ne=Ie[$e]??(Ie[$e]=[]);xe.isMultiple&&Ne.length,Ne.push(xe)}return Ce},[{}]),pe=!1,_e=he.length-1;for(;!i$1$1(ie,0,"EOF");){let Ce=function(Fe,Ve,ze){return Fe.find((Ue,Pt)=>{var qe;return Pt>=ze&&((qe=Ue[Ve])==null?void 0:qe.length)})}(he,ie.code,_e),xe=Ce==null?void 0:Ce[ie.code].at(-1);if(!Ce||!xe){ue.rewind();break}xe.isMultiple||Ce[ie.code].pop();let{name:Ie,parser:$e,isMultiple:Ne}=xe,Oe=$e==null?void 0:$e(ie,ue,de);if(Oe===l$1){ue.rewind();break}if(Ie){let[Fe,Ve]=function(ze,Ue){let Pt=Ue.split("."),qe=ze;for(let Et=0;Et<Pt.length-1;++Et){let kt=Pt[Et];Object.hasOwn(qe,kt)||(qe[kt]={}),qe=qe[kt]}return[qe,Pt.at(-1)]}(de,Ie);Ne?(Object.hasOwn(Fe,Ve)||(Fe[Ve]=[]),Fe[Ve].push(Oe)):Fe[Ve]=Oe}xe.pushContext&&(_e-=1),pe=!0,ie=ue.next()}return oe&&Object.setPrototypeOf(de,oe),pe}}function u$1({value:le}){return le}function p$1(le,oe){return c$2(oe)}function m$2({value:le}){return!!le}var E,I,h$1$1,f$1,b,T$1,D,O$1,S,N$1,g,_$1,L,A,y$1,P,C,M,v$1,R,k,x$1,F,w,V,B,H,G,U,Y,W,j,X,z,K,Z,J,$$f,q,Q,ee,ea,er,et$1,en,eo,es,ei,ec$1,el,ed,eu,ep,em,eE,eI,eh,ef,eb,eT,eD,eO,eS,eN,eg,e_,eL,eA,ey,eP,eC,eM,ev,eR,ek,ex,eF,ew,eV,eB,eH,eG,eU,eY,eW,ej,eX,ez,eK,eZ,eJ,e$,eq,eQ,e0,e1,e4,e2,e3,e7,e5,e6,e9=[0,16711680,16776960,65280,65535,255,16711935,16777215,8421504,12632256,16711680,16744319,13369344,13395558,10027008,10046540,8323072,8339263,4980736,4990502,16727808,16752511,13382400,13401958,10036736,10051404,8331008,8343359,4985600,4992806,16744192,16760703,13395456,13408614,10046464,10056268,8339200,8347455,4990464,4995366,16760576,16768895,13408512,13415014,10056192,10061132,8347392,8351551,4995328,4997670,16776960,16777087,13421568,13421670,10000384,10000460,8355584,8355647,5000192,5000230,12582656,14679935,10079232,11717734,7510016,8755276,6258432,7307071,3755008,4344870,8388352,12582783,6736896,10079334,5019648,7510092,4161280,6258495,2509824,3755046,4194048,10485631,3394560,8375398,2529280,6264908,2064128,5209919,1264640,3099686,65280,8388479,52224,6736998,38912,5019724,32512,4161343,19456,2509862,65343,8388511,52275,6737023,38950,5019743,32543,4161359,19475,2509871,65407,8388543,52326,6737049,38988,5019762,32575,4161375,19494,2509881,65471,8388575,52377,6737074,39026,5019781,32607,4161391,19513,2509890,65535,8388607,52428,6737100,39064,5019800,32639,4161407,19532,2509900,49151,8380415,39372,6730444,29336,5014936,24447,4157311,14668,2507340,32767,8372223,26316,6724044,19608,5010072,16255,4153215,9804,2505036,16383,8364031,13260,6717388,9880,5005208,8063,4149119,4940,2502476,255,8355839,204,6710988,152,5000344,127,4145023,76,2500172,4129023,10452991,3342540,8349388,2490520,6245528,2031743,5193599,1245260,3089996,8323327,12550143,6684876,10053324,4980888,7490712,4128895,6242175,2490444,3745356,12517631,14647295,10027212,11691724,7471256,8735896,6226047,7290751,3735628,4335180,16711935,16744447,13369548,13395660,9961624,9981080,8323199,8339327,4980812,4990540,16711871,16744415,13369497,13395634,9961586,9981061,8323167,8339311,4980793,4990530,16711807,16744383,13369446,13395609,9961548,9981042,8323135,8339295,4980774,4990521,16711743,16744351,13369395,13395583,9961510,9981023,8323103,8339279,4980755,4990511,3355443,5987163,8684676,11382189,14079702,16777215];function e8(le,oe){var ie;if(!i$1$1(le,1001))throw Error("XData must starts with code 1001");let ue={appName:le.value,value:[]};le=oe.next();let de=[ue.value];for(;!i$1$1(le,0,"EOF")&&le.code>=1e3;){let he=de.at(-1);switch(le.code){case 1002:le.value==="{"?de.push([]):(de.pop(),(ie=de.at(-1))==null||ie.push(he));break;case 1e3:case 1004:case 1040:case 1070:case 1071:he.push({type:ae(le.code),value:le.value});break;case 1003:he.push({name:"layer",type:ae(le.code),value:le.value});break;case 1005:he.push({name:"handle",type:ae(le.code),value:le.value});break;case 1010:he.push({type:ae(le.code),value:c$2(oe)});break;case 1011:he.push({name:"worldSpacePosition",type:ae(le.code),value:c$2(oe)});break;case 1012:he.push({name:"worldSpaceDisplacement",type:ae(le.code),value:c$2(oe)});break;case 1013:he.push({name:"worldSpaceDirection",type:ae(le.code),value:c$2(oe)});break;case 1041:he.push({name:"distance",type:ae(le.code),value:le.value});break;case 1042:he.push({name:"scale",type:ae(le.code),value:le.value})}le=oe.next()}return oe.rewind(),ue}function ae(le){switch(le){case 1e3:case 1003:case 1005:return"string";case 1004:return"hex";case 1040:case 1041:case 1042:return"real";case 1070:return"integer";case 1071:return"long";case 1010:case 1011:case 1012:case 1013:return"point";default:return""}}function aa(le,oe,ie){if(i$1$1(oe,102))return ao(oe,ie),!0;switch(oe.code){case 0:le.type=oe.value;break;case 5:le.handle=oe.value;break;case 330:le.ownerDictionarySoftId?le.ownerBlockRecordSoftId=oe.value:le.ownerDictionarySoftId=oe.value;break;case 360:le.ownerdictionaryHardId=oe.value;break;case 67:le.isInPaperSpace=!!oe.value;break;case 8:le.layer=oe.value;break;case 6:le.lineType=oe.value;break;case 347:le.materialObjectHardId=oe.value;break;case 62:le.colorIndex=oe.value,le.color=e9[Math.abs(oe.value)];break;case 370:le.lineweight=oe.value;break;case 48:le.lineTypeScale=oe.value;break;case 60:le.isVisible=!!oe.value;break;case 92:le.proxyByte=oe.value;break;case 310:le.proxyEntity=oe.value;break;case 100:break;case 420:le.color=oe.value;break;case 430:le.transparency=oe.value;break;case 390:le.plotStyleHardId=oe.value;break;case 284:le.shadowMode=oe.value;break;case 1001:le.xdata=e8(oe,ie);break;default:return!1}return!0}let ar=0;function at(le){if(!le)throw TypeError("entity cannot be undefined or null");le.handle||(le.handle=ar++)}(E=eU||(eU={}))[E.CAST_AND_RECEIVE=0]="CAST_AND_RECEIVE",E[E.CAST=1]="CAST",E[E.RECEIVE=2]="RECEIVE",E[E.IGNORE=3]="IGNORE";let an=[{code:1001,name:"xdata",parser:e8},{code:284,name:"shadowMode",parser:u$1},{code:390,name:"plotStyleHardId",parser:u$1},{code:440,name:"transparency",parser:u$1},{code:430,name:"colorName",parser:u$1},{code:420,name:"color",parser:u$1},{code:310,name:"proxyEntity",parser:u$1},{code:92,name:"proxyByte",parser:u$1},{code:60,name:"isVisible",parser:m$2},{code:48,name:"lineTypeScale",parser:u$1},{code:370,name:"lineweight",parser:u$1},{code:62,name:"colorIndex",parser(le,oe,ie){let ue=le.value;return ie.color=e9[Math.abs(ue)],ue}},{code:347,name:"materialObjectHardId",parser:u$1},{code:6,name:"lineType",parser:u$1},{code:8,name:"layer",parser:u$1},{code:410,name:"layoutTabName",parser:u$1},{code:67,name:"isInPaperSpace",parser:m$2},{code:100},{code:330,name:"ownerBlockRecordSoftId",parser:u$1},{code:102,parser:ao},{code:102,parser:ao},{code:102,parser:ao},{code:5,name:"handle",parser:u$1}];function ao(le,oe){for(le=oe.next();!i$1$1(le,102)&&!i$1$1(le,0,"EOF");)le=oe.next()}function as(le,oe,ie){return oe in le?Object.defineProperty(le,oe,{value:ie,enumerable:!0,configurable:!0,writable:!0}):le[oe]=ie,le}let ai={extrusionDirection:{x:0,y:0,z:1}},ac=[{code:210,name:"extrusionDirection",parser:p$1},{code:51,name:"endAngle",parser:u$1},{code:50,name:"startAngle",parser:u$1},{code:100,name:"subclassMarker",parser:u$1},{code:40,name:"radius",parser:u$1},{code:10,name:"center",parser:p$1},{code:39,name:"thickness",parser:u$1},{code:100},...an];class al{parseEntity(oe,ie){let ue={};return this.parser(ie,oe,ue),ue}constructor(){as(this,"parser",d(ac,ai))}}function ad(le,oe,ie){return oe in le?Object.defineProperty(le,oe,{value:ie,enumerable:!0,configurable:!0,writable:!0}):le[oe]=ie,le}as(al,"ForEntityName","ARC"),(I=eY||(eY={}))[I.NONE=0]="NONE",I[I.INVISIBLE=1]="INVISIBLE",I[I.CONSTANT=2]="CONSTANT",I[I.VERIFICATION_REQUIRED=4]="VERIFICATION_REQUIRED",I[I.PRESET=8]="PRESET",(h$1$1=eW||(eW={}))[h$1$1.MULTILINE=2]="MULTILINE",h$1$1[h$1$1.CONSTANT_MULTILINE=4]="CONSTANT_MULTILINE",(f$1=ej||(ej={}))[f$1.NONE=0]="NONE",f$1[f$1.MIRRORED_X=2]="MIRRORED_X",f$1[f$1.MIRRORED_Y=4]="MIRRORED_Y",(b=eX||(eX={}))[b.LEFT=0]="LEFT",b[b.CENTER=1]="CENTER",b[b.RIGHT=2]="RIGHT",b[b.ALIGNED=3]="ALIGNED",b[b.MIDDLE=4]="MIDDLE",b[b.FIT=5]="FIT",(T$1=ez||(ez={}))[T$1.BASELINE=0]="BASELINE",T$1[T$1.BOTTOM=1]="BOTTOM",T$1[T$1.MIDDLE=2]="MIDDLE",T$1[T$1.TOP=3]="TOP";let au={thickness:0,rotation:0,xScale:1,obliqueAngle:0,styleName:"STANDARD",generationFlag:0,halign:eX.LEFT,valign:ez.BASELINE,extrusionDirection:{x:0,y:0,z:1}},ap=[{code:73,name:"valign",parser:u$1},{code:100},{code:210,name:"extrusionDirection",parser:p$1},{code:11,name:"endPoint",parser:p$1},{code:72,name:"valign",parser:u$1},{code:72,name:"halign",parser:u$1},{code:71,name:"generationFlag",parser:u$1},{code:7,name:"styleName",parser:u$1},{code:51,name:"obliqueAngle",parser:u$1},{code:41,name:"xScale",parser:u$1},{code:50,name:"rotation",parser:u$1},{code:1,name:"text",parser:u$1},{code:40,name:"textHeight",parser:u$1},{code:10,name:"startPoint",parser:p$1},{code:39,name:"thickness",parser:u$1},{code:100,name:"subclassMarker",parser:u$1},...an];class am{parseEntity(oe,ie){let ue={};return this.parser(ie,oe,ue),ue}constructor(){ad(this,"parser",d(ap,au))}}function aE(le,oe,ie){return oe in le?Object.defineProperty(le,oe,{value:ie,enumerable:!0,configurable:!0,writable:!0}):le[oe]=ie,le}ad(am,"ForEntityName","TEXT");let aI={...au},ah=[{code:2},{code:40,name:"annotationScale",parser:u$1},{code:10,name:"alignmentPoint",parser:p$1},{code:340,name:"secondaryAttributesHardIds",isMultiple:!0,parser:u$1},{code:70,name:"numberOfSecondaryAttributes",parser:u$1},{code:70,name:"isReallyLocked",parser:m$2},{code:70,name:"mtextFlag",parser:u$1},{code:280,name:"isDuplicatedRecord",parser:m$2},{code:100},{code:280,name:"isLocked",parser:m$2},{code:74,name:"valign",parser:u$1},{code:73},{code:70,name:"attributeFlag",parser:u$1},{code:2,name:"tag",parser:u$1},{code:3,name:"prompt",parser:u$1},{code:280},{code:100,name:"subclassMarker",parser:u$1},...ap.slice(2)];class af{parseEntity(oe,ie){let ue={};return this.parser(ie,oe,ue),ue}constructor(){aE(this,"parser",d(ah,aI))}}function ab(le,oe,ie){return oe in le?Object.defineProperty(le,oe,{value:ie,enumerable:!0,configurable:!0,writable:!0}):le[oe]=ie,le}aE(af,"ForEntityName","ATTDEF");let aT={thickness:0,extrusionDirection:{x:0,y:0,z:1}},aD=[{code:210,name:"extrusionDirection",parser:p$1},{code:40,name:"radius",parser:u$1},{code:10,name:"center",parser:p$1},{code:39,name:"thickness",parser:u$1},{code:100,name:"subclassMarker",parser:u$1},...an];class aO{parseEntity(oe,ie){let ue={};return this.parser(ie,oe,ue),ue}constructor(){ab(this,"parser",d(aD,aT))}}ab(aO,"ForEntityName","CIRCLE");class aS{parseEntity(oe,ie){let ue={};for(;!i$1$1(ie,0,"EOF");){if(ie.code===0){oe.rewind();break}(function(de,he,pe){switch(he.code){case 100:de.subclassMarker=he.value;break;case 280:de.version=he.value;break;case 2:de.name=he.value;break;case 10:de.definitionPoint=c$2(pe);break;case 11:de.textPoint=c$2(pe);break;case 12:de.insertionPoint=c$2(pe);break;case 13:de.subDefinitionPoint1=c$2(pe);break;case 14:de.subDefinitionPoint2=c$2(pe);break;case 15:de.centerPoint=c$2(pe);break;case 16:de.arcPoint=c$2(pe);break;case 70:de.dimensionType=he.value;break;case 71:de.attachmentPoint=he.value;break;case 72:de.textLineSpacingStyle=he.value;break;case 40:de.leaderLength=he.value;break;case 41:de.textLineSpacingFactor=he.value;break;case 42:de.measurement=he.value;break;case 1:de.text=he.value;break;case 50:de.rotationAngle=he.value;break;case 52:de.obliqueAngle=he.value;break;case 53:de.textRotation=he.value;break;case 51:de.ocsRotation=he.value;break;case 210:de.extrusionDirection=c$2(pe);break;case 3:de.styleName=he.value;break;default:aa(de,he,pe)}})(ue,ie,oe),ie=oe.next()}return ue}}function aN(le,oe,ie){return oe in le?Object.defineProperty(le,oe,{value:ie,enumerable:!0,configurable:!0,writable:!0}):le[oe]=ie,le}O$1="DIMENSION",(D="ForEntityName")in aS?Object.defineProperty(aS,D,{value:O$1,enumerable:!0,configurable:!0,writable:!0}):aS[D]=O$1;let ag={extrusionDirection:{x:0,y:0,z:1}},a_=[{code:42,name:"endAngle",parser:u$1},{code:41,name:"startAngle",parser:u$1},{code:40,name:"axisRatio",parser:u$1},{code:210,name:"extrusionDirection",parser:p$1},{code:11,name:"majorAxisEndPoint",parser:p$1},{code:10,name:"center",parser:p$1},{code:100,name:"subclassMarker",parser:u$1},...an];class aL{parseEntity(oe,ie){let ue={};return this.parser(ie,oe,ue),ue}constructor(){aN(this,"parser",d(a_,ag))}}aN(aL,"ForEntityName","ELLIPSE");let aA=[{code:330,name:"sourceBoundaryObjects",parser:u$1,isMultiple:!0},{code:97,name:"numberOfSourceBoundaryObjects",parser:u$1}],ay=[{code:11,name:"end",parser:p$1},{code:10,name:"start",parser:p$1}],aP=[{code:73,name:"isCCW",parser:m$2},{code:51,name:"endAngle",parser:u$1},{code:50,name:"startAngle",parser:u$1},{code:40,name:"radius",parser:u$1},{code:10,name:"center",parser:p$1}],aC=[{code:73,name:"isCCW",parser:m$2},{code:51,name:"endAngle",parser:u$1},{code:50,name:"startAngle",parser:u$1},{code:40,name:"lengthOfMinorAxis",parser:u$1},{code:11,name:"end",parser:p$1},{code:10,name:"center",parser:p$1}],aM=[{code:13,name:"endTangent",parser:p$1},{code:12,name:"startTangent",parser:p$1},{code:11,name:"fitDatum",isMultiple:!0,parser:p$1},{code:97,name:"numberOfFitData",parser:u$1},{code:10,name:"controlPoints",isMultiple:!0,parser(le,oe){let ie={...c$2(oe),weight:1};return(le=oe.next()).code===42?ie.weight=le.value:oe.rewind(),ie}},{code:40,name:"knots",isMultiple:!0,parser:u$1},{code:96,name:"numberOfControlPoints",parser:u$1},{code:95,name:"numberOfKnots",parser:u$1},{code:74,name:"isPeriodic",parser:m$2},{code:73,name:"splineFlag",parser:u$1},{code:94,name:"degree",parser:u$1}],av={[ev.Line]:ay,[ev.Circular]:aP,[ev.Elliptic]:aC,[ev.Spline]:aM},aR=[...aA,{code:72,name:"edges",parser(le,oe){let ie={type:le.value},ue=d(av[ie.type]);if(!ue)throw Error(`Invalid edge type ${ie.type}`);return ue(le=oe.next(),oe,ie),ie},isMultiple:!0},{code:93,name:"numberOfEdges",parser:u$1}],ak=[...aA,{code:10,name:"vertices",parser(le,oe){let ie={...c$2(oe),bulge:0};return(le=oe.next()).code===42?ie.bulge=le.value:oe.rewind(),ie},isMultiple:!0},{code:93,name:"numberOfVertices",parser:u$1},{code:73,name:"isClosed",parser:m$2},{code:72,name:"hasBulge",parser:m$2}],ax=[{code:49,name:"dashLengths",parser:u$1,isMultiple:!0},{code:79,name:"numberOfDashLengths",parser:u$1},{code:45,name:"offset",parser:aF},{code:43,name:"base",parser:aF},{code:53,name:"angle",parser:u$1}];function aF(le,oe){let ie=le.code+1,ue={x:le.value,y:1};return(le=oe.next()).code===ie?ue.y=le.value:oe.rewind(),ue}function aw(le,oe,ie){return oe in le?Object.defineProperty(le,oe,{value:ie,enumerable:!0,configurable:!0,writable:!0}):le[oe]=ie,le}let aV={extrusionDirection:{x:0,y:0,z:1},gradientRotation:0,colorTint:0},aB=[{code:470},{code:463},{code:462,name:"colorTint",parser:u$1},{code:461,name:"gradientDefinition",parser:u$1},{code:460,name:"gradientRotation",parser:u$1},{code:453,name:"numberOfColors",parser:u$1},{code:452,name:"gradientColorFlag",parser:u$1},{code:451},{code:450,name:"gradientFlag",parser:u$1},{code:10,name:"seedPoints",parser:p$1,isMultiple:!0},{code:99},{code:11,name:"offsetVector",parser:p$1},{code:98,name:"numberOfSeedPoints",parser:u$1},{code:47,name:"pixelSize",parser:u$1},{code:53,name:"definitionLines",parser:function(le,oe){let ie={};return d(ax)(le,oe,ie),ie},isMultiple:!0},{code:78,name:"numberOfDefinitionLines",parser:u$1},{code:77,name:"isDouble",parser:m$2},{code:73,name:"isAnnotated",parser:m$2},{code:41,name:"patternScale",parser:u$1},{code:52,name:"patternAngle",parser:u$1},{code:76,name:"patternType",parser:u$1},{code:75,name:"hatchStyle",parser:u$1},{code:92,name:"boundaryPaths",parser:function(le,oe){let ie={boundaryPathTypeFlag:le.value},ue=ie.boundaryPathTypeFlag&eM.Polyline;return le=oe.next(),ue?d(ak)(le,oe,ie):d(aR)(le,oe,ie),ie},isMultiple:!0},{code:91,name:"numberOfBoundaryPaths",parser:u$1},{code:71,name:"associativity",parser:u$1},{code:63,name:"patternFillColor",parser:u$1},{code:70,name:"solidFill",parser:u$1},{code:2,name:"patternName",parser:u$1},{code:210,name:"extrusionDirection",parser:p$1},{code:10,name:"elevationPoint",parser:p$1},{code:100,name:"subclassMarker",parser:u$1,pushContext:!0},...an];class aH{parseEntity(oe,ie){let ue={};return this.parser(ie,oe,ue),ue}constructor(){aw(this,"parser",d(aB,aV))}}function aG(le,oe,ie){return oe in le?Object.defineProperty(le,oe,{value:ie,enumerable:!0,configurable:!0,writable:!0}):le[oe]=ie,le}aw(aH,"ForEntityName","HATCH");let aU={xScale:1,yScale:1,zScale:1,rotation:0,columnCount:0,rowCount:0,columnSpacing:0,rowSpacing:0,extrusionDirection:{x:0,y:0,z:1}},aY=[{code:210,name:"extrusionDirection",parser:p$1},{code:45,name:"rowSpacing",parser:u$1},{code:44,name:"columnSpacing",parser:u$1},{code:71,name:"rowCount",parser:u$1},{code:70,name:"columnCount",parser:u$1},{code:50,name:"rotation",parser:u$1},{code:43,name:"zScale",parser:u$1},{code:42,name:"yScale",parser:u$1},{code:41,name:"xScale",parser:u$1},{code:10,name:"insertionPoint",parser:p$1},{code:2,name:"name",parser:u$1},{code:66,name:"isVariableAttributes",parser:m$2},{code:100,name:"subclassMarker",parser:u$1},...an];class aW{parseEntity(oe,ie){let ue={};return this.parser(ie,oe,ue),ue}constructor(){aG(this,"parser",d(aY,aU))}}function aj(le,oe,ie){return oe in le?Object.defineProperty(le,oe,{value:ie,enumerable:!0,configurable:!0,writable:!0}):le[oe]=ie,le}aG(aW,"ForEntityName","INSERT");let aX={isArrowheadEnabled:!0},az=[{code:213,name:"offsetFromAnnotation",parser:p$1},{code:212,name:"offsetFromBlock",parser:p$1},{code:211,name:"horizontalDirection",parser:p$1},{code:210,name:"normal",parser:p$1},{code:340,name:"associatedAnnotation",parser:u$1},{code:77,name:"byBlockColor",parser:u$1},{code:10,name:"vertices",parser:p$1,isMultiple:!0},{code:76,name:"numberOfVertices",parser:u$1},{code:41,name:"textWidth",parser:u$1},{code:40,name:"textHeight",parser:u$1},{code:75,name:"isHooklineExists",parser:m$2},{code:74,name:"isHooklineSameDirection",parser:m$2},{code:73,name:"leaderCreationFlag",parser:u$1},{code:72,name:"isSpline",parser:m$2},{code:71,name:"isArrowheadEnabled",parser:m$2},{code:3,name:"styleName",parser:u$1},{code:100,name:"subclassMarker",parser:u$1},...an];class aK{parseEntity(oe,ie){let ue={};return this.parser(ie,oe,ue),ue}constructor(){aj(this,"parser",d(az,aX))}}function aZ(le,oe,ie){return oe in le?Object.defineProperty(le,oe,{value:ie,enumerable:!0,configurable:!0,writable:!0}):le[oe]=ie,le}aj(aK,"ForEntityName","LEADER"),(S=eK||(eK={}))[S.TextAnnotation=0]="TextAnnotation",S[S.ToleranceAnnotation=1]="ToleranceAnnotation",S[S.BlockReferenceAnnotation=2]="BlockReferenceAnnotation",S[S.NoAnnotation=3]="NoAnnotation";let aJ={thickness:0,extrusionDirection:{x:0,y:0,z:1}},a$=[{code:210,name:"extrusionDirection",parser:p$1},{code:11,name:"endPoint",parser:p$1},{code:10,name:"startPoint",parser:p$1},{code:39,name:"thickness",parser:u$1},{code:100,name:"subclassMarker",parser:u$1},...an];class aq{parseEntity(oe,ie){let ue={};return this.parser(ie,oe,ue),ue}constructor(){aZ(this,"parser",d(a$,aJ))}}aZ(aq,"ForEntityName","LINE"),(N$1=eZ||(eZ={}))[N$1.IS_CLOSED=1]="IS_CLOSED",N$1[N$1.PLINE_GEN=128]="PLINE_GEN";let aQ={flag:0,elevation:0,thickness:0,extrusionDirection:{x:0,y:0,z:1},vertices:[]},a0={bulge:0},a1=[{code:42,name:"bulge",parser:u$1},{code:41,name:"endWidth",parser:u$1},{code:40,name:"startWidth",parser:u$1},{code:91,name:"id",parser:u$1},{code:20,name:"y",parser:u$1},{code:10,name:"x",parser:u$1}],a4=[{code:210,name:"extrusionDirection",parser:p$1},{code:10,name:"vertices",isMultiple:!0,parser(le,oe){let ie={};return d(a1,a0)(le,oe,ie),ie}},{code:39,name:"thickness",parser:u$1},{code:38,name:"elevation",parser:u$1},{code:43,name:"constantWidth",parser:u$1},{code:70,name:"flag",parser:u$1},{code:90,name:"numberOfVertices",parser:u$1},{code:100,name:"subclassMarker",parser:u$1},...an];class a2{parseEntity(oe,ie){let ue={};return d(a4,aQ)(ie,oe,ue),ue}}function a3({seeds:le,spanner:oe,serializer:ie,iterationLimit:ue=1/0}){let de=new Set,he=0;return le.map(pe=>{let _e=[],Ce=[[pe,ie(pe)]];for(;Ce.length&&he++<ue;){let[xe,Ie]=Ce.pop();if(!de.has(Ie))for(let $e of(de.add(Ie),_e.push(xe),oe(xe)))Ce.push([$e,ie($e)])}return _e}).filter(pe=>pe.length)}function a7(le,oe){let ie={};for(let ue of le){let de=oe(ue);de!=null&&(ie[de]??(ie[de]=[]),ie[de].push(ue))}return ie}function*a5(le,oe=1/0,ie=1){for(let ue=le;ue!==oe;ue+=ie)yield ue}function a6(le){return{x:le.x??0,y:le.y??0,z:le.z??0}}function a9(le,oe,ie){return oe in le?Object.defineProperty(le,oe,{value:ie,enumerable:!0,configurable:!0,writable:!0}):le[oe]=ie,le}_$1="LWPOLYLINE",(g="ForEntityName")in a2?Object.defineProperty(a2,g,{value:_$1,enumerable:!0,configurable:!0,writable:!0}):a2[g]=_$1,(L=eJ||(eJ={}))[L.LEFT_TO_RIGHT=1]="LEFT_TO_RIGHT",L[L.TOP_TO_BOTTOM=3]="TOP_TO_BOTTOM",L[L.BY_STYLE=5]="BY_STYLE";let a8={textStyle:"STANDARD",extrusionDirection:{x:0,y:0,z:1},rotation:0},re=[{code:46,name:"annotationHeight",parser:u$1},{code:101,parser(le,oe){(function(ie){ie.rewind();let ue=ie.next();if(ue.code!==101)throw Error("Bad call for skipEmbeddedObject()");do ue=ie.next();while(ue.code!==0);ie.rewind()})(oe)}},{code:50,name:"columnHeight",parser:u$1},{code:49,name:"columnGutter",parser:u$1},{code:48,name:"columnWidth",parser:u$1},{code:79,name:"columnAutoHeight",parser:u$1},{code:78,name:"columnFlowReversed",parser:u$1},{code:76,name:"columnCount",parser:u$1},{code:75,name:"columnType",parser:u$1},{code:441,name:"backgroundFillTransparency",parser:u$1},{code:63,name:"backgroundFillColor",parser:u$1},{code:45,name:"fillBoxScale",parser:u$1},{code:[...a5(430,440)],name:"backgroundColor",parser:u$1},{code:[...a5(420,430)],name:"backgroundColor",parser:u$1},{code:90,name:"backgroundFill",parser:u$1},{code:44,name:"lineSpacing",parser:u$1},{code:73,name:"lineSpacingStyle",parser:u$1},{code:50,name:"rotation",parser:u$1},{code:43},{code:42},{code:11,name:"direction",parser:p$1},{code:210,name:"extrusionDirection",parser:p$1},{code:7,name:"styleName",parser:u$1},{code:3,name:"text",parser:(le,oe,ie)=>(ie.text??"")+le.value},{code:1,name:"text",parser:u$1},{code:72,name:"drawingDirection",parser:u$1},{code:71,name:"attachmentPoint",parser:u$1},{code:41,name:"width",parser:u$1},{code:40,name:"height",parser:u$1},{code:10,name:"insertionPoint",parser:p$1},{code:100,name:"subclassMarker",parser:u$1},...an];class ra{parseEntity(oe,ie){let ue={};return this.parser(ie,oe,ue),ue}constructor(){a9(this,"parser",d(re,a8))}}function rr(le,oe,ie){return oe in le?Object.defineProperty(le,oe,{value:ie,enumerable:!0,configurable:!0,writable:!0}):le[oe]=ie,le}a9(ra,"ForEntityName","MTEXT");let rt={thickness:0,extrusionDirection:{x:0,y:0,z:1},angle:0},rn=[{code:50,name:"angle",parser:u$1},{code:210,name:"extrusionDirection",parser:p$1},{code:39,name:"thickness",parser:u$1},{code:10,name:"position",parser:p$1},{code:100,name:"subclassMarker",parser:u$1},...an];class ro{parseEntity(oe,ie){let ue={};return this.parser(ie,oe,ue),ue}constructor(){rr(this,"parser",d(rn,rt))}}function rs(le,oe,ie){return oe in le?Object.defineProperty(le,oe,{value:ie,enumerable:!0,configurable:!0,writable:!0}):le[oe]=ie,le}rr(ro,"ForEntityName","POINT"),(A=e$||(e$={}))[A.CLOSED_POLYLINE=1]="CLOSED_POLYLINE",A[A.CURVE_FIT=2]="CURVE_FIT",A[A.SPLINE_FIT=4]="SPLINE_FIT",A[A.POLYLINE_3D=8]="POLYLINE_3D",A[A.POLYGON_3D=16]="POLYGON_3D",A[A.CLOSED_POLYGON=32]="CLOSED_POLYGON",A[A.POLYFACE=64]="POLYFACE",A[A.CONTINUOUS=128]="CONTINUOUS",(y$1=eq||(eq={}))[y$1.NONE=0]="NONE",y$1[y$1.QUADRATIC=5]="QUADRATIC",y$1[y$1.CUBIC=6]="CUBIC",y$1[y$1.BEZIER=8]="BEZIER",(P=eQ||(eQ={}))[P.CREATED_BY_CURVE_FIT=1]="CREATED_BY_CURVE_FIT",P[P.TANGENT_DEFINED=2]="TANGENT_DEFINED",P[P.NOT_USED=4]="NOT_USED",P[P.CREATED_BY_SPLINE_FIT=8]="CREATED_BY_SPLINE_FIT",P[P.SPLINE_CONTROL_POINT=16]="SPLINE_CONTROL_POINT",P[P.FOR_POLYLINE=32]="FOR_POLYLINE",P[P.FOR_POLYGON=64]="FOR_POLYGON",P[P.POLYFACE=128]="POLYFACE";let ri={startWidth:0,endWidth:0,bulge:0},rc=[{code:91,name:"id",parser:u$1},{code:[...a5(71,75)],name:"faces",isMultiple:!0,parser:u$1},{code:50,name:"tangentDirection",parser:u$1},{code:70,name:"flag",parser:u$1},{code:42,name:"bulge",parser:u$1},{code:41,name:"endWidth",parser:u$1},{code:40,name:"startWidth",parser:u$1},{code:30,name:"z",parser:u$1},{code:20,name:"y",parser:u$1},{code:10,name:"x",parser:u$1},{code:100,name:"subclassMarker",parser:u$1},{code:100},...an];class rl{parseEntity(oe,ie){let ue={};return this.parser(ie,oe,ue),ue}constructor(){rs(this,"parser",d(rc,ri))}}function rd(le,oe,ie){return oe in le?Object.defineProperty(le,oe,{value:ie,enumerable:!0,configurable:!0,writable:!0}):le[oe]=ie,le}rs(rl,"ForEntityName","VERTEX");let ru={thickness:0,flag:0,startWidth:0,endWidth:0,meshMVertexCount:0,meshNVertexCount:0,surfaceMDensity:0,surfaceNDensity:0,smoothType:0,extrusionDirection:{x:0,y:0,z:1},vertices:[]},rp=[{code:0,name:"vertices",isMultiple:!0,parser:(le,oe)=>i$1$1(le,0,"VERTEX")?(le=oe.next(),new rl().parseEntity(oe,le)):l$1},{code:210,name:"extrusionDirection",parser:p$1},{code:75,name:"smoothType",parser:u$1},{code:74,name:"surfaceNDensity",parser:u$1},{code:73,name:"surfaceMDensity",parser:u$1},{code:72,name:"meshNVertexCount",parser:u$1},{code:71,name:"meshMVertexCount",parser:u$1},{code:41,name:"endWidth",parser:u$1},{code:40,name:"startWidth",parser:u$1},{code:70,name:"flag",parser:u$1},{code:39,name:"thickness",parser:u$1},{code:30,name:"elevation",parser:u$1},{code:20},{code:10},{code:66},{code:100,name:"subclassMarker",parser:u$1},...an];class rm{parseEntity(oe,ie){let ue={};return this.parser(ie,oe,ue),ue}constructor(){rd(this,"parser",d(rp,ru))}}function rE(le,oe,ie){return oe in le?Object.defineProperty(le,oe,{value:ie,enumerable:!0,configurable:!0,writable:!0}):le[oe]=ie,le}rd(rm,"ForEntityName","POLYLINE");let rI={vertices:[],backLineVertices:[]},rh=[{code:360,name:"geometrySettingHardId",parser:u$1},{code:12,name:"backLineVertices",isMultiple:!0,parser:p$1},{code:93,name:"numberOfBackLineVertices",parser:u$1},{code:11,name:"vertices",isMultiple:!0,parser:p$1},{code:92,name:"verticesCount",parser:u$1},{code:[63,411],name:"indicatorColor",parser:u$1},{code:70,name:"indicatorTransparency",parser:u$1},{code:41,name:"bottomHeight",parser:u$1},{code:40,name:"topHeight",parser:u$1},{code:10,name:"verticalDirection",parser:p$1},{code:1,name:"name",parser:u$1},{code:91,name:"flag",parser:u$1},{code:90,name:"state",parser:u$1},{code:100,name:"subclassMarker",parser:u$1},...an];class rf{parseEntity(oe,ie){let ue={};return this.parser(ie,oe,ue),ue}constructor(){rE(this,"parser",d(rh,rI))}}function rb(le,oe,ie){return oe in le?Object.defineProperty(le,oe,{value:ie,enumerable:!0,configurable:!0,writable:!0}):le[oe]=ie,le}rE(rf,"ForEntityName","SECTION");let rT={points:[],thickness:0,extrusionDirection:{x:0,y:0,z:1}},rD=[{code:210,name:"extrusionDirection",parser:p$1},{code:39,name:"thickness",parser:u$1},{code:[...a5(10,14)],name:"points",isMultiple:!0,parser:p$1},{code:100,name:"subclassMarker",parser:u$1},...an];class rO{parseEntity(oe,ie){let ue={};return this.parser(ie,oe,ue),ue}constructor(){rb(this,"parser",d(rD,rT))}}function rS(le,oe,ie){return oe in le?Object.defineProperty(le,oe,{value:ie,enumerable:!0,configurable:!0,writable:!0}):le[oe]=ie,le}rb(rO,"ForEntityName","SOLID"),(C=e0||(e0={}))[C.NONE=0]="NONE",C[C.CLOSED=1]="CLOSED",C[C.PERIODIC=2]="PERIODIC",C[C.RATIONAL=4]="RATIONAL",C[C.PLANAR=8]="PLANAR",C[C.LINEAR=16]="LINEAR";let rN={knotTolerance:1e-6,controlTolerance:1e-6,fitTolerance:1e-9,knotValues:[],controlPoints:[],fitPoints:[]},rg=[{code:11,name:"fitPoints",isMultiple:!0,parser:p$1},{code:10,name:"controlPoints",isMultiple:!0,parser:p$1},{code:41,name:"weights",isMultiple:!0,parser:u$1},{code:40,name:"knots",isMultiple:!0,parser:u$1},{code:13,name:"endTangent",parser:p$1},{code:12,name:"startTangent",parser:p$1},{code:44,name:"fitTolerance",parser:u$1},{code:43,name:"controlTolerance",parser:u$1},{code:42,name:"knotTolerance",parser:u$1},{code:74,name:"numberOfFitPoints",parser:u$1},{code:73,name:"numberOfControlPoints",parser:u$1},{code:72,name:"numberOfKnots",parser:u$1},{code:71,name:"degree",parser:u$1},{code:70,name:"flag",parser:u$1},{code:210,name:"normal",parser:p$1},{code:100,name:"subclassMarker",parser:u$1},...an];class r_{parseEntity(oe,ie){let ue={};return this.parser(ie,oe,ue),ue}constructor(){rS(this,"parser",d(rg,rN))}}rS(r_,"ForEntityName","SPLINE");class rL{parseEntity(oe,ie){let ue={};for(;ie!=="EOF";){if(ie.code===0){oe.rewind();break}!function(de,he,pe){if(pe==="EOF")return!1;switch(pe.code){case 0:return!1;case 100:de.subclassMarker=pe.value;break;case 10:de.viewportCenter=a6(c$2(he));break;case 40:de.width=pe.value;break;case 41:de.height=pe.value;break;case 68:de.status=pe.value;break;case 69:de.viewportId=pe.value;break;case 12:de.displayCenter=c$2(he);break;case 13:de.snapBase=c$2(he);break;case 14:de.snapSpacing=c$2(he);break;case 15:de.gridSpacing=c$2(he);break;case 16:de.viewDirection=a6(c$2(he));break;case 17:de.targetPoint=a6(c$2(he));break;case 42:de.perspectiveLensLength=pe.value;break;case 43:de.frontClipZ=pe.value;break;case 44:de.backClipZ=pe.value;break;case 45:de.viewHeight=pe.value;break;case 50:de.snapAngle=pe.value;break;case 51:de.viewTwistAngle=pe.value;break;case 72:de.circleZoomPercent=pe.value;break;case 331:de.frozenLayerIds??(de.frozenLayerIds=[]),de.frozenLayerIds.push(pe.value);break;case 90:de.statusBitFlags=pe.value;break;case 340:de.clippingBoundaryId=pe.value;break;case 1:de.sheetName=pe.value;break;case 281:de.renderMode=pe.value;break;case 71:de.ucsPerViewport=pe.value;break;case 110:de.ucsOrigin=a6(c$2(he));break;case 111:de.ucsXAxis=a6(c$2(he));break;case 112:de.ucsYAxis=a6(c$2(he));break;case 345:de.ucsId=pe.value;break;case 346:de.ucsBaseId=pe.value;break;case 79:de.orthographicType=pe.value;break;case 146:de.elevation=pe.value;break;case 170:de.shadePlotMode=pe.value;break;case 61:de.majorGridFrequency=pe.value;break;case 332:de.backgroundId=pe.value;break;case 333:de.shadePlotId=pe.value;break;case 348:de.visualStyleId=pe.value;break;case 292:de.isDefaultLighting=!!pe.value;break;case 282:de.defaultLightingType=pe.value;break;case 141:de.brightness=pe.value;break;case 142:de.contrast=pe.value;break;case 63:case 421:case 431:de.ambientLightColor=pe.value;break;case 361:de.sunId=pe.value;break;case 335:case 343:case 344:case 91:de.softPointer=pe.value}return!0}(ue,oe,ie)&&aa(ue,ie,oe),ie=oe.next()}return ue}}function rA(le,oe,ie){return oe in le?Object.defineProperty(le,oe,{value:ie,enumerable:!0,configurable:!0,writable:!0}):le[oe]=ie,le}v$1="VIEWPORT",(M="ForEntityName")in rL?Object.defineProperty(rL,M,{value:v$1,enumerable:!0,configurable:!0,writable:!0}):rL[M]=v$1,(R=e1||(e1={}))[R.INVISIBLE=1]="INVISIBLE",R[R.CONSTANT=2]="CONSTANT",R[R.REQUIRE_VERIFICATION=4]="REQUIRE_VERIFICATION",R[R.PRESET=8]="PRESET";let ry={thickness:0,rotation:0,scale:1,obliqueAngle:0,textStyle:"STANDARD",textGenerationFlag:0,horizontalJustification:0,verticalJustification:0,extrusionDirection:{x:0,y:0,z:1}},rP=[...re.slice(re.findIndex(({name:le})=>le==="columnType"),re.findIndex(({name:le})=>le==="subclassMarker")+1),{code:100},{code:0,parser(le){if(!i$1$1(le,0,"MTEXT"))return l$1}},{code:2,name:"definitionTag",parser:u$1},{code:40,name:"annotationScale",parser:u$1},{code:10,name:"alignmentPoint",parser:p$1},{code:340,name:"secondaryAttributesHardId",parser:u$1},{code:70,name:"numberOfSecondaryAttributes",parser:u$1},{code:70,name:"isReallyLocked",parser:m$2},{code:70,name:"mtextFlag",parser:u$1},{code:280,name:"isDuplicatedEntriesKeep",parser:m$2},{code:100},{code:280,name:"lockPositionFlag",parser:m$2},{code:210,name:"extrusionDirection",parser:p$1},{code:11,name:"alignmentPoint",parser:p$1},{code:74,name:"verticalJustification",parser:u$1},{code:72,name:"horizontalJustification",parser:u$1},{code:71,name:"textGenerationFlag",parser:u$1},{code:7,name:"textStyle",parser:u$1},{code:51,name:"obliqueAngle",parser:u$1},{code:41,name:"scale",parser:u$1},{code:50,name:"rotation",parser:u$1},{code:73},{code:70,name:"attributeFlag",parser:u$1},{code:2,name:"tag",parser:u$1},{code:280},{code:100,name:"subclassMarker",parser:u$1},{code:1,name:"text",parser:u$1},{code:40,name:"textHeight",parser:u$1},{code:10,name:"startPoint",parser:p$1},{code:39,name:"thickness",parser:u$1},{code:100},...an];class rC{parseEntity(oe,ie){let ue={};return this.parser(ie,oe,ue),ue}constructor(){rA(this,"parser",d(rP,ry))}}rA(rC,"ForEntityName","ATTRIB");let rM=Object.fromEntries([al,af,rC,aO,aS,aL,aW,aK,aq,a2,ra,ro,rm,rf,rO,r_,am,aH,rL].map(le=>[le.ForEntityName,new le]));function rv(le,oe){let ie=[];for(;!i$1$1(le,0,"EOF");){if(le.code===0){if(le.value==="ENDBLK"||le.value==="ENDSEC"){oe.rewind();break}let ue=rM[le.value];if(ue){let de=le.value;le=oe.next();let he=ue.parseEntity(oe,le);he.type=de,at(he),ie.push(he)}}le=oe.next()}return ie}function rR(le,oe){let ie={};for(;!i$1$1(le,0,"EOF")&&!i$1$1(le,0,"ENDSEC");){if(i$1$1(le,0,"BLOCK")){let ue=rk(le=oe.next(),oe);at(ue),ue.name&&(ie[ue.name]=ue)}le=oe.next()}return ie}function rk(le,oe){let ie={};for(;!i$1$1(le,0,"EOF");){if(i$1$1(le,0,"ENDBLK")){for(le=oe.next();!i$1$1(le,0,"EOF");){if(i$1$1(le,100,"AcDbBlockEnd"))return ie;le=oe.next()}break}switch(le.code){case 1:ie.xrefPath=le.value;break;case 2:ie.name=le.value;break;case 3:ie.name2=le.value;break;case 5:ie.handle=le.value;break;case 8:ie.layer=le.value;break;case 10:ie.position=c$2(oe);break;case 67:ie.paperSpace=!!le.value&&le.value==1;break;case 70:le.value!==0&&(ie.type=le.value);break;case 100:break;case 330:ie.ownerHandle=le.value;break;case 0:ie.entities=rv(le,oe)}le=oe.next()}return ie}function rx(le,oe){let ie=null,ue={};for(;!i$1$1(le,0,"EOF")&&!i$1$1(le,0,"ENDSEC");)le.code===9?ie=le.value:le.code===10?ue[ie]=c$2(oe):ue[ie]=le.value,le=oe.next();return ue}let rF=[{code:333,name:"shadePlotId",parser:u$1},{code:149,name:"imageOriginY",parser:u$1},{code:148,name:"imageOriginX",parser:u$1},{code:147,name:"scaleFactor",parser:u$1},{code:78,name:"shadePlotCustomDPI",parser:u$1},{code:77,name:"shadePlotResolution",parser:u$1},{code:76,name:"shadePlotMode",parser:u$1},{code:75,name:"standardScaleType",parser:u$1},{code:7,name:"currentStyleSheet",parser:u$1},{code:74,name:"plotType",parser:u$1},{code:73,name:"plotRotation",parser:u$1},{code:72,name:"paperUnit",parser:u$1},{code:70,name:"layoutFlag",parser:u$1},{code:143,name:"printScaleDenominator",parser:u$1},{code:142,name:"printScaleNominator",parser:u$1},{code:141,name:"windowAreaYMax",parser:u$1},{code:140,name:"windowAreaYMin",parser:u$1},{code:49,name:"windowAreaXMax",parser:u$1},{code:48,name:"windowAreaXMin",parser:u$1},{code:47,name:"plotOriginY",parser:u$1},{code:46,name:"plotOriginX",parser:u$1},{code:45,name:"paperHeight",parser:u$1},{code:44,name:"paperWidth",parser:u$1},{code:43,name:"marginTop",parser:u$1},{code:42,name:"marginRight",parser:u$1},{code:41,name:"marginBottom",parser:u$1},{code:40,name:"marginLeft",parser:u$1},{code:6,name:"plotViewName",parser:u$1},{code:4,name:"paperSize",parser:u$1},{code:2,name:"configName",parser:u$1},{code:1,name:"pageSetupName",parser:u$1},{code:100,name:"subclassMarker",parser:u$1}];(k=e4||(e4={}))[k.INCHES=0]="INCHES",k[k.MILLIMETERS=1]="MILLIMETERS",k[k.PIXELS=2]="PIXELS",(x$1=e2||(e2={}))[x$1.LAST_SCREEN_DISPLAY=0]="LAST_SCREEN_DISPLAY",x$1[x$1.DRAWING_EXTENTS=1]="DRAWING_EXTENTS",x$1[x$1.DRAWING_LIMITS=2]="DRAWING_LIMITS",x$1[x$1.VIEW_SPECIFIED=3]="VIEW_SPECIFIED",x$1[x$1.WINDOW_SPECIFIED=4]="WINDOW_SPECIFIED",x$1[x$1.LAYOUT_INFORMATION=5]="LAYOUT_INFORMATION",(F=e3||(e3={}))[F.AS_DISPLAYED=0]="AS_DISPLAYED",F[F.WIREFRAME=1]="WIREFRAME",F[F.HIDDEN=2]="HIDDEN",F[F.RENDERED=3]="RENDERED",(w=e7||(e7={}))[w.DRAFT=0]="DRAFT",w[w.PREVIEW=1]="PREVIEW",w[w.NORMAL=2]="NORMAL",w[w.PRESENTATION=3]="PRESENTATION",w[w.MAXIMUM=4]="MAXIMUM",w[w.CUSTOM=5]="CUSTOM";let rw=[{code:333,name:"shadePlotId",parser:u$1},{code:346,name:"orthographicUcsId",parser:u$1},{code:345,name:"namedUcsId",parser:u$1},{code:331,name:"viewportId",parser:u$1},{code:330,name:"paperSpaceTableId",parser:u$1},{code:76,name:"orthographicType",parser:u$1},{code:17,name:"ucsYAxis",parser:p$1},{code:16,name:"ucsXAxis",parser:p$1},{code:13,name:"ucsOrigin",parser:p$1},{code:146,name:"elevation",parser:u$1},{code:15,name:"maxExtent",parser:p$1},{code:14,name:"minExtent",parser:p$1},{code:12,name:"insertionBase",parser:p$1},{code:11,name:"maxLimit",parser:p$1},{code:10,name:"minLimit",parser:p$1},{code:71,name:"tabOrder",parser:u$1},{code:70,name:"controlFlag",parser:u$1},{code:1,name:"layoutName",parser:u$1},{code:100,name:"subclassMarker",parser:u$1},...rF];(V=e5||(e5={}))[V.PSLTSCALE=1]="PSLTSCALE",V[V.LIMCHECK=2]="LIMCHECK";let rV=[{code:330,name:"ownerObjectId",parser:u$1},{code:102},{code:360,name:"ownerDictionaryIdHard",parser:u$1},{code:102},{code:102},{code:330,name:"ownerDictionaryIdSoft",parser:u$1},{code:102},{code:102},{code:102},{code:5,name:"handle",parser:u$1}],rB=[{code:3,name:"entries",parser:(le,oe)=>{let ie={name:le.value};return(le=oe.next()).code===350?ie.objectId=le.value:oe.rewind(),ie},isMultiple:!0},{code:281,name:"recordCloneFlag",parser:u$1},{code:280,name:"isHardOwned",parser:m$2},{code:100,name:"subclassMarker",parser:u$1}];function rH(le){return le.subclassMarker==="AcDbDictionary"}(B=e6||(e6={}))[B.NOT_APPLICABLE=0]="NOT_APPLICABLE",B[B.KEEP_EXISTING=1]="KEEP_EXISTING",B[B.USE_CLONE=2]="USE_CLONE",B[B.XREF_VALUE_NAME=3]="XREF_VALUE_NAME",B[B.VALUE_NAME=4]="VALUE_NAME",B[B.UNMANGLE_NAME=5]="UNMANGLE_NAME";let rG={LAYOUT:rw,PLOTSETTINGS:rF,DICTIONARY:rB};function rU(le,oe){let ie=[];for(;le.code!==0||!["EOF","ENDSEC"].includes(le.value);){let ue=le.value,de=rG[ue];if(le.code===0&&de!=null&&de.length){let he=d([...rV,...de]),pe={name:ue};he(le=oe.next(),oe,pe)?(ie.push(pe),le=oe.peek()):le=oe.next()}else le=oe.next()}return{byName:a7(ie,({name:ue})=>ue),byTree:function(ue){let de=Object.fromEntries(ue.map(he=>[he.handle,he]));for(let he of ue)(!rH(he)||he.ownerDictionaryIdSoft!=="0")&&(he.ownerDictionaryIdSoft&&(he.ownerDictionarySoft=de[he.ownerDictionaryIdSoft]),he.ownerDictionaryIdHard&&(he.ownerDictionaryHard=de[he.ownerDictionaryIdHard]),he.ownerObjectId&&(he.ownerObject=de[he.ownerObjectId])),function(pe,_e){rH(pe)&&pe.entries&&(pe.entries=Object.fromEntries(pe.entries.map(({name:Ce,objectId:xe})=>[Ce,_e[xe]])))}(he,de);return ue[0]}(ie)}}let rY=[{code:100,name:"subclassMarker",parser:u$1},{code:330,name:"ownerObjectId",parser:u$1},{code:102,parser(le,oe){for(;!i$1$1(le,0,"EOF")&&!i$1$1(le,102,"}");)le=oe.next()}},{code:5,name:"handle",parser:u$1}],rW=d([{code:310,name:"bmpPreview",parser:u$1},{code:281,name:"scalability",parser:u$1},{code:280,name:"explodability",parser:u$1},{code:70,name:"insertionUnits",parser:u$1},{code:340,name:"layoutObjects",parser:u$1},{code:2,name:"name",parser:u$1},{code:100,name:"subclassMarker",parser:u$1},...rY]),rj=d([...[{name:"DIMPOST",code:3},{name:"DIMAPOST",code:4},{name:"DIMBLK_OBSOLETE",code:5},{name:"DIMBLK1_OBSOLETE",code:6},{name:"DIMBLK2_OBSOLETE",code:7},{name:"DIMSCALE",code:40,defaultValue:1},{name:"DIMASZ",code:41,defaultValue:.25},{name:"DIMEXO",code:42,defaultValue:.625,defaultValueImperial:.0625},{name:"DIMDLI",code:43,defaultValue:3.75,defaultValueImperial:.38},{name:"DIMEXE",code:44,defaultValue:2.25,defaultValueImperial:.28},{name:"DIMRND",code:45,defaultValue:0},{name:"DIMDLE",code:46,defaultValue:0},{name:"DIMTP",code:47,defaultValue:0},{name:"DIMTM",code:48,defaultValue:0},{name:"DIMTXT",code:140,defaultValue:2.5,defaultValueImperial:.28},{name:"DIMCEN",code:141,defaultValue:2.5,defaultValueImperial:.09},{name:"DIMTSZ",code:142,defaultValue:0},{name:"DIMALTF",code:143,defaultValue:25.4},{name:"DIMLFAC",code:144,defaultValue:1},{name:"DIMTVP",code:145,defaultValue:0},{name:"DIMTFAC",code:146,defaultValue:1},{name:"DIMGAP",code:147,defaultValue:.625,defaultValueImperial:.09},{name:"DIMALTRND",code:148,defaultValue:0},{name:"DIMTOL",code:71,defaultValue:0,defaultValueImperial:1},{name:"DIMLIM",code:72,defaultValue:0},{name:"DIMTIH",code:73,defaultValue:0,defaultValueImperial:1},{name:"DIMTOH",code:74,defaultValue:0,defaultValueImperial:1},{name:"DIMSE1",code:75,defaultValue:0},{name:"DIMSE2",code:76,defaultValue:0},{name:"DIMTAD",code:77,defaultValue:eT.Above,defaultValueImperial:eT.Center},{name:"DIMZIN",code:78,defaultValue:eD.Trailing,defaultValueImperial:eD.Feet},{name:"DIMAZIN",code:79,defaultValue:eO.None},{name:"DIMALT",code:170,defaultValue:0},{name:"DIMALTD",code:171,defaultValue:3,defaultValueImperial:2},{name:"DIMTOFL",code:172,defaultValue:1,defaultValueImperial:0},{name:"DIMSAH",code:173,defaultValue:0},{name:"DIMTIX",code:174,defaultValue:0},{name:"DIMSOXD",code:175,defaultValue:0},{name:"DIMCLRD",code:176,defaultValue:0},{name:"DIMCLRE",code:177,defaultValue:0},{name:"DIMCLRT",code:178,defaultValue:0},{name:"DIMADEC",code:179},{name:"DIMUNIT",code:270},{name:"DIMDEC",code:271,defaultValue:2,defaultValueImperial:4},{name:"DIMTDEC",code:272,defaultValue:2,defaultValueImperial:4},{name:"DIMALTU",code:273,defaultValue:2},{name:"DIMALTTD",code:274,defaultValue:2,defaultValueImperial:4},{name:"DIMAUNIT",code:275,defaultValue:0},{name:"DIMFRAC",code:276,defaultValue:0},{name:"DIMLUNIT",code:277,defaultValue:2},{name:"DIMDSEP",code:278,defaultValue:",",defaultValueImperial:"."},{name:"DIMJUST",code:280,defaultValue:eS.Center},{name:"DIMSD1",code:281,defaultValue:0},{name:"DIMSD2",code:282,defaultValue:0},{name:"DIMTOLJ",code:283,defaultValue:eN.Center},{name:"DIMTZIN",code:284,defaultValue:eD.Trailing,defaultValueImperial:eD.Feet},{name:"DIMALTZ",code:285,defaultValue:eD.Trailing},{name:"DIMALTTZ",code:286,defaultValue:eD.Trailing},{name:"DIMFIT",code:287},{name:"DIMUPT",code:288,defaultValue:0},{name:"DIMATFIT",code:289,defaultValue:3},{name:"DIMTXSTY",code:340},{name:"DIMLDRBLK",code:341},{name:"DIMBLK",code:342},{name:"DIMBLK1",code:343},{name:"DIMBLK2",code:344},{name:"DIMLWD",code:371,defaultValue:-2},{name:"DIMLWD",code:372,defaultValue:-2}].map(le=>({...le,parser:u$1})),{code:70,name:"standardFlag",parser:u$1},{code:2,name:"name",parser:u$1},{code:100,name:"subclassMarker",parser:u$1},{code:105,name:"handle",parser:u$1},...rY.filter(le=>le.code!==5)]),rX=d([{code:347,name:"materialObjectId",parser:u$1},{code:390,name:"plotStyleNameObjectId",parser:u$1},{code:370,name:"lineweight",parser:u$1},{code:290,name:"isPlotting",parser:m$2},{code:6,name:"lineType",parser:u$1},{code:62,name:"colorIndex",parser:u$1},{code:70,name:"standardFlag",parser:u$1},{code:2,name:"name",parser:u$1},{code:100,name:"subclassMarker",parser:u$1},...rY]),rz=d([{code:9,name:"text",parser:u$1},{code:45,name:"offsetY",parser:u$1},{code:44,name:"offsetX",parser:u$1},{code:50,name:"rotation",parser:u$1},{code:46,name:"scale",parser:u$1},{code:340,name:"styleObjectId",parser:u$1},{code:75,name:"shapeNumber",parser:u$1},{code:74,name:"elementTypeFlag",parser:u$1},{code:49,name:"elementLength",parser:u$1}],{elementTypeFlag:0,elementLength:0}),rK={BLOCK_RECORD:rW,DIMSTYLE:rj,LAYER:rX,LTYPE:d([{code:49,name:"pattern",parser(le,oe){let ie={};return rz(le,oe,ie),ie},isMultiple:!0},{code:40,name:"totalPatternLength",parser:u$1},{code:73,name:"numberOfLineTypes",parser:u$1},{code:72,parser:u$1},{code:3,name:"description",parser:u$1},{code:70,name:"standardFlag",parser:u$1},{code:2,name:"name",parser:u$1},{code:100,name:"subclassMarker",parser:u$1},...rY]),STYLE:d([{code:1e3,name:"extendedFont",parser:u$1},{code:1001},{code:4,name:"bigFont",parser:u$1},{code:3,name:"font",parser:u$1},{code:42,name:"lastHeight",parser:u$1},{code:71,name:"textGenerationFlag",parser:u$1},{code:50,name:"obliqueAngle",parser:u$1},{code:41,name:"widthFactor",parser:u$1},{code:40,name:"fixedTextHeight",parser:u$1},{code:70,name:"standardFlag",parser:u$1},{code:2,name:"name",parser:u$1},{code:100,name:"subclassMarker",parser:u$1},...rY]),VPORT:d([{code:[63,421,431],name:"ambientColor",parser:u$1},{code:142,name:"contrast",parser:u$1},{code:141,name:"brightness",parser:u$1},{code:282,name:"defaultLightingType",parser:u$1},{code:292,name:"isDefaultLightingOn",parser:m$2},{code:348,name:"visualStyleObjectId",parser:u$1},{code:333,name:"shadePlotObjectId",parser:u$1},{code:332,name:"backgroundObjectId",parser:u$1},{code:61,name:"majorGridLines",parser:u$1},{code:170,name:"shadePlotSetting",parser:u$1},{code:146,name:"elevation",parser:u$1},{code:79,name:"orthographicType",parser:u$1},{code:112,name:"ucsYAxis",parser:p$1},{code:111,name:"ucsXAxis",parser:p$1},{code:110,name:"ucsOrigin",parser:p$1},{code:74,name:"ucsIconSetting",parser:u$1},{code:71,name:"viewMode",parser:u$1},{code:281,name:"renderMode",parser:u$1},{code:1,name:"styleSheet",parser:u$1},{code:[331,441],name:"frozenLayers",parser:u$1,isMultiple:!0},{code:72,name:"circleSides",parser:u$1},{code:51,name:"viewTwistAngle",parser:u$1},{code:50,name:"snapRotationAngle",parser:u$1},{code:45,name:"viewHeight",parser:u$1},{code:44,name:"backClippingPlane",parser:u$1},{code:43,name:"frontClippingPlane",parser:u$1},{code:42,name:"lensLength",parser:u$1},{code:17,name:"viewTarget",parser:p$1},{code:16,name:"viewDirectionFromTarget",parser:p$1},{code:15,name:"gridSpacing",parser:p$1},{code:14,name:"snapSpacing",parser:p$1},{code:13,name:"snapBasePoint",parser:p$1},{code:12,name:"center",parser:p$1},{code:11,name:"upperRightCorner",parser:p$1},{code:10,name:"lowerLeftCorner",parser:p$1},{code:70,name:"standardFlag",parser:u$1},{code:2,name:"name",parser:u$1},{code:100,name:"subclassMarker",parser:u$1},...rY])},rZ=d([{code:70,name:"maxNumberOfEntries",parser:u$1},{code:100,name:"subclassMarker",parser:u$1},{code:330,name:"ownerObjectId",parser:u$1},{code:102},{code:360,isMultiple:!0},{code:102},{code:5,name:"handle",parser:u$1},{code:2,name:"name",parser:u$1}]);function rJ(le,oe){var ie;let ue={};for(;!i$1$1(le,0,"EOF")&&!i$1$1(le,0,"ENDSEC");){if(i$1$1(le,0,"TABLE")){le=oe.next();let de={entries:[]};rZ(le,oe,de),ue[de.name]=de}if(i$1$1(le,0)&&!i$1$1(le,0,"ENDTAB")){let de=le.value;le=oe.next();let he=rK[de];if(!he){le=oe.next();continue}let pe={};he(le,oe,pe),(ie=ue[de])==null||ie.entries.push(pe)}le=oe.next()}return ue}function r$(le,oe,ie){return oe in le?Object.defineProperty(le,oe,{value:ie,enumerable:!0,configurable:!0,writable:!0}):le[oe]=ie,le}class rq{next(){if(!this.hasNext())return this._eof,{code:0,value:"EOF"};let oe=parseInt(this._data[this._pointer++],10),ie=rQ(oe,this._data[this._pointer++]),ue={code:oe,value:ie};return i$1$1(ue,0,"EOF")&&(this._eof=!0),this.lastReadGroup=ue,ue}peek(){if(!this.hasNext())throw this._eof?Error("Cannot call 'next' after EOF group has been read"):Error("Unexpected end of input: EOF group not read before end of file. Ended on code "+this._data[this._pointer]);let oe={code:parseInt(this._data[this._pointer]),value:0};return oe.value=rQ(oe.code,this._data[this._pointer+1]),oe}rewind(oe){oe=oe||1,this._pointer=this._pointer-2*oe}hasNext(){return!this._eof&&!(this._pointer>this._data.length-2)}isEOF(){return this._eof}constructor(oe){r$(this,"_pointer",void 0),r$(this,"_data",void 0),r$(this,"_eof",void 0),r$(this,"lastReadGroup",{code:0,value:0}),this._pointer=0,this._data=oe,this._eof=!1}}function rQ(le,oe){return le<=9?oe:le>=10&&le<=59?parseFloat(oe.trim()):le>=60&&le<=99?parseInt(oe.trim()):le>=100&&le<=109?oe:le>=110&&le<=149?parseFloat(oe.trim()):le>=160&&le<=179?parseInt(oe.trim()):le>=210&&le<=239?parseFloat(oe.trim()):le>=270&&le<=289?parseInt(oe.trim()):le>=290&&le<=299?function(ie){if(ie==="0")return!1;if(ie==="1")return!0;throw TypeError("String '"+ie+"' cannot be cast to Boolean type")}(oe.trim()):le>=300&&le<=369?oe:le>=370&&le<=389?parseInt(oe.trim()):le>=390&&le<=399?oe:le>=400&&le<=409?parseInt(oe.trim()):le>=410&&le<=419?oe:le>=420&&le<=429?parseInt(oe.trim()):le>=430&&le<=439?oe:le>=440&&le<=459?parseInt(oe.trim()):le>=460&&le<=469?parseFloat(oe.trim()):le>=470&&le<=481||le===999||le>=1e3&&le<=1009?oe:le>=1010&&le<=1059?parseFloat(oe.trim()):le>=1060&&le<=1071?parseInt(oe.trim()):oe}function r6(le){return le.type==="INSERT"||le.type==="DIMENSION"&&!!le.name}function r9(le,oe,ie){return oe in le?Object.defineProperty(le,oe,{value:ie,enumerable:!0,configurable:!0,writable:!0}):le[oe]=ie,le}class r8{constructor(){r9(this,"encoding","utf-8"),r9(this,"encodingFailureFatal",!1)}}class te extends EventTarget{parseSync(oe){let ie=new rq(oe.split(/\r\n|\r|\n/g));if(!ie.hasNext())throw Error("Empty file");return this.parseAll(ie)}parseStream(oe){let ie="",ue=this;return new Promise((de,he)=>{oe.on("data",pe=>{ie+=pe}),oe.on("end",()=>{try{let pe=ie.split(/\r\n|\r|\n/g),_e=new rq(pe);if(!_e.hasNext())throw Error("Empty file");de(ue.parseAll(_e))}catch(pe){he(pe)}}),oe.on("error",pe=>{he(pe)})})}async parseFromUrl(oe,ie){let ue=await fetch(oe,ie);if(!ue.body)return null;let de=ue.body.getReader(),he="";for(;;){let{done:pe,value:_e}=await de.read();if(pe){he+=this._decoder.decode(new ArrayBuffer(0),{stream:!1});break}he+=this._decoder.decode(_e,{stream:!0})}return this.parseSync(he)}parseAll(oe){let ie={header:{},blocks:{},entities:[],tables:{},objects:{byName:{},byTree:void 0}},ue=oe.next();for(;!i$1$1(ue,0,"EOF");)i$1$1(ue,0,"SECTION")&&(i$1$1(ue=oe.next(),2,"HEADER")?(ue=oe.next(),ie.header=rx(ue,oe)):i$1$1(ue,2,"BLOCKS")?(ue=oe.next(),ie.blocks=rR(ue,oe)):i$1$1(ue,2,"ENTITIES")?(ue=oe.next(),ie.entities=rv(ue,oe)):i$1$1(ue,2,"TABLES")?(ue=oe.next(),ie.tables=rJ(ue,oe)):i$1$1(ue,2,"OBJECTS")&&(ue=oe.next(),ie.objects=rU(ue,oe))),ue=oe.next();return function(de){let he=Object.entries(de.blocks),pe={};for(let[Ce,xe]of filter(([Ie,$e])=>{var Ne;return(Ne=$e.entities)==null?void 0:Ne.some(r6)},he))for(let Ie of xe.entities??[])r6(Ie)&&(pe[Ce]??(pe[Ce]=[]),pe[Ce].push(Ie.name));let _e=a3({seeds:[...map(({name:Ce})=>Ce,filter(r6,de.entities))],serializer:Ce=>Ce,spanner:Ce=>pe[Ce]??[]}).flat();return{...de,blocks:Object.fromEntries(_e.map(Ce=>[Ce,de.blocks[Ce]]))}}(ie)}constructor(oe=new r8){super(),r9(this,"_decoder",void 0),this._decoder=new TextDecoder(oe.encoding,{fatal:oe.encodingFailureFatal})}}class LoaderPlugin{constructor(oe){ve(this,"app"),this.app=oe}load(oe,ie){throw new Error("Method not implemented.")}}class Block{constructor(oe){ve(this,"data"),ve(this,"useCount"),ve(this,"nestedUseCount"),ve(this,"verticesCount"),ve(this,"offset"),ve(this,"renderEntities"),ve(this,"flatten"),ve(this,"bounds"),this.data=oe,this.useCount=0,this.nestedUseCount=0,this.verticesCount=0,this.offset=null,this.renderEntities=[],this.flatten=!1,this.bounds=null}SetFlatten(){return this.HasGeometry()?(this.flatten=this.useCount===1||this.useCount*this.verticesCount<=1024,this.flatten):!1}HasGeometry(){return this.offset!==null}RegisterInsert(oe){this.useCount++}RegisterNestedUse(oe){this.nestedUseCount++}DefinitionContext(){return new BlockContext(this,0)}InstantiationContext(){return new BlockContext(this,2)}UpdateBounds(oe){this.bounds===null?this.bounds={minX:oe.x,maxX:oe.x,minY:oe.y,maxY:oe.y}:(oe.x<this.bounds.minX?this.bounds.minX=oe.x:oe.x>this.bounds.maxX&&(this.bounds.maxX=oe.x),oe.y<this.bounds.minY?this.bounds.minY=oe.y:oe.y>this.bounds.maxY&&(this.bounds.maxY=oe.y))}}class BlockContext{constructor(oe,ie){ve(this,"block"),ve(this,"type"),ve(this,"origin"),ve(this,"transform"),this.block=oe,this.type=ie,this.origin=this.block.data.position,this.transform=new Matrix3$1}get name(){return this.block.data.name}TransformVertex(oe){const ie=new Vector2$1(oe.x,oe.y).applyMatrix3(this.transform);if(this.type!==0&&this.type!==1)throw new Error("Unexpected transform type");if(this.block.verticesCount++,this.block.offset===null){this.block.offset=ie;const ue=new Vector2$1;return this.block.UpdateBounds(ue),ue}return ie.sub(this.block.offset),this.block.UpdateBounds(ie),ie}GetInsertionTransform(oe){const ie=new Matrix3$1().translate(-this.origin.x,-this.origin.y),ue=oe.yScale||1,de=oe.xScale||1,he=-(oe.rotation||0)*Math.PI/180;let pe=oe.insertionPoint.x;const _e=oe.insertionPoint.y;if(ie.scale(de,ue),ie.rotate(he),ie.translate(pe,_e),oe.extrusionDirection&&oe.extrusionDirection.z<0&&ie.scale(-1,1),this.type!==2)return ie;const Ce=new Matrix3$1().translate(this.block.offset.x,this.block.offset.y);return ie.multiply(Ce)}NestedBlockContext(oe,ie){oe.RegisterNestedUse(this.block);const ue=new BlockContext(oe,1).GetInsertionTransform(ie),de=new BlockContext(this.block,1);return de.transform=new Matrix3$1().multiplyMatrices(this.transform,ue),de}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function __awaiter(le,oe,ie,ue){function de(he){return he instanceof ie?he:new ie(function(pe){pe(he)})}return new(ie||(ie=Promise))(function(he,pe){function _e(Ie){try{xe(ue.next(Ie))}catch($e){pe($e)}}function Ce(Ie){try{xe(ue.throw(Ie))}catch($e){pe($e)}}function xe(Ie){Ie.done?he(Ie.value):de(Ie.value).then(_e,Ce)}xe((ue=ue.apply(le,[])).next())})}class MapProvider{constructor(){this.name="",this.minZoom=0,this.maxZoom=20,this.bounds=[],this.center=[]}fetchTile(oe,ie,ue){return null}getMetaData(){return __awaiter(this,void 0,void 0,function*(){})}}class OpenStreetMapsProvider extends MapProvider{constructor(oe="https://a.tile.openstreetmap.org/"){super(),this.address=oe,this.format="png",this.maxZoom=19}fetchTile(oe,ie,ue){return new Promise((de,he)=>{const pe=document.createElement("img");pe.onload=function(){de(pe)},pe.onerror=function(){he()},pe.crossOrigin="Anonymous",pe.src=this.address+oe+"/"+ie+"/"+ue+"."+this.format})}}class CanvasUtils{static createOffscreenCanvas(oe,ie){if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(oe,ie);{let ue=document.createElement("canvas");return ue.width=oe,ue.height=ie,ue}}}class TextureUtils{static createFillTexture(oe="#000000",ie=1,ue=1){const de=CanvasUtils.createOffscreenCanvas(ie,ue),he=de.getContext("2d");he.fillStyle=oe,he.fillRect(0,0,ie,ue);const pe=new Texture(de);return pe.format=RGBAFormat,pe.magFilter=LinearFilter,pe.minFilter=LinearFilter,pe.generateMipmaps=!1,pe.needsUpdate=!0,pe}}class QuadTreePosition{}QuadTreePosition.root=-1;QuadTreePosition.topLeft=0;QuadTreePosition.topRight=1;QuadTreePosition.bottomLeft=2;QuadTreePosition.bottomRight=3;class MapNode extends Mesh{constructor(oe=null,ie=null,ue=QuadTreePosition.root,de=0,he=0,pe=0,_e=null,Ce=null){super(_e,Ce),this.mapView=null,this.parentNode=null,this.subdivided=!1,this.disposed=!1,this.nodesLoaded=0,this.childrenCache=null,this.isMesh=!0,this.mapView=ie,this.parentNode=oe,this.disposed=!1,this.location=ue,this.level=de,this.x=he,this.y=pe,this.initialize()}initialize(){return __awaiter(this,void 0,void 0,function*(){})}createChildNodes(){}subdivide(){const oe=this.mapView.maxZoom();this.children.length>0||this.level+1>oe||this.parentNode!==null&&this.parentNode.nodesLoaded<MapNode.childrens||(this.mapView.cacheTiles&&this.childrenCache!==null?(this.isMesh=!1,this.children=this.childrenCache,this.nodesLoaded=this.childrenCache.length):this.createChildNodes(),this.subdivided=!0)}simplify(){const oe=this.mapView.minZoom();if(!(this.level-1<oe)){if(this.mapView.cacheTiles)this.childrenCache=this.children;else for(let ie=0;ie<this.children.length;ie++)this.children[ie].dispose();this.subdivided=!1,this.isMesh=!0,this.children=[],this.nodesLoaded=0}}loadData(){return __awaiter(this,void 0,void 0,function*(){if(this.level<this.mapView.provider.minZoom||this.level>this.mapView.provider.maxZoom){this.material.map=MapNode.defaultTexture,this.material.needsUpdate=!0;return}try{const oe=yield this.mapView.provider.fetchTile(this.level,this.x,this.y);if(this.disposed)return;const ie=new Texture(oe);ie.generateMipmaps=!1,ie.format=RGBAFormat,ie.magFilter=LinearFilter,ie.minFilter=LinearFilter,ie.needsUpdate=!0,this.material.map=ie}catch{if(this.disposed)return;this.material.map=MapNode.defaultTexture}this.material.needsUpdate=!0})}nodeReady(){if(this.disposed){this.dispose();return}if(this.parentNode!==null){if(this.parentNode.nodesLoaded++,this.parentNode.nodesLoaded===MapNode.childrens){this.parentNode.subdivided===!0&&(this.parentNode.isMesh=!1);for(let oe=0;oe<this.parentNode.children.length;oe++)this.parentNode.children[oe].visible=!0}this.parentNode.nodesLoaded>MapNode.childrens}else this.visible=!0}dispose(){this.disposed=!0;const oe=this;try{const ie=oe.material;ie.dispose(),ie.map&&ie.map!==MapNode.defaultTexture&&ie.map.dispose()}catch{}try{oe.geometry.dispose()}catch{}}}MapNode.defaultTexture=TextureUtils.createFillTexture();MapNode.baseGeometry=null;MapNode.baseScale=null;MapNode.childrens=4;class MapNodeGeometry extends BufferGeometry{constructor(oe=1,ie=1,ue=1,de=1,he=!1,pe=10){super();const _e=[],Ce=[],xe=[],Ie=[];MapNodeGeometry.buildPlane(oe,ie,ue,de,_e,Ce,xe,Ie),he&&MapNodeGeometry.buildSkirt(oe,ie,ue,de,pe,_e,Ce,xe,Ie),this.setIndex(_e),this.setAttribute("position",new Float32BufferAttribute(Ce,3)),this.setAttribute("normal",new Float32BufferAttribute(xe,3)),this.setAttribute("uv",new Float32BufferAttribute(Ie,2))}static buildPlane(oe=1,ie=1,ue=1,de=1,he,pe,_e,Ce){const xe=oe/2,Ie=ie/2,$e=ue+1,Ne=de+1,Oe=oe/ue,Fe=ie/de;for(let Ve=0;Ve<Ne;Ve++){const ze=Ve*Fe-Ie;for(let Ue=0;Ue<$e;Ue++){const Pt=Ue*Oe-xe;pe.push(Pt,0,ze),_e.push(0,1,0),Ce.push(Ue/ue,1-Ve/de)}}for(let Ve=0;Ve<de;Ve++)for(let ze=0;ze<ue;ze++){const Ue=ze+$e*Ve,Pt=ze+$e*(Ve+1),qe=ze+1+$e*(Ve+1),Et=ze+1+$e*Ve;he.push(Ue,Pt,Et,Pt,qe,Et)}}static buildSkirt(oe=1,ie=1,ue=1,de=1,he,pe,_e,Ce,xe){const Ie=oe/2,$e=ie/2,Ne=ue+1,Oe=de+1,Fe=oe/ue,Ve=ie/de;let ze=_e.length/3;for(let Pt=0;Pt<Ne;Pt++){const qe=Pt*Fe-Ie,Et=-$e;_e.push(qe,-he,Et),Ce.push(0,1,0),xe.push(Pt/ue,1)}for(let Pt=0;Pt<ue;Pt++){const qe=Pt,Et=Pt+1,kt=Pt+ze,At=Pt+ze+1;pe.push(Et,kt,qe,Et,At,kt)}ze=_e.length/3;for(let Pt=0;Pt<Ne;Pt++){const qe=Pt*Fe-Ie,Et=de*Ve-$e;_e.push(qe,-he,Et),Ce.push(0,1,0),xe.push(Pt/ue,0)}let Ue=Ne*Oe-ue-1;for(let Pt=0;Pt<ue;Pt++){const qe=Ue+Pt,Et=Ue+Pt+1,kt=Pt+ze,At=Pt+ze+1;pe.push(qe,kt,Et,kt,At,Et)}ze=_e.length/3;for(let Pt=0;Pt<Oe;Pt++){const qe=Pt*Ve-$e,Et=-Ie;_e.push(Et,-he,qe),Ce.push(0,1,0),xe.push(0,1-Pt/de)}for(let Pt=0;Pt<de;Pt++){const qe=Pt*Oe,Et=(Pt+1)*Oe,kt=Pt+ze,At=Pt+ze+1;pe.push(qe,kt,Et,kt,At,Et)}ze=_e.length/3;for(let Pt=0;Pt<Oe;Pt++){const qe=Pt*Ve-$e,Et=ue*Fe-Ie;_e.push(Et,-he,qe),Ce.push(0,1,0),xe.push(1,1-Pt/de)}for(let Pt=0;Pt<de;Pt++){const qe=Pt*Oe+de,Et=(Pt+1)*Oe+de,kt=Pt+ze,At=Pt+ze+1;pe.push(Et,kt,qe,Et,At,kt)}}}class Geolocation{constructor(oe,ie){this.latitude=oe,this.longitude=ie}}class UnitsUtils{static datumsToSpherical(oe,ie){const ue=ie*UnitsUtils.EARTH_ORIGIN/180;let de=Math.log(Math.tan((90+oe)*Math.PI/360))/(Math.PI/180);return de=de*UnitsUtils.EARTH_ORIGIN/180,new Vector2$1(ue,de)}static sphericalToDatums(oe,ie){const ue=oe/UnitsUtils.EARTH_ORIGIN*180;let de=ie/UnitsUtils.EARTH_ORIGIN*180;return de=180/Math.PI*(2*Math.atan(Math.exp(de*Math.PI/180))-Math.PI/2),new Geolocation(de,ue)}static quadtreeToDatums(oe,ie,ue){const de=Math.pow(2,oe),he=ie/de*360-180,pe=180*(Math.atan(Math.sinh(Math.PI*(1-2*ue/de)))/Math.PI);return new Geolocation(pe,he)}static vectorToDatums(oe){const ie=180/Math.PI,ue=Math.atan2(oe.y,Math.sqrt(Math.pow(oe.x,2)+Math.pow(-oe.z,2)))*ie,de=Math.atan2(-oe.z,oe.x)*ie;return new Geolocation(ue,de)}static datumsToVector(oe,ie){const ue=Math.PI/180,de=ie*ue,he=oe*ue;var pe=Math.cos(he);return new Vector3$1(-Math.cos(de+Math.PI)*pe,Math.sin(he),Math.sin(de+Math.PI)*pe)}static mapboxAltitude(oe){return(oe.r*255*65536+oe.g*255*256+oe.b*255)*.1-1e4}}UnitsUtils.EARTH_RADIUS=6371008;UnitsUtils.EARTH_RADIUS_A=6378137;UnitsUtils.EARTH_RADIUS_B=6356752314245e-6;UnitsUtils.EARTH_PERIMETER=2*Math.PI*UnitsUtils.EARTH_RADIUS;UnitsUtils.EARTH_ORIGIN=UnitsUtils.EARTH_PERIMETER/2;class MapPlaneNode extends MapNode{constructor(oe=null,ie=null,ue=QuadTreePosition.root,de=0,he=0,pe=0){super(oe,ie,ue,de,he,pe,MapPlaneNode.geometry,new MeshBasicMaterial({wireframe:!1})),this.matrixAutoUpdate=!1,this.isMesh=!0,this.visible=!1}initialize(){const oe=Object.create(null,{initialize:{get:()=>super.initialize}});return __awaiter(this,void 0,void 0,function*(){oe.initialize.call(this),yield this.loadData(),this.nodeReady()})}createChildNodes(){const oe=this.level+1,ie=this.x*2,ue=this.y*2,de=Object.getPrototypeOf(this).constructor;let he=new de(this,this.mapView,QuadTreePosition.topLeft,oe,ie,ue);he.scale.set(.5,1,.5),he.position.set(-.25,0,-.25),this.add(he),he.updateMatrix(),he.updateMatrixWorld(!0),he=new de(this,this.mapView,QuadTreePosition.topRight,oe,ie+1,ue),he.scale.set(.5,1,.5),he.position.set(.25,0,-.25),this.add(he),he.updateMatrix(),he.updateMatrixWorld(!0),he=new de(this,this.mapView,QuadTreePosition.bottomLeft,oe,ie,ue+1),he.scale.set(.5,1,.5),he.position.set(-.25,0,.25),this.add(he),he.updateMatrix(),he.updateMatrixWorld(!0),he=new de(this,this.mapView,QuadTreePosition.bottomRight,oe,ie+1,ue+1),he.scale.set(.5,1,.5),he.position.set(.25,0,.25),this.add(he),he.updateMatrix(),he.updateMatrixWorld(!0)}raycast(oe,ie){this.isMesh===!0&&super.raycast(oe,ie)}}MapPlaneNode.geometry=new MapNodeGeometry(1,1,1,1,!1);MapPlaneNode.baseGeometry=MapPlaneNode.geometry;MapPlaneNode.baseScale=new Vector3$1(UnitsUtils.EARTH_PERIMETER,1,UnitsUtils.EARTH_PERIMETER);class MapNodeHeightGeometry extends BufferGeometry{constructor(oe=1,ie=1,ue=1,de=1,he=!1,pe=10,_e=null,Ce=!0){super();const xe=[],Ie=[],$e=[],Ne=[];MapNodeGeometry.buildPlane(oe,ie,ue,de,xe,Ie,$e,Ne);const Oe=_e.data;for(let Fe=0,Ve=0;Fe<Oe.length&&Ve<Ie.length;Fe+=4,Ve+=3){const ze=Oe[Fe],Ue=Oe[Fe+1],Pt=Oe[Fe+2],qe=(ze*65536+Ue*256+Pt)*.1-1e4;Ie[Ve+1]=qe}he&&MapNodeGeometry.buildSkirt(oe,ie,ue,de,pe,xe,Ie,$e,Ne),this.setIndex(xe),this.setAttribute("position",new Float32BufferAttribute(Ie,3)),this.setAttribute("normal",new Float32BufferAttribute($e,3)),this.setAttribute("uv",new Float32BufferAttribute(Ne,2)),Ce&&this.computeNormals(ue,de)}computeNormals(oe,ie){const ue=this.getAttribute("position");if(ue!==void 0){let de=this.getAttribute("normal");const he=ie*oe;for(let Ve=0;Ve<he;Ve++)de.setXYZ(Ve,0,0,0);const pe=new Vector3$1,_e=new Vector3$1,Ce=new Vector3$1,xe=new Vector3$1,Ie=new Vector3$1,$e=new Vector3$1,Ne=new Vector3$1,Oe=new Vector3$1,Fe=ie*oe*6;for(let Ve=0;Ve<Fe;Ve+=3){const ze=this.index.getX(Ve+0),Ue=this.index.getX(Ve+1),Pt=this.index.getX(Ve+2);pe.fromBufferAttribute(ue,ze),_e.fromBufferAttribute(ue,Ue),Ce.fromBufferAttribute(ue,Pt),Ne.subVectors(Ce,_e),Oe.subVectors(pe,_e),Ne.cross(Oe),xe.fromBufferAttribute(de,ze),Ie.fromBufferAttribute(de,Ue),$e.fromBufferAttribute(de,Pt),xe.add(Ne),Ie.add(Ne),$e.add(Ne),de.setXYZ(ze,xe.x,xe.y,xe.z),de.setXYZ(Ue,Ie.x,Ie.y,Ie.z),de.setXYZ(Pt,$e.x,$e.y,$e.z)}this.normalizeNormals(),de.needsUpdate=!0}}}class MapHeightNode extends MapNode{constructor(oe=null,ie=null,ue=QuadTreePosition.root,de=0,he=0,pe=0,_e=MapHeightNode.geometry,Ce=new MeshPhongMaterial({wireframe:!1,color:16777215})){super(oe,ie,ue,de,he,pe,_e,Ce),this.heightLoaded=!1,this.textureLoaded=!1,this.geometrySize=16,this.geometryNormals=!1,this.isMesh=!0,this.visible=!1,this.matrixAutoUpdate=!1}initialize(){const oe=Object.create(null,{initialize:{get:()=>super.initialize}});return __awaiter(this,void 0,void 0,function*(){oe.initialize.call(this),yield this.loadData(),yield this.loadHeightGeometry(),this.nodeReady()})}loadData(){const oe=Object.create(null,{loadData:{get:()=>super.loadData}});return __awaiter(this,void 0,void 0,function*(){yield oe.loadData.call(this),this.textureLoaded=!0})}loadHeightGeometry(){return __awaiter(this,void 0,void 0,function*(){if(this.mapView.heightProvider===null)throw new Error("GeoThree: MapView.heightProvider provider is null.");if(this.level<this.mapView.heightProvider.minZoom||this.level>this.mapView.heightProvider.maxZoom){this.geometry=MapPlaneNode.baseGeometry;return}try{const oe=yield this.mapView.heightProvider.fetchTile(this.level,this.x,this.y);if(this.disposed)return;const ie=CanvasUtils.createOffscreenCanvas(this.geometrySize+1,this.geometrySize+1),ue=ie.getContext("2d");ue.imageSmoothingEnabled=!1,ue.drawImage(oe,0,0,MapHeightNode.tileSize,MapHeightNode.tileSize,0,0,ie.width,ie.height);const de=ue.getImageData(0,0,ie.width,ie.height);this.geometry=new MapNodeHeightGeometry(1,1,this.geometrySize,this.geometrySize,!0,10,de,!0)}catch{if(this.disposed)return;this.geometry=MapPlaneNode.baseGeometry}this.heightLoaded=!0})}createChildNodes(){const oe=this.level+1,ie=Object.getPrototypeOf(this).constructor,ue=this.x*2,de=this.y*2;let he=new ie(this,this.mapView,QuadTreePosition.topLeft,oe,ue,de);he.scale.set(.5,1,.5),he.position.set(-.25,0,-.25),this.add(he),he.updateMatrix(),he.updateMatrixWorld(!0),he=new ie(this,this.mapView,QuadTreePosition.topRight,oe,ue+1,de),he.scale.set(.5,1,.5),he.position.set(.25,0,-.25),this.add(he),he.updateMatrix(),he.updateMatrixWorld(!0),he=new ie(this,this.mapView,QuadTreePosition.bottomLeft,oe,ue,de+1),he.scale.set(.5,1,.5),he.position.set(-.25,0,.25),this.add(he),he.updateMatrix(),he.updateMatrixWorld(!0),he=new ie(this,this.mapView,QuadTreePosition.bottomRight,oe,ue+1,de+1),he.scale.set(.5,1,.5),he.position.set(.25,0,.25),this.add(he),he.updateMatrix(),he.updateMatrixWorld(!0)}raycast(oe,ie){this.isMesh===!0&&super.raycast(oe,ie)}}MapHeightNode.tileSize=256;MapHeightNode.geometry=new MapNodeGeometry(1,1,1,1);MapHeightNode.baseGeometry=MapPlaneNode.geometry;MapHeightNode.baseScale=new Vector3$1(UnitsUtils.EARTH_PERIMETER,1,UnitsUtils.EARTH_PERIMETER);class MapSphereNodeGeometry extends BufferGeometry{constructor(oe,ie,ue,de,he,pe,_e){super();const Ce=pe+_e;let xe=0;const Ie=[],$e=new Vector3$1,Ne=new Vector3$1,Oe=[],Fe=[],Ve=[],ze=[];for(let Ue=0;Ue<=ue;Ue++){const Pt=[],qe=Ue/ue;for(let Et=0;Et<=ie;Et++){const kt=Et/ie;$e.x=-oe*Math.cos(de+kt*he)*Math.sin(pe+qe*_e),$e.y=oe*Math.cos(pe+qe*_e),$e.z=oe*Math.sin(de+kt*he)*Math.sin(pe+qe*_e),Fe.push($e.x,$e.y,$e.z),Ne.set($e.x,$e.y,$e.z).normalize(),Ve.push(Ne.x,Ne.y,Ne.z),ze.push(kt,1-qe),Pt.push(xe++)}Ie.push(Pt)}for(let Ue=0;Ue<ue;Ue++)for(let Pt=0;Pt<ie;Pt++){const qe=Ie[Ue][Pt+1],Et=Ie[Ue][Pt],kt=Ie[Ue+1][Pt],At=Ie[Ue+1][Pt+1];(Ue!==0||pe>0)&&Oe.push(qe,Et,At),(Ue!==ue-1||Ce<Math.PI)&&Oe.push(Et,kt,At)}this.setIndex(Oe),this.setAttribute("position",new Float32BufferAttribute(Fe,3)),this.setAttribute("normal",new Float32BufferAttribute(Ve,3)),this.setAttribute("uv",new Float32BufferAttribute(ze,2))}}class MapSphereNode extends MapNode{constructor(oe=null,ie=null,ue=QuadTreePosition.root,de=0,he=0,pe=0){super(oe,ie,ue,de,he,pe,MapSphereNode.createGeometry(de,he,pe),new MeshBasicMaterial({wireframe:!1})),this.applyScaleNode(),this.matrixAutoUpdate=!1,this.isMesh=!0,this.visible=!1}initialize(){const oe=Object.create(null,{initialize:{get:()=>super.initialize}});return __awaiter(this,void 0,void 0,function*(){oe.initialize.call(this),yield this.loadData(),this.nodeReady()})}static createGeometry(oe,ie,ue){const de=Math.pow(2,oe),he=40,pe=Math.floor(MapSphereNode.segments*(he/(oe+1))/he),_e=1/de*2*Math.PI,Ce=ie*_e,xe=1/de*Math.PI,Ie=ue*xe;return new MapSphereNodeGeometry(1,pe,pe,Ce,_e,Ie,xe)}applyScaleNode(){this.geometry.computeBoundingBox();const oe=this.geometry.boundingBox.clone().getCenter(new Vector3$1),ie=new Matrix4$1;ie.compose(new Vector3$1(-oe.x,-oe.y,-oe.z),new Quaternion$1,new Vector3$1(UnitsUtils.EARTH_RADIUS,UnitsUtils.EARTH_RADIUS,UnitsUtils.EARTH_RADIUS)),this.geometry.applyMatrix4(ie),this.position.copy(oe),this.updateMatrix(),this.updateMatrixWorld()}updateMatrix(){this.matrix.setPosition(this.position),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(oe=!1){(this.matrixWorldNeedsUpdate||oe)&&(this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1)}createChildNodes(){const oe=this.level+1,ie=this.x*2,ue=this.y*2,de=Object.getPrototypeOf(this).constructor;let he=new de(this,this.mapView,QuadTreePosition.topLeft,oe,ie,ue);this.add(he),he=new de(this,this.mapView,QuadTreePosition.topRight,oe,ie+1,ue),this.add(he),he=new de(this,this.mapView,QuadTreePosition.bottomLeft,oe,ie,ue+1),this.add(he),he=new de(this,this.mapView,QuadTreePosition.bottomRight,oe,ie+1,ue+1),this.add(he)}raycast(oe,ie){this.isMesh===!0&&super.raycast(oe,ie)}}MapSphereNode.baseGeometry=new MapSphereNodeGeometry(UnitsUtils.EARTH_RADIUS,64,64,0,2*Math.PI,0,Math.PI);MapSphereNode.baseScale=new Vector3$1(1,1,1);MapSphereNode.segments=80;class MapHeightNodeShader extends MapHeightNode{constructor(oe=null,ie=null,ue=QuadTreePosition.root,de=0,he=0,pe=0){const _e=MapHeightNodeShader.prepareMaterial(new MeshPhongMaterial({map:MapNode.defaultTexture,color:16777215}));super(oe,ie,ue,de,he,pe,MapHeightNodeShader.geometry,_e),this.frustumCulled=!1}static prepareMaterial(oe){return oe.userData={heightMap:{value:MapHeightNodeShader.defaultHeightTexture}},oe.onBeforeCompile=ie=>{for(const ue in oe.userData)ie.uniforms[ue]=oe.userData[ue];ie.vertexShader=`
			uniform sampler2D heightMap;
			`+ie.vertexShader,ie.vertexShader=ie.vertexShader.replace("#include <fog_vertex>",`
			#include <fog_vertex>
	
			// Calculate height of the title
			vec4 _theight = texture2D(heightMap, vUv);
			float _height = ((_theight.r * 255.0 * 65536.0 + _theight.g * 255.0 * 256.0 + _theight.b * 255.0) * 0.1) - 10000.0;
			vec3 _transformed = position + _height * normal;
	
			// Vertex position based on height
			gl_Position = projectionMatrix * modelViewMatrix * vec4(_transformed, 1.0);
			`)},oe}loadData(){const oe=Object.create(null,{loadData:{get:()=>super.loadData}});return __awaiter(this,void 0,void 0,function*(){yield oe.loadData.call(this),this.textureLoaded=!0})}loadHeightGeometry(){return __awaiter(this,void 0,void 0,function*(){if(this.mapView.heightProvider===null)throw new Error("GeoThree: MapView.heightProvider provider is null.");if(this.level<this.mapView.heightProvider.minZoom||this.level>this.mapView.heightProvider.maxZoom){this.material.map=MapHeightNodeShader.defaultTexture,this.material.needsUpdate=!0;return}try{const oe=yield this.mapView.heightProvider.fetchTile(this.level,this.x,this.y);if(this.disposed)return;const ie=new Texture(oe);ie.generateMipmaps=!1,ie.format=RGBAFormat,ie.magFilter=NearestFilter,ie.minFilter=NearestFilter,ie.needsUpdate=!0,this.material.userData.heightMap.value=ie}catch{if(this.disposed)return;this.material.userData.heightMap.value=MapHeightNodeShader.defaultHeightTexture}this.material.needsUpdate=!0,this.heightLoaded=!0})}raycast(oe,ie){this.isMesh===!0&&(this.geometry=MapPlaneNode.geometry,super.raycast(oe,ie),this.geometry=MapHeightNodeShader.geometry)}dispose(){super.dispose(),this.material.userData.heightMap.value&&this.material.userData.heightMap.value!==MapHeightNodeShader.defaultHeightTexture&&this.material.userData.heightMap.value.dispose()}}MapHeightNodeShader.defaultHeightTexture=TextureUtils.createFillTexture("#0186C0");MapHeightNodeShader.geometrySize=256;MapHeightNodeShader.geometry=new MapNodeGeometry(1,1,MapHeightNodeShader.geometrySize,MapHeightNodeShader.geometrySize,!0);MapHeightNodeShader.baseGeometry=MapPlaneNode.geometry;MapHeightNodeShader.baseScale=new Vector3$1(UnitsUtils.EARTH_PERIMETER,1,UnitsUtils.EARTH_PERIMETER);class LODRaycast{constructor(){this.subdivisionRays=1,this.thresholdUp=.6,this.thresholdDown=.15,this.raycaster=new Raycaster,this.mouse=new Vector2$1,this.powerDistance=!1,this.scaleDistance=!0}updateLOD(oe,ie,ue,de){const he=[];for(let pe=0;pe<this.subdivisionRays;pe++)this.mouse.set(Math.random()*2-1,Math.random()*2-1),this.raycaster.setFromCamera(this.mouse,ie),this.raycaster.intersectObjects(oe.children,!0,he);for(let pe=0;pe<he.length;pe++){const _e=he[pe].object;let Ce=he[pe].distance;if(this.powerDistance&&(Ce=Math.pow(Ce*2,_e.level)),this.scaleDistance){const xe=_e.matrixWorld.elements;Ce=new Vector3$1(xe[0],xe[1],xe[2]).length()/Ce}Ce>this.thresholdUp?_e.subdivide():Ce<this.thresholdDown&&_e.parentNode&&_e.parentNode.simplify()}}}class Martini{constructor(oe=257){this.gridSize=oe;const ie=oe-1;if(ie&ie-1)throw new Error(`Expected grid size to be 2^n+1, got ${oe}.`);this.numTriangles=ie*ie*2-2,this.numParentTriangles=this.numTriangles-ie*ie,this.indices=new Uint32Array(this.gridSize*this.gridSize),this.coords=new Uint16Array(this.numTriangles*4);for(let ue=0;ue<this.numTriangles;ue++){let de=ue+2,he=0,pe=0,_e=0,Ce=0,xe=0,Ie=0;for(de&1?_e=Ce=xe=ie:he=pe=Ie=ie;(de>>=1)>1;){const Ne=he+_e>>1,Oe=pe+Ce>>1;de&1?(_e=he,Ce=pe,he=xe,pe=Ie):(he=_e,pe=Ce,_e=xe,Ce=Ie),xe=Ne,Ie=Oe}const $e=ue*4;this.coords[$e+0]=he,this.coords[$e+1]=pe,this.coords[$e+2]=_e,this.coords[$e+3]=Ce}}createTile(oe){return new Tile(oe,this)}}class Tile{constructor(oe,ie){const ue=ie.gridSize;if(oe.length!==ue*ue)throw new Error(`Expected terrain data of length ${ue*ue} (${ue} x ${ue}), got ${oe.length}.`);this.terrain=oe,this.martini=ie,this.errors=new Float32Array(oe.length),this.update()}update(){const{numTriangles:oe,numParentTriangles:ie,coords:ue,gridSize:de}=this.martini,{terrain:he,errors:pe}=this;for(let _e=oe-1;_e>=0;_e--){const Ce=_e*4,xe=ue[Ce+0],Ie=ue[Ce+1],$e=ue[Ce+2],Ne=ue[Ce+3],Oe=xe+$e>>1,Fe=Ie+Ne>>1,Ve=Oe+Fe-Ie,ze=Fe+xe-Oe,Ue=(he[Ie*de+xe]+he[Ne*de+$e])/2,Pt=Fe*de+Oe,qe=Math.abs(Ue-he[Pt]);if(pe[Pt]=Math.max(pe[Pt],qe),_e<ie){const Et=(Ie+ze>>1)*de+(xe+Ve>>1),kt=(Ne+ze>>1)*de+($e+Ve>>1);pe[Pt]=Math.max(pe[Pt],pe[Et],pe[kt])}}}getMesh(oe=0,ie=!1){const{gridSize:ue,indices:de}=this.martini,{errors:he}=this;let pe=0,_e=0;const Ce=ue-1;let xe,Ie,$e=0;const Ne=[],Oe=[],Fe=[],Ve=[];de.fill(0);function ze(Dt,Lt,jt,_n,bn,vn){const Tn=Dt+jt>>1,$n=Lt+_n>>1;Math.abs(Dt-bn)+Math.abs(Lt-vn)>1&&he[$n*ue+Tn]>oe?(ze(bn,vn,Dt,Lt,Tn,$n),ze(jt,_n,bn,vn,Tn,$n)):(xe=Lt*ue+Dt,Ie=_n*ue+jt,$e=vn*ue+bn,de[xe]===0&&(ie&&(Dt===0?Ne.push(pe):Dt===Ce&&Oe.push(pe),Lt===0?Fe.push(pe):Lt===Ce&&Ve.push(pe)),de[xe]=++pe),de[Ie]===0&&(ie&&(jt===0?Ne.push(pe):jt===Ce&&Oe.push(pe),_n===0?Fe.push(pe):_n===Ce&&Ve.push(pe)),de[Ie]=++pe),de[$e]===0&&(ie&&(bn===0?Ne.push(pe):bn===Ce&&Oe.push(pe),vn===0?Fe.push(pe):vn===Ce&&Ve.push(pe)),de[$e]=++pe),_e++)}ze(0,0,Ce,Ce,Ce,0),ze(Ce,Ce,0,0,0,Ce);let Ue=pe*2,Pt=_e*3;ie&&(Ue+=(Ne.length+Oe.length+Fe.length+Ve.length)*2,Pt+=((Ne.length-1)*2+(Oe.length-1)*2+(Fe.length-1)*2+(Ve.length-1)*2)*3);const qe=new Uint16Array(Ue),Et=new Uint32Array(Pt);let kt=0;function At(Dt,Lt,jt,_n,bn,vn){const Tn=Dt+jt>>1,$n=Lt+_n>>1;if(Math.abs(Dt-bn)+Math.abs(Lt-vn)>1&&he[$n*ue+Tn]>oe)At(bn,vn,Dt,Lt,Tn,$n),At(jt,_n,bn,vn,Tn,$n);else{const wn=de[Lt*ue+Dt]-1,Cn=de[_n*ue+jt]-1,Sn=de[vn*ue+bn]-1;qe[2*wn]=Dt,qe[2*wn+1]=Lt,qe[2*Cn]=jt,qe[2*Cn+1]=_n,qe[2*Sn]=bn,qe[2*Sn+1]=vn,Et[kt++]=wn,Et[kt++]=Cn,Et[kt++]=Sn}}if(At(0,0,Ce,Ce,Ce,0),At(Ce,Ce,0,0,0,Ce),ie){let Dt=function(jt){const _n=jt.length;for(let bn=0;bn<_n-1;bn++){const vn=jt[bn],Tn=jt[bn+1],$n=Lt/2,wn=(Lt+2)/2;qe[Lt++]=qe[2*vn],qe[Lt++]=qe[2*vn+1],Et[kt++]=vn,Et[kt++]=$n,Et[kt++]=Tn,Et[kt++]=$n,Et[kt++]=wn,Et[kt++]=Tn}qe[Lt++]=qe[2*jt[_n-1]],qe[Lt++]=qe[2*jt[_n-1]+1]};Ne.sort((jt,_n)=>qe[2*jt+1]-qe[2*_n+1]),Oe.sort((jt,_n)=>qe[2*_n+1]-qe[2*jt+1]),Fe.sort((jt,_n)=>qe[2*_n]-qe[2*jt]),Ve.sort((jt,_n)=>qe[2*jt]-qe[2*_n]);let Lt=pe*2;Dt(Ne),Dt(Oe),Dt(Fe),Dt(Ve)}return{vertices:qe,triangles:Et,numVerticesWithoutSkirts:pe}}}class MapMartiniHeightNode extends MapHeightNode{constructor(oe=null,ie=null,ue=QuadTreePosition.root,de=0,he=0,pe=0,{elevationDecoder:_e=null,meshMaxError:Ce=10,exageration:xe=1}={}){super(oe,ie,ue,de,he,pe,MapMartiniHeightNode.geometry,MapMartiniHeightNode.prepareMaterial(new MeshPhongMaterial({map:MapMartiniHeightNode.emptyTexture,color:16777215,side:DoubleSide}),de,xe)),this.elevationDecoder={rScaler:256,gScaler:1,bScaler:1/256,offset:-32768},this.exageration=1,this.meshMaxError=10,_e&&(this.elevationDecoder=_e),this.meshMaxError=Ce,this.exageration=xe,this.frustumCulled=!1}static prepareMaterial(oe,ie,ue=1){return oe.userData={heightMap:{value:MapMartiniHeightNode.emptyTexture},drawNormals:{value:0},drawBlack:{value:0},zoomlevel:{value:ie},computeNormals:{value:1},drawTexture:{value:1}},oe.onBeforeCompile=de=>{for(let he in oe.userData)de.uniforms[he]=oe.userData[he];de.vertexShader=`
				uniform bool computeNormals;
				uniform float zoomlevel;
				uniform sampler2D heightMap;
				`+de.vertexShader,de.fragmentShader=`
				uniform bool drawNormals;
				uniform bool drawTexture;
				uniform bool drawBlack;
				`+de.fragmentShader,de.fragmentShader=de.fragmentShader.replace("#include <dithering_fragment>",`
				if(drawBlack) {
					gl_FragColor = vec4( 0.0,0.0,0.0, 1.0 );
				} else if(drawNormals) {
					gl_FragColor = vec4( ( 0.5 * vNormal + 0.5 ), 1.0 );
				} else if (!drawTexture) {
					gl_FragColor = vec4( 0.0,0.0,0.0, 0.0 );
				}`),de.vertexShader=de.vertexShader.replace("#include <fog_vertex>",`
				#include <fog_vertex>

				// queried pixels:
				// +-----------+
				// |   |   |   |
				// | a | b | c |
				// |   |   |   |
				// +-----------+
				// |   |   |   |
				// | d | e | f |
				// |   |   |   |
				// +-----------+
				// |   |   |   |
				// | g | h | i |
				// |   |   |   |
				// +-----------+

				if (computeNormals) {
					float e = getElevation(vUv, 0.0);
					ivec2 size = textureSize(heightMap, 0);
					float offset = 1.0 / float(size.x);
					float a = getElevation(vUv + vec2(-offset, -offset), 0.0);
					float b = getElevation(vUv + vec2(0, -offset), 0.0);
					float c = getElevation(vUv + vec2(offset, -offset), 0.0);
					float d = getElevation(vUv + vec2(-offset, 0), 0.0);
					float f = getElevation(vUv + vec2(offset, 0), 0.0);
					float g = getElevation(vUv + vec2(-offset, offset), 0.0);
					float h = getElevation(vUv + vec2(0, offset), 0.0);
					float i = getElevation(vUv + vec2(offset,offset), 0.0);


					float normalLength = 500.0 / zoomlevel;

					vec3 v0 = vec3(0.0, 0.0, 0.0);
					vec3 v1 = vec3(0.0, normalLength, 0.0);
					vec3 v2 = vec3(normalLength, 0.0, 0.0);
					v0.z = (e + d + g + h) / 4.0;
					v1.z = (e+ b + a + d) / 4.0;
					v2.z = (e+ h + i + f) / 4.0;
					vNormal = (normalize(cross(v2 - v0, v1 - v0))).rbg;
				}
				`)},oe}static getTerrain(oe,ie,ue){const{rScaler:de,bScaler:he,gScaler:pe,offset:_e}=ue,Ce=ie+1,xe=new Float32Array(Ce*Ce);for(let Ie=0,$e=0;$e<ie;$e++)for(let Ne=0;Ne<ie;Ne++,Ie++){const Oe=Ie*4,Fe=oe[Oe+0],Ve=oe[Oe+1],ze=oe[Oe+2];xe[Ie+$e]=Fe*de+Ve*pe+ze*he+_e}for(let Ie=Ce*(Ce-1),$e=0;$e<Ce-1;$e++,Ie++)xe[Ie]=xe[Ie-Ce];for(let Ie=Ce-1,$e=0;$e<Ce;$e++,Ie+=Ce)xe[Ie]=xe[Ie-1];return xe}static getMeshAttributes(oe,ie,ue,de,he){const pe=ue+1,_e=oe.length/2,Ce=new Float32Array(_e*3),xe=new Float32Array(_e*2),[Ie,$e,Ne,Oe]=de||[0,0,ue,ue],Fe=(Ne-Ie)/ue,Ve=(Oe-$e)/ue;for(let ze=0;ze<_e;ze++){const Ue=oe[ze*2],Pt=oe[ze*2+1],qe=Pt*pe+Ue;Ce[3*ze+0]=Ue*Fe+Ie,Ce[3*ze+1]=-ie[qe]*he,Ce[3*ze+2]=-Pt*Ve+Oe,xe[2*ze+0]=Ue/ue,xe[2*ze+1]=Pt/ue}return{position:{value:Ce,size:3},uv:{value:xe,size:2}}}processHeight(oe){return __awaiter(this,void 0,void 0,function*(){const ie=oe.width,ue=ie+1;var de=CanvasUtils.createOffscreenCanvas(ie,ie),he=de.getContext("2d");he.imageSmoothingEnabled=!1,he.drawImage(oe,0,0,ie,ie,0,0,de.width,de.height);var pe=he.getImageData(0,0,de.width,de.height),_e=pe.data;const Ce=MapMartiniHeightNode.getTerrain(_e,ie,this.elevationDecoder),xe=new Martini(ue).createTile(Ce),{vertices:Ie,triangles:$e}=xe.getMesh(typeof this.meshMaxError=="function"?this.meshMaxError(this.level):this.meshMaxError),Ne=MapMartiniHeightNode.getMeshAttributes(Ie,Ce,ie,[-.5,-.5,.5,.5],this.exageration);this.geometry=new BufferGeometry,this.geometry.setIndex(new Uint32BufferAttribute($e,1)),this.geometry.setAttribute("position",new Float32BufferAttribute(Ne.position.value,Ne.position.size)),this.geometry.setAttribute("uv",new Float32BufferAttribute(Ne.uv.value,Ne.uv.size)),this.geometry.rotateX(Math.PI);var Oe=new Texture(oe);Oe.generateMipmaps=!1,Oe.format=RGBAFormat,Oe.magFilter=NearestFilter,Oe.minFilter=NearestFilter,Oe.needsUpdate=!0,this.material.userData.heightMap.value=Oe,this.material.map=Oe,this.material.needsUpdate=!0})}loadHeightGeometry(){return __awaiter(this,void 0,void 0,function*(){if(this.mapView.heightProvider===null)throw new Error("GeoThree: MapView.heightProvider provider is null.");const oe=yield this.mapView.heightProvider.fetchTile(this.level,this.x,this.y);this.disposed||(this.processHeight(oe),this.heightLoaded=!0,this.nodeReady())})}}MapMartiniHeightNode.geometrySize=16;MapMartiniHeightNode.emptyTexture=new Texture;MapMartiniHeightNode.geometry=new MapNodeGeometry(1,1,1,1);MapMartiniHeightNode.tileSize=256;class MapView extends Mesh{constructor(oe=MapView.PLANAR,ie=new OpenStreetMapsProvider,ue=null){super(void 0,new MeshBasicMaterial({transparent:!0,opacity:0})),this.lod=null,this.provider=null,this.heightProvider=null,this.root=null,this.cacheTiles=!1,this.onBeforeRender=(de,he,pe,_e,Ce,xe)=>{this.lod.updateLOD(this,pe,de,he)},this.lod=new LODRaycast,this.provider=ie,this.heightProvider=ue,this.setRoot(oe),this.preSubdivide()}setRoot(oe){if(typeof oe=="number"){if(!MapView.mapModes.has(oe))throw new Error("Map mode "+oe+" does is not registered.");const ie=MapView.mapModes.get(oe);oe=new ie(null,this)}this.root!==null&&(this.remove(this.root),this.root=null),this.root=oe,this.root!==null&&(this.geometry=this.root.constructor.baseGeometry,this.scale.copy(this.root.constructor.baseScale),this.root.mapView=this,this.add(this.root),this.root.initialize())}preSubdivide(){var oe,ie;function ue(he,pe){if(!(pe<=0)){he.subdivide();for(let _e=0;_e<he.children.length;_e++)if(he.children[_e]instanceof MapNode){const Ce=he.children[_e];ue(Ce,pe-1)}}}const de=Math.max(this.provider.minZoom,(ie=(oe=this.heightProvider)===null||oe===void 0?void 0:oe.minZoom)!==null&&ie!==void 0?ie:-1/0);de>0&&ue(this.root,de)}setProvider(oe){oe!==this.provider&&(this.provider=oe,this.clear())}setHeightProvider(oe){oe!==this.heightProvider&&(this.heightProvider=oe,this.clear())}clear(){return this.traverse(function(oe){oe.childrenCache&&(oe.childrenCache=null),oe.initialize&&oe.initialize()}),this}minZoom(){var oe,ie;return Math.max(this.provider.minZoom,(ie=(oe=this.heightProvider)===null||oe===void 0?void 0:oe.minZoom)!==null&&ie!==void 0?ie:-1/0)}maxZoom(){var oe,ie;return Math.min(this.provider.maxZoom,(ie=(oe=this.heightProvider)===null||oe===void 0?void 0:oe.maxZoom)!==null&&ie!==void 0?ie:1/0)}getMetaData(){this.provider.getMetaData()}raycast(oe,ie){return!1}}MapView.PLANAR=200;MapView.SPHERICAL=201;MapView.HEIGHT=202;MapView.HEIGHT_SHADER=203;MapView.MARTINI=204;MapView.mapModes=new Map([[MapView.PLANAR,MapPlaneNode],[MapView.SPHERICAL,MapSphereNode],[MapView.HEIGHT,MapHeightNode],[MapView.HEIGHT_SHADER,MapHeightNodeShader],[MapView.MARTINI,MapMartiniHeightNode]]);new Vector3$1;new Vector3$1;new Matrix4$1;new Vector3$1;new Frustum;new Vector3$1;class XHRUtils{static get(oe){return __awaiter(this,void 0,void 0,function*(){return new Promise(function(ie,ue){const de=new XMLHttpRequest;de.overrideMimeType("text/plain"),de.open("GET",oe,!0),de.onload=function(){ie(de.response)},de.onerror=ue,de.send(null)})})}static getRaw(oe){return __awaiter(this,void 0,void 0,function*(){return new Promise(function(ie,ue){var de=new XMLHttpRequest;de.responseType="arraybuffer",de.open("GET",oe,!0),de.onload=function(){ie(de.response)},de.onerror=ue,de.send(null)})})}static request(oe,ie,ue,de,he,pe,_e){function Ce(Ie){try{return JSON.parse(Ie)}catch{return Ie}}const xe=new XMLHttpRequest;if(xe.overrideMimeType("text/plain"),xe.open(ie,oe,!0),ue!=null)for(const Ie in ue)xe.setRequestHeader(Ie,ue[Ie]);return he!==void 0&&(xe.onload=function(Ie){he(Ce(xe.response),xe)}),pe!==void 0&&(xe.onerror=pe),_e!==void 0&&(xe.onprogress=_e),xe.send(de!==void 0?de:null),xe}}class BingMapsProvider extends MapProvider{constructor(oe="",ie=BingMapsProvider.AERIAL){super(),this.maxZoom=19,this.minZoom=1,this.format="jpeg",this.mapSize=512,this.subdomain="t1",this.meta=null,this.apiKey=oe,this.type=ie}getMetaData(){return __awaiter(this,void 0,void 0,function*(){const oe=BingMapsProvider.ADDRESS+"/REST/V1/Imagery/Metadata/RoadOnDemand?output=json&include=ImageryProviders&key="+this.apiKey,ie=yield XHRUtils.get(oe);this.meta=JSON.parse(ie)})}static quadKey(oe,ie,ue){let de="";for(let he=oe;he>0;he--){const pe=1<<he-1;let _e=0;ie&pe&&_e++,ue&pe&&(_e+=2),de+=_e}return de}fetchTile(oe,ie,ue){return new Promise((de,he)=>{const pe=document.createElement("img");pe.onload=function(){de(pe)},pe.onerror=function(){he()},pe.crossOrigin="Anonymous",pe.src="http://ecn."+this.subdomain+".tiles.virtualearth.net/tiles/"+this.type+BingMapsProvider.quadKey(oe,ie,ue)+".jpeg?g=1173"})}}BingMapsProvider.ADDRESS="https://dev.virtualearth.net";BingMapsProvider.AERIAL="a";BingMapsProvider.ROAD="r";BingMapsProvider.AERIAL_LABELS="h";BingMapsProvider.OBLIQUE="o";BingMapsProvider.OBLIQUE_LABELS="b";class HereMapsProvider extends MapProvider{constructor(oe="",ie="",ue="base",de="normal.day",he="png",pe=512){super(),this.appId=oe,this.appCode=ie,this.style=ue,this.scheme=de,this.format=he,this.size=pe,this.version="newest",this.server=1}nextServer(){this.server=this.server%4===0?1:this.server+1}getMetaData(){return __awaiter(this,void 0,void 0,function*(){})}fetchTile(oe,ie,ue){return this.nextServer(),new Promise((de,he)=>{const pe=document.createElement("img");pe.onload=function(){de(pe)},pe.onerror=function(){he()},pe.crossOrigin="Anonymous",pe.src="https://"+this.server+"."+this.style+".maps.api.here.com/maptile/2.1/maptile/"+this.version+"/"+this.scheme+"/"+oe+"/"+ie+"/"+ue+"/"+this.size+"/"+this.format+"?app_id="+this.appId+"&app_code="+this.appCode})}}HereMapsProvider.PATH="/maptile/2.1/";class MapBoxProvider extends MapProvider{constructor(oe="",ie="",ue=MapBoxProvider.STYLE,de="png",he=!1,pe="v4"){super(),this.apiToken=oe,this.format=de,this.useHDPI=he,this.mode=ue,this.mapId=ie,this.style=ie,this.version=pe}getMetaData(){return __awaiter(this,void 0,void 0,function*(){const oe=MapBoxProvider.ADDRESS+this.version+"/"+this.mapId+".json?access_token="+this.apiToken,ie=yield XHRUtils.get(oe),ue=JSON.parse(ie);this.name=ue.name,this.minZoom=ue.minZoom,this.maxZoom=ue.maxZoom,this.bounds=ue.bounds,this.center=ue.center})}fetchTile(oe,ie,ue){return new Promise((de,he)=>{const pe=document.createElement("img");pe.onload=function(){de(pe)},pe.onerror=function(){he()},pe.crossOrigin="Anonymous",this.mode===MapBoxProvider.STYLE?pe.src=MapBoxProvider.ADDRESS+"styles/v1/"+this.style+"/tiles/"+oe+"/"+ie+"/"+ue+(this.useHDPI?"@2x?access_token=":"?access_token=")+this.apiToken:pe.src=MapBoxProvider.ADDRESS+"v4/"+this.mapId+"/"+oe+"/"+ie+"/"+ue+(this.useHDPI?"@2x.":".")+this.format+"?access_token="+this.apiToken})}}MapBoxProvider.ADDRESS="https://api.mapbox.com/";MapBoxProvider.STYLE=100;MapBoxProvider.MAP_ID=101;class EventEmitter{constructor(){ve(this,"_disabled",new Object),ve(this,"_events",new Object)}disable(oe){return this._disabled[oe]=!0,this}enable(oe){return delete this._disabled[oe],this}isEnabled(oe){return!this._disabled[oe]}addListener(oe,ie,ue){return this._events[oe]?this._events[oe].fn?this._events[oe]=[this._events[oe],{fn:ie,once:ue}]:this._events[oe].push({fn:ie,once:ue}):this._events[oe]={fn:ie,once:ue},this}listeners(oe){if(this._events[oe]){if(this._events[oe].fn)return[this._events[oe]]}else return[];return this._events[oe]}listenerCount(oe){return this._events[oe]?this._events[oe].fn?1:this._events[oe].length:0}removeListener(oe,ie){const ue=this._events[oe];if(!ue)return this;if(ue.fn===ie)this._events[oe]=null;else{let de=-1;for(let he=0;he<ue.length;he++)if(ue[he].fn===ie){de=he;break}if(~de){const he=this._events[oe].length-1;if(he>1){const pe=new Array(he);for(let _e=0;_e<de;++_e)pe[_e]=this._events[oe][_e];for(let _e=de;_e<he;++_e)pe[_e]=this._events[oe][_e+1];this._events[oe]=pe}else he===0?this._events[oe]=null:de===0?this._events[oe]=this._events[oe][1]:de===1&&(this._events[oe]=this._events[oe][0])}}return this}removeAllListener(oe,ie){const ue=this._events[oe];if(!ie)return delete this._events[oe],this;if(!ue)return this;if(ue.fn)return ue.fn===ie&&(this._events[oe]=null),this;let de=0;for(let Ce=ue.length-1;Ce>-1;--Ce)ue[Ce].fn===ie&&++de;if(de===0)return this;const he=ue.length-de;if(he===0)return this._events[oe]=null,this;const pe=new Array(he);let _e=0;for(let Ce=ue.length-1;Ce>-1&&!(ue[Ce].fn!==ie&&(pe[_e]=ue[Ce],++_e,_e===he));--Ce);return this._events[oe]=pe,this}on(oe,ie){return this.addListener(oe,ie)}off(oe,ie){return this.removeListener(oe,ie)}once(oe,ie){return this.addListener(oe,ie,!0)}_callListeners(oe,...ie){const ue=this._events[oe];if(arguments.length===1)for(let de=ue.length-1;de>=0;--de)ue[de].fn(),ue[de].once&&this.removeListener(oe,ue[de].fn);else if(arguments.length===2)for(let de=ue.length-1;de>=0;--de)ue[de].fn(arguments[1]),ue[de].once&&this.removeListener(oe,ue[de].fn);else if(arguments.length===3)for(let de=ue.length-1;de>=0;--de)ue[de].fn(arguments[1],arguments[2]),ue[de].once&&this.removeListener(oe,ue[de].fn);else if(arguments.length===4)for(let de=ue.length-1;de>=0;--de)ue[de].fn(arguments[1],arguments[2],arguments[3]),ue[de].once&&this.removeListener(oe,ue[de].fn);else if(arguments.length===5)for(let de=ue.length-1;de>=0;--de)ue[de].fn(arguments[1],arguments[2],arguments[3],arguments[4]),ue[de].once&&this.removeListener(oe,ue[de].fn);else for(let de=ue.length-1;de>=0;--de)ue[de].fn(...ie),ue[de].once&&this.removeListener(oe,ue[de].fn)}async _callAsyncListeners(oe,...ie){const ue=this._events[oe];if(arguments.length===1)for(let de=ue.length-1;de>=0;--de)await ue[de].fn(),ue[de].once&&this.removeListener(oe,ue[de].fn);else if(arguments.length===2)for(let de=ue.length-1;de>=0;--de)await ue[de].fn(arguments[1]),ue[de].once&&this.removeListener(oe,ue[de].fn);else if(arguments.length===3)for(let de=ue.length-1;de>=0;--de)await ue[de].fn(arguments[1],arguments[2]),ue[de].once&&this.removeListener(oe,ue[de].fn);else if(arguments.length===4)for(let de=ue.length-1;de>=0;--de)await ue[de].fn(arguments[1],arguments[2],arguments[3]),ue[de].once&&this.removeListener(oe,ue[de].fn);else if(arguments.length===5)for(let de=ue.length-1;de>=0;--de)await ue[de].fn(arguments[1],arguments[2],arguments[3],arguments[4]),ue[de].once&&this.removeListener(oe,ue[de].fn);else for(let de=ue.length-1;de>=0;--de)await ue[de].fn(...ie),ue[de].once&&this.removeListener(oe,ue[de].fn)}emit(oe,...ie){return this._disabled==null||this._events==null||this._disabled[oe]||!this._events[oe]?!1:(this._events[oe].fn?(this._events[oe].fn(...ie),this._events&&this._events[oe].once&&this.removeListener(oe,this._events[oe].fn)):this._callListeners(oe,...ie),!0)}async asyncEmit(oe,...ie){return this._disabled==null||this._events==null||this._disabled[oe]||!this._events[oe]?!1:(this._events[oe].fn?(await this._events[oe].fn(...ie),this._events&&this._events[oe].once&&this.removeListener(oe,this._events[oe].fn)):await this._callAsyncListeners(oe,...ie),!0)}dispose(){for(const oe in this._events)this.removeAllListener(oe);this._events=null,this._disabled=null}}class ModelTree{constructor(){ve(this,"id"),ve(this,"name"),ve(this,"children"),ve(this,"userData")}}class ModelDocument extends EventEmitter{constructor(oe){super(),ve(this,"rootObject"),ve(this,"_mapElement"),ve(this,"_mapKeyElement"),ve(this,"app"),ve(this,"_config"),ve(this,"_name"),ve(this,"_boundingBox"),ve(this,"_gisData"),ve(this,"_modelTree"),this._name="model",this.app=oe,this._mapElement=new Map,this._mapKeyElement=new Map,this.rootObject=new Object3D,oe.view.root.add(this.rootObject)}get config(){return this._config}set config(oe){this._config=oe}addElement(oe){return this._mapElement.has(oe.Id)?!1:(this._mapElement.set(oe.Id,oe),oe.key&&this._mapKeyElement.set(oe.key,oe),!0)}getElement(oe){return this._mapElement.get(oe)}getAllElements(){return this._mapElement.values()}getElementsByType(oe){let ie=[];for(let ue of this._mapElement.values())ue.type==oe&&ie.push(ue);return ie}getElementByKey(oe){return this._mapKeyElement.get(oe)}clear(){this.rootObject.parent.remove(this.rootObject),this.rootObject.clear()}dispose(){var oe,ie,ue,de,he,pe;this.emit("dispose"),super.dispose(),(ie=(oe=this.rootObject)==null?void 0:oe.parent)==null||ie.remove(this.rootObject),(ue=this.rootObject)==null||ue.traverse(_e=>{var Ce,xe;_e instanceof Mesh&&((Ce=_e.geometry)==null||Ce.dispose(),(xe=_e.material)==null||xe.dispose())});for(let _e of this._mapElement.values())_e.dispose();(de=this._mapElement)==null||de.clear(),(he=this.rootObject)==null||he.clear(),this.rootObject=null,(pe=this.app)==null||pe.enableRender(),this._config=null}set boundingBox(oe){this._boundingBox=oe}get boundingBox(){return this._boundingBox==null&&this.computeBoundingbox(),this._boundingBox}computeBoundingbox(){this._boundingBox==null&&(this._boundingBox=new Box3),this._boundingBox.makeEmpty();for(const oe of this._mapElement.values())this._boundingBox.union(oe.boundingBox)}get gisData(){return this._gisData}set gisData(oe){this._gisData=oe;let ie=this.boundingBox;this.rootObject.matrix=new Matrix4$1;let ue;this.tile?ue=new Vector3$1(0,0,1):ue=new Vector3$1(0,1,0);let de=new Matrix4$1;de.makeRotationAxis(ue.normalize(),oe.rotation*Math.PI/180),this.rootObject.matrix.multiply(de);let he=UnitsUtils.datumsToSpherical(oe.latitude,oe.longitude),pe;this.tile?pe=new Matrix4$1(1,0,0,he.x,0,0,1,oe.height,0,-1,0,-he.y,0,0,0,1):pe=new Matrix4$1(1,0,0,he.x,0,1,0,oe.height,0,0,1,-he.y,0,0,0,1),this.rootObject.matrix.premultiply(pe),this.rootObject.matrixAutoUpdate=!1,ie.applyMatrix4(this.rootObject.matrix);for(const _e of this._mapElement.values())_e.boundingBox&&_e.boundingBox.applyMatrix4(this.rootObject.matrix);this.app.view.setHome(ie,!0)}get tile(){return this.rootObject.tilesRenderer}set modelTree(oe){this._modelTree=oe}get modelTree(){return this._modelTree==null&&(this._modelTree=new ModelTree),this._modelTree}set name(oe){this._name=oe}get name(){return this._name}setExplosion(oe){var ie;const ue=this.boundingBox,de=ue.getCenter(new Vector3$1),he=Math.max(0,Math.min(100,oe)),pe=new Set,_e=ue.getSize(new Vector3$1),Ce=Math.max(_e.x,_e.y,_e.z),xe=Ce*.05;for(const Ie of this._mapElement.values())if(Ie.meshDatas&&Ie.meshDatas.length>0){const $e=Ie.center.clone().sub(de),Ne=$e.length();$e.normalize();const Oe=Ie.boundingBox.getSize(new Vector3$1),Fe=Math.max(Oe.x,Oe.y,Oe.z),Ve=Math.pow(he/100,1.5),ze=1+Fe/Ce,Ue=Math.max(Ne,xe)*Ve*ze,Pt=$e.multiplyScalar(Ue),qe=new Matrix4$1;qe.makeTranslation(Pt.x,Pt.y,Pt.z),Ie.matrix=qe;for(const Et of Ie.meshDatas)pe.add(Et.mesh)}for(const Ie of pe)Ie.computeBoundingSphere?Ie.computeBoundingSphere():(ie=Ie.geometry)==null||ie.computeBoundingSphere();this.app.enableRender()}}class BaseElementType{}ve(BaseElementType,"ROOM","ROOM"),ve(BaseElementType,"LAYER","LAYER"),ve(BaseElementType,"TEXT","TEXT"),ve(BaseElementType,"CSS","CSS"),ve(BaseElementType,"MESH","MESH"),ve(BaseElementType,"IFC","IFC"),ve(BaseElementType,"NODE","Node");class ColorUtils{static GetRgb(oe,ie=2172976){oe==null&&(oe=16777215),oe=this.TransformColor(oe,ie,!0);const ue=oe>>16&255,de=oe>>8&255,he=oe&255;return[ue,de,he]}static TransformColor(oe,ie,ue=!1,de=!0){if(!ue&&!de)return oe;const he=this.Luminance(ie);if(oe===16777215&&he>=.8)return 0;if(oe===0&&he<=.2)return 16777215;if(!ue)return oe;const pe=this.Luminance(oe),_e=1.5,Ce=this.ContrastRatio(oe,ie);if((Ce>=1?Ce:1/Ce)<_e){let xe;he>.5?xe=he/2:xe=he*2,xe>pe?oe=this.Lighten(oe,xe/pe):oe=this.Darken(oe,pe/xe)}return oe}static Luminance(oe){const ie=this.LinearColor(((oe&16711680)>>>16)/255),ue=this.LinearColor(((oe&65280)>>>8)/255),de=this.LinearColor((oe&255)/255);return ie*.2126+ue*.7152+de*.0722}static LinearColor(oe){return oe<=.03928?oe/12.92:Math.pow((oe+.055)/1.055,2.4)}static ContrastRatio(oe,ie){return(this.Luminance(oe)+.05)/(this.Luminance(ie)+.05)}static Lighten(oe,ie){const ue=this.RgbToHls(oe);return ue.l*=ie,ue.l>1&&(ue.l=1),this.HlsToRgb(ue)}static Darken(oe,ie){const ue=this.RgbToHls(oe);return ue.l/=ie,this.HlsToRgb(ue)}static HlsToRgb({h:oe,l:ie,s:ue}){let de,he,pe;if(ue===0)de=he=pe=ie;else{let _e=function(Ie,$e,Ne){return Ne<0&&(Ne+=1),Ne>1&&(Ne-=1),Ne<.16666666666666666?Ie+($e-Ie)*6*Ne:Ne<.5?$e:Ne<.6666666666666666?Ie+($e-Ie)*(.6666666666666666-Ne)*6:Ie};const Ce=ie<.5?ie*(1+ue):ie+ue-ie*ue,xe=2*ie-Ce;de=_e(xe,Ce,oe+1/3),he=_e(xe,Ce,oe),pe=_e(xe,Ce,oe-1/3)}return Math.min(Math.floor(this.SRgbColor(de)*256),255)<<16|Math.min(Math.floor(this.SRgbColor(he)*256),255)<<8|Math.min(Math.floor(this.SRgbColor(pe)*256),255)}static SRgbColor(oe){return oe<.003?oe*12.92:Math.pow(oe,1/2.4)*1.055-.055}static RgbToHls(oe){const ie=this.LinearColor(((oe&16711680)>>>16)/255),ue=this.LinearColor(((oe&65280)>>>8)/255),de=this.LinearColor((oe&255)/255),he=Math.max(ie,ue,de),pe=Math.min(ie,ue,de);let _e,Ce;const xe=(he+pe)/2;if(he===pe)_e=Ce=0;else{const Ie=he-pe;switch(Ce=xe>.5?Ie/(2-he-pe):Ie/(he+pe),he){case ie:_e=(ue-de)/Ie+(ue<de?6:0);break;case ue:_e=(de-ie)/Ie+2;break;case de:_e=(ie-ue)/Ie+4;break}_e/=6}return{h:_e,l:xe,s:Ce}}static getColorByNumber(oe){switch(oe){case 0:return 0;case 1:return 16711680;case 2:return 16776960;case 3:return 65280;case 4:return 65535;case 5:return 255;case 6:return 16711935;case 7:return 16777215;case 8:return 4276545;case 9:return 8421504;case 10:return 16711680;case 11:return 16755370;case 12:return 12386304;case 13:return 12418686;case 14:return 8454144;case 15:return 8476246;case 16:return 6815744;case 17:return 6833477;case 18:return 5177344;case 19:return 5190965;case 20:return 16727808;case 21:return 16760746;case 22:return 12398080;case 23:return 12422526;case 24:return 8462080;case 25:return 8478806;case 26:return 6822144;case 27:return 6835781;case 28:return 5182208;case 29:return 5192501;case 30:return 16744192;case 31:return 16766122;case 32:return 10834432;case 33:return 12426622;case 34:return 8470528;case 35:return 8481622;case 36:return 6829056;case 37:return 6837829;case 38:return 5187328;case 39:return 5194293;case 40:return 16760576;case 41:return 16771754;case 42:return 12422400;case 43:return 12430718;case 44:return 8478720;case 45:return 8484438;case 46:return 6835712;case 47:return 6840133;case 48:return 5192448;case 49:return 5196085;case 50:return 16776960;case 51:return 16777130;case 52:return 12434688;case 53:return 12434814;case 54:return 8487168;case 55:return 8487254;case 56:return 6842368;case 57:return 6842437;case 58:return 5197568;case 59:return 5197621;case 60:return 12582656;case 61:return 15400874;case 62:return 9288960;case 63:return 11386238;case 64:return 6324480;case 65:return 7766358;case 66:return 5138432;case 67:return 6252613;case 68:return 3886848;case 69:return 4804405;case 70:return 8388352;case 71:return 13959082;case 72:return 6208768;case 73:return 10337662;case 74:return 4227328;case 75:return 7045462;case 76:return 3434496;case 77:return 5662789;case 78:return 2576128;case 79:return 4345653;case 80:return 4194048;case 81:return 12582826;case 82:return 3063040;case 83:return 9289086;case 84:return 2064640;case 85:return 6324566;case 86:return 1665024;case 87:return 5138501;case 88:return 1265408;case 89:return 3886901;case 90:return 65280;case 91:return 11206570;case 92:return 48384;case 93:return 8306046;case 94:return 33024;case 95:return 5669206;case 96:return 26624;case 97:return 4548677;case 98:return 20224;case 99:return 3493685;case 100:return 65343;case 101:return 11206591;case 102:return 48430;case 103:return 8306061;case 104:return 33055;case 105:return 5669216;case 106:return 26649;case 107:return 4548686;case 108:return 20243;case 109:return 3493691;case 110:return 65407;case 111:return 11206612;case 112:return 48478;case 113:return 8306077;case 114:return 33088;case 115:return 5669227;case 116:return 26676;case 117:return 4548694;case 118:return 20263;case 119:return 3493698;case 120:return 65471;case 121:return 11206634;case 122:return 48525;case 123:return 8306093;case 124:return 33120;case 125:return 5669238;case 126:return 26702;case 127:return 4548703;case 128:return 20283;case 129:return 3493705;case 130:return 65535;case 131:return 11206655;case 132:return 48573;case 133:return 8306109;case 134:return 33153;case 135:return 5669249;case 136:return 26728;case 137:return 4548712;case 138:return 20303;case 139:return 3493711;case 140:return 49151;case 141:return 11201279;case 142:return 36285;case 143:return 8302013;case 144:return 24705;case 145:return 5666433;case 146:return 20072;case 147:return 4546408;case 148:return 15183;case 149:return 3492175;case 150:return 32767;case 151:return 11195647;case 152:return 24253;case 153:return 8297917;case 154:return 16513;case 155:return 5663617;case 156:return 13416;case 157:return 4544104;case 158:return 10063;case 159:return 3490383;case 160:return 16383;case 161:return 11190271;case 162:return 11965;case 163:return 8293821;case 164:return 8065;case 165:return 5660801;case 166:return 6504;case 167:return 4542056;case 168:return 4943;case 169:return 3488591;case 170:return 255;case 171:return 11184895;case 172:return 189;case 173:return 8289981;case 174:return 129;case 175:return 5658241;case 176:return 104;case 177:return 4539752;case 178:return 79;case 179:return 3487055;case 180:return 4129023;case 181:return 12561151;case 182:return 3014845;case 183:return 9273021;case 184:return 2031745;case 185:return 6313601;case 186:return 1638504;case 187:return 5129576;case 188:return 1245263;case 189:return 3880271;case 190:return 8323327;case 191:return 13937407;case 192:return 6160573;case 193:return 10321597;case 194:return 4194433;case 195:return 7034497;case 196:return 3407976;case 197:return 5653864;case 198:return 2555983;case 199:return 4339023;case 200:return 12517631;case 201:return 15379199;case 202:return 9240765;case 203:return 11370173;case 204:return 6291585;case 205:return 7755393;case 206:return 5111912;case 207:return 6243688;case 208:return 3866703;case 209:return 4797775;case 210:return 16711935;case 211:return 16755455;case 212:return 12386493;case 213:return 12418749;case 214:return 8454273;case 215:return 8476289;case 216:return 6815848;case 217:return 6833512;case 218:return 5177423;case 219:return 5190991;case 220:return 16711871;case 221:return 16755434;case 222:return 12386445;case 223:return 12418733;case 224:return 8454240;case 225:return 8476278;case 226:return 6815822;case 227:return 6833503;case 228:return 5177403;case 229:return 5190985;case 230:return 16711807;case 231:return 16755412;case 232:return 12386398;case 233:return 12418717;case 234:return 8454208;case 235:return 8476267;case 236:return 6815796;case 237:return 6833494;case 238:return 5177383;case 239:return 5190978;case 240:return 16711743;case 241:return 16755391;case 242:return 12386350;case 243:return 12418701;case 244:return 8454175;case 245:return 8476256;case 246:return 6815769;case 247:return 6833486;case 248:return 5177363;case 249:return 5190971;case 250:return 3355443;case 251:return 5263440;case 252:return 6908265;case 253:return 8553090;case 254:return 12500670;case 255:return 16777215}return 16777215}static hexColorToString(oe){return"#"+oe.toString(16).padStart(6,"0")}static hexColorStringToNumber(oe){return parseInt(oe.slice(1),16)}}/*! https://mths.be/codepointat v0.2.0 by @mathias */String.prototype.codePointAt||function(){var le=function(){try{var ie={},ue=Object.defineProperty,de=ue(ie,ie,ie)&&ue}catch{}return de}(),oe=function(ie){if(this==null)throw TypeError();var ue=String(this),de=ue.length,he=ie?Number(ie):0;if(he!=he&&(he=0),!(he<0||he>=de)){var pe=ue.charCodeAt(he),_e;return pe>=55296&&pe<=56319&&de>he+1&&(_e=ue.charCodeAt(he+1),_e>=56320&&_e<=57343)?(pe-55296)*1024+_e-56320+65536:pe}};le?le(String.prototype,"codePointAt",{value:oe,configurable:!0,writable:!0}):String.prototype.codePointAt=oe}();var TINF_OK=0,TINF_DATA_ERROR=-3;function Tree(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function Data(le,oe){this.source=le,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=oe,this.destLen=0,this.ltree=new Tree,this.dtree=new Tree}var sltree=new Tree,sdtree=new Tree,length_bits=new Uint8Array(30),length_base=new Uint16Array(30),dist_bits=new Uint8Array(30),dist_base=new Uint16Array(30),clcidx=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),code_tree=new Tree,lengths=new Uint8Array(320);function tinf_build_bits_base(le,oe,ie,ue){var de,he;for(de=0;de<ie;++de)le[de]=0;for(de=0;de<30-ie;++de)le[de+ie]=de/ie|0;for(he=ue,de=0;de<30;++de)oe[de]=he,he+=1<<le[de]}function tinf_build_fixed_trees(le,oe){var ie;for(ie=0;ie<7;++ie)le.table[ie]=0;for(le.table[7]=24,le.table[8]=152,le.table[9]=112,ie=0;ie<24;++ie)le.trans[ie]=256+ie;for(ie=0;ie<144;++ie)le.trans[24+ie]=ie;for(ie=0;ie<8;++ie)le.trans[168+ie]=280+ie;for(ie=0;ie<112;++ie)le.trans[176+ie]=144+ie;for(ie=0;ie<5;++ie)oe.table[ie]=0;for(oe.table[5]=32,ie=0;ie<32;++ie)oe.trans[ie]=ie}var offs=new Uint16Array(16);function tinf_build_tree(le,oe,ie,ue){var de,he;for(de=0;de<16;++de)le.table[de]=0;for(de=0;de<ue;++de)le.table[oe[ie+de]]++;for(le.table[0]=0,he=0,de=0;de<16;++de)offs[de]=he,he+=le.table[de];for(de=0;de<ue;++de)oe[ie+de]&&(le.trans[offs[oe[ie+de]]++]=de)}function tinf_getbit(le){le.bitcount--||(le.tag=le.source[le.sourceIndex++],le.bitcount=7);var oe=le.tag&1;return le.tag>>>=1,oe}function tinf_read_bits(le,oe,ie){if(!oe)return ie;for(;le.bitcount<24;)le.tag|=le.source[le.sourceIndex++]<<le.bitcount,le.bitcount+=8;var ue=le.tag&65535>>>16-oe;return le.tag>>>=oe,le.bitcount-=oe,ue+ie}function tinf_decode_symbol(le,oe){for(;le.bitcount<24;)le.tag|=le.source[le.sourceIndex++]<<le.bitcount,le.bitcount+=8;var ie=0,ue=0,de=0,he=le.tag;do ue=2*ue+(he&1),he>>>=1,++de,ie+=oe.table[de],ue-=oe.table[de];while(ue>=0);return le.tag=he,le.bitcount-=de,oe.trans[ie+ue]}function tinf_decode_trees(le,oe,ie){var ue,de,he,pe,_e,Ce;for(ue=tinf_read_bits(le,5,257),de=tinf_read_bits(le,5,1),he=tinf_read_bits(le,4,4),pe=0;pe<19;++pe)lengths[pe]=0;for(pe=0;pe<he;++pe){var xe=tinf_read_bits(le,3,0);lengths[clcidx[pe]]=xe}for(tinf_build_tree(code_tree,lengths,0,19),_e=0;_e<ue+de;){var Ie=tinf_decode_symbol(le,code_tree);switch(Ie){case 16:var $e=lengths[_e-1];for(Ce=tinf_read_bits(le,2,3);Ce;--Ce)lengths[_e++]=$e;break;case 17:for(Ce=tinf_read_bits(le,3,3);Ce;--Ce)lengths[_e++]=0;break;case 18:for(Ce=tinf_read_bits(le,7,11);Ce;--Ce)lengths[_e++]=0;break;default:lengths[_e++]=Ie;break}}tinf_build_tree(oe,lengths,0,ue),tinf_build_tree(ie,lengths,ue,de)}function tinf_inflate_block_data(le,oe,ie){for(;;){var ue=tinf_decode_symbol(le,oe);if(ue===256)return TINF_OK;if(ue<256)le.dest[le.destLen++]=ue;else{var de,he,pe,_e;for(ue-=257,de=tinf_read_bits(le,length_bits[ue],length_base[ue]),he=tinf_decode_symbol(le,ie),pe=le.destLen-tinf_read_bits(le,dist_bits[he],dist_base[he]),_e=pe;_e<pe+de;++_e)le.dest[le.destLen++]=le.dest[_e]}}}function tinf_inflate_uncompressed_block(le){for(var oe,ie,ue;le.bitcount>8;)le.sourceIndex--,le.bitcount-=8;if(oe=le.source[le.sourceIndex+1],oe=256*oe+le.source[le.sourceIndex],ie=le.source[le.sourceIndex+3],ie=256*ie+le.source[le.sourceIndex+2],oe!==(~ie&65535))return TINF_DATA_ERROR;for(le.sourceIndex+=4,ue=oe;ue;--ue)le.dest[le.destLen++]=le.source[le.sourceIndex++];return le.bitcount=0,TINF_OK}function tinf_uncompress(le,oe){var ie=new Data(le,oe),ue,de,he;do{switch(ue=tinf_getbit(ie),de=tinf_read_bits(ie,2,0),de){case 0:he=tinf_inflate_uncompressed_block(ie);break;case 1:he=tinf_inflate_block_data(ie,sltree,sdtree);break;case 2:tinf_decode_trees(ie,ie.ltree,ie.dtree),he=tinf_inflate_block_data(ie,ie.ltree,ie.dtree);break;default:he=TINF_DATA_ERROR}if(he!==TINF_OK)throw new Error("Data error")}while(!ue);return ie.destLen<ie.dest.length?typeof ie.dest.slice=="function"?ie.dest.slice(0,ie.destLen):ie.dest.subarray(0,ie.destLen):ie.dest}tinf_build_fixed_trees(sltree,sdtree);tinf_build_bits_base(length_bits,length_base,4,3);tinf_build_bits_base(dist_bits,dist_base,2,1);length_bits[28]=0;length_base[28]=258;var tinyInflate=tinf_uncompress;function derive(le,oe,ie,ue,de){return Math.pow(1-de,3)*le+3*Math.pow(1-de,2)*de*oe+3*(1-de)*Math.pow(de,2)*ie+Math.pow(de,3)*ue}function BoundingBox$1(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}BoundingBox$1.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)};BoundingBox$1.prototype.addPoint=function(le,oe){typeof le=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=le,this.x2=le),le<this.x1&&(this.x1=le),le>this.x2&&(this.x2=le)),typeof oe=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=oe,this.y2=oe),oe<this.y1&&(this.y1=oe),oe>this.y2&&(this.y2=oe))};BoundingBox$1.prototype.addX=function(le){this.addPoint(le,null)};BoundingBox$1.prototype.addY=function(le){this.addPoint(null,le)};BoundingBox$1.prototype.addBezier=function(le,oe,ie,ue,de,he,pe,_e){var Ce=[le,oe],xe=[ie,ue],Ie=[de,he],$e=[pe,_e];this.addPoint(le,oe),this.addPoint(pe,_e);for(var Ne=0;Ne<=1;Ne++){var Oe=6*Ce[Ne]-12*xe[Ne]+6*Ie[Ne],Fe=-3*Ce[Ne]+9*xe[Ne]-9*Ie[Ne]+3*$e[Ne],Ve=3*xe[Ne]-3*Ce[Ne];if(Fe===0){if(Oe===0)continue;var ze=-Ve/Oe;0<ze&&ze<1&&(Ne===0&&this.addX(derive(Ce[Ne],xe[Ne],Ie[Ne],$e[Ne],ze)),Ne===1&&this.addY(derive(Ce[Ne],xe[Ne],Ie[Ne],$e[Ne],ze)));continue}var Ue=Math.pow(Oe,2)-4*Ve*Fe;if(!(Ue<0)){var Pt=(-Oe+Math.sqrt(Ue))/(2*Fe);0<Pt&&Pt<1&&(Ne===0&&this.addX(derive(Ce[Ne],xe[Ne],Ie[Ne],$e[Ne],Pt)),Ne===1&&this.addY(derive(Ce[Ne],xe[Ne],Ie[Ne],$e[Ne],Pt)));var qe=(-Oe-Math.sqrt(Ue))/(2*Fe);0<qe&&qe<1&&(Ne===0&&this.addX(derive(Ce[Ne],xe[Ne],Ie[Ne],$e[Ne],qe)),Ne===1&&this.addY(derive(Ce[Ne],xe[Ne],Ie[Ne],$e[Ne],qe)))}}};BoundingBox$1.prototype.addQuad=function(le,oe,ie,ue,de,he){var pe=le+.6666666666666666*(ie-le),_e=oe+2/3*(ue-oe),Ce=pe+1/3*(de-le),xe=_e+1/3*(he-oe);this.addBezier(le,oe,pe,_e,Ce,xe,de,he)};function Path$1(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}Path$1.prototype.moveTo=function(le,oe){this.commands.push({type:"M",x:le,y:oe})};Path$1.prototype.lineTo=function(le,oe){this.commands.push({type:"L",x:le,y:oe})};Path$1.prototype.curveTo=Path$1.prototype.bezierCurveTo=function(le,oe,ie,ue,de,he){this.commands.push({type:"C",x1:le,y1:oe,x2:ie,y2:ue,x:de,y:he})};Path$1.prototype.quadTo=Path$1.prototype.quadraticCurveTo=function(le,oe,ie,ue){this.commands.push({type:"Q",x1:le,y1:oe,x:ie,y:ue})};Path$1.prototype.close=Path$1.prototype.closePath=function(){this.commands.push({type:"Z"})};Path$1.prototype.extend=function(le){if(le.commands)le=le.commands;else if(le instanceof BoundingBox$1){var oe=le;this.moveTo(oe.x1,oe.y1),this.lineTo(oe.x2,oe.y1),this.lineTo(oe.x2,oe.y2),this.lineTo(oe.x1,oe.y2),this.close();return}Array.prototype.push.apply(this.commands,le)};Path$1.prototype.getBoundingBox=function(){for(var le=new BoundingBox$1,oe=0,ie=0,ue=0,de=0,he=0;he<this.commands.length;he++){var pe=this.commands[he];switch(pe.type){case"M":le.addPoint(pe.x,pe.y),oe=ue=pe.x,ie=de=pe.y;break;case"L":le.addPoint(pe.x,pe.y),ue=pe.x,de=pe.y;break;case"Q":le.addQuad(ue,de,pe.x1,pe.y1,pe.x,pe.y),ue=pe.x,de=pe.y;break;case"C":le.addBezier(ue,de,pe.x1,pe.y1,pe.x2,pe.y2,pe.x,pe.y),ue=pe.x,de=pe.y;break;case"Z":ue=oe,de=ie;break;default:throw new Error("Unexpected path command "+pe.type)}}return le.isEmpty()&&le.addPoint(0,0),le};Path$1.prototype.draw=function(le){le.beginPath();for(var oe=0;oe<this.commands.length;oe+=1){var ie=this.commands[oe];ie.type==="M"?le.moveTo(ie.x,ie.y):ie.type==="L"?le.lineTo(ie.x,ie.y):ie.type==="C"?le.bezierCurveTo(ie.x1,ie.y1,ie.x2,ie.y2,ie.x,ie.y):ie.type==="Q"?le.quadraticCurveTo(ie.x1,ie.y1,ie.x,ie.y):ie.type==="Z"&&le.closePath()}this.fill&&(le.fillStyle=this.fill,le.fill()),this.stroke&&(le.strokeStyle=this.stroke,le.lineWidth=this.strokeWidth,le.stroke())};Path$1.prototype.toPathData=function(le){le=le!==void 0?le:2;function oe(pe){return Math.round(pe)===pe?""+Math.round(pe):pe.toFixed(le)}function ie(){for(var pe=arguments,_e="",Ce=0;Ce<arguments.length;Ce+=1){var xe=pe[Ce];xe>=0&&Ce>0&&(_e+=" "),_e+=oe(xe)}return _e}for(var ue="",de=0;de<this.commands.length;de+=1){var he=this.commands[de];he.type==="M"?ue+="M"+ie(he.x,he.y):he.type==="L"?ue+="L"+ie(he.x,he.y):he.type==="C"?ue+="C"+ie(he.x1,he.y1,he.x2,he.y2,he.x,he.y):he.type==="Q"?ue+="Q"+ie(he.x1,he.y1,he.x,he.y):he.type==="Z"&&(ue+="Z")}return ue};Path$1.prototype.toSVG=function(le){var oe='<path d="';return oe+=this.toPathData(le),oe+='"',this.fill&&this.fill!=="black"&&(this.fill===null?oe+=' fill="none"':oe+=' fill="'+this.fill+'"'),this.stroke&&(oe+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),oe+="/>",oe};Path$1.prototype.toDOMElement=function(le){var oe=this.toPathData(le),ie=document.createElementNS("http://www.w3.org/2000/svg","path");return ie.setAttribute("d",oe),ie};function fail(le){throw new Error(le)}function argument(le,oe){le||fail(oe)}var check$1={fail,argument,assert:argument},LIMIT16=32768,LIMIT32=2147483648,decode={},encode={},sizeOf={};function constant(le){return function(){return le}}encode.BYTE=function(le){return check$1.argument(le>=0&&le<=255,"Byte value should be between 0 and 255."),[le]};sizeOf.BYTE=constant(1);encode.CHAR=function(le){return[le.charCodeAt(0)]};sizeOf.CHAR=constant(1);encode.CHARARRAY=function(le){typeof le>"u"&&(le="");for(var oe=[],ie=0;ie<le.length;ie+=1)oe[ie]=le.charCodeAt(ie);return oe};sizeOf.CHARARRAY=function(le){return typeof le>"u"?0:le.length};encode.USHORT=function(le){return[le>>8&255,le&255]};sizeOf.USHORT=constant(2);encode.SHORT=function(le){return le>=LIMIT16&&(le=-(2*LIMIT16-le)),[le>>8&255,le&255]};sizeOf.SHORT=constant(2);encode.UINT24=function(le){return[le>>16&255,le>>8&255,le&255]};sizeOf.UINT24=constant(3);encode.ULONG=function(le){return[le>>24&255,le>>16&255,le>>8&255,le&255]};sizeOf.ULONG=constant(4);encode.LONG=function(le){return le>=LIMIT32&&(le=-(2*LIMIT32-le)),[le>>24&255,le>>16&255,le>>8&255,le&255]};sizeOf.LONG=constant(4);encode.FIXED=encode.ULONG;sizeOf.FIXED=sizeOf.ULONG;encode.FWORD=encode.SHORT;sizeOf.FWORD=sizeOf.SHORT;encode.UFWORD=encode.USHORT;sizeOf.UFWORD=sizeOf.USHORT;encode.LONGDATETIME=function(le){return[0,0,0,0,le>>24&255,le>>16&255,le>>8&255,le&255]};sizeOf.LONGDATETIME=constant(8);encode.TAG=function(le){return check$1.argument(le.length===4,"Tag should be exactly 4 ASCII characters."),[le.charCodeAt(0),le.charCodeAt(1),le.charCodeAt(2),le.charCodeAt(3)]};sizeOf.TAG=constant(4);encode.Card8=encode.BYTE;sizeOf.Card8=sizeOf.BYTE;encode.Card16=encode.USHORT;sizeOf.Card16=sizeOf.USHORT;encode.OffSize=encode.BYTE;sizeOf.OffSize=sizeOf.BYTE;encode.SID=encode.USHORT;sizeOf.SID=sizeOf.USHORT;encode.NUMBER=function(le){return le>=-107&&le<=107?[le+139]:le>=108&&le<=1131?(le=le-108,[(le>>8)+247,le&255]):le>=-1131&&le<=-108?(le=-le-108,[(le>>8)+251,le&255]):le>=-32768&&le<=32767?encode.NUMBER16(le):encode.NUMBER32(le)};sizeOf.NUMBER=function(le){return encode.NUMBER(le).length};encode.NUMBER16=function(le){return[28,le>>8&255,le&255]};sizeOf.NUMBER16=constant(3);encode.NUMBER32=function(le){return[29,le>>24&255,le>>16&255,le>>8&255,le&255]};sizeOf.NUMBER32=constant(5);encode.REAL=function(le){var oe=le.toString(),ie=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(oe);if(ie){var ue=parseFloat("1e"+((ie[2]?+ie[2]:0)+ie[1].length));oe=(Math.round(le*ue)/ue).toString()}for(var de="",he=0,pe=oe.length;he<pe;he+=1){var _e=oe[he];_e==="e"?de+=oe[++he]==="-"?"c":"b":_e==="."?de+="a":_e==="-"?de+="e":de+=_e}de+=de.length&1?"f":"ff";for(var Ce=[30],xe=0,Ie=de.length;xe<Ie;xe+=2)Ce.push(parseInt(de.substr(xe,2),16));return Ce};sizeOf.REAL=function(le){return encode.REAL(le).length};encode.NAME=encode.CHARARRAY;sizeOf.NAME=sizeOf.CHARARRAY;encode.STRING=encode.CHARARRAY;sizeOf.STRING=sizeOf.CHARARRAY;decode.UTF8=function(le,oe,ie){for(var ue=[],de=ie,he=0;he<de;he++,oe+=1)ue[he]=le.getUint8(oe);return String.fromCharCode.apply(null,ue)};decode.UTF16=function(le,oe,ie){for(var ue=[],de=ie/2,he=0;he<de;he++,oe+=2)ue[he]=le.getUint16(oe);return String.fromCharCode.apply(null,ue)};encode.UTF16=function(le){for(var oe=[],ie=0;ie<le.length;ie+=1){var ue=le.charCodeAt(ie);oe[oe.length]=ue>>8&255,oe[oe.length]=ue&255}return oe};sizeOf.UTF16=function(le){return le.length*2};var eightBitMacEncodings={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""};decode.MACSTRING=function(le,oe,ie,ue){var de=eightBitMacEncodings[ue];if(de!==void 0){for(var he="",pe=0;pe<ie;pe++){var _e=le.getUint8(oe+pe);_e<=127?he+=String.fromCharCode(_e):he+=de[_e&127]}return he}};var macEncodingTableCache=typeof WeakMap=="function"&&new WeakMap,macEncodingCacheKeys,getMacEncodingTable=function(le){if(!macEncodingCacheKeys){macEncodingCacheKeys={};for(var oe in eightBitMacEncodings)macEncodingCacheKeys[oe]=new String(oe)}var ie=macEncodingCacheKeys[le];if(ie!==void 0){if(macEncodingTableCache){var ue=macEncodingTableCache.get(ie);if(ue!==void 0)return ue}var de=eightBitMacEncodings[le];if(de!==void 0){for(var he={},pe=0;pe<de.length;pe++)he[de.charCodeAt(pe)]=pe+128;return macEncodingTableCache&&macEncodingTableCache.set(ie,he),he}}};encode.MACSTRING=function(le,oe){var ie=getMacEncodingTable(oe);if(ie!==void 0){for(var ue=[],de=0;de<le.length;de++){var he=le.charCodeAt(de);if(he>=128&&(he=ie[he],he===void 0))return;ue[de]=he}return ue}};sizeOf.MACSTRING=function(le,oe){var ie=encode.MACSTRING(le,oe);return ie!==void 0?ie.length:0};function isByteEncodable(le){return le>=-128&&le<=127}function encodeVarDeltaRunAsZeroes(le,oe,ie){for(var ue=0,de=le.length;oe<de&&ue<64&&le[oe]===0;)++oe,++ue;return ie.push(128|ue-1),oe}function encodeVarDeltaRunAsBytes(le,oe,ie){for(var ue=0,de=le.length,he=oe;he<de&&ue<64;){var pe=le[he];if(!isByteEncodable(pe)||pe===0&&he+1<de&&le[he+1]===0)break;++he,++ue}ie.push(ue-1);for(var _e=oe;_e<he;++_e)ie.push(le[_e]+256&255);return he}function encodeVarDeltaRunAsWords(le,oe,ie){for(var ue=0,de=le.length,he=oe;he<de&&ue<64;){var pe=le[he];if(pe===0||isByteEncodable(pe)&&he+1<de&&isByteEncodable(le[he+1]))break;++he,++ue}ie.push(64|ue-1);for(var _e=oe;_e<he;++_e){var Ce=le[_e];ie.push(Ce+65536>>8&255,Ce+256&255)}return he}encode.VARDELTAS=function(le){for(var oe=0,ie=[];oe<le.length;){var ue=le[oe];ue===0?oe=encodeVarDeltaRunAsZeroes(le,oe,ie):ue>=-128&&ue<=127?oe=encodeVarDeltaRunAsBytes(le,oe,ie):oe=encodeVarDeltaRunAsWords(le,oe,ie)}return ie};encode.INDEX=function(le){for(var oe=1,ie=[oe],ue=[],de=0;de<le.length;de+=1){var he=encode.OBJECT(le[de]);Array.prototype.push.apply(ue,he),oe+=he.length,ie.push(oe)}if(ue.length===0)return[0,0];for(var pe=[],_e=1+Math.floor(Math.log(oe)/Math.log(2))/8|0,Ce=[void 0,encode.BYTE,encode.USHORT,encode.UINT24,encode.ULONG][_e],xe=0;xe<ie.length;xe+=1){var Ie=Ce(ie[xe]);Array.prototype.push.apply(pe,Ie)}return Array.prototype.concat(encode.Card16(le.length),encode.OffSize(_e),pe,ue)};sizeOf.INDEX=function(le){return encode.INDEX(le).length};encode.DICT=function(le){for(var oe=[],ie=Object.keys(le),ue=ie.length,de=0;de<ue;de+=1){var he=parseInt(ie[de],0),pe=le[he];oe=oe.concat(encode.OPERAND(pe.value,pe.type)),oe=oe.concat(encode.OPERATOR(he))}return oe};sizeOf.DICT=function(le){return encode.DICT(le).length};encode.OPERATOR=function(le){return le<1200?[le]:[12,le-1200]};encode.OPERAND=function(le,oe){var ie=[];if(Array.isArray(oe))for(var ue=0;ue<oe.length;ue+=1)check$1.argument(le.length===oe.length,"Not enough arguments given for type"+oe),ie=ie.concat(encode.OPERAND(le[ue],oe[ue]));else if(oe==="SID")ie=ie.concat(encode.NUMBER(le));else if(oe==="offset")ie=ie.concat(encode.NUMBER32(le));else if(oe==="number")ie=ie.concat(encode.NUMBER(le));else if(oe==="real")ie=ie.concat(encode.REAL(le));else throw new Error("Unknown operand type "+oe);return ie};encode.OP=encode.BYTE;sizeOf.OP=sizeOf.BYTE;var wmm=typeof WeakMap=="function"&&new WeakMap;encode.CHARSTRING=function(le){if(wmm){var oe=wmm.get(le);if(oe!==void 0)return oe}for(var ie=[],ue=le.length,de=0;de<ue;de+=1){var he=le[de];ie=ie.concat(encode[he.type](he.value))}return wmm&&wmm.set(le,ie),ie};sizeOf.CHARSTRING=function(le){return encode.CHARSTRING(le).length};encode.OBJECT=function(le){var oe=encode[le.type];return check$1.argument(oe!==void 0,"No encoding function for type "+le.type),oe(le.value)};sizeOf.OBJECT=function(le){var oe=sizeOf[le.type];return check$1.argument(oe!==void 0,"No sizeOf function for type "+le.type),oe(le.value)};encode.TABLE=function(le){for(var oe=[],ie=le.fields.length,ue=[],de=[],he=0;he<ie;he+=1){var pe=le.fields[he],_e=encode[pe.type];check$1.argument(_e!==void 0,"No encoding function for field type "+pe.type+" ("+pe.name+")");var Ce=le[pe.name];Ce===void 0&&(Ce=pe.value);var xe=_e(Ce);pe.type==="TABLE"?(de.push(oe.length),oe=oe.concat([0,0]),ue.push(xe)):oe=oe.concat(xe)}for(var Ie=0;Ie<ue.length;Ie+=1){var $e=de[Ie],Ne=oe.length;check$1.argument(Ne<65536,"Table "+le.tableName+" too big."),oe[$e]=Ne>>8,oe[$e+1]=Ne&255,oe=oe.concat(ue[Ie])}return oe};sizeOf.TABLE=function(le){for(var oe=0,ie=le.fields.length,ue=0;ue<ie;ue+=1){var de=le.fields[ue],he=sizeOf[de.type];check$1.argument(he!==void 0,"No sizeOf function for field type "+de.type+" ("+de.name+")");var pe=le[de.name];pe===void 0&&(pe=de.value),oe+=he(pe),de.type==="TABLE"&&(oe+=2)}return oe};encode.RECORD=encode.TABLE;sizeOf.RECORD=sizeOf.TABLE;encode.LITERAL=function(le){return le};sizeOf.LITERAL=function(le){return le.length};function Table(le,oe,ie){if(oe.length&&(oe[0].name!=="coverageFormat"||oe[0].value===1))for(var ue=0;ue<oe.length;ue+=1){var de=oe[ue];this[de.name]=de.value}if(this.tableName=le,this.fields=oe,ie)for(var he=Object.keys(ie),pe=0;pe<he.length;pe+=1){var _e=he[pe],Ce=ie[_e];this[_e]!==void 0&&(this[_e]=Ce)}}Table.prototype.encode=function(){return encode.TABLE(this)};Table.prototype.sizeOf=function(){return sizeOf.TABLE(this)};function ushortList(le,oe,ie){ie===void 0&&(ie=oe.length);var ue=new Array(oe.length+1);ue[0]={name:le+"Count",type:"USHORT",value:ie};for(var de=0;de<oe.length;de++)ue[de+1]={name:le+de,type:"USHORT",value:oe[de]};return ue}function tableList(le,oe,ie){var ue=oe.length,de=new Array(ue+1);de[0]={name:le+"Count",type:"USHORT",value:ue};for(var he=0;he<ue;he++)de[he+1]={name:le+he,type:"TABLE",value:ie(oe[he],he)};return de}function recordList(le,oe,ie){var ue=oe.length,de=[];de[0]={name:le+"Count",type:"USHORT",value:ue};for(var he=0;he<ue;he++)de=de.concat(ie(oe[he],he));return de}function Coverage(le){le.format===1?Table.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(ushortList("glyph",le.glyphs))):le.format===2?Table.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:2}].concat(recordList("rangeRecord",le.ranges,function(oe){return[{name:"startGlyphID",type:"USHORT",value:oe.start},{name:"endGlyphID",type:"USHORT",value:oe.end},{name:"startCoverageIndex",type:"USHORT",value:oe.index}]}))):check$1.assert(!1,"Coverage format must be 1 or 2.")}Coverage.prototype=Object.create(Table.prototype);Coverage.prototype.constructor=Coverage;function ScriptList(le){Table.call(this,"scriptListTable",recordList("scriptRecord",le,function(oe,ie){var ue=oe.script,de=ue.defaultLangSys;return check$1.assert(!!de,"Unable to write GSUB: script "+oe.tag+" has no default language system."),[{name:"scriptTag"+ie,type:"TAG",value:oe.tag},{name:"script"+ie,type:"TABLE",value:new Table("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new Table("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:de.reqFeatureIndex}].concat(ushortList("featureIndex",de.featureIndexes)))}].concat(recordList("langSys",ue.langSysRecords,function(he,pe){var _e=he.langSys;return[{name:"langSysTag"+pe,type:"TAG",value:he.tag},{name:"langSys"+pe,type:"TABLE",value:new Table("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:_e.reqFeatureIndex}].concat(ushortList("featureIndex",_e.featureIndexes)))}]})))}]}))}ScriptList.prototype=Object.create(Table.prototype);ScriptList.prototype.constructor=ScriptList;function FeatureList(le){Table.call(this,"featureListTable",recordList("featureRecord",le,function(oe,ie){var ue=oe.feature;return[{name:"featureTag"+ie,type:"TAG",value:oe.tag},{name:"feature"+ie,type:"TABLE",value:new Table("featureTable",[{name:"featureParams",type:"USHORT",value:ue.featureParams}].concat(ushortList("lookupListIndex",ue.lookupListIndexes)))}]}))}FeatureList.prototype=Object.create(Table.prototype);FeatureList.prototype.constructor=FeatureList;function LookupList(le,oe){Table.call(this,"lookupListTable",tableList("lookup",le,function(ie){var ue=oe[ie.lookupType];return check$1.assert(!!ue,"Unable to write GSUB lookup type "+ie.lookupType+" tables."),new Table("lookupTable",[{name:"lookupType",type:"USHORT",value:ie.lookupType},{name:"lookupFlag",type:"USHORT",value:ie.lookupFlag}].concat(tableList("subtable",ie.subtables,ue)))}))}LookupList.prototype=Object.create(Table.prototype);LookupList.prototype.constructor=LookupList;var table={Table,Record:Table,Coverage,ScriptList,FeatureList,LookupList,ushortList,tableList,recordList};function getByte(le,oe){return le.getUint8(oe)}function getUShort(le,oe){return le.getUint16(oe,!1)}function getShort(le,oe){return le.getInt16(oe,!1)}function getULong(le,oe){return le.getUint32(oe,!1)}function getFixed(le,oe){var ie=le.getInt16(oe,!1),ue=le.getUint16(oe+2,!1);return ie+ue/65535}function getTag(le,oe){for(var ie="",ue=oe;ue<oe+4;ue+=1)ie+=String.fromCharCode(le.getInt8(ue));return ie}function getOffset(le,oe,ie){for(var ue=0,de=0;de<ie;de+=1)ue<<=8,ue+=le.getUint8(oe+de);return ue}function getBytes(le,oe,ie){for(var ue=[],de=oe;de<ie;de+=1)ue.push(le.getUint8(de));return ue}function bytesToString(le){for(var oe="",ie=0;ie<le.length;ie+=1)oe+=String.fromCharCode(le[ie]);return oe}var typeOffsets={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Parser$1(le,oe){this.data=le,this.offset=oe,this.relativeOffset=0}Parser$1.prototype.parseByte=function(){var le=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,le};Parser$1.prototype.parseChar=function(){var le=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,le};Parser$1.prototype.parseCard8=Parser$1.prototype.parseByte;Parser$1.prototype.parseUShort=function(){var le=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,le};Parser$1.prototype.parseCard16=Parser$1.prototype.parseUShort;Parser$1.prototype.parseSID=Parser$1.prototype.parseUShort;Parser$1.prototype.parseOffset16=Parser$1.prototype.parseUShort;Parser$1.prototype.parseShort=function(){var le=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,le};Parser$1.prototype.parseF2Dot14=function(){var le=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,le};Parser$1.prototype.parseULong=function(){var le=getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,le};Parser$1.prototype.parseOffset32=Parser$1.prototype.parseULong;Parser$1.prototype.parseFixed=function(){var le=getFixed(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,le};Parser$1.prototype.parseString=function(le){var oe=this.data,ie=this.offset+this.relativeOffset,ue="";this.relativeOffset+=le;for(var de=0;de<le;de++)ue+=String.fromCharCode(oe.getUint8(ie+de));return ue};Parser$1.prototype.parseTag=function(){return this.parseString(4)};Parser$1.prototype.parseLongDateTime=function(){var le=getULong(this.data,this.offset+this.relativeOffset+4);return le-=2082844800,this.relativeOffset+=8,le};Parser$1.prototype.parseVersion=function(le){var oe=getUShort(this.data,this.offset+this.relativeOffset),ie=getUShort(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,le===void 0&&(le=4096),oe+ie/le/10};Parser$1.prototype.skip=function(le,oe){oe===void 0&&(oe=1),this.relativeOffset+=typeOffsets[le]*oe};Parser$1.prototype.parseULongList=function(le){le===void 0&&(le=this.parseULong());for(var oe=new Array(le),ie=this.data,ue=this.offset+this.relativeOffset,de=0;de<le;de++)oe[de]=ie.getUint32(ue),ue+=4;return this.relativeOffset+=le*4,oe};Parser$1.prototype.parseOffset16List=Parser$1.prototype.parseUShortList=function(le){le===void 0&&(le=this.parseUShort());for(var oe=new Array(le),ie=this.data,ue=this.offset+this.relativeOffset,de=0;de<le;de++)oe[de]=ie.getUint16(ue),ue+=2;return this.relativeOffset+=le*2,oe};Parser$1.prototype.parseShortList=function(le){for(var oe=new Array(le),ie=this.data,ue=this.offset+this.relativeOffset,de=0;de<le;de++)oe[de]=ie.getInt16(ue),ue+=2;return this.relativeOffset+=le*2,oe};Parser$1.prototype.parseByteList=function(le){for(var oe=new Array(le),ie=this.data,ue=this.offset+this.relativeOffset,de=0;de<le;de++)oe[de]=ie.getUint8(ue++);return this.relativeOffset+=le,oe};Parser$1.prototype.parseList=function(le,oe){oe||(oe=le,le=this.parseUShort());for(var ie=new Array(le),ue=0;ue<le;ue++)ie[ue]=oe.call(this);return ie};Parser$1.prototype.parseList32=function(le,oe){oe||(oe=le,le=this.parseULong());for(var ie=new Array(le),ue=0;ue<le;ue++)ie[ue]=oe.call(this);return ie};Parser$1.prototype.parseRecordList=function(le,oe){oe||(oe=le,le=this.parseUShort());for(var ie=new Array(le),ue=Object.keys(oe),de=0;de<le;de++){for(var he={},pe=0;pe<ue.length;pe++){var _e=ue[pe],Ce=oe[_e];he[_e]=Ce.call(this)}ie[de]=he}return ie};Parser$1.prototype.parseRecordList32=function(le,oe){oe||(oe=le,le=this.parseULong());for(var ie=new Array(le),ue=Object.keys(oe),de=0;de<le;de++){for(var he={},pe=0;pe<ue.length;pe++){var _e=ue[pe],Ce=oe[_e];he[_e]=Ce.call(this)}ie[de]=he}return ie};Parser$1.prototype.parseStruct=function(le){if(typeof le=="function")return le.call(this);for(var oe=Object.keys(le),ie={},ue=0;ue<oe.length;ue++){var de=oe[ue],he=le[de];ie[de]=he.call(this)}return ie};Parser$1.prototype.parseValueRecord=function(le){if(le===void 0&&(le=this.parseUShort()),le!==0){var oe={};return le&1&&(oe.xPlacement=this.parseShort()),le&2&&(oe.yPlacement=this.parseShort()),le&4&&(oe.xAdvance=this.parseShort()),le&8&&(oe.yAdvance=this.parseShort()),le&16&&(oe.xPlaDevice=void 0,this.parseShort()),le&32&&(oe.yPlaDevice=void 0,this.parseShort()),le&64&&(oe.xAdvDevice=void 0,this.parseShort()),le&128&&(oe.yAdvDevice=void 0,this.parseShort()),oe}};Parser$1.prototype.parseValueRecordList=function(){for(var le=this.parseUShort(),oe=this.parseUShort(),ie=new Array(oe),ue=0;ue<oe;ue++)ie[ue]=this.parseValueRecord(le);return ie};Parser$1.prototype.parsePointer=function(le){var oe=this.parseOffset16();if(oe>0)return new Parser$1(this.data,this.offset+oe).parseStruct(le)};Parser$1.prototype.parsePointer32=function(le){var oe=this.parseOffset32();if(oe>0)return new Parser$1(this.data,this.offset+oe).parseStruct(le)};Parser$1.prototype.parseListOfLists=function(le){for(var oe=this.parseOffset16List(),ie=oe.length,ue=this.relativeOffset,de=new Array(ie),he=0;he<ie;he++){var pe=oe[he];if(pe===0){de[he]=void 0;continue}if(this.relativeOffset=pe,le){for(var _e=this.parseOffset16List(),Ce=new Array(_e.length),xe=0;xe<_e.length;xe++)this.relativeOffset=pe+_e[xe],Ce[xe]=le.call(this);de[he]=Ce}else de[he]=this.parseUShortList()}return this.relativeOffset=ue,de};Parser$1.prototype.parseCoverage=function(){var le=this.offset+this.relativeOffset,oe=this.parseUShort(),ie=this.parseUShort();if(oe===1)return{format:1,glyphs:this.parseUShortList(ie)};if(oe===2){for(var ue=new Array(ie),de=0;de<ie;de++)ue[de]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:ue}}throw new Error("0x"+le.toString(16)+": Coverage format must be 1 or 2.")};Parser$1.prototype.parseClassDef=function(){var le=this.offset+this.relativeOffset,oe=this.parseUShort();if(oe===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(oe===2)return{format:2,ranges:this.parseRecordList({start:Parser$1.uShort,end:Parser$1.uShort,classId:Parser$1.uShort})};throw new Error("0x"+le.toString(16)+": ClassDef format must be 1 or 2.")};Parser$1.list=function(le,oe){return function(){return this.parseList(le,oe)}};Parser$1.list32=function(le,oe){return function(){return this.parseList32(le,oe)}};Parser$1.recordList=function(le,oe){return function(){return this.parseRecordList(le,oe)}};Parser$1.recordList32=function(le,oe){return function(){return this.parseRecordList32(le,oe)}};Parser$1.pointer=function(le){return function(){return this.parsePointer(le)}};Parser$1.pointer32=function(le){return function(){return this.parsePointer32(le)}};Parser$1.tag=Parser$1.prototype.parseTag;Parser$1.byte=Parser$1.prototype.parseByte;Parser$1.uShort=Parser$1.offset16=Parser$1.prototype.parseUShort;Parser$1.uShortList=Parser$1.prototype.parseUShortList;Parser$1.uLong=Parser$1.offset32=Parser$1.prototype.parseULong;Parser$1.uLongList=Parser$1.prototype.parseULongList;Parser$1.struct=Parser$1.prototype.parseStruct;Parser$1.coverage=Parser$1.prototype.parseCoverage;Parser$1.classDef=Parser$1.prototype.parseClassDef;var langSysTable={reserved:Parser$1.uShort,reqFeatureIndex:Parser$1.uShort,featureIndexes:Parser$1.uShortList};Parser$1.prototype.parseScriptList=function(){return this.parsePointer(Parser$1.recordList({tag:Parser$1.tag,script:Parser$1.pointer({defaultLangSys:Parser$1.pointer(langSysTable),langSysRecords:Parser$1.recordList({tag:Parser$1.tag,langSys:Parser$1.pointer(langSysTable)})})}))||[]};Parser$1.prototype.parseFeatureList=function(){return this.parsePointer(Parser$1.recordList({tag:Parser$1.tag,feature:Parser$1.pointer({featureParams:Parser$1.offset16,lookupListIndexes:Parser$1.uShortList})}))||[]};Parser$1.prototype.parseLookupList=function(le){return this.parsePointer(Parser$1.list(Parser$1.pointer(function(){var oe=this.parseUShort();check$1.argument(1<=oe&&oe<=9,"GPOS/GSUB lookup type "+oe+" unknown.");var ie=this.parseUShort(),ue=ie&16;return{lookupType:oe,lookupFlag:ie,subtables:this.parseList(Parser$1.pointer(le[oe])),markFilteringSet:ue?this.parseUShort():void 0}})))||[]};Parser$1.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var le=this.parseUShort(),oe=this.parseUShort();check$1.argument(le===1&&oe<1,"GPOS/GSUB feature variations table unknown.");var ie=this.parseRecordList32({conditionSetOffset:Parser$1.offset32,featureTableSubstitutionOffset:Parser$1.offset32});return ie})||[]};var parse={getByte,getCard8:getByte,getUShort,getCard16:getUShort,getShort,getULong,getFixed,getTag,getOffset,getBytes,bytesToString,Parser:Parser$1};function parseCmapTableFormat12(le,oe){oe.parseUShort(),le.length=oe.parseULong(),le.language=oe.parseULong();var ie;le.groupCount=ie=oe.parseULong(),le.glyphIndexMap={};for(var ue=0;ue<ie;ue+=1)for(var de=oe.parseULong(),he=oe.parseULong(),pe=oe.parseULong(),_e=de;_e<=he;_e+=1)le.glyphIndexMap[_e]=pe,pe++}function parseCmapTableFormat4(le,oe,ie,ue,de){le.length=oe.parseUShort(),le.language=oe.parseUShort();var he;le.segCount=he=oe.parseUShort()>>1,oe.skip("uShort",3),le.glyphIndexMap={};for(var pe=new parse.Parser(ie,ue+de+14),_e=new parse.Parser(ie,ue+de+16+he*2),Ce=new parse.Parser(ie,ue+de+16+he*4),xe=new parse.Parser(ie,ue+de+16+he*6),Ie=ue+de+16+he*8,$e=0;$e<he-1;$e+=1)for(var Ne=void 0,Oe=pe.parseUShort(),Fe=_e.parseUShort(),Ve=Ce.parseShort(),ze=xe.parseUShort(),Ue=Fe;Ue<=Oe;Ue+=1)ze!==0?(Ie=xe.offset+xe.relativeOffset-2,Ie+=ze,Ie+=(Ue-Fe)*2,Ne=parse.getUShort(ie,Ie),Ne!==0&&(Ne=Ne+Ve&65535)):Ne=Ue+Ve&65535,le.glyphIndexMap[Ue]=Ne}function parseCmapTable(le,oe){var ie={};ie.version=parse.getUShort(le,oe),check$1.argument(ie.version===0,"cmap table version should be 0."),ie.numTables=parse.getUShort(le,oe+2);for(var ue=-1,de=ie.numTables-1;de>=0;de-=1){var he=parse.getUShort(le,oe+4+de*8),pe=parse.getUShort(le,oe+4+de*8+2);if(he===3&&(pe===0||pe===1||pe===10)||he===0&&(pe===0||pe===1||pe===2||pe===3||pe===4)){ue=parse.getULong(le,oe+4+de*8+4);break}}if(ue===-1)throw new Error("No valid cmap sub-tables found.");var _e=new parse.Parser(le,oe+ue);if(ie.format=_e.parseUShort(),ie.format===12)parseCmapTableFormat12(ie,_e);else if(ie.format===4)parseCmapTableFormat4(ie,_e,le,oe,ue);else throw new Error("Only format 4 and 12 cmap tables are supported (found format "+ie.format+").");return ie}function addSegment(le,oe,ie){le.segments.push({end:oe,start:oe,delta:-(oe-ie),offset:0,glyphIndex:ie})}function addTerminatorSegment(le){le.segments.push({end:65535,start:65535,delta:1,offset:0})}function makeCmapTable(le){var oe=!0,ie;for(ie=le.length-1;ie>0;ie-=1){var ue=le.get(ie);if(ue.unicode>65535){oe=!1;break}}var de=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:oe?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:oe?12:20}];oe||(de=de.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),de=de.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var he=new table.Table("cmap",de);for(he.segments=[],ie=0;ie<le.length;ie+=1){for(var pe=le.get(ie),_e=0;_e<pe.unicodes.length;_e+=1)addSegment(he,pe.unicodes[_e],ie);he.segments=he.segments.sort(function(Pt,qe){return Pt.start-qe.start})}addTerminatorSegment(he);var Ce=he.segments.length,xe=0,Ie=[],$e=[],Ne=[],Oe=[],Fe=[],Ve=[];for(ie=0;ie<Ce;ie+=1){var ze=he.segments[ie];ze.end<=65535&&ze.start<=65535?(Ie=Ie.concat({name:"end_"+ie,type:"USHORT",value:ze.end}),$e=$e.concat({name:"start_"+ie,type:"USHORT",value:ze.start}),Ne=Ne.concat({name:"idDelta_"+ie,type:"SHORT",value:ze.delta}),Oe=Oe.concat({name:"idRangeOffset_"+ie,type:"USHORT",value:ze.offset}),ze.glyphId!==void 0&&(Fe=Fe.concat({name:"glyph_"+ie,type:"USHORT",value:ze.glyphId}))):xe+=1,!oe&&ze.glyphIndex!==void 0&&(Ve=Ve.concat({name:"cmap12Start_"+ie,type:"ULONG",value:ze.start}),Ve=Ve.concat({name:"cmap12End_"+ie,type:"ULONG",value:ze.end}),Ve=Ve.concat({name:"cmap12Glyph_"+ie,type:"ULONG",value:ze.glyphIndex}))}if(he.segCountX2=(Ce-xe)*2,he.searchRange=Math.pow(2,Math.floor(Math.log(Ce-xe)/Math.log(2)))*2,he.entrySelector=Math.log(he.searchRange/2)/Math.log(2),he.rangeShift=he.segCountX2-he.searchRange,he.fields=he.fields.concat(Ie),he.fields.push({name:"reservedPad",type:"USHORT",value:0}),he.fields=he.fields.concat($e),he.fields=he.fields.concat(Ne),he.fields=he.fields.concat(Oe),he.fields=he.fields.concat(Fe),he.cmap4Length=14+Ie.length*2+2+$e.length*2+Ne.length*2+Oe.length*2+Fe.length*2,!oe){var Ue=16+Ve.length*4;he.cmap12Offset=12+2*2+4+he.cmap4Length,he.fields=he.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:Ue},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:Ve.length/3}]),he.fields=he.fields.concat(Ve)}return he}var cmap={parse:parseCmapTable,make:makeCmapTable},cffStandardStrings=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],cffStandardEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],cffExpertEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],standardNames=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function DefaultEncoding(le){this.font=le}DefaultEncoding.prototype.charToGlyphIndex=function(le){var oe=le.codePointAt(0),ie=this.font.glyphs;if(ie){for(var ue=0;ue<ie.length;ue+=1)for(var de=ie.get(ue),he=0;he<de.unicodes.length;he+=1)if(de.unicodes[he]===oe)return ue}return null};function CmapEncoding(le){this.cmap=le}CmapEncoding.prototype.charToGlyphIndex=function(le){return this.cmap.glyphIndexMap[le.codePointAt(0)]||0};function CffEncoding(le,oe){this.encoding=le,this.charset=oe}CffEncoding.prototype.charToGlyphIndex=function(le){var oe=le.codePointAt(0),ie=this.encoding[oe];return this.charset.indexOf(ie)};function GlyphNames(le){switch(le.version){case 1:this.names=standardNames.slice();break;case 2:this.names=new Array(le.numberOfGlyphs);for(var oe=0;oe<le.numberOfGlyphs;oe++)le.glyphNameIndex[oe]<standardNames.length?this.names[oe]=standardNames[le.glyphNameIndex[oe]]:this.names[oe]=le.names[le.glyphNameIndex[oe]-standardNames.length];break;case 2.5:this.names=new Array(le.numberOfGlyphs);for(var ie=0;ie<le.numberOfGlyphs;ie++)this.names[ie]=standardNames[ie+le.glyphNameIndex[ie]];break;case 3:this.names=[];break;default:this.names=[];break}}GlyphNames.prototype.nameToGlyphIndex=function(le){return this.names.indexOf(le)};GlyphNames.prototype.glyphIndexToName=function(le){return this.names[le]};function addGlyphNamesAll(le){for(var oe,ie=le.tables.cmap.glyphIndexMap,ue=Object.keys(ie),de=0;de<ue.length;de+=1){var he=ue[de],pe=ie[he];oe=le.glyphs.get(pe),oe.addUnicode(parseInt(he))}for(var _e=0;_e<le.glyphs.length;_e+=1)oe=le.glyphs.get(_e),le.cffEncoding?le.isCIDFont?oe.name="gid"+_e:oe.name=le.cffEncoding.charset[_e]:le.glyphNames.names&&(oe.name=le.glyphNames.glyphIndexToName(_e))}function addGlyphNamesToUnicodeMap(le){le._IndexToUnicodeMap={};for(var oe=le.tables.cmap.glyphIndexMap,ie=Object.keys(oe),ue=0;ue<ie.length;ue+=1){var de=ie[ue],he=oe[de];le._IndexToUnicodeMap[he]===void 0?le._IndexToUnicodeMap[he]={unicodes:[parseInt(de)]}:le._IndexToUnicodeMap[he].unicodes.push(parseInt(de))}}function addGlyphNames(le,oe){oe.lowMemory?addGlyphNamesToUnicodeMap(le):addGlyphNamesAll(le)}function line(le,oe,ie,ue,de){le.beginPath(),le.moveTo(oe,ie),le.lineTo(ue,de),le.stroke()}var draw={line};function getPathDefinition(le,oe){var ie=oe||new Path$1;return{configurable:!0,get:function(){return typeof ie=="function"&&(ie=ie()),ie},set:function(ue){ie=ue}}}function Glyph(le){this.bindConstructorValues(le)}Glyph.prototype.bindConstructorValues=function(le){this.index=le.index||0,this.name=le.name||null,this.unicode=le.unicode||void 0,this.unicodes=le.unicodes||le.unicode!==void 0?[le.unicode]:[],"xMin"in le&&(this.xMin=le.xMin),"yMin"in le&&(this.yMin=le.yMin),"xMax"in le&&(this.xMax=le.xMax),"yMax"in le&&(this.yMax=le.yMax),"advanceWidth"in le&&(this.advanceWidth=le.advanceWidth),Object.defineProperty(this,"path",getPathDefinition(this,le.path))};Glyph.prototype.addUnicode=function(le){this.unicodes.length===0&&(this.unicode=le),this.unicodes.push(le)};Glyph.prototype.getBoundingBox=function(){return this.path.getBoundingBox()};Glyph.prototype.getPath=function(le,oe,ie,ue,de){le=le!==void 0?le:0,oe=oe!==void 0?oe:0,ie=ie!==void 0?ie:72;var he,pe;ue||(ue={});var _e=ue.xScale,Ce=ue.yScale;if(ue.hinting&&de&&de.hinting&&(pe=this.path&&de.hinting.exec(this,ie)),pe)he=de.hinting.getCommands(pe),le=Math.round(le),oe=Math.round(oe),_e=Ce=1;else{he=this.path.commands;var xe=1/(this.path.unitsPerEm||1e3)*ie;_e===void 0&&(_e=xe),Ce===void 0&&(Ce=xe)}for(var Ie=new Path$1,$e=0;$e<he.length;$e+=1){var Ne=he[$e];Ne.type==="M"?Ie.moveTo(le+Ne.x*_e,oe+-Ne.y*Ce):Ne.type==="L"?Ie.lineTo(le+Ne.x*_e,oe+-Ne.y*Ce):Ne.type==="Q"?Ie.quadraticCurveTo(le+Ne.x1*_e,oe+-Ne.y1*Ce,le+Ne.x*_e,oe+-Ne.y*Ce):Ne.type==="C"?Ie.curveTo(le+Ne.x1*_e,oe+-Ne.y1*Ce,le+Ne.x2*_e,oe+-Ne.y2*Ce,le+Ne.x*_e,oe+-Ne.y*Ce):Ne.type==="Z"&&Ie.closePath()}return Ie};Glyph.prototype.getContours=function(){if(this.points===void 0)return[];for(var le=[],oe=[],ie=0;ie<this.points.length;ie+=1){var ue=this.points[ie];oe.push(ue),ue.lastPointOfContour&&(le.push(oe),oe=[])}return check$1.argument(oe.length===0,"There are still points left in the current contour."),le};Glyph.prototype.getMetrics=function(){for(var le=this.path.commands,oe=[],ie=[],ue=0;ue<le.length;ue+=1){var de=le[ue];de.type!=="Z"&&(oe.push(de.x),ie.push(de.y)),(de.type==="Q"||de.type==="C")&&(oe.push(de.x1),ie.push(de.y1)),de.type==="C"&&(oe.push(de.x2),ie.push(de.y2))}var he={xMin:Math.min.apply(null,oe),yMin:Math.min.apply(null,ie),xMax:Math.max.apply(null,oe),yMax:Math.max.apply(null,ie),leftSideBearing:this.leftSideBearing};return isFinite(he.xMin)||(he.xMin=0),isFinite(he.xMax)||(he.xMax=this.advanceWidth),isFinite(he.yMin)||(he.yMin=0),isFinite(he.yMax)||(he.yMax=0),he.rightSideBearing=this.advanceWidth-he.leftSideBearing-(he.xMax-he.xMin),he};Glyph.prototype.draw=function(le,oe,ie,ue,de){this.getPath(oe,ie,ue,de).draw(le)};Glyph.prototype.drawPoints=function(le,oe,ie,ue){function de($e,Ne,Oe,Fe){le.beginPath();for(var Ve=0;Ve<$e.length;Ve+=1)le.moveTo(Ne+$e[Ve].x*Fe,Oe+$e[Ve].y*Fe),le.arc(Ne+$e[Ve].x*Fe,Oe+$e[Ve].y*Fe,2,0,Math.PI*2,!1);le.closePath(),le.fill()}oe=oe!==void 0?oe:0,ie=ie!==void 0?ie:0,ue=ue!==void 0?ue:24;for(var he=1/this.path.unitsPerEm*ue,pe=[],_e=[],Ce=this.path,xe=0;xe<Ce.commands.length;xe+=1){var Ie=Ce.commands[xe];Ie.x!==void 0&&pe.push({x:Ie.x,y:-Ie.y}),Ie.x1!==void 0&&_e.push({x:Ie.x1,y:-Ie.y1}),Ie.x2!==void 0&&_e.push({x:Ie.x2,y:-Ie.y2})}le.fillStyle="blue",de(pe,oe,ie,he),le.fillStyle="red",de(_e,oe,ie,he)};Glyph.prototype.drawMetrics=function(le,oe,ie,ue){var de;oe=oe!==void 0?oe:0,ie=ie!==void 0?ie:0,ue=ue!==void 0?ue:24,de=1/this.path.unitsPerEm*ue,le.lineWidth=1,le.strokeStyle="black",draw.line(le,oe,-1e4,oe,1e4),draw.line(le,-1e4,ie,1e4,ie);var he=this.xMin||0,pe=this.yMin||0,_e=this.xMax||0,Ce=this.yMax||0,xe=this.advanceWidth||0;le.strokeStyle="blue",draw.line(le,oe+he*de,-1e4,oe+he*de,1e4),draw.line(le,oe+_e*de,-1e4,oe+_e*de,1e4),draw.line(le,-1e4,ie+-pe*de,1e4,ie+-pe*de),draw.line(le,-1e4,ie+-Ce*de,1e4,ie+-Ce*de),le.strokeStyle="green",draw.line(le,oe+xe*de,-1e4,oe+xe*de,1e4)};function defineDependentProperty(le,oe,ie){Object.defineProperty(le,oe,{get:function(){return le.path,le[ie]},set:function(ue){le[ie]=ue},enumerable:!0,configurable:!0})}function GlyphSet(le,oe){if(this.font=le,this.glyphs={},Array.isArray(oe))for(var ie=0;ie<oe.length;ie++){var ue=oe[ie];ue.path.unitsPerEm=le.unitsPerEm,this.glyphs[ie]=ue}this.length=oe&&oe.length||0}GlyphSet.prototype.get=function(le){if(this.glyphs[le]===void 0){this.font._push(le),typeof this.glyphs[le]=="function"&&(this.glyphs[le]=this.glyphs[le]());var oe=this.glyphs[le],ie=this.font._IndexToUnicodeMap[le];if(ie)for(var ue=0;ue<ie.unicodes.length;ue++)oe.addUnicode(ie.unicodes[ue]);this.font.cffEncoding?this.font.isCIDFont?oe.name="gid"+le:oe.name=this.font.cffEncoding.charset[le]:this.font.glyphNames.names&&(oe.name=this.font.glyphNames.glyphIndexToName(le)),this.glyphs[le].advanceWidth=this.font._hmtxTableData[le].advanceWidth,this.glyphs[le].leftSideBearing=this.font._hmtxTableData[le].leftSideBearing}else typeof this.glyphs[le]=="function"&&(this.glyphs[le]=this.glyphs[le]());return this.glyphs[le]};GlyphSet.prototype.push=function(le,oe){this.glyphs[le]=oe,this.length++};function glyphLoader(le,oe){return new Glyph({index:oe,font:le})}function ttfGlyphLoader(le,oe,ie,ue,de,he){return function(){var pe=new Glyph({index:oe,font:le});return pe.path=function(){ie(pe,ue,de);var _e=he(le.glyphs,pe);return _e.unitsPerEm=le.unitsPerEm,_e},defineDependentProperty(pe,"xMin","_xMin"),defineDependentProperty(pe,"xMax","_xMax"),defineDependentProperty(pe,"yMin","_yMin"),defineDependentProperty(pe,"yMax","_yMax"),pe}}function cffGlyphLoader(le,oe,ie,ue){return function(){var de=new Glyph({index:oe,font:le});return de.path=function(){var he=ie(le,de,ue);return he.unitsPerEm=le.unitsPerEm,he},de}}var glyphset={GlyphSet,glyphLoader,ttfGlyphLoader,cffGlyphLoader};function equals$1(le,oe){if(le===oe)return!0;if(Array.isArray(le)&&Array.isArray(oe)){if(le.length!==oe.length)return!1;for(var ie=0;ie<le.length;ie+=1)if(!equals$1(le[ie],oe[ie]))return!1;return!0}else return!1}function calcCFFSubroutineBias(le){var oe;return le.length<1240?oe=107:le.length<33900?oe=1131:oe=32768,oe}function parseCFFIndex(le,oe,ie){var ue=[],de=[],he=parse.getCard16(le,oe),pe,_e;if(he!==0){var Ce=parse.getByte(le,oe+2);pe=oe+(he+1)*Ce+2;for(var xe=oe+3,Ie=0;Ie<he+1;Ie+=1)ue.push(parse.getOffset(le,xe,Ce)),xe+=Ce;_e=pe+ue[he]}else _e=oe+2;for(var $e=0;$e<ue.length-1;$e+=1){var Ne=parse.getBytes(le,pe+ue[$e],pe+ue[$e+1]);ie&&(Ne=ie(Ne)),de.push(Ne)}return{objects:de,startOffset:oe,endOffset:_e}}function parseCFFIndexLowMemory(le,oe){var ie=[],ue=parse.getCard16(le,oe),de,he;if(ue!==0){var pe=parse.getByte(le,oe+2);de=oe+(ue+1)*pe+2;for(var _e=oe+3,Ce=0;Ce<ue+1;Ce+=1)ie.push(parse.getOffset(le,_e,pe)),_e+=pe;he=de+ie[ue]}else he=oe+2;return{offsets:ie,startOffset:oe,endOffset:he}}function getCffIndexObject(le,oe,ie,ue,de){var he=parse.getCard16(ie,ue),pe=0;if(he!==0){var _e=parse.getByte(ie,ue+2);pe=ue+(he+1)*_e+2}var Ce=parse.getBytes(ie,pe+oe[le],pe+oe[le+1]);return Ce}function parseFloatOperand(le){for(var oe="",ie=15,ue=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var de=le.parseByte(),he=de>>4,pe=de&15;if(he===ie||(oe+=ue[he],pe===ie))break;oe+=ue[pe]}return parseFloat(oe)}function parseOperand(le,oe){var ie,ue,de,he;if(oe===28)return ie=le.parseByte(),ue=le.parseByte(),ie<<8|ue;if(oe===29)return ie=le.parseByte(),ue=le.parseByte(),de=le.parseByte(),he=le.parseByte(),ie<<24|ue<<16|de<<8|he;if(oe===30)return parseFloatOperand(le);if(oe>=32&&oe<=246)return oe-139;if(oe>=247&&oe<=250)return ie=le.parseByte(),(oe-247)*256+ie+108;if(oe>=251&&oe<=254)return ie=le.parseByte(),-(oe-251)*256-ie-108;throw new Error("Invalid b0 "+oe)}function entriesToObject(le){for(var oe={},ie=0;ie<le.length;ie+=1){var ue=le[ie][0],de=le[ie][1],he=void 0;if(de.length===1?he=de[0]:he=de,oe.hasOwnProperty(ue)&&!isNaN(oe[ue]))throw new Error("Object "+oe+" already has key "+ue);oe[ue]=he}return oe}function parseCFFDict(le,oe,ie){oe=oe!==void 0?oe:0;var ue=new parse.Parser(le,oe),de=[],he=[];for(ie=ie!==void 0?ie:le.length;ue.relativeOffset<ie;){var pe=ue.parseByte();pe<=21?(pe===12&&(pe=1200+ue.parseByte()),de.push([pe,he]),he=[]):he.push(parseOperand(ue,pe))}return entriesToObject(de)}function getCFFString(le,oe){return oe<=390?oe=cffStandardStrings[oe]:oe=le[oe-391],oe}function interpretDict(le,oe,ie){for(var ue={},de,he=0;he<oe.length;he+=1){var pe=oe[he];if(Array.isArray(pe.type)){var _e=[];_e.length=pe.type.length;for(var Ce=0;Ce<pe.type.length;Ce++)de=le[pe.op]!==void 0?le[pe.op][Ce]:void 0,de===void 0&&(de=pe.value!==void 0&&pe.value[Ce]!==void 0?pe.value[Ce]:null),pe.type[Ce]==="SID"&&(de=getCFFString(ie,de)),_e[Ce]=de;ue[pe.name]=_e}else de=le[pe.op],de===void 0&&(de=pe.value!==void 0?pe.value:null),pe.type==="SID"&&(de=getCFFString(ie,de)),ue[pe.name]=de}return ue}function parseCFFHeader(le,oe){var ie={};return ie.formatMajor=parse.getCard8(le,oe),ie.formatMinor=parse.getCard8(le,oe+1),ie.size=parse.getCard8(le,oe+2),ie.offsetSize=parse.getCard8(le,oe+3),ie.startOffset=oe,ie.endOffset=oe+4,ie}var TOP_DICT_META=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],PRIVATE_DICT_META=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function parseCFFTopDict(le,oe){var ie=parseCFFDict(le,0,le.byteLength);return interpretDict(ie,TOP_DICT_META,oe)}function parseCFFPrivateDict(le,oe,ie,ue){var de=parseCFFDict(le,oe,ie);return interpretDict(de,PRIVATE_DICT_META,ue)}function gatherCFFTopDicts(le,oe,ie,ue){for(var de=[],he=0;he<ie.length;he+=1){var pe=new DataView(new Uint8Array(ie[he]).buffer),_e=parseCFFTopDict(pe,ue);_e._subrs=[],_e._subrsBias=0,_e._defaultWidthX=0,_e._nominalWidthX=0;var Ce=_e.private[0],xe=_e.private[1];if(Ce!==0&&xe!==0){var Ie=parseCFFPrivateDict(le,xe+oe,Ce,ue);if(_e._defaultWidthX=Ie.defaultWidthX,_e._nominalWidthX=Ie.nominalWidthX,Ie.subrs!==0){var $e=xe+Ie.subrs,Ne=parseCFFIndex(le,$e+oe);_e._subrs=Ne.objects,_e._subrsBias=calcCFFSubroutineBias(_e._subrs)}_e._privateDict=Ie}de.push(_e)}return de}function parseCFFCharset(le,oe,ie,ue){var de,he,pe=new parse.Parser(le,oe);ie-=1;var _e=[".notdef"],Ce=pe.parseCard8();if(Ce===0)for(var xe=0;xe<ie;xe+=1)de=pe.parseSID(),_e.push(getCFFString(ue,de));else if(Ce===1)for(;_e.length<=ie;){de=pe.parseSID(),he=pe.parseCard8();for(var Ie=0;Ie<=he;Ie+=1)_e.push(getCFFString(ue,de)),de+=1}else if(Ce===2)for(;_e.length<=ie;){de=pe.parseSID(),he=pe.parseCard16();for(var $e=0;$e<=he;$e+=1)_e.push(getCFFString(ue,de)),de+=1}else throw new Error("Unknown charset format "+Ce);return _e}function parseCFFEncoding(le,oe,ie){var ue,de={},he=new parse.Parser(le,oe),pe=he.parseCard8();if(pe===0)for(var _e=he.parseCard8(),Ce=0;Ce<_e;Ce+=1)ue=he.parseCard8(),de[ue]=Ce;else if(pe===1){var xe=he.parseCard8();ue=1;for(var Ie=0;Ie<xe;Ie+=1)for(var $e=he.parseCard8(),Ne=he.parseCard8(),Oe=$e;Oe<=$e+Ne;Oe+=1)de[Oe]=ue,ue+=1}else throw new Error("Unknown encoding format "+pe);return new CffEncoding(de,ie)}function parseCFFCharstring(le,oe,ie){var ue,de,he,pe,_e=new Path$1,Ce=[],xe=0,Ie=!1,$e=!1,Ne=0,Oe=0,Fe,Ve,ze,Ue;if(le.isCIDFont){var Pt=le.tables.cff.topDict._fdSelect[oe.index],qe=le.tables.cff.topDict._fdArray[Pt];Fe=qe._subrs,Ve=qe._subrsBias,ze=qe._defaultWidthX,Ue=qe._nominalWidthX}else Fe=le.tables.cff.topDict._subrs,Ve=le.tables.cff.topDict._subrsBias,ze=le.tables.cff.topDict._defaultWidthX,Ue=le.tables.cff.topDict._nominalWidthX;var Et=ze;function kt(Lt,jt){$e&&_e.closePath(),_e.moveTo(Lt,jt),$e=!0}function At(){var Lt;Lt=Ce.length%2!==0,Lt&&!Ie&&(Et=Ce.shift()+Ue),xe+=Ce.length>>1,Ce.length=0,Ie=!0}function Dt(Lt){for(var jt,_n,bn,vn,Tn,$n,wn,Cn,Sn,In,En,xn,kn=0;kn<Lt.length;){var On=Lt[kn];switch(kn+=1,On){case 1:At();break;case 3:At();break;case 4:Ce.length>1&&!Ie&&(Et=Ce.shift()+Ue,Ie=!0),Oe+=Ce.pop(),kt(Ne,Oe);break;case 5:for(;Ce.length>0;)Ne+=Ce.shift(),Oe+=Ce.shift(),_e.lineTo(Ne,Oe);break;case 6:for(;Ce.length>0&&(Ne+=Ce.shift(),_e.lineTo(Ne,Oe),Ce.length!==0);)Oe+=Ce.shift(),_e.lineTo(Ne,Oe);break;case 7:for(;Ce.length>0&&(Oe+=Ce.shift(),_e.lineTo(Ne,Oe),Ce.length!==0);)Ne+=Ce.shift(),_e.lineTo(Ne,Oe);break;case 8:for(;Ce.length>0;)ue=Ne+Ce.shift(),de=Oe+Ce.shift(),he=ue+Ce.shift(),pe=de+Ce.shift(),Ne=he+Ce.shift(),Oe=pe+Ce.shift(),_e.curveTo(ue,de,he,pe,Ne,Oe);break;case 10:Tn=Ce.pop()+Ve,$n=Fe[Tn],$n&&Dt($n);break;case 11:return;case 12:switch(On=Lt[kn],kn+=1,On){case 35:ue=Ne+Ce.shift(),de=Oe+Ce.shift(),he=ue+Ce.shift(),pe=de+Ce.shift(),wn=he+Ce.shift(),Cn=pe+Ce.shift(),Sn=wn+Ce.shift(),In=Cn+Ce.shift(),En=Sn+Ce.shift(),xn=In+Ce.shift(),Ne=En+Ce.shift(),Oe=xn+Ce.shift(),Ce.shift(),_e.curveTo(ue,de,he,pe,wn,Cn),_e.curveTo(Sn,In,En,xn,Ne,Oe);break;case 34:ue=Ne+Ce.shift(),de=Oe,he=ue+Ce.shift(),pe=de+Ce.shift(),wn=he+Ce.shift(),Cn=pe,Sn=wn+Ce.shift(),In=pe,En=Sn+Ce.shift(),xn=Oe,Ne=En+Ce.shift(),_e.curveTo(ue,de,he,pe,wn,Cn),_e.curveTo(Sn,In,En,xn,Ne,Oe);break;case 36:ue=Ne+Ce.shift(),de=Oe+Ce.shift(),he=ue+Ce.shift(),pe=de+Ce.shift(),wn=he+Ce.shift(),Cn=pe,Sn=wn+Ce.shift(),In=pe,En=Sn+Ce.shift(),xn=In+Ce.shift(),Ne=En+Ce.shift(),_e.curveTo(ue,de,he,pe,wn,Cn),_e.curveTo(Sn,In,En,xn,Ne,Oe);break;case 37:ue=Ne+Ce.shift(),de=Oe+Ce.shift(),he=ue+Ce.shift(),pe=de+Ce.shift(),wn=he+Ce.shift(),Cn=pe+Ce.shift(),Sn=wn+Ce.shift(),In=Cn+Ce.shift(),En=Sn+Ce.shift(),xn=In+Ce.shift(),Math.abs(En-Ne)>Math.abs(xn-Oe)?Ne=En+Ce.shift():Oe=xn+Ce.shift(),_e.curveTo(ue,de,he,pe,wn,Cn),_e.curveTo(Sn,In,En,xn,Ne,Oe);break;default:Ce.length=0}break;case 14:Ce.length>0&&!Ie&&(Et=Ce.shift()+Ue,Ie=!0),$e&&(_e.closePath(),$e=!1);break;case 18:At();break;case 19:case 20:At(),kn+=xe+7>>3;break;case 21:Ce.length>2&&!Ie&&(Et=Ce.shift()+Ue,Ie=!0),Oe+=Ce.pop(),Ne+=Ce.pop(),kt(Ne,Oe);break;case 22:Ce.length>1&&!Ie&&(Et=Ce.shift()+Ue,Ie=!0),Ne+=Ce.pop(),kt(Ne,Oe);break;case 23:At();break;case 24:for(;Ce.length>2;)ue=Ne+Ce.shift(),de=Oe+Ce.shift(),he=ue+Ce.shift(),pe=de+Ce.shift(),Ne=he+Ce.shift(),Oe=pe+Ce.shift(),_e.curveTo(ue,de,he,pe,Ne,Oe);Ne+=Ce.shift(),Oe+=Ce.shift(),_e.lineTo(Ne,Oe);break;case 25:for(;Ce.length>6;)Ne+=Ce.shift(),Oe+=Ce.shift(),_e.lineTo(Ne,Oe);ue=Ne+Ce.shift(),de=Oe+Ce.shift(),he=ue+Ce.shift(),pe=de+Ce.shift(),Ne=he+Ce.shift(),Oe=pe+Ce.shift(),_e.curveTo(ue,de,he,pe,Ne,Oe);break;case 26:for(Ce.length%2&&(Ne+=Ce.shift());Ce.length>0;)ue=Ne,de=Oe+Ce.shift(),he=ue+Ce.shift(),pe=de+Ce.shift(),Ne=he,Oe=pe+Ce.shift(),_e.curveTo(ue,de,he,pe,Ne,Oe);break;case 27:for(Ce.length%2&&(Oe+=Ce.shift());Ce.length>0;)ue=Ne+Ce.shift(),de=Oe,he=ue+Ce.shift(),pe=de+Ce.shift(),Ne=he+Ce.shift(),Oe=pe,_e.curveTo(ue,de,he,pe,Ne,Oe);break;case 28:jt=Lt[kn],_n=Lt[kn+1],Ce.push((jt<<24|_n<<16)>>16),kn+=2;break;case 29:Tn=Ce.pop()+le.gsubrsBias,$n=le.gsubrs[Tn],$n&&Dt($n);break;case 30:for(;Ce.length>0&&(ue=Ne,de=Oe+Ce.shift(),he=ue+Ce.shift(),pe=de+Ce.shift(),Ne=he+Ce.shift(),Oe=pe+(Ce.length===1?Ce.shift():0),_e.curveTo(ue,de,he,pe,Ne,Oe),Ce.length!==0);)ue=Ne+Ce.shift(),de=Oe,he=ue+Ce.shift(),pe=de+Ce.shift(),Oe=pe+Ce.shift(),Ne=he+(Ce.length===1?Ce.shift():0),_e.curveTo(ue,de,he,pe,Ne,Oe);break;case 31:for(;Ce.length>0&&(ue=Ne+Ce.shift(),de=Oe,he=ue+Ce.shift(),pe=de+Ce.shift(),Oe=pe+Ce.shift(),Ne=he+(Ce.length===1?Ce.shift():0),_e.curveTo(ue,de,he,pe,Ne,Oe),Ce.length!==0);)ue=Ne,de=Oe+Ce.shift(),he=ue+Ce.shift(),pe=de+Ce.shift(),Ne=he+Ce.shift(),Oe=pe+(Ce.length===1?Ce.shift():0),_e.curveTo(ue,de,he,pe,Ne,Oe);break;default:On<32||(On<247?Ce.push(On-139):On<251?(jt=Lt[kn],kn+=1,Ce.push((On-247)*256+jt+108)):On<255?(jt=Lt[kn],kn+=1,Ce.push(-(On-251)*256-jt-108)):(jt=Lt[kn],_n=Lt[kn+1],bn=Lt[kn+2],vn=Lt[kn+3],kn+=4,Ce.push((jt<<24|_n<<16|bn<<8|vn)/65536)))}}}return Dt(ie),oe.advanceWidth=Et,_e}function parseCFFFDSelect(le,oe,ie,ue){var de=[],he,pe=new parse.Parser(le,oe),_e=pe.parseCard8();if(_e===0)for(var Ce=0;Ce<ie;Ce++){if(he=pe.parseCard8(),he>=ue)throw new Error("CFF table CID Font FDSelect has bad FD index value "+he+" (FD count "+ue+")");de.push(he)}else if(_e===3){var xe=pe.parseCard16(),Ie=pe.parseCard16();if(Ie!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+Ie);for(var $e,Ne=0;Ne<xe;Ne++){if(he=pe.parseCard8(),$e=pe.parseCard16(),he>=ue)throw new Error("CFF table CID Font FDSelect has bad FD index value "+he+" (FD count "+ue+")");if($e>ie)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+$e);for(;Ie<$e;Ie++)de.push(he);Ie=$e}if($e!==ie)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+$e)}else throw new Error("CFF Table CID Font FDSelect table has unsupported format "+_e);return de}function parseCFFTable(le,oe,ie,ue){ie.tables.cff={};var de=parseCFFHeader(le,oe),he=parseCFFIndex(le,de.endOffset,parse.bytesToString),pe=parseCFFIndex(le,he.endOffset),_e=parseCFFIndex(le,pe.endOffset,parse.bytesToString),Ce=parseCFFIndex(le,_e.endOffset);ie.gsubrs=Ce.objects,ie.gsubrsBias=calcCFFSubroutineBias(ie.gsubrs);var xe=gatherCFFTopDicts(le,oe,pe.objects,_e.objects);if(xe.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+xe.length);var Ie=xe[0];if(ie.tables.cff.topDict=Ie,Ie._privateDict&&(ie.defaultWidthX=Ie._privateDict.defaultWidthX,ie.nominalWidthX=Ie._privateDict.nominalWidthX),Ie.ros[0]!==void 0&&Ie.ros[1]!==void 0&&(ie.isCIDFont=!0),ie.isCIDFont){var $e=Ie.fdArray,Ne=Ie.fdSelect;if($e===0||Ne===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");$e+=oe;var Oe=parseCFFIndex(le,$e),Fe=gatherCFFTopDicts(le,oe,Oe.objects,_e.objects);Ie._fdArray=Fe,Ne+=oe,Ie._fdSelect=parseCFFFDSelect(le,Ne,ie.numGlyphs,Fe.length)}var Ve=oe+Ie.private[1],ze=parseCFFPrivateDict(le,Ve,Ie.private[0],_e.objects);if(ie.defaultWidthX=ze.defaultWidthX,ie.nominalWidthX=ze.nominalWidthX,ze.subrs!==0){var Ue=Ve+ze.subrs,Pt=parseCFFIndex(le,Ue);ie.subrs=Pt.objects,ie.subrsBias=calcCFFSubroutineBias(ie.subrs)}else ie.subrs=[],ie.subrsBias=0;var qe;ue.lowMemory?(qe=parseCFFIndexLowMemory(le,oe+Ie.charStrings),ie.nGlyphs=qe.offsets.length):(qe=parseCFFIndex(le,oe+Ie.charStrings),ie.nGlyphs=qe.objects.length);var Et=parseCFFCharset(le,oe+Ie.charset,ie.nGlyphs,_e.objects);if(Ie.encoding===0?ie.cffEncoding=new CffEncoding(cffStandardEncoding,Et):Ie.encoding===1?ie.cffEncoding=new CffEncoding(cffExpertEncoding,Et):ie.cffEncoding=parseCFFEncoding(le,oe+Ie.encoding,Et),ie.encoding=ie.encoding||ie.cffEncoding,ie.glyphs=new glyphset.GlyphSet(ie),ue.lowMemory)ie._push=function(Dt){var Lt=getCffIndexObject(Dt,qe.offsets,le,oe+Ie.charStrings);ie.glyphs.push(Dt,glyphset.cffGlyphLoader(ie,Dt,parseCFFCharstring,Lt))};else for(var kt=0;kt<ie.nGlyphs;kt+=1){var At=qe.objects[kt];ie.glyphs.push(kt,glyphset.cffGlyphLoader(ie,kt,parseCFFCharstring,At))}}function encodeString(le,oe){var ie,ue=cffStandardStrings.indexOf(le);return ue>=0&&(ie=ue),ue=oe.indexOf(le),ue>=0?ie=ue+cffStandardStrings.length:(ie=cffStandardStrings.length+oe.length,oe.push(le)),ie}function makeHeader(){return new table.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function makeNameIndex(le){var oe=new table.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);oe.names=[];for(var ie=0;ie<le.length;ie+=1)oe.names.push({name:"name_"+ie,type:"NAME",value:le[ie]});return oe}function makeDict(le,oe,ie){for(var ue={},de=0;de<le.length;de+=1){var he=le[de],pe=oe[he.name];pe!==void 0&&!equals$1(pe,he.value)&&(he.type==="SID"&&(pe=encodeString(pe,ie)),ue[he.op]={name:he.name,type:he.type,value:pe})}return ue}function makeTopDict(le,oe){var ie=new table.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return ie.dict=makeDict(TOP_DICT_META,le,oe),ie}function makeTopDictIndex(le){var oe=new table.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return oe.topDicts=[{name:"topDict_0",type:"TABLE",value:le}],oe}function makeStringIndex(le){var oe=new table.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);oe.strings=[];for(var ie=0;ie<le.length;ie+=1)oe.strings.push({name:"string_"+ie,type:"STRING",value:le[ie]});return oe}function makeGlobalSubrIndex(){return new table.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function makeCharsets(le,oe){for(var ie=new table.Record("Charsets",[{name:"format",type:"Card8",value:0}]),ue=0;ue<le.length;ue+=1){var de=le[ue],he=encodeString(de,oe);ie.fields.push({name:"glyph_"+ue,type:"SID",value:he})}return ie}function glyphToOps(le){var oe=[],ie=le.path;oe.push({name:"width",type:"NUMBER",value:le.advanceWidth});for(var ue=0,de=0,he=0;he<ie.commands.length;he+=1){var pe=void 0,_e=void 0,Ce=ie.commands[he];if(Ce.type==="Q"){var xe=.3333333333333333,Ie=2/3;Ce={type:"C",x:Ce.x,y:Ce.y,x1:Math.round(xe*ue+Ie*Ce.x1),y1:Math.round(xe*de+Ie*Ce.y1),x2:Math.round(xe*Ce.x+Ie*Ce.x1),y2:Math.round(xe*Ce.y+Ie*Ce.y1)}}if(Ce.type==="M")pe=Math.round(Ce.x-ue),_e=Math.round(Ce.y-de),oe.push({name:"dx",type:"NUMBER",value:pe}),oe.push({name:"dy",type:"NUMBER",value:_e}),oe.push({name:"rmoveto",type:"OP",value:21}),ue=Math.round(Ce.x),de=Math.round(Ce.y);else if(Ce.type==="L")pe=Math.round(Ce.x-ue),_e=Math.round(Ce.y-de),oe.push({name:"dx",type:"NUMBER",value:pe}),oe.push({name:"dy",type:"NUMBER",value:_e}),oe.push({name:"rlineto",type:"OP",value:5}),ue=Math.round(Ce.x),de=Math.round(Ce.y);else if(Ce.type==="C"){var $e=Math.round(Ce.x1-ue),Ne=Math.round(Ce.y1-de),Oe=Math.round(Ce.x2-Ce.x1),Fe=Math.round(Ce.y2-Ce.y1);pe=Math.round(Ce.x-Ce.x2),_e=Math.round(Ce.y-Ce.y2),oe.push({name:"dx1",type:"NUMBER",value:$e}),oe.push({name:"dy1",type:"NUMBER",value:Ne}),oe.push({name:"dx2",type:"NUMBER",value:Oe}),oe.push({name:"dy2",type:"NUMBER",value:Fe}),oe.push({name:"dx",type:"NUMBER",value:pe}),oe.push({name:"dy",type:"NUMBER",value:_e}),oe.push({name:"rrcurveto",type:"OP",value:8}),ue=Math.round(Ce.x),de=Math.round(Ce.y)}}return oe.push({name:"endchar",type:"OP",value:14}),oe}function makeCharStringsIndex(le){for(var oe=new table.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),ie=0;ie<le.length;ie+=1){var ue=le.get(ie),de=glyphToOps(ue);oe.charStrings.push({name:ue.name,type:"CHARSTRING",value:de})}return oe}function makePrivateDict(le,oe){var ie=new table.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return ie.dict=makeDict(PRIVATE_DICT_META,le,oe),ie}function makeCFFTable(le,oe){for(var ie=new table.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),ue=1/oe.unitsPerEm,de={version:oe.version,fullName:oe.fullName,familyName:oe.familyName,weight:oe.weightName,fontBBox:oe.fontBBox||[0,0,0,0],fontMatrix:[ue,0,0,ue,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},he={},pe=[],_e,Ce=1;Ce<le.length;Ce+=1)_e=le.get(Ce),pe.push(_e.name);var xe=[];ie.header=makeHeader(),ie.nameIndex=makeNameIndex([oe.postScriptName]);var Ie=makeTopDict(de,xe);ie.topDictIndex=makeTopDictIndex(Ie),ie.globalSubrIndex=makeGlobalSubrIndex(),ie.charsets=makeCharsets(pe,xe),ie.charStringsIndex=makeCharStringsIndex(le),ie.privateDict=makePrivateDict(he,xe),ie.stringIndex=makeStringIndex(xe);var $e=ie.header.sizeOf()+ie.nameIndex.sizeOf()+ie.topDictIndex.sizeOf()+ie.stringIndex.sizeOf()+ie.globalSubrIndex.sizeOf();return de.charset=$e,de.encoding=0,de.charStrings=de.charset+ie.charsets.sizeOf(),de.private[1]=de.charStrings+ie.charStringsIndex.sizeOf(),Ie=makeTopDict(de,xe),ie.topDictIndex=makeTopDictIndex(Ie),ie}var cff={parse:parseCFFTable,make:makeCFFTable};function parseHeadTable(le,oe){var ie={},ue=new parse.Parser(le,oe);return ie.version=ue.parseVersion(),ie.fontRevision=Math.round(ue.parseFixed()*1e3)/1e3,ie.checkSumAdjustment=ue.parseULong(),ie.magicNumber=ue.parseULong(),check$1.argument(ie.magicNumber===1594834165,"Font header has wrong magic number."),ie.flags=ue.parseUShort(),ie.unitsPerEm=ue.parseUShort(),ie.created=ue.parseLongDateTime(),ie.modified=ue.parseLongDateTime(),ie.xMin=ue.parseShort(),ie.yMin=ue.parseShort(),ie.xMax=ue.parseShort(),ie.yMax=ue.parseShort(),ie.macStyle=ue.parseUShort(),ie.lowestRecPPEM=ue.parseUShort(),ie.fontDirectionHint=ue.parseShort(),ie.indexToLocFormat=ue.parseShort(),ie.glyphDataFormat=ue.parseShort(),ie}function makeHeadTable(le){var oe=Math.round(new Date().getTime()/1e3)+2082844800,ie=oe;return le.createdTimestamp&&(ie=le.createdTimestamp+2082844800),new table.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:ie},{name:"modified",type:"LONGDATETIME",value:oe},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],le)}var head={parse:parseHeadTable,make:makeHeadTable};function parseHheaTable(le,oe){var ie={},ue=new parse.Parser(le,oe);return ie.version=ue.parseVersion(),ie.ascender=ue.parseShort(),ie.descender=ue.parseShort(),ie.lineGap=ue.parseShort(),ie.advanceWidthMax=ue.parseUShort(),ie.minLeftSideBearing=ue.parseShort(),ie.minRightSideBearing=ue.parseShort(),ie.xMaxExtent=ue.parseShort(),ie.caretSlopeRise=ue.parseShort(),ie.caretSlopeRun=ue.parseShort(),ie.caretOffset=ue.parseShort(),ue.relativeOffset+=8,ie.metricDataFormat=ue.parseShort(),ie.numberOfHMetrics=ue.parseUShort(),ie}function makeHheaTable(le){return new table.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],le)}var hhea={parse:parseHheaTable,make:makeHheaTable};function parseHmtxTableAll(le,oe,ie,ue,de){for(var he,pe,_e=new parse.Parser(le,oe),Ce=0;Ce<ue;Ce+=1){Ce<ie&&(he=_e.parseUShort(),pe=_e.parseShort());var xe=de.get(Ce);xe.advanceWidth=he,xe.leftSideBearing=pe}}function parseHmtxTableOnLowMemory(le,oe,ie,ue,de){le._hmtxTableData={};for(var he,pe,_e=new parse.Parser(oe,ie),Ce=0;Ce<de;Ce+=1)Ce<ue&&(he=_e.parseUShort(),pe=_e.parseShort()),le._hmtxTableData[Ce]={advanceWidth:he,leftSideBearing:pe}}function parseHmtxTable(le,oe,ie,ue,de,he,pe){pe.lowMemory?parseHmtxTableOnLowMemory(le,oe,ie,ue,de):parseHmtxTableAll(oe,ie,ue,de,he)}function makeHmtxTable(le){for(var oe=new table.Table("hmtx",[]),ie=0;ie<le.length;ie+=1){var ue=le.get(ie),de=ue.advanceWidth||0,he=ue.leftSideBearing||0;oe.fields.push({name:"advanceWidth_"+ie,type:"USHORT",value:de}),oe.fields.push({name:"leftSideBearing_"+ie,type:"SHORT",value:he})}return oe}var hmtx={parse:parseHmtxTable,make:makeHmtxTable};function makeLtagTable(le){for(var oe=new table.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:le.length}]),ie="",ue=12+le.length*4,de=0;de<le.length;++de){var he=ie.indexOf(le[de]);he<0&&(he=ie.length,ie+=le[de]),oe.fields.push({name:"offset "+de,type:"USHORT",value:ue+he}),oe.fields.push({name:"length "+de,type:"USHORT",value:le[de].length})}return oe.fields.push({name:"stringPool",type:"CHARARRAY",value:ie}),oe}function parseLtagTable(le,oe){var ie=new parse.Parser(le,oe),ue=ie.parseULong();check$1.argument(ue===1,"Unsupported ltag table version."),ie.skip("uLong",1);for(var de=ie.parseULong(),he=[],pe=0;pe<de;pe++){for(var _e="",Ce=oe+ie.parseUShort(),xe=ie.parseUShort(),Ie=Ce;Ie<Ce+xe;++Ie)_e+=String.fromCharCode(le.getInt8(Ie));he.push(_e)}return he}var ltag={make:makeLtagTable,parse:parseLtagTable};function parseMaxpTable(le,oe){var ie={},ue=new parse.Parser(le,oe);return ie.version=ue.parseVersion(),ie.numGlyphs=ue.parseUShort(),ie.version===1&&(ie.maxPoints=ue.parseUShort(),ie.maxContours=ue.parseUShort(),ie.maxCompositePoints=ue.parseUShort(),ie.maxCompositeContours=ue.parseUShort(),ie.maxZones=ue.parseUShort(),ie.maxTwilightPoints=ue.parseUShort(),ie.maxStorage=ue.parseUShort(),ie.maxFunctionDefs=ue.parseUShort(),ie.maxInstructionDefs=ue.parseUShort(),ie.maxStackElements=ue.parseUShort(),ie.maxSizeOfInstructions=ue.parseUShort(),ie.maxComponentElements=ue.parseUShort(),ie.maxComponentDepth=ue.parseUShort()),ie}function makeMaxpTable(le){return new table.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:le}])}var maxp={parse:parseMaxpTable,make:makeMaxpTable},nameTableNames=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],macLanguages={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},macLanguageToScript={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},windowsLanguages={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function getLanguageCode(le,oe,ie){switch(le){case 0:if(oe===65535)return"und";if(ie)return ie[oe];break;case 1:return macLanguages[oe];case 3:return windowsLanguages[oe]}}var utf16="utf-16",macScriptEncodings={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},macLanguageEncodings={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function getEncoding(le,oe,ie){switch(le){case 0:return utf16;case 1:return macLanguageEncodings[ie]||macScriptEncodings[oe];case 3:if(oe===1||oe===10)return utf16;break}}function parseNameTable(le,oe,ie){for(var ue={},de=new parse.Parser(le,oe),he=de.parseUShort(),pe=de.parseUShort(),_e=de.offset+de.parseUShort(),Ce=0;Ce<pe;Ce++){var xe=de.parseUShort(),Ie=de.parseUShort(),$e=de.parseUShort(),Ne=de.parseUShort(),Oe=nameTableNames[Ne]||Ne,Fe=de.parseUShort(),Ve=de.parseUShort(),ze=getLanguageCode(xe,$e,ie),Ue=getEncoding(xe,Ie,$e);if(Ue!==void 0&&ze!==void 0){var Pt=void 0;if(Ue===utf16?Pt=decode.UTF16(le,_e+Ve,Fe):Pt=decode.MACSTRING(le,_e+Ve,Fe,Ue),Pt){var qe=ue[Oe];qe===void 0&&(qe=ue[Oe]={}),qe[ze]=Pt}}}return he===1&&de.parseUShort(),ue}function reverseDict(le){var oe={};for(var ie in le)oe[le[ie]]=parseInt(ie);return oe}function makeNameRecord(le,oe,ie,ue,de,he){return new table.Record("NameRecord",[{name:"platformID",type:"USHORT",value:le},{name:"encodingID",type:"USHORT",value:oe},{name:"languageID",type:"USHORT",value:ie},{name:"nameID",type:"USHORT",value:ue},{name:"length",type:"USHORT",value:de},{name:"offset",type:"USHORT",value:he}])}function findSubArray(le,oe){var ie=le.length,ue=oe.length-ie+1;e:for(var de=0;de<ue;de++)for(;de<ue;de++){for(var he=0;he<ie;he++)if(oe[de+he]!==le[he])continue e;return de}return-1}function addStringToPool(le,oe){var ie=findSubArray(le,oe);if(ie<0){ie=oe.length;for(var ue=0,de=le.length;ue<de;++ue)oe.push(le[ue])}return ie}function makeNameTable(le,oe){var ie,ue=[],de={},he=reverseDict(nameTableNames);for(var pe in le){var _e=he[pe];if(_e===void 0&&(_e=pe),ie=parseInt(_e),isNaN(ie))throw new Error('Name table entry "'+pe+'" does not exist, see nameTableNames for complete list.');de[ie]=le[pe],ue.push(ie)}for(var Ce=reverseDict(macLanguages),xe=reverseDict(windowsLanguages),Ie=[],$e=[],Ne=0;Ne<ue.length;Ne++){ie=ue[Ne];var Oe=de[ie];for(var Fe in Oe){var Ve=Oe[Fe],ze=1,Ue=Ce[Fe],Pt=macLanguageToScript[Ue],qe=getEncoding(ze,Pt,Ue),Et=encode.MACSTRING(Ve,qe);Et===void 0&&(ze=0,Ue=oe.indexOf(Fe),Ue<0&&(Ue=oe.length,oe.push(Fe)),Pt=4,Et=encode.UTF16(Ve));var kt=addStringToPool(Et,$e);Ie.push(makeNameRecord(ze,Pt,Ue,ie,Et.length,kt));var At=xe[Fe];if(At!==void 0){var Dt=encode.UTF16(Ve),Lt=addStringToPool(Dt,$e);Ie.push(makeNameRecord(3,1,At,ie,Dt.length,Lt))}}}Ie.sort(function(bn,vn){return bn.platformID-vn.platformID||bn.encodingID-vn.encodingID||bn.languageID-vn.languageID||bn.nameID-vn.nameID});for(var jt=new table.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:Ie.length},{name:"stringOffset",type:"USHORT",value:6+Ie.length*12}]),_n=0;_n<Ie.length;_n++)jt.fields.push({name:"record_"+_n,type:"RECORD",value:Ie[_n]});return jt.fields.push({name:"strings",type:"LITERAL",value:$e}),jt}var _name={parse:parseNameTable,make:makeNameTable},unicodeRanges=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function getUnicodeRange(le){for(var oe=0;oe<unicodeRanges.length;oe+=1){var ie=unicodeRanges[oe];if(le>=ie.begin&&le<ie.end)return oe}return-1}function parseOS2Table(le,oe){var ie={},ue=new parse.Parser(le,oe);ie.version=ue.parseUShort(),ie.xAvgCharWidth=ue.parseShort(),ie.usWeightClass=ue.parseUShort(),ie.usWidthClass=ue.parseUShort(),ie.fsType=ue.parseUShort(),ie.ySubscriptXSize=ue.parseShort(),ie.ySubscriptYSize=ue.parseShort(),ie.ySubscriptXOffset=ue.parseShort(),ie.ySubscriptYOffset=ue.parseShort(),ie.ySuperscriptXSize=ue.parseShort(),ie.ySuperscriptYSize=ue.parseShort(),ie.ySuperscriptXOffset=ue.parseShort(),ie.ySuperscriptYOffset=ue.parseShort(),ie.yStrikeoutSize=ue.parseShort(),ie.yStrikeoutPosition=ue.parseShort(),ie.sFamilyClass=ue.parseShort(),ie.panose=[];for(var de=0;de<10;de++)ie.panose[de]=ue.parseByte();return ie.ulUnicodeRange1=ue.parseULong(),ie.ulUnicodeRange2=ue.parseULong(),ie.ulUnicodeRange3=ue.parseULong(),ie.ulUnicodeRange4=ue.parseULong(),ie.achVendID=String.fromCharCode(ue.parseByte(),ue.parseByte(),ue.parseByte(),ue.parseByte()),ie.fsSelection=ue.parseUShort(),ie.usFirstCharIndex=ue.parseUShort(),ie.usLastCharIndex=ue.parseUShort(),ie.sTypoAscender=ue.parseShort(),ie.sTypoDescender=ue.parseShort(),ie.sTypoLineGap=ue.parseShort(),ie.usWinAscent=ue.parseUShort(),ie.usWinDescent=ue.parseUShort(),ie.version>=1&&(ie.ulCodePageRange1=ue.parseULong(),ie.ulCodePageRange2=ue.parseULong()),ie.version>=2&&(ie.sxHeight=ue.parseShort(),ie.sCapHeight=ue.parseShort(),ie.usDefaultChar=ue.parseUShort(),ie.usBreakChar=ue.parseUShort(),ie.usMaxContent=ue.parseUShort()),ie}function makeOS2Table(le){return new table.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],le)}var os2={parse:parseOS2Table,make:makeOS2Table,unicodeRanges,getUnicodeRange};function parsePostTable(le,oe){var ie={},ue=new parse.Parser(le,oe);switch(ie.version=ue.parseVersion(),ie.italicAngle=ue.parseFixed(),ie.underlinePosition=ue.parseShort(),ie.underlineThickness=ue.parseShort(),ie.isFixedPitch=ue.parseULong(),ie.minMemType42=ue.parseULong(),ie.maxMemType42=ue.parseULong(),ie.minMemType1=ue.parseULong(),ie.maxMemType1=ue.parseULong(),ie.version){case 1:ie.names=standardNames.slice();break;case 2:ie.numberOfGlyphs=ue.parseUShort(),ie.glyphNameIndex=new Array(ie.numberOfGlyphs);for(var de=0;de<ie.numberOfGlyphs;de++)ie.glyphNameIndex[de]=ue.parseUShort();ie.names=[];for(var he=0;he<ie.numberOfGlyphs;he++)if(ie.glyphNameIndex[he]>=standardNames.length){var pe=ue.parseChar();ie.names.push(ue.parseString(pe))}break;case 2.5:ie.numberOfGlyphs=ue.parseUShort(),ie.offset=new Array(ie.numberOfGlyphs);for(var _e=0;_e<ie.numberOfGlyphs;_e++)ie.offset[_e]=ue.parseChar();break}return ie}function makePostTable(){return new table.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}var post={parse:parsePostTable,make:makePostTable},subtableParsers=new Array(9);subtableParsers[1]=function(){var le=this.offset+this.relativeOffset,oe=this.parseUShort();if(oe===1)return{substFormat:1,coverage:this.parsePointer(Parser$1.coverage),deltaGlyphId:this.parseUShort()};if(oe===2)return{substFormat:2,coverage:this.parsePointer(Parser$1.coverage),substitute:this.parseOffset16List()};check$1.assert(!1,"0x"+le.toString(16)+": lookup type 1 format must be 1 or 2.")};subtableParsers[2]=function(){var le=this.parseUShort();return check$1.argument(le===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:le,coverage:this.parsePointer(Parser$1.coverage),sequences:this.parseListOfLists()}};subtableParsers[3]=function(){var le=this.parseUShort();return check$1.argument(le===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:le,coverage:this.parsePointer(Parser$1.coverage),alternateSets:this.parseListOfLists()}};subtableParsers[4]=function(){var le=this.parseUShort();return check$1.argument(le===1,"GSUB ligature table identifier-format must be 1"),{substFormat:le,coverage:this.parsePointer(Parser$1.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var lookupRecordDesc={sequenceIndex:Parser$1.uShort,lookupListIndex:Parser$1.uShort};subtableParsers[5]=function(){var le=this.offset+this.relativeOffset,oe=this.parseUShort();if(oe===1)return{substFormat:oe,coverage:this.parsePointer(Parser$1.coverage),ruleSets:this.parseListOfLists(function(){var de=this.parseUShort(),he=this.parseUShort();return{input:this.parseUShortList(de-1),lookupRecords:this.parseRecordList(he,lookupRecordDesc)}})};if(oe===2)return{substFormat:oe,coverage:this.parsePointer(Parser$1.coverage),classDef:this.parsePointer(Parser$1.classDef),classSets:this.parseListOfLists(function(){var de=this.parseUShort(),he=this.parseUShort();return{classes:this.parseUShortList(de-1),lookupRecords:this.parseRecordList(he,lookupRecordDesc)}})};if(oe===3){var ie=this.parseUShort(),ue=this.parseUShort();return{substFormat:oe,coverages:this.parseList(ie,Parser$1.pointer(Parser$1.coverage)),lookupRecords:this.parseRecordList(ue,lookupRecordDesc)}}check$1.assert(!1,"0x"+le.toString(16)+": lookup type 5 format must be 1, 2 or 3.")};subtableParsers[6]=function(){var le=this.offset+this.relativeOffset,oe=this.parseUShort();if(oe===1)return{substFormat:1,coverage:this.parsePointer(Parser$1.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(lookupRecordDesc)}})};if(oe===2)return{substFormat:2,coverage:this.parsePointer(Parser$1.coverage),backtrackClassDef:this.parsePointer(Parser$1.classDef),inputClassDef:this.parsePointer(Parser$1.classDef),lookaheadClassDef:this.parsePointer(Parser$1.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(lookupRecordDesc)}})};if(oe===3)return{substFormat:3,backtrackCoverage:this.parseList(Parser$1.pointer(Parser$1.coverage)),inputCoverage:this.parseList(Parser$1.pointer(Parser$1.coverage)),lookaheadCoverage:this.parseList(Parser$1.pointer(Parser$1.coverage)),lookupRecords:this.parseRecordList(lookupRecordDesc)};check$1.assert(!1,"0x"+le.toString(16)+": lookup type 6 format must be 1, 2 or 3.")};subtableParsers[7]=function(){var le=this.parseUShort();check$1.argument(le===1,"GSUB Extension Substitution subtable identifier-format must be 1");var oe=this.parseUShort(),ie=new Parser$1(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:oe,extension:subtableParsers[oe].call(ie)}};subtableParsers[8]=function(){var le=this.parseUShort();return check$1.argument(le===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:le,coverage:this.parsePointer(Parser$1.coverage),backtrackCoverage:this.parseList(Parser$1.pointer(Parser$1.coverage)),lookaheadCoverage:this.parseList(Parser$1.pointer(Parser$1.coverage)),substitutes:this.parseUShortList()}};function parseGsubTable(le,oe){oe=oe||0;var ie=new Parser$1(le,oe),ue=ie.parseVersion(1);return check$1.argument(ue===1||ue===1.1,"Unsupported GSUB table version."),ue===1?{version:ue,scripts:ie.parseScriptList(),features:ie.parseFeatureList(),lookups:ie.parseLookupList(subtableParsers)}:{version:ue,scripts:ie.parseScriptList(),features:ie.parseFeatureList(),lookups:ie.parseLookupList(subtableParsers),variations:ie.parseFeatureVariationsList()}}var subtableMakers=new Array(9);subtableMakers[1]=function(le){return le.substFormat===1?new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table.Coverage(le.coverage)},{name:"deltaGlyphID",type:"USHORT",value:le.deltaGlyphId}]):new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new table.Coverage(le.coverage)}].concat(table.ushortList("substitute",le.substitute)))};subtableMakers[2]=function(le){return check$1.assert(le.substFormat===1,"Lookup type 2 substFormat must be 1."),new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table.Coverage(le.coverage)}].concat(table.tableList("seqSet",le.sequences,function(oe){return new table.Table("sequenceSetTable",table.ushortList("sequence",oe))})))};subtableMakers[3]=function(le){return check$1.assert(le.substFormat===1,"Lookup type 3 substFormat must be 1."),new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table.Coverage(le.coverage)}].concat(table.tableList("altSet",le.alternateSets,function(oe){return new table.Table("alternateSetTable",table.ushortList("alternate",oe))})))};subtableMakers[4]=function(le){return check$1.assert(le.substFormat===1,"Lookup type 4 substFormat must be 1."),new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table.Coverage(le.coverage)}].concat(table.tableList("ligSet",le.ligatureSets,function(oe){return new table.Table("ligatureSetTable",table.tableList("ligature",oe,function(ie){return new table.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:ie.ligGlyph}].concat(table.ushortList("component",ie.components,ie.components.length+1)))}))})))};subtableMakers[6]=function(le){if(le.substFormat===1){var oe=new table.Table("chainContextTable",[{name:"substFormat",type:"USHORT",value:le.substFormat},{name:"coverage",type:"TABLE",value:new table.Coverage(le.coverage)}].concat(table.tableList("chainRuleSet",le.chainRuleSets,function(de){return new table.Table("chainRuleSetTable",table.tableList("chainRule",de,function(he){var pe=table.ushortList("backtrackGlyph",he.backtrack,he.backtrack.length).concat(table.ushortList("inputGlyph",he.input,he.input.length+1)).concat(table.ushortList("lookaheadGlyph",he.lookahead,he.lookahead.length)).concat(table.ushortList("substitution",[],he.lookupRecords.length));return he.lookupRecords.forEach(function(_e,Ce){pe=pe.concat({name:"sequenceIndex"+Ce,type:"USHORT",value:_e.sequenceIndex}).concat({name:"lookupListIndex"+Ce,type:"USHORT",value:_e.lookupListIndex})}),new table.Table("chainRuleTable",pe)}))})));return oe}else if(le.substFormat===2)check$1.assert(!1,"lookup type 6 format 2 is not yet supported.");else if(le.substFormat===3){var ie=[{name:"substFormat",type:"USHORT",value:le.substFormat}];ie.push({name:"backtrackGlyphCount",type:"USHORT",value:le.backtrackCoverage.length}),le.backtrackCoverage.forEach(function(de,he){ie.push({name:"backtrackCoverage"+he,type:"TABLE",value:new table.Coverage(de)})}),ie.push({name:"inputGlyphCount",type:"USHORT",value:le.inputCoverage.length}),le.inputCoverage.forEach(function(de,he){ie.push({name:"inputCoverage"+he,type:"TABLE",value:new table.Coverage(de)})}),ie.push({name:"lookaheadGlyphCount",type:"USHORT",value:le.lookaheadCoverage.length}),le.lookaheadCoverage.forEach(function(de,he){ie.push({name:"lookaheadCoverage"+he,type:"TABLE",value:new table.Coverage(de)})}),ie.push({name:"substitutionCount",type:"USHORT",value:le.lookupRecords.length}),le.lookupRecords.forEach(function(de,he){ie=ie.concat({name:"sequenceIndex"+he,type:"USHORT",value:de.sequenceIndex}).concat({name:"lookupListIndex"+he,type:"USHORT",value:de.lookupListIndex})});var ue=new table.Table("chainContextTable",ie);return ue}check$1.assert(!1,"lookup type 6 format must be 1, 2 or 3.")};function makeGsubTable(le){return new table.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new table.ScriptList(le.scripts)},{name:"features",type:"TABLE",value:new table.FeatureList(le.features)},{name:"lookups",type:"TABLE",value:new table.LookupList(le.lookups,subtableMakers)}])}var gsub={parse:parseGsubTable,make:makeGsubTable};function parseMetaTable(le,oe){var ie=new parse.Parser(le,oe),ue=ie.parseULong();check$1.argument(ue===1,"Unsupported META table version."),ie.parseULong(),ie.parseULong();for(var de=ie.parseULong(),he={},pe=0;pe<de;pe++){var _e=ie.parseTag(),Ce=ie.parseULong(),xe=ie.parseULong(),Ie=decode.UTF8(le,oe+Ce,xe);he[_e]=Ie}return he}function makeMetaTable(le){var oe=Object.keys(le).length,ie="",ue=16+oe*12,de=new table.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:ue},{name:"numTags",type:"ULONG",value:oe}]);for(var he in le){var pe=ie.length;ie+=le[he],de.fields.push({name:"tag "+he,type:"TAG",value:he}),de.fields.push({name:"offset "+he,type:"ULONG",value:ue+pe}),de.fields.push({name:"length "+he,type:"ULONG",value:le[he].length})}return de.fields.push({name:"stringPool",type:"CHARARRAY",value:ie}),de}var meta={parse:parseMetaTable,make:makeMetaTable};function log2(le){return Math.log(le)/Math.log(2)|0}function computeCheckSum(le){for(;le.length%4!==0;)le.push(0);for(var oe=0,ie=0;ie<le.length;ie+=4)oe+=(le[ie]<<24)+(le[ie+1]<<16)+(le[ie+2]<<8)+le[ie+3];return oe%=Math.pow(2,32),oe}function makeTableRecord(le,oe,ie,ue){return new table.Record("Table Record",[{name:"tag",type:"TAG",value:le!==void 0?le:""},{name:"checkSum",type:"ULONG",value:oe!==void 0?oe:0},{name:"offset",type:"ULONG",value:ie!==void 0?ie:0},{name:"length",type:"ULONG",value:ue!==void 0?ue:0}])}function makeSfntTable(le){var oe=new table.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);oe.tables=le,oe.numTables=le.length;var ie=Math.pow(2,log2(oe.numTables));oe.searchRange=16*ie,oe.entrySelector=log2(ie),oe.rangeShift=oe.numTables*16-oe.searchRange;for(var ue=[],de=[],he=oe.sizeOf()+makeTableRecord().sizeOf()*oe.numTables;he%4!==0;)he+=1,de.push({name:"padding",type:"BYTE",value:0});for(var pe=0;pe<le.length;pe+=1){var _e=le[pe];check$1.argument(_e.tableName.length===4,"Table name"+_e.tableName+" is invalid.");var Ce=_e.sizeOf(),xe=makeTableRecord(_e.tableName,computeCheckSum(_e.encode()),he,Ce);for(ue.push({name:xe.tag+" Table Record",type:"RECORD",value:xe}),de.push({name:_e.tableName+" table",type:"RECORD",value:_e}),he+=Ce,check$1.argument(!isNaN(he),"Something went wrong calculating the offset.");he%4!==0;)he+=1,de.push({name:"padding",type:"BYTE",value:0})}return ue.sort(function(Ie,$e){return Ie.value.tag>$e.value.tag?1:-1}),oe.fields=oe.fields.concat(ue),oe.fields=oe.fields.concat(de),oe}function metricsForChar(le,oe,ie){for(var ue=0;ue<oe.length;ue+=1){var de=le.charToGlyphIndex(oe[ue]);if(de>0){var he=le.glyphs.get(de);return he.getMetrics()}}return ie}function average(le){for(var oe=0,ie=0;ie<le.length;ie+=1)oe+=le[ie];return oe/le.length}function fontToSfntTable(le){for(var oe=[],ie=[],ue=[],de=[],he=[],pe=[],_e=[],Ce,xe=0,Ie=0,$e=0,Ne=0,Oe=0,Fe=0;Fe<le.glyphs.length;Fe+=1){var Ve=le.glyphs.get(Fe),ze=Ve.unicode|0;if(isNaN(Ve.advanceWidth))throw new Error("Glyph "+Ve.name+" ("+Fe+"): advanceWidth is not a number.");(Ce>ze||Ce===void 0)&&ze>0&&(Ce=ze),xe<ze&&(xe=ze);var Ue=os2.getUnicodeRange(ze);if(Ue<32)Ie|=1<<Ue;else if(Ue<64)$e|=1<<Ue-32;else if(Ue<96)Ne|=1<<Ue-64;else if(Ue<123)Oe|=1<<Ue-96;else throw new Error("Unicode ranges bits > 123 are reserved for internal usage");if(Ve.name!==".notdef"){var Pt=Ve.getMetrics();oe.push(Pt.xMin),ie.push(Pt.yMin),ue.push(Pt.xMax),de.push(Pt.yMax),pe.push(Pt.leftSideBearing),_e.push(Pt.rightSideBearing),he.push(Ve.advanceWidth)}}var qe={xMin:Math.min.apply(null,oe),yMin:Math.min.apply(null,ie),xMax:Math.max.apply(null,ue),yMax:Math.max.apply(null,de),advanceWidthMax:Math.max.apply(null,he),advanceWidthAvg:average(he),minLeftSideBearing:Math.min.apply(null,pe),maxLeftSideBearing:Math.max.apply(null,pe),minRightSideBearing:Math.min.apply(null,_e)};qe.ascender=le.ascender,qe.descender=le.descender;var Et=head.make({flags:3,unitsPerEm:le.unitsPerEm,xMin:qe.xMin,yMin:qe.yMin,xMax:qe.xMax,yMax:qe.yMax,lowestRecPPEM:3,createdTimestamp:le.createdTimestamp}),kt=hhea.make({ascender:qe.ascender,descender:qe.descender,advanceWidthMax:qe.advanceWidthMax,minLeftSideBearing:qe.minLeftSideBearing,minRightSideBearing:qe.minRightSideBearing,xMaxExtent:qe.maxLeftSideBearing+(qe.xMax-qe.xMin),numberOfHMetrics:le.glyphs.length}),At=maxp.make(le.glyphs.length),Dt=os2.make(Object.assign({xAvgCharWidth:Math.round(qe.advanceWidthAvg),usFirstCharIndex:Ce,usLastCharIndex:xe,ulUnicodeRange1:Ie,ulUnicodeRange2:$e,ulUnicodeRange3:Ne,ulUnicodeRange4:Oe,sTypoAscender:qe.ascender,sTypoDescender:qe.descender,sTypoLineGap:0,usWinAscent:qe.yMax,usWinDescent:Math.abs(qe.yMin),ulCodePageRange1:1,sxHeight:metricsForChar(le,"xyvw",{yMax:Math.round(qe.ascender/2)}).yMax,sCapHeight:metricsForChar(le,"HIKLEFJMNTZBDPRAGOQSUVWXY",qe).yMax,usDefaultChar:le.hasChar(" ")?32:0,usBreakChar:le.hasChar(" ")?32:0},le.tables.os2)),Lt=hmtx.make(le.glyphs),jt=cmap.make(le.glyphs),_n=le.getEnglishName("fontFamily"),bn=le.getEnglishName("fontSubfamily"),vn=_n+" "+bn,Tn=le.getEnglishName("postScriptName");Tn||(Tn=_n.replace(/\s/g,"")+"-"+bn);var $n={};for(var wn in le.names)$n[wn]=le.names[wn];$n.uniqueID||($n.uniqueID={en:le.getEnglishName("manufacturer")+":"+vn}),$n.postScriptName||($n.postScriptName={en:Tn}),$n.preferredFamily||($n.preferredFamily=le.names.fontFamily),$n.preferredSubfamily||($n.preferredSubfamily=le.names.fontSubfamily);var Cn=[],Sn=_name.make($n,Cn),In=Cn.length>0?ltag.make(Cn):void 0,En=post.make(),xn=cff.make(le.glyphs,{version:le.getEnglishName("version"),fullName:vn,familyName:_n,weightName:bn,postScriptName:Tn,unitsPerEm:le.unitsPerEm,fontBBox:[0,qe.yMin,qe.ascender,qe.advanceWidthMax]}),kn=le.metas&&Object.keys(le.metas).length>0?meta.make(le.metas):void 0,On=[Et,kt,At,Dt,Sn,jt,En,xn,Lt];In&&On.push(In),le.tables.gsub&&On.push(gsub.make(le.tables.gsub)),kn&&On.push(kn);for(var Mn=makeSfntTable(On),Un=Mn.encode(),zn=computeCheckSum(Un),Hn=Mn.fields,Rn=!1,Jn=0;Jn<Hn.length;Jn+=1)if(Hn[Jn].name==="head table"){Hn[Jn].value.checkSumAdjustment=2981146554-zn,Rn=!0;break}if(!Rn)throw new Error("Could not find head table with checkSum to adjust.");return Mn}var sfnt={make:makeSfntTable,fontToTable:fontToSfntTable,computeCheckSum};function searchTag(le,oe){for(var ie=0,ue=le.length-1;ie<=ue;){var de=ie+ue>>>1,he=le[de].tag;if(he===oe)return de;he<oe?ie=de+1:ue=de-1}return-ie-1}function binSearch(le,oe){for(var ie=0,ue=le.length-1;ie<=ue;){var de=ie+ue>>>1,he=le[de];if(he===oe)return de;he<oe?ie=de+1:ue=de-1}return-ie-1}function searchRange(le,oe){for(var ie,ue=0,de=le.length-1;ue<=de;){var he=ue+de>>>1;ie=le[he];var pe=ie.start;if(pe===oe)return ie;pe<oe?ue=he+1:de=he-1}if(ue>0)return ie=le[ue-1],oe>ie.end?0:ie}function Layout(le,oe){this.font=le,this.tableName=oe}Layout.prototype={searchTag,binSearch,getTable:function(le){var oe=this.font.tables[this.tableName];return!oe&&le&&(oe=this.font.tables[this.tableName]=this.createDefaultTable()),oe},getScriptNames:function(){var le=this.getTable();return le?le.scripts.map(function(oe){return oe.tag}):[]},getDefaultScriptName:function(){var le=this.getTable();if(le){for(var oe=!1,ie=0;ie<le.scripts.length;ie++){var ue=le.scripts[ie].tag;if(ue==="DFLT")return ue;ue==="latn"&&(oe=!0)}if(oe)return"latn"}},getScriptTable:function(le,oe){var ie=this.getTable(oe);if(ie){le=le||"DFLT";var ue=ie.scripts,de=searchTag(ie.scripts,le);if(de>=0)return ue[de].script;if(oe){var he={tag:le,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return ue.splice(-1-de,0,he),he.script}}},getLangSysTable:function(le,oe,ie){var ue=this.getScriptTable(le,ie);if(ue){if(!oe||oe==="dflt"||oe==="DFLT")return ue.defaultLangSys;var de=searchTag(ue.langSysRecords,oe);if(de>=0)return ue.langSysRecords[de].langSys;if(ie){var he={tag:oe,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return ue.langSysRecords.splice(-1-de,0,he),he.langSys}}},getFeatureTable:function(le,oe,ie,ue){var de=this.getLangSysTable(le,oe,ue);if(de){for(var he,pe=de.featureIndexes,_e=this.font.tables[this.tableName].features,Ce=0;Ce<pe.length;Ce++)if(he=_e[pe[Ce]],he.tag===ie)return he.feature;if(ue){var xe=_e.length;return check$1.assert(xe===0||ie>=_e[xe-1].tag,"Features must be added in alphabetical order."),he={tag:ie,feature:{params:0,lookupListIndexes:[]}},_e.push(he),pe.push(xe),he.feature}}},getLookupTables:function(le,oe,ie,ue,de){var he=this.getFeatureTable(le,oe,ie,de),pe=[];if(he){for(var _e,Ce=he.lookupListIndexes,xe=this.font.tables[this.tableName].lookups,Ie=0;Ie<Ce.length;Ie++)_e=xe[Ce[Ie]],_e.lookupType===ue&&pe.push(_e);if(pe.length===0&&de){_e={lookupType:ue,lookupFlag:0,subtables:[],markFilteringSet:void 0};var $e=xe.length;return xe.push(_e),Ce.push($e),[_e]}}return pe},getGlyphClass:function(le,oe){switch(le.format){case 1:return le.startGlyph<=oe&&oe<le.startGlyph+le.classes.length?le.classes[oe-le.startGlyph]:0;case 2:var ie=searchRange(le.ranges,oe);return ie?ie.classId:0}},getCoverageIndex:function(le,oe){switch(le.format){case 1:var ie=binSearch(le.glyphs,oe);return ie>=0?ie:-1;case 2:var ue=searchRange(le.ranges,oe);return ue?ue.index+oe-ue.start:-1}},expandCoverage:function(le){if(le.format===1)return le.glyphs;for(var oe=[],ie=le.ranges,ue=0;ue<ie.length;ue++)for(var de=ie[ue],he=de.start,pe=de.end,_e=he;_e<=pe;_e++)oe.push(_e);return oe}};function Position(le){Layout.call(this,le,"gpos")}Position.prototype=Layout.prototype;Position.prototype.init=function(){var le=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(le)};Position.prototype.getKerningValue=function(le,oe,ie){for(var ue=0;ue<le.length;ue++)for(var de=le[ue].subtables,he=0;he<de.length;he++){var pe=de[he],_e=this.getCoverageIndex(pe.coverage,oe);if(!(_e<0))switch(pe.posFormat){case 1:for(var Ce=pe.pairSets[_e],xe=0;xe<Ce.length;xe++){var Ie=Ce[xe];if(Ie.secondGlyph===ie)return Ie.value1&&Ie.value1.xAdvance||0}break;case 2:var $e=this.getGlyphClass(pe.classDef1,oe),Ne=this.getGlyphClass(pe.classDef2,ie),Oe=pe.classRecords[$e][Ne];return Oe.value1&&Oe.value1.xAdvance||0}}return 0};Position.prototype.getKerningTables=function(le,oe){if(this.font.tables.gpos)return this.getLookupTables(le,oe,"kern",2)};function Substitution(le){Layout.call(this,le,"gsub")}function arraysEqual(le,oe){var ie=le.length;if(ie!==oe.length)return!1;for(var ue=0;ue<ie;ue++)if(le[ue]!==oe[ue])return!1;return!0}function getSubstFormat(le,oe,ie){for(var ue=le.subtables,de=0;de<ue.length;de++){var he=ue[de];if(he.substFormat===oe)return he}if(ie)return ue.push(ie),ie}Substitution.prototype=Layout.prototype;Substitution.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}};Substitution.prototype.getSingle=function(le,oe,ie){for(var ue=[],de=this.getLookupTables(oe,ie,le,1),he=0;he<de.length;he++)for(var pe=de[he].subtables,_e=0;_e<pe.length;_e++){var Ce=pe[_e],xe=this.expandCoverage(Ce.coverage),Ie=void 0;if(Ce.substFormat===1){var $e=Ce.deltaGlyphId;for(Ie=0;Ie<xe.length;Ie++){var Ne=xe[Ie];ue.push({sub:Ne,by:Ne+$e})}}else{var Oe=Ce.substitute;for(Ie=0;Ie<xe.length;Ie++)ue.push({sub:xe[Ie],by:Oe[Ie]})}}return ue};Substitution.prototype.getMultiple=function(le,oe,ie){for(var ue=[],de=this.getLookupTables(oe,ie,le,2),he=0;he<de.length;he++)for(var pe=de[he].subtables,_e=0;_e<pe.length;_e++){var Ce=pe[_e],xe=this.expandCoverage(Ce.coverage),Ie=void 0;for(Ie=0;Ie<xe.length;Ie++){var $e=xe[Ie],Ne=Ce.sequences[Ie];ue.push({sub:$e,by:Ne})}}return ue};Substitution.prototype.getAlternates=function(le,oe,ie){for(var ue=[],de=this.getLookupTables(oe,ie,le,3),he=0;he<de.length;he++)for(var pe=de[he].subtables,_e=0;_e<pe.length;_e++)for(var Ce=pe[_e],xe=this.expandCoverage(Ce.coverage),Ie=Ce.alternateSets,$e=0;$e<xe.length;$e++)ue.push({sub:xe[$e],by:Ie[$e]});return ue};Substitution.prototype.getLigatures=function(le,oe,ie){for(var ue=[],de=this.getLookupTables(oe,ie,le,4),he=0;he<de.length;he++)for(var pe=de[he].subtables,_e=0;_e<pe.length;_e++)for(var Ce=pe[_e],xe=this.expandCoverage(Ce.coverage),Ie=Ce.ligatureSets,$e=0;$e<xe.length;$e++)for(var Ne=xe[$e],Oe=Ie[$e],Fe=0;Fe<Oe.length;Fe++){var Ve=Oe[Fe];ue.push({sub:[Ne].concat(Ve.components),by:Ve.ligGlyph})}return ue};Substitution.prototype.addSingle=function(le,oe,ie,ue){var de=this.getLookupTables(ie,ue,le,1,!0)[0],he=getSubstFormat(de,2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});check$1.assert(he.coverage.format===1,"Single: unable to modify coverage table format "+he.coverage.format);var pe=oe.sub,_e=this.binSearch(he.coverage.glyphs,pe);_e<0&&(_e=-1-_e,he.coverage.glyphs.splice(_e,0,pe),he.substitute.splice(_e,0,0)),he.substitute[_e]=oe.by};Substitution.prototype.addMultiple=function(le,oe,ie,ue){check$1.assert(oe.by instanceof Array&&oe.by.length>1,'Multiple: "by" must be an array of two or more ids');var de=this.getLookupTables(ie,ue,le,2,!0)[0],he=getSubstFormat(de,1,{substFormat:1,coverage:{format:1,glyphs:[]},sequences:[]});check$1.assert(he.coverage.format===1,"Multiple: unable to modify coverage table format "+he.coverage.format);var pe=oe.sub,_e=this.binSearch(he.coverage.glyphs,pe);_e<0&&(_e=-1-_e,he.coverage.glyphs.splice(_e,0,pe),he.sequences.splice(_e,0,0)),he.sequences[_e]=oe.by};Substitution.prototype.addAlternate=function(le,oe,ie,ue){var de=this.getLookupTables(ie,ue,le,3,!0)[0],he=getSubstFormat(de,1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});check$1.assert(he.coverage.format===1,"Alternate: unable to modify coverage table format "+he.coverage.format);var pe=oe.sub,_e=this.binSearch(he.coverage.glyphs,pe);_e<0&&(_e=-1-_e,he.coverage.glyphs.splice(_e,0,pe),he.alternateSets.splice(_e,0,0)),he.alternateSets[_e]=oe.by};Substitution.prototype.addLigature=function(le,oe,ie,ue){var de=this.getLookupTables(ie,ue,le,4,!0)[0],he=de.subtables[0];he||(he={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},de.subtables[0]=he),check$1.assert(he.coverage.format===1,"Ligature: unable to modify coverage table format "+he.coverage.format);var pe=oe.sub[0],_e=oe.sub.slice(1),Ce={ligGlyph:oe.by,components:_e},xe=this.binSearch(he.coverage.glyphs,pe);if(xe>=0){for(var Ie=he.ligatureSets[xe],$e=0;$e<Ie.length;$e++)if(arraysEqual(Ie[$e].components,_e))return;Ie.push(Ce)}else xe=-1-xe,he.coverage.glyphs.splice(xe,0,pe),he.ligatureSets.splice(xe,0,[Ce])};Substitution.prototype.getFeature=function(le,oe,ie){if(/ss\d\d/.test(le))return this.getSingle(le,oe,ie);switch(le){case"aalt":case"salt":return this.getSingle(le,oe,ie).concat(this.getAlternates(le,oe,ie));case"dlig":case"liga":case"rlig":return this.getLigatures(le,oe,ie);case"ccmp":return this.getMultiple(le,oe,ie).concat(this.getLigatures(le,oe,ie));case"stch":return this.getMultiple(le,oe,ie)}};Substitution.prototype.add=function(le,oe,ie,ue){if(/ss\d\d/.test(le))return this.addSingle(le,oe,ie,ue);switch(le){case"aalt":case"salt":return typeof oe.by=="number"?this.addSingle(le,oe,ie,ue):this.addAlternate(le,oe,ie,ue);case"dlig":case"liga":case"rlig":return this.addLigature(le,oe,ie,ue);case"ccmp":return oe.by instanceof Array?this.addMultiple(le,oe,ie,ue):this.addLigature(le,oe,ie,ue)}};function isBrowser$1(){return typeof window<"u"}function arrayBufferToNodeBuffer(le){for(var oe=new Buffer(le.byteLength),ie=new Uint8Array(le),ue=0;ue<oe.length;++ue)oe[ue]=ie[ue];return oe}function checkArgument(le,oe){if(!le)throw oe}function parseGlyphCoordinate(le,oe,ie,ue,de){var he;return(oe&ue)>0?(he=le.parseByte(),oe&de||(he=-he),he=ie+he):(oe&de)>0?he=ie:he=ie+le.parseShort(),he}function parseGlyph(le,oe,ie){var ue=new parse.Parser(oe,ie);le.numberOfContours=ue.parseShort(),le._xMin=ue.parseShort(),le._yMin=ue.parseShort(),le._xMax=ue.parseShort(),le._yMax=ue.parseShort();var de,he;if(le.numberOfContours>0){for(var pe=le.endPointIndices=[],_e=0;_e<le.numberOfContours;_e+=1)pe.push(ue.parseUShort());le.instructionLength=ue.parseUShort(),le.instructions=[];for(var Ce=0;Ce<le.instructionLength;Ce+=1)le.instructions.push(ue.parseByte());var xe=pe[pe.length-1]+1;de=[];for(var Ie=0;Ie<xe;Ie+=1)if(he=ue.parseByte(),de.push(he),(he&8)>0)for(var $e=ue.parseByte(),Ne=0;Ne<$e;Ne+=1)de.push(he),Ie+=1;if(check$1.argument(de.length===xe,"Bad flags."),pe.length>0){var Oe=[],Fe;if(xe>0){for(var Ve=0;Ve<xe;Ve+=1)he=de[Ve],Fe={},Fe.onCurve=!!(he&1),Fe.lastPointOfContour=pe.indexOf(Ve)>=0,Oe.push(Fe);for(var ze=0,Ue=0;Ue<xe;Ue+=1)he=de[Ue],Fe=Oe[Ue],Fe.x=parseGlyphCoordinate(ue,he,ze,2,16),ze=Fe.x;for(var Pt=0,qe=0;qe<xe;qe+=1)he=de[qe],Fe=Oe[qe],Fe.y=parseGlyphCoordinate(ue,he,Pt,4,32),Pt=Fe.y}le.points=Oe}else le.points=[]}else if(le.numberOfContours===0)le.points=[];else{le.isComposite=!0,le.points=[],le.components=[];for(var Et=!0;Et;){de=ue.parseUShort();var kt={glyphIndex:ue.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(de&1)>0?(de&2)>0?(kt.dx=ue.parseShort(),kt.dy=ue.parseShort()):kt.matchedPoints=[ue.parseUShort(),ue.parseUShort()]:(de&2)>0?(kt.dx=ue.parseChar(),kt.dy=ue.parseChar()):kt.matchedPoints=[ue.parseByte(),ue.parseByte()],(de&8)>0?kt.xScale=kt.yScale=ue.parseF2Dot14():(de&64)>0?(kt.xScale=ue.parseF2Dot14(),kt.yScale=ue.parseF2Dot14()):(de&128)>0&&(kt.xScale=ue.parseF2Dot14(),kt.scale01=ue.parseF2Dot14(),kt.scale10=ue.parseF2Dot14(),kt.yScale=ue.parseF2Dot14()),le.components.push(kt),Et=!!(de&32)}if(de&256){le.instructionLength=ue.parseUShort(),le.instructions=[];for(var At=0;At<le.instructionLength;At+=1)le.instructions.push(ue.parseByte())}}}function transformPoints(le,oe){for(var ie=[],ue=0;ue<le.length;ue+=1){var de=le[ue],he={x:oe.xScale*de.x+oe.scale01*de.y+oe.dx,y:oe.scale10*de.x+oe.yScale*de.y+oe.dy,onCurve:de.onCurve,lastPointOfContour:de.lastPointOfContour};ie.push(he)}return ie}function getContours(le){for(var oe=[],ie=[],ue=0;ue<le.length;ue+=1){var de=le[ue];ie.push(de),de.lastPointOfContour&&(oe.push(ie),ie=[])}return check$1.argument(ie.length===0,"There are still points left in the current contour."),oe}function getPath(le){var oe=new Path$1;if(!le)return oe;for(var ie=getContours(le),ue=0;ue<ie.length;++ue){var de=ie[ue],he=null,pe=de[de.length-1],_e=de[0];if(pe.onCurve)oe.moveTo(pe.x,pe.y);else if(_e.onCurve)oe.moveTo(_e.x,_e.y);else{var Ce={x:(pe.x+_e.x)*.5,y:(pe.y+_e.y)*.5};oe.moveTo(Ce.x,Ce.y)}for(var xe=0;xe<de.length;++xe)if(he=pe,pe=_e,_e=de[(xe+1)%de.length],pe.onCurve)oe.lineTo(pe.x,pe.y);else{var Ie=_e;he.onCurve||((pe.x+he.x)*.5,(pe.y+he.y)*.5),_e.onCurve||(Ie={x:(pe.x+_e.x)*.5,y:(pe.y+_e.y)*.5}),oe.quadraticCurveTo(pe.x,pe.y,Ie.x,Ie.y)}oe.closePath()}return oe}function buildPath(le,oe){if(oe.isComposite)for(var ie=0;ie<oe.components.length;ie+=1){var ue=oe.components[ie],de=le.get(ue.glyphIndex);if(de.getPath(),de.points){var he=void 0;if(ue.matchedPoints===void 0)he=transformPoints(de.points,ue);else{if(ue.matchedPoints[0]>oe.points.length-1||ue.matchedPoints[1]>de.points.length-1)throw Error("Matched points out of range in "+oe.name);var pe=oe.points[ue.matchedPoints[0]],_e=de.points[ue.matchedPoints[1]],Ce={xScale:ue.xScale,scale01:ue.scale01,scale10:ue.scale10,yScale:ue.yScale,dx:0,dy:0};_e=transformPoints([_e],Ce)[0],Ce.dx=pe.x-_e.x,Ce.dy=pe.y-_e.y,he=transformPoints(de.points,Ce)}oe.points=oe.points.concat(he)}}return getPath(oe.points)}function parseGlyfTableAll(le,oe,ie,ue){for(var de=new glyphset.GlyphSet(ue),he=0;he<ie.length-1;he+=1){var pe=ie[he],_e=ie[he+1];pe!==_e?de.push(he,glyphset.ttfGlyphLoader(ue,he,parseGlyph,le,oe+pe,buildPath)):de.push(he,glyphset.glyphLoader(ue,he))}return de}function parseGlyfTableOnLowMemory(le,oe,ie,ue){var de=new glyphset.GlyphSet(ue);return ue._push=function(he){var pe=ie[he],_e=ie[he+1];pe!==_e?de.push(he,glyphset.ttfGlyphLoader(ue,he,parseGlyph,le,oe+pe,buildPath)):de.push(he,glyphset.glyphLoader(ue,he))},de}function parseGlyfTable(le,oe,ie,ue,de){return de.lowMemory?parseGlyfTableOnLowMemory(le,oe,ie,ue):parseGlyfTableAll(le,oe,ie,ue)}var glyf={getPath,parse:parseGlyfTable},instructionTable,exec$2,execGlyph,execComponent;function Hinting(le){this.font=le,this.getCommands=function(oe){return glyf.getPath(oe).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function roundOff(le){return le}function roundToGrid(le){return Math.sign(le)*Math.round(Math.abs(le))}function roundToDoubleGrid(le){return Math.sign(le)*Math.round(Math.abs(le*2))/2}function roundToHalfGrid(le){return Math.sign(le)*(Math.round(Math.abs(le)+.5)-.5)}function roundUpToGrid(le){return Math.sign(le)*Math.ceil(Math.abs(le))}function roundDownToGrid(le){return Math.sign(le)*Math.floor(Math.abs(le))}var roundSuper=function(le){var oe=this.srPeriod,ie=this.srPhase,ue=this.srThreshold,de=1;return le<0&&(le=-le,de=-1),le+=ue-ie,le=Math.trunc(le/oe)*oe,le+=ie,le<0?ie*de:le*de},xUnitVector={x:1,y:0,axis:"x",distance:function(le,oe,ie,ue){return(ie?le.xo:le.x)-(ue?oe.xo:oe.x)},interpolate:function(le,oe,ie,ue){var de,he,pe,_e,Ce,xe,Ie;if(!ue||ue===this){if(de=le.xo-oe.xo,he=le.xo-ie.xo,Ce=oe.x-oe.xo,xe=ie.x-ie.xo,pe=Math.abs(de),_e=Math.abs(he),Ie=pe+_e,Ie===0){le.x=le.xo+(Ce+xe)/2;return}le.x=le.xo+(Ce*_e+xe*pe)/Ie;return}if(de=ue.distance(le,oe,!0,!0),he=ue.distance(le,ie,!0,!0),Ce=ue.distance(oe,oe,!1,!0),xe=ue.distance(ie,ie,!1,!0),pe=Math.abs(de),_e=Math.abs(he),Ie=pe+_e,Ie===0){xUnitVector.setRelative(le,le,(Ce+xe)/2,ue,!0);return}xUnitVector.setRelative(le,le,(Ce*_e+xe*pe)/Ie,ue,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(le,oe,ie,ue,de){if(!ue||ue===this){le.x=(de?oe.xo:oe.x)+ie;return}var he=de?oe.xo:oe.x,pe=de?oe.yo:oe.y,_e=he+ie*ue.x,Ce=pe+ie*ue.y;le.x=_e+(le.y-Ce)/ue.normalSlope},slope:0,touch:function(le){le.xTouched=!0},touched:function(le){return le.xTouched},untouch:function(le){le.xTouched=!1}},yUnitVector={x:0,y:1,axis:"y",distance:function(le,oe,ie,ue){return(ie?le.yo:le.y)-(ue?oe.yo:oe.y)},interpolate:function(le,oe,ie,ue){var de,he,pe,_e,Ce,xe,Ie;if(!ue||ue===this){if(de=le.yo-oe.yo,he=le.yo-ie.yo,Ce=oe.y-oe.yo,xe=ie.y-ie.yo,pe=Math.abs(de),_e=Math.abs(he),Ie=pe+_e,Ie===0){le.y=le.yo+(Ce+xe)/2;return}le.y=le.yo+(Ce*_e+xe*pe)/Ie;return}if(de=ue.distance(le,oe,!0,!0),he=ue.distance(le,ie,!0,!0),Ce=ue.distance(oe,oe,!1,!0),xe=ue.distance(ie,ie,!1,!0),pe=Math.abs(de),_e=Math.abs(he),Ie=pe+_e,Ie===0){yUnitVector.setRelative(le,le,(Ce+xe)/2,ue,!0);return}yUnitVector.setRelative(le,le,(Ce*_e+xe*pe)/Ie,ue,!0)},normalSlope:0,setRelative:function(le,oe,ie,ue,de){if(!ue||ue===this){le.y=(de?oe.yo:oe.y)+ie;return}var he=de?oe.xo:oe.x,pe=de?oe.yo:oe.y,_e=he+ie*ue.x,Ce=pe+ie*ue.y;le.y=Ce+ue.normalSlope*(le.x-_e)},slope:Number.POSITIVE_INFINITY,touch:function(le){le.yTouched=!0},touched:function(le){return le.yTouched},untouch:function(le){le.yTouched=!1}};Object.freeze(xUnitVector);Object.freeze(yUnitVector);function UnitVector(le,oe){this.x=le,this.y=oe,this.axis=void 0,this.slope=oe/le,this.normalSlope=-le/oe,Object.freeze(this)}UnitVector.prototype.distance=function(le,oe,ie,ue){return this.x*xUnitVector.distance(le,oe,ie,ue)+this.y*yUnitVector.distance(le,oe,ie,ue)};UnitVector.prototype.interpolate=function(le,oe,ie,ue){var de,he,pe,_e,Ce,xe,Ie;if(pe=ue.distance(le,oe,!0,!0),_e=ue.distance(le,ie,!0,!0),de=ue.distance(oe,oe,!1,!0),he=ue.distance(ie,ie,!1,!0),Ce=Math.abs(pe),xe=Math.abs(_e),Ie=Ce+xe,Ie===0){this.setRelative(le,le,(de+he)/2,ue,!0);return}this.setRelative(le,le,(de*xe+he*Ce)/Ie,ue,!0)};UnitVector.prototype.setRelative=function(le,oe,ie,ue,de){ue=ue||this;var he=de?oe.xo:oe.x,pe=de?oe.yo:oe.y,_e=he+ie*ue.x,Ce=pe+ie*ue.y,xe=ue.normalSlope,Ie=this.slope,$e=le.x,Ne=le.y;le.x=(Ie*$e-xe*_e+Ce-Ne)/(Ie-xe),le.y=Ie*(le.x-$e)+Ne};UnitVector.prototype.touch=function(le){le.xTouched=!0,le.yTouched=!0};function getUnitVector(le,oe){var ie=Math.sqrt(le*le+oe*oe);return le/=ie,oe/=ie,le===1&&oe===0?xUnitVector:le===0&&oe===1?yUnitVector:new UnitVector(le,oe)}function HPoint(le,oe,ie,ue){this.x=this.xo=Math.round(le*64)/64,this.y=this.yo=Math.round(oe*64)/64,this.lastPointOfContour=ie,this.onCurve=ue,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}HPoint.prototype.nextTouched=function(le){for(var oe=this.nextPointOnContour;!le.touched(oe)&&oe!==this;)oe=oe.nextPointOnContour;return oe};HPoint.prototype.prevTouched=function(le){for(var oe=this.prevPointOnContour;!le.touched(oe)&&oe!==this;)oe=oe.prevPointOnContour;return oe};var HPZero=Object.freeze(new HPoint(0,0)),defaultState={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function State(le,oe){switch(this.env=le,this.stack=[],this.prog=oe,le){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=xUnitVector,this.round=roundToGrid}}Hinting.prototype.exec=function(le,oe){if(typeof oe!="number")throw new Error("Point size is not a number!");if(!(this._errorState>2)){var ie=this.font,ue=this._prepState;if(!ue||ue.ppem!==oe){var de=this._fpgmState;if(!de){State.prototype=defaultState,de=this._fpgmState=new State("fpgm",ie.tables.fpgm),de.funcs=[],de.font=ie,exports.DEBUG&&(de.step=-1);try{exec$2(de)}catch{this._errorState=3;return}}State.prototype=de,ue=this._prepState=new State("prep",ie.tables.prep),ue.ppem=oe;var he=ie.tables.cvt;if(he)for(var pe=ue.cvt=new Array(he.length),_e=oe/ie.unitsPerEm,Ce=0;Ce<he.length;Ce++)pe[Ce]=he[Ce]*_e;else ue.cvt=[];exports.DEBUG&&(ue.step=-1);try{exec$2(ue)}catch{this._errorState<2,this._errorState=2}}if(!(this._errorState>1))try{return execGlyph(le,ue)}catch{this._errorState<1,this._errorState=1;return}}};execGlyph=function(le,oe){var ie=oe.ppem/oe.font.unitsPerEm,ue=ie,de=le.components,he,pe,_e;if(State.prototype=oe,!de)_e=new State("glyf",le.instructions),exports.DEBUG&&(_e.step=-1),execComponent(le,_e,ie,ue),pe=_e.gZone;else{var Ce=oe.font;pe=[],he=[];for(var xe=0;xe<de.length;xe++){var Ie=de[xe],$e=Ce.glyphs.get(Ie.glyphIndex);_e=new State("glyf",$e.instructions),exports.DEBUG&&(_e.step=-1),execComponent($e,_e,ie,ue);for(var Ne=Math.round(Ie.dx*ie),Oe=Math.round(Ie.dy*ue),Fe=_e.gZone,Ve=_e.contours,ze=0;ze<Fe.length;ze++){var Ue=Fe[ze];Ue.xTouched=Ue.yTouched=!1,Ue.xo=Ue.x=Ue.x+Ne,Ue.yo=Ue.y=Ue.y+Oe}var Pt=pe.length;pe.push.apply(pe,Fe);for(var qe=0;qe<Ve.length;qe++)he.push(Ve[qe]+Pt)}le.instructions&&!_e.inhibitGridFit&&(_e=new State("glyf",le.instructions),_e.gZone=_e.z0=_e.z1=_e.z2=pe,_e.contours=he,pe.push(new HPoint(0,0),new HPoint(Math.round(le.advanceWidth*ie),0)),exports.DEBUG&&(_e.step=-1),exec$2(_e),pe.length-=2)}return pe};execComponent=function(le,oe,ie,ue){for(var de=le.points||[],he=de.length,pe=oe.gZone=oe.z0=oe.z1=oe.z2=[],_e=oe.contours=[],Ce,xe=0;xe<he;xe++)Ce=de[xe],pe[xe]=new HPoint(Ce.x*ie,Ce.y*ue,Ce.lastPointOfContour,Ce.onCurve);for(var Ie,$e,Ne=0;Ne<he;Ne++)Ce=pe[Ne],Ie||(Ie=Ce,_e.push(Ne)),Ce.lastPointOfContour?(Ce.nextPointOnContour=Ie,Ie.prevPointOnContour=Ce,Ie=void 0):($e=pe[Ne+1],Ce.nextPointOnContour=$e,$e.prevPointOnContour=Ce);if(!oe.inhibitGridFit){if(exports.DEBUG)for(var Oe=0;Oe<he;Oe++);if(pe.push(new HPoint(0,0),new HPoint(Math.round(le.advanceWidth*ie),0)),exec$2(oe),pe.length-=2,exports.DEBUG)for(var Fe=0;Fe<he;Fe++);}};exec$2=function(le){var oe=le.prog;if(oe){var ie=oe.length,ue;for(le.ip=0;le.ip<ie;le.ip++){if(exports.DEBUG&&le.step++,ue=instructionTable[oe[le.ip]],!ue)throw new Error("unknown instruction: 0x"+Number(oe[le.ip]).toString(16));ue(le)}}};function initTZone(le){for(var oe=le.tZone=new Array(le.gZone.length),ie=0;ie<oe.length;ie++)oe[ie]=new HPoint(0,0)}function skip(le,oe){var ie=le.prog,ue=le.ip,de=1,he;do if(he=ie[++ue],he===88)de++;else if(he===89)de--;else if(he===64)ue+=ie[ue+1]+1;else if(he===65)ue+=2*ie[ue+1]+1;else if(he>=176&&he<=183)ue+=he-176+1;else if(he>=184&&he<=191)ue+=(he-184+1)*2;else if(oe&&de===1&&he===27)break;while(de>0);le.ip=ue}function SVTCA(le,oe){exports.DEBUG,oe.fv=oe.pv=oe.dpv=le}function SPVTCA(le,oe){exports.DEBUG,oe.pv=oe.dpv=le}function SFVTCA(le,oe){exports.DEBUG,oe.fv=le}function SPVTL(le,oe){var ie=oe.stack,ue=ie.pop(),de=ie.pop(),he=oe.z2[ue],pe=oe.z1[de];exports.DEBUG;var _e,Ce;le?(_e=he.y-pe.y,Ce=pe.x-he.x):(_e=pe.x-he.x,Ce=pe.y-he.y),oe.pv=oe.dpv=getUnitVector(_e,Ce)}function SFVTL(le,oe){var ie=oe.stack,ue=ie.pop(),de=ie.pop(),he=oe.z2[ue],pe=oe.z1[de];exports.DEBUG;var _e,Ce;le?(_e=he.y-pe.y,Ce=pe.x-he.x):(_e=pe.x-he.x,Ce=pe.y-he.y),oe.fv=getUnitVector(_e,Ce)}function SPVFS(le){var oe=le.stack,ie=oe.pop(),ue=oe.pop();exports.DEBUG,le.pv=le.dpv=getUnitVector(ue,ie)}function SFVFS(le){var oe=le.stack,ie=oe.pop(),ue=oe.pop();exports.DEBUG,le.fv=getUnitVector(ue,ie)}function GPV(le){var oe=le.stack,ie=le.pv;exports.DEBUG,oe.push(ie.x*16384),oe.push(ie.y*16384)}function GFV(le){var oe=le.stack,ie=le.fv;exports.DEBUG,oe.push(ie.x*16384),oe.push(ie.y*16384)}function SFVTPV(le){le.fv=le.pv,exports.DEBUG}function ISECT(le){var oe=le.stack,ie=oe.pop(),ue=oe.pop(),de=oe.pop(),he=oe.pop(),pe=oe.pop(),_e=le.z0,Ce=le.z1,xe=_e[ie],Ie=_e[ue],$e=Ce[de],Ne=Ce[he],Oe=le.z2[pe];exports.DEBUG;var Fe=xe.x,Ve=xe.y,ze=Ie.x,Ue=Ie.y,Pt=$e.x,qe=$e.y,Et=Ne.x,kt=Ne.y,At=(Fe-ze)*(qe-kt)-(Ve-Ue)*(Pt-Et),Dt=Fe*Ue-Ve*ze,Lt=Pt*kt-qe*Et;Oe.x=(Dt*(Pt-Et)-Lt*(Fe-ze))/At,Oe.y=(Dt*(qe-kt)-Lt*(Ve-Ue))/At}function SRP0(le){le.rp0=le.stack.pop(),exports.DEBUG}function SRP1(le){le.rp1=le.stack.pop(),exports.DEBUG}function SRP2(le){le.rp2=le.stack.pop(),exports.DEBUG}function SZP0(le){var oe=le.stack.pop();switch(exports.DEBUG,le.zp0=oe,oe){case 0:le.tZone||initTZone(le),le.z0=le.tZone;break;case 1:le.z0=le.gZone;break;default:throw new Error("Invalid zone pointer")}}function SZP1(le){var oe=le.stack.pop();switch(exports.DEBUG,le.zp1=oe,oe){case 0:le.tZone||initTZone(le),le.z1=le.tZone;break;case 1:le.z1=le.gZone;break;default:throw new Error("Invalid zone pointer")}}function SZP2(le){var oe=le.stack.pop();switch(exports.DEBUG,le.zp2=oe,oe){case 0:le.tZone||initTZone(le),le.z2=le.tZone;break;case 1:le.z2=le.gZone;break;default:throw new Error("Invalid zone pointer")}}function SZPS(le){var oe=le.stack.pop();switch(exports.DEBUG,le.zp0=le.zp1=le.zp2=oe,oe){case 0:le.tZone||initTZone(le),le.z0=le.z1=le.z2=le.tZone;break;case 1:le.z0=le.z1=le.z2=le.gZone;break;default:throw new Error("Invalid zone pointer")}}function SLOOP(le){le.loop=le.stack.pop(),exports.DEBUG}function RTG(le){exports.DEBUG,le.round=roundToGrid}function RTHG(le){exports.DEBUG,le.round=roundToHalfGrid}function SMD(le){var oe=le.stack.pop();exports.DEBUG,le.minDis=oe/64}function ELSE(le){exports.DEBUG,skip(le,!1)}function JMPR(le){var oe=le.stack.pop();exports.DEBUG,le.ip+=oe-1}function SCVTCI(le){var oe=le.stack.pop();exports.DEBUG,le.cvCutIn=oe/64}function DUP(le){var oe=le.stack;exports.DEBUG,oe.push(oe[oe.length-1])}function POP(le){exports.DEBUG,le.stack.pop()}function CLEAR(le){exports.DEBUG,le.stack.length=0}function SWAP(le){var oe=le.stack,ie=oe.pop(),ue=oe.pop();exports.DEBUG,oe.push(ie),oe.push(ue)}function DEPTH(le){var oe=le.stack;exports.DEBUG,oe.push(oe.length)}function LOOPCALL(le){var oe=le.stack,ie=oe.pop(),ue=oe.pop();exports.DEBUG;var de=le.ip,he=le.prog;le.prog=le.funcs[ie];for(var pe=0;pe<ue;pe++)exec$2(le),exports.DEBUG;le.ip=de,le.prog=he}function CALL(le){var oe=le.stack.pop();exports.DEBUG;var ie=le.ip,ue=le.prog;le.prog=le.funcs[oe],exec$2(le),le.ip=ie,le.prog=ue,exports.DEBUG}function CINDEX(le){var oe=le.stack,ie=oe.pop();exports.DEBUG,oe.push(oe[oe.length-ie])}function MINDEX(le){var oe=le.stack,ie=oe.pop();exports.DEBUG,oe.push(oe.splice(oe.length-ie,1)[0])}function FDEF(le){if(le.env!=="fpgm")throw new Error("FDEF not allowed here");var oe=le.stack,ie=le.prog,ue=le.ip,de=oe.pop(),he=ue;for(exports.DEBUG&&void 0;ie[++ue]!==45;);le.ip=ue,le.funcs[de]=ie.slice(he+1,ue)}function MDAP(le,oe){var ie=oe.stack.pop(),ue=oe.z0[ie],de=oe.fv,he=oe.pv;exports.DEBUG;var pe=he.distance(ue,HPZero);le&&(pe=oe.round(pe)),de.setRelative(ue,HPZero,pe,he),de.touch(ue),oe.rp0=oe.rp1=ie}function IUP(le,oe){var ie=oe.z2,ue=ie.length-2,de,he,pe;exports.DEBUG;for(var _e=0;_e<ue;_e++)de=ie[_e],!le.touched(de)&&(he=de.prevTouched(le),he!==de&&(pe=de.nextTouched(le),he===pe&&le.setRelative(de,de,le.distance(he,he,!1,!0),le,!0),le.interpolate(de,he,pe,le)))}function SHP(le,oe){for(var ie=oe.stack,ue=le?oe.rp1:oe.rp2,de=(le?oe.z0:oe.z1)[ue],he=oe.fv,pe=oe.pv,_e=oe.loop,Ce=oe.z2;_e--;){var xe=ie.pop(),Ie=Ce[xe],$e=pe.distance(de,de,!1,!0);he.setRelative(Ie,Ie,$e,pe),he.touch(Ie),exports.DEBUG}oe.loop=1}function SHC(le,oe){var ie=oe.stack,ue=le?oe.rp1:oe.rp2,de=(le?oe.z0:oe.z1)[ue],he=oe.fv,pe=oe.pv,_e=ie.pop(),Ce=oe.z2[oe.contours[_e]],xe=Ce;exports.DEBUG;var Ie=pe.distance(de,de,!1,!0);do xe!==de&&he.setRelative(xe,xe,Ie,pe),xe=xe.nextPointOnContour;while(xe!==Ce)}function SHZ(le,oe){var ie=oe.stack,ue=le?oe.rp1:oe.rp2,de=(le?oe.z0:oe.z1)[ue],he=oe.fv,pe=oe.pv,_e=ie.pop();exports.DEBUG;var Ce;switch(_e){case 0:Ce=oe.tZone;break;case 1:Ce=oe.gZone;break;default:throw new Error("Invalid zone")}for(var xe,Ie=pe.distance(de,de,!1,!0),$e=Ce.length-2,Ne=0;Ne<$e;Ne++)xe=Ce[Ne],he.setRelative(xe,xe,Ie,pe)}function SHPIX(le){for(var oe=le.stack,ie=le.loop,ue=le.fv,de=oe.pop()/64,he=le.z2;ie--;){var pe=oe.pop(),_e=he[pe];exports.DEBUG,ue.setRelative(_e,_e,de),ue.touch(_e)}le.loop=1}function IP(le){for(var oe=le.stack,ie=le.rp1,ue=le.rp2,de=le.loop,he=le.z0[ie],pe=le.z1[ue],_e=le.fv,Ce=le.dpv,xe=le.z2;de--;){var Ie=oe.pop(),$e=xe[Ie];exports.DEBUG,_e.interpolate($e,he,pe,Ce),_e.touch($e)}le.loop=1}function MSIRP(le,oe){var ie=oe.stack,ue=ie.pop()/64,de=ie.pop(),he=oe.z1[de],pe=oe.z0[oe.rp0],_e=oe.fv,Ce=oe.pv;_e.setRelative(he,pe,ue,Ce),_e.touch(he),exports.DEBUG,oe.rp1=oe.rp0,oe.rp2=de,le&&(oe.rp0=de)}function ALIGNRP(le){for(var oe=le.stack,ie=le.rp0,ue=le.z0[ie],de=le.loop,he=le.fv,pe=le.pv,_e=le.z1;de--;){var Ce=oe.pop(),xe=_e[Ce];exports.DEBUG,he.setRelative(xe,ue,0,pe),he.touch(xe)}le.loop=1}function RTDG(le){exports.DEBUG,le.round=roundToDoubleGrid}function MIAP(le,oe){var ie=oe.stack,ue=ie.pop(),de=ie.pop(),he=oe.z0[de],pe=oe.fv,_e=oe.pv,Ce=oe.cvt[ue];exports.DEBUG;var xe=_e.distance(he,HPZero);le&&(Math.abs(xe-Ce)<oe.cvCutIn&&(xe=Ce),xe=oe.round(xe)),pe.setRelative(he,HPZero,xe,_e),oe.zp0===0&&(he.xo=he.x,he.yo=he.y),pe.touch(he),oe.rp0=oe.rp1=de}function NPUSHB(le){var oe=le.prog,ie=le.ip,ue=le.stack,de=oe[++ie];exports.DEBUG;for(var he=0;he<de;he++)ue.push(oe[++ie]);le.ip=ie}function NPUSHW(le){var oe=le.ip,ie=le.prog,ue=le.stack,de=ie[++oe];exports.DEBUG;for(var he=0;he<de;he++){var pe=ie[++oe]<<8|ie[++oe];pe&32768&&(pe=-((pe^65535)+1)),ue.push(pe)}le.ip=oe}function WS(le){var oe=le.stack,ie=le.store;ie||(ie=le.store=[]);var ue=oe.pop(),de=oe.pop();exports.DEBUG,ie[de]=ue}function RS(le){var oe=le.stack,ie=le.store,ue=oe.pop();exports.DEBUG;var de=ie&&ie[ue]||0;oe.push(de)}function WCVTP(le){var oe=le.stack,ie=oe.pop(),ue=oe.pop();exports.DEBUG,le.cvt[ue]=ie/64}function RCVT(le){var oe=le.stack,ie=oe.pop();exports.DEBUG,oe.push(le.cvt[ie]*64)}function GC(le,oe){var ie=oe.stack,ue=ie.pop(),de=oe.z2[ue];exports.DEBUG,ie.push(oe.dpv.distance(de,HPZero,le,!1)*64)}function MD(le,oe){var ie=oe.stack,ue=ie.pop(),de=ie.pop(),he=oe.z1[ue],pe=oe.z0[de],_e=oe.dpv.distance(pe,he,le,le);exports.DEBUG,oe.stack.push(Math.round(_e*64))}function MPPEM(le){exports.DEBUG,le.stack.push(le.ppem)}function FLIPON(le){exports.DEBUG,le.autoFlip=!0}function LT$1(le){var oe=le.stack,ie=oe.pop(),ue=oe.pop();exports.DEBUG,oe.push(ue<ie?1:0)}function LTEQ(le){var oe=le.stack,ie=oe.pop(),ue=oe.pop();exports.DEBUG,oe.push(ue<=ie?1:0)}function GT$1(le){var oe=le.stack,ie=oe.pop(),ue=oe.pop();exports.DEBUG,oe.push(ue>ie?1:0)}function GTEQ(le){var oe=le.stack,ie=oe.pop(),ue=oe.pop();exports.DEBUG,oe.push(ue>=ie?1:0)}function EQ(le){var oe=le.stack,ie=oe.pop(),ue=oe.pop();exports.DEBUG,oe.push(ie===ue?1:0)}function NEQ(le){var oe=le.stack,ie=oe.pop(),ue=oe.pop();exports.DEBUG,oe.push(ie!==ue?1:0)}function ODD(le){var oe=le.stack,ie=oe.pop();exports.DEBUG,oe.push(Math.trunc(ie)%2?1:0)}function EVEN(le){var oe=le.stack,ie=oe.pop();exports.DEBUG,oe.push(Math.trunc(ie)%2?0:1)}function IF(le){var oe=le.stack.pop();exports.DEBUG,oe||(skip(le,!0),exports.DEBUG)}function EIF(le){exports.DEBUG}function AND(le){var oe=le.stack,ie=oe.pop(),ue=oe.pop();exports.DEBUG,oe.push(ie&&ue?1:0)}function OR(le){var oe=le.stack,ie=oe.pop(),ue=oe.pop();exports.DEBUG,oe.push(ie||ue?1:0)}function NOT(le){var oe=le.stack,ie=oe.pop();exports.DEBUG,oe.push(ie?0:1)}function DELTAP123(le,oe){var ie=oe.stack,ue=ie.pop(),de=oe.fv,he=oe.pv,pe=oe.ppem,_e=oe.deltaBase+(le-1)*16,Ce=oe.deltaShift,xe=oe.z0;exports.DEBUG;for(var Ie=0;Ie<ue;Ie++){var $e=ie.pop(),Ne=ie.pop(),Oe=_e+((Ne&240)>>4);if(Oe===pe){var Fe=(Ne&15)-8;Fe>=0&&Fe++,exports.DEBUG;var Ve=xe[$e];de.setRelative(Ve,Ve,Fe*Ce,he)}}}function SDB(le){var oe=le.stack,ie=oe.pop();exports.DEBUG,le.deltaBase=ie}function SDS(le){var oe=le.stack,ie=oe.pop();exports.DEBUG,le.deltaShift=Math.pow(.5,ie)}function ADD(le){var oe=le.stack,ie=oe.pop(),ue=oe.pop();exports.DEBUG,oe.push(ue+ie)}function SUB(le){var oe=le.stack,ie=oe.pop(),ue=oe.pop();exports.DEBUG,oe.push(ue-ie)}function DIV(le){var oe=le.stack,ie=oe.pop(),ue=oe.pop();exports.DEBUG,oe.push(ue*64/ie)}function MUL(le){var oe=le.stack,ie=oe.pop(),ue=oe.pop();exports.DEBUG,oe.push(ue*ie/64)}function ABS(le){var oe=le.stack,ie=oe.pop();exports.DEBUG,oe.push(Math.abs(ie))}function NEG(le){var oe=le.stack,ie=oe.pop();exports.DEBUG,oe.push(-ie)}function FLOOR(le){var oe=le.stack,ie=oe.pop();exports.DEBUG,oe.push(Math.floor(ie/64)*64)}function CEILING(le){var oe=le.stack,ie=oe.pop();exports.DEBUG,oe.push(Math.ceil(ie/64)*64)}function ROUND(le,oe){var ie=oe.stack,ue=ie.pop();exports.DEBUG,ie.push(oe.round(ue/64)*64)}function WCVTF(le){var oe=le.stack,ie=oe.pop(),ue=oe.pop();exports.DEBUG,le.cvt[ue]=ie*le.ppem/le.font.unitsPerEm}function DELTAC123(le,oe){var ie=oe.stack,ue=ie.pop(),de=oe.ppem,he=oe.deltaBase+(le-1)*16,pe=oe.deltaShift;exports.DEBUG;for(var _e=0;_e<ue;_e++){var Ce=ie.pop(),xe=ie.pop(),Ie=he+((xe&240)>>4);if(Ie===de){var $e=(xe&15)-8;$e>=0&&$e++;var Ne=$e*pe;exports.DEBUG,oe.cvt[Ce]+=Ne}}}function SROUND(le){var oe=le.stack.pop();exports.DEBUG,le.round=roundSuper;var ie;switch(oe&192){case 0:ie=.5;break;case 64:ie=1;break;case 128:ie=2;break;default:throw new Error("invalid SROUND value")}switch(le.srPeriod=ie,oe&48){case 0:le.srPhase=0;break;case 16:le.srPhase=.25*ie;break;case 32:le.srPhase=.5*ie;break;case 48:le.srPhase=.75*ie;break;default:throw new Error("invalid SROUND value")}oe&=15,oe===0?le.srThreshold=0:le.srThreshold=(oe/8-.5)*ie}function S45ROUND(le){var oe=le.stack.pop();exports.DEBUG,le.round=roundSuper;var ie;switch(oe&192){case 0:ie=Math.sqrt(2)/2;break;case 64:ie=Math.sqrt(2);break;case 128:ie=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(le.srPeriod=ie,oe&48){case 0:le.srPhase=0;break;case 16:le.srPhase=.25*ie;break;case 32:le.srPhase=.5*ie;break;case 48:le.srPhase=.75*ie;break;default:throw new Error("invalid S45ROUND value")}oe&=15,oe===0?le.srThreshold=0:le.srThreshold=(oe/8-.5)*ie}function ROFF(le){exports.DEBUG,le.round=roundOff}function RUTG(le){exports.DEBUG,le.round=roundUpToGrid}function RDTG(le){exports.DEBUG,le.round=roundDownToGrid}function SCANCTRL(le){var oe=le.stack.pop();exports.DEBUG}function SDPVTL(le,oe){var ie=oe.stack,ue=ie.pop(),de=ie.pop(),he=oe.z2[ue],pe=oe.z1[de];exports.DEBUG;var _e,Ce;le?(_e=he.y-pe.y,Ce=pe.x-he.x):(_e=pe.x-he.x,Ce=pe.y-he.y),oe.dpv=getUnitVector(_e,Ce)}function GETINFO(le){var oe=le.stack,ie=oe.pop(),ue=0;exports.DEBUG,ie&1&&(ue=35),ie&32&&(ue|=4096),oe.push(ue)}function ROLL(le){var oe=le.stack,ie=oe.pop(),ue=oe.pop(),de=oe.pop();exports.DEBUG,oe.push(ue),oe.push(ie),oe.push(de)}function MAX(le){var oe=le.stack,ie=oe.pop(),ue=oe.pop();exports.DEBUG,oe.push(Math.max(ue,ie))}function MIN(le){var oe=le.stack,ie=oe.pop(),ue=oe.pop();exports.DEBUG,oe.push(Math.min(ue,ie))}function SCANTYPE(le){var oe=le.stack.pop();exports.DEBUG}function INSTCTRL(le){var oe=le.stack.pop(),ie=le.stack.pop();switch(exports.DEBUG,oe){case 1:le.inhibitGridFit=!!ie;return;case 2:le.ignoreCvt=!!ie;return;default:throw new Error("invalid INSTCTRL[] selector")}}function PUSHB(le,oe){var ie=oe.stack,ue=oe.prog,de=oe.ip;exports.DEBUG;for(var he=0;he<le;he++)ie.push(ue[++de]);oe.ip=de}function PUSHW(le,oe){var ie=oe.ip,ue=oe.prog,de=oe.stack;exports.DEBUG;for(var he=0;he<le;he++){var pe=ue[++ie]<<8|ue[++ie];pe&32768&&(pe=-((pe^65535)+1)),de.push(pe)}oe.ip=ie}function MDRP_MIRP(le,oe,ie,ue,de,he){var pe=he.stack,_e=le&&pe.pop(),Ce=pe.pop(),xe=he.rp0,Ie=he.z0[xe],$e=he.z1[Ce],Ne=he.minDis,Oe=he.fv,Fe=he.dpv,Ve,ze,Ue,Pt;ze=Ve=Fe.distance($e,Ie,!0,!0),Ue=ze>=0?1:-1,ze=Math.abs(ze),le&&(Pt=he.cvt[_e],ue&&Math.abs(ze-Pt)<he.cvCutIn&&(ze=Pt)),ie&&ze<Ne&&(ze=Ne),ue&&(ze=he.round(ze)),Oe.setRelative($e,Ie,Ue*ze,Fe),Oe.touch($e),exports.DEBUG,he.rp1=he.rp0,he.rp2=Ce,oe&&(he.rp0=Ce)}instructionTable=[SVTCA.bind(void 0,yUnitVector),SVTCA.bind(void 0,xUnitVector),SPVTCA.bind(void 0,yUnitVector),SPVTCA.bind(void 0,xUnitVector),SFVTCA.bind(void 0,yUnitVector),SFVTCA.bind(void 0,xUnitVector),SPVTL.bind(void 0,0),SPVTL.bind(void 0,1),SFVTL.bind(void 0,0),SFVTL.bind(void 0,1),SPVFS,SFVFS,GPV,GFV,SFVTPV,ISECT,SRP0,SRP1,SRP2,SZP0,SZP1,SZP2,SZPS,SLOOP,RTG,RTHG,SMD,ELSE,JMPR,SCVTCI,void 0,void 0,DUP,POP,CLEAR,SWAP,DEPTH,CINDEX,MINDEX,void 0,void 0,void 0,LOOPCALL,CALL,FDEF,void 0,MDAP.bind(void 0,0),MDAP.bind(void 0,1),IUP.bind(void 0,yUnitVector),IUP.bind(void 0,xUnitVector),SHP.bind(void 0,0),SHP.bind(void 0,1),SHC.bind(void 0,0),SHC.bind(void 0,1),SHZ.bind(void 0,0),SHZ.bind(void 0,1),SHPIX,IP,MSIRP.bind(void 0,0),MSIRP.bind(void 0,1),ALIGNRP,RTDG,MIAP.bind(void 0,0),MIAP.bind(void 0,1),NPUSHB,NPUSHW,WS,RS,WCVTP,RCVT,GC.bind(void 0,0),GC.bind(void 0,1),void 0,MD.bind(void 0,0),MD.bind(void 0,1),MPPEM,void 0,FLIPON,void 0,void 0,LT$1,LTEQ,GT$1,GTEQ,EQ,NEQ,ODD,EVEN,IF,EIF,AND,OR,NOT,DELTAP123.bind(void 0,1),SDB,SDS,ADD,SUB,DIV,MUL,ABS,NEG,FLOOR,CEILING,ROUND.bind(void 0,0),ROUND.bind(void 0,1),ROUND.bind(void 0,2),ROUND.bind(void 0,3),void 0,void 0,void 0,void 0,WCVTF,DELTAP123.bind(void 0,2),DELTAP123.bind(void 0,3),DELTAC123.bind(void 0,1),DELTAC123.bind(void 0,2),DELTAC123.bind(void 0,3),SROUND,S45ROUND,void 0,void 0,ROFF,void 0,RUTG,RDTG,POP,POP,void 0,void 0,void 0,void 0,void 0,SCANCTRL,SDPVTL.bind(void 0,0),SDPVTL.bind(void 0,1),GETINFO,void 0,ROLL,MAX,MIN,SCANTYPE,INSTCTRL,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,PUSHB.bind(void 0,1),PUSHB.bind(void 0,2),PUSHB.bind(void 0,3),PUSHB.bind(void 0,4),PUSHB.bind(void 0,5),PUSHB.bind(void 0,6),PUSHB.bind(void 0,7),PUSHB.bind(void 0,8),PUSHW.bind(void 0,1),PUSHW.bind(void 0,2),PUSHW.bind(void 0,3),PUSHW.bind(void 0,4),PUSHW.bind(void 0,5),PUSHW.bind(void 0,6),PUSHW.bind(void 0,7),PUSHW.bind(void 0,8),MDRP_MIRP.bind(void 0,0,0,0,0,0),MDRP_MIRP.bind(void 0,0,0,0,0,1),MDRP_MIRP.bind(void 0,0,0,0,0,2),MDRP_MIRP.bind(void 0,0,0,0,0,3),MDRP_MIRP.bind(void 0,0,0,0,1,0),MDRP_MIRP.bind(void 0,0,0,0,1,1),MDRP_MIRP.bind(void 0,0,0,0,1,2),MDRP_MIRP.bind(void 0,0,0,0,1,3),MDRP_MIRP.bind(void 0,0,0,1,0,0),MDRP_MIRP.bind(void 0,0,0,1,0,1),MDRP_MIRP.bind(void 0,0,0,1,0,2),MDRP_MIRP.bind(void 0,0,0,1,0,3),MDRP_MIRP.bind(void 0,0,0,1,1,0),MDRP_MIRP.bind(void 0,0,0,1,1,1),MDRP_MIRP.bind(void 0,0,0,1,1,2),MDRP_MIRP.bind(void 0,0,0,1,1,3),MDRP_MIRP.bind(void 0,0,1,0,0,0),MDRP_MIRP.bind(void 0,0,1,0,0,1),MDRP_MIRP.bind(void 0,0,1,0,0,2),MDRP_MIRP.bind(void 0,0,1,0,0,3),MDRP_MIRP.bind(void 0,0,1,0,1,0),MDRP_MIRP.bind(void 0,0,1,0,1,1),MDRP_MIRP.bind(void 0,0,1,0,1,2),MDRP_MIRP.bind(void 0,0,1,0,1,3),MDRP_MIRP.bind(void 0,0,1,1,0,0),MDRP_MIRP.bind(void 0,0,1,1,0,1),MDRP_MIRP.bind(void 0,0,1,1,0,2),MDRP_MIRP.bind(void 0,0,1,1,0,3),MDRP_MIRP.bind(void 0,0,1,1,1,0),MDRP_MIRP.bind(void 0,0,1,1,1,1),MDRP_MIRP.bind(void 0,0,1,1,1,2),MDRP_MIRP.bind(void 0,0,1,1,1,3),MDRP_MIRP.bind(void 0,1,0,0,0,0),MDRP_MIRP.bind(void 0,1,0,0,0,1),MDRP_MIRP.bind(void 0,1,0,0,0,2),MDRP_MIRP.bind(void 0,1,0,0,0,3),MDRP_MIRP.bind(void 0,1,0,0,1,0),MDRP_MIRP.bind(void 0,1,0,0,1,1),MDRP_MIRP.bind(void 0,1,0,0,1,2),MDRP_MIRP.bind(void 0,1,0,0,1,3),MDRP_MIRP.bind(void 0,1,0,1,0,0),MDRP_MIRP.bind(void 0,1,0,1,0,1),MDRP_MIRP.bind(void 0,1,0,1,0,2),MDRP_MIRP.bind(void 0,1,0,1,0,3),MDRP_MIRP.bind(void 0,1,0,1,1,0),MDRP_MIRP.bind(void 0,1,0,1,1,1),MDRP_MIRP.bind(void 0,1,0,1,1,2),MDRP_MIRP.bind(void 0,1,0,1,1,3),MDRP_MIRP.bind(void 0,1,1,0,0,0),MDRP_MIRP.bind(void 0,1,1,0,0,1),MDRP_MIRP.bind(void 0,1,1,0,0,2),MDRP_MIRP.bind(void 0,1,1,0,0,3),MDRP_MIRP.bind(void 0,1,1,0,1,0),MDRP_MIRP.bind(void 0,1,1,0,1,1),MDRP_MIRP.bind(void 0,1,1,0,1,2),MDRP_MIRP.bind(void 0,1,1,0,1,3),MDRP_MIRP.bind(void 0,1,1,1,0,0),MDRP_MIRP.bind(void 0,1,1,1,0,1),MDRP_MIRP.bind(void 0,1,1,1,0,2),MDRP_MIRP.bind(void 0,1,1,1,0,3),MDRP_MIRP.bind(void 0,1,1,1,1,0),MDRP_MIRP.bind(void 0,1,1,1,1,1),MDRP_MIRP.bind(void 0,1,1,1,1,2),MDRP_MIRP.bind(void 0,1,1,1,1,3)];function Token(le){this.char=le,this.state={},this.activeState=null}function ContextRange(le,oe,ie){this.contextName=ie,this.startIndex=le,this.endOffset=oe}function ContextChecker(le,oe,ie){this.contextName=le,this.openRange=null,this.ranges=[],this.checkStart=oe,this.checkEnd=ie}function ContextParams(le,oe){this.context=le,this.index=oe,this.length=le.length,this.current=le[oe],this.backtrack=le.slice(0,oe),this.lookahead=le.slice(oe+1)}function Event$1(le){this.eventId=le,this.subscribers=[]}function initializeCoreEvents(le){var oe=this,ie=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];ie.forEach(function(de){Object.defineProperty(oe.events,de,{value:new Event$1(de)})}),le&&ie.forEach(function(de){var he=le[de];typeof he=="function"&&oe.events[de].subscribe(he)});var ue=["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"];ue.forEach(function(de){oe.events[de].subscribe(oe.updateContextsRanges)})}function Tokenizer(le){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],initializeCoreEvents.call(this,le)}Token.prototype.setState=function(le,oe){return this.state[le]=oe,this.activeState={key:le,value:this.state[le]},this.activeState};Token.prototype.getState=function(le){return this.state[le]||null};Tokenizer.prototype.inboundIndex=function(le){return le>=0&&le<this.tokens.length};Tokenizer.prototype.composeRUD=function(le){var oe=this,ie=!0,ue=le.map(function(he){return oe[he[0]].apply(oe,he.slice(1).concat(ie))}),de=function(he){return typeof he=="object"&&he.hasOwnProperty("FAIL")};if(ue.every(de))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:ue.filter(de)};this.dispatch("composeRUD",[ue.filter(function(he){return!de(he)})])};Tokenizer.prototype.replaceRange=function(le,oe,ie,ue){oe=oe!==null?oe:this.tokens.length;var de=ie.every(function(pe){return pe instanceof Token});if(!isNaN(le)&&this.inboundIndex(le)&&de){var he=this.tokens.splice.apply(this.tokens,[le,oe].concat(ie));return ue||this.dispatch("replaceToken",[le,oe,ie]),[he,ie]}else return{FAIL:"replaceRange: invalid tokens or startIndex."}};Tokenizer.prototype.replaceToken=function(le,oe,ie){if(!isNaN(le)&&this.inboundIndex(le)&&oe instanceof Token){var ue=this.tokens.splice(le,1,oe);return ie||this.dispatch("replaceToken",[le,oe]),[ue[0],oe]}else return{FAIL:"replaceToken: invalid token or index."}};Tokenizer.prototype.removeRange=function(le,oe,ie){oe=isNaN(oe)?this.tokens.length:oe;var ue=this.tokens.splice(le,oe);return ie||this.dispatch("removeRange",[ue,le,oe]),ue};Tokenizer.prototype.removeToken=function(le,oe){if(!isNaN(le)&&this.inboundIndex(le)){var ie=this.tokens.splice(le,1);return oe||this.dispatch("removeToken",[ie,le]),ie}else return{FAIL:"removeToken: invalid token index."}};Tokenizer.prototype.insertToken=function(le,oe,ie){var ue=le.every(function(de){return de instanceof Token});return ue?(this.tokens.splice.apply(this.tokens,[oe,0].concat(le)),ie||this.dispatch("insertToken",[le,oe]),le):{FAIL:"insertToken: invalid token(s)."}};Tokenizer.prototype.registerModifier=function(le,oe,ie){this.events.newToken.subscribe(function(ue,de){var he=[ue,de],pe=oe===null||oe.apply(this,he)===!0,_e=[ue,de];if(pe){var Ce=ie.apply(this,_e);ue.setState(le,Ce)}}),this.registeredModifiers.push(le)};Event$1.prototype.subscribe=function(le){return typeof le=="function"?this.subscribers.push(le)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}};Event$1.prototype.unsubscribe=function(le){this.subscribers.splice(le,1)};ContextParams.prototype.setCurrentIndex=function(le){this.index=le,this.current=this.context[le],this.backtrack=this.context.slice(0,le),this.lookahead=this.context.slice(le+1)};ContextParams.prototype.get=function(le){switch(!0){case le===0:return this.current;case(le<0&&Math.abs(le)<=this.backtrack.length):return this.backtrack.slice(le)[0];case(le>0&&le<=this.lookahead.length):return this.lookahead[le-1];default:return null}};Tokenizer.prototype.rangeToText=function(le){if(le instanceof ContextRange)return this.getRangeTokens(le).map(function(oe){return oe.char}).join("")};Tokenizer.prototype.getText=function(){return this.tokens.map(function(le){return le.char}).join("")};Tokenizer.prototype.getContext=function(le){var oe=this.registeredContexts[le];return oe||null};Tokenizer.prototype.on=function(le,oe){var ie=this.events[le];return ie?ie.subscribe(oe):null};Tokenizer.prototype.dispatch=function(le,oe){var ie=this,ue=this.events[le];ue instanceof Event$1&&ue.subscribers.forEach(function(de){de.apply(ie,oe||[])})};Tokenizer.prototype.registerContextChecker=function(le,oe,ie){if(this.getContext(le))return{FAIL:"context name '"+le+"' is already registered."};if(typeof oe!="function")return{FAIL:"missing context start check."};if(typeof ie!="function")return{FAIL:"missing context end check."};var ue=new ContextChecker(le,oe,ie);return this.registeredContexts[le]=ue,this.contextCheckers.push(ue),ue};Tokenizer.prototype.getRangeTokens=function(le){var oe=le.startIndex+le.endOffset;return[].concat(this.tokens.slice(le.startIndex,oe))};Tokenizer.prototype.getContextRanges=function(le){var oe=this.getContext(le);return oe?oe.ranges:{FAIL:"context checker '"+le+"' is not registered."}};Tokenizer.prototype.resetContextsRanges=function(){var le=this.registeredContexts;for(var oe in le)if(le.hasOwnProperty(oe)){var ie=le[oe];ie.ranges=[]}};Tokenizer.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var le=this.tokens.map(function(ue){return ue.char}),oe=0;oe<le.length;oe++){var ie=new ContextParams(le,oe);this.runContextCheck(ie)}this.dispatch("updateContextsRanges",[this.registeredContexts])};Tokenizer.prototype.setEndOffset=function(le,oe){var ie=this.getContext(oe).openRange.startIndex,ue=new ContextRange(ie,le,oe),de=this.getContext(oe).ranges;return ue.rangeId=oe+"."+de.length,de.push(ue),this.getContext(oe).openRange=null,ue};Tokenizer.prototype.runContextCheck=function(le){var oe=this,ie=le.index;this.contextCheckers.forEach(function(ue){var de=ue.contextName,he=oe.getContext(de).openRange;if(!he&&ue.checkStart(le)&&(he=new ContextRange(ie,null,de),oe.getContext(de).openRange=he,oe.dispatch("contextStart",[de,ie])),he&&ue.checkEnd(le)){var pe=ie-he.startIndex+1,_e=oe.setEndOffset(pe,de);oe.dispatch("contextEnd",[de,_e])}})};Tokenizer.prototype.tokenize=function(le){this.tokens=[],this.resetContextsRanges();var oe=Array.from(le);this.dispatch("start");for(var ie=0;ie<oe.length;ie++){var ue=oe[ie],de=new ContextParams(oe,ie);this.dispatch("next",[de]),this.runContextCheck(de);var he=new Token(ue);this.tokens.push(he),this.dispatch("newToken",[he,de])}return this.dispatch("end",[this.tokens]),this.tokens};function isArabicChar(le){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(le)}function isIsolatedArabicChar(le){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(le)}function isTashkeelArabicChar(le){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(le)}function isLatinChar(le){return/[A-z]/.test(le)}function isWhiteSpace(le){return/\s/.test(le)}function FeatureQuery(le){this.font=le,this.features={}}function SubstitutionAction(le){this.id=le.id,this.tag=le.tag,this.substitution=le.substitution}function lookupCoverage(le,oe){if(!le)return-1;switch(oe.format){case 1:return oe.glyphs.indexOf(le);case 2:for(var ie=oe.ranges,ue=0;ue<ie.length;ue++){var de=ie[ue];if(le>=de.start&&le<=de.end){var he=le-de.start;return de.index+he}}break;default:return-1}return-1}function singleSubstitutionFormat1(le,oe){var ie=lookupCoverage(le,oe.coverage);return ie===-1?null:le+oe.deltaGlyphId}function singleSubstitutionFormat2(le,oe){var ie=lookupCoverage(le,oe.coverage);return ie===-1?null:oe.substitute[ie]}function lookupCoverageList(le,oe){for(var ie=[],ue=0;ue<le.length;ue++){var de=le[ue],he=oe.current;he=Array.isArray(he)?he[0]:he;var pe=lookupCoverage(he,de);pe!==-1&&ie.push(pe)}return ie.length!==le.length?-1:ie}function chainingSubstitutionFormat3(le,oe){var ie=oe.inputCoverage.length+oe.lookaheadCoverage.length+oe.backtrackCoverage.length;if(le.context.length<ie)return[];var ue=lookupCoverageList(oe.inputCoverage,le);if(ue===-1)return[];var de=oe.inputCoverage.length-1;if(le.lookahead.length<oe.lookaheadCoverage.length)return[];for(var he=le.lookahead.slice(de);he.length&&isTashkeelArabicChar(he[0].char);)he.shift();var pe=new ContextParams(he,0),_e=lookupCoverageList(oe.lookaheadCoverage,pe),Ce=[].concat(le.backtrack);for(Ce.reverse();Ce.length&&isTashkeelArabicChar(Ce[0].char);)Ce.shift();if(Ce.length<oe.backtrackCoverage.length)return[];var xe=new ContextParams(Ce,0),Ie=lookupCoverageList(oe.backtrackCoverage,xe),$e=ue.length===oe.inputCoverage.length&&_e.length===oe.lookaheadCoverage.length&&Ie.length===oe.backtrackCoverage.length,Ne=[];if($e)for(var Oe=0;Oe<oe.lookupRecords.length;Oe++)for(var Fe=oe.lookupRecords[Oe],Ve=Fe.lookupListIndex,ze=this.getLookupByIndex(Ve),Ue=0;Ue<ze.subtables.length;Ue++){var Pt=ze.subtables[Ue],qe=this.getLookupMethod(ze,Pt),Et=this.getSubstitutionType(ze,Pt);if(Et==="12")for(var kt=0;kt<ue.length;kt++){var At=le.get(kt),Dt=qe(At);Dt&&Ne.push(Dt)}}return Ne}function ligatureSubstitutionFormat1(le,oe){var ie=le.current,ue=lookupCoverage(ie,oe.coverage);if(ue===-1)return null;for(var de,he=oe.ligatureSets[ue],pe=0;pe<he.length;pe++){de=he[pe];for(var _e=0;_e<de.components.length;_e++){var Ce=le.lookahead[_e],xe=de.components[_e];if(Ce!==xe)break;if(_e===de.components.length-1)return de}}return null}function decompositionSubstitutionFormat1(le,oe){var ie=lookupCoverage(le,oe.coverage);return ie===-1?null:oe.sequences[ie]}FeatureQuery.prototype.getDefaultScriptFeaturesIndexes=function(){for(var le=this.font.tables.gsub.scripts,oe=0;oe<le.length;oe++){var ie=le[oe];if(ie.tag==="DFLT")return ie.script.defaultLangSys.featureIndexes}return[]};FeatureQuery.prototype.getScriptFeaturesIndexes=function(le){var oe=this.font.tables;if(!oe.gsub)return[];if(!le)return this.getDefaultScriptFeaturesIndexes();for(var ie=this.font.tables.gsub.scripts,ue=0;ue<ie.length;ue++){var de=ie[ue];if(de.tag===le&&de.script.defaultLangSys)return de.script.defaultLangSys.featureIndexes;var he=de.langSysRecords;if(he)for(var pe=0;pe<he.length;pe++){var _e=he[pe];if(_e.tag===le){var Ce=_e.langSys;return Ce.featureIndexes}}}return this.getDefaultScriptFeaturesIndexes()};FeatureQuery.prototype.mapTagsToFeatures=function(le,oe){for(var ie={},ue=0;ue<le.length;ue++){var de=le[ue].tag,he=le[ue].feature;ie[de]=he}this.features[oe].tags=ie};FeatureQuery.prototype.getScriptFeatures=function(le){var oe=this.features[le];if(this.features.hasOwnProperty(le))return oe;var ie=this.getScriptFeaturesIndexes(le);if(!ie)return null;var ue=this.font.tables.gsub;return oe=ie.map(function(de){return ue.features[de]}),this.features[le]=oe,this.mapTagsToFeatures(oe,le),oe};FeatureQuery.prototype.getSubstitutionType=function(le,oe){var ie=le.lookupType.toString(),ue=oe.substFormat.toString();return ie+ue};FeatureQuery.prototype.getLookupMethod=function(le,oe){var ie=this,ue=this.getSubstitutionType(le,oe);switch(ue){case"11":return function(de){return singleSubstitutionFormat1.apply(ie,[de,oe])};case"12":return function(de){return singleSubstitutionFormat2.apply(ie,[de,oe])};case"63":return function(de){return chainingSubstitutionFormat3.apply(ie,[de,oe])};case"41":return function(de){return ligatureSubstitutionFormat1.apply(ie,[de,oe])};case"21":return function(de){return decompositionSubstitutionFormat1.apply(ie,[de,oe])};default:throw new Error("lookupType: "+le.lookupType+" - substFormat: "+oe.substFormat+" is not yet supported")}};FeatureQuery.prototype.lookupFeature=function(le){var oe=le.contextParams,ie=oe.index,ue=this.getFeature({tag:le.tag,script:le.script});if(!ue)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+le.tag+"' for script '"+le.script+"'.");for(var de=this.getFeatureLookups(ue),he=[].concat(oe.context),pe=0;pe<de.length;pe++)for(var _e=de[pe],Ce=this.getLookupSubtables(_e),xe=0;xe<Ce.length;xe++){var Ie=Ce[xe],$e=this.getSubstitutionType(_e,Ie),Ne=this.getLookupMethod(_e,Ie),Oe=void 0;switch($e){case"11":Oe=Ne(oe.current),Oe&&he.splice(ie,1,new SubstitutionAction({id:11,tag:le.tag,substitution:Oe}));break;case"12":Oe=Ne(oe.current),Oe&&he.splice(ie,1,new SubstitutionAction({id:12,tag:le.tag,substitution:Oe}));break;case"63":Oe=Ne(oe),Array.isArray(Oe)&&Oe.length&&he.splice(ie,1,new SubstitutionAction({id:63,tag:le.tag,substitution:Oe}));break;case"41":Oe=Ne(oe),Oe&&he.splice(ie,1,new SubstitutionAction({id:41,tag:le.tag,substitution:Oe}));break;case"21":Oe=Ne(oe.current),Oe&&he.splice(ie,1,new SubstitutionAction({id:21,tag:le.tag,substitution:Oe}));break}oe=new ContextParams(he,ie),!(Array.isArray(Oe)&&!Oe.length)&&(Oe=null)}return he.length?he:null};FeatureQuery.prototype.supports=function(le){if(!le.script)return!1;this.getScriptFeatures(le.script);var oe=this.features.hasOwnProperty(le.script);if(!le.tag)return oe;var ie=this.features[le.script].some(function(ue){return ue.tag===le.tag});return oe&&ie};FeatureQuery.prototype.getLookupSubtables=function(le){return le.subtables||null};FeatureQuery.prototype.getLookupByIndex=function(le){var oe=this.font.tables.gsub.lookups;return oe[le]||null};FeatureQuery.prototype.getFeatureLookups=function(le){return le.lookupListIndexes.map(this.getLookupByIndex.bind(this))};FeatureQuery.prototype.getFeature=function(le){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(le.script)||this.getScriptFeatures(le.script);var oe=this.features[le.script];return oe?oe.tags[le.tag]?this.features[le.script].tags[le.tag]:null:{FAIL:"No feature for script "+le.script}};function arabicWordStartCheck(le){var oe=le.current,ie=le.get(-1);return ie===null&&isArabicChar(oe)||!isArabicChar(ie)&&isArabicChar(oe)}function arabicWordEndCheck(le){var oe=le.get(1);return oe===null||!isArabicChar(oe)}var arabicWordCheck={startCheck:arabicWordStartCheck,endCheck:arabicWordEndCheck};function arabicSentenceStartCheck(le){var oe=le.current,ie=le.get(-1);return(isArabicChar(oe)||isTashkeelArabicChar(oe))&&!isArabicChar(ie)}function arabicSentenceEndCheck(le){var oe=le.get(1);switch(!0){case oe===null:return!0;case(!isArabicChar(oe)&&!isTashkeelArabicChar(oe)):var ie=isWhiteSpace(oe);if(!ie)return!0;if(ie){var ue=!1;if(ue=le.lookahead.some(function(de){return isArabicChar(de)||isTashkeelArabicChar(de)}),!ue)return!0}break;default:return!1}}var arabicSentenceCheck={startCheck:arabicSentenceStartCheck,endCheck:arabicSentenceEndCheck};function singleSubstitutionFormat1$1(le,oe,ie){oe[ie].setState(le.tag,le.substitution)}function singleSubstitutionFormat2$1(le,oe,ie){oe[ie].setState(le.tag,le.substitution)}function chainingSubstitutionFormat3$1(le,oe,ie){le.substitution.forEach(function(ue,de){var he=oe[ie+de];he.setState(le.tag,ue)})}function ligatureSubstitutionFormat1$1(le,oe,ie){var ue=oe[ie];ue.setState(le.tag,le.substitution.ligGlyph);for(var de=le.substitution.components.length,he=0;he<de;he++)ue=oe[ie+he+1],ue.setState("deleted",!0)}var SUBSTITUTIONS={11:singleSubstitutionFormat1$1,12:singleSubstitutionFormat2$1,63:chainingSubstitutionFormat3$1,41:ligatureSubstitutionFormat1$1};function applySubstitution(le,oe,ie){le instanceof SubstitutionAction&&SUBSTITUTIONS[le.id]&&SUBSTITUTIONS[le.id](le,oe,ie)}function willConnectPrev(le){for(var oe=[].concat(le.backtrack),ie=oe.length-1;ie>=0;ie--){var ue=oe[ie],de=isIsolatedArabicChar(ue),he=isTashkeelArabicChar(ue);if(!de&&!he)return!0;if(de)return!1}return!1}function willConnectNext(le){if(isIsolatedArabicChar(le.current))return!1;for(var oe=0;oe<le.lookahead.length;oe++){var ie=le.lookahead[oe],ue=isTashkeelArabicChar(ie);if(!ue)return!0}return!1}function arabicPresentationForms(le){var oe=this,ie="arab",ue=this.featuresTags[ie],de=this.tokenizer.getRangeTokens(le);if(de.length!==1){var he=new ContextParams(de.map(function(_e){return _e.getState("glyphIndex")}),0),pe=new ContextParams(de.map(function(_e){return _e.char}),0);de.forEach(function(_e,Ce){if(!isTashkeelArabicChar(_e.char)){he.setCurrentIndex(Ce),pe.setCurrentIndex(Ce);var xe=0;willConnectPrev(pe)&&(xe|=1),willConnectNext(pe)&&(xe|=2);var Ie;switch(xe){case 1:Ie="fina";break;case 2:Ie="init";break;case 3:Ie="medi";break}if(ue.indexOf(Ie)!==-1){var $e=oe.query.lookupFeature({tag:Ie,script:ie,contextParams:he});if($e instanceof Error)return;$e.forEach(function(Ne,Oe){Ne instanceof SubstitutionAction&&(applySubstitution(Ne,de,Oe),he.context[Oe]=Ne.substitution)})}}})}}function getContextParams(le,oe){var ie=le.map(function(ue){return ue.activeState.value});return new ContextParams(ie,0)}function arabicRequiredLigatures(le){var oe=this,ie="arab",ue=this.tokenizer.getRangeTokens(le),de=getContextParams(ue);de.context.forEach(function(he,pe){de.setCurrentIndex(pe);var _e=oe.query.lookupFeature({tag:"rlig",script:ie,contextParams:de});_e.length&&(_e.forEach(function(Ce){return applySubstitution(Ce,ue,pe)}),de=getContextParams(ue))})}function latinWordStartCheck(le){var oe=le.current,ie=le.get(-1);return ie===null&&isLatinChar(oe)||!isLatinChar(ie)&&isLatinChar(oe)}function latinWordEndCheck(le){var oe=le.get(1);return oe===null||!isLatinChar(oe)}var latinWordCheck={startCheck:latinWordStartCheck,endCheck:latinWordEndCheck};function getContextParams$1(le,oe){var ie=le.map(function(ue){return ue.activeState.value});return new ContextParams(ie,0)}function latinLigature(le){var oe=this,ie="latn",ue=this.tokenizer.getRangeTokens(le),de=getContextParams$1(ue);de.context.forEach(function(he,pe){de.setCurrentIndex(pe);var _e=oe.query.lookupFeature({tag:"liga",script:ie,contextParams:de});_e.length&&(_e.forEach(function(Ce){return applySubstitution(Ce,ue,pe)}),de=getContextParams$1(ue))})}function Bidi(le){this.baseDir=le||"ltr",this.tokenizer=new Tokenizer,this.featuresTags={}}Bidi.prototype.setText=function(le){this.text=le};Bidi.prototype.contextChecks={latinWordCheck,arabicWordCheck,arabicSentenceCheck};function registerContextChecker(le){var oe=this.contextChecks[le+"Check"];return this.tokenizer.registerContextChecker(le,oe.startCheck,oe.endCheck)}function tokenizeText(){return registerContextChecker.call(this,"latinWord"),registerContextChecker.call(this,"arabicWord"),registerContextChecker.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function reverseArabicSentences(){var le=this,oe=this.tokenizer.getContextRanges("arabicSentence");oe.forEach(function(ie){var ue=le.tokenizer.getRangeTokens(ie);le.tokenizer.replaceRange(ie.startIndex,ie.endOffset,ue.reverse())})}Bidi.prototype.registerFeatures=function(le,oe){var ie=this,ue=oe.filter(function(de){return ie.query.supports({script:le,tag:de})});this.featuresTags.hasOwnProperty(le)?this.featuresTags[le]=this.featuresTags[le].concat(ue):this.featuresTags[le]=ue};Bidi.prototype.applyFeatures=function(le,oe){if(!le)throw new Error("No valid font was provided to apply features");this.query||(this.query=new FeatureQuery(le));for(var ie=0;ie<oe.length;ie++){var ue=oe[ie];this.query.supports({script:ue.script})&&this.registerFeatures(ue.script,ue.tags)}};Bidi.prototype.registerModifier=function(le,oe,ie){this.tokenizer.registerModifier(le,oe,ie)};function checkGlyphIndexStatus(){if(this.tokenizer.registeredModifiers.indexOf("glyphIndex")===-1)throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function applyArabicPresentationForms(){var le=this,oe="arab";if(this.featuresTags.hasOwnProperty(oe)){checkGlyphIndexStatus.call(this);var ie=this.tokenizer.getContextRanges("arabicWord");ie.forEach(function(ue){arabicPresentationForms.call(le,ue)})}}function applyArabicRequireLigatures(){var le=this,oe="arab";if(this.featuresTags.hasOwnProperty(oe)){var ie=this.featuresTags[oe];if(ie.indexOf("rlig")!==-1){checkGlyphIndexStatus.call(this);var ue=this.tokenizer.getContextRanges("arabicWord");ue.forEach(function(de){arabicRequiredLigatures.call(le,de)})}}}function applyLatinLigatures(){var le=this,oe="latn";if(this.featuresTags.hasOwnProperty(oe)){var ie=this.featuresTags[oe];if(ie.indexOf("liga")!==-1){checkGlyphIndexStatus.call(this);var ue=this.tokenizer.getContextRanges("latinWord");ue.forEach(function(de){latinLigature.call(le,de)})}}}Bidi.prototype.checkContextReady=function(le){return!!this.tokenizer.getContext(le)};Bidi.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(applyArabicPresentationForms.call(this),applyArabicRequireLigatures.call(this)),this.checkContextReady("latinWord")&&applyLatinLigatures.call(this),this.checkContextReady("arabicSentence")&&reverseArabicSentences.call(this)};Bidi.prototype.processText=function(le){(!this.text||this.text!==le)&&(this.setText(le),tokenizeText.call(this),this.applyFeaturesToContexts())};Bidi.prototype.getBidiText=function(le){return this.processText(le),this.tokenizer.getText()};Bidi.prototype.getTextGlyphs=function(le){this.processText(le);for(var oe=[],ie=0;ie<this.tokenizer.tokens.length;ie++){var ue=this.tokenizer.tokens[ie];if(!ue.state.deleted){var de=ue.activeState.value;oe.push(Array.isArray(de)?de[0]:de)}}return oe};function Font$1(le){le=le||{},le.tables=le.tables||{},le.empty||(checkArgument(le.familyName,"When creating a new Font object, familyName is required."),checkArgument(le.styleName,"When creating a new Font object, styleName is required."),checkArgument(le.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),checkArgument(le.ascender,"When creating a new Font object, ascender is required."),checkArgument(le.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:le.familyName||" "},fontSubfamily:{en:le.styleName||" "},fullName:{en:le.fullName||le.familyName+" "+le.styleName},postScriptName:{en:le.postScriptName||(le.familyName+le.styleName).replace(/\s/g,"")},designer:{en:le.designer||" "},designerURL:{en:le.designerURL||" "},manufacturer:{en:le.manufacturer||" "},manufacturerURL:{en:le.manufacturerURL||" "},license:{en:le.license||" "},licenseURL:{en:le.licenseURL||" "},version:{en:le.version||"Version 0.1"},description:{en:le.description||" "},copyright:{en:le.copyright||" "},trademark:{en:le.trademark||" "}},this.unitsPerEm=le.unitsPerEm||1e3,this.ascender=le.ascender,this.descender=le.descender,this.createdTimestamp=le.createdTimestamp,this.tables=Object.assign(le.tables,{os2:Object.assign({usWeightClass:le.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:le.widthClass||this.usWidthClasses.MEDIUM,fsSelection:le.fsSelection||this.fsSelectionValues.REGULAR},le.tables.os2)})),this.supported=!0,this.glyphs=new glyphset.GlyphSet(this,le.glyphs||[]),this.encoding=new DefaultEncoding(this),this.position=new Position(this),this.substitution=new Substitution(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){if(this._hinting)return this._hinting;if(this.outlinesFormat==="truetype")return this._hinting=new Hinting(this)}})}Font$1.prototype.hasChar=function(le){return this.encoding.charToGlyphIndex(le)!==null};Font$1.prototype.charToGlyphIndex=function(le){return this.encoding.charToGlyphIndex(le)};Font$1.prototype.charToGlyph=function(le){var oe=this.charToGlyphIndex(le),ie=this.glyphs.get(oe);return ie||(ie=this.glyphs.get(0)),ie};Font$1.prototype.updateFeatures=function(le){return this.defaultRenderOptions.features.map(function(oe){return oe.script==="latn"?{script:"latn",tags:oe.tags.filter(function(ie){return le[ie]})}:oe})};Font$1.prototype.stringToGlyphs=function(le,oe){var ie=this,ue=new Bidi,de=function($e){return ie.charToGlyphIndex($e.char)};ue.registerModifier("glyphIndex",null,de);var he=oe?this.updateFeatures(oe.features):this.defaultRenderOptions.features;ue.applyFeatures(this,he);for(var pe=ue.getTextGlyphs(le),_e=pe.length,Ce=new Array(_e),xe=this.glyphs.get(0),Ie=0;Ie<_e;Ie+=1)Ce[Ie]=this.glyphs.get(pe[Ie])||xe;return Ce};Font$1.prototype.nameToGlyphIndex=function(le){return this.glyphNames.nameToGlyphIndex(le)};Font$1.prototype.nameToGlyph=function(le){var oe=this.nameToGlyphIndex(le),ie=this.glyphs.get(oe);return ie||(ie=this.glyphs.get(0)),ie};Font$1.prototype.glyphIndexToName=function(le){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(le):""};Font$1.prototype.getKerningValue=function(le,oe){le=le.index||le,oe=oe.index||oe;var ie=this.position.defaultKerningTables;return ie?this.position.getKerningValue(ie,le,oe):this.kerningPairs[le+","+oe]||0};Font$1.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]};Font$1.prototype.forEachGlyph=function(le,oe,ie,ue,de,he){oe=oe!==void 0?oe:0,ie=ie!==void 0?ie:0,ue=ue!==void 0?ue:72,de=Object.assign({},this.defaultRenderOptions,de);var pe=1/this.unitsPerEm*ue,_e=this.stringToGlyphs(le,de),Ce;if(de.kerning){var xe=de.script||this.position.getDefaultScriptName();Ce=this.position.getKerningTables(xe,de.language)}for(var Ie=0;Ie<_e.length;Ie+=1){var $e=_e[Ie];if(he.call(this,$e,oe,ie,ue,de),$e.advanceWidth&&(oe+=$e.advanceWidth*pe),de.kerning&&Ie<_e.length-1){var Ne=Ce?this.position.getKerningValue(Ce,$e.index,_e[Ie+1].index):this.getKerningValue($e,_e[Ie+1]);oe+=Ne*pe}de.letterSpacing?oe+=de.letterSpacing*ue:de.tracking&&(oe+=de.tracking/1e3*ue)}return oe};Font$1.prototype.getPath=function(le,oe,ie,ue,de){var he=new Path$1;return this.forEachGlyph(le,oe,ie,ue,de,function(pe,_e,Ce,xe){var Ie=pe.getPath(_e,Ce,xe,de,this);he.extend(Ie)}),he};Font$1.prototype.getPaths=function(le,oe,ie,ue,de){var he=[];return this.forEachGlyph(le,oe,ie,ue,de,function(pe,_e,Ce,xe){var Ie=pe.getPath(_e,Ce,xe,de,this);he.push(Ie)}),he};Font$1.prototype.getAdvanceWidth=function(le,oe,ie){return this.forEachGlyph(le,0,0,oe,ie,function(){})};Font$1.prototype.draw=function(le,oe,ie,ue,de,he){this.getPath(oe,ie,ue,de,he).draw(le)};Font$1.prototype.drawPoints=function(le,oe,ie,ue,de,he){this.forEachGlyph(oe,ie,ue,de,he,function(pe,_e,Ce,xe){pe.drawPoints(le,_e,Ce,xe)})};Font$1.prototype.drawMetrics=function(le,oe,ie,ue,de,he){this.forEachGlyph(oe,ie,ue,de,he,function(pe,_e,Ce,xe){pe.drawMetrics(le,_e,Ce,xe)})};Font$1.prototype.getEnglishName=function(le){var oe=this.names[le];if(oe)return oe.en};Font$1.prototype.validate=function(){var le=this;function oe(ie){var ue=le.getEnglishName(ie);ue&&ue.trim().length>0}oe("fontFamily"),oe("weightName"),oe("manufacturer"),oe("copyright"),oe("version"),this.unitsPerEm>0};Font$1.prototype.toTables=function(){return sfnt.fontToTable(this)};Font$1.prototype.toBuffer=function(){return this.toArrayBuffer()};Font$1.prototype.toArrayBuffer=function(){for(var le=this.toTables(),oe=le.encode(),ie=new ArrayBuffer(oe.length),ue=new Uint8Array(ie),de=0;de<oe.length;de++)ue[de]=oe[de];return ie};Font$1.prototype.download=function(le){var oe=this.getEnglishName("fontFamily"),ie=this.getEnglishName("fontSubfamily");le=le||oe.replace(/\s/g,"")+"-"+ie+".otf";var ue=this.toArrayBuffer();if(isBrowser$1()){if(window.URL=window.URL||window.webkitURL,window.URL){var de=new DataView(ue),he=new Blob([de],{type:"font/opentype"}),pe=document.createElement("a");pe.href=window.URL.createObjectURL(he),pe.download=le;var _e=document.createEvent("MouseEvents");_e.initEvent("click",!0,!1),pe.dispatchEvent(_e)}}else{var Ce=require("fs"),xe=arrayBufferToNodeBuffer(ue);Ce.writeFileSync(le,xe)}};Font$1.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512};Font$1.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9};Font$1.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};function addName(le,oe){var ie=JSON.stringify(le),ue=256;for(var de in oe){var he=parseInt(de);if(!(!he||he<256)){if(JSON.stringify(oe[de])===ie)return he;ue<=he&&(ue=he+1)}}return oe[ue]=le,ue}function makeFvarAxis(le,oe,ie){var ue=addName(oe.name,ie);return[{name:"tag_"+le,type:"TAG",value:oe.tag},{name:"minValue_"+le,type:"FIXED",value:oe.minValue<<16},{name:"defaultValue_"+le,type:"FIXED",value:oe.defaultValue<<16},{name:"maxValue_"+le,type:"FIXED",value:oe.maxValue<<16},{name:"flags_"+le,type:"USHORT",value:0},{name:"nameID_"+le,type:"USHORT",value:ue}]}function parseFvarAxis(le,oe,ie){var ue={},de=new parse.Parser(le,oe);return ue.tag=de.parseTag(),ue.minValue=de.parseFixed(),ue.defaultValue=de.parseFixed(),ue.maxValue=de.parseFixed(),de.skip("uShort",1),ue.name=ie[de.parseUShort()]||{},ue}function makeFvarInstance(le,oe,ie,ue){for(var de=addName(oe.name,ue),he=[{name:"nameID_"+le,type:"USHORT",value:de},{name:"flags_"+le,type:"USHORT",value:0}],pe=0;pe<ie.length;++pe){var _e=ie[pe].tag;he.push({name:"axis_"+le+" "+_e,type:"FIXED",value:oe.coordinates[_e]<<16})}return he}function parseFvarInstance(le,oe,ie,ue){var de={},he=new parse.Parser(le,oe);de.name=ue[he.parseUShort()]||{},he.skip("uShort",1),de.coordinates={};for(var pe=0;pe<ie.length;++pe)de.coordinates[ie[pe].tag]=he.parseFixed();return de}function makeFvarTable(le,oe){var ie=new table.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:le.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:le.instances.length},{name:"instanceSize",type:"USHORT",value:4+le.axes.length*4}]);ie.offsetToData=ie.sizeOf();for(var ue=0;ue<le.axes.length;ue++)ie.fields=ie.fields.concat(makeFvarAxis(ue,le.axes[ue],oe));for(var de=0;de<le.instances.length;de++)ie.fields=ie.fields.concat(makeFvarInstance(de,le.instances[de],le.axes,oe));return ie}function parseFvarTable(le,oe,ie){var ue=new parse.Parser(le,oe),de=ue.parseULong();check$1.argument(de===65536,"Unsupported fvar table version.");var he=ue.parseOffset16();ue.skip("uShort",1);for(var pe=ue.parseUShort(),_e=ue.parseUShort(),Ce=ue.parseUShort(),xe=ue.parseUShort(),Ie=[],$e=0;$e<pe;$e++)Ie.push(parseFvarAxis(le,oe+he+$e*_e,ie));for(var Ne=[],Oe=oe+he+pe*_e,Fe=0;Fe<Ce;Fe++)Ne.push(parseFvarInstance(le,Oe+Fe*xe,Ie,ie));return{axes:Ie,instances:Ne}}var fvar={make:makeFvarTable,parse:parseFvarTable},attachList=function(){return{coverage:this.parsePointer(Parser$1.coverage),attachPoints:this.parseList(Parser$1.pointer(Parser$1.uShortList))}},caretValue=function(){var le=this.parseUShort();if(check$1.argument(le===1||le===2||le===3,"Unsupported CaretValue table version."),le===1)return{coordinate:this.parseShort()};if(le===2)return{pointindex:this.parseShort()};if(le===3)return{coordinate:this.parseShort()}},ligGlyph=function(){return this.parseList(Parser$1.pointer(caretValue))},ligCaretList=function(){return{coverage:this.parsePointer(Parser$1.coverage),ligGlyphs:this.parseList(Parser$1.pointer(ligGlyph))}},markGlyphSets=function(){return this.parseUShort(),this.parseList(Parser$1.pointer(Parser$1.coverage))};function parseGDEFTable(le,oe){oe=oe||0;var ie=new Parser$1(le,oe),ue=ie.parseVersion(1);check$1.argument(ue===1||ue===1.2||ue===1.3,"Unsupported GDEF table version.");var de={version:ue,classDef:ie.parsePointer(Parser$1.classDef),attachList:ie.parsePointer(attachList),ligCaretList:ie.parsePointer(ligCaretList),markAttachClassDef:ie.parsePointer(Parser$1.classDef)};return ue>=1.2&&(de.markGlyphSets=ie.parsePointer(markGlyphSets)),de}var gdef={parse:parseGDEFTable},subtableParsers$1=new Array(10);subtableParsers$1[1]=function(){var le=this.offset+this.relativeOffset,oe=this.parseUShort();if(oe===1)return{posFormat:1,coverage:this.parsePointer(Parser$1.coverage),value:this.parseValueRecord()};if(oe===2)return{posFormat:2,coverage:this.parsePointer(Parser$1.coverage),values:this.parseValueRecordList()};check$1.assert(!1,"0x"+le.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")};subtableParsers$1[2]=function(){var le=this.offset+this.relativeOffset,oe=this.parseUShort();check$1.assert(oe===1||oe===2,"0x"+le.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var ie=this.parsePointer(Parser$1.coverage),ue=this.parseUShort(),de=this.parseUShort();if(oe===1)return{posFormat:oe,coverage:ie,valueFormat1:ue,valueFormat2:de,pairSets:this.parseList(Parser$1.pointer(Parser$1.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(ue),value2:this.parseValueRecord(de)}})))};if(oe===2){var he=this.parsePointer(Parser$1.classDef),pe=this.parsePointer(Parser$1.classDef),_e=this.parseUShort(),Ce=this.parseUShort();return{posFormat:oe,coverage:ie,valueFormat1:ue,valueFormat2:de,classDef1:he,classDef2:pe,class1Count:_e,class2Count:Ce,classRecords:this.parseList(_e,Parser$1.list(Ce,function(){return{value1:this.parseValueRecord(ue),value2:this.parseValueRecord(de)}}))}}};subtableParsers$1[3]=function(){return{error:"GPOS Lookup 3 not supported"}};subtableParsers$1[4]=function(){return{error:"GPOS Lookup 4 not supported"}};subtableParsers$1[5]=function(){return{error:"GPOS Lookup 5 not supported"}};subtableParsers$1[6]=function(){return{error:"GPOS Lookup 6 not supported"}};subtableParsers$1[7]=function(){return{error:"GPOS Lookup 7 not supported"}};subtableParsers$1[8]=function(){return{error:"GPOS Lookup 8 not supported"}};subtableParsers$1[9]=function(){return{error:"GPOS Lookup 9 not supported"}};function parseGposTable(le,oe){oe=oe||0;var ie=new Parser$1(le,oe),ue=ie.parseVersion(1);return check$1.argument(ue===1||ue===1.1,"Unsupported GPOS table version "+ue),ue===1?{version:ue,scripts:ie.parseScriptList(),features:ie.parseFeatureList(),lookups:ie.parseLookupList(subtableParsers$1)}:{version:ue,scripts:ie.parseScriptList(),features:ie.parseFeatureList(),lookups:ie.parseLookupList(subtableParsers$1),variations:ie.parseFeatureVariationsList()}}var subtableMakers$1=new Array(10);function makeGposTable(le){return new table.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new table.ScriptList(le.scripts)},{name:"features",type:"TABLE",value:new table.FeatureList(le.features)},{name:"lookups",type:"TABLE",value:new table.LookupList(le.lookups,subtableMakers$1)}])}var gpos={parse:parseGposTable,make:makeGposTable};function parseWindowsKernTable(le){var oe={};le.skip("uShort");var ie=le.parseUShort();check$1.argument(ie===0,"Unsupported kern sub-table version."),le.skip("uShort",2);var ue=le.parseUShort();le.skip("uShort",3);for(var de=0;de<ue;de+=1){var he=le.parseUShort(),pe=le.parseUShort(),_e=le.parseShort();oe[he+","+pe]=_e}return oe}function parseMacKernTable(le){var oe={};le.skip("uShort");var ie=le.parseULong();ie>1,le.skip("uLong");var ue=le.parseUShort(),de=ue&255;if(le.skip("uShort"),de===0){var he=le.parseUShort();le.skip("uShort",3);for(var pe=0;pe<he;pe+=1){var _e=le.parseUShort(),Ce=le.parseUShort(),xe=le.parseShort();oe[_e+","+Ce]=xe}}return oe}function parseKernTable(le,oe){var ie=new parse.Parser(le,oe),ue=ie.parseUShort();if(ue===0)return parseWindowsKernTable(ie);if(ue===1)return parseMacKernTable(ie);throw new Error("Unsupported kern table version ("+ue+").")}var kern={parse:parseKernTable};function parseLocaTable(le,oe,ie,ue){for(var de=new parse.Parser(le,oe),he=ue?de.parseUShort:de.parseULong,pe=[],_e=0;_e<ie+1;_e+=1){var Ce=he.call(de);ue&&(Ce*=2),pe.push(Ce)}return pe}var loca={parse:parseLocaTable};function parseOpenTypeTableEntries(le,oe){for(var ie=[],ue=12,de=0;de<oe;de+=1){var he=parse.getTag(le,ue),pe=parse.getULong(le,ue+4),_e=parse.getULong(le,ue+8),Ce=parse.getULong(le,ue+12);ie.push({tag:he,checksum:pe,offset:_e,length:Ce,compression:!1}),ue+=16}return ie}function parseWOFFTableEntries(le,oe){for(var ie=[],ue=44,de=0;de<oe;de+=1){var he=parse.getTag(le,ue),pe=parse.getULong(le,ue+4),_e=parse.getULong(le,ue+8),Ce=parse.getULong(le,ue+12),xe=void 0;_e<Ce?xe="WOFF":xe=!1,ie.push({tag:he,offset:pe,compression:xe,compressedLength:_e,length:Ce}),ue+=20}return ie}function uncompressTable(le,oe){if(oe.compression==="WOFF"){var ie=new Uint8Array(le.buffer,oe.offset+2,oe.compressedLength-2),ue=new Uint8Array(oe.length);if(tinyInflate(ie,ue),ue.byteLength!==oe.length)throw new Error("Decompression error: "+oe.tag+" decompressed length doesn't match recorded length");var de=new DataView(ue.buffer,0);return{data:de,offset:0}}else return{data:le,offset:oe.offset}}function parseBuffer(le,oe){oe=oe??{};var ie,ue,de=new Font$1({empty:!0}),he=new DataView(le,0),pe,_e=[],Ce=parse.getTag(he,0);if(Ce==="\0\0\0"||Ce==="true"||Ce==="typ1")de.outlinesFormat="truetype",pe=parse.getUShort(he,4),_e=parseOpenTypeTableEntries(he,pe);else if(Ce==="OTTO")de.outlinesFormat="cff",pe=parse.getUShort(he,4),_e=parseOpenTypeTableEntries(he,pe);else if(Ce==="wOFF"){var xe=parse.getTag(he,4);if(xe==="\0\0\0")de.outlinesFormat="truetype";else if(xe==="OTTO")de.outlinesFormat="cff";else throw new Error("Unsupported OpenType flavor "+Ce);pe=parse.getUShort(he,12),_e=parseWOFFTableEntries(he,pe)}else throw new Error("Unsupported OpenType signature "+Ce);for(var Ie,$e,Ne,Oe,Fe,Ve,ze,Ue,Pt,qe,Et,kt,At=0;At<pe;At+=1){var Dt=_e[At],Lt=void 0;switch(Dt.tag){case"cmap":Lt=uncompressTable(he,Dt),de.tables.cmap=cmap.parse(Lt.data,Lt.offset),de.encoding=new CmapEncoding(de.tables.cmap);break;case"cvt ":Lt=uncompressTable(he,Dt),kt=new parse.Parser(Lt.data,Lt.offset),de.tables.cvt=kt.parseShortList(Dt.length/2);break;case"fvar":$e=Dt;break;case"fpgm":Lt=uncompressTable(he,Dt),kt=new parse.Parser(Lt.data,Lt.offset),de.tables.fpgm=kt.parseByteList(Dt.length);break;case"head":Lt=uncompressTable(he,Dt),de.tables.head=head.parse(Lt.data,Lt.offset),de.unitsPerEm=de.tables.head.unitsPerEm,ie=de.tables.head.indexToLocFormat;break;case"hhea":Lt=uncompressTable(he,Dt),de.tables.hhea=hhea.parse(Lt.data,Lt.offset),de.ascender=de.tables.hhea.ascender,de.descender=de.tables.hhea.descender,de.numberOfHMetrics=de.tables.hhea.numberOfHMetrics;break;case"hmtx":ze=Dt;break;case"ltag":Lt=uncompressTable(he,Dt),ue=ltag.parse(Lt.data,Lt.offset);break;case"maxp":Lt=uncompressTable(he,Dt),de.tables.maxp=maxp.parse(Lt.data,Lt.offset),de.numGlyphs=de.tables.maxp.numGlyphs;break;case"name":qe=Dt;break;case"OS/2":Lt=uncompressTable(he,Dt),de.tables.os2=os2.parse(Lt.data,Lt.offset);break;case"post":Lt=uncompressTable(he,Dt),de.tables.post=post.parse(Lt.data,Lt.offset),de.glyphNames=new GlyphNames(de.tables.post);break;case"prep":Lt=uncompressTable(he,Dt),kt=new parse.Parser(Lt.data,Lt.offset),de.tables.prep=kt.parseByteList(Dt.length);break;case"glyf":Ne=Dt;break;case"loca":Pt=Dt;break;case"CFF ":Ie=Dt;break;case"kern":Ue=Dt;break;case"GDEF":Oe=Dt;break;case"GPOS":Fe=Dt;break;case"GSUB":Ve=Dt;break;case"meta":Et=Dt;break}}var jt=uncompressTable(he,qe);if(de.tables.name=_name.parse(jt.data,jt.offset,ue),de.names=de.tables.name,Ne&&Pt){var _n=ie===0,bn=uncompressTable(he,Pt),vn=loca.parse(bn.data,bn.offset,de.numGlyphs,_n),Tn=uncompressTable(he,Ne);de.glyphs=glyf.parse(Tn.data,Tn.offset,vn,de,oe)}else if(Ie){var $n=uncompressTable(he,Ie);cff.parse($n.data,$n.offset,de,oe)}else throw new Error("Font doesn't contain TrueType or CFF outlines.");var wn=uncompressTable(he,ze);if(hmtx.parse(de,wn.data,wn.offset,de.numberOfHMetrics,de.numGlyphs,de.glyphs,oe),addGlyphNames(de,oe),Ue){var Cn=uncompressTable(he,Ue);de.kerningPairs=kern.parse(Cn.data,Cn.offset)}else de.kerningPairs={};if(Oe){var Sn=uncompressTable(he,Oe);de.tables.gdef=gdef.parse(Sn.data,Sn.offset)}if(Fe){var In=uncompressTable(he,Fe);de.tables.gpos=gpos.parse(In.data,In.offset),de.position.init()}if(Ve){var En=uncompressTable(he,Ve);de.tables.gsub=gsub.parse(En.data,En.offset)}if($e){var xn=uncompressTable(he,$e);de.tables.fvar=fvar.parse(xn.data,xn.offset,de.names)}if(Et){var kn=uncompressTable(he,Et);de.tables.meta=meta.parse(kn.data,kn.offset),de.metas=de.tables.meta}return de}const _lut=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function generateUUID(){const le=Math.random()*4294967295|0,oe=Math.random()*4294967295|0,ie=Math.random()*4294967295|0,ue=Math.random()*4294967295|0;return(_lut[le&255]+_lut[le>>8&255]+_lut[le>>16&255]+_lut[le>>24&255]+"-"+_lut[oe&255]+_lut[oe>>8&255]+"-"+_lut[oe>>16&15|64]+_lut[oe>>24&255]+"-"+_lut[ie&63|128]+_lut[ie>>8&255]+"-"+_lut[ie>>16&255]+_lut[ie>>24&255]+_lut[ue&255]+_lut[ue>>8&255]+_lut[ue>>16&255]+_lut[ue>>24&255]).toLowerCase()}function clamp$2(le,oe,ie){return Math.max(oe,Math.min(ie,le))}function euclideanModulo(le,oe){return(le%oe+oe)%oe}function lerp(le,oe,ie){return(1-ie)*le+ie*oe}const NoColorSpace="",SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",LinearTransfer="linear",SRGBTransfer="srgb",WebGLCoordinateSystem=2e3,WebGPUCoordinateSystem=2001;class Matrix3{constructor(oe,ie,ue,de,he,pe,_e,Ce,xe){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],oe!==void 0&&this.set(oe,ie,ue,de,he,pe,_e,Ce,xe)}set(oe,ie,ue,de,he,pe,_e,Ce,xe){const Ie=this.elements;return Ie[0]=oe,Ie[1]=de,Ie[2]=_e,Ie[3]=ie,Ie[4]=he,Ie[5]=Ce,Ie[6]=ue,Ie[7]=pe,Ie[8]=xe,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(oe){const ie=this.elements,ue=oe.elements;return ie[0]=ue[0],ie[1]=ue[1],ie[2]=ue[2],ie[3]=ue[3],ie[4]=ue[4],ie[5]=ue[5],ie[6]=ue[6],ie[7]=ue[7],ie[8]=ue[8],this}extractBasis(oe,ie,ue){return oe.setFromMatrix3Column(this,0),ie.setFromMatrix3Column(this,1),ue.setFromMatrix3Column(this,2),this}setFromMatrix4(oe){const ie=oe.elements;return this.set(ie[0],ie[4],ie[8],ie[1],ie[5],ie[9],ie[2],ie[6],ie[10]),this}multiply(oe){return this.multiplyMatrices(this,oe)}premultiply(oe){return this.multiplyMatrices(oe,this)}multiplyMatrices(oe,ie){const ue=oe.elements,de=ie.elements,he=this.elements,pe=ue[0],_e=ue[3],Ce=ue[6],xe=ue[1],Ie=ue[4],$e=ue[7],Ne=ue[2],Oe=ue[5],Fe=ue[8],Ve=de[0],ze=de[3],Ue=de[6],Pt=de[1],qe=de[4],Et=de[7],kt=de[2],At=de[5],Dt=de[8];return he[0]=pe*Ve+_e*Pt+Ce*kt,he[3]=pe*ze+_e*qe+Ce*At,he[6]=pe*Ue+_e*Et+Ce*Dt,he[1]=xe*Ve+Ie*Pt+$e*kt,he[4]=xe*ze+Ie*qe+$e*At,he[7]=xe*Ue+Ie*Et+$e*Dt,he[2]=Ne*Ve+Oe*Pt+Fe*kt,he[5]=Ne*ze+Oe*qe+Fe*At,he[8]=Ne*Ue+Oe*Et+Fe*Dt,this}multiplyScalar(oe){const ie=this.elements;return ie[0]*=oe,ie[3]*=oe,ie[6]*=oe,ie[1]*=oe,ie[4]*=oe,ie[7]*=oe,ie[2]*=oe,ie[5]*=oe,ie[8]*=oe,this}determinant(){const oe=this.elements,ie=oe[0],ue=oe[1],de=oe[2],he=oe[3],pe=oe[4],_e=oe[5],Ce=oe[6],xe=oe[7],Ie=oe[8];return ie*pe*Ie-ie*_e*xe-ue*he*Ie+ue*_e*Ce+de*he*xe-de*pe*Ce}invert(){const oe=this.elements,ie=oe[0],ue=oe[1],de=oe[2],he=oe[3],pe=oe[4],_e=oe[5],Ce=oe[6],xe=oe[7],Ie=oe[8],$e=Ie*pe-_e*xe,Ne=_e*Ce-Ie*he,Oe=xe*he-pe*Ce,Fe=ie*$e+ue*Ne+de*Oe;if(Fe===0)return this.set(0,0,0,0,0,0,0,0,0);const Ve=1/Fe;return oe[0]=$e*Ve,oe[1]=(de*xe-Ie*ue)*Ve,oe[2]=(_e*ue-de*pe)*Ve,oe[3]=Ne*Ve,oe[4]=(Ie*ie-de*Ce)*Ve,oe[5]=(de*he-_e*ie)*Ve,oe[6]=Oe*Ve,oe[7]=(ue*Ce-xe*ie)*Ve,oe[8]=(pe*ie-ue*he)*Ve,this}transpose(){let oe;const ie=this.elements;return oe=ie[1],ie[1]=ie[3],ie[3]=oe,oe=ie[2],ie[2]=ie[6],ie[6]=oe,oe=ie[5],ie[5]=ie[7],ie[7]=oe,this}getNormalMatrix(oe){return this.setFromMatrix4(oe).invert().transpose()}transposeIntoArray(oe){const ie=this.elements;return oe[0]=ie[0],oe[1]=ie[3],oe[2]=ie[6],oe[3]=ie[1],oe[4]=ie[4],oe[5]=ie[7],oe[6]=ie[2],oe[7]=ie[5],oe[8]=ie[8],this}setUvTransform(oe,ie,ue,de,he,pe,_e){const Ce=Math.cos(he),xe=Math.sin(he);return this.set(ue*Ce,ue*xe,-ue*(Ce*pe+xe*_e)+pe+oe,-de*xe,de*Ce,-de*(-xe*pe+Ce*_e)+_e+ie,0,0,1),this}scale(oe,ie){return this.premultiply(_m3.makeScale(oe,ie)),this}rotate(oe){return this.premultiply(_m3.makeRotation(-oe)),this}translate(oe,ie){return this.premultiply(_m3.makeTranslation(oe,ie)),this}makeTranslation(oe,ie){return oe.isVector2?this.set(1,0,oe.x,0,1,oe.y,0,0,1):this.set(1,0,oe,0,1,ie,0,0,1),this}makeRotation(oe){const ie=Math.cos(oe),ue=Math.sin(oe);return this.set(ie,-ue,0,ue,ie,0,0,0,1),this}makeScale(oe,ie){return this.set(oe,0,0,0,ie,0,0,0,1),this}equals(oe){const ie=this.elements,ue=oe.elements;for(let de=0;de<9;de++)if(ie[de]!==ue[de])return!1;return!0}fromArray(oe,ie=0){for(let ue=0;ue<9;ue++)this.elements[ue]=oe[ue+ie];return this}toArray(oe=[],ie=0){const ue=this.elements;return oe[ie]=ue[0],oe[ie+1]=ue[1],oe[ie+2]=ue[2],oe[ie+3]=ue[3],oe[ie+4]=ue[4],oe[ie+5]=ue[5],oe[ie+6]=ue[6],oe[ie+7]=ue[7],oe[ie+8]=ue[8],oe}clone(){return new this.constructor().fromArray(this.elements)}}const _m3=new Matrix3,LINEAR_REC709_TO_XYZ=new Matrix3().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),XYZ_TO_LINEAR_REC709=new Matrix3().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function createColorManagement(){const le={enabled:!0,workingColorSpace:LinearSRGBColorSpace,spaces:{},convert:function(de,he,pe){return this.enabled===!1||he===pe||!he||!pe||(this.spaces[he].transfer===SRGBTransfer&&(de.r=SRGBToLinear(de.r),de.g=SRGBToLinear(de.g),de.b=SRGBToLinear(de.b)),this.spaces[he].primaries!==this.spaces[pe].primaries&&(de.applyMatrix3(this.spaces[he].toXYZ),de.applyMatrix3(this.spaces[pe].fromXYZ)),this.spaces[pe].transfer===SRGBTransfer&&(de.r=LinearToSRGB(de.r),de.g=LinearToSRGB(de.g),de.b=LinearToSRGB(de.b))),de},fromWorkingColorSpace:function(de,he){return this.convert(de,this.workingColorSpace,he)},toWorkingColorSpace:function(de,he){return this.convert(de,he,this.workingColorSpace)},getPrimaries:function(de){return this.spaces[de].primaries},getTransfer:function(de){return de===NoColorSpace?LinearTransfer:this.spaces[de].transfer},getLuminanceCoefficients:function(de,he=this.workingColorSpace){return de.fromArray(this.spaces[he].luminanceCoefficients)},define:function(de){Object.assign(this.spaces,de)},_getMatrix:function(de,he,pe){return de.copy(this.spaces[he].toXYZ).multiply(this.spaces[pe].fromXYZ)},_getDrawingBufferColorSpace:function(de){return this.spaces[de].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(de=this.workingColorSpace){return this.spaces[de].workingColorSpaceConfig.unpackColorSpace}},oe=[.64,.33,.3,.6,.15,.06],ie=[.2126,.7152,.0722],ue=[.3127,.329];return le.define({[LinearSRGBColorSpace]:{primaries:oe,whitePoint:ue,transfer:LinearTransfer,toXYZ:LINEAR_REC709_TO_XYZ,fromXYZ:XYZ_TO_LINEAR_REC709,luminanceCoefficients:ie,workingColorSpaceConfig:{unpackColorSpace:SRGBColorSpace},outputColorSpaceConfig:{drawingBufferColorSpace:SRGBColorSpace}},[SRGBColorSpace]:{primaries:oe,whitePoint:ue,transfer:SRGBTransfer,toXYZ:LINEAR_REC709_TO_XYZ,fromXYZ:XYZ_TO_LINEAR_REC709,luminanceCoefficients:ie,outputColorSpaceConfig:{drawingBufferColorSpace:SRGBColorSpace}}}),le}const ColorManagement=createColorManagement();function SRGBToLinear(le){return le<.04045?le*.0773993808:Math.pow(le*.9478672986+.0521327014,2.4)}function LinearToSRGB(le){return le<.0031308?le*12.92:1.055*Math.pow(le,.41666)-.055}const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(le,oe,ie){return ie<0&&(ie+=1),ie>1&&(ie-=1),ie<1/6?le+(oe-le)*6*ie:ie<1/2?oe:ie<2/3?le+(oe-le)*6*(2/3-ie):le}class Color{constructor(oe,ie,ue){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(oe,ie,ue)}set(oe,ie,ue){if(ie===void 0&&ue===void 0){const de=oe;de&&de.isColor?this.copy(de):typeof de=="number"?this.setHex(de):typeof de=="string"&&this.setStyle(de)}else this.setRGB(oe,ie,ue);return this}setScalar(oe){return this.r=oe,this.g=oe,this.b=oe,this}setHex(oe,ie=SRGBColorSpace){return oe=Math.floor(oe),this.r=(oe>>16&255)/255,this.g=(oe>>8&255)/255,this.b=(oe&255)/255,ColorManagement.toWorkingColorSpace(this,ie),this}setRGB(oe,ie,ue,de=ColorManagement.workingColorSpace){return this.r=oe,this.g=ie,this.b=ue,ColorManagement.toWorkingColorSpace(this,de),this}setHSL(oe,ie,ue,de=ColorManagement.workingColorSpace){if(oe=euclideanModulo(oe,1),ie=clamp$2(ie,0,1),ue=clamp$2(ue,0,1),ie===0)this.r=this.g=this.b=ue;else{const he=ue<=.5?ue*(1+ie):ue+ie-ue*ie,pe=2*ue-he;this.r=hue2rgb(pe,he,oe+1/3),this.g=hue2rgb(pe,he,oe),this.b=hue2rgb(pe,he,oe-1/3)}return ColorManagement.toWorkingColorSpace(this,de),this}setStyle(oe,ie=SRGBColorSpace){function ue(he){he!==void 0&&parseFloat(he)<1}let de;if(de=/^(\w+)\(([^\)]*)\)/.exec(oe)){let he;const pe=de[1],_e=de[2];switch(pe){case"rgb":case"rgba":if(he=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(_e))return ue(he[4]),this.setRGB(Math.min(255,parseInt(he[1],10))/255,Math.min(255,parseInt(he[2],10))/255,Math.min(255,parseInt(he[3],10))/255,ie);if(he=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(_e))return ue(he[4]),this.setRGB(Math.min(100,parseInt(he[1],10))/100,Math.min(100,parseInt(he[2],10))/100,Math.min(100,parseInt(he[3],10))/100,ie);break;case"hsl":case"hsla":if(he=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(_e))return ue(he[4]),this.setHSL(parseFloat(he[1])/360,parseFloat(he[2])/100,parseFloat(he[3])/100,ie);break;default:}}else if(de=/^\#([A-Fa-f\d]+)$/.exec(oe)){const he=de[1],pe=he.length;if(pe===3)return this.setRGB(parseInt(he.charAt(0),16)/15,parseInt(he.charAt(1),16)/15,parseInt(he.charAt(2),16)/15,ie);if(pe===6)return this.setHex(parseInt(he,16),ie)}else if(oe&&oe.length>0)return this.setColorName(oe,ie);return this}setColorName(oe,ie=SRGBColorSpace){const ue=_colorKeywords[oe.toLowerCase()];return ue!==void 0&&this.setHex(ue,ie),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(oe){return this.r=oe.r,this.g=oe.g,this.b=oe.b,this}copySRGBToLinear(oe){return this.r=SRGBToLinear(oe.r),this.g=SRGBToLinear(oe.g),this.b=SRGBToLinear(oe.b),this}copyLinearToSRGB(oe){return this.r=LinearToSRGB(oe.r),this.g=LinearToSRGB(oe.g),this.b=LinearToSRGB(oe.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(oe=SRGBColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),oe),Math.round(clamp$2(_color.r*255,0,255))*65536+Math.round(clamp$2(_color.g*255,0,255))*256+Math.round(clamp$2(_color.b*255,0,255))}getHexString(oe=SRGBColorSpace){return("000000"+this.getHex(oe).toString(16)).slice(-6)}getHSL(oe,ie=ColorManagement.workingColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),ie);const ue=_color.r,de=_color.g,he=_color.b,pe=Math.max(ue,de,he),_e=Math.min(ue,de,he);let Ce,xe;const Ie=(_e+pe)/2;if(_e===pe)Ce=0,xe=0;else{const $e=pe-_e;switch(xe=Ie<=.5?$e/(pe+_e):$e/(2-pe-_e),pe){case ue:Ce=(de-he)/$e+(de<he?6:0);break;case de:Ce=(he-ue)/$e+2;break;case he:Ce=(ue-de)/$e+4;break}Ce/=6}return oe.h=Ce,oe.s=xe,oe.l=Ie,oe}getRGB(oe,ie=ColorManagement.workingColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),ie),oe.r=_color.r,oe.g=_color.g,oe.b=_color.b,oe}getStyle(oe=SRGBColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),oe);const ie=_color.r,ue=_color.g,de=_color.b;return oe!==SRGBColorSpace?`color(${oe} ${ie.toFixed(3)} ${ue.toFixed(3)} ${de.toFixed(3)})`:`rgb(${Math.round(ie*255)},${Math.round(ue*255)},${Math.round(de*255)})`}offsetHSL(oe,ie,ue){return this.getHSL(_hslA),this.setHSL(_hslA.h+oe,_hslA.s+ie,_hslA.l+ue)}add(oe){return this.r+=oe.r,this.g+=oe.g,this.b+=oe.b,this}addColors(oe,ie){return this.r=oe.r+ie.r,this.g=oe.g+ie.g,this.b=oe.b+ie.b,this}addScalar(oe){return this.r+=oe,this.g+=oe,this.b+=oe,this}sub(oe){return this.r=Math.max(0,this.r-oe.r),this.g=Math.max(0,this.g-oe.g),this.b=Math.max(0,this.b-oe.b),this}multiply(oe){return this.r*=oe.r,this.g*=oe.g,this.b*=oe.b,this}multiplyScalar(oe){return this.r*=oe,this.g*=oe,this.b*=oe,this}lerp(oe,ie){return this.r+=(oe.r-this.r)*ie,this.g+=(oe.g-this.g)*ie,this.b+=(oe.b-this.b)*ie,this}lerpColors(oe,ie,ue){return this.r=oe.r+(ie.r-oe.r)*ue,this.g=oe.g+(ie.g-oe.g)*ue,this.b=oe.b+(ie.b-oe.b)*ue,this}lerpHSL(oe,ie){this.getHSL(_hslA),oe.getHSL(_hslB);const ue=lerp(_hslA.h,_hslB.h,ie),de=lerp(_hslA.s,_hslB.s,ie),he=lerp(_hslA.l,_hslB.l,ie);return this.setHSL(ue,de,he),this}setFromVector3(oe){return this.r=oe.x,this.g=oe.y,this.b=oe.z,this}applyMatrix3(oe){const ie=this.r,ue=this.g,de=this.b,he=oe.elements;return this.r=he[0]*ie+he[3]*ue+he[6]*de,this.g=he[1]*ie+he[4]*ue+he[7]*de,this.b=he[2]*ie+he[5]*ue+he[8]*de,this}equals(oe){return oe.r===this.r&&oe.g===this.g&&oe.b===this.b}fromArray(oe,ie=0){return this.r=oe[ie],this.g=oe[ie+1],this.b=oe[ie+2],this}toArray(oe=[],ie=0){return oe[ie]=this.r,oe[ie+1]=this.g,oe[ie+2]=this.b,oe}fromBufferAttribute(oe,ie){return this.r=oe.getX(ie),this.g=oe.getY(ie),this.b=oe.getZ(ie),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const _color=new Color;Color.NAMES=_colorKeywords;class Vector2{constructor(oe=0,ie=0){Vector2.prototype.isVector2=!0,this.x=oe,this.y=ie}get width(){return this.x}set width(oe){this.x=oe}get height(){return this.y}set height(oe){this.y=oe}set(oe,ie){return this.x=oe,this.y=ie,this}setScalar(oe){return this.x=oe,this.y=oe,this}setX(oe){return this.x=oe,this}setY(oe){return this.y=oe,this}setComponent(oe,ie){switch(oe){case 0:this.x=ie;break;case 1:this.y=ie;break;default:throw new Error("index is out of range: "+oe)}return this}getComponent(oe){switch(oe){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+oe)}}clone(){return new this.constructor(this.x,this.y)}copy(oe){return this.x=oe.x,this.y=oe.y,this}add(oe){return this.x+=oe.x,this.y+=oe.y,this}addScalar(oe){return this.x+=oe,this.y+=oe,this}addVectors(oe,ie){return this.x=oe.x+ie.x,this.y=oe.y+ie.y,this}addScaledVector(oe,ie){return this.x+=oe.x*ie,this.y+=oe.y*ie,this}sub(oe){return this.x-=oe.x,this.y-=oe.y,this}subScalar(oe){return this.x-=oe,this.y-=oe,this}subVectors(oe,ie){return this.x=oe.x-ie.x,this.y=oe.y-ie.y,this}multiply(oe){return this.x*=oe.x,this.y*=oe.y,this}multiplyScalar(oe){return this.x*=oe,this.y*=oe,this}divide(oe){return this.x/=oe.x,this.y/=oe.y,this}divideScalar(oe){return this.multiplyScalar(1/oe)}applyMatrix3(oe){const ie=this.x,ue=this.y,de=oe.elements;return this.x=de[0]*ie+de[3]*ue+de[6],this.y=de[1]*ie+de[4]*ue+de[7],this}min(oe){return this.x=Math.min(this.x,oe.x),this.y=Math.min(this.y,oe.y),this}max(oe){return this.x=Math.max(this.x,oe.x),this.y=Math.max(this.y,oe.y),this}clamp(oe,ie){return this.x=clamp$2(this.x,oe.x,ie.x),this.y=clamp$2(this.y,oe.y,ie.y),this}clampScalar(oe,ie){return this.x=clamp$2(this.x,oe,ie),this.y=clamp$2(this.y,oe,ie),this}clampLength(oe,ie){const ue=this.length();return this.divideScalar(ue||1).multiplyScalar(clamp$2(ue,oe,ie))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(oe){return this.x*oe.x+this.y*oe.y}cross(oe){return this.x*oe.y-this.y*oe.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(oe){const ie=Math.sqrt(this.lengthSq()*oe.lengthSq());if(ie===0)return Math.PI/2;const ue=this.dot(oe)/ie;return Math.acos(clamp$2(ue,-1,1))}distanceTo(oe){return Math.sqrt(this.distanceToSquared(oe))}distanceToSquared(oe){const ie=this.x-oe.x,ue=this.y-oe.y;return ie*ie+ue*ue}manhattanDistanceTo(oe){return Math.abs(this.x-oe.x)+Math.abs(this.y-oe.y)}setLength(oe){return this.normalize().multiplyScalar(oe)}lerp(oe,ie){return this.x+=(oe.x-this.x)*ie,this.y+=(oe.y-this.y)*ie,this}lerpVectors(oe,ie,ue){return this.x=oe.x+(ie.x-oe.x)*ue,this.y=oe.y+(ie.y-oe.y)*ue,this}equals(oe){return oe.x===this.x&&oe.y===this.y}fromArray(oe,ie=0){return this.x=oe[ie],this.y=oe[ie+1],this}toArray(oe=[],ie=0){return oe[ie]=this.x,oe[ie+1]=this.y,oe}fromBufferAttribute(oe,ie){return this.x=oe.getX(ie),this.y=oe.getY(ie),this}rotateAround(oe,ie){const ue=Math.cos(ie),de=Math.sin(ie),he=this.x-oe.x,pe=this.y-oe.y;return this.x=he*ue-pe*de+oe.x,this.y=he*de+pe*ue+oe.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Quaternion{constructor(oe=0,ie=0,ue=0,de=1){this.isQuaternion=!0,this._x=oe,this._y=ie,this._z=ue,this._w=de}static slerpFlat(oe,ie,ue,de,he,pe,_e){let Ce=ue[de+0],xe=ue[de+1],Ie=ue[de+2],$e=ue[de+3];const Ne=he[pe+0],Oe=he[pe+1],Fe=he[pe+2],Ve=he[pe+3];if(_e===0){oe[ie+0]=Ce,oe[ie+1]=xe,oe[ie+2]=Ie,oe[ie+3]=$e;return}if(_e===1){oe[ie+0]=Ne,oe[ie+1]=Oe,oe[ie+2]=Fe,oe[ie+3]=Ve;return}if($e!==Ve||Ce!==Ne||xe!==Oe||Ie!==Fe){let ze=1-_e;const Ue=Ce*Ne+xe*Oe+Ie*Fe+$e*Ve,Pt=Ue>=0?1:-1,qe=1-Ue*Ue;if(qe>Number.EPSILON){const kt=Math.sqrt(qe),At=Math.atan2(kt,Ue*Pt);ze=Math.sin(ze*At)/kt,_e=Math.sin(_e*At)/kt}const Et=_e*Pt;if(Ce=Ce*ze+Ne*Et,xe=xe*ze+Oe*Et,Ie=Ie*ze+Fe*Et,$e=$e*ze+Ve*Et,ze===1-_e){const kt=1/Math.sqrt(Ce*Ce+xe*xe+Ie*Ie+$e*$e);Ce*=kt,xe*=kt,Ie*=kt,$e*=kt}}oe[ie]=Ce,oe[ie+1]=xe,oe[ie+2]=Ie,oe[ie+3]=$e}static multiplyQuaternionsFlat(oe,ie,ue,de,he,pe){const _e=ue[de],Ce=ue[de+1],xe=ue[de+2],Ie=ue[de+3],$e=he[pe],Ne=he[pe+1],Oe=he[pe+2],Fe=he[pe+3];return oe[ie]=_e*Fe+Ie*$e+Ce*Oe-xe*Ne,oe[ie+1]=Ce*Fe+Ie*Ne+xe*$e-_e*Oe,oe[ie+2]=xe*Fe+Ie*Oe+_e*Ne-Ce*$e,oe[ie+3]=Ie*Fe-_e*$e-Ce*Ne-xe*Oe,oe}get x(){return this._x}set x(oe){this._x=oe,this._onChangeCallback()}get y(){return this._y}set y(oe){this._y=oe,this._onChangeCallback()}get z(){return this._z}set z(oe){this._z=oe,this._onChangeCallback()}get w(){return this._w}set w(oe){this._w=oe,this._onChangeCallback()}set(oe,ie,ue,de){return this._x=oe,this._y=ie,this._z=ue,this._w=de,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(oe){return this._x=oe.x,this._y=oe.y,this._z=oe.z,this._w=oe.w,this._onChangeCallback(),this}setFromEuler(oe,ie=!0){const ue=oe._x,de=oe._y,he=oe._z,pe=oe._order,_e=Math.cos,Ce=Math.sin,xe=_e(ue/2),Ie=_e(de/2),$e=_e(he/2),Ne=Ce(ue/2),Oe=Ce(de/2),Fe=Ce(he/2);switch(pe){case"XYZ":this._x=Ne*Ie*$e+xe*Oe*Fe,this._y=xe*Oe*$e-Ne*Ie*Fe,this._z=xe*Ie*Fe+Ne*Oe*$e,this._w=xe*Ie*$e-Ne*Oe*Fe;break;case"YXZ":this._x=Ne*Ie*$e+xe*Oe*Fe,this._y=xe*Oe*$e-Ne*Ie*Fe,this._z=xe*Ie*Fe-Ne*Oe*$e,this._w=xe*Ie*$e+Ne*Oe*Fe;break;case"ZXY":this._x=Ne*Ie*$e-xe*Oe*Fe,this._y=xe*Oe*$e+Ne*Ie*Fe,this._z=xe*Ie*Fe+Ne*Oe*$e,this._w=xe*Ie*$e-Ne*Oe*Fe;break;case"ZYX":this._x=Ne*Ie*$e-xe*Oe*Fe,this._y=xe*Oe*$e+Ne*Ie*Fe,this._z=xe*Ie*Fe-Ne*Oe*$e,this._w=xe*Ie*$e+Ne*Oe*Fe;break;case"YZX":this._x=Ne*Ie*$e+xe*Oe*Fe,this._y=xe*Oe*$e+Ne*Ie*Fe,this._z=xe*Ie*Fe-Ne*Oe*$e,this._w=xe*Ie*$e-Ne*Oe*Fe;break;case"XZY":this._x=Ne*Ie*$e-xe*Oe*Fe,this._y=xe*Oe*$e-Ne*Ie*Fe,this._z=xe*Ie*Fe+Ne*Oe*$e,this._w=xe*Ie*$e+Ne*Oe*Fe;break;default:}return ie===!0&&this._onChangeCallback(),this}setFromAxisAngle(oe,ie){const ue=ie/2,de=Math.sin(ue);return this._x=oe.x*de,this._y=oe.y*de,this._z=oe.z*de,this._w=Math.cos(ue),this._onChangeCallback(),this}setFromRotationMatrix(oe){const ie=oe.elements,ue=ie[0],de=ie[4],he=ie[8],pe=ie[1],_e=ie[5],Ce=ie[9],xe=ie[2],Ie=ie[6],$e=ie[10],Ne=ue+_e+$e;if(Ne>0){const Oe=.5/Math.sqrt(Ne+1);this._w=.25/Oe,this._x=(Ie-Ce)*Oe,this._y=(he-xe)*Oe,this._z=(pe-de)*Oe}else if(ue>_e&&ue>$e){const Oe=2*Math.sqrt(1+ue-_e-$e);this._w=(Ie-Ce)/Oe,this._x=.25*Oe,this._y=(de+pe)/Oe,this._z=(he+xe)/Oe}else if(_e>$e){const Oe=2*Math.sqrt(1+_e-ue-$e);this._w=(he-xe)/Oe,this._x=(de+pe)/Oe,this._y=.25*Oe,this._z=(Ce+Ie)/Oe}else{const Oe=2*Math.sqrt(1+$e-ue-_e);this._w=(pe-de)/Oe,this._x=(he+xe)/Oe,this._y=(Ce+Ie)/Oe,this._z=.25*Oe}return this._onChangeCallback(),this}setFromUnitVectors(oe,ie){let ue=oe.dot(ie)+1;return ue<Number.EPSILON?(ue=0,Math.abs(oe.x)>Math.abs(oe.z)?(this._x=-oe.y,this._y=oe.x,this._z=0,this._w=ue):(this._x=0,this._y=-oe.z,this._z=oe.y,this._w=ue)):(this._x=oe.y*ie.z-oe.z*ie.y,this._y=oe.z*ie.x-oe.x*ie.z,this._z=oe.x*ie.y-oe.y*ie.x,this._w=ue),this.normalize()}angleTo(oe){return 2*Math.acos(Math.abs(clamp$2(this.dot(oe),-1,1)))}rotateTowards(oe,ie){const ue=this.angleTo(oe);if(ue===0)return this;const de=Math.min(1,ie/ue);return this.slerp(oe,de),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(oe){return this._x*oe._x+this._y*oe._y+this._z*oe._z+this._w*oe._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let oe=this.length();return oe===0?(this._x=0,this._y=0,this._z=0,this._w=1):(oe=1/oe,this._x=this._x*oe,this._y=this._y*oe,this._z=this._z*oe,this._w=this._w*oe),this._onChangeCallback(),this}multiply(oe){return this.multiplyQuaternions(this,oe)}premultiply(oe){return this.multiplyQuaternions(oe,this)}multiplyQuaternions(oe,ie){const ue=oe._x,de=oe._y,he=oe._z,pe=oe._w,_e=ie._x,Ce=ie._y,xe=ie._z,Ie=ie._w;return this._x=ue*Ie+pe*_e+de*xe-he*Ce,this._y=de*Ie+pe*Ce+he*_e-ue*xe,this._z=he*Ie+pe*xe+ue*Ce-de*_e,this._w=pe*Ie-ue*_e-de*Ce-he*xe,this._onChangeCallback(),this}slerp(oe,ie){if(ie===0)return this;if(ie===1)return this.copy(oe);const ue=this._x,de=this._y,he=this._z,pe=this._w;let _e=pe*oe._w+ue*oe._x+de*oe._y+he*oe._z;if(_e<0?(this._w=-oe._w,this._x=-oe._x,this._y=-oe._y,this._z=-oe._z,_e=-_e):this.copy(oe),_e>=1)return this._w=pe,this._x=ue,this._y=de,this._z=he,this;const Ce=1-_e*_e;if(Ce<=Number.EPSILON){const Oe=1-ie;return this._w=Oe*pe+ie*this._w,this._x=Oe*ue+ie*this._x,this._y=Oe*de+ie*this._y,this._z=Oe*he+ie*this._z,this.normalize(),this}const xe=Math.sqrt(Ce),Ie=Math.atan2(xe,_e),$e=Math.sin((1-ie)*Ie)/xe,Ne=Math.sin(ie*Ie)/xe;return this._w=pe*$e+this._w*Ne,this._x=ue*$e+this._x*Ne,this._y=de*$e+this._y*Ne,this._z=he*$e+this._z*Ne,this._onChangeCallback(),this}slerpQuaternions(oe,ie,ue){return this.copy(oe).slerp(ie,ue)}random(){const oe=2*Math.PI*Math.random(),ie=2*Math.PI*Math.random(),ue=Math.random(),de=Math.sqrt(1-ue),he=Math.sqrt(ue);return this.set(de*Math.sin(oe),de*Math.cos(oe),he*Math.sin(ie),he*Math.cos(ie))}equals(oe){return oe._x===this._x&&oe._y===this._y&&oe._z===this._z&&oe._w===this._w}fromArray(oe,ie=0){return this._x=oe[ie],this._y=oe[ie+1],this._z=oe[ie+2],this._w=oe[ie+3],this._onChangeCallback(),this}toArray(oe=[],ie=0){return oe[ie]=this._x,oe[ie+1]=this._y,oe[ie+2]=this._z,oe[ie+3]=this._w,oe}fromBufferAttribute(oe,ie){return this._x=oe.getX(ie),this._y=oe.getY(ie),this._z=oe.getZ(ie),this._w=oe.getW(ie),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(oe){return this._onChangeCallback=oe,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(oe=0,ie=0,ue=0){Vector3.prototype.isVector3=!0,this.x=oe,this.y=ie,this.z=ue}set(oe,ie,ue){return ue===void 0&&(ue=this.z),this.x=oe,this.y=ie,this.z=ue,this}setScalar(oe){return this.x=oe,this.y=oe,this.z=oe,this}setX(oe){return this.x=oe,this}setY(oe){return this.y=oe,this}setZ(oe){return this.z=oe,this}setComponent(oe,ie){switch(oe){case 0:this.x=ie;break;case 1:this.y=ie;break;case 2:this.z=ie;break;default:throw new Error("index is out of range: "+oe)}return this}getComponent(oe){switch(oe){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+oe)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(oe){return this.x=oe.x,this.y=oe.y,this.z=oe.z,this}add(oe){return this.x+=oe.x,this.y+=oe.y,this.z+=oe.z,this}addScalar(oe){return this.x+=oe,this.y+=oe,this.z+=oe,this}addVectors(oe,ie){return this.x=oe.x+ie.x,this.y=oe.y+ie.y,this.z=oe.z+ie.z,this}addScaledVector(oe,ie){return this.x+=oe.x*ie,this.y+=oe.y*ie,this.z+=oe.z*ie,this}sub(oe){return this.x-=oe.x,this.y-=oe.y,this.z-=oe.z,this}subScalar(oe){return this.x-=oe,this.y-=oe,this.z-=oe,this}subVectors(oe,ie){return this.x=oe.x-ie.x,this.y=oe.y-ie.y,this.z=oe.z-ie.z,this}multiply(oe){return this.x*=oe.x,this.y*=oe.y,this.z*=oe.z,this}multiplyScalar(oe){return this.x*=oe,this.y*=oe,this.z*=oe,this}multiplyVectors(oe,ie){return this.x=oe.x*ie.x,this.y=oe.y*ie.y,this.z=oe.z*ie.z,this}applyEuler(oe){return this.applyQuaternion(_quaternion.setFromEuler(oe))}applyAxisAngle(oe,ie){return this.applyQuaternion(_quaternion.setFromAxisAngle(oe,ie))}applyMatrix3(oe){const ie=this.x,ue=this.y,de=this.z,he=oe.elements;return this.x=he[0]*ie+he[3]*ue+he[6]*de,this.y=he[1]*ie+he[4]*ue+he[7]*de,this.z=he[2]*ie+he[5]*ue+he[8]*de,this}applyNormalMatrix(oe){return this.applyMatrix3(oe).normalize()}applyMatrix4(oe){const ie=this.x,ue=this.y,de=this.z,he=oe.elements,pe=1/(he[3]*ie+he[7]*ue+he[11]*de+he[15]);return this.x=(he[0]*ie+he[4]*ue+he[8]*de+he[12])*pe,this.y=(he[1]*ie+he[5]*ue+he[9]*de+he[13])*pe,this.z=(he[2]*ie+he[6]*ue+he[10]*de+he[14])*pe,this}applyQuaternion(oe){const ie=this.x,ue=this.y,de=this.z,he=oe.x,pe=oe.y,_e=oe.z,Ce=oe.w,xe=2*(pe*de-_e*ue),Ie=2*(_e*ie-he*de),$e=2*(he*ue-pe*ie);return this.x=ie+Ce*xe+pe*$e-_e*Ie,this.y=ue+Ce*Ie+_e*xe-he*$e,this.z=de+Ce*$e+he*Ie-pe*xe,this}project(oe){return this.applyMatrix4(oe.matrixWorldInverse).applyMatrix4(oe.projectionMatrix)}unproject(oe){return this.applyMatrix4(oe.projectionMatrixInverse).applyMatrix4(oe.matrixWorld)}transformDirection(oe){const ie=this.x,ue=this.y,de=this.z,he=oe.elements;return this.x=he[0]*ie+he[4]*ue+he[8]*de,this.y=he[1]*ie+he[5]*ue+he[9]*de,this.z=he[2]*ie+he[6]*ue+he[10]*de,this.normalize()}divide(oe){return this.x/=oe.x,this.y/=oe.y,this.z/=oe.z,this}divideScalar(oe){return this.multiplyScalar(1/oe)}min(oe){return this.x=Math.min(this.x,oe.x),this.y=Math.min(this.y,oe.y),this.z=Math.min(this.z,oe.z),this}max(oe){return this.x=Math.max(this.x,oe.x),this.y=Math.max(this.y,oe.y),this.z=Math.max(this.z,oe.z),this}clamp(oe,ie){return this.x=clamp$2(this.x,oe.x,ie.x),this.y=clamp$2(this.y,oe.y,ie.y),this.z=clamp$2(this.z,oe.z,ie.z),this}clampScalar(oe,ie){return this.x=clamp$2(this.x,oe,ie),this.y=clamp$2(this.y,oe,ie),this.z=clamp$2(this.z,oe,ie),this}clampLength(oe,ie){const ue=this.length();return this.divideScalar(ue||1).multiplyScalar(clamp$2(ue,oe,ie))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(oe){return this.x*oe.x+this.y*oe.y+this.z*oe.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(oe){return this.normalize().multiplyScalar(oe)}lerp(oe,ie){return this.x+=(oe.x-this.x)*ie,this.y+=(oe.y-this.y)*ie,this.z+=(oe.z-this.z)*ie,this}lerpVectors(oe,ie,ue){return this.x=oe.x+(ie.x-oe.x)*ue,this.y=oe.y+(ie.y-oe.y)*ue,this.z=oe.z+(ie.z-oe.z)*ue,this}cross(oe){return this.crossVectors(this,oe)}crossVectors(oe,ie){const ue=oe.x,de=oe.y,he=oe.z,pe=ie.x,_e=ie.y,Ce=ie.z;return this.x=de*Ce-he*_e,this.y=he*pe-ue*Ce,this.z=ue*_e-de*pe,this}projectOnVector(oe){const ie=oe.lengthSq();if(ie===0)return this.set(0,0,0);const ue=oe.dot(this)/ie;return this.copy(oe).multiplyScalar(ue)}projectOnPlane(oe){return _vector$1.copy(this).projectOnVector(oe),this.sub(_vector$1)}reflect(oe){return this.sub(_vector$1.copy(oe).multiplyScalar(2*this.dot(oe)))}angleTo(oe){const ie=Math.sqrt(this.lengthSq()*oe.lengthSq());if(ie===0)return Math.PI/2;const ue=this.dot(oe)/ie;return Math.acos(clamp$2(ue,-1,1))}distanceTo(oe){return Math.sqrt(this.distanceToSquared(oe))}distanceToSquared(oe){const ie=this.x-oe.x,ue=this.y-oe.y,de=this.z-oe.z;return ie*ie+ue*ue+de*de}manhattanDistanceTo(oe){return Math.abs(this.x-oe.x)+Math.abs(this.y-oe.y)+Math.abs(this.z-oe.z)}setFromSpherical(oe){return this.setFromSphericalCoords(oe.radius,oe.phi,oe.theta)}setFromSphericalCoords(oe,ie,ue){const de=Math.sin(ie)*oe;return this.x=de*Math.sin(ue),this.y=Math.cos(ie)*oe,this.z=de*Math.cos(ue),this}setFromCylindrical(oe){return this.setFromCylindricalCoords(oe.radius,oe.theta,oe.y)}setFromCylindricalCoords(oe,ie,ue){return this.x=oe*Math.sin(ie),this.y=ue,this.z=oe*Math.cos(ie),this}setFromMatrixPosition(oe){const ie=oe.elements;return this.x=ie[12],this.y=ie[13],this.z=ie[14],this}setFromMatrixScale(oe){const ie=this.setFromMatrixColumn(oe,0).length(),ue=this.setFromMatrixColumn(oe,1).length(),de=this.setFromMatrixColumn(oe,2).length();return this.x=ie,this.y=ue,this.z=de,this}setFromMatrixColumn(oe,ie){return this.fromArray(oe.elements,ie*4)}setFromMatrix3Column(oe,ie){return this.fromArray(oe.elements,ie*3)}setFromEuler(oe){return this.x=oe._x,this.y=oe._y,this.z=oe._z,this}setFromColor(oe){return this.x=oe.r,this.y=oe.g,this.z=oe.b,this}equals(oe){return oe.x===this.x&&oe.y===this.y&&oe.z===this.z}fromArray(oe,ie=0){return this.x=oe[ie],this.y=oe[ie+1],this.z=oe[ie+2],this}toArray(oe=[],ie=0){return oe[ie]=this.x,oe[ie+1]=this.y,oe[ie+2]=this.z,oe}fromBufferAttribute(oe,ie){return this.x=oe.getX(ie),this.y=oe.getY(ie),this.z=oe.getZ(ie),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const oe=Math.random()*Math.PI*2,ie=Math.random()*2-1,ue=Math.sqrt(1-ie*ie);return this.x=ue*Math.cos(oe),this.y=ie,this.z=ue*Math.sin(oe),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector$1=new Vector3,_quaternion=new Quaternion;class Matrix4{constructor(oe,ie,ue,de,he,pe,_e,Ce,xe,Ie,$e,Ne,Oe,Fe,Ve,ze){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],oe!==void 0&&this.set(oe,ie,ue,de,he,pe,_e,Ce,xe,Ie,$e,Ne,Oe,Fe,Ve,ze)}set(oe,ie,ue,de,he,pe,_e,Ce,xe,Ie,$e,Ne,Oe,Fe,Ve,ze){const Ue=this.elements;return Ue[0]=oe,Ue[4]=ie,Ue[8]=ue,Ue[12]=de,Ue[1]=he,Ue[5]=pe,Ue[9]=_e,Ue[13]=Ce,Ue[2]=xe,Ue[6]=Ie,Ue[10]=$e,Ue[14]=Ne,Ue[3]=Oe,Ue[7]=Fe,Ue[11]=Ve,Ue[15]=ze,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(oe){const ie=this.elements,ue=oe.elements;return ie[0]=ue[0],ie[1]=ue[1],ie[2]=ue[2],ie[3]=ue[3],ie[4]=ue[4],ie[5]=ue[5],ie[6]=ue[6],ie[7]=ue[7],ie[8]=ue[8],ie[9]=ue[9],ie[10]=ue[10],ie[11]=ue[11],ie[12]=ue[12],ie[13]=ue[13],ie[14]=ue[14],ie[15]=ue[15],this}copyPosition(oe){const ie=this.elements,ue=oe.elements;return ie[12]=ue[12],ie[13]=ue[13],ie[14]=ue[14],this}setFromMatrix3(oe){const ie=oe.elements;return this.set(ie[0],ie[3],ie[6],0,ie[1],ie[4],ie[7],0,ie[2],ie[5],ie[8],0,0,0,0,1),this}extractBasis(oe,ie,ue){return oe.setFromMatrixColumn(this,0),ie.setFromMatrixColumn(this,1),ue.setFromMatrixColumn(this,2),this}makeBasis(oe,ie,ue){return this.set(oe.x,ie.x,ue.x,0,oe.y,ie.y,ue.y,0,oe.z,ie.z,ue.z,0,0,0,0,1),this}extractRotation(oe){const ie=this.elements,ue=oe.elements,de=1/_v1.setFromMatrixColumn(oe,0).length(),he=1/_v1.setFromMatrixColumn(oe,1).length(),pe=1/_v1.setFromMatrixColumn(oe,2).length();return ie[0]=ue[0]*de,ie[1]=ue[1]*de,ie[2]=ue[2]*de,ie[3]=0,ie[4]=ue[4]*he,ie[5]=ue[5]*he,ie[6]=ue[6]*he,ie[7]=0,ie[8]=ue[8]*pe,ie[9]=ue[9]*pe,ie[10]=ue[10]*pe,ie[11]=0,ie[12]=0,ie[13]=0,ie[14]=0,ie[15]=1,this}makeRotationFromEuler(oe){const ie=this.elements,ue=oe.x,de=oe.y,he=oe.z,pe=Math.cos(ue),_e=Math.sin(ue),Ce=Math.cos(de),xe=Math.sin(de),Ie=Math.cos(he),$e=Math.sin(he);if(oe.order==="XYZ"){const Ne=pe*Ie,Oe=pe*$e,Fe=_e*Ie,Ve=_e*$e;ie[0]=Ce*Ie,ie[4]=-Ce*$e,ie[8]=xe,ie[1]=Oe+Fe*xe,ie[5]=Ne-Ve*xe,ie[9]=-_e*Ce,ie[2]=Ve-Ne*xe,ie[6]=Fe+Oe*xe,ie[10]=pe*Ce}else if(oe.order==="YXZ"){const Ne=Ce*Ie,Oe=Ce*$e,Fe=xe*Ie,Ve=xe*$e;ie[0]=Ne+Ve*_e,ie[4]=Fe*_e-Oe,ie[8]=pe*xe,ie[1]=pe*$e,ie[5]=pe*Ie,ie[9]=-_e,ie[2]=Oe*_e-Fe,ie[6]=Ve+Ne*_e,ie[10]=pe*Ce}else if(oe.order==="ZXY"){const Ne=Ce*Ie,Oe=Ce*$e,Fe=xe*Ie,Ve=xe*$e;ie[0]=Ne-Ve*_e,ie[4]=-pe*$e,ie[8]=Fe+Oe*_e,ie[1]=Oe+Fe*_e,ie[5]=pe*Ie,ie[9]=Ve-Ne*_e,ie[2]=-pe*xe,ie[6]=_e,ie[10]=pe*Ce}else if(oe.order==="ZYX"){const Ne=pe*Ie,Oe=pe*$e,Fe=_e*Ie,Ve=_e*$e;ie[0]=Ce*Ie,ie[4]=Fe*xe-Oe,ie[8]=Ne*xe+Ve,ie[1]=Ce*$e,ie[5]=Ve*xe+Ne,ie[9]=Oe*xe-Fe,ie[2]=-xe,ie[6]=_e*Ce,ie[10]=pe*Ce}else if(oe.order==="YZX"){const Ne=pe*Ce,Oe=pe*xe,Fe=_e*Ce,Ve=_e*xe;ie[0]=Ce*Ie,ie[4]=Ve-Ne*$e,ie[8]=Fe*$e+Oe,ie[1]=$e,ie[5]=pe*Ie,ie[9]=-_e*Ie,ie[2]=-xe*Ie,ie[6]=Oe*$e+Fe,ie[10]=Ne-Ve*$e}else if(oe.order==="XZY"){const Ne=pe*Ce,Oe=pe*xe,Fe=_e*Ce,Ve=_e*xe;ie[0]=Ce*Ie,ie[4]=-$e,ie[8]=xe*Ie,ie[1]=Ne*$e+Ve,ie[5]=pe*Ie,ie[9]=Oe*$e-Fe,ie[2]=Fe*$e-Oe,ie[6]=_e*Ie,ie[10]=Ve*$e+Ne}return ie[3]=0,ie[7]=0,ie[11]=0,ie[12]=0,ie[13]=0,ie[14]=0,ie[15]=1,this}makeRotationFromQuaternion(oe){return this.compose(_zero,oe,_one)}lookAt(oe,ie,ue){const de=this.elements;return _z.subVectors(oe,ie),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(ue,_z),_x.lengthSq()===0&&(Math.abs(ue.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(ue,_z)),_x.normalize(),_y.crossVectors(_z,_x),de[0]=_x.x,de[4]=_y.x,de[8]=_z.x,de[1]=_x.y,de[5]=_y.y,de[9]=_z.y,de[2]=_x.z,de[6]=_y.z,de[10]=_z.z,this}multiply(oe){return this.multiplyMatrices(this,oe)}premultiply(oe){return this.multiplyMatrices(oe,this)}multiplyMatrices(oe,ie){const ue=oe.elements,de=ie.elements,he=this.elements,pe=ue[0],_e=ue[4],Ce=ue[8],xe=ue[12],Ie=ue[1],$e=ue[5],Ne=ue[9],Oe=ue[13],Fe=ue[2],Ve=ue[6],ze=ue[10],Ue=ue[14],Pt=ue[3],qe=ue[7],Et=ue[11],kt=ue[15],At=de[0],Dt=de[4],Lt=de[8],jt=de[12],_n=de[1],bn=de[5],vn=de[9],Tn=de[13],$n=de[2],wn=de[6],Cn=de[10],Sn=de[14],In=de[3],En=de[7],xn=de[11],kn=de[15];return he[0]=pe*At+_e*_n+Ce*$n+xe*In,he[4]=pe*Dt+_e*bn+Ce*wn+xe*En,he[8]=pe*Lt+_e*vn+Ce*Cn+xe*xn,he[12]=pe*jt+_e*Tn+Ce*Sn+xe*kn,he[1]=Ie*At+$e*_n+Ne*$n+Oe*In,he[5]=Ie*Dt+$e*bn+Ne*wn+Oe*En,he[9]=Ie*Lt+$e*vn+Ne*Cn+Oe*xn,he[13]=Ie*jt+$e*Tn+Ne*Sn+Oe*kn,he[2]=Fe*At+Ve*_n+ze*$n+Ue*In,he[6]=Fe*Dt+Ve*bn+ze*wn+Ue*En,he[10]=Fe*Lt+Ve*vn+ze*Cn+Ue*xn,he[14]=Fe*jt+Ve*Tn+ze*Sn+Ue*kn,he[3]=Pt*At+qe*_n+Et*$n+kt*In,he[7]=Pt*Dt+qe*bn+Et*wn+kt*En,he[11]=Pt*Lt+qe*vn+Et*Cn+kt*xn,he[15]=Pt*jt+qe*Tn+Et*Sn+kt*kn,this}multiplyScalar(oe){const ie=this.elements;return ie[0]*=oe,ie[4]*=oe,ie[8]*=oe,ie[12]*=oe,ie[1]*=oe,ie[5]*=oe,ie[9]*=oe,ie[13]*=oe,ie[2]*=oe,ie[6]*=oe,ie[10]*=oe,ie[14]*=oe,ie[3]*=oe,ie[7]*=oe,ie[11]*=oe,ie[15]*=oe,this}determinant(){const oe=this.elements,ie=oe[0],ue=oe[4],de=oe[8],he=oe[12],pe=oe[1],_e=oe[5],Ce=oe[9],xe=oe[13],Ie=oe[2],$e=oe[6],Ne=oe[10],Oe=oe[14],Fe=oe[3],Ve=oe[7],ze=oe[11],Ue=oe[15];return Fe*(+he*Ce*$e-de*xe*$e-he*_e*Ne+ue*xe*Ne+de*_e*Oe-ue*Ce*Oe)+Ve*(+ie*Ce*Oe-ie*xe*Ne+he*pe*Ne-de*pe*Oe+de*xe*Ie-he*Ce*Ie)+ze*(+ie*xe*$e-ie*_e*Oe-he*pe*$e+ue*pe*Oe+he*_e*Ie-ue*xe*Ie)+Ue*(-de*_e*Ie-ie*Ce*$e+ie*_e*Ne+de*pe*$e-ue*pe*Ne+ue*Ce*Ie)}transpose(){const oe=this.elements;let ie;return ie=oe[1],oe[1]=oe[4],oe[4]=ie,ie=oe[2],oe[2]=oe[8],oe[8]=ie,ie=oe[6],oe[6]=oe[9],oe[9]=ie,ie=oe[3],oe[3]=oe[12],oe[12]=ie,ie=oe[7],oe[7]=oe[13],oe[13]=ie,ie=oe[11],oe[11]=oe[14],oe[14]=ie,this}setPosition(oe,ie,ue){const de=this.elements;return oe.isVector3?(de[12]=oe.x,de[13]=oe.y,de[14]=oe.z):(de[12]=oe,de[13]=ie,de[14]=ue),this}invert(){const oe=this.elements,ie=oe[0],ue=oe[1],de=oe[2],he=oe[3],pe=oe[4],_e=oe[5],Ce=oe[6],xe=oe[7],Ie=oe[8],$e=oe[9],Ne=oe[10],Oe=oe[11],Fe=oe[12],Ve=oe[13],ze=oe[14],Ue=oe[15],Pt=$e*ze*xe-Ve*Ne*xe+Ve*Ce*Oe-_e*ze*Oe-$e*Ce*Ue+_e*Ne*Ue,qe=Fe*Ne*xe-Ie*ze*xe-Fe*Ce*Oe+pe*ze*Oe+Ie*Ce*Ue-pe*Ne*Ue,Et=Ie*Ve*xe-Fe*$e*xe+Fe*_e*Oe-pe*Ve*Oe-Ie*_e*Ue+pe*$e*Ue,kt=Fe*$e*Ce-Ie*Ve*Ce-Fe*_e*Ne+pe*Ve*Ne+Ie*_e*ze-pe*$e*ze,At=ie*Pt+ue*qe+de*Et+he*kt;if(At===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Dt=1/At;return oe[0]=Pt*Dt,oe[1]=(Ve*Ne*he-$e*ze*he-Ve*de*Oe+ue*ze*Oe+$e*de*Ue-ue*Ne*Ue)*Dt,oe[2]=(_e*ze*he-Ve*Ce*he+Ve*de*xe-ue*ze*xe-_e*de*Ue+ue*Ce*Ue)*Dt,oe[3]=($e*Ce*he-_e*Ne*he-$e*de*xe+ue*Ne*xe+_e*de*Oe-ue*Ce*Oe)*Dt,oe[4]=qe*Dt,oe[5]=(Ie*ze*he-Fe*Ne*he+Fe*de*Oe-ie*ze*Oe-Ie*de*Ue+ie*Ne*Ue)*Dt,oe[6]=(Fe*Ce*he-pe*ze*he-Fe*de*xe+ie*ze*xe+pe*de*Ue-ie*Ce*Ue)*Dt,oe[7]=(pe*Ne*he-Ie*Ce*he+Ie*de*xe-ie*Ne*xe-pe*de*Oe+ie*Ce*Oe)*Dt,oe[8]=Et*Dt,oe[9]=(Fe*$e*he-Ie*Ve*he-Fe*ue*Oe+ie*Ve*Oe+Ie*ue*Ue-ie*$e*Ue)*Dt,oe[10]=(pe*Ve*he-Fe*_e*he+Fe*ue*xe-ie*Ve*xe-pe*ue*Ue+ie*_e*Ue)*Dt,oe[11]=(Ie*_e*he-pe*$e*he-Ie*ue*xe+ie*$e*xe+pe*ue*Oe-ie*_e*Oe)*Dt,oe[12]=kt*Dt,oe[13]=(Ie*Ve*de-Fe*$e*de+Fe*ue*Ne-ie*Ve*Ne-Ie*ue*ze+ie*$e*ze)*Dt,oe[14]=(Fe*_e*de-pe*Ve*de-Fe*ue*Ce+ie*Ve*Ce+pe*ue*ze-ie*_e*ze)*Dt,oe[15]=(pe*$e*de-Ie*_e*de+Ie*ue*Ce-ie*$e*Ce-pe*ue*Ne+ie*_e*Ne)*Dt,this}scale(oe){const ie=this.elements,ue=oe.x,de=oe.y,he=oe.z;return ie[0]*=ue,ie[4]*=de,ie[8]*=he,ie[1]*=ue,ie[5]*=de,ie[9]*=he,ie[2]*=ue,ie[6]*=de,ie[10]*=he,ie[3]*=ue,ie[7]*=de,ie[11]*=he,this}getMaxScaleOnAxis(){const oe=this.elements,ie=oe[0]*oe[0]+oe[1]*oe[1]+oe[2]*oe[2],ue=oe[4]*oe[4]+oe[5]*oe[5]+oe[6]*oe[6],de=oe[8]*oe[8]+oe[9]*oe[9]+oe[10]*oe[10];return Math.sqrt(Math.max(ie,ue,de))}makeTranslation(oe,ie,ue){return oe.isVector3?this.set(1,0,0,oe.x,0,1,0,oe.y,0,0,1,oe.z,0,0,0,1):this.set(1,0,0,oe,0,1,0,ie,0,0,1,ue,0,0,0,1),this}makeRotationX(oe){const ie=Math.cos(oe),ue=Math.sin(oe);return this.set(1,0,0,0,0,ie,-ue,0,0,ue,ie,0,0,0,0,1),this}makeRotationY(oe){const ie=Math.cos(oe),ue=Math.sin(oe);return this.set(ie,0,ue,0,0,1,0,0,-ue,0,ie,0,0,0,0,1),this}makeRotationZ(oe){const ie=Math.cos(oe),ue=Math.sin(oe);return this.set(ie,-ue,0,0,ue,ie,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(oe,ie){const ue=Math.cos(ie),de=Math.sin(ie),he=1-ue,pe=oe.x,_e=oe.y,Ce=oe.z,xe=he*pe,Ie=he*_e;return this.set(xe*pe+ue,xe*_e-de*Ce,xe*Ce+de*_e,0,xe*_e+de*Ce,Ie*_e+ue,Ie*Ce-de*pe,0,xe*Ce-de*_e,Ie*Ce+de*pe,he*Ce*Ce+ue,0,0,0,0,1),this}makeScale(oe,ie,ue){return this.set(oe,0,0,0,0,ie,0,0,0,0,ue,0,0,0,0,1),this}makeShear(oe,ie,ue,de,he,pe){return this.set(1,ue,he,0,oe,1,pe,0,ie,de,1,0,0,0,0,1),this}compose(oe,ie,ue){const de=this.elements,he=ie._x,pe=ie._y,_e=ie._z,Ce=ie._w,xe=he+he,Ie=pe+pe,$e=_e+_e,Ne=he*xe,Oe=he*Ie,Fe=he*$e,Ve=pe*Ie,ze=pe*$e,Ue=_e*$e,Pt=Ce*xe,qe=Ce*Ie,Et=Ce*$e,kt=ue.x,At=ue.y,Dt=ue.z;return de[0]=(1-(Ve+Ue))*kt,de[1]=(Oe+Et)*kt,de[2]=(Fe-qe)*kt,de[3]=0,de[4]=(Oe-Et)*At,de[5]=(1-(Ne+Ue))*At,de[6]=(ze+Pt)*At,de[7]=0,de[8]=(Fe+qe)*Dt,de[9]=(ze-Pt)*Dt,de[10]=(1-(Ne+Ve))*Dt,de[11]=0,de[12]=oe.x,de[13]=oe.y,de[14]=oe.z,de[15]=1,this}decompose(oe,ie,ue){const de=this.elements;let he=_v1.set(de[0],de[1],de[2]).length();const pe=_v1.set(de[4],de[5],de[6]).length(),_e=_v1.set(de[8],de[9],de[10]).length();this.determinant()<0&&(he=-he),oe.x=de[12],oe.y=de[13],oe.z=de[14],_m1.copy(this);const Ce=1/he,xe=1/pe,Ie=1/_e;return _m1.elements[0]*=Ce,_m1.elements[1]*=Ce,_m1.elements[2]*=Ce,_m1.elements[4]*=xe,_m1.elements[5]*=xe,_m1.elements[6]*=xe,_m1.elements[8]*=Ie,_m1.elements[9]*=Ie,_m1.elements[10]*=Ie,ie.setFromRotationMatrix(_m1),ue.x=he,ue.y=pe,ue.z=_e,this}makePerspective(oe,ie,ue,de,he,pe,_e=WebGLCoordinateSystem){const Ce=this.elements,xe=2*he/(ie-oe),Ie=2*he/(ue-de),$e=(ie+oe)/(ie-oe),Ne=(ue+de)/(ue-de);let Oe,Fe;if(_e===WebGLCoordinateSystem)Oe=-(pe+he)/(pe-he),Fe=-2*pe*he/(pe-he);else if(_e===WebGPUCoordinateSystem)Oe=-pe/(pe-he),Fe=-pe*he/(pe-he);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+_e);return Ce[0]=xe,Ce[4]=0,Ce[8]=$e,Ce[12]=0,Ce[1]=0,Ce[5]=Ie,Ce[9]=Ne,Ce[13]=0,Ce[2]=0,Ce[6]=0,Ce[10]=Oe,Ce[14]=Fe,Ce[3]=0,Ce[7]=0,Ce[11]=-1,Ce[15]=0,this}makeOrthographic(oe,ie,ue,de,he,pe,_e=WebGLCoordinateSystem){const Ce=this.elements,xe=1/(ie-oe),Ie=1/(ue-de),$e=1/(pe-he),Ne=(ie+oe)*xe,Oe=(ue+de)*Ie;let Fe,Ve;if(_e===WebGLCoordinateSystem)Fe=(pe+he)*$e,Ve=-2*$e;else if(_e===WebGPUCoordinateSystem)Fe=he*$e,Ve=-1*$e;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+_e);return Ce[0]=2*xe,Ce[4]=0,Ce[8]=0,Ce[12]=-Ne,Ce[1]=0,Ce[5]=2*Ie,Ce[9]=0,Ce[13]=-Oe,Ce[2]=0,Ce[6]=0,Ce[10]=Ve,Ce[14]=-Fe,Ce[3]=0,Ce[7]=0,Ce[11]=0,Ce[15]=1,this}equals(oe){const ie=this.elements,ue=oe.elements;for(let de=0;de<16;de++)if(ie[de]!==ue[de])return!1;return!0}fromArray(oe,ie=0){for(let ue=0;ue<16;ue++)this.elements[ue]=oe[ue+ie];return this}toArray(oe=[],ie=0){const ue=this.elements;return oe[ie]=ue[0],oe[ie+1]=ue[1],oe[ie+2]=ue[2],oe[ie+3]=ue[3],oe[ie+4]=ue[4],oe[ie+5]=ue[5],oe[ie+6]=ue[6],oe[ie+7]=ue[7],oe[ie+8]=ue[8],oe[ie+9]=ue[9],oe[ie+10]=ue[10],oe[ie+11]=ue[11],oe[ie+12]=ue[12],oe[ie+13]=ue[13],oe[ie+14]=ue[14],oe[ie+15]=ue[15],oe}}const _v1=new Vector3,_m1=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3;class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return null}getPointAt(oe,ie){const ue=this.getUtoTmapping(oe);return this.getPoint(ue,ie)}getPoints(oe=5){const ie=[];for(let ue=0;ue<=oe;ue++)ie.push(this.getPoint(ue/oe));return ie}getSpacedPoints(oe=5){const ie=[];for(let ue=0;ue<=oe;ue++)ie.push(this.getPointAt(ue/oe));return ie}getLength(){const oe=this.getLengths();return oe[oe.length-1]}getLengths(oe=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===oe+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const ie=[];let ue,de=this.getPoint(0),he=0;ie.push(0);for(let pe=1;pe<=oe;pe++)ue=this.getPoint(pe/oe),he+=ue.distanceTo(de),ie.push(he),de=ue;return this.cacheArcLengths=ie,ie}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(oe,ie){const ue=this.getLengths();let de=0;const he=ue.length;let pe;ie?pe=ie:pe=oe*ue[he-1];let _e=0,Ce=he-1,xe;for(;_e<=Ce;)if(de=Math.floor(_e+(Ce-_e)/2),xe=ue[de]-pe,xe<0)_e=de+1;else if(xe>0)Ce=de-1;else{Ce=de;break}if(de=Ce,ue[de]===pe)return de/(he-1);const Ie=ue[de],$e=ue[de+1]-Ie,Ne=(pe-Ie)/$e;return(de+Ne)/(he-1)}getTangent(oe,ie){let ue=oe-1e-4,de=oe+1e-4;ue<0&&(ue=0),de>1&&(de=1);const he=this.getPoint(ue),pe=this.getPoint(de),_e=ie||(he.isVector2?new Vector2:new Vector3);return _e.copy(pe).sub(he).normalize(),_e}getTangentAt(oe,ie){const ue=this.getUtoTmapping(oe);return this.getTangent(ue,ie)}computeFrenetFrames(oe,ie){const ue=new Vector3,de=[],he=[],pe=[],_e=new Vector3,Ce=new Matrix4;for(let Oe=0;Oe<=oe;Oe++){const Fe=Oe/oe;de[Oe]=this.getTangentAt(Fe,new Vector3)}he[0]=new Vector3,pe[0]=new Vector3;let xe=Number.MAX_VALUE;const Ie=Math.abs(de[0].x),$e=Math.abs(de[0].y),Ne=Math.abs(de[0].z);Ie<=xe&&(xe=Ie,ue.set(1,0,0)),$e<=xe&&(xe=$e,ue.set(0,1,0)),Ne<=xe&&ue.set(0,0,1),_e.crossVectors(de[0],ue).normalize(),he[0].crossVectors(de[0],_e),pe[0].crossVectors(de[0],he[0]);for(let Oe=1;Oe<=oe;Oe++){if(he[Oe]=he[Oe-1].clone(),pe[Oe]=pe[Oe-1].clone(),_e.crossVectors(de[Oe-1],de[Oe]),_e.length()>Number.EPSILON){_e.normalize();const Fe=Math.acos(clamp$2(de[Oe-1].dot(de[Oe]),-1,1));he[Oe].applyMatrix4(Ce.makeRotationAxis(_e,Fe))}pe[Oe].crossVectors(de[Oe],he[Oe])}if(ie===!0){let Oe=Math.acos(clamp$2(he[0].dot(he[oe]),-1,1));Oe/=oe,de[0].dot(_e.crossVectors(he[0],he[oe]))>0&&(Oe=-Oe);for(let Fe=1;Fe<=oe;Fe++)he[Fe].applyMatrix4(Ce.makeRotationAxis(de[Fe],Oe*Fe)),pe[Fe].crossVectors(de[Fe],he[Fe])}return{tangents:de,normals:he,binormals:pe}}clone(){return new this.constructor().copy(this)}copy(oe){return this.arcLengthDivisions=oe.arcLengthDivisions,this}toJSON(){const oe={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return oe.arcLengthDivisions=this.arcLengthDivisions,oe.type=this.type,oe}fromJSON(oe){return this.arcLengthDivisions=oe.arcLengthDivisions,this}}class EllipseCurve extends Curve{constructor(oe=0,ie=0,ue=1,de=1,he=0,pe=Math.PI*2,_e=!1,Ce=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=oe,this.aY=ie,this.xRadius=ue,this.yRadius=de,this.aStartAngle=he,this.aEndAngle=pe,this.aClockwise=_e,this.aRotation=Ce}getPoint(oe,ie=new Vector2){const ue=ie,de=Math.PI*2;let he=this.aEndAngle-this.aStartAngle;const pe=Math.abs(he)<Number.EPSILON;for(;he<0;)he+=de;for(;he>de;)he-=de;he<Number.EPSILON&&(pe?he=0:he=de),this.aClockwise===!0&&!pe&&(he===de?he=-de:he=he-de);const _e=this.aStartAngle+oe*he;let Ce=this.aX+this.xRadius*Math.cos(_e),xe=this.aY+this.yRadius*Math.sin(_e);if(this.aRotation!==0){const Ie=Math.cos(this.aRotation),$e=Math.sin(this.aRotation),Ne=Ce-this.aX,Oe=xe-this.aY;Ce=Ne*Ie-Oe*$e+this.aX,xe=Ne*$e+Oe*Ie+this.aY}return ue.set(Ce,xe)}copy(oe){return super.copy(oe),this.aX=oe.aX,this.aY=oe.aY,this.xRadius=oe.xRadius,this.yRadius=oe.yRadius,this.aStartAngle=oe.aStartAngle,this.aEndAngle=oe.aEndAngle,this.aClockwise=oe.aClockwise,this.aRotation=oe.aRotation,this}toJSON(){const oe=super.toJSON();return oe.aX=this.aX,oe.aY=this.aY,oe.xRadius=this.xRadius,oe.yRadius=this.yRadius,oe.aStartAngle=this.aStartAngle,oe.aEndAngle=this.aEndAngle,oe.aClockwise=this.aClockwise,oe.aRotation=this.aRotation,oe}fromJSON(oe){return super.fromJSON(oe),this.aX=oe.aX,this.aY=oe.aY,this.xRadius=oe.xRadius,this.yRadius=oe.yRadius,this.aStartAngle=oe.aStartAngle,this.aEndAngle=oe.aEndAngle,this.aClockwise=oe.aClockwise,this.aRotation=oe.aRotation,this}}class ArcCurve extends EllipseCurve{constructor(oe,ie,ue,de,he,pe){super(oe,ie,ue,ue,de,he,pe),this.isArcCurve=!0,this.type="ArcCurve"}}function CubicPoly(){let le=0,oe=0,ie=0,ue=0;function de(he,pe,_e,Ce){le=he,oe=_e,ie=-3*he+3*pe-2*_e-Ce,ue=2*he-2*pe+_e+Ce}return{initCatmullRom:function(he,pe,_e,Ce,xe){de(pe,_e,xe*(_e-he),xe*(Ce-pe))},initNonuniformCatmullRom:function(he,pe,_e,Ce,xe,Ie,$e){let Ne=(pe-he)/xe-(_e-he)/(xe+Ie)+(_e-pe)/Ie,Oe=(_e-pe)/Ie-(Ce-pe)/(Ie+$e)+(Ce-_e)/$e;Ne*=Ie,Oe*=Ie,de(pe,_e,Ne,Oe)},calc:function(he){const pe=he*he,_e=pe*he;return le+oe*he+ie*pe+ue*_e}}}const tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(oe=[],ie=!1,ue="centripetal",de=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=oe,this.closed=ie,this.curveType=ue,this.tension=de}getPoint(oe,ie=new Vector3){const ue=ie,de=this.points,he=de.length,pe=(he-(this.closed?0:1))*oe;let _e=Math.floor(pe),Ce=pe-_e;this.closed?_e+=_e>0?0:(Math.floor(Math.abs(_e)/he)+1)*he:Ce===0&&_e===he-1&&(_e=he-2,Ce=1);let xe,Ie;this.closed||_e>0?xe=de[(_e-1)%he]:(tmp.subVectors(de[0],de[1]).add(de[0]),xe=tmp);const $e=de[_e%he],Ne=de[(_e+1)%he];if(this.closed||_e+2<he?Ie=de[(_e+2)%he]:(tmp.subVectors(de[he-1],de[he-2]).add(de[he-1]),Ie=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){const Oe=this.curveType==="chordal"?.5:.25;let Fe=Math.pow(xe.distanceToSquared($e),Oe),Ve=Math.pow($e.distanceToSquared(Ne),Oe),ze=Math.pow(Ne.distanceToSquared(Ie),Oe);Ve<1e-4&&(Ve=1),Fe<1e-4&&(Fe=Ve),ze<1e-4&&(ze=Ve),px.initNonuniformCatmullRom(xe.x,$e.x,Ne.x,Ie.x,Fe,Ve,ze),py.initNonuniformCatmullRom(xe.y,$e.y,Ne.y,Ie.y,Fe,Ve,ze),pz.initNonuniformCatmullRom(xe.z,$e.z,Ne.z,Ie.z,Fe,Ve,ze)}else this.curveType==="catmullrom"&&(px.initCatmullRom(xe.x,$e.x,Ne.x,Ie.x,this.tension),py.initCatmullRom(xe.y,$e.y,Ne.y,Ie.y,this.tension),pz.initCatmullRom(xe.z,$e.z,Ne.z,Ie.z,this.tension));return ue.set(px.calc(Ce),py.calc(Ce),pz.calc(Ce)),ue}copy(oe){super.copy(oe),this.points=[];for(let ie=0,ue=oe.points.length;ie<ue;ie++){const de=oe.points[ie];this.points.push(de.clone())}return this.closed=oe.closed,this.curveType=oe.curveType,this.tension=oe.tension,this}toJSON(){const oe=super.toJSON();oe.points=[];for(let ie=0,ue=this.points.length;ie<ue;ie++){const de=this.points[ie];oe.points.push(de.toArray())}return oe.closed=this.closed,oe.curveType=this.curveType,oe.tension=this.tension,oe}fromJSON(oe){super.fromJSON(oe),this.points=[];for(let ie=0,ue=oe.points.length;ie<ue;ie++){const de=oe.points[ie];this.points.push(new Vector3().fromArray(de))}return this.closed=oe.closed,this.curveType=oe.curveType,this.tension=oe.tension,this}}function CatmullRom(le,oe,ie,ue,de){const he=(ue-oe)*.5,pe=(de-ie)*.5,_e=le*le,Ce=le*_e;return(2*ie-2*ue+he+pe)*Ce+(-3*ie+3*ue-2*he-pe)*_e+he*le+ie}function QuadraticBezierP0(le,oe){const ie=1-le;return ie*ie*oe}function QuadraticBezierP1(le,oe){return 2*(1-le)*le*oe}function QuadraticBezierP2(le,oe){return le*le*oe}function QuadraticBezier(le,oe,ie,ue){return QuadraticBezierP0(le,oe)+QuadraticBezierP1(le,ie)+QuadraticBezierP2(le,ue)}function CubicBezierP0(le,oe){const ie=1-le;return ie*ie*ie*oe}function CubicBezierP1(le,oe){const ie=1-le;return 3*ie*ie*le*oe}function CubicBezierP2(le,oe){return 3*(1-le)*le*le*oe}function CubicBezierP3(le,oe){return le*le*le*oe}function CubicBezier(le,oe,ie,ue,de){return CubicBezierP0(le,oe)+CubicBezierP1(le,ie)+CubicBezierP2(le,ue)+CubicBezierP3(le,de)}class CubicBezierCurve extends Curve{constructor(oe=new Vector2,ie=new Vector2,ue=new Vector2,de=new Vector2){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=oe,this.v1=ie,this.v2=ue,this.v3=de}getPoint(oe,ie=new Vector2){const ue=ie,de=this.v0,he=this.v1,pe=this.v2,_e=this.v3;return ue.set(CubicBezier(oe,de.x,he.x,pe.x,_e.x),CubicBezier(oe,de.y,he.y,pe.y,_e.y)),ue}copy(oe){return super.copy(oe),this.v0.copy(oe.v0),this.v1.copy(oe.v1),this.v2.copy(oe.v2),this.v3.copy(oe.v3),this}toJSON(){const oe=super.toJSON();return oe.v0=this.v0.toArray(),oe.v1=this.v1.toArray(),oe.v2=this.v2.toArray(),oe.v3=this.v3.toArray(),oe}fromJSON(oe){return super.fromJSON(oe),this.v0.fromArray(oe.v0),this.v1.fromArray(oe.v1),this.v2.fromArray(oe.v2),this.v3.fromArray(oe.v3),this}}class CubicBezierCurve3 extends Curve{constructor(oe=new Vector3,ie=new Vector3,ue=new Vector3,de=new Vector3){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=oe,this.v1=ie,this.v2=ue,this.v3=de}getPoint(oe,ie=new Vector3){const ue=ie,de=this.v0,he=this.v1,pe=this.v2,_e=this.v3;return ue.set(CubicBezier(oe,de.x,he.x,pe.x,_e.x),CubicBezier(oe,de.y,he.y,pe.y,_e.y),CubicBezier(oe,de.z,he.z,pe.z,_e.z)),ue}copy(oe){return super.copy(oe),this.v0.copy(oe.v0),this.v1.copy(oe.v1),this.v2.copy(oe.v2),this.v3.copy(oe.v3),this}toJSON(){const oe=super.toJSON();return oe.v0=this.v0.toArray(),oe.v1=this.v1.toArray(),oe.v2=this.v2.toArray(),oe.v3=this.v3.toArray(),oe}fromJSON(oe){return super.fromJSON(oe),this.v0.fromArray(oe.v0),this.v1.fromArray(oe.v1),this.v2.fromArray(oe.v2),this.v3.fromArray(oe.v3),this}}class LineCurve extends Curve{constructor(oe=new Vector2,ie=new Vector2){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=oe,this.v2=ie}getPoint(oe,ie=new Vector2){const ue=ie;return oe===1?ue.copy(this.v2):(ue.copy(this.v2).sub(this.v1),ue.multiplyScalar(oe).add(this.v1)),ue}getPointAt(oe,ie){return this.getPoint(oe,ie)}getTangent(oe,ie=new Vector2){return ie.subVectors(this.v2,this.v1).normalize()}getTangentAt(oe,ie){return this.getTangent(oe,ie)}copy(oe){return super.copy(oe),this.v1.copy(oe.v1),this.v2.copy(oe.v2),this}toJSON(){const oe=super.toJSON();return oe.v1=this.v1.toArray(),oe.v2=this.v2.toArray(),oe}fromJSON(oe){return super.fromJSON(oe),this.v1.fromArray(oe.v1),this.v2.fromArray(oe.v2),this}}class LineCurve3 extends Curve{constructor(oe=new Vector3,ie=new Vector3){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=oe,this.v2=ie}getPoint(oe,ie=new Vector3){const ue=ie;return oe===1?ue.copy(this.v2):(ue.copy(this.v2).sub(this.v1),ue.multiplyScalar(oe).add(this.v1)),ue}getPointAt(oe,ie){return this.getPoint(oe,ie)}getTangent(oe,ie=new Vector3){return ie.subVectors(this.v2,this.v1).normalize()}getTangentAt(oe,ie){return this.getTangent(oe,ie)}copy(oe){return super.copy(oe),this.v1.copy(oe.v1),this.v2.copy(oe.v2),this}toJSON(){const oe=super.toJSON();return oe.v1=this.v1.toArray(),oe.v2=this.v2.toArray(),oe}fromJSON(oe){return super.fromJSON(oe),this.v1.fromArray(oe.v1),this.v2.fromArray(oe.v2),this}}class QuadraticBezierCurve extends Curve{constructor(oe=new Vector2,ie=new Vector2,ue=new Vector2){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=oe,this.v1=ie,this.v2=ue}getPoint(oe,ie=new Vector2){const ue=ie,de=this.v0,he=this.v1,pe=this.v2;return ue.set(QuadraticBezier(oe,de.x,he.x,pe.x),QuadraticBezier(oe,de.y,he.y,pe.y)),ue}copy(oe){return super.copy(oe),this.v0.copy(oe.v0),this.v1.copy(oe.v1),this.v2.copy(oe.v2),this}toJSON(){const oe=super.toJSON();return oe.v0=this.v0.toArray(),oe.v1=this.v1.toArray(),oe.v2=this.v2.toArray(),oe}fromJSON(oe){return super.fromJSON(oe),this.v0.fromArray(oe.v0),this.v1.fromArray(oe.v1),this.v2.fromArray(oe.v2),this}}class QuadraticBezierCurve3 extends Curve{constructor(oe=new Vector3,ie=new Vector3,ue=new Vector3){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=oe,this.v1=ie,this.v2=ue}getPoint(oe,ie=new Vector3){const ue=ie,de=this.v0,he=this.v1,pe=this.v2;return ue.set(QuadraticBezier(oe,de.x,he.x,pe.x),QuadraticBezier(oe,de.y,he.y,pe.y),QuadraticBezier(oe,de.z,he.z,pe.z)),ue}copy(oe){return super.copy(oe),this.v0.copy(oe.v0),this.v1.copy(oe.v1),this.v2.copy(oe.v2),this}toJSON(){const oe=super.toJSON();return oe.v0=this.v0.toArray(),oe.v1=this.v1.toArray(),oe.v2=this.v2.toArray(),oe}fromJSON(oe){return super.fromJSON(oe),this.v0.fromArray(oe.v0),this.v1.fromArray(oe.v1),this.v2.fromArray(oe.v2),this}}class SplineCurve extends Curve{constructor(oe=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=oe}getPoint(oe,ie=new Vector2){const ue=ie,de=this.points,he=(de.length-1)*oe,pe=Math.floor(he),_e=he-pe,Ce=de[pe===0?pe:pe-1],xe=de[pe],Ie=de[pe>de.length-2?de.length-1:pe+1],$e=de[pe>de.length-3?de.length-1:pe+2];return ue.set(CatmullRom(_e,Ce.x,xe.x,Ie.x,$e.x),CatmullRom(_e,Ce.y,xe.y,Ie.y,$e.y)),ue}copy(oe){super.copy(oe),this.points=[];for(let ie=0,ue=oe.points.length;ie<ue;ie++){const de=oe.points[ie];this.points.push(de.clone())}return this}toJSON(){const oe=super.toJSON();oe.points=[];for(let ie=0,ue=this.points.length;ie<ue;ie++){const de=this.points[ie];oe.points.push(de.toArray())}return oe}fromJSON(oe){super.fromJSON(oe),this.points=[];for(let ie=0,ue=oe.points.length;ie<ue;ie++){const de=oe.points[ie];this.points.push(new Vector2().fromArray(de))}return this}}const Curves=Object.freeze(Object.defineProperty({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve},Symbol.toStringTag,{value:"Module"}));class CurvePath extends Curve{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(oe){this.curves.push(oe)}closePath(){const oe=this.curves[0].getPoint(0),ie=this.curves[this.curves.length-1].getPoint(1);if(!oe.equals(ie)){const ue=oe.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Curves[ue](ie,oe))}return this}getPoint(oe,ie){const ue=oe*this.getLength(),de=this.getCurveLengths();let he=0;for(;he<de.length;){if(de[he]>=ue){const pe=de[he]-ue,_e=this.curves[he],Ce=_e.getLength(),xe=Ce===0?0:1-pe/Ce;return _e.getPointAt(xe,ie)}he++}return null}getLength(){const oe=this.getCurveLengths();return oe[oe.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const oe=[];let ie=0;for(let ue=0,de=this.curves.length;ue<de;ue++)ie+=this.curves[ue].getLength(),oe.push(ie);return this.cacheLengths=oe,oe}getSpacedPoints(oe=40){const ie=[];for(let ue=0;ue<=oe;ue++)ie.push(this.getPoint(ue/oe));return this.autoClose&&ie.push(ie[0]),ie}getPoints(oe=12){const ie=[];let ue;for(let de=0,he=this.curves;de<he.length;de++){const pe=he[de],_e=pe.isEllipseCurve?oe*2:pe.isLineCurve||pe.isLineCurve3?1:pe.isSplineCurve?oe*pe.points.length:oe,Ce=pe.getPoints(_e);for(let xe=0;xe<Ce.length;xe++){const Ie=Ce[xe];ue&&ue.equals(Ie)||(ie.push(Ie),ue=Ie)}}return this.autoClose&&ie.length>1&&!ie[ie.length-1].equals(ie[0])&&ie.push(ie[0]),ie}copy(oe){super.copy(oe),this.curves=[];for(let ie=0,ue=oe.curves.length;ie<ue;ie++){const de=oe.curves[ie];this.curves.push(de.clone())}return this.autoClose=oe.autoClose,this}toJSON(){const oe=super.toJSON();oe.autoClose=this.autoClose,oe.curves=[];for(let ie=0,ue=this.curves.length;ie<ue;ie++){const de=this.curves[ie];oe.curves.push(de.toJSON())}return oe}fromJSON(oe){super.fromJSON(oe),this.autoClose=oe.autoClose,this.curves=[];for(let ie=0,ue=oe.curves.length;ie<ue;ie++){const de=oe.curves[ie];this.curves.push(new Curves[de.type]().fromJSON(de))}return this}}class Path extends CurvePath{constructor(oe){super(),this.type="Path",this.currentPoint=new Vector2,oe&&this.setFromPoints(oe)}setFromPoints(oe){this.moveTo(oe[0].x,oe[0].y);for(let ie=1,ue=oe.length;ie<ue;ie++)this.lineTo(oe[ie].x,oe[ie].y);return this}moveTo(oe,ie){return this.currentPoint.set(oe,ie),this}lineTo(oe,ie){const ue=new LineCurve(this.currentPoint.clone(),new Vector2(oe,ie));return this.curves.push(ue),this.currentPoint.set(oe,ie),this}quadraticCurveTo(oe,ie,ue,de){const he=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(oe,ie),new Vector2(ue,de));return this.curves.push(he),this.currentPoint.set(ue,de),this}bezierCurveTo(oe,ie,ue,de,he,pe){const _e=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(oe,ie),new Vector2(ue,de),new Vector2(he,pe));return this.curves.push(_e),this.currentPoint.set(he,pe),this}splineThru(oe){const ie=[this.currentPoint.clone()].concat(oe),ue=new SplineCurve(ie);return this.curves.push(ue),this.currentPoint.copy(oe[oe.length-1]),this}arc(oe,ie,ue,de,he,pe){const _e=this.currentPoint.x,Ce=this.currentPoint.y;return this.absarc(oe+_e,ie+Ce,ue,de,he,pe),this}absarc(oe,ie,ue,de,he,pe){return this.absellipse(oe,ie,ue,ue,de,he,pe),this}ellipse(oe,ie,ue,de,he,pe,_e,Ce){const xe=this.currentPoint.x,Ie=this.currentPoint.y;return this.absellipse(oe+xe,ie+Ie,ue,de,he,pe,_e,Ce),this}absellipse(oe,ie,ue,de,he,pe,_e,Ce){const xe=new EllipseCurve(oe,ie,ue,de,he,pe,_e,Ce);if(this.curves.length>0){const $e=xe.getPoint(0);$e.equals(this.currentPoint)||this.lineTo($e.x,$e.y)}this.curves.push(xe);const Ie=xe.getPoint(1);return this.currentPoint.copy(Ie),this}copy(oe){return super.copy(oe),this.currentPoint.copy(oe.currentPoint),this}toJSON(){const oe=super.toJSON();return oe.currentPoint=this.currentPoint.toArray(),oe}fromJSON(oe){return super.fromJSON(oe),this.currentPoint.fromArray(oe.currentPoint),this}}class Shape extends Path{constructor(oe){super(oe),this.uuid=generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles(oe){const ie=[];for(let ue=0,de=this.holes.length;ue<de;ue++)ie[ue]=this.holes[ue].getPoints(oe);return ie}extractPoints(oe){return{shape:this.getPoints(oe),holes:this.getPointsHoles(oe)}}copy(oe){super.copy(oe),this.holes=[];for(let ie=0,ue=oe.holes.length;ie<ue;ie++){const de=oe.holes[ie];this.holes.push(de.clone())}return this}toJSON(){const oe=super.toJSON();oe.uuid=this.uuid,oe.holes=[];for(let ie=0,ue=this.holes.length;ie<ue;ie++){const de=this.holes[ie];oe.holes.push(de.toJSON())}return oe}fromJSON(oe){super.fromJSON(oe),this.uuid=oe.uuid,this.holes=[];for(let ie=0,ue=oe.holes.length;ie<ue;ie++){const de=oe.holes[ie];this.holes.push(new Path().fromJSON(de))}return this}}const Earcut={triangulate:function(le,oe,ie=2){const ue=oe&&oe.length,de=ue?oe[0]*ie:le.length;let he=linkedList(le,0,de,ie,!0);const pe=[];if(!he||he.next===he.prev)return pe;let _e,Ce,xe,Ie,$e,Ne,Oe;if(ue&&(he=eliminateHoles(le,oe,he,ie)),le.length>80*ie){_e=xe=le[0],Ce=Ie=le[1];for(let Fe=ie;Fe<de;Fe+=ie)$e=le[Fe],Ne=le[Fe+1],$e<_e&&(_e=$e),Ne<Ce&&(Ce=Ne),$e>xe&&(xe=$e),Ne>Ie&&(Ie=Ne);Oe=Math.max(xe-_e,Ie-Ce),Oe=Oe!==0?32767/Oe:0}return earcutLinked(he,pe,ie,_e,Ce,Oe,0),pe}};function linkedList(le,oe,ie,ue,de){let he,pe;if(de===signedArea(le,oe,ie,ue)>0)for(he=oe;he<ie;he+=ue)pe=insertNode(he,le[he],le[he+1],pe);else for(he=ie-ue;he>=oe;he-=ue)pe=insertNode(he,le[he],le[he+1],pe);return pe&&equals(pe,pe.next)&&(removeNode(pe),pe=pe.next),pe}function filterPoints(le,oe){if(!le)return le;oe||(oe=le);let ie=le,ue;do if(ue=!1,!ie.steiner&&(equals(ie,ie.next)||area(ie.prev,ie,ie.next)===0)){if(removeNode(ie),ie=oe=ie.prev,ie===ie.next)break;ue=!0}else ie=ie.next;while(ue||ie!==oe);return oe}function earcutLinked(le,oe,ie,ue,de,he,pe){if(!le)return;!pe&&he&&indexCurve(le,ue,de,he);let _e=le,Ce,xe;for(;le.prev!==le.next;){if(Ce=le.prev,xe=le.next,he?isEarHashed(le,ue,de,he):isEar(le)){oe.push(Ce.i/ie|0),oe.push(le.i/ie|0),oe.push(xe.i/ie|0),removeNode(le),le=xe.next,_e=xe.next;continue}if(le=xe,le===_e){pe?pe===1?(le=cureLocalIntersections(filterPoints(le),oe,ie),earcutLinked(le,oe,ie,ue,de,he,2)):pe===2&&splitEarcut(le,oe,ie,ue,de,he):earcutLinked(filterPoints(le),oe,ie,ue,de,he,1);break}}}function isEar(le){const oe=le.prev,ie=le,ue=le.next;if(area(oe,ie,ue)>=0)return!1;const de=oe.x,he=ie.x,pe=ue.x,_e=oe.y,Ce=ie.y,xe=ue.y,Ie=de<he?de<pe?de:pe:he<pe?he:pe,$e=_e<Ce?_e<xe?_e:xe:Ce<xe?Ce:xe,Ne=de>he?de>pe?de:pe:he>pe?he:pe,Oe=_e>Ce?_e>xe?_e:xe:Ce>xe?Ce:xe;let Fe=ue.next;for(;Fe!==oe;){if(Fe.x>=Ie&&Fe.x<=Ne&&Fe.y>=$e&&Fe.y<=Oe&&pointInTriangle(de,_e,he,Ce,pe,xe,Fe.x,Fe.y)&&area(Fe.prev,Fe,Fe.next)>=0)return!1;Fe=Fe.next}return!0}function isEarHashed(le,oe,ie,ue){const de=le.prev,he=le,pe=le.next;if(area(de,he,pe)>=0)return!1;const _e=de.x,Ce=he.x,xe=pe.x,Ie=de.y,$e=he.y,Ne=pe.y,Oe=_e<Ce?_e<xe?_e:xe:Ce<xe?Ce:xe,Fe=Ie<$e?Ie<Ne?Ie:Ne:$e<Ne?$e:Ne,Ve=_e>Ce?_e>xe?_e:xe:Ce>xe?Ce:xe,ze=Ie>$e?Ie>Ne?Ie:Ne:$e>Ne?$e:Ne,Ue=zOrder(Oe,Fe,oe,ie,ue),Pt=zOrder(Ve,ze,oe,ie,ue);let qe=le.prevZ,Et=le.nextZ;for(;qe&&qe.z>=Ue&&Et&&Et.z<=Pt;){if(qe.x>=Oe&&qe.x<=Ve&&qe.y>=Fe&&qe.y<=ze&&qe!==de&&qe!==pe&&pointInTriangle(_e,Ie,Ce,$e,xe,Ne,qe.x,qe.y)&&area(qe.prev,qe,qe.next)>=0||(qe=qe.prevZ,Et.x>=Oe&&Et.x<=Ve&&Et.y>=Fe&&Et.y<=ze&&Et!==de&&Et!==pe&&pointInTriangle(_e,Ie,Ce,$e,xe,Ne,Et.x,Et.y)&&area(Et.prev,Et,Et.next)>=0))return!1;Et=Et.nextZ}for(;qe&&qe.z>=Ue;){if(qe.x>=Oe&&qe.x<=Ve&&qe.y>=Fe&&qe.y<=ze&&qe!==de&&qe!==pe&&pointInTriangle(_e,Ie,Ce,$e,xe,Ne,qe.x,qe.y)&&area(qe.prev,qe,qe.next)>=0)return!1;qe=qe.prevZ}for(;Et&&Et.z<=Pt;){if(Et.x>=Oe&&Et.x<=Ve&&Et.y>=Fe&&Et.y<=ze&&Et!==de&&Et!==pe&&pointInTriangle(_e,Ie,Ce,$e,xe,Ne,Et.x,Et.y)&&area(Et.prev,Et,Et.next)>=0)return!1;Et=Et.nextZ}return!0}function cureLocalIntersections(le,oe,ie){let ue=le;do{const de=ue.prev,he=ue.next.next;!equals(de,he)&&intersects(de,ue,ue.next,he)&&locallyInside(de,he)&&locallyInside(he,de)&&(oe.push(de.i/ie|0),oe.push(ue.i/ie|0),oe.push(he.i/ie|0),removeNode(ue),removeNode(ue.next),ue=le=he),ue=ue.next}while(ue!==le);return filterPoints(ue)}function splitEarcut(le,oe,ie,ue,de,he){let pe=le;do{let _e=pe.next.next;for(;_e!==pe.prev;){if(pe.i!==_e.i&&isValidDiagonal(pe,_e)){let Ce=splitPolygon(pe,_e);pe=filterPoints(pe,pe.next),Ce=filterPoints(Ce,Ce.next),earcutLinked(pe,oe,ie,ue,de,he,0),earcutLinked(Ce,oe,ie,ue,de,he,0);return}_e=_e.next}pe=pe.next}while(pe!==le)}function eliminateHoles(le,oe,ie,ue){const de=[];let he,pe,_e,Ce,xe;for(he=0,pe=oe.length;he<pe;he++)_e=oe[he]*ue,Ce=he<pe-1?oe[he+1]*ue:le.length,xe=linkedList(le,_e,Ce,ue,!1),xe===xe.next&&(xe.steiner=!0),de.push(getLeftmost(xe));for(de.sort(compareX),he=0;he<de.length;he++)ie=eliminateHole(de[he],ie);return ie}function compareX(le,oe){return le.x-oe.x}function eliminateHole(le,oe){const ie=findHoleBridge(le,oe);if(!ie)return oe;const ue=splitPolygon(ie,le);return filterPoints(ue,ue.next),filterPoints(ie,ie.next)}function findHoleBridge(le,oe){let ie=oe,ue=-1/0,de;const he=le.x,pe=le.y;do{if(pe<=ie.y&&pe>=ie.next.y&&ie.next.y!==ie.y){const Ne=ie.x+(pe-ie.y)*(ie.next.x-ie.x)/(ie.next.y-ie.y);if(Ne<=he&&Ne>ue&&(ue=Ne,de=ie.x<ie.next.x?ie:ie.next,Ne===he))return de}ie=ie.next}while(ie!==oe);if(!de)return null;const _e=de,Ce=de.x,xe=de.y;let Ie=1/0,$e;ie=de;do he>=ie.x&&ie.x>=Ce&&he!==ie.x&&pointInTriangle(pe<xe?he:ue,pe,Ce,xe,pe<xe?ue:he,pe,ie.x,ie.y)&&($e=Math.abs(pe-ie.y)/(he-ie.x),locallyInside(ie,le)&&($e<Ie||$e===Ie&&(ie.x>de.x||ie.x===de.x&&sectorContainsSector(de,ie)))&&(de=ie,Ie=$e)),ie=ie.next;while(ie!==_e);return de}function sectorContainsSector(le,oe){return area(le.prev,le,oe.prev)<0&&area(oe.next,le,le.next)<0}function indexCurve(le,oe,ie,ue){let de=le;do de.z===0&&(de.z=zOrder(de.x,de.y,oe,ie,ue)),de.prevZ=de.prev,de.nextZ=de.next,de=de.next;while(de!==le);de.prevZ.nextZ=null,de.prevZ=null,sortLinked(de)}function sortLinked(le){let oe,ie,ue,de,he,pe,_e,Ce,xe=1;do{for(ie=le,le=null,he=null,pe=0;ie;){for(pe++,ue=ie,_e=0,oe=0;oe<xe&&(_e++,ue=ue.nextZ,!!ue);oe++);for(Ce=xe;_e>0||Ce>0&&ue;)_e!==0&&(Ce===0||!ue||ie.z<=ue.z)?(de=ie,ie=ie.nextZ,_e--):(de=ue,ue=ue.nextZ,Ce--),he?he.nextZ=de:le=de,de.prevZ=he,he=de;ie=ue}he.nextZ=null,xe*=2}while(pe>1);return le}function zOrder(le,oe,ie,ue,de){return le=(le-ie)*de|0,oe=(oe-ue)*de|0,le=(le|le<<8)&16711935,le=(le|le<<4)&252645135,le=(le|le<<2)&858993459,le=(le|le<<1)&1431655765,oe=(oe|oe<<8)&16711935,oe=(oe|oe<<4)&252645135,oe=(oe|oe<<2)&858993459,oe=(oe|oe<<1)&1431655765,le|oe<<1}function getLeftmost(le){let oe=le,ie=le;do(oe.x<ie.x||oe.x===ie.x&&oe.y<ie.y)&&(ie=oe),oe=oe.next;while(oe!==le);return ie}function pointInTriangle(le,oe,ie,ue,de,he,pe,_e){return(de-pe)*(oe-_e)>=(le-pe)*(he-_e)&&(le-pe)*(ue-_e)>=(ie-pe)*(oe-_e)&&(ie-pe)*(he-_e)>=(de-pe)*(ue-_e)}function isValidDiagonal(le,oe){return le.next.i!==oe.i&&le.prev.i!==oe.i&&!intersectsPolygon(le,oe)&&(locallyInside(le,oe)&&locallyInside(oe,le)&&middleInside(le,oe)&&(area(le.prev,le,oe.prev)||area(le,oe.prev,oe))||equals(le,oe)&&area(le.prev,le,le.next)>0&&area(oe.prev,oe,oe.next)>0)}function area(le,oe,ie){return(oe.y-le.y)*(ie.x-oe.x)-(oe.x-le.x)*(ie.y-oe.y)}function equals(le,oe){return le.x===oe.x&&le.y===oe.y}function intersects(le,oe,ie,ue){const de=sign(area(le,oe,ie)),he=sign(area(le,oe,ue)),pe=sign(area(ie,ue,le)),_e=sign(area(ie,ue,oe));return!!(de!==he&&pe!==_e||de===0&&onSegment(le,ie,oe)||he===0&&onSegment(le,ue,oe)||pe===0&&onSegment(ie,le,ue)||_e===0&&onSegment(ie,oe,ue))}function onSegment(le,oe,ie){return oe.x<=Math.max(le.x,ie.x)&&oe.x>=Math.min(le.x,ie.x)&&oe.y<=Math.max(le.y,ie.y)&&oe.y>=Math.min(le.y,ie.y)}function sign(le){return le>0?1:le<0?-1:0}function intersectsPolygon(le,oe){let ie=le;do{if(ie.i!==le.i&&ie.next.i!==le.i&&ie.i!==oe.i&&ie.next.i!==oe.i&&intersects(ie,ie.next,le,oe))return!0;ie=ie.next}while(ie!==le);return!1}function locallyInside(le,oe){return area(le.prev,le,le.next)<0?area(le,oe,le.next)>=0&&area(le,le.prev,oe)>=0:area(le,oe,le.prev)<0||area(le,le.next,oe)<0}function middleInside(le,oe){let ie=le,ue=!1;const de=(le.x+oe.x)/2,he=(le.y+oe.y)/2;do ie.y>he!=ie.next.y>he&&ie.next.y!==ie.y&&de<(ie.next.x-ie.x)*(he-ie.y)/(ie.next.y-ie.y)+ie.x&&(ue=!ue),ie=ie.next;while(ie!==le);return ue}function splitPolygon(le,oe){const ie=new Node$1(le.i,le.x,le.y),ue=new Node$1(oe.i,oe.x,oe.y),de=le.next,he=oe.prev;return le.next=oe,oe.prev=le,ie.next=de,de.prev=ie,ue.next=ie,ie.prev=ue,he.next=ue,ue.prev=he,ue}function insertNode(le,oe,ie,ue){const de=new Node$1(le,oe,ie);return ue?(de.next=ue.next,de.prev=ue,ue.next.prev=de,ue.next=de):(de.prev=de,de.next=de),de}function removeNode(le){le.next.prev=le.prev,le.prev.next=le.next,le.prevZ&&(le.prevZ.nextZ=le.nextZ),le.nextZ&&(le.nextZ.prevZ=le.prevZ)}function Node$1(le,oe,ie){this.i=le,this.x=oe,this.y=ie,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(le,oe,ie,ue){let de=0;for(let he=oe,pe=ie-ue;he<ie;he+=ue)de+=(le[pe]-le[he])*(le[he+1]+le[pe+1]),pe=he;return de}class ShapeUtils{static area(oe){const ie=oe.length;let ue=0;for(let de=ie-1,he=0;he<ie;de=he++)ue+=oe[de].x*oe[he].y-oe[he].x*oe[de].y;return ue*.5}static isClockWise(oe){return ShapeUtils.area(oe)<0}static triangulateShape(oe,ie){const ue=[],de=[],he=[];removeDupEndPts(oe),addContour(ue,oe);let pe=oe.length;ie.forEach(removeDupEndPts);for(let Ce=0;Ce<ie.length;Ce++)de.push(pe),pe+=ie[Ce].length,addContour(ue,ie[Ce]);const _e=Earcut.triangulate(ue,de);for(let Ce=0;Ce<_e.length;Ce+=3)he.push(_e.slice(Ce,Ce+3));return he}}function removeDupEndPts(le){const oe=le.length;oe>2&&le[oe-1].equals(le[0])&&le.pop()}function addContour(le,oe){for(let ie=0;ie<oe.length;ie++)le.push(oe[ie].x),le.push(oe[ie].y)}class ShapePath{constructor(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}moveTo(oe,ie){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(oe,ie),this}lineTo(oe,ie){return this.currentPath.lineTo(oe,ie),this}quadraticCurveTo(oe,ie,ue,de){return this.currentPath.quadraticCurveTo(oe,ie,ue,de),this}bezierCurveTo(oe,ie,ue,de,he,pe){return this.currentPath.bezierCurveTo(oe,ie,ue,de,he,pe),this}splineThru(oe){return this.currentPath.splineThru(oe),this}toShapes(oe){function ie(Ue){const Pt=[];for(let qe=0,Et=Ue.length;qe<Et;qe++){const kt=Ue[qe],At=new Shape;At.curves=kt.curves,Pt.push(At)}return Pt}function ue(Ue,Pt){const qe=Pt.length;let Et=!1;for(let kt=qe-1,At=0;At<qe;kt=At++){let Dt=Pt[kt],Lt=Pt[At],jt=Lt.x-Dt.x,_n=Lt.y-Dt.y;if(Math.abs(_n)>Number.EPSILON){if(_n<0&&(Dt=Pt[At],jt=-jt,Lt=Pt[kt],_n=-_n),Ue.y<Dt.y||Ue.y>Lt.y)continue;if(Ue.y===Dt.y){if(Ue.x===Dt.x)return!0}else{const bn=_n*(Ue.x-Dt.x)-jt*(Ue.y-Dt.y);if(bn===0)return!0;if(bn<0)continue;Et=!Et}}else{if(Ue.y!==Dt.y)continue;if(Lt.x<=Ue.x&&Ue.x<=Dt.x||Dt.x<=Ue.x&&Ue.x<=Lt.x)return!0}}return Et}const de=ShapeUtils.isClockWise,he=this.subPaths;if(he.length===0)return[];let pe,_e,Ce;const xe=[];if(he.length===1)return _e=he[0],Ce=new Shape,Ce.curves=_e.curves,xe.push(Ce),xe;let Ie=!de(he[0].getPoints());Ie=oe?!Ie:Ie;const $e=[],Ne=[];let Oe=[],Fe=0,Ve;Ne[Fe]=void 0,Oe[Fe]=[];for(let Ue=0,Pt=he.length;Ue<Pt;Ue++)_e=he[Ue],Ve=_e.getPoints(),pe=de(Ve),pe=oe?!pe:pe,pe?(!Ie&&Ne[Fe]&&Fe++,Ne[Fe]={s:new Shape,p:Ve},Ne[Fe].s.curves=_e.curves,Ie&&Fe++,Oe[Fe]=[]):Oe[Fe].push({h:_e,p:Ve[0]});if(!Ne[0])return ie(he);if(Ne.length>1){let Ue=!1,Pt=0;for(let qe=0,Et=Ne.length;qe<Et;qe++)$e[qe]=[];for(let qe=0,Et=Ne.length;qe<Et;qe++){const kt=Oe[qe];for(let At=0;At<kt.length;At++){const Dt=kt[At];let Lt=!0;for(let jt=0;jt<Ne.length;jt++)ue(Dt.p,Ne[jt].p)&&(qe!==jt&&Pt++,Lt?(Lt=!1,$e[jt].push(Dt)):Ue=!0);Lt&&$e[qe].push(Dt)}}Pt>0&&Ue===!1&&(Oe=$e)}let ze;for(let Ue=0,Pt=Ne.length;Ue<Pt;Ue++){Ce=Ne[Ue].s,xe.push(Ce),ze=Oe[Ue];for(let qe=0,Et=ze.length;qe<Et;qe++)Ce.holes.push(ze[qe].h)}return xe}}var DxfRenderType=(le=>(le[le.POINTS=0]="POINTS",le[le.LINE_SEGMENTS=1]="LINE_SEGMENTS",le[le.POLYLINE=2]="POLYLINE",le[le.TRIANGLES=3]="TRIANGLES",le[le.TEXT=4]="TEXT",le[le.MTEXT=5]="MTEXT",le[le.DIV=6]="DIV",le))(DxfRenderType||{}),MTextAttachment=(le=>(le[le.TOP_LEFT=1]="TOP_LEFT",le[le.TOP_CENTER=2]="TOP_CENTER",le[le.TOP_RIGHT=3]="TOP_RIGHT",le[le.MIDDLE_LEFT=4]="MIDDLE_LEFT",le[le.MIDDLE_CENTER=5]="MIDDLE_CENTER",le[le.MIDDLE_RIGHT=6]="MIDDLE_RIGHT",le[le.BOTTOM_LEFT=7]="BOTTOM_LEFT",le[le.BOTTOM_CENTER=8]="BOTTOM_CENTER",le[le.BOTTOM_RIGHT=9]="BOTTOM_RIGHT",le))(MTextAttachment||{}),MTextFormatParserEntityType=(le=>(le[le.TEXT=0]="TEXT",le[le.SCOPE=1]="SCOPE",le[le.PARAGRAPH=2]="PARAGRAPH",le[le.NON_BREAKING_SPACE=3]="NON_BREAKING_SPACE",le[le.PARAGRAPH_ALIGNMENT=4]="PARAGRAPH_ALIGNMENT",le))(MTextFormatParserEntityType||{});const shortFormats=new Set(["L","l","O","o","K","k","P","X","~"]),longFormats=new Set(["f","F","p","Q","H","W","S","A","C","T"]),validEscapes=new Set(["\\","{","}"]);class MTextFormatParser{constructor(){ve(this,"entities"),this.entities=[]}Parse(oe){const ie=oe.length;let ue=0,de=0,he=[],pe=this.entities,_e=0;const Ce=this;function xe(){de!==0||ue===_e||(pe.push({type:0,content:oe.slice(ue,_e)}),ue=_e)}function Ie(Oe){pe.push({type:Oe})}function $e(){const Oe={type:1,content:[]};pe.push(Oe),pe=Oe.content,he.push(Oe)}function Ne(){he.length!==0&&(he.pop(),he.length===0?pe=Ce.entities:pe=he[he.length-1].content)}for(;_e<ie;_e++){const Oe=oe.charAt(_e);switch(de){case 0:if(Oe==="{"){xe(),$e(),ue=_e+1;continue}if(Oe==="}"){xe(),Ne(),ue=_e+1;continue}if(Oe==="\\"){xe(),de=1;continue}continue;case 1:if(shortFormats.has(Oe)){switch(Oe){case"P":Ie(2);break;case"~":Ie(3);break}de=0,ue=_e+1;continue}if(longFormats.has(Oe)){switch(Oe){case"p":de=3;continue}de=2;continue}validEscapes.has(Oe)?ue=_e:ue=_e-1,de=0;continue;case 3:de=Oe==="x"?4:2;continue;case 4:de=Oe==="q"?5:2;continue;case 5:pe.push({type:4,alignment:Oe}),de=2;continue;case 2:Oe===";"&&(ue=_e+1,de=0);continue;default:throw new Error("Unhandled state")}}xe()}GetContent(){return this.entities}*GetText(){function*oe(ie){for(const ue of ie)ue.type===0?yield ue.content:ue.type===1&&(yield*oe(ue.content))}yield*oe(this.GetContent())}}const HAlign=Object.freeze({LEFT:0,CENTER:1,RIGHT:2,ALIGNED:3,MIDDLE:4,FIT:5}),VAlign=Object.freeze({BASELINE:0,BOTTOM:1,MIDDLE:2,TOP:3});class TextBlock{constructor(oe){ve(this,"fontSize"),ve(this,"glyphs"),ve(this,"bounds"),ve(this,"curX"),ve(this,"prevChar"),ve(this,"prevFont"),ve(this,"text"),this.fontSize=oe,this.glyphs=[],this.bounds=null,this.curX=0,this.prevChar=null,this.prevFont=null,this.text=""}PushChar(oe,ie){let ue;this.text+=oe,this.prevChar!==null&&this.prevFont===ie.font?ue=this.prevFont.GetKerning(this.prevChar,oe):ue=0;const de=this.curX+ue*this.fontSize;let he;if(ie.vertices&&ie.vertices.length>0){he=ie.GetVertices({x:de,y:0},this.fontSize);const pe=de+ie.bounds.xMin*this.fontSize,_e=de+ie.bounds.xMax*this.fontSize,Ce=ie.bounds.yMin*this.fontSize,xe=ie.bounds.yMax*this.fontSize;this.bounds===null?this.bounds={xMin:pe,xMax:_e,yMin:Ce,yMax:xe}:(pe<this.bounds.xMin&&(this.bounds.xMin=pe),Ce<this.bounds.yMin&&(this.bounds.yMin=Ce),_e>this.bounds.xMax&&(this.bounds.xMax=_e),xe>this.bounds.yMax&&(this.bounds.yMax=xe))}else he=null;this.curX=de+ie.advance*this.fontSize,this.glyphs.push({shape:ie,vertices:he}),this.prevChar=oe,this.prevFont=ie.font}GetCurrentPosition(){return this.curX}Render(oe,ie,ue,de,he,pe,_e,Ce,xe){if(this.bounds===null)return;ie=ie??oe,ue?ue*=-Math.PI/180:ue=0,de=de??1,he=he??HAlign.LEFT,pe=pe??VAlign.BASELINE;let Ie=new Vector2$1,$e=new Vector2$1(de,1),Ne=he===HAlign.LEFT&&pe===VAlign.BASELINE||he===HAlign.FIT||he===HAlign.ALIGNED?new Vector2$1(oe.x,oe.y):new Vector2$1(ie.x,ie.y);const Oe=()=>{const Ue=ie.x-oe.x;return Ue<Number.MIN_VALUE*2?de:Ue/(this.bounds.xMax-this.bounds.xMin)},Fe=()=>-Math.atan2(ie.y-oe.y,ie.x-oe.x);switch(he){case HAlign.LEFT:Ie.x=this.bounds.xMin;break;case HAlign.CENTER:Ie.x=(this.bounds.xMax-this.bounds.xMin)/2;break;case HAlign.RIGHT:Ie.x=this.bounds.xMax;break;case HAlign.MIDDLE:Ie.x=(this.bounds.xMax-this.bounds.xMin)/2,Ie.y=(this.bounds.yMax-this.bounds.yMin)/2;break;case HAlign.ALIGNED:{const Ue=Oe();$e.x=Ue,$e.y=Ue,ue=Fe();break}case HAlign.FIT:$e.x=Oe(),ue=Fe();break;default:}switch(pe){case VAlign.BASELINE:break;case VAlign.BOTTOM:Ie.y=this.bounds.yMin;break;case VAlign.MIDDLE:Ie.y=(this.bounds.yMax-this.bounds.yMin)/2;break;case VAlign.TOP:Ie.y=this.bounds.yMax;break;default:}let Ve=new Matrix3$1().translate(-Ie.x,-Ie.y).scale($e.x,$e.y).rotate(ue).translate(Ne.x,Ne.y);xe&&(Ve=Ve.premultiply(xe));let ze=[];for(const Ue of this.glyphs)if(Ue.vertices){for(const Pt of Ue.vertices)Pt.applyMatrix3(Ve);ze.push({type:DxfRenderType.TRIANGLES,vertices:Ue.vertices,indices:Ue.shape.indices,color:_e,layer:Ce})}return ze}getTextData(oe,ie,ue,de,he,pe,_e,Ce,xe){if(this.bounds===null)return;ie=ie??oe,ue?ue*=-Math.PI/180:ue=0,de=de??1,he=he??HAlign.LEFT,pe=pe??VAlign.BASELINE;let Ie=new Vector2$1,$e=new Vector2$1(de,1),Ne=he===HAlign.LEFT&&pe===VAlign.BASELINE||he===HAlign.FIT||he===HAlign.ALIGNED?new Vector2$1(oe.x,oe.y):new Vector2$1(ie.x,ie.y);const Oe=()=>{const ze=ie.x-oe.x;return ze<Number.MIN_VALUE*2?de:ze/(this.bounds.xMax-this.bounds.xMin)},Fe=()=>-Math.atan2(ie.y-oe.y,ie.x-oe.x);switch(he){case HAlign.LEFT:Ie.x=this.bounds.xMin;break;case HAlign.CENTER:Ie.x=(this.bounds.xMax-this.bounds.xMin)/2;break;case HAlign.RIGHT:Ie.x=this.bounds.xMax;break;case HAlign.MIDDLE:Ie.x=(this.bounds.xMax-this.bounds.xMin)/2,Ie.y=(this.bounds.yMax-this.bounds.yMin)/2;break;case HAlign.ALIGNED:{const ze=Oe();$e.x=ze,$e.y=ze,ue=Fe();break}case HAlign.FIT:$e.x=Oe(),ue=Fe();break;default:}switch(pe){case VAlign.BASELINE:break;case VAlign.BOTTOM:Ie.y=this.bounds.yMin;break;case VAlign.MIDDLE:Ie.y=(this.bounds.yMax-this.bounds.yMin)/2;break;case VAlign.TOP:Ie.y=this.bounds.yMax;break;default:}let Ve=new Matrix3$1().translate(-Ie.x,-Ie.y).scale($e.x,$e.y).rotate(ue).translate(Ne.x,Ne.y);return xe&&(Ve=Ve.premultiply(xe)),{insertionPos:Ne,origin:Ie,scale:$e,rotation:ue,text:this.text}}}class FontData{constructor(oe){ve(this,"data"),ve(this,"charMap"),ve(this,"scale"),this.data=oe,this.charMap=new Map;for(let ie=0;ie<oe.glyphs.length;ie++){const ue=oe.glyphs.get(ie);ue.unicode!==void 0&&this.charMap.set(String.fromCodePoint(ue.unicode),ue)}this.scale=100/((this.data.unitsPerEm||2048)*72)}HasChar(oe){return this.charMap.has(oe)}GetCharPath(oe){const ie=this.charMap.get(oe);if(!ie)return null;const ue=this.scale,de=new ShapePath;for(const he of ie.path.commands)switch(he.type){case"M":de.moveTo(he.x*ue,he.y*ue);break;case"L":de.lineTo(he.x*ue,he.y*ue);break;case"Q":de.quadraticCurveTo(he.x1*ue,he.y1*ue,he.x*ue,he.y*ue);break;case"C":de.bezierCurveTo(he.x1*ue,he.y1*ue,he.x2*ue,he.y2*ue,he.x*ue,he.y*ue);break}return{advance:ie.advanceWidth*ue,path:de,bounds:{xMin:ie.xMin*ue,xMax:ie.xMax*ue,yMin:ie.yMin*ue,yMax:ie.yMax*ue}}}GetKerning(oe,ie){const ue=this.data.charToGlyphIndex(oe);if(ue===0)return 0;const de=this.data.charToGlyphIndex(oe);return de===0?0:this.data.getKerningValue(ue,de)*this.scale}}class CharShape{constructor(oe,ie,ue){if(ve(this,"font"),ve(this,"advance"),ve(this,"bounds"),ve(this,"vertices"),ve(this,"indices"),this.font=oe,this.advance=ie.advance,this.bounds=ie.bounds,ie.path){const de=ie.path.subPaths;for(let pe=0;pe<de.length;pe++){const _e=de[pe];ShapeUtils$1.isClockWise(_e.getPoints())&&(de.splice(pe,1),de.unshift(_e))}const he=ie.path.toShapes(!1);this.vertices=[],this.indices=[];for(const pe of he){let _e=function(Ne){for(const Oe of Ne)Ie.vertices.push(Oe)};const Ce=pe.extractPoints(ue);if(!ShapeUtils$1.isClockWise(Ce.shape)){Ce.shape=Ce.shape.reverse();for(const Ne of Ce.holes)ShapeUtils$1.isClockWise(Ne)&&(Ce.holes[h]=Ne.reverse())}const xe=ShapeUtils$1.triangulateShape(Ce.shape,Ce.holes),Ie=this,$e=this.vertices.length;_e(Ce.shape);for(const Ne of Ce.holes)_e(Ne);for(const Ne of xe)for(const Oe of Ne)this.indices.push($e+Oe)}}else this.vertices=null}GetVertices(oe,ie){return this.vertices.map(ue=>ue.clone().multiplyScalar(ie).add(oe))}}var Zt;let TextParser$1=(Zt=class{static get mapFonts(){return this._mapFonts}static async loadFonts(le){const oe=[];for(const ie of le)if(!this._mapFonts.has(ie)){const ue=this._createFetcher(ie).then(de=>{this._mapFonts.set(ie,de)});oe.push(ue)}await Promise.all(oe)}static GetLineWidth(le,oe){const ie=new TextBlock(oe);for(const ue of le){const de=this.GetCharShape(ue);de&&ie.PushChar(ue,de)}return ie.GetCurrentPosition()}static GetCharShape(le,oe=4){let ie=this.shapes.get(le);return ie||(ie=this._createCharShape(le,oe),this.shapes.set(le,ie),ie)}static ParseSpecialChars(le){return le.replaceAll(this.SPECIAL_CHARS_RE,(oe,ie,ue,de)=>{if(ie!==void 0)switch(ie){case"d":return"";case"p":return"";case"c":return"";case"o":return"";case"u":return"";case"%":return"%"}else if(ue!==void 0){const he=parseInt(ue,16);return isNaN(he)?oe:String.fromCharCode(he)}else if(de!==void 0)switch(de){case"J":case"M":return"\\P"}return oe})}static _createCharShape(le,oe){for(const ie of this._mapFonts.values()){const ue=ie.GetCharPath(le);if(ue)return new CharShape(ie,ue,oe)}return null}static _createFetcher(le){return fetch(le).then(oe=>oe.arrayBuffer()).then(oe=>parseBuffer(oe)).then(oe=>new FontData(oe))}},ve(Zt,"_mapFonts",new Map),ve(Zt,"shapes",new Map),ve(Zt,"SPECIAL_CHARS_RE",/(?:%%([dpcou%]))|(?:\\U\+([0-9a-fA-F]{4}))|(?:\^([JM])\^?J?)/g),Zt);class TextBox{constructor(oe,ie){ve(this,"fontSize"),ve(this,"charShapeProvider"),ve(this,"curParagraph"),ve(this,"paragraphs"),ve(this,"spaceShape"),this.fontSize=oe,this.charShapeProvider=ie,this.curParagraph=new TextBoxParagraph(this),this.paragraphs=[this.curParagraph],this.spaceShape=ie(" ")}FeedText(oe){function*ie(de){for(const he of de)he.type===MTextFormatParserEntityType.SCOPE?yield*ie(he.content):yield he}let ue=null;for(const de of ie(oe))switch(de.type){case MTextFormatParserEntityType.TEXT:for(const pe of de.content)pe===" "?this.curParagraph.FeedSpace():this.curParagraph.FeedChar(pe);break;case MTextFormatParserEntityType.PARAGRAPH:this.curParagraph=new TextBoxParagraph(this),this.curParagraph.SetAlignment(ue),this.paragraphs.push(this.curParagraph);break;case MTextFormatParserEntityType.NON_BREAKING_SPACE:this.curParagraph.FeedChar(" ");break;case MTextFormatParserEntityType.PARAGRAPH_ALIGNMENT:let he=null;switch(de.alignment){case"l":he=0;break;case"c":he=1;break;case"r":he=2;break;case"d":he=3;break;case"j":he=null;break}this.curParagraph.SetAlignment(he),ue=he;break}}Render(oe,ie,ue,de,he,pe,_e,Ce,xe){for(const Ue of this.paragraphs)Ue.BuildLines(ie);if(ie===null||ie===0){ie=0;for(const Ue of this.paragraphs){const Pt=Ue.GetMaxLineWidth();Pt>ie&&(ie=Pt)}}let Ie=0;switch(he){case MTextAttachment.TOP_CENTER:case MTextAttachment.MIDDLE_CENTER:case MTextAttachment.BOTTOM_CENTER:Ie=1;break;case MTextAttachment.TOP_RIGHT:case MTextAttachment.MIDDLE_RIGHT:case MTextAttachment.BOTTOM_RIGHT:Ie=2;break}for(const Ue of this.paragraphs)Ue.ApplyAlignment(ie,Ie);de!=null&&(ue=Math.atan2(de.y,de.x)*180/Math.PI);const $e=pe*5*this.fontSize/3;let Ne=0;for(const Ue of this.paragraphs)Ue.lines===null?Ne++:Ne+=Ue.lines.length;Ne*=$e;let Oe=new Vector2$1;switch(he){case MTextAttachment.TOP_LEFT:break;case MTextAttachment.TOP_CENTER:Oe.x=ie/2;break;case MTextAttachment.TOP_RIGHT:Oe.x=ie;break;case MTextAttachment.MIDDLE_LEFT:Oe.y=-Ne/2;break;case MTextAttachment.MIDDLE_CENTER:Oe.x=ie/2,Oe.y=-Ne/2;break;case MTextAttachment.MIDDLE_RIGHT:Oe.x=ie,Oe.y=-Ne/2;break;case MTextAttachment.BOTTOM_LEFT:Oe.y=-Ne;break;case MTextAttachment.BOTTOM_CENTER:Oe.x=ie/2,Oe.y=-Ne;break;case MTextAttachment.BOTTOM_RIGHT:Oe.x=ie,Oe.y=-Ne;break;default:throw new Error("Unhandled alignment")}let Fe=new Matrix3$1().translate(-Oe.x,-Oe.y).rotate(-ue*Math.PI/180).translate(oe.x,oe.y);xe&&(Fe=Fe.premultiply(xe));let Ve=[],ze=-this.fontSize;for(const Ue of this.paragraphs){if(Ue.lines===null){ze-=$e;continue}for(const Pt of Ue.lines){for(let qe=Pt.startChunkIdx;qe<Pt.startChunkIdx+Pt.numChunks;qe++){const Et=Ue.chunks[qe];let kt=Et.position;(qe===0||qe!==Pt.startChunkIdx)&&(kt+=Et.GetSpacingWidth());const At=new Vector2$1(kt,ze);if(At.applyMatrix3(Fe),Et.block){const Dt=Et.block.Render(At,null,ue,null,HAlign.LEFT,VAlign.BASELINE,_e,Ce);if(Dt&&Dt.length>0)for(const Lt of Dt)Ve.push(Lt)}}ze-=$e}}return Ve}getTextData(oe,ie,ue,de,he,pe,_e,Ce,xe){for(const Ue of this.paragraphs)Ue.BuildLines(ie);if(ie===null||ie===0){ie=0;for(const Ue of this.paragraphs){const Pt=Ue.GetMaxLineWidth();Pt>ie&&(ie=Pt)}}let Ie=0;switch(he){case MTextAttachment.TOP_CENTER:case MTextAttachment.MIDDLE_CENTER:case MTextAttachment.BOTTOM_CENTER:Ie=1;break;case MTextAttachment.TOP_RIGHT:case MTextAttachment.MIDDLE_RIGHT:case MTextAttachment.BOTTOM_RIGHT:Ie=2;break}for(const Ue of this.paragraphs)Ue.ApplyAlignment(ie,Ie);de!=null&&(ue=Math.atan2(de.y,de.x)*180/Math.PI);const $e=pe*5*this.fontSize/3;let Ne=0;for(const Ue of this.paragraphs)Ue.lines===null?Ne++:Ne+=Ue.lines.length;Ne*=$e;let Oe=new Vector2$1;switch(he){case MTextAttachment.TOP_LEFT:break;case MTextAttachment.TOP_CENTER:Oe.x=ie/2;break;case MTextAttachment.TOP_RIGHT:Oe.x=ie;break;case MTextAttachment.MIDDLE_LEFT:Oe.y=-Ne/2;break;case MTextAttachment.MIDDLE_CENTER:Oe.x=ie/2,Oe.y=-Ne/2;break;case MTextAttachment.MIDDLE_RIGHT:Oe.x=ie,Oe.y=-Ne/2;break;case MTextAttachment.BOTTOM_LEFT:Oe.y=-Ne;break;case MTextAttachment.BOTTOM_CENTER:Oe.x=ie/2,Oe.y=-Ne;break;case MTextAttachment.BOTTOM_RIGHT:Oe.x=ie,Oe.y=-Ne;break;default:throw new Error("Unhandled alignment")}let Fe=new Matrix3$1().translate(-Oe.x,-Oe.y).rotate(-ue*Math.PI/180).translate(oe.x,oe.y);xe&&(Fe=Fe.premultiply(xe));let Ve=[],ze=-this.fontSize;for(const Ue of this.paragraphs){if(Ue.lines===null){ze-=$e;continue}for(const Pt of Ue.lines){for(let qe=Pt.startChunkIdx;qe<Pt.startChunkIdx+Pt.numChunks;qe++){const Et=Ue.chunks[qe];let kt=Et.position;(qe===0||qe!==Pt.startChunkIdx)&&(kt+=Et.GetSpacingWidth());const At=new Vector2$1(kt,ze);if(At.applyMatrix3(Fe),Et.block){const Dt=Et.block.getTextData(At,null,ue,null,HAlign.LEFT,VAlign.BASELINE,_e,Ce);Dt&&Ve.push(Dt)}}ze-=$e}}return Ve}}class TextBoxParagraph{constructor(oe){ve(this,"textBox"),ve(this,"chunks"),ve(this,"curChunk"),ve(this,"alignment"),ve(this,"lines"),this.textBox=oe,this.chunks=[],this.curChunk=null,this.alignment=null,this.lines=null}FeedChar(oe){const ie=this.textBox.charShapeProvider(oe);ie!==null&&(this.curChunk===null&&this._AddChunk(),this.curChunk.PushChar(oe,ie))}FeedSpace(){(this.curChunk===null||this.curChunk.lastChar!==null)&&this._AddChunk(),this.curChunk.PushSpace()}SetAlignment(oe){this.alignment=oe}BuildLines(oe){if(this.curChunk===null)return;this.lines=[];let ie=0,ue=0,de=0;const he=()=>{this.lines.push(new TextBoxParagraphLine(this,ie,ue-ie,de)),ie=ue,de=0};for(;ue<this.chunks.length;ue++){const pe=this.chunks[ue],_e=pe.GetWidth(ie===0||ue!==ie);oe!==null&&oe!==0&&de!==0&&de+_e>oe&&he(),pe.position=de,de+=_e}ie!==ue&&de!==0&&he()}GetMaxLineWidth(){if(this.lines===null)return 0;let oe=0;for(const ie of this.lines)ie.width>oe&&(oe=ie.width);return oe}ApplyAlignment(oe,ie){if(this.lines)for(const ue of this.lines)ue.ApplyAlignment(oe,ie)}_AddChunk(){this.curChunk=new TextBoxParagraphChunk(this,this.textBox.fontSize,this.curChunk),this.chunks.push(this.curChunk)}}class TextBoxParagraphChunk{constructor(oe,ie,ue){ve(this,"paragraph"),ve(this,"fontSize"),ve(this,"prevChunk"),ve(this,"lastChar"),ve(this,"lastShape"),ve(this,"leadingSpaces"),ve(this,"spaceStartKerning"),ve(this,"spaceEndKerning"),ve(this,"block"),ve(this,"position"),this.paragraph=oe,this.fontSize=ie,this.prevChunk=ue,this.lastChar=null,this.lastShape=null,this.leadingSpaces=0,this.spaceStartKerning=null,this.spaceEndKerning=null,this.block=null,this.position=null}PushSpace(){if(this.block)throw new Error("Illegal operation");this.leadingSpaces++}PushChar(oe,ie){this.spaceStartKerning===null&&(this.leadingSpaces===0?(this.spaceStartKerning=0,this.spaceEndKerning=0):(this.prevChunk&&this.prevChunk.lastShape&&this.prevChunk.fontSize===this.fontSize&&this.prevChunk.lastShape.font===this.paragraph.textBox.spaceShape.font?this.spaceStartKerning=this.prevChunk.lastShape.font.GetKerning(this.prevChunk.lastChar," "):this.spaceStartKerning=0,ie.font===this.paragraph.textBox.spaceShape.font?this.spaceEndKerning=ie.font.GetKerning(" ",oe):this.spaceEndKerning=0)),this.block===null&&(this.block=new TextBlock(this.fontSize)),this.block.PushChar(oe,ie),this.lastChar=oe,this.lastShape=ie}GetSpacingWidth(){return this.paragraph.textBox.spaceShape?(this.leadingSpaces*this.paragraph.textBox.spaceShape.advance+this.spaceStartKerning+this.spaceEndKerning)*this.fontSize:0}GetWidth(oe){if(this.block===null)return 0;let ie=this.block.GetCurrentPosition();return oe&&(ie+=this.GetSpacingWidth()),ie}}class TextBoxParagraphLine{constructor(oe,ie,ue,de){ve(this,"paragraph"),ve(this,"startChunkIdx"),ve(this,"numChunks"),ve(this,"width"),this.paragraph=oe,this.startChunkIdx=ie,this.numChunks=ue,this.width=de}ApplyAlignment(oe,ie){switch(this.paragraph.alignment??ie){case 0:break;case 1:{const ue=(oe-this.width)/2;this.ForEachChunk(de=>de.position+=ue);break}case 2:{const ue=oe-this.width;this.ForEachChunk(de=>de.position+=ue);break}case 3:{const ue=oe-this.width;if(ue<=0||this.numChunks===1)break;const de=ue/(this.numChunks-1);let he=0;this.ForEachChunk(pe=>{pe.position+=he,he+=de});break}default:throw new Error("Unhandled alignment: "+this.paragraph.alignment)}}ForEachChunk(oe){for(let ie=0;ie<this.numChunks;ie++)oe(this.paragraph.chunks[this.startChunkIdx+ie])}}var DxfExportType=(le=>(le[le.LINE=0]="LINE",le[le.ARC=1]="ARC",le[le.CIRCLE=2]="CIRCLE",le[le.ELLIPSE=3]="ELLIPSE",le[le.PATH=4]="PATH",le[le.POLYLINE=5]="POLYLINE",le[le.TEXT=6]="TEXT",le[le.MTEXT=7]="MTEXT",le[le.PATHFill=8]="PATHFill",le))(DxfExportType||{});class DxfUtils{static interpolateSpline(oe,ie,ue,de=null,he=null){let pe,_e,Ce,xe;const Ie=ue.length,$e=ue[0].length;if(ie<1)throw new Error("Degree must be at least 1 (linear)");if(ie>Ie-1)throw new Error("Degree must be less than or equal to point count - 1");if(!he)for(he=[],pe=0;pe<Ie;pe++)he[pe]=1;if(de){if(de.length!==Ie+ie+1)throw new Error("Bad knot vector length")}else for(de=[],pe=0;pe<Ie+ie+1;pe++)de[pe]=pe;const Ne=[ie,de.length-1-ie],Oe=de[Ne[0]],Fe=de[Ne[1]];for(oe=oe*(Fe-Oe)+Oe,oe<Oe?oe=Oe:oe>Fe&&(oe=Fe),Ce=Ne[0];Ce<Ne[1]&&!(oe>=de[Ce]&&oe<=de[Ce+1]);Ce++);const Ve=[];for(pe=0;pe<Ie;pe++){for(Ve[pe]=[],_e=0;_e<$e;_e++)Ve[pe][_e]=ue[pe][_e]*he[pe];Ve[pe][$e]=he[pe]}let ze;for(xe=1;xe<=ie+1;xe++)for(pe=Ce;pe>Ce-ie-1+xe;pe--)for(ze=(oe-de[pe])/(de[pe+ie+1-xe]-de[pe]),_e=0;_e<$e+1;_e++)Ve[pe][_e]=(1-ze)*Ve[pe-1][_e]+ze*Ve[pe][_e];const Ue=[];for(pe=0;pe<$e;pe++)Ue[pe]=Ve[Ce][pe]/Ve[Ce][$e];return Ue}static calRadiusAndCenter(oe,ie,ue,de){const he=4*Math.atan(ue);if(Math.abs(he)<de)return null;const pe=he/2,_e=Math.sin(pe),Ce=Math.cos(pe),xe={x:ie.x-oe.x,y:ie.y-oe.y},Ie=xe.x*xe.x+xe.y*xe.y;if(Ie<Number.MIN_VALUE*2)return null;const $e=Math.sqrt(Ie);let Ne=$e/2/_e;xe.x/=$e,xe.y/=$e;const Oe={x:(xe.x*_e-xe.y*Ce)*Ne+oe.x,y:(xe.x*Ce+xe.y*_e)*Ne+oe.y};return{radius:Ne,center:Oe}}static mirrorPolylineVertices(oe,ie=null){let ue=oe;if(!ue.extrusionDirection||ue.extrusionDirection.z>=0)return ie??oe.vertices;(!ie||ie===oe.vertices)&&(ie=oe.vertices.slice());const de=ie.length;for(let he=0;he<de;he++){const pe=ie[he],_e={x:-pe.x};for(const Ce in pe)pe.hasOwnProperty(Ce)&&Ce!=="x"&&(_e[Ce]=pe[Ce]);ie[he]=_e}return ie}static getEntityExtrusionTransform(oe){var ie;return((ie=oe.extrusionDirection)==null?void 0:ie.z)<0||oe.extrusionDirectionZ<0?new Matrix3$1().scale(-1,1):null}static getEntityColor(oe,ie,ue){let de=-1;if(oe.colorIndex===0)de=-2;else if(oe.colorIndex===256){if(oe.hasOwnProperty("layer")&&ie)return ColorUtils.getColorByNumber(Math.abs(ie.colorIndex));de=-1}else oe.hasOwnProperty("color")?de=oe.color:oe.hasOwnProperty("layer")&&oe.layer=="0"&&(de=-2);if(ue)return de;if(de===-1||de===-2){if(oe.hasOwnProperty("layer")&&ie)return ColorUtils.getColorByNumber(Math.abs(ie.colorIndex))}else return de;return 0}static getEntityLayer(oe,ie=null){return oe.hasOwnProperty("layer")?oe.layer:ie?null:"0"}static getHatchBoundaryLoops(oe,ie,ue,de,he){if(!oe.boundaryPaths)return[];const pe=[],_e=(Ce,xe)=>{const Ie=xe.length;if(Ie!=0){if(Ce.length==0)Ce.push(xe[0]);else{const $e=Ce[Ce.length-1];($e.x!=xe[0].x||$e.y!=xe[0].y)&&Ce.push(xe[0])}for(let $e=1;$e<Ie;$e++)Ce.push(xe[$e])}};for(const Ce of oe.boundaryPaths){const xe=[];if(Ce.boundaryPathTypeFlag&2){const Ie=Ce;for(let $e=0;$e<Ie.vertices.length;$e++){const Ne=Ie.vertices[$e];if((Ne.bulge??0)==0)xe.push(new Vector2$1(Ne.x,Ne.y));else{(Ie.vertices[$e==0?Ie.vertices.length-1:$e-1].bulge??0)==0&&xe.push(new Vector2$1(Ne.x,Ne.y));const Oe=Ie.vertices[$e==Ie.vertices.length-1?0:$e+1];this.generateBulgeVertices(xe,Ne,Oe,Ne.bulge,ie,ue)}}}else{const Ie=Ce;if(Ie&&Ie.edges.length>0)for(const $e of Ie.edges)switch($e.type){case 1:const Ne=$e;_e(xe,[new Vector2$1(Ne.start.x,Ne.start.y),new Vector2$1(Ne.end.x,Ne.end.y)]);break;case 2:{const Ue=$e,Pt=[],qe=Ue.startAngle*Math.PI/180,Et=Ue.endAngle*Math.PI/180;this.generateArcVertices(Pt,Ue.center,Ue.radius,qe,Et,null,null,null,null,Ue.isCCW,ie,de),_e(xe,Pt);break}case 3:{const Ue=$e,Pt=Ue.center,qe=Ue.end,Et=Math.sqrt(qe.x*qe.x+qe.y*qe.y),kt=Ue.lengthOfMinorAxis,At=Et*kt,Dt=Math.atan2(qe.y,qe.x),Lt=[],jt=Ue.startAngle*Math.PI/180,_n=Ue.endAngle*Math.PI/180;if(this.generateArcVertices(Lt,Pt,Et,jt,_n,null,At,null,null,Ue.isCCW,ie,de),Dt!==0){const bn=Math.cos(Dt),vn=Math.sin(Dt);for(const Tn of Lt){const $n=Tn.x-Pt.x,wn=Tn.y-Pt.y;Tn.x=$n*bn-wn*vn+Pt.x,Tn.y=$n*vn+wn*bn+Pt.y}}_e(xe,Lt);break}case 4:const Oe=$e,Fe=Oe.controlPoints.map(Ue=>[Ue.x,Ue.y]),Ve=Fe.length*he,ze=1/Ve;for(let Ue=0;Ue<=Ve;Ue++){const Pt=this.interpolateSpline(Ue*ze,Oe.degree,Fe,Oe.knots);xe.push(new Vector2$1(Pt[0],Pt[1]))}break;default:}}if(xe.length>2){const Ie=xe[0],$e=xe[xe.length-1];$e.x==Ie.x&&$e.y==Ie.y&&(xe.length=xe.length-1)}xe.length>2&&pe.push({vertices:xe,boundaryPathTypeFlag:Ce.boundaryPathTypeFlag})}return pe}static generateBulgeVertices(oe,ie,ue,de,he,pe){const _e=4*Math.atan(de),Ce=Math.abs(_e);if(Ce<he){oe.push({x:ue.x,y:ue.y});return}const xe=_e/2,Ie=Math.sin(xe),$e=Math.cos(xe),Ne={x:ue.x-ie.x,y:ue.y-ie.y},Oe=Ne.x*Ne.x+Ne.y*Ne.y;if(Oe<Number.MIN_VALUE*2)return;const Fe=Math.sqrt(Oe);let Ve=Fe/2/Ie;Ne.x/=Fe,Ne.y/=Fe;const ze={x:(Ne.x*Ie-Ne.y*$e)*Ve+ie.x,y:(Ne.x*$e+Ne.y*Ie)*Ve+ie.y};let Ue=Math.floor(Ce/he);if(Ue<pe&&(Ue=pe),Ue>1){const Pt=Math.atan2(ie.y-ze.y,ie.x-ze.x),qe=_e/Ue;_e<0&&(Ve=-Ve);for(let Et=1;Et<Ue;Et++){const kt=Pt+Et*qe;oe.push({x:ze.x+Ve*Math.cos(kt),y:ze.y+Ve*Math.sin(kt)})}}oe.push({x:ue.x,y:ue.y})}static generateArcVertices(oe,ie,ue,de=null,he=null,pe=null,_e=null,Ce=null,xe=null,Ie=!0,$e=10/180*Math.PI,Ne=0){if(!ie||!ue)return;pe||(pe=$e),_e===null&&(_e=ue),de==null?de=0:de+=Ne;let Oe=!1;if(he==null?(he=de+2*Math.PI,Oe=!0):he+=Ne,!Ie){const Pt=de;de=-he,he=-Pt}for(;he<=de;)he+=Math.PI*2;const Fe=he-de;let Ve=Math.floor(Fe/pe);Ve===0&&(Ve=1);const ze=Fe/Ve;let Ue=null;xe&&(Ue=new Matrix3$1().makeRotation(xe));for(let Pt=0;Pt<=Ve&&!(Pt===Ve&&Oe);Pt++){let qe;Ie?qe=de+Pt*ze:qe=de+(Ve-Pt)*ze;const Et=new Vector2$1(ue*Math.cos(qe),_e*Math.sin(qe));Ue&&Et.applyMatrix3(Ue),Et.add(ie),Ce&&Et.applyMatrix3(Ce),oe.push(Et)}}static getScale(oe){const ie=oe.elements;let ue=Math.sqrt(ie[0]*ie[0]+ie[1]*ie[1]);const de=Math.sqrt(ie[3]*ie[3]+ie[4]*ie[4]);return oe.determinant()<0&&(ue=-ue),{x:ue,y:de}}static getSweepflag(oe,ie){const ue=DxfUtils.getScale(oe);return this.getSweepflagByScale(ue,ie)}static getSweepflagByScale(oe,ie){return(oe.x>0&&oe.y<0||oe.x<0&&oe.y>0)&&(ie!=null?ie=0:ie=1),ie}static parseFace(oe,ie=null){if(oe==null||(oe==null?void 0:oe.length)<3)return;function ue($e,Ne,Oe){const Fe=new Vector2$1().subVectors(Ne,$e),Ve=new Vector2$1().subVectors(Oe,$e);return Math.abs(Fe.cross(Ve))>Number.EPSILON}const de=new Vector2$1(oe[0].x,oe[0].y),he=new Vector2$1(oe[1].x,oe[1].y),pe=new Vector2$1(oe[2].x,oe[2].y);let _e=null,Ce=ue(de,he,pe),xe=!1;if(oe.length>3&&(_e=new Vector2$1(oe[3].x,oe[3].y),xe=ue(he,_e,pe),ie&&_e.applyMatrix3(ie)),ie&&(de.applyMatrix3(ie),he.applyMatrix3(ie),pe.applyMatrix3(ie)),!Ce&&!xe)return;const Ie=[];return Ce&&!xe?Ie.push(de,he,pe):!Ce&&xe?Ie.push(he,_e,pe):Ie.push(de,he,_e,pe),Ie}static applySelfMatrix3(oe,ie){const ue=oe.x,de=oe.y,he=ie.elements;oe.x=he[0]*ue+he[3]*de+he[6],oe.y=he[1]*ue+he[4]*de+he[7]}static applyMatrix3(oe,ie){const ue=oe.x,de=oe.y,he=ie.elements;return{x:he[0]*ue+he[3]*de+he[6],y:he[1]*ue+he[4]*de+he[7],bulge:oe.bulge}}static rotationMatrix(oe,ie,ue){let de=Math.cos(ue),he=Math.sin(ue);return[[de,-he,oe-de*oe+he*ie],[he,de,ie-he*oe-de*ie],[0,0,1]]}static toPixels(oe,ie){let ue=oe&&oe.toString().match(/^([\-0-9.]+)em$/);return ue?parseFloat(ue[1])*ie:(ue=oe&&oe.toString().match(/^([\-0-9.]+)(px|)$/),ue?parseFloat(ue[1]):0)}}const TAU=Math.PI*2;function unit_vector_angle(le,oe,ie,ue){let de=le*ue-oe*ie<0?-1:1,he=le*ie+oe*ue;return he>1&&(he=1),he<-1&&(he=-1),de*Math.acos(he)}function get_arc_center(le,oe,ie,ue,de,he,pe,_e,Ce,xe){const Ie=xe*(le-ie)/2+Ce*(oe-ue)/2,$e=-Ce*(le-ie)/2+xe*(oe-ue)/2,Ne=pe*pe,Oe=_e*_e,Fe=Ie*Ie,Ve=$e*$e;let ze=Ne*Oe-Ne*Ve-Oe*Fe;ze<0&&(ze=0),ze/=Ne*Ve+Oe*Fe,ze=Math.sqrt(ze)*(de===he?-1:1);const Ue=ze*pe/_e*$e,Pt=ze*-_e/pe*Ie,qe=xe*Ue-Ce*Pt+(le+ie)/2,Et=Ce*Ue+xe*Pt+(oe+ue)/2,kt=(Ie-Ue)/pe,At=($e-Pt)/_e,Dt=(-Ie-Ue)/pe,Lt=(-$e-Pt)/_e,jt=unit_vector_angle(1,0,kt,At);let _n=unit_vector_angle(kt,At,Dt,Lt);return he===0&&_n>0&&(_n-=TAU),he===1&&_n<0&&(_n+=TAU),[qe,Et,jt,_n]}function approximate_unit_arc(le,oe){const ie=1.3333333333333333*Math.tan(oe/4),ue=Math.cos(le),de=Math.sin(le),he=Math.cos(le+oe),pe=Math.sin(le+oe);return[ue,de,ue-de*ie,de+ue*ie,he+pe*ie,pe-he*ie,he,pe]}function A2Curve(le,oe,ie,ue,de,he,pe,_e,Ce){const xe=Math.sin(Ce*TAU/360),Ie=Math.cos(Ce*TAU/360),$e=Ie*(le-ie)/2+xe*(oe-ue)/2,Ne=-xe*(le-ie)/2+Ie*(oe-ue)/2;if($e===0&&Ne===0)return[];if(pe===0||_e===0)return[];pe=Math.abs(pe),_e=Math.abs(_e);const Oe=$e*$e/(pe*pe)+Ne*Ne/(_e*_e);Oe>1&&(pe*=Math.sqrt(Oe),_e*=Math.sqrt(Oe));const Fe=get_arc_center(le,oe,ie,ue,de,he,pe,_e,xe,Ie),Ve=[];let ze=Fe[2],Ue=Fe[3],Pt=Math.max(Math.ceil(Math.abs(Ue)/(TAU/4)),1);Ue/=Pt;for(let qe=0;qe<Pt;qe++)Ve.push(approximate_unit_arc(ze,Ue)),ze+=Ue;return Ve.map(function(qe){for(let Et=0;Et<qe.length;Et+=2){let kt=qe[Et+0],At=qe[Et+1];kt*=pe,At*=_e;const Dt=Ie*kt-xe*At,Lt=xe*kt+Ie*At;qe[Et+0]=Dt+Fe[0],qe[Et+1]=Lt+Fe[1]}return qe})}class MathUtils{static isPointInPolygon(oe,ie){let ue=!1;for(let de=0,he=ie.length-1;de<ie.length;he=de++)ie[de].y>oe.y!=ie[he].y>oe.y&&oe.x<(ie[he].x-ie[de].x)*(oe.y-ie[de].y)/(ie[he].y-ie[de].y)+ie[de].x&&(ue=!ue);return ue}static calculatePolygonArea(oe){let ie=0;for(let ue=0,de=oe.length-1;ue<oe.length;de=ue,ue++)ie+=(oe[de].x+oe[ue].x)*(oe[de].y-oe[ue].y);return Math.abs(ie/2)}}class DxfExport{constructor(oe){if(ve(this,"options",{arcTessellationAngle:10/180*Math.PI,minArcTessellationSubdivisions:8,suppressPaperSpace:!1}),ve(this,"angBase"),ve(this,"vars"),ve(this,"blocks"),ve(this,"inserts"),ve(this,"layers"),ve(this,"modelLayers"),ve(this,"dimStyles"),ve(this,"docTextMap"),ve(this,"SPLINE_SUBDIVISION",4),ve(this,"numBlocksFlattened",0),ve(this,"origin"),ve(this,"bounds"),ve(this,"dxfBounds"),ve(this,"doc"),oe){this.doc=oe,this.modelLayers=new Map;for(const ie of oe.getAllLayer())this.modelLayers.set(ie.name,ie);this.docTextMap=new Map;for(const ie of this.doc.getAllText())this.docTextMap.set(ie.getAttribute("handle"),ie)}}exportSvg(oe,ie){var ue,de;ie==null&&(ie={}),this._initConfig(ie),ie.name==null&&(ie.name="output.svg");let he=this._getExportData(oe);this._initBox();let pe=this.dxfBounds.maxX-this.dxfBounds.minX,_e=this.dxfBounds.maxY-this.dxfBounds.minY,Ce=Math.max(pe,_e)*.1;pe=this.dxfBounds.maxX-this.dxfBounds.minX+2*Ce,_e=this.dxfBounds.maxY-this.dxfBounds.minY+2*Ce;let xe=(this.dxfBounds.minX+this.dxfBounds.maxX)/2,Ie=(this.dxfBounds.minY+this.dxfBounds.maxY)/2,$e=ie.pageSize.width/2,Ne=ie.pageSize.height/2,Oe=Math.min(ie.pageSize.width/pe,ie.pageSize.height/_e);const Fe=new Matrix3$1().translate(-xe,-Ie);Fe.scale(Oe,-Oe),Fe.translate($e,Ne);let Ve="black",ze=[];const Ue=`stroke-width="${ie.lineWeight}"`;if(this.doc&&ie.exportRoom)for(const qe of this.doc.getAllRoom()){if(!qe.visible)continue;ie.blackWhiteMode||(Ve=qe.color);let Et=qe.polygon.map(jt=>DxfUtils.applyMatrix3(jt,Fe)),kt="",At=Et[0];kt+=`M ${At.x} ${At.y}`;let Dt=At.bulge;for(let jt=1;jt<Et.length;jt++){const _n=Et[jt];if(Dt==null||Dt==0)kt+=` L ${_n.x} ${_n.y} `;else{const bn=DxfUtils.calRadiusAndCenter(At,_n,Dt,this.options.arcTessellationAngle);if(bn==null)kt+=` L ${_n.x} ${_n.y} `;else{const vn=Dt>0?0:1,Tn=Math.abs(Dt)>1?1:0;this.caLArcBound(bn.center,0,0,bn.radius),kt+=`A ${bn.radius} ${bn.radius} 0 ${Tn} ${vn} ${_n.x} ${-_n.y} `}}Dt=_n.bulge,At=_n}kt+=" Z";let Lt=`<path d="${kt}" ${Ue}  fill="${Ve}" />`;ze.push(Lt)}for(let qe=0;qe<he.length;qe++){const Et=he[qe];ie.blackWhiteMode||(Ve=ColorUtils.hexColorToString(Et.color));let kt=Et.vertices;if(kt&&kt.forEach(At=>DxfUtils.applySelfMatrix3(At,Fe)),Et.type==DxfExportType.LINE){let At=`<line x1="${kt[0].x}" y1="${kt[0].y}" x2="${kt[1].x}" y2="${kt[1].y}" stroke="${Ve}" ${Ue}/>`;ze.push(At)}else if(Et.type==DxfExportType.ARC){let At=`<path d="M ${kt[0].x} ${kt[0].y} A ${Et.xRadius*Oe} ${Et.yRadius*Oe} ${Et.rotation!=null?-Et.rotation*180/Math.PI:0} ${Et.largeArcFlag??0} ${Et.sweepflag??0} ${kt[1].x} ${kt[1].y}" stroke="${Ve}" ${Ue}  fill="none" />`;ze.push(At)}else if(Et.type==DxfExportType.CIRCLE){let At=`<circle cx="${kt[0].x}" cy="${kt[0].y}" r="${Et.xRadius*Oe}" stroke="${Ve}" fill="none" ${Ue} />`;ze.push(At)}else if(Et.type==DxfExportType.ELLIPSE){let At="";Et.rotation!=0&&(At=`transform="rotate(${-Et.rotation*180/Math.PI}, ${kt[0].x}, ${kt[0].y})"`);let Dt=`<ellipse  cx="${kt[0].x}" cy="${kt[0].y}" rx="${Et.xRadius*Oe}"  ry="${Et.yRadius*Oe}" ${At} stroke="${Ve}" fill="none" ${Ue}/>`;ze.push(Dt)}else if(Et.type==DxfExportType.POLYLINE){let At="",Dt=kt[0];At+=`M ${Dt.x} ${Dt.y}`;let Lt=Dt.bulge;for(let _n=1;_n<kt.length;_n++){const bn=kt[_n];if(Lt==null||Lt==0)At+=` L ${bn.x} ${bn.y} `;else{const vn=DxfUtils.calRadiusAndCenter(Dt,bn,Lt,this.options.arcTessellationAngle);if(vn==null)At+=` L ${bn.x} ${bn.y} `;else{const Tn=Lt>0?0:1,$n=Math.abs(Lt)>1?1:0;this.caLArcBound(vn.center,0,0,vn.radius),At+=`A ${vn.radius} ${vn.radius} 0 ${$n} ${Tn} ${bn.x} ${bn.y} `}}Lt=bn.bulge,Dt=bn}Et.shape&&(At+=" Z");let jt=`<path d="${At}" stroke="${Ve}" ${Ue}  fill="none" />`;ze.push(jt)}else if(Et.type==DxfExportType.TEXT){const At=Et.text;let Dt=1,Lt=1.4,jt=At.startPoint,_n=At.endPoint;if((ue=this.docTextMap)!=null&&ue.has(At.handle)){let Cn=this.docTextMap.get(At.handle);if(Cn.visible==!1)continue;Dt=Cn.scale.x;const Sn=new Matrix3$1().translate(-Cn.center.x,-Cn.center.y);Sn.scale(Dt,Dt),Sn.translate(Cn.center.x,Cn.center.y),jt=DxfUtils.applyMatrix3(jt,Sn),_n&&(_n=DxfUtils.applyMatrix3(_n,Sn))}const bn=new TextBlock(At.textHeight*Dt),vn=TextParser$1.ParseSpecialChars(At.text);for(const Cn of vn){const Sn=TextParser$1.GetCharShape(Cn,4);Sn&&bn.PushChar(Cn,Sn)}const Tn=bn.getTextData(jt,_n,At.rotation,At.xScale,At.halign,At.valign,Et.color,Et.layer,Et.transform);DxfUtils.applySelfMatrix3(Tn.insertionPos,Fe);let $n="";At.rotation!=0&&($n=`transform="rotate(-${At.rotation}, ${At.startPoint.x}, ${At.startPoint.y})"`);let wn=`<text x="${Tn.insertionPos.x}" y="${Tn.insertionPos.y}" ${$n} fill="${Ve}" style="font-size: ${At.textHeight*Dt*Oe*Lt};" font-family="FangSong, ">${TextParser$1.ParseSpecialChars(At.text)}</text>`;ze.push(wn)}else if(Et.type==DxfExportType.MTEXT){let At=function(Cn){return TextParser$1.GetCharShape(Cn,4)};const Dt=Et.mtext;let Lt=1,jt=1.4,_n=Dt.insertionPoint;if((de=this.docTextMap)!=null&&de.has(Dt.handle)){let Cn=this.docTextMap.get(Dt.handle);if(Cn.visible==!1)continue;Lt=Cn.scale.x;const Sn=new Matrix3$1().translate(-Cn.center.x,-Cn.center.y);Sn.scale(Lt,Lt),Sn.translate(Cn.center.x,Cn.center.y),_n=DxfUtils.applyMatrix3(_n,Sn)}const bn=new MTextFormatParser,vn=TextParser$1.ParseSpecialChars(Dt.text);bn.Parse(vn);let Tn=Dt.height??12;Tn*=Lt;const $n=new TextBox(Tn,At);$n.FeedText(bn.GetContent());const wn=$n.getTextData(_n,Dt.width*Lt,Dt.rotation??0,Dt.direction,Dt.attachmentPoint,1,Et.color,Et.layer,Et.transform);for(const Cn of wn){DxfUtils.applySelfMatrix3(Cn.insertionPos,Fe);let Sn="";if(Dt.direction!=null){const En=Math.atan2(Dt.direction.y,Dt.direction.x)*180/Math.PI;En!=0&&(Sn=`transform="rotate(-${En}, ${Cn.insertionPos.x}, ${Cn.insertionPos.y})"`)}let In=`<text x="${Cn.insertionPos.x}" y="${Cn.insertionPos.y}" ${Sn} fill="${Ve}" style="font-size: ${Tn*Oe*jt}; " font-family="FangSong, ">${Cn.text}</text>`;ze.push(In)}}else if(Et.type==DxfExportType.PATHFill){let At="",Dt=kt[0];At+=`M ${Dt.x} ${Dt.y}`;for(let jt=1;jt<kt.length;jt++){const _n=kt[jt];At+=` L ${_n.x} ${_n.y} `}if(At+=" Z",Et.holes){for(const jt of Et.holes){jt.forEach(bn=>DxfUtils.applySelfMatrix3(bn,Fe));let _n=jt[0];At+=` M ${_n.x} ${_n.y}`;for(let bn=1;bn<jt.length;bn++){const vn=jt[bn];At+=` L ${vn.x} ${vn.y} `}At+=" Z"}At+=' fill-rule="evenodd"'}let Lt=`<path d="${At}" fill="${Ve}"/>`;ze.push(Lt)}}let Pt=()=>{let qe=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 
            ${ie.pageSize.width} ${ie.pageSize.height}">${ze.join("")}</svg>`,Et=new Blob([qe],{type:"text/plain"}),kt=URL.createObjectURL(Et),At=document.createElement("a");At.href=kt,At.download=ie.name,At.click()};if(this.doc&&ie.exportHtmlElement){const qe=this.doc.getElementsByType(BaseElementType.CSS),Et=qe.length;if(Et==0)Pt();else{const kt=new Vector3$1(this.dxfBounds.minX,this.dxfBounds.minY,0),At=new Vector3$1(this.dxfBounds.maxX,this.dxfBounds.maxY,0),Dt=DxfUtils.applyMatrix3(kt,Fe),Lt=DxfUtils.applyMatrix3(At,Fe),jt=Math.abs(Lt.x-Dt.x),_n=Math.abs(Lt.y-Dt.y),bn=kt.project(this.doc.app.view.camera),vn=At.project(this.doc.app.view.camera),Tn=Math.round((bn.x+1)*this.doc.app.view.goldenContainer.clientWidth/2),$n=Math.round((-bn.y+1)*this.doc.app.view.goldenContainer.clientHeight/2),wn=Math.round((vn.x+1)*this.doc.app.view.goldenContainer.clientWidth/2),Cn=Math.round((-vn.y+1)*this.doc.app.view.goldenContainer.clientHeight/2),Sn=Math.abs(wn-Tn),In=Math.abs(Cn-$n);let En=[];for(let xn=0;xn<Et;xn++){const kn=qe[xn],On=kn.htmlElement;if(!kn.visible||On.style.display==="none"||kn.parent&&!kn.parent.visible)continue;const Mn=DxfUtils.applyMatrix3(kn.cssObject.position,Fe),Un=On.style.color;ie.blackWhiteMode&&(On.style.color="#000000");let zn=html2canvas(On,{backgroundColor:null,scale:ie.imgSacle,ignoreElements:function(Hn){return!(Hn===On||Hn.contains(On)||Hn.tagName==="STYLE"||Hn.tagName==="LINK")}}).then(Hn=>{const Rn=On.clientWidth/Sn,Jn=On.clientHeight/In,Qn=jt*Rn,_r=_n*Jn;if(Hn&&Hn.width>0&&Hn.height>0)try{let Zn=` <image href="${Hn.toDataURL("image/png")}" x="${Mn.x-Qn/2}" y="${Mn.y-_r/2}" width="${Qn}" height="${_r}"/>`;ze.push(Zn)}catch{}});En.push(zn),On.style.color=Un}Promise.all(En).then(()=>{Pt()})}}else Pt()}async exportPdf(oe,ie){var ue,de;ie==null&&(ie={}),this._initConfig(ie),ie.name==null&&(ie.name="output.pdf");let he=this._getExportData(oe);this._initBox();let pe=this.dxfBounds.maxX-this.dxfBounds.minX,_e=this.dxfBounds.maxY-this.dxfBounds.minY,Ce=Math.max(pe,_e)*.1;pe=this.dxfBounds.maxX-this.dxfBounds.minX+2*Ce,_e=this.dxfBounds.maxY-this.dxfBounds.minY+2*Ce;const xe=new E$3({orientation:ie.pageSize.width>ie.pageSize.height?"landscape":"portrait",format:[ie.pageSize.width,ie.pageSize.height]});let Ie=(this.dxfBounds.minX+this.dxfBounds.maxX)/2,$e=(this.dxfBounds.minY+this.dxfBounds.maxY)/2,Ne=ie.pageSize.width/2,Oe=ie.pageSize.height/2,Fe=Math.min(ie.pageSize.width/pe,ie.pageSize.height/_e);const Ve=new Matrix3$1().translate(-Ie,-$e);Ve.scale(Fe,-Fe),Ve.translate(Ne,Oe);let ze=!1;function Ue(){if(ze==!1&&ie.fontsUrls!=null&&ie.fontsUrls.length>0){for(let Et=0;Et<ie.fontsUrls.length;Et++){const kt=ie.fontsUrls[Et],At=kt.substring(kt.lastIndexOf("/")+1,kt.lastIndexOf("."));xe.addFont(kt,At,"normal"),xe.setFont(At)}ze=!0}}let Pt="#000000";if(this.doc&&ie.exportRoom)for(const Et of this.doc.getAllRoom()){if(!Et.visible)continue;ie.blackWhiteMode||(Pt=Et.color),xe.setFillColor(Pt);let kt=Et.polygon.map(Lt=>DxfUtils.applyMatrix3(Lt,Ve)),At=kt[0];xe.moveTo(At.x,At.y);let Dt=At.bulge;for(let Lt=1;Lt<kt.length;Lt++){const jt=kt[Lt];if(Dt==null||Dt==0)xe.lineTo(jt.x,jt.y);else{const _n=DxfUtils.calRadiusAndCenter(At,jt,Dt,this.options.arcTessellationAngle);if(_n==null)xe.lineTo(jt.x,jt.y);else{const bn=Dt>0?0:1,vn=Math.abs(Dt)>1?1:0;this.caLArcBound(_n.center,0,0,_n.radius);const Tn=A2Curve(At.x,At.y,jt.x,jt.y,vn,bn,_n.radius,_n.radius,0);for(const $n of Tn)xe.curveTo($n[2],$n[3],$n[4],$n[5],$n[6],$n[7])}}Dt=jt.bulge,At=jt}xe.close(),xe.fill()}for(let Et=0;Et<he.length;Et++){const kt=he[Et];ie.blackWhiteMode||(Pt=ColorUtils.hexColorToString(kt.color)),xe.setFillColor(Pt),xe.setLineWidth(ie.lineWeight),xe.setDrawColor(Pt);let At=kt.vertices;if(At&&At.forEach(Dt=>DxfUtils.applySelfMatrix3(Dt,Ve)),kt.type==DxfExportType.LINE)xe.line(At[0].x,At[0].y,At[1].x,At[1].y);else if(kt.type==DxfExportType.ARC){const Dt=A2Curve(At[0].x,At[0].y,At[1].x,At[1].y,kt.largeArcFlag??0,kt.sweepflag??0,kt.xRadius*Fe,kt.yRadius*Fe,kt.rotation!=null?-kt.rotation*180/Math.PI:0);xe.moveTo(At[0].x,At[0].y);for(const Lt of Dt)xe.curveTo(Lt[2],Lt[3],Lt[4],Lt[5],Lt[6],Lt[7]);xe.stroke()}else if(kt.type==DxfExportType.CIRCLE)xe.circle(At[0].x,At[0].y,kt.xRadius*Fe);else if(kt.type==DxfExportType.ELLIPSE)if(kt.rotation!=0){const Dt=At[0].x,Lt=At[0].y,jt=kt.xRadius*Fe,_n=kt.yRadius*Fe,bn=4/3*(Math.SQRT2-1)*jt,vn=4/3*(Math.SQRT2-1)*_n,Tn=-kt.rotation,$n=[{X:Dt+jt,Y:Lt},{X:Dt+jt,Y:Lt-vn},{X:Dt-bn,Y:Lt-_n},{X:Dt-jt,Y:Lt+vn},{X:Dt+bn,Y:Lt+_n},{X:Dt+bn,Y:Lt-_n},{X:Dt-jt,Y:Lt-vn},{X:Dt-bn,Y:Lt+_n},{X:Dt+jt,Y:Lt+vn},{X:Dt,Y:Lt-_n},{X:Dt-jt,Y:Lt},{X:Dt,Y:Lt+_n}];$n.forEach(wn=>{var Cn=wn.X-Dt,Sn=wn.Y-Lt;wn.X=Dt+Cn*Math.cos(Tn)-Sn*Math.sin(Tn),wn.Y=Lt+Cn*Math.sin(Tn)+Sn*Math.cos(Tn)}),xe.moveTo($n[0].X,$n[0].Y),xe.curveTo($n[1].X,$n[1].Y,$n[5].X,$n[5].Y,$n[9].X,$n[9].Y),xe.curveTo($n[2].X,$n[2].Y,$n[6].X,$n[6].Y,$n[10].X,$n[10].Y),xe.curveTo($n[3].X,$n[3].Y,$n[7].X,$n[7].Y,$n[11].X,$n[11].Y),xe.curveTo($n[4].X,$n[4].Y,$n[8].X,$n[8].Y,$n[0].X,$n[0].Y),xe.stroke()}else xe.ellipse(At[0].x,At[0].y,kt.xRadius*Fe,kt.yRadius*Fe);else if(kt.type==DxfExportType.POLYLINE){let Dt=kt.vertices[0];xe.moveTo(Dt.x,Dt.y);let Lt=Dt.bulge;for(let jt=1;jt<kt.vertices.length;jt++){const _n=kt.vertices[jt];if(Lt==null||Lt==0)xe.lineTo(_n.x,_n.y);else{const bn=DxfUtils.calRadiusAndCenter(Dt,_n,Lt,this.options.arcTessellationAngle);if(bn==null)xe.lineTo(_n.x,_n.y);else{const vn=Lt>0?0:1,Tn=Math.abs(Lt)>1?1:0;this.caLArcBound(bn.center,0,0,bn.radius);const $n=A2Curve(Dt.x,Dt.y,_n.x,_n.y,Tn,vn,bn.radius,bn.radius,0);for(const wn of $n)xe.curveTo(wn[2],wn[3],wn[4],wn[5],wn[6],wn[7])}}Lt=_n.bulge,Dt=_n}kt.shape&&xe.close(),xe.stroke()}else if(kt.type==DxfExportType.TEXT){const Dt=kt.text;let Lt=1,jt=1.4,_n=Dt.startPoint,bn=Dt.endPoint;if((ue=this.docTextMap)!=null&&ue.has(Dt.handle)){let Cn=this.docTextMap.get(Dt.handle);if(Cn.visible==!1)continue;Lt=Cn.scale.x;const Sn=new Matrix3$1().translate(-Cn.center.x,-Cn.center.y);Sn.scale(Lt,Lt),Sn.translate(Cn.center.x,Cn.center.y),_n=DxfUtils.applyMatrix3(_n,Sn),bn&&(bn=DxfUtils.applyMatrix3(bn,Sn))}Ue();const vn=new TextBlock(Dt.textHeight*Lt),Tn=TextParser$1.ParseSpecialChars(Dt.text);for(const Cn of Tn){const Sn=TextParser$1.GetCharShape(Cn,4);Sn&&vn.PushChar(Cn,Sn)}const $n=vn.getTextData(_n,bn,Dt.rotation,Dt.xScale,Dt.halign,Dt.valign,kt.color,kt.layer,kt.transform);DxfUtils.applySelfMatrix3($n.insertionPos,Ve),xe.setTextColor(Pt);let wn=DxfUtils.toPixels(Dt.textHeight*Lt,xe.getFontSize());xe.setFontSize(wn*Fe*xe.internal.scaleFactor*jt),xe.text($n.text,$n.insertionPos.x,$n.insertionPos.y,{align:"left"},Dt.rotation)}else if(kt.type==DxfExportType.MTEXT){let Dt=function(In){return TextParser$1.GetCharShape(In,4)};const Lt=kt.mtext;let jt=1,_n=1.4,bn=Lt.insertionPoint;if((de=this.docTextMap)!=null&&de.has(Lt.handle)){let In=this.docTextMap.get(Lt.handle);if(In.visible==!1)continue;jt=In.scale.x;const En=new Matrix3$1().translate(-In.center.x,-In.center.y);En.scale(jt,jt),En.translate(In.center.x,In.center.y),bn=DxfUtils.applyMatrix3(bn,En)}Ue();const vn=new MTextFormatParser,Tn=TextParser$1.ParseSpecialChars(Lt.text);vn.Parse(Tn);let $n=Lt.height??12;$n*=jt;const wn=new TextBox($n,Dt);wn.FeedText(vn.GetContent());const Cn=wn.getTextData(bn,Lt.width*jt,Lt.rotation??0,Lt.direction,Lt.attachmentPoint,1,kt.color,kt.layer,kt.transform);xe.setTextColor(Pt);let Sn=DxfUtils.toPixels(Lt.height*jt,xe.getFontSize());xe.setFontSize(Sn*Fe*xe.internal.scaleFactor*_n);for(const In of Cn)DxfUtils.applySelfMatrix3(In.insertionPos,Ve),xe.text(In.text,In.insertionPos.x,In.insertionPos.y,{align:"left"},In.rotation)}else if(kt.type==DxfExportType.PATHFill){let Dt=kt.vertices[0];xe.setDrawColor(Pt),xe.moveTo(Dt.x,Dt.y);for(let Lt=1;Lt<kt.vertices.length;Lt++){const jt=kt.vertices[Lt];xe.lineTo(jt.x,jt.y)}if(xe.close(),xe.fill(),kt.holes){xe.setFillColor(255,255,255);for(let Lt=0;Lt<kt.holes.length;Lt++){const jt=kt.holes[Lt];jt.forEach(bn=>DxfUtils.applySelfMatrix3(bn,Ve));let _n=jt[0];xe.moveTo(_n.x,_n.y);for(let bn=1;bn<jt.length;bn++){const vn=jt[bn];xe.lineTo(vn.x,vn.y)}xe.close(),xe.fill()}}}}let qe=()=>{xe.save(ie.name)};if(this.doc&&ie.exportHtmlElement){const Et=this.doc.getElementsByType(BaseElementType.CSS),kt=Et.length;if(kt==0)qe();else{const At=new Vector3$1(this.dxfBounds.minX,this.dxfBounds.minY,0),Dt=new Vector3$1(this.dxfBounds.maxX,this.dxfBounds.maxY,0),Lt=DxfUtils.applyMatrix3(At,Ve),jt=DxfUtils.applyMatrix3(Dt,Ve),_n=Math.abs(jt.x-Lt.x),bn=Math.abs(jt.y-Lt.y),vn=At.project(this.doc.app.view.camera),Tn=Dt.project(this.doc.app.view.camera),$n=Math.round((vn.x+1)*this.doc.app.view.goldenContainer.clientWidth/2),wn=Math.round((-vn.y+1)*this.doc.app.view.goldenContainer.clientHeight/2),Cn=Math.round((Tn.x+1)*this.doc.app.view.goldenContainer.clientWidth/2),Sn=Math.round((-Tn.y+1)*this.doc.app.view.goldenContainer.clientHeight/2),In=Math.abs(Cn-$n),En=Math.abs(Sn-wn);let xn=[];for(let kn=0;kn<kt;kn++){const On=Et[kn],Mn=On.htmlElement;if(!On.visible||Mn.style.display==="none"||On.parent&&!On.parent.visible)continue;const Un=DxfUtils.applyMatrix3(On.cssObject.position,Ve),zn=Mn.style.color;ie.blackWhiteMode&&(Mn.style.color="#000000");let Hn=html2canvas(Mn,{backgroundColor:null,scale:ie.imgSacle,ignoreElements:function(Rn){return!(Rn===Mn||Rn.contains(Mn)||Rn.tagName==="STYLE"||Rn.tagName==="LINK")}}).then(Rn=>{const Jn=Mn.clientWidth/In,Qn=Mn.clientHeight/En,_r=_n*Jn,Zn=bn*Qn;if(Rn&&Rn.width>0&&Rn.height>0)try{xe.addImage(Rn,"PNG",Un.x-_r/2,Un.y-Zn/2,_r,Zn)}catch{}});xn.push(Hn),Mn.style.color=zn}Promise.all(xn).then(()=>{qe()})}}else qe()}_initBox(){if(this.doc){let oe=new BoxHelper(this.doc.rootObject);oe.geometry.computeBoundingBox();const ie=oe.geometry.boundingBox,ue=new Matrix4$1(1,0,0,0,0,0,-1,0,0,1,0,0,0,0,0,1);ie.applyMatrix4(ue),this.dxfBounds.minX=ie.min.x,this.dxfBounds.minY=ie.min.y,this.dxfBounds.maxX=ie.max.x,this.dxfBounds.maxY=ie.max.y}}_initConfig(oe){oe.blackWhiteMode==null&&(oe.blackWhiteMode=!0),oe.pageSize==null&&(oe.pageSize={width:210,height:297}),oe.exportRoom==null&&(oe.exportRoom=!0),oe.imgSacle==null&&(oe.imgSacle=4),oe.lineWeight==null&&(oe.lineWeight=.02)}_getExportData(oe){this.dxfBounds={minX:Number.MAX_VALUE,maxX:-Number.MAX_VALUE,minY:Number.MAX_VALUE,maxY:-Number.MAX_VALUE};const ie=new te().parseSync(oe);this.vars=new Map,this.blocks=new Map,this.inserts=new Map,this.layers=new Map,this.dimStyles=new Map;for(const[ue,de]of Object.entries(ie.header))ue.startsWith("$")&&this.vars.set(ue.slice(1),de);if(this.angBase=this.vars.get("ANGBASE")??0,ie.tables){if(ie.tables.LAYER)for(const[,ue]of Object.entries(ie.tables.LAYER.entries))ue&&this.layers.set(ue.name,ue);if(ie.tables.DIMSTYLE)for(const[,ue]of Object.entries(ie.tables.DIMSTYLE))ue&&this.dimStyles.set(ue.name,ue)}if(ie.blocks)for(const[,ue]of Object.entries(ie.blocks))ue&&this.blocks.set(ue.name,new Block(ue));for(const ue of ie.entities)if(this._filterEntity(ue)){if(ue.type==="INSERT"){this.inserts.set(ue.handle,ue);const de=this.blocks.get(ue.name);de==null||de.RegisterInsert(ue)}else if(ue.type=="DIMENSION"){const de=ue;if((de.name??null)!==null){const he=this.blocks.get(de.name);he==null||he.RegisterInsert(ue)}}}for(const ue of this.blocks.values()){if(ue.data.hasOwnProperty("entities")){let de=[];const he=ue.DefinitionContext();for(const pe of ue.data.entities){if(!this._filterEntity(pe))continue;let _e=this._parseEntity(pe,he);if(_e&&_e.length>0)for(const Ce of _e)de.push(Ce)}ue.renderEntities=de}ue.SetFlatten()&&this.numBlocksFlattened++}return this._parseDxf(ie)}_parseDxf(oe){let ie=[];for(let ue=0;ue<oe.entities.length;ue++){const de=oe.entities[ue];let he=this._parseEntity(de);if(he&&he.length>0)for(const pe of he)ie.push(pe)}return ie}_parseEntity(oe,ie=null){const ue=DxfUtils.getEntityLayer(oe,ie);let de=this.layers.get(ue),he=!0;if(ie==null&&(this.modelLayers?he=this.modelLayers.get(ue).visible:de.standardFlag==1?he=!1:he=de.colorIndex>0),!he)return;const pe=oe.type;if(pe==="LINE"){let _e=this._parseLine(oe,ie);return _e==null?null:[_e]}else if(pe==="LWPOLYLINE"||pe==="POLYLINE"){let _e=this._parsePolyLine(oe,ie);return _e==null?null:[_e]}else if(pe==="ARC"){let _e=this._parseArc(oe,ie);return _e==null?null:[_e]}else if(pe==="CIRCLE"){let _e=this._parseCircle(oe,ie);return _e==null?null:[_e]}else{if(pe==="INSERT")return this._parseInsert(oe,ie);if(pe==="ELLIPSE"){let _e=this._parseEllipse(oe,ie);return _e==null?null:[_e]}else if(pe==="SPLINE"){let _e=this._parseSpline(oe,ie);return _e==null?null:[_e]}else if(pe==="TEXT"){let _e=this._parseText(oe,ie);return _e==null?null:[_e]}else if(pe==="MTEXT"){let _e=this._parseMText(oe,ie);return _e==null?null:[_e]}else{if(pe==="HATCH")return this._parseHatch(oe,ie);if(pe==="SOLID"){let _e=this._parseSolid(oe,ie);return _e==null?null:[_e]}else if(pe==="DIMENSION")return this._parseDimension(oe,ie)}}}_parsePolyLine(oe,ie=null){let ue,de;if(oe.includesCurveFitVertices||oe.includesSplineFitVertices?(ue=oe.vertices.filter(Ce=>Ce.splineVertex||Ce.curveFittingVertex),de=ue.length):(ue=oe.vertices,de=oe.vertices.length),de<2)return;ue=DxfUtils.mirrorPolylineVertices(oe,ue);const he=DxfUtils.getEntityLayer(oe,ie),pe=DxfUtils.getEntityColor(oe,this.layers.get(he),ie);let _e=!1;return(oe.flag&1)===1&&(_e=!0),{type:DxfExportType.POLYLINE,vertices:this._transformVertices(ue,ie),layer:he,color:pe,shape:_e}}_parseLine(oe,ie=null){if(!oe.startPoint||!oe.endPoint)return;const ue=[oe.startPoint,oe.endPoint],de=DxfUtils.getEntityLayer(oe,ie),he=DxfUtils.getEntityColor(oe,this.layers.get(de),ie);return{type:DxfExportType.LINE,vertices:this._transformVertices(ue,ie),layer:de,color:he,rotation:0}}_parseArc(oe,ie=null){const ue=DxfUtils.getEntityLayer(oe,ie),de=DxfUtils.getEntityColor(oe,this.layers.get(ue),ie);let he=oe.startAngle*Math.PI/180,pe=oe.endAngle*Math.PI/180;const _e={x:oe.center.x+oe.radius*Math.cos(he),y:oe.center.y+oe.radius*Math.sin(he)},Ce={x:oe.center.x+oe.radius*Math.cos(pe),y:oe.center.y+oe.radius*Math.sin(pe)},xe=DxfUtils.getEntityExtrusionTransform(oe);let Ie,$e;if(xe){for(;pe<=he;)pe+=Math.PI*2;const Ve=new Vector2$1(_e.x,_e.y);Ve.applyMatrix3(xe);const ze=new Vector2$1(Ce.x,Ce.y);ze.applyMatrix3(xe);const Ue=new Vector2$1(oe.center.x,oe.center.y);Ue.applyMatrix3(xe),Ie=this._transformVertices([Ve,ze,Ue],ie),$e=DxfUtils.getSweepflag(xe,$e)}else Ie=this._transformVertices([_e,Ce,oe.center],ie);for(;pe<=he;)pe+=Math.PI*2;let Ne=oe.radius,Oe=oe.radius;const Fe=pe-he<=Math.PI?0:1;if(ie){const Ve=DxfUtils.getScale(ie.transform);$e=DxfUtils.getSweepflagByScale(Ve,$e),Ne*=Ve.x,Oe*=Ve.y}return this.caLArcBound(Ie[2],he,pe,oe.radius),{type:DxfExportType.ARC,vertices:Ie,layer:ue,color:de,xRadius:Ne,yRadius:Oe,largeArcFlag:Fe,sweepflag:$e}}_parseCircle(oe,ie=null){const ue=DxfUtils.getEntityLayer(oe,ie);this.layers.get(ue);const de=DxfUtils.getEntityColor(oe,this.layers.get(ue),ie);let he=this._transformVertices([oe.center],ie),pe=oe.radius,_e=oe.radius;if(ie){const Ce=DxfUtils.getScale(ie.transform);pe*=Ce.x,_e*=Ce.y}return this.caLArcBound(he[0],0,0,Math.max(pe,_e)),{type:DxfExportType.CIRCLE,vertices:he,layer:ue,color:de,xRadius:oe.radius,yRadius:oe.radius}}_parseEllipse(oe,ie=null){const ue=DxfUtils.getEntityLayer(oe,ie),de=DxfUtils.getEntityColor(oe,this.layers.get(ue),ie),he=Math.sqrt(oe.majorAxisEndPoint.x*oe.majorAxisEndPoint.x+oe.majorAxisEndPoint.y*oe.majorAxisEndPoint.y),pe=he*oe.axisRatio,_e=Math.atan2(oe.majorAxisEndPoint.y,oe.majorAxisEndPoint.x);let Ce=oe.startAngle??0,xe=oe.endAngle??Ce+2*Math.PI,Ie;if(DxfUtils.getEntityExtrusionTransform(oe)){const Oe=Ce;Ce=-xe,xe=-Oe}for(;xe<=Ce;)xe+=Math.PI*2;const $e=xe-Ce<=Math.PI?0:1,Ne=(oe.endAngle??null)===null||Math.abs(xe-Ce-2*Math.PI)<1e-6;if(Ne)Ie=this._transformVertices([oe.center],ie);else{const Oe=new Vector2$1(he*Math.cos(Ce),pe*Math.sin(Ce)),Fe=new Vector2$1(he*Math.cos(xe),pe*Math.sin(xe));if(_e){const Ve=new Matrix3$1().makeRotation(_e);Oe.applyMatrix3(Ve),Fe.applyMatrix3(Ve)}Oe.add(oe.center),Fe.add(oe.center),Ie=this._transformVertices([Oe,Fe,oe.center],ie)}return this.caLArcBound(Ie[0],0,0,Math.max(he,pe)),Ne?{type:DxfExportType.ELLIPSE,vertices:Ie,layer:ue,color:de,xRadius:he,yRadius:pe,rotation:_e}:{type:DxfExportType.ARC,vertices:Ie,layer:ue,color:de,xRadius:he,yRadius:pe,rotation:_e,largeArcFlag:$e}}_parseHatch(oe,ie=null){let ue=[];const de=DxfUtils.getEntityLayer(oe,ie),he=DxfUtils.getEntityColor(oe,this.layers.get(de),ie);if(oe.solidFill){let pe=function(xe){return xe.boundaryPathTypeFlag===16};const _e=DxfUtils.getHatchBoundaryLoops(oe,this.options.arcTessellationAngle,this.options.minArcTessellationSubdivisions,this.angBase,this.SPLINE_SUBDIVISION);if(_e.length==0)return;const Ce=[];if(_e.length>0&&_e.filter(xe=>xe&&pe(xe)),Ce.length>0){let xe=-1,Ie=_e[0];for(const Ne of _e){if(pe(Ne))continue;let Oe=MathUtils.calculatePolygonArea(Ne.vertices);Oe>xe&&(xe=Oe,Ie=Ne)}const $e=[];for(let Ne=0;Ne<Ce.length;Ne++){const Oe=Ce[Ne];$e.push(this._transformVertices(Oe.vertices,ie))}ue.push({type:DxfExportType.PATHFill,vertices:this._transformVertices(Ie.vertices,ie),holes:$e,layer:de,color:he})}else for(let xe=0;xe<_e.length;xe++){const Ie=_e[xe];ue.push({type:DxfExportType.PATHFill,vertices:this._transformVertices(Ie.vertices,ie),layer:de,color:he})}return ue}return ue}_parseSpline(oe,ie=null){const ue=DxfUtils.getEntityLayer(oe,ie),de=DxfUtils.getEntityColor(oe,this.layers.get(ue),ie);if(!oe.controlPoints)return;const he=oe.controlPoints.map(xe=>[xe.x,xe.y]),pe=[],_e=he.length*this.SPLINE_SUBDIVISION,Ce=1/_e;for(let xe=0;xe<=_e;xe++){const Ie=DxfUtils.interpolateSpline(xe*Ce,oe.degree,he,oe.knots);pe.push({x:Ie[0],y:Ie[1]})}return{type:DxfExportType.POLYLINE,vertices:this._transformVertices(pe,ie),layer:ue,color:de}}_parseText(oe,ie){if(oe.text==null||oe.text=="")return;const ue=DxfUtils.getEntityLayer(oe,ie),de=DxfUtils.getEntityColor(oe,this.layers.get(ue),ie);let he=null;return ie&&(he=this._transformVertex({x:0,y:0},ie)),{type:DxfExportType.TEXT,layer:ue,color:de,vertices:null,text:oe,transformPosition:he}}_parseMText(oe,ie){if(oe.text==null||oe.text=="")return;const ue=DxfUtils.getEntityLayer(oe,ie),de=DxfUtils.getEntityColor(oe,this.layers.get(ue),ie);let he=null;return ie&&(he=this._transformVertex({x:0,y:0},ie)),{type:DxfExportType.MTEXT,layer:ue,color:de,vertices:null,mtext:oe,transformPosition:he}}_parseInsert(oe,ie){if(ie){if(ie.name===oe.name)return;const xe=this.blocks.get(oe.name);if(!xe)return;const Ie=ie.NestedBlockContext(xe,oe);let $e=[];if(xe.data.entities)for(const Ne of xe.data.entities){let Oe=this._parseEntity(Ne,Ie);if(Oe)for(const Fe of Oe)$e.push(Fe)}return $e}const ue=this.blocks.get(oe.name);if(!ue||!ue.HasGeometry())return;const de=DxfUtils.getEntityLayer(oe,ie),he=DxfUtils.getEntityColor(oe,this.layers.get(de),ie),pe=ue.InstantiationContext().GetInsertionTransform(oe),_e=ue.bounds;this._updateBounds(new Vector2$1(_e.minX,_e.minY).applyMatrix3(pe)),this._updateBounds(new Vector2$1(_e.maxX,_e.maxY).applyMatrix3(pe)),this._updateBounds(new Vector2$1(_e.minX,_e.maxY).applyMatrix3(pe)),this._updateBounds(new Vector2$1(_e.maxX,_e.minY).applyMatrix3(pe));let Ce=[];for(const xe of ue.renderEntities){let Ie,$e;const Ne=this.layers.get(xe.layer);if(xe.color===-2?(Ie=he,$e=de):xe.color===-1?(Ne.colorIndex&&(Ie=ColorUtils.getColorByNumber(Math.abs(Ne.colorIndex))),$e=de):(Ie=xe.color,$e=de),xe.type==DxfExportType.TEXT||xe.type==DxfExportType.MTEXT){Ce.push({type:xe.type,text:xe.text,mtext:xe.mtext,vertices:null,color:Ie,layer:$e,transform:pe.clone().translate(xe.transformPosition.x,xe.transformPosition.y)});continue}let Oe=[];for(let Ue=0;Ue<xe.vertices.length;Ue++){const Pt=new Vector2$1(xe.vertices[Ue].x,xe.vertices[Ue].y);pe&&Pt.applyMatrix3(pe),Oe.push(Pt),this._calDxfBounds(Pt)}let Fe=xe.xRadius,Ve=xe.yRadius,ze=xe.sweepflag;Fe&&Ve&&(Fe*=Math.abs(oe.xScale),Ve*=Math.abs(oe.yScale),ze=DxfUtils.getSweepflag(pe,ze)),Ce.push({type:xe.type,vertices:Oe,color:Ie,layer:$e,xRadius:Fe,yRadius:Ve,largeArcFlag:xe.largeArcFlag,rotation:xe.rotation,sweepflag:ze})}return Ce}_parseSolid(oe,ie){const ue=DxfUtils.getEntityLayer(oe,ie),de=DxfUtils.getEntityColor(oe,this.layers.get(ue),ie),he=DxfUtils.parseFace(oe.points,DxfUtils.getEntityExtrusionTransform(oe));return{type:DxfExportType.PATHFill,vertices:this._transformVertices(he,ie),layer:ue,color:de,rotation:0}}caLArcBound(oe,ie,ue,de){}_parseDimension(oe,ie){const ue=DxfUtils.getEntityLayer(oe,ie),de=DxfUtils.getEntityColor(oe,this.layers.get(ue),ie);if((oe.name??null)!==null&&this.blocks.has(oe.name)){const he={type:"INSERT",name:oe.name,insertionPoint:{x:0,y:0},layer:ue,color:de,colorIndex:oe.colorIndex,subclassMarker:void 0,xScale:void 0,yScale:void 0,zScale:void 0,rotation:void 0,columnCount:void 0,rowCount:void 0,columnSpacing:void 0,rowSpacing:void 0,extrusionDirection:void 0,handle:void 0};return this._parseInsert(he,ie)}return[]}_filterEntity(oe){return!oe.isVisible}_transformVertices(oe,ie=null){if(ie==null){for(const de of oe)this._calDxfBounds(de);return oe}let ue=[];for(const de of oe){let he=this._transformVertex(de,ie);de.bulge!=null&&(he.bulge=de.bulge),ue.push(he)}return ue}_transformVertex(oe,ie=null){return ie?ie.TransformVertex(oe):(this._updateBounds(oe),{x:oe.x-this.origin.x,y:oe.y-this.origin.y})}_updateBounds(oe){this.bounds==null?this.bounds={minX:oe.x,maxX:oe.x,minY:oe.y,maxY:oe.y}:(oe.x<this.bounds.minX?this.bounds.minX=oe.x:oe.x>this.bounds.maxX&&(this.bounds.maxX=oe.x),oe.y<this.bounds.minY?this.bounds.minY=oe.y:oe.y>this.bounds.maxY&&(this.bounds.maxY=oe.y)),this.origin==null&&(this.origin={x:oe.x,y:oe.y})}_calDxfBounds(oe){this.dxfBounds.minX=Math.min(this.dxfBounds.minX,oe.x),this.dxfBounds.maxX=Math.max(this.dxfBounds.maxX,oe.x),this.dxfBounds.minY=Math.min(this.dxfBounds.minY,oe.y),this.dxfBounds.maxY=Math.max(this.dxfBounds.maxY,oe.y)}}class DxfModelDocument extends ModelDocument{constructor(oe){super(oe)}getAllLayer(){return this.getElementsByType(BaseElementType.LAYER)}getAllRoom(){return this.getElementsByType(BaseElementType.ROOM)}getAllText(){return this.getElementsByType(BaseElementType.TEXT)}exportSvg(oe){fetch(this.config.url).then(ie=>ie.text()).then(ie=>{new DxfExport(this).exportSvg(ie,oe)})}exportPdf(oe){fetch(this.config.url).then(ie=>ie.text()).then(ie=>{oe==null&&(oe={}),oe.fontsUrls==null&&(oe.fontsUrls=this.config.fontsUrls),new DxfExport(this).exportPdf(ie,oe)})}async exportImage(oe){oe==null&&(oe={}),oe.name==null&&(oe.name="output.png"),oe.imgSacle==null&&(oe.imgSacle=4),oe.curViewImg==null&&(oe.curViewImg=!0);const ie=this.app.view.goldenContainer;oe.curViewImg==!1&&(this.app.view.controls.saveState(),this.app.view.camera.updateMatrixWorld());const ue=this.app.view.renderer,de=ue.getPixelRatio();ue.setPixelRatio(de*oe.imgSacle),oe.curViewImg==!1&&await this.app.view.fitBox(null,!1,.01),this.app.view.render(),html2canvas(ie,{useCORS:!0,scale:oe.imgSacle}).then(he=>{let pe=he.toDataURL("image/png"),_e=document.createElement("a");_e.href=pe,_e.download=oe.name,_e.click()}),ue.setPixelRatio(de),ue.render(this.app.view.scene,this.app.view.camera),oe.curViewImg==!1&&(this.app.view.controls.reset(),this.app.view.controls.update(),this.app.view.camera.updateMatrixWorld())}}let Node$2=class{constructor(oe,ie,ue){ve(this,"i"),ve(this,"x"),ve(this,"y"),ve(this,"z"),ve(this,"prev"),ve(this,"next"),ve(this,"prevZ"),ve(this,"nextZ"),ve(this,"steiner"),this.i=oe,this.x=ie,this.y=ue,this.z=0,this.prev=null,this.next=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}};class EarCut{static earCutPolygon2(oe,ie=2){let ue=[],de;const he=oe[0];for(const _e of he)ue.push(_e.x),ue.push(_e.y);if(oe.length>1){const _e=oe.slice(1);de=[];for(const Ce of _e){de.push(ue.length/ie);for(const xe of Ce)ue.push(xe.x),ue.push(xe.y)}}let pe=this.earcut(ue,de,ie);return{vertices:ue,triangles:pe}}static earcut(oe,ie=null,ue=2){ue=ue||2;let de=ie&&ie.length,he=de?ie[0]*ue:oe.length,pe=this.linkedList(oe,0,he,ue,!0),_e=[];if(!pe||pe.next===pe.prev)return _e;let Ce,xe,Ie,$e,Ne,Oe,Fe;if(de&&(pe=this.eliminateHoles(oe,ie,pe,ue)),oe.length>80*ue){Ce=Ie=oe[0],xe=$e=oe[1];for(let Ve=ue;Ve<he;Ve+=ue)Ne=oe[Ve],Oe=oe[Ve+1],Ne<Ce&&(Ce=Ne),Oe<xe&&(xe=Oe),Ne>Ie&&(Ie=Ne),Oe>$e&&($e=Oe);Fe=Math.max(Ie-Ce,$e-xe),Fe=Fe!==0?32767/Fe:0}return this.earcutLinked(pe,_e,ue,Ce,xe,Fe,0),_e}static linkedList(oe,ie,ue,de,he){let pe,_e;if(he===this.signedArea(oe,ie,ue,de)>0)for(pe=ie;pe<ue;pe+=de)_e=this.insertNode(pe,oe[pe],oe[pe+1],_e);else for(pe=ue-de;pe>=ie;pe-=de)_e=this.insertNode(pe,oe[pe],oe[pe+1],_e);return _e&&this.equals(_e,_e.next)&&(this.removeNode(_e),_e=_e.next),_e}static filterPoints(oe,ie=null){if(!oe)return oe;ie||(ie=oe);let ue=oe,de;do if(de=!1,!ue.steiner&&(this.equals(ue,ue.next)||this.area(ue.prev,ue,ue.next)===0)){if(this.removeNode(ue),ue=ie=ue.prev,ue===ue.next)break;de=!0}else ue=ue.next;while(de||ue!==ie);return ie}static earcutLinked(oe,ie,ue,de,he,pe,_e){if(!oe)return;!_e&&pe&&this.indexCurve(oe,de,he,pe);let Ce=oe,xe,Ie;for(;oe.prev!==oe.next;){if(xe=oe.prev,Ie=oe.next,pe?this.isEarHashed(oe,de,he,pe):this.isEar(oe)){ie.push(xe.i/ue|0),ie.push(oe.i/ue|0),ie.push(Ie.i/ue|0),this.removeNode(oe),oe=Ie.next,Ce=Ie.next;continue}if(oe=Ie,oe===Ce){_e?_e===1?(oe=this.cureLocalIntersections(this.filterPoints(oe),ie,ue),this.earcutLinked(oe,ie,ue,de,he,pe,2)):_e===2&&this.splitEarcut(oe,ie,ue,de,he,pe):this.earcutLinked(this.filterPoints(oe),ie,ue,de,he,pe,1);break}}}static isEar(oe){let ie=oe.prev,ue=oe,de=oe.next;if(this.area(ie,ue,de)>=0)return!1;let he=ie.x,pe=ue.x,_e=de.x,Ce=ie.y,xe=ue.y,Ie=de.y,$e=he<pe?he<_e?he:_e:pe<_e?pe:_e,Ne=Ce<xe?Ce<Ie?Ce:Ie:xe<Ie?xe:Ie,Oe=he>pe?he>_e?he:_e:pe>_e?pe:_e,Fe=Ce>xe?Ce>Ie?Ce:Ie:xe>Ie?xe:Ie,Ve=de.next;for(;Ve!==ie;){if(Ve.x>=$e&&Ve.x<=Oe&&Ve.y>=Ne&&Ve.y<=Fe&&this.pointInTriangle(he,Ce,pe,xe,_e,Ie,Ve.x,Ve.y)&&this.area(Ve.prev,Ve,Ve.next)>=0)return!1;Ve=Ve.next}return!0}static isEarHashed(oe,ie,ue,de){let he=oe.prev,pe=oe,_e=oe.next;if(this.area(he,pe,_e)>=0)return!1;let Ce=he.x,xe=pe.x,Ie=_e.x,$e=he.y,Ne=pe.y,Oe=_e.y,Fe=Ce<xe?Ce<Ie?Ce:Ie:xe<Ie?xe:Ie,Ve=$e<Ne?$e<Oe?$e:Oe:Ne<Oe?Ne:Oe,ze=Ce>xe?Ce>Ie?Ce:Ie:xe>Ie?xe:Ie,Ue=$e>Ne?$e>Oe?$e:Oe:Ne>Oe?Ne:Oe,Pt=this.zOrder(Fe,Ve,ie,ue,de),qe=this.zOrder(ze,Ue,ie,ue,de),Et=oe.prevZ,kt=oe.nextZ;for(;Et&&Et.z>=Pt&&kt&&kt.z<=qe;){if(Et.x>=Fe&&Et.x<=ze&&Et.y>=Ve&&Et.y<=Ue&&Et!==he&&Et!==_e&&this.pointInTriangle(Ce,$e,xe,Ne,Ie,Oe,Et.x,Et.y)&&this.area(Et.prev,Et,Et.next)>=0||(Et=Et.prevZ,kt.x>=Fe&&kt.x<=ze&&kt.y>=Ve&&kt.y<=Ue&&kt!==he&&kt!==_e&&this.pointInTriangle(Ce,$e,xe,Ne,Ie,Oe,kt.x,kt.y)&&this.area(kt.prev,kt,kt.next)>=0))return!1;kt=kt.nextZ}for(;Et&&Et.z>=Pt;){if(Et.x>=Fe&&Et.x<=ze&&Et.y>=Ve&&Et.y<=Ue&&Et!==he&&Et!==_e&&this.pointInTriangle(Ce,$e,xe,Ne,Ie,Oe,Et.x,Et.y)&&this.area(Et.prev,Et,Et.next)>=0)return!1;Et=Et.prevZ}for(;kt&&kt.z<=qe;){if(kt.x>=Fe&&kt.x<=ze&&kt.y>=Ve&&kt.y<=Ue&&kt!==he&&kt!==_e&&this.pointInTriangle(Ce,$e,xe,Ne,Ie,Oe,kt.x,kt.y)&&this.area(kt.prev,kt,kt.next)>=0)return!1;kt=kt.nextZ}return!0}static cureLocalIntersections(oe,ie,ue){let de=oe;do{let he=de.prev,pe=de.next.next;!this.equals(he,pe)&&this.intersects(he,de,de.next,pe)&&this.locallyInside(he,pe)&&this.locallyInside(pe,he)&&(ie.push(he.i/ue|0),ie.push(de.i/ue|0),ie.push(pe.i/ue|0),this.removeNode(de),this.removeNode(de.next),de=oe=pe),de=de.next}while(de!==oe);return this.filterPoints(de)}static splitEarcut(oe,ie,ue,de,he,pe){let _e=oe;do{let Ce=_e.next.next;for(;Ce!==_e.prev;){if(_e.i!==Ce.i&&this.isValidDiagonal(_e,Ce)){let xe=this.splitPolygon(_e,Ce);_e=this.filterPoints(_e,_e.next),xe=this.filterPoints(xe,xe.next),this.earcutLinked(_e,ie,ue,de,he,pe,0),this.earcutLinked(xe,ie,ue,de,he,pe,0);return}Ce=Ce.next}_e=_e.next}while(_e!==oe)}static eliminateHoles(oe,ie,ue,de){let he=[],pe,_e,Ce,xe,Ie;for(pe=0,_e=ie.length;pe<_e;pe++)Ce=ie[pe]*de,xe=pe<_e-1?ie[pe+1]*de:oe.length,Ie=this.linkedList(oe,Ce,xe,de,!1),Ie===Ie.next&&(Ie.steiner=!0),he.push(this.getLeftmost(Ie));for(he.sort(this.compareX),pe=0;pe<he.length;pe++)ue=this.eliminateHole(he[pe],ue);return ue}static compareX(oe,ie){return oe.x-ie.x}static eliminateHole(oe,ie){let ue=this.findHoleBridge(oe,ie);if(!ue)return ie;let de=this.splitPolygon(ue,oe);return this.filterPoints(de,de.next),this.filterPoints(ue,ue.next)}static findHoleBridge(oe,ie){let ue=ie,de=oe.x,he=oe.y,pe=-1/0,_e;do{if(he<=ue.y&&he>=ue.next.y&&ue.next.y!==ue.y){let Oe=ue.x+(he-ue.y)*(ue.next.x-ue.x)/(ue.next.y-ue.y);if(Oe<=de&&Oe>pe&&(pe=Oe,_e=ue.x<ue.next.x?ue:ue.next,Oe===de))return _e}ue=ue.next}while(ue!==ie);if(!_e)return null;let Ce=_e,xe=_e.x,Ie=_e.y,$e=1/0,Ne;ue=_e;do de>=ue.x&&ue.x>=xe&&de!==ue.x&&this.pointInTriangle(he<Ie?de:pe,he,xe,Ie,he<Ie?pe:de,he,ue.x,ue.y)&&(Ne=Math.abs(he-ue.y)/(de-ue.x),this.locallyInside(ue,oe)&&(Ne<$e||Ne===$e&&(ue.x>_e.x||ue.x===_e.x&&this.sectorContainsSector(_e,ue)))&&(_e=ue,$e=Ne)),ue=ue.next;while(ue!==Ce);return _e}static sectorContainsSector(oe,ie){return this.area(oe.prev,oe,ie.prev)<0&&this.area(ie.next,oe,oe.next)<0}static indexCurve(oe,ie,ue,de){let he=oe;do he.z===0&&(he.z=this.zOrder(he.x,he.y,ie,ue,de)),he.prevZ=he.prev,he.nextZ=he.next,he=he.next;while(he!==oe);he.prevZ.nextZ=null,he.prevZ=null,this.sortLinked(he)}static sortLinked(oe){let ie,ue,de,he,pe,_e,Ce,xe,Ie=1;do{for(ue=oe,oe=null,pe=null,_e=0;ue;){for(_e++,de=ue,Ce=0,ie=0;ie<Ie&&(Ce++,de=de.nextZ,!!de);ie++);for(xe=Ie;Ce>0||xe>0&&de;)Ce!==0&&(xe===0||!de||ue.z<=de.z)?(he=ue,ue=ue.nextZ,Ce--):(he=de,de=de.nextZ,xe--),pe?pe.nextZ=he:oe=he,he.prevZ=pe,pe=he;ue=de}pe.nextZ=null,Ie*=2}while(_e>1);return oe}static zOrder(oe,ie,ue,de,he){return oe=(oe-ue)*he|0,ie=(ie-de)*he|0,oe=(oe|oe<<8)&16711935,oe=(oe|oe<<4)&252645135,oe=(oe|oe<<2)&858993459,oe=(oe|oe<<1)&1431655765,ie=(ie|ie<<8)&16711935,ie=(ie|ie<<4)&252645135,ie=(ie|ie<<2)&858993459,ie=(ie|ie<<1)&1431655765,oe|ie<<1}static getLeftmost(oe){let ie=oe,ue=oe;do(ie.x<ue.x||ie.x===ue.x&&ie.y<ue.y)&&(ue=ie),ie=ie.next;while(ie!==oe);return ue}static pointInTriangle(oe,ie,ue,de,he,pe,_e,Ce){return(he-_e)*(ie-Ce)>=(oe-_e)*(pe-Ce)&&(oe-_e)*(de-Ce)>=(ue-_e)*(ie-Ce)&&(ue-_e)*(pe-Ce)>=(he-_e)*(de-Ce)}static isValidDiagonal(oe,ie){return oe.next.i!==ie.i&&oe.prev.i!==ie.i&&!this.intersectsPolygon(oe,ie)&&(this.locallyInside(oe,ie)&&this.locallyInside(ie,oe)&&this.middleInside(oe,ie)&&(this.area(oe.prev,oe,ie.prev)||this.area(oe,ie.prev,ie))||this.equals(oe,ie)&&this.area(oe.prev,oe,oe.next)>0&&this.area(ie.prev,ie,ie.next)>0)}static area(oe,ie,ue){return(ie.y-oe.y)*(ue.x-ie.x)-(ie.x-oe.x)*(ue.y-ie.y)}static equals(oe,ie){return oe.x===ie.x&&oe.y===ie.y}static intersects(oe,ie,ue,de){let he=this.sign(this.area(oe,ie,ue)),pe=this.sign(this.area(oe,ie,de)),_e=this.sign(this.area(ue,de,oe)),Ce=this.sign(this.area(ue,de,ie));return!!(he!==pe&&_e!==Ce||he===0&&this.onSegment(oe,ue,ie)||pe===0&&this.onSegment(oe,de,ie)||_e===0&&this.onSegment(ue,oe,de)||Ce===0&&this.onSegment(ue,ie,de))}static onSegment(oe,ie,ue){return ie.x<=Math.max(oe.x,ue.x)&&ie.x>=Math.min(oe.x,ue.x)&&ie.y<=Math.max(oe.y,ue.y)&&ie.y>=Math.min(oe.y,ue.y)}static sign(oe){return oe>0?1:oe<0?-1:0}static intersectsPolygon(oe,ie){let ue=oe;do{if(ue.i!==oe.i&&ue.next.i!==oe.i&&ue.i!==ie.i&&ue.next.i!==ie.i&&this.intersects(ue,ue.next,oe,ie))return!0;ue=ue.next}while(ue!==oe);return!1}static locallyInside(oe,ie){return this.area(oe.prev,oe,oe.next)<0?this.area(oe,ie,oe.next)>=0&&this.area(oe,oe.prev,ie)>=0:this.area(oe,ie,oe.prev)<0||this.area(oe,oe.next,ie)<0}static middleInside(oe,ie){let ue=oe,de=!1,he=(oe.x+ie.x)/2,pe=(oe.y+ie.y)/2;do ue.y>pe!=ue.next.y>pe&&ue.next.y!==ue.y&&he<(ue.next.x-ue.x)*(pe-ue.y)/(ue.next.y-ue.y)+ue.x&&(de=!de),ue=ue.next;while(ue!==oe);return de}static splitPolygon(oe,ie){let ue=new Node$2(oe.i,oe.x,oe.y),de=new Node$2(ie.i,ie.x,ie.y),he=oe.next,pe=ie.prev;return oe.next=ie,ie.prev=oe,ue.next=he,he.prev=ue,de.next=ue,ue.prev=de,pe.next=de,de.prev=pe,de}static insertNode(oe,ie,ue,de){let he=new Node$2(oe,ie,ue);return de?(he.next=de.next,he.prev=de,de.next.prev=he,de.next=he):(he.prev=he,he.next=he),he}static removeNode(oe){oe.next.prev=oe.prev,oe.prev.next=oe.next,oe.prevZ&&(oe.prevZ.nextZ=oe.nextZ),oe.nextZ&&(oe.nextZ.prevZ=oe.prevZ)}static signedArea(oe,ie,ue,de){let he=0;for(let pe=ie,_e=ue-de;pe<ue;pe+=de)he+=(oe[_e]-oe[pe])*(oe[pe+1]+oe[_e+1]),_e=pe;return he}}const lr=class bo extends EventEmitter{constructor(oe,ie){super(),ve(this,"Id"),ve(this,"type"),ve(this,"name"),ve(this,"_key"),ve(this,"_meshDatas"),ve(this,"_visible"),ve(this,"_color",null),ve(this,"document"),ve(this,"_attributes"),ve(this,"userData"),ve(this,"_boundingBox"),ve(this,"_matrix"),ve(this,"_position"),ve(this,"_euler"),ve(this,"_quaternion"),ve(this,"_scale"),ve(this,"_center"),ve(this,"_tempMatrix4"),ve(this,"_parent"),this.Id=bo.id++,this.name="",this.type=ie,this._meshDatas=[],this.visible=!0,this.document=oe,this._attributes=new Map,this.document.addElement(this),this._matrix=new Matrix4$1,this._tempMatrix4=new Matrix4$1,this._position=new Vector3$1(0,0,0),this._euler=new Euler(0,0,0),this._quaternion=new Quaternion$1(0,0,0,1),this._scale=new Vector3$1(1,1,1),this.userData={}}set key(oe){const ie=this.document._mapKeyElement;ie.has(oe)&&ie.delete(oe),this._key=oe,ie.set(oe,this)}get key(){return this._key}get meshDatas(){return this._meshDatas}set visible(oe){var ie;if(this._visible!=oe&&(this._visible=oe,this._meshDatas)){for(const ue of this._meshDatas)ue.visible=oe;(ie=this.document)==null||ie.app.enableRender()}}get visible(){return this._visible}set color(oe){var ie;if(this._color=oe,this._meshDatas){for(const ue of this._meshDatas)ue.color=oe;(ie=this.document)==null||ie.app.enableRender()}}get color(){return this._color}addAttribute(oe,ie){if(this._attributes.get(oe)!=ie){if(ie==null){this._attributes.delete(oe);return}this._attributes.set(oe,ie)}}deleteAttribute(oe){this._attributes.delete(oe)}getAttribute(oe){return this._attributes.get(oe)}getAllAttributes(){return this._attributes==null?new Map:new Map(this._attributes)}addMeshData(oe){this._meshDatas.push(oe)}set boundingBox(oe){this._boundingBox=oe}get boundingBox(){if(this._boundingBox==null&&this._meshDatas){this._boundingBox=new Box3;for(const oe of this._meshDatas)this._boundingBox.union(oe.boundingBox)}return this._boundingBox}get center(){return this._center==null&&(this._center=new Vector3$1,this.boundingBox.getCenter(this._center)),this._center}set matrix(oe){if(this._matrix.copy(oe),this._meshDatas)for(const ie of this._meshDatas)ie.matrix=oe}get matrix(){return this._matrix}get position(){return this._position}multiplyPosition(oe){this._position.add(oe),this._tempMatrix4.identity(),this._tempMatrix4.makeTranslation(oe.x,oe.y,oe.z),this.matrix.premultiply(this._tempMatrix4),this.center.x+=oe.x,this.center.y+=oe.y,this.center.z+=oe.z,this.updateMatrix()}get euler(){return this._euler}get quaternion(){return this._quaternion}multiplyQuaternion(oe){this._quaternion.premultiply(oe);let ie=this.center;this._euler.setFromQuaternion(this._quaternion),this._tempMatrix4.identity(),this._tempMatrix4.makeTranslation(-ie.x,-ie.y,-ie.z),this.matrix.premultiply(this._tempMatrix4),this._tempMatrix4.identity(),this._tempMatrix4.makeRotationFromQuaternion(oe),this.matrix.premultiply(this._tempMatrix4),this._tempMatrix4.identity(),this._tempMatrix4.makeTranslation(ie.x,ie.y,ie.z),this.matrix.premultiply(this._tempMatrix4),this.updateMatrix()}get scale(){return this._scale}setScale(oe,ie,ue){let de=this.scale.clone();de.x=oe/de.x,de.y=ie/de.y,de.z=ue/de.z,this.multiplyScale(de)}multiplyScale(oe){this._scale.multiply(oe);let ie=this.center;this._tempMatrix4.identity(),this._tempMatrix4.makeTranslation(-ie.x,-ie.y,-ie.z),this.matrix.premultiply(this._tempMatrix4),this._tempMatrix4.identity(),this._tempMatrix4.makeScale(oe.x,oe.y,oe.z),this.matrix.premultiply(this._tempMatrix4),this._tempMatrix4.identity(),this._tempMatrix4.makeTranslation(ie.x,ie.y,ie.z),this.matrix.premultiply(this._tempMatrix4),this.updateMatrix()}updateMatrix(){var oe;for(const ie of this._meshDatas)ie.matrix=this._matrix;if(this._boundingBox==null&&(this._boundingBox=new Box3),this._meshDatas){this._boundingBox.makeEmpty();for(const ie of this._meshDatas)this._boundingBox.union(ie.boundingBox)}(oe=this.document)==null||oe.app.enableRender()}computeBoundingSphere(){if(this._meshDatas)for(const oe of this._meshDatas)oe.computeBoundingSphere()}get parent(){return this._parent}set parent(oe){this._parent=oe}dispose(){var oe,ie;if(this.emit("dispose"),super.dispose(),this._meshDatas){for(const ue of this._meshDatas)ue.dispose();this._meshDatas=null}this._attributes=null,(ie=(oe=this.document)==null?void 0:oe.app)==null||ie.enableRender()}};ve(lr,"id",1);let BaseElement=lr;class Room extends BaseElement{constructor(oe){super(oe,BaseElementType.ROOM),ve(this,"_anchorPoint"),ve(this,"_polygon")}get anchorPoint(){return this._anchorPoint}set anchorPoint(oe){this._anchorPoint=oe}get polygon(){return this._polygon}set polygon(oe){this._polygon=oe}dispose(){super.dispose(),this._polygon=null,this._anchorPoint=null}}class Layer extends BaseElement{constructor(oe){super(oe,BaseElementType.LAYER),ve(this,"layerObject")}dispose(){super.dispose()}}let TextElement$1=class extends BaseElement{constructor(oe){super(oe,BaseElementType.TEXT),ve(this,"_layer"),ve(this,"_text")}get layer(){return this._layer}set layer(oe){this._layer=oe}get text(){return this._text}set text(oe){this._text=oe}dispose(){super.dispose(),this._layer=null}};class ShaderData{static pickShader(oe){oe.onBeforeCompile=function(ie){ie.uniforms={USE_ElementID:{value:1},...UniformsUtils.clone(ie.uniforms)},oe.USE_ElementID=de=>{ie.uniforms.USE_ElementID.value=de};let ue=ie.vertexShader.replace(/#include <fog_vertex>/,`
                #include <fog_vertex>

                #ifdef USE_ElementID
                    float r = float((elementID >> 16) & 0xFF) / 255.0;
                    float g = float((elementID >> 8) & 0xFF) / 255.0;
                    float b = float((elementID >> 0) & 0xFF) / 255.0;
                    vpickColor=vec3(r,g,b);
                #else
                    vpickColor=vec3(1.0,1.0,1.0);
                #endif
                `);ie.vertexShader=`
                #define USE_ElementID
                attribute int elementID;
                varying  vec3 vpickColor;
                `+ue,ie.fragmentShader=`
                 varying vec3 vpickColor;
                `+ie.fragmentShader.replace(/#include <dithering_fragment>/,`
                    #include <dithering_fragment>
                    gl_FragColor =vec4(vpickColor, gl_FragCoord.z);
                    `)}}static depethShader(oe){oe.onBeforeCompile=function(ie){ie.uniforms={far:{value:1e4},...UniformsUtils.clone(ie.uniforms)},oe.setFar=de=>{ie.uniforms.far.value=de};let ue=ie.vertexShader.replace(/#include <fog_vertex>/,`
                #include <fog_vertex>
                //gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
                depth = gl_Position.z/far;
                `);ie.vertexShader=`
                precision highp float;
                uniform float far;
                varying float depth;
                `+ue,ie.fragmentShader=`
                precision highp float;
                varying float depth;
                `+ie.fragmentShader.replace(/#include <dithering_fragment>/,`
                    #include <dithering_fragment>
                    float hex = abs(depth) * 16777215.0; // 0xffffff
                    float r = floor(hex / 65535.0);
                    float g = floor((hex - r * 65535.0) / 255.0);
                    float b = floor(hex - r * 65535.0 - g * 255.0);
                    float a = sign(depth) >= 0.0 ? 1.0 : 0.0; 
                    gl_FragColor = vec4(r / 255.0, g / 255.0, b / 255.0, a);
                    `)}}}class MaterialData{static get lineMaterial(){return this._lineMaterial==null&&(this._lineMaterial=new LineBasicMaterial({color:16777215,linewidth:1,vertexColors:!0})),this._lineMaterial}static get normalMaterial(){return this._normalMaterial==null&&(this._normalMaterial=new MeshStandardMaterial,this._normalMaterial.name="batchColorMaterial"),this._normalMaterial}static get baseMaterial(){return this._baseMaterial==null&&(this._baseMaterial=new MeshBasicMaterial({color:16777215,vertexColors:!0,wireframe:!1})),this._baseMaterial}static get pickMaterial(){return this._pickMaterial==null&&(this._pickMaterial=new MeshBasicMaterial,ShaderData.pickShader(this._pickMaterial)),this._pickMaterial}static get depthMaterial(){return this._depthMaterial==null&&(this._depthMaterial=new MeshBasicMaterial,ShaderData.depethShader(this._depthMaterial)),this._depthMaterial}static get depthMaterial2(){return this._depthMaterial2==null&&(this._depthMaterial2=new MeshDepthMaterial({depthPacking:RGBADepthPacking})),this._depthMaterial2}static get zeroMatrix4(){return this._zeroMatrix4==null&&(this._zeroMatrix4=new Matrix4$1,this._zeroMatrix4.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),this._zeroMatrix4}static get normalColor(){return this._normalColor==null&&(this._normalColor=new Color$2(1,1,1)),this._normalColor}static get selColor(){return this._selColor==null&&(this._selColor="#FFC0CB"),this._selColor}}ve(MaterialData,"_lineMaterial",null),ve(MaterialData,"_normalMaterial"),ve(MaterialData,"_baseMaterial"),ve(MaterialData,"_pickMaterial"),ve(MaterialData,"_depthMaterial"),ve(MaterialData,"_depthMaterial2"),ve(MaterialData,"_zeroMatrix4"),ve(MaterialData,"_normalColor"),ve(MaterialData,"_selColor");var MeshRenderType=(le=>(le[le.POINTS=0]="POINTS",le[le.LINES=1]="LINES",le[le.LINE_STRIP=3]="LINE_STRIP",le[le.TRIANGLES=4]="TRIANGLES",le[le.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",le))(MeshRenderType||{});class BatchCollect{constructor(oe){ve(this,"vertices",[]),ve(this,"colors",[]),ve(this,"indices",[]),ve(this,"ids",[]),ve(this,"maxIndex",0),ve(this,"layer"),ve(this,"_mesh");let ie=new BufferGeometry;switch(oe){case 1:case 3:this._mesh=new LineSegments(ie,MaterialData.lineMaterial);break;case 4:case 5:this._mesh=new Mesh(ie,MaterialData.baseMaterial);break}}get mesh(){return this._mesh}}class BatchData{constructor(oe,ie,ue=!1){ve(this,"meshIsWhole"),ve(this,"_matrix"),ve(this,"batchID"),ve(this,"startEndIndex"),ve(this,"mesh"),ve(this,"_tempPoint"),ve(this,"_visible",!0),ve(this,"_color",null),ve(this,"_boundingBox"),ve(this,"_traverseIndex",de=>{if(this.startEndIndex.length==0){this.startEndIndex=[];let he=this.mesh.geometry.attributes.elementID,pe=this.mesh.geometry.index,_e=-1,Ce=-1;for(let xe=0;xe<pe.count;xe++){const Ie=pe.getX(xe);he.getX(Ie)==this.batchID?_e=xe:_e!=-1&&(Ce=xe-1,_e=-1,this.startEndIndex.push({start:_e,end:Ce}))}}for(const he of this.startEndIndex)for(let pe=he.start;pe<=he.end;pe++){const _e=this.mesh.geometry.index.getX(pe);de(_e)}}),this.mesh=oe,this.batchID=ie,this.startEndIndex=[],this._matrix=new Matrix4$1,this._tempPoint=new Vector3$1,this._matrix.identity(),this.meshIsWhole=ue}set matrix(oe){this._matrix.copy(oe),this.setOrignPositions();let ie=this.mesh.geometry.attributes.position,ue=this.mesh.geometry.attributes.orignPositions;this._traverseIndex(de=>{this._tempPoint.set(ue.getX(de),ue.getY(de),ue.getZ(de)),this._tempPoint.applyMatrix4(oe),ie.setX(de,this._tempPoint.x),ie.setY(de,this._tempPoint.y),ie.setZ(de,this._tempPoint.z)}),ie.needsUpdate=!0,this._boundingBox=null}get matrix(){return this._matrix}computeBoundingSphere(){this.mesh.geometry.computeBoundingSphere(),this._boundingBox=null}setOrignPositions(){let oe=this.mesh.geometry.attributes.position;this.mesh.geometry.attributes.orignPositions==null&&this.mesh.geometry.setAttribute("orignPositions",oe.clone())}set visible(oe){if(this._visible=oe,this.meshIsWhole){this.mesh.visible=oe;return}let ie=this.mesh.geometry.attributes.position;this.setOrignPositions();let ue=this.mesh.geometry.attributes.orignPositions;oe?this._traverseIndex(de=>{this._tempPoint.set(ue.getX(de),ue.getY(de),ue.getZ(de)),this._tempPoint.applyMatrix4(this._matrix),ie.setX(de,this._tempPoint.x),ie.setY(de,this._tempPoint.y),ie.setZ(de,this._tempPoint.z)}):this._traverseIndex(de=>{ie.setX(de,0),ie.setY(de,0),ie.setZ(de,0)}),ie.needsUpdate=!0}get visible(){return this._visible}set color(oe){if(this.meshIsWhole)return;const ie=this.mesh.geometry.attributes.color;this.setOrignColors();const ue=this.mesh.geometry.attributes.orignColors;if(oe&&oe.length>=7){const de=oe.substring(0,7);let he=oe.length===9?parseInt(oe.substring(7),16)/255:1;he<1&&this.mesh.material.transparent==!1&&(this.mesh.material.orign_transparent=this.mesh.material.transparent,this.mesh.material.orign_side=this.mesh.material.side,this.mesh.material.transparent=!0,this.mesh.material.side=DoubleSide,this.mesh.material.opacity=1,this.mesh.material.needsUpdate=!0);const pe=parseInt(de.slice(1,3),16)/255,_e=parseInt(de.slice(3,5),16)/255,Ce=parseInt(de.slice(5,7),16)/255;this._traverseIndex(xe=>{ie.itemSize===3||he==1?ie.setXYZ(xe,pe,_e,Ce):ie.setXYZW(xe,pe,_e,Ce,he)}),ie.needsUpdate=!0}else{this.mesh.material.orign_transparent!=null&&(this.mesh.material.transparent=this.mesh.material.orign_transparent,this.mesh.material.side=this.mesh.material.orign_side,delete this.mesh.material.orign_transparent,delete this.mesh.material.orign_side,this.mesh.material.needsUpdate=!0),this._traverseIndex(de=>{ie.itemSize==4?ie.setXYZW(de,ue.getX(de),ue.getY(de),ue.getZ(de),ue.getW(de)):ie.setXYZ(de,ue.getX(de),ue.getY(de),ue.getZ(de))}),ie.needsUpdate=!0;return}}setOrignColors(){let oe=this.mesh.geometry.attributes.color;this.mesh.geometry.attributes.orignColors==null&&this.mesh.geometry.setAttribute("orignColors",oe.clone())}get color(){return this._color}set boundingBox(oe){this._boundingBox=oe}get boundingBox(){if(!this.meshIsWhole){if(this._boundingBox==null){this.setOrignPositions();let oe=Number.MAX_VALUE,ie=Number.MAX_VALUE,ue=Number.MAX_VALUE,de=-Number.MAX_VALUE,he=-Number.MAX_VALUE,pe=-Number.MAX_VALUE,_e=this.mesh.geometry.attributes.orignPositions;this._traverseIndex(Ne=>{this._tempPoint.set(_e.getX(Ne),_e.getY(Ne),_e.getZ(Ne)),this._tempPoint.applyMatrix4(this._matrix),oe=Math.min(oe,this._tempPoint.x),ie=Math.min(ie,this._tempPoint.y),ue=Math.min(ue,this._tempPoint.z),de=Math.max(de,this._tempPoint.x),he=Math.max(he,this._tempPoint.y),pe=Math.max(pe,this._tempPoint.z)});let Ce=new Vector3$1(oe,ie,ue),xe=new Vector3$1(de,he,pe);this._boundingBox=new Box3(Ce,xe);let Ie=this.mesh.matrix.clone(),$e=Ne=>{Ne.parent&&(Ie=Ie.premultiply(Ne.parent.matrix),$e(Ne.parent))};$e(this.mesh),this._boundingBox.applyMatrix4(Ie)}return this._boundingBox}}dispose(){this._boundingBox=null,this._matrix=null,this._matrix=null,this.batchID=null,this.startEndIndex=null,this._color=null}}class CurveUtils{static offsetLine(oe,ie,ue){const de=ie.x-oe.x,he=ie.y-oe.y,pe=Math.sqrt(de*de+he*he);if(pe==0)return null;const _e=de/pe,Ce=he/pe,xe={x:oe.x-Ce*ue,y:oe.y+_e*ue},Ie={x:ie.x-Ce*ue,y:ie.y+_e*ue};return{start:xe,end:Ie}}static offsetVertices(oe,ie,ue){if(oe.length<2)return[];let de={start:oe[0],end:oe[1]},he=this.offsetLine(de.start,de.end,ie),pe=he,_e=[];_e.push(pe.start);for(let Ce=1;Ce<oe.length-1;Ce++){const xe=oe[Ce],Ie=oe[Ce+1];let $e={start:xe,end:Ie};const Ne=this.offsetLine($e.start,$e.end,ie);if(Ne==null)continue;let Oe=this.line2IntersectLine2(pe.start,pe.end,Ne.start,Ne.end);Oe==null&&(Oe=Ne.start),_e.push(Oe),pe=Ne}if(_e.push(pe.end),ue&&oe.length>2){const Ce=this.offsetLine(oe[oe.length-1],oe[0],ie);if(Ce!=null){let xe=this.line2IntersectLine2(pe.start,pe.end,Ce.start,Ce.end);xe==null&&(xe=Ce.start),_e[_e.length-1]=xe;let Ie=this.line2IntersectLine2(Ce.start,Ce.end,he.start,he.end);Ie==null&&(Ie=Ce.end),_e[0]=Ie}}return _e}static isPolyClockwise(oe){const ie=oe.length;let ue=0;for(let de=0;de<ie;de++){const he=oe[de],pe=oe[(de+1)%ie],_e=he.x*pe.y-pe.x*he.y;ue+=_e}return ue<0}static line2IntersectLine2(oe,ie,ue,de){let he=oe.y-ie.y,pe=ie.x-oe.x,_e=oe.x*ie.y-ie.x*oe.y,Ce=ue.y-de.y,xe=de.x-ue.x,Ie=ue.x*de.y-de.x*ue.y,$e=Ce*pe-he*xe,Ne=he*xe-Ce*pe;return Math.abs($e)<1e-5||Math.abs(Ne)<1e-5?null:{x:(_e*xe-Ie*pe)/$e,y:(Ce*_e-he*Ie)/Ne}}}function findSpan(le,oe,ie){const ue=ie.length-le-1;if(oe>=ie[ue])return ue-1;if(oe<=ie[le])return le;let de=le,he=ue,pe=Math.floor((de+he)/2);for(;oe<ie[pe]||oe>=ie[pe+1];)oe<ie[pe]?he=pe:de=pe,pe=Math.floor((de+he)/2);return pe}function calcBasisFunctions(le,oe,ie,ue){const de=[],he=[],pe=[];de[0]=1;for(let _e=1;_e<=ie;++_e){he[_e]=oe-ue[le+1-_e],pe[_e]=ue[le+_e]-oe;let Ce=0;for(let xe=0;xe<_e;++xe){const Ie=pe[xe+1],$e=he[_e-xe],Ne=de[xe]/(Ie+$e);de[xe]=Ce+Ie*Ne,Ce=$e*Ne}de[_e]=Ce}return de}function calcBSplinePoint(le,oe,ie,ue){const de=findSpan(le,ue,oe),he=calcBasisFunctions(de,ue,le,oe),pe=new Vector4(0,0,0,0);for(let _e=0;_e<=le;++_e){const Ce=ie[de-le+_e],xe=he[_e],Ie=Ce.w*xe;pe.x+=Ce.x*Ie,pe.y+=Ce.y*Ie,pe.z+=Ce.z*Ie,pe.w+=Ce.w*xe}return pe}function calcBasisFunctionDerivatives(le,oe,ie,ue,de){const he=[];for(let $e=0;$e<=ie;++$e)he[$e]=0;const pe=[];for(let $e=0;$e<=ue;++$e)pe[$e]=he.slice(0);const _e=[];for(let $e=0;$e<=ie;++$e)_e[$e]=he.slice(0);_e[0][0]=1;const Ce=he.slice(0),xe=he.slice(0);for(let $e=1;$e<=ie;++$e){Ce[$e]=oe-de[le+1-$e],xe[$e]=de[le+$e]-oe;let Ne=0;for(let Oe=0;Oe<$e;++Oe){const Fe=xe[Oe+1],Ve=Ce[$e-Oe];_e[$e][Oe]=Fe+Ve;const ze=_e[Oe][$e-1]/_e[$e][Oe];_e[Oe][$e]=Ne+Fe*ze,Ne=Ve*ze}_e[$e][$e]=Ne}for(let $e=0;$e<=ie;++$e)pe[0][$e]=_e[$e][ie];for(let $e=0;$e<=ie;++$e){let Ne=0,Oe=1;const Fe=[];for(let Ve=0;Ve<=ie;++Ve)Fe[Ve]=he.slice(0);Fe[0][0]=1;for(let Ve=1;Ve<=ue;++Ve){let ze=0;const Ue=$e-Ve,Pt=ie-Ve;$e>=Ve&&(Fe[Oe][0]=Fe[Ne][0]/_e[Pt+1][Ue],ze=Fe[Oe][0]*_e[Ue][Pt]);const qe=Ue>=-1?1:-Ue,Et=$e-1<=Pt?Ve-1:ie-$e;for(let At=qe;At<=Et;++At)Fe[Oe][At]=(Fe[Ne][At]-Fe[Ne][At-1])/_e[Pt+1][Ue+At],ze+=Fe[Oe][At]*_e[Ue+At][Pt];$e<=Pt&&(Fe[Oe][Ve]=-Fe[Ne][Ve-1]/_e[Pt+1][$e],ze+=Fe[Oe][Ve]*_e[$e][Pt]),pe[Ve][$e]=ze;const kt=Ne;Ne=Oe,Oe=kt}}let Ie=ie;for(let $e=1;$e<=ue;++$e){for(let Ne=0;Ne<=ie;++Ne)pe[$e][Ne]*=Ie;Ie*=ie-$e}return pe}function calcBSplineDerivatives(le,oe,ie,ue,de){const he=de<le?de:le,pe=[],_e=findSpan(le,ue,oe),Ce=calcBasisFunctionDerivatives(_e,ue,le,he,oe),xe=[];for(let Ie=0;Ie<ie.length;++Ie){const $e=ie[Ie].clone(),Ne=$e.w;$e.x*=Ne,$e.y*=Ne,$e.z*=Ne,xe[Ie]=$e}for(let Ie=0;Ie<=he;++Ie){const $e=xe[_e-le].clone().multiplyScalar(Ce[Ie][0]);for(let Ne=1;Ne<=le;++Ne)$e.add(xe[_e-le+Ne].clone().multiplyScalar(Ce[Ie][Ne]));pe[Ie]=$e}for(let Ie=he+1;Ie<=de+1;++Ie)pe[Ie]=new Vector4(0,0,0);return pe}function calcKoverI(le,oe){let ie=1;for(let de=2;de<=le;++de)ie*=de;let ue=1;for(let de=2;de<=oe;++de)ue*=de;for(let de=2;de<=le-oe;++de)ue*=de;return ie/ue}function calcRationalCurveDerivatives(le){const oe=le.length,ie=[],ue=[];for(let he=0;he<oe;++he){const pe=le[he];ie[he]=new Vector3$1(pe.x,pe.y,pe.z),ue[he]=pe.w}const de=[];for(let he=0;he<oe;++he){const pe=ie[he].clone();for(let _e=1;_e<=he;++_e)pe.sub(de[he-_e].clone().multiplyScalar(calcKoverI(he,_e)*ue[_e]));de[he]=pe.divideScalar(ue[0])}return de}function calcNURBSDerivatives(le,oe,ie,ue,de){const he=calcBSplineDerivatives(le,oe,ie,ue,de);return calcRationalCurveDerivatives(he)}class NURBSCurve extends Curve$1{constructor(oe,ie,ue,de,he){super();const pe=ie?ie.length-1:0,_e=ue?ue.length:0;this.degree=oe,this.knots=ie,this.controlPoints=[],this.startKnot=de||0,this.endKnot=he||pe;for(let Ce=0;Ce<_e;++Ce){const xe=ue[Ce];this.controlPoints[Ce]=new Vector4(xe.x,xe.y,xe.z,xe.w)}}getPoint(oe,ie=new Vector3$1){const ue=ie,de=this.knots[this.startKnot]+oe*(this.knots[this.endKnot]-this.knots[this.startKnot]),he=calcBSplinePoint(this.degree,this.knots,this.controlPoints,de);return he.w!==1&&he.divideScalar(he.w),ue.set(he.x,he.y,he.z)}getTangent(oe,ie=new Vector3$1){const ue=ie,de=this.knots[0]+oe*(this.knots[this.knots.length-1]-this.knots[0]),he=calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,de,1);return ue.copy(he[1]).normalize(),ue}toJSON(){const oe=super.toJSON();return oe.degree=this.degree,oe.knots=[...this.knots],oe.controlPoints=this.controlPoints.map(ie=>ie.toArray()),oe.startKnot=this.startKnot,oe.endKnot=this.endKnot,oe}fromJSON(oe){return super.fromJSON(oe),this.degree=oe.degree,this.knots=[...oe.knots],this.controlPoints=oe.controlPoints.map(ie=>new Vector4(ie[0],ie[1],ie[2],ie[3])),this.startKnot=oe.startKnot,this.endKnot=oe.endKnot,this}}new OrthographicCamera(-1,1,1,-1,0,1);class FullscreenTriangleGeometry extends BufferGeometry{constructor(){super(),this.setAttribute("position",new Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Float32BufferAttribute([0,2,0,0,2,0],2))}}new FullscreenTriangleGeometry;class RoomEnvironment extends Scene{constructor(){super();const oe=new BoxGeometry;oe.deleteAttribute("uv");const ie=new MeshStandardMaterial({side:BackSide}),ue=new MeshStandardMaterial,de=new PointLight(16777215,900,28,2);de.position.set(.418,16.199,.3),this.add(de);const he=new Mesh(oe,ie);he.position.set(-.757,13.219,.717),he.scale.set(31.713,28.305,28.591),this.add(he);const pe=new Mesh(oe,ue);pe.position.set(-10.906,2.009,1.846),pe.rotation.set(0,-.195,0),pe.scale.set(2.328,7.905,4.651),this.add(pe);const _e=new Mesh(oe,ue);_e.position.set(-5.607,-.754,-.758),_e.rotation.set(0,.994,0),_e.scale.set(1.97,1.534,3.955),this.add(_e);const Ce=new Mesh(oe,ue);Ce.position.set(6.167,.857,7.803),Ce.rotation.set(0,.561,0),Ce.scale.set(3.927,6.285,3.687),this.add(Ce);const xe=new Mesh(oe,ue);xe.position.set(-2.017,.018,6.124),xe.rotation.set(0,.333,0),xe.scale.set(2.002,4.566,2.064),this.add(xe);const Ie=new Mesh(oe,ue);Ie.position.set(2.291,-.756,-2.621),Ie.rotation.set(0,-.286,0),Ie.scale.set(1.546,1.552,1.496),this.add(Ie);const $e=new Mesh(oe,ue);$e.position.set(-2.193,-.369,-5.547),$e.rotation.set(0,.516,0),$e.scale.set(3.875,3.487,2.986),this.add($e);const Ne=new Mesh(oe,createAreaLightMaterial(50));Ne.position.set(-16.116,14.37,8.208),Ne.scale.set(.1,2.428,2.739),this.add(Ne);const Oe=new Mesh(oe,createAreaLightMaterial(50));Oe.position.set(-16.109,18.021,-8.207),Oe.scale.set(.1,2.425,2.751),this.add(Oe);const Fe=new Mesh(oe,createAreaLightMaterial(17));Fe.position.set(14.904,12.198,-1.832),Fe.scale.set(.15,4.265,6.331),this.add(Fe);const Ve=new Mesh(oe,createAreaLightMaterial(43));Ve.position.set(-.462,8.89,14.52),Ve.scale.set(4.38,5.441,.088),this.add(Ve);const ze=new Mesh(oe,createAreaLightMaterial(20));ze.position.set(3.235,11.486,-12.541),ze.scale.set(2.5,2,.1),this.add(ze);const Ue=new Mesh(oe,createAreaLightMaterial(100));Ue.position.set(0,20,0),Ue.scale.set(1,.1,1),this.add(Ue)}dispose(){const oe=new Set;this.traverse(ie=>{ie.isMesh&&(oe.add(ie.geometry),oe.add(ie.material))});for(const ie of oe)ie.dispose()}}function createAreaLightMaterial(le){const oe=new MeshBasicMaterial;return oe.color.setScalar(le),oe}/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.8.2
*/var u8=Uint8Array,u16=Uint16Array,i32=Int32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(le,oe){for(var ie=new u16(31),ue=0;ue<31;++ue)ie[ue]=oe+=1<<le[ue-1];for(var de=new i32(ie[30]),ue=1;ue<30;++ue)for(var he=ie[ue];he<ie[ue+1];++he)de[he]=he-ie[ue]<<5|ue;return{b:ie,r:de}},_a$1=freb(fleb,2),fl=_a$1.b,revfl=_a$1.r;fl[28]=258,revfl[258]=28;var _b$1=freb(fdeb,0),fd=_b$1.b,rev=new u16(32768);for(var i$2=0;i$2<32768;++i$2){var x=(i$2&43690)>>1|(i$2&21845)<<1;x=(x&52428)>>2|(x&13107)<<2,x=(x&61680)>>4|(x&3855)<<4,rev[i$2]=((x&65280)>>8|(x&255)<<8)>>1}var hMap=function(le,oe,ie){for(var ue=le.length,de=0,he=new u16(oe);de<ue;++de)le[de]&&++he[le[de]-1];var pe=new u16(oe);for(de=1;de<oe;++de)pe[de]=pe[de-1]+he[de-1]<<1;var _e;{_e=new u16(1<<oe);var Ce=15-oe;for(de=0;de<ue;++de)if(le[de])for(var xe=de<<4|le[de],Ie=oe-le[de],$e=pe[le[de]-1]++<<Ie,Ne=$e|(1<<Ie)-1;$e<=Ne;++$e)_e[rev[$e]>>Ce]=xe}return _e},flt=new u8(288);for(var i$2=0;i$2<144;++i$2)flt[i$2]=8;for(var i$2=144;i$2<256;++i$2)flt[i$2]=9;for(var i$2=256;i$2<280;++i$2)flt[i$2]=7;for(var i$2=280;i$2<288;++i$2)flt[i$2]=8;var fdt=new u8(32);for(var i$2=0;i$2<32;++i$2)fdt[i$2]=5;var flrm=hMap(flt,9),fdrm=hMap(fdt,5),max$2=function(le){for(var oe=le[0],ie=1;ie<le.length;++ie)le[ie]>oe&&(oe=le[ie]);return oe},bits=function(le,oe,ie){var ue=oe/8|0;return(le[ue]|le[ue+1]<<8)>>(oe&7)&ie},bits16=function(le,oe){var ie=oe/8|0;return(le[ie]|le[ie+1]<<8|le[ie+2]<<16)>>(oe&7)},shft=function(le){return(le+7)/8|0},slc=function(le,oe,ie){return(ie==null||ie>le.length)&&(ie=le.length),new u8(le.subarray(oe,ie))},ec=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err=function(le,oe,ie){var ue=new Error(oe||ec[le]);if(ue.code=le,Error.captureStackTrace&&Error.captureStackTrace(ue,err),!ie)throw ue;return ue},inflt=function(le,oe,ie,ue){var de=le.length,he=0;if(!de||oe.f&&!oe.l)return ie||new u8(0);var pe=!ie,_e=pe||oe.i!=2,Ce=oe.i;pe&&(ie=new u8(de*3));var xe=function(Zn){var Gn=ie.length;if(Zn>Gn){var Nn=new u8(Math.max(Gn*2,Zn));Nn.set(ie),ie=Nn}},Ie=oe.f||0,$e=oe.p||0,Ne=oe.b||0,Oe=oe.l,Fe=oe.d,Ve=oe.m,ze=oe.n,Ue=de*8;do{if(!Oe){Ie=bits(le,$e,1);var Pt=bits(le,$e+1,3);if($e+=3,Pt)if(Pt==1)Oe=flrm,Fe=fdrm,Ve=9,ze=5;else if(Pt==2){var qe=bits(le,$e,31)+257,Et=bits(le,$e+10,15)+4,kt=qe+bits(le,$e+5,31)+1;$e+=14;for(var At=new u8(kt),Dt=new u8(19),Lt=0;Lt<Et;++Lt)Dt[clim[Lt]]=bits(le,$e+Lt*3,7);$e+=Et*3;for(var jt=max$2(Dt),_n=(1<<jt)-1,bn=hMap(Dt,jt),Lt=0;Lt<kt;){var vn=bn[bits(le,$e,_n)];$e+=vn&15;var Tn=vn>>4;if(Tn<16)At[Lt++]=Tn;else{var $n=0,wn=0;for(Tn==16?(wn=3+bits(le,$e,3),$e+=2,$n=At[Lt-1]):Tn==17?(wn=3+bits(le,$e,7),$e+=3):Tn==18&&(wn=11+bits(le,$e,127),$e+=7);wn--;)At[Lt++]=$n}}var Cn=At.subarray(0,qe),Sn=At.subarray(qe);Ve=max$2(Cn),ze=max$2(Sn),Oe=hMap(Cn,Ve),Fe=hMap(Sn,ze)}else err(1);else{var Tn=shft($e)+4,In=le[Tn-4]|le[Tn-3]<<8,En=Tn+In;if(En>de){Ce&&err(0);break}_e&&xe(Ne+In),ie.set(le.subarray(Tn,En),Ne),oe.b=Ne+=In,oe.p=$e=En*8,oe.f=Ie;continue}if($e>Ue){Ce&&err(0);break}}_e&&xe(Ne+131072);for(var xn=(1<<Ve)-1,kn=(1<<ze)-1,On=$e;;On=$e){var $n=Oe[bits16(le,$e)&xn],Mn=$n>>4;if($e+=$n&15,$e>Ue){Ce&&err(0);break}if($n||err(2),Mn<256)ie[Ne++]=Mn;else if(Mn==256){On=$e,Oe=null;break}else{var Un=Mn-254;if(Mn>264){var Lt=Mn-257,zn=fleb[Lt];Un=bits(le,$e,(1<<zn)-1)+fl[Lt],$e+=zn}var Hn=Fe[bits16(le,$e)&kn],Rn=Hn>>4;Hn||err(3),$e+=Hn&15;var Sn=fd[Rn];if(Rn>3){var zn=fdeb[Rn];Sn+=bits16(le,$e)&(1<<zn)-1,$e+=zn}if($e>Ue){Ce&&err(0);break}_e&&xe(Ne+131072);var Jn=Ne+Un;if(Ne<Sn){var Qn=he-Sn,_r=Math.min(Sn,Jn);for(Qn+Ne<0&&err(3);Ne<_r;++Ne)ie[Ne]=ue[Qn+Ne]}for(;Ne<Jn;++Ne)ie[Ne]=ie[Ne-Sn]}}oe.l=Oe,oe.p=On,oe.b=Ne,oe.f=Ie,Oe&&(Ie=1,oe.m=Ve,oe.d=Fe,oe.n=ze)}while(!Ie);return Ne!=ie.length&&pe?slc(ie,0,Ne):ie.subarray(0,Ne)},et=new u8(0),zls=function(le,oe){return((le[0]&15)!=8||le[0]>>4>7||(le[0]<<8|le[1])%31)&&err(6,"invalid zlib data"),(le[1]>>5&1)==1&&err(6,"invalid zlib data: "+(le[1]&32?"need":"unexpected")+" dictionary"),(le[1]>>3&4)+2};function unzlibSync(le,oe){return inflt(le.subarray(zls(le),-4),{i:2},oe,oe)}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et,{stream:!0}),tds=1}catch{}function mergeAttributes(le){let oe,ie,ue,de=-1,he=0;for(let xe=0;xe<le.length;++xe){const Ie=le[xe];if(oe===void 0&&(oe=Ie.array.constructor),oe!==Ie.array.constructor||(ie===void 0&&(ie=Ie.itemSize),ie!==Ie.itemSize)||(ue===void 0&&(ue=Ie.normalized),ue!==Ie.normalized)||(de===-1&&(de=Ie.gpuType),de!==Ie.gpuType))return null;he+=Ie.count*ie}const pe=new oe(he),_e=new BufferAttribute(pe,ie,ue);let Ce=0;for(let xe=0;xe<le.length;++xe){const Ie=le[xe];if(Ie.isInterleavedBufferAttribute){const $e=Ce/ie;for(let Ne=0,Oe=Ie.count;Ne<Oe;Ne++)for(let Fe=0;Fe<ie;Fe++){const Ve=Ie.getComponent(Ne,Fe);_e.setComponent(Ne+$e,Fe,Ve)}}else pe.set(Ie.array,Ce);Ce+=Ie.count*ie}return de!==void 0&&(_e.gpuType=de),_e}function toTrianglesDrawMode(le,oe){if(oe===TrianglesDrawMode)return le;if(oe===TriangleFanDrawMode||oe===TriangleStripDrawMode){let ie=le.getIndex();if(ie===null){const pe=[],_e=le.getAttribute("position");if(_e!==void 0){for(let Ce=0;Ce<_e.count;Ce++)pe.push(Ce);le.setIndex(pe),ie=le.getIndex()}else return le}const ue=ie.count-2,de=[];if(oe===TriangleFanDrawMode)for(let pe=1;pe<=ue;pe++)de.push(ie.getX(0)),de.push(ie.getX(pe)),de.push(ie.getX(pe+1));else for(let pe=0;pe<ue;pe++)pe%2===0?(de.push(ie.getX(pe)),de.push(ie.getX(pe+1)),de.push(ie.getX(pe+2))):(de.push(ie.getX(pe+2)),de.push(ie.getX(pe+1)),de.push(ie.getX(pe)));de.length/3;const he=le.clone();return he.setIndex(de),he.clearGroups(),he}else return le}class EXRLoader extends DataTextureLoader{constructor(oe){super(oe),this.type=HalfFloatType}parse(oe){const ie=Math.pow(2.7182818,2.2);function ue(Pn,An){let Bn=0;for(let xr=0;xr<65536;++xr)(xr==0||Pn[xr>>3]&1<<(xr&7))&&(An[Bn++]=xr);const or=Bn-1;for(;Bn<65536;)An[Bn++]=0;return or}function de(Pn){for(let An=0;An<16384;An++)Pn[An]={},Pn[An].len=0,Pn[An].lit=0,Pn[An].p=null}const he={l:0,c:0,lc:0};function pe(Pn,An,Bn,or,xr){for(;Bn<Pn;)An=An<<8|Gn(or,xr),Bn+=8;Bn-=Pn,he.l=An>>Bn&(1<<Pn)-1,he.c=An,he.lc=Bn}const _e=new Array(59);function Ce(Pn){for(let Bn=0;Bn<=58;++Bn)_e[Bn]=0;for(let Bn=0;Bn<65537;++Bn)_e[Pn[Bn]]+=1;let An=0;for(let Bn=58;Bn>0;--Bn){const or=An+_e[Bn]>>1;_e[Bn]=An,An=or}for(let Bn=0;Bn<65537;++Bn){const or=Pn[Bn];or>0&&(Pn[Bn]=or|_e[or]++<<6)}}function xe(Pn,An,Bn,or,xr,Er){const kr=An;let Rr=0,Or=0;for(;or<=xr;or++){if(kr.value-An.value>Bn)return!1;pe(6,Rr,Or,Pn,kr);const Mr=he.l;if(Rr=he.c,Or=he.lc,Er[or]=Mr,Mr==63){if(kr.value-An.value>Bn)throw new Error("Something wrong with hufUnpackEncTable");pe(8,Rr,Or,Pn,kr);let $r=he.l+6;if(Rr=he.c,Or=he.lc,or+$r>xr+1)throw new Error("Something wrong with hufUnpackEncTable");for(;$r--;)Er[or++]=0;or--}else if(Mr>=59){let $r=Mr-59+2;if(or+$r>xr+1)throw new Error("Something wrong with hufUnpackEncTable");for(;$r--;)Er[or++]=0;or--}}Ce(Er)}function Ie(Pn){return Pn&63}function $e(Pn){return Pn>>6}function Ne(Pn,An,Bn,or){for(;An<=Bn;An++){const xr=$e(Pn[An]),Er=Ie(Pn[An]);if(xr>>Er)throw new Error("Invalid table entry");if(Er>14){const kr=or[xr>>Er-14];if(kr.len)throw new Error("Invalid table entry");if(kr.lit++,kr.p){const Rr=kr.p;kr.p=new Array(kr.lit);for(let Or=0;Or<kr.lit-1;++Or)kr.p[Or]=Rr[Or]}else kr.p=new Array(1);kr.p[kr.lit-1]=An}else if(Er){let kr=0;for(let Rr=1<<14-Er;Rr>0;Rr--){const Or=or[(xr<<14-Er)+kr];if(Or.len||Or.p)throw new Error("Invalid table entry");Or.len=Er,Or.lit=An,kr++}}}return!0}const Oe={c:0,lc:0};function Fe(Pn,An,Bn,or){Pn=Pn<<8|Gn(Bn,or),An+=8,Oe.c=Pn,Oe.lc=An}const Ve={c:0,lc:0};function ze(Pn,An,Bn,or,xr,Er,kr,Rr,Or){if(Pn==An){or<8&&(Fe(Bn,or,xr,Er),Bn=Oe.c,or=Oe.lc),or-=8;let Mr=Bn>>or;if(Mr=new Uint8Array([Mr])[0],Rr.value+Mr>Or)return!1;const $r=kr[Rr.value-1];for(;Mr-- >0;)kr[Rr.value++]=$r}else if(Rr.value<Or)kr[Rr.value++]=Pn;else return!1;Ve.c=Bn,Ve.lc=or}function Ue(Pn){return Pn&65535}function Pt(Pn){const An=Ue(Pn);return An>32767?An-65536:An}const qe={a:0,b:0};function Et(Pn,An){const Bn=Pt(Pn),or=Pt(An),xr=Bn+(or&1)+(or>>1),Er=xr,kr=xr-or;qe.a=Er,qe.b=kr}function kt(Pn,An){const Bn=Ue(Pn),or=Ue(An),xr=Bn-(or>>1)&65535,Er=or+xr-32768&65535;qe.a=Er,qe.b=xr}function At(Pn,An,Bn,or,xr,Er,kr){const Rr=kr<16384,Or=Bn>xr?xr:Bn;let Mr=1,$r,zr;for(;Mr<=Or;)Mr<<=1;for(Mr>>=1,$r=Mr,Mr>>=1;Mr>=1;){zr=0;const Vr=zr+Er*(xr-$r),Fr=Er*Mr,jr=Er*$r,Xn=or*Mr,Tr=or*$r;let Br,Gr,Zr,oo;for(;zr<=Vr;zr+=jr){let Jr=zr;const Yr=zr+or*(Bn-$r);for(;Jr<=Yr;Jr+=Tr){const Qr=Jr+Xn,so=Jr+Fr,qn=so+Xn;Rr?(Et(Pn[Jr+An],Pn[so+An]),Br=qe.a,Zr=qe.b,Et(Pn[Qr+An],Pn[qn+An]),Gr=qe.a,oo=qe.b,Et(Br,Gr),Pn[Jr+An]=qe.a,Pn[Qr+An]=qe.b,Et(Zr,oo),Pn[so+An]=qe.a,Pn[qn+An]=qe.b):(kt(Pn[Jr+An],Pn[so+An]),Br=qe.a,Zr=qe.b,kt(Pn[Qr+An],Pn[qn+An]),Gr=qe.a,oo=qe.b,kt(Br,Gr),Pn[Jr+An]=qe.a,Pn[Qr+An]=qe.b,kt(Zr,oo),Pn[so+An]=qe.a,Pn[qn+An]=qe.b)}if(Bn&Mr){const Qr=Jr+Fr;Rr?Et(Pn[Jr+An],Pn[Qr+An]):kt(Pn[Jr+An],Pn[Qr+An]),Br=qe.a,Pn[Qr+An]=qe.b,Pn[Jr+An]=Br}}if(xr&Mr){let Jr=zr;const Yr=zr+or*(Bn-$r);for(;Jr<=Yr;Jr+=Tr){const Qr=Jr+Xn;Rr?Et(Pn[Jr+An],Pn[Qr+An]):kt(Pn[Jr+An],Pn[Qr+An]),Br=qe.a,Pn[Qr+An]=qe.b,Pn[Jr+An]=Br}}$r=Mr,Mr>>=1}return zr}function Dt(Pn,An,Bn,or,xr,Er,kr,Rr,Or){let Mr=0,$r=0;const zr=kr,Vr=Math.trunc(or.value+(xr+7)/8);for(;or.value<Vr;)for(Fe(Mr,$r,Bn,or),Mr=Oe.c,$r=Oe.lc;$r>=14;){const jr=Mr>>$r-14&16383,Xn=An[jr];if(Xn.len)$r-=Xn.len,ze(Xn.lit,Er,Mr,$r,Bn,or,Rr,Or,zr),Mr=Ve.c,$r=Ve.lc;else{if(!Xn.p)throw new Error("hufDecode issues");let Tr;for(Tr=0;Tr<Xn.lit;Tr++){const Br=Ie(Pn[Xn.p[Tr]]);for(;$r<Br&&or.value<Vr;)Fe(Mr,$r,Bn,or),Mr=Oe.c,$r=Oe.lc;if($r>=Br&&$e(Pn[Xn.p[Tr]])==(Mr>>$r-Br&(1<<Br)-1)){$r-=Br,ze(Xn.p[Tr],Er,Mr,$r,Bn,or,Rr,Or,zr),Mr=Ve.c,$r=Ve.lc;break}}if(Tr==Xn.lit)throw new Error("hufDecode issues")}}const Fr=8-xr&7;for(Mr>>=Fr,$r-=Fr;$r>0;){const jr=An[Mr<<14-$r&16383];if(jr.len)$r-=jr.len,ze(jr.lit,Er,Mr,$r,Bn,or,Rr,Or,zr),Mr=Ve.c,$r=Ve.lc;else throw new Error("hufDecode issues")}return!0}function Lt(Pn,An,Bn,or,xr,Er){const kr={value:0},Rr=Bn.value,Or=Zn(An,Bn),Mr=Zn(An,Bn);Bn.value+=4;const $r=Zn(An,Bn);if(Bn.value+=4,Or<0||Or>=65537||Mr<0||Mr>=65537)throw new Error("Something wrong with HUF_ENCSIZE");const zr=new Array(65537),Vr=new Array(16384);de(Vr);const Fr=or-(Bn.value-Rr);if(xe(Pn,Bn,Fr,Or,Mr,zr),$r>8*(or-(Bn.value-Rr)))throw new Error("Something wrong with hufUncompress");Ne(zr,Or,Mr,Vr),Dt(zr,Vr,Pn,Bn,$r,Mr,Er,xr,kr)}function jt(Pn,An,Bn){for(let or=0;or<Bn;++or)An[or]=Pn[An[or]]}function _n(Pn){for(let An=1;An<Pn.length;An++){const Bn=Pn[An-1]+Pn[An]-128;Pn[An]=Bn}}function bn(Pn,An){let Bn=0,or=Math.floor((Pn.length+1)/2),xr=0;const Er=Pn.length-1;for(;!(xr>Er||(An[xr++]=Pn[Bn++],xr>Er));)An[xr++]=Pn[or++]}function vn(Pn){let An=Pn.byteLength;const Bn=new Array;let or=0;const xr=new DataView(Pn);for(;An>0;){const Er=xr.getInt8(or++);if(Er<0){const kr=-Er;An-=kr+1;for(let Rr=0;Rr<kr;Rr++)Bn.push(xr.getUint8(or++))}else{const kr=Er;An-=2;const Rr=xr.getUint8(or++);for(let Or=0;Or<kr+1;Or++)Bn.push(Rr)}}return Bn}function Tn(Pn,An,Bn,or,xr,Er){let kr=new DataView(Er.buffer);const Rr=Bn[Pn.idx[0]].width,Or=Bn[Pn.idx[0]].height,Mr=3,$r=Math.floor(Rr/8),zr=Math.ceil(Rr/8),Vr=Math.ceil(Or/8),Fr=Rr-(zr-1)*8,jr=Or-(Vr-1)*8,Xn={value:0},Tr=new Array(Mr),Br=new Array(Mr),Gr=new Array(Mr),Zr=new Array(Mr),oo=new Array(Mr);for(let Yr=0;Yr<Mr;++Yr)oo[Yr]=An[Pn.idx[Yr]],Tr[Yr]=Yr<1?0:Tr[Yr-1]+zr*Vr,Br[Yr]=new Float32Array(64),Gr[Yr]=new Uint16Array(64),Zr[Yr]=new Uint16Array(zr*64);for(let Yr=0;Yr<Vr;++Yr){let Qr=8;Yr==Vr-1&&(Qr=jr);let so=8;for(let Ln=0;Ln<zr;++Ln){Ln==zr-1&&(so=Fr);for(let vr=0;vr<Mr;++vr)Gr[vr].fill(0),Gr[vr][0]=xr[Tr[vr]++],$n(Xn,or,Gr[vr]),wn(Gr[vr],Br[vr]),Cn(Br[vr]);Sn(Br);for(let vr=0;vr<Mr;++vr)In(Br[vr],Zr[vr],Ln*64)}let qn=0;for(let Ln=0;Ln<Mr;++Ln){const vr=Bn[Pn.idx[Ln]].type;for(let Ir=8*Yr;Ir<8*Yr+Qr;++Ir){qn=oo[Ln][Ir];for(let Kr=0;Kr<$r;++Kr){const to=Kr*64+(Ir&7)*8;kr.setUint16(qn+0*2*vr,Zr[Ln][to+0],!0),kr.setUint16(qn+1*2*vr,Zr[Ln][to+1],!0),kr.setUint16(qn+2*2*vr,Zr[Ln][to+2],!0),kr.setUint16(qn+3*2*vr,Zr[Ln][to+3],!0),kr.setUint16(qn+4*2*vr,Zr[Ln][to+4],!0),kr.setUint16(qn+5*2*vr,Zr[Ln][to+5],!0),kr.setUint16(qn+6*2*vr,Zr[Ln][to+6],!0),kr.setUint16(qn+7*2*vr,Zr[Ln][to+7],!0),qn+=8*2*vr}}if($r!=zr)for(let Ir=8*Yr;Ir<8*Yr+Qr;++Ir){const Kr=oo[Ln][Ir]+8*$r*2*vr,to=$r*64+(Ir&7)*8;for(let io=0;io<so;++io)kr.setUint16(Kr+io*2*vr,Zr[Ln][to+io],!0)}}}const Jr=new Uint16Array(Rr);kr=new DataView(Er.buffer);for(let Yr=0;Yr<Mr;++Yr){Bn[Pn.idx[Yr]].decoded=!0;const Qr=Bn[Pn.idx[Yr]].type;if(Bn[Yr].type==2)for(let so=0;so<Or;++so){const qn=oo[Yr][so];for(let Ln=0;Ln<Rr;++Ln)Jr[Ln]=kr.getUint16(qn+Ln*2*Qr,!0);for(let Ln=0;Ln<Rr;++Ln)kr.setFloat32(qn+Ln*2*Qr,Fn(Jr[Ln]),!0)}}}function $n(Pn,An,Bn){let or,xr=1;for(;xr<64;)or=An[Pn.value],or==65280?xr=64:or>>8==255?xr+=or&255:(Bn[xr]=or,xr++),Pn.value++}function wn(Pn,An){An[0]=Fn(Pn[0]),An[1]=Fn(Pn[1]),An[2]=Fn(Pn[5]),An[3]=Fn(Pn[6]),An[4]=Fn(Pn[14]),An[5]=Fn(Pn[15]),An[6]=Fn(Pn[27]),An[7]=Fn(Pn[28]),An[8]=Fn(Pn[2]),An[9]=Fn(Pn[4]),An[10]=Fn(Pn[7]),An[11]=Fn(Pn[13]),An[12]=Fn(Pn[16]),An[13]=Fn(Pn[26]),An[14]=Fn(Pn[29]),An[15]=Fn(Pn[42]),An[16]=Fn(Pn[3]),An[17]=Fn(Pn[8]),An[18]=Fn(Pn[12]),An[19]=Fn(Pn[17]),An[20]=Fn(Pn[25]),An[21]=Fn(Pn[30]),An[22]=Fn(Pn[41]),An[23]=Fn(Pn[43]),An[24]=Fn(Pn[9]),An[25]=Fn(Pn[11]),An[26]=Fn(Pn[18]),An[27]=Fn(Pn[24]),An[28]=Fn(Pn[31]),An[29]=Fn(Pn[40]),An[30]=Fn(Pn[44]),An[31]=Fn(Pn[53]),An[32]=Fn(Pn[10]),An[33]=Fn(Pn[19]),An[34]=Fn(Pn[23]),An[35]=Fn(Pn[32]),An[36]=Fn(Pn[39]),An[37]=Fn(Pn[45]),An[38]=Fn(Pn[52]),An[39]=Fn(Pn[54]),An[40]=Fn(Pn[20]),An[41]=Fn(Pn[22]),An[42]=Fn(Pn[33]),An[43]=Fn(Pn[38]),An[44]=Fn(Pn[46]),An[45]=Fn(Pn[51]),An[46]=Fn(Pn[55]),An[47]=Fn(Pn[60]),An[48]=Fn(Pn[21]),An[49]=Fn(Pn[34]),An[50]=Fn(Pn[37]),An[51]=Fn(Pn[47]),An[52]=Fn(Pn[50]),An[53]=Fn(Pn[56]),An[54]=Fn(Pn[59]),An[55]=Fn(Pn[61]),An[56]=Fn(Pn[35]),An[57]=Fn(Pn[36]),An[58]=Fn(Pn[48]),An[59]=Fn(Pn[49]),An[60]=Fn(Pn[57]),An[61]=Fn(Pn[58]),An[62]=Fn(Pn[62]),An[63]=Fn(Pn[63])}function Cn(Pn){const An=.5*Math.cos(.7853975),Bn=.5*Math.cos(3.14159/16),or=.5*Math.cos(3.14159/8),xr=.5*Math.cos(3*3.14159/16),Er=.5*Math.cos(5*3.14159/16),kr=.5*Math.cos(3*3.14159/8),Rr=.5*Math.cos(7*3.14159/16),Or=new Array(4),Mr=new Array(4),$r=new Array(4),zr=new Array(4);for(let Vr=0;Vr<8;++Vr){const Fr=Vr*8;Or[0]=or*Pn[Fr+2],Or[1]=kr*Pn[Fr+2],Or[2]=or*Pn[Fr+6],Or[3]=kr*Pn[Fr+6],Mr[0]=Bn*Pn[Fr+1]+xr*Pn[Fr+3]+Er*Pn[Fr+5]+Rr*Pn[Fr+7],Mr[1]=xr*Pn[Fr+1]-Rr*Pn[Fr+3]-Bn*Pn[Fr+5]-Er*Pn[Fr+7],Mr[2]=Er*Pn[Fr+1]-Bn*Pn[Fr+3]+Rr*Pn[Fr+5]+xr*Pn[Fr+7],Mr[3]=Rr*Pn[Fr+1]-Er*Pn[Fr+3]+xr*Pn[Fr+5]-Bn*Pn[Fr+7],$r[0]=An*(Pn[Fr+0]+Pn[Fr+4]),$r[3]=An*(Pn[Fr+0]-Pn[Fr+4]),$r[1]=Or[0]+Or[3],$r[2]=Or[1]-Or[2],zr[0]=$r[0]+$r[1],zr[1]=$r[3]+$r[2],zr[2]=$r[3]-$r[2],zr[3]=$r[0]-$r[1],Pn[Fr+0]=zr[0]+Mr[0],Pn[Fr+1]=zr[1]+Mr[1],Pn[Fr+2]=zr[2]+Mr[2],Pn[Fr+3]=zr[3]+Mr[3],Pn[Fr+4]=zr[3]-Mr[3],Pn[Fr+5]=zr[2]-Mr[2],Pn[Fr+6]=zr[1]-Mr[1],Pn[Fr+7]=zr[0]-Mr[0]}for(let Vr=0;Vr<8;++Vr)Or[0]=or*Pn[16+Vr],Or[1]=kr*Pn[16+Vr],Or[2]=or*Pn[48+Vr],Or[3]=kr*Pn[48+Vr],Mr[0]=Bn*Pn[8+Vr]+xr*Pn[24+Vr]+Er*Pn[40+Vr]+Rr*Pn[56+Vr],Mr[1]=xr*Pn[8+Vr]-Rr*Pn[24+Vr]-Bn*Pn[40+Vr]-Er*Pn[56+Vr],Mr[2]=Er*Pn[8+Vr]-Bn*Pn[24+Vr]+Rr*Pn[40+Vr]+xr*Pn[56+Vr],Mr[3]=Rr*Pn[8+Vr]-Er*Pn[24+Vr]+xr*Pn[40+Vr]-Bn*Pn[56+Vr],$r[0]=An*(Pn[Vr]+Pn[32+Vr]),$r[3]=An*(Pn[Vr]-Pn[32+Vr]),$r[1]=Or[0]+Or[3],$r[2]=Or[1]-Or[2],zr[0]=$r[0]+$r[1],zr[1]=$r[3]+$r[2],zr[2]=$r[3]-$r[2],zr[3]=$r[0]-$r[1],Pn[0+Vr]=zr[0]+Mr[0],Pn[8+Vr]=zr[1]+Mr[1],Pn[16+Vr]=zr[2]+Mr[2],Pn[24+Vr]=zr[3]+Mr[3],Pn[32+Vr]=zr[3]-Mr[3],Pn[40+Vr]=zr[2]-Mr[2],Pn[48+Vr]=zr[1]-Mr[1],Pn[56+Vr]=zr[0]-Mr[0]}function Sn(Pn){for(let An=0;An<64;++An){const Bn=Pn[0][An],or=Pn[1][An],xr=Pn[2][An];Pn[0][An]=Bn+1.5747*xr,Pn[1][An]=Bn-.1873*or-.4682*xr,Pn[2][An]=Bn+1.8556*or}}function In(Pn,An,Bn){for(let or=0;or<64;++or)An[Bn+or]=DataUtils.toHalfFloat(En(Pn[or]))}function En(Pn){return Pn<=1?Math.sign(Pn)*Math.pow(Math.abs(Pn),2.2):Math.sign(Pn)*Math.pow(ie,Math.abs(Pn)-1)}function xn(Pn){return new DataView(Pn.array.buffer,Pn.offset.value,Pn.size)}function kn(Pn){const An=Pn.viewer.buffer.slice(Pn.offset.value,Pn.offset.value+Pn.size),Bn=new Uint8Array(vn(An)),or=new Uint8Array(Bn.length);return _n(Bn),bn(Bn,or),new DataView(or.buffer)}function On(Pn){const An=Pn.array.slice(Pn.offset.value,Pn.offset.value+Pn.size),Bn=unzlibSync(An),or=new Uint8Array(Bn.length);return _n(Bn),bn(Bn,or),new DataView(or.buffer)}function Mn(Pn){const An=Pn.viewer,Bn={value:Pn.offset.value},or=new Uint16Array(Pn.columns*Pn.lines*(Pn.inputChannels.length*Pn.type)),xr=new Uint8Array(8192);let Er=0;const kr=new Array(Pn.inputChannels.length);for(let jr=0,Xn=Pn.inputChannels.length;jr<Xn;jr++)kr[jr]={},kr[jr].start=Er,kr[jr].end=kr[jr].start,kr[jr].nx=Pn.columns,kr[jr].ny=Pn.lines,kr[jr].size=Pn.type,Er+=kr[jr].nx*kr[jr].ny*kr[jr].size;const Rr=Kn(An,Bn),Or=Kn(An,Bn);if(Or>=8192)throw new Error("Something is wrong with PIZ_COMPRESSION BITMAP_SIZE");if(Rr<=Or)for(let jr=0;jr<Or-Rr+1;jr++)xr[jr+Rr]=Nn(An,Bn);const Mr=new Uint16Array(65536),$r=ue(xr,Mr),zr=Zn(An,Bn);Lt(Pn.array,An,Bn,zr,or,Er);for(let jr=0;jr<Pn.inputChannels.length;++jr){const Xn=kr[jr];for(let Tr=0;Tr<kr[jr].size;++Tr)At(or,Xn.start+Tr,Xn.nx,Xn.size,Xn.ny,Xn.nx*Xn.size,$r)}jt(Mr,or,Er);let Vr=0;const Fr=new Uint8Array(or.buffer.byteLength);for(let jr=0;jr<Pn.lines;jr++)for(let Xn=0;Xn<Pn.inputChannels.length;Xn++){const Tr=kr[Xn],Br=Tr.nx*Tr.size,Gr=new Uint8Array(or.buffer,Tr.end*2,Br*2);Fr.set(Gr,Vr),Vr+=Br*2,Tr.end+=Br}return new DataView(Fr.buffer)}function Un(Pn){const An=Pn.array.slice(Pn.offset.value,Pn.offset.value+Pn.size),Bn=unzlibSync(An),or=Pn.inputChannels.length*Pn.lines*Pn.columns*Pn.totalBytes,xr=new ArrayBuffer(or),Er=new DataView(xr);let kr=0,Rr=0;const Or=new Array(4);for(let Mr=0;Mr<Pn.lines;Mr++)for(let $r=0;$r<Pn.inputChannels.length;$r++){let zr=0;switch(Pn.inputChannels[$r].pixelType){case 1:Or[0]=kr,Or[1]=Or[0]+Pn.columns,kr=Or[1]+Pn.columns;for(let Vr=0;Vr<Pn.columns;++Vr){const Fr=Bn[Or[0]++]<<8|Bn[Or[1]++];zr+=Fr,Er.setUint16(Rr,zr,!0),Rr+=2}break;case 2:Or[0]=kr,Or[1]=Or[0]+Pn.columns,Or[2]=Or[1]+Pn.columns,kr=Or[2]+Pn.columns;for(let Vr=0;Vr<Pn.columns;++Vr){const Fr=Bn[Or[0]++]<<24|Bn[Or[1]++]<<16|Bn[Or[2]++]<<8;zr+=Fr,Er.setUint32(Rr,zr,!0),Rr+=4}break}}return Er}function zn(Pn){const An=Pn.viewer,Bn={value:Pn.offset.value},or=new Uint8Array(Pn.columns*Pn.lines*(Pn.inputChannels.length*Pn.type*2)),xr={version:Dn(An,Bn),unknownUncompressedSize:Dn(An,Bn),unknownCompressedSize:Dn(An,Bn),acCompressedSize:Dn(An,Bn),dcCompressedSize:Dn(An,Bn),rleCompressedSize:Dn(An,Bn),rleUncompressedSize:Dn(An,Bn),rleRawSize:Dn(An,Bn),totalAcUncompressedCount:Dn(An,Bn),totalDcUncompressedCount:Dn(An,Bn),acCompression:Dn(An,Bn)};if(xr.version<2)throw new Error("EXRLoader.parse: "+Nr.compression+" version "+xr.version+" is unsupported");const Er=new Array;let kr=Kn(An,Bn)-2;for(;kr>0;){const Xn=Hn(An.buffer,Bn),Tr=Nn(An,Bn),Br=Tr>>2&3,Gr=(Tr>>4)-1,Zr=new Int8Array([Gr])[0],oo=Nn(An,Bn);Er.push({name:Xn,index:Zr,type:oo,compression:Br}),kr-=Xn.length+3}const Rr=Nr.channels,Or=new Array(Pn.inputChannels.length);for(let Xn=0;Xn<Pn.inputChannels.length;++Xn){const Tr=Or[Xn]={},Br=Rr[Xn];Tr.name=Br.name,Tr.compression=0,Tr.decoded=!1,Tr.type=Br.pixelType,Tr.pLinear=Br.pLinear,Tr.width=Pn.columns,Tr.height=Pn.lines}const Mr={idx:new Array(3)};for(let Xn=0;Xn<Pn.inputChannels.length;++Xn){const Tr=Or[Xn];for(let Br=0;Br<Er.length;++Br){const Gr=Er[Br];Tr.name==Gr.name&&(Tr.compression=Gr.compression,Gr.index>=0&&(Mr.idx[Gr.index]=Xn),Tr.offset=Xn)}}let $r,zr,Vr;if(xr.acCompressedSize>0)switch(xr.acCompression){case 0:$r=new Uint16Array(xr.totalAcUncompressedCount),Lt(Pn.array,An,Bn,xr.acCompressedSize,$r,xr.totalAcUncompressedCount);break;case 1:const Xn=Pn.array.slice(Bn.value,Bn.value+xr.totalAcUncompressedCount),Tr=unzlibSync(Xn);$r=new Uint16Array(Tr.buffer),Bn.value+=xr.totalAcUncompressedCount;break}if(xr.dcCompressedSize>0){const Xn={array:Pn.array,offset:Bn,size:xr.dcCompressedSize};zr=new Uint16Array(On(Xn).buffer),Bn.value+=xr.dcCompressedSize}if(xr.rleRawSize>0){const Xn=Pn.array.slice(Bn.value,Bn.value+xr.rleCompressedSize),Tr=unzlibSync(Xn);Vr=vn(Tr.buffer),Bn.value+=xr.rleCompressedSize}let Fr=0;const jr=new Array(Or.length);for(let Xn=0;Xn<jr.length;++Xn)jr[Xn]=new Array;for(let Xn=0;Xn<Pn.lines;++Xn)for(let Tr=0;Tr<Or.length;++Tr)jr[Tr].push(Fr),Fr+=Or[Tr].width*Pn.type*2;Tn(Mr,jr,Or,$r,zr,or);for(let Xn=0;Xn<Or.length;++Xn){const Tr=Or[Xn];if(!Tr.decoded)switch(Tr.compression){case 2:let Br=0,Gr=0;for(let Zr=0;Zr<Pn.lines;++Zr){let oo=jr[Xn][Br];for(let Jr=0;Jr<Tr.width;++Jr){for(let Yr=0;Yr<2*Tr.type;++Yr)or[oo++]=Vr[Gr+Yr*Tr.width*Tr.height];Gr++}Br++}break;case 1:default:throw new Error("EXRLoader.parse: unsupported channel compression")}}return new DataView(or.buffer)}function Hn(Pn,An){const Bn=new Uint8Array(Pn);let or=0;for(;Bn[An.value+or]!=0;)or+=1;const xr=new TextDecoder().decode(Bn.slice(An.value,An.value+or));return An.value=An.value+or+1,xr}function Rn(Pn,An,Bn){const or=new TextDecoder().decode(new Uint8Array(Pn).slice(An.value,An.value+Bn));return An.value=An.value+Bn,or}function Jn(Pn,An){const Bn=_r(Pn,An),or=Zn(Pn,An);return[Bn,or]}function Qn(Pn,An){const Bn=Zn(Pn,An),or=Zn(Pn,An);return[Bn,or]}function _r(Pn,An){const Bn=Pn.getInt32(An.value,!0);return An.value=An.value+4,Bn}function Zn(Pn,An){const Bn=Pn.getUint32(An.value,!0);return An.value=An.value+4,Bn}function Gn(Pn,An){const Bn=Pn[An.value];return An.value=An.value+1,Bn}function Nn(Pn,An){const Bn=Pn.getUint8(An.value);return An.value=An.value+1,Bn}const Dn=function(Pn,An){let Bn;return"getBigInt64"in DataView.prototype?Bn=Number(Pn.getBigInt64(An.value,!0)):Bn=Pn.getUint32(An.value+4,!0)+Number(Pn.getUint32(An.value,!0)<<32),An.value+=8,Bn};function jn(Pn,An){const Bn=Pn.getFloat32(An.value,!0);return An.value+=4,Bn}function ir(Pn,An){return DataUtils.toHalfFloat(jn(Pn,An))}function Fn(Pn){const An=(Pn&31744)>>10,Bn=Pn&1023;return(Pn>>15?-1:1)*(An?An===31?Bn?NaN:1/0:Math.pow(2,An-15)*(1+Bn/1024):6103515625e-14*(Bn/1024))}function Kn(Pn,An){const Bn=Pn.getUint16(An.value,!0);return An.value+=2,Bn}function mr(Pn,An){return Fn(Kn(Pn,An))}function yr(Pn,An,Bn,or){const xr=Bn.value,Er=[];for(;Bn.value<xr+or-1;){const kr=Hn(An,Bn),Rr=_r(Pn,Bn),Or=Nn(Pn,Bn);Bn.value+=3;const Mr=_r(Pn,Bn),$r=_r(Pn,Bn);Er.push({name:kr,pixelType:Rr,pLinear:Or,xSampling:Mr,ySampling:$r})}return Bn.value+=1,Er}function Cr(Pn,An){const Bn=jn(Pn,An),or=jn(Pn,An),xr=jn(Pn,An),Er=jn(Pn,An),kr=jn(Pn,An),Rr=jn(Pn,An),Or=jn(Pn,An),Mr=jn(Pn,An);return{redX:Bn,redY:or,greenX:xr,greenY:Er,blueX:kr,blueY:Rr,whiteX:Or,whiteY:Mr}}function br(Pn,An){const Bn=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],or=Nn(Pn,An);return Bn[or]}function Pr(Pn,An){const Bn=_r(Pn,An),or=_r(Pn,An),xr=_r(Pn,An),Er=_r(Pn,An);return{xMin:Bn,yMin:or,xMax:xr,yMax:Er}}function gr(Pn,An){const Bn=["INCREASING_Y","DECREASING_Y","RANDOM_Y"],or=Nn(Pn,An);return Bn[or]}function tr(Pn,An){const Bn=["ENVMAP_LATLONG","ENVMAP_CUBE"],or=Nn(Pn,An);return Bn[or]}function Sr(Pn,An){const Bn=["ONE_LEVEL","MIPMAP_LEVELS","RIPMAP_LEVELS"],or=["ROUND_DOWN","ROUND_UP"],xr=Zn(Pn,An),Er=Zn(Pn,An),kr=Nn(Pn,An);return{xSize:xr,ySize:Er,levelMode:Bn[kr&15],roundingMode:or[kr>>4]}}function Dr(Pn,An){const Bn=jn(Pn,An),or=jn(Pn,An);return[Bn,or]}function Lr(Pn,An){const Bn=jn(Pn,An),or=jn(Pn,An),xr=jn(Pn,An);return[Bn,or,xr]}function Ur(Pn,An,Bn,or,xr){if(or==="string"||or==="stringvector"||or==="iccProfile")return Rn(An,Bn,xr);if(or==="chlist")return yr(Pn,An,Bn,xr);if(or==="chromaticities")return Cr(Pn,Bn);if(or==="compression")return br(Pn,Bn);if(or==="box2i")return Pr(Pn,Bn);if(or==="envmap")return tr(Pn,Bn);if(or==="tiledesc")return Sr(Pn,Bn);if(or==="lineOrder")return gr(Pn,Bn);if(or==="float")return jn(Pn,Bn);if(or==="v2f")return Dr(Pn,Bn);if(or==="v3f")return Lr(Pn,Bn);if(or==="int")return _r(Pn,Bn);if(or==="rational")return Jn(Pn,Bn);if(or==="timecode")return Qn(Pn,Bn);if(or==="preview")return Bn.value+=xr,"skipped";Bn.value+=xr}function Xr(Pn,An){const Bn=Math.log2(Pn);return An=="ROUND_DOWN"?Math.floor(Bn):Math.ceil(Bn)}function qr(Pn,An,Bn){let or=0;switch(Pn.levelMode){case"ONE_LEVEL":or=1;break;case"MIPMAP_LEVELS":or=Xr(Math.max(An,Bn),Pn.roundingMode)+1;break;case"RIPMAP_LEVELS":throw new Error("THREE.EXRLoader: RIPMAP_LEVELS tiles currently unsupported.")}return or}function Wn(Pn,An,Bn,or){const xr=new Array(Pn);for(let Er=0;Er<Pn;Er++){const kr=1<<Er;let Rr=An/kr|0;or=="ROUND_UP"&&Rr*kr<An&&(Rr+=1);const Or=Math.max(Rr,1);xr[Er]=(Or+Bn-1)/Bn|0}return xr}function wr(){const Pn=this,An=Pn.offset,Bn={value:0};for(let or=0;or<Pn.tileCount;or++){const xr=_r(Pn.viewer,An),Er=_r(Pn.viewer,An);An.value+=8,Pn.size=Zn(Pn.viewer,An);const kr=xr*Pn.blockWidth,Rr=Er*Pn.blockHeight;Pn.columns=kr+Pn.blockWidth>Pn.width?Pn.width-kr:Pn.blockWidth,Pn.lines=Rr+Pn.blockHeight>Pn.height?Pn.height-Rr:Pn.blockHeight;const Or=Pn.columns*Pn.totalBytes,Mr=Pn.size<Pn.lines*Or?Pn.uncompress(Pn):xn(Pn);An.value+=Pn.size;for(let $r=0;$r<Pn.lines;$r++){const zr=$r*Pn.columns*Pn.totalBytes;for(let Vr=0;Vr<Pn.inputChannels.length;Vr++){const Fr=Nr.channels[Vr].name,jr=Pn.channelByteOffsets[Fr]*Pn.columns,Xn=Pn.decodeChannels[Fr];if(Xn===void 0)continue;Bn.value=zr+jr;const Tr=(Pn.height-(1+Rr+$r))*Pn.outLineWidth;for(let Br=0;Br<Pn.columns;Br++){const Gr=Tr+(Br+kr)*Pn.outputChannels+Xn;Pn.byteArray[Gr]=Pn.getter(Mr,Bn)}}}}}function Vn(){const Pn=this,An=Pn.offset,Bn={value:0};for(let or=0;or<Pn.height/Pn.blockHeight;or++){const xr=_r(Pn.viewer,An)-Nr.dataWindow.yMin;Pn.size=Zn(Pn.viewer,An),Pn.lines=xr+Pn.blockHeight>Pn.height?Pn.height-xr:Pn.blockHeight;const Er=Pn.columns*Pn.totalBytes,kr=Pn.size<Pn.lines*Er?Pn.uncompress(Pn):xn(Pn);An.value+=Pn.size;for(let Rr=0;Rr<Pn.blockHeight;Rr++){const Or=or*Pn.blockHeight,Mr=Rr+Pn.scanOrder(Or);if(Mr>=Pn.height)continue;const $r=Rr*Er,zr=(Pn.height-1-Mr)*Pn.outLineWidth;for(let Vr=0;Vr<Pn.inputChannels.length;Vr++){const Fr=Nr.channels[Vr].name,jr=Pn.channelByteOffsets[Fr]*Pn.columns,Xn=Pn.decodeChannels[Fr];if(Xn!==void 0){Bn.value=$r+jr;for(let Tr=0;Tr<Pn.columns;Tr++){const Br=zr+Tr*Pn.outputChannels+Xn;Pn.byteArray[Br]=Pn.getter(kr,Bn)}}}}}}function sr(Pn,An,Bn){const or={};if(Pn.getUint32(0,!0)!=20000630)throw new Error("THREE.EXRLoader: Provided file doesn't appear to be in OpenEXR format.");or.version=Pn.getUint8(4);const xr=Pn.getUint8(5);or.spec={singleTile:!!(xr&2),longName:!!(xr&4),deepFormat:!!(xr&8),multiPart:!!(xr&16)},Bn.value=8;let Er=!0;for(;Er;){const kr=Hn(An,Bn);if(kr==0)Er=!1;else{const Rr=Hn(An,Bn),Or=Zn(Pn,Bn),Mr=Ur(Pn,An,Bn,Rr,Or);Mr===void 0||(or[kr]=Mr)}}if(xr&-7)throw new Error("THREE.EXRLoader: Provided file is currently unsupported.");return or}function nr(Pn,An,Bn,or,xr){const Er={size:0,viewer:An,array:Bn,offset:or,width:Pn.dataWindow.xMax-Pn.dataWindow.xMin+1,height:Pn.dataWindow.yMax-Pn.dataWindow.yMin+1,inputChannels:Pn.channels,channelByteOffsets:{},scanOrder:null,totalBytes:null,columns:null,lines:null,type:null,uncompress:null,getter:null,format:null,colorSpace:LinearSRGBColorSpace$1};switch(Pn.compression){case"NO_COMPRESSION":Er.blockHeight=1,Er.uncompress=xn;break;case"RLE_COMPRESSION":Er.blockHeight=1,Er.uncompress=kn;break;case"ZIPS_COMPRESSION":Er.blockHeight=1,Er.uncompress=On;break;case"ZIP_COMPRESSION":Er.blockHeight=16,Er.uncompress=On;break;case"PIZ_COMPRESSION":Er.blockHeight=32,Er.uncompress=Mn;break;case"PXR24_COMPRESSION":Er.blockHeight=16,Er.uncompress=Un;break;case"DWAA_COMPRESSION":Er.blockHeight=32,Er.uncompress=zn;break;case"DWAB_COMPRESSION":Er.blockHeight=256,Er.uncompress=zn;break;default:throw new Error("EXRLoader.parse: "+Pn.compression+" is unsupported")}const kr={};for(const $r of Pn.channels)switch($r.name){case"Y":case"R":case"G":case"B":case"A":kr[$r.name]=!0,Er.type=$r.pixelType}let Rr=!1;if(kr.R&&kr.G&&kr.B)Rr=!kr.A,Er.outputChannels=4,Er.decodeChannels={R:0,G:1,B:2,A:3};else if(kr.Y)Er.outputChannels=1,Er.decodeChannels={Y:0};else throw new Error("EXRLoader.parse: file contains unsupported data channels.");if(Er.type==1)switch(xr){case FloatType:Er.getter=mr;break;case HalfFloatType:Er.getter=Kn;break}else if(Er.type==2)switch(xr){case FloatType:Er.getter=jn;break;case HalfFloatType:Er.getter=ir}else throw new Error("EXRLoader.parse: unsupported pixelType "+Er.type+" for "+Pn.compression+".");Er.columns=Er.width;const Or=Er.width*Er.height*Er.outputChannels;switch(xr){case FloatType:Er.byteArray=new Float32Array(Or),Rr&&Er.byteArray.fill(1,0,Or);break;case HalfFloatType:Er.byteArray=new Uint16Array(Or),Rr&&Er.byteArray.fill(15360,0,Or);break;default:break}let Mr=0;for(const $r of Pn.channels)Er.decodeChannels[$r.name]!==void 0&&(Er.channelByteOffsets[$r.name]=Mr),Mr+=$r.pixelType*2;if(Er.totalBytes=Mr,Er.outLineWidth=Er.width*Er.outputChannels,Pn.lineOrder==="INCREASING_Y"?Er.scanOrder=$r=>$r:Er.scanOrder=$r=>Er.height-1-$r,Er.outputChannels==4?(Er.format=RGBAFormat,Er.colorSpace=LinearSRGBColorSpace$1):(Er.format=RedFormat,Er.colorSpace=NoColorSpace$1),Pn.spec.singleTile){Er.blockHeight=Pn.tiles.ySize,Er.blockWidth=Pn.tiles.xSize;const $r=qr(Pn.tiles,Er.width,Er.height),zr=Wn($r,Er.width,Pn.tiles.xSize,Pn.tiles.roundingMode),Vr=Wn($r,Er.height,Pn.tiles.ySize,Pn.tiles.roundingMode);Er.tileCount=zr[0]*Vr[0];for(let Fr=0;Fr<$r;Fr++)for(let jr=0;jr<Vr[Fr];jr++)for(let Xn=0;Xn<zr[Fr];Xn++)Dn(An,or);Er.decode=wr.bind(Er)}else{Er.blockWidth=Er.width;const $r=Math.ceil(Er.height/Er.blockHeight);for(let zr=0;zr<$r;zr++)Dn(An,or);Er.decode=Vn.bind(Er)}return Er}const Ar={value:0},Wr=new DataView(oe),Yn=new Uint8Array(oe),Nr=sr(Wr,oe,Ar),Hr=nr(Nr,Wr,Yn,Ar,this.type);return Hr.decode(),{header:Nr,width:Hr.width,height:Hr.height,data:Hr.byteArray,format:Hr.format,colorSpace:Hr.colorSpace,type:this.type}}setDataType(oe){return this.type=oe,this}load(oe,ie,ue,de){function he(pe,_e){pe.colorSpace=_e.colorSpace,pe.minFilter=LinearFilter,pe.magFilter=LinearFilter,pe.generateMipmaps=!1,pe.flipY=!1,ie&&ie(pe,_e)}return super.load(oe,he,ue,de)}}const _taskCache$1=new WeakMap;class DRACOLoader extends Loader{constructor(oe){super(oe),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(oe){return this.decoderPath=oe,this}setDecoderConfig(oe){return this.decoderConfig=oe,this}setWorkerLimit(oe){return this.workerLimit=oe,this}load(oe,ie,ue,de){const he=new FileLoader(this.manager);he.setPath(this.path),he.setResponseType("arraybuffer"),he.setRequestHeader(this.requestHeader),he.setWithCredentials(this.withCredentials),he.load(oe,pe=>{this.parse(pe,ie,de)},ue,de)}parse(oe,ie,ue=()=>{}){this.decodeDracoFile(oe,ie,null,null,SRGBColorSpace$1,ue).catch(ue)}decodeDracoFile(oe,ie,ue,de,he=LinearSRGBColorSpace$1,pe=()=>{}){const _e={attributeIDs:ue||this.defaultAttributeIDs,attributeTypes:de||this.defaultAttributeTypes,useUniqueIDs:!!ue,vertexColorSpace:he};return this.decodeGeometry(oe,_e).then(ie).catch(pe)}decodeGeometry(oe,ie){const ue=JSON.stringify(ie);if(_taskCache$1.has(oe)){const Ce=_taskCache$1.get(oe);if(Ce.key===ue)return Ce.promise;if(oe.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let de;const he=this.workerNextTaskID++,pe=oe.byteLength,_e=this._getWorker(he,pe).then(Ce=>(de=Ce,new Promise((xe,Ie)=>{de._callbacks[he]={resolve:xe,reject:Ie},de.postMessage({type:"decode",id:he,taskConfig:ie,buffer:oe},[oe])}))).then(Ce=>this._createGeometry(Ce.geometry));return _e.catch(()=>!0).then(()=>{de&&he&&this._releaseTask(de,he)}),_taskCache$1.set(oe,{key:ue,promise:_e}),_e}_createGeometry(oe){const ie=new BufferGeometry;oe.index&&ie.setIndex(new BufferAttribute(oe.index.array,1));for(let ue=0;ue<oe.attributes.length;ue++){const de=oe.attributes[ue],he=de.name,pe=de.array,_e=de.itemSize,Ce=new BufferAttribute(pe,_e);he==="color"&&(this._assignVertexColorSpace(Ce,de.vertexColorSpace),Ce.normalized=!(pe instanceof Float32Array)),ie.setAttribute(he,Ce)}return ie}_assignVertexColorSpace(oe,ie){if(ie!==SRGBColorSpace$1)return;const ue=new Color$2;for(let de=0,he=oe.count;de<he;de++)ue.fromBufferAttribute(oe,de),ColorManagement$1.toWorkingColorSpace(ue,SRGBColorSpace$1),oe.setXYZ(de,ue.r,ue.g,ue.b)}_loadLibrary(oe,ie){const ue=new FileLoader(this.manager);return ue.setPath(this.decoderPath),ue.setResponseType(ie),ue.setWithCredentials(this.withCredentials),new Promise((de,he)=>{ue.load(oe,de,void 0,he)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const oe=typeof WebAssembly!="object"||this.decoderConfig.type==="js",ie=[];return oe?ie.push(this._loadLibrary("draco_decoder.js","text")):(ie.push(this._loadLibrary("draco_wasm_wrapper.js","text")),ie.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(ie).then(ue=>{const de=ue[0];oe||(this.decoderConfig.wasmBinary=ue[1]);const he=DRACOWorker.toString(),pe=["/* draco decoder */",de,"","/* worker */",he.substring(he.indexOf("{")+1,he.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([pe]))}),this.decoderPending}_getWorker(oe,ie){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const de=new Worker(this.workerSourceURL);de._callbacks={},de._taskCosts={},de._taskLoad=0,de.postMessage({type:"init",decoderConfig:this.decoderConfig}),de.onmessage=function(he){const pe=he.data;switch(pe.type){case"decode":de._callbacks[pe.id].resolve(pe);break;case"error":de._callbacks[pe.id].reject(pe);break;default:}},this.workerPool.push(de)}else this.workerPool.sort(function(de,he){return de._taskLoad>he._taskLoad?-1:1});const ue=this.workerPool[this.workerPool.length-1];return ue._taskCosts[oe]=ie,ue._taskLoad+=ie,ue})}_releaseTask(oe,ie){oe._taskLoad-=oe._taskCosts[ie],delete oe._callbacks[ie],delete oe._taskCosts[ie]}debug(){}dispose(){for(let oe=0;oe<this.workerPool.length;++oe)this.workerPool[oe].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function DRACOWorker(){let le,oe;onmessage=function(pe){const _e=pe.data;switch(_e.type){case"init":le=_e.decoderConfig,oe=new Promise(function(Ie){le.onModuleLoaded=function($e){Ie({draco:$e})},DracoDecoderModule(le)});break;case"decode":const Ce=_e.buffer,xe=_e.taskConfig;oe.then(Ie=>{const $e=Ie.draco,Ne=new $e.Decoder;try{const Oe=ie($e,Ne,new Int8Array(Ce),xe),Fe=Oe.attributes.map(Ve=>Ve.array.buffer);Oe.index&&Fe.push(Oe.index.array.buffer),self.postMessage({type:"decode",id:_e.id,geometry:Oe},Fe)}catch(Oe){self.postMessage({type:"error",id:_e.id,error:Oe.message})}finally{$e.destroy(Ne)}});break}};function ie(pe,_e,Ce,xe){const Ie=xe.attributeIDs,$e=xe.attributeTypes;let Ne,Oe;const Fe=_e.GetEncodedGeometryType(Ce);if(Fe===pe.TRIANGULAR_MESH)Ne=new pe.Mesh,Oe=_e.DecodeArrayToMesh(Ce,Ce.byteLength,Ne);else if(Fe===pe.POINT_CLOUD)Ne=new pe.PointCloud,Oe=_e.DecodeArrayToPointCloud(Ce,Ce.byteLength,Ne);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!Oe.ok()||Ne.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+Oe.error_msg());const Ve={index:null,attributes:[]};for(const ze in Ie){const Ue=self[$e[ze]];let Pt,qe;if(xe.useUniqueIDs)qe=Ie[ze],Pt=_e.GetAttributeByUniqueId(Ne,qe);else{if(qe=_e.GetAttributeId(Ne,pe[Ie[ze]]),qe===-1)continue;Pt=_e.GetAttribute(Ne,qe)}const Et=de(pe,_e,Ne,ze,Ue,Pt);ze==="color"&&(Et.vertexColorSpace=xe.vertexColorSpace),Ve.attributes.push(Et)}return Fe===pe.TRIANGULAR_MESH&&(Ve.index=ue(pe,_e,Ne)),pe.destroy(Ne),Ve}function ue(pe,_e,Ce){const xe=Ce.num_faces()*3,Ie=xe*4,$e=pe._malloc(Ie);_e.GetTrianglesUInt32Array(Ce,Ie,$e);const Ne=new Uint32Array(pe.HEAPF32.buffer,$e,xe).slice();return pe._free($e),{array:Ne,itemSize:1}}function de(pe,_e,Ce,xe,Ie,$e){const Ne=$e.num_components(),Oe=Ce.num_points()*Ne,Fe=Oe*Ie.BYTES_PER_ELEMENT,Ve=he(pe,Ie),ze=pe._malloc(Fe);_e.GetAttributeDataArrayForAllPoints(Ce,$e,Ve,Fe,ze);const Ue=new Ie(pe.HEAPF32.buffer,ze,Oe).slice();return pe._free(ze),{name:xe,array:Ue,itemSize:Ne}}function he(pe,_e){switch(_e){case Float32Array:return pe.DT_FLOAT32;case Int8Array:return pe.DT_INT8;case Int16Array:return pe.DT_INT16;case Int32Array:return pe.DT_INT32;case Uint8Array:return pe.DT_UINT8;case Uint16Array:return pe.DT_UINT16;case Uint32Array:return pe.DT_UINT32}}}let fbxTree,connections,sceneGraph;class FBXLoader extends Loader{constructor(oe){super(oe)}load(oe,ie,ue,de){const he=this,pe=he.path===""?LoaderUtils.extractUrlBase(oe):he.path,_e=new FileLoader(this.manager);_e.setPath(he.path),_e.setResponseType("arraybuffer"),_e.setRequestHeader(he.requestHeader),_e.setWithCredentials(he.withCredentials),_e.load(oe,function(Ce){try{ie(he.parse(Ce,pe))}catch(xe){de&&de(xe),he.manager.itemError(oe)}},ue,de)}parse(oe,ie){if(isFbxFormatBinary(oe))fbxTree=new BinaryParser().parse(oe);else{const de=convertArrayBufferToString(oe);if(!isFbxFormatASCII(de))throw new Error("THREE.FBXLoader: Unknown format.");if(getFbxVersion(de)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+getFbxVersion(de));fbxTree=new TextParser().parse(de)}const ue=new TextureLoader(this.manager).setPath(this.resourcePath||ie).setCrossOrigin(this.crossOrigin);return new FBXTreeParser(ue,this.manager).parse(fbxTree)}}class FBXTreeParser{constructor(oe,ie){this.textureLoader=oe,this.manager=ie}parse(){connections=this.parseConnections();const oe=this.parseImages(),ie=this.parseTextures(oe),ue=this.parseMaterials(ie),de=this.parseDeformers(),he=new GeometryParser().parse(de);return this.parseScene(de,he,ue),sceneGraph}parseConnections(){const oe=new Map;return"Connections"in fbxTree&&fbxTree.Connections.connections.forEach(function(ie){const ue=ie[0],de=ie[1],he=ie[2];oe.has(ue)||oe.set(ue,{parents:[],children:[]});const pe={ID:de,relationship:he};oe.get(ue).parents.push(pe),oe.has(de)||oe.set(de,{parents:[],children:[]});const _e={ID:ue,relationship:he};oe.get(de).children.push(_e)}),oe}parseImages(){const oe={},ie={};if("Video"in fbxTree.Objects){const ue=fbxTree.Objects.Video;for(const de in ue){const he=ue[de],pe=parseInt(de);if(oe[pe]=he.RelativeFilename||he.Filename,"Content"in he){const _e=he.Content instanceof ArrayBuffer&&he.Content.byteLength>0,Ce=typeof he.Content=="string"&&he.Content!=="";if(_e||Ce){const xe=this.parseImage(ue[de]);ie[he.RelativeFilename||he.Filename]=xe}}}}for(const ue in oe){const de=oe[ue];ie[de]!==void 0?oe[ue]=ie[de]:oe[ue]=oe[ue].split("\\").pop()}return oe}parseImage(oe){const ie=oe.Content,ue=oe.RelativeFilename||oe.Filename,de=ue.slice(ue.lastIndexOf(".")+1).toLowerCase();let he;switch(de){case"bmp":he="image/bmp";break;case"jpg":case"jpeg":he="image/jpeg";break;case"png":he="image/png";break;case"tif":he="image/tiff";break;case"tga":this.manager.getHandler(".tga"),he="image/tga";break;default:return}if(typeof ie=="string")return"data:"+he+";base64,"+ie;{const pe=new Uint8Array(ie);return window.URL.createObjectURL(new Blob([pe],{type:he}))}}parseTextures(oe){const ie=new Map;if("Texture"in fbxTree.Objects){const ue=fbxTree.Objects.Texture;for(const de in ue){const he=this.parseTexture(ue[de],oe);ie.set(parseInt(de),he)}}return ie}parseTexture(oe,ie){const ue=this.loadTexture(oe,ie);ue.ID=oe.id,ue.name=oe.attrName;const de=oe.WrapModeU,he=oe.WrapModeV,pe=de!==void 0?de.value:0,_e=he!==void 0?he.value:0;if(ue.wrapS=pe===0?RepeatWrapping:ClampToEdgeWrapping,ue.wrapT=_e===0?RepeatWrapping:ClampToEdgeWrapping,"Scaling"in oe){const Ce=oe.Scaling.value;ue.repeat.x=Ce[0],ue.repeat.y=Ce[1]}if("Translation"in oe){const Ce=oe.Translation.value;ue.offset.x=Ce[0],ue.offset.y=Ce[1]}return ue}loadTexture(oe,ie){const ue=new Set(["tga","tif","tiff","exr","dds","hdr","ktx2"]),de=oe.FileName.split(".").pop().toLowerCase(),he=ue.has(de)?this.manager.getHandler(`.${de}`):this.textureLoader;if(!he)return new Texture;const pe=he.path;pe||he.setPath(this.textureLoader.path);const _e=connections.get(oe.id).children;let Ce;_e!==void 0&&_e.length>0&&ie[_e[0].ID]!==void 0&&(Ce=ie[_e[0].ID],(Ce.indexOf("blob:")===0||Ce.indexOf("data:")===0)&&he.setPath(void 0));const xe=he.load(Ce);return he.setPath(pe),xe}parseMaterials(oe){const ie=new Map;if("Material"in fbxTree.Objects){const ue=fbxTree.Objects.Material;for(const de in ue){const he=this.parseMaterial(ue[de],oe);he!==null&&ie.set(parseInt(de),he)}}return ie}parseMaterial(oe,ie){const ue=oe.id,de=oe.attrName;let he=oe.ShadingModel;if(typeof he=="object"&&(he=he.value),!connections.has(ue))return null;const pe=this.parseParameters(oe,ie,ue);let _e;switch(he.toLowerCase()){case"phong":_e=new MeshPhongMaterial;break;case"lambert":_e=new MeshLambertMaterial;break;default:_e=new MeshPhongMaterial;break}return _e.setValues(pe),_e.name=de,_e}parseParameters(oe,ie,ue){const de={};oe.BumpFactor&&(de.bumpScale=oe.BumpFactor.value),oe.Diffuse?de.color=ColorManagement$1.toWorkingColorSpace(new Color$2().fromArray(oe.Diffuse.value),SRGBColorSpace$1):oe.DiffuseColor&&(oe.DiffuseColor.type==="Color"||oe.DiffuseColor.type==="ColorRGB")&&(de.color=ColorManagement$1.toWorkingColorSpace(new Color$2().fromArray(oe.DiffuseColor.value),SRGBColorSpace$1)),oe.DisplacementFactor&&(de.displacementScale=oe.DisplacementFactor.value),oe.Emissive?de.emissive=ColorManagement$1.toWorkingColorSpace(new Color$2().fromArray(oe.Emissive.value),SRGBColorSpace$1):oe.EmissiveColor&&(oe.EmissiveColor.type==="Color"||oe.EmissiveColor.type==="ColorRGB")&&(de.emissive=ColorManagement$1.toWorkingColorSpace(new Color$2().fromArray(oe.EmissiveColor.value),SRGBColorSpace$1)),oe.EmissiveFactor&&(de.emissiveIntensity=parseFloat(oe.EmissiveFactor.value)),de.opacity=1-(oe.TransparencyFactor?parseFloat(oe.TransparencyFactor.value):0),(de.opacity===1||de.opacity===0)&&(de.opacity=oe.Opacity?parseFloat(oe.Opacity.value):null,de.opacity===null&&(de.opacity=1-(oe.TransparentColor?parseFloat(oe.TransparentColor.value[0]):0))),de.opacity<1&&(de.transparent=!0),oe.ReflectionFactor&&(de.reflectivity=oe.ReflectionFactor.value),oe.Shininess&&(de.shininess=oe.Shininess.value),oe.Specular?de.specular=ColorManagement$1.toWorkingColorSpace(new Color$2().fromArray(oe.Specular.value),SRGBColorSpace$1):oe.SpecularColor&&oe.SpecularColor.type==="Color"&&(de.specular=ColorManagement$1.toWorkingColorSpace(new Color$2().fromArray(oe.SpecularColor.value),SRGBColorSpace$1));const he=this;return connections.get(ue).children.forEach(function(pe){switch(pe.relationship){case"Bump":de.bumpMap=he.getTexture(ie,pe.ID);break;case"Maya|TEX_ao_map":de.aoMap=he.getTexture(ie,pe.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":de.map=he.getTexture(ie,pe.ID),de.map!==void 0&&(de.map.colorSpace=SRGBColorSpace$1);break;case"DisplacementColor":de.displacementMap=he.getTexture(ie,pe.ID);break;case"EmissiveColor":de.emissiveMap=he.getTexture(ie,pe.ID),de.emissiveMap!==void 0&&(de.emissiveMap.colorSpace=SRGBColorSpace$1);break;case"NormalMap":case"Maya|TEX_normal_map":de.normalMap=he.getTexture(ie,pe.ID);break;case"ReflectionColor":de.envMap=he.getTexture(ie,pe.ID),de.envMap!==void 0&&(de.envMap.mapping=EquirectangularReflectionMapping,de.envMap.colorSpace=SRGBColorSpace$1);break;case"SpecularColor":de.specularMap=he.getTexture(ie,pe.ID),de.specularMap!==void 0&&(de.specularMap.colorSpace=SRGBColorSpace$1);break;case"TransparentColor":case"TransparencyFactor":de.alphaMap=he.getTexture(ie,pe.ID),de.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:break}}),de}getTexture(oe,ie){return"LayeredTexture"in fbxTree.Objects&&ie in fbxTree.Objects.LayeredTexture&&(ie=connections.get(ie).children[0].ID),oe.get(ie)}parseDeformers(){const oe={},ie={};if("Deformer"in fbxTree.Objects){const ue=fbxTree.Objects.Deformer;for(const de in ue){const he=ue[de],pe=connections.get(parseInt(de));if(he.attrType==="Skin"){const _e=this.parseSkeleton(pe,ue);_e.ID=de,pe.parents.length>1,_e.geometryID=pe.parents[0].ID,oe[de]=_e}else if(he.attrType==="BlendShape"){const _e={id:de};_e.rawTargets=this.parseMorphTargets(pe,ue),_e.id=de,pe.parents.length>1,ie[de]=_e}}}return{skeletons:oe,morphTargets:ie}}parseSkeleton(oe,ie){const ue=[];return oe.children.forEach(function(de){const he=ie[de.ID];if(he.attrType!=="Cluster")return;const pe={ID:de.ID,indices:[],weights:[],transformLink:new Matrix4$1().fromArray(he.TransformLink.a)};"Indexes"in he&&(pe.indices=he.Indexes.a,pe.weights=he.Weights.a),ue.push(pe)}),{rawBones:ue,bones:[]}}parseMorphTargets(oe,ie){const ue=[];for(let de=0;de<oe.children.length;de++){const he=oe.children[de],pe=ie[he.ID],_e={name:pe.attrName,initialWeight:pe.DeformPercent,id:pe.id,fullWeights:pe.FullWeights.a};if(pe.attrType!=="BlendShapeChannel")return;_e.geoID=connections.get(parseInt(he.ID)).children.filter(function(Ce){return Ce.relationship===void 0})[0].ID,ue.push(_e)}return ue}parseScene(oe,ie,ue){sceneGraph=new Group;const de=this.parseModels(oe.skeletons,ie,ue),he=fbxTree.Objects.Model,pe=this;de.forEach(function(Ce){const xe=he[Ce.ID];pe.setLookAtProperties(Ce,xe),connections.get(Ce.ID).parents.forEach(function(Ie){const $e=de.get(Ie.ID);$e!==void 0&&$e.add(Ce)}),Ce.parent===null&&sceneGraph.add(Ce)}),this.bindSkeleton(oe.skeletons,ie,de),this.addGlobalSceneSettings(),sceneGraph.traverse(function(Ce){if(Ce.userData.transformData){Ce.parent&&(Ce.userData.transformData.parentMatrix=Ce.parent.matrix,Ce.userData.transformData.parentMatrixWorld=Ce.parent.matrixWorld);const xe=generateTransform(Ce.userData.transformData);Ce.applyMatrix4(xe),Ce.updateWorldMatrix()}});const _e=new AnimationParser().parse();sceneGraph.children.length===1&&sceneGraph.children[0].isGroup&&(sceneGraph.children[0].animations=_e,sceneGraph=sceneGraph.children[0]),sceneGraph.animations=_e}parseModels(oe,ie,ue){const de=new Map,he=fbxTree.Objects.Model;for(const pe in he){const _e=parseInt(pe),Ce=he[pe],xe=connections.get(_e);let Ie=this.buildSkeleton(xe,oe,_e,Ce.attrName);if(!Ie){switch(Ce.attrType){case"Camera":Ie=this.createCamera(xe);break;case"Light":Ie=this.createLight(xe);break;case"Mesh":Ie=this.createMesh(xe,ie,ue);break;case"NurbsCurve":Ie=this.createCurve(xe,ie);break;case"LimbNode":case"Root":Ie=new Bone;break;case"Null":default:Ie=new Group;break}Ie.name=Ce.attrName?PropertyBinding.sanitizeNodeName(Ce.attrName):"",Ie.userData.originalName=Ce.attrName,Ie.ID=_e}this.getTransformData(Ie,Ce),de.set(_e,Ie)}return de}buildSkeleton(oe,ie,ue,de){let he=null;return oe.parents.forEach(function(pe){for(const _e in ie){const Ce=ie[_e];Ce.rawBones.forEach(function(xe,Ie){if(xe.ID===pe.ID){const $e=he;he=new Bone,he.matrixWorld.copy(xe.transformLink),he.name=de?PropertyBinding.sanitizeNodeName(de):"",he.userData.originalName=de,he.ID=ue,Ce.bones[Ie]=he,$e!==null&&he.add($e)}})}}),he}createCamera(oe){let ie,ue;if(oe.children.forEach(function(de){const he=fbxTree.Objects.NodeAttribute[de.ID];he!==void 0&&(ue=he)}),ue===void 0)ie=new Object3D;else{let de=0;ue.CameraProjectionType!==void 0&&ue.CameraProjectionType.value===1&&(de=1);let he=1;ue.NearPlane!==void 0&&(he=ue.NearPlane.value/1e3);let pe=1e3;ue.FarPlane!==void 0&&(pe=ue.FarPlane.value/1e3);let _e=window.innerWidth,Ce=window.innerHeight;ue.AspectWidth!==void 0&&ue.AspectHeight!==void 0&&(_e=ue.AspectWidth.value,Ce=ue.AspectHeight.value);const xe=_e/Ce;let Ie=45;ue.FieldOfView!==void 0&&(Ie=ue.FieldOfView.value);const $e=ue.FocalLength?ue.FocalLength.value:null;switch(de){case 0:ie=new PerspectiveCamera(Ie,xe,he,pe),$e!==null&&ie.setFocalLength($e);break;case 1:ie=new Object3D;break;default:ie=new Object3D;break}}return ie}createLight(oe){let ie,ue;if(oe.children.forEach(function(de){const he=fbxTree.Objects.NodeAttribute[de.ID];he!==void 0&&(ue=he)}),ue===void 0)ie=new Object3D;else{let de;ue.LightType===void 0?de=0:de=ue.LightType.value;let he=16777215;ue.Color!==void 0&&(he=ColorManagement$1.toWorkingColorSpace(new Color$2().fromArray(ue.Color.value),SRGBColorSpace$1));let pe=ue.Intensity===void 0?1:ue.Intensity.value/100;ue.CastLightOnObject!==void 0&&ue.CastLightOnObject.value===0&&(pe=0);let _e=0;ue.FarAttenuationEnd!==void 0&&(ue.EnableFarAttenuation!==void 0&&ue.EnableFarAttenuation.value===0?_e=0:_e=ue.FarAttenuationEnd.value);const Ce=1;switch(de){case 0:ie=new PointLight(he,pe,_e,Ce);break;case 1:ie=new DirectionalLight(he,pe);break;case 2:let xe=Math.PI/3;ue.InnerAngle!==void 0&&(xe=MathUtils$1.degToRad(ue.InnerAngle.value));let Ie=0;ue.OuterAngle!==void 0&&(Ie=MathUtils$1.degToRad(ue.OuterAngle.value),Ie=Math.max(Ie,1)),ie=new SpotLight(he,pe,_e,xe,Ie,Ce);break;default:ie=new PointLight(he,pe);break}ue.CastShadows!==void 0&&ue.CastShadows.value===1&&(ie.castShadow=!0)}return ie}createMesh(oe,ie,ue){let de,he=null,pe=null;const _e=[];return oe.children.forEach(function(Ce){ie.has(Ce.ID)&&(he=ie.get(Ce.ID)),ue.has(Ce.ID)&&_e.push(ue.get(Ce.ID))}),_e.length>1?pe=_e:_e.length>0?pe=_e[0]:(pe=new MeshPhongMaterial({name:Loader.DEFAULT_MATERIAL_NAME,color:13421772}),_e.push(pe)),"color"in he.attributes&&_e.forEach(function(Ce){Ce.vertexColors=!0}),he.FBX_Deformer?(de=new SkinnedMesh(he,pe),de.normalizeSkinWeights()):de=new Mesh(he,pe),de}createCurve(oe,ie){const ue=oe.children.reduce(function(he,pe){return ie.has(pe.ID)&&(he=ie.get(pe.ID)),he},null),de=new LineBasicMaterial({name:Loader.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new Line(ue,de)}getTransformData(oe,ie){const ue={};"InheritType"in ie&&(ue.inheritType=parseInt(ie.InheritType.value)),"RotationOrder"in ie?ue.eulerOrder=getEulerOrder(ie.RotationOrder.value):ue.eulerOrder=getEulerOrder(0),"Lcl_Translation"in ie&&(ue.translation=ie.Lcl_Translation.value),"PreRotation"in ie&&(ue.preRotation=ie.PreRotation.value),"Lcl_Rotation"in ie&&(ue.rotation=ie.Lcl_Rotation.value),"PostRotation"in ie&&(ue.postRotation=ie.PostRotation.value),"Lcl_Scaling"in ie&&(ue.scale=ie.Lcl_Scaling.value),"ScalingOffset"in ie&&(ue.scalingOffset=ie.ScalingOffset.value),"ScalingPivot"in ie&&(ue.scalingPivot=ie.ScalingPivot.value),"RotationOffset"in ie&&(ue.rotationOffset=ie.RotationOffset.value),"RotationPivot"in ie&&(ue.rotationPivot=ie.RotationPivot.value),oe.userData.transformData=ue}setLookAtProperties(oe,ie){"LookAtProperty"in ie&&connections.get(oe.ID).children.forEach(function(ue){if(ue.relationship==="LookAtProperty"){const de=fbxTree.Objects.Model[ue.ID];if("Lcl_Translation"in de){const he=de.Lcl_Translation.value;oe.target!==void 0?(oe.target.position.fromArray(he),sceneGraph.add(oe.target)):oe.lookAt(new Vector3$1().fromArray(he))}}})}bindSkeleton(oe,ie,ue){const de=this.parsePoseNodes();for(const he in oe){const pe=oe[he];connections.get(parseInt(pe.ID)).parents.forEach(function(_e){if(ie.has(_e.ID)){const Ce=_e.ID;connections.get(Ce).parents.forEach(function(xe){ue.has(xe.ID)&&ue.get(xe.ID).bind(new Skeleton$1(pe.bones),de[xe.ID])})}})}}parsePoseNodes(){const oe={};if("Pose"in fbxTree.Objects){const ie=fbxTree.Objects.Pose;for(const ue in ie)if(ie[ue].attrType==="BindPose"&&ie[ue].NbPoseNodes>0){const de=ie[ue].PoseNode;Array.isArray(de)?de.forEach(function(he){oe[he.Node]=new Matrix4$1().fromArray(he.Matrix.a)}):oe[de.Node]=new Matrix4$1().fromArray(de.Matrix.a)}}return oe}addGlobalSceneSettings(){if("GlobalSettings"in fbxTree){if("AmbientColor"in fbxTree.GlobalSettings){const oe=fbxTree.GlobalSettings.AmbientColor.value,ie=oe[0],ue=oe[1],de=oe[2];if(ie!==0||ue!==0||de!==0){const he=new Color$2().setRGB(ie,ue,de,SRGBColorSpace$1);sceneGraph.add(new AmbientLight(he,1))}}"UnitScaleFactor"in fbxTree.GlobalSettings&&(sceneGraph.userData.unitScaleFactor=fbxTree.GlobalSettings.UnitScaleFactor.value)}}}class GeometryParser{constructor(){this.negativeMaterialIndices=!1}parse(oe){const ie=new Map;if("Geometry"in fbxTree.Objects){const ue=fbxTree.Objects.Geometry;for(const de in ue){const he=connections.get(parseInt(de)),pe=this.parseGeometry(he,ue[de],oe);ie.set(parseInt(de),pe)}}return this.negativeMaterialIndices,ie}parseGeometry(oe,ie,ue){switch(ie.attrType){case"Mesh":return this.parseMeshGeometry(oe,ie,ue);case"NurbsCurve":return this.parseNurbsGeometry(ie)}}parseMeshGeometry(oe,ie,ue){const de=ue.skeletons,he=[],pe=oe.parents.map(function($e){return fbxTree.Objects.Model[$e.ID]});if(pe.length===0)return;const _e=oe.children.reduce(function($e,Ne){return de[Ne.ID]!==void 0&&($e=de[Ne.ID]),$e},null);oe.children.forEach(function($e){ue.morphTargets[$e.ID]!==void 0&&he.push(ue.morphTargets[$e.ID])});const Ce=pe[0],xe={};"RotationOrder"in Ce&&(xe.eulerOrder=getEulerOrder(Ce.RotationOrder.value)),"InheritType"in Ce&&(xe.inheritType=parseInt(Ce.InheritType.value)),"GeometricTranslation"in Ce&&(xe.translation=Ce.GeometricTranslation.value),"GeometricRotation"in Ce&&(xe.rotation=Ce.GeometricRotation.value),"GeometricScaling"in Ce&&(xe.scale=Ce.GeometricScaling.value);const Ie=generateTransform(xe);return this.genGeometry(ie,_e,he,Ie)}genGeometry(oe,ie,ue,de){const he=new BufferGeometry;oe.attrName&&(he.name=oe.attrName);const pe=this.parseGeoNode(oe,ie),_e=this.genBuffers(pe),Ce=new Float32BufferAttribute(_e.vertex,3);if(Ce.applyMatrix4(de),he.setAttribute("position",Ce),_e.colors.length>0&&he.setAttribute("color",new Float32BufferAttribute(_e.colors,3)),ie&&(he.setAttribute("skinIndex",new Uint16BufferAttribute(_e.weightsIndices,4)),he.setAttribute("skinWeight",new Float32BufferAttribute(_e.vertexWeights,4)),he.FBX_Deformer=ie),_e.normal.length>0){const xe=new Matrix3$1().getNormalMatrix(de),Ie=new Float32BufferAttribute(_e.normal,3);Ie.applyNormalMatrix(xe),he.setAttribute("normal",Ie)}if(_e.uvs.forEach(function(xe,Ie){const $e=Ie===0?"uv":`uv${Ie}`;he.setAttribute($e,new Float32BufferAttribute(_e.uvs[Ie],2))}),pe.material&&pe.material.mappingType!=="AllSame"){let xe=_e.materialIndex[0],Ie=0;if(_e.materialIndex.forEach(function($e,Ne){$e!==xe&&(he.addGroup(Ie,Ne-Ie,xe),xe=$e,Ie=Ne)}),he.groups.length>0){const $e=he.groups[he.groups.length-1],Ne=$e.start+$e.count;Ne!==_e.materialIndex.length&&he.addGroup(Ne,_e.materialIndex.length-Ne,xe)}he.groups.length===0&&he.addGroup(0,_e.materialIndex.length,_e.materialIndex[0])}return this.addMorphTargets(he,oe,ue,de),he}parseGeoNode(oe,ie){const ue={};if(ue.vertexPositions=oe.Vertices!==void 0?oe.Vertices.a:[],ue.vertexIndices=oe.PolygonVertexIndex!==void 0?oe.PolygonVertexIndex.a:[],oe.LayerElementColor&&(ue.color=this.parseVertexColors(oe.LayerElementColor[0])),oe.LayerElementMaterial&&(ue.material=this.parseMaterialIndices(oe.LayerElementMaterial[0])),oe.LayerElementNormal&&(ue.normal=this.parseNormals(oe.LayerElementNormal[0])),oe.LayerElementUV){ue.uv=[];let de=0;for(;oe.LayerElementUV[de];)oe.LayerElementUV[de].UV&&ue.uv.push(this.parseUVs(oe.LayerElementUV[de])),de++}return ue.weightTable={},ie!==null&&(ue.skeleton=ie,ie.rawBones.forEach(function(de,he){de.indices.forEach(function(pe,_e){ue.weightTable[pe]===void 0&&(ue.weightTable[pe]=[]),ue.weightTable[pe].push({id:he,weight:de.weights[_e]})})})),ue}genBuffers(oe){const ie={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let ue=0,de=0,he=!1,pe=[],_e=[],Ce=[],xe=[],Ie=[],$e=[];const Ne=this;return oe.vertexIndices.forEach(function(Oe,Fe){let Ve,ze=!1;Oe<0&&(Oe=Oe^-1,ze=!0);let Ue=[],Pt=[];if(pe.push(Oe*3,Oe*3+1,Oe*3+2),oe.color){const qe=getData(Fe,ue,Oe,oe.color);Ce.push(qe[0],qe[1],qe[2])}if(oe.skeleton){if(oe.weightTable[Oe]!==void 0&&oe.weightTable[Oe].forEach(function(qe){Pt.push(qe.weight),Ue.push(qe.id)}),Pt.length>4){he||(he=!0);const qe=[0,0,0,0],Et=[0,0,0,0];Pt.forEach(function(kt,At){let Dt=kt,Lt=Ue[At];Et.forEach(function(jt,_n,bn){if(Dt>jt){bn[_n]=Dt,Dt=jt;const vn=qe[_n];qe[_n]=Lt,Lt=vn}})}),Ue=qe,Pt=Et}for(;Pt.length<4;)Pt.push(0),Ue.push(0);for(let qe=0;qe<4;++qe)Ie.push(Pt[qe]),$e.push(Ue[qe])}if(oe.normal){const qe=getData(Fe,ue,Oe,oe.normal);_e.push(qe[0],qe[1],qe[2])}oe.material&&oe.material.mappingType!=="AllSame"&&(Ve=getData(Fe,ue,Oe,oe.material)[0],Ve<0&&(Ne.negativeMaterialIndices=!0,Ve=0)),oe.uv&&oe.uv.forEach(function(qe,Et){const kt=getData(Fe,ue,Oe,qe);xe[Et]===void 0&&(xe[Et]=[]),xe[Et].push(kt[0]),xe[Et].push(kt[1])}),de++,ze&&(Ne.genFace(ie,oe,pe,Ve,_e,Ce,xe,Ie,$e,de),ue++,de=0,pe=[],_e=[],Ce=[],xe=[],Ie=[],$e=[])}),ie}getNormalNewell(oe){const ie=new Vector3$1(0,0,0);for(let ue=0;ue<oe.length;ue++){const de=oe[ue],he=oe[(ue+1)%oe.length];ie.x+=(de.y-he.y)*(de.z+he.z),ie.y+=(de.z-he.z)*(de.x+he.x),ie.z+=(de.x-he.x)*(de.y+he.y)}return ie.normalize(),ie}getNormalTangentAndBitangent(oe){const ie=this.getNormalNewell(oe),ue=(Math.abs(ie.z)>.5?new Vector3$1(0,1,0):new Vector3$1(0,0,1)).cross(ie).normalize(),de=ie.clone().cross(ue).normalize();return{normal:ie,tangent:ue,bitangent:de}}flattenVertex(oe,ie,ue){return new Vector2$1(oe.dot(ie),oe.dot(ue))}genFace(oe,ie,ue,de,he,pe,_e,Ce,xe,Ie){let $e;if(Ie>3){const Ne=[],Oe=ie.baseVertexPositions||ie.vertexPositions;for(let Ue=0;Ue<ue.length;Ue+=3)Ne.push(new Vector3$1(Oe[ue[Ue]],Oe[ue[Ue+1]],Oe[ue[Ue+2]]));const{tangent:Fe,bitangent:Ve}=this.getNormalTangentAndBitangent(Ne),ze=[];for(const Ue of Ne)ze.push(this.flattenVertex(Ue,Fe,Ve));$e=ShapeUtils$1.triangulateShape(ze,[])}else $e=[[0,1,2]];for(const[Ne,Oe,Fe]of $e)oe.vertex.push(ie.vertexPositions[ue[Ne*3]]),oe.vertex.push(ie.vertexPositions[ue[Ne*3+1]]),oe.vertex.push(ie.vertexPositions[ue[Ne*3+2]]),oe.vertex.push(ie.vertexPositions[ue[Oe*3]]),oe.vertex.push(ie.vertexPositions[ue[Oe*3+1]]),oe.vertex.push(ie.vertexPositions[ue[Oe*3+2]]),oe.vertex.push(ie.vertexPositions[ue[Fe*3]]),oe.vertex.push(ie.vertexPositions[ue[Fe*3+1]]),oe.vertex.push(ie.vertexPositions[ue[Fe*3+2]]),ie.skeleton&&(oe.vertexWeights.push(Ce[Ne*4]),oe.vertexWeights.push(Ce[Ne*4+1]),oe.vertexWeights.push(Ce[Ne*4+2]),oe.vertexWeights.push(Ce[Ne*4+3]),oe.vertexWeights.push(Ce[Oe*4]),oe.vertexWeights.push(Ce[Oe*4+1]),oe.vertexWeights.push(Ce[Oe*4+2]),oe.vertexWeights.push(Ce[Oe*4+3]),oe.vertexWeights.push(Ce[Fe*4]),oe.vertexWeights.push(Ce[Fe*4+1]),oe.vertexWeights.push(Ce[Fe*4+2]),oe.vertexWeights.push(Ce[Fe*4+3]),oe.weightsIndices.push(xe[Ne*4]),oe.weightsIndices.push(xe[Ne*4+1]),oe.weightsIndices.push(xe[Ne*4+2]),oe.weightsIndices.push(xe[Ne*4+3]),oe.weightsIndices.push(xe[Oe*4]),oe.weightsIndices.push(xe[Oe*4+1]),oe.weightsIndices.push(xe[Oe*4+2]),oe.weightsIndices.push(xe[Oe*4+3]),oe.weightsIndices.push(xe[Fe*4]),oe.weightsIndices.push(xe[Fe*4+1]),oe.weightsIndices.push(xe[Fe*4+2]),oe.weightsIndices.push(xe[Fe*4+3])),ie.color&&(oe.colors.push(pe[Ne*3]),oe.colors.push(pe[Ne*3+1]),oe.colors.push(pe[Ne*3+2]),oe.colors.push(pe[Oe*3]),oe.colors.push(pe[Oe*3+1]),oe.colors.push(pe[Oe*3+2]),oe.colors.push(pe[Fe*3]),oe.colors.push(pe[Fe*3+1]),oe.colors.push(pe[Fe*3+2])),ie.material&&ie.material.mappingType!=="AllSame"&&(oe.materialIndex.push(de),oe.materialIndex.push(de),oe.materialIndex.push(de)),ie.normal&&(oe.normal.push(he[Ne*3]),oe.normal.push(he[Ne*3+1]),oe.normal.push(he[Ne*3+2]),oe.normal.push(he[Oe*3]),oe.normal.push(he[Oe*3+1]),oe.normal.push(he[Oe*3+2]),oe.normal.push(he[Fe*3]),oe.normal.push(he[Fe*3+1]),oe.normal.push(he[Fe*3+2])),ie.uv&&ie.uv.forEach(function(Ve,ze){oe.uvs[ze]===void 0&&(oe.uvs[ze]=[]),oe.uvs[ze].push(_e[ze][Ne*2]),oe.uvs[ze].push(_e[ze][Ne*2+1]),oe.uvs[ze].push(_e[ze][Oe*2]),oe.uvs[ze].push(_e[ze][Oe*2+1]),oe.uvs[ze].push(_e[ze][Fe*2]),oe.uvs[ze].push(_e[ze][Fe*2+1])})}addMorphTargets(oe,ie,ue,de){if(ue.length===0)return;oe.morphTargetsRelative=!0,oe.morphAttributes.position=[];const he=this;ue.forEach(function(pe){pe.rawTargets.forEach(function(_e){const Ce=fbxTree.Objects.Geometry[_e.geoID];Ce!==void 0&&he.genMorphGeometry(oe,ie,Ce,de,_e.name)})})}genMorphGeometry(oe,ie,ue,de,he){const pe=ie.Vertices!==void 0?ie.Vertices.a:[],_e=ie.PolygonVertexIndex!==void 0?ie.PolygonVertexIndex.a:[],Ce=ue.Vertices!==void 0?ue.Vertices.a:[],xe=ue.Indexes!==void 0?ue.Indexes.a:[],Ie=oe.attributes.position.count*3,$e=new Float32Array(Ie);for(let Ve=0;Ve<xe.length;Ve++){const ze=xe[Ve]*3;$e[ze]=Ce[Ve*3],$e[ze+1]=Ce[Ve*3+1],$e[ze+2]=Ce[Ve*3+2]}const Ne={vertexIndices:_e,vertexPositions:$e,baseVertexPositions:pe},Oe=this.genBuffers(Ne),Fe=new Float32BufferAttribute(Oe.vertex,3);Fe.name=he||ue.attrName,Fe.applyMatrix4(de),oe.morphAttributes.position.push(Fe)}parseNormals(oe){const ie=oe.MappingInformationType,ue=oe.ReferenceInformationType,de=oe.Normals.a;let he=[];return ue==="IndexToDirect"&&("NormalIndex"in oe?he=oe.NormalIndex.a:"NormalsIndex"in oe&&(he=oe.NormalsIndex.a)),{dataSize:3,buffer:de,indices:he,mappingType:ie,referenceType:ue}}parseUVs(oe){const ie=oe.MappingInformationType,ue=oe.ReferenceInformationType,de=oe.UV.a;let he=[];return ue==="IndexToDirect"&&(he=oe.UVIndex.a),{dataSize:2,buffer:de,indices:he,mappingType:ie,referenceType:ue}}parseVertexColors(oe){const ie=oe.MappingInformationType,ue=oe.ReferenceInformationType,de=oe.Colors.a;let he=[];ue==="IndexToDirect"&&(he=oe.ColorIndex.a);for(let pe=0,_e=new Color$2;pe<de.length;pe+=4)_e.fromArray(de,pe),ColorManagement$1.toWorkingColorSpace(_e,SRGBColorSpace$1),_e.toArray(de,pe);return{dataSize:4,buffer:de,indices:he,mappingType:ie,referenceType:ue}}parseMaterialIndices(oe){const ie=oe.MappingInformationType,ue=oe.ReferenceInformationType;if(ie==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:ue};const de=oe.Materials.a,he=[];for(let pe=0;pe<de.length;++pe)he.push(pe);return{dataSize:1,buffer:de,indices:he,mappingType:ie,referenceType:ue}}parseNurbsGeometry(oe){const ie=parseInt(oe.Order);if(isNaN(ie))return new BufferGeometry;const ue=ie-1,de=oe.KnotVector.a,he=[],pe=oe.Points.a;for(let Ie=0,$e=pe.length;Ie<$e;Ie+=4)he.push(new Vector4().fromArray(pe,Ie));let _e,Ce;if(oe.Form==="Closed")he.push(he[0]);else if(oe.Form==="Periodic"){_e=ue,Ce=de.length-1-_e;for(let Ie=0;Ie<ue;++Ie)he.push(he[Ie])}const xe=new NURBSCurve(ue,de,he,_e,Ce).getPoints(he.length*12);return new BufferGeometry().setFromPoints(xe)}}class AnimationParser{parse(){const oe=[],ie=this.parseClips();if(ie!==void 0)for(const ue in ie){const de=ie[ue],he=this.addClip(de);oe.push(he)}return oe}parseClips(){if(fbxTree.Objects.AnimationCurve===void 0)return;const oe=this.parseAnimationCurveNodes();this.parseAnimationCurves(oe);const ie=this.parseAnimationLayers(oe);return this.parseAnimStacks(ie)}parseAnimationCurveNodes(){const oe=fbxTree.Objects.AnimationCurveNode,ie=new Map;for(const ue in oe){const de=oe[ue];if(de.attrName.match(/S|R|T|DeformPercent/)!==null){const he={id:de.id,attr:de.attrName,curves:{}};ie.set(he.id,he)}}return ie}parseAnimationCurves(oe){const ie=fbxTree.Objects.AnimationCurve;for(const ue in ie){const de={id:ie[ue].id,times:ie[ue].KeyTime.a.map(convertFBXTimeToSeconds),values:ie[ue].KeyValueFloat.a},he=connections.get(de.id);if(he!==void 0){const pe=he.parents[0].ID,_e=he.parents[0].relationship;_e.match(/X/)?oe.get(pe).curves.x=de:_e.match(/Y/)?oe.get(pe).curves.y=de:_e.match(/Z/)?oe.get(pe).curves.z=de:_e.match(/DeformPercent/)&&oe.has(pe)&&(oe.get(pe).curves.morph=de)}}}parseAnimationLayers(oe){const ie=fbxTree.Objects.AnimationLayer,ue=new Map;for(const de in ie){const he=[],pe=connections.get(parseInt(de));pe!==void 0&&(pe.children.forEach(function(_e,Ce){if(oe.has(_e.ID)){const xe=oe.get(_e.ID);if(xe.curves.x!==void 0||xe.curves.y!==void 0||xe.curves.z!==void 0){if(he[Ce]===void 0){const Ie=connections.get(_e.ID).parents.filter(function($e){return $e.relationship!==void 0})[0].ID;if(Ie!==void 0){const $e=fbxTree.Objects.Model[Ie.toString()];if($e===void 0)return;const Ne={modelName:$e.attrName?PropertyBinding.sanitizeNodeName($e.attrName):"",ID:$e.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};sceneGraph.traverse(function(Oe){Oe.ID===$e.id&&(Ne.transform=Oe.matrix,Oe.userData.transformData&&(Ne.eulerOrder=Oe.userData.transformData.eulerOrder))}),Ne.transform||(Ne.transform=new Matrix4$1),"PreRotation"in $e&&(Ne.preRotation=$e.PreRotation.value),"PostRotation"in $e&&(Ne.postRotation=$e.PostRotation.value),he[Ce]=Ne}}he[Ce]&&(he[Ce][xe.attr]=xe)}else if(xe.curves.morph!==void 0){if(he[Ce]===void 0){const Ie=connections.get(_e.ID).parents.filter(function(ze){return ze.relationship!==void 0})[0].ID,$e=connections.get(Ie).parents[0].ID,Ne=connections.get($e).parents[0].ID,Oe=connections.get(Ne).parents[0].ID,Fe=fbxTree.Objects.Model[Oe],Ve={modelName:Fe.attrName?PropertyBinding.sanitizeNodeName(Fe.attrName):"",morphName:fbxTree.Objects.Deformer[Ie].attrName};he[Ce]=Ve}he[Ce][xe.attr]=xe}}}),ue.set(parseInt(de),he))}return ue}parseAnimStacks(oe){const ie=fbxTree.Objects.AnimationStack,ue={};for(const de in ie){const he=connections.get(parseInt(de)).children;he.length>1;const pe=oe.get(he[0].ID);ue[de]={name:ie[de].attrName,layer:pe}}return ue}addClip(oe){let ie=[];const ue=this;return oe.layer.forEach(function(de){ie=ie.concat(ue.generateTracks(de))}),new AnimationClip(oe.name,-1,ie)}generateTracks(oe){const ie=[];let ue=new Vector3$1,de=new Vector3$1;if(oe.transform&&oe.transform.decompose(ue,new Quaternion$1,de),ue=ue.toArray(),de=de.toArray(),oe.T!==void 0&&Object.keys(oe.T.curves).length>0){const he=this.generateVectorTrack(oe.modelName,oe.T.curves,ue,"position");he!==void 0&&ie.push(he)}if(oe.R!==void 0&&Object.keys(oe.R.curves).length>0){const he=this.generateRotationTrack(oe.modelName,oe.R.curves,oe.preRotation,oe.postRotation,oe.eulerOrder);he!==void 0&&ie.push(he)}if(oe.S!==void 0&&Object.keys(oe.S.curves).length>0){const he=this.generateVectorTrack(oe.modelName,oe.S.curves,de,"scale");he!==void 0&&ie.push(he)}if(oe.DeformPercent!==void 0){const he=this.generateMorphTrack(oe);he!==void 0&&ie.push(he)}return ie}generateVectorTrack(oe,ie,ue,de){const he=this.getTimesForAllAxes(ie),pe=this.getKeyframeTrackValues(he,ie,ue);return new VectorKeyframeTrack(oe+"."+de,he,pe)}generateRotationTrack(oe,ie,ue,de,he){let pe,_e;if(ie.x!==void 0&&ie.y!==void 0&&ie.z!==void 0){const Ne=this.interpolateRotations(ie.x,ie.y,ie.z,he);pe=Ne[0],_e=Ne[1]}const Ce=getEulerOrder(0);ue!==void 0&&(ue=ue.map(MathUtils$1.degToRad),ue.push(Ce),ue=new Euler().fromArray(ue),ue=new Quaternion$1().setFromEuler(ue)),de!==void 0&&(de=de.map(MathUtils$1.degToRad),de.push(Ce),de=new Euler().fromArray(de),de=new Quaternion$1().setFromEuler(de).invert());const xe=new Quaternion$1,Ie=new Euler,$e=[];if(!_e||!pe)return new QuaternionKeyframeTrack(oe+".quaternion",[0],[0]);for(let Ne=0;Ne<_e.length;Ne+=3)Ie.set(_e[Ne],_e[Ne+1],_e[Ne+2],he),xe.setFromEuler(Ie),ue!==void 0&&xe.premultiply(ue),de!==void 0&&xe.multiply(de),Ne>2&&new Quaternion$1().fromArray($e,(Ne-3)/3*4).dot(xe)<0&&xe.set(-xe.x,-xe.y,-xe.z,-xe.w),xe.toArray($e,Ne/3*4);return new QuaternionKeyframeTrack(oe+".quaternion",pe,$e)}generateMorphTrack(oe){const ie=oe.DeformPercent.curves.morph,ue=ie.values.map(function(he){return he/100}),de=sceneGraph.getObjectByName(oe.modelName).morphTargetDictionary[oe.morphName];return new NumberKeyframeTrack(oe.modelName+".morphTargetInfluences["+de+"]",ie.times,ue)}getTimesForAllAxes(oe){let ie=[];if(oe.x!==void 0&&(ie=ie.concat(oe.x.times)),oe.y!==void 0&&(ie=ie.concat(oe.y.times)),oe.z!==void 0&&(ie=ie.concat(oe.z.times)),ie=ie.sort(function(ue,de){return ue-de}),ie.length>1){let ue=1,de=ie[0];for(let he=1;he<ie.length;he++){const pe=ie[he];pe!==de&&(ie[ue]=pe,de=pe,ue++)}ie=ie.slice(0,ue)}return ie}getKeyframeTrackValues(oe,ie,ue){const de=ue,he=[];let pe=-1,_e=-1,Ce=-1;return oe.forEach(function(xe){if(ie.x&&(pe=ie.x.times.indexOf(xe)),ie.y&&(_e=ie.y.times.indexOf(xe)),ie.z&&(Ce=ie.z.times.indexOf(xe)),pe!==-1){const Ie=ie.x.values[pe];he.push(Ie),de[0]=Ie}else he.push(de[0]);if(_e!==-1){const Ie=ie.y.values[_e];he.push(Ie),de[1]=Ie}else he.push(de[1]);if(Ce!==-1){const Ie=ie.z.values[Ce];he.push(Ie),de[2]=Ie}else he.push(de[2])}),he}interpolateRotations(oe,ie,ue,de){const he=[],pe=[];he.push(oe.times[0]),pe.push(MathUtils$1.degToRad(oe.values[0])),pe.push(MathUtils$1.degToRad(ie.values[0])),pe.push(MathUtils$1.degToRad(ue.values[0]));for(let _e=1;_e<oe.values.length;_e++){const Ce=[oe.values[_e-1],ie.values[_e-1],ue.values[_e-1]];if(isNaN(Ce[0])||isNaN(Ce[1])||isNaN(Ce[2]))continue;const xe=Ce.map(MathUtils$1.degToRad),Ie=[oe.values[_e],ie.values[_e],ue.values[_e]];if(isNaN(Ie[0])||isNaN(Ie[1])||isNaN(Ie[2]))continue;const $e=Ie.map(MathUtils$1.degToRad),Ne=[Ie[0]-Ce[0],Ie[1]-Ce[1],Ie[2]-Ce[2]],Oe=[Math.abs(Ne[0]),Math.abs(Ne[1]),Math.abs(Ne[2])];if(Oe[0]>=180||Oe[1]>=180||Oe[2]>=180){const Fe=Math.max(...Oe)/180,Ve=new Euler(...xe,de),ze=new Euler(...$e,de),Ue=new Quaternion$1().setFromEuler(Ve),Pt=new Quaternion$1().setFromEuler(ze);Ue.dot(Pt)&&Pt.set(-Pt.x,-Pt.y,-Pt.z,-Pt.w);const qe=oe.times[_e-1],Et=oe.times[_e]-qe,kt=new Quaternion$1,At=new Euler;for(let Dt=0;Dt<1;Dt+=1/Fe)kt.copy(Ue.clone().slerp(Pt.clone(),Dt)),he.push(qe+Dt*Et),At.setFromQuaternion(kt,de),pe.push(At.x),pe.push(At.y),pe.push(At.z)}else he.push(oe.times[_e]),pe.push(MathUtils$1.degToRad(oe.values[_e])),pe.push(MathUtils$1.degToRad(ie.values[_e])),pe.push(MathUtils$1.degToRad(ue.values[_e]))}return[he,pe]}}class TextParser{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(oe){this.nodeStack.push(oe),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(oe,ie){this.currentProp=oe,this.currentPropName=ie}parse(oe){this.currentIndent=0,this.allNodes=new FBXTree,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const ie=this,ue=oe.split(/[\r\n]+/);return ue.forEach(function(de,he){const pe=de.match(/^[\s\t]*;/),_e=de.match(/^[\s\t]*$/);if(pe||_e)return;const Ce=de.match("^\\t{"+ie.currentIndent+"}(\\w+):(.*){",""),xe=de.match("^\\t{"+ie.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),Ie=de.match("^\\t{"+(ie.currentIndent-1)+"}}");Ce?ie.parseNodeBegin(de,Ce):xe?ie.parseNodeProperty(de,xe,ue[++he]):Ie?ie.popStack():de.match(/^[^\s\t}]/)&&ie.parseNodePropertyContinued(de)}),this.allNodes}parseNodeBegin(oe,ie){const ue=ie[1].trim().replace(/^"/,"").replace(/"$/,""),de=ie[2].split(",").map(function(Ce){return Ce.trim().replace(/^"/,"").replace(/"$/,"")}),he={name:ue},pe=this.parseNodeAttr(de),_e=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(ue,he):ue in _e?(ue==="PoseNode"?_e.PoseNode.push(he):_e[ue].id!==void 0&&(_e[ue]={},_e[ue][_e[ue].id]=_e[ue]),pe.id!==""&&(_e[ue][pe.id]=he)):typeof pe.id=="number"?(_e[ue]={},_e[ue][pe.id]=he):ue!=="Properties70"&&(ue==="PoseNode"?_e[ue]=[he]:_e[ue]=he),typeof pe.id=="number"&&(he.id=pe.id),pe.name!==""&&(he.attrName=pe.name),pe.type!==""&&(he.attrType=pe.type),this.pushStack(he)}parseNodeAttr(oe){let ie=oe[0];oe[0]!==""&&(ie=parseInt(oe[0]),isNaN(ie)&&(ie=oe[0]));let ue="",de="";return oe.length>1&&(ue=oe[1].replace(/^(\w+)::/,""),de=oe[2]),{id:ie,name:ue,type:de}}parseNodeProperty(oe,ie,ue){let de=ie[1].replace(/^"/,"").replace(/"$/,"").trim(),he=ie[2].replace(/^"/,"").replace(/"$/,"").trim();de==="Content"&&he===","&&(he=ue.replace(/"/g,"").replace(/,$/,"").trim());const pe=this.getCurrentNode();if(pe.name==="Properties70"){this.parseNodeSpecialProperty(oe,de,he);return}if(de==="C"){const _e=he.split(",").slice(1),Ce=parseInt(_e[0]),xe=parseInt(_e[1]);let Ie=he.split(",").slice(3);Ie=Ie.map(function($e){return $e.trim().replace(/^"/,"")}),de="connections",he=[Ce,xe],append(he,Ie),pe[de]===void 0&&(pe[de]=[])}de==="Node"&&(pe.id=he),de in pe&&Array.isArray(pe[de])?pe[de].push(he):de!=="a"?pe[de]=he:pe.a=he,this.setCurrentProp(pe,de),de==="a"&&he.slice(-1)!==","&&(pe.a=parseNumberArray(he))}parseNodePropertyContinued(oe){const ie=this.getCurrentNode();ie.a+=oe,oe.slice(-1)!==","&&(ie.a=parseNumberArray(ie.a))}parseNodeSpecialProperty(oe,ie,ue){const de=ue.split('",').map(function(Ie){return Ie.trim().replace(/^\"/,"").replace(/\s/,"_")}),he=de[0],pe=de[1],_e=de[2],Ce=de[3];let xe=de[4];switch(pe){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":xe=parseFloat(xe);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":xe=parseNumberArray(xe);break}this.getPrevNode()[he]={type:pe,type2:_e,flag:Ce,value:xe},this.setCurrentProp(this.getPrevNode(),he)}}class BinaryParser{parse(oe){const ie=new BinaryReader(oe);ie.skip(23);const ue=ie.getUint32();if(ue<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+ue);const de=new FBXTree;for(;!this.endOfContent(ie);){const he=this.parseNode(ie,ue);he!==null&&de.add(he.name,he)}return de}endOfContent(oe){return oe.size()%16===0?(oe.getOffset()+160+16&-16)>=oe.size():oe.getOffset()+160+16>=oe.size()}parseNode(oe,ie){const ue={},de=ie>=7500?oe.getUint64():oe.getUint32(),he=ie>=7500?oe.getUint64():oe.getUint32();ie>=7500?oe.getUint64():oe.getUint32();const pe=oe.getUint8(),_e=oe.getString(pe);if(de===0)return null;const Ce=[];for(let Ne=0;Ne<he;Ne++)Ce.push(this.parseProperty(oe));const xe=Ce.length>0?Ce[0]:"",Ie=Ce.length>1?Ce[1]:"",$e=Ce.length>2?Ce[2]:"";for(ue.singleProperty=he===1&&oe.getOffset()===de;de>oe.getOffset();){const Ne=this.parseNode(oe,ie);Ne!==null&&this.parseSubNode(_e,ue,Ne)}return ue.propertyList=Ce,typeof xe=="number"&&(ue.id=xe),Ie!==""&&(ue.attrName=Ie),$e!==""&&(ue.attrType=$e),_e!==""&&(ue.name=_e),ue}parseSubNode(oe,ie,ue){if(ue.singleProperty===!0){const de=ue.propertyList[0];Array.isArray(de)?(ie[ue.name]=ue,ue.a=de):ie[ue.name]=de}else if(oe==="Connections"&&ue.name==="C"){const de=[];ue.propertyList.forEach(function(he,pe){pe!==0&&de.push(he)}),ie.connections===void 0&&(ie.connections=[]),ie.connections.push(de)}else if(ue.name==="Properties70")Object.keys(ue).forEach(function(de){ie[de]=ue[de]});else if(oe==="Properties70"&&ue.name==="P"){let de=ue.propertyList[0],he=ue.propertyList[1];const pe=ue.propertyList[2],_e=ue.propertyList[3];let Ce;de.indexOf("Lcl ")===0&&(de=de.replace("Lcl ","Lcl_")),he.indexOf("Lcl ")===0&&(he=he.replace("Lcl ","Lcl_")),he==="Color"||he==="ColorRGB"||he==="Vector"||he==="Vector3D"||he.indexOf("Lcl_")===0?Ce=[ue.propertyList[4],ue.propertyList[5],ue.propertyList[6]]:Ce=ue.propertyList[4],ie[de]={type:he,type2:pe,flag:_e,value:Ce}}else ie[ue.name]===void 0?typeof ue.id=="number"?(ie[ue.name]={},ie[ue.name][ue.id]=ue):ie[ue.name]=ue:ue.name==="PoseNode"?(Array.isArray(ie[ue.name])||(ie[ue.name]=[ie[ue.name]]),ie[ue.name].push(ue)):ie[ue.name][ue.id]===void 0&&(ie[ue.name][ue.id]=ue)}parseProperty(oe){const ie=oe.getString(1);let ue;switch(ie){case"C":return oe.getBoolean();case"D":return oe.getFloat64();case"F":return oe.getFloat32();case"I":return oe.getInt32();case"L":return oe.getInt64();case"R":return ue=oe.getUint32(),oe.getArrayBuffer(ue);case"S":return ue=oe.getUint32(),oe.getString(ue);case"Y":return oe.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const de=oe.getUint32(),he=oe.getUint32(),pe=oe.getUint32();if(he===0)switch(ie){case"b":case"c":return oe.getBooleanArray(de);case"d":return oe.getFloat64Array(de);case"f":return oe.getFloat32Array(de);case"i":return oe.getInt32Array(de);case"l":return oe.getInt64Array(de)}const _e=unzlibSync(new Uint8Array(oe.getArrayBuffer(pe))),Ce=new BinaryReader(_e.buffer);switch(ie){case"b":case"c":return Ce.getBooleanArray(de);case"d":return Ce.getFloat64Array(de);case"f":return Ce.getFloat32Array(de);case"i":return Ce.getInt32Array(de);case"l":return Ce.getInt64Array(de)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+ie)}}}class BinaryReader{constructor(oe,ie){this.dv=new DataView(oe),this.offset=0,this.littleEndian=ie!==void 0?ie:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(oe){this.offset+=oe}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(oe){const ie=[];for(let ue=0;ue<oe;ue++)ie.push(this.getBoolean());return ie}getUint8(){const oe=this.dv.getUint8(this.offset);return this.offset+=1,oe}getInt16(){const oe=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,oe}getInt32(){const oe=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,oe}getInt32Array(oe){const ie=[];for(let ue=0;ue<oe;ue++)ie.push(this.getInt32());return ie}getUint32(){const oe=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,oe}getInt64(){let oe,ie;return this.littleEndian?(oe=this.getUint32(),ie=this.getUint32()):(ie=this.getUint32(),oe=this.getUint32()),ie&2147483648?(ie=~ie&4294967295,oe=~oe&4294967295,oe===4294967295&&(ie=ie+1&4294967295),oe=oe+1&4294967295,-(ie*4294967296+oe)):ie*4294967296+oe}getInt64Array(oe){const ie=[];for(let ue=0;ue<oe;ue++)ie.push(this.getInt64());return ie}getUint64(){let oe,ie;return this.littleEndian?(oe=this.getUint32(),ie=this.getUint32()):(ie=this.getUint32(),oe=this.getUint32()),ie*4294967296+oe}getFloat32(){const oe=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,oe}getFloat32Array(oe){const ie=[];for(let ue=0;ue<oe;ue++)ie.push(this.getFloat32());return ie}getFloat64(){const oe=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,oe}getFloat64Array(oe){const ie=[];for(let ue=0;ue<oe;ue++)ie.push(this.getFloat64());return ie}getArrayBuffer(oe){const ie=this.dv.buffer.slice(this.offset,this.offset+oe);return this.offset+=oe,ie}getString(oe){const ie=this.offset;let ue=new Uint8Array(this.dv.buffer,ie,oe);this.skip(oe);const de=ue.indexOf(0);return de>=0&&(ue=new Uint8Array(this.dv.buffer,ie,de)),this._textDecoder.decode(ue)}}class FBXTree{add(oe,ie){this[oe]=ie}}function isFbxFormatBinary(le){const oe="Kaydara FBX Binary  \0";return le.byteLength>=oe.length&&oe===convertArrayBufferToString(le,0,oe.length)}function isFbxFormatASCII(le){const oe=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let ie=0;function ue(de){const he=le[de-1];return le=le.slice(ie+de),ie++,he}for(let de=0;de<oe.length;++de)if(ue(1)===oe[de])return!1;return!0}function getFbxVersion(le){const oe=/FBXVersion: (\d+)/,ie=le.match(oe);if(ie)return parseInt(ie[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function convertFBXTimeToSeconds(le){return le/46186158e3}const dataArray=[];function getData(le,oe,ie,ue){let de;switch(ue.mappingType){case"ByPolygonVertex":de=le;break;case"ByPolygon":de=oe;break;case"ByVertice":de=ie;break;case"AllSame":de=ue.indices[0];break;default:}ue.referenceType==="IndexToDirect"&&(de=ue.indices[de]);const he=de*ue.dataSize,pe=he+ue.dataSize;return slice$1(dataArray,ue.buffer,he,pe)}const tempEuler=new Euler,tempVec=new Vector3$1;function generateTransform(le){const oe=new Matrix4$1,ie=new Matrix4$1,ue=new Matrix4$1,de=new Matrix4$1,he=new Matrix4$1,pe=new Matrix4$1,_e=new Matrix4$1,Ce=new Matrix4$1,xe=new Matrix4$1,Ie=new Matrix4$1,$e=new Matrix4$1,Ne=new Matrix4$1,Oe=le.inheritType?le.inheritType:0;le.translation&&oe.setPosition(tempVec.fromArray(le.translation));const Fe=getEulerOrder(0);if(le.preRotation){const bn=le.preRotation.map(MathUtils$1.degToRad);bn.push(Fe),ie.makeRotationFromEuler(tempEuler.fromArray(bn))}if(le.rotation){const bn=le.rotation.map(MathUtils$1.degToRad);bn.push(le.eulerOrder||Fe),ue.makeRotationFromEuler(tempEuler.fromArray(bn))}if(le.postRotation){const bn=le.postRotation.map(MathUtils$1.degToRad);bn.push(Fe),de.makeRotationFromEuler(tempEuler.fromArray(bn)),de.invert()}le.scale&&he.scale(tempVec.fromArray(le.scale)),le.scalingOffset&&_e.setPosition(tempVec.fromArray(le.scalingOffset)),le.scalingPivot&&pe.setPosition(tempVec.fromArray(le.scalingPivot)),le.rotationOffset&&Ce.setPosition(tempVec.fromArray(le.rotationOffset)),le.rotationPivot&&xe.setPosition(tempVec.fromArray(le.rotationPivot)),le.parentMatrixWorld&&($e.copy(le.parentMatrix),Ie.copy(le.parentMatrixWorld));const Ve=ie.clone().multiply(ue).multiply(de),ze=new Matrix4$1;ze.extractRotation(Ie);const Ue=new Matrix4$1;Ue.copyPosition(Ie);const Pt=Ue.clone().invert().multiply(Ie),qe=ze.clone().invert().multiply(Pt),Et=he,kt=new Matrix4$1;if(Oe===0)kt.copy(ze).multiply(Ve).multiply(qe).multiply(Et);else if(Oe===1)kt.copy(ze).multiply(qe).multiply(Ve).multiply(Et);else{const bn=new Matrix4$1().scale(new Vector3$1().setFromMatrixScale($e)).clone().invert(),vn=qe.clone().multiply(bn);kt.copy(ze).multiply(Ve).multiply(vn).multiply(Et)}const At=xe.clone().invert(),Dt=pe.clone().invert();let Lt=oe.clone().multiply(Ce).multiply(xe).multiply(ie).multiply(ue).multiply(de).multiply(At).multiply(_e).multiply(pe).multiply(he).multiply(Dt);const jt=new Matrix4$1().copyPosition(Lt),_n=Ie.clone().multiply(jt);return Ne.copyPosition(_n),Lt=Ne.clone().multiply(kt),Lt.premultiply(Ie.invert()),Lt}function getEulerOrder(le){le=le||0;const oe=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return le===6?oe[0]:oe[le]}function parseNumberArray(le){return le.split(",").map(function(oe){return parseFloat(oe)})}function convertArrayBufferToString(le,oe,ie){return oe===void 0&&(oe=0),ie===void 0&&(ie=le.byteLength),new TextDecoder().decode(new Uint8Array(le,oe,ie))}function append(le,oe){for(let ie=0,ue=le.length,de=oe.length;ie<de;ie++,ue++)le[ue]=oe[ie]}function slice$1(le,oe,ie,ue){for(let de=ie,he=0;de<ue;de++,he++)le[he]=oe[de];return le}let GLTFLoader$1=class extends Loader{constructor(le){super(le),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(oe){return new GLTFMaterialsClearcoatExtension$1(oe)}),this.register(function(oe){return new GLTFMaterialsDispersionExtension(oe)}),this.register(function(oe){return new GLTFTextureBasisUExtension$1(oe)}),this.register(function(oe){return new GLTFTextureWebPExtension$1(oe)}),this.register(function(oe){return new GLTFTextureAVIFExtension$1(oe)}),this.register(function(oe){return new GLTFMaterialsSheenExtension$1(oe)}),this.register(function(oe){return new GLTFMaterialsTransmissionExtension$1(oe)}),this.register(function(oe){return new GLTFMaterialsVolumeExtension$1(oe)}),this.register(function(oe){return new GLTFMaterialsIorExtension$1(oe)}),this.register(function(oe){return new GLTFMaterialsEmissiveStrengthExtension$1(oe)}),this.register(function(oe){return new GLTFMaterialsSpecularExtension$1(oe)}),this.register(function(oe){return new GLTFMaterialsIridescenceExtension$1(oe)}),this.register(function(oe){return new GLTFMaterialsAnisotropyExtension$1(oe)}),this.register(function(oe){return new GLTFMaterialsBumpExtension(oe)}),this.register(function(oe){return new GLTFLightsExtension$1(oe)}),this.register(function(oe){return new GLTFMeshoptCompression$1(oe)}),this.register(function(oe){return new GLTFMeshGpuInstancing$1(oe)})}load(le,oe,ie,ue){const de=this;let he;if(this.resourcePath!=="")he=this.resourcePath;else if(this.path!==""){const Ce=LoaderUtils.extractUrlBase(le);he=LoaderUtils.resolveURL(Ce,this.path)}else he=LoaderUtils.extractUrlBase(le);this.manager.itemStart(le);const pe=function(Ce){ue&&ue(Ce),de.manager.itemError(le),de.manager.itemEnd(le)},_e=new FileLoader(this.manager);_e.setPath(this.path),_e.setResponseType("arraybuffer"),_e.setRequestHeader(this.requestHeader),_e.setWithCredentials(this.withCredentials),_e.load(le,function(Ce){try{de.parse(Ce,he,function(xe){oe(xe),de.manager.itemEnd(le)},pe)}catch(xe){pe(xe)}},ie,pe)}setDRACOLoader(le){return this.dracoLoader=le,this}setKTX2Loader(le){return this.ktx2Loader=le,this}setMeshoptDecoder(le){return this.meshoptDecoder=le,this}register(le){return this.pluginCallbacks.indexOf(le)===-1&&this.pluginCallbacks.push(le),this}unregister(le){return this.pluginCallbacks.indexOf(le)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(le),1),this}parse(le,oe,ie,ue){let de;const he={},pe={},_e=new TextDecoder;if(typeof le=="string")de=JSON.parse(le);else if(le instanceof ArrayBuffer)if(_e.decode(new Uint8Array(le,0,4))===BINARY_EXTENSION_HEADER_MAGIC$1){try{he[EXTENSIONS$1.KHR_BINARY_GLTF]=new GLTFBinaryExtension$1(le)}catch(xe){ue&&ue(xe);return}de=JSON.parse(he[EXTENSIONS$1.KHR_BINARY_GLTF].content)}else de=JSON.parse(_e.decode(le));else de=le;if(de.asset===void 0||de.asset.version[0]<2){ue&&ue(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const Ce=new GLTFParser$1(de,{path:oe||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});Ce.fileLoader.setRequestHeader(this.requestHeader);for(let xe=0;xe<this.pluginCallbacks.length;xe++){const Ie=this.pluginCallbacks[xe](Ce);Ie.name,pe[Ie.name]=Ie,he[Ie.name]=!0}if(de.extensionsUsed)for(let xe=0;xe<de.extensionsUsed.length;++xe){const Ie=de.extensionsUsed[xe],$e=de.extensionsRequired||[];switch(Ie){case EXTENSIONS$1.KHR_MATERIALS_UNLIT:he[Ie]=new GLTFMaterialsUnlitExtension$1;break;case EXTENSIONS$1.KHR_DRACO_MESH_COMPRESSION:he[Ie]=new GLTFDracoMeshCompressionExtension$1(de,this.dracoLoader);break;case EXTENSIONS$1.KHR_TEXTURE_TRANSFORM:he[Ie]=new GLTFTextureTransformExtension$1;break;case EXTENSIONS$1.KHR_MESH_QUANTIZATION:he[Ie]=new GLTFMeshQuantizationExtension$1;break;default:$e.indexOf(Ie)>=0&&pe[Ie]}}Ce.setExtensions(he),Ce.setPlugins(pe),Ce.parse(ie,ue)}parseAsync(le,oe){const ie=this;return new Promise(function(ue,de){ie.parse(le,oe,ue,de)})}};function GLTFRegistry$1(){let le={};return{get:function(oe){return le[oe]},add:function(oe,ie){le[oe]=ie},remove:function(oe){delete le[oe]},removeAll:function(){le={}}}}const EXTENSIONS$1={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};let GLTFLightsExtension$1=class{constructor(le){this.parser=le,this.name=EXTENSIONS$1.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const le=this.parser,oe=this.parser.json.nodes||[];for(let ie=0,ue=oe.length;ie<ue;ie++){const de=oe[ie];de.extensions&&de.extensions[this.name]&&de.extensions[this.name].light!==void 0&&le._addNodeRef(this.cache,de.extensions[this.name].light)}}_loadLight(le){const oe=this.parser,ie="light:"+le;let ue=oe.cache.get(ie);if(ue)return ue;const de=oe.json,he=((de.extensions&&de.extensions[this.name]||{}).lights||[])[le];let pe;const _e=new Color$2(16777215);he.color!==void 0&&_e.setRGB(he.color[0],he.color[1],he.color[2],LinearSRGBColorSpace$1);const Ce=he.range!==void 0?he.range:0;switch(he.type){case"directional":pe=new DirectionalLight(_e),pe.target.position.set(0,0,-1),pe.add(pe.target);break;case"point":pe=new PointLight(_e),pe.distance=Ce;break;case"spot":pe=new SpotLight(_e),pe.distance=Ce,he.spot=he.spot||{},he.spot.innerConeAngle=he.spot.innerConeAngle!==void 0?he.spot.innerConeAngle:0,he.spot.outerConeAngle=he.spot.outerConeAngle!==void 0?he.spot.outerConeAngle:Math.PI/4,pe.angle=he.spot.outerConeAngle,pe.penumbra=1-he.spot.innerConeAngle/he.spot.outerConeAngle,pe.target.position.set(0,0,-1),pe.add(pe.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+he.type)}return pe.position.set(0,0,0),pe.decay=2,assignExtrasToUserData$1(pe,he),he.intensity!==void 0&&(pe.intensity=he.intensity),pe.name=oe.createUniqueName(he.name||"light_"+le),ue=Promise.resolve(pe),oe.cache.add(ie,ue),ue}getDependency(le,oe){if(le==="light")return this._loadLight(oe)}createNodeAttachment(le){const oe=this,ie=this.parser,ue=ie.json.nodes[le],de=(ue.extensions&&ue.extensions[this.name]||{}).light;return de===void 0?null:this._loadLight(de).then(function(he){return ie._getNodeRef(oe.cache,de,he)})}},GLTFMaterialsUnlitExtension$1=class{constructor(){this.name=EXTENSIONS$1.KHR_MATERIALS_UNLIT}getMaterialType(){return MeshBasicMaterial}extendParams(le,oe,ie){const ue=[];le.color=new Color$2(1,1,1),le.opacity=1;const de=oe.pbrMetallicRoughness;if(de){if(Array.isArray(de.baseColorFactor)){const he=de.baseColorFactor;le.color.setRGB(he[0],he[1],he[2],LinearSRGBColorSpace$1),le.opacity=he[3]}de.baseColorTexture!==void 0&&ue.push(ie.assignTexture(le,"map",de.baseColorTexture,SRGBColorSpace$1))}return Promise.all(ue)}},GLTFMaterialsEmissiveStrengthExtension$1=class{constructor(le){this.parser=le,this.name=EXTENSIONS$1.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(le,oe){const ie=this.parser.json.materials[le];if(!ie.extensions||!ie.extensions[this.name])return Promise.resolve();const ue=ie.extensions[this.name].emissiveStrength;return ue!==void 0&&(oe.emissiveIntensity=ue),Promise.resolve()}},GLTFMaterialsClearcoatExtension$1=class{constructor(le){this.parser=le,this.name=EXTENSIONS$1.KHR_MATERIALS_CLEARCOAT}getMaterialType(le){const oe=this.parser.json.materials[le];return!oe.extensions||!oe.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(le,oe){const ie=this.parser,ue=ie.json.materials[le];if(!ue.extensions||!ue.extensions[this.name])return Promise.resolve();const de=[],he=ue.extensions[this.name];if(he.clearcoatFactor!==void 0&&(oe.clearcoat=he.clearcoatFactor),he.clearcoatTexture!==void 0&&de.push(ie.assignTexture(oe,"clearcoatMap",he.clearcoatTexture)),he.clearcoatRoughnessFactor!==void 0&&(oe.clearcoatRoughness=he.clearcoatRoughnessFactor),he.clearcoatRoughnessTexture!==void 0&&de.push(ie.assignTexture(oe,"clearcoatRoughnessMap",he.clearcoatRoughnessTexture)),he.clearcoatNormalTexture!==void 0&&(de.push(ie.assignTexture(oe,"clearcoatNormalMap",he.clearcoatNormalTexture)),he.clearcoatNormalTexture.scale!==void 0)){const pe=he.clearcoatNormalTexture.scale;oe.clearcoatNormalScale=new Vector2$1(pe,pe)}return Promise.all(de)}};class GLTFMaterialsDispersionExtension{constructor(oe){this.parser=oe,this.name=EXTENSIONS$1.KHR_MATERIALS_DISPERSION}getMaterialType(oe){const ie=this.parser.json.materials[oe];return!ie.extensions||!ie.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(oe,ie){const ue=this.parser.json.materials[oe];if(!ue.extensions||!ue.extensions[this.name])return Promise.resolve();const de=ue.extensions[this.name];return ie.dispersion=de.dispersion!==void 0?de.dispersion:0,Promise.resolve()}}let GLTFMaterialsIridescenceExtension$1=class{constructor(le){this.parser=le,this.name=EXTENSIONS$1.KHR_MATERIALS_IRIDESCENCE}getMaterialType(le){const oe=this.parser.json.materials[le];return!oe.extensions||!oe.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(le,oe){const ie=this.parser,ue=ie.json.materials[le];if(!ue.extensions||!ue.extensions[this.name])return Promise.resolve();const de=[],he=ue.extensions[this.name];return he.iridescenceFactor!==void 0&&(oe.iridescence=he.iridescenceFactor),he.iridescenceTexture!==void 0&&de.push(ie.assignTexture(oe,"iridescenceMap",he.iridescenceTexture)),he.iridescenceIor!==void 0&&(oe.iridescenceIOR=he.iridescenceIor),oe.iridescenceThicknessRange===void 0&&(oe.iridescenceThicknessRange=[100,400]),he.iridescenceThicknessMinimum!==void 0&&(oe.iridescenceThicknessRange[0]=he.iridescenceThicknessMinimum),he.iridescenceThicknessMaximum!==void 0&&(oe.iridescenceThicknessRange[1]=he.iridescenceThicknessMaximum),he.iridescenceThicknessTexture!==void 0&&de.push(ie.assignTexture(oe,"iridescenceThicknessMap",he.iridescenceThicknessTexture)),Promise.all(de)}},GLTFMaterialsSheenExtension$1=class{constructor(le){this.parser=le,this.name=EXTENSIONS$1.KHR_MATERIALS_SHEEN}getMaterialType(le){const oe=this.parser.json.materials[le];return!oe.extensions||!oe.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(le,oe){const ie=this.parser,ue=ie.json.materials[le];if(!ue.extensions||!ue.extensions[this.name])return Promise.resolve();const de=[];oe.sheenColor=new Color$2(0,0,0),oe.sheenRoughness=0,oe.sheen=1;const he=ue.extensions[this.name];if(he.sheenColorFactor!==void 0){const pe=he.sheenColorFactor;oe.sheenColor.setRGB(pe[0],pe[1],pe[2],LinearSRGBColorSpace$1)}return he.sheenRoughnessFactor!==void 0&&(oe.sheenRoughness=he.sheenRoughnessFactor),he.sheenColorTexture!==void 0&&de.push(ie.assignTexture(oe,"sheenColorMap",he.sheenColorTexture,SRGBColorSpace$1)),he.sheenRoughnessTexture!==void 0&&de.push(ie.assignTexture(oe,"sheenRoughnessMap",he.sheenRoughnessTexture)),Promise.all(de)}},GLTFMaterialsTransmissionExtension$1=class{constructor(le){this.parser=le,this.name=EXTENSIONS$1.KHR_MATERIALS_TRANSMISSION}getMaterialType(le){const oe=this.parser.json.materials[le];return!oe.extensions||!oe.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(le,oe){const ie=this.parser,ue=ie.json.materials[le];if(!ue.extensions||!ue.extensions[this.name])return Promise.resolve();const de=[],he=ue.extensions[this.name];return he.transmissionFactor!==void 0&&(oe.transmission=he.transmissionFactor),he.transmissionTexture!==void 0&&de.push(ie.assignTexture(oe,"transmissionMap",he.transmissionTexture)),Promise.all(de)}},GLTFMaterialsVolumeExtension$1=class{constructor(le){this.parser=le,this.name=EXTENSIONS$1.KHR_MATERIALS_VOLUME}getMaterialType(le){const oe=this.parser.json.materials[le];return!oe.extensions||!oe.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(le,oe){const ie=this.parser,ue=ie.json.materials[le];if(!ue.extensions||!ue.extensions[this.name])return Promise.resolve();const de=[],he=ue.extensions[this.name];oe.thickness=he.thicknessFactor!==void 0?he.thicknessFactor:0,he.thicknessTexture!==void 0&&de.push(ie.assignTexture(oe,"thicknessMap",he.thicknessTexture)),oe.attenuationDistance=he.attenuationDistance||1/0;const pe=he.attenuationColor||[1,1,1];return oe.attenuationColor=new Color$2().setRGB(pe[0],pe[1],pe[2],LinearSRGBColorSpace$1),Promise.all(de)}},GLTFMaterialsIorExtension$1=class{constructor(le){this.parser=le,this.name=EXTENSIONS$1.KHR_MATERIALS_IOR}getMaterialType(le){const oe=this.parser.json.materials[le];return!oe.extensions||!oe.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(le,oe){const ie=this.parser.json.materials[le];if(!ie.extensions||!ie.extensions[this.name])return Promise.resolve();const ue=ie.extensions[this.name];return oe.ior=ue.ior!==void 0?ue.ior:1.5,Promise.resolve()}},GLTFMaterialsSpecularExtension$1=class{constructor(le){this.parser=le,this.name=EXTENSIONS$1.KHR_MATERIALS_SPECULAR}getMaterialType(le){const oe=this.parser.json.materials[le];return!oe.extensions||!oe.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(le,oe){const ie=this.parser,ue=ie.json.materials[le];if(!ue.extensions||!ue.extensions[this.name])return Promise.resolve();const de=[],he=ue.extensions[this.name];oe.specularIntensity=he.specularFactor!==void 0?he.specularFactor:1,he.specularTexture!==void 0&&de.push(ie.assignTexture(oe,"specularIntensityMap",he.specularTexture));const pe=he.specularColorFactor||[1,1,1];return oe.specularColor=new Color$2().setRGB(pe[0],pe[1],pe[2],LinearSRGBColorSpace$1),he.specularColorTexture!==void 0&&de.push(ie.assignTexture(oe,"specularColorMap",he.specularColorTexture,SRGBColorSpace$1)),Promise.all(de)}};class GLTFMaterialsBumpExtension{constructor(oe){this.parser=oe,this.name=EXTENSIONS$1.EXT_MATERIALS_BUMP}getMaterialType(oe){const ie=this.parser.json.materials[oe];return!ie.extensions||!ie.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(oe,ie){const ue=this.parser,de=ue.json.materials[oe];if(!de.extensions||!de.extensions[this.name])return Promise.resolve();const he=[],pe=de.extensions[this.name];return ie.bumpScale=pe.bumpFactor!==void 0?pe.bumpFactor:1,pe.bumpTexture!==void 0&&he.push(ue.assignTexture(ie,"bumpMap",pe.bumpTexture)),Promise.all(he)}}let GLTFMaterialsAnisotropyExtension$1=class{constructor(le){this.parser=le,this.name=EXTENSIONS$1.KHR_MATERIALS_ANISOTROPY}getMaterialType(le){const oe=this.parser.json.materials[le];return!oe.extensions||!oe.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(le,oe){const ie=this.parser,ue=ie.json.materials[le];if(!ue.extensions||!ue.extensions[this.name])return Promise.resolve();const de=[],he=ue.extensions[this.name];return he.anisotropyStrength!==void 0&&(oe.anisotropy=he.anisotropyStrength),he.anisotropyRotation!==void 0&&(oe.anisotropyRotation=he.anisotropyRotation),he.anisotropyTexture!==void 0&&de.push(ie.assignTexture(oe,"anisotropyMap",he.anisotropyTexture)),Promise.all(de)}},GLTFTextureBasisUExtension$1=class{constructor(le){this.parser=le,this.name=EXTENSIONS$1.KHR_TEXTURE_BASISU}loadTexture(le){const oe=this.parser,ie=oe.json,ue=ie.textures[le];if(!ue.extensions||!ue.extensions[this.name])return null;const de=ue.extensions[this.name],he=oe.options.ktx2Loader;if(!he){if(ie.extensionsRequired&&ie.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return oe.loadTextureImage(le,de.source,he)}},GLTFTextureWebPExtension$1=class{constructor(le){this.parser=le,this.name=EXTENSIONS$1.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(le){const oe=this.name,ie=this.parser,ue=ie.json,de=ue.textures[le];if(!de.extensions||!de.extensions[oe])return null;const he=de.extensions[oe],pe=ue.images[he.source];let _e=ie.textureLoader;if(pe.uri){const Ce=ie.options.manager.getHandler(pe.uri);Ce!==null&&(_e=Ce)}return this.detectSupport().then(function(Ce){if(Ce)return ie.loadTextureImage(le,he.source,_e);if(ue.extensionsRequired&&ue.extensionsRequired.indexOf(oe)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return ie.loadTexture(le)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(le){const oe=new Image;oe.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",oe.onload=oe.onerror=function(){le(oe.height===1)}})),this.isSupported}},GLTFTextureAVIFExtension$1=class{constructor(le){this.parser=le,this.name=EXTENSIONS$1.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(le){const oe=this.name,ie=this.parser,ue=ie.json,de=ue.textures[le];if(!de.extensions||!de.extensions[oe])return null;const he=de.extensions[oe],pe=ue.images[he.source];let _e=ie.textureLoader;if(pe.uri){const Ce=ie.options.manager.getHandler(pe.uri);Ce!==null&&(_e=Ce)}return this.detectSupport().then(function(Ce){if(Ce)return ie.loadTextureImage(le,he.source,_e);if(ue.extensionsRequired&&ue.extensionsRequired.indexOf(oe)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return ie.loadTexture(le)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(le){const oe=new Image;oe.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",oe.onload=oe.onerror=function(){le(oe.height===1)}})),this.isSupported}},GLTFMeshoptCompression$1=class{constructor(le){this.name=EXTENSIONS$1.EXT_MESHOPT_COMPRESSION,this.parser=le}loadBufferView(le){const oe=this.parser.json,ie=oe.bufferViews[le];if(ie.extensions&&ie.extensions[this.name]){const ue=ie.extensions[this.name],de=this.parser.getDependency("buffer",ue.buffer),he=this.parser.options.meshoptDecoder;if(!he||!he.supported){if(oe.extensionsRequired&&oe.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return de.then(function(pe){const _e=ue.byteOffset||0,Ce=ue.byteLength||0,xe=ue.count,Ie=ue.byteStride,$e=new Uint8Array(pe,_e,Ce);return he.decodeGltfBufferAsync?he.decodeGltfBufferAsync(xe,Ie,$e,ue.mode,ue.filter).then(function(Ne){return Ne.buffer}):he.ready.then(function(){const Ne=new ArrayBuffer(xe*Ie);return he.decodeGltfBuffer(new Uint8Array(Ne),xe,Ie,$e,ue.mode,ue.filter),Ne})})}else return null}},GLTFMeshGpuInstancing$1=class{constructor(le){this.name=EXTENSIONS$1.EXT_MESH_GPU_INSTANCING,this.parser=le}createNodeMesh(le){const oe=this.parser.json,ie=oe.nodes[le];if(!ie.extensions||!ie.extensions[this.name]||ie.mesh===void 0)return null;const ue=oe.meshes[ie.mesh];for(const _e of ue.primitives)if(_e.mode!==WEBGL_CONSTANTS$1.TRIANGLES&&_e.mode!==WEBGL_CONSTANTS$1.TRIANGLE_STRIP&&_e.mode!==WEBGL_CONSTANTS$1.TRIANGLE_FAN&&_e.mode!==void 0)return null;const de=ie.extensions[this.name].attributes,he=[],pe={};for(const _e in de)he.push(this.parser.getDependency("accessor",de[_e]).then(Ce=>(pe[_e]=Ce,pe[_e])));return he.length<1?null:(he.push(this.parser.createNodeMesh(le)),Promise.all(he).then(_e=>{const Ce=_e.pop(),xe=Ce.isGroup?Ce.children:[Ce],Ie=_e[0].count,$e=[];for(const Ne of xe){const Oe=new Matrix4$1,Fe=new Vector3$1,Ve=new Quaternion$1,ze=new Vector3$1(1,1,1),Ue=new InstancedMesh(Ne.geometry,Ne.material,Ie);for(let Pt=0;Pt<Ie;Pt++)pe.TRANSLATION&&Fe.fromBufferAttribute(pe.TRANSLATION,Pt),pe.ROTATION&&Ve.fromBufferAttribute(pe.ROTATION,Pt),pe.SCALE&&ze.fromBufferAttribute(pe.SCALE,Pt),Ue.setMatrixAt(Pt,Oe.compose(Fe,Ve,ze));for(const Pt in pe)if(Pt==="_COLOR_0"){const qe=pe[Pt];Ue.instanceColor=new InstancedBufferAttribute(qe.array,qe.itemSize,qe.normalized)}else Pt!=="TRANSLATION"&&Pt!=="ROTATION"&&Pt!=="SCALE"&&Ne.geometry.setAttribute(Pt,pe[Pt]);Object3D.prototype.copy.call(Ue,Ne),this.parser.assignFinalMaterial(Ue),$e.push(Ue)}return Ce.isGroup?(Ce.clear(),Ce.add(...$e),Ce):$e[0]}))}};const BINARY_EXTENSION_HEADER_MAGIC$1="glTF",BINARY_EXTENSION_HEADER_LENGTH$1=12,BINARY_EXTENSION_CHUNK_TYPES$1={JSON:1313821514,BIN:5130562};let GLTFBinaryExtension$1=class{constructor(le){this.name=EXTENSIONS$1.KHR_BINARY_GLTF,this.content=null,this.body=null;const oe=new DataView(le,0,BINARY_EXTENSION_HEADER_LENGTH$1),ie=new TextDecoder;if(this.header={magic:ie.decode(new Uint8Array(le.slice(0,4))),version:oe.getUint32(4,!0),length:oe.getUint32(8,!0)},this.header.magic!==BINARY_EXTENSION_HEADER_MAGIC$1)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const ue=this.header.length-BINARY_EXTENSION_HEADER_LENGTH$1,de=new DataView(le,BINARY_EXTENSION_HEADER_LENGTH$1);let he=0;for(;he<ue;){const pe=de.getUint32(he,!0);he+=4;const _e=de.getUint32(he,!0);if(he+=4,_e===BINARY_EXTENSION_CHUNK_TYPES$1.JSON){const Ce=new Uint8Array(le,BINARY_EXTENSION_HEADER_LENGTH$1+he,pe);this.content=ie.decode(Ce)}else if(_e===BINARY_EXTENSION_CHUNK_TYPES$1.BIN){const Ce=BINARY_EXTENSION_HEADER_LENGTH$1+he;this.body=le.slice(Ce,Ce+pe)}he+=pe}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},GLTFDracoMeshCompressionExtension$1=class{constructor(le,oe){if(!oe)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=EXTENSIONS$1.KHR_DRACO_MESH_COMPRESSION,this.json=le,this.dracoLoader=oe,this.dracoLoader.preload()}decodePrimitive(le,oe){const ie=this.json,ue=this.dracoLoader,de=le.extensions[this.name].bufferView,he=le.extensions[this.name].attributes,pe={},_e={},Ce={};for(const xe in he){const Ie=ATTRIBUTES$1[xe]||xe.toLowerCase();pe[Ie]=he[xe]}for(const xe in le.attributes){const Ie=ATTRIBUTES$1[xe]||xe.toLowerCase();if(he[xe]!==void 0){const $e=ie.accessors[le.attributes[xe]],Ne=WEBGL_COMPONENT_TYPES$1[$e.componentType];Ce[Ie]=Ne.name,_e[Ie]=$e.normalized===!0}}return oe.getDependency("bufferView",de).then(function(xe){return new Promise(function(Ie,$e){ue.decodeDracoFile(xe,function(Ne){for(const Oe in Ne.attributes){const Fe=Ne.attributes[Oe],Ve=_e[Oe];Ve!==void 0&&(Fe.normalized=Ve)}Ie(Ne)},pe,Ce,LinearSRGBColorSpace$1,$e)})})}},GLTFTextureTransformExtension$1=class{constructor(){this.name=EXTENSIONS$1.KHR_TEXTURE_TRANSFORM}extendTexture(le,oe){return(oe.texCoord===void 0||oe.texCoord===le.channel)&&oe.offset===void 0&&oe.rotation===void 0&&oe.scale===void 0||(le=le.clone(),oe.texCoord!==void 0&&(le.channel=oe.texCoord),oe.offset!==void 0&&le.offset.fromArray(oe.offset),oe.rotation!==void 0&&(le.rotation=oe.rotation),oe.scale!==void 0&&le.repeat.fromArray(oe.scale),le.needsUpdate=!0),le}},GLTFMeshQuantizationExtension$1=class{constructor(){this.name=EXTENSIONS$1.KHR_MESH_QUANTIZATION}},GLTFCubicSplineInterpolant$1=class extends Interpolant{constructor(le,oe,ie,ue){super(le,oe,ie,ue)}copySampleValue_(le){const oe=this.resultBuffer,ie=this.sampleValues,ue=this.valueSize,de=le*ue*3+ue;for(let he=0;he!==ue;he++)oe[he]=ie[de+he];return oe}interpolate_(le,oe,ie,ue){const de=this.resultBuffer,he=this.sampleValues,pe=this.valueSize,_e=pe*2,Ce=pe*3,xe=ue-oe,Ie=(ie-oe)/xe,$e=Ie*Ie,Ne=$e*Ie,Oe=le*Ce,Fe=Oe-Ce,Ve=-2*Ne+3*$e,ze=Ne-$e,Ue=1-Ve,Pt=ze-$e+Ie;for(let qe=0;qe!==pe;qe++){const Et=he[Fe+qe+pe],kt=he[Fe+qe+_e]*xe,At=he[Oe+qe+pe],Dt=he[Oe+qe]*xe;de[qe]=Ue*Et+Pt*kt+Ve*At+ze*Dt}return de}};const _q$1=new Quaternion$1;let GLTFCubicSplineQuaternionInterpolant$1=class extends GLTFCubicSplineInterpolant$1{interpolate_(le,oe,ie,ue){const de=super.interpolate_(le,oe,ie,ue);return _q$1.fromArray(de).normalize().toArray(de),de}};const WEBGL_CONSTANTS$1={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},WEBGL_COMPONENT_TYPES$1={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},WEBGL_FILTERS$1={9728:NearestFilter,9729:LinearFilter,9984:NearestMipmapNearestFilter,9985:LinearMipmapNearestFilter,9986:NearestMipmapLinearFilter,9987:LinearMipmapLinearFilter},WEBGL_WRAPPINGS$1={33071:ClampToEdgeWrapping,33648:MirroredRepeatWrapping,10497:RepeatWrapping},WEBGL_TYPE_SIZES$1={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ATTRIBUTES$1={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},PATH_PROPERTIES$1={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},INTERPOLATION$1={CUBICSPLINE:void 0,LINEAR:InterpolateLinear,STEP:InterpolateDiscrete},ALPHA_MODES$1={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function createDefaultMaterial$1(le){return le.DefaultMaterial===void 0&&(le.DefaultMaterial=new MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:FrontSide})),le.DefaultMaterial}function addUnknownExtensionsToUserData$1(le,oe,ie){for(const ue in ie.extensions)le[ue]===void 0&&(oe.userData.gltfExtensions=oe.userData.gltfExtensions||{},oe.userData.gltfExtensions[ue]=ie.extensions[ue])}function assignExtrasToUserData$1(le,oe){oe.extras!==void 0&&(typeof oe.extras=="object"&&Object.assign(le.userData,oe.extras))}function addMorphTargets$1(le,oe,ie){let ue=!1,de=!1,he=!1;for(let xe=0,Ie=oe.length;xe<Ie;xe++){const $e=oe[xe];if($e.POSITION!==void 0&&(ue=!0),$e.NORMAL!==void 0&&(de=!0),$e.COLOR_0!==void 0&&(he=!0),ue&&de&&he)break}if(!ue&&!de&&!he)return Promise.resolve(le);const pe=[],_e=[],Ce=[];for(let xe=0,Ie=oe.length;xe<Ie;xe++){const $e=oe[xe];if(ue){const Ne=$e.POSITION!==void 0?ie.getDependency("accessor",$e.POSITION):le.attributes.position;pe.push(Ne)}if(de){const Ne=$e.NORMAL!==void 0?ie.getDependency("accessor",$e.NORMAL):le.attributes.normal;_e.push(Ne)}if(he){const Ne=$e.COLOR_0!==void 0?ie.getDependency("accessor",$e.COLOR_0):le.attributes.color;Ce.push(Ne)}}return Promise.all([Promise.all(pe),Promise.all(_e),Promise.all(Ce)]).then(function(xe){const Ie=xe[0],$e=xe[1],Ne=xe[2];return ue&&(le.morphAttributes.position=Ie),de&&(le.morphAttributes.normal=$e),he&&(le.morphAttributes.color=Ne),le.morphTargetsRelative=!0,le})}function updateMorphTargets$1(le,oe){if(le.updateMorphTargets(),oe.weights!==void 0)for(let ie=0,ue=oe.weights.length;ie<ue;ie++)le.morphTargetInfluences[ie]=oe.weights[ie];if(oe.extras&&Array.isArray(oe.extras.targetNames)){const ie=oe.extras.targetNames;if(le.morphTargetInfluences.length===ie.length){le.morphTargetDictionary={};for(let ue=0,de=ie.length;ue<de;ue++)le.morphTargetDictionary[ie[ue]]=ue}}}function createPrimitiveKey$1(le){let oe;const ie=le.extensions&&le.extensions[EXTENSIONS$1.KHR_DRACO_MESH_COMPRESSION];if(ie?oe="draco:"+ie.bufferView+":"+ie.indices+":"+createAttributesKey$1(ie.attributes):oe=le.indices+":"+createAttributesKey$1(le.attributes)+":"+le.mode,le.targets!==void 0)for(let ue=0,de=le.targets.length;ue<de;ue++)oe+=":"+createAttributesKey$1(le.targets[ue]);return oe}function createAttributesKey$1(le){let oe="";const ie=Object.keys(le).sort();for(let ue=0,de=ie.length;ue<de;ue++)oe+=ie[ue]+":"+le[ie[ue]]+";";return oe}function getNormalizedComponentScale$1(le){switch(le){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function getImageURIMimeType$1(le){return le.search(/\.jpe?g($|\?)/i)>0||le.search(/^data\:image\/jpeg/)===0?"image/jpeg":le.search(/\.webp($|\?)/i)>0||le.search(/^data\:image\/webp/)===0?"image/webp":le.search(/\.ktx2($|\?)/i)>0||le.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const _identityMatrix$1=new Matrix4$1;let GLTFParser$1=class{constructor(le={},oe={}){this.json=le,this.extensions={},this.plugins={},this.options=oe,this.cache=new GLTFRegistry$1,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let ie=!1,ue=-1,de=!1,he=-1;if(typeof navigator<"u"){const pe=navigator.userAgent;ie=/^((?!chrome|android).)*safari/i.test(pe)===!0;const _e=pe.match(/Version\/(\d+)/);ue=ie&&_e?parseInt(_e[1],10):-1,de=pe.indexOf("Firefox")>-1,he=de?pe.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||ie&&ue<17||de&&he<98?this.textureLoader=new TextureLoader(this.options.manager):this.textureLoader=new ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(le){this.extensions=le}setPlugins(le){this.plugins=le}parse(le,oe){const ie=this,ue=this.json,de=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(he){return he._markDefs&&he._markDefs()}),Promise.all(this._invokeAll(function(he){return he.beforeRoot&&he.beforeRoot()})).then(function(){return Promise.all([ie.getDependencies("scene"),ie.getDependencies("animation"),ie.getDependencies("camera")])}).then(function(he){const pe={scene:he[0][ue.scene||0],scenes:he[0],animations:he[1],cameras:he[2],asset:ue.asset,parser:ie,userData:{}};return addUnknownExtensionsToUserData$1(de,pe,ue),assignExtrasToUserData$1(pe,ue),Promise.all(ie._invokeAll(function(_e){return _e.afterRoot&&_e.afterRoot(pe)})).then(function(){for(const _e of pe.scenes)_e.updateMatrixWorld();le(pe)})}).catch(oe)}_markDefs(){const le=this.json.nodes||[],oe=this.json.skins||[],ie=this.json.meshes||[];for(let ue=0,de=oe.length;ue<de;ue++){const he=oe[ue].joints;for(let pe=0,_e=he.length;pe<_e;pe++)le[he[pe]].isBone=!0}for(let ue=0,de=le.length;ue<de;ue++){const he=le[ue];he.mesh!==void 0&&(this._addNodeRef(this.meshCache,he.mesh),he.skin!==void 0&&(ie[he.mesh].isSkinnedMesh=!0)),he.camera!==void 0&&this._addNodeRef(this.cameraCache,he.camera)}}_addNodeRef(le,oe){oe!==void 0&&(le.refs[oe]===void 0&&(le.refs[oe]=le.uses[oe]=0),le.refs[oe]++)}_getNodeRef(le,oe,ie){if(le.refs[oe]<=1)return ie;const ue=ie.clone(),de=(he,pe)=>{const _e=this.associations.get(he);_e!=null&&this.associations.set(pe,_e);for(const[Ce,xe]of he.children.entries())de(xe,pe.children[Ce])};return de(ie,ue),ue.name+="_instance_"+le.uses[oe]++,ue}_invokeOne(le){const oe=Object.values(this.plugins);oe.push(this);for(let ie=0;ie<oe.length;ie++){const ue=le(oe[ie]);if(ue)return ue}return null}_invokeAll(le){const oe=Object.values(this.plugins);oe.unshift(this);const ie=[];for(let ue=0;ue<oe.length;ue++){const de=le(oe[ue]);de&&ie.push(de)}return ie}getDependency(le,oe){const ie=le+":"+oe;let ue=this.cache.get(ie);if(!ue){switch(le){case"scene":ue=this.loadScene(oe);break;case"node":ue=this._invokeOne(function(de){return de.loadNode&&de.loadNode(oe)});break;case"mesh":ue=this._invokeOne(function(de){return de.loadMesh&&de.loadMesh(oe)});break;case"accessor":ue=this.loadAccessor(oe);break;case"bufferView":ue=this._invokeOne(function(de){return de.loadBufferView&&de.loadBufferView(oe)});break;case"buffer":ue=this.loadBuffer(oe);break;case"material":ue=this._invokeOne(function(de){return de.loadMaterial&&de.loadMaterial(oe)});break;case"texture":ue=this._invokeOne(function(de){return de.loadTexture&&de.loadTexture(oe)});break;case"skin":ue=this.loadSkin(oe);break;case"animation":ue=this._invokeOne(function(de){return de.loadAnimation&&de.loadAnimation(oe)});break;case"camera":ue=this.loadCamera(oe);break;default:if(ue=this._invokeOne(function(de){return de!=this&&de.getDependency&&de.getDependency(le,oe)}),!ue)throw new Error("Unknown type: "+le);break}this.cache.add(ie,ue)}return ue}getDependencies(le){let oe=this.cache.get(le);if(!oe){const ie=this,ue=this.json[le+(le==="mesh"?"es":"s")]||[];oe=Promise.all(ue.map(function(de,he){return ie.getDependency(le,he)})),this.cache.add(le,oe)}return oe}loadBuffer(le){const oe=this.json.buffers[le],ie=this.fileLoader;if(oe.type&&oe.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+oe.type+" buffer type is not supported.");if(oe.uri===void 0&&le===0)return Promise.resolve(this.extensions[EXTENSIONS$1.KHR_BINARY_GLTF].body);const ue=this.options;return new Promise(function(de,he){ie.load(LoaderUtils.resolveURL(oe.uri,ue.path),de,void 0,function(){he(new Error('THREE.GLTFLoader: Failed to load buffer "'+oe.uri+'".'))})})}loadBufferView(le){const oe=this.json.bufferViews[le];return this.getDependency("buffer",oe.buffer).then(function(ie){const ue=oe.byteLength||0,de=oe.byteOffset||0;return ie.slice(de,de+ue)})}loadAccessor(le){const oe=this,ie=this.json,ue=this.json.accessors[le];if(ue.bufferView===void 0&&ue.sparse===void 0){const he=WEBGL_TYPE_SIZES$1[ue.type],pe=WEBGL_COMPONENT_TYPES$1[ue.componentType],_e=ue.normalized===!0,Ce=new pe(ue.count*he);return Promise.resolve(new BufferAttribute(Ce,he,_e))}const de=[];return ue.bufferView!==void 0?de.push(this.getDependency("bufferView",ue.bufferView)):de.push(null),ue.sparse!==void 0&&(de.push(this.getDependency("bufferView",ue.sparse.indices.bufferView)),de.push(this.getDependency("bufferView",ue.sparse.values.bufferView))),Promise.all(de).then(function(he){const pe=he[0],_e=WEBGL_TYPE_SIZES$1[ue.type],Ce=WEBGL_COMPONENT_TYPES$1[ue.componentType],xe=Ce.BYTES_PER_ELEMENT,Ie=xe*_e,$e=ue.byteOffset||0,Ne=ue.bufferView!==void 0?ie.bufferViews[ue.bufferView].byteStride:void 0,Oe=ue.normalized===!0;let Fe,Ve;if(Ne&&Ne!==Ie){const ze=Math.floor($e/Ne),Ue="InterleavedBuffer:"+ue.bufferView+":"+ue.componentType+":"+ze+":"+ue.count;let Pt=oe.cache.get(Ue);Pt||(Fe=new Ce(pe,ze*Ne,ue.count*Ne/xe),Pt=new InterleavedBuffer(Fe,Ne/xe),oe.cache.add(Ue,Pt)),Ve=new InterleavedBufferAttribute(Pt,_e,$e%Ne/xe,Oe)}else pe===null?Fe=new Ce(ue.count*_e):Fe=new Ce(pe,$e,ue.count*_e),Ve=new BufferAttribute(Fe,_e,Oe);if(ue.sparse!==void 0){const ze=WEBGL_TYPE_SIZES$1.SCALAR,Ue=WEBGL_COMPONENT_TYPES$1[ue.sparse.indices.componentType],Pt=ue.sparse.indices.byteOffset||0,qe=ue.sparse.values.byteOffset||0,Et=new Ue(he[1],Pt,ue.sparse.count*ze),kt=new Ce(he[2],qe,ue.sparse.count*_e);pe!==null&&(Ve=new BufferAttribute(Ve.array.slice(),Ve.itemSize,Ve.normalized)),Ve.normalized=!1;for(let At=0,Dt=Et.length;At<Dt;At++){const Lt=Et[At];if(Ve.setX(Lt,kt[At*_e]),_e>=2&&Ve.setY(Lt,kt[At*_e+1]),_e>=3&&Ve.setZ(Lt,kt[At*_e+2]),_e>=4&&Ve.setW(Lt,kt[At*_e+3]),_e>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}Ve.normalized=Oe}return Ve})}loadTexture(le){const oe=this.json,ie=this.options,ue=oe.textures[le].source,de=oe.images[ue];let he=this.textureLoader;if(de.uri){const pe=ie.manager.getHandler(de.uri);pe!==null&&(he=pe)}return this.loadTextureImage(le,ue,he)}loadTextureImage(le,oe,ie){const ue=this,de=this.json,he=de.textures[le],pe=de.images[oe],_e=(pe.uri||pe.bufferView)+":"+he.sampler;if(this.textureCache[_e])return this.textureCache[_e];const Ce=this.loadImageSource(oe,ie).then(function(xe){xe.flipY=!1,xe.name=he.name||pe.name||"",xe.name===""&&typeof pe.uri=="string"&&pe.uri.startsWith("data:image/")===!1&&(xe.name=pe.uri);const Ie=(de.samplers||{})[he.sampler]||{};return xe.magFilter=WEBGL_FILTERS$1[Ie.magFilter]||LinearFilter,xe.minFilter=WEBGL_FILTERS$1[Ie.minFilter]||LinearMipmapLinearFilter,xe.wrapS=WEBGL_WRAPPINGS$1[Ie.wrapS]||RepeatWrapping,xe.wrapT=WEBGL_WRAPPINGS$1[Ie.wrapT]||RepeatWrapping,xe.generateMipmaps=!xe.isCompressedTexture&&xe.minFilter!==NearestFilter&&xe.minFilter!==LinearFilter,ue.associations.set(xe,{textures:le}),xe}).catch(function(){return null});return this.textureCache[_e]=Ce,Ce}loadImageSource(le,oe){const ie=this,ue=this.json,de=this.options;if(this.sourceCache[le]!==void 0)return this.sourceCache[le].then(Ie=>Ie.clone());const he=ue.images[le],pe=self.URL||self.webkitURL;let _e=he.uri||"",Ce=!1;if(he.bufferView!==void 0)_e=ie.getDependency("bufferView",he.bufferView).then(function(Ie){Ce=!0;const $e=new Blob([Ie],{type:he.mimeType});return _e=pe.createObjectURL($e),_e});else if(he.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+le+" is missing URI and bufferView");const xe=Promise.resolve(_e).then(function(Ie){return new Promise(function($e,Ne){let Oe=$e;oe.isImageBitmapLoader===!0&&(Oe=function(Fe){const Ve=new Texture(Fe);Ve.needsUpdate=!0,$e(Ve)}),oe.load(LoaderUtils.resolveURL(Ie,de.path),Oe,void 0,Ne)})}).then(function(Ie){return Ce===!0&&pe.revokeObjectURL(_e),assignExtrasToUserData$1(Ie,he),Ie.userData.mimeType=he.mimeType||getImageURIMimeType$1(he.uri),Ie}).catch(function(Ie){throw Ie});return this.sourceCache[le]=xe,xe}assignTexture(le,oe,ie,ue){const de=this;return this.getDependency("texture",ie.index).then(function(he){if(!he)return null;if(ie.texCoord!==void 0&&ie.texCoord>0&&(he=he.clone(),he.channel=ie.texCoord),de.extensions[EXTENSIONS$1.KHR_TEXTURE_TRANSFORM]){const pe=ie.extensions!==void 0?ie.extensions[EXTENSIONS$1.KHR_TEXTURE_TRANSFORM]:void 0;if(pe){const _e=de.associations.get(he);he=de.extensions[EXTENSIONS$1.KHR_TEXTURE_TRANSFORM].extendTexture(he,pe),de.associations.set(he,_e)}}return ue!==void 0&&(he.colorSpace=ue),le[oe]=he,he})}assignFinalMaterial(le){const oe=le.geometry;let ie=le.material;const ue=oe.attributes.tangent===void 0,de=oe.attributes.color!==void 0,he=oe.attributes.normal===void 0;if(le.isPoints){const pe="PointsMaterial:"+ie.uuid;let _e=this.cache.get(pe);_e||(_e=new PointsMaterial,Material.prototype.copy.call(_e,ie),_e.color.copy(ie.color),_e.map=ie.map,_e.sizeAttenuation=!1,this.cache.add(pe,_e)),ie=_e}else if(le.isLine){const pe="LineBasicMaterial:"+ie.uuid;let _e=this.cache.get(pe);_e||(_e=new LineBasicMaterial,Material.prototype.copy.call(_e,ie),_e.color.copy(ie.color),_e.map=ie.map,this.cache.add(pe,_e)),ie=_e}if(ue||de||he){let pe="ClonedMaterial:"+ie.uuid+":";ue&&(pe+="derivative-tangents:"),de&&(pe+="vertex-colors:"),he&&(pe+="flat-shading:");let _e=this.cache.get(pe);_e||(_e=ie.clone(),de&&(_e.vertexColors=!0),he&&(_e.flatShading=!0),ue&&(_e.normalScale&&(_e.normalScale.y*=-1),_e.clearcoatNormalScale&&(_e.clearcoatNormalScale.y*=-1)),this.cache.add(pe,_e),this.associations.set(_e,this.associations.get(ie))),ie=_e}le.material=ie}getMaterialType(){return MeshStandardMaterial}loadMaterial(le){const oe=this,ie=this.json,ue=this.extensions,de=ie.materials[le];let he;const pe={},_e=de.extensions||{},Ce=[];if(_e[EXTENSIONS$1.KHR_MATERIALS_UNLIT]){const Ie=ue[EXTENSIONS$1.KHR_MATERIALS_UNLIT];he=Ie.getMaterialType(),Ce.push(Ie.extendParams(pe,de,oe))}else{const Ie=de.pbrMetallicRoughness||{};if(pe.color=new Color$2(1,1,1),pe.opacity=1,Array.isArray(Ie.baseColorFactor)){const $e=Ie.baseColorFactor;pe.color.setRGB($e[0],$e[1],$e[2],LinearSRGBColorSpace$1),pe.opacity=$e[3]}Ie.baseColorTexture!==void 0&&Ce.push(oe.assignTexture(pe,"map",Ie.baseColorTexture,SRGBColorSpace$1)),pe.metalness=Ie.metallicFactor!==void 0?Ie.metallicFactor:1,pe.roughness=Ie.roughnessFactor!==void 0?Ie.roughnessFactor:1,Ie.metallicRoughnessTexture!==void 0&&(Ce.push(oe.assignTexture(pe,"metalnessMap",Ie.metallicRoughnessTexture)),Ce.push(oe.assignTexture(pe,"roughnessMap",Ie.metallicRoughnessTexture))),he=this._invokeOne(function($e){return $e.getMaterialType&&$e.getMaterialType(le)}),Ce.push(Promise.all(this._invokeAll(function($e){return $e.extendMaterialParams&&$e.extendMaterialParams(le,pe)})))}de.doubleSided===!0&&(pe.side=DoubleSide);const xe=de.alphaMode||ALPHA_MODES$1.OPAQUE;if(xe===ALPHA_MODES$1.BLEND?(pe.transparent=!0,pe.depthWrite=!1):(pe.transparent=!1,xe===ALPHA_MODES$1.MASK&&(pe.alphaTest=de.alphaCutoff!==void 0?de.alphaCutoff:.5)),de.normalTexture!==void 0&&he!==MeshBasicMaterial&&(Ce.push(oe.assignTexture(pe,"normalMap",de.normalTexture)),pe.normalScale=new Vector2$1(1,1),de.normalTexture.scale!==void 0)){const Ie=de.normalTexture.scale;pe.normalScale.set(Ie,Ie)}if(de.occlusionTexture!==void 0&&he!==MeshBasicMaterial&&(Ce.push(oe.assignTexture(pe,"aoMap",de.occlusionTexture)),de.occlusionTexture.strength!==void 0&&(pe.aoMapIntensity=de.occlusionTexture.strength)),de.emissiveFactor!==void 0&&he!==MeshBasicMaterial){const Ie=de.emissiveFactor;pe.emissive=new Color$2().setRGB(Ie[0],Ie[1],Ie[2],LinearSRGBColorSpace$1)}return de.emissiveTexture!==void 0&&he!==MeshBasicMaterial&&Ce.push(oe.assignTexture(pe,"emissiveMap",de.emissiveTexture,SRGBColorSpace$1)),Promise.all(Ce).then(function(){const Ie=new he(pe);return de.name&&(Ie.name=de.name),assignExtrasToUserData$1(Ie,de),oe.associations.set(Ie,{materials:le}),de.extensions&&addUnknownExtensionsToUserData$1(ue,Ie,de),Ie})}createUniqueName(le){const oe=PropertyBinding.sanitizeNodeName(le||"");return oe in this.nodeNamesUsed?oe+"_"+ ++this.nodeNamesUsed[oe]:(this.nodeNamesUsed[oe]=0,oe)}loadGeometries(le){const oe=this,ie=this.extensions,ue=this.primitiveCache;function de(pe){return ie[EXTENSIONS$1.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(pe,oe).then(function(_e){return addPrimitiveAttributes$1(_e,pe,oe)})}const he=[];for(let pe=0,_e=le.length;pe<_e;pe++){const Ce=le[pe],xe=createPrimitiveKey$1(Ce),Ie=ue[xe];if(Ie)he.push(Ie.promise);else{let $e;Ce.extensions&&Ce.extensions[EXTENSIONS$1.KHR_DRACO_MESH_COMPRESSION]?$e=de(Ce):$e=addPrimitiveAttributes$1(new BufferGeometry,Ce,oe),ue[xe]={primitive:Ce,promise:$e},he.push($e)}}return Promise.all(he)}loadMesh(le){const oe=this,ie=this.json,ue=this.extensions,de=ie.meshes[le],he=de.primitives,pe=[];for(let _e=0,Ce=he.length;_e<Ce;_e++){const xe=he[_e].material===void 0?createDefaultMaterial$1(this.cache):this.getDependency("material",he[_e].material);pe.push(xe)}return pe.push(oe.loadGeometries(he)),Promise.all(pe).then(function(_e){const Ce=_e.slice(0,_e.length-1),xe=_e[_e.length-1],Ie=[];for(let Ne=0,Oe=xe.length;Ne<Oe;Ne++){const Fe=xe[Ne],Ve=he[Ne];let ze;const Ue=Ce[Ne];if(Ve.mode===WEBGL_CONSTANTS$1.TRIANGLES||Ve.mode===WEBGL_CONSTANTS$1.TRIANGLE_STRIP||Ve.mode===WEBGL_CONSTANTS$1.TRIANGLE_FAN||Ve.mode===void 0)ze=de.isSkinnedMesh===!0?new SkinnedMesh(Fe,Ue):new Mesh(Fe,Ue),ze.isSkinnedMesh===!0&&ze.normalizeSkinWeights(),Ve.mode===WEBGL_CONSTANTS$1.TRIANGLE_STRIP?ze.geometry=toTrianglesDrawMode(ze.geometry,TriangleStripDrawMode):Ve.mode===WEBGL_CONSTANTS$1.TRIANGLE_FAN&&(ze.geometry=toTrianglesDrawMode(ze.geometry,TriangleFanDrawMode));else if(Ve.mode===WEBGL_CONSTANTS$1.LINES)ze=new LineSegments(Fe,Ue);else if(Ve.mode===WEBGL_CONSTANTS$1.LINE_STRIP)ze=new Line(Fe,Ue);else if(Ve.mode===WEBGL_CONSTANTS$1.LINE_LOOP)ze=new LineLoop(Fe,Ue);else if(Ve.mode===WEBGL_CONSTANTS$1.POINTS)ze=new Points(Fe,Ue);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+Ve.mode);Object.keys(ze.geometry.morphAttributes).length>0&&updateMorphTargets$1(ze,de),ze.name=oe.createUniqueName(de.name||"mesh_"+le),assignExtrasToUserData$1(ze,de),Ve.extensions&&addUnknownExtensionsToUserData$1(ue,ze,Ve),oe.assignFinalMaterial(ze),Ie.push(ze)}for(let Ne=0,Oe=Ie.length;Ne<Oe;Ne++)oe.associations.set(Ie[Ne],{meshes:le,primitives:Ne});if(Ie.length===1)return de.extensions&&addUnknownExtensionsToUserData$1(ue,Ie[0],de),Ie[0];const $e=new Group;de.extensions&&addUnknownExtensionsToUserData$1(ue,$e,de),oe.associations.set($e,{meshes:le});for(let Ne=0,Oe=Ie.length;Ne<Oe;Ne++)$e.add(Ie[Ne]);return $e})}loadCamera(le){let oe;const ie=this.json.cameras[le],ue=ie[ie.type];if(ue)return ie.type==="perspective"?oe=new PerspectiveCamera(MathUtils$1.radToDeg(ue.yfov),ue.aspectRatio||1,ue.znear||1,ue.zfar||2e6):ie.type==="orthographic"&&(oe=new OrthographicCamera(-ue.xmag,ue.xmag,ue.ymag,-ue.ymag,ue.znear,ue.zfar)),ie.name&&(oe.name=this.createUniqueName(ie.name)),assignExtrasToUserData$1(oe,ie),Promise.resolve(oe)}loadSkin(le){const oe=this.json.skins[le],ie=[];for(let ue=0,de=oe.joints.length;ue<de;ue++)ie.push(this._loadNodeShallow(oe.joints[ue]));return oe.inverseBindMatrices!==void 0?ie.push(this.getDependency("accessor",oe.inverseBindMatrices)):ie.push(null),Promise.all(ie).then(function(ue){const de=ue.pop(),he=ue,pe=[],_e=[];for(let Ce=0,xe=he.length;Ce<xe;Ce++){const Ie=he[Ce];if(Ie){pe.push(Ie);const $e=new Matrix4$1;de!==null&&$e.fromArray(de.array,Ce*16),_e.push($e)}}return new Skeleton$1(pe,_e)})}loadAnimation(le){const oe=this.json,ie=this,ue=oe.animations[le],de=ue.name?ue.name:"animation_"+le,he=[],pe=[],_e=[],Ce=[],xe=[];for(let Ie=0,$e=ue.channels.length;Ie<$e;Ie++){const Ne=ue.channels[Ie],Oe=ue.samplers[Ne.sampler],Fe=Ne.target,Ve=Fe.node,ze=ue.parameters!==void 0?ue.parameters[Oe.input]:Oe.input,Ue=ue.parameters!==void 0?ue.parameters[Oe.output]:Oe.output;Fe.node!==void 0&&(he.push(this.getDependency("node",Ve)),pe.push(this.getDependency("accessor",ze)),_e.push(this.getDependency("accessor",Ue)),Ce.push(Oe),xe.push(Fe))}return Promise.all([Promise.all(he),Promise.all(pe),Promise.all(_e),Promise.all(Ce),Promise.all(xe)]).then(function(Ie){const $e=Ie[0],Ne=Ie[1],Oe=Ie[2],Fe=Ie[3],Ve=Ie[4],ze=[];for(let Ue=0,Pt=$e.length;Ue<Pt;Ue++){const qe=$e[Ue],Et=Ne[Ue],kt=Oe[Ue],At=Fe[Ue],Dt=Ve[Ue];if(qe===void 0)continue;qe.updateMatrix&&qe.updateMatrix();const Lt=ie._createAnimationTracks(qe,Et,kt,At,Dt);if(Lt)for(let jt=0;jt<Lt.length;jt++)ze.push(Lt[jt])}return new AnimationClip(de,void 0,ze)})}createNodeMesh(le){const oe=this.json,ie=this,ue=oe.nodes[le];return ue.mesh===void 0?null:ie.getDependency("mesh",ue.mesh).then(function(de){const he=ie._getNodeRef(ie.meshCache,ue.mesh,de);return ue.weights!==void 0&&he.traverse(function(pe){if(pe.isMesh)for(let _e=0,Ce=ue.weights.length;_e<Ce;_e++)pe.morphTargetInfluences[_e]=ue.weights[_e]}),he})}loadNode(le){const oe=this.json,ie=this,ue=oe.nodes[le],de=ie._loadNodeShallow(le),he=[],pe=ue.children||[];for(let Ce=0,xe=pe.length;Ce<xe;Ce++)he.push(ie.getDependency("node",pe[Ce]));const _e=ue.skin===void 0?Promise.resolve(null):ie.getDependency("skin",ue.skin);return Promise.all([de,Promise.all(he),_e]).then(function(Ce){const xe=Ce[0],Ie=Ce[1],$e=Ce[2];$e!==null&&xe.traverse(function(Ne){Ne.isSkinnedMesh&&Ne.bind($e,_identityMatrix$1)});for(let Ne=0,Oe=Ie.length;Ne<Oe;Ne++)xe.add(Ie[Ne]);return xe})}_loadNodeShallow(le){const oe=this.json,ie=this.extensions,ue=this;if(this.nodeCache[le]!==void 0)return this.nodeCache[le];const de=oe.nodes[le],he=de.name?ue.createUniqueName(de.name):"",pe=[],_e=ue._invokeOne(function(Ce){return Ce.createNodeMesh&&Ce.createNodeMesh(le)});return _e&&pe.push(_e),de.camera!==void 0&&pe.push(ue.getDependency("camera",de.camera).then(function(Ce){return ue._getNodeRef(ue.cameraCache,de.camera,Ce)})),ue._invokeAll(function(Ce){return Ce.createNodeAttachment&&Ce.createNodeAttachment(le)}).forEach(function(Ce){pe.push(Ce)}),this.nodeCache[le]=Promise.all(pe).then(function(Ce){let xe;if(de.isBone===!0?xe=new Bone:Ce.length>1?xe=new Group:Ce.length===1?xe=Ce[0]:xe=new Object3D,xe!==Ce[0])for(let Ie=0,$e=Ce.length;Ie<$e;Ie++)xe.add(Ce[Ie]);if(de.name&&(xe.userData.name=de.name,xe.name=he),assignExtrasToUserData$1(xe,de),de.extensions&&addUnknownExtensionsToUserData$1(ie,xe,de),de.matrix!==void 0){const Ie=new Matrix4$1;Ie.fromArray(de.matrix),xe.applyMatrix4(Ie)}else de.translation!==void 0&&xe.position.fromArray(de.translation),de.rotation!==void 0&&xe.quaternion.fromArray(de.rotation),de.scale!==void 0&&xe.scale.fromArray(de.scale);return ue.associations.has(xe)||ue.associations.set(xe,{}),ue.associations.get(xe).nodes=le,xe}),this.nodeCache[le]}loadScene(le){const oe=this.extensions,ie=this.json.scenes[le],ue=this,de=new Group;ie.name&&(de.name=ue.createUniqueName(ie.name)),assignExtrasToUserData$1(de,ie),ie.extensions&&addUnknownExtensionsToUserData$1(oe,de,ie);const he=ie.nodes||[],pe=[];for(let _e=0,Ce=he.length;_e<Ce;_e++)pe.push(ue.getDependency("node",he[_e]));return Promise.all(pe).then(function(_e){for(let xe=0,Ie=_e.length;xe<Ie;xe++)de.add(_e[xe]);const Ce=xe=>{const Ie=new Map;for(const[$e,Ne]of ue.associations)($e instanceof Material||$e instanceof Texture)&&Ie.set($e,Ne);return xe.traverse($e=>{const Ne=ue.associations.get($e);Ne!=null&&Ie.set($e,Ne)}),Ie};return ue.associations=Ce(de),de})}_createAnimationTracks(le,oe,ie,ue,de){const he=[],pe=le.name?le.name:le.uuid,_e=[];PATH_PROPERTIES$1[de.path]===PATH_PROPERTIES$1.weights?le.traverse(function($e){$e.morphTargetInfluences&&_e.push($e.name?$e.name:$e.uuid)}):_e.push(pe);let Ce;switch(PATH_PROPERTIES$1[de.path]){case PATH_PROPERTIES$1.weights:Ce=NumberKeyframeTrack;break;case PATH_PROPERTIES$1.rotation:Ce=QuaternionKeyframeTrack;break;case PATH_PROPERTIES$1.position:case PATH_PROPERTIES$1.scale:Ce=VectorKeyframeTrack;break;default:switch(ie.itemSize){case 1:Ce=NumberKeyframeTrack;break;case 2:case 3:default:Ce=VectorKeyframeTrack;break}break}const xe=ue.interpolation!==void 0?INTERPOLATION$1[ue.interpolation]:InterpolateLinear,Ie=this._getArrayFromAccessor(ie);for(let $e=0,Ne=_e.length;$e<Ne;$e++){const Oe=new Ce(_e[$e]+"."+PATH_PROPERTIES$1[de.path],oe.array,Ie,xe);ue.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(Oe),he.push(Oe)}return he}_getArrayFromAccessor(le){let oe=le.array;if(le.normalized){const ie=getNormalizedComponentScale$1(oe.constructor),ue=new Float32Array(oe.length);for(let de=0,he=oe.length;de<he;de++)ue[de]=oe[de]*ie;oe=ue}return oe}_createCubicSplineTrackInterpolant(le){le.createInterpolant=function(oe){const ie=this instanceof QuaternionKeyframeTrack?GLTFCubicSplineQuaternionInterpolant$1:GLTFCubicSplineInterpolant$1;return new ie(this.times,this.values,this.getValueSize()/3,oe)},le.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function computeBounds$1(le,oe,ie){const ue=oe.attributes,de=new Box3;if(ue.POSITION!==void 0){const _e=ie.json.accessors[ue.POSITION],Ce=_e.min,xe=_e.max;if(Ce!==void 0&&xe!==void 0){if(de.set(new Vector3$1(Ce[0],Ce[1],Ce[2]),new Vector3$1(xe[0],xe[1],xe[2])),_e.normalized){const Ie=getNormalizedComponentScale$1(WEBGL_COMPONENT_TYPES$1[_e.componentType]);de.min.multiplyScalar(Ie),de.max.multiplyScalar(Ie)}}else return}else return;const he=oe.targets;if(he!==void 0){const _e=new Vector3$1,Ce=new Vector3$1;for(let xe=0,Ie=he.length;xe<Ie;xe++){const $e=he[xe];if($e.POSITION!==void 0){const Ne=ie.json.accessors[$e.POSITION],Oe=Ne.min,Fe=Ne.max;if(Oe!==void 0&&Fe!==void 0){if(Ce.setX(Math.max(Math.abs(Oe[0]),Math.abs(Fe[0]))),Ce.setY(Math.max(Math.abs(Oe[1]),Math.abs(Fe[1]))),Ce.setZ(Math.max(Math.abs(Oe[2]),Math.abs(Fe[2]))),Ne.normalized){const Ve=getNormalizedComponentScale$1(WEBGL_COMPONENT_TYPES$1[Ne.componentType]);Ce.multiplyScalar(Ve)}_e.max(Ce)}}}de.expandByVector(_e)}le.boundingBox=de;const pe=new Sphere;de.getCenter(pe.center),pe.radius=de.min.distanceTo(de.max)/2,le.boundingSphere=pe}function addPrimitiveAttributes$1(le,oe,ie){const ue=oe.attributes,de=[];function he(pe,_e){return ie.getDependency("accessor",pe).then(function(Ce){le.setAttribute(_e,Ce)})}for(const pe in ue){const _e=ATTRIBUTES$1[pe]||pe.toLowerCase();_e in le.attributes||de.push(he(ue[pe],_e))}if(oe.indices!==void 0&&!le.index){const pe=ie.getDependency("accessor",oe.indices).then(function(_e){le.setIndex(_e)});de.push(pe)}return ColorManagement$1.workingColorSpace!==LinearSRGBColorSpace$1&&"COLOR_0"in ue,assignExtrasToUserData$1(le,oe),computeBounds$1(le,oe,ie),Promise.all(de).then(function(){return oe.targets!==void 0?addMorphTargets$1(le,oe.targets,ie):le})}class RGBELoader extends DataTextureLoader{constructor(oe){super(oe),this.type=HalfFloatType}parse(oe){const ie=function(Ue,Pt){switch(Ue){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(Pt||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(Pt||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(Pt||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(Pt||""))}},ue=`
`,de=function(Ue,Pt,qe){Pt=Pt||1024;let Et=Ue.pos,kt=-1,At=0,Dt="",Lt=String.fromCharCode.apply(null,new Uint16Array(Ue.subarray(Et,Et+128)));for(;0>(kt=Lt.indexOf(ue))&&At<Pt&&Et<Ue.byteLength;)Dt+=Lt,At+=Lt.length,Et+=128,Lt+=String.fromCharCode.apply(null,new Uint16Array(Ue.subarray(Et,Et+128)));return-1<kt?(Ue.pos+=At+kt+1,Dt+Lt.slice(0,kt)):!1},he=function(Ue){const Pt=/^#\?(\S+)/,qe=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,Et=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,kt=/^\s*FORMAT=(\S+)\s*$/,At=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,Dt={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let Lt,jt;for((Ue.pos>=Ue.byteLength||!(Lt=de(Ue)))&&ie(1,"no header found"),(jt=Lt.match(Pt))||ie(3,"bad initial token"),Dt.valid|=1,Dt.programtype=jt[1],Dt.string+=Lt+`
`;Lt=de(Ue),Lt!==!1;){if(Dt.string+=Lt+`
`,Lt.charAt(0)==="#"){Dt.comments+=Lt+`
`;continue}if((jt=Lt.match(qe))&&(Dt.gamma=parseFloat(jt[1])),(jt=Lt.match(Et))&&(Dt.exposure=parseFloat(jt[1])),(jt=Lt.match(kt))&&(Dt.valid|=2,Dt.format=jt[1]),(jt=Lt.match(At))&&(Dt.valid|=4,Dt.height=parseInt(jt[1],10),Dt.width=parseInt(jt[2],10)),Dt.valid&2&&Dt.valid&4)break}return Dt.valid&2||ie(3,"missing format specifier"),Dt.valid&4||ie(3,"missing image size specifier"),Dt},pe=function(Ue,Pt,qe){const Et=Pt;if(Et<8||Et>32767||Ue[0]!==2||Ue[1]!==2||Ue[2]&128)return new Uint8Array(Ue);Et!==(Ue[2]<<8|Ue[3])&&ie(3,"wrong scanline width");const kt=new Uint8Array(4*Pt*qe);kt.length||ie(4,"unable to allocate buffer space");let At=0,Dt=0;const Lt=4*Et,jt=new Uint8Array(4),_n=new Uint8Array(Lt);let bn=qe;for(;bn>0&&Dt<Ue.byteLength;){Dt+4>Ue.byteLength&&ie(1),jt[0]=Ue[Dt++],jt[1]=Ue[Dt++],jt[2]=Ue[Dt++],jt[3]=Ue[Dt++],(jt[0]!=2||jt[1]!=2||(jt[2]<<8|jt[3])!=Et)&&ie(3,"bad rgbe scanline format");let vn=0,Tn;for(;vn<Lt&&Dt<Ue.byteLength;){Tn=Ue[Dt++];const wn=Tn>128;if(wn&&(Tn-=128),(Tn===0||vn+Tn>Lt)&&ie(3,"bad scanline data"),wn){const Cn=Ue[Dt++];for(let Sn=0;Sn<Tn;Sn++)_n[vn++]=Cn}else _n.set(Ue.subarray(Dt,Dt+Tn),vn),vn+=Tn,Dt+=Tn}const $n=Et;for(let wn=0;wn<$n;wn++){let Cn=0;kt[At]=_n[wn+Cn],Cn+=Et,kt[At+1]=_n[wn+Cn],Cn+=Et,kt[At+2]=_n[wn+Cn],Cn+=Et,kt[At+3]=_n[wn+Cn],At+=4}bn--}return kt},_e=function(Ue,Pt,qe,Et){const kt=Ue[Pt+3],At=Math.pow(2,kt-128)/255;qe[Et+0]=Ue[Pt+0]*At,qe[Et+1]=Ue[Pt+1]*At,qe[Et+2]=Ue[Pt+2]*At,qe[Et+3]=1},Ce=function(Ue,Pt,qe,Et){const kt=Ue[Pt+3],At=Math.pow(2,kt-128)/255;qe[Et+0]=DataUtils.toHalfFloat(Math.min(Ue[Pt+0]*At,65504)),qe[Et+1]=DataUtils.toHalfFloat(Math.min(Ue[Pt+1]*At,65504)),qe[Et+2]=DataUtils.toHalfFloat(Math.min(Ue[Pt+2]*At,65504)),qe[Et+3]=DataUtils.toHalfFloat(1)},xe=new Uint8Array(oe);xe.pos=0;const Ie=he(xe),$e=Ie.width,Ne=Ie.height,Oe=pe(xe.subarray(xe.pos),$e,Ne);let Fe,Ve,ze;switch(this.type){case FloatType:ze=Oe.length/4;const Ue=new Float32Array(ze*4);for(let qe=0;qe<ze;qe++)_e(Oe,qe*4,Ue,qe*4);Fe=Ue,Ve=FloatType;break;case HalfFloatType:ze=Oe.length/4;const Pt=new Uint16Array(ze*4);for(let qe=0;qe<ze;qe++)Ce(Oe,qe*4,Pt,qe*4);Fe=Pt,Ve=HalfFloatType;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:$e,height:Ne,data:Fe,header:Ie.string,gamma:Ie.gamma,exposure:Ie.exposure,type:Ve}}setDataType(oe){return this.type=oe,this}load(oe,ie,ue,de){function he(pe,_e){switch(pe.type){case FloatType:case HalfFloatType:pe.colorSpace=LinearSRGBColorSpace$1,pe.minFilter=LinearFilter,pe.magFilter=LinearFilter,pe.generateMipmaps=!1,pe.flipY=!0;break}ie&&ie(pe,_e)}return super.load(oe,he,ue,de)}}class Sky extends Mesh{constructor(){const oe=Sky.SkyShader,ie=new ShaderMaterial({name:oe.name,uniforms:UniformsUtils.clone(oe.uniforms),vertexShader:oe.vertexShader,fragmentShader:oe.fragmentShader,side:BackSide,depthWrite:!1});super(new BoxGeometry(1,1,1),ie),this.isSky=!0}}Sky.SkyShader={name:"SkyShader",uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new Vector3$1},up:{value:new Vector3$1(0,1,0)}},vertexShader:`
		uniform vec3 sunPosition;
		uniform float rayleigh;
		uniform float turbidity;
		uniform float mieCoefficient;
		uniform vec3 up;

		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		// constants for atmospheric scattering
		const float e = 2.71828182845904523536028747135266249775724709369995957;
		const float pi = 3.141592653589793238462643383279502884197169;

		// wavelength of used primaries, according to preetham
		const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
		// this pre-calculation replaces older TotalRayleigh(vec3 lambda) function:
		// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
		const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

		// mie stuff
		// K coefficient for the primaries
		const float v = 4.0;
		const vec3 K = vec3( 0.686, 0.678, 0.666 );
		// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
		const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

		// earth shadow hack
		// cutoffAngle = pi / 1.95;
		const float cutoffAngle = 1.6110731556870734;
		const float steepness = 1.5;
		const float EE = 1000.0;

		float sunIntensity( float zenithAngleCos ) {
			zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
			return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
		}

		vec3 totalMie( float T ) {
			float c = ( 0.2 * T ) * 10E-18;
			return 0.434 * c * MieConst;
		}

		void main() {

			vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
			vWorldPosition = worldPosition.xyz;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			gl_Position.z = gl_Position.w; // set z to camera.far

			vSunDirection = normalize( sunPosition );

			vSunE = sunIntensity( dot( vSunDirection, up ) );

			vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

			float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

			// extinction (absorption + out scattering)
			// rayleigh coefficients
			vBetaR = totalRayleigh * rayleighCoefficient;

			// mie coefficients
			vBetaM = totalMie( turbidity ) * mieCoefficient;

		}`,fragmentShader:`
		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		uniform float mieDirectionalG;
		uniform vec3 up;

		// constants for atmospheric scattering
		const float pi = 3.141592653589793238462643383279502884197169;

		const float n = 1.0003; // refractive index of air
		const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

		// optical length at zenith for molecules
		const float rayleighZenithLength = 8.4E3;
		const float mieZenithLength = 1.25E3;
		// 66 arc seconds -> degrees, and the cosine of that
		const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

		// 3.0 / ( 16.0 * pi )
		const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
		// 1.0 / ( 4.0 * pi )
		const float ONE_OVER_FOURPI = 0.07957747154594767;

		float rayleighPhase( float cosTheta ) {
			return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
		}

		float hgPhase( float cosTheta, float g ) {
			float g2 = pow( g, 2.0 );
			float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
			return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
		}

		void main() {

			vec3 direction = normalize( vWorldPosition - cameraPosition );

			// optical length
			// cutoff angle at 90 to avoid singularity in next formula.
			float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
			float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
			float sR = rayleighZenithLength * inverse;
			float sM = mieZenithLength * inverse;

			// combined extinction factor
			vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

			// in scattering
			float cosTheta = dot( direction, vSunDirection );

			float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
			vec3 betaRTheta = vBetaR * rPhase;

			float mPhase = hgPhase( cosTheta, mieDirectionalG );
			vec3 betaMTheta = vBetaM * mPhase;

			vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
			Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

			// nightsky
			float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
			float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
			vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
			vec3 L0 = vec3( 0.1 ) * Fex;

			// composition + solar disc
			float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
			L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

			vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

			vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

			gl_FragColor = vec4( retColor, 1.0 );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>

		}`};class CSS2DObject extends Object3D{constructor(oe=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=oe,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new Vector2$1(.5,.5),this.addEventListener("removed",function(){this.traverse(function(ie){ie.element instanceof ie.element.ownerDocument.defaultView.Element&&ie.element.parentNode!==null&&ie.element.remove()})})}copy(oe,ie){return super.copy(oe,ie),this.element=oe.element.cloneNode(!0),this.center=oe.center,this}}const _vector=new Vector3$1,_viewMatrix=new Matrix4$1,_viewProjectionMatrix=new Matrix4$1,_a=new Vector3$1,_b=new Vector3$1;class CSS2DRenderer{constructor(oe={}){const ie=this;let ue,de,he,pe;const _e={objects:new WeakMap},Ce=oe.element!==void 0?oe.element:document.createElement("div");Ce.style.overflow="hidden",this.domElement=Ce,this.getSize=function(){return{width:ue,height:de}},this.render=function(Fe,Ve){Fe.matrixWorldAutoUpdate===!0&&Fe.updateMatrixWorld(),Ve.parent===null&&Ve.matrixWorldAutoUpdate===!0&&Ve.updateMatrixWorld(),_viewMatrix.copy(Ve.matrixWorldInverse),_viewProjectionMatrix.multiplyMatrices(Ve.projectionMatrix,_viewMatrix),Ie(Fe,Fe,Ve),Oe(Fe)},this.setSize=function(Fe,Ve){ue=Fe,de=Ve,he=ue/2,pe=de/2,Ce.style.width=Fe+"px",Ce.style.height=Ve+"px"};function xe(Fe){Fe.isCSS2DObject&&(Fe.element.style.display="none");for(let Ve=0,ze=Fe.children.length;Ve<ze;Ve++)xe(Fe.children[Ve])}function Ie(Fe,Ve,ze){if(Fe.visible===!1){xe(Fe);return}if(Fe.isCSS2DObject){_vector.setFromMatrixPosition(Fe.matrixWorld),_vector.applyMatrix4(_viewProjectionMatrix);const Ue=_vector.z>=-1&&_vector.z<=1&&Fe.layers.test(ze.layers)===!0,Pt=Fe.element;Pt.style.display=Ue===!0?"":"none",Ue===!0&&(Fe.onBeforeRender(ie,Ve,ze),Pt.style.transform="translate("+-100*Fe.center.x+"%,"+-100*Fe.center.y+"%)translate("+(_vector.x*he+he)+"px,"+(-_vector.y*pe+pe)+"px)",Pt.parentNode!==Ce&&Ce.appendChild(Pt),Fe.onAfterRender(ie,Ve,ze));const qe={distanceToCameraSquared:$e(ze,Fe)};_e.objects.set(Fe,qe)}for(let Ue=0,Pt=Fe.children.length;Ue<Pt;Ue++)Ie(Fe.children[Ue],Ve,ze)}function $e(Fe,Ve){return _a.setFromMatrixPosition(Fe.matrixWorld),_b.setFromMatrixPosition(Ve.matrixWorld),_a.distanceToSquared(_b)}function Ne(Fe){const Ve=[];return Fe.traverseVisible(function(ze){ze.isCSS2DObject&&Ve.push(ze)}),Ve}function Oe(Fe){const Ve=Ne(Fe).sort(function(Ue,Pt){if(Ue.renderOrder!==Pt.renderOrder)return Pt.renderOrder-Ue.renderOrder;const qe=_e.objects.get(Ue).distanceToCameraSquared,Et=_e.objects.get(Pt).distanceToCameraSquared;return qe-Et}),ze=Ve.length;for(let Ue=0,Pt=Ve.length;Ue<Pt;Ue++)Ve[Ue].element.style.zIndex=ze-Ue}}}const FXAAShader={uniforms:{resolution:{value:new Vector2$1(1/1024,1/512)}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		// FXAA algorithm from NVIDIA, C# implementation by Jasper Flick, GLSL port by Dave Hoskins
		// http://developer.download.nvidia.com/assets/gamedev/files/sdk/11/FXAA_WhitePaper.pdf
		// https://catlikecoding.com/unity/tutorials/advanced-rendering/fxaa/

		uniform sampler2D tDiffuse;
		uniform vec2 resolution;
		varying vec2 vUv;

		#define EDGE_STEP_COUNT 6
		#define EDGE_GUESS 8.0
		#define EDGE_STEPS 1.0, 1.5, 2.0, 2.0, 2.0, 4.0
		const float edgeSteps[EDGE_STEP_COUNT] = float[EDGE_STEP_COUNT]( EDGE_STEPS );

		float _ContrastThreshold = 0.0312;
		float _RelativeThreshold = 0.063;
		float _SubpixelBlending = 1.0;

		vec4 Sample( sampler2D  tex2D, vec2 uv ) {

			return texture( tex2D, uv );

		}

		float SampleLuminance( sampler2D tex2D, vec2 uv ) {

			return dot( Sample( tex2D, uv ).rgb, vec3( 0.3, 0.59, 0.11 ) );

		}

		float SampleLuminance( sampler2D tex2D, vec2 texSize, vec2 uv, float uOffset, float vOffset ) {

			uv += texSize * vec2(uOffset, vOffset);
			return SampleLuminance(tex2D, uv);

		}

		struct LuminanceData {

			float m, n, e, s, w;
			float ne, nw, se, sw;
			float highest, lowest, contrast;

		};

		LuminanceData SampleLuminanceNeighborhood( sampler2D tex2D, vec2 texSize, vec2 uv ) {

			LuminanceData l;
			l.m = SampleLuminance( tex2D, uv );
			l.n = SampleLuminance( tex2D, texSize, uv,  0.0,  1.0 );
			l.e = SampleLuminance( tex2D, texSize, uv,  1.0,  0.0 );
			l.s = SampleLuminance( tex2D, texSize, uv,  0.0, -1.0 );
			l.w = SampleLuminance( tex2D, texSize, uv, -1.0,  0.0 );

			l.ne = SampleLuminance( tex2D, texSize, uv,  1.0,  1.0 );
			l.nw = SampleLuminance( tex2D, texSize, uv, -1.0,  1.0 );
			l.se = SampleLuminance( tex2D, texSize, uv,  1.0, -1.0 );
			l.sw = SampleLuminance( tex2D, texSize, uv, -1.0, -1.0 );

			l.highest = max( max( max( max( l.n, l.e ), l.s ), l.w ), l.m );
			l.lowest = min( min( min( min( l.n, l.e ), l.s ), l.w ), l.m );
			l.contrast = l.highest - l.lowest;
			return l;

		}

		bool ShouldSkipPixel( LuminanceData l ) {

			float threshold = max( _ContrastThreshold, _RelativeThreshold * l.highest );
			return l.contrast < threshold;

		}

		float DeterminePixelBlendFactor( LuminanceData l ) {

			float f = 2.0 * ( l.n + l.e + l.s + l.w );
			f += l.ne + l.nw + l.se + l.sw;
			f *= 1.0 / 12.0;
			f = abs( f - l.m );
			f = clamp( f / l.contrast, 0.0, 1.0 );

			float blendFactor = smoothstep( 0.0, 1.0, f );
			return blendFactor * blendFactor * _SubpixelBlending;

		}

		struct EdgeData {

			bool isHorizontal;
			float pixelStep;
			float oppositeLuminance, gradient;

		};

		EdgeData DetermineEdge( vec2 texSize, LuminanceData l ) {

			EdgeData e;
			float horizontal =
				abs( l.n + l.s - 2.0 * l.m ) * 2.0 +
				abs( l.ne + l.se - 2.0 * l.e ) +
				abs( l.nw + l.sw - 2.0 * l.w );
			float vertical =
				abs( l.e + l.w - 2.0 * l.m ) * 2.0 +
				abs( l.ne + l.nw - 2.0 * l.n ) +
				abs( l.se + l.sw - 2.0 * l.s );
			e.isHorizontal = horizontal >= vertical;

			float pLuminance = e.isHorizontal ? l.n : l.e;
			float nLuminance = e.isHorizontal ? l.s : l.w;
			float pGradient = abs( pLuminance - l.m );
			float nGradient = abs( nLuminance - l.m );

			e.pixelStep = e.isHorizontal ? texSize.y : texSize.x;
			
			if (pGradient < nGradient) {

				e.pixelStep = -e.pixelStep;
				e.oppositeLuminance = nLuminance;
				e.gradient = nGradient;

			} else {

				e.oppositeLuminance = pLuminance;
				e.gradient = pGradient;

			}

			return e;

		}

		float DetermineEdgeBlendFactor( sampler2D  tex2D, vec2 texSize, LuminanceData l, EdgeData e, vec2 uv ) {

			vec2 uvEdge = uv;
			vec2 edgeStep;
			if (e.isHorizontal) {

				uvEdge.y += e.pixelStep * 0.5;
				edgeStep = vec2( texSize.x, 0.0 );

			} else {

				uvEdge.x += e.pixelStep * 0.5;
				edgeStep = vec2( 0.0, texSize.y );

			}

			float edgeLuminance = ( l.m + e.oppositeLuminance ) * 0.5;
			float gradientThreshold = e.gradient * 0.25;

			vec2 puv = uvEdge + edgeStep * edgeSteps[0];
			float pLuminanceDelta = SampleLuminance( tex2D, puv ) - edgeLuminance;
			bool pAtEnd = abs( pLuminanceDelta ) >= gradientThreshold;

			for ( int i = 1; i < EDGE_STEP_COUNT && !pAtEnd; i++ ) {

				puv += edgeStep * edgeSteps[i];
				pLuminanceDelta = SampleLuminance( tex2D, puv ) - edgeLuminance;
				pAtEnd = abs( pLuminanceDelta ) >= gradientThreshold;

			}

			if ( !pAtEnd ) {

				puv += edgeStep * EDGE_GUESS;

			}

			vec2 nuv = uvEdge - edgeStep * edgeSteps[0];
			float nLuminanceDelta = SampleLuminance( tex2D, nuv ) - edgeLuminance;
			bool nAtEnd = abs( nLuminanceDelta ) >= gradientThreshold;

			for ( int i = 1; i < EDGE_STEP_COUNT && !nAtEnd; i++ ) {

				nuv -= edgeStep * edgeSteps[i];
				nLuminanceDelta = SampleLuminance( tex2D, nuv ) - edgeLuminance;
				nAtEnd = abs( nLuminanceDelta ) >= gradientThreshold;

			}

			if ( !nAtEnd ) {

				nuv -= edgeStep * EDGE_GUESS;

			}

			float pDistance, nDistance;
			if ( e.isHorizontal ) {

				pDistance = puv.x - uv.x;
				nDistance = uv.x - nuv.x;

			} else {
				
				pDistance = puv.y - uv.y;
				nDistance = uv.y - nuv.y;

			}

			float shortestDistance;
			bool deltaSign;
			if ( pDistance <= nDistance ) {

				shortestDistance = pDistance;
				deltaSign = pLuminanceDelta >= 0.0;

			} else {

				shortestDistance = nDistance;
				deltaSign = nLuminanceDelta >= 0.0;

			}

			if ( deltaSign == ( l.m - edgeLuminance >= 0.0 ) ) {

				return 0.0;

			}

			return 0.5 - shortestDistance / ( pDistance + nDistance );

		}

		vec4 ApplyFXAA( sampler2D  tex2D, vec2 texSize, vec2 uv ) {

			LuminanceData luminance = SampleLuminanceNeighborhood( tex2D, texSize, uv );
			if ( ShouldSkipPixel( luminance ) ) {

				return Sample( tex2D, uv );

			}

			float pixelBlend = DeterminePixelBlendFactor( luminance );
			EdgeData edge = DetermineEdge( texSize, luminance );
			float edgeBlend = DetermineEdgeBlendFactor( tex2D, texSize, luminance, edge, uv );
			float finalBlend = max( pixelBlend, edgeBlend );

			if (edge.isHorizontal) {

				uv.y += edge.pixelStep * finalBlend;

			} else {

				uv.x += edge.pixelStep * finalBlend;

			}

			return Sample( tex2D, uv );

		}

		void main() {

			gl_FragColor = ApplyFXAA( tDiffuse, resolution.xy, vUv );
			
		}`};class CssElement extends BaseElement{constructor(oe,ie,ue,de){super(oe,BaseElementType.CSS),ve(this,"_htmlElement"),ve(this,"_cssObject"),this._htmlElement=ie,this._cssObject=new CSS2DObject(ie),ue.z!=null?this._cssObject.position.set(ue.x,ue.y,ue.z):this._cssObject.position.set(ue.x,ue.y,0);const he=new BatchData(this._cssObject,this.Id,!0);this.addMeshData(he),de.on("dispose",()=>{this._cssObject.parent.remove(this._cssObject)}),de.addMeshData(new BatchData(this._cssObject,de.Id,!0)),oe.rootObject.add(this._cssObject),this._parent=de,this._htmlElement.setAttribute("elementID",this.Id.toString())}get htmlElement(){return this._htmlElement}get cssObject(){return this._cssObject}dispose(){var oe,ie,ue,de;super.dispose(),(oe=this._cssObject)==null||oe.parent.remove(this._cssObject),(ie=this._cssObject)==null||ie.clear(),this._cssObject=null,(de=(ue=this._htmlElement)==null?void 0:ue.parentNode)==null||de.removeChild(this._htmlElement)}set visible(oe){super.visible=oe}get visible(){return super.visible}}class DxfDrawUtils{static CreatLineObject(oe){let ie=[],ue=[];for(let he=0;he<oe.length/3;he++){const pe=3*he,_e=oe[pe],Ce=oe[pe+1],xe=oe[pe+2];ie.push(new Vector3$1(_e,Ce,xe)),ue.push(255,255,255)}let de=new BufferGeometry().setFromPoints(ie);return de.setAttribute("color",new Uint8BufferAttribute(ue,3,!0)),new LineSegments(de,MaterialData.baseMaterial)}static DrawDxfMModel(oe,ie,ue,de){let he=oe.rootObject,pe=oe.app.view.viewerConfig.backgroundColor,_e=new Map,Ce=new Map,xe=new Map,Ie=new Map;for(const Ne of ie){let Oe=Ne.layer,Fe=de.get(Oe);switch(Oe===null&&(Oe="0"),Ne.type){case DxfRenderType.POINTS:break;case DxfRenderType.LINE_SEGMENTS:this._creatLineSegments(Ne,this._getBatchCollect(Oe,_e,MeshRenderType.LINES),pe);break;case DxfRenderType.POLYLINE:this._creatPolyLine(Ne,this._getBatchCollect(Oe,_e,MeshRenderType.LINES),pe,null);break;case DxfRenderType.TEXT:this._creatText(oe,Ne,this._getBatchCollect(Oe,xe,MeshRenderType.TRIANGLES),pe,Fe);break;case DxfRenderType.MTEXT:this._creatMText(oe,Ne,this._getBatchCollect(Oe,xe,MeshRenderType.TRIANGLES),pe,Fe);break;case DxfRenderType.TRIANGLES:this._creatMesh(Ne,this._getBatchCollect(Oe,Ce,MeshRenderType.TRIANGLES),pe);break;case DxfRenderType.DIV:const Ve=this._creatDiv(Ne);if(Ve==null)continue;let ze;Ie.has(Oe)?ze=Ie.get(Oe):(ze=[],Ie.set(Oe,ze)),ze.push({div:Ve,postion:Ne.divPoistion,layer:Fe});break;default:throw new Error("Unhandled entity type: "+Ne.type)}}let $e=new Map;for(const Ne of _e.keys()){const Oe=de.get(Ne);let Fe=this._getLayerObject(Ne,$e,he,de);const Ve=_e.get(Ne);Ve.mesh.material=MaterialData.lineMaterial;let ze=Ve.mesh.geometry;ze.setIndex(Ve.indices),ze.setAttribute("position",new Float32BufferAttribute(Ve.vertices,3)),ze.setAttribute("color",new Uint8BufferAttribute(Ve.colors,3,!0)),Ve.mesh.notPick=!0,Fe.add(Ve.mesh),Ve.mesh.visible=Oe.visible,Oe.addMeshData(new BatchData(Ve.mesh,Oe.Id,!0))}for(const Ne of xe.keys()){const Oe=de.get(Ne);let Fe=this._getLayerObject(Ne,$e,he,de);const Ve=xe.get(Ne);let ze=Ve.mesh.geometry;ze.setIndex(Ve.indices),ze.setAttribute("position",new Float32BufferAttribute(Ve.vertices,3)),ze.setAttribute("color",new Uint8BufferAttribute(Ve.colors,3,!0)),Ve.ids.length>0&&ze.setAttribute("elementID",new Int32BufferAttribute(Ve.ids,1)),Ve.mesh.material=MaterialData.baseMaterial,Ve.mesh.notPick=!0,Ve.mesh.name=Ne+"-text",Fe.add(Ve.mesh),Ve.mesh.visible=Oe.visible,Oe.addMeshData(new BatchData(Ve.mesh,Oe.Id,!0))}for(const Ne of Ce.keys()){const Oe=de.get(Ne);let Fe=this._getLayerObject(Ne,$e,he,de);const Ve=Ce.get(Ne);let ze=Ve.mesh.geometry;ze.setIndex(Ve.indices),ze.setAttribute("position",new Float32BufferAttribute(Ve.vertices,3)),ze.setAttribute("color",new Uint8BufferAttribute(Ve.colors,3,!0)),Ve.ids.length>0&&ze.setAttribute("elementID",new Int32BufferAttribute(Ve.ids,1)),Ve.mesh.material=MaterialData.baseMaterial,Ve.mesh.notPick=!0,Ve.mesh.name=Ne+"-mesh",Ve.mesh.visible=Oe.visible,Fe.add(Ve.mesh),Oe.addMeshData(new BatchData(Ve.mesh,Oe.Id,!0))}this._drawRooms(oe,ue.defaultRoomColor);for(const Ne of Ie.keys()){const Oe=Ie.get(Ne);this._getLayerObject(Ne,$e,he,de);for(const Fe of Oe)new CssElement(oe,Fe.div,Fe.postion,Fe.layer)}return he}static _getBatchCollect(oe,ie,ue){let de;return ie.has(oe)?de=ie.get(oe):(de=new BatchCollect(ue),de.layer=oe,ie.set(oe,de)),de}static _getLayerObject(oe,ie,ue,de){let he;if(ie.has(oe))he=ie.get(oe);else{he=new Object3D,he.name=oe,ie.set(oe,he),ue.add(he);const pe=de.get(oe);pe&&(pe.layerObject=he)}return he}static _creatLineSegments(oe,ie,ue){let de=ColorUtils.GetRgb(oe.color,ue);if(oe.lineweight==null)for(let he=0;he<oe.vertices.length;he++){const pe=oe.vertices[he];ie.vertices.push(pe.x,pe.y,0),ie.indices.push(ie.maxIndex++),ie.colors.push(de[0],de[1],de[2])}else{let he=CurveUtils.offsetLine(oe.vertices[0],oe.vertices[1],oe.lineweight/100),pe=CurveUtils.offsetLine(oe.vertices[0],oe.vertices[1],-oe.lineweight/100),_e=EarCut.earCutPolygon2([[he.start,he.end,pe.end,pe.start]]);for(let xe=0;xe<_e.vertices.length/2;xe++){const Ie=2*xe;ie.vertices.push(_e.vertices[Ie]),ie.vertices.push(_e.vertices[Ie+1]),ie.vertices.push(0),ie.colors.push(de[0],de[1],de[2])}let Ce=0;for(const xe of _e.triangles){const Ie=xe+ie.maxIndex;ie.indices.push(Ie),Ce<xe&&(Ce=xe)}Ce>0&&(ie.maxIndex+=Ce+1)}}static _creatMesh(oe,ie,ue,de){let he=ColorUtils.GetRgb(oe.color,ue),pe=ie.indices.length,_e=0;for(const Ie of oe.indices){const $e=Ie+ie.maxIndex;ie.indices.push($e),_e<Ie&&(_e=Ie)}let Ce=ie.indices.length-1;_e>0&&(ie.maxIndex+=_e+1);let xe=oe.vertices.length;xe>_e+1&&(xe=_e+1);for(let Ie=0;Ie<xe;Ie++){const $e=oe.vertices[Ie];if(oe.transform){const Ne=new Vector2$1($e.x,$e.y);Ne.applyMatrix3(oe.transform),ie.vertices.push(Ne.x,Ne.y,-1)}else ie.vertices.push($e.x,$e.y,-1);ie.colors.push(he[0],he[1],he[2]),de!=null&&ie.ids.push(de)}return{start:pe,end:Ce}}static _creatPolyLine(oe,ie,ue,de){let he=ColorUtils.GetRgb(oe.color,ue);if(de==null){for(let pe=0;pe<oe.vertices.length;pe++){const _e=oe.vertices[pe];ie.vertices.push(_e.x,_e.y,0),ie.indices.push(ie.maxIndex++),ie.colors.push(he[0],he[1],he[2]),pe!=0&&pe!=oe.vertices.length-1&&(ie.vertices.push(_e.x,_e.y,0),ie.indices.push(ie.maxIndex++),ie.colors.push(he[0],he[1],he[2]))}if(oe.shape==!0){let pe=oe.vertices[oe.vertices.length-1],_e=oe.vertices[0];ie.vertices.push(pe.x,pe.y,0),ie.indices.push(ie.maxIndex++),ie.colors.push(he[0],he[1],he[2]),ie.vertices.push(_e.x,_e.y,0),ie.indices.push(ie.maxIndex++),ie.colors.push(he[0],he[1],he[2])}}else{const pe=de/2;let _e=CurveUtils.offsetVertices(oe.vertices,pe,oe.shape),Ce=CurveUtils.offsetVertices(oe.vertices,-pe,oe.shape);if(oe.shape==!0){let xe=EarCut.earCutPolygon2([_e,Ce]);this._addBatchMeshData(ie,xe,he)}else{for(let Ie=Ce.length-1;Ie>=0;Ie--){const $e=Ce[Ie];_e.push($e)}let xe=EarCut.earCutPolygon2([_e]);this._addBatchMeshData(ie,xe,he)}}}static _addBatchMeshData(oe,ie,ue){let de=0;for(const pe of ie.triangles){const _e=pe+oe.maxIndex;oe.indices.push(_e),de<pe&&(de=pe)}de>0&&(oe.maxIndex+=de+1);let he=ie.vertices.length/2;he>de+1&&(he=de+1);for(let pe=0;pe<he;pe++){const _e=2*pe;oe.vertices.push(ie.vertices[_e]),oe.vertices.push(ie.vertices[_e+1]),oe.vertices.push(0),oe.colors.push(ue[0],ue[1],ue[2])}}static _creatText(oe,ie,ue,de,he){if(TextParser$1.mapFonts.size==0)return;let pe=ie.text;const _e=new TextBlock(pe.textHeight),Ce=TextParser$1.ParseSpecialChars(pe.text);for(const Ie of Ce){const $e=TextParser$1.GetCharShape(Ie,4);$e&&_e.PushChar(Ie,$e)}const xe=_e.Render(pe.startPoint,pe.endPoint,pe.rotation,pe.xScale,pe.halign,pe.valign,ie.color,ie.layer,ie.transform);if(xe){const Ie=new TextElement$1(oe);Ie.text=Ce,Ie.layer=he,Ie.addAttribute("handle",pe.handle);const $e=new BatchData(ue.mesh,Ie.Id,!1);Ie.addMeshData($e);for(const Ne of xe){const Oe=this._creatMesh(Ne,ue,de,Ie.Id);$e.startEndIndex.push(Oe)}}}static _creatMText(oe,ie,ue,de,he){if(TextParser$1.mapFonts.size==0)return;let pe=ie.mtext;const _e=new MTextFormatParser,Ce=TextParser$1.ParseSpecialChars(pe.text);_e.Parse(Ce);const xe=pe.height??12;function Ie(Oe){return TextParser$1.GetCharShape(Oe,4)}const $e=new TextBox(xe,Ie);$e.FeedText(_e.GetContent());const Ne=$e.Render(pe.insertionPoint,pe.width,pe.rotation??0,pe.direction,pe.attachmentPoint,1,ie.color,ie.layer,ie.transform);if(Ne.length>0){const Oe=new TextElement$1(oe);Oe.addAttribute("handle",pe.handle),Oe.text=Ce,Oe.layer=he;const Fe=new BatchData(ue.mesh,Oe.Id,!1);Oe.addMeshData(Fe);for(const Ve of Ne){const ze=this._creatMesh(Ve,ue,de,Oe.Id);Fe.startEndIndex.push(ze)}}}static _drawRooms(oe,ie=3670072){const ue=oe.getAllRoom();if(ue.length>0){let de=[],he=[],pe=[];const _e=ie>>16&255,Ce=ie>>8&255,xe=ie&255;let Ie=[],$e=0,Ne=new BufferGeometry,Oe=new Mesh(Ne,MaterialData.baseMaterial);oe.rootObject.add(Oe);for(const Fe of ue){let Ve=Fe.getAttribute("renderEntity");if(!Ve)continue;let ze=Ve.vertices,Ue=EarCut.earCutPolygon2([ze]);if(Ue.triangles.length>0){let Pt=0;for(let Et=0;Et<Ue.triangles.length;Et++){const kt=Ue.triangles[Et];Pt<kt&&(Pt=kt),he.push(kt+$e)}Pt>0&&($e+=Pt+1);let qe=Ue.vertices.length/2;qe>Pt+1&&(qe=Pt+1);for(let Et=0;Et<qe;Et++){let kt=2*Et;de.push(Ue.vertices[kt]),de.push(Ue.vertices[kt+1]),de.push(-1),Ie.push(_e,Ce,xe),pe.push(Fe.Id)}}Fe._color=ColorUtils.hexColorToString(ie),Fe.addMeshData(new BatchData(Oe,Fe.Id,!1)),Fe.deleteAttribute("renderEntity")}Ne.setIndex(he),Ne.setAttribute("position",new Float32BufferAttribute(de,3)),Ne.setAttribute("elementID",new Int32BufferAttribute(pe,1)),Ne.setAttribute("color",new Uint8BufferAttribute(Ie,3,!0))}}static _creatDiv(oe){if(oe.replaceHTMLElement){let ie=oe.replaceHTMLElement();if(ie)return ie.id=oe.key,ie}return null}}new Vector2$1(0,0),new Vector2$1(1,-.25),new Vector2$1(1,.25);class DxfLoaderPlugin extends LoaderPlugin{constructor(oe){super(oe),ve(this,"options",{arcTessellationAngle:10/180*Math.PI,minArcTessellationSubdivisions:8,suppressPaperSpace:!1}),ve(this,"angBase"),ve(this,"vars"),ve(this,"blocks"),ve(this,"inserts"),ve(this,"layers"),ve(this,"dimStyles"),ve(this,"SPLINE_SUBDIVISION",4),ve(this,"numBlocksFlattened",0),ve(this,"origin"),ve(this,"bounds"),ve(this,"dxfModelData"),ve(this,"config"),this.vars=new Map,this.blocks=new Map,this.inserts=new Map,this.layers=new Map,this.dimStyles=new Map}load(oe){return new Promise((ie,ue)=>{fetch(oe.url).then(de=>de.text()).then(de=>{this.loadDxf(de,oe).then(he=>{he.config=oe,ie(he)}).catch(he=>{ue("")})}).catch(de=>{ue(de)})})}async loadDxf(oe,ie){const ue=new te().parseSync(oe);let de=new DxfModelDocument(this.app);this.dxfModelData=de,this.config=ie,ie.fontsUrls&&ie.fontsUrls.length>0&&await TextParser$1.loadFonts(ie.fontsUrls);for(const[pe,_e]of Object.entries(ue.header))pe.startsWith("$")&&this.vars.set(pe.slice(1),_e);if(this.angBase=this.vars.get("ANGBASE")??0,ue.tables){if(ue.tables.LAYER){for(const[,pe]of Object.entries(ue.tables.LAYER.entries))if(pe){let _e=new Layer(de);_e.name=pe.name,_e._tempColor=ColorUtils.getColorByNumber(Math.abs(pe.colorIndex)),_e.color=ColorUtils.hexColorToString(ColorUtils.getColorByNumber(Math.abs(pe.colorIndex))),pe.standardFlag==1?_e.visible=!1:_e.visible=pe.colorIndex>0,this.layers.set(_e.name,_e)}}if(ue.tables.DIMSTYLE)for(const[,pe]of Object.entries(ue.tables.DIMSTYLE))pe&&this.dimStyles.set(pe.name,pe)}if(ue.blocks)for(const[,pe]of Object.entries(ue.blocks))pe&&this.blocks.set(pe.name,new Block(pe));for(const pe of ue.entities)if(this._filterEntity(pe)){if(pe.type==="INSERT"){this.inserts.set(pe.handle,pe);const _e=this.blocks.get(pe.name);_e==null||_e.RegisterInsert(pe)}else if(pe.type=="DIMENSION"){const _e=pe;if((_e.name??null)!==null){const Ce=this.blocks.get(_e.name);Ce==null||Ce.RegisterInsert(pe)}}}for(const pe of this.blocks.values()){if(pe.data.hasOwnProperty("entities")){let _e=[];const Ce=pe.DefinitionContext();for(const xe of pe.data.entities){if(!this._filterEntity(xe))continue;let Ie=this._parseEntity(xe,Ce);if(Ie&&Ie.length>0)for(const $e of Ie)_e.push($e)}pe.renderEntities=_e}pe.SetFlatten()&&this.numBlocksFlattened++}let he=this._parseDxf(ue);if(this.config.createRoom){const pe=de.getAllRoom();if(pe.length>0)for(const _e of ue.entities){if(!this._filterEntity(_e))continue;let Ce=DxfUtils.getEntityLayer(_e);if(Ce!=="RM-ID"&&Ce!=="RM$TXT")continue;let xe=null;if(_e.type==="TEXT"){let Ie=_e;xe={x:Ie.startPoint.x,y:Ie.startPoint.y}}else if(_e.type==="MTEXT"){let Ie=_e;xe={x:Ie.insertionPoint.x,y:Ie.insertionPoint.y}}if(xe){for(const Ie of pe)if(Ce==="RM-ID"){if(Ie.key!=null)continue;let $e=Ie.getAttribute("renderEntity");MathUtils.isPointInPolygon(xe,$e.vertices)&&(Ie.anchorPoint={x:xe.x,y:xe.y,z:0},Ie.name=_e.text,Ie.key=_e.text)}else if(Ie.anchorPoint===void 0){let $e=Ie.getAttribute("renderEntity");MathUtils.isPointInPolygon(xe,$e.vertices)&&(Ie.anchorPoint={x:xe.x,y:xe.y,z:0},Ie.name=_e.text)}}}}for(const pe of this.layers.values())delete pe._tempColor;return DxfDrawUtils.DrawDxfMModel(de,he,ie,this.layers),de.rootObject.matrix=new Matrix4$1(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1),de.rootObject.matrixAutoUpdate=!1,de.app.view.setHome(null,!1,0,0),de}_parseDxf(oe){let ie=[];for(let ue=0;ue<oe.entities.length;ue++){const de=oe.entities[ue];if(!this._filterEntity(de))continue;let he=this._parseEntity(de);if(he&&he.length>0)for(const pe of he)ie.push(pe)}return ie}_parseEntity(oe,ie=null){const ue=oe.type;if(ue==="LINE"){let de=this._parseLine(oe,ie);return de==null?null:[de]}else if(ue==="LWPOLYLINE"||ue==="POLYLINE"){let de=this._parsePolyLine(oe,ie);return de==null?null:[de]}else if(ue==="ARC"||ue==="CIRCLE"){let de=this._parseArc(oe,ie);return de==null?null:[de]}else if(ue==="ELLIPSE"){let de=this._parseEllipse(oe,ie);return de==null?null:[de]}else if(ue==="SPLINE"){let de=this._parseSpline(oe,ie);return de==null?null:[de]}else{if(ue==="INSERT")return this._parseInsert(oe,ie);if(ue==="TEXT"){let de=this._parseText(oe,ie);return de==null?null:[de]}else if(ue==="MTEXT"){let de=this._parseMText(oe,ie);return de==null?null:[de]}else{if(ue==="HATCH")return this._parseHatch(oe,ie);if(ue==="SOLID"){let de=this._parseSolid(oe,ie);return de==null?null:[de]}else if(ue==="DIMENSION")return this._parseDimension(oe,ie)}}}_parseLine(oe,ie=null){if(!oe.startPoint||!oe.endPoint)return;const ue=[oe.startPoint,oe.endPoint],de=DxfUtils.getEntityLayer(oe,ie),he=this._getEntityColor(oe,ie);return{type:DxfRenderType.LINE_SEGMENTS,vertices:this._transformVertices(ue,ie),layer:de,color:he}}_parsePolyLine(oe,ie=null){let ue,de;if(oe.includesCurveFitVertices||oe.includesSplineFitVertices?(ue=oe.vertices.filter(Oe=>Oe.splineVertex||Oe.curveFittingVertex),de=ue.length):(ue=oe.vertices,de=oe.vertices.length),de<2)return;ue=DxfUtils.mirrorPolylineVertices(oe,ue);let he=0,pe=this._isPlainLine(ue[0]),_e=this._getLineType(oe,ue[0]),Ce=null;const xe=this._getEntityColor(oe,ie),Ie=DxfUtils.getEntityLayer(oe,ie);let $e,Ne=Oe=>{if(Oe===he)return;let Fe=!1,Ve=Ce;if(Oe===de&&he===0?(Fe=!0,Ve===null&&(Ve=ue)):Oe===de-1&&he===0?Ve===null&&(Ve=ue):Oe===de?Ve===null&&(Ve=ue.slice(he,Oe),Ve.push(ue[0])):Ve===null&&(Ve=ue.slice(he,Oe+1)),pe)return{type:DxfRenderType.POLYLINE,vertices:this._transformVertices(Ve,ie),layer:Ie,color:xe,shape:Fe,constantWidth:oe.constantWidth>0?oe.constantWidth:void 0};he=Oe,Oe!==de&&(pe=this._isPlainLine(ue[Oe]),_e=this._getLineType(oe,ue[Oe])),Ce=null};for(let Oe=1;Oe<=de;Oe++){const Fe=ue[Oe-1];let Ve;if(Oe===de){if((oe.flag&1)!==1){$e=Ne(Oe-1);break}Ve=ue[0]}else Ve=ue[Oe];if(Fe.bulge&&pe?(Ce===null&&(Ce=ue.slice(he,Oe)),DxfUtils.generateBulgeVertices(Ce,Fe,Ve,Fe.bulge,this.options.arcTessellationAngle,this.options.minArcTessellationSubdivisions)):Ce!==null&&Ce.push(Ve),Oe===de){$e=Ne(Oe);break}const ze=this._isPlainLine(Ve),Ue=this._getLineType(oe,Ve);(ze!==pe||pe&&Ue!==_e)&&($e=Ne(Oe))}return this.config.createRoom&&ie==null&&(Ie==="RM"||Ie==="RM$")&&ue.length>2&&this._parseRoom(oe,ue,$e),$e}_parseRoom(oe,ie,ue){let de=new Room(this.dxfModelData);de.polygon=ie,de.addAttribute("renderEntity",ue)}_parseArc(oe,ie=null){const ue=[],de=DxfUtils.getEntityLayer(oe,ie),he=this._getEntityColor(oe,ie);let pe=!0,_e=null,Ce=null;if(oe.type=="ARC"&&(pe=!1,_e=oe.startAngle*Math.PI/180,Ce=oe.endAngle*Math.PI/180),DxfUtils.generateArcVertices(ue,oe.center,oe.radius,_e,Ce,null,null,DxfUtils.getEntityExtrusionTransform(oe),null,!0,this.options.arcTessellationAngle,this.angBase),!(ue.length<2))return{type:DxfRenderType.POLYLINE,vertices:this._transformVertices(ue,ie),layer:de,color:he,shape:pe}}_parseEllipse(oe,ie=null){const ue=DxfUtils.getEntityLayer(oe,ie),de=this._getEntityColor(oe,ie),he=[],pe=Math.sqrt(oe.majorAxisEndPoint.x*oe.majorAxisEndPoint.x+oe.majorAxisEndPoint.y*oe.majorAxisEndPoint.y),_e=pe*oe.axisRatio,Ce=Math.atan2(oe.majorAxisEndPoint.y,oe.majorAxisEndPoint.x),xe=oe.startAngle??0;let Ie=oe.endAngle??xe+2*Math.PI;for(;Ie<=xe;)Ie+=Math.PI*2;const $e=(oe.endAngle??null)===null||Math.abs(Ie-xe-2*Math.PI)<1e-6;if(DxfUtils.generateArcVertices(he,oe.center,pe,oe.startAngle,$e?null:oe.endAngle,null,_e,null,Ce,!DxfUtils.getEntityExtrusionTransform(oe),this.options.arcTessellationAngle,this.angBase),!(he.length<2))return{type:DxfRenderType.POLYLINE,vertices:this._transformVertices(he,ie),layer:ue,color:de,shape:$e}}_parseSpline(oe,ie=null){const ue=DxfUtils.getEntityLayer(oe,ie),de=this._getEntityColor(oe,ie);if(!oe.controlPoints)return;const he=oe.controlPoints.map(xe=>[xe.x,xe.y]),pe=[],_e=he.length*this.SPLINE_SUBDIVISION,Ce=1/_e;for(let xe=0;xe<=_e;xe++){const Ie=this._interpolateSpline(xe*Ce,oe.degree,he,oe.knots);pe.push({x:Ie[0],y:Ie[1]})}return{type:DxfRenderType.POLYLINE,vertices:this._transformVertices(pe,ie),layer:ue,color:de}}_parseInsert(oe,ie){if(ie){if(ie.name===oe.name)return;const xe=this.blocks.get(oe.name);if(!xe)return;const Ie=ie.NestedBlockContext(xe,oe);let $e=[];if(xe.data.entities)for(const Ne of xe.data.entities){let Oe=this._parseEntity(Ne,Ie);if(Oe)for(const Fe of Oe)$e.push(Fe)}return $e}const ue=this.blocks.get(oe.name);if(!ue||!ue.HasGeometry())return;const de=DxfUtils.getEntityLayer(oe,ie),he=this._getEntityColor(oe,ie),pe=ue.InstantiationContext().GetInsertionTransform(oe),_e=ue.bounds;this._updateBounds(new Vector2$1(_e.minX,_e.minY).applyMatrix3(pe)),this._updateBounds(new Vector2$1(_e.maxX,_e.maxY).applyMatrix3(pe)),this._updateBounds(new Vector2$1(_e.minX,_e.maxY).applyMatrix3(pe)),this._updateBounds(new Vector2$1(_e.maxX,_e.minY).applyMatrix3(pe));let Ce=[];for(const xe of ue.renderEntities){let Ie,$e;const Ne=this.layers.get(xe.layer);if(xe.color===-2?(Ie=he,$e=de):xe.color===-1?(Ne._tempColor&&(Ie=Ne._tempColor),$e=de):(Ie=xe.color,$e=de),xe.type==DxfRenderType.TEXT||xe.type==DxfRenderType.MTEXT){Ce.push({type:xe.type,text:xe.text,mtext:xe.mtext,vertices:null,color:Ie,layer:$e,transform:pe.clone().translate(xe.transformPosition.x,xe.transformPosition.y)});continue}let Oe=[];for(let Fe=0;Fe<xe.vertices.length;Fe++){const Ve=new Vector2$1(xe.vertices[Fe].x,xe.vertices[Fe].y);pe&&Ve.applyMatrix3(pe),Oe.push(Ve)}Ce.push({type:xe.type,vertices:Oe,color:Ie,layer:$e,indices:xe.indices,shape:xe.shape,constantWidth:xe.constantWidth})}return Ce}_parseText(oe,ie){if(oe.text==null||oe.text=="")return;const ue=DxfUtils.getEntityLayer(oe,ie),de=this._getEntityColor(oe,ie);let he=null;ie&&(he=this._transformVertex({x:0,y:0},ie));const pe=this._neetReplaceDiv(ue);if(pe!=null){let _e=oe.startPoint;return he&&(_e={x:_e.x+he.x,y:_e.y+he.y}),{type:DxfRenderType.DIV,key:oe.text,divPoistion:_e,layer:ue,replaceHTMLElement:pe}}return{type:DxfRenderType.TEXT,layer:ue,color:de,vertices:null,text:oe,transformPosition:he}}_parseMText(oe,ie){if(oe.text==null||oe.text=="")return;const ue=DxfUtils.getEntityLayer(oe,ie),de=this._getEntityColor(oe,ie);let he=null;ie&&(he=this._transformVertex({x:0,y:0},ie));const pe=this._neetReplaceDiv(ue);if(pe!=null){let _e=oe.insertionPoint;return he&&(_e={x:_e.x+he.x,y:_e.y+he.y}),{type:DxfRenderType.DIV,key:oe.text,divPoistion:_e,layer:ue,replaceHTMLElement:pe}}return{type:DxfRenderType.MTEXT,layer:ue,color:de,vertices:null,mtext:oe,transformPosition:he}}_neetReplaceDiv(oe){if(!this.config.divReplaceLayerEntity)return null;for(const ie of this.config.divReplaceLayerEntity)if(ie.layer==oe)return ie.replaceHTMLElement;return null}_parseHatch(oe,ie=null){let ue=[];const de=DxfUtils.getEntityLayer(oe,ie),he=this._getEntityColor(oe,ie);if(oe.solidFill){let pe=function($e,Ne){return $e.boundaryPathTypeFlag===16},_e=function($e){if($e.length===1)return $e[0];let Ne=-1,Oe=$e[0];for(const Fe of Ce){let Ve=MathUtils.calculatePolygonArea(Fe.vertices);Ve>Ne&&(Ne=Ve,Oe=Fe)}return Oe};const Ce=DxfUtils.getHatchBoundaryLoops(oe,this.options.arcTessellationAngle,this.options.minArcTessellationSubdivisions,this.angBase,this.SPLINE_SUBDIVISION);if(Ce.length==0)return;let xe=_e(Ce),Ie=[];if(Ce.length>0&&(Ie=Ce.filter($e=>$e!==xe&&pe($e,oe.hatchStyle))),Ie.length>0){const $e=Ie.map(Fe=>Fe.vertices);$e.unshift(xe.vertices);const Ne=EarCut.earCutPolygon2($e),Oe=new Array;for(let Fe=0;Fe<Ne.vertices.length/2;Fe++){const Ve=Ne.vertices[2*Fe],ze=Ne.vertices[2*Fe+1];Oe.push({x:Ve,y:ze})}ue.push({type:DxfRenderType.TRIANGLES,vertices:this._transformVertices(Oe,ie),indices:Ne.triangles,layer:de,color:he})}else for(let $e=0;$e<Ce.length;$e++){const Ne=Ce[$e],Oe=EarCut.earCutPolygon2([Ne.vertices]),Fe=new Array;for(let Ve=0;Ve<Oe.vertices.length/2;Ve++){const ze=Oe.vertices[2*Ve],Ue=Oe.vertices[2*Ve+1];Fe.push({x:ze,y:Ue})}ue.push({type:DxfRenderType.TRIANGLES,vertices:this._transformVertices(Fe,ie),indices:Oe.triangles,layer:de,color:he})}}return ue}_parseSolid(oe,ie){return this._parseFace(oe,oe.points,ie,!1,DxfUtils.getEntityExtrusionTransform(oe))}_parseFace(oe,ie,ue,de,he=null){if(ie==null||(ie==null?void 0:ie.length)<3)return;const pe=DxfUtils.getEntityLayer(oe,ue),_e=this._getEntityColor(oe,ue);oe.extrusionDirection;function Ce(Ve,ze,Ue){const Pt=new Vector2$1().subVectors(ze,Ve),qe=new Vector2$1().subVectors(Ue,Ve);return Math.abs(Pt.cross(qe))>Number.EPSILON}const xe=new Vector2$1(ie[0].x,ie[0].y),Ie=new Vector2$1(ie[1].x,ie[1].y),$e=new Vector2$1(ie[2].x,ie[2].y);let Ne=null,Oe=Ce(xe,Ie,$e),Fe=!1;if(ie.length>3&&(Ne=new Vector2$1(ie[3].x,ie[3].y),Fe=Ce(Ie,Ne,$e),he&&Ne.applyMatrix3(he)),he&&(xe.applyMatrix3(he),Ie.applyMatrix3(he),$e.applyMatrix3(he)),!(!Oe&&!Fe))if(de){const Ve=[];return Oe&&!Fe?Ve.push(xe,Ie,$e):!Oe&&Fe?Ve.push(Ie,Ne,$e):Ve.push(xe,Ie,Ne,$e),{type:DxfRenderType.POLYLINE,vertices:this._transformVertices(Ve,ue),layer:pe,color:_e,shape:!0}}else{const Ve=[],ze=[];return Oe&&(Ve.push(xe,Ie,$e),CurveUtils.isPolyClockwise(Ve)?ze.push(0,2,1):ze.push(0,1,2)),Fe&&(Oe?CurveUtils.isPolyClockwise([Ie,$e,Ne])?ze.push(1,3,2):ze.push(1,2,3):(Ve.push(Ie,$e),CurveUtils.isPolyClockwise([Ie,$e,Ne])?ze.push(0,1,2):ze.push(0,2,1)),Ve.push(Ne)),{type:DxfRenderType.TRIANGLES,vertices:this._transformVertices(Ve,ue),indices:ze,layer:pe,color:_e}}}_parseDimension(oe,ie){const ue=DxfUtils.getEntityLayer(oe,ie),de=this._getEntityColor(oe,ie);if((oe.name??null)!==null&&this.blocks.has(oe.name)){const he={type:"INSERT",name:oe.name,insertionPoint:{x:0,y:0},layer:ue,color:de,colorIndex:oe.colorIndex,subclassMarker:void 0,xScale:void 0,yScale:void 0,zScale:void 0,rotation:void 0,columnCount:void 0,rowCount:void 0,columnSpacing:void 0,rowSpacing:void 0,extrusionDirection:void 0,handle:void 0};return this._parseInsert(he,ie)}return[]}_interpolateSpline(oe,ie,ue,de=null,he=null){let pe,_e,Ce,xe;const Ie=ue.length,$e=ue[0].length;if(ie<1)throw new Error("Degree must be at least 1 (linear)");if(ie>Ie-1)throw new Error("Degree must be less than or equal to point count - 1");if(!he)for(he=[],pe=0;pe<Ie;pe++)he[pe]=1;if(de){if(de.length!==Ie+ie+1)throw new Error("Bad knot vector length")}else for(de=[],pe=0;pe<Ie+ie+1;pe++)de[pe]=pe;const Ne=[ie,de.length-1-ie],Oe=de[Ne[0]],Fe=de[Ne[1]];for(oe=oe*(Fe-Oe)+Oe,oe<Oe?oe=Oe:oe>Fe&&(oe=Fe),Ce=Ne[0];Ce<Ne[1]&&!(oe>=de[Ce]&&oe<=de[Ce+1]);Ce++);const Ve=[];for(pe=0;pe<Ie;pe++){for(Ve[pe]=[],_e=0;_e<$e;_e++)Ve[pe][_e]=ue[pe][_e]*he[pe];Ve[pe][$e]=he[pe]}let ze;for(xe=1;xe<=ie+1;xe++)for(pe=Ce;pe>Ce-ie-1+xe;pe--)for(ze=(oe-de[pe])/(de[pe+ie+1-xe]-de[pe]),_e=0;_e<$e+1;_e++)Ve[pe][_e]=(1-ze)*Ve[pe-1][_e]+ze*Ve[pe][_e];const Ue=[];for(pe=0;pe<$e;pe++)Ue[pe]=Ve[Ce][pe]/Ve[Ce][$e];return Ue}_getEntityColor(oe,ie){let ue=-1;if(oe.colorIndex===0)ue=-2;else if(oe.colorIndex===256){if(oe.hasOwnProperty("layer")){const de=this.layers.get(oe.layer);if(de)return de._tempColor}ue=-1}else oe.hasOwnProperty("color")?ue=oe.color:oe.hasOwnProperty("layer")&&oe.layer=="0"&&(ue=-2);if(ie)return ue;if(ue===-1||ue===-2){if(oe.hasOwnProperty("layer")){const de=this.layers.get(oe.layer);if(de)return de._tempColor}}else return ue;return 0}_isPlainLine(oe){return!(oe.startWidth||oe.endWidth)}_getLineType(oe,ie){return 0}_transformVertices(oe,ie=null){if(ie==null)return oe;let ue=[];for(const de of oe)ue.push(this._transformVertex(de,ie));return ue}_transformVertex(oe,ie=null){return ie?ie.TransformVertex(oe):(this._updateBounds(oe),{x:oe.x-this.origin.x,y:oe.y-this.origin.y})}_updateBounds(oe){this.bounds==null?this.bounds={minX:oe.x,maxX:oe.x,minY:oe.y,maxY:oe.y}:(oe.x<this.bounds.minX?this.bounds.minX=oe.x:oe.x>this.bounds.maxX&&(this.bounds.maxX=oe.x),oe.y<this.bounds.minY?this.bounds.minY=oe.y:oe.y>this.bounds.maxY&&(this.bounds.maxY=oe.y)),this.origin==null&&(this.origin={x:oe.x,y:oe.y})}_filterEntity(oe){return!oe.isVisible}}class MeshElement extends BaseElement{constructor(oe){super(oe,BaseElementType.MESH)}}class InstanceData{constructor(oe,ie){ve(this,"_index"),ve(this,"_orignMatrix4"),ve(this,"_visible",!0),ve(this,"_color"),ve(this,"_matrix"),ve(this,"mesh"),ve(this,"meshIsWhole"),ve(this,"_boundingBox"),this.mesh=oe,this._index=ie,this._orignMatrix4=new Matrix4$1,this._matrix=new Matrix4$1,this._matrix.identity(),this.mesh.getMatrixAt(ie,this._orignMatrix4),this.meshIsWhole=!1}set matrix(oe){this._matrix.copy(oe);let ie=this._orignMatrix4.clone();ie.premultiply(oe),this.mesh.setMatrixAt(this._index,ie),this.mesh.instanceMatrix.needsUpdate=!0,this._boundingBox=null}get matrix(){return this._matrix}computeBoundingSphere(){this.mesh.computeBoundingSphere(),this._boundingBox=null}set visible(oe){if(this._visible!=oe){if(this._visible=oe,oe){let ie=this._orignMatrix4.clone();ie.premultiply(this._matrix),this.mesh.setMatrixAt(this._index,ie)}else this.mesh.setMatrixAt(this._index,MaterialData.zeroMatrix4);this.mesh.instanceMatrix.needsUpdate=!0}}get visible(){return this._visible}set color(oe){const ie=this.mesh.geometry.attributes.color;if(ie){if(oe&&oe.length>=7){const ue=oe.substring(0,7),de=oe.length===9?parseInt(oe.substring(7),16)/255:1,he=parseInt(ue.slice(1,3),16)/255,pe=parseInt(ue.slice(3,5),16)/255,_e=parseInt(ue.slice(5,7),16)/255;de<1&&this.mesh.material.transparent==!1&&(this.mesh.material.orign_transparent=this.mesh.material.transparent,this.mesh.material.orign_side=this.mesh.material.side,this.mesh.material.transparent=!0,this.mesh.material.side=DoubleSide,this.mesh.material.opacity=1,this.mesh.material.needsUpdate=!0),ie.itemSize===3||de==1?ie.setXYZ(this._index,he,pe,_e):ie.setXYZW(this._index,he,pe,_e,de)}else this.mesh.material.orign_transparent!=null&&(this.mesh.material.transparent=this.mesh.material.orign_transparent,this.mesh.material.side=this.mesh.material.orign_side,delete this.mesh.material.orign_transparent,delete this.mesh.material.orign_side,this.mesh.material.needsUpdate=!0),ie.itemSize===4?ie.setXYZW(this._index,1,1,1,1):ie.setXYZ(this._index,1,1,1);ie.needsUpdate=!0}}get color(){return this._color}set boundingBox(oe){this._boundingBox=oe}get boundingBox(){if(this._boundingBox==null){this.mesh.geometry.boundingBox==null&&this.mesh.geometry.computeBoundingBox(),this._boundingBox=this.mesh.geometry.boundingBox.clone();let oe=this._orignMatrix4.clone();oe.premultiply(this._matrix);let ie=oe.multiply(this.mesh.matrix);this.mesh.updateWorldMatrix(!0,!1),ie.premultiply(this.mesh.matrixWorld),this._boundingBox.applyMatrix4(ie)}return this._boundingBox}get orignMatrix4(){return this._orignMatrix4}dispose(){this._boundingBox=null,this._matrix=null,this._color=null,this._orignMatrix4=null}}const shaderFunctions=`
// source: https://timseverien.com/posts/2020-06-19-colour-correction-with-webgl/
vec3 adjustContrast(vec3 color, float value) {
    const vec3 zero = vec3(0.);
    return max(zero, 0.5 + value * (color - 0.5));
}

// source: https://gist.github.com/yiwenl/745bfea7f04c456e0101
vec3 hsv2rgb(vec3 c){
    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}

// source: https://gist.github.com/yiwenl/745bfea7f04c456e0101
vec3 rgb2hsv(vec3 rgb) {
    float Cmax = max(rgb.r, max(rgb.g, rgb.b));
    float Cmin = min(rgb.r, min(rgb.g, rgb.b));
    float delta = Cmax - Cmin;
    vec3 hsv = vec3(0., 0., Cmax);
    if (Cmax > Cmin) {
        hsv.y = delta / Cmax;
        if (rgb.r == Cmax)
            hsv.x = (rgb.g - rgb.b) / delta;
        else {
            if (rgb.g == Cmax)
                hsv.x = 2. + (rgb.b - rgb.r) / delta;
            else
                hsv.x = 4. + (rgb.r - rgb.g) / delta;
        }
        hsv.x = fract(hsv.x / 6.);
    }
    return hsv;
}
`,aoCode=`

float aoMapClr = 1.;

#ifdef USE_AOMAP
    aoMapClr = (texture2D(aoMap, vUv2).r - 1.) * aoMapIntensity + 1.;
#else
    #ifdef USE_LIGHTMAP
        vec3 lightMapVec = (texture2D(lightMap, vUv2).rgb - vec3(1.)) * (lightMapIntensity / PI) + vec3(1.);
        
        const vec3 luminanceWeight = vec3(0.2126, 0.7152, 0.0722);

        // grayscale the lightmap
        aoMapClr = dot(lightMapVec.rgb, luminanceWeight);
    #endif
#endif

if(aoMapGamma != 1.) aoMapClr = pow(aoMapClr, 1. / aoMapGamma);

// clamp
aoMapClr = min(1., aoMapClr);
`,envBasicCode=`
envMapColor.rgb *= aoMapClr;

vec3 origEnvMapColor = vec3(envMapColor.rgb);

float origAoMapClr = aoMapClr;

#ifndef DISABLE_SMOOTHING
    // calculate smoothing
    float smoothingRoughnessInfluence = max(0.75 - roughness, 0.);
    float smoothingAoInfluence = (1. - aoMapClr) * 0.75;

    float totalSmoothing = 0.3 + smoothingPower + (1. - smoothingPower) * smoothingRoughnessInfluence - smoothingAoInfluence;
    vec3 smoothing = vec3(max(totalSmoothing, 0.));

    envMapColor.rgb = pow(envMapColor.rgb, smoothing);
#endif

envMapColor.rgb += pow(envMapColor.rgb, vec3(envPower)) * (aoPower * 0.2);

float aoMapPower = pow(aoMapClr + aoSmoothing * (0.5 - aoMapClr), aoPower);
if(aoMapPower > 1.) aoMapPower = 1.;
`,getIBLIrradiance_replace=`
${envBasicCode}

envMapColor.rgb *= irradianceColor;

#ifndef DISABLE_SMOOTHING
    envMapColor.rgb = pow(envMapColor.rgb, smoothing);
#endif

float origAoMapClrPow = origAoMapClr * origAoMapClr;

vec3 hemisphereInfluence = aoMapClr * mix(
    irradianceColor,
    hemisphereColor,
    1. - origAoMapClrPow
) * envMapColor.rgb * envMapIntensity * 0.125;

envMapColor.rgb = mix(envMapColor.rgb, hemisphereColor, 1. - origAoMapClrPow);

vec3 env = irradianceIntensity * envMapColor.rgb * envMapIntensity * aoMapPower + hemisphereInfluence;

if(sunIntensity != 0.){
    env += irradianceIntensity * sunIntensity * irradianceColor * origEnvMapColor * envMapIntensity * pow(aoMapClr, 16.);
}

return env;
`,getIBLRadiance_replace=`
${envBasicCode}

#ifndef DISABLE_SMOOTHING

envMapColor.rgb *= radianceColor;
envMapColor.rgb = pow(envMapColor.rgb, smoothing);

#endif

vec3 env = envMapColor.rgb * envMapIntensity * 0.125 * (aoMapPower * radianceIntensity + aoMapClr * radianceColor);

if(sunIntensity != 0.){
    env += radianceIntensity * sunIntensity * irradianceColor * origEnvMapColor * envMapIntensity * pow(aoMapClr, 16.);
}

return env;
`,map_fragment=ShaderChunk.map_fragment.replace("diffuseColor *= sampledDiffuseColor;",`
    #ifdef USE_LIGHTMAP
        vec3 lightMapClr = (texture2D(lightMap, vUv2).rgb - vec3(1.)) * (lightMapIntensity / PI) + vec3(1.);
    #else
        vec3 lightMapClr = vec3(1.);
    #endif

    if(lightMapGamma != 1.) lightMapClr = pow(lightMapClr, vec3(1. / lightMapGamma));

    if(lightMapContrast != 1.) lightMapClr = adjustContrast(lightMapClr, lightMapContrast);

    // clamp
    lightMapClr = min(lightMapClr, vec3(1.));

    // source: Chapter 16 of OpenGL Shading Language
    const vec3 W = vec3(0.2125, 0.7154, 0.0721);
    vec3 intensity = vec3(dot(lightMapClr, W));
    lightMapClr = mix(intensity, lightMapClr, lightMapSaturation);

    if(mapContrast != 1.) sampledDiffuseColor = vec4(adjustContrast(sampledDiffuseColor.rgb, mapContrast), 1.);

    vec3 lightMapHsv = rgb2hsv(lightMapClr);
    float saturation = lightMapHsv.y;

    float mixVal = saturation;
    
    float value = pow(lightMapHsv.z, 0.05);
    float darkness = 1. - value;

    // lightMapHsv.y = mix(lightMapHsv.y, lightMapHsv.y * 5., darkness * 1.75);
    
    lightMapHsv = hsv2rgb(lightMapHsv);

    // blend the lightmap color towards the diffuse color the more light this spot receives
    lightMapHsv = mix(lightMapHsv, lightMapHsv * normalize(sampledDiffuseColor.rgb) * length(sampledDiffuseColor.rgb), value);

    mixVal += darkness * 0.2;
    
    lightMapClr = pow(
        mix(lightMapClr, lightMapHsv, mixVal),
        vec3(1.25)
    );

    float lightnessFactor = pow(lightMapHsv.z, 0.1);

    diffuseColor *= lightnessFactor * sampledDiffuseColor * vec4(lightMapClr, 1.);
    `),lights_pars_begin=ShaderChunk.lights_pars_begin.replace("vec3 irradiance = ambientLightColor;",`
    ${aoCode}
    aoMapClr *= aoMapClr;

    vec3 irradiance = mix(
        ambientLightColor,
        aoColor * 15. * ((aoMapClr - 1.) * 0.28 + 1.),
        1. - aoMapClr
    );`),lights_fragment_maps=ShaderChunk.lights_fragment_maps.replace("USE_LIGHTMAP","false"),toFloat32=le=>{let oe=Math.fround(le).toString();return oe.includes(".")||(oe+="."),oe},toVec3=le=>"vec3("+toFloat32(le.r)+", "+toFloat32(le.g)+", "+toFloat32(le.b)+")";function EnhanceShaderLighting(le,{aoColor:oe=new Color$2(0),hemisphereColor:ie=new Color$2(16777215),irradianceColor:ue=new Color$2(16777215),radianceColor:de=new Color$2(16777215),aoPower:he=1,aoSmoothing:pe=0,aoMapGamma:_e=1,lightMapGamma:Ce=1,lightMapSaturation:xe=1,envPower:Ie=1,roughnessPower:$e=1,sunIntensity:Ne=0,mapContrast:Oe=1,lightMapContrast:Fe=1,smoothingPower:Ve=.25,irradianceIntensity:ze=Math.PI,radianceIntensity:Ue=1,hardcodeValues:Pt=!1}={}){if(le.defines&&le.fragmentShader.includes("#define ENHANCE_SHADER_LIGHTING"))return;le.defines===void 0&&(le.defines={}),le.defines.ENHANCE_SHADER_LIGHTING="",Pt?le.fragmentShader=le.fragmentShader.replace("uniform float opacity;",`
            uniform float opacity;
            
            const vec3 aoColor = ${toVec3(oe)};
            const vec3 hemisphereColor = ${toVec3(ie)};
            const vec3 irradianceColor = ${toVec3(ue)};
            const vec3 radianceColor = ${toVec3(de)};

            const float aoPower = ${toFloat32(he)};
            const float aoSmoothing = ${toFloat32(pe)};
            const float aoMapGamma = ${toFloat32(_e)};
            const float lightMapGamma = ${toFloat32(Ce)};
            const float lightMapSaturation = ${toFloat32(xe)};
            const float envPower = ${toFloat32(Ie)};
            const float roughnessPower = ${toFloat32($e)};
            const float sunIntensity = ${toFloat32(Ne)};
            const float mapContrast = ${toFloat32(Oe)};
            const float lightMapContrast = ${toFloat32(Fe)};
            const float smoothingPower = ${toFloat32(Ve)};
            const float irradianceIntensity = ${toFloat32(ze)};
            const float radianceIntensity = ${toFloat32(Ue)};
            `):(le.uniforms.aoColor={value:oe},le.uniforms.hemisphereColor={value:ie},le.uniforms.irradianceColor={value:ue},le.uniforms.radianceColor={value:de},le.uniforms.aoPower={value:he},le.uniforms.aoSmoothing={value:pe},le.uniforms.lightMapGamma={value:Ce},le.uniforms.lightMapSaturation={value:xe},le.uniforms.aoMapGamma={value:_e},le.uniforms.envPower={value:Ie},le.uniforms.smoothingPower={value:Ve},le.uniforms.roughnessPower={value:$e},le.uniforms.sunIntensity={value:Ne},le.uniforms.mapContrast={value:Oe},le.uniforms.lightMapContrast={value:Fe},le.uniforms.irradianceIntensity={value:ze},le.uniforms.radianceIntensity={value:Ue},le.fragmentShader=le.fragmentShader.replace("uniform float opacity;",`
            uniform float opacity;
            
            uniform vec3 aoColor;
            uniform vec3 hemisphereColor;
            uniform vec3 irradianceColor;
            uniform vec3 radianceColor;
            uniform float aoPower;
            uniform float aoSmoothing;
            uniform float aoMapGamma;
            uniform float lightMapGamma;
            uniform float lightMapSaturation;
            uniform float envPower;
            uniform float roughnessPower;
            uniform float sunIntensity;
            uniform float mapContrast;
            uniform float lightMapContrast;
            uniform float smoothingPower;
            uniform float irradianceIntensity;
            uniform float radianceIntensity;
            `));let qe=le.vertexShader.replace(/#include <fog_vertex>/,`
    #include <fog_vertex>
#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
    vUv2 = uv2;
#endif
    `);le.vertexShader=`
  #if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
      attribute vec2 uv2;
      varying vec2 vUv2;
  #endif
  `+qe,le.fragmentShader=le.fragmentShader.replace("uniform float opacity;",`
  #define ENHANCE_SHADER_LIGHTING
  uniform float opacity;
  #if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
     varying vec2 vUv2;
  #endif
  ${shaderFunctions}
  `).replace("main() {",`
      main() {
      ${aoCode}
      `).replace("#include <aomap_fragment>","").replace("#include <lights_pars_begin>",lights_pars_begin).replace("#include <lights_fragment_maps>",lights_fragment_maps).replace("#include <map_fragment>",map_fragment).replace("#include <envmap_physical_pars_fragment>",ShaderChunk.envmap_physical_pars_fragment).replace("getIBLIrradiance( const in vec3 normal )","getIBLIrradiance( const in vec3 normal, float aoMapClr )").replace("getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness )","getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, float aoMapClr )").replace("return PI * envMapColor.rgb * envMapIntensity;",getIBLIrradiance_replace).replace("return envMapColor.rgb * envMapIntensity;",getIBLRadiance_replace).replace(" #if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )",`
            #include <aomap_fragment>
            #if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
            `).replace("iblIrradiance += getIBLIrradiance( geometryNormal );",`
            iblIrradiance += getIBLIrradiance( geometryNormal, aoMapClr );
            `).replace("radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );",`
            radiance += getIBLRadiance( geometryViewDir, geometryNormal, pow(material.roughness, roughnessPower), aoMapClr );
            `).replace("clearcoatRadiance += getIBLRadiance( geometryViewDir, geometry.clearcoatNormal, material.clearcoatRoughness );",`
            clearcoatRadiance += getIBLRadiance( geometryViewDir, geometry.clearcoatNormal, pow(material.clearcoatRoughness, roughnessPower), aoMapClr );
            `).replace(/vec4 diffuseColor = vec4\( diffuse, opacity \);/,`    
              #ifdef USE_COLOR_ALPHA
                vec4 diffuseColor = (vColor.r + vColor.g + vColor.b +vColor.a< 3.99) ?  vec4(vColor.rgb,opacity): vec4(diffuse, opacity);
              #elif defined(USE_COLOR) 
                vec4 diffuseColor = (vColor.r + vColor.g + vColor.b < 2.99) ? vec4(vColor,opacity) : vec4(diffuse, opacity);
              #else
                vec4 diffuseColor = vec4( diffuse, opacity );
              #endif
            `)}const cr=class _o extends MeshStandardMaterial{constructor(oe){super(oe),ve(this,"shader")}onBeforeCompile(oe,ie){this.shader=oe,EnhanceShaderLighting(oe,_o.enhanceShaderLightingParams),this.shader.uniforms.highlightedBatchId={value:-1},this.shader.uniforms.highlightColor={value:new Color$2(16761095)};let ue=oe.vertexShader.replace(/#include <uv_vertex>/,`
            #include <uv_vertex>
            v_elementID =  float(elementID);
            `);oe.vertexShader=`
                attribute int elementID;
                varying float v_elementID;
            `+ue,oe.fragmentShader=`
                varying float v_elementID;
                uniform float highlightedBatchId;
                uniform vec3 highlightColor;
            `+oe.fragmentShader.replace(/#include <clipping_planes_fragment>/,`
                if(abs( v_elementID - highlightedBatchId ) < 0.01){
                   diffuseColor=vec4( highlightColor, 1 );
                }
                #include <clipping_planes_fragment>
                `)}setHighlightedBatchId(oe){this.shader.uniforms.highlightedBatchId.value=oe}setHighlightColor(oe){this.shader.uniforms.highlightColor.value=new Color$2(oe)}};ve(cr,"enhanceShaderLightingParams",{aoColor:new Color$2(0),hemisphereColor:new Color$2(16777215),irradianceColor:new Color$2(16777215),radianceColor:new Color$2(8900331),sunIntensity:0,smoothingPower:1,envPower:1,aoPower:1,aoSmoothing:1,radianceIntensity:1,aoMapGamma:1,lightMapGamma:0,lightMapSaturation:.5,roughnessPower:.2,mapContrast:1,lightMapContrast:1,irradianceIntensity:Math.PI,hardcodeValues:!1});let MyMeshStandardMaterial=cr;class BatchMeshData{constructor(oe,ie){ve(this,"_instanceId"),ve(this,"_orignMatrix4"),ve(this,"_visible",!0),ve(this,"_color"),ve(this,"_threeColor"),ve(this,"_matrix"),ve(this,"mesh"),ve(this,"meshIsWhole"),ve(this,"_boundingBox"),this.mesh=oe,this._instanceId=ie,this._orignMatrix4=new Matrix4$1,this._matrix=new Matrix4$1,this._matrix.identity(),this.mesh.getMatrixAt(ie,this._orignMatrix4),this.meshIsWhole=!1,this._threeColor=new Color$2}set matrix(oe){this._matrix.copy(oe);let ie=this._orignMatrix4.clone();ie.premultiply(oe),this.mesh.setMatrixAt(this._instanceId,ie),this._boundingBox=null}get matrix(){return this._matrix}computeBoundingSphere(){this.mesh.computeBoundingSphere(),this._boundingBox=null}set visible(oe){this._visible!=oe&&(this._visible=oe,this.mesh.setVisibleAt(this._instanceId,oe))}get visible(){return this._visible}set color(oe){let ie=this.mesh.getGeometryIdAt(this._instanceId),ue=this.mesh.getGeometryRangeAt(ie);const de=this.mesh.geometry.attributes.color;if(oe&&oe.length>=7){const he=oe.substring(0,7);let pe=oe.length===9?parseInt(oe.substring(7),16)/255:1;pe<1&&this.mesh.material.transparent==!1&&(this.mesh.material.orign_transparent=this.mesh.material.transparent,this.mesh.material.orign_side=this.mesh.material.side,this.mesh.material.transparent=!0,this.mesh.material.side=DoubleSide,this.mesh.material.opacity=1,this.mesh.material.needsUpdate=!0);const _e=parseInt(he.slice(1,3),16)/255,Ce=parseInt(he.slice(3,5),16)/255,xe=parseInt(he.slice(5,7),16)/255;if(de.itemSize===3||pe==1)for(let Ie=0;Ie<ue.vertexCount;Ie++){const $e=ue.vertexStart+Ie;de.setXYZ($e,_e,Ce,xe)}else for(let Ie=0;Ie<ue.vertexCount;Ie++){const $e=ue.vertexStart+Ie;de.setXYZW($e,_e,Ce,xe,pe)}de.needsUpdate=!0}else{if(this.mesh.material.orign_transparent!=null&&(this.mesh.material.transparent=this.mesh.material.orign_transparent,this.mesh.material.side=this.mesh.material.orign_side,delete this.mesh.material.orign_transparent,delete this.mesh.material.orign_side,this.mesh.material.needsUpdate=!0),de.itemSize==4)for(let he=0;he<ue.vertexCount;he++){const pe=ue.vertexStart+he;de.setXYZW(pe,1,1,1,1)}else for(let he=0;he<ue.vertexCount;he++){const pe=ue.vertexStart+he;de.setXYZ(pe,1,1,1)}de.needsUpdate=!0;return}}get color(){return this._color}set boundingBox(oe){this._boundingBox=oe}get boundingBox(){if(this._boundingBox==null){let oe=this.mesh.getGeometryIdAt(this._instanceId);this._boundingBox=new Box3,this.mesh.getBoundingBoxAt(oe,this._boundingBox);let ie=this._orignMatrix4.clone();ie.premultiply(this._matrix);let ue=ie.multiply(this.mesh.matrix);this.mesh.updateWorldMatrix(!0,!1),ue.premultiply(this.mesh.matrixWorld),this._boundingBox.applyMatrix4(ie)}return this._boundingBox}get orignMatrix4(){return this._orignMatrix4}dispose(){this._boundingBox=null,this._matrix=null,this._color=null,this._orignMatrix4=null}}class LevelData{constructor(){ve(this,"name"),ve(this,"elevation"),ve(this,"categoryDataMap")}}class CategoryData{constructor(){ve(this,"name"),ve(this,"elementDataMap")}}class Object3DUtils{static get batchColorMaterial(){return this._batchColorMaterial==null&&(this._batchColorMaterial=new MyMeshStandardMaterial({vertexColors:!0}),this._batchColorMaterial.name="batchColorMaterial"),this._batchColorMaterial}static BatchAndInstance(oe,ie){var ue,de;BatchedMesh.prototype._validateGeometry=function(Ie){const $e=this.geometry;if(!!Ie.getIndex()!=!!$e.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const Ne in $e.attributes){if(!Ie.hasAttribute(Ne)){const Ve=$e.attributes[Ne],ze=new Float32BufferAttribute(new Float32Array(Ie.attributes.position.count*Ve.itemSize),Ve.itemSize,Ve.normalized);Ie.setAttribute(Ne,ze)}const Oe=Ie.getAttribute(Ne),Fe=$e.getAttribute(Ne);if(Oe.itemSize!==Fe.itemSize||Oe.normalized!==Fe.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}};let he=new Map,pe=new Map;const _e=4;ie.modelTree=new ModelTree;let Ce=!0,xe=(Ie,$e)=>{if($e.name=Ie.name,$e.userData=Ie.userData,Ie instanceof Mesh&&Ie.geometry.getAttribute("position")!=null){let Ne=Ie,Oe=!1,Fe=qe=>{if(!Oe&&qe&&qe.parent)if(qe.parent.name=="root"){Ne=qe,Oe=!0;return}else Fe(qe.parent)};Ce&&Fe(Ne),Oe==!1&&(Ce=!1);let Ve=Ie.geometry,ze=[],Ue=Ne.id;if(pe.has(Ne.id))Ue=pe.get(Ne.id);else{let qe=new MeshElement(ie);const Et=new Box3;Et.expandByObject(Ne),qe.boundingBox=Et,Ne.userData.name?qe.name=Ne.userData.name:qe.name=Ne.name,Ne.userData.UniqueId?(qe.key=Ne.userData.UniqueId,Ce=!0):Ce=!1,qe.userData=Ne.userData,pe.set(Ne.id,qe.Id),Ue=qe.Id}$e.id=Ue,Ie.material.vertexColors=!0;const Pt=Ie.geometry.getAttribute("position").count;for(let qe=0;qe<Pt;qe++)ze.push(Ue);if(Ve.setAttribute("elementID",new Int32BufferAttribute(ze,1)),Ve.elementID=Ue,Ie.elementID=Ue,he.has(Ie.material.uuid))he.get(Ie.material.uuid).push(Ie);else{let qe=[];qe.push(Ie),he.set(Ie.material.uuid,qe)}}else $e.id=BaseElement.id++;if(Ie.children&&Ie.children.length>0){$e.children=[];for(const Ne of Ie.children){const Oe=new ModelTree;$e.children.push(Oe),xe(Ne,Oe)}}};xe(oe,ie.modelTree),ie.modelTree.name=ie.name;for(let Ie of he.values()){let $e=new Map;for(const Oe of Ie)if($e.has(Oe.geometry.uuid)){let Fe=$e.get(Oe.geometry.uuid);Fe.push(Oe),$e.set(Oe.geometry.uuid,Fe)}else{let Fe=[];Fe.push(Oe),$e.set(Oe.geometry.uuid,Fe)}let Ne=[];for(const Oe of $e.values()){let Fe=Oe.length;if(Fe>1){let Ve=Oe[0].geometry;Ve.deleteAttribute("elementID"),Ve.deleteAttribute("color");let ze=new InstancedMesh(Ve,Oe[0].material,Fe);ze.orignMaterial=Oe[0].material,ze.pickMaterial=MaterialData.pickMaterial;const Ue=new InstancedBufferAttribute(new Int32Array(Fe),1),Pt=new InstancedBufferAttribute(new Uint8Array(Fe*_e).fill(255),_e,!0);for(let qe=0;qe<Oe.length;qe++){const Et=Oe[qe];Et.updateWorldMatrix(!0,!1);const kt=Et.matrixWorld.clone();let At=Et.elementID;ze.setMatrixAt(qe,kt);let Dt=new InstanceData(ze,qe);(ue=ie.getElement(At))==null||ue.addMeshData(Dt),Ue.setX(qe,At)}Ve.setAttribute("elementID",Ue),Ve.setAttribute("color",Pt),ie.rootObject.add(ze)}else for(let Ve=0;Ve<Oe.length;Ve++)Ne.push(Oe[Ve])}if(Ne.length>0){let Oe=0,Fe=0;for(const Ue of Ne){let Pt=Ue.geometry.attributes.position.count;for(const qe in Ue.geometry.attributes)Pt=Math.max(Ue.geometry.attributes[qe].count,Pt);Oe+=Pt,Ue.geometry.index&&(Fe+=Ue.geometry.index.count)}const Ve=new BatchedMesh(Ne.length,Oe,Fe,Ne[0].material);Ve.setInstanceCount(Ne.length);for(const Ue of Ne){const Pt=Ve.addGeometry(Ue.geometry),qe=Ve.addInstance(Pt);Ue.updateWorldMatrix(!0,!1);const Et=Ue.matrixWorld.clone();Ve.setMatrixAt(qe,Et);let kt=Ue.geometry.elementID,At=new BatchMeshData(Ve,qe);(de=ie.getElement(kt))==null||de.addMeshData(At),Ue.geometry.dispose()}const ze=new Uint8BufferAttribute(new Uint8Array(Ve.geometry.attributes.position.count*_e).fill(255),_e,!0);Ve.geometry.setAttribute("color",ze),ie.rootObject.add(Ve)}}Ce&&(ie.modelTree=new ModelTree,this.setRevitModelTree(ie))}static BatchBufferGeometrys(oe,ie,ue){var de;const he=new BufferGeometry,pe=new Mesh(he,ue);pe.orignMaterial=ue,pe.pickMaterial=MaterialData.pickMaterial,ie.rootObject.add(pe);const _e=oe[0].index!==null,Ce=new Set(Object.keys(oe[0].attributes)),xe={};let Ie=0;const $e=[];for(let Ne=0;Ne<oe.length;++Ne){const Oe=oe[Ne];let Fe=Oe.elementID,Ve=new BatchData(pe,Fe);if((de=ie.getElement(Fe))==null||de.addMeshData(Ve),_e!==(Oe.index!==null))continue;const ze=oe[Ne].index,Ue=$e.length;for(let qe=0;qe<ze.count;++qe){let Et=ze.getX(qe)+Ie;$e.push(Et)}const Pt=$e.length-1;Ve.startEndIndex.push({start:Ue,end:Pt}),Ie+=oe[Ne].attributes.position.count;for(const qe in Oe.attributes)Ce.has(qe)&&(xe[qe]===void 0&&(xe[qe]=[]),xe[qe].push(Oe.attributes[qe]));Oe.dispose()}_e&&he.setIndex($e);for(const Ne in xe){const Oe=mergeAttributes(xe[Ne]);Oe&&he.setAttribute(Ne,Oe)}return pe}static setRevitModelTree(oe){const ie=this._getSpaceDatas(oe);let ue=Array.from(ie.values());if(ue.length==0)return null;let de=[],he=[];he.push(0),ue.sort(function(_e,Ce){return _e.elevation-Ce.elevation});const pe=oe.name;oe.modelTree={id:0,name:pe,children:de};for(const _e of ue){let Ce=[];he.push(BaseElement.id);let xe={id:BaseElement.id++,name:_e.name,children:Ce};for(const Ie of _e.categoryDataMap.keys()){let $e=_e.categoryDataMap.get(Ie),Ne=[];he.push(BaseElement.id);let Oe={id:BaseElement.id++,name:Ie,children:Ne};for(const Fe of $e.elementDataMap.values()){he.push(Fe.Id);let Ve={id:Fe.Id,name:Fe.name};Ne.push(Ve)}Ce.push(Oe)}de.push(xe)}}static _getSpaceDatas(oe){const ie=new Map,ue=oe.getAllElements();for(const de of ue){let he=de.userData.categoryName;he!=null&&typeof he!="string"&&(he=he[0]);let pe=de.userData.level;if(pe!=null&&typeof pe!="string"&&(pe=pe[0]),pe!=null){let _e;if(ie.has(pe))_e=ie.get(pe);else{_e=new LevelData,_e.name=pe;let Ce=de.userData.elevation;Ce!=null&&typeof Ce!="number"&&(Ce=Ce[0]),_e.elevation=Ce,_e.categoryDataMap=new Map,ie.set(pe,_e)}if(he!=null){let Ce;_e.categoryDataMap.has(he)?Ce=_e.categoryDataMap.get(he):(Ce=new CategoryData,Ce.name=he,Ce.elementDataMap=new Map,_e.categoryDataMap.set(he,Ce)),Ce.elementDataMap.set(de.Id,de)}}}return ie}}ve(Object3DUtils,"_batchColorMaterial");class GLTFLoader extends Loader{constructor(oe){super(oe),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(ie){return new GLTFMaterialsClearcoatExtension(ie)}),this.register(function(ie){return new GLTFTextureBasisUExtension(ie)}),this.register(function(ie){return new GLTFTextureWebPExtension(ie)}),this.register(function(ie){return new GLTFTextureAVIFExtension(ie)}),this.register(function(ie){return new GLTFMaterialsSheenExtension(ie)}),this.register(function(ie){return new GLTFMaterialsTransmissionExtension(ie)}),this.register(function(ie){return new GLTFMaterialsVolumeExtension(ie)}),this.register(function(ie){return new GLTFMaterialsIorExtension(ie)}),this.register(function(ie){return new GLTFMaterialsEmissiveStrengthExtension(ie)}),this.register(function(ie){return new GLTFMaterialsSpecularExtension(ie)}),this.register(function(ie){return new GLTFMaterialsIridescenceExtension(ie)}),this.register(function(ie){return new GLTFMaterialsAnisotropyExtension(ie)}),this.register(function(ie){return new GLTFLightsExtension(ie)}),this.register(function(ie){return new GLTFMeshoptCompression(ie)}),this.register(function(ie){return new GLTFMeshGpuInstancing(ie)})}load(oe,ie,ue,de){const he=this;let pe;this.resourcePath!==""?pe=this.resourcePath:this.path!==""?pe=this.path:pe=LoaderUtils.extractUrlBase(oe),this.manager.itemStart(oe);const _e=function(xe){de&&de(xe),he.manager.itemError(oe),he.manager.itemEnd(oe)},Ce=new FileLoader(this.manager);Ce.setPath(this.path),Ce.setResponseType("arraybuffer"),Ce.setRequestHeader(this.requestHeader),Ce.setWithCredentials(this.withCredentials),Ce.load(oe,function(xe){try{he.parse(xe,pe,function(Ie){ie(Ie),he.manager.itemEnd(oe)},_e)}catch(Ie){_e(Ie)}},ue,_e)}setDRACOLoader(oe){return this.dracoLoader=oe,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(oe){return this.ktx2Loader=oe,this}setMeshoptDecoder(oe){return this.meshoptDecoder=oe,this}register(oe){return this.pluginCallbacks.indexOf(oe)===-1&&this.pluginCallbacks.push(oe),this}unregister(oe){return this.pluginCallbacks.indexOf(oe)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(oe),1),this}parse(oe,ie,ue,de){let he;const pe={},_e={},Ce=new TextDecoder;if(typeof oe=="string")he=JSON.parse(oe);else if(oe instanceof ArrayBuffer)if(Ce.decode(new Uint8Array(oe,0,4))===BINARY_EXTENSION_HEADER_MAGIC){try{pe[EXTENSIONS.KHR_BINARY_GLTF]=new GLTFBinaryExtension(oe)}catch(Ie){de&&de(Ie);return}he=JSON.parse(pe[EXTENSIONS.KHR_BINARY_GLTF].content)}else he=JSON.parse(Ce.decode(oe));else he=oe;if(he.asset===void 0||he.asset.version[0]<2){de&&de(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const xe=new GLTFParser(he,{path:ie||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});xe.fileLoader.setRequestHeader(this.requestHeader);for(let Ie=0;Ie<this.pluginCallbacks.length;Ie++){const $e=this.pluginCallbacks[Ie](xe);_e[$e.name]=$e,pe[$e.name]=!0}if(he.extensionsUsed)for(let Ie=0;Ie<he.extensionsUsed.length;++Ie){const $e=he.extensionsUsed[Ie],Ne=he.extensionsRequired||[];switch($e){case EXTENSIONS.KHR_MATERIALS_UNLIT:pe[$e]=new GLTFMaterialsUnlitExtension;break;case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:pe[$e]=new GLTFDracoMeshCompressionExtension(he,this.dracoLoader);break;case EXTENSIONS.KHR_TEXTURE_TRANSFORM:pe[$e]=new GLTFTextureTransformExtension;break;case EXTENSIONS.KHR_MESH_QUANTIZATION:pe[$e]=new GLTFMeshQuantizationExtension;break;default:Ne.indexOf($e)>=0&&_e[$e]}}xe.setExtensions(pe),xe.setPlugins(_e),xe.parse(ue,de)}parseAsync(oe,ie){const ue=this;return new Promise(function(de,he){ue.parse(oe,ie,de,he)})}}function GLTFRegistry(){let le={};return{get:function(oe){return le[oe]},add:function(oe,ie){le[oe]=ie},remove:function(oe){delete le[oe]},removeAll:function(){le={}}}}const EXTENSIONS={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class GLTFLightsExtension{constructor(oe){this.parser=oe,this.name=EXTENSIONS.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const oe=this.parser,ie=this.parser.json.nodes||[];for(let ue=0,de=ie.length;ue<de;ue++){const he=ie[ue];he.extensions&&he.extensions[this.name]&&he.extensions[this.name].light!==void 0&&oe._addNodeRef(this.cache,he.extensions[this.name].light)}}_loadLight(oe){const ie=this.parser,ue="light:"+oe;let de=ie.cache.get(ue);if(de)return de;const he=ie.json,pe=((he.extensions&&he.extensions[this.name]||{}).lights||[])[oe];let _e;const Ce=new Color$2(16777215);pe.color!==void 0&&Ce.setRGB(pe.color[0],pe.color[1],pe.color[2],LinearSRGBColorSpace$1);const xe=pe.range!==void 0?pe.range:0;switch(pe.type){case"directional":_e=new DirectionalLight(Ce),_e.target.position.set(0,0,-1),_e.add(_e.target);break;case"point":_e=new PointLight(Ce),_e.distance=xe;break;case"spot":_e=new SpotLight(Ce),_e.distance=xe,pe.spot=pe.spot||{},pe.spot.innerConeAngle=pe.spot.innerConeAngle!==void 0?pe.spot.innerConeAngle:0,pe.spot.outerConeAngle=pe.spot.outerConeAngle!==void 0?pe.spot.outerConeAngle:Math.PI/4,_e.angle=pe.spot.outerConeAngle,_e.penumbra=1-pe.spot.innerConeAngle/pe.spot.outerConeAngle,_e.target.position.set(0,0,-1),_e.add(_e.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+pe.type)}return _e.position.set(0,0,0),_e.decay=2,assignExtrasToUserData(_e,pe),pe.intensity!==void 0&&(_e.intensity=pe.intensity),_e.name=ie.createUniqueName(pe.name||"light_"+oe),de=Promise.resolve(_e),ie.cache.add(ue,de),de}getDependency(oe,ie){if(oe==="light")return this._loadLight(ie)}createNodeAttachment(oe){const ie=this,ue=this.parser,de=ue.json.nodes[oe],he=(de.extensions&&de.extensions[this.name]||{}).light;return he===void 0?null:this._loadLight(he).then(function(pe){return ue._getNodeRef(ie.cache,he,pe)})}}class GLTFMaterialsUnlitExtension{constructor(){this.name=EXTENSIONS.KHR_MATERIALS_UNLIT}getMaterialType(){return MeshBasicMaterial}extendParams(oe,ie,ue){const de=[];oe.color=new Color$2(1,1,1),oe.opacity=1;const he=ie.pbrMetallicRoughness;if(he){if(Array.isArray(he.baseColorFactor)){const pe=he.baseColorFactor;oe.color.setRGB(pe[0],pe[1],pe[2],LinearSRGBColorSpace$1),oe.opacity=pe[3]}he.baseColorTexture!==void 0&&de.push(ue.assignTexture(oe,"map",he.baseColorTexture,SRGBColorSpace$1))}return Promise.all(de)}}class GLTFMaterialsEmissiveStrengthExtension{constructor(oe){this.parser=oe,this.name=EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(oe,ie){const ue=this.parser.json.materials[oe];if(!ue.extensions||!ue.extensions[this.name])return Promise.resolve();const de=ue.extensions[this.name].emissiveStrength;return de!==void 0&&(ie.emissiveIntensity=de),Promise.resolve()}}class GLTFMaterialsClearcoatExtension{constructor(oe){this.parser=oe,this.name=EXTENSIONS.KHR_MATERIALS_CLEARCOAT}getMaterialType(oe){const ie=this.parser.json.materials[oe];return!ie.extensions||!ie.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(oe,ie){const ue=this.parser,de=ue.json.materials[oe];if(!de.extensions||!de.extensions[this.name])return Promise.resolve();const he=[],pe=de.extensions[this.name];if(pe.clearcoatFactor!==void 0&&(ie.clearcoat=pe.clearcoatFactor),pe.clearcoatTexture!==void 0&&he.push(ue.assignTexture(ie,"clearcoatMap",pe.clearcoatTexture)),pe.clearcoatRoughnessFactor!==void 0&&(ie.clearcoatRoughness=pe.clearcoatRoughnessFactor),pe.clearcoatRoughnessTexture!==void 0&&he.push(ue.assignTexture(ie,"clearcoatRoughnessMap",pe.clearcoatRoughnessTexture)),pe.clearcoatNormalTexture!==void 0&&(he.push(ue.assignTexture(ie,"clearcoatNormalMap",pe.clearcoatNormalTexture)),pe.clearcoatNormalTexture.scale!==void 0)){const _e=pe.clearcoatNormalTexture.scale;ie.clearcoatNormalScale=new Vector2$1(_e,_e)}return Promise.all(he)}}class GLTFMaterialsIridescenceExtension{constructor(oe){this.parser=oe,this.name=EXTENSIONS.KHR_MATERIALS_IRIDESCENCE}getMaterialType(oe){const ie=this.parser.json.materials[oe];return!ie.extensions||!ie.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(oe,ie){const ue=this.parser,de=ue.json.materials[oe];if(!de.extensions||!de.extensions[this.name])return Promise.resolve();const he=[],pe=de.extensions[this.name];return pe.iridescenceFactor!==void 0&&(ie.iridescence=pe.iridescenceFactor),pe.iridescenceTexture!==void 0&&he.push(ue.assignTexture(ie,"iridescenceMap",pe.iridescenceTexture)),pe.iridescenceIor!==void 0&&(ie.iridescenceIOR=pe.iridescenceIor),ie.iridescenceThicknessRange===void 0&&(ie.iridescenceThicknessRange=[100,400]),pe.iridescenceThicknessMinimum!==void 0&&(ie.iridescenceThicknessRange[0]=pe.iridescenceThicknessMinimum),pe.iridescenceThicknessMaximum!==void 0&&(ie.iridescenceThicknessRange[1]=pe.iridescenceThicknessMaximum),pe.iridescenceThicknessTexture!==void 0&&he.push(ue.assignTexture(ie,"iridescenceThicknessMap",pe.iridescenceThicknessTexture)),Promise.all(he)}}class GLTFMaterialsSheenExtension{constructor(oe){this.parser=oe,this.name=EXTENSIONS.KHR_MATERIALS_SHEEN}getMaterialType(oe){const ie=this.parser.json.materials[oe];return!ie.extensions||!ie.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(oe,ie){const ue=this.parser,de=ue.json.materials[oe];if(!de.extensions||!de.extensions[this.name])return Promise.resolve();const he=[];ie.sheenColor=new Color$2(0,0,0),ie.sheenRoughness=0,ie.sheen=1;const pe=de.extensions[this.name];if(pe.sheenColorFactor!==void 0){const _e=pe.sheenColorFactor;ie.sheenColor.setRGB(_e[0],_e[1],_e[2],LinearSRGBColorSpace$1)}return pe.sheenRoughnessFactor!==void 0&&(ie.sheenRoughness=pe.sheenRoughnessFactor),pe.sheenColorTexture!==void 0&&he.push(ue.assignTexture(ie,"sheenColorMap",pe.sheenColorTexture,SRGBColorSpace$1)),pe.sheenRoughnessTexture!==void 0&&he.push(ue.assignTexture(ie,"sheenRoughnessMap",pe.sheenRoughnessTexture)),Promise.all(he)}}class GLTFMaterialsTransmissionExtension{constructor(oe){this.parser=oe,this.name=EXTENSIONS.KHR_MATERIALS_TRANSMISSION}getMaterialType(oe){const ie=this.parser.json.materials[oe];return!ie.extensions||!ie.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(oe,ie){const ue=this.parser,de=ue.json.materials[oe];if(!de.extensions||!de.extensions[this.name])return Promise.resolve();const he=[],pe=de.extensions[this.name];return pe.transmissionFactor!==void 0&&(ie.transmission=pe.transmissionFactor),pe.transmissionTexture!==void 0&&he.push(ue.assignTexture(ie,"transmissionMap",pe.transmissionTexture)),Promise.all(he)}}class GLTFMaterialsVolumeExtension{constructor(oe){this.parser=oe,this.name=EXTENSIONS.KHR_MATERIALS_VOLUME}getMaterialType(oe){const ie=this.parser.json.materials[oe];return!ie.extensions||!ie.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(oe,ie){const ue=this.parser,de=ue.json.materials[oe];if(!de.extensions||!de.extensions[this.name])return Promise.resolve();const he=[],pe=de.extensions[this.name];ie.thickness=pe.thicknessFactor!==void 0?pe.thicknessFactor:0,pe.thicknessTexture!==void 0&&he.push(ue.assignTexture(ie,"thicknessMap",pe.thicknessTexture)),ie.attenuationDistance=pe.attenuationDistance||1/0;const _e=pe.attenuationColor||[1,1,1];return ie.attenuationColor=new Color$2().setRGB(_e[0],_e[1],_e[2],LinearSRGBColorSpace$1),Promise.all(he)}}class GLTFMaterialsIorExtension{constructor(oe){this.parser=oe,this.name=EXTENSIONS.KHR_MATERIALS_IOR}getMaterialType(oe){const ie=this.parser.json.materials[oe];return!ie.extensions||!ie.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(oe,ie){const ue=this.parser.json.materials[oe];if(!ue.extensions||!ue.extensions[this.name])return Promise.resolve();const de=ue.extensions[this.name];return ie.ior=de.ior!==void 0?de.ior:1.5,Promise.resolve()}}class GLTFMaterialsSpecularExtension{constructor(oe){this.parser=oe,this.name=EXTENSIONS.KHR_MATERIALS_SPECULAR}getMaterialType(oe){const ie=this.parser.json.materials[oe];return!ie.extensions||!ie.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(oe,ie){const ue=this.parser,de=ue.json.materials[oe];if(!de.extensions||!de.extensions[this.name])return Promise.resolve();const he=[],pe=de.extensions[this.name];ie.specularIntensity=pe.specularFactor!==void 0?pe.specularFactor:1,pe.specularTexture!==void 0&&he.push(ue.assignTexture(ie,"specularIntensityMap",pe.specularTexture));const _e=pe.specularColorFactor||[1,1,1];return ie.specularColor=new Color$2().setRGB(_e[0],_e[1],_e[2],LinearSRGBColorSpace$1),pe.specularColorTexture!==void 0&&he.push(ue.assignTexture(ie,"specularColorMap",pe.specularColorTexture,SRGBColorSpace$1)),Promise.all(he)}}class GLTFMaterialsAnisotropyExtension{constructor(oe){this.parser=oe,this.name=EXTENSIONS.KHR_MATERIALS_ANISOTROPY}getMaterialType(oe){const ie=this.parser.json.materials[oe];return!ie.extensions||!ie.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(oe,ie){const ue=this.parser,de=ue.json.materials[oe];if(!de.extensions||!de.extensions[this.name])return Promise.resolve();const he=[],pe=de.extensions[this.name];return pe.anisotropyStrength!==void 0&&(ie.anisotropy=pe.anisotropyStrength),pe.anisotropyRotation!==void 0&&(ie.anisotropyRotation=pe.anisotropyRotation),pe.anisotropyTexture!==void 0&&he.push(ue.assignTexture(ie,"anisotropyMap",pe.anisotropyTexture)),Promise.all(he)}}class GLTFTextureBasisUExtension{constructor(oe){this.parser=oe,this.name=EXTENSIONS.KHR_TEXTURE_BASISU}loadTexture(oe){const ie=this.parser,ue=ie.json,de=ue.textures[oe];if(!de.extensions||!de.extensions[this.name])return null;const he=de.extensions[this.name],pe=ie.options.ktx2Loader;if(!pe){if(ue.extensionsRequired&&ue.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return ie.loadTextureImage(oe,he.source,pe)}}class GLTFTextureWebPExtension{constructor(oe){this.parser=oe,this.name=EXTENSIONS.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(oe){const ie=this.name,ue=this.parser,de=ue.json,he=de.textures[oe];if(!he.extensions||!he.extensions[ie])return null;const pe=he.extensions[ie],_e=de.images[pe.source];let Ce=ue.textureLoader;if(_e.uri){const xe=ue.options.manager.getHandler(_e.uri);xe!==null&&(Ce=xe)}return this.detectSupport().then(function(xe){if(xe)return ue.loadTextureImage(oe,pe.source,Ce);if(de.extensionsRequired&&de.extensionsRequired.indexOf(ie)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return ue.loadTexture(oe)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(oe){const ie=new Image;ie.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",ie.onload=ie.onerror=function(){oe(ie.height===1)}})),this.isSupported}}class GLTFTextureAVIFExtension{constructor(oe){this.parser=oe,this.name=EXTENSIONS.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(oe){const ie=this.name,ue=this.parser,de=ue.json,he=de.textures[oe];if(!he.extensions||!he.extensions[ie])return null;const pe=he.extensions[ie],_e=de.images[pe.source];let Ce=ue.textureLoader;if(_e.uri){const xe=ue.options.manager.getHandler(_e.uri);xe!==null&&(Ce=xe)}return this.detectSupport().then(function(xe){if(xe)return ue.loadTextureImage(oe,pe.source,Ce);if(de.extensionsRequired&&de.extensionsRequired.indexOf(ie)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return ue.loadTexture(oe)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(oe){const ie=new Image;ie.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",ie.onload=ie.onerror=function(){oe(ie.height===1)}})),this.isSupported}}class GLTFMeshoptCompression{constructor(oe){this.name=EXTENSIONS.EXT_MESHOPT_COMPRESSION,this.parser=oe}loadBufferView(oe){const ie=this.parser.json,ue=ie.bufferViews[oe];if(ue.extensions&&ue.extensions[this.name]){const de=ue.extensions[this.name],he=this.parser.getDependency("buffer",de.buffer),pe=this.parser.options.meshoptDecoder;if(!pe||!pe.supported){if(ie.extensionsRequired&&ie.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return he.then(function(_e){const Ce=de.byteOffset||0,xe=de.byteLength||0,Ie=de.count,$e=de.byteStride,Ne=new Uint8Array(_e,Ce,xe);return pe.decodeGltfBufferAsync?pe.decodeGltfBufferAsync(Ie,$e,Ne,de.mode,de.filter).then(function(Oe){return Oe.buffer}):pe.ready.then(function(){const Oe=new ArrayBuffer(Ie*$e);return pe.decodeGltfBuffer(new Uint8Array(Oe),Ie,$e,Ne,de.mode,de.filter),Oe})})}else return null}}class GLTFMeshGpuInstancing{constructor(oe){this.name=EXTENSIONS.EXT_MESH_GPU_INSTANCING,this.parser=oe}createNodeMesh(oe){const ie=this.parser.json,ue=ie.nodes[oe];if(!ue.extensions||!ue.extensions[this.name]||ue.mesh===void 0)return null;const de=ie.meshes[ue.mesh];for(const Ce of de.primitives)if(Ce.mode!==WEBGL_CONSTANTS.TRIANGLES&&Ce.mode!==WEBGL_CONSTANTS.TRIANGLE_STRIP&&Ce.mode!==WEBGL_CONSTANTS.TRIANGLE_FAN&&Ce.mode!==void 0)return null;const he=ue.extensions[this.name].attributes,pe=[],_e={};for(const Ce in he)pe.push(this.parser.getDependency("accessor",he[Ce]).then(xe=>(_e[Ce]=xe,_e[Ce])));return pe.length<1?null:(pe.push(this.parser.createNodeMesh(oe)),Promise.all(pe).then(Ce=>{const xe=Ce.pop(),Ie=xe.isGroup?xe.children:[xe],$e=Ce[0].count,Ne=[];for(const Oe of Ie){const Fe=new Matrix4$1,Ve=new Vector3$1,ze=new Quaternion$1,Ue=new Vector3$1(1,1,1),Pt=new InstancedMesh(Oe.geometry,Oe.material,$e);for(let qe=0;qe<$e;qe++)_e.TRANSLATION&&Ve.fromBufferAttribute(_e.TRANSLATION,qe),_e.ROTATION&&ze.fromBufferAttribute(_e.ROTATION,qe),_e.SCALE&&Ue.fromBufferAttribute(_e.SCALE,qe),Pt.setMatrixAt(qe,Fe.compose(Ve,ze,Ue));for(const qe in _e)qe!=="TRANSLATION"&&qe!=="ROTATION"&&qe!=="SCALE"&&Oe.geometry.setAttribute(qe,_e[qe]);Object3D.prototype.copy.call(Pt,Oe),this.parser.assignFinalMaterial(Pt),Ne.push(Pt)}return xe.isGroup?(xe.clear(),xe.add(...Ne),xe):Ne[0]}))}}const BINARY_EXTENSION_HEADER_MAGIC="glTF",BINARY_EXTENSION_HEADER_LENGTH=12,BINARY_EXTENSION_CHUNK_TYPES={JSON:1313821514,BIN:5130562};class GLTFBinaryExtension{constructor(oe){this.name=EXTENSIONS.KHR_BINARY_GLTF,this.content=null,this.body=null;const ie=new DataView(oe,0,BINARY_EXTENSION_HEADER_LENGTH),ue=new TextDecoder;if(this.header={magic:ue.decode(new Uint8Array(oe.slice(0,4))),version:ie.getUint32(4,!0),length:ie.getUint32(8,!0)},this.header.magic!==BINARY_EXTENSION_HEADER_MAGIC)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const de=this.header.length-BINARY_EXTENSION_HEADER_LENGTH,he=new DataView(oe,BINARY_EXTENSION_HEADER_LENGTH);let pe=0;for(;pe<de;){const _e=he.getUint32(pe,!0);pe+=4;const Ce=he.getUint32(pe,!0);if(pe+=4,Ce===BINARY_EXTENSION_CHUNK_TYPES.JSON){const xe=new Uint8Array(oe,BINARY_EXTENSION_HEADER_LENGTH+pe,_e);this.content=ue.decode(xe)}else if(Ce===BINARY_EXTENSION_CHUNK_TYPES.BIN){const xe=BINARY_EXTENSION_HEADER_LENGTH+pe;this.body=oe.slice(xe,xe+_e)}pe+=_e}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class GLTFDracoMeshCompressionExtension{constructor(oe,ie){if(!ie)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=EXTENSIONS.KHR_DRACO_MESH_COMPRESSION,this.json=oe,this.dracoLoader=ie,this.dracoLoader.preload()}decodePrimitive(oe,ie){const ue=this.json,de=this.dracoLoader,he=oe.extensions[this.name].bufferView,pe=oe.extensions[this.name].attributes,_e={},Ce={},xe={};for(const Ie in pe){const $e=ATTRIBUTES[Ie]||Ie.toLowerCase();_e[$e]=pe[Ie]}for(const Ie in oe.attributes){const $e=ATTRIBUTES[Ie]||Ie.toLowerCase();if(pe[Ie]!==void 0){const Ne=ue.accessors[oe.attributes[Ie]],Oe=WEBGL_COMPONENT_TYPES[Ne.componentType];xe[$e]=Oe.name,Ce[$e]=Ne.normalized===!0}}return ie.getDependency("bufferView",he).then(function(Ie){return new Promise(function($e){de.decodeDracoFile(Ie,function(Ne){for(const Oe in Ne.attributes){const Fe=Ne.attributes[Oe],Ve=Ce[Oe];Ve!==void 0&&(Fe.normalized=Ve)}$e(Ne)},_e,xe)})})}}class GLTFTextureTransformExtension{constructor(){this.name=EXTENSIONS.KHR_TEXTURE_TRANSFORM}extendTexture(oe,ie){return(ie.texCoord===void 0||ie.texCoord===oe.channel)&&ie.offset===void 0&&ie.rotation===void 0&&ie.scale===void 0||(oe=oe.clone(),ie.texCoord!==void 0&&(oe.channel=ie.texCoord),ie.offset!==void 0&&oe.offset.fromArray(ie.offset),ie.rotation!==void 0&&(oe.rotation=ie.rotation),ie.scale!==void 0&&oe.repeat.fromArray(ie.scale),oe.needsUpdate=!0),oe}}class GLTFMeshQuantizationExtension{constructor(){this.name=EXTENSIONS.KHR_MESH_QUANTIZATION}}class GLTFCubicSplineInterpolant extends Interpolant{constructor(oe,ie,ue,de){super(oe,ie,ue,de)}copySampleValue_(oe){const ie=this.resultBuffer,ue=this.sampleValues,de=this.valueSize,he=oe*de*3+de;for(let pe=0;pe!==de;pe++)ie[pe]=ue[he+pe];return ie}interpolate_(oe,ie,ue,de){const he=this.resultBuffer,pe=this.sampleValues,_e=this.valueSize,Ce=_e*2,xe=_e*3,Ie=de-ie,$e=(ue-ie)/Ie,Ne=$e*$e,Oe=Ne*$e,Fe=oe*xe,Ve=Fe-xe,ze=-2*Oe+3*Ne,Ue=Oe-Ne,Pt=1-ze,qe=Ue-Ne+$e;for(let Et=0;Et!==_e;Et++){const kt=pe[Ve+Et+_e],At=pe[Ve+Et+Ce]*Ie,Dt=pe[Fe+Et+_e],Lt=pe[Fe+Et]*Ie;he[Et]=Pt*kt+qe*At+ze*Dt+Ue*Lt}return he}}const _q=new Quaternion$1;class GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant{interpolate_(oe,ie,ue,de){const he=super.interpolate_(oe,ie,ue,de);return _q.fromArray(he).normalize().toArray(he),he}}const WEBGL_CONSTANTS={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},WEBGL_COMPONENT_TYPES={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},WEBGL_FILTERS={9728:NearestFilter,9729:LinearFilter,9984:NearestMipmapNearestFilter,9985:LinearMipmapNearestFilter,9986:NearestMipmapLinearFilter,9987:LinearMipmapLinearFilter},WEBGL_WRAPPINGS={33071:ClampToEdgeWrapping,33648:MirroredRepeatWrapping,10497:RepeatWrapping},WEBGL_TYPE_SIZES={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ATTRIBUTES={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},PATH_PROPERTIES={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},INTERPOLATION={CUBICSPLINE:void 0,LINEAR:InterpolateLinear,STEP:InterpolateDiscrete},ALPHA_MODES={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function createDefaultMaterial(le){return le.DefaultMaterial===void 0&&(le.DefaultMaterial=new MyMeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:FrontSide})),le.DefaultMaterial}function addUnknownExtensionsToUserData(le,oe,ie){for(const ue in ie.extensions)le[ue]===void 0&&(oe.userData.gltfExtensions=oe.userData.gltfExtensions||{},oe.userData.gltfExtensions[ue]=ie.extensions[ue])}function assignExtrasToUserData(le,oe){oe.extras!==void 0&&(typeof oe.extras=="object"&&Object.assign(le.userData,oe.extras))}function addMorphTargets(le,oe,ie){let ue=!1,de=!1,he=!1;for(let xe=0,Ie=oe.length;xe<Ie;xe++){const $e=oe[xe];if($e.POSITION!==void 0&&(ue=!0),$e.NORMAL!==void 0&&(de=!0),$e.COLOR_0!==void 0&&(he=!0),ue&&de&&he)break}if(!ue&&!de&&!he)return Promise.resolve(le);const pe=[],_e=[],Ce=[];for(let xe=0,Ie=oe.length;xe<Ie;xe++){const $e=oe[xe];if(ue){const Ne=$e.POSITION!==void 0?ie.getDependency("accessor",$e.POSITION):le.attributes.position;pe.push(Ne)}if(de){const Ne=$e.NORMAL!==void 0?ie.getDependency("accessor",$e.NORMAL):le.attributes.normal;_e.push(Ne)}if(he){const Ne=$e.COLOR_0!==void 0?ie.getDependency("accessor",$e.COLOR_0):le.attributes.color;Ce.push(Ne)}}return Promise.all([Promise.all(pe),Promise.all(_e),Promise.all(Ce)]).then(function(xe){const Ie=xe[0],$e=xe[1],Ne=xe[2];return ue&&(le.morphAttributes.position=Ie),de&&(le.morphAttributes.normal=$e),he&&(le.morphAttributes.color=Ne),le.morphTargetsRelative=!0,le})}function updateMorphTargets(le,oe){if(le.updateMorphTargets(),oe.weights!==void 0)for(let ie=0,ue=oe.weights.length;ie<ue;ie++)le.morphTargetInfluences[ie]=oe.weights[ie];if(oe.extras&&Array.isArray(oe.extras.targetNames)){const ie=oe.extras.targetNames;if(le.morphTargetInfluences.length===ie.length){le.morphTargetDictionary={};for(let ue=0,de=ie.length;ue<de;ue++)le.morphTargetDictionary[ie[ue]]=ue}}}function createPrimitiveKey(le){let oe;const ie=le.extensions&&le.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];if(ie?oe="draco:"+ie.bufferView+":"+ie.indices+":"+createAttributesKey(ie.attributes):oe=le.indices+":"+createAttributesKey(le.attributes)+":"+le.mode,le.targets!==void 0)for(let ue=0,de=le.targets.length;ue<de;ue++)oe+=":"+createAttributesKey(le.targets[ue]);return oe}function createAttributesKey(le){let oe="";const ie=Object.keys(le).sort();for(let ue=0,de=ie.length;ue<de;ue++)oe+=ie[ue]+":"+le[ie[ue]]+";";return oe}function getNormalizedComponentScale(le){switch(le){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function getImageURIMimeType(le){return le.search(/\.jpe?g($|\?)/i)>0||le.search(/^data\:image\/jpeg/)===0?"image/jpeg":le.search(/\.webp($|\?)/i)>0||le.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const _identityMatrix=new Matrix4$1;class GLTFParser{constructor(oe={},ie={}){this.json=oe,this.extensions={},this.plugins={},this.options=ie,this.cache=new GLTFRegistry,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let ue=!1,de=!1,he=-1;typeof navigator<"u"&&(ue=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,de=navigator.userAgent.indexOf("Firefox")>-1,he=de?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||ue||de&&he<98?this.textureLoader=new TextureLoader(this.options.manager):this.textureLoader=new ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(oe){this.extensions=oe}setPlugins(oe){this.plugins=oe}parse(oe,ie){const ue=this,de=this.json,he=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(pe){return pe._markDefs&&pe._markDefs()}),Promise.all(this._invokeAll(function(pe){return pe.beforeRoot&&pe.beforeRoot()})).then(function(){return Promise.all([ue.getDependencies("scene"),ue.getDependencies("animation"),ue.getDependencies("camera")])}).then(function(pe){const _e={scene:pe[0][de.scene||0],scenes:pe[0],animations:pe[1],cameras:pe[2],asset:de.asset,parser:ue,userData:{}};addUnknownExtensionsToUserData(he,_e,de),assignExtrasToUserData(_e,de),Promise.all(ue._invokeAll(function(Ce){return Ce.afterRoot&&Ce.afterRoot(_e)})).then(function(){oe(_e)})}).catch(ie)}_markDefs(){const oe=this.json.nodes||[],ie=this.json.skins||[],ue=this.json.meshes||[];for(let de=0,he=ie.length;de<he;de++){const pe=ie[de].joints;for(let _e=0,Ce=pe.length;_e<Ce;_e++)oe[pe[_e]].isBone=!0}for(let de=0,he=oe.length;de<he;de++){const pe=oe[de];pe.mesh!==void 0&&(this._addNodeRef(this.meshCache,pe.mesh),pe.skin!==void 0&&(ue[pe.mesh].isSkinnedMesh=!0)),pe.camera!==void 0&&this._addNodeRef(this.cameraCache,pe.camera)}}_addNodeRef(oe,ie){ie!==void 0&&(oe.refs[ie]===void 0&&(oe.refs[ie]=oe.uses[ie]=0),oe.refs[ie]++)}_getNodeRef(oe,ie,ue){if(oe.refs[ie]<=1)return ue;const de=ue.clone(),he=(pe,_e)=>{const Ce=this.associations.get(pe);Ce!=null&&this.associations.set(_e,Ce);for(const[xe,Ie]of pe.children.entries())he(Ie,_e.children[xe])};return he(ue,de),de.name+="_instance_"+oe.uses[ie]++,de}_invokeOne(oe){const ie=Object.values(this.plugins);ie.push(this);for(let ue=0;ue<ie.length;ue++){const de=oe(ie[ue]);if(de)return de}return null}_invokeAll(oe){const ie=Object.values(this.plugins);ie.unshift(this);const ue=[];for(let de=0;de<ie.length;de++){const he=oe(ie[de]);he&&ue.push(he)}return ue}getDependency(oe,ie){const ue=oe+":"+ie;let de=this.cache.get(ue);if(!de){switch(oe){case"scene":de=this.loadScene(ie);break;case"node":de=this._invokeOne(function(he){return he.loadNode&&he.loadNode(ie)});break;case"mesh":de=this._invokeOne(function(he){return he.loadMesh&&he.loadMesh(ie)});break;case"accessor":de=this.loadAccessor(ie);break;case"bufferView":de=this._invokeOne(function(he){return he.loadBufferView&&he.loadBufferView(ie)});break;case"buffer":de=this.loadBuffer(ie);break;case"material":de=this._invokeOne(function(he){return he.loadMaterial&&he.loadMaterial(ie)});break;case"texture":de=this._invokeOne(function(he){return he.loadTexture&&he.loadTexture(ie)});break;case"skin":de=this.loadSkin(ie);break;case"animation":de=this._invokeOne(function(he){return he.loadAnimation&&he.loadAnimation(ie)});break;case"camera":de=this.loadCamera(ie);break;default:if(de=this._invokeOne(function(he){return he!=this&&he.getDependency&&he.getDependency(oe,ie)}),!de)throw new Error("Unknown type: "+oe);break}this.cache.add(ue,de)}return de}getDependencies(oe){let ie=this.cache.get(oe);if(!ie){const ue=this,de=this.json[oe+(oe==="mesh"?"es":"s")]||[];ie=Promise.all(de.map(function(he,pe){return ue.getDependency(oe,pe)})),this.cache.add(oe,ie)}return ie}loadBuffer(oe){const ie=this.json.buffers[oe],ue=this.fileLoader;if(ie.type&&ie.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+ie.type+" buffer type is not supported.");if(ie.uri===void 0&&oe===0)return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);const de=this.options;return new Promise(function(he,pe){ue.load(LoaderUtils.resolveURL(ie.uri,de.path),he,void 0,function(){pe(new Error('THREE.GLTFLoader: Failed to load buffer "'+ie.uri+'".'))})})}loadBufferView(oe){const ie=this.json.bufferViews[oe];return this.getDependency("buffer",ie.buffer).then(function(ue){const de=ie.byteLength||0,he=ie.byteOffset||0;return ue.slice(he,he+de)})}loadAccessor(oe){const ie=this,ue=this.json,de=this.json.accessors[oe];if(de.bufferView===void 0&&de.sparse===void 0){const pe=WEBGL_TYPE_SIZES[de.type],_e=WEBGL_COMPONENT_TYPES[de.componentType],Ce=de.normalized===!0,xe=new _e(de.count*pe);return Promise.resolve(new BufferAttribute(xe,pe,Ce))}const he=[];return de.bufferView!==void 0?he.push(this.getDependency("bufferView",de.bufferView)):he.push(null),de.sparse!==void 0&&(he.push(this.getDependency("bufferView",de.sparse.indices.bufferView)),he.push(this.getDependency("bufferView",de.sparse.values.bufferView))),Promise.all(he).then(function(pe){const _e=pe[0],Ce=WEBGL_TYPE_SIZES[de.type],xe=WEBGL_COMPONENT_TYPES[de.componentType],Ie=xe.BYTES_PER_ELEMENT,$e=Ie*Ce,Ne=de.byteOffset||0,Oe=de.bufferView!==void 0?ue.bufferViews[de.bufferView].byteStride:void 0,Fe=de.normalized===!0;let Ve,ze;if(Oe&&Oe!==$e){const Ue=Math.floor(Ne/Oe),Pt="InterleavedBuffer:"+de.bufferView+":"+de.componentType+":"+Ue+":"+de.count;let qe=ie.cache.get(Pt);qe||(Ve=new xe(_e,Ue*Oe,de.count*Oe/Ie),qe=new InterleavedBuffer(Ve,Oe/Ie),ie.cache.add(Pt,qe)),ze=new InterleavedBufferAttribute(qe,Ce,Ne%Oe/Ie,Fe)}else _e===null?Ve=new xe(de.count*Ce):Ve=new xe(_e,Ne,de.count*Ce),ze=new BufferAttribute(Ve,Ce,Fe);if(de.sparse!==void 0){const Ue=WEBGL_TYPE_SIZES.SCALAR,Pt=WEBGL_COMPONENT_TYPES[de.sparse.indices.componentType],qe=de.sparse.indices.byteOffset||0,Et=de.sparse.values.byteOffset||0,kt=new Pt(pe[1],qe,de.sparse.count*Ue),At=new xe(pe[2],Et,de.sparse.count*Ce);_e!==null&&(ze=new BufferAttribute(ze.array.slice(),ze.itemSize,ze.normalized));for(let Dt=0,Lt=kt.length;Dt<Lt;Dt++){const jt=kt[Dt];if(ze.setX(jt,At[Dt*Ce]),Ce>=2&&ze.setY(jt,At[Dt*Ce+1]),Ce>=3&&ze.setZ(jt,At[Dt*Ce+2]),Ce>=4&&ze.setW(jt,At[Dt*Ce+3]),Ce>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return ze})}loadTexture(oe){const ie=this.json,ue=this.options,de=ie.textures[oe].source,he=ie.images[de];let pe=this.textureLoader;if(he.uri){const _e=ue.manager.getHandler(he.uri);_e!==null&&(pe=_e)}return this.loadTextureImage(oe,de,pe)}loadTextureImage(oe,ie,ue){const de=this,he=this.json,pe=he.textures[oe],_e=he.images[ie],Ce=(_e.uri||_e.bufferView)+":"+pe.sampler;if(this.textureCache[Ce])return this.textureCache[Ce];const xe=this.loadImageSource(ie,ue).then(function(Ie){Ie.flipY=!1,Ie.name=pe.name||_e.name||"",Ie.name===""&&typeof _e.uri=="string"&&_e.uri.startsWith("data:image/")===!1&&(Ie.name=_e.uri);const $e=(he.samplers||{})[pe.sampler]||{};return Ie.magFilter=WEBGL_FILTERS[$e.magFilter]||LinearFilter,Ie.minFilter=WEBGL_FILTERS[$e.minFilter]||LinearMipmapLinearFilter,Ie.wrapS=WEBGL_WRAPPINGS[$e.wrapS]||RepeatWrapping,Ie.wrapT=WEBGL_WRAPPINGS[$e.wrapT]||RepeatWrapping,de.associations.set(Ie,{textures:oe}),Ie}).catch(function(){return null});return this.textureCache[Ce]=xe,xe}loadImageSource(oe,ie){const ue=this,de=this.json,he=this.options;if(this.sourceCache[oe]!==void 0)return this.sourceCache[oe].then($e=>$e.clone());const pe=de.images[oe],_e=self.URL||self.webkitURL;let Ce=pe.uri||"",xe=!1;if(pe.bufferView!==void 0)Ce=ue.getDependency("bufferView",pe.bufferView).then(function($e){xe=!0;const Ne=new Blob([$e],{type:pe.mimeType});return Ce=_e.createObjectURL(Ne),Ce});else if(pe.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+oe+" is missing URI and bufferView");const Ie=Promise.resolve(Ce).then(function($e){return new Promise(function(Ne,Oe){let Fe=Ne;ie.isImageBitmapLoader===!0&&(Fe=function(Ve){const ze=new Texture(Ve);ze.needsUpdate=!0,Ne(ze)}),ie.load(LoaderUtils.resolveURL($e,he.path),Fe,void 0,Oe)})}).then(function($e){return xe===!0&&_e.revokeObjectURL(Ce),$e.userData.mimeType=pe.mimeType||getImageURIMimeType(pe.uri),$e}).catch(function($e){throw $e});return this.sourceCache[oe]=Ie,Ie}assignTexture(oe,ie,ue,de){const he=this;return this.getDependency("texture",ue.index).then(function(pe){if(!pe)return null;if(ue.texCoord!==void 0&&ue.texCoord>0&&(pe=pe.clone(),pe.channel=ue.texCoord),he.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]){const _e=ue.extensions!==void 0?ue.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;if(_e){const Ce=he.associations.get(pe);pe=he.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(pe,_e),he.associations.set(pe,Ce)}}return de!==void 0&&(pe.colorSpace=de),oe[ie]=pe,pe})}assignFinalMaterial(oe){const ie=oe.geometry;let ue=oe.material;const de=ie.attributes.tangent===void 0,he=ie.attributes.color!==void 0,pe=ie.attributes.normal===void 0;if(oe.isPoints){const _e="PointsMaterial:"+ue.uuid;let Ce=this.cache.get(_e);Ce||(Ce=new PointsMaterial,Material.prototype.copy.call(Ce,ue),Ce.color.copy(ue.color),Ce.map=ue.map,Ce.sizeAttenuation=!1,this.cache.add(_e,Ce)),ue=Ce}else if(oe.isLine){const _e="LineBasicMaterial:"+ue.uuid;let Ce=this.cache.get(_e);Ce||(Ce=new LineBasicMaterial,Material.prototype.copy.call(Ce,ue),Ce.color.copy(ue.color),Ce.map=ue.map,this.cache.add(_e,Ce)),ue=Ce}if(de||he||pe){let _e="ClonedMaterial:"+ue.uuid+":";de&&(_e+="derivative-tangents:"),he&&(_e+="vertex-colors:"),pe&&(_e+="flat-shading:");let Ce=this.cache.get(_e);Ce||(Ce=ue.clone(),he&&(Ce.vertexColors=!0),pe&&(Ce.flatShading=!0),de&&(Ce.normalScale&&(Ce.normalScale.y*=-1),Ce.clearcoatNormalScale&&(Ce.clearcoatNormalScale.y*=-1)),this.cache.add(_e,Ce),this.associations.set(Ce,this.associations.get(ue))),ue=Ce}oe.material=ue}getMaterialType(){return MyMeshStandardMaterial}loadMaterial(oe){const ie=this,ue=this.json,de=this.extensions,he=ue.materials[oe];let pe;const _e={},Ce=he.extensions||{},xe=[];if(Ce[EXTENSIONS.KHR_MATERIALS_UNLIT]){const $e=de[EXTENSIONS.KHR_MATERIALS_UNLIT];pe=$e.getMaterialType(),xe.push($e.extendParams(_e,he,ie))}else{const $e=he.pbrMetallicRoughness||{};if(_e.color=new Color$2(1,1,1),_e.opacity=1,Array.isArray($e.baseColorFactor)){const Ne=$e.baseColorFactor;_e.color.setRGB(Ne[0],Ne[1],Ne[2],LinearSRGBColorSpace$1),_e.opacity=Ne[3]}$e.baseColorTexture!==void 0&&xe.push(ie.assignTexture(_e,"map",$e.baseColorTexture,SRGBColorSpace$1)),_e.metalness=$e.metallicFactor!==void 0?$e.metallicFactor:1,_e.roughness=$e.roughnessFactor!==void 0?$e.roughnessFactor:1,$e.metallicRoughnessTexture!==void 0&&(xe.push(ie.assignTexture(_e,"metalnessMap",$e.metallicRoughnessTexture)),xe.push(ie.assignTexture(_e,"roughnessMap",$e.metallicRoughnessTexture))),pe=this._invokeOne(function(Ne){return Ne.getMaterialType&&Ne.getMaterialType(oe)}),xe.push(Promise.all(this._invokeAll(function(Ne){return Ne.extendMaterialParams&&Ne.extendMaterialParams(oe,_e)})))}he.doubleSided===!0&&(_e.side=DoubleSide);const Ie=he.alphaMode||ALPHA_MODES.OPAQUE;if(Ie===ALPHA_MODES.BLEND?(_e.transparent=!0,_e.depthWrite=!1):(_e.transparent=!1,Ie===ALPHA_MODES.MASK&&(_e.alphaTest=he.alphaCutoff!==void 0?he.alphaCutoff:.5)),he.normalTexture!==void 0&&pe!==MeshBasicMaterial&&(xe.push(ie.assignTexture(_e,"normalMap",he.normalTexture)),_e.normalScale=new Vector2$1(1,1),he.normalTexture.scale!==void 0)){const $e=he.normalTexture.scale;_e.normalScale.set($e,$e)}if(he.occlusionTexture!==void 0&&pe!==MeshBasicMaterial&&(xe.push(ie.assignTexture(_e,"aoMap",he.occlusionTexture)),he.occlusionTexture.strength!==void 0&&(_e.aoMapIntensity=he.occlusionTexture.strength)),he.emissiveFactor!==void 0&&pe!==MeshBasicMaterial){const $e=he.emissiveFactor;_e.emissive=new Color$2().setRGB($e[0],$e[1],$e[2],LinearSRGBColorSpace$1)}return he.emissiveTexture!==void 0&&pe!==MeshBasicMaterial&&xe.push(ie.assignTexture(_e,"emissiveMap",he.emissiveTexture,SRGBColorSpace$1)),Promise.all(xe).then(function(){const $e=new pe(_e);return he.name&&($e.name=he.name),assignExtrasToUserData($e,he),ie.associations.set($e,{materials:oe}),he.extensions&&addUnknownExtensionsToUserData(de,$e,he),$e})}createUniqueName(oe){const ie=PropertyBinding.sanitizeNodeName(oe||"");return ie in this.nodeNamesUsed?ie+"_"+ ++this.nodeNamesUsed[ie]:(this.nodeNamesUsed[ie]=0,ie)}loadGeometries(oe){const ie=this,ue=this.extensions,de=this.primitiveCache;function he(_e){return ue[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(_e,ie).then(function(Ce){return addPrimitiveAttributes(Ce,_e,ie)})}const pe=[];for(let _e=0,Ce=oe.length;_e<Ce;_e++){const xe=oe[_e],Ie=createPrimitiveKey(xe),$e=de[Ie];if($e)pe.push($e.promise);else{let Ne;xe.extensions&&xe.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]?Ne=he(xe):Ne=addPrimitiveAttributes(new BufferGeometry,xe,ie),de[Ie]={primitive:xe,promise:Ne},pe.push(Ne)}}return Promise.all(pe)}loadMesh(oe){const ie=this,ue=this.json,de=this.extensions,he=ue.meshes[oe],pe=he.primitives,_e=[];for(let Ce=0,xe=pe.length;Ce<xe;Ce++){const Ie=pe[Ce].material===void 0?createDefaultMaterial(this.cache):this.getDependency("material",pe[Ce].material);_e.push(Ie)}return _e.push(ie.loadGeometries(pe)),Promise.all(_e).then(function(Ce){const xe=Ce.slice(0,Ce.length-1),Ie=Ce[Ce.length-1],$e=[];for(let Oe=0,Fe=Ie.length;Oe<Fe;Oe++){const Ve=Ie[Oe],ze=pe[Oe];let Ue;const Pt=xe[Oe];if(ze.mode===WEBGL_CONSTANTS.TRIANGLES||ze.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP||ze.mode===WEBGL_CONSTANTS.TRIANGLE_FAN||ze.mode===void 0)Ue=he.isSkinnedMesh===!0?new SkinnedMesh(Ve,Pt):new Mesh(Ve,Pt),Ue.isSkinnedMesh===!0&&Ue.normalizeSkinWeights(),ze.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP?Ue.geometry=toTrianglesDrawMode(Ue.geometry,TriangleStripDrawMode):ze.mode===WEBGL_CONSTANTS.TRIANGLE_FAN&&(Ue.geometry=toTrianglesDrawMode(Ue.geometry,TriangleFanDrawMode));else if(ze.mode===WEBGL_CONSTANTS.LINES)Ue=new LineSegments(Ve,Pt);else if(ze.mode===WEBGL_CONSTANTS.LINE_STRIP)Ue=new Line(Ve,Pt);else if(ze.mode===WEBGL_CONSTANTS.LINE_LOOP)Ue=new LineLoop(Ve,Pt);else if(ze.mode===WEBGL_CONSTANTS.POINTS)Ue=new Points(Ve,Pt);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+ze.mode);Object.keys(Ue.geometry.morphAttributes).length>0&&updateMorphTargets(Ue,he),Ue.name=ie.createUniqueName(he.name||"mesh_"+oe),assignExtrasToUserData(Ue,he),ze.extensions&&addUnknownExtensionsToUserData(de,Ue,ze),ie.assignFinalMaterial(Ue),$e.push(Ue)}for(let Oe=0,Fe=$e.length;Oe<Fe;Oe++)ie.associations.set($e[Oe],{meshes:oe,primitives:Oe});if($e.length===1)return he.extensions&&addUnknownExtensionsToUserData(de,$e[0],he),$e[0];const Ne=new Group;he.extensions&&addUnknownExtensionsToUserData(de,Ne,he),ie.associations.set(Ne,{meshes:oe});for(let Oe=0,Fe=$e.length;Oe<Fe;Oe++)Ne.add($e[Oe]);return Ne})}loadCamera(oe){let ie;const ue=this.json.cameras[oe],de=ue[ue.type];if(de)return ue.type==="perspective"?ie=new PerspectiveCamera(MathUtils$1.radToDeg(de.yfov),de.aspectRatio||1,de.znear||1,de.zfar||2e6):ue.type==="orthographic"&&(ie=new OrthographicCamera(-de.xmag,de.xmag,de.ymag,-de.ymag,de.znear,de.zfar)),ue.name&&(ie.name=this.createUniqueName(ue.name)),assignExtrasToUserData(ie,ue),Promise.resolve(ie)}loadSkin(oe){const ie=this.json.skins[oe],ue=[];for(let de=0,he=ie.joints.length;de<he;de++)ue.push(this._loadNodeShallow(ie.joints[de]));return ie.inverseBindMatrices!==void 0?ue.push(this.getDependency("accessor",ie.inverseBindMatrices)):ue.push(null),Promise.all(ue).then(function(de){const he=de.pop(),pe=de,_e=[],Ce=[];for(let xe=0,Ie=pe.length;xe<Ie;xe++){const $e=pe[xe];if($e){_e.push($e);const Ne=new Matrix4$1;he!==null&&Ne.fromArray(he.array,xe*16),Ce.push(Ne)}}return new Skeleton$1(_e,Ce)})}loadAnimation(oe){const ie=this.json,ue=this,de=ie.animations[oe],he=de.name?de.name:"animation_"+oe,pe=[],_e=[],Ce=[],xe=[],Ie=[];for(let $e=0,Ne=de.channels.length;$e<Ne;$e++){const Oe=de.channels[$e],Fe=de.samplers[Oe.sampler],Ve=Oe.target,ze=Ve.node,Ue=de.parameters!==void 0?de.parameters[Fe.input]:Fe.input,Pt=de.parameters!==void 0?de.parameters[Fe.output]:Fe.output;Ve.node!==void 0&&(pe.push(this.getDependency("node",ze)),_e.push(this.getDependency("accessor",Ue)),Ce.push(this.getDependency("accessor",Pt)),xe.push(Fe),Ie.push(Ve))}return Promise.all([Promise.all(pe),Promise.all(_e),Promise.all(Ce),Promise.all(xe),Promise.all(Ie)]).then(function($e){const Ne=$e[0],Oe=$e[1],Fe=$e[2],Ve=$e[3],ze=$e[4],Ue=[];for(let Pt=0,qe=Ne.length;Pt<qe;Pt++){const Et=Ne[Pt],kt=Oe[Pt],At=Fe[Pt],Dt=Ve[Pt],Lt=ze[Pt];if(Et===void 0)continue;Et.updateMatrix&&Et.updateMatrix();const jt=ue._createAnimationTracks(Et,kt,At,Dt,Lt);if(jt)for(let _n=0;_n<jt.length;_n++)Ue.push(jt[_n])}return new AnimationClip(he,void 0,Ue)})}createNodeMesh(oe){const ie=this.json,ue=this,de=ie.nodes[oe];return de.mesh===void 0?null:ue.getDependency("mesh",de.mesh).then(function(he){const pe=ue._getNodeRef(ue.meshCache,de.mesh,he);return de.weights!==void 0&&pe.traverse(function(_e){if(_e.isMesh)for(let Ce=0,xe=de.weights.length;Ce<xe;Ce++)_e.morphTargetInfluences[Ce]=de.weights[Ce]}),pe})}loadNode(oe){const ie=this.json,ue=this,de=ie.nodes[oe],he=ue._loadNodeShallow(oe),pe=[],_e=de.children||[];for(let xe=0,Ie=_e.length;xe<Ie;xe++)pe.push(ue.getDependency("node",_e[xe]));const Ce=de.skin===void 0?Promise.resolve(null):ue.getDependency("skin",de.skin);return Promise.all([he,Promise.all(pe),Ce]).then(function(xe){const Ie=xe[0],$e=xe[1],Ne=xe[2];Ne!==null&&Ie.traverse(function(Oe){Oe.isSkinnedMesh&&Oe.bind(Ne,_identityMatrix)});for(let Oe=0,Fe=$e.length;Oe<Fe;Oe++)Ie.add($e[Oe]);return Ie})}_loadNodeShallow(oe){const ie=this.json,ue=this.extensions,de=this;if(this.nodeCache[oe]!==void 0)return this.nodeCache[oe];const he=ie.nodes[oe],pe=he.name?de.createUniqueName(he.name):"",_e=[],Ce=de._invokeOne(function(xe){return xe.createNodeMesh&&xe.createNodeMesh(oe)});return Ce&&_e.push(Ce),he.camera!==void 0&&_e.push(de.getDependency("camera",he.camera).then(function(xe){return de._getNodeRef(de.cameraCache,he.camera,xe)})),de._invokeAll(function(xe){return xe.createNodeAttachment&&xe.createNodeAttachment(oe)}).forEach(function(xe){_e.push(xe)}),this.nodeCache[oe]=Promise.all(_e).then(function(xe){let Ie;if(he.isBone===!0?Ie=new Bone:xe.length>1?Ie=new Group:xe.length===1?Ie=xe[0]:Ie=new Object3D,Ie!==xe[0])for(let $e=0,Ne=xe.length;$e<Ne;$e++)Ie.add(xe[$e]);if(he.name&&(Ie.userData.name=he.name,Ie.name=pe),assignExtrasToUserData(Ie,he),he.extensions&&addUnknownExtensionsToUserData(ue,Ie,he),he.matrix!==void 0){const $e=new Matrix4$1;$e.fromArray(he.matrix),Ie.applyMatrix4($e)}else he.translation!==void 0&&Ie.position.fromArray(he.translation),he.rotation!==void 0&&Ie.quaternion.fromArray(he.rotation),he.scale!==void 0&&Ie.scale.fromArray(he.scale);return de.associations.has(Ie)||de.associations.set(Ie,{}),de.associations.get(Ie).nodes=oe,Ie}),this.nodeCache[oe]}loadScene(oe){const ie=this.extensions,ue=this.json.scenes[oe],de=this,he=new Group;ue.name&&(he.name=de.createUniqueName(ue.name)),assignExtrasToUserData(he,ue),ue.extensions&&addUnknownExtensionsToUserData(ie,he,ue);const pe=ue.nodes||[],_e=[];for(let Ce=0,xe=pe.length;Ce<xe;Ce++)_e.push(de.getDependency("node",pe[Ce]));return Promise.all(_e).then(function(Ce){for(let Ie=0,$e=Ce.length;Ie<$e;Ie++)he.add(Ce[Ie]);const xe=Ie=>{const $e=new Map;for(const[Ne,Oe]of de.associations)(Ne instanceof Material||Ne instanceof Texture)&&$e.set(Ne,Oe);return Ie.traverse(Ne=>{const Oe=de.associations.get(Ne);Oe!=null&&$e.set(Ne,Oe)}),$e};return de.associations=xe(he),he})}_createAnimationTracks(oe,ie,ue,de,he){const pe=[],_e=oe.name?oe.name:oe.uuid,Ce=[];PATH_PROPERTIES[he.path]===PATH_PROPERTIES.weights?oe.traverse(function(Ne){Ne.morphTargetInfluences&&Ce.push(Ne.name?Ne.name:Ne.uuid)}):Ce.push(_e);let xe;switch(PATH_PROPERTIES[he.path]){case PATH_PROPERTIES.weights:xe=NumberKeyframeTrack;break;case PATH_PROPERTIES.rotation:xe=QuaternionKeyframeTrack;break;case PATH_PROPERTIES.position:case PATH_PROPERTIES.scale:xe=VectorKeyframeTrack;break;default:switch(ue.itemSize){case 1:xe=NumberKeyframeTrack;break;case 2:case 3:default:xe=VectorKeyframeTrack;break}break}const Ie=de.interpolation!==void 0?INTERPOLATION[de.interpolation]:InterpolateLinear,$e=this._getArrayFromAccessor(ue);for(let Ne=0,Oe=Ce.length;Ne<Oe;Ne++){const Fe=new xe(Ce[Ne]+"."+PATH_PROPERTIES[he.path],ie.array,$e,Ie);de.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(Fe),pe.push(Fe)}return pe}_getArrayFromAccessor(oe){let ie=oe.array;if(oe.normalized){const ue=getNormalizedComponentScale(ie.constructor),de=new Float32Array(ie.length);for(let he=0,pe=ie.length;he<pe;he++)de[he]=ie[he]*ue;ie=de}return ie}_createCubicSplineTrackInterpolant(oe){oe.createInterpolant=function(ie){const ue=this instanceof QuaternionKeyframeTrack?GLTFCubicSplineQuaternionInterpolant:GLTFCubicSplineInterpolant;return new ue(this.times,this.values,this.getValueSize()/3,ie)},oe.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function computeBounds(le,oe,ie){const ue=oe.attributes,de=new Box3;if(ue.POSITION!==void 0){const _e=ie.json.accessors[ue.POSITION],Ce=_e.min,xe=_e.max;if(Ce!==void 0&&xe!==void 0){if(de.set(new Vector3$1(Ce[0],Ce[1],Ce[2]),new Vector3$1(xe[0],xe[1],xe[2])),_e.normalized){const Ie=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[_e.componentType]);de.min.multiplyScalar(Ie),de.max.multiplyScalar(Ie)}}else return}else return;const he=oe.targets;if(he!==void 0){const _e=new Vector3$1,Ce=new Vector3$1;for(let xe=0,Ie=he.length;xe<Ie;xe++){const $e=he[xe];if($e.POSITION!==void 0){const Ne=ie.json.accessors[$e.POSITION],Oe=Ne.min,Fe=Ne.max;if(Oe!==void 0&&Fe!==void 0){if(Ce.setX(Math.max(Math.abs(Oe[0]),Math.abs(Fe[0]))),Ce.setY(Math.max(Math.abs(Oe[1]),Math.abs(Fe[1]))),Ce.setZ(Math.max(Math.abs(Oe[2]),Math.abs(Fe[2]))),Ne.normalized){const Ve=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[Ne.componentType]);Ce.multiplyScalar(Ve)}_e.max(Ce)}}}de.expandByVector(_e)}le.boundingBox=de;const pe=new Sphere;de.getCenter(pe.center),pe.radius=de.min.distanceTo(de.max)/2,le.boundingSphere=pe}function addPrimitiveAttributes(le,oe,ie){const ue=oe.attributes,de=[];function he(pe,_e){return ie.getDependency("accessor",pe).then(function(Ce){le.setAttribute(_e,Ce)})}for(const pe in ue){const _e=ATTRIBUTES[pe]||pe.toLowerCase();_e in le.attributes||de.push(he(ue[pe],_e))}if(oe.indices!==void 0&&!le.index){const pe=ie.getDependency("accessor",oe.indices).then(function(_e){le.setIndex(_e)});de.push(pe)}return ColorManagement$1.workingColorSpace!==LinearSRGBColorSpace$1&&"COLOR_0"in ue,assignExtrasToUserData(le,oe),computeBounds(le,oe,ie),Promise.all(de).then(function(){return oe.targets!==void 0?addMorphTargets(le,oe.targets,ie):le})}const ur=class Co extends LoaderPlugin{static getGltfloader(oe){if(this._gltfloader==null){const ie=new GLTFLoader;if(oe){const ue=new DRACOLoader;ue.setDecoderPath(oe),ie.setDRACOLoader(ue)}this._gltfloader=ie}return this._gltfloader}load(oe,ie){return new Promise((ue,de)=>{Co.getGltfloader(oe.dcoderPath).load(oe.url,he=>{const pe=new Box3().setFromObject(he.scene),_e=new ModelDocument(this.app);oe.name&&(_e.name=oe.name),Object3DUtils.BatchAndInstance(he.scene,_e),pe.applyMatrix4(_e.rootObject.matrix),_e.app.view.setHome(pe,!1,Math.PI/4,2*Math.PI),ue(_e)},he=>{ie&&ie(he)},he=>{de(he)})})}};ve(ur,"_gltfloader");let GLTFLoaderPlugin=ur;function getUrlExtension(le){let oe;try{oe=new URL(le,"http://fakehost.com/")}catch{return null}const ie=oe.pathname.split("/").pop(),ue=ie.lastIndexOf(".");return ue===-1||ue===ie.length-1?null:ie.substring(ue+1)}function enqueueMicrotask(le){Promise.resolve().then(le)}class LRUCache{constructor(){this.maxSize=800,this.minSize=600,this.unloadPercent=.05,this.itemSet=new Map,this.itemList=[],this.usedSet=new Set,this.callbacks=new Map,this.unloadPriorityCallback=null;const oe=this.itemSet;this.defaultPriorityCallback=ie=>oe.get(ie)}isFull(){return this.itemSet.size>=this.maxSize}add(oe,ie){const ue=this.itemSet;if(ue.has(oe)||this.isFull())return!1;const de=this.usedSet,he=this.itemList,pe=this.callbacks;return he.push(oe),de.add(oe),ue.set(oe,Date.now()),pe.set(oe,ie),!0}remove(oe){const ie=this.usedSet,ue=this.itemSet,de=this.itemList,he=this.callbacks;if(ue.has(oe)){he.get(oe)(oe);const pe=de.indexOf(oe);return de.splice(pe,1),ie.delete(oe),ue.delete(oe),he.delete(oe),!0}return!1}markUsed(oe){const ie=this.itemSet,ue=this.usedSet;ie.has(oe)&&!ue.has(oe)&&(ie.set(oe,Date.now()),ue.add(oe))}markAllUnused(){this.usedSet.clear()}unloadUnusedContent(){const oe=this.unloadPercent,ie=this.minSize,ue=this.itemList,de=this.itemSet,he=this.usedSet,pe=this.callbacks,_e=ue.length-he.size,Ce=ue.length-ie,xe=this.unloadPriorityCallback||this.defaultPriorityCallback;if(Ce>0&&_e>0){ue.sort((Fe,Ve)=>{const ze=he.has(Fe),Ue=he.has(Ve);return ze&&Ue?0:!ze&&!Ue?xe(Ve)-xe(Fe):ze?1:-1});const Ie=Math.min(Ce,_e),$e=Math.max(ie*oe,Ie*oe);let Ne=Math.min($e,_e);Ne=Math.ceil(Ne);const Oe=ue.splice(0,Ne);for(let Fe=0,Ve=Oe.length;Fe<Ve;Fe++){const ze=Oe[Fe];pe.get(ze)(ze),de.delete(ze),pe.delete(ze)}}}scheduleUnload(oe=!0){this.scheduled||(this.scheduled=!0,enqueueMicrotask(()=>{this.scheduled=!1,this.unloadUnusedContent(),oe&&this.markAllUnused()}))}}class PriorityQueue{constructor(){this.maxJobs=6,this.items=[],this.callbacks=new Map,this.currJobs=0,this.scheduled=!1,this.autoUpdate=!0,this.priorityCallback=()=>{throw new Error("PriorityQueue: PriorityCallback function not defined.")},this.schedulingCallback=oe=>{requestAnimationFrame(oe)},this._runjobs=()=>{this.tryRunJobs(),this.scheduled=!1}}sort(){const oe=this.priorityCallback;this.items.sort(oe)}add(oe,ie){return new Promise((ue,de)=>{const he=(...Ce)=>ie(...Ce).then(ue).catch(de),pe=this.items,_e=this.callbacks;pe.push(oe),_e.set(oe,he),this.autoUpdate&&this.scheduleJobRun()})}remove(oe){const ie=this.items,ue=this.callbacks,de=ie.indexOf(oe);de!==-1&&(ie.splice(de,1),ue.delete(oe))}tryRunJobs(){this.sort();const oe=this.items,ie=this.callbacks,ue=this.maxJobs;let de=this.currJobs;for(;ue>de&&oe.length>0;){de++;const he=oe.pop(),pe=ie.get(he);ie.delete(he),pe(he).then(()=>{this.currJobs--,this.autoUpdate&&this.scheduleJobRun()}).catch(()=>{this.currJobs--,this.autoUpdate&&this.scheduleJobRun()})}this.currJobs=de}scheduleJobRun(){this.scheduled||(this.schedulingCallback(this._runjobs),this.scheduled=!0)}}const UNLOADED=0,LOADING=1,PARSING=2,LOADED=3,FAILED=4,WGS84_RADIUS=6378137,WGS84_HEIGHT=6356752314245179e-9;function isDownloadFinished(le){return le===LOADED||le===FAILED}function isUsedThisFrame(le,oe){return le.__lastFrameVisited===oe&&le.__used}function resetFrameState(le,oe){le.__lastFrameVisited!==oe&&(le.__lastFrameVisited=oe,le.__used=!1,le.__inFrustum=!1,le.__isLeaf=!1,le.__visible=!1,le.__active=!1,le.__error=1/0,le.__distanceFromCamera=1/0,le.__childrenWereVisible=!1,le.__allChildrenLoaded=!1)}function recursivelyMarkUsed(le,oe,ie){if(resetFrameState(le,oe),le.__used=!0,ie.markUsed(le),le.__contentEmpty){const ue=le.children;for(let de=0,he=ue.length;de<he;de++)recursivelyMarkUsed(ue[de],oe,ie)}}function recursivelyLoadTiles(le,oe,ie){if(le.__contentEmpty&&(!le.__externalTileSet||isDownloadFinished(le.__loadingState))){const ue=le.children;for(let de=0,he=ue.length;de<he;de++){const pe=ue[de];pe.__depthFromRenderedParent=oe,recursivelyLoadTiles(pe,oe,ie)}}else ie.requestTileContents(le)}function traverseSet(le,oe=null,ie=null,ue=null,de=0){if(oe&&oe(le,ue,de)){ie&&ie(le,ue,de);return}const he=le.children;for(let pe=0,_e=he.length;pe<_e;pe++)traverseSet(he[pe],oe,ie,le,de+1);ie&&ie(le,ue,de)}function determineFrustumSet(le,oe){const ie=oe.stats,ue=oe.frameCount,de=oe.errorTarget,he=oe.maxDepth,pe=oe.loadSiblings,_e=oe.lruCache,Ce=oe.stopAtEmptyTiles;if(resetFrameState(le,ue),oe.tileInView(le)===!1)return!1;if(le.__used=!0,_e.markUsed(le),le.__inFrustum=!0,ie.inFrustum++,(Ce||!le.__contentEmpty)&&!le.__externalTileSet&&(oe.calculateError(le),le.__error<=de||oe.maxDepth>0&&le.__depth+1>=he))return!0;let xe=!1;const Ie=le.children;for(let $e=0,Ne=Ie.length;$e<Ne;$e++){const Oe=Ie[$e],Fe=determineFrustumSet(Oe,oe);xe=xe||Fe}if(xe&&pe)for(let $e=0,Ne=Ie.length;$e<Ne;$e++){const Oe=Ie[$e];recursivelyMarkUsed(Oe,ue,_e)}return!0}function markUsedSetLeaves(le,oe){const ie=oe.stats,ue=oe.frameCount;if(!isUsedThisFrame(le,ue))return;ie.used++;const de=le.children;let he=!1;for(let pe=0,_e=de.length;pe<_e;pe++){const Ce=de[pe];he=he||isUsedThisFrame(Ce,ue)}if(!he)le.__isLeaf=!0;else{let pe=!1,_e=!0;for(let Ce=0,xe=de.length;Ce<xe;Ce++){const Ie=de[Ce];if(markUsedSetLeaves(Ie,oe),pe=pe||Ie.__wasSetVisible||Ie.__childrenWereVisible,isUsedThisFrame(Ie,ue)){const $e=Ie.__allChildrenLoaded||!Ie.__contentEmpty&&isDownloadFinished(Ie.__loadingState)||Ie.__externalTileSet&&Ie.__loadingState===FAILED;_e=_e&&$e}}le.__childrenWereVisible=pe,le.__allChildrenLoaded=_e}}function skipTraversal(le,oe){const ie=oe.stats,ue=oe.frameCount;if(!isUsedThisFrame(le,ue))return;const de=le.parent,he=de?de.__depthFromRenderedParent:-1;le.__depthFromRenderedParent=he;const pe=oe.lruCache;if(le.__isLeaf){le.__depthFromRenderedParent++,le.__loadingState===LOADED?(le.__inFrustum&&(le.__visible=!0,ie.visible++),le.__active=!0,ie.active++):!pe.isFull()&&(!le.__contentEmpty||le.__externalTileSet)&&oe.requestTileContents(le);return}const _e=(oe.errorTarget+1)*oe.errorThreshold,Ce=le.__error<=_e,xe=Ce||le.refine==="ADD",Ie=!le.__contentEmpty,$e=Ie||le.__externalTileSet,Ne=isDownloadFinished(le.__loadingState)&&$e,Oe=le.__childrenWereVisible,Fe=le.children,Ve=le.__allChildrenLoaded;if(xe&&Ie&&le.__depthFromRenderedParent++,xe&&!Ne&&!pe.isFull()&&$e&&oe.requestTileContents(le),(Ce&&!Ve&&!Oe&&Ne||le.refine==="ADD"&&Ne)&&(le.__inFrustum&&(le.__visible=!0,ie.visible++),le.__active=!0,ie.active++),le.refine!=="ADD"&&Ce&&!Ve&&Ne)for(let ze=0,Ue=Fe.length;ze<Ue;ze++){const Pt=Fe[ze];isUsedThisFrame(Pt,ue)&&!pe.isFull()&&(Pt.__depthFromRenderedParent=le.__depthFromRenderedParent+1,recursivelyLoadTiles(Pt,Pt.__depthFromRenderedParent,oe))}else for(let ze=0,Ue=Fe.length;ze<Ue;ze++){const Pt=Fe[ze];isUsedThisFrame(Pt,ue)&&skipTraversal(Pt,oe)}}function toggleTiles(le,oe){const ie=oe.frameCount,ue=isUsedThisFrame(le,ie);if(ue||le.__usedLastFrame){let de=!1,he=!1;ue&&(de=le.__active,oe.displayActiveTiles?he=le.__active||le.__visible:he=le.__visible),!le.__contentEmpty&&le.__loadingState===LOADED&&(le.__wasSetActive!==de&&oe.setTileActive(le,de),le.__wasSetVisible!==he&&oe.setTileVisible(le,he)),le.__wasSetActive=de,le.__wasSetVisible=he,le.__usedLastFrame=ue;const pe=le.children;for(let _e=0,Ce=pe.length;_e<Ce;_e++){const xe=pe[_e];toggleTiles(xe,oe)}}}const priorityCallback=(le,oe)=>le.__depth!==oe.__depth?le.__depth>oe.__depth?-1:1:le.__inFrustum!==oe.__inFrustum?le.__inFrustum?1:-1:le.__used!==oe.__used?le.__used?1:-1:le.__error!==oe.__error?le.__error>oe.__error?1:-1:le.__distanceFromCamera!==oe.__distanceFromCamera?le.__distanceFromCamera>oe.__distanceFromCamera?-1:1:0,lruPriorityCallback=le=>1/(le.__depthFromRenderedParent+1);class TilesRendererBase{get rootTileSet(){const oe=this.tileSets[this.rootURL];return!oe||oe instanceof Promise?null:oe}get root(){const oe=this.rootTileSet;return oe?oe.root:null}constructor(oe){this.modelData=null,this.tileSets={},this.rootURL=oe,this.fetchOptions={},this.preprocessURL=null;const ie=new LRUCache;ie.unloadPriorityCallback=lruPriorityCallback;const ue=new PriorityQueue;ue.maxJobs=4,ue.priorityCallback=priorityCallback;const de=new PriorityQueue;de.maxJobs=1,de.priorityCallback=priorityCallback,this.lruCache=ie,this.downloadQueue=ue,this.parseQueue=de,this.stats={parsing:0,downloading:0,failed:0,inFrustum:0,used:0,active:0,visible:0},this.frameCount=0,this.errorTarget=6,this.errorThreshold=1/0,this.loadSiblings=!0,this.displayActiveTiles=!1,this.maxDepth=1/0,this.stopAtEmptyTiles=!0}traverse(oe,ie){const ue=this.tileSets[this.rootURL];!ue||!ue.root||traverseSet(ue.root,oe,ie)}update(){const oe=this.stats,ie=this.lruCache,ue=this.tileSets,de=ue[this.rootURL];if(this.rootURL in ue){if(!de||!de.root)return}else{this.loadRootTileSet(this.rootURL);return}const he=de.root;oe.inFrustum=0,oe.used=0,oe.active=0,oe.visible=0,this.frameCount++,determineFrustumSet(he,this),markUsedSetLeaves(he,this),skipTraversal(he,this),toggleTiles(he,this),ie.scheduleUnload()}parseTile(oe,ie,ue){return null}disposeTile(oe){}preprocessNode(oe,ie,ue){if(oe.content&&(!("uri"in oe.content)&&"url"in oe.content&&(oe.content.uri=oe.content.url,delete oe.content.url),oe.content.uri&&(oe.content.uri=new URL(oe.content.uri,ue+"/").toString()),oe.content.boundingVolume&&!("box"in oe.content.boundingVolume||"sphere"in oe.content.boundingVolume||"region"in oe.content.boundingVolume)&&delete oe.content.boundingVolume),oe.parent=ie,oe.children=oe.children||[],oe.content&&oe.content.uri){const de=getUrlExtension(oe.content.uri),he=!!(de&&de.toLowerCase()==="json");oe.__externalTileSet=he,oe.__contentEmpty=he}else oe.__externalTileSet=!1,oe.__contentEmpty=!0;oe.__distanceFromCamera=1/0,oe.__error=1/0,oe.__inFrustum=!1,oe.__isLeaf=!1,oe.__usedLastFrame=!1,oe.__used=!1,oe.__wasSetVisible=!1,oe.__visible=!1,oe.__childrenWereVisible=!1,oe.__allChildrenLoaded=!1,oe.__wasSetActive=!1,oe.__active=!1,oe.__loadingState=UNLOADED,oe.__loadIndex=0,oe.__loadAbort=null,oe.__depthFromRenderedParent=-1,ie===null?(oe.__depth=0,oe.refine=oe.refine||"REPLACE"):(oe.__depth=ie.__depth+1,oe.refine=oe.refine||ie.refine)}setTileActive(oe,ie){}setTileVisible(oe,ie){}calculateError(oe){return 0}tileInView(oe){return!0}resetFailedTiles(){const oe=this.stats;oe.failed!==0&&(this.traverse(ie=>{ie.__loadingState===FAILED&&(ie.__loadingState=UNLOADED)}),oe.failed=0)}fetchTileSet(oe,ie,ue=null){return fetch(oe,ie).then(de=>{if(de.ok)return de.json();throw new Error(`TilesRenderer: Failed to load tileset "${oe}" with status ${de.status} : ${de.statusText}`)}).then(de=>{const he=de.asset.version;let pe=oe.replace(/\/[^/]*\/?$/,"");return pe=new URL(pe,window.location.href).toString(),traverseSet(de.root,(_e,Ce)=>this.preprocessNode(_e,Ce,pe),null,ue,ue?ue.__depth:0),de})}loadRootTileSet(oe){const ie=this.tileSets;if(oe in ie)return ie[oe]instanceof Error?Promise.reject(ie[oe]):Promise.resolve(ie[oe]);{const ue=this.fetchTileSet(this.preprocessURL?this.preprocessURL(oe):oe,this.fetchOptions).then(de=>{ie[oe]=de});return ue.catch(de=>{ie[oe]=de}),ie[oe]=ue,ue}}requestTileContents(oe){if(oe.__loadingState!==UNLOADED)return;const ie=this.stats,ue=this.lruCache,de=this.downloadQueue,he=this.parseQueue,pe=oe.__externalTileSet;ue.add(oe,$e=>{$e.__loadingState===LOADING?($e.__loadAbort.abort(),$e.__loadAbort=null):pe?$e.children.length=0:this.disposeTile($e),$e.__loadingState===LOADING?ie.downloading--:$e.__loadingState===PARSING&&ie.parsing--,$e.__loadingState=UNLOADED,$e.__loadIndex++,he.remove($e),de.remove($e)}),oe.__loadIndex++;const _e=oe.__loadIndex,Ce=new AbortController,xe=Ce.signal;ie.downloading++,oe.__loadAbort=Ce,oe.__loadingState=LOADING;const Ie=$e=>{oe.__loadIndex===_e&&($e.name!=="AbortError"?(he.remove(oe),de.remove(oe),oe.__loadingState===PARSING?ie.parsing--:oe.__loadingState===LOADING&&ie.downloading--,ie.failed++,oe.__loadingState=FAILED):ue.remove(oe))};pe?de.add(oe,$e=>{if($e.__loadIndex!==_e)return Promise.resolve();const Ne=this.preprocessURL?this.preprocessURL($e.content.uri):$e.content.uri;return this.fetchTileSet(Ne,Object.assign({signal:xe},this.fetchOptions),$e)}).then($e=>{oe.__loadIndex===_e&&(ie.downloading--,oe.__loadAbort=null,oe.__loadingState=LOADED,oe.children.push($e.root))}).catch(Ie):de.add(oe,$e=>{if($e.__loadIndex!==_e)return Promise.resolve();const Ne=this.preprocessURL?this.preprocessURL($e.content.uri):$e.content.uri;return fetch(Ne,Object.assign({signal:xe},this.fetchOptions))}).then($e=>{if(oe.__loadIndex===_e){if($e.ok)return $e.arrayBuffer();throw new Error(`Failed to load model with error code ${$e.status}`)}}).then($e=>{if(oe.__loadIndex===_e)return ie.downloading--,ie.parsing++,oe.__loadAbort=null,oe.__loadingState=PARSING,he.add(oe,Ne=>{if(Ne.__loadIndex!==_e)return Promise.resolve();const Oe=Ne.content.uri,Fe=getUrlExtension(Oe);return this.parseTile($e,Ne,Fe)})}).then(()=>{oe.__loadIndex===_e&&(ie.parsing--,oe.__loadingState=LOADED,oe.__wasSetVisible&&this.setTileVisible(oe,!0),oe.__wasSetActive&&this.setTileActive(oe,!0))}).catch(Ie)}dispose(){const oe=this.lruCache;this.traverse(ie=>{oe.remove(ie)}),this.stats={parsing:0,downloading:0,failed:0,inFrustum:0,used:0,active:0,visible:0},this.frameCount=0}}function arrayToString(le){return new TextDecoder().decode(le)}class FeatureTable{constructor(oe,ie,ue,de){this.buffer=oe,this.binOffset=ie+ue,this.binLength=de;let he=null;if(ue!==0){const pe=new Uint8Array(oe,ie,ue);he=JSON.parse(arrayToString(pe))}else he={};this.header=he}getKeys(){return Object.keys(this.header)}getData(oe,ie,ue=null,de=null){const he=this.header;if(!(oe in he))return null;const pe=he[oe];if(pe instanceof Object){if(Array.isArray(pe))return pe;{const{buffer:_e,binOffset:Ce,binLength:xe}=this,Ie=pe.byteOffset||0,$e=pe.type||de,Ne=pe.componentType||ue;if("type"in pe&&de&&pe.type!==de)throw new Error("FeatureTable: Specified type does not match expected type.");let Oe;switch($e){case"SCALAR":Oe=1;break;case"VEC2":Oe=2;break;case"VEC3":Oe=3;break;case"VEC4":Oe=4;break;default:throw new Error(`FeatureTable : Feature type not provided for "${oe}".`)}let Fe;const Ve=Ce+Ie,ze=ie*Oe;switch(Ne){case"BYTE":Fe=new Int8Array(_e,Ve,ze);break;case"UNSIGNED_BYTE":Fe=new Uint8Array(_e,Ve,ze);break;case"SHORT":Fe=new Int16Array(_e,Ve,ze);break;case"UNSIGNED_SHORT":Fe=new Uint16Array(_e,Ve,ze);break;case"INT":Fe=new Int32Array(_e,Ve,ze);break;case"UNSIGNED_INT":Fe=new Uint32Array(_e,Ve,ze);break;case"FLOAT":Fe=new Float32Array(_e,Ve,ze);break;case"DOUBLE":Fe=new Float64Array(_e,Ve,ze);break;default:throw new Error(`FeatureTable : Feature component type not provided for "${oe}".`)}if(Ve+ze*Fe.BYTES_PER_ELEMENT>Ce+xe)throw new Error("FeatureTable: Feature data read outside binary body length.");return Fe}}else return pe}getBuffer(oe,ie){const{buffer:ue,binOffset:de}=this;return ue.slice(de+oe,de+oe+ie)}}class BatchTable extends FeatureTable{constructor(oe,ie,ue,de,he){super(oe,ue,de,he),this.batchSize=ie}getData(oe,ie=null,ue=null){return super.getData(oe,this.batchSize,ie,ue)}}class LoaderBase{constructor(){this.fetchOptions={},this.workingPath=""}load(oe){return fetch(oe,this.fetchOptions).then(ie=>{if(!ie.ok)throw new Error(`Failed to load file "${oe}" with status ${ie.status} : ${ie.statusText}`);return ie.arrayBuffer()}).then(ie=>(this.workingPath===""&&(this.workingPath=this.workingPathForURL(oe)),this.parse(ie)))}resolveExternalURL(oe){return/^[^\\/]/.test(oe)?this.workingPath+"/"+oe:oe}workingPathForURL(oe){const ie=oe.split(/[\\/]/g);return ie.pop(),ie.join("/")+"/"}parse(oe){throw new Error("LoaderBase: Parse not implemented.")}}function readMagicBytes(le){let oe;if(le instanceof DataView?oe=le:oe=new DataView(le),String.fromCharCode(oe.getUint8(0))==="{")return null;let ie="";for(let ue=0;ue<4;ue++)ie+=String.fromCharCode(oe.getUint8(ue));return ie}class B3DMLoaderBase extends LoaderBase{parse(oe){const ie=new DataView(oe),ue=readMagicBytes(ie),de=ie.getUint32(4,!0),he=ie.getUint32(8,!0),pe=ie.getUint32(12,!0),_e=ie.getUint32(16,!0),Ce=ie.getUint32(20,!0),xe=ie.getUint32(24,!0),Ie=28,$e=oe.slice(Ie,Ie+pe+_e),Ne=new FeatureTable($e,0,pe,_e),Oe=Ie+pe+_e,Fe=oe.slice(Oe,Oe+Ce+xe),Ve=new BatchTable(Fe,Ne.getData("BATCH_LENGTH"),0,Ce,xe),ze=Oe+Ce+xe,Ue=new Uint8Array(oe,ze,he-ze);return{version:de,featureTable:Ne,batchTable:Ve,glbBytes:Ue}}}class B3DMLoader extends B3DMLoaderBase{constructor(oe=DefaultLoadingManager,ie){super(),this.manager=oe,this.adjustmentTransform=new Matrix4$1,this.tilesRenderer=ie}parse(oe){const ie=super.parse(oe),ue=ie.glbBytes.slice().buffer;return new Promise((de,he)=>{const pe=this.manager,_e=this.fetchOptions,Ce=this.tilesRenderer,xe=pe.getHandler("path.gltf")||new GLTFLoader$1(pe);_e.credentials==="include"&&_e.mode==="cors"&&xe.setCrossOrigin("use-credentials"),"credentials"in _e&&xe.setWithCredentials(_e.credentials==="include"),_e.headers&&xe.setRequestHeader(_e.headers);let Ie=this.workingPath;!/[\\/]$/.test(Ie)&&Ie.length&&(Ie+="/");const $e=this.adjustmentTransform;xe.parse(ue,Ie,Ne=>{const{batchTable:Oe,featureTable:Fe}=ie,{scene:Ve}=Ne,ze=Fe.getData("RTC_CENTER");ze&&(Ve.position.x+=ze[0],Ve.position.y+=ze[1],Ve.position.z+=ze[2]);let Ue=null;Oe&&Oe.header&&Oe.header.extensions&&Oe.header.extensions["3DTILES_batch_table_hierarchy"]!=null&&(Ue=Oe.header.extensions["3DTILES_batch_table_hierarchy"].classes);let Pt=new Map;const qe=4;Ve.traverse(function(Et){if(Et instanceof Mesh){Et.orignMaterial=Et.material,Et.pickMaterial=MaterialData.pickMaterial,Et.material.vertexColors=!0;let kt=Et.geometry.getAttribute("position").count,At=new BufferAttribute(new Uint8Array(qe*kt).fill(255),qe,!0),Dt=new BufferAttribute(new Int32Array(kt),1),Lt=Et.geometry.index,jt=Et.geometry.getAttribute("_batchid");for(let _n=0;_n<Lt.count;_n++){let bn=Lt.getX(_n),vn=Math.round(jt.getX(bn)),Tn,$n;Pt.has(vn)?($n=Pt.get(vn),$n.mapbatchData.has(Et.material)?Tn=$n.mapbatchData.get(Et.material):(Tn=new BatchData(Et,$n.id),$n.addMeshData(Tn),$n.mapbatchData.set(Et.material,Tn))):($n=new BaseElement(Ce.doc),Ue&&Ue[vn]&&($n.userData=Ue[vn].instances,$n.userData.UniqueId&&($n.key=$n.userData.UniqueId[0]),$n.userData.name&&($n.name=$n.userData.name[0])),$n.mapbatchData=new Map,Pt.set(vn,$n),Tn=new BatchData(Et,$n.id),$n.addMeshData(Tn),$n.mapbatchData.set(Et.material,Tn)),Dt.setX(bn,$n.Id),Tn.indexs==null&&(Tn.indexs=[]),Tn.indexs.push(_n)}Et.geometry.setAttribute("color",At),Et.geometry.setAttribute("elementID",Dt),Et.geometry.deleteAttribute("_batchid")}});for(const Et of Pt.values()){Et.mapbatchData.clear();for(const kt of Et.meshDatas)if(kt.indexs!=null){kt.indexs.sort((Lt,jt)=>Lt-jt);const At=[];let Dt=[];kt.indexs.forEach(Lt=>{Dt.length===0||Lt===Dt[Dt.length-1]+1?Dt.push(Lt):(At.push(Dt),Dt=[Lt])}),Dt.length>0&&At.push(Dt);for(const Lt of At)Lt.length>1&&Lt[0]!=Lt[Lt.length-1]&&kt.startEndIndex.push({start:Lt[0],end:Lt[Lt.length-1]});delete kt.indexs}delete Et.mapbatchData}Ne.scene.updateMatrix(),Ne.scene.matrix.multiply($e),Ne.scene.matrix.decompose(Ne.scene.position,Ne.scene.quaternion,Ne.scene.scale),de(Ne)},he)})}}class PNTSLoaderBase extends LoaderBase{parse(oe){const ie=new DataView(oe),ue=readMagicBytes(ie),de=ie.getUint32(4,!0),he=ie.getUint32(8,!0),pe=ie.getUint32(12,!0),_e=ie.getUint32(16,!0),Ce=ie.getUint32(20,!0),xe=ie.getUint32(24,!0),Ie=28,$e=oe.slice(Ie,Ie+pe+_e),Ne=new FeatureTable($e,0,pe,_e),Oe=Ie+pe+_e,Fe=oe.slice(Oe,Oe+Ce+xe),Ve=new BatchTable(Fe,Ne.getData("BATCH_LENGTH")||Ne.getData("POINTS_LENGTH"),0,Ce,xe);return Promise.resolve({version:de,featureTable:Ne,batchTable:Ve})}}const DRACO_ATTRIBUTE_MAP={RGB:"color",POSITION:"position"};class PNTSLoader extends PNTSLoaderBase{constructor(oe=DefaultLoadingManager){super(),this.manager=oe}parse(oe){return super.parse(oe).then(async ie=>{const{featureTable:ue}=ie,de=new PointsMaterial,he=ue.header.extensions;let pe;if(he&&he["3DTILES_draco_point_compression"]){const{byteOffset:xe,byteLength:Ie,properties:$e}=he["3DTILES_draco_point_compression"],Ne=this.manager.getHandler("draco.drc");if(Ne==null)throw new Error("PNTSLoader: dracoLoader not available.");const Oe={};for(const ze in $e)if(ze in DRACO_ATTRIBUTE_MAP&&ze in $e){const Ue=DRACO_ATTRIBUTE_MAP[ze];Oe[Ue]=$e[ze]}const Fe={attributeIDs:Oe,attributeTypes:{position:"Float32Array",color:"Uint8Array"},useUniqueIDs:!0},Ve=ue.getBuffer(xe,Ie);pe=await Ne.decodeGeometry(Ve,Fe),pe.attributes.color&&(de.vertexColors=!0)}else{const xe=ue.getData("POINTS_LENGTH"),Ie=ue.getData("POSITION",xe,"FLOAT","VEC3"),$e=ue.getData("RGB",xe,"UNSIGNED_BYTE","VEC3");pe=new BufferGeometry,pe.setAttribute("position",new BufferAttribute(Ie,3,!1)),$e!==null&&(pe.setAttribute("color",new BufferAttribute($e,3,!0)),de.vertexColors=!0)}["QUANTIZED_VOLUME_OFFSET","QUANTIZED_VOLUME_SCALE","CONSTANT_RGBA","BATCH_LENGTH","POSITION_QUANTIZED","RGBA","RGB565","NORMAL","NORMAL_OCT16P"].forEach(xe=>{xe in ue.header});const _e=new Points(pe,de);ie.scene=_e,ie.scene.featureTable=ue;const Ce=ue.getData("RTC_CENTER");return Ce&&(ie.scene.position.x+=Ce[0],ie.scene.position.y+=Ce[1],ie.scene.position.z+=Ce[2]),ie})}}class I3DMLoaderBase extends LoaderBase{parse(oe){const ie=new DataView(oe),ue=readMagicBytes(ie),de=ie.getUint32(4,!0),he=ie.getUint32(8,!0),pe=ie.getUint32(12,!0),_e=ie.getUint32(16,!0),Ce=ie.getUint32(20,!0),xe=ie.getUint32(24,!0),Ie=ie.getUint32(28,!0),$e=32,Ne=oe.slice($e,$e+pe+_e),Oe=new FeatureTable(Ne,0,pe,_e),Fe=$e+pe+_e,Ve=oe.slice(Fe,Fe+Ce+xe),ze=new BatchTable(Ve,Oe.getData("INSTANCES_LENGTH"),0,Ce,xe),Ue=Fe+Ce+xe,Pt=new Uint8Array(oe,Ue,he-Ue);let qe=null,Et=null;if(Ie)qe=Pt,Et=Promise.resolve();else{const kt=this.resolveExternalURL(arrayToString(Pt));Et=fetch(kt,this.fetchOptions).then(At=>{if(!At.ok)throw new Error(`I3DMLoaderBase : Failed to load file "${kt}" with status ${At.status} : ${At.statusText}`);return At.arrayBuffer()}).then(At=>{qe=new Uint8Array(At)})}return Et.then(()=>({version:de,featureTable:Oe,batchTable:ze,glbBytes:qe}))}}const tempFwd=new Vector3$1,tempUp=new Vector3$1,tempRight=new Vector3$1,tempPos=new Vector3$1,tempQuat=new Quaternion$1,tempSca=new Vector3$1,tempMat$2=new Matrix4$1;class I3DMLoader extends I3DMLoaderBase{constructor(oe=DefaultLoadingManager,ie){super(),this.manager=oe,this.adjustmentTransform=new Matrix4$1,this.tilesRenderer=ie}resolveExternalURL(oe){return this.manager.resolveURL(super.resolveExternalURL(oe))}parse(oe){return super.parse(oe).then(ie=>{const{featureTable:ue,batchTable:de}=ie,he=ie.glbBytes.slice().buffer;return new Promise((pe,_e)=>{const Ce=this.fetchOptions,xe=this.tilesRenderer,Ie=this.manager,$e=Ie.getHandler("path.gltf")||new GLTFLoader$1(Ie);Ce.credentials==="include"&&Ce.mode==="cors"&&$e.setCrossOrigin("use-credentials"),"credentials"in Ce&&$e.setWithCredentials(Ce.credentials==="include"),Ce.headers&&$e.setRequestHeader(Ce.headers);let Ne=this.workingPath;/[\\/]$/.test(Ne)||(Ne+="/");const Oe=this.adjustmentTransform;$e.parse(he,Ne,Fe=>{const Ve=ue.getData("INSTANCES_LENGTH"),ze=ue.getData("POSITION",Ve,"FLOAT","VEC3"),Ue=ue.getData("NORMAL_UP",Ve,"FLOAT","VEC3"),Pt=ue.getData("NORMAL_RIGHT",Ve,"FLOAT","VEC3"),qe=ue.getData("SCALE_NON_UNIFORM",Ve,"FLOAT","VEC3"),Et=ue.getData("SCALE",Ve,"FLOAT","SCALAR"),kt=new Map,At=[];Fe.scene.traverse(bn=>{if(bn.isMesh){const{geometry:vn,material:Tn}=bn;let $n=bn.matrix,wn=Sn=>{Sn.parent&&($n=$n.premultiply(Sn.parent.matrix),wn(Sn.parent))};wn(bn),vn.applyMatrix4($n),Tn.vertexColors=!0;const Cn=new InstancedMesh(vn,Tn,Ve);Cn.position.copy(bn.position),Cn.rotation.copy(bn.rotation),Cn.scale.copy(bn.scale),Cn.orignMaterial=Tn,Cn.pickMaterial=MaterialData.pickMaterial,At.push(Cn),kt.set(bn,Cn)}}),Fe.scene.clear();const Dt=new Vector3$1;kt.forEach((bn,vn)=>{Fe.scene.add(bn)});let Lt=null;de&&de.header&&de.header.extensions&&de.header.extensions["3DTILES_batch_table_hierarchy"]!=null&&(Lt=de.header.extensions["3DTILES_batch_table_hierarchy"].classes);const jt=new InstancedBufferAttribute(new Int32Array(Ve),1),_n=new InstancedBufferAttribute(new Uint8Array(Ve*4).fill(255),4,!0);for(let bn=0;bn<Ve;bn++){tempPos.set(ze[bn*3+0]-Dt.x,ze[bn*3+1]-Dt.y,ze[bn*3+2]-Dt.z),Ue?(tempUp.set(Ue[bn*3+0],Ue[bn*3+1],Ue[bn*3+2]),tempRight.set(Pt[bn*3+0],Pt[bn*3+1],Pt[bn*3+2]),tempFwd.crossVectors(tempRight,tempUp).normalize(),tempMat$2.makeBasis(tempRight,tempUp,tempFwd),tempQuat.setFromRotationMatrix(tempMat$2)):tempQuat.set(0,0,0,1),Et?tempSca.setScalar(Et[bn]):qe?tempSca.set(qe[bn*3+0],qe[bn*3+1],qe[bn*3+2]):tempSca.set(1,1,1),tempMat$2.compose(tempPos,tempQuat,tempSca).multiply(Oe);let vn=new BaseElement(xe.doc);Lt&&Lt[bn]&&(vn.userData=Lt[bn].instances,vn.userData.UniqueId&&(vn.key=vn.userData.UniqueId[0]),vn.userData.name&&(vn.name=vn.userData.name[0])),jt.setX(bn,vn.Id);for(let Tn=0,$n=At.length;Tn<$n;Tn++){const wn=At[Tn];wn.setMatrixAt(bn,tempMat$2);let Cn=new InstanceData(wn,bn);vn.addMeshData(Cn)}}for(let bn=0,vn=At.length;bn<vn;bn++){const Tn=At[bn];Tn.geometry.setAttribute("elementID",jt),Tn.geometry.setAttribute("color",_n)}pe(Fe)},_e)})})}}class CMPTLoaderBase extends LoaderBase{parse(oe){const ie=new DataView(oe),ue=readMagicBytes(ie),de=ie.getUint32(4,!0),he=ie.getUint32(8,!0),pe=ie.getUint32(12,!0),_e=[];let Ce=16;for(let xe=0;xe<pe;xe++){const Ie=new DataView(oe,Ce,12),$e=readMagicBytes(Ie),Ne=Ie.getUint32(4,!0),Oe=Ie.getUint32(8,!0),Fe=new Uint8Array(oe,Ce,Oe);_e.push({type:$e,buffer:Fe,version:Ne}),Ce+=Oe}return{version:de,tiles:_e}}}class CMPTLoader extends CMPTLoaderBase{constructor(oe=DefaultLoadingManager,ie){super(),this.manager=oe,this.adjustmentTransform=new Matrix4$1,this.tilesRenderer=ie}parse(oe){const ie=super.parse(oe),ue=this.manager,de=this.adjustmentTransform,he=[];for(const pe in ie.tiles){const{type:_e,buffer:Ce}=ie.tiles[pe];switch(_e){case"b3dm":{const xe=Ce.slice(),Ie=new B3DMLoader(ue,this.tilesRenderer);Ie.workingPath=this.workingPath,Ie.fetchOptions=this.fetchOptions,Ie.adjustmentTransform.copy(de);const $e=Ie.parse(xe.buffer);he.push($e);break}case"pnts":{const xe=Ce.slice(),Ie=new PNTSLoader(ue);Ie.workingPath=this.workingPath,Ie.fetchOptions=this.fetchOptions;const $e=Ie.parse(xe.buffer);he.push($e);break}case"i3dm":{const xe=Ce.slice(),Ie=new I3DMLoader(ue,this.tilesRenderer);Ie.workingPath=this.workingPath,Ie.fetchOptions=this.fetchOptions,Ie.adjustmentTransform.copy(de);const $e=Ie.parse(xe.buffer);he.push($e);break}}}return Promise.all(he).then(pe=>{const _e=new Group;return pe.forEach(Ce=>{_e.add(Ce.scene)}),{tiles:pe,scene:_e}})}}class GLTFCesiumRTCExtension{constructor(){this.name="CESIUM_RTC"}afterRoot(oe){if(oe.parser.json.extensions&&oe.parser.json.extensions.CESIUM_RTC){const{center:ie}=oe.parser.json.extensions.CESIUM_RTC;ie&&(oe.scene.position.x+=ie[0],oe.scene.position.y+=ie[1],oe.scene.position.z+=ie[2])}}}class GLTFExtensionLoader extends LoaderBase{constructor(oe=DefaultLoadingManager){super(),this.manager=oe}parse(oe){return new Promise((ie,ue)=>{const de=this.manager,he=this.fetchOptions;let pe=de.getHandler("path.gltf")||de.getHandler("path.glb");pe||(pe=new GLTFLoader$1(de),pe.register(()=>new GLTFCesiumRTCExtension),he.credentials==="include"&&he.mode==="cors"&&pe.setCrossOrigin("use-credentials"),"credentials"in he&&pe.setWithCredentials(he.credentials==="include"),he.headers&&pe.setRequestHeader(he.headers));let _e=pe.resourcePath||pe.path||this.workingPath;!/[\\/]$/.test(_e)&&_e.length&&(_e+="/"),pe.parse(oe,_e,Ce=>{ie(Ce)},ue)})}}const tempMat$1=new Matrix4$1;class TilesGroup extends Group{constructor(oe){super(),this.name="TilesRenderer.TilesGroup",this.tilesRenderer=oe}raycast(oe,ie){this.tilesRenderer.optimizeRaycast&&this.tilesRenderer.raycast(oe,ie)}updateMatrixWorld(oe){if(this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldNeedsUpdate||oe){this.parent===null?tempMat$1.copy(this.matrix):tempMat$1.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1;const ie=tempMat$1.elements,ue=this.matrixWorld.elements;let de=!1;for(let he=0;he<16;he++){const pe=ie[he],_e=ue[he];if(Math.abs(pe-_e)>Number.EPSILON){de=!0;break}}if(de){this.matrixWorld.copy(tempMat$1);const he=this.children;for(let pe=0,_e=he.length;pe<_e;pe++)he[pe].updateMatrixWorld()}}}}function swapFrame(le){const{x:oe,y:ie,z:ue}=le;le.x=ue,le.y=oe,le.z=ie}function latitudeToSphericalPhi(le){return-le+Math.PI/2}const _spherical=new Spherical,_norm=new Vector3$1,_vec$1=new Vector3$1;let Ellipsoid$1=class{constructor(le=1,oe=1,ie=1){this.radius=new Vector3$1(le,oe,ie)}getCartographicToPosition(le,oe,ie,ue){const de=this.radius;_spherical.set(1,latitudeToSphericalPhi(le),oe),_norm.setFromSpherical(_spherical).normalize(),swapFrame(_norm),_vec$1.copy(_norm),_vec$1.x*=de.x**2,_vec$1.y*=de.y**2,_vec$1.z*=de.z**2;const he=Math.sqrt(_norm.dot(_vec$1));return _vec$1.divideScalar(he),ue.copy(_vec$1).addScaledVector(_norm,ie)}getCartographicToNormal(le,oe,ie){return _spherical.set(1,-le+Math.PI/2,oe),ie.setFromSpherical(_spherical).normalize(),swapFrame(ie),ie}getPositionToNormal(le,oe){const ie=this.radius;return oe.copy(le),oe.x/=ie.x**2,oe.y/=ie.y**2,oe.z/=ie.z**2,oe.normalize(),oe}};const PI$1=Math.PI,HALF_PI=PI$1/2,_orthoX=new Vector3$1,_orthoY=new Vector3$1,_orthoZ=new Vector3$1,_invMatrix=new Matrix4$1;let _poolIndex=0;const _pointsPool=[];function getVector(le=!1){return le?(_pointsPool[_poolIndex]||(_pointsPool[_poolIndex]=new Vector3$1),_poolIndex++,_pointsPool[_poolIndex-1]):new Vector3$1}function resetPool(){_poolIndex=0}class EllipsoidRegion extends Ellipsoid$1{constructor(oe,ie,ue,de=-HALF_PI,he=HALF_PI,pe=0,_e=2*PI$1,Ce=0,xe=0){super(oe,ie,ue),this.latStart=de,this.latEnd=he,this.lonStart=pe,this.lonEnd=_e,this.heightStart=Ce,this.heightEnd=xe}_getPoints(oe=!1){const{latStart:ie,latEnd:ue,lonStart:de,lonEnd:he,heightStart:pe,heightEnd:_e}=this,Ce=MathUtils$1.mapLinear(.5,0,1,ie,ue),xe=MathUtils$1.mapLinear(.5,0,1,de,he),Ie=Math.floor(de/HALF_PI)*HALF_PI,$e=[[-PI$1/2,0],[PI$1/2,0],[0,Ie],[0,Ie+PI$1/2],[0,Ie+PI$1],[0,Ie+3*PI$1/2],[ie,he],[ue,he],[ie,de],[ue,de],[0,de],[0,he],[Ce,xe],[ie,xe],[ue,xe],[Ce,de],[Ce,he]],Ne=[],Oe=$e.length;for(let Fe=0;Fe<=1;Fe++){const Ve=MathUtils$1.mapLinear(Fe,0,1,pe,_e);for(let ze=0,Ue=Oe;ze<Ue;ze++){const[Pt,qe]=$e[ze];if(Pt>=ie&&Pt<=ue&&qe>=de&&qe<=he){const Et=getVector(oe);Ne.push(Et),this.getCartographicToPosition(Pt,qe,Ve,Et)}}}return Ne}getBoundingBox(oe,ie){resetPool();const{latStart:ue,latEnd:de,lonStart:he,lonEnd:pe}=this;if(de-ue<PI$1/2){const Ce=MathUtils$1.mapLinear(.5,0,1,ue,de),xe=MathUtils$1.mapLinear(.5,0,1,he,pe);this.getCartographicToNormal(Ce,xe,_orthoZ),_orthoY.set(0,0,1),_orthoX.crossVectors(_orthoY,_orthoZ),_orthoY.crossVectors(_orthoX,_orthoZ),ie.makeBasis(_orthoX,_orthoY,_orthoZ)}else _orthoX.set(1,0,0),_orthoY.set(0,1,0),_orthoZ.set(0,0,1),ie.makeBasis(_orthoX,_orthoY,_orthoZ);_invMatrix.copy(ie).invert();const _e=this._getPoints(!0);for(let Ce=0,xe=_e.length;Ce<xe;Ce++)_e[Ce].applyMatrix4(_invMatrix);oe.makeEmpty(),oe.setFromPoints(_e)}getBoundingSphere(oe,ie){resetPool();const ue=this._getPoints(!0);oe.makeEmpty(),oe.setFromPoints(ue,ie)}}const _sphere$1=new Sphere,_mat=new Matrix4$1,_vec=new Vector3$1,_vec2=new Vector3$1,_ray=new Ray,_hitArray=[];function distanceSort(le,oe){return le.distance-oe.distance}function intersectTileScene(le,oe,ie){le.traverse(ue=>{Object.getPrototypeOf(ue).raycast.call(ue,oe,ie)})}function raycastTraverseFirstHit(le,oe,ie,ue){if(ie.has(le))if(intersectTileScene(le.cached.scene,ue,_hitArray),_hitArray.length>0){_hitArray.length>1&&_hitArray.sort(distanceSort);const Ce=_hitArray[0];return _hitArray.length=0,Ce}else return null;const de=[],he=le.children;for(let Ce=0,xe=he.length;Ce<xe;Ce++){const Ie=he[Ce],$e=Ie.cached,Ne=oe.matrixWorld;_mat.copy(Ne);const Oe=$e.sphere;if(Oe&&(_sphere$1.copy(Oe),_sphere$1.applyMatrix4(_mat),!ue.ray.intersectsSphere(_sphere$1)))continue;const Fe=$e.box,Ve=$e.boxTransform;if(Fe)if(_mat.multiply(Ve).invert(),_ray.copy(ue.ray),_ray.applyMatrix4(_mat),_ray.intersectBox(Fe,_vec)){_vec2.setFromMatrixScale(_mat);const ze=_vec2.x;Math.abs(Math.max(_vec2.x-_vec2.y,_vec2.x-_vec2.z))>1e-6;const Ue={distance:1/0,tile:null};de.push(Ue),Fe.containsPoint(_ray.origin)?Ue.distance=0:Ue.distance=_vec.distanceToSquared(_ray.origin)*ze*ze,Ue.tile=Ie}else continue}de.sort(distanceSort);let pe=1/0,_e=null;for(let Ce=0,xe=de.length;Ce<xe;Ce++){const Ie=de[Ce];if(Ie.distance>pe)break;{const $e=Ie.tile,Ne=$e.cached.scene;let Oe=null;if(ie.has($e)?(intersectTileScene(Ne,ue,_hitArray),_hitArray.length>0&&(_hitArray.length>1&&_hitArray.sort(distanceSort),Oe=_hitArray[0])):Oe=raycastTraverseFirstHit($e,oe,ie,ue),Oe){const Fe=Oe.distance*Oe.distance;Fe<pe&&(pe=Fe,_e=Oe),_hitArray.length=0}}}return _e}function raycastTraverse(le,oe,ie,ue,de){const he=le.cached,pe=oe.matrixWorld;_mat.copy(pe);const _e=he.sphere;if(_e&&(_sphere$1.copy(_e),_sphere$1.applyMatrix4(_mat),!ue.ray.intersectsSphere(_sphere$1)))return;const Ce=he.box,xe=he.boxTransform;if(Ce&&(_mat.multiply(xe).invert(),_ray.copy(ue.ray).applyMatrix4(_mat),!_ray.intersectsBox(Ce)))return;const Ie=he.scene;if(ie.has(le)){intersectTileScene(Ie,ue,de);return}const $e=le.children;for(let Ne=0,Oe=$e.length;Ne<Oe;Ne++)raycastTraverse($e[Ne],oe,ie,ue,de)}const INITIAL_FRUSTUM_CULLED=Symbol("INITIAL_FRUSTUM_CULLED"),tempMat=new Matrix4$1,tempMat2=new Matrix4$1,tempVector=new Vector3$1,vecX=new Vector3$1,vecY=new Vector3$1,vecZ=new Vector3$1,X_AXIS=new Vector3$1(1,0,0),Y_AXIS=new Vector3$1(0,1,0);function updateFrustumCulled(le,oe){le.traverse(ie=>{ie.frustumCulled=ie[INITIAL_FRUSTUM_CULLED]&&oe})}class TilesRenderer extends TilesRendererBase{get autoDisableRendererCulling(){return this._autoDisableRendererCulling}set autoDisableRendererCulling(oe){this._autoDisableRendererCulling!==oe&&(super._autoDisableRendererCulling=oe,this.forEachLoadedModel(ie=>{updateFrustumCulled(ie,!oe)}))}constructor(...oe){super(...oe),this.group=new TilesGroup(this),this.cameras=[],this.cameraMap=new Map,this.cameraInfo=[],this.activeTiles=new Set,this.visibleTiles=new Set,this.notVisibleTiles=new Set,this._autoDisableRendererCulling=!0,this.optimizeRaycast=!0,this.onLoadTileSet=null,this.onLoadModel=null,this.onDisposeModel=null,this.onTileVisibilityChange=null;const ie=new LoadingManager;ie.setURLModifier(de=>this.preprocessURL?this.preprocessURL(de):de),this.manager=ie;const ue=this;this._overridenRaycast=function(de,he){ue.optimizeRaycast||Object.getPrototypeOf(this).raycast.call(this,de,he)}}getBounds(oe){if(!this.root)return!1;const ie=this.root.cached,ue=ie.box,de=ie.boxTransform;return ue?(oe.copy(ue),oe.applyMatrix4(de),!0):!1}getOrientedBounds(oe,ie){if(!this.root)return!1;const ue=this.root.cached,de=ue.box,he=ue.boxTransform;return de?(oe.copy(de),ie.copy(he),!0):!1}getBoundingSphere(oe){if(!this.root)return!1;const ie=this.root.cached.sphere;return ie?(oe.copy(ie),!0):!1}forEachLoadedModel(oe){this.traverse(ie=>{const ue=ie.cached.scene;ue&&oe(ue,ie)})}raycast(oe,ie){if(this.root)if(oe.firstHitOnly){const ue=raycastTraverseFirstHit(this.root,this.group,this.activeTiles,oe);ue&&ie.push(ue)}else raycastTraverse(this.root,this.group,this.activeTiles,oe,ie)}hasCamera(oe){return this.cameraMap.has(oe)}setCamera(oe){const ie=this.cameras,ue=this.cameraMap;return ue.has(oe)?!1:(ue.set(oe,new Vector2$1),ie.push(oe),!0)}setResolution(oe,ie,ue){const de=this.cameraMap;return de.has(oe)?(ie instanceof Vector2$1?de.get(oe).copy(ie):de.get(oe).set(ie,ue),!0):!1}setResolutionFromRenderer(oe,ie){const ue=this.cameraMap;if(!ue.has(oe))return!1;const de=ue.get(oe);return ie.getSize(de),de.multiplyScalar(ie.getPixelRatio()),!0}deleteCamera(oe){const ie=this.cameras,ue=this.cameraMap;if(ue.has(oe)){const de=ie.indexOf(oe);return ie.splice(de,1),ue.delete(oe),!0}return!1}fetchTileSet(oe,...ie){const ue=super.fetchTileSet(oe,...ie);return ue.then(de=>{this.onLoadTileSet&&Promise.resolve().then(()=>{this.onLoadTileSet(de,oe)})}),ue}update(){const oe=this.group,ie=this.cameras,ue=this.cameraMap,de=this.cameraInfo;if(ie.length===0)return;for(;de.length>ie.length;)de.pop();for(;de.length<ie.length;)de.push({frustum:new Frustum,isOrthographic:!1,sseDenominator:-1,position:new Vector3$1,invScale:-1,pixelSize:0});tempMat2.copy(oe.matrixWorld).invert(),tempVector.setFromMatrixScale(tempMat2);const he=tempVector.x;Math.abs(Math.max(tempVector.x-tempVector.y,tempVector.x-tempVector.z))>1e-6;for(let pe=0,_e=de.length;pe<_e;pe++){const Ce=ie[pe],xe=de[pe],Ie=xe.frustum,$e=xe.position,Ne=ue.get(Ce);Ne.width===0||Ne.height;const Oe=Ce.projectionMatrix.elements;if(xe.isOrthographic=Oe[15]===1,xe.isOrthographic){const Fe=2/Oe[0],Ve=2/Oe[5];xe.pixelSize=Math.max(Ve/Ne.height,Fe/Ne.width)}else xe.sseDenominator=2/Oe[5]/Ne.height;xe.invScale=he,tempMat.copy(oe.matrixWorld),tempMat.premultiply(Ce.matrixWorldInverse),tempMat.premultiply(Ce.projectionMatrix),Ie.setFromProjectionMatrix(tempMat),$e.set(0,0,0),$e.applyMatrix4(Ce.matrixWorld),$e.applyMatrix4(tempMat2)}super.update()}preprocessNode(oe,ie,ue){oe.parentTile=ie,oe.tileSetDir=ue,super.preprocessNode(oe,ie,ue);const de=new Matrix4$1;ie&&de.premultiply(ie.cached.transform);const he=new Matrix4$1().copy(de).invert();let pe=null,_e=null,Ce=null;if("box"in oe.boundingVolume){const $e=oe.boundingVolume.box;pe=new Box3,_e=new Matrix4$1,Ce=new Matrix4$1,vecX.set($e[3],$e[4],$e[5]),vecY.set($e[6],$e[7],$e[8]),vecZ.set($e[9],$e[10],$e[11]);const Ne=vecX.length(),Oe=vecY.length(),Fe=vecZ.length();vecX.normalize(),vecY.normalize(),vecZ.normalize(),Ne===0&&vecX.crossVectors(vecY,vecZ),Oe===0&&vecY.crossVectors(vecX,vecZ),Fe===0&&vecZ.crossVectors(vecX,vecY),_e.set(vecX.x,vecY.x,vecZ.x,$e[0],vecX.y,vecY.y,vecZ.y,$e[1],vecX.z,vecY.z,vecZ.z,$e[2],0,0,0,1),_e.premultiply(de),Ce.copy(_e).invert(),pe.min.set(-Ne,-Oe,-Fe),pe.max.set(Ne,Oe,Fe)}let xe=null;if("sphere"in oe.boundingVolume){const $e=oe.boundingVolume.sphere;xe=new Sphere,xe.center.set($e[0],$e[1],$e[2]),xe.radius=$e[3],xe.applyMatrix4(de)}else if("box"in oe.boundingVolume){const $e=oe.boundingVolume.box;xe=new Sphere,pe.getBoundingSphere(xe),xe.center.set($e[0],$e[1],$e[2]),xe.applyMatrix4(de)}let Ie=null;if("region"in oe.boundingVolume){const $e=oe.boundingVolume.region,[Ne,Oe,Fe,Ve,ze,Ue]=$e;Ie=new EllipsoidRegion(WGS84_RADIUS,WGS84_RADIUS,WGS84_HEIGHT,Oe,Ve,Ne,Fe,ze,Ue),xe===null&&(xe=new Sphere,Ie.getBoundingSphere(xe)),pe===null&&(pe=new Box3,_e=new Matrix4$1,Ce=new Matrix4$1,Ie.getBoundingBox(pe,_e),Ce.copy(_e).invert())}oe.cached={loadIndex:0,transform:de,transformInverse:he,active:!1,inFrustum:[],box:pe,boxTransform:_e,boxTransformInverse:Ce,sphere:xe,region:Ie,scene:null,geometry:null,material:null}}parseTile(oe,ie,ue){ie._loadIndex=ie._loadIndex||0,ie._loadIndex++;const de=ie.content.uri.split(/[\\/]/g);de.pop();const he=de.join("/"),pe=this.fetchOptions,_e=this.manager,Ce=ie._loadIndex;let xe=null;const Ie=this.rootTileSet.asset&&this.rootTileSet.asset.gltfUpAxis||"y",$e=ie.cached,Ne=$e.transform;switch(Ie.toLowerCase()){case"x":tempMat.makeRotationAxis(Y_AXIS,-Math.PI/2);break;case"y":tempMat.makeRotationAxis(X_AXIS,Math.PI/2);break;case"z":tempMat.identity();break}const Oe=readMagicBytes(oe)||ue;switch(Oe){case"b3dm":{const Fe=new B3DMLoader(_e,this);Fe.workingPath=he,Fe.fetchOptions=pe,Fe.adjustmentTransform.copy(tempMat),xe=Fe.parse(oe).then(Ve=>Ve.scene);break}case"pnts":{const Fe=new PNTSLoader(_e);Fe.workingPath=he,Fe.fetchOptions=pe,xe=Fe.parse(oe).then(Ve=>Ve.scene);break}case"i3dm":{const Fe=new I3DMLoader(_e,this);Fe.workingPath=he,Fe.fetchOptions=pe,Fe.adjustmentTransform.copy(tempMat),xe=Fe.parse(oe).then(Ve=>Ve.scene);break}case"cmpt":{const Fe=new CMPTLoader(_e,this);Fe.workingPath=he,Fe.fetchOptions=pe,Fe.adjustmentTransform.copy(tempMat),xe=Fe.parse(oe).then(Ve=>Ve.scene);break}case"gltf":case"glb":{const Fe=new GLTFExtensionLoader(_e);Fe.workingPath=he,Fe.fetchOptions=pe,xe=Fe.parse(oe).then(Ve=>Ve.scene);break}default:xe=Promise.resolve(null);break}return xe.then(Fe=>{if(oe=null,ie.scene=Fe,ie._loadIndex!==Ce)return;Fe.updateMatrix(),(Oe==="glb"||Oe==="gltf")&&Fe.matrix.multiply(tempMat),Fe.matrix.premultiply(Ne),Fe.matrix.decompose(Fe.position,Fe.quaternion,Fe.scale),Fe.traverse(Pt=>{Pt[INITIAL_FRUSTUM_CULLED]=Pt.frustumCulled}),updateFrustumCulled(Fe,!this.autoDisableRendererCulling),$e.scene=Fe,Fe.traverse(Pt=>{Pt.raycast=this._overridenRaycast});const Ve=[],ze=[],Ue=[];Fe.traverse(Pt=>{if(Pt.geometry&&ze.push(Pt.geometry),Pt.material){const qe=Pt.material;Ve.push(Pt.material);for(const Et in qe){const kt=qe[Et];kt&&kt.isTexture&&Ue.push(kt)}}}),$e.materials=Ve,$e.geometry=ze,$e.textures=Ue,this.onLoadModel&&this.onLoadModel(Fe,ie)})}disposeTile(oe){const ie=oe.cached;if(ie.scene){const ue=ie.materials,de=ie.geometry,he=ie.textures,pe=ie.scene.parent;for(let _e=0,Ce=de.length;_e<Ce;_e++)de[_e].dispose();for(let _e=0,Ce=ue.length;_e<Ce;_e++)ue[_e].dispose();for(let _e=0,Ce=he.length;_e<Ce;_e++)he[_e].dispose();pe&&pe.remove(ie.scene),this.onDisposeModel&&this.onDisposeModel(ie.scene,oe),ie.scene=null,ie.materials=null,ie.textures=null,ie.geometry=null,this.lruCache.remove(oe)}this.activeTiles.delete(oe),this.visibleTiles.delete(oe),this.notVisibleTiles.delete(oe),oe._loadIndex++}setTileVisible(oe,ie){let ue=oe.cached.scene;const de=this.visibleTiles,he=this.group;if(ie)ue?(he.add(ue),de.add(oe),ue.updateMatrixWorld(!0)):this.requestTileContents(oe),this.notVisibleTiles.delete(oe);else if(ue&&(he.remove(ue),de.delete(oe),this.notVisibleTiles.add(oe),performance.memory.usedJSHeapSize>512*1024*1024)){for(var pe of this.notVisibleTiles.values())this.disposeTile(pe),ue=null;this.notVisibleTiles.clear()}this.onTileVisibilityChange&&this.onTileVisibilityChange(ue,oe,ie)}setTileActive(oe,ie){const ue=this.activeTiles;ie?ue.add(oe):ue.delete(oe)}calculateError(oe){const ie=oe.cached,ue=ie.inFrustum,de=this.cameras,he=this.cameraInfo,pe=ie.sphere,_e=ie.box,Ce=ie.boxTransformInverse,xe=ie.transformInverse,Ie=_e&&Ce;let $e=-1/0,Ne=1/0;for(let Oe=0,Fe=de.length;Oe<Fe;Oe++){if(!ue[Oe])continue;const Ve=he[Oe],ze=Ve.invScale;let Ue;if(Ve.isOrthographic){const Pt=Ve.pixelSize;Ue=oe.geometricError/(Pt*ze)}else{tempVector.copy(Ve.position);let Pt;Ie?(tempVector.applyMatrix4(Ce),Pt=_e.distanceToPoint(tempVector)):(tempVector.applyMatrix4(xe),Pt=Math.max(pe.distanceToPoint(tempVector),0));const qe=Pt*ze,Et=Ve.sseDenominator;Ue=oe.geometricError/(qe*Et),Ne=Math.min(Ne,qe)}$e=Math.max($e,Ue)}oe.__distanceFromCamera=Ne,oe.__error=$e}tileInView(oe){const ie=oe.cached,ue=ie.sphere,de=ie.inFrustum;if(ue){const he=this.cameraInfo;let pe=!1;for(let _e=0,Ce=he.length;_e<Ce;_e++)he[_e].frustum.intersectsSphere(ue)?(pe=!0,de[_e]=!0):de[_e]=!1;return pe}return!0}}const qt=class Eo{constructor(oe,ie,ue){ve(this,"Radii"),ve(this,"RadiiSquared"),ve(this,"RadiiToTheFourth"),ve(this,"OneOverRadii"),ve(this,"OneOverRadiiSquared"),ve(this,"MinimumRadius"),ve(this,"MaximumRadius"),ve(this,"CenterToleranceSquared"),ve(this,"SquaredXOverSquaredZ"),this.Radii=new Vector3$1(oe,ie,ue),this.RadiiSquared=new Vector3$1(oe*oe,ie*ie,ue*ue),this.RadiiToTheFourth=new Vector3$1(oe*oe*oe*oe,ie*ie*ie*ie,ue*ue*ue*ue),this.OneOverRadii=new Vector3$1(oe==0?0:1/oe,ie==0?0:1/ie,ue==0?0:1/ue),this.OneOverRadiiSquared=new Vector3$1(oe==0?0:1/(oe*oe),ie==0?0:1/(ie*ie),ue==0?0:1/(ue*ue)),this.MinimumRadius=Math.min(oe,ie,ue),this.MaximumRadius=Math.max(oe,ie,ue),this.CenterToleranceSquared=.1,this.RadiiSquared.z!=0&&(this.SquaredXOverSquaredZ=this.RadiiSquared.x/this.RadiiSquared.z)}GeodeticSurfaceNormal(oe){return oe.clone().multiply(this.OneOverRadiiSquared).normalize()}CartesianToCartographic(oe){let ie=Eo.ScaleToGeodeticSurface(oe,this.OneOverRadii,this.OneOverRadiiSquared,this.CenterToleranceSquared);if(!ie)return ie;let ue=this.GeodeticSurfaceNormal(ie),de=oe.clone().sub(ie),he=Math.atan2(ue.y,ue.x),pe=Math.asin(ue.z),_e=de.clone().dot(oe),Ce=0;_e>0?Ce=1:_e<0&&(Ce=-1);let xe=Ce*de.length();return new Vector3$1(he,pe,xe)}static ScaleToGeodeticSurface(oe,ie,ue,de){let he=oe.x,pe=oe.y,_e=oe.z,Ce=ie.x,xe=ie.y,Ie=ie.z,$e=he*he*Ce*Ce,Ne=pe*pe*xe*xe,Oe=_e*_e*Ie*Ie,Fe=$e+Ne+Oe,Ve=Math.sqrt(1/Fe),ze=oe.clone().multiplyScalar(Ve);if(Fe<de)return Number.isNaN(Ve)?new Vector3$1:ze;let Ue=ue.x,Pt=ue.y,qe=ue.z,Et=new Vector3$1(ze.x*Ue*2,ze.y*Pt*2,ze.z*qe*2),kt=(1-Ve)*oe.length()/(.5*Et.length()),At=0,Dt,Lt,jt,_n;do{kt-=At,Dt=1/(1+kt*Ue),Lt=1/(1+kt*Pt),jt=1/(1+kt*qe);let bn=Dt*Dt,vn=Lt*Lt,Tn=jt*jt,$n=bn*Dt,wn=vn*Lt,Cn=Tn*jt;_n=$e*bn+Ne*vn+Oe*Tn-1;let Sn=-2*($e*$n*Ue+Ne*wn*Pt+Oe*Cn*qe);At=_n/Sn}while(Math.abs(_n)>1e-12);return new Vector3$1(he*Dt,pe*Lt,_e*jt)}};ve(qt,"Wgs84",new qt(6378137,6378137,6356752314245179e-9));let Ellipsoid=qt;class GisUtils{static ECEFtoWGS84(oe,ie,ue){const de=.0033528106647474805,he=2*de-de*de,pe=1e-10;let _e=Math.atan2(ie,oe),Ce=Math.atan2(ue,Math.sqrt(oe*oe+ie*ie)),xe=0,Ie=0;do Ie=Ce,xe=6378137/Math.sqrt(1-he*Math.sin(Ce)**2),Ce=Math.atan2(ue+he*xe*Math.sin(Ce),Math.sqrt(oe**2+ie**2));while(Math.abs(Ce-Ie)>pe);const $e=Math.sqrt(oe**2+ie**2)/Math.cos(Ce)-xe,Ne=Ce*180/Math.PI,Oe=_e*180/Math.PI;return{latitude:Ne,longitude:Oe,alt:$e}}static EastNorthUpToFixedFrame(oe,ie=Ellipsoid.Wgs84){var ue="east",de="north";return this.LocalFrameToFixedFrame(oe,ie,ue,de)}static LocalFrameToFixedFrame(oe,ie,ue,de){var he=this.VectorProductLocalFrame.get(ue).get(de);let pe=null,_e=null,Ce=null;if(Math.abs(oe.x)<1e-14&&Math.abs(oe.y)<1e-14){var xe=0;if(oe.z>0?xe=1:oe.z<0&&(xe=-1),!this.DegeneratePositionLocalFrame.has(ue)||!this.DegeneratePositionLocalFrame.has(de))return;pe=this.DegeneratePositionLocalFrame.get(ue),ue!="east"&&ue!="west"&&(pe=pe.clone().multiplyScalar(xe)),_e=this.DegeneratePositionLocalFrame.get(de),de!="east"&&de!="west"&&(_e=_e.clone().multiplyScalar(xe)),Ce=this.DegeneratePositionLocalFrame.get(he),he!="east"&&he!="west"&&(Ce=Ce.clone().multiplyScalar(xe))}else ie==null&&(ie=Ellipsoid.Wgs84),this.ScratchCalculateCartesian.up=ie.GeodeticSurfaceNormal(oe),this.ScratchCalculateCartesian.east=new Vector3$1(-oe.y,oe.x,0).normalize(),this.ScratchCalculateCartesian.north=this.ScratchCalculateCartesian.up.clone().cross(this.ScratchCalculateCartesian.east),this.ScratchCalculateCartesian.down=this.ScratchCalculateCartesian.up.clone().multiplyScalar(-1),this.ScratchCalculateCartesian.west=this.ScratchCalculateCartesian.east.clone().multiplyScalar(-1),this.ScratchCalculateCartesian.south=this.ScratchCalculateCartesian.north.clone().multiplyScalar(-1),pe=this.ScratchCalculateCartesian[ue],_e=this.ScratchCalculateCartesian[de],Ce=this.ScratchCalculateCartesian[he];return new Matrix4$1(pe.x,_e.x,Ce.x,oe.x,pe.y,_e.y,Ce.y,oe.y,pe.z,_e.z,Ce.z,oe.z,0,0,0,1)}static get VectorProductLocalFrame(){if(!this._VectorProductLocalFrame){this._VectorProductLocalFrame=new Map;let oe=new Map;oe.set("south","east"),oe.set("north","west"),oe.set("west","south"),oe.set("east","north"),this._VectorProductLocalFrame.set("up",oe);let ie=new Map;ie.set("south","west"),ie.set("north","east"),ie.set("west","north"),ie.set("east","south"),this._VectorProductLocalFrame.set("down",ie);let ue=new Map;ue.set("up","west"),ue.set("down","east"),ue.set("west","down"),ue.set("east","up"),this._VectorProductLocalFrame.set("south",ue);let de=new Map;de.set("up","east"),de.set("down","west"),de.set("west","up"),de.set("east","down"),this._VectorProductLocalFrame.set("north",de);let he=new Map;he.set("up","north"),he.set("down","south"),he.set("north","down"),he.set("south","up"),this._VectorProductLocalFrame.set("west",he);let pe=new Map;pe.set("up","south"),pe.set("down","north"),pe.set("north","up"),pe.set("south","down"),this._VectorProductLocalFrame.set("east",pe)}return this._VectorProductLocalFrame}static get DegeneratePositionLocalFrame(){return this._DegeneratePositionLocalFrame||(this._DegeneratePositionLocalFrame=new Map,this._DegeneratePositionLocalFrame.set("north",new Vector3$1(-1,0,0)),this._DegeneratePositionLocalFrame.set("east",new Vector3$1(0,1,0)),this._DegeneratePositionLocalFrame.set("up",new Vector3$1(0,0,1)),this._DegeneratePositionLocalFrame.set("south",new Vector3$1(1,0,0)),this._DegeneratePositionLocalFrame.set("west",new Vector3$1(0,-1,0)),this._DegeneratePositionLocalFrame.set("down",new Vector3$1(0,0,-1))),this._DegeneratePositionLocalFrame}static get ScratchCalculateCartesian(){return this._ScratchCalculateCartesian||(this._ScratchCalculateCartesian=new Map,this._ScratchCalculateCartesian.set("north",new Vector3$1),this._ScratchCalculateCartesian.set("east",new Vector3$1),this._ScratchCalculateCartesian.set("up",new Vector3$1),this._ScratchCalculateCartesian.set("south",new Vector3$1),this._ScratchCalculateCartesian.set("west",new Vector3$1),this._ScratchCalculateCartesian.set("down",new Vector3$1)),this._ScratchCalculateCartesian}static inverseMatrix4(oe){let ie=oe.elements;var ue=ie[0],de=ie[4],he=ie[8],pe=ie[12],_e=ie[1],Ce=ie[5],xe=ie[9],Ie=ie[13],$e=ie[2],Ne=ie[6],Oe=ie[10],Fe=ie[14],Ve=ie[3],ze=ie[7],Ue=ie[11],Pt=ie[15],qe=Oe*Pt,Et=Fe*Ue,kt=Ne*Pt,At=Fe*ze,Dt=Ne*Ue,Lt=Oe*ze,jt=$e*Pt,_n=Fe*Ve,bn=$e*Ue,vn=Oe*Ve,Tn=$e*ze,$n=Ne*Ve,wn=qe*Ce+At*xe+Dt*Ie-(Et*Ce+kt*xe+Lt*Ie),Cn=Et*_e+jt*xe+vn*Ie-(qe*_e+_n*xe+bn*Ie),Sn=kt*_e+_n*Ce+Tn*Ie-(At*_e+jt*Ce+$n*Ie),In=Lt*_e+bn*Ce+$n*xe-(Dt*_e+vn*Ce+Tn*xe),En=Et*de+kt*he+Lt*pe-(qe*de+At*he+Dt*pe),xn=qe*ue+_n*he+bn*pe-(Et*ue+jt*he+vn*pe),kn=At*ue+jt*de+$n*pe-(kt*ue+_n*de+Tn*pe),On=Dt*ue+vn*de+Tn*he-(Lt*ue+bn*de+$n*he);qe=he*Ie,Et=pe*xe,kt=de*Ie,At=pe*Ce,Dt=de*xe,Lt=he*Ce,jt=ue*Ie,_n=pe*_e,bn=ue*xe,vn=he*_e,Tn=ue*Ce,$n=de*_e;var Mn=qe*ze+At*Ue+Dt*Pt-(Et*ze+kt*Ue+Lt*Pt),Un=Et*Ve+jt*Ue+vn*Pt-(qe*Ve+_n*Ue+bn*Pt),zn=kt*Ve+_n*ze+Tn*Pt-(At*Ve+jt*ze+$n*Pt),Hn=Lt*Ve+bn*ze+$n*Ue-(Dt*Ve+vn*ze+Tn*Ue),Rn=kt*Oe+Lt*Fe+Et*Ne-(Dt*Fe+qe*Ne+At*Oe),Jn=bn*Fe+qe*$e+_n*Oe-(jt*Oe+vn*Fe+Et*$e),Qn=jt*Ne+$n*Fe+At*$e-(Tn*Fe+kt*$e+_n*Ne),_r=Tn*Oe+Dt*$e+vn*Ne-(bn*Ne+$n*Oe+Lt*$e),Zn=ue*wn+de*Cn+he*Sn+pe*In;let Gn=new Matrix4$1,Nn=Gn.elements;return Zn=1/Zn,Nn[0]=wn*Zn,Nn[1]=Cn*Zn,Nn[2]=Sn*Zn,Nn[3]=In*Zn,Nn[4]=En*Zn,Nn[5]=xn*Zn,Nn[6]=kn*Zn,Nn[7]=On*Zn,Nn[8]=Mn*Zn,Nn[9]=Un*Zn,Nn[10]=zn*Zn,Nn[11]=Hn*Zn,Nn[12]=Rn*Zn,Nn[13]=Jn*Zn,Nn[14]=Qn*Zn,Nn[15]=_r*Zn,Gn}}ve(GisUtils,"_VectorProductLocalFrame"),ve(GisUtils,"_DegeneratePositionLocalFrame"),ve(GisUtils,"_ScratchCalculateCartesian");const BD_FACTOR=3.141592653589793*3e3/180,PI=3.141592653589793,RADIUS=6378245,EE=.006693421622965943;class CoordTransfroms{static BD09ToGCJ02(oe,ie){const ue=oe-.0065,de=ie-.006,he=Math.sqrt(ue*ue+de*de)-2e-5*Math.sin(de*BD_FACTOR),pe=Math.atan2(de,ue)-3e-6*Math.cos(ue*BD_FACTOR),_e=he*Math.cos(pe),Ce=he*Math.sin(pe);return{lng:_e,lat:Ce}}static GCJ02ToBD09(oe,ie){const ue=Math.sqrt(oe*oe+ie*ie)+2e-5*Math.sin(ie*BD_FACTOR),de=Math.atan2(ie,oe)+3e-6*Math.cos(oe*BD_FACTOR),he=ue*Math.cos(de)+.0065,pe=ue*Math.sin(de)+.006;return{lng:he,lat:pe}}static WGS84ToGCJ02(oe,ie){if(this.out_of_china(oe,ie))return{lng:oe,lat:ie};{let ue=this.delta(oe,ie);return{lng:oe+ue[0],lat:ie+ue[1]}}}static GCJ02ToWGS84(oe,ie){if(this.out_of_china(oe,ie))return{lng:oe,lat:ie};{let ue=this.delta(oe,ie),de=oe+ue[0],he=ie+ue[1];return{lng:oe*2-de,lat:ie*2-he}}}static delta(oe,ie){let ue=this.transformLng(oe-105,ie-35),de=this.transformLat(oe-105,ie-35);const he=ie/180*PI;let pe=Math.sin(he);pe=1-EE*pe*pe;const _e=Math.sqrt(pe);return ue=ue*180/(RADIUS/_e*Math.cos(he)*PI),de=de*180/(RADIUS*(1-EE)/(pe*_e)*PI),[ue,de]}static transformLng(oe,ie){let ue=300+oe+2*ie+.1*oe*oe+.1*oe*ie+.1*Math.sqrt(Math.abs(oe));return ue+=(20*Math.sin(6*oe*PI)+20*Math.sin(2*oe*PI))*2/3,ue+=(20*Math.sin(oe*PI)+40*Math.sin(oe/3*PI))*2/3,ue+=(150*Math.sin(oe/12*PI)+300*Math.sin(oe/30*PI))*2/3,ue}static transformLat(oe,ie){let ue=-100+2*oe+3*ie+.2*ie*ie+.1*oe*ie+.2*Math.sqrt(Math.abs(oe));return ue+=(20*Math.sin(6*oe*PI)+20*Math.sin(2*oe*PI))*2/3,ue+=(20*Math.sin(ie*PI)+40*Math.sin(ie/3*PI))*2/3,ue+=(160*Math.sin(ie/12*PI)+320*Math.sin(ie*PI/30))*2/3,ue}static out_of_china(oe,ie){return!(oe>73.66&&oe<135.05&&ie>3.86&&ie<53.55)}}class GisData{constructor(){ve(this,"latitude",39.9072),ve(this,"longitude",116.3914),ve(this,"height",5),ve(this,"rotation",0)}}var $fid=0;function bindCaller(le,oe){if(oe==null)return null;oe.__id__==null&&(oe.__id__=$fid++);let ie;return le.hx__closures__==null?le.hx__closures__={}:ie=le.hx__closures__[oe.__id__],ie==null&&(ie=oe.bind(le),ie.scope=le,ie.method=oe,le.hx__closures__[oe.__id__]=ie),ie}class TilesLoaderPlugin extends GLTFLoaderPlugin{load(oe,ie){return new Promise((ue,de)=>{const he=new TilesRenderer(oe.url);he.lruCache.maxSize=1e4,he.lruCache.minSize=9e3,he.doc=new ModelDocument(this.app),oe.name&&(he.doc.name=oe.name),this.app.view.root.remove(he.doc.rootObject),he.doc.rootObject=he.group,this.app.view.root.add(he.doc.rootObject),he.manager.addHandler(/\.gltf$/,TilesLoaderPlugin.getGltfloader(oe.dcoderPath)),he.setCamera(this.app.view.camera),he.setResolutionFromRenderer(this.app.view.camera,this.app.view.renderer),this.app.view.alwaysRender=!0;let pe=-1;he.onLoadModel=(_e,Ce)=>{this.app.view.alwaysRender=!1,this.app.view.enableRender(),ie&&(pe==-1&&(pe=he.parseQueue.items.length+1),ie(new ProgressEvent("load",{loaded:he.parseQueue.items.length,total:pe}))),he.parseQueue.items.length==0&&(Object3DUtils.setRevitModelTree(he.doc),ue(he.doc))},this.app.view.on("onBeforeRender",bindCaller(he,he.update)),he.doc.on("onDispose",()=>{this.app.view.off("onBeforeRender",bindCaller(he,he.update))}),he.onLoadTileSet=_e=>{const Ce=new Box3;he.getBounds(Ce),he.doc.boundingBox=Ce.clone();const xe=_e.root.transform;if(xe){const Ie=new GisData;he.doc.gisData=new GisData,he.group.matrix=new Matrix4$1;const $e=GisUtils.EastNorthUpToFixedFrame(new Vector3$1(xe[12],xe[13],xe[14])).clone().invert(),Ne=new Matrix4$1;Ne.set(xe[0],xe[4],xe[8],xe[12],xe[1],xe[5],xe[9],xe[13],xe[2],xe[6],xe[10],xe[14],xe[3],xe[7],xe[11],1);const Oe=$e.multiply(Ne);he.group.matrix.multiply(Oe);const Fe=GisUtils.ECEFtoWGS84(xe[12],xe[13],xe[14]),Ve=CoordTransfroms.WGS84ToGCJ02(Fe.longitude,Fe.latitude);Fe.latitude=Ve.lat,Fe.longitude=Ve.lng,Ie.latitude=Fe.latitude,Ie.longitude=Fe.longitude,Ie.height=Fe.alt;const ze=UnitsUtils.datumsToSpherical(Fe.latitude,Fe.longitude),Ue=new Matrix4$1(1,0,0,ze.x,0,0,1,Fe.alt,0,-1,0,-ze.y,0,0,0,1);he.group.matrix.premultiply(Ue)}he.group.matrixAutoUpdate=!1,Ce.applyMatrix4(he.group.matrix),this.app.view.setHome(Ce,!1,Math.PI/4,2*Math.PI),he.doc.boundingBox=null,he.update()},he.group.modelViewMatrix.elements[12]=0,he.group.modelViewMatrix.elements[13]=0,he.group.modelViewMatrix.elements[14]=0,this.app.view.enableRender()})}}var ModelFormat=(le=>(le[le.DXF=0]="DXF",le[le.GLTF=1]="GLTF",le[le.TILES=2]="TILES",le[le.IFC=3]="IFC",le[le.RHION=4]="RHION",le[le.FBX=5]="FBX",le))(ModelFormat||{});const MOUSE_BUTTON={LEFT:1,RIGHT:2,MIDDLE:4},ACTION=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768});function extractClientCoordFromEvent(le,oe){oe.set(0,0),le.forEach(ie=>{oe.x+=ie.clientX,oe.y+=ie.clientY}),oe.x/=le.length,oe.y/=le.length}const EPSILON=1e-5,DEG2RAD=Math.PI/180;function clamp$1(le,oe,ie){return Math.max(oe,Math.min(ie,le))}function approxZero(le,oe=EPSILON){return Math.abs(le)<oe}function approxEquals(le,oe,ie=EPSILON){return approxZero(le-oe,ie)}function roundToStep(le,oe){return Math.round(le/oe)*oe}function infinityToMaxNumber(le){return isFinite(le)?le:le<0?-Number.MAX_VALUE:Number.MAX_VALUE}function maxNumberToInfinity(le){return Math.abs(le)<Number.MAX_VALUE?le:le*(1/0)}function smoothDamp(le,oe,ie,ue,de=1/0,he){ue=Math.max(1e-4,ue);const pe=2/ue,_e=pe*he,Ce=1/(1+_e+.48*_e*_e+.235*_e*_e*_e);let xe=le-oe;const Ie=oe,$e=de*ue;xe=clamp$1(xe,-$e,$e),oe=le-xe;const Ne=(ie.value+pe*xe)*he;ie.value=(ie.value-pe*Ne)*Ce;let Oe=oe+(xe+Ne)*Ce;return Ie-le>0==Oe>Ie&&(Oe=Ie,ie.value=(Oe-Ie)/he),Oe}function smoothDampVec3(le,oe,ie,ue,de=1/0,he,pe){ue=Math.max(1e-4,ue);const _e=2/ue,Ce=_e*he,xe=1/(1+Ce+.48*Ce*Ce+.235*Ce*Ce*Ce);let Ie=oe.x,$e=oe.y,Ne=oe.z,Oe=le.x-Ie,Fe=le.y-$e,Ve=le.z-Ne;const ze=Ie,Ue=$e,Pt=Ne,qe=de*ue,Et=qe*qe,kt=Oe*Oe+Fe*Fe+Ve*Ve;if(kt>Et){const wn=Math.sqrt(kt);Oe=Oe/wn*qe,Fe=Fe/wn*qe,Ve=Ve/wn*qe}Ie=le.x-Oe,$e=le.y-Fe,Ne=le.z-Ve;const At=(ie.x+_e*Oe)*he,Dt=(ie.y+_e*Fe)*he,Lt=(ie.z+_e*Ve)*he;ie.x=(ie.x-_e*At)*xe,ie.y=(ie.y-_e*Dt)*xe,ie.z=(ie.z-_e*Lt)*xe,pe.x=Ie+(Oe+At)*xe,pe.y=$e+(Fe+Dt)*xe,pe.z=Ne+(Ve+Lt)*xe;const jt=ze-le.x,_n=Ue-le.y,bn=Pt-le.z,vn=pe.x-ze,Tn=pe.y-Ue,$n=pe.z-Pt;return jt*vn+_n*Tn+bn*$n>0&&(pe.x=ze,pe.y=Ue,pe.z=Pt,ie.x=(pe.x-ze)/he,ie.y=(pe.y-Ue)/he,ie.z=(pe.z-Pt)/he),pe}function isPerspectiveCamera(le){return le.isPerspectiveCamera}function isOrthographicCamera(le){return le.isOrthographicCamera}function notSupportedInOrthographicCamera(le,oe){return!!isOrthographicCamera(le)}const PI_2=Math.PI*2,PI_HALF=Math.PI/2,VERSION="__VERSION",TOUCH_DOLLY_FACTOR=1/8,isBrowser=typeof window<"u",isMac=isBrowser&&/Mac/.test(navigator.platform),isPointerEventsNotSupported=!(isBrowser&&"PointerEvent"in window);let _ORIGIN,_AXIS_Y,_AXIS_Z,_v2,_v3A,_v3B,_v3C,_xColumn,_yColumn,_zColumn,_deltaTarget,_deltaOffset,_sphericalA,_sphericalB,_box3A,_box3B,_sphere,_quaternionA,_quaternionB,_rotationMatrix,_raycaster;class CameraControls extends EventDispatcher{constructor(oe,ie){super(),ve(this,"minPolarAngle",0),ve(this,"maxPolarAngle",Math.PI),ve(this,"minAzimuthAngle",-1/0),ve(this,"maxAzimuthAngle",1/0),ve(this,"minDistance",0),ve(this,"maxDistance",1/0),ve(this,"infinityDolly",!1),ve(this,"minZoom",.01),ve(this,"maxZoom",1/0),ve(this,"smoothTime",.25),ve(this,"draggingSmoothTime",.125),ve(this,"maxSpeed",1/0),ve(this,"azimuthRotateSpeed",1),ve(this,"polarRotateSpeed",1),ve(this,"dollySpeed",1),ve(this,"dollyDragInverted",!1),ve(this,"truckSpeed",2),ve(this,"dollyToCursor",!1),ve(this,"dollyToOrbitPoint",!1),ve(this,"dragToOffset",!1),ve(this,"verticalDragToForward",!1),ve(this,"boundaryFriction",0),ve(this,"restThreshold",.01),ve(this,"colliderMeshes",[]),ve(this,"mouseButtons"),ve(this,"touches"),ve(this,"cancel",()=>{}),ve(this,"lockPointer"),ve(this,"unlockPointer"),ve(this,"_enabled",!0),ve(this,"_camera"),ve(this,"_yAxisUpSpace"),ve(this,"_yAxisUpSpaceInverse"),ve(this,"_state",ACTION.NONE),ve(this,"_domElement"),ve(this,"_viewport",null),ve(this,"_target"),ve(this,"_targetEnd"),ve(this,"curTarget"),ve(this,"_focalOffset"),ve(this,"_focalOffsetEnd"),ve(this,"_spherical"),ve(this,"_sphericalEnd"),ve(this,"_zoom"),ve(this,"_zoomEnd"),ve(this,"_cameraUp0"),ve(this,"_target0"),ve(this,"_position0"),ve(this,"_zoom0"),ve(this,"_focalOffset0"),ve(this,"_dollyControlAmount",0),ve(this,"_dollyControlCoord"),ve(this,"_nearPlaneCorners"),ve(this,"_hasRested",!0),ve(this,"_boundary"),ve(this,"_boundaryEnclosesCamera",!1),ve(this,"_needsUpdate",!0),ve(this,"_updatedLastTime",!1),ve(this,"_elementRect",new DOMRect),ve(this,"_isDragging",!1),ve(this,"_activePointers",[]),ve(this,"_lockedPointer",null),ve(this,"_isUserControllingRotate",!1),ve(this,"_isUserControllingDolly",!1),ve(this,"_isUserControllingTruck",!1),ve(this,"_isUserControllingOffset",!1),ve(this,"_isUserControllingZoom",!1),ve(this,"_thetaVelocity",{value:0}),ve(this,"_phiVelocity",{value:0}),ve(this,"_radiusVelocity",{value:0}),ve(this,"_targetVelocity",new Vector3$1),ve(this,"_focalOffsetVelocity",new Vector3$1),ve(this,"_zoomVelocity",{value:0}),ve(this,"clock",new Clock),ve(this,"_truckInternal",(Et,kt,At)=>{let Dt,Lt;if(isPerspectiveCamera(this._camera)){const jt=_v3A.copy(this._camera.position).sub(this._target),_n=this._camera.getEffectiveFOV()*DEG2RAD,bn=jt.length()*Math.tan(_n*.5);Dt=this.truckSpeed*Et*bn/this._elementRect.height,Lt=this.truckSpeed*kt*bn/this._elementRect.height}else if(isOrthographicCamera(this._camera)){const jt=this._camera;Dt=Et*(jt.right-jt.left)/jt.zoom/this._elementRect.width,Lt=kt*(jt.top-jt.bottom)/jt.zoom/this._elementRect.height}else return;this.verticalDragToForward?(At?this.setFocalOffset(this._focalOffsetEnd.x+Dt,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(Dt,0,!0),this.forward(-Lt,!0)):At?this.setFocalOffset(this._focalOffsetEnd.x+Dt,this._focalOffsetEnd.y+Lt,this._focalOffsetEnd.z,!0):this.truck(Dt,Lt,!0)}),ve(this,"_rotateInternal",(Et,kt)=>{const At=PI_2*this.azimuthRotateSpeed*Et/this._elementRect.height,Dt=PI_2*this.polarRotateSpeed*kt/this._elementRect.height;this.rotate(At,Dt,!0)}),ve(this,"_dollyInternal",(Et,kt,At)=>{const Dt=Math.pow(.95,-Et*this.dollySpeed),Lt=this._sphericalEnd.radius*Dt,jt=this._sphericalEnd.radius,_n=jt*(Et>=0?-1:1);this.dollyTo(Lt),this.infinityDolly&&(Lt<this.minDistance||this.maxDistance===this.minDistance)&&(this._camera.getWorldDirection(_v3A),this._targetEnd.add(_v3A.normalize().multiplyScalar(_n)),this._target.add(_v3A.normalize().multiplyScalar(_n))),this.dollyToCursor&&(this._dollyControlAmount+=this._sphericalEnd.radius-jt,this.infinityDolly&&(Lt<this.minDistance||this.maxDistance===this.minDistance)&&(this._dollyControlAmount-=_n),this._dollyControlCoord.set(kt,At))}),ve(this,"_zoomInternal",(Et,kt,At)=>{const Dt=Math.pow(.95,Et*this.dollySpeed),Lt=this._zoomEnd;this.zoomTo(this._zoom*Dt),this.dollyToCursor&&(this._dollyControlAmount+=this._zoomEnd-Lt,this._dollyControlCoord.set(kt,At))}),typeof THREE$1>"u",_ORIGIN=new Vector3$1(0,0,0),_AXIS_Y=new Vector3$1(0,1,0),_AXIS_Z=new Vector3$1(0,0,1),_v2=new Vector2$1,_v3A=new Vector3$1,_v3B=new Vector3$1,_v3C=new Vector3$1,_xColumn=new Vector3$1,_yColumn=new Vector3$1,_zColumn=new Vector3$1,_deltaTarget=new Vector3$1,_deltaOffset=new Vector3$1,_sphericalA=new Spherical,_sphericalB=new Spherical,_box3A=new Box3,_box3B=new Box3,_sphere=new Sphere,_quaternionA=new Quaternion$1,_quaternionB=new Quaternion$1,_rotationMatrix=new Matrix4$1,_raycaster=new Raycaster,this._camera=oe,this._yAxisUpSpace=new Quaternion$1().setFromUnitVectors(this._camera.up,_AXIS_Y),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=ACTION.NONE,this._target=new Vector3$1,this._targetEnd=this._target.clone(),this.curTarget=new Vector3$1,this._focalOffset=new Vector3$1,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new Spherical().setFromVector3(_v3A.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._nearPlaneCorners=[new Vector3$1,new Vector3$1,new Vector3$1,new Vector3$1],this._updateNearPlaneCorners(),this._boundary=new Box3(new Vector3$1(-1/0,-1/0,-1/0),new Vector3$1(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlAmount=0,this._dollyControlCoord=new Vector2$1,this.mouseButtons={left:ACTION.ROTATE,middle:ACTION.DOLLY,right:ACTION.TRUCK,wheel:isPerspectiveCamera(this._camera)?ACTION.DOLLY:isOrthographicCamera(this._camera)?ACTION.ZOOM:ACTION.NONE},this.touches={one:ACTION.TOUCH_ROTATE,two:isPerspectiveCamera(this._camera)?ACTION.TOUCH_DOLLY_TRUCK:isOrthographicCamera(this._camera)?ACTION.TOUCH_ZOOM_TRUCK:ACTION.NONE,three:ACTION.TOUCH_TRUCK};const ue=new Vector2$1,de=new Vector2$1,he=new Vector2$1,pe=Et=>{if(!this._enabled||!this._domElement)return;const kt=Et.pointerType!=="mouse"?null:(Et.buttons&MOUSE_BUTTON.LEFT)===MOUSE_BUTTON.LEFT?MOUSE_BUTTON.LEFT:(Et.buttons&MOUSE_BUTTON.MIDDLE)===MOUSE_BUTTON.MIDDLE?MOUSE_BUTTON.MIDDLE:(Et.buttons&MOUSE_BUTTON.RIGHT)===MOUSE_BUTTON.RIGHT?MOUSE_BUTTON.RIGHT:null;if(kt!==null){const Dt=this._findPointerByMouseButton(kt);Dt&&this._disposePointer(Dt)}if((Et.buttons&MOUSE_BUTTON.LEFT)===MOUSE_BUTTON.LEFT&&this._lockedPointer)return;const At={pointerId:Et.pointerId,clientX:Et.clientX,clientY:Et.clientY,deltaX:0,deltaY:0,mouseButton:kt};this._activePointers.push(At),this._domElement.ownerDocument.removeEventListener("pointermove",Ce,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",Ie),this._domElement.ownerDocument.addEventListener("pointermove",Ce,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",Ie),this._isDragging=!0,Ve(Et)},_e=Et=>{if(!this._enabled||!this._domElement||this._lockedPointer)return;const kt=(Et.buttons&MOUSE_BUTTON.LEFT)===MOUSE_BUTTON.LEFT?MOUSE_BUTTON.LEFT:(Et.buttons&MOUSE_BUTTON.MIDDLE)===MOUSE_BUTTON.MIDDLE?MOUSE_BUTTON.MIDDLE:(Et.buttons&MOUSE_BUTTON.RIGHT)===MOUSE_BUTTON.RIGHT?MOUSE_BUTTON.RIGHT:null;if(kt!==null){const Dt=this._findPointerByMouseButton(kt);Dt&&this._disposePointer(Dt)}const At={pointerId:1,clientX:Et.clientX,clientY:Et.clientY,deltaX:0,deltaY:0,mouseButton:(Et.buttons&MOUSE_BUTTON.LEFT)===MOUSE_BUTTON.LEFT?MOUSE_BUTTON.LEFT:(Et.buttons&MOUSE_BUTTON.MIDDLE)===MOUSE_BUTTON.LEFT?MOUSE_BUTTON.MIDDLE:(Et.buttons&MOUSE_BUTTON.RIGHT)===MOUSE_BUTTON.LEFT?MOUSE_BUTTON.RIGHT:null};this._activePointers.push(At),this._domElement.ownerDocument.removeEventListener("mousemove",xe),this._domElement.ownerDocument.removeEventListener("mouseup",$e),this._domElement.ownerDocument.addEventListener("mousemove",xe),this._domElement.ownerDocument.addEventListener("mouseup",$e),this._isDragging=!0,Ve(Et)},Ce=Et=>{Et.cancelable&&Et.preventDefault();const kt=Et.pointerId,At=this._lockedPointer||this._findPointerById(kt);if(At){if(At.clientX=Et.clientX,At.clientY=Et.clientY,At.deltaX=Et.movementX,At.deltaY=Et.movementY,this._state=0,Et.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(Et.buttons&MOUSE_BUTTON.LEFT)===MOUSE_BUTTON.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(Et.buttons&MOUSE_BUTTON.MIDDLE)===MOUSE_BUTTON.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(Et.buttons&MOUSE_BUTTON.RIGHT)===MOUSE_BUTTON.RIGHT&&(this._state=this._state|this.mouseButtons.right);ze()}},xe=Et=>{const kt=this._lockedPointer||this._findPointerById(1);kt&&(kt.clientX=Et.clientX,kt.clientY=Et.clientY,kt.deltaX=Et.movementX,kt.deltaY=Et.movementY,this._state=0,(this._lockedPointer||(Et.buttons&MOUSE_BUTTON.LEFT)===MOUSE_BUTTON.LEFT)&&(this._state=this._state|this.mouseButtons.left),(Et.buttons&MOUSE_BUTTON.MIDDLE)===MOUSE_BUTTON.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(Et.buttons&MOUSE_BUTTON.RIGHT)===MOUSE_BUTTON.RIGHT&&(this._state=this._state|this.mouseButtons.right),ze())},Ie=Et=>{const kt=this._findPointerById(Et.pointerId);if(!(kt&&kt===this._lockedPointer)){if(kt&&this._disposePointer(kt),Et.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=ACTION.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=ACTION.NONE;Ue()}},$e=()=>{const Et=this._findPointerById(1);Et&&Et===this._lockedPointer||(Et&&this._disposePointer(Et),this._state=ACTION.NONE,Ue())};let Ne=-1;const Oe=Et=>{if(!this._enabled||this.mouseButtons.wheel===ACTION.NONE)return;if(Et.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===ACTION.ROTATE||this.mouseButtons.wheel===ACTION.TRUCK){const jt=performance.now();Ne-jt<1e3&&this._getClientRect(this._elementRect),Ne=jt}const kt=isMac?-1:-3,At=Et.deltaMode===1?Et.deltaY/kt:Et.deltaY/(kt*10);let Dt=0,Lt=0;if(this.dollyToOrbitPoint){let jt=this.curTarget.clone().project(oe);Dt=jt.x,Lt=jt.y,this.dollyToCursor=!0}else this.dollyToCursor&&(Dt=(Et.clientX-this._elementRect.x)/this._elementRect.width*2-1,Lt=(Et.clientY-this._elementRect.y)/this._elementRect.height*-2+1);switch(this.mouseButtons.wheel){case ACTION.ROTATE:{this._rotateInternal(Et.deltaX,Et.deltaY),this._isUserControllingRotate=!0;break}case ACTION.TRUCK:{this._truckInternal(Et.deltaX,Et.deltaY,!1),this._isUserControllingTruck=!0;break}case ACTION.OFFSET:{this._truckInternal(Et.deltaX,Et.deltaY,!0),this._isUserControllingOffset=!0;break}case ACTION.DOLLY:{this._dollyInternal(-At,Dt,Lt),this._isUserControllingDolly=!0;break}case ACTION.ZOOM:{this._zoomInternal(-At,Dt,Lt),this._isUserControllingZoom=!0;break}}this.update(),(this.dollyToOrbitPoint||this.dollyToCursor)&&this.setOrbitPoint(this.curTarget.x,this.curTarget.y,this.curTarget.z),this.dispatchEvent({type:"control"})},Fe=Et=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===CameraControls.ACTION.NONE){const kt=Et instanceof PointerEvent?Et.pointerId:0,At=this._findPointerById(kt);At&&this._disposePointer(At),this._domElement.ownerDocument.removeEventListener("pointermove",Ce,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",Ie),this._domElement.ownerDocument.removeEventListener("mousemove",xe),this._domElement.ownerDocument.removeEventListener("mouseup",$e);return}Et.preventDefault()}},Ve=Et=>{if(this._enabled){if(extractClientCoordFromEvent(this._activePointers,_v2),this._getClientRect(this._elementRect),ue.copy(_v2),de.copy(_v2),this._activePointers.length>=2){const kt=_v2.x-this._activePointers[1].clientX,At=_v2.y-this._activePointers[1].clientY,Dt=Math.sqrt(kt*kt+At*At);he.set(0,Dt);const Lt=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,jt=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;de.set(Lt,jt)}if(this._state=0,!Et)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in Et&&Et.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(Et.buttons&MOUSE_BUTTON.LEFT)===MOUSE_BUTTON.LEFT&&(this._state=this._state|this.mouseButtons.left),(Et.buttons&MOUSE_BUTTON.MIDDLE)===MOUSE_BUTTON.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(Et.buttons&MOUSE_BUTTON.RIGHT)===MOUSE_BUTTON.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&ACTION.ROTATE)===ACTION.ROTATE||(this._state&ACTION.TOUCH_ROTATE)===ACTION.TOUCH_ROTATE||(this._state&ACTION.TOUCH_DOLLY_ROTATE)===ACTION.TOUCH_DOLLY_ROTATE||(this._state&ACTION.TOUCH_ZOOM_ROTATE)===ACTION.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&ACTION.TRUCK)===ACTION.TRUCK||(this._state&ACTION.TOUCH_TRUCK)===ACTION.TOUCH_TRUCK||(this._state&ACTION.TOUCH_DOLLY_TRUCK)===ACTION.TOUCH_DOLLY_TRUCK||(this._state&ACTION.TOUCH_ZOOM_TRUCK)===ACTION.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&ACTION.DOLLY)===ACTION.DOLLY||(this._state&ACTION.TOUCH_DOLLY)===ACTION.TOUCH_DOLLY||(this._state&ACTION.TOUCH_DOLLY_TRUCK)===ACTION.TOUCH_DOLLY_TRUCK||(this._state&ACTION.TOUCH_DOLLY_OFFSET)===ACTION.TOUCH_DOLLY_OFFSET||(this._state&ACTION.TOUCH_DOLLY_ROTATE)===ACTION.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&ACTION.ZOOM)===ACTION.ZOOM||(this._state&ACTION.TOUCH_ZOOM)===ACTION.TOUCH_ZOOM||(this._state&ACTION.TOUCH_ZOOM_TRUCK)===ACTION.TOUCH_ZOOM_TRUCK||(this._state&ACTION.TOUCH_ZOOM_OFFSET)===ACTION.TOUCH_ZOOM_OFFSET||(this._state&ACTION.TOUCH_ZOOM_ROTATE)===ACTION.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&ACTION.OFFSET)===ACTION.OFFSET||(this._state&ACTION.TOUCH_OFFSET)===ACTION.TOUCH_OFFSET||(this._state&ACTION.TOUCH_DOLLY_OFFSET)===ACTION.TOUCH_DOLLY_OFFSET||(this._state&ACTION.TOUCH_ZOOM_OFFSET)===ACTION.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})}},ze=()=>{if(!this._enabled)return;extractClientCoordFromEvent(this._activePointers,_v2);const Et=this._domElement&&document.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,kt=Et?-Et.deltaX:de.x-_v2.x,At=Et?-Et.deltaY:de.y-_v2.y;if(de.copy(_v2),((this._state&ACTION.ROTATE)===ACTION.ROTATE||(this._state&ACTION.TOUCH_ROTATE)===ACTION.TOUCH_ROTATE||(this._state&ACTION.TOUCH_DOLLY_ROTATE)===ACTION.TOUCH_DOLLY_ROTATE||(this._state&ACTION.TOUCH_ZOOM_ROTATE)===ACTION.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(kt,At),this._isUserControllingRotate=!0),(this._state&ACTION.DOLLY)===ACTION.DOLLY||(this._state&ACTION.ZOOM)===ACTION.ZOOM){const Dt=this.dollyToCursor?(ue.x-this._elementRect.x)/this._elementRect.width*2-1:0,Lt=this.dollyToCursor?(ue.y-this._elementRect.y)/this._elementRect.height*-2+1:0,jt=this.dollyDragInverted?-1:1;(this._state&ACTION.DOLLY)===ACTION.DOLLY?(this._dollyInternal(jt*At*TOUCH_DOLLY_FACTOR,Dt,Lt),this._isUserControllingDolly=!0):(this._zoomInternal(jt*At*TOUCH_DOLLY_FACTOR,Dt,Lt),this._isUserControllingZoom=!0)}if((this._state&ACTION.TOUCH_DOLLY)===ACTION.TOUCH_DOLLY||(this._state&ACTION.TOUCH_ZOOM)===ACTION.TOUCH_ZOOM||(this._state&ACTION.TOUCH_DOLLY_TRUCK)===ACTION.TOUCH_DOLLY_TRUCK||(this._state&ACTION.TOUCH_ZOOM_TRUCK)===ACTION.TOUCH_ZOOM_TRUCK||(this._state&ACTION.TOUCH_DOLLY_OFFSET)===ACTION.TOUCH_DOLLY_OFFSET||(this._state&ACTION.TOUCH_ZOOM_OFFSET)===ACTION.TOUCH_ZOOM_OFFSET||(this._state&ACTION.TOUCH_DOLLY_ROTATE)===ACTION.TOUCH_DOLLY_ROTATE||(this._state&ACTION.TOUCH_ZOOM_ROTATE)===ACTION.TOUCH_ZOOM_ROTATE){const Dt=_v2.x-this._activePointers[1].clientX,Lt=_v2.y-this._activePointers[1].clientY,jt=Math.sqrt(Dt*Dt+Lt*Lt),_n=he.y-jt;he.set(0,jt);const bn=this.dollyToCursor?(de.x-this._elementRect.x)/this._elementRect.width*2-1:0,vn=this.dollyToCursor?(de.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&ACTION.TOUCH_DOLLY)===ACTION.TOUCH_DOLLY||(this._state&ACTION.TOUCH_DOLLY_ROTATE)===ACTION.TOUCH_DOLLY_ROTATE||(this._state&ACTION.TOUCH_DOLLY_TRUCK)===ACTION.TOUCH_DOLLY_TRUCK||(this._state&ACTION.TOUCH_DOLLY_OFFSET)===ACTION.TOUCH_DOLLY_OFFSET?(this._dollyInternal(_n*TOUCH_DOLLY_FACTOR,bn,vn),this._isUserControllingDolly=!0):(this._zoomInternal(_n*TOUCH_DOLLY_FACTOR,bn,vn),this._isUserControllingZoom=!0)}((this._state&ACTION.TRUCK)===ACTION.TRUCK||(this._state&ACTION.TOUCH_TRUCK)===ACTION.TOUCH_TRUCK||(this._state&ACTION.TOUCH_DOLLY_TRUCK)===ACTION.TOUCH_DOLLY_TRUCK||(this._state&ACTION.TOUCH_ZOOM_TRUCK)===ACTION.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(kt,At,!1),this._isUserControllingTruck=!0),((this._state&ACTION.OFFSET)===ACTION.OFFSET||(this._state&ACTION.TOUCH_OFFSET)===ACTION.TOUCH_OFFSET||(this._state&ACTION.TOUCH_DOLLY_OFFSET)===ACTION.TOUCH_DOLLY_OFFSET||(this._state&ACTION.TOUCH_ZOOM_OFFSET)===ACTION.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(kt,At,!0),this._isUserControllingOffset=!0),this.update(),this.dispatchEvent({type:"control"})},Ue=()=>{extractClientCoordFromEvent(this._activePointers,_v2),de.copy(_v2),(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",Ce,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",xe),this._domElement.ownerDocument.removeEventListener("pointerup",Ie),this._domElement.ownerDocument.removeEventListener("mouseup",$e),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",Ce,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",Ie),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",Pt),this._domElement.ownerDocument.addEventListener("pointerlockerror",qe),this._domElement.ownerDocument.addEventListener("pointermove",Ce,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",Ie),Ve())},this.unlockPointer=()=>{this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),document.exitPointerLock(),this.cancel(),this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointerlockchange",Pt),this._domElement.ownerDocument.removeEventListener("pointerlockerror",qe))};const Pt=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},qe=()=>{this.unlockPointer()};this._addAllEventListeners=Et=>{this._domElement=Et,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",pe),isPointerEventsNotSupported&&this._domElement.addEventListener("mousedown",_e),this._domElement.addEventListener("pointercancel",Ie),this._domElement.addEventListener("wheel",Oe,{passive:!1}),this._domElement.addEventListener("contextmenu",Fe)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",pe),this._domElement.removeEventListener("mousedown",_e),this._domElement.removeEventListener("pointercancel",Ie),this._domElement.removeEventListener("wheel",Oe,{passive:!1}),this._domElement.removeEventListener("contextmenu",Fe),this._domElement.ownerDocument.removeEventListener("pointermove",Ce,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",xe),this._domElement.ownerDocument.removeEventListener("pointerup",Ie),this._domElement.ownerDocument.removeEventListener("mouseup",$e),this._domElement.ownerDocument.removeEventListener("pointerlockchange",Pt),this._domElement.ownerDocument.removeEventListener("pointerlockerror",qe))},this.cancel=()=>{this._state!==ACTION.NONE&&(this._state=ACTION.NONE,this._activePointers.length=0,Ue())},ie&&this.connect(ie),this.update(0)}static get ACTION(){return ACTION}get camera(){return this._camera}set camera(oe){this._camera=oe,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(oe){this._enabled=oe,this._domElement&&(oe?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(oe){this._spherical.radius===oe&&this._sphericalEnd.radius===oe||(this._spherical.radius=oe,this._sphericalEnd.radius=oe,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(oe){this._spherical.theta===oe&&this._sphericalEnd.theta===oe||(this._spherical.theta=oe,this._sphericalEnd.theta=oe,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(oe){this._spherical.phi===oe&&this._sphericalEnd.phi===oe||(this._spherical.phi=oe,this._sphericalEnd.phi=oe,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(oe){this._boundaryEnclosesCamera=oe,this._needsUpdate=!0}rotate(oe,ie,ue=!1){return this.rotateTo(this._sphericalEnd.theta+oe,this._sphericalEnd.phi+ie,ue)}rotateAzimuthTo(oe,ie=!1){return this.rotateTo(oe,this._sphericalEnd.phi,ie)}rotatePolarTo(oe,ie=!1){return this.rotateTo(this._sphericalEnd.theta,oe,ie)}rotateTo(oe,ie,ue=!1){this._isUserControllingRotate=!1;const de=clamp$1(oe,this.minAzimuthAngle,this.maxAzimuthAngle),he=clamp$1(ie,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=de,this._sphericalEnd.phi=he,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,ue||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const pe=!ue||approxEquals(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&approxEquals(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(pe)}dolly(oe,ie=!1){return this.dollyTo(this._sphericalEnd.radius-oe,ie)}dollyTo(oe,ie=!1){this._isUserControllingDolly=!1;const ue=this._sphericalEnd.radius,de=clamp$1(oe,this.minDistance,this.maxDistance);if(this.colliderMeshes.length>=1){const pe=this._collisionTest(),_e=approxEquals(pe,this._spherical.radius);if(!(ue>de)&&_e)return Promise.resolve();this._sphericalEnd.radius=Math.min(de,pe)}else this._sphericalEnd.radius=de;this._needsUpdate=!0,ie||(this._spherical.radius=this._sphericalEnd.radius);const he=!ie||approxEquals(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(he)}zoom(oe,ie=!1){return this.zoomTo(this._zoomEnd+oe,ie)}zoomTo(oe,ie=!1){this._isUserControllingZoom=!1,this._zoomEnd=clamp$1(oe,this.minZoom,this.maxZoom),this._needsUpdate=!0,ie||(this._zoom=this._zoomEnd);const ue=!ie||approxEquals(this._zoom,this._zoomEnd,this.restThreshold);return this._createOnRestPromise(ue)}pan(oe,ie,ue=!1){return this.truck(oe,ie,ue)}truck(oe,ie,ue=!1){this._camera.updateMatrix(),_xColumn.setFromMatrixColumn(this._camera.matrix,0),_yColumn.setFromMatrixColumn(this._camera.matrix,1),_xColumn.multiplyScalar(oe),_yColumn.multiplyScalar(-ie);const de=_v3A.copy(_xColumn).add(_yColumn),he=_v3B.copy(this._targetEnd).add(de);return this.moveTo(he.x,he.y,he.z,ue)}forward(oe,ie=!1){_v3A.setFromMatrixColumn(this._camera.matrix,0),_v3A.crossVectors(this._camera.up,_v3A),_v3A.multiplyScalar(oe);const ue=_v3B.copy(this._targetEnd).add(_v3A);return this.moveTo(ue.x,ue.y,ue.z,ie)}forward2(oe,ie=!1){_v3A.set(0,0,-1).applyQuaternion(this._camera.quaternion),_v3A.multiplyScalar(oe);const ue=_v3B.copy(this._targetEnd).add(_v3A);return this.moveTo(ue.x,ue.y,ue.z,ie)}elevate(oe,ie=!1){return _v3A.copy(this._camera.up).multiplyScalar(oe),this.moveTo(this._targetEnd.x+_v3A.x,this._targetEnd.y+_v3A.y,this._targetEnd.z+_v3A.z,ie)}moveTo(oe,ie,ue,de=!1){this.curTarget.set(oe,ie,ue),this._isUserControllingTruck=!1;const he=_v3A.set(oe,ie,ue).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,he,this.boundaryFriction),this._needsUpdate=!0,de||this._target.copy(this._targetEnd);const pe=!de||approxEquals(this._target.x,this._targetEnd.x,this.restThreshold)&&approxEquals(this._target.y,this._targetEnd.y,this.restThreshold)&&approxEquals(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(pe)}lookInDirectionOf(oe,ie,ue,de=!1){const he=_v3A.set(oe,ie,ue).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius);return this.setPosition(he.x,he.y,he.z,de)}fitToBox(oe,ie,{cover:ue=!1,paddingLeft:de=0,paddingRight:he=0,paddingBottom:pe=0,paddingTop:_e=0}={}){const Ce=[],xe=oe.isBox3?_box3A.copy(oe):_box3A.setFromObject(oe);xe.isEmpty()&&Promise.resolve();const Ie=roundToStep(this._sphericalEnd.theta,PI_HALF),$e=roundToStep(this._sphericalEnd.phi,PI_HALF);Ce.push(this.rotateTo(Ie,$e,ie));const Ne=_v3A.setFromSpherical(this._sphericalEnd).normalize(),Oe=_quaternionA.setFromUnitVectors(Ne,_AXIS_Z),Fe=approxEquals(Math.abs(Ne.y),1);Fe&&Oe.multiply(_quaternionB.setFromAxisAngle(_AXIS_Y,Ie)),Oe.multiply(this._yAxisUpSpaceInverse);const Ve=_box3B.makeEmpty();_v3B.copy(xe.min).applyQuaternion(Oe),Ve.expandByPoint(_v3B),_v3B.copy(xe.min).setX(xe.max.x).applyQuaternion(Oe),Ve.expandByPoint(_v3B),_v3B.copy(xe.min).setY(xe.max.y).applyQuaternion(Oe),Ve.expandByPoint(_v3B),_v3B.copy(xe.max).setZ(xe.min.z).applyQuaternion(Oe),Ve.expandByPoint(_v3B),_v3B.copy(xe.min).setZ(xe.max.z).applyQuaternion(Oe),Ve.expandByPoint(_v3B),_v3B.copy(xe.max).setY(xe.min.y).applyQuaternion(Oe),Ve.expandByPoint(_v3B),_v3B.copy(xe.max).setX(xe.min.x).applyQuaternion(Oe),Ve.expandByPoint(_v3B),_v3B.copy(xe.max).applyQuaternion(Oe),Ve.expandByPoint(_v3B),Ve.min.x-=de,Ve.min.y-=pe,Ve.max.x+=he,Ve.max.y+=_e,Oe.setFromUnitVectors(_AXIS_Z,Ne),Fe&&Oe.premultiply(_quaternionB.invert()),Oe.premultiply(this._yAxisUpSpace);const ze=Ve.getSize(_v3A),Ue=Ve.getCenter(_v3B).applyQuaternion(Oe);if(isPerspectiveCamera(this._camera)){const Pt=this.getDistanceToFitBox(ze.x,ze.y,ze.z,ue);Ce.push(this.moveTo(Ue.x,Ue.y,Ue.z,ie)),Ce.push(this.dollyTo(Pt,ie)),Ce.push(this.setFocalOffset(0,0,0,ie))}else if(isOrthographicCamera(this._camera)){const Pt=this._camera,qe=Pt.right-Pt.left,Et=Pt.top-Pt.bottom,kt=ue?Math.max(qe/ze.x,Et/ze.y):Math.min(qe/ze.x,Et/ze.y);Ce.push(this.moveTo(Ue.x,Ue.y,Ue.z,ie)),Ce.push(this.zoomTo(kt,ie)),Ce.push(this.setFocalOffset(0,0,0,ie))}return Promise.all(Ce)}fitToSphere(oe,ie){const ue=[],de=oe instanceof Sphere?_sphere.copy(oe):CameraControls.createBoundingSphere(oe,_sphere);if(ue.push(this.moveTo(de.center.x,de.center.y,de.center.z,ie)),isPerspectiveCamera(this._camera)){const he=this.getDistanceToFitSphere(de.radius);ue.push(this.dollyTo(he,ie))}else if(isOrthographicCamera(this._camera)){const he=this._camera.right-this._camera.left,pe=this._camera.top-this._camera.bottom,_e=2*de.radius,Ce=Math.min(he/_e,pe/_e);ue.push(this.zoomTo(Ce,ie))}return ue.push(this.setFocalOffset(0,0,0,ie)),Promise.all(ue)}setLookAt(oe,ie,ue,de,he,pe,_e=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1;const Ce=_v3B.set(de,he,pe),xe=_v3A.set(oe,ie,ue);this._targetEnd.copy(Ce),this._sphericalEnd.setFromVector3(xe.sub(Ce).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,_e||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const Ie=!_e||approxEquals(this._target.x,this._targetEnd.x,this.restThreshold)&&approxEquals(this._target.y,this._targetEnd.y,this.restThreshold)&&approxEquals(this._target.z,this._targetEnd.z,this.restThreshold)&&approxEquals(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&approxEquals(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&approxEquals(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(Ie)}lerpLookAt(oe,ie,ue,de,he,pe,_e,Ce,xe,Ie,$e,Ne,Oe,Fe=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1;const Ve=_v3A.set(de,he,pe),ze=_v3B.set(oe,ie,ue);_sphericalA.setFromVector3(ze.sub(Ve).applyQuaternion(this._yAxisUpSpace));const Ue=_v3C.set(Ie,$e,Ne),Pt=_v3B.set(_e,Ce,xe);_sphericalB.setFromVector3(Pt.sub(Ue).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(Ve.lerp(Ue,Oe));const qe=_sphericalB.theta-_sphericalA.theta,Et=_sphericalB.phi-_sphericalA.phi,kt=_sphericalB.radius-_sphericalA.radius;this._sphericalEnd.set(_sphericalA.radius+kt*Oe,_sphericalA.phi+Et*Oe,_sphericalA.theta+qe*Oe),this.normalizeRotations(),this._needsUpdate=!0,Fe||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const At=!Fe||approxEquals(this._target.x,this._targetEnd.x,this.restThreshold)&&approxEquals(this._target.y,this._targetEnd.y,this.restThreshold)&&approxEquals(this._target.z,this._targetEnd.z,this.restThreshold)&&approxEquals(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&approxEquals(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&approxEquals(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(At)}setPosition(oe,ie,ue,de=!1){return this.setLookAt(oe,ie,ue,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,de)}setTarget(oe,ie,ue,de=!1){const he=this.getPosition(_v3A),pe=this.setLookAt(he.x,he.y,he.z,oe,ie,ue,de);return this._sphericalEnd.phi=clamp$1(this.polarAngle,this.minPolarAngle,this.maxPolarAngle),pe}setFocalOffset(oe,ie,ue,de=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(oe,ie,ue),this._needsUpdate=!0,de||this._focalOffset.copy(this._focalOffsetEnd);const he=!de||approxEquals(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&approxEquals(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&approxEquals(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(he)}setOrbitPoint(oe,ie,ue){this._camera.updateMatrixWorld(),_xColumn.setFromMatrixColumn(this._camera.matrixWorldInverse,0),_yColumn.setFromMatrixColumn(this._camera.matrixWorldInverse,1),_zColumn.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const de=_v3A.set(oe,ie,ue),he=de.distanceTo(this._camera.position),pe=de.sub(this._camera.position);_xColumn.multiplyScalar(pe.x),_yColumn.multiplyScalar(pe.y),_zColumn.multiplyScalar(pe.z),_v3A.copy(_xColumn).add(_yColumn).add(_zColumn),_v3A.z=_v3A.z+he,this.dollyTo(he,!1),this.setFocalOffset(-_v3A.x,_v3A.y,-_v3A.z,!1),this.moveTo(oe,ie,ue,!1)}setBoundary(oe){if(!oe){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(oe),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(oe,ie,ue,de){if(oe===null){this._viewport=null;return}this._viewport=this._viewport||new Vector4,typeof oe=="number"?this._viewport.set(oe,ie,ue,de):this._viewport.copy(oe)}getDistanceToFitBox(oe,ie,ue,de=!1){if(notSupportedInOrthographicCamera(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const he=oe/ie,pe=this._camera.getEffectiveFOV()*DEG2RAD,_e=this._camera.aspect;return((de?he>_e:he<_e)?ie:oe/_e)*.5/Math.tan(pe*.5)+ue*.5}getDistanceToFitSphere(oe){if(notSupportedInOrthographicCamera(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const ie=this._camera.getEffectiveFOV()*DEG2RAD,ue=Math.atan(Math.tan(ie*.5)*this._camera.aspect)*2,de=1<this._camera.aspect?ie:ue;return oe/Math.sin(de*.5)}getTarget(oe){return(oe&&oe.isVector3?oe:new Vector3$1).copy(this._targetEnd)}getPosition(oe){return(oe&&oe.isVector3?oe:new Vector3$1).setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).add(this._targetEnd)}getFocalOffset(oe){return(oe&&oe.isVector3?oe:new Vector3$1).copy(this._focalOffsetEnd)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%PI_2,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=PI_2),this._spherical.theta+=PI_2*Math.round((this._sphericalEnd.theta-this._spherical.theta)/PI_2)}reset(oe=!1){if(!approxEquals(this._camera.up.x,this._cameraUp0.x)||!approxEquals(this._camera.up.y,this._cameraUp0.y)||!approxEquals(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const ue=this.getPosition(_v3A);this.updateCameraUp(),this.setPosition(ue.x,ue.y,ue.z)}const ie=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,oe),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,oe),this.zoomTo(this._zoom0,oe)];return Promise.all(ie)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,_AXIS_Y),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const oe=_v3A.subVectors(this._target,this._camera.position).normalize(),ie=_v3B.crossVectors(oe,this._camera.up).normalize();this._camera.up.crossVectors(ie,oe).normalize(),this._camera.updateMatrixWorld();const ue=this.getPosition(_v3A);this.updateCameraUp(),this.setPosition(ue.x,ue.y,ue.z)}update(oe){oe==null&&(oe=.1);const ie=this._sphericalEnd.theta-this._spherical.theta,ue=this._sphericalEnd.phi-this._spherical.phi,de=this._sphericalEnd.radius-this._spherical.radius,he=_deltaTarget.subVectors(this._targetEnd,this._target),pe=_deltaOffset.subVectors(this._focalOffsetEnd,this._focalOffset),_e=this._zoomEnd-this._zoom;if(approxZero(ie))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const Ie=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=smoothDamp(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,Ie,1/0,oe),this._needsUpdate=!0}if(approxZero(ue))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const Ie=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=smoothDamp(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,Ie,1/0,oe),this._needsUpdate=!0}if(approxZero(de))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const Ie=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=smoothDamp(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,Ie,this.maxSpeed,oe),this._needsUpdate=!0}if(approxZero(he.x)&&approxZero(he.y)&&approxZero(he.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const Ie=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;smoothDampVec3(this._target,this._targetEnd,this._targetVelocity,Ie,this.maxSpeed,oe,this._target),this._needsUpdate=!0}if(approxZero(pe.x)&&approxZero(pe.y)&&approxZero(pe.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const Ie=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;smoothDampVec3(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,Ie,this.maxSpeed,oe,this._focalOffset),this._needsUpdate=!0}if(this._dollyControlAmount!==0){if(isPerspectiveCamera(this._camera)){const Ie=this._camera,$e=_v3A.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).normalize().negate(),Ne=_v3B.copy($e).cross(Ie.up).normalize();Ne.lengthSq()===0&&(Ne.x=1);const Oe=_v3C.crossVectors(Ne,$e),Fe=this._sphericalEnd.radius*Math.tan(Ie.getEffectiveFOV()*DEG2RAD*.5),Ve=(this._sphericalEnd.radius-this._dollyControlAmount-this._sphericalEnd.radius)/this._sphericalEnd.radius,ze=_v3A.copy(this._targetEnd).add(Ne.multiplyScalar(this._dollyControlCoord.x*Fe*Ie.aspect)).add(Oe.multiplyScalar(this._dollyControlCoord.y*Fe));this._targetEnd.lerp(ze,Ve)}else if(isOrthographicCamera(this._camera)){const Ie=this._camera,$e=_v3A.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(Ie.near+Ie.far)/(Ie.near-Ie.far)).unproject(Ie),Ne=_v3B.set(0,0,-1).applyQuaternion(Ie.quaternion),Oe=_v3C.copy($e).add(Ne.multiplyScalar(-$e.dot(Ie.up))),Fe=-(this._zoom-this._dollyControlAmount-this._zoomEnd)/this._zoom,Ve=_v3A.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).normalize().negate(),ze=this._targetEnd.dot(Ve);this._targetEnd.lerp(Oe,Fe);const Ue=this._targetEnd.dot(Ve),Pt=Ve.multiplyScalar(Ue-ze);this._targetEnd.sub(Pt)}this._target.copy(this._targetEnd),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._dollyControlAmount=0}if(approxZero(_e))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const Ie=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=smoothDamp(this._zoom,this._zoomEnd,this._zoomVelocity,Ie,1/0,oe)}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);const Ce=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,Ce),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!approxZero(this._focalOffset.x)||!approxZero(this._focalOffset.y)||!approxZero(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),_xColumn.setFromMatrixColumn(this._camera.matrix,0),_yColumn.setFromMatrixColumn(this._camera.matrix,1),_zColumn.setFromMatrixColumn(this._camera.matrix,2),_xColumn.multiplyScalar(this._focalOffset.x),_yColumn.multiplyScalar(-this._focalOffset.y),_zColumn.multiplyScalar(this._focalOffset.z),_v3A.copy(_xColumn).add(_yColumn).add(_zColumn),this._camera.position.add(_v3A)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),_v3A.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const xe=this._needsUpdate;return xe&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):xe?(this.dispatchEvent({type:"update"}),approxZero(ie,this.restThreshold)&&approxZero(ue,this.restThreshold)&&approxZero(de,this.restThreshold)&&approxZero(he.x,this.restThreshold)&&approxZero(he.y,this.restThreshold)&&approxZero(he.z,this.restThreshold)&&approxZero(pe.x,this.restThreshold)&&approxZero(pe.y,this.restThreshold)&&approxZero(pe.z,this.restThreshold)&&approxZero(_e,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!xe&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._updatedLastTime=xe,this._needsUpdate=!1,xe}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:infinityToMaxNumber(this.maxDistance),minZoom:this.minZoom,maxZoom:infinityToMaxNumber(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:infinityToMaxNumber(this.maxPolarAngle),minAzimuthAngle:infinityToMaxNumber(this.minAzimuthAngle),maxAzimuthAngle:infinityToMaxNumber(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:_v3A.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(oe,ie=!1){const ue=JSON.parse(oe);this.enabled=ue.enabled,this.minDistance=ue.minDistance,this.maxDistance=maxNumberToInfinity(ue.maxDistance),this.minZoom=ue.minZoom,this.maxZoom=maxNumberToInfinity(ue.maxZoom),this.minPolarAngle=ue.minPolarAngle,this.maxPolarAngle=maxNumberToInfinity(ue.maxPolarAngle),this.minAzimuthAngle=maxNumberToInfinity(ue.minAzimuthAngle),this.maxAzimuthAngle=maxNumberToInfinity(ue.maxAzimuthAngle),this.smoothTime=ue.smoothTime,this.draggingSmoothTime=ue.draggingSmoothTime,this.dollySpeed=ue.dollySpeed,this.truckSpeed=ue.truckSpeed,this.dollyToCursor=ue.dollyToCursor,this.verticalDragToForward=ue.verticalDragToForward,this._target0.fromArray(ue.target0),this._position0.fromArray(ue.position0),this._zoom0=ue.zoom0,this._focalOffset0.fromArray(ue.focalOffset0),this.moveTo(ue.target[0],ue.target[1],ue.target[2],ie),_sphericalA.setFromVector3(_v3A.fromArray(ue.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(_sphericalA.theta,_sphericalA.phi,ie),this.dollyTo(_sphericalA.radius,ie),this.zoomTo(ue.zoom,ie),this.setFocalOffset(ue.focalOffset[0],ue.focalOffset[1],ue.focalOffset[2],ie),this._needsUpdate=!0}connect(oe){this._domElement||(oe.setAttribute("data-camera-controls-version",VERSION),this._addAllEventListeners(oe))}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this._removeAllEventListeners(),this.disconnect()}_findPointerById(oe){return this._activePointers.find(ie=>ie.pointerId===oe)}_findPointerByMouseButton(oe){return this._activePointers.find(ie=>ie.mouseButton===oe)}_disposePointer(oe){this._activePointers.splice(this._activePointers.indexOf(oe),1)}_encloseToBoundary(oe,ie,ue){const de=ie.lengthSq();if(de===0)return oe;const he=_v3B.copy(ie).add(oe),pe=this._boundary.clampPoint(he,_v3C).sub(he),_e=pe.lengthSq();if(_e===0)return oe.add(ie);if(_e===de)return oe;if(ue===0)return oe.add(ie).add(pe);{const Ce=1+ue*_e/ie.dot(pe);return oe.add(_v3B.copy(ie).multiplyScalar(Ce)).add(pe.multiplyScalar(1-ue))}}_updateNearPlaneCorners(){if(isPerspectiveCamera(this._camera)){const oe=this._camera,ie=oe.near,ue=oe.getEffectiveFOV()*DEG2RAD,de=Math.tan(ue*.5)*ie,he=de*oe.aspect;this._nearPlaneCorners[0].set(-he,-de,0),this._nearPlaneCorners[1].set(he,-de,0),this._nearPlaneCorners[2].set(he,de,0),this._nearPlaneCorners[3].set(-he,de,0)}else if(isOrthographicCamera(this._camera)){const oe=this._camera,ie=1/oe.zoom,ue=oe.left*ie,de=oe.right*ie,he=oe.top*ie,pe=oe.bottom*ie;this._nearPlaneCorners[0].set(ue,he,0),this._nearPlaneCorners[1].set(de,he,0),this._nearPlaneCorners[2].set(de,pe,0),this._nearPlaneCorners[3].set(ue,pe,0)}}_collisionTest(){let oe=1/0;if(!(this.colliderMeshes.length>=1)||notSupportedInOrthographicCamera(this._camera,"_collisionTest"))return oe;const ie=_v3A.setFromSpherical(this._spherical).divideScalar(this._spherical.radius);_rotationMatrix.lookAt(_ORIGIN,ie,this._camera.up);for(let ue=0;ue<4;ue++){const de=_v3B.copy(this._nearPlaneCorners[ue]);de.applyMatrix4(_rotationMatrix);const he=_v3C.addVectors(this._target,de);_raycaster.set(he,ie),_raycaster.far=this._spherical.radius+1;const pe=_raycaster.intersectObjects(this.colliderMeshes);pe.length!==0&&pe[0].distance<oe&&(oe=pe[0].distance)}return oe}_getClientRect(oe){if(!this._domElement)return;const ie=this._domElement.getBoundingClientRect();return oe.x=ie.left,oe.y=ie.top,this._viewport?(oe.x+=this._viewport.x,oe.y+=ie.height-this._viewport.w-this._viewport.y,oe.width=this._viewport.z,oe.height=this._viewport.w):(oe.width=ie.width,oe.height=ie.height),oe}_createOnRestPromise(oe){return oe?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(ie=>{const ue=()=>{this.removeEventListener("rest",ue),ie()};this.addEventListener("rest",ue)}))}_addAllEventListeners(oe){}_removeAllEventListeners(){}get dampingFactor(){return 0}set dampingFactor(oe){}get draggingDampingFactor(){return 0}set draggingDampingFactor(oe){}static createBoundingSphere(oe,ie=new Sphere){const ue=ie,de=ue.center;_box3A.makeEmpty(),oe.traverseVisible(pe=>{pe.isMesh&&_box3A.expandByObject(pe)}),_box3A.getCenter(de);let he=0;return oe.traverseVisible(pe=>{if(!pe.isMesh)return;const _e=pe,Ce=_e.geometry.clone();Ce.applyMatrix4(_e.matrixWorld);const xe=Ce.attributes.position;for(let Ie=0,$e=xe.count;Ie<$e;Ie++)_v3A.fromBufferAttribute(xe,Ie),he=Math.max(he,de.distanceToSquared(_v3A))}),ue.radius=Math.sqrt(he),ue}}class ThreeRaycaster{constructor(oe){ve(this,"raycaster"),ve(this,"_mouse",new Vector2$1),ve(this,"goldenContainer"),ve(this,"view"),this.raycaster=new Raycaster,this._mouse=new Vector2$1,this.goldenContainer=oe.goldenContainer,this.view=oe}getIntersectObjByGPU(oe){let ie=oe.offsetX,ue=oe.offsetY;return this.getIntersectObjByCanvasPosition(ie,ue)}getIntersectObjByCanvasPosition(oe,ie){this.view.camera.setViewOffset(this.view.renderer.domElement.width,this.view.renderer.domElement.height,oe*window.devicePixelRatio|0,ie*window.devicePixelRatio|0,1,1),this.view.renderer.setRenderTarget(this.view.pickingTexture),this.view.root.isScene=!0,this.view.root.overrideMaterial=MaterialData.pickMaterial,this.view.root.pickRender=!0,this.view.renderer.render(this.view.root,this.view.camera),this.view.root.pickRender=!1,this.view.root.overrideMaterial=null,this.view.root.isScene=!1;const ue=new Uint8Array(4);return this.view.camera.clearViewOffset(),this.view.renderer.readRenderTargetPixels(this.view.pickingTexture,0,0,1,1,ue),this.view.renderer.setRenderTarget(null),ue[0]<<16|ue[1]<<8|ue[2]}getIntersectMesh(oe){if(oe.type=="dragend"){let ue=this.goldenContainer.getBoundingClientRect();oe={offsetX:oe.x-ue.x,offsetY:oe.y-ue.y}}let ie=this.getIntersectObjByGPU(oe);for(const ue of this.view.app.allDocuments){let de=ue.getElement(ie);if(de){this._mouse.x=oe.offsetX/this.goldenContainer.clientWidth*2-1,this._mouse.y=-(oe.offsetY/this.goldenContainer.clientHeight)*2+1,this.raycaster.setFromCamera(this._mouse,this.view.camera);const he=new Map,pe=new Set;if(ue.tile)for(const xe of de.meshDatas){let Ie=xe.mesh.matrix.clone(),$e=Oe=>{Oe.parent&&(Ie=Ie.premultiply(Oe.parent.matrix),$e(Oe.parent))};$e(xe);let Ne=xe.mesh.clone();Ne.applyMatrix4(Ie),pe.add(Ne),he.set(Ne,xe.mesh)}else for(const xe of de.meshDatas)pe.add(xe.mesh);const _e=Array.from(pe);let Ce=this.raycaster.intersectObjects(_e,!0);if(Ce.length!=0){let xe=Ce[0].object;if(ue.tile){xe=he.get(Ce[0].object);for(const Ie of _e)Ie.geometry.dispose(),Ie.clear();he.clear()}return{id:ie,mesh:xe,intersectPoint:Ce[0].point}}return null}}return null}getIntersectPointByGPU(oe){if(oe.type=="dragend"){let _e=this.goldenContainer.getBoundingClientRect();oe={offsetX:oe.x-_e.x,offsetY:oe.y-_e.y}}let ie=this.view.camera,ue=ie.far;ie instanceof OrthographicCamera&&(ue=50),MaterialData.depthMaterial.setFar&&MaterialData.depthMaterial.setFar(ue);let de=oe.offsetX,he=oe.offsetY;this._mouse.x=de/this.goldenContainer.clientWidth*2-1,this._mouse.y=-(he/this.goldenContainer.clientHeight)*2+1,this.raycaster.setFromCamera(this._mouse,this.view.camera),this.view.camera.setViewOffset(this.view.renderer.domElement.width,this.view.renderer.domElement.height,de*window.devicePixelRatio|0,he*window.devicePixelRatio|0,1,1),this.view.renderer.setRenderTarget(this.view.pickingTexture),this.view.root.isScene=!0,this.view.root.overrideMaterial=MaterialData.depthMaterial,this.view.root.pickRender=!0,this.view.renderer.render(this.view.root,this.view.camera),this.view.root.pickRender=!1,this.view.root.overrideMaterial=null,this.view.root.isScene=!1;const pe=new Uint8Array(4);if(this.view.camera.clearViewOffset(),this.view.renderer.readRenderTargetPixels(this.view.pickingTexture,0,0,1,1,pe),this.view.renderer.setRenderTarget(null),pe[2]!==0||pe[1]!==0||pe[0]!==0){let _e=(pe[0]*65535+pe[1]*255+pe[2])/16777215,Ce=Math.abs(_e)*ue,xe=new Vector3$1,Ie=new Vector3$1,$e=new Vector3$1;xe.set(this._mouse.x,this._mouse.y,1),xe.applyMatrix4(ie.projectionMatrixInverse),Ie.set(this._mouse.x,this._mouse.y,-1),Ie.applyMatrix4(ie.projectionMatrixInverse);const Ne=(-Ce-xe.z)/(Ie.z-xe.z);return $e.set(xe.x+(Ie.x-xe.x)*Ne,xe.y+(Ie.y-xe.y)*Ne,-Ce),$e.applyMatrix4(ie.matrixWorld),$e}return null}getDepthByGPU(oe,ie){let ue=this.view.camera;MaterialData.depthMaterial.setFar&&MaterialData.depthMaterial.setFar(ue.far);let de=this.goldenContainer.clientWidth/2,he=this.goldenContainer.clientHeight/2,pe=de,_e=he;this.view.controls.saveState(),oe!=null&&(this.view.controls.azimuthAngle=oe),ie!=null&&(this.view.controls.polarAngle=ie),this.view.controls.update(),ue.updateMatrixWorld(),ue.setViewOffset(this.view.renderer.domElement.width,this.view.renderer.domElement.height,pe*window.devicePixelRatio|0,_e*window.devicePixelRatio|0,1,1),this.view.renderer.setRenderTarget(this.view.pickingTexture),this.view.root.isScene=!0,this.view.root.overrideMaterial=MaterialData.depthMaterial,this.view.renderer.render(this.view.root,ue),this.view.root.overrideMaterial=null,this.view.root.isScene=!1;const Ce=new Uint8Array(4);if(ue.clearViewOffset(),this.view.renderer.readRenderTargetPixels(this.view.pickingTexture,0,0,1,1,Ce),this.view.renderer.setRenderTarget(null),this.view.controls.reset(),this.view.controls.update(),ue.updateMatrixWorld(),!MaterialData.depthMaterial.setFar)return-1;if(Ce[2]!==0||Ce[1]!==0||Ce[0]!==0){let xe=(Ce[0]*65535+Ce[1]*255+Ce[2])/16777215;return Math.abs(xe)*ue.far}return-1}}class ViewCube{constructor(oe,ie,ue){ve(this,"cameraOrtho"),ve(this,"sceneOrtho"),ve(this,"mesh"),ve(this,"frustumSize",27),ve(this,"_raycaster"),ve(this,"_mouse",new Vector2$1),ve(this,"goldenContainer"),ve(this,"renderer"),ve(this,"view"),ve(this,"div"),ve(this,"hoveredObjectId"),ve(this,"hoveredMesh"),ve(this,"rgb"),ve(this,"viewCubeMeshs",[{vertexs:[-15,-10,-10,-15,-10,10,-15,10,-10,-15,10,10],indexes:[0,1,2,2,1,3],uvs:[5,-5,25,-5,5,-25,25,-25],number_of_triangles:2},{vertexs:[-15,-10,-10,-15,-10,10,-14.87,-11.11,-10,-14.5,-12.17,-10,-13.91,-13.12,-10,-13.12,-13.91,-10,-12.17,-14.5,-10,-11.11,-14.87,-10,-10,-15,-10,-10,-15,10,-14.87,-11.11,10,-14.5,-12.17,10,-13.91,-13.12,10,-13.12,-13.91,10,-12.17,-14.5,10,-11.11,-14.87,10],indexes:[10,1,0,10,0,2,11,2,3,11,3,4,11,10,2,12,11,4,13,4,5,13,12,4,14,5,6,14,6,7,14,13,5,15,14,7,9,7,8,9,15,7],uvs:[],number_of_triangles:14},{vertexs:[-10,-10,-15,-11.11,-10,-14.87,-12.17,-10,-14.5,-13.12,-10,-13.91,-13.91,-10,-13.12,-14.5,-10,-12.17,-14.87,-10,-11.11,-15,-10,-10,-10,10,-15,-11.11,10,-14.87,-12.17,10,-14.5,-13.12,10,-13.91,-13.91,10,-13.12,-14.5,10,-12.17,-14.87,10,-11.11,-15,10,-10],indexes:[7,14,6,15,14,7,5,13,4,6,13,5,14,13,6,13,12,4,4,11,3,12,11,4,2,10,1,3,10,2,11,10,3,10,9,1,1,8,0,9,8,1],uvs:[],number_of_triangles:14},{vertexs:[-10,-10,15,-11.11,-10,14.87,-12.17,-10,14.5,-13.12,-10,13.91,-13.91,-10,13.12,-14.5,-10,12.17,-14.87,-10,11.11,-15,-10,10,-10,10,15,-15,10,10,-14.87,10,11.11,-14.5,10,12.17,-13.91,10,13.12,-13.12,10,13.91,-12.17,10,14.5,-11.11,10,14.87],indexes:[10,7,6,10,9,7,11,5,4,11,6,5,11,10,6,12,11,4,13,4,3,13,12,4,14,2,1,14,3,2,14,13,3,15,14,1,8,1,0,8,15,1],uvs:[],number_of_triangles:14},{vertexs:[-15,10,-10,-15,10,10,-14.87,11.11,-10,-14.5,12.17,-10,-13.91,13.12,-10,-13.12,13.91,-10,-12.17,14.5,-10,-11.11,14.87,-10,-10,15,-10,-10,15,10,-11.11,14.87,10,-12.17,14.5,10,-13.12,13.91,10,-13.91,13.12,10,-14.5,12.17,10,-14.87,11.11,10],indexes:[1,15,0,0,15,2,2,14,3,3,14,4,15,14,2,14,13,4,4,12,5,13,12,4,5,11,6,6,11,7,12,11,5,11,10,7,7,9,8,10,9,7],uvs:[],number_of_triangles:14},{vertexs:[-10,-10,-15,-11.11,-10,-14.87,-12.17,-10,-14.5,-13.12,-10,-13.91,-13.91,-10,-13.12,-14.5,-10,-12.17,-14.87,-10,-11.11,-15,-10,-10,-10,-10,-15,-10,-11.11,-14.87,-10,-12.17,-14.5,-10,-13.12,-13.91,-10,-13.91,-13.12,-10,-14.5,-12.17,-10,-14.87,-11.11,-10,-15,-10,-14.87,-11.11,-10,-14.5,-12.17,-10,-13.91,-13.12,-10,-13.12,-13.91,-10,-12.17,-14.5,-10,-11.11,-14.87,-10,-11.53,-10.24,-14.76,-11.38,-10.7,-14.76,-11.09,-11.09,-14.76,-12.8,-10.91,-14.05,-10.7,-11.38,-14.76,-12.38,-11.73,-14.05,-14,-10.63,-12.94,-10.24,-11.53,-14.76,-11.73,-12.38,-14.05,-13.6,-11.84,-12.94,-10.91,-12.8,-14.05,-12.86,-12.86,-12.94,-14.52,-11.47,-11.55,-11.84,-13.6,-12.94,-13.85,-12.8,-11.55,-10.63,-14,-12.94,-12.8,-13.85,-11.55,-11.47,-14.52,-11.55],indexes:[16,7,6,15,21,14,22,2,1,23,1,0,23,22,1,24,0,8,24,23,0,25,3,2,25,2,22,25,22,23,26,8,9,26,24,8,27,23,24,27,25,23,28,4,3,28,5,4,28,3,25,29,9,10,29,26,9,30,27,24,30,24,26,31,25,27,31,28,25,32,10,11,32,26,29,32,29,10,32,30,26,33,27,30,33,31,27,34,6,5,34,17,16,34,5,28,34,28,31,34,16,6,35,30,32,35,33,30,36,18,17,36,19,18,36,17,34,36,31,33,36,34,31,37,11,12,37,12,13,37,32,11,37,35,32,38,20,19,38,19,36,38,33,35,38,36,33,39,13,14,39,21,20,39,20,38,39,14,21,39,37,13,39,35,37,39,38,35],uvs:[],number_of_triangles:56},{vertexs:[-10,-10,15,-11.11,-10,14.87,-12.17,-10,14.5,-13.12,-10,13.91,-13.91,-10,13.12,-14.5,-10,12.17,-14.87,-10,11.11,-15,-10,10,-10,-10,15,-10,-11.11,14.87,-10,-12.17,14.5,-10,-13.12,13.91,-10,-13.91,13.12,-10,-14.5,12.17,-10,-14.87,11.11,-10,-15,10,-14.87,-11.11,10,-14.5,-12.17,10,-13.91,-13.12,10,-13.12,-13.91,10,-12.17,-14.5,10,-11.11,-14.87,10,-11.53,-10.24,14.76,-11.38,-10.7,14.76,-11.09,-11.09,14.76,-12.8,-10.91,14.05,-10.7,-11.38,14.76,-12.38,-11.73,14.05,-14,-10.63,12.94,-10.24,-11.53,14.76,-11.73,-12.38,14.05,-13.6,-11.84,12.94,-10.91,-12.8,14.05,-12.86,-12.86,12.94,-14.52,-11.47,11.55,-11.84,-13.6,12.94,-13.85,-12.8,11.55,-10.63,-14,12.94,-12.8,-13.85,11.55,-11.47,-14.52,11.55],indexes:[7,16,6,21,15,14,2,22,1,1,23,0,22,23,1,0,24,8,23,24,0,3,25,2,2,25,22,22,25,23,8,26,9,24,26,8,23,27,24,25,27,23,4,28,3,5,28,4,3,28,25,9,29,10,26,29,9,27,30,24,24,30,26,25,31,27,28,31,25,10,32,11,26,32,29,29,32,10,30,32,26,27,33,30,31,33,27,6,34,5,17,34,16,5,34,28,28,34,31,16,34,6,30,35,32,33,35,30,18,36,17,19,36,18,17,36,34,31,36,33,34,36,31,11,37,12,12,37,13,32,37,11,35,37,32,20,38,19,19,38,36,33,38,35,36,38,33,13,39,14,21,39,20,20,39,38,14,39,21,37,39,13,35,39,37,38,39,35],uvs:[],number_of_triangles:56},{vertexs:[-10,-15,-10,-10,-15,10,10,-15,10,10,-15,-10],indexes:[0,2,1,3,2,0],uvs:[5,5,25,5,25,25,5,25],number_of_triangles:2},{vertexs:[-10,-10,-15,-10,10,-15,10,-10,-15,10,10,-15],indexes:[1,3,0,0,3,2],uvs:[5,5,5,25,25,5,25,25],number_of_triangles:2},{vertexs:[-10,10,-15,-11.11,10,-14.87,-12.17,10,-14.5,-13.12,10,-13.91,-13.91,10,-13.12,-14.5,10,-12.17,-14.87,10,-11.11,-15,10,-10,-10,10,-15,-10,11.11,-14.87,-10,12.17,-14.5,-10,13.12,-13.91,-10,13.91,-13.12,-10,14.5,-12.17,-10,14.87,-11.11,-10,15,-10,-14.87,11.11,-10,-14.5,12.17,-10,-13.91,13.12,-10,-13.12,13.91,-10,-12.17,14.5,-10,-11.11,14.87,-10,-11.53,10.24,-14.76,-11.38,10.7,-14.76,-11.09,11.09,-14.76,-12.8,10.91,-14.05,-10.7,11.38,-14.76,-12.38,11.73,-14.05,-14,10.63,-12.94,-10.24,11.53,-14.76,-11.73,12.38,-14.05,-13.6,11.84,-12.94,-10.91,12.8,-14.05,-12.86,12.86,-12.94,-14.52,11.47,-11.55,-11.84,13.6,-12.94,-13.85,12.8,-11.55,-10.63,14,-12.94,-12.8,13.85,-11.55,-11.47,14.52,-11.55],indexes:[7,16,6,21,15,14,2,22,1,1,23,0,22,23,1,0,24,8,23,24,0,3,25,2,2,25,22,22,25,23,8,26,9,24,26,8,23,27,24,25,27,23,4,28,3,5,28,4,3,28,25,9,29,10,26,29,9,27,30,24,24,30,26,25,31,27,28,31,25,10,32,11,26,32,29,29,32,10,30,32,26,27,33,30,31,33,27,6,34,5,17,34,16,5,34,28,28,34,31,16,34,6,30,35,32,33,35,30,18,36,17,19,36,18,17,36,34,31,36,33,34,36,31,11,37,12,12,37,13,32,37,11,35,37,32,20,38,19,19,38,36,33,38,35,36,38,33,13,39,14,21,39,20,20,39,38,14,39,21,37,39,13,35,39,37,38,39,35],uvs:[],number_of_triangles:56},{vertexs:[-10,-10,15,-10,10,15,10,-10,15,10,10,15],indexes:[3,1,0,3,0,2],uvs:[5,5,5,25,25,5,25,25],number_of_triangles:2},{vertexs:[-10,15,10,-11.11,14.87,10,-12.17,14.5,10,-13.12,13.91,10,-13.91,13.12,10,-14.5,12.17,10,-14.87,11.11,10,-15,10,10,-10,15,10,-10,14.87,11.11,-10,14.5,12.17,-10,13.91,13.12,-10,13.12,13.91,-10,12.17,14.5,-10,11.11,14.87,-10,10,15,-14.87,10,11.11,-14.5,10,12.17,-13.91,10,13.12,-13.12,10,13.91,-12.17,10,14.5,-11.11,10,14.87,-11.53,14.76,10.24,-11.38,14.76,10.7,-11.09,14.76,11.09,-12.8,14.05,10.91,-10.7,14.76,11.38,-12.38,14.05,11.73,-14,12.94,10.63,-10.24,14.76,11.53,-11.73,14.05,12.38,-13.6,12.94,11.84,-10.91,14.05,12.8,-12.86,12.94,12.86,-14.52,11.55,11.47,-11.84,12.94,13.6,-13.85,11.55,12.8,-10.63,12.94,14,-12.8,11.55,13.85,-11.47,11.55,14.52],indexes:[7,16,6,21,15,14,2,22,1,1,23,0,22,23,1,0,24,8,23,24,0,3,25,2,2,25,22,22,25,23,8,26,9,24,26,8,23,27,24,25,27,23,4,28,3,5,28,4,3,28,25,9,29,10,26,29,9,27,30,24,24,30,26,25,31,27,28,31,25,10,32,11,26,32,29,29,32,10,30,32,26,27,33,30,31,33,27,6,34,5,17,34,16,5,34,28,28,34,31,16,34,6,30,35,32,33,35,30,18,36,17,19,36,18,17,36,34,31,36,33,34,36,31,11,37,12,12,37,13,32,37,11,35,37,32,20,38,19,19,38,36,33,38,35,36,38,33,13,39,14,21,39,20,20,39,38,14,39,21,37,39,13,35,39,37,38,39,35],uvs:[],number_of_triangles:56},{vertexs:[-10,15,-10,-10,15,10,10,15,10,10,15,-10],indexes:[2,0,1,2,3,0],uvs:[5,5,25,5,25,25,5,25],number_of_triangles:2},{vertexs:[-10,-10,-15,-10,-11.11,-14.87,-10,-12.17,-14.5,-10,-13.12,-13.91,-10,-13.91,-13.12,-10,-14.5,-12.17,-10,-14.87,-11.11,-10,-15,-10,10,-10,-15,10,-11.11,-14.87,10,-12.17,-14.5,10,-13.12,-13.91,10,-13.91,-13.12,10,-14.5,-12.17,10,-14.87,-11.11,10,-15,-10],indexes:[14,7,6,14,15,7,13,5,4,13,6,5,13,14,6,12,13,4,11,4,3,11,12,4,10,2,1,10,3,2,10,11,3,9,10,1,8,1,0,8,9,1],uvs:[],number_of_triangles:14},{vertexs:[-10,-10,15,-10,-11.11,14.87,-10,-12.17,14.5,-10,-13.12,13.91,-10,-13.91,13.12,-10,-14.5,12.17,-10,-14.87,11.11,-10,-15,10,10,-10,15,10,-11.11,14.87,10,-12.17,14.5,10,-13.12,13.91,10,-13.91,13.12,10,-14.5,12.17,10,-14.87,11.11,10,-15,10],indexes:[7,14,6,15,14,7,5,13,4,6,13,5,14,13,6,13,12,4,4,11,3,12,11,4,2,10,1,3,10,2,11,10,3,10,9,1,1,8,0,9,8,1],uvs:[],number_of_triangles:14},{vertexs:[15,-10,-10,15,-10,10,14.87,-11.11,-10,14.5,-12.17,-10,13.91,-13.12,-10,13.12,-13.91,-10,12.17,-14.5,-10,11.11,-14.87,-10,10,-15,-10,10,-15,10,14.87,-11.11,10,14.5,-12.17,10,13.91,-13.12,10,13.12,-13.91,10,12.17,-14.5,10,11.11,-14.87,10],indexes:[1,10,0,0,10,2,2,11,3,3,11,4,10,11,2,11,12,4,4,13,5,12,13,4,5,14,6,6,14,7,13,14,5,14,15,7,7,9,8,15,9,7],uvs:[],number_of_triangles:14},{vertexs:[-10,10,-15,-10,11.11,-14.87,-10,12.17,-14.5,-10,13.12,-13.91,-10,13.91,-13.12,-10,14.5,-12.17,-10,14.87,-11.11,-10,15,-10,10,10,-15,10,11.11,-14.87,10,12.17,-14.5,10,13.12,-13.91,10,13.91,-13.12,10,14.5,-12.17,10,14.87,-11.11,10,15,-10],indexes:[7,14,6,15,14,7,5,13,4,6,13,5,14,13,6,13,12,4,4,11,3,12,11,4,2,10,1,3,10,2,11,10,3,10,9,1,1,8,0,9,8,1],uvs:[],number_of_triangles:14},{vertexs:[10,-10,-15,11.11,-10,-14.87,12.17,-10,-14.5,13.12,-10,-13.91,13.91,-10,-13.12,14.5,-10,-12.17,14.87,-10,-11.11,15,-10,-10,10,10,-15,11.11,10,-14.87,12.17,10,-14.5,13.12,10,-13.91,13.91,10,-13.12,14.5,10,-12.17,14.87,10,-11.11,15,10,-10],indexes:[14,7,6,14,15,7,13,5,4,13,6,5,13,14,6,12,13,4,11,4,3,11,12,4,10,2,1,10,3,2,10,11,3,9,10,1,8,1,0,8,9,1],uvs:[],number_of_triangles:14},{vertexs:[-10,15,10,-10,14.87,11.11,-10,14.5,12.17,-10,13.91,13.12,-10,13.12,13.91,-10,12.17,14.5,-10,11.11,14.87,-10,10,15,10,10,15,10,15,10,10,14.87,11.11,10,14.5,12.17,10,13.91,13.12,10,13.12,13.91,10,12.17,14.5,10,11.11,14.87],indexes:[10,0,1,10,9,0,11,1,2,11,2,3,11,10,1,12,11,3,13,3,4,13,12,3,14,4,5,14,5,6,14,13,4,15,14,6,8,6,7,8,15,6],uvs:[],number_of_triangles:14},{vertexs:[10,-10,15,11.11,-10,14.87,12.17,-10,14.5,13.12,-10,13.91,13.91,-10,13.12,14.5,-10,12.17,14.87,-10,11.11,15,-10,10,10,10,15,15,10,10,14.87,10,11.11,14.5,10,12.17,13.91,10,13.12,13.12,10,13.91,12.17,10,14.5,11.11,10,14.87],indexes:[7,10,6,9,10,7,5,11,4,6,11,5,10,11,6,11,12,4,4,13,3,12,13,4,2,14,1,3,14,2,13,14,3,14,15,1,1,8,0,15,8,1],uvs:[],number_of_triangles:14},{vertexs:[15,10,-10,15,10,10,14.87,11.11,-10,14.5,12.17,-10,13.91,13.12,-10,13.12,13.91,-10,12.17,14.5,-10,11.11,14.87,-10,10,15,-10,10,15,10,11.11,14.87,10,12.17,14.5,10,13.12,13.91,10,13.91,13.12,10,14.5,12.17,10,14.87,11.11,10],indexes:[15,1,0,15,0,2,14,2,3,14,3,4,14,15,2,13,14,4,12,4,5,12,13,4,11,5,6,11,6,7,11,12,5,10,11,7,9,7,8,9,10,7],uvs:[],number_of_triangles:14},{vertexs:[10,-10,-15,11.11,-10,-14.87,12.17,-10,-14.5,13.12,-10,-13.91,13.91,-10,-13.12,14.5,-10,-12.17,14.87,-10,-11.11,15,-10,-10,10,-10,-15,10,-11.11,-14.87,10,-12.17,-14.5,10,-13.12,-13.91,10,-13.91,-13.12,10,-14.5,-12.17,10,-14.87,-11.11,10,-15,-10,14.87,-11.11,-10,14.5,-12.17,-10,13.91,-13.12,-10,13.12,-13.91,-10,12.17,-14.5,-10,11.11,-14.87,-10,11.53,-10.24,-14.76,11.38,-10.7,-14.76,11.09,-11.09,-14.76,12.8,-10.91,-14.05,10.7,-11.38,-14.76,12.38,-11.73,-14.05,14,-10.63,-12.94,10.24,-11.53,-14.76,11.73,-12.38,-14.05,13.6,-11.84,-12.94,10.91,-12.8,-14.05,12.86,-12.86,-12.94,14.52,-11.47,-11.55,11.84,-13.6,-12.94,13.85,-12.8,-11.55,10.63,-14,-12.94,12.8,-13.85,-11.55,11.47,-14.52,-11.55],indexes:[7,16,6,21,15,14,2,22,1,1,23,0,22,23,1,0,24,8,23,24,0,3,25,2,2,25,22,22,25,23,8,26,9,24,26,8,23,27,24,25,27,23,4,28,3,5,28,4,3,28,25,9,29,10,26,29,9,27,30,24,24,30,26,25,31,27,28,31,25,10,32,11,26,32,29,29,32,10,30,32,26,27,33,30,31,33,27,6,34,5,17,34,16,5,34,28,28,34,31,16,34,6,30,35,32,33,35,30,18,36,17,19,36,18,17,36,34,31,36,33,34,36,31,11,37,12,12,37,13,32,37,11,35,37,32,20,38,19,19,38,36,33,38,35,36,38,33,13,39,14,21,39,20,20,39,38,14,39,21,37,39,13,35,39,37,38,39,35],uvs:[],number_of_triangles:56},{vertexs:[10,-10,15,11.11,-10,14.87,12.17,-10,14.5,13.12,-10,13.91,13.91,-10,13.12,14.5,-10,12.17,14.87,-10,11.11,15,-10,10,10,-10,15,10,-11.11,14.87,10,-12.17,14.5,10,-13.12,13.91,10,-13.91,13.12,10,-14.5,12.17,10,-14.87,11.11,10,-15,10,14.87,-11.11,10,14.5,-12.17,10,13.91,-13.12,10,13.12,-13.91,10,12.17,-14.5,10,11.11,-14.87,10,11.53,-10.24,14.76,11.38,-10.7,14.76,11.09,-11.09,14.76,12.8,-10.91,14.05,10.7,-11.38,14.76,12.38,-11.73,14.05,14,-10.63,12.94,10.24,-11.53,14.76,11.73,-12.38,14.05,13.6,-11.84,12.94,10.91,-12.8,14.05,12.86,-12.86,12.94,14.52,-11.47,11.55,11.84,-13.6,12.94,13.85,-12.8,11.55,10.63,-14,12.94,12.8,-13.85,11.55,11.47,-14.52,11.55],indexes:[16,7,6,15,21,14,22,2,1,23,1,0,23,22,1,24,0,8,24,23,0,25,3,2,25,2,22,25,22,23,26,8,9,26,24,8,27,23,24,27,25,23,28,4,3,28,5,4,28,3,25,29,9,10,29,26,9,30,27,24,30,24,26,31,25,27,31,28,25,32,10,11,32,26,29,32,29,10,32,30,26,33,27,30,33,31,27,34,6,5,34,17,16,34,5,28,34,28,31,34,16,6,35,30,32,35,33,30,36,18,17,36,19,18,36,17,34,36,31,33,36,34,31,37,11,12,37,12,13,37,32,11,37,35,32,38,20,19,38,19,36,38,33,35,38,36,33,39,13,14,39,21,20,39,20,38,39,14,21,39,37,13,39,35,37,39,38,35],uvs:[],number_of_triangles:56},{vertexs:[15,-10,-10,15,-10,10,15,10,-10,15,10,10],indexes:[1,0,2,1,2,3],uvs:[5,-5,25,-5,5,-25,25,-25],number_of_triangles:2},{vertexs:[10,10,-15,11.11,10,-14.87,12.17,10,-14.5,13.12,10,-13.91,13.91,10,-13.12,14.5,10,-12.17,14.87,10,-11.11,15,10,-10,10,10,-15,10,11.11,-14.87,10,12.17,-14.5,10,13.12,-13.91,10,13.91,-13.12,10,14.5,-12.17,10,14.87,-11.11,10,15,-10,14.87,11.11,-10,14.5,12.17,-10,13.91,13.12,-10,13.12,13.91,-10,12.17,14.5,-10,11.11,14.87,-10,11.53,10.24,-14.76,11.38,10.7,-14.76,11.09,11.09,-14.76,12.8,10.91,-14.05,10.7,11.38,-14.76,12.38,11.73,-14.05,14,10.63,-12.94,10.24,11.53,-14.76,11.73,12.38,-14.05,13.6,11.84,-12.94,10.91,12.8,-14.05,12.86,12.86,-12.94,14.52,11.47,-11.55,11.84,13.6,-12.94,13.85,12.8,-11.55,10.63,14,-12.94,12.8,13.85,-11.55,11.47,14.52,-11.55],indexes:[16,7,6,15,21,14,22,2,1,23,1,0,23,22,1,24,0,8,24,23,0,25,3,2,25,2,22,25,22,23,26,8,9,26,24,8,27,23,24,27,25,23,28,4,3,28,5,4,28,3,25,29,9,10,29,26,9,30,27,24,30,24,26,31,25,27,31,28,25,32,10,11,32,26,29,32,29,10,32,30,26,33,27,30,33,31,27,34,6,5,34,17,16,34,5,28,34,28,31,34,16,6,35,30,32,35,33,30,36,18,17,36,19,18,36,17,34,36,31,33,36,34,31,37,11,12,37,12,13,37,32,11,37,35,32,38,20,19,38,19,36,38,33,35,38,36,33,39,13,14,39,21,20,39,20,38,39,14,21,39,37,13,39,35,37,39,38,35],uvs:[],number_of_triangles:56},{vertexs:[10,15,10,11.11,14.87,10,12.17,14.5,10,13.12,13.91,10,13.91,13.12,10,14.5,12.17,10,14.87,11.11,10,15,10,10,10,15,10,10,14.87,11.11,10,14.5,12.17,10,13.91,13.12,10,13.12,13.91,10,12.17,14.5,10,11.11,14.87,10,10,15,14.87,10,11.11,14.5,10,12.17,13.91,10,13.12,13.12,10,13.91,12.17,10,14.5,11.11,10,14.87,11.53,14.76,10.24,11.38,14.76,10.7,11.09,14.76,11.09,12.8,14.05,10.91,10.7,14.76,11.38,12.38,14.05,11.73,14,12.94,10.63,10.24,14.76,11.53,11.73,14.05,12.38,13.6,12.94,11.84,10.91,14.05,12.8,12.86,12.94,12.86,14.52,11.55,11.47,11.84,12.94,13.6,13.85,11.55,12.8,10.63,12.94,14,12.8,11.55,13.85,11.47,11.55,14.52],indexes:[16,7,6,15,21,14,22,2,1,23,1,0,23,22,1,24,0,8,24,23,0,25,3,2,25,2,22,25,22,23,26,8,9,26,24,8,27,23,24,27,25,23,28,4,3,28,5,4,28,3,25,29,9,10,29,26,9,30,27,24,30,24,26,31,25,27,31,28,25,32,10,11,32,26,29,32,29,10,32,30,26,33,27,30,33,31,27,34,6,5,34,17,16,34,5,28,34,28,31,34,16,6,35,30,32,35,33,30,36,18,17,36,19,18,36,17,34,36,31,33,36,34,31,37,11,12,37,12,13,37,32,11,37,35,32,38,20,19,38,19,36,38,33,35,38,36,33,39,13,14,39,21,20,39,20,38,39,14,21,39,37,13,39,35,37,39,38,35],uvs:[],number_of_triangles:56}]),ve(this,"_show",!0),this.goldenContainer=oe,this.view=ie,this.init(),this.rgb=[];const de=ue.substring(0,7);this.rgb.push(parseInt(de.slice(1,3),16)/255),this.rgb.push(parseInt(de.slice(3,5),16)/255),this.rgb.push(parseInt(de.slice(5,7),16)/255)}init(){this.initOrthoCamera(),this.initOrthoScene(),this.setZUpAxis(!1),this._raycaster=new Raycaster,this.renderer=new WebGLRenderer({antialias:!0,alpha:!0}),this.div=document.createElement("div"),this.div.style.width="120px",this.div.style.height="120px",this.div.style.top="30px",this.div.style.right="30px",this.div.style.position="absolute",this.renderer.domElement.width=120,this.renderer.domElement.height=120,this.div.appendChild(this.renderer.domElement),this.goldenContainer.appendChild(this.div),this.div.addEventListener("contextmenu",oe=>oe.preventDefault()),this._initEvent()}_initEvent(){this.div.addEventListener("click",oe=>{const ie=this.getIntersection(oe);if(ie){const ue=ie.object,de=ue.geometry.attributes.elementID.getX(ie.face.a);this._setMeshIndexColor(ue,de,this.rgb[0],this.rgb[1],this.rgb[2]),this._setViewPosition(de)}}),this.div.addEventListener("mousemove",oe=>{const ie=this.getIntersection(oe);if(ie){const ue=ie.object,de=ue.geometry.attributes.elementID.getX(ie.face.a);if(this.hoveredObjectId===de)return;this.resetHover(),this.hoveredMesh=ue,this.hoveredObjectId=de,this._setMeshIndexColor(ue,de,this.rgb[0],this.rgb[1],this.rgb[2])}else this.resetHover()}),this.div.addEventListener("mouseleave",()=>{this.resetHover()})}resetHover(){this.hoveredMesh&&(this._setMeshIndexColor(this.hoveredMesh,this.hoveredObjectId,1,1,1),this.hoveredMesh=null,this.hoveredObjectId=null)}_setMeshIndexColor(oe,ie,ue,de,he){const pe=oe.geometry.attributes.color,_e=oe.geometry.attributes.elementID;for(let Ce=0;Ce<_e.count;Ce++)_e.getX(Ce)===ie&&pe.setXYZ(Ce,ue,de,he);pe.needsUpdate=!0,this.render()}initOrthoScene(){this.sceneOrtho=new Scene,this.mesh=new Group,this.sceneOrtho.add(new AmbientLight(16777215,1.4));const oe=new Vector3$1(-15,-15,15);this.sceneOrtho.add(new ArrowHelper(new Vector3$1(1,0,0),oe,30,8331296,4,2)),this.sceneOrtho.add(new ArrowHelper(new Vector3$1(0,1,0),oe,30,2129696,4,2)),this.sceneOrtho.add(new ArrowHelper(new Vector3$1(0,0,-1),oe,30,2105471,4,2)),[{text:"",position:[0,0,15],rotation:[0,0,0],index:10},{text:"",position:[0,0,-15],rotation:[Math.PI,0,0],index:8,rotate:180},{text:"",position:[-15,0,0],rotation:[0,-Math.PI/2,0],index:0},{text:"",position:[15,0,0],rotation:[0,Math.PI/2,0],index:23},{text:"",position:[0,-15,0],rotation:[Math.PI/2,0,0],index:7},{text:"",position:[0,15,0],rotation:[-Math.PI/2,0,0],index:12}].forEach(Ie=>{const $e=this.creatTextMaterial(Ie.text,Ie.rotate);$e.vertexColors=!0;const Ne=new PlaneGeometry(20,20);Ne.rotateX(Ie.rotation[0]),Ne.rotateY(Ie.rotation[1]),Ne.rotateZ(Ie.rotation[2]),Ne.translate(Ie.position[0],Ie.position[1],Ie.position[2]);const Oe=new Uint8BufferAttribute(new Uint8Array(Ne.attributes.position.count*3).fill(255),3,!0),Fe=new Uint8BufferAttribute(new Uint8Array(Ne.attributes.position.count).fill(Ie.index),1);Ne.setAttribute("color",Oe),Ne.setAttribute("elementID",Fe);const Ve=new Mesh(Ne,$e);this.mesh.add(Ve)});const ie=[],ue=[],de=[];let he=0;for(let Ie=0;Ie<this.viewCubeMeshs.length;Ie++){const $e=this.viewCubeMeshs[Ie];if($e.number_of_triangles!=2){const Ne=$e.vertexs.length/3;for(let Fe=0;Fe<Ne;Fe++){const Ve=3*Fe;ie.push($e.vertexs[Ve]),ie.push($e.vertexs[Ve+1]),ie.push($e.vertexs[Ve+2]),de.push(Ie)}let Oe=0;for(const Fe of $e.indexes)ue.push(Fe+he),Fe>Oe&&(Oe=Fe);he=he+Oe+1}}const pe=new MeshBasicMaterial;let _e=new BufferGeometry;_e.setIndex(ue),_e.setAttribute("position",new Float32BufferAttribute(ie,3)),_e.setAttribute("elementID",new Uint8BufferAttribute(de,1));const Ce=new Uint8BufferAttribute(new Uint8Array(ie.length).fill(255),3,!0);_e.setAttribute("color",Ce),pe.vertexColors=!0;const xe=new Mesh(_e,pe);this.mesh.add(xe),this.sceneOrtho.add(this.mesh)}getIntersection(oe){this._mouse.x=oe.offsetX/this.div.clientWidth*2-1,this._mouse.y=-(oe.offsetY/this.div.clientHeight)*2+1,this._raycaster.setFromCamera(this._mouse,this.cameraOrtho);let ie=this._raycaster.intersectObjects(this.mesh.children,!0);return ie.length>0?ie[0]:null}creatTextMaterial(oe,ie=0){let ue=512,de=512,he=document.createElement("canvas");he.width=ue,he.height=de;let pe=he.getContext("2d");if(pe.fillStyle="#ffffff",pe.fillRect(0,0,ue,de),pe.font='200px " bold',pe.textAlign="center",pe.fillStyle="#000000",pe.textBaseline="middle",ie!=0){let _e=(he.width-ue)*.5,Ce=(he.height-de)*.5,xe=_e+.5*ue,Ie=Ce+.5*de;pe.translate(xe,Ie),pe.rotate(Math.PI/180*ie),pe.translate(-xe,-Ie)}return pe.fillText(oe,ue/2,de/2),new MeshLambertMaterial({map:new CanvasTexture(he)})}initOrthoCamera(){this.cameraOrtho=new OrthographicCamera(-this.frustumSize,this.frustumSize,this.frustumSize,-this.frustumSize,.1,1e4),this.cameraOrtho.position.set(0,50,100),this.cameraOrtho.lookAt(0,0,0),this.cameraOrtho.up=new Vector3$1(0,0,1)}setZUpAxis(oe){oe==!0?this.cameraOrtho.up=new Vector3$1(0,0,1):this.cameraOrtho.up=new Vector3$1(0,1,0)}render(){this.cameraOrtho.position.copy(this.view.controls.getPosition()),this.cameraOrtho.position.sub(this.view.controls.getTarget()),this.cameraOrtho.lookAt(this.view.scene.position);let oe=this.cameraOrtho.position.normalize();this.cameraOrtho.position.x=oe.x*50,this.cameraOrtho.position.y=oe.y*50,this.cameraOrtho.position.z=oe.z*50,this.renderer.setViewport(0,0,this.div.clientWidth,this.div.clientHeight),this.renderer.render(this.sceneOrtho,this.cameraOrtho)}onWindowResize(){this.cameraOrtho.left=-this.frustumSize,this.cameraOrtho.right=this.frustumSize,this.cameraOrtho.top=this.frustumSize,this.cameraOrtho.bottom=-this.frustumSize,this.cameraOrtho.updateProjectionMatrix()}set show(oe){this._show!=oe&&(this._show=oe,oe?this.div.style.display="":this.div.style.display="none")}get show(){return this._show}_setViewPosition(oe){switch(oe){case 0:this.view.rotateTo(-Math.PI/2,Math.PI/2);break;case 23:this.view.rotateTo(Math.PI/2,Math.PI/2);break;case 10:this.view.rotateTo(0,Math.PI/2);break;case 8:this.view.rotateTo(Math.PI,Math.PI/2);break;case 12:this.view.rotateTo(0,0);break;case 7:this.view.rotateTo(0,Math.PI);break;case 18:this.view.rotateTo(0,Math.PI/4);break;case 14:this.view.rotateTo(0,Math.PI*3/4);break;case 3:this.view.rotateTo(-Math.PI/4,Math.PI/2);break;case 19:this.view.rotateTo(Math.PI/4,Math.PI/2);break;case 11:this.view.rotateTo(-Math.PI/4,Math.PI/4);break;case 6:this.view.rotateTo(-Math.PI/4,Math.PI*3/4);break;case 25:this.view.rotateTo(Math.PI/4,Math.PI/4);break;case 22:this.view.rotateTo(Math.PI/4,Math.PI*3/4);break;case 20:this.view.rotateTo(Math.PI/2,Math.PI/4);break;case 15:this.view.rotateTo(Math.PI/2,Math.PI*3/4);break;case 4:this.view.rotateTo(-Math.PI/2,Math.PI/4);break;case 1:this.view.rotateTo(-Math.PI/2,Math.PI*3/4);break;case 16:this.view.rotateTo(Math.PI,Math.PI/4);break;case 13:this.view.rotateTo(Math.PI,Math.PI*3/4);break;case 2:this.view.rotateTo(-Math.PI*3/4,Math.PI/2);break;case 17:this.view.rotateTo(Math.PI*3/4,Math.PI/2);break;case 21:this.view.rotateTo(Math.PI*3/4,Math.PI*3/4);break;case 5:this.view.rotateTo(-Math.PI*3/4,Math.PI*3/4);break;case 9:this.view.rotateTo(-Math.PI*3/4,Math.PI/4);break;case 24:this.view.rotateTo(Math.PI*3/4,Math.PI/4);break}}}const hr=class wo{constructor(oe,ie,ue,de,he){for(ve(this,"isOpen",!1),ve(this,"sectionBox"),ve(this,"root"),ve(this,"scene"),ve(this,"camera"),ve(this,"renderer"),ve(this,"goldenContainer"),ve(this,"controls"),ve(this,"boxMin",new Vector3$1),ve(this,"boxMax",new Vector3$1),ve(this,"group",new Group),ve(this,"planes",[]),ve(this,"vertices",[new Vector3$1,new Vector3$1,new Vector3$1,new Vector3$1,new Vector3$1,new Vector3$1,new Vector3$1,new Vector3$1]),ve(this,"faces",[]),ve(this,"lines",[]),ve(this,"raycaster",new Raycaster),ve(this,"mousePosition",new Vector2$1),ve(this,"activeFace",null),ve(this,"onMouseMove",pe=>{this.updateMouseAndRay(pe);const _e=this.raycaster.intersectObjects(this.faces);if(_e.length){this.renderer.domElement.style.cursor="pointer";const Ce=_e[0].object;Ce!==this.activeFace&&(this.activeFace&&this.activeFace.setActive(!1),Ce.setActive(!0),this.activeFace=Ce)}else this.activeFace&&(this.activeFace.setActive(!1),this.activeFace=null,this.renderer.domElement.style.cursor="auto")}),ve(this,"onMouseDown",pe=>{const _e=pe.button===0;if(this.activeFace&&_e){this.updateMouseAndRay(pe);const Ce=this.raycaster.intersectObjects(this.faces);if(Ce.length){const xe=Ce[0].object.axis,Ie=Ce[0].point;this.drag.start(xe,Ie)}}}),ve(this,"drag",{axis:"",point:new Vector3$1,ground:new Mesh(new PlaneGeometry(1e12,1e12),new MeshBasicMaterial({colorWrite:!1,depthWrite:!1,side:DoubleSide})),start:(pe,_e)=>{this.drag.axis=pe,this.drag.point=_e,this.drag.initGround(),this.controls.enabled=!1,this.renderer.domElement.style.cursor="move",window.removeEventListener("pointermove",this.onMouseMove),window.addEventListener("pointermove",this.drag.mousemove),window.addEventListener("pointerup",this.drag.mouseup)},end:()=>{this.root.remove(this.drag.ground),this.controls.enabled=!0,window.removeEventListener("pointermove",this.drag.mousemove),window.removeEventListener("pointerup",this.drag.mouseup),window.addEventListener("pointermove",this.onMouseMove)},mousemove:pe=>{this.updateMouseAndRay(pe);const _e=this.raycaster.intersectObject(this.drag.ground);_e.length&&(this.drag.updateSectionBox(_e[0].point),this.controls.dispatchEvent({type:"control"}))},mouseup:()=>{this.drag.end()},initGround:()=>{const pe={xLeft:new Vector3$1(-1,0,0),xRight:new Vector3$1(1,0,0),yDown:new Vector3$1(0,-1,0),yUp:new Vector3$1(0,1,0),zBack:new Vector3$1(0,0,-1),zFront:new Vector3$1(0,0,1)};["xLeft","xRight"].includes(this.drag.axis)?this.drag.point.setX(0):["yDown","yUp"].includes(this.drag.axis)?this.drag.point.setY(0):["zBack","zFront"].includes(this.drag.axis)&&this.drag.point.setZ(0),this.drag.ground.position.copy(this.drag.point);const _e=this.camera.position.clone().sub(this.camera.position.clone().projectOnVector(pe[this.drag.axis])).add(this.drag.point);this.drag.ground.lookAt(_e),this.root.add(this.drag.ground)},updateSectionBox:pe=>{const _e=wo.MIN_WIDTH;switch(this.drag.axis){case"yUp":this.boxMax.setY(Math.max(this.boxMin.y+_e,pe.y));break;case"yDown":this.boxMin.setY(Math.min(this.boxMax.y-_e,pe.y));break;case"xLeft":this.boxMin.setX(Math.min(this.boxMax.x-_e,pe.x));break;case"xRight":this.boxMax.setX(Math.max(this.boxMin.x+_e,pe.x));break;case"zFront":this.boxMax.setZ(Math.max(this.boxMin.z+_e,pe.z));break;case"zBack":this.boxMin.setZ(Math.min(this.boxMax.z-_e,pe.z));break}this.updatePlanes(),this.initOrUpdateVertices(),this.initOrUpdateFaces(),this.initOrUpdateLines()}}),this.scene=oe,this.root=oe;this.root.parent!==null;)this.root=this.root.parent;this.camera=ie,this.renderer=ue,this.goldenContainer=he,this.controls=de}setSectionBox(oe){this.sectionBox=oe}open(){this.initSectionBox(),this.addMouseListener(),this.isOpen=!0,this.renderer.localClippingEnabled=!0}close(){this.isOpen=!1,this.removeMouseListener(),this.clearSectionBox()}reset(){this.close(),this.open()}initSectionBox(){if(!this.sectionBox)throw new Error("Need to set sectionBox first!");this.boxMin=this.sectionBox.min,this.boxMax=this.sectionBox.max,this.group=new Group,this.initPlanes(),this.initOrUpdateVertices(),this.initOrUpdateFaces(),this.initOrUpdateLines(),this.root.add(this.group)}initPlanes(){this.planes=[],this.planes.push(new Plane(new Vector3$1(0,-1,0),this.boxMax.y),new Plane(new Vector3$1(0,1,0),-this.boxMin.y),new Plane(new Vector3$1(1,0,0),-this.boxMin.x),new Plane(new Vector3$1(-1,0,0),this.boxMax.x),new Plane(new Vector3$1(0,0,-1),this.boxMax.z),new Plane(new Vector3$1(0,0,1),-this.boxMin.z))}updatePlanes(){this.planes[0].constant=this.boxMax.y,this.planes[1].constant=-this.boxMin.y,this.planes[2].constant=-this.boxMin.x,this.planes[3].constant=this.boxMax.x,this.planes[4].constant=this.boxMax.z,this.planes[5].constant=-this.boxMin.z}initOrUpdateVertices(){this.vertices[0].set(this.boxMin.x,this.boxMax.y,this.boxMin.z),this.vertices[1].set(this.boxMax.x,this.boxMax.y,this.boxMin.z),this.vertices[2].set(this.boxMax.x,this.boxMax.y,this.boxMax.z),this.vertices[3].set(this.boxMin.x,this.boxMax.y,this.boxMax.z),this.vertices[4].set(this.boxMin.x,this.boxMin.y,this.boxMin.z),this.vertices[5].set(this.boxMax.x,this.boxMin.y,this.boxMin.z),this.vertices[6].set(this.boxMax.x,this.boxMin.y,this.boxMax.z),this.vertices[7].set(this.boxMin.x,this.boxMin.y,this.boxMax.z)}initOrUpdateFaces(){const oe=this.vertices;if(!this.faces||this.faces.length===0)this.faces=[],this.faces.push(new BoxFace("yUp",[oe[0],oe[1],oe[2],oe[3]]),new BoxFace("yDown",[oe[4],oe[7],oe[6],oe[5]]),new BoxFace("xLeft",[oe[0],oe[3],oe[7],oe[4]]),new BoxFace("xRight",[oe[1],oe[5],oe[6],oe[2]]),new BoxFace("zFront",[oe[2],oe[6],oe[7],oe[3]]),new BoxFace("zBack",[oe[0],oe[4],oe[5],oe[1]])),this.group.add(...this.faces),this.faces.forEach(ie=>{this.group.add(ie.backFace)});else{const ie=this.faces;ie[0].setFromPoints([oe[0],oe[1],oe[2],oe[3]]),ie[1].setFromPoints([oe[4],oe[7],oe[6],oe[5]]),ie[2].setFromPoints([oe[0],oe[3],oe[7],oe[4]]),ie[3].setFromPoints([oe[1],oe[5],oe[6],oe[2]]),ie[4].setFromPoints([oe[2],oe[6],oe[7],oe[3]]),ie[5].setFromPoints([oe[0],oe[4],oe[5],oe[1]])}}initOrUpdateLines(){const oe=this.vertices;if(!this.lines||this.lines.length===0){const ie=this.faces;if(!ie)throw Error("Need to init Face first!");this.lines=[],this.lines.push(new BoxLine([oe[0],oe[1]],[ie[0],ie[5]]),new BoxLine([oe[1],oe[2]],[ie[0],ie[3]]),new BoxLine([oe[2],oe[3]],[ie[0],ie[4]]),new BoxLine([oe[3],oe[0]],[ie[0],ie[2]]),new BoxLine([oe[4],oe[5]],[ie[1],ie[5]]),new BoxLine([oe[5],oe[6]],[ie[1],ie[3]]),new BoxLine([oe[6],oe[7]],[ie[1],ie[4]]),new BoxLine([oe[7],oe[4]],[ie[1],ie[2]]),new BoxLine([oe[0],oe[4]],[ie[2],ie[5]]),new BoxLine([oe[1],oe[5]],[ie[3],ie[5]]),new BoxLine([oe[2],oe[6]],[ie[3],ie[4]]),new BoxLine([oe[3],oe[7]],[ie[2],ie[4]])),this.group.add(...this.lines)}else{let ie=0;this.lines[ie++].setFromPoints([oe[0],oe[1]]),this.lines[ie++].setFromPoints([oe[1],oe[2]]),this.lines[ie++].setFromPoints([oe[2],oe[3]]),this.lines[ie++].setFromPoints([oe[3],oe[0]]),this.lines[ie++].setFromPoints([oe[4],oe[5]]),this.lines[ie++].setFromPoints([oe[5],oe[6]]),this.lines[ie++].setFromPoints([oe[6],oe[7]]),this.lines[ie++].setFromPoints([oe[7],oe[4]]),this.lines[ie++].setFromPoints([oe[0],oe[4]]),this.lines[ie++].setFromPoints([oe[1],oe[5]]),this.lines[ie++].setFromPoints([oe[2],oe[6]]),this.lines[ie++].setFromPoints([oe[3],oe[7]])}}clearSectionBox(){this.root.remove(this.group),this.renderer.domElement.style.cursor=""}addMouseListener(){this.goldenContainer.addEventListener("pointermove",this.onMouseMove),this.goldenContainer.addEventListener("pointerdown",this.onMouseDown)}removeMouseListener(){this.goldenContainer.removeEventListener("pointermove",this.onMouseMove),this.goldenContainer.removeEventListener("pointerdown",this.onMouseDown)}updateMouseAndRay(oe){this.mousePosition.setX(oe.offsetX/this.goldenContainer.clientWidth*2-1),this.mousePosition.setY(-(oe.offsetY/this.goldenContainer.clientHeight)*2+1),this.raycaster.setFromCamera(this.mousePosition,this.camera)}};ve(hr,"MIN_WIDTH",1);let BaseBoxSection=hr;class BoxLine extends LineSegments{constructor(oe,ie){super(),ve(this,"normalMaterial",new LineBasicMaterial({color:0})),ve(this,"activeMaterial",new LineBasicMaterial({color:1048575})),ie.forEach(ue=>ue.lines.push(this)),this.geometry=new BufferGeometry,this.geometry.setFromPoints(oe),this.material=this.normalMaterial}setFromPoints(oe){this.geometry.setFromPoints(oe)}setActive(oe){this.material=oe?this.activeMaterial:this.normalMaterial}}class BoxFace extends Mesh{constructor(oe,ie){super(),ve(this,"axis"),ve(this,"lines",[]),ve(this,"backFace"),this.axis=oe,this.lines=[],this.geometry=new BufferGeometry,this.geometry.setFromPoints(ie),this.geometry.setIndex([0,3,2,0,2,1]),this.geometry.computeVertexNormals(),this.material=new MeshBasicMaterial({colorWrite:!1,depthWrite:!1});const ue=new MeshBasicMaterial({color:11648971,transparent:!0,opacity:.3,side:BackSide});this.backFace=new Mesh(this.geometry,ue)}setFromPoints(oe){this.geometry.setFromPoints(oe)}setActive(oe){this.lines.forEach(ie=>{ie.setActive(oe)})}}class ObjectsBoxSection extends BaseBoxSection{constructor(oe,ie,ue,de,he,pe){super(ie,ue,de,he,pe),super.setSectionBox(oe)}resBox(){let oe=new BoxHelper(this.scene);oe.geometry.computeBoundingBox();const ie=oe.geometry.boundingBox;this.sectionBox=ie}initPlanes(){super.initPlanes(),this.scene.children.forEach(oe=>{oe&&oe.traverse(ie=>{["Mesh","LineSegments"].includes(ie.type)&&(ie.material.clippingPlanes=this.planes,ie.material.clipIntersection=!1)})}),MaterialData.pickMaterial.clippingPlanes=this.planes,MaterialData.pickMaterial.clipIntersection=!1}clearSectionBox(){super.clearSectionBox(),this.scene.children.forEach(oe=>{oe&&oe.traverse(ie=>{["Mesh","LineSegments"].includes(ie.type)&&(ie.material.clippingPlanes=[])})}),MaterialData.pickMaterial.clippingPlanes=[]}}class GaodeMapsProvider extends MapProvider{constructor(){super(),this.minZoom=3,this.maxZoom=18}datumsToQuadtree(oe,ie,ue){const de=Math.pow(2,oe),he=(ue+180)/360*de,pe=ie/180*Math.PI,_e=(1-Math.log(Math.tan(pe)+1/Math.cos(pe))/Math.PI)/2*de;return{x:he,y:_e}}quadKey(oe,ie,ue){let de=UnitsUtils.quadtreeToDatums(oe,ie,ue),he=CoordTransfroms.WGS84ToGCJ02(de.longitude,de.latitude),pe=this.datumsToQuadtree(oe,he.lat,he.lng);return`x=${pe.x}&y=${pe.y}&z=${oe}`}fetchTile(oe,ie,ue){return new Promise((de,he)=>{const pe=document.createElement("img");pe.onload=function(){de(pe)},pe.onerror=function(){he()},pe.crossOrigin="Anonymous",pe.src=`https://webst01.is.autonavi.com/appmaptile?style=6&x=${ie}&y=${ue}&z=${oe}`})}}class ViewMap extends Object3D{constructor(){super(),this.initMapServer()}initMapServer(){let oe=new GaodeMapsProvider,ie=new MapView(MapView.PLANAR,oe);ie.matrixAutoUpdate=!0,ie.updateMatrixWorld(!0),this.add(ie),this.initSky()}initSky(){let oe=new Sky;oe.scale.setScalar(1e8);let ie={turbidity:0,rayleigh:.5,mieCoefficient:.005,mieDirectionalG:.7,inclination:.2,azimuth:.25};const ue=oe.material.uniforms;ue.turbidity.value=ie.turbidity,ue.rayleigh.value=ie.rayleigh,ue.mieCoefficient.value=ie.mieCoefficient,ue.mieDirectionalG.value=ie.mieDirectionalG;let de=Math.PI*(ie.inclination-.5),he=2*Math.PI*(ie.azimuth-.5),pe=new Vector3$1;pe.x=Math.cos(he),pe.y=Math.sin(he)*Math.sin(de),pe.z=Math.sin(he)*Math.cos(de),ue.sunPosition.value.copy(pe),this.add(oe)}}var Stats=function(){var le=0,oe=document.createElement("div");oe.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",oe.addEventListener("click",function(Ie){Ie.preventDefault(),ue(++le%oe.children.length)},!1);function ie(Ie){return oe.appendChild(Ie.dom),Ie}function ue(Ie){for(var $e=0;$e<oe.children.length;$e++)oe.children[$e].style.display=$e===Ie?"block":"none";le=Ie}var de=(performance||Date).now(),he=de,pe=0,_e=ie(new Stats.Panel("FPS","#0ff","#002")),Ce=ie(new Stats.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var xe=ie(new Stats.Panel("MB","#f08","#201"));return ue(0),{REVISION:16,dom:oe,addPanel:ie,showPanel:ue,begin:function(){de=(performance||Date).now()},end:function(){pe++;var Ie=(performance||Date).now();if(Ce.update(Ie-de,200),Ie>=he+1e3&&(_e.update(pe*1e3/(Ie-he),100),he=Ie,pe=0,xe)){var $e=performance.memory;xe.update($e.usedJSHeapSize/1048576,$e.jsHeapSizeLimit/1048576)}return Ie},update:function(){de=this.end()},domElement:oe,setMode:ue}};Stats.Panel=function(le,oe,ie){var ue=1/0,de=0,he=Math.round,pe=he(window.devicePixelRatio||1),_e=80*pe,Ce=48*pe,xe=3*pe,Ie=2*pe,$e=3*pe,Ne=15*pe,Oe=74*pe,Fe=30*pe,Ve=document.createElement("canvas");Ve.width=_e,Ve.height=Ce,Ve.style.cssText="width:80px;height:48px";var ze=Ve.getContext("2d");return ze.font="bold "+9*pe+"px Helvetica,Arial,sans-serif",ze.textBaseline="top",ze.fillStyle=ie,ze.fillRect(0,0,_e,Ce),ze.fillStyle=oe,ze.fillText(le,xe,Ie),ze.fillRect($e,Ne,Oe,Fe),ze.fillStyle=ie,ze.globalAlpha=.9,ze.fillRect($e,Ne,Oe,Fe),{dom:Ve,update:function(Ue,Pt){ue=Math.min(ue,Ue),de=Math.max(de,Ue),ze.fillStyle=ie,ze.globalAlpha=1,ze.fillRect(0,0,_e,Ne),ze.fillStyle=oe,ze.fillText(he(Ue)+" "+le+" ("+he(ue)+"-"+he(de)+")",xe,Ie),ze.drawImage(Ve,$e+pe,Ne,Oe-pe,Fe,$e,Ne,Oe-pe,Fe),ze.fillRect($e+Oe-pe,Ne,pe,Fe),ze.fillStyle=ie,ze.globalAlpha=.9,ze.fillRect($e+Oe-pe,Ne,pe,he((1-Ue/Pt)*Fe))}}};class SelectPass{constructor(oe){ve(this,"_view3D"),ve(this,"maskBuffer"),ve(this,"selectBuffer"),ve(this,"size"),ve(this,"oldClearColor"),ve(this,"scene"),ve(this,"camera"),ve(this,"quad"),ve(this,"maskMaterial"),ve(this,"selectMaterial"),ve(this,"copyMaterial"),ve(this,"opacityMaterial"),ve(this,"isolateMaterial"),ve(this,"_selectElementId"),ve(this,"_isolateElementId"),ve(this,"_selectObjects"),this._view3D=oe,this._selectElementId=-1,this._isolateElementId=-1,this._selectObjects=new Set,this.init()}init(){this.size||(this.size=new Vector2$1),this._view3D.renderer.getDrawingBufferSize(this.size),this.scene===void 0&&(this.scene=new Scene);let oe=this.size.x,ie=this.size.y;this.camera===void 0&&(this.camera=new OrthographicCamera(-oe/2,oe/2,ie/2,-ie/2,0,1),this.camera.position.z=1,this.camera.lookAt(new Vector3$1)),this.quad===void 0&&(this.quad=new Mesh(new PlaneGeometry(oe,ie),null),this.quad.frustumCulled=!1,this.scene.add(this.quad));let ue={minFilter:LinearFilter,magFilter:LinearFilter,format:RGBAFormat,antialias:!0};if(this.maskBuffer===void 0&&(this.maskBuffer=new WebGLRenderTarget(oe,ie,ue),this.maskBuffer.texture.generateMipmaps=!1),this.selectBuffer===void 0&&(this.selectBuffer=new WebGLRenderTarget(oe,ie,ue),this.selectBuffer.texture.generateMipmaps=!1),this.maskMaterial==null){let de=ShaderChunk.meshbasic_vert.replace(/#include <fog_vertex>/,`
                    #include <fog_vertex>
                    if(visableElementID>0&&visableElementID!=elementID){
                      gl_Position = vec4( 0,0,0,0);
                    }
                    ;
                    `);de=`
                        attribute int elementID;
                        uniform int visableElementID;
                    `+de,this.maskMaterial=new ShaderMaterial({vertexShader:de,fragmentShader:`     
                void main() {
                    gl_FragColor =  vec4(0.0, 1.0, 1.0, 1.0);
                }
                `,uniforms:{visableElementID:{value:-1}},depthTest:!1})}this.selectMaterial==null&&(this.selectMaterial=new ShaderMaterial({vertexShader:`
                varying vec2 vUv;
                void main() {
                    vUv = uv;
                    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
                }
                `,fragmentShader:`
                uniform sampler2D maskTexture;
                uniform vec2 texSize;
                uniform vec3 color;
                uniform float thickness;
                uniform bool showColor;
                varying vec2 vUv;

                void main() {
                    vec2 invSize = thickness / texSize;
                    vec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);
                    vec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);
                    vec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);
                    vec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);
                    vec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);
                    float diff1 = (c1.r - c2.r)*0.5;
                    float diff2 = (c3.r - c4.r)*0.5;
                    float d = length(vec2(diff1, diff2));

                    vec4 maskTextureColor=vec4(0.0);
                    if (showColor&&texture2D(maskTexture,vUv) != vec4(1.0, 1.0, 1.0, 1.0)){
                        maskTextureColor= vec4(color,0.15);
                    }

                    gl_FragColor = d > 0.0 ? vec4(color, 0.8) : maskTextureColor;
                }
                `,uniforms:{maskTexture:{value:this.maskBuffer.texture},texSize:{value:new Vector2$1(oe,ie)},color:{value:new Color$2(16770229)},thickness:{value:1.1},showColor:{value:!0}},depthTest:!1,transparent:!1})),this.isolateMaterial==null&&(this.isolateMaterial=new ShaderMaterial({vertexShader:this.selectMaterial.vertexShader,fragmentShader:`
                uniform sampler2D maskTexture;
                uniform vec3 color;
                varying vec2 vUv;

                void main() {
                    vec4 maskTextureColor = texture2D( maskTexture,vUv);
                    if (maskTextureColor == vec4(1.0, 1.0, 1.0, 1.0)){
                        maskTextureColor = vec4(0.0);
                    }
                    gl_FragColor=maskTextureColor;
                }
                `,uniforms:{maskTexture:{value:this.maskBuffer.texture},color:{value:new Color$2(16761035)}},depthTest:!1,transparent:!1})),this.opacityMaterial===void 0&&(this.opacityMaterial=new MeshBasicMaterial({color:16777215,transparent:!0,opacity:.1}),this.opacityMaterial.onBeforeCompile=de=>{de.uniforms.visableElementID={value:this._selectElementId},this.opacityMaterial.uniforms=de.uniforms;let he=de.vertexShader.replace(/#include <fog_vertex>/,`
                    #include <fog_vertex>
                    if(visableElementID>0&&visableElementID==elementID){
                      gl_Position = vec4( 0,0,0,0);
                    }
                    `);de.vertexShader=`
                    attribute int elementID;
                    uniform int visableElementID;
                `+he}),this.copyMaterial===void 0&&(this.copyMaterial=new ShaderMaterial({vertexShader:FXAAShader.vertexShader,fragmentShader:FXAAShader.fragmentShader,uniforms:{tDiffuse:{value:this.selectBuffer.texture},resolution:{value:new Vector2$1(1/oe,1/ie)}},transparent:!0,depthTest:!1}))}selectElement(oe){oe&&oe>0?this._selectElementId=oe:this._selectElementId=-1,this.maskMaterial.uniforms.visableElementID.value=this._selectElementId}isolateElement(oe){oe&&oe>0?(this._view3D.scene.overrideMaterial=this.opacityMaterial,this._isolateElementId=oe):(this._view3D.scene.overrideMaterial=null,this._isolateElementId=-1),this.opacityMaterial.uniforms&&(this.opacityMaterial.uniforms.visableElementID.value=this._isolateElementId)}selectObjects(oe){if(this._selectObjects.clear(),oe==null){this._view3D.enableRender();return}for(const ie of oe)this._selectObjects.add(ie);this._view3D.enableRender()}render(){this._selectElementId>0&&this.renderSelect(),this._isolateElementId>0&&this.renderIsolate(),this._selectObjects.size>0&&this.renderObject()}renderSelect(){let oe=this._view3D.scene,ie=this._view3D.camera,ue=this._view3D.renderer,de=this.scene,he=this.camera,pe=oe.overrideMaterial,_e=oe.background,Ce=ue.autoClear;this.oldClearColor||(this.oldClearColor=new Color$2),ue.getClearColor(this.oldClearColor);let xe=ue.getClearAlpha(),Ie=ue.getRenderTarget();oe.background=null,ue.autoClear=!1,ue.setRenderTarget(this.maskBuffer),ue.setClearColor(16777215),ue.setClearAlpha(1),ue.clear(),this._view3D.root.isScene=!0,this._view3D.root.overrideMaterial=this.maskMaterial,ue.render(this._view3D.root,ie),this._view3D.root.isScene=!1,this._view3D.root.overrideMaterial=null,this.quad.material=this.selectMaterial,oe.overrideMaterial=null,ue.setRenderTarget(this.selectBuffer),ue.clear(),ue.render(de,he),this.quad.material=this.copyMaterial,ue.setRenderTarget(null),ue.render(de,he),oe.overrideMaterial=pe,oe.background=_e,ue.autoClear=Ce,ue.setClearColor(this.oldClearColor),ue.setClearAlpha(xe),ue.setRenderTarget(Ie)}renderIsolate(){let oe=this._view3D.scene,ie=this._view3D.camera,ue=this._view3D.renderer,de=this.scene,he=this.camera,pe=oe.overrideMaterial,_e=oe.background,Ce=ue.autoClear;this.oldClearColor||(this.oldClearColor=new Color$2),ue.getClearColor(this.oldClearColor);let xe=ue.getClearAlpha(),Ie=ue.getRenderTarget();oe.overrideMaterial=null,oe.background=null,ue.autoClear=!1,ue.setRenderTarget(this.maskBuffer),ue.setClearColor(16777215),ue.setClearAlpha(1),ue.clear(),this._view3D.root.traverse($e=>{$e instanceof Mesh&&($e.material.shader.uniforms.visableElementID.value=this._isolateElementId)}),ue.render(oe,ie),this._view3D.root.traverse($e=>{$e instanceof Mesh&&($e.material.shader.uniforms.visableElementID.value=-1)}),this.quad.material=this.isolateMaterial,oe.overrideMaterial=null,ue.setRenderTarget(this.selectBuffer),ue.clear(),ue.render(de,he),this.copyMaterial.blending=NormalBlending,this.quad.material=this.copyMaterial,ue.setRenderTarget(null),ue.render(de,he),oe.overrideMaterial=pe,oe.background=_e,ue.autoClear=Ce,ue.setClearColor(this.oldClearColor),ue.setClearAlpha(xe),ue.setRenderTarget(Ie)}renderObject(){let oe=this._view3D.scene,ie=this._view3D.camera,ue=this._view3D.renderer,de=this.scene,he=this.camera,pe=oe.overrideMaterial,_e=oe.background,Ce=ue.autoClear;this.oldClearColor||(this.oldClearColor=new Color$2),ue.getClearColor(this.oldClearColor);let xe=ue.getClearAlpha(),Ie=ue.getRenderTarget();oe.background=null,ue.autoClear=!1,ue.setRenderTarget(this.maskBuffer),ue.setClearColor(16777215),ue.setClearAlpha(1),ue.clear();const $e=this._selectObjects;$e.size!=0&&(this._view3D.root.traverse(Ne=>{Ne instanceof Mesh&&!$e.has(Ne)&&(Ne.oldVisible2=Ne.visible,Ne.visible=!1)}),this._view3D.root.isScene=!0,this._view3D.root.overrideMaterial=this.maskMaterial,ue.render(this._view3D.root,ie),this._view3D.root.isScene=!1,this._view3D.root.overrideMaterial=null,this._view3D.root.traverse(Ne=>{Ne instanceof Mesh&&!$e.has(Ne)&&(Ne.visible=Ne.oldVisible2,delete Ne.oldVisible2)}),this.selectMaterial.uniforms.showColor.value=!1,this.quad.material=this.selectMaterial,oe.overrideMaterial=null,ue.setRenderTarget(this.selectBuffer),ue.clear(),ue.render(de,he),this.quad.material=this.copyMaterial,this.selectMaterial.uniforms.showColor.value=!0,ue.setRenderTarget(null),ue.render(de,he),oe.overrideMaterial=pe,oe.background=_e,ue.autoClear=Ce,ue.setClearColor(this.oldClearColor),ue.setClearAlpha(xe),ue.setRenderTarget(Ie))}get selectColor(){var oe;return(oe=this.selectMaterial)==null?void 0:oe.uniforms.color.value}set selectColor(oe){var ie;(ie=this.selectMaterial)==null||ie.uniforms.color.value.set(oe)}processTexture(oe,ie){const ue=document.createElement("canvas");ue.width=this.size.x,ue.height=this.size.y;const de=ue.getContext("2d");let he=de.createImageData(ue.width,ue.height);return ie.readRenderTargetPixels(oe,0,0,ue.width,ue.height,he.data),de.putImageData(he,0,0),ue.toDataURL()}setSize(oe,ie){this.maskBuffer.setSize(oe,ie),this.selectBuffer.setSize(oe,ie)}}let View$2=class extends EventEmitter{constructor(oe){super(),ve(this,"stats"),ve(this,"scene"),ve(this,"ambientLight"),ve(this,"directionalLight"),ve(this,"viewerConfig"),ve(this,"_perspectiveCamera"),ve(this,"_orthographicCamera"),ve(this,"_curCamera"),ve(this,"renderer"),ve(this,"css2dRenderer"),ve(this,"controls"),ve(this,"raycaster"),ve(this,"root"),ve(this,"goldenContainer"),ve(this,"renderEnabled",!0),ve(this,"autoRender",!1),ve(this,"zoomRender",!1),ve(this,"pickingTexture"),ve(this,"viewCube"),ve(this,"_orthographicWidth"),ve(this,"pmremGenerator"),ve(this,"envMap"),ve(this,"alwaysRender",!1),ve(this,"_viewMap"),ve(this,"_backgroundColor"),ve(this,"_selectPass"),ve(this,"app"),ve(this,"onWindowResize",()=>{!this.goldenContainer.clientWidth||!this.goldenContainer.clientHeight||this.resize(this.goldenContainer.clientWidth,this.goldenContainer.clientHeight)}),ve(this,"animate",()=>{var ie;requestAnimationFrame(this.animate),this.alwaysRender?this.render():this.zoomRender?this.controls.update()?this.render():this.zoomRender=!1:this.autoRender?this.controls.update()&&this.render():this.renderEnabled&&(this.render(),this.renderEnabled=!1),(ie=this.stats)==null||ie.update()}),ve(this,"homeTarget"),ve(this,"homePosition"),ve(this,"homeZoom",1),ve(this,"_showMap",!1),ve(this,"_isView2D",!1),ve(this,"_showEnvironment",!0),ve(this,"_showBackground",!1),ve(this,"_section"),this.app=oe,this.viewerConfig=oe.appConfig,this.goldenContainer=oe.appConfig.container,this.goldenContainer.oncontextmenu=()=>!1,this.init(),this.raycaster=new ThreeRaycaster(this),oe.appConfig.showMap&&(this.showMap=!0),oe.appConfig.view2D&&(this.isView2D=!0)}get selectPass(){return this._selectPass==null&&(this._selectPass=new SelectPass(this)),this._selectPass}get camera(){return this._curCamera}init(){this.initConfig(),this.initRenderer(),this.initGPURenderer(),this.initCss2dRenderer(),this.initScene(),this.initCamera(),this.initLight(),this.initControls(),this.initBackground(),this.initViewCube(),this.initStats(),this.animate(),this.onWindowResize(),new ResizeObserver(()=>{this.onWindowResize()}).observe(this.goldenContainer)}initConfig(){this.viewerConfig.backgroundColor==null&&(this.viewerConfig.backgroundColor=2172976)}initViewCube(){this.viewCube=new ViewCube(this.goldenContainer,this,MaterialData.selColor)}resize(oe,ie){var ue,de;const he=oe/ie;if(this._curCamera instanceof OrthographicCamera){const pe=this._orthographicWidth==null?oe:this._orthographicWidth,_e=pe/he;this._curCamera.left=-pe/2,this._curCamera.right=pe/2,this._curCamera.top=_e/2,this._curCamera.bottom=-_e/2}this._curCamera instanceof PerspectiveCamera&&(this._curCamera.aspect=he),this._curCamera.updateProjectionMatrix(),this.renderer.setSize(oe,ie),(ue=this.css2dRenderer)==null||ue.setSize(oe,ie),this.enableRender(),(de=this.viewCube)==null||de.onWindowResize()}initScene(){this.scene=new Scene,this.root=new Object3D,this.root.overrideMaterial=null,this.scene.add(this.root)}initCamera(oe=!1){let ie=this.goldenContainer.clientWidth/this.goldenContainer.clientHeight;if(oe){if(this._orthographicCamera==null){const ue=this.goldenContainer.clientWidth,de=ue/ie;this._orthographicCamera=new OrthographicCamera(-ue/2,ue/2,de/2,-de/2,.1,1e4)}this._curCamera=this._orthographicCamera}else this._perspectiveCamera==null&&(this._perspectiveCamera=new PerspectiveCamera(45,1,.1,1e12),this._perspectiveCamera.aspect=ie),this._curCamera=this._perspectiveCamera;this._curCamera.position.set(0,400,0),this.scene.add(this._curCamera)}initRenderer(){this.renderer=new WebGLRenderer({antialias:!0,alpha:!0,preserveDrawingBuffer:!0}),this.renderer.setSize(this.goldenContainer.clientWidth,this.goldenContainer.clientHeight),this.goldenContainer.appendChild(this.renderer.domElement),this.renderer.setClearColor(16777215),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.toneMapping=LinearToneMapping}initCss2dRenderer(){this.css2dRenderer||(this.css2dRenderer=new CSS2DRenderer,this.css2dRenderer.setSize(this.goldenContainer.clientWidth,this.goldenContainer.clientHeight),this.css2dRenderer.domElement.id="css2dRenderer",this.goldenContainer.appendChild(this.css2dRenderer.domElement),this.css2dRenderer.domElement.id="css2dRenderer",this.css2dRenderer.domElement.style.position="absolute",this.css2dRenderer.domElement.style.top="0px",this.css2dRenderer.domElement.style.left="0px",this.css2dRenderer.domElement.style.pointerEvents="none")}initGPURenderer(){this.pickingTexture=new WebGLRenderTarget(1,1)}initLight(){this.ambientLight==null&&(this.ambientLight=new AmbientLight(16777215,.3)),this._curCamera.add(this.ambientLight),this.directionalLight==null&&(this.directionalLight=new DirectionalLight(16777215,.8*Math.PI),this.directionalLight.position.set(.5,0,.866)),this._curCamera.add(this.directionalLight)}initControls(){this.controls&&this.controls.dispose(),this.controls=new CameraControls(this._curCamera,this.renderer.domElement),this.controls.mouseButtons.right=CameraControls.ACTION.ROTATE,this.controls.mouseButtons.left=CameraControls.ACTION.TRUCK,this.controls.dollySpeed=.5,this.controls.addEventListener("control",()=>{this.enableRender()}),this.controls.minZoom=1e-4}render(){var oe,ie,ue;this.emit("onBeforeRender"),this.app.emit("onBeforeRender"),this.renderer.setRenderTarget(null),this.renderer.setViewport(0,0,this.goldenContainer.clientWidth,this.goldenContainer.clientHeight),this.renderer.render(this.scene,this.camera),(oe=this.css2dRenderer)==null||oe.render(this.scene,this.camera),(ie=this._selectPass)==null||ie.render(),(ue=this.viewCube)==null||ue.render()}setOrbitPoint(oe,ie,ue){this.controls.setOrbitPoint(oe,ie,ue),this.controls.update()}setHome(oe,ie=!1,ue=this.app.view.controls.polarAngle,de=this.app.view.controls.azimuthAngle){if(oe==null){let he=new BoxHelper(this.scene);he.geometry.computeBoundingBox(),oe=he.geometry.boundingBox}this.fitBox(oe,ie,.1,ue,de),this.homeTarget=this.controls.getTarget(),this.homePosition=this.controls.getPosition(),this.homeZoom=this.camera.zoom}goHome(oe=!0){if(this.homePosition&&this.homeTarget){this.controls.restThreshold=.1,this.controls.enabled=!1,this.autoRender=!0;let ie=[];ie.push(this.controls.setLookAt(this.homePosition.x,this.homePosition.y,this.homePosition.z,this.homeTarget.x,this.homeTarget.y,this.homeTarget.z,oe)),this.camera instanceof OrthographicCamera&&(ie.push(this.controls.zoomTo(this.homeZoom,oe)),oe&&(this.zoomRender=!0)),Promise.all(ie).then(()=>{this.autoRender=!1,this.controls.enabled=!0}),oe||(this.controls.update(),this.enableRender())}}fitBox(oe,ie=!0,ue=.1,de=null,he=null){if(oe==null){let Ie=new BoxHelper(this.scene);Ie.geometry.computeBoundingBox(),oe=Ie.geometry.boundingBox}const pe=new Vector3$1;oe.getSize(pe);let _e=Math.min(pe.x,pe.y,pe.z);_e<.09&&(this.camera.near=_e*.1,this._curCamera.updateProjectionMatrix());let Ce=Math.max(pe.x,pe.y,pe.z);oe=oe.clone().expandByScalar(Ce*ue),this.controls.restThreshold=ue,this.controls.enabled=!1,this.autoRender=!0;let xe=[];return xe.push(this.controls.fitToBox(oe,ie,{cover:!1,paddingLeft:0,paddingRight:0,paddingBottom:0,paddingTop:0})),de==null&&(de=this.controls.polarAngle),he==null&&(he=this.controls.azimuthAngle),xe.push(this.controls.moveTo((oe.max.x+oe.min.x)/2,(oe.max.y+oe.min.y)/2,(oe.max.z+oe.min.z)/2,ie)),xe.push(this.controls.rotateTo(he,de,ie)),ie||(this.controls.update(),this.enableRender()),Promise.all(xe).then(()=>{this.autoRender=!1,this.controls.enabled=!0})}showBox3(oe){let ie=new Box3Helper(oe);ie.box,this.scene.add(ie)}clearObject(){this.root.clear()}enableRender(){this.renderEnabled=!0}initBackground(){this.initEnvironment(null);let oe=new Color$2(this.viewerConfig.backgroundColor);this.renderer.toneMappingExposure=.8,this.scene.background=oe,this._backgroundColor=oe}initEnvironment(oe,ie){this.pmremGenerator==null&&(this.pmremGenerator=new PMREMGenerator(this.renderer),this.pmremGenerator.compileEquirectangularShader());let ue=()=>{this.scene.environment=this.envMap,this.pmremGenerator.dispose(),this._showEnvironment&&(this.scene.environment=this.envMap,this.scene.environment.userData=ie),this._showBackground&&(this.scene.background=this.envMap),this.enableRender()};if(oe==null||oe=="")return this.envMap&&this.envMap.dispose(),this.envMap=this.pmremGenerator.fromScene(new RoomEnvironment).texture,ue(),Promise.resolve(!0);let de=oe.split(".").pop().toLowerCase();return new Promise((he,pe)=>{let _e;if(de=="hdr")_e=new RGBELoader;else if(de=="exr")_e=new EXRLoader;else return;_e.load(oe,Ce=>{this.envMap&&this.envMap.dispose(),this.envMap=this.pmremGenerator.fromEquirectangular(Ce).texture,ue(),this.enableRender(),he(!0)},void 0,pe)})}flyTo(oe,ie,ue,de,he,pe,_e=!0){_e?(this.controls.restThreshold=.1,this.controls.enabled=!1,this.autoRender=!0,this.controls.setLookAt(oe,ie,ue,de,he,pe,_e).then(()=>{this.autoRender=!1,this.controls.enabled=!0})):this.controls.setLookAt(oe,ie,ue,de,he,pe,!1)}rotateTo(oe,ie){return new Promise(ue=>{this.controls.enabled=!1,this.autoRender=!0;let de=(this.controls.azimuthAngle-oe)%(Math.PI*2);de=Math.atan2(Math.sin(de),Math.cos(de)),oe=this.controls.azimuthAngle-de;let he=(this.controls.polarAngle-ie)%(Math.PI*2);he=Math.atan2(Math.sin(he),Math.cos(he)),ie=this.controls.polarAngle-he,this.controls.rotateTo(oe,ie,!0).then(()=>{this.autoRender=!1,this.controls.enabled=!0,ue(!0)})})}zoomTo(oe,ie=!0){return new Promise(ue=>{this.controls.enabled=!1,this.autoRender=!0,this.controls.zoomTo(oe,ie).then(()=>{this.autoRender=!1,this.controls.enabled=!0,ue(!0)}),ie&&(this.zoomRender=!0)})}setOrthogonal(oe){let ie=this._perspectiveCamera.far;this._perspectiveCamera.far=1e4;const ue=this._curCamera.position.clone(),de=this._curCamera.rotation.clone();let he=this.controls.toJSON(),pe=this.controls.azimuthAngle,_e=this.controls.polarAngle;this.scene.remove(this._curCamera),this._curCamera.remove(this.directionalLight),this._curCamera.remove(this.ambientLight),this.initCamera(oe),oe&&this._setPerCameraToOrthCamera(),this._curCamera.position.set(ue.x,ue.y,ue.z),this._curCamera.rotation.set(de.x,de.y,de.z),this._curCamera.lookAt(this.scene.position),this._curCamera.updateProjectionMatrix(),this.initLight(),this.initControls(),this.controls.fromJSON(he),this.controls.azimuthAngle=pe,this.controls.polarAngle=_e,this.controls.update(),this._perspectiveCamera.far=ie,this.enableRender()}_setPerCameraToOrthCamera(){if(this._perspectiveCamera==null||this._orthographicCamera==null)return null;let oe=this.scene.position.clone(),ie=this._perspectiveCamera.position.clone().sub(oe).length(),ue=this._perspectiveCamera.aspect,de=this._perspectiveCamera.fov,he=ie*Math.atan(Math.PI/180*de/2),pe=he*ue,_e=-he,Ce=-pe,xe=this._perspectiveCamera.near,Ie=this._perspectiveCamera.far;this._orthographicCamera.left=Ce,this._orthographicCamera.right=pe,this._orthographicCamera.top=he,this._orthographicCamera.bottom=_e,this._orthographicCamera.near=xe,this._orthographicCamera.far=Ie,this._orthographicWidth=pe}get showMap(){return this._showMap}set showMap(oe){this._showMap=oe,oe?(this._viewMap==null&&(this._viewMap=new ViewMap),this.scene.add(this._viewMap),this.enableRender()):this._viewMap&&(this.scene.remove(this._viewMap),this.enableRender())}get isView2D(){return this._isView2D}set isView2D(oe){this._isView2D=oe,this.viewCube.show=!oe;const ie=this.goldenContainer.clientWidth/this.goldenContainer.clientHeight;if(oe){this.setOrthogonal(!0),this.controls.mouseButtons.right=CameraControls.ACTION.NONE,this.controls.mouseButtons.middle=CameraControls.ACTION.TRUCK,this.controls.mouseButtons.left=CameraControls.ACTION.TRUCK,this.renderer.toneMapping=NoToneMapping,this.renderer.outputColorSpace=LinearSRGBColorSpace$1;const ue=new Color$2(this.viewerConfig.backgroundColor);ue.convertLinearToSRGB(),this.scene.background=ue,this._backgroundColor=ue,this._orthographicWidth=null;const de=this.goldenContainer.clientWidth,he=de/ie;this.camera.near=.1,this.controls.setLookAt(0,40,0,0,0,0,!1),this._orthographicCamera.left=-de/2,this._orthographicCamera.right=de/2,this._orthographicCamera.top=he/2,this._orthographicCamera.bottom=-he/2}else{this.setOrthogonal(!1),this._perspectiveCamera.aspect=ie,this.camera.near=.1,this.controls.mouseButtons.middle=CameraControls.ACTION.NONE,this.controls.mouseButtons.right=CameraControls.ACTION.ROTATE,this.controls.mouseButtons.left=CameraControls.ACTION.TRUCK,this.renderer.toneMapping=LinearToneMapping,this.renderer.outputColorSpace=SRGBColorSpace$1;const ue=new Color$2(this.viewerConfig.backgroundColor);this.scene.background=ue,this._backgroundColor=ue,this.controls.setLookAt(0,400,0,0,0,0,!1)}this.controls.zoomTo(1,!1),this.controls.update()}set showEnvironment(oe){this._showEnvironment!=oe&&(this._showEnvironment=oe,oe&&this.envMap?this.scene.environment=this.envMap:this.scene.environment=null,this.enableRender())}get showEnvironment(){return this._showEnvironment}set showBackground(oe){this._showBackground!=oe&&(this._showBackground=oe,oe&&this.envMap?this.scene.background=this.envMap:this.scene.background=this._backgroundColor,this.enableRender())}get showBackground(){return this._showBackground}setSection(oe,ie){if(this._section==null){if(ie==null){let ue=new BoxHelper(this.root);ue.geometry.computeBoundingBox(),ie=ue.geometry.boundingBox,ie.expandByScalar(1.5)}this._section=new ObjectsBoxSection(ie,this.root,this._curCamera,this.renderer,this.controls,this.goldenContainer)}oe?(this._section.setSectionBox(ie),this._section.open()):(this._section.close(),this._section=null),this.enableRender()}initStats(){this.stats=new Stats,this.stats.showPanel(0),this.stats.dom.style.position="absolute",this.stats.dom.style.bottom="0px",this.stats.dom.style.right="0px",this.stats.dom.style.top=null,this.stats.dom.style.left=null,this.goldenContainer.appendChild(this.stats.dom)}};class IFCHelper{static LoadAllGeometry(oe,ie){let ue=[],de=[];return ie.StreamAllMeshes(oe,he=>{let pe=he.geometries;for(let _e=0;_e<pe.size();_e++){let Ce=pe.get(_e),xe=this.getPlacedGeometry(oe,Ce,ie);xe.userData={Id:he.expressID,geometryExpressID:Ce.geometryExpressID},Ce.color.w!==1?de.push(xe):ue.push(xe)}}),{geometries:ue,transparentGeometries:de}}static getPlacedGeometry(oe,ie,ue){let de=this.getBufferGeometry(oe,ie,ue);const he=this.getMeshMatrix(ie.flatTransformation);return de.applyMatrix4(he),de}static getBufferGeometry(oe,ie,ue){let de=ue.GetGeometry(oe,ie.geometryExpressID),he=de.GetVertexData(),pe=de.GetVertexDataSize(),_e=ue.GetVertexArray(he,pe),Ce=ue.GetIndexArray(de.GetIndexData(),de.GetIndexDataSize()),xe=this.ifcGeometryToBuffer(ie.color,_e,Ce);return de.delete(),xe}static getMeshMatrix(oe){let ie=new Matrix4$1;return ie.fromArray(oe),ie}static ifcGeometryToBuffer(oe,ie,ue){let de=new BufferGeometry,he=new Float32Array(ie.length/2),pe=new Float32Array(he.length);const _e=4;let Ce=new Uint8Array(he.length/3*_e);for(let xe=0;xe<ie.length;xe+=6){const Ie=xe/2;he[Ie+0]=ie[xe+0],he[Ie+1]=ie[xe+1],he[Ie+2]=ie[xe+2],pe[Ie+0]=ie[xe+3],pe[Ie+1]=ie[xe+4],pe[Ie+2]=ie[xe+5];const $e=Ie/3*_e;Ce[$e+0]=Math.floor(oe.x*255),Ce[$e+1]=Math.floor(oe.y*255),Ce[$e+2]=Math.floor(oe.z*255),Ce[$e+3]=Math.floor(oe.w*255)}return de.setAttribute("position",new BufferAttribute(he,3)),de.setAttribute("normal",new BufferAttribute(pe,3)),de.setAttribute("color",new BufferAttribute(Ce,_e,!0)),de.setIndex(new BufferAttribute(ue,1)),de}}class IFCElement extends BaseElement{constructor(oe){super(oe,BaseElementType.IFC)}}const _IFCLoaderPlugin=class __IFCLoaderPlugin extends LoaderPlugin{static get ifcBaseMaterial(){if(this._ifcBaseMaterial==null){let le=new MyMeshStandardMaterial({vertexColors:!0});this._ifcBaseMaterial=le}return this._ifcBaseMaterial}static get ifcTransMaterial(){if(this._ifcTransMaterial==null){let le=new MyMeshStandardMaterial({vertexColors:!0,transparent:!0,side:DoubleSide});this._ifcTransMaterial=le}return this._ifcTransMaterial}load(le,oe){return new Promise(async(ie,ue)=>{__IFCLoaderPlugin.ifcApi==null&&(__IFCLoaderPlugin.ifcApi=new IfcAPI2,le.webIFCPath&&__IFCLoaderPlugin.ifcApi.SetWasmPath(le.webIFCPath),await __IFCLoaderPlugin.ifcApi.Init()),fetch(le.url).then(de=>de.arrayBuffer()).then(de=>{this.loadIFC(de).then(he=>{he.config=le,he.app.view.setHome(null,!1,Math.PI/4,2*Math.PI),ie(he)}).catch(he=>{ue("")})}).catch(de=>{ue(de)})})}async loadIFC(le){const oe=new Uint8Array(le),ie=__IFCLoaderPlugin.ifcApi.OpenModel(oe);let ue=new Map;const de=xe=>{if((xe==null?void 0:xe.length)>0)for(let Ie of xe){const $e=Ie.userData.Id;ue.has($e)?ue.get($e).push(Ie):ue.set($e,[Ie])}},he=(xe,Ie)=>{(xe==null?void 0:xe.length)>0&&Object3DUtils.BatchBufferGeometrys(xe,_e,Ie)},pe=IFCHelper.LoadAllGeometry(ie,__IFCLoaderPlugin.ifcApi),_e=new ModelDocument(this.app);de(pe.geometries),de(pe.transparentGeometries);for(const xe of ue.keys()){const Ie=ue.get(xe);let $e=new MeshElement(_e);$e.key=xe;for(let Ne of Ie){Ne.elementID=$e.Id;const Oe=new Int32BufferAttribute(new Uint32Array(Ne.attributes.position.count).fill($e.Id),1);Ne.setAttribute("elementID",Oe)}}he(pe.geometries,__IFCLoaderPlugin.ifcBaseMaterial),he(pe.transparentGeometries,__IFCLoaderPlugin.ifcTransMaterial);const Ce=await __IFCLoaderPlugin.ifcApi.properties.getSpatialStructure(ie);return await this._parseProjectByWasm(ie,Ce,_e,_e.modelTree),__IFCLoaderPlugin.ifcApi.CloseModel(ie),_e}async _parseProjectByWasm(le,oe,ie,ue){const de=__IFCLoaderPlugin.ifcApi.GetLine(le,oe.expressID);let he=de.Name.value;const pe=de.__proto__.constructor.name;he==""&&(he=pe);const _e=this._parseUnicode(he);ue.name=_e,ue.userData={expressID:oe.expressID};let Ce=ie.getElementByKey(oe.expressID);Ce||(Ce=new IFCElement(ie)),Ce.name=_e,ue.id=Ce.Id,Ce.userData=await this._parseProperty(le,oe.expressID);let xe=oe.children;if(xe&&xe.length>0)for(let Ie of xe){let $e=new ModelTree;ue.children==null&&(ue.children=[]),ue.children.push($e),await this._parseProjectByWasm(le,Ie,ie,$e)}}_parseUnicode(text){let str=text;var regex;regex=new RegExp(/X2\\(\S*)\\X0/,"g"),regex=RegExp("\\X2([.\\s\\S]+?)\\X0","g");try{for(var result,blocks=[];(result=regex.exec(text))!=null;)blocks.push(result[1].trim());if(blocks&&blocks.length>0)for(let data of blocks){let old=data.replace("\\","");old=old.replace("\\",""),str=str.replace("\\X2\\",""),str=str.replace("\\X0\\","");for(var NewStr="",i=0;i<old.length;i=i+4)NewStr+="\\u"+old[i]+old[i+1]+old[i+2]+old[i+3];NewStr=eval("'"+NewStr+"'"),str=str.replace(old,NewStr)}return str}catch(le){return str}}async _parseProperty(le,oe){var ie,ue,de;let he=await __IFCLoaderPlugin.ifcApi.properties.getItemProperties(le,oe);if(he==null)return;let pe={};pe.Type=he.__proto__.constructor.name,pe.GlobalId=this._parseUnicode(he.GlobalId.value),pe.Name=this._parseUnicode(he.Name.value),he.Description&&(pe.Description=this._parseUnicode(he.Description.value));let _e=await __IFCLoaderPlugin.ifcApi.properties.getPropertySets(le,oe);pe.Parameters=[];for(let Ce of _e)if(Ce.HasProperties&&Ce.HasProperties.length>0){let xe=[];for(let Ie of Ce.HasProperties){let $e=await __IFCLoaderPlugin.ifcApi.properties.getItemProperties(le,Ie.value);xe.push({name:this._parseUnicode((ie=$e.Name)==null?void 0:ie.value),value:this._parseUnicode((ue=$e.NominalValue)==null?void 0:ue.value)})}pe.Parameters.push({GroupName:this._parseUnicode((de=Ce.Name)==null?void 0:de.value),Parameters:xe})}return pe}};ve(_IFCLoaderPlugin,"ifcApi"),ve(_IFCLoaderPlugin,"_ifcBaseMaterial",null),ve(_IFCLoaderPlugin,"_ifcTransMaterial",null);let IFCLoaderPlugin=_IFCLoaderPlugin;const _taskCache=new WeakMap;class Rhino3dmLoader extends Loader{constructor(oe){super(oe),this.libraryPath="",this.libraryPending=null,this.libraryBinary=null,this.libraryConfig={},this.url="",this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.workerConfig={},this.materials=[],this.warnings=[]}setLibraryPath(oe){return this.libraryPath=oe,this}setWorkerLimit(oe){return this.workerLimit=oe,this}load(oe,ie,ue,de){const he=new FileLoader(this.manager);he.setPath(this.path),he.setResponseType("arraybuffer"),he.setRequestHeader(this.requestHeader),this.url=oe,he.load(oe,pe=>{if(_taskCache.has(pe))return _taskCache.get(pe).promise.then(ie).catch(de);this.decodeObjects(pe,oe).then(_e=>{_e.userData.warnings=this.warnings,ie(_e)}).catch(_e=>de(_e))},ue,de)}debug(){}decodeObjects(oe,ie){let ue,de;const he=oe.byteLength,pe=this._getWorker(he).then(_e=>(ue=_e,de=this.workerNextTaskID++,new Promise((Ce,xe)=>{ue._callbacks[de]={resolve:Ce,reject:xe},ue.postMessage({type:"decode",id:de,buffer:oe},[oe])}))).then(_e=>this._createGeometry(_e.data)).catch(_e=>{throw _e});return pe.catch(()=>!0).then(()=>{ue&&de&&this._releaseTask(ue,de)}),_taskCache.set(oe,{url:ie,promise:pe}),pe}parse(oe,ie,ue){this.decodeObjects(oe,"").then(de=>{de.userData.warnings=this.warnings,ie(de)}).catch(de=>ue(de))}_compareMaterials(oe){const ie={};ie.name=oe.name,ie.color={},ie.color.r=oe.color.r,ie.color.g=oe.color.g,ie.color.b=oe.color.b,ie.type=oe.type,ie.vertexColors=oe.vertexColors;const ue=JSON.stringify(ie);for(let de=0;de<this.materials.length;de++){const he=this.materials[de],pe={};if(pe.name=he.name,pe.color={},pe.color.r=he.color.r,pe.color.g=he.color.g,pe.color.b=he.color.b,pe.type=he.type,pe.vertexColors=he.vertexColors,JSON.stringify(pe)===ue)return he}return this.materials.push(oe),oe}_createMaterial(oe,ie){if(oe===void 0)return new MeshStandardMaterial({color:new Color$2(1,1,1),metalness:.8,name:Loader.DEFAULT_MATERIAL_NAME,side:DoubleSide});const ue=new MeshPhysicalMaterial({color:new Color$2(oe.diffuseColor.r/255,oe.diffuseColor.g/255,oe.diffuseColor.b/255),emissive:new Color$2(oe.emissionColor.r,oe.emissionColor.g,oe.emissionColor.b),flatShading:oe.disableLighting,ior:oe.indexOfRefraction,name:oe.name,reflectivity:oe.reflectivity,opacity:1-oe.transparency,side:DoubleSide,specularColor:oe.specularColor,transparent:oe.transparency>0});if(ue.userData.id=oe.id,oe.pbrSupported){const he=oe.pbr;ue.anisotropy=he.anisotropic,ue.anisotropyRotation=he.anisotropicRotation,ue.color=new Color$2(he.baseColor.r,he.baseColor.g,he.baseColor.b),ue.clearcoat=he.clearcoat,ue.clearcoatRoughness=he.clearcoatRoughness,ue.metalness=he.metallic,ue.transmission=1-he.opacity,ue.roughness=he.roughness,ue.sheen=he.sheen,ue.specularIntensity=he.specular,ue.thickness=he.subsurface}oe.pbrSupported&&oe.pbr.opacity===0&&oe.transparency===1&&(ue.opacity=.2,ue.transmission=1);const de=new TextureLoader;for(let he=0;he<oe.textures.length;he++){const pe=oe.textures[he];if(pe.image!==null){const _e=de.load(pe.image);switch(pe.type){case"Bump":ue.bumpMap=_e;break;case"Diffuse":ue.map=_e;break;case"Emap":ue.envMap=_e;break;case"Opacity":ue.transmissionMap=_e;break;case"Transparency":ue.alphaMap=_e,ue.transparent=!0;break;case"PBR_Alpha":ue.alphaMap=_e,ue.transparent=!0;break;case"PBR_AmbientOcclusion":ue.aoMap=_e;break;case"PBR_Anisotropic":ue.anisotropyMap=_e;break;case"PBR_BaseColor":ue.map=_e;break;case"PBR_Clearcoat":ue.clearcoatMap=_e;break;case"PBR_ClearcoatBump":ue.clearcoatNormalMap=_e;break;case"PBR_ClearcoatRoughness":ue.clearcoatRoughnessMap=_e;break;case"PBR_Displacement":ue.displacementMap=_e;break;case"PBR_Emission":ue.emissiveMap=_e;break;case"PBR_Metallic":ue.metalnessMap=_e;break;case"PBR_Roughness":ue.roughnessMap=_e;break;case"PBR_Sheen":ue.sheenColorMap=_e;break;case"PBR_Specular":ue.specularColorMap=_e;break;case"PBR_Subsurface":ue.thicknessMap=_e;break;default:this.warnings.push({message:`THREE.3DMLoader: No conversion exists for 3dm ${pe.type}.`,type:"no conversion"});break}_e.wrapS=pe.wrapU===0?RepeatWrapping:ClampToEdgeWrapping,_e.wrapT=pe.wrapV===0?RepeatWrapping:ClampToEdgeWrapping,pe.repeat&&_e.repeat.set(pe.repeat[0],pe.repeat[1])}}return ie&&new EXRLoader().load(ie.image,function(he){he.mapping=THREE.EquirectangularReflectionMapping,ue.envMap=he}),ue}_createGeometry(oe){const ie=new Object3D,ue=[],de=[],he=[];ie.userData.layers=oe.layers,ie.userData.groups=oe.groups,ie.userData.settings=oe.settings,ie.userData.settings.renderSettings=oe.renderSettings,ie.userData.objectType="File3dm",ie.userData.materials=null,ie.name=this.url;let pe=oe.objects;const _e=oe.materials,Ce=new Map,xe=new Map;for(let Ie=0;Ie<oe.layers.length;Ie++){const $e=new Object3D,Ne=oe.layers[Ie];$e.name=Ne.name,Ce.set(Ie,$e),xe.set(Ne.id,$e),Ne.parentLayerId!="00000000-0000-0000-0000-000000000000"?xe.get(Ne.parentLayerId).add($e):ie.add($e)}for(let Ie=0;Ie<pe.length;Ie++){const $e=pe[Ie],Ne=$e.attributes;switch($e.objectType){case"InstanceDefinition":de.push($e);break;case"InstanceReference":he.push($e);break;default:let Oe=null;switch(Ne.materialSource.name){case"ObjectMaterialSource_MaterialFromLayer":Ne.layerIndex>=0&&(Oe=oe.layers[Ne.layerIndex].renderMaterialIndex);break;case"ObjectMaterialSource_MaterialFromObject":Ne.materialIndex>=0&&(Oe=Ne.materialIndex);break}let Fe=null;if(Oe>=0){const Ue=_e[Oe];Fe=this._createMaterial(Ue,oe.renderEnvironment)}const Ve=this._createObject($e,Fe);if(Ve===void 0)continue;const ze=oe.layers[Ne.layerIndex];if(Ve.visible=ze?oe.layers[Ne.layerIndex].visible:!0,Ne.isInstanceDefinitionObject)ue.push(Ve);else{const Ue=Ce.get(Ne.layerIndex);Ue?Ue.add(Ve):ie.add(Ve)}break}}for(let Ie=0;Ie<de.length;Ie++){const $e=de[Ie];pe=[];for(let Ne=0;Ne<$e.attributes.objectIds.length;Ne++){const Oe=$e.attributes.objectIds[Ne];for(let Fe=0;Fe<ue.length;Fe++){const Ve=ue[Fe].userData.attributes.id;Oe===Ve&&pe.push(ue[Fe])}}for(let Ne=0;Ne<he.length;Ne++){const Oe=he[Ne];if(Oe.geometry.parentIdefId===$e.attributes.id){const Fe=new Object3D,Ve=Oe.geometry.xform.array,ze=new Matrix4$1;ze.set(...Ve),Fe.applyMatrix4(ze);for(let Pt=0;Pt<pe.length;Pt++)Fe.add(pe[Pt].clone(!0));const Ue=Ce.get($e.attributes.layerIndex);Ue?Ue.add(Fe):ie.add(Fe)}}}return ie.userData.materials=this.materials,ie.name="",ie}_createObject(oe,ie){const ue=new BufferGeometryLoader,de=oe.attributes;let he,pe,_e,Ce;switch(oe.objectType){case"Point":case"PointSet":he=ue.parse(oe.geometry),he.attributes.hasOwnProperty("color")?pe=new PointsMaterial({vertexColors:!0,sizeAttenuation:!1,size:2}):(_e=de.drawColor,Ce=new Color$2(_e.r/255,_e.g/255,_e.b/255),pe=new PointsMaterial({color:Ce,sizeAttenuation:!1,size:2})),pe=this._compareMaterials(pe);const xe=new Points(he,pe);return xe.userData.attributes=de,xe.userData.objectType=oe.objectType,de.name&&(xe.name=de.name),xe;case"Mesh":case"Extrusion":case"SubD":case"Brep":if(oe.geometry===null)return;he=ue.parse(oe.geometry),ie===null&&(ie=this._createMaterial()),he.attributes.hasOwnProperty("color")&&(ie.vertexColors=!0),ie=this._compareMaterials(ie);const Ie=new Mesh(he,ie);return Ie.castShadow=de.castsShadows,Ie.receiveShadow=de.receivesShadows,Ie.userData=de,Ie.userData.objectType=oe.objectType,de.name&&(Ie.name=de.name),Ie;case"Curve":he=ue.parse(oe.geometry),_e=de.drawColor,Ce=new Color$2(_e.r/255,_e.g/255,_e.b/255),pe=new LineBasicMaterial({color:Ce}),pe=this._compareMaterials(pe);const $e=new Line(he,pe);return $e.userData=de,$e.userData.objectType=oe.objectType,de.name&&($e.name=de.name),$e;case"TextDot":he=oe.geometry;const Ne=document.createElement("canvas").getContext("2d"),Oe=`${he.fontHeight}px ${he.fontFace}`;Ne.font=Oe;const Fe=Ne.measureText(he.text).width+10,Ve=he.fontHeight+10,ze=window.devicePixelRatio;Ne.canvas.width=Fe*ze,Ne.canvas.height=Ve*ze,Ne.canvas.style.width=Fe+"px",Ne.canvas.style.height=Ve+"px",Ne.setTransform(ze,0,0,ze,0,0),Ne.font=Oe,Ne.textBaseline="middle",Ne.textAlign="center",Ce=de.drawColor,Ne.fillStyle=`rgba(${Ce.r},${Ce.g},${Ce.b},${Ce.a})`,Ne.fillRect(0,0,Fe,Ve),Ne.fillStyle="white",Ne.fillText(he.text,Fe/2,Ve/2);const Ue=new CanvasTexture(Ne.canvas);Ue.minFilter=LinearFilter,Ue.generateMipmaps=!1,Ue.wrapS=ClampToEdgeWrapping,Ue.wrapT=ClampToEdgeWrapping,pe=new SpriteMaterial({map:Ue,depthTest:!1});const Pt=new Sprite(pe);return Pt.position.set(he.point[0],he.point[1],he.point[2]),Pt.scale.set(Fe/10,Ve/10,1),Pt.userData=de,Pt.userData.objectType=oe.objectType,de.name&&(Pt.name=de.name),Pt;case"Light":he=oe.geometry;let qe;switch(he.lightStyle.name){case"LightStyle_WorldPoint":qe=new PointLight,qe.castShadow=de.castsShadows,qe.position.set(he.location[0],he.location[1],he.location[2]),qe.shadow.normalBias=.1;break;case"LightStyle_WorldSpot":qe=new SpotLight,qe.castShadow=de.castsShadows,qe.position.set(he.location[0],he.location[1],he.location[2]),qe.target.position.set(he.direction[0],he.direction[1],he.direction[2]),qe.angle=he.spotAngleRadians,qe.shadow.normalBias=.1;break;case"LightStyle_WorldRectangular":qe=new RectAreaLight;const Et=Math.abs(he.width[2]),kt=Math.abs(he.length[0]);qe.position.set(he.location[0]-kt/2,he.location[1],he.location[2]-Et/2),qe.height=kt,qe.width=Et,qe.lookAt(he.direction[0],he.direction[1],he.direction[2]);break;case"LightStyle_WorldDirectional":qe=new DirectionalLight,qe.castShadow=de.castsShadows,qe.position.set(he.location[0],he.location[1],he.location[2]),qe.target.position.set(he.direction[0],he.direction[1],he.direction[2]),qe.shadow.normalBias=.1;break}return qe&&(qe.intensity=he.intensity,_e=he.diffuse,Ce=new Color$2(_e.r/255,_e.g/255,_e.b/255),qe.color=Ce,qe.userData=de,qe.userData.objectType=oe.objectType),qe}}_initLibrary(){if(!this.libraryPending){const oe=new FileLoader(this.manager);oe.setPath(this.libraryPath);const ie=new Promise((he,pe)=>{oe.load("rhino3dm.js",he,void 0,pe)}),ue=new FileLoader(this.manager);ue.setPath(this.libraryPath),ue.setResponseType("arraybuffer");const de=new Promise((he,pe)=>{ue.load("rhino3dm.wasm",he,void 0,pe)});this.libraryPending=Promise.all([ie,de]).then(([he,pe])=>{this.libraryConfig.wasmBinary=pe;const _e=Rhino3dmWorker.toString(),Ce=["/* rhino3dm.js */",he,"/* worker */",_e.substring(_e.indexOf("{")+1,_e.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([Ce]))})}return this.libraryPending}_getWorker(oe){return this._initLibrary().then(()=>{if(this.workerPool.length<this.workerLimit){const ue=new Worker(this.workerSourceURL);ue._callbacks={},ue._taskCosts={},ue._taskLoad=0,ue.postMessage({type:"init",libraryConfig:this.libraryConfig}),ue.onmessage=de=>{const he=de.data;switch(he.type){case"warning":this.warnings.push(he.data);break;case"decode":ue._callbacks[he.id].resolve(he);break;case"error":ue._callbacks[he.id].reject(he);break;default:}},this.workerPool.push(ue)}else this.workerPool.sort(function(ue,de){return ue._taskLoad>de._taskLoad?-1:1});const ie=this.workerPool[this.workerPool.length-1];return ie._taskLoad+=oe,ie})}_releaseTask(oe,ie){oe._taskLoad-=oe._taskCosts[ie],delete oe._callbacks[ie],delete oe._taskCosts[ie]}dispose(){for(let oe=0;oe<this.workerPool.length;++oe)this.workerPool[oe].terminate();return this.workerPool.length=0,this}}function Rhino3dmWorker(){let le,oe,ie,ue;onmessage=function(Ie){const $e=Ie.data;switch($e.type){case"init":oe=$e.libraryConfig;const Ne=oe.wasmBinary;let Oe;le=new Promise(function(Ve){Oe={wasmBinary:Ne,onRuntimeInitialized:Ve},rhino3dm(Oe)}).then(()=>{ie=Oe});break;case"decode":ue=$e.id;const Fe=$e.buffer;le.then(()=>{try{const Ve=de(ie,Fe);self.postMessage({type:"decode",id:$e.id,data:Ve})}catch(Ve){self.postMessage({type:"error",id:$e.id,error:Ve})}});break}};function de(Ie,$e){const Ne=new Uint8Array($e),Oe=Ie.File3dm.fromByteArray(Ne),Fe=[],Ve=[],ze=[],Ue=[],Pt=[],qe=[],Et=[],kt=Oe.objects(),At=kt.count;for(let wn=0;wn<At;wn++){const Cn=kt.get(wn),Sn=_e(Cn,Oe);Cn.delete(),Sn&&Fe.push(Sn)}for(let wn=0;wn<Oe.instanceDefinitions().count;wn++){const Cn=Oe.instanceDefinitions().get(wn),Sn=Ce(Cn);Sn.objectIds=Cn.getObjectIds(),Fe.push({geometry:null,attributes:Sn,objectType:"InstanceDefinition"})}const Dt=[Ie.TextureType.Diffuse,Ie.TextureType.Bump,Ie.TextureType.Transparency,Ie.TextureType.Opacity,Ie.TextureType.Emap],Lt=[Ie.TextureType.PBR_BaseColor,Ie.TextureType.PBR_Subsurface,Ie.TextureType.PBR_SubsurfaceScattering,Ie.TextureType.PBR_SubsurfaceScatteringRadius,Ie.TextureType.PBR_Metallic,Ie.TextureType.PBR_Specular,Ie.TextureType.PBR_SpecularTint,Ie.TextureType.PBR_Roughness,Ie.TextureType.PBR_Anisotropic,Ie.TextureType.PBR_Anisotropic_Rotation,Ie.TextureType.PBR_Sheen,Ie.TextureType.PBR_SheenTint,Ie.TextureType.PBR_Clearcoat,Ie.TextureType.PBR_ClearcoatBump,Ie.TextureType.PBR_ClearcoatRoughness,Ie.TextureType.PBR_OpacityIor,Ie.TextureType.PBR_OpacityRoughness,Ie.TextureType.PBR_Emission,Ie.TextureType.PBR_AmbientOcclusion,Ie.TextureType.PBR_Displacement];for(let wn=0;wn<Oe.materials().count;wn++){const Cn=Oe.materials().get(wn),Sn=Ce(Cn),In=[];In.push(...he(Cn,Dt,Oe)),Sn.pbrSupported=Cn.physicallyBased().supported,Sn.pbrSupported&&(In.push(...he(Cn,Lt,Oe)),Sn.pbr=Ce(Cn.physicallyBased())),Sn.textures=In,Ve.push(Sn),Cn.delete()}for(let wn=0;wn<Oe.layers().count;wn++){const Cn=Oe.layers().get(wn),Sn=Ce(Cn);ze.push(Sn),Cn.delete()}for(let wn=0;wn<Oe.views().count;wn++){const Cn=Oe.views().get(wn),Sn=Ce(Cn);Ue.push(Sn),Cn.delete()}for(let wn=0;wn<Oe.namedViews().count;wn++){const Cn=Oe.namedViews().get(wn),Sn=Ce(Cn);Pt.push(Sn),Cn.delete()}for(let wn=0;wn<Oe.groups().count;wn++){const Cn=Oe.groups().get(wn),Sn=Ce(Cn);qe.push(Sn),Cn.delete()}const jt=Ce(Oe.settings()),_n=Oe.strings().count;for(let wn=0;wn<_n;wn++)Et.push(Oe.strings().get(wn));const bn=Oe.settings().renderSettings().renderEnvironments.reflectionId,vn=Oe.renderContent();let Tn=null;for(let wn=0;wn<vn.count;wn++){const Cn=vn.get(wn);switch(Cn.kind){case"environment":if(Cn.id!==bn)break;const Sn=Cn.findChild("texture").fileName;for(let In=0;In<Oe.embeddedFiles().count;In++){const En=Oe.embeddedFiles().get(In).fileName;Sn===En&&(Tn={type:"renderEnvironment",image:"data:image/png;base64,"+Oe.getEmbeddedFileAsBase64(Sn),name:Sn})}break}}const $n={ambientLight:Oe.settings().renderSettings().ambientLight,backgroundColorTop:Oe.settings().renderSettings().backgroundColorTop,backgroundColorBottom:Oe.settings().renderSettings().backgroundColorBottom,useHiddenLights:Oe.settings().renderSettings().useHiddenLights,depthCue:Oe.settings().renderSettings().depthCue,flatShade:Oe.settings().renderSettings().flatShade,renderBackFaces:Oe.settings().renderSettings().renderBackFaces,renderPoints:Oe.settings().renderSettings().renderPoints,renderCurves:Oe.settings().renderSettings().renderCurves,renderIsoParams:Oe.settings().renderSettings().renderIsoParams,renderMeshEdges:Oe.settings().renderSettings().renderMeshEdges,renderAnnotations:Oe.settings().renderSettings().renderAnnotations,useViewportSize:Oe.settings().renderSettings().useViewportSize,scaleBackgroundToFit:Oe.settings().renderSettings().scaleBackgroundToFit,transparentBackground:Oe.settings().renderSettings().transparentBackground,imageDpi:Oe.settings().renderSettings().imageDpi,shadowMapLevel:Oe.settings().renderSettings().shadowMapLevel,namedView:Oe.settings().renderSettings().namedView,snapShot:Oe.settings().renderSettings().snapShot,specificViewport:Oe.settings().renderSettings().specificViewport,groundPlane:Ce(Oe.settings().renderSettings().groundPlane),safeFrame:Ce(Oe.settings().renderSettings().safeFrame),dithering:Ce(Oe.settings().renderSettings().dithering),skylight:Ce(Oe.settings().renderSettings().skylight),linearWorkflow:Ce(Oe.settings().renderSettings().linearWorkflow),renderChannels:Ce(Oe.settings().renderSettings().renderChannels),sun:Ce(Oe.settings().renderSettings().sun),renderEnvironments:Ce(Oe.settings().renderSettings().renderEnvironments),postEffects:Ce(Oe.settings().renderSettings().postEffects)};return Oe.delete(),{objects:Fe,materials:Ve,layers:ze,views:Ue,namedViews:Pt,groups:qe,strings:Et,settings:jt,renderSettings:$n,renderEnvironment:Tn}}function he(Ie,$e,Ne){const Oe=[];for(let Fe=0;Fe<$e.length;Fe++){const Ve=Ie.getTexture($e[Fe]);if(Ve){let ze=$e[Fe].constructor.name;ze=ze.substring(12,ze.length);const Ue=pe(Ve,ze,Ne);Oe.push(Ue),Ve.delete()}}return Oe}function pe(Ie,$e,Ne){const Oe={type:$e},Fe=Ne.getEmbeddedFileAsBase64(Ie.fileName);Oe.wrapU=Ie.wrapU,Oe.wrapV=Ie.wrapV,Oe.wrapW=Ie.wrapW;const Ve=Ie.uvwTransform.toFloatArray(!0);return Oe.repeat=[Ve[0],Ve[5]],Fe?Oe.image="data:image/png;base64,"+Fe:(self.postMessage({type:"warning",id:ue,data:{message:`THREE.3DMLoader: Image for ${$e} texture not embedded in file.`,type:"missing resource"}}),Oe.image=null),Oe}function _e(Ie,$e){const Ne=Ie.geometry(),Oe=Ie.attributes();let Fe=Ne.objectType,Ve,ze,Ue,Pt,qe;switch(Fe){case ie.ObjectType.Curve:const Et=xe(Ne,100);Ue={},ze={},Pt={},Ue.itemSize=3,Ue.type="Float32Array",Ue.array=[];for(let jt=0;jt<Et.length;jt++)Ue.array.push(Et[jt][0]),Ue.array.push(Et[jt][1]),Ue.array.push(Et[jt][2]);ze.position=Ue,Pt.attributes=ze,Ve={data:Pt};break;case ie.ObjectType.Point:const kt=Ne.location;Ue={};const At={};ze={},Pt={},Ue.itemSize=3,Ue.type="Float32Array",Ue.array=[kt[0],kt[1],kt[2]];const Dt=Oe.drawColor($e);At.itemSize=3,At.type="Float32Array",At.array=[Dt.r/255,Dt.g/255,Dt.b/255],ze.position=Ue,ze.color=At,Pt.attributes=ze,Ve={data:Pt};break;case ie.ObjectType.PointSet:case ie.ObjectType.Mesh:Ve=Ne.toThreejsJSON();break;case ie.ObjectType.Brep:const Lt=Ne.faces();qe=new ie.Mesh;for(let jt=0;jt<Lt.count;jt++){const _n=Lt.get(jt),bn=_n.getMesh(ie.MeshType.Any);bn&&(qe.append(bn),bn.delete()),_n.delete()}qe.faces().count>0&&(qe.compact(),Ve=qe.toThreejsJSON(),Lt.delete()),qe.delete();break;case ie.ObjectType.Extrusion:qe=Ne.getMesh(ie.MeshType.Any),qe&&(Ve=qe.toThreejsJSON(),qe.delete());break;case ie.ObjectType.TextDot:Ve=Ce(Ne);break;case ie.ObjectType.Light:Ve=Ce(Ne),Ve.lightStyle.name==="LightStyle_WorldLinear"&&self.postMessage({type:"warning",id:ue,data:{message:`THREE.3DMLoader: No conversion exists for ${Fe.constructor.name} ${Ve.lightStyle.name}`,type:"no conversion",guid:Oe.id}});break;case ie.ObjectType.InstanceReference:Ve=Ce(Ne),Ve.xform=Ce(Ne.xform),Ve.xform.array=Ne.xform.toFloatArray(!0);break;case ie.ObjectType.SubD:Ne.subdivide(3),qe=ie.Mesh.createFromSubDControlNet(Ne,!1),qe&&(Ve=qe.toThreejsJSON(),qe.delete());break;default:self.postMessage({type:"warning",id:ue,data:{message:`THREE.3DMLoader: Conversion not implemented for ${Fe.constructor.name}`,type:"not implemented",guid:Oe.id}});break}if(Ve)return ze=Ce(Oe),ze.geometry=Ce(Ne),Oe.groupCount>0&&(ze.groupIds=Oe.getGroupList()),Oe.userStringCount>0&&(ze.userStrings=Oe.getUserStrings()),Ne.userStringCount>0&&(ze.geometry.userStrings=Ne.getUserStrings()),Oe.decals().count>0&&self.postMessage({type:"warning",id:ue,data:{message:"THREE.3DMLoader: No conversion exists for the decals associated with this object.",type:"no conversion",guid:Oe.id}}),ze.drawColor=Oe.drawColor($e),Fe=Fe.constructor.name,Fe=Fe.substring(11,Fe.length),{geometry:Ve,attributes:ze,objectType:Fe};self.postMessage({type:"warning",id:ue,data:{message:`THREE.3DMLoader: ${Fe.constructor.name} has no associated mesh geometry.`,type:"missing mesh",guid:Oe.id}})}function Ce(Ie){const $e={};for(const Ne in Ie){const Oe=Ie[Ne];typeof Oe!="function"&&(typeof Oe=="object"&&Oe!==null&&Oe.hasOwnProperty("constructor")?$e[Ne]={name:Oe.constructor.name,value:Oe.value}:typeof Oe=="object"&&Oe!==null?$e[Ne]=Ce(Oe):$e[Ne]=Oe)}return $e}function xe(Ie,$e){let Ne=$e,Oe=[];const Fe=[];if(Ie instanceof ie.LineCurve)return[Ie.pointAtStart,Ie.pointAtEnd];if(Ie instanceof ie.PolylineCurve){Ne=Ie.pointCount;for(let Ue=0;Ue<Ne;Ue++)Oe.push(Ie.point(Ue));return Oe}if(Ie instanceof ie.PolyCurve){const Ue=Ie.segmentCount;for(let Pt=0;Pt<Ue;Pt++){const qe=Ie.segmentCurve(Pt),Et=xe(qe,Ne);Oe=Oe.concat(Et),qe.delete()}return Oe}if(Ie instanceof ie.ArcCurve&&(Ne=Math.floor(Ie.angleDegrees/5),Ne=Ne<2?2:Ne),Ie instanceof ie.NurbsCurve&&Ie.degree===1){const Ue=Ie.tryGetPolyline();for(let Pt=0;Pt<Ue.count;Pt++)Oe.push(Ue.get(Pt));return Ue.delete(),Oe}const Ve=Ie.domain,ze=Ne-1;for(let Ue=0;Ue<Ne;Ue++){const Pt=Ve[0]+Ue/ze*(Ve[1]-Ve[0]);if(Pt===Ve[0]||Pt===Ve[1]){Fe.push(Pt);continue}const qe=Ie.tangentAt(Pt),Et=Ie.tangentAt(Fe.slice(-1)[0]),kt=qe[0]*qe[0]+qe[1]*qe[1]+qe[2]*qe[2],At=Et[0]*Et[0]+Et[1]*Et[1]+Et[2]*Et[2],Dt=Math.sqrt(kt*At);let Lt;if(Dt===0)Lt=Math.PI/2;else{const jt=(qe.x*Et.x+qe.y*Et.y+qe.z*Et.z)/Dt;Lt=Math.acos(Math.max(-1,Math.min(1,jt)))}Lt<.1||Fe.push(Pt)}return Oe=Fe.map(Ue=>Ie.pointAt(Ue)),Oe}}const dr=class To extends LoaderPlugin{static loader(oe){if(this._loader==null){const ie=new Rhino3dmLoader;ie.setLibraryPath(oe),this._loader=ie}return this._loader}load(oe,ie){return new Promise((ue,de)=>{To.loader(oe.rhionPath).load(oe.url,he=>{const pe=new Matrix4$1(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1);he.matrix.premultiply(pe),he.matrixAutoUpdate=!1;const _e=new Box3().setFromObject(he),Ce=new ModelDocument(this.app);oe.name&&(Ce.name=oe.name),Object3DUtils.BatchAndInstance(he,Ce),_e.applyMatrix4(Ce.rootObject.matrix),Ce.app.view.setHome(_e,!1,Math.PI/4,2*Math.PI),ue(Ce)},he=>{ie&&ie(he)},he=>{de(he)})})}};ve(dr,"_loader");let RhinoLoaderPlugin=dr;const pr=class So extends LoaderPlugin{static loader(){if(this._loader==null){const oe=new FBXLoader;this._loader=oe}return this._loader}load(oe,ie){return new Promise((ue,de)=>{So.loader().load(oe.url,he=>{const pe=new Box3().setFromObject(he),_e=new ModelDocument(this.app);oe.name&&(_e.name=oe.name),Object3DUtils.BatchAndInstance(he,_e),pe.applyMatrix4(_e.rootObject.matrix),_e.app.view.setHome(pe,!1,Math.PI/4,2*Math.PI),ue(_e)},he=>{ie&&ie(he)},he=>{de(he)})})}};ve(pr,"_loader");let FBXLoaderPlugin=pr;class AppContext extends EventEmitter{constructor(oe){super(),ve(this,"_loaderPlugin"),ve(this,"_appConfig"),ve(this,"_view"),ve(this,"_activeDocument"),ve(this,"_allDocuments"),this._loaderPlugin=new Map,this._loaderPlugin.set(ModelFormat.DXF,DxfLoaderPlugin),this._loaderPlugin.set(ModelFormat.GLTF,GLTFLoaderPlugin),this._loaderPlugin.set(ModelFormat.TILES,TilesLoaderPlugin),this._loaderPlugin.set(ModelFormat.IFC,IFCLoaderPlugin),this._loaderPlugin.set(ModelFormat.RHION,RhinoLoaderPlugin),this._loaderPlugin.set(ModelFormat.FBX,FBXLoaderPlugin),this._appConfig=oe,this._view=new View$2(this),this._allDocuments=new Map}get appConfig(){return this._appConfig}get view(){return this._view}get activeDocument(){return this._activeDocument}get allDocuments(){return this._allDocuments.values()}loadModel(oe,ie){return new Promise((ue,de)=>{const he=this._getLoader(oe);if(he||de(`${oe.url}`),this._allDocuments.has(oe.url)){ue(this._allDocuments.get(oe.url));return}he.load(oe,ie).then(pe=>{this._activeDocument=pe,this._allDocuments.set(oe.url,pe),ue(pe)}).catch(pe=>{de(pe)})})}_getLoader(oe){let ie;if(this._loaderPlugin.has(oe==null?void 0:oe.format)&&(ie=this._loaderPlugin.get(oe.format)),!ie){const ue=oe.url;switch(ue.slice(ue.lastIndexOf(".")+1).split("?")[0].toLowerCase()){case"dxf":ie=this._loaderPlugin.get(ModelFormat.DXF);break;case"glb":case"gltf":ie=this._loaderPlugin.get(ModelFormat.GLTF);break;case"ifc":ie=this._loaderPlugin.get(ModelFormat.IFC);break;case"3dm":ie=this._loaderPlugin.get(ModelFormat.RHION);break;case"fbx":ie=this._loaderPlugin.get(ModelFormat.FBX);break}}return ie?new ie(this):null}enableRender(){this._view.enableRender()}getElementByID(oe){if(oe==null)return null;for(const ie of this._allDocuments.values()){const ue=ie.getElement(oe);if(ue!=null)return ue}return null}closeModel(oe){for(const ie of this._allDocuments.keys())if(this._allDocuments.get(ie)==oe){this._allDocuments.delete(ie);break}oe.dispose()}getElementByEvent(oe){let ie=this.view.raycaster.getIntersectObjByGPU(oe);return this.getElementByID(ie)}get canvas(){return this.view.renderer.domElement}getEmviormentParameter(oe){return MyMeshStandardMaterial.enhanceShaderLightingParams[oe]}setEmviormentParameter(oe,ie){this.view.root.traverse(ue=>{["Mesh"].includes(ue.type)&&ue.material.shader&&(ue.material.shader.uniforms[oe].value=ie)}),MyMeshStandardMaterial.enhanceShaderLightingParams[oe]=ie,this.enableRender()}setExplosion(oe){for(const ie of this._allDocuments.values())ie.setExplosion(oe)}}function _assertThisInitialized(le){if(le===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return le}function _inheritsLoose(le,oe){le.prototype=Object.create(oe.prototype),le.prototype.constructor=le,le.__proto__=oe}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var _config={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},_defaults={duration:.5,overwrite:!1,delay:0},_suppressOverwrites,_reverting$1,_context,_bigNum$1=1e8,_tinyNum=1/_bigNum$1,_2PI=Math.PI*2,_HALF_PI=_2PI/4,_gsID=0,_sqrt=Math.sqrt,_cos=Math.cos,_sin=Math.sin,_isString=function le(oe){return typeof oe=="string"},_isFunction=function le(oe){return typeof oe=="function"},_isNumber=function le(oe){return typeof oe=="number"},_isUndefined=function le(oe){return typeof oe>"u"},_isObject=function le(oe){return typeof oe=="object"},_isNotFalse=function le(oe){return oe!==!1},_windowExists$1=function le(){return typeof window<"u"},_isFuncOrString=function le(oe){return _isFunction(oe)||_isString(oe)},_isTypedArray=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},_isArray=Array.isArray,_strictNumExp=/(?:-?\.?\d|\.)+/gi,_numExp=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,_numWithUnitExp=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,_complexStringNumExp=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,_relExp=/[+-]=-?[.\d]+/,_delimitedValueExp=/[^,'"\[\]\s]+/gi,_unitExp=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,_globalTimeline,_win$1,_coreInitted,_doc$1,_globals={},_installScope={},_coreReady,_install=function le(oe){return(_installScope=_merge(oe,_globals))&&gsap},_missingPlugin=function le(oe,ie){},_warn=function le(oe,ie){return!ie&&void 0},_addGlobal=function le(oe,ie){return oe&&(_globals[oe]=ie)&&_installScope&&(_installScope[oe]=ie)||_globals},_emptyFunc=function le(){return 0},_startAtRevertConfig={suppressEvents:!0,isStart:!0,kill:!1},_revertConfigNoKill={suppressEvents:!0,kill:!1},_revertConfig={suppressEvents:!0},_reservedProps={},_lazyTweens=[],_lazyLookup={},_lastRenderedFrame,_plugins={},_effects={},_nextGCFrame=30,_harnessPlugins=[],_callbackNames="",_harness=function le(oe){var ie=oe[0],ue,de;if(_isObject(ie)||_isFunction(ie)||(oe=[oe]),!(ue=(ie._gsap||{}).harness)){for(de=_harnessPlugins.length;de--&&!_harnessPlugins[de].targetTest(ie););ue=_harnessPlugins[de]}for(de=oe.length;de--;)oe[de]&&(oe[de]._gsap||(oe[de]._gsap=new GSCache(oe[de],ue)))||oe.splice(de,1);return oe},_getCache=function le(oe){return oe._gsap||_harness(toArray(oe))[0]._gsap},_getProperty=function le(oe,ie,ue){return(ue=oe[ie])&&_isFunction(ue)?oe[ie]():_isUndefined(ue)&&oe.getAttribute&&oe.getAttribute(ie)||ue},_forEachName=function le(oe,ie){return(oe=oe.split(",")).forEach(ie)||oe},_round=function le(oe){return Math.round(oe*1e5)/1e5||0},_roundPrecise=function le(oe){return Math.round(oe*1e7)/1e7||0},_parseRelative=function le(oe,ie){var ue=ie.charAt(0),de=parseFloat(ie.substr(2));return oe=parseFloat(oe),ue==="+"?oe+de:ue==="-"?oe-de:ue==="*"?oe*de:oe/de},_arrayContainsAny=function le(oe,ie){for(var ue=ie.length,de=0;oe.indexOf(ie[de])<0&&++de<ue;);return de<ue},_lazyRender=function le(){var oe=_lazyTweens.length,ie=_lazyTweens.slice(0),ue,de;for(_lazyLookup={},_lazyTweens.length=0,ue=0;ue<oe;ue++)de=ie[ue],de&&de._lazy&&(de.render(de._lazy[0],de._lazy[1],!0)._lazy=0)},_lazySafeRender=function le(oe,ie,ue,de){_lazyTweens.length&&!_reverting$1&&_lazyRender(),oe.render(ie,ue,_reverting$1&&ie<0&&(oe._initted||oe._startAt)),_lazyTweens.length&&!_reverting$1&&_lazyRender()},_numericIfPossible=function le(oe){var ie=parseFloat(oe);return(ie||ie===0)&&(oe+"").match(_delimitedValueExp).length<2?ie:_isString(oe)?oe.trim():oe},_passThrough=function le(oe){return oe},_setDefaults=function le(oe,ie){for(var ue in ie)ue in oe||(oe[ue]=ie[ue]);return oe},_setKeyframeDefaults=function le(oe){return function(ie,ue){for(var de in ue)de in ie||de==="duration"&&oe||de==="ease"||(ie[de]=ue[de])}},_merge=function le(oe,ie){for(var ue in ie)oe[ue]=ie[ue];return oe},_mergeDeep=function le(oe,ie){for(var ue in ie)ue!=="__proto__"&&ue!=="constructor"&&ue!=="prototype"&&(oe[ue]=_isObject(ie[ue])?le(oe[ue]||(oe[ue]={}),ie[ue]):ie[ue]);return oe},_copyExcluding=function le(oe,ie){var ue={},de;for(de in oe)de in ie||(ue[de]=oe[de]);return ue},_inheritDefaults=function le(oe){var ie=oe.parent||_globalTimeline,ue=oe.keyframes?_setKeyframeDefaults(_isArray(oe.keyframes)):_setDefaults;if(_isNotFalse(oe.inherit))for(;ie;)ue(oe,ie.vars.defaults),ie=ie.parent||ie._dp;return oe},_arraysMatch=function le(oe,ie){for(var ue=oe.length,de=ue===ie.length;de&&ue--&&oe[ue]===ie[ue];);return ue<0},_addLinkedListItem=function le(oe,ie,ue,de,he){var pe=oe[de],_e;if(he)for(_e=ie[he];pe&&pe[he]>_e;)pe=pe._prev;return pe?(ie._next=pe._next,pe._next=ie):(ie._next=oe[ue],oe[ue]=ie),ie._next?ie._next._prev=ie:oe[de]=ie,ie._prev=pe,ie.parent=ie._dp=oe,ie},_removeLinkedListItem=function le(oe,ie,ue,de){ue===void 0&&(ue="_first"),de===void 0&&(de="_last");var he=ie._prev,pe=ie._next;he?he._next=pe:oe[ue]===ie&&(oe[ue]=pe),pe?pe._prev=he:oe[de]===ie&&(oe[de]=he),ie._next=ie._prev=ie.parent=null},_removeFromParent=function le(oe,ie){oe.parent&&(!ie||oe.parent.autoRemoveChildren)&&oe.parent.remove&&oe.parent.remove(oe),oe._act=0},_uncache=function le(oe,ie){if(oe&&(!ie||ie._end>oe._dur||ie._start<0))for(var ue=oe;ue;)ue._dirty=1,ue=ue.parent;return oe},_recacheAncestors=function le(oe){for(var ie=oe.parent;ie&&ie.parent;)ie._dirty=1,ie.totalDuration(),ie=ie.parent;return oe},_rewindStartAt=function le(oe,ie,ue,de){return oe._startAt&&(_reverting$1?oe._startAt.revert(_revertConfigNoKill):oe.vars.immediateRender&&!oe.vars.autoRevert||oe._startAt.render(ie,!0,de))},_hasNoPausedAncestors=function le(oe){return!oe||oe._ts&&le(oe.parent)},_elapsedCycleDuration=function le(oe){return oe._repeat?_animationCycle(oe._tTime,oe=oe.duration()+oe._rDelay)*oe:0},_animationCycle=function le(oe,ie){var ue=Math.floor(oe/=ie);return oe&&ue===oe?ue-1:ue},_parentToChildTotalTime=function le(oe,ie){return(oe-ie._start)*ie._ts+(ie._ts>=0?0:ie._dirty?ie.totalDuration():ie._tDur)},_setEnd=function le(oe){return oe._end=_roundPrecise(oe._start+(oe._tDur/Math.abs(oe._ts||oe._rts||_tinyNum)||0))},_alignPlayhead=function le(oe,ie){var ue=oe._dp;return ue&&ue.smoothChildTiming&&oe._ts&&(oe._start=_roundPrecise(ue._time-(oe._ts>0?ie/oe._ts:((oe._dirty?oe.totalDuration():oe._tDur)-ie)/-oe._ts)),_setEnd(oe),ue._dirty||_uncache(ue,oe)),oe},_postAddChecks=function le(oe,ie){var ue;if((ie._time||!ie._dur&&ie._initted||ie._start<oe._time&&(ie._dur||!ie.add))&&(ue=_parentToChildTotalTime(oe.rawTime(),ie),(!ie._dur||_clamp(0,ie.totalDuration(),ue)-ie._tTime>_tinyNum)&&ie.render(ue,!0)),_uncache(oe,ie)._dp&&oe._initted&&oe._time>=oe._dur&&oe._ts){if(oe._dur<oe.duration())for(ue=oe;ue._dp;)ue.rawTime()>=0&&ue.totalTime(ue._tTime),ue=ue._dp;oe._zTime=-1e-8}},_addToTimeline=function le(oe,ie,ue,de){return ie.parent&&_removeFromParent(ie),ie._start=_roundPrecise((_isNumber(ue)?ue:ue||oe!==_globalTimeline?_parsePosition(oe,ue,ie):oe._time)+ie._delay),ie._end=_roundPrecise(ie._start+(ie.totalDuration()/Math.abs(ie.timeScale())||0)),_addLinkedListItem(oe,ie,"_first","_last",oe._sort?"_start":0),_isFromOrFromStart(ie)||(oe._recent=ie),de||_postAddChecks(oe,ie),oe._ts<0&&_alignPlayhead(oe,oe._tTime),oe},_scrollTrigger=function le(oe,ie){return(_globals.ScrollTrigger||_missingPlugin("scrollTrigger",ie))&&_globals.ScrollTrigger.create(ie,oe)},_attemptInitTween=function le(oe,ie,ue,de,he){if(_initTween(oe,ie,he),!oe._initted)return 1;if(!ue&&oe._pt&&!_reverting$1&&(oe._dur&&oe.vars.lazy!==!1||!oe._dur&&oe.vars.lazy)&&_lastRenderedFrame!==_ticker.frame)return _lazyTweens.push(oe),oe._lazy=[he,de],1},_parentPlayheadIsBeforeStart=function le(oe){var ie=oe.parent;return ie&&ie._ts&&ie._initted&&!ie._lock&&(ie.rawTime()<0||le(ie))},_isFromOrFromStart=function le(oe){var ie=oe.data;return ie==="isFromStart"||ie==="isStart"},_renderZeroDurationTween=function le(oe,ie,ue,de){var he=oe.ratio,pe=ie<0||!ie&&(!oe._start&&_parentPlayheadIsBeforeStart(oe)&&!(!oe._initted&&_isFromOrFromStart(oe))||(oe._ts<0||oe._dp._ts<0)&&!_isFromOrFromStart(oe))?0:1,_e=oe._rDelay,Ce=0,xe,Ie,$e;if(_e&&oe._repeat&&(Ce=_clamp(0,oe._tDur,ie),Ie=_animationCycle(Ce,_e),oe._yoyo&&Ie&1&&(pe=1-pe),Ie!==_animationCycle(oe._tTime,_e)&&(he=1-pe,oe.vars.repeatRefresh&&oe._initted&&oe.invalidate())),pe!==he||_reverting$1||de||oe._zTime===_tinyNum||!ie&&oe._zTime){if(!oe._initted&&_attemptInitTween(oe,ie,de,ue,Ce))return;for($e=oe._zTime,oe._zTime=ie||(ue?_tinyNum:0),ue||(ue=ie&&!$e),oe.ratio=pe,oe._from&&(pe=1-pe),oe._time=0,oe._tTime=Ce,xe=oe._pt;xe;)xe.r(pe,xe.d),xe=xe._next;ie<0&&_rewindStartAt(oe,ie,ue,!0),oe._onUpdate&&!ue&&_callback(oe,"onUpdate"),Ce&&oe._repeat&&!ue&&oe.parent&&_callback(oe,"onRepeat"),(ie>=oe._tDur||ie<0)&&oe.ratio===pe&&(pe&&_removeFromParent(oe,1),!ue&&!_reverting$1&&(_callback(oe,pe?"onComplete":"onReverseComplete",!0),oe._prom&&oe._prom()))}else oe._zTime||(oe._zTime=ie)},_findNextPauseTween=function le(oe,ie,ue){var de;if(ue>ie)for(de=oe._first;de&&de._start<=ue;){if(de.data==="isPause"&&de._start>ie)return de;de=de._next}else for(de=oe._last;de&&de._start>=ue;){if(de.data==="isPause"&&de._start<ie)return de;de=de._prev}},_setDuration=function le(oe,ie,ue,de){var he=oe._repeat,pe=_roundPrecise(ie)||0,_e=oe._tTime/oe._tDur;return _e&&!de&&(oe._time*=pe/oe._dur),oe._dur=pe,oe._tDur=he?he<0?1e10:_roundPrecise(pe*(he+1)+oe._rDelay*he):pe,_e>0&&!de&&_alignPlayhead(oe,oe._tTime=oe._tDur*_e),oe.parent&&_setEnd(oe),ue||_uncache(oe.parent,oe),oe},_onUpdateTotalDuration=function le(oe){return oe instanceof Timeline?_uncache(oe):_setDuration(oe,oe._dur)},_zeroPosition={_start:0,endTime:_emptyFunc,totalDuration:_emptyFunc},_parsePosition=function le(oe,ie,ue){var de=oe.labels,he=oe._recent||_zeroPosition,pe=oe.duration()>=_bigNum$1?he.endTime(!1):oe._dur,_e,Ce,xe;return _isString(ie)&&(isNaN(ie)||ie in de)?(Ce=ie.charAt(0),xe=ie.substr(-1)==="%",_e=ie.indexOf("="),Ce==="<"||Ce===">"?(_e>=0&&(ie=ie.replace(/=/,"")),(Ce==="<"?he._start:he.endTime(he._repeat>=0))+(parseFloat(ie.substr(1))||0)*(xe?(_e<0?he:ue).totalDuration()/100:1)):_e<0?(ie in de||(de[ie]=pe),de[ie]):(Ce=parseFloat(ie.charAt(_e-1)+ie.substr(_e+1)),xe&&ue&&(Ce=Ce/100*(_isArray(ue)?ue[0]:ue).totalDuration()),_e>1?le(oe,ie.substr(0,_e-1),ue)+Ce:pe+Ce)):ie==null?pe:+ie},_createTweenType=function le(oe,ie,ue){var de=_isNumber(ie[1]),he=(de?2:1)+(oe<2?0:1),pe=ie[he],_e,Ce;if(de&&(pe.duration=ie[1]),pe.parent=ue,oe){for(_e=pe,Ce=ue;Ce&&!("immediateRender"in _e);)_e=Ce.vars.defaults||{},Ce=_isNotFalse(Ce.vars.inherit)&&Ce.parent;pe.immediateRender=_isNotFalse(_e.immediateRender),oe<2?pe.runBackwards=1:pe.startAt=ie[he-1]}return new Tween(ie[0],pe,ie[he+1])},_conditionalReturn=function le(oe,ie){return oe||oe===0?ie(oe):ie},_clamp=function le(oe,ie,ue){return ue<oe?oe:ue>ie?ie:ue},getUnit=function le(oe,ie){return!_isString(oe)||!(ie=_unitExp.exec(oe))?"":ie[1]},clamp=function le(oe,ie,ue){return _conditionalReturn(ue,function(de){return _clamp(oe,ie,de)})},_slice=[].slice,_isArrayLike=function le(oe,ie){return oe&&_isObject(oe)&&"length"in oe&&(!ie&&!oe.length||oe.length-1 in oe&&_isObject(oe[0]))&&!oe.nodeType&&oe!==_win$1},_flatten=function le(oe,ie,ue){return ue===void 0&&(ue=[]),oe.forEach(function(de){var he;return _isString(de)&&!ie||_isArrayLike(de,1)?(he=ue).push.apply(he,toArray(de)):ue.push(de)})||ue},toArray=function le(oe,ie,ue){return _context&&!ie&&_context.selector?_context.selector(oe):_isString(oe)&&!ue&&(_coreInitted||!_wake())?_slice.call((ie||_doc$1).querySelectorAll(oe),0):_isArray(oe)?_flatten(oe,ue):_isArrayLike(oe)?_slice.call(oe,0):oe?[oe]:[]},selector=function le(oe){return oe=toArray(oe)[0]||_warn("Invalid scope")||{},function(ie){var ue=oe.current||oe.nativeElement||oe;return toArray(ie,ue.querySelectorAll?ue:ue===oe?_warn("Invalid scope")||_doc$1.createElement("div"):oe)}},shuffle=function le(oe){return oe.sort(function(){return .5-Math.random()})},distribute=function le(oe){if(_isFunction(oe))return oe;var ie=_isObject(oe)?oe:{each:oe},ue=_parseEase(ie.ease),de=ie.from||0,he=parseFloat(ie.base)||0,pe={},_e=de>0&&de<1,Ce=isNaN(de)||_e,xe=ie.axis,Ie=de,$e=de;return _isString(de)?Ie=$e={center:.5,edges:.5,end:1}[de]||0:!_e&&Ce&&(Ie=de[0],$e=de[1]),function(Ne,Oe,Fe){var Ve=(Fe||ie).length,ze=pe[Ve],Ue,Pt,qe,Et,kt,At,Dt,Lt,jt;if(!ze){if(jt=ie.grid==="auto"?0:(ie.grid||[1,_bigNum$1])[1],!jt){for(Dt=-1e8;Dt<(Dt=Fe[jt++].getBoundingClientRect().left)&&jt<Ve;);jt<Ve&&jt--}for(ze=pe[Ve]=[],Ue=Ce?Math.min(jt,Ve)*Ie-.5:de%jt,Pt=jt===_bigNum$1?0:Ce?Ve*$e/jt-.5:de/jt|0,Dt=0,Lt=_bigNum$1,At=0;At<Ve;At++)qe=At%jt-Ue,Et=Pt-(At/jt|0),ze[At]=kt=xe?Math.abs(xe==="y"?Et:qe):_sqrt(qe*qe+Et*Et),kt>Dt&&(Dt=kt),kt<Lt&&(Lt=kt);de==="random"&&shuffle(ze),ze.max=Dt-Lt,ze.min=Lt,ze.v=Ve=(parseFloat(ie.amount)||parseFloat(ie.each)*(jt>Ve?Ve-1:xe?xe==="y"?Ve/jt:jt:Math.max(jt,Ve/jt))||0)*(de==="edges"?-1:1),ze.b=Ve<0?he-Ve:he,ze.u=getUnit(ie.amount||ie.each)||0,ue=ue&&Ve<0?_invertEase(ue):ue}return Ve=(ze[Ne]-ze.min)/ze.max||0,_roundPrecise(ze.b+(ue?ue(Ve):Ve)*ze.v)+ze.u}},_roundModifier=function le(oe){var ie=Math.pow(10,((oe+"").split(".")[1]||"").length);return function(ue){var de=_roundPrecise(Math.round(parseFloat(ue)/oe)*oe*ie);return(de-de%1)/ie+(_isNumber(ue)?0:getUnit(ue))}},snap=function le(oe,ie){var ue=_isArray(oe),de,he;return!ue&&_isObject(oe)&&(de=ue=oe.radius||_bigNum$1,oe.values?(oe=toArray(oe.values),(he=!_isNumber(oe[0]))&&(de*=de)):oe=_roundModifier(oe.increment)),_conditionalReturn(ie,ue?_isFunction(oe)?function(pe){return he=oe(pe),Math.abs(he-pe)<=de?he:pe}:function(pe){for(var _e=parseFloat(he?pe.x:pe),Ce=parseFloat(he?pe.y:0),xe=_bigNum$1,Ie=0,$e=oe.length,Ne,Oe;$e--;)he?(Ne=oe[$e].x-_e,Oe=oe[$e].y-Ce,Ne=Ne*Ne+Oe*Oe):Ne=Math.abs(oe[$e]-_e),Ne<xe&&(xe=Ne,Ie=$e);return Ie=!de||xe<=de?oe[Ie]:pe,he||Ie===pe||_isNumber(pe)?Ie:Ie+getUnit(pe)}:_roundModifier(oe))},random=function le(oe,ie,ue,de){return _conditionalReturn(_isArray(oe)?!ie:ue===!0?!!(ue=0):!de,function(){return _isArray(oe)?oe[~~(Math.random()*oe.length)]:(ue=ue||1e-5)&&(de=ue<1?Math.pow(10,(ue+"").length-2):1)&&Math.floor(Math.round((oe-ue/2+Math.random()*(ie-oe+ue*.99))/ue)*ue*de)/de})},pipe=function le(){for(var oe=arguments.length,ie=new Array(oe),ue=0;ue<oe;ue++)ie[ue]=arguments[ue];return function(de){return ie.reduce(function(he,pe){return pe(he)},de)}},unitize=function le(oe,ie){return function(ue){return oe(parseFloat(ue))+(ie||getUnit(ue))}},normalize$1=function le(oe,ie,ue){return mapRange(oe,ie,0,1,ue)},_wrapArray=function le(oe,ie,ue){return _conditionalReturn(ue,function(de){return oe[~~ie(de)]})},wrap=function le(oe,ie,ue){var de=ie-oe;return _isArray(oe)?_wrapArray(oe,le(0,oe.length),ie):_conditionalReturn(ue,function(he){return(de+(he-oe)%de)%de+oe})},wrapYoyo=function le(oe,ie,ue){var de=ie-oe,he=de*2;return _isArray(oe)?_wrapArray(oe,le(0,oe.length-1),ie):_conditionalReturn(ue,function(pe){return pe=(he+(pe-oe)%he)%he||0,oe+(pe>de?he-pe:pe)})},_replaceRandom=function le(oe){for(var ie=0,ue="",de,he,pe,_e;~(de=oe.indexOf("random(",ie));)pe=oe.indexOf(")",de),_e=oe.charAt(de+7)==="[",he=oe.substr(de+7,pe-de-7).match(_e?_delimitedValueExp:_strictNumExp),ue+=oe.substr(ie,de-ie)+random(_e?he:+he[0],_e?0:+he[1],+he[2]||1e-5),ie=pe+1;return ue+oe.substr(ie,oe.length-ie)},mapRange=function le(oe,ie,ue,de,he){var pe=ie-oe,_e=de-ue;return _conditionalReturn(he,function(Ce){return ue+((Ce-oe)/pe*_e||0)})},interpolate=function le(oe,ie,ue,de){var he=isNaN(oe+ie)?0:function(Oe){return(1-Oe)*oe+Oe*ie};if(!he){var pe=_isString(oe),_e={},Ce,xe,Ie,$e,Ne;if(ue===!0&&(de=1)&&(ue=null),pe)oe={p:oe},ie={p:ie};else if(_isArray(oe)&&!_isArray(ie)){for(Ie=[],$e=oe.length,Ne=$e-2,xe=1;xe<$e;xe++)Ie.push(le(oe[xe-1],oe[xe]));$e--,he=function(Oe){Oe*=$e;var Fe=Math.min(Ne,~~Oe);return Ie[Fe](Oe-Fe)},ue=ie}else de||(oe=_merge(_isArray(oe)?[]:{},oe));if(!Ie){for(Ce in ie)_addPropTween.call(_e,oe,Ce,"get",ie[Ce]);he=function(Oe){return _renderPropTweens(Oe,_e)||(pe?oe.p:oe)}}}return _conditionalReturn(ue,he)},_getLabelInDirection=function le(oe,ie,ue){var de=oe.labels,he=_bigNum$1,pe,_e,Ce;for(pe in de)_e=de[pe]-ie,_e<0==!!ue&&_e&&he>(_e=Math.abs(_e))&&(Ce=pe,he=_e);return Ce},_callback=function le(oe,ie,ue){var de=oe.vars,he=de[ie],pe=_context,_e=oe._ctx,Ce,xe,Ie;if(he)return Ce=de[ie+"Params"],xe=de.callbackScope||oe,ue&&_lazyTweens.length&&_lazyRender(),_e&&(_context=_e),Ie=Ce?he.apply(xe,Ce):he.call(xe),_context=pe,Ie},_interrupt=function le(oe){return _removeFromParent(oe),oe.scrollTrigger&&oe.scrollTrigger.kill(!!_reverting$1),oe.progress()<1&&_callback(oe,"onInterrupt"),oe},_quickTween,_registerPluginQueue=[],_createPlugin=function le(oe){if(oe)if(oe=!oe.name&&oe.default||oe,_windowExists$1()||oe.headless){var ie=oe.name,ue=_isFunction(oe),de=ie&&!ue&&oe.init?function(){this._props=[]}:oe,he={init:_emptyFunc,render:_renderPropTweens,add:_addPropTween,kill:_killPropTweensOf,modifier:_addPluginModifier,rawVars:0},pe={targetTest:0,get:0,getSetter:_getSetter,aliases:{},register:0};if(_wake(),oe!==de){if(_plugins[ie])return;_setDefaults(de,_setDefaults(_copyExcluding(oe,he),pe)),_merge(de.prototype,_merge(he,_copyExcluding(oe,pe))),_plugins[de.prop=ie]=de,oe.targetTest&&(_harnessPlugins.push(de),_reservedProps[ie]=1),ie=(ie==="css"?"CSS":ie.charAt(0).toUpperCase()+ie.substr(1))+"Plugin"}_addGlobal(ie,de),oe.register&&oe.register(gsap,de,PropTween)}else _registerPluginQueue.push(oe)},_255=255,_colorLookup={aqua:[0,_255,_255],lime:[0,_255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,_255],navy:[0,0,128],white:[_255,_255,_255],olive:[128,128,0],yellow:[_255,_255,0],orange:[_255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[_255,0,0],pink:[_255,192,203],cyan:[0,_255,_255],transparent:[_255,_255,_255,0]},_hue=function le(oe,ie,ue){return oe+=oe<0?1:oe>1?-1:0,(oe*6<1?ie+(ue-ie)*oe*6:oe<.5?ue:oe*3<2?ie+(ue-ie)*(2/3-oe)*6:ie)*_255+.5|0},splitColor=function le(oe,ie,ue){var de=oe?_isNumber(oe)?[oe>>16,oe>>8&_255,oe&_255]:0:_colorLookup.black,he,pe,_e,Ce,xe,Ie,$e,Ne,Oe,Fe;if(!de){if(oe.substr(-1)===","&&(oe=oe.substr(0,oe.length-1)),_colorLookup[oe])de=_colorLookup[oe];else if(oe.charAt(0)==="#"){if(oe.length<6&&(he=oe.charAt(1),pe=oe.charAt(2),_e=oe.charAt(3),oe="#"+he+he+pe+pe+_e+_e+(oe.length===5?oe.charAt(4)+oe.charAt(4):"")),oe.length===9)return de=parseInt(oe.substr(1,6),16),[de>>16,de>>8&_255,de&_255,parseInt(oe.substr(7),16)/255];oe=parseInt(oe.substr(1),16),de=[oe>>16,oe>>8&_255,oe&_255]}else if(oe.substr(0,3)==="hsl"){if(de=Fe=oe.match(_strictNumExp),!ie)Ce=+de[0]%360/360,xe=+de[1]/100,Ie=+de[2]/100,pe=Ie<=.5?Ie*(xe+1):Ie+xe-Ie*xe,he=Ie*2-pe,de.length>3&&(de[3]*=1),de[0]=_hue(Ce+1/3,he,pe),de[1]=_hue(Ce,he,pe),de[2]=_hue(Ce-1/3,he,pe);else if(~oe.indexOf("="))return de=oe.match(_numExp),ue&&de.length<4&&(de[3]=1),de}else de=oe.match(_strictNumExp)||_colorLookup.transparent;de=de.map(Number)}return ie&&!Fe&&(he=de[0]/_255,pe=de[1]/_255,_e=de[2]/_255,$e=Math.max(he,pe,_e),Ne=Math.min(he,pe,_e),Ie=($e+Ne)/2,$e===Ne?Ce=xe=0:(Oe=$e-Ne,xe=Ie>.5?Oe/(2-$e-Ne):Oe/($e+Ne),Ce=$e===he?(pe-_e)/Oe+(pe<_e?6:0):$e===pe?(_e-he)/Oe+2:(he-pe)/Oe+4,Ce*=60),de[0]=~~(Ce+.5),de[1]=~~(xe*100+.5),de[2]=~~(Ie*100+.5)),ue&&de.length<4&&(de[3]=1),de},_colorOrderData=function le(oe){var ie=[],ue=[],de=-1;return oe.split(_colorExp).forEach(function(he){var pe=he.match(_numWithUnitExp)||[];ie.push.apply(ie,pe),ue.push(de+=pe.length+1)}),ie.c=ue,ie},_formatColors=function le(oe,ie,ue){var de="",he=(oe+de).match(_colorExp),pe=ie?"hsla(":"rgba(",_e=0,Ce,xe,Ie,$e;if(!he)return oe;if(he=he.map(function(Ne){return(Ne=splitColor(Ne,ie,1))&&pe+(ie?Ne[0]+","+Ne[1]+"%,"+Ne[2]+"%,"+Ne[3]:Ne.join(","))+")"}),ue&&(Ie=_colorOrderData(oe),Ce=ue.c,Ce.join(de)!==Ie.c.join(de)))for(xe=oe.replace(_colorExp,"1").split(_numWithUnitExp),$e=xe.length-1;_e<$e;_e++)de+=xe[_e]+(~Ce.indexOf(_e)?he.shift()||pe+"0,0,0,0)":(Ie.length?Ie:he.length?he:ue).shift());if(!xe)for(xe=oe.split(_colorExp),$e=xe.length-1;_e<$e;_e++)de+=xe[_e]+he[_e];return de+xe[$e]},_colorExp=function(){var le="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",oe;for(oe in _colorLookup)le+="|"+oe+"\\b";return new RegExp(le+")","gi")}(),_hslExp=/hsl[a]?\(/,_colorStringFilter=function le(oe){var ie=oe.join(" "),ue;if(_colorExp.lastIndex=0,_colorExp.test(ie))return ue=_hslExp.test(ie),oe[1]=_formatColors(oe[1],ue),oe[0]=_formatColors(oe[0],ue,_colorOrderData(oe[1])),!0},_tickerActive,_ticker=function(){var le=Date.now,oe=500,ie=33,ue=le(),de=ue,he=1e3/240,pe=he,_e=[],Ce,xe,Ie,$e,Ne,Oe,Fe=function Ve(ze){var Ue=le()-de,Pt=ze===!0,qe,Et,kt,At;if((Ue>oe||Ue<0)&&(ue+=Ue-ie),de+=Ue,kt=de-ue,qe=kt-pe,(qe>0||Pt)&&(At=++$e.frame,Ne=kt-$e.time*1e3,$e.time=kt=kt/1e3,pe+=qe+(qe>=he?4:he-qe),Et=1),Pt||(Ce=xe(Ve)),Et)for(Oe=0;Oe<_e.length;Oe++)_e[Oe](kt,Ne,At,ze)};return $e={time:0,frame:0,tick:function(){Fe(!0)},deltaRatio:function(Ve){return Ne/(1e3/(Ve||60))},wake:function(){_coreReady&&(!_coreInitted&&_windowExists$1()&&(_win$1=_coreInitted=window,_doc$1=_win$1.document||{},_globals.gsap=gsap,(_win$1.gsapVersions||(_win$1.gsapVersions=[])).push(gsap.version),_install(_installScope||_win$1.GreenSockGlobals||!_win$1.gsap&&_win$1||{}),_registerPluginQueue.forEach(_createPlugin)),Ie=typeof requestAnimationFrame<"u"&&requestAnimationFrame,Ce&&$e.sleep(),xe=Ie||function(Ve){return setTimeout(Ve,pe-$e.time*1e3+1|0)},_tickerActive=1,Fe(2))},sleep:function(){(Ie?cancelAnimationFrame:clearTimeout)(Ce),_tickerActive=0,xe=_emptyFunc},lagSmoothing:function(Ve,ze){oe=Ve||1/0,ie=Math.min(ze||33,oe)},fps:function(Ve){he=1e3/(Ve||240),pe=$e.time*1e3+he},add:function(Ve,ze,Ue){var Pt=ze?function(qe,Et,kt,At){Ve(qe,Et,kt,At),$e.remove(Pt)}:Ve;return $e.remove(Ve),_e[Ue?"unshift":"push"](Pt),_wake(),Pt},remove:function(Ve,ze){~(ze=_e.indexOf(Ve))&&_e.splice(ze,1)&&Oe>=ze&&Oe--},_listeners:_e},$e}(),_wake=function le(){return!_tickerActive&&_ticker.wake()},_easeMap={},_customEaseExp=/^[\d.\-M][\d.\-,\s]/,_quotesExp=/["']/g,_parseObjectInString=function le(oe){for(var ie={},ue=oe.substr(1,oe.length-3).split(":"),de=ue[0],he=1,pe=ue.length,_e,Ce,xe;he<pe;he++)Ce=ue[he],_e=he!==pe-1?Ce.lastIndexOf(","):Ce.length,xe=Ce.substr(0,_e),ie[de]=isNaN(xe)?xe.replace(_quotesExp,"").trim():+xe,de=Ce.substr(_e+1).trim();return ie},_valueInParentheses=function le(oe){var ie=oe.indexOf("(")+1,ue=oe.indexOf(")"),de=oe.indexOf("(",ie);return oe.substring(ie,~de&&de<ue?oe.indexOf(")",ue+1):ue)},_configEaseFromString=function le(oe){var ie=(oe+"").split("("),ue=_easeMap[ie[0]];return ue&&ie.length>1&&ue.config?ue.config.apply(null,~oe.indexOf("{")?[_parseObjectInString(ie[1])]:_valueInParentheses(oe).split(",").map(_numericIfPossible)):_easeMap._CE&&_customEaseExp.test(oe)?_easeMap._CE("",oe):ue},_invertEase=function le(oe){return function(ie){return 1-oe(1-ie)}},_propagateYoyoEase=function le(oe,ie){for(var ue=oe._first,de;ue;)ue instanceof Timeline?le(ue,ie):ue.vars.yoyoEase&&(!ue._yoyo||!ue._repeat)&&ue._yoyo!==ie&&(ue.timeline?le(ue.timeline,ie):(de=ue._ease,ue._ease=ue._yEase,ue._yEase=de,ue._yoyo=ie)),ue=ue._next},_parseEase=function le(oe,ie){return oe&&(_isFunction(oe)?oe:_easeMap[oe]||_configEaseFromString(oe))||ie},_insertEase=function le(oe,ie,ue,de){ue===void 0&&(ue=function(_e){return 1-ie(1-_e)}),de===void 0&&(de=function(_e){return _e<.5?ie(_e*2)/2:1-ie((1-_e)*2)/2});var he={easeIn:ie,easeOut:ue,easeInOut:de},pe;return _forEachName(oe,function(_e){_easeMap[_e]=_globals[_e]=he,_easeMap[pe=_e.toLowerCase()]=ue;for(var Ce in he)_easeMap[pe+(Ce==="easeIn"?".in":Ce==="easeOut"?".out":".inOut")]=_easeMap[_e+"."+Ce]=he[Ce]}),he},_easeInOutFromOut=function le(oe){return function(ie){return ie<.5?(1-oe(1-ie*2))/2:.5+oe((ie-.5)*2)/2}},_configElastic=function le(oe,ie,ue){var de=ie>=1?ie:1,he=(ue||(oe?.3:.45))/(ie<1?ie:1),pe=he/_2PI*(Math.asin(1/de)||0),_e=function(xe){return xe===1?1:de*Math.pow(2,-10*xe)*_sin((xe-pe)*he)+1},Ce=oe==="out"?_e:oe==="in"?function(xe){return 1-_e(1-xe)}:_easeInOutFromOut(_e);return he=_2PI/he,Ce.config=function(xe,Ie){return le(oe,xe,Ie)},Ce},_configBack=function le(oe,ie){ie===void 0&&(ie=1.70158);var ue=function(he){return he?--he*he*((ie+1)*he+ie)+1:0},de=oe==="out"?ue:oe==="in"?function(he){return 1-ue(1-he)}:_easeInOutFromOut(ue);return de.config=function(he){return le(oe,he)},de};_forEachName("Linear,Quad,Cubic,Quart,Quint,Strong",function(le,oe){var ie=oe<5?oe+1:oe;_insertEase(le+",Power"+(ie-1),oe?function(ue){return Math.pow(ue,ie)}:function(ue){return ue},function(ue){return 1-Math.pow(1-ue,ie)},function(ue){return ue<.5?Math.pow(ue*2,ie)/2:1-Math.pow((1-ue)*2,ie)/2})});_easeMap.Linear.easeNone=_easeMap.none=_easeMap.Linear.easeIn;_insertEase("Elastic",_configElastic("in"),_configElastic("out"),_configElastic());(function(le,oe){var ie=1/oe,ue=2*ie,de=2.5*ie,he=function(pe){return pe<ie?le*pe*pe:pe<ue?le*Math.pow(pe-1.5/oe,2)+.75:pe<de?le*(pe-=2.25/oe)*pe+.9375:le*Math.pow(pe-2.625/oe,2)+.984375};_insertEase("Bounce",function(pe){return 1-he(1-pe)},he)})(7.5625,2.75);_insertEase("Expo",function(le){return le?Math.pow(2,10*(le-1)):0});_insertEase("Circ",function(le){return-(_sqrt(1-le*le)-1)});_insertEase("Sine",function(le){return le===1?1:-_cos(le*_HALF_PI)+1});_insertEase("Back",_configBack("in"),_configBack("out"),_configBack());_easeMap.SteppedEase=_easeMap.steps=_globals.SteppedEase={config:function le(oe,ie){oe===void 0&&(oe=1);var ue=1/oe,de=oe+(ie?0:1),he=ie?1:0,pe=1-_tinyNum;return function(_e){return((de*_clamp(0,pe,_e)|0)+he)*ue}}};_defaults.ease=_easeMap["quad.out"];_forEachName("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(le){return _callbackNames+=le+","+le+"Params,"});var GSCache=function le(oe,ie){this.id=_gsID++,oe._gsap=this,this.target=oe,this.harness=ie,this.get=ie?ie.get:_getProperty,this.set=ie?ie.getSetter:_getSetter},Animation=function(){function le(ie){this.vars=ie,this._delay=+ie.delay||0,(this._repeat=ie.repeat===1/0?-2:ie.repeat||0)&&(this._rDelay=ie.repeatDelay||0,this._yoyo=!!ie.yoyo||!!ie.yoyoEase),this._ts=1,_setDuration(this,+ie.duration,1,1),this.data=ie.data,_context&&(this._ctx=_context,_context.data.push(this)),_tickerActive||_ticker.wake()}var oe=le.prototype;return oe.delay=function(ie){return ie||ie===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+ie-this._delay),this._delay=ie,this):this._delay},oe.duration=function(ie){return arguments.length?this.totalDuration(this._repeat>0?ie+(ie+this._rDelay)*this._repeat:ie):this.totalDuration()&&this._dur},oe.totalDuration=function(ie){return arguments.length?(this._dirty=0,_setDuration(this,this._repeat<0?ie:(ie-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},oe.totalTime=function(ie,ue){if(_wake(),!arguments.length)return this._tTime;var de=this._dp;if(de&&de.smoothChildTiming&&this._ts){for(_alignPlayhead(this,ie),!de._dp||de.parent||_postAddChecks(de,this);de&&de.parent;)de.parent._time!==de._start+(de._ts>=0?de._tTime/de._ts:(de.totalDuration()-de._tTime)/-de._ts)&&de.totalTime(de._tTime,!0),de=de.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&ie<this._tDur||this._ts<0&&ie>0||!this._tDur&&!ie)&&_addToTimeline(this._dp,this,this._start-this._delay)}return(this._tTime!==ie||!this._dur&&!ue||this._initted&&Math.abs(this._zTime)===_tinyNum||!ie&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=ie),_lazySafeRender(this,ie,ue)),this},oe.time=function(ie,ue){return arguments.length?this.totalTime(Math.min(this.totalDuration(),ie+_elapsedCycleDuration(this))%(this._dur+this._rDelay)||(ie?this._dur:0),ue):this._time},oe.totalProgress=function(ie,ue){return arguments.length?this.totalTime(this.totalDuration()*ie,ue):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},oe.progress=function(ie,ue){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-ie:ie)+_elapsedCycleDuration(this),ue):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},oe.iteration=function(ie,ue){var de=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(ie-1)*de,ue):this._repeat?_animationCycle(this._tTime,de)+1:1},oe.timeScale=function(ie,ue){if(!arguments.length)return this._rts===-1e-8?0:this._rts;if(this._rts===ie)return this;var de=this.parent&&this._ts?_parentToChildTotalTime(this.parent._time,this):this._tTime;return this._rts=+ie||0,this._ts=this._ps||ie===-1e-8?0:this._rts,this.totalTime(_clamp(-Math.abs(this._delay),this._tDur,de),ue!==!1),_setEnd(this),_recacheAncestors(this)},oe.paused=function(ie){return arguments.length?(this._ps!==ie&&(this._ps=ie,ie?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(_wake(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==_tinyNum&&(this._tTime-=_tinyNum)))),this):this._ps},oe.startTime=function(ie){if(arguments.length){this._start=ie;var ue=this.parent||this._dp;return ue&&(ue._sort||!this.parent)&&_addToTimeline(ue,this,ie-this._delay),this}return this._start},oe.endTime=function(ie){return this._start+(_isNotFalse(ie)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},oe.rawTime=function(ie){var ue=this.parent||this._dp;return ue?ie&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?_parentToChildTotalTime(ue.rawTime(ie),this):this._tTime:this._tTime},oe.revert=function(ie){ie===void 0&&(ie=_revertConfig);var ue=_reverting$1;return _reverting$1=ie,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(ie),this.totalTime(-.01,ie.suppressEvents)),this.data!=="nested"&&ie.kill!==!1&&this.kill(),_reverting$1=ue,this},oe.globalTime=function(ie){for(var ue=this,de=arguments.length?ie:ue.rawTime();ue;)de=ue._start+de/(Math.abs(ue._ts)||1),ue=ue._dp;return!this.parent&&this._sat?this._sat.globalTime(ie):de},oe.repeat=function(ie){return arguments.length?(this._repeat=ie===1/0?-2:ie,_onUpdateTotalDuration(this)):this._repeat===-2?1/0:this._repeat},oe.repeatDelay=function(ie){if(arguments.length){var ue=this._time;return this._rDelay=ie,_onUpdateTotalDuration(this),ue?this.time(ue):this}return this._rDelay},oe.yoyo=function(ie){return arguments.length?(this._yoyo=ie,this):this._yoyo},oe.seek=function(ie,ue){return this.totalTime(_parsePosition(this,ie),_isNotFalse(ue))},oe.restart=function(ie,ue){return this.play().totalTime(ie?-this._delay:0,_isNotFalse(ue))},oe.play=function(ie,ue){return ie!=null&&this.seek(ie,ue),this.reversed(!1).paused(!1)},oe.reverse=function(ie,ue){return ie!=null&&this.seek(ie||this.totalDuration(),ue),this.reversed(!0).paused(!1)},oe.pause=function(ie,ue){return ie!=null&&this.seek(ie,ue),this.paused(!0)},oe.resume=function(){return this.paused(!1)},oe.reversed=function(ie){return arguments.length?(!!ie!==this.reversed()&&this.timeScale(-this._rts||(ie?-1e-8:0)),this):this._rts<0},oe.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},oe.isActive=function(){var ie=this.parent||this._dp,ue=this._start,de;return!!(!ie||this._ts&&this._initted&&ie.isActive()&&(de=ie.rawTime(!0))>=ue&&de<this.endTime(!0)-_tinyNum)},oe.eventCallback=function(ie,ue,de){var he=this.vars;return arguments.length>1?(ue?(he[ie]=ue,de&&(he[ie+"Params"]=de),ie==="onUpdate"&&(this._onUpdate=ue)):delete he[ie],this):he[ie]},oe.then=function(ie){var ue=this;return new Promise(function(de){var he=_isFunction(ie)?ie:_passThrough,pe=function(){var _e=ue.then;ue.then=null,_isFunction(he)&&(he=he(ue))&&(he.then||he===ue)&&(ue.then=_e),de(he),ue.then=_e};ue._initted&&ue.totalProgress()===1&&ue._ts>=0||!ue._tTime&&ue._ts<0?pe():ue._prom=pe})},oe.kill=function(){_interrupt(this)},le}();_setDefaults(Animation.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Timeline=function(le){_inheritsLoose(oe,le);function oe(ue,de){var he;return ue===void 0&&(ue={}),he=le.call(this,ue)||this,he.labels={},he.smoothChildTiming=!!ue.smoothChildTiming,he.autoRemoveChildren=!!ue.autoRemoveChildren,he._sort=_isNotFalse(ue.sortChildren),_globalTimeline&&_addToTimeline(ue.parent||_globalTimeline,_assertThisInitialized(he),de),ue.reversed&&he.reverse(),ue.paused&&he.paused(!0),ue.scrollTrigger&&_scrollTrigger(_assertThisInitialized(he),ue.scrollTrigger),he}var ie=oe.prototype;return ie.to=function(ue,de,he){return _createTweenType(0,arguments,this),this},ie.from=function(ue,de,he){return _createTweenType(1,arguments,this),this},ie.fromTo=function(ue,de,he,pe){return _createTweenType(2,arguments,this),this},ie.set=function(ue,de,he){return de.duration=0,de.parent=this,_inheritDefaults(de).repeatDelay||(de.repeat=0),de.immediateRender=!!de.immediateRender,new Tween(ue,de,_parsePosition(this,he),1),this},ie.call=function(ue,de,he){return _addToTimeline(this,Tween.delayedCall(0,ue,de),he)},ie.staggerTo=function(ue,de,he,pe,_e,Ce,xe){return he.duration=de,he.stagger=he.stagger||pe,he.onComplete=Ce,he.onCompleteParams=xe,he.parent=this,new Tween(ue,he,_parsePosition(this,_e)),this},ie.staggerFrom=function(ue,de,he,pe,_e,Ce,xe){return he.runBackwards=1,_inheritDefaults(he).immediateRender=_isNotFalse(he.immediateRender),this.staggerTo(ue,de,he,pe,_e,Ce,xe)},ie.staggerFromTo=function(ue,de,he,pe,_e,Ce,xe,Ie){return pe.startAt=he,_inheritDefaults(pe).immediateRender=_isNotFalse(pe.immediateRender),this.staggerTo(ue,de,pe,_e,Ce,xe,Ie)},ie.render=function(ue,de,he){var pe=this._time,_e=this._dirty?this.totalDuration():this._tDur,Ce=this._dur,xe=ue<=0?0:_roundPrecise(ue),Ie=this._zTime<0!=ue<0&&(this._initted||!Ce),$e,Ne,Oe,Fe,Ve,ze,Ue,Pt,qe,Et,kt,At;if(this!==_globalTimeline&&xe>_e&&ue>=0&&(xe=_e),xe!==this._tTime||he||Ie){if(pe!==this._time&&Ce&&(xe+=this._time-pe,ue+=this._time-pe),$e=xe,qe=this._start,Pt=this._ts,ze=!Pt,Ie&&(Ce||(pe=this._zTime),(ue||!de)&&(this._zTime=ue)),this._repeat){if(kt=this._yoyo,Ve=Ce+this._rDelay,this._repeat<-1&&ue<0)return this.totalTime(Ve*100+ue,de,he);if($e=_roundPrecise(xe%Ve),xe===_e?(Fe=this._repeat,$e=Ce):(Fe=~~(xe/Ve),Fe&&Fe===xe/Ve&&($e=Ce,Fe--),$e>Ce&&($e=Ce)),Et=_animationCycle(this._tTime,Ve),!pe&&this._tTime&&Et!==Fe&&this._tTime-Et*Ve-this._dur<=0&&(Et=Fe),kt&&Fe&1&&($e=Ce-$e,At=1),Fe!==Et&&!this._lock){var Dt=kt&&Et&1,Lt=Dt===(kt&&Fe&1);if(Fe<Et&&(Dt=!Dt),pe=Dt?0:xe%Ce?Ce:xe,this._lock=1,this.render(pe||(At?0:_roundPrecise(Fe*Ve)),de,!Ce)._lock=0,this._tTime=xe,!de&&this.parent&&_callback(this,"onRepeat"),this.vars.repeatRefresh&&!At&&(this.invalidate()._lock=1),pe&&pe!==this._time||ze!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(Ce=this._dur,_e=this._tDur,Lt&&(this._lock=2,pe=Dt?Ce:-1e-4,this.render(pe,!0),this.vars.repeatRefresh&&!At&&this.invalidate()),this._lock=0,!this._ts&&!ze)return this;_propagateYoyoEase(this,At)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(Ue=_findNextPauseTween(this,_roundPrecise(pe),_roundPrecise($e)),Ue&&(xe-=$e-($e=Ue._start))),this._tTime=xe,this._time=$e,this._act=!Pt,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=ue,pe=0),!pe&&$e&&!de&&!Fe&&(_callback(this,"onStart"),this._tTime!==xe))return this;if($e>=pe&&ue>=0)for(Ne=this._first;Ne;){if(Oe=Ne._next,(Ne._act||$e>=Ne._start)&&Ne._ts&&Ue!==Ne){if(Ne.parent!==this)return this.render(ue,de,he);if(Ne.render(Ne._ts>0?($e-Ne._start)*Ne._ts:(Ne._dirty?Ne.totalDuration():Ne._tDur)+($e-Ne._start)*Ne._ts,de,he),$e!==this._time||!this._ts&&!ze){Ue=0,Oe&&(xe+=this._zTime=-1e-8);break}}Ne=Oe}else{Ne=this._last;for(var jt=ue<0?ue:$e;Ne;){if(Oe=Ne._prev,(Ne._act||jt<=Ne._end)&&Ne._ts&&Ue!==Ne){if(Ne.parent!==this)return this.render(ue,de,he);if(Ne.render(Ne._ts>0?(jt-Ne._start)*Ne._ts:(Ne._dirty?Ne.totalDuration():Ne._tDur)+(jt-Ne._start)*Ne._ts,de,he||_reverting$1&&(Ne._initted||Ne._startAt)),$e!==this._time||!this._ts&&!ze){Ue=0,Oe&&(xe+=this._zTime=jt?-1e-8:_tinyNum);break}}Ne=Oe}}if(Ue&&!de&&(this.pause(),Ue.render($e>=pe?0:-1e-8)._zTime=$e>=pe?1:-1,this._ts))return this._start=qe,_setEnd(this),this.render(ue,de,he);this._onUpdate&&!de&&_callback(this,"onUpdate",!0),(xe===_e&&this._tTime>=this.totalDuration()||!xe&&pe)&&(qe===this._start||Math.abs(Pt)!==Math.abs(this._ts))&&(this._lock||((ue||!Ce)&&(xe===_e&&this._ts>0||!xe&&this._ts<0)&&_removeFromParent(this,1),!de&&!(ue<0&&!pe)&&(xe||pe||!_e)&&(_callback(this,xe===_e&&ue>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(xe<_e&&this.timeScale()>0)&&this._prom())))}return this},ie.add=function(ue,de){var he=this;if(_isNumber(de)||(de=_parsePosition(this,de,ue)),!(ue instanceof Animation)){if(_isArray(ue))return ue.forEach(function(pe){return he.add(pe,de)}),this;if(_isString(ue))return this.addLabel(ue,de);if(_isFunction(ue))ue=Tween.delayedCall(0,ue);else return this}return this!==ue?_addToTimeline(this,ue,de):this},ie.getChildren=function(ue,de,he,pe){ue===void 0&&(ue=!0),de===void 0&&(de=!0),he===void 0&&(he=!0),pe===void 0&&(pe=-1e8);for(var _e=[],Ce=this._first;Ce;)Ce._start>=pe&&(Ce instanceof Tween?de&&_e.push(Ce):(he&&_e.push(Ce),ue&&_e.push.apply(_e,Ce.getChildren(!0,de,he)))),Ce=Ce._next;return _e},ie.getById=function(ue){for(var de=this.getChildren(1,1,1),he=de.length;he--;)if(de[he].vars.id===ue)return de[he]},ie.remove=function(ue){return _isString(ue)?this.removeLabel(ue):_isFunction(ue)?this.killTweensOf(ue):(_removeLinkedListItem(this,ue),ue===this._recent&&(this._recent=this._last),_uncache(this))},ie.totalTime=function(ue,de){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=_roundPrecise(_ticker.time-(this._ts>0?ue/this._ts:(this.totalDuration()-ue)/-this._ts))),le.prototype.totalTime.call(this,ue,de),this._forcing=0,this):this._tTime},ie.addLabel=function(ue,de){return this.labels[ue]=_parsePosition(this,de),this},ie.removeLabel=function(ue){return delete this.labels[ue],this},ie.addPause=function(ue,de,he){var pe=Tween.delayedCall(0,de||_emptyFunc,he);return pe.data="isPause",this._hasPause=1,_addToTimeline(this,pe,_parsePosition(this,ue))},ie.removePause=function(ue){var de=this._first;for(ue=_parsePosition(this,ue);de;)de._start===ue&&de.data==="isPause"&&_removeFromParent(de),de=de._next},ie.killTweensOf=function(ue,de,he){for(var pe=this.getTweensOf(ue,he),_e=pe.length;_e--;)_overwritingTween!==pe[_e]&&pe[_e].kill(ue,de);return this},ie.getTweensOf=function(ue,de){for(var he=[],pe=toArray(ue),_e=this._first,Ce=_isNumber(de),xe;_e;)_e instanceof Tween?_arrayContainsAny(_e._targets,pe)&&(Ce?(!_overwritingTween||_e._initted&&_e._ts)&&_e.globalTime(0)<=de&&_e.globalTime(_e.totalDuration())>de:!de||_e.isActive())&&he.push(_e):(xe=_e.getTweensOf(pe,de)).length&&he.push.apply(he,xe),_e=_e._next;return he},ie.tweenTo=function(ue,de){de=de||{};var he=this,pe=_parsePosition(he,ue),_e=de,Ce=_e.startAt,xe=_e.onStart,Ie=_e.onStartParams,$e=_e.immediateRender,Ne,Oe=Tween.to(he,_setDefaults({ease:de.ease||"none",lazy:!1,immediateRender:!1,time:pe,overwrite:"auto",duration:de.duration||Math.abs((pe-(Ce&&"time"in Ce?Ce.time:he._time))/he.timeScale())||_tinyNum,onStart:function(){if(he.pause(),!Ne){var Fe=de.duration||Math.abs((pe-(Ce&&"time"in Ce?Ce.time:he._time))/he.timeScale());Oe._dur!==Fe&&_setDuration(Oe,Fe,0,1).render(Oe._time,!0,!0),Ne=1}xe&&xe.apply(Oe,Ie||[])}},de));return $e?Oe.render(0):Oe},ie.tweenFromTo=function(ue,de,he){return this.tweenTo(de,_setDefaults({startAt:{time:_parsePosition(this,ue)}},he))},ie.recent=function(){return this._recent},ie.nextLabel=function(ue){return ue===void 0&&(ue=this._time),_getLabelInDirection(this,_parsePosition(this,ue))},ie.previousLabel=function(ue){return ue===void 0&&(ue=this._time),_getLabelInDirection(this,_parsePosition(this,ue),1)},ie.currentLabel=function(ue){return arguments.length?this.seek(ue,!0):this.previousLabel(this._time+_tinyNum)},ie.shiftChildren=function(ue,de,he){he===void 0&&(he=0);for(var pe=this._first,_e=this.labels,Ce;pe;)pe._start>=he&&(pe._start+=ue,pe._end+=ue),pe=pe._next;if(de)for(Ce in _e)_e[Ce]>=he&&(_e[Ce]+=ue);return _uncache(this)},ie.invalidate=function(ue){var de=this._first;for(this._lock=0;de;)de.invalidate(ue),de=de._next;return le.prototype.invalidate.call(this,ue)},ie.clear=function(ue){ue===void 0&&(ue=!0);for(var de=this._first,he;de;)he=de._next,this.remove(de),de=he;return this._dp&&(this._time=this._tTime=this._pTime=0),ue&&(this.labels={}),_uncache(this)},ie.totalDuration=function(ue){var de=0,he=this,pe=he._last,_e=_bigNum$1,Ce,xe,Ie;if(arguments.length)return he.timeScale((he._repeat<0?he.duration():he.totalDuration())/(he.reversed()?-ue:ue));if(he._dirty){for(Ie=he.parent;pe;)Ce=pe._prev,pe._dirty&&pe.totalDuration(),xe=pe._start,xe>_e&&he._sort&&pe._ts&&!he._lock?(he._lock=1,_addToTimeline(he,pe,xe-pe._delay,1)._lock=0):_e=xe,xe<0&&pe._ts&&(de-=xe,(!Ie&&!he._dp||Ie&&Ie.smoothChildTiming)&&(he._start+=xe/he._ts,he._time-=xe,he._tTime-=xe),he.shiftChildren(-xe,!1,-1/0),_e=0),pe._end>de&&pe._ts&&(de=pe._end),pe=Ce;_setDuration(he,he===_globalTimeline&&he._time>de?he._time:de,1,1),he._dirty=0}return he._tDur},oe.updateRoot=function(ue){if(_globalTimeline._ts&&(_lazySafeRender(_globalTimeline,_parentToChildTotalTime(ue,_globalTimeline)),_lastRenderedFrame=_ticker.frame),_ticker.frame>=_nextGCFrame){_nextGCFrame+=_config.autoSleep||120;var de=_globalTimeline._first;if((!de||!de._ts)&&_config.autoSleep&&_ticker._listeners.length<2){for(;de&&!de._ts;)de=de._next;de||_ticker.sleep()}}},oe}(Animation);_setDefaults(Timeline.prototype,{_lock:0,_hasPause:0,_forcing:0});var _addComplexStringPropTween=function le(oe,ie,ue,de,he,pe,_e){var Ce=new PropTween(this._pt,oe,ie,0,1,_renderComplexString,null,he),xe=0,Ie=0,$e,Ne,Oe,Fe,Ve,ze,Ue,Pt;for(Ce.b=ue,Ce.e=de,ue+="",de+="",(Ue=~de.indexOf("random("))&&(de=_replaceRandom(de)),pe&&(Pt=[ue,de],pe(Pt,oe,ie),ue=Pt[0],de=Pt[1]),Ne=ue.match(_complexStringNumExp)||[];$e=_complexStringNumExp.exec(de);)Fe=$e[0],Ve=de.substring(xe,$e.index),Oe?Oe=(Oe+1)%5:Ve.substr(-5)==="rgba("&&(Oe=1),Fe!==Ne[Ie++]&&(ze=parseFloat(Ne[Ie-1])||0,Ce._pt={_next:Ce._pt,p:Ve||Ie===1?Ve:",",s:ze,c:Fe.charAt(1)==="="?_parseRelative(ze,Fe)-ze:parseFloat(Fe)-ze,m:Oe&&Oe<4?Math.round:0},xe=_complexStringNumExp.lastIndex);return Ce.c=xe<de.length?de.substring(xe,de.length):"",Ce.fp=_e,(_relExp.test(de)||Ue)&&(Ce.e=0),this._pt=Ce,Ce},_addPropTween=function le(oe,ie,ue,de,he,pe,_e,Ce,xe,Ie){_isFunction(de)&&(de=de(he||0,oe,pe));var $e=oe[ie],Ne=ue!=="get"?ue:_isFunction($e)?xe?oe[ie.indexOf("set")||!_isFunction(oe["get"+ie.substr(3)])?ie:"get"+ie.substr(3)](xe):oe[ie]():$e,Oe=_isFunction($e)?xe?_setterFuncWithParam:_setterFunc:_setterPlain,Fe;if(_isString(de)&&(~de.indexOf("random(")&&(de=_replaceRandom(de)),de.charAt(1)==="="&&(Fe=_parseRelative(Ne,de)+(getUnit(Ne)||0),(Fe||Fe===0)&&(de=Fe))),!Ie||Ne!==de||_forceAllPropTweens)return!isNaN(Ne*de)&&de!==""?(Fe=new PropTween(this._pt,oe,ie,+Ne||0,de-(Ne||0),typeof $e=="boolean"?_renderBoolean:_renderPlain,0,Oe),xe&&(Fe.fp=xe),_e&&Fe.modifier(_e,this,oe),this._pt=Fe):(!$e&&!(ie in oe)&&_missingPlugin(ie,de),_addComplexStringPropTween.call(this,oe,ie,Ne,de,Oe,Ce||_config.stringFilter,xe))},_processVars=function le(oe,ie,ue,de,he){if(_isFunction(oe)&&(oe=_parseFuncOrString(oe,he,ie,ue,de)),!_isObject(oe)||oe.style&&oe.nodeType||_isArray(oe)||_isTypedArray(oe))return _isString(oe)?_parseFuncOrString(oe,he,ie,ue,de):oe;var pe={},_e;for(_e in oe)pe[_e]=_parseFuncOrString(oe[_e],he,ie,ue,de);return pe},_checkPlugin=function le(oe,ie,ue,de,he,pe){var _e,Ce,xe,Ie;if(_plugins[oe]&&(_e=new _plugins[oe]).init(he,_e.rawVars?ie[oe]:_processVars(ie[oe],de,he,pe,ue),ue,de,pe)!==!1&&(ue._pt=Ce=new PropTween(ue._pt,he,oe,0,1,_e.render,_e,0,_e.priority),ue!==_quickTween))for(xe=ue._ptLookup[ue._targets.indexOf(he)],Ie=_e._props.length;Ie--;)xe[_e._props[Ie]]=Ce;return _e},_overwritingTween,_forceAllPropTweens,_initTween=function le(oe,ie,ue){var de=oe.vars,he=de.ease,pe=de.startAt,_e=de.immediateRender,Ce=de.lazy,xe=de.onUpdate,Ie=de.runBackwards,$e=de.yoyoEase,Ne=de.keyframes,Oe=de.autoRevert,Fe=oe._dur,Ve=oe._startAt,ze=oe._targets,Ue=oe.parent,Pt=Ue&&Ue.data==="nested"?Ue.vars.targets:ze,qe=oe._overwrite==="auto"&&!_suppressOverwrites,Et=oe.timeline,kt,At,Dt,Lt,jt,_n,bn,vn,Tn,$n,wn,Cn,Sn;if(Et&&(!Ne||!he)&&(he="none"),oe._ease=_parseEase(he,_defaults.ease),oe._yEase=$e?_invertEase(_parseEase($e===!0?he:$e,_defaults.ease)):0,$e&&oe._yoyo&&!oe._repeat&&($e=oe._yEase,oe._yEase=oe._ease,oe._ease=$e),oe._from=!Et&&!!de.runBackwards,!Et||Ne&&!de.stagger){if(vn=ze[0]?_getCache(ze[0]).harness:0,Cn=vn&&de[vn.prop],kt=_copyExcluding(de,_reservedProps),Ve&&(Ve._zTime<0&&Ve.progress(1),ie<0&&Ie&&_e&&!Oe?Ve.render(-1,!0):Ve.revert(Ie&&Fe?_revertConfigNoKill:_startAtRevertConfig),Ve._lazy=0),pe){if(_removeFromParent(oe._startAt=Tween.set(ze,_setDefaults({data:"isStart",overwrite:!1,parent:Ue,immediateRender:!0,lazy:!Ve&&_isNotFalse(Ce),startAt:null,delay:0,onUpdate:xe&&function(){return _callback(oe,"onUpdate")},stagger:0},pe))),oe._startAt._dp=0,oe._startAt._sat=oe,ie<0&&(_reverting$1||!_e&&!Oe)&&oe._startAt.revert(_revertConfigNoKill),_e&&Fe&&ie<=0&&ue<=0){ie&&(oe._zTime=ie);return}}else if(Ie&&Fe&&!Ve){if(ie&&(_e=!1),Dt=_setDefaults({overwrite:!1,data:"isFromStart",lazy:_e&&!Ve&&_isNotFalse(Ce),immediateRender:_e,stagger:0,parent:Ue},kt),Cn&&(Dt[vn.prop]=Cn),_removeFromParent(oe._startAt=Tween.set(ze,Dt)),oe._startAt._dp=0,oe._startAt._sat=oe,ie<0&&(_reverting$1?oe._startAt.revert(_revertConfigNoKill):oe._startAt.render(-1,!0)),oe._zTime=ie,!_e)le(oe._startAt,_tinyNum,_tinyNum);else if(!ie)return}for(oe._pt=oe._ptCache=0,Ce=Fe&&_isNotFalse(Ce)||Ce&&!Fe,At=0;At<ze.length;At++){if(jt=ze[At],bn=jt._gsap||_harness(ze)[At]._gsap,oe._ptLookup[At]=$n={},_lazyLookup[bn.id]&&_lazyTweens.length&&_lazyRender(),wn=Pt===ze?At:Pt.indexOf(jt),vn&&(Tn=new vn).init(jt,Cn||kt,oe,wn,Pt)!==!1&&(oe._pt=Lt=new PropTween(oe._pt,jt,Tn.name,0,1,Tn.render,Tn,0,Tn.priority),Tn._props.forEach(function(In){$n[In]=Lt}),Tn.priority&&(_n=1)),!vn||Cn)for(Dt in kt)_plugins[Dt]&&(Tn=_checkPlugin(Dt,kt,oe,wn,jt,Pt))?Tn.priority&&(_n=1):$n[Dt]=Lt=_addPropTween.call(oe,jt,Dt,"get",kt[Dt],wn,Pt,0,de.stringFilter);oe._op&&oe._op[At]&&oe.kill(jt,oe._op[At]),qe&&oe._pt&&(_overwritingTween=oe,_globalTimeline.killTweensOf(jt,$n,oe.globalTime(ie)),Sn=!oe.parent,_overwritingTween=0),oe._pt&&Ce&&(_lazyLookup[bn.id]=1)}_n&&_sortPropTweensByPriority(oe),oe._onInit&&oe._onInit(oe)}oe._onUpdate=xe,oe._initted=(!oe._op||oe._pt)&&!Sn,Ne&&ie<=0&&Et.render(_bigNum$1,!0,!0)},_updatePropTweens=function le(oe,ie,ue,de,he,pe,_e,Ce){var xe=(oe._pt&&oe._ptCache||(oe._ptCache={}))[ie],Ie,$e,Ne,Oe;if(!xe)for(xe=oe._ptCache[ie]=[],Ne=oe._ptLookup,Oe=oe._targets.length;Oe--;){if(Ie=Ne[Oe][ie],Ie&&Ie.d&&Ie.d._pt)for(Ie=Ie.d._pt;Ie&&Ie.p!==ie&&Ie.fp!==ie;)Ie=Ie._next;if(!Ie)return _forceAllPropTweens=1,oe.vars[ie]="+=0",_initTween(oe,_e),_forceAllPropTweens=0,Ce?_warn(ie+" not eligible for reset"):1;xe.push(Ie)}for(Oe=xe.length;Oe--;)$e=xe[Oe],Ie=$e._pt||$e,Ie.s=(de||de===0)&&!he?de:Ie.s+(de||0)+pe*Ie.c,Ie.c=ue-Ie.s,$e.e&&($e.e=_round(ue)+getUnit($e.e)),$e.b&&($e.b=Ie.s+getUnit($e.b))},_addAliasesToVars=function le(oe,ie){var ue=oe[0]?_getCache(oe[0]).harness:0,de=ue&&ue.aliases,he,pe,_e,Ce;if(!de)return ie;he=_merge({},ie);for(pe in de)if(pe in he)for(Ce=de[pe].split(","),_e=Ce.length;_e--;)he[Ce[_e]]=he[pe];return he},_parseKeyframe=function le(oe,ie,ue,de){var he=ie.ease||de||"power1.inOut",pe,_e;if(_isArray(ie))_e=ue[oe]||(ue[oe]=[]),ie.forEach(function(Ce,xe){return _e.push({t:xe/(ie.length-1)*100,v:Ce,e:he})});else for(pe in ie)_e=ue[pe]||(ue[pe]=[]),pe==="ease"||_e.push({t:parseFloat(oe),v:ie[pe],e:he})},_parseFuncOrString=function le(oe,ie,ue,de,he){return _isFunction(oe)?oe.call(ie,ue,de,he):_isString(oe)&&~oe.indexOf("random(")?_replaceRandom(oe):oe},_staggerTweenProps=_callbackNames+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",_staggerPropsToSkip={};_forEachName(_staggerTweenProps+",id,stagger,delay,duration,paused,scrollTrigger",function(le){return _staggerPropsToSkip[le]=1});var Tween=function(le){_inheritsLoose(oe,le);function oe(ue,de,he,pe){var _e;typeof de=="number"&&(he.duration=de,de=he,he=null),_e=le.call(this,pe?de:_inheritDefaults(de))||this;var Ce=_e.vars,xe=Ce.duration,Ie=Ce.delay,$e=Ce.immediateRender,Ne=Ce.stagger,Oe=Ce.overwrite,Fe=Ce.keyframes,Ve=Ce.defaults,ze=Ce.scrollTrigger,Ue=Ce.yoyoEase,Pt=de.parent||_globalTimeline,qe=(_isArray(ue)||_isTypedArray(ue)?_isNumber(ue[0]):"length"in de)?[ue]:toArray(ue),Et,kt,At,Dt,Lt,jt,_n,bn;if(_e._targets=qe.length?_harness(qe):_warn("GSAP target "+ue+" not found. https://gsap.com",!_config.nullTargetWarn)||[],_e._ptLookup=[],_e._overwrite=Oe,Fe||Ne||_isFuncOrString(xe)||_isFuncOrString(Ie)){if(de=_e.vars,Et=_e.timeline=new Timeline({data:"nested",defaults:Ve||{},targets:Pt&&Pt.data==="nested"?Pt.vars.targets:qe}),Et.kill(),Et.parent=Et._dp=_assertThisInitialized(_e),Et._start=0,Ne||_isFuncOrString(xe)||_isFuncOrString(Ie)){if(Dt=qe.length,_n=Ne&&distribute(Ne),_isObject(Ne))for(Lt in Ne)~_staggerTweenProps.indexOf(Lt)&&(bn||(bn={}),bn[Lt]=Ne[Lt]);for(kt=0;kt<Dt;kt++)At=_copyExcluding(de,_staggerPropsToSkip),At.stagger=0,Ue&&(At.yoyoEase=Ue),bn&&_merge(At,bn),jt=qe[kt],At.duration=+_parseFuncOrString(xe,_assertThisInitialized(_e),kt,jt,qe),At.delay=(+_parseFuncOrString(Ie,_assertThisInitialized(_e),kt,jt,qe)||0)-_e._delay,!Ne&&Dt===1&&At.delay&&(_e._delay=Ie=At.delay,_e._start+=Ie,At.delay=0),Et.to(jt,At,_n?_n(kt,jt,qe):0),Et._ease=_easeMap.none;Et.duration()?xe=Ie=0:_e.timeline=0}else if(Fe){_inheritDefaults(_setDefaults(Et.vars.defaults,{ease:"none"})),Et._ease=_parseEase(Fe.ease||de.ease||"none");var vn=0,Tn,$n,wn;if(_isArray(Fe))Fe.forEach(function(Cn){return Et.to(qe,Cn,">")}),Et.duration();else{At={};for(Lt in Fe)Lt==="ease"||Lt==="easeEach"||_parseKeyframe(Lt,Fe[Lt],At,Fe.easeEach);for(Lt in At)for(Tn=At[Lt].sort(function(Cn,Sn){return Cn.t-Sn.t}),vn=0,kt=0;kt<Tn.length;kt++)$n=Tn[kt],wn={ease:$n.e,duration:($n.t-(kt?Tn[kt-1].t:0))/100*xe},wn[Lt]=$n.v,Et.to(qe,wn,vn),vn+=wn.duration;Et.duration()<xe&&Et.to({},{duration:xe-Et.duration()})}}xe||_e.duration(xe=Et.duration())}else _e.timeline=0;return Oe===!0&&!_suppressOverwrites&&(_overwritingTween=_assertThisInitialized(_e),_globalTimeline.killTweensOf(qe),_overwritingTween=0),_addToTimeline(Pt,_assertThisInitialized(_e),he),de.reversed&&_e.reverse(),de.paused&&_e.paused(!0),($e||!xe&&!Fe&&_e._start===_roundPrecise(Pt._time)&&_isNotFalse($e)&&_hasNoPausedAncestors(_assertThisInitialized(_e))&&Pt.data!=="nested")&&(_e._tTime=-1e-8,_e.render(Math.max(0,-Ie)||0)),ze&&_scrollTrigger(_assertThisInitialized(_e),ze),_e}var ie=oe.prototype;return ie.render=function(ue,de,he){var pe=this._time,_e=this._tDur,Ce=this._dur,xe=ue<0,Ie=ue>_e-_tinyNum&&!xe?_e:ue<_tinyNum?0:ue,$e,Ne,Oe,Fe,Ve,ze,Ue,Pt,qe;if(!Ce)_renderZeroDurationTween(this,ue,de,he);else if(Ie!==this._tTime||!ue||he||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==xe){if($e=Ie,Pt=this.timeline,this._repeat){if(Fe=Ce+this._rDelay,this._repeat<-1&&xe)return this.totalTime(Fe*100+ue,de,he);if($e=_roundPrecise(Ie%Fe),Ie===_e?(Oe=this._repeat,$e=Ce):(Oe=~~(Ie/Fe),Oe&&Oe===_roundPrecise(Ie/Fe)&&($e=Ce,Oe--),$e>Ce&&($e=Ce)),ze=this._yoyo&&Oe&1,ze&&(qe=this._yEase,$e=Ce-$e),Ve=_animationCycle(this._tTime,Fe),$e===pe&&!he&&this._initted&&Oe===Ve)return this._tTime=Ie,this;Oe!==Ve&&(Pt&&this._yEase&&_propagateYoyoEase(Pt,ze),this.vars.repeatRefresh&&!ze&&!this._lock&&this._time!==Fe&&this._initted&&(this._lock=he=1,this.render(_roundPrecise(Fe*Oe),!0).invalidate()._lock=0))}if(!this._initted){if(_attemptInitTween(this,xe?ue:$e,he,de,Ie))return this._tTime=0,this;if(pe!==this._time&&!(he&&this.vars.repeatRefresh&&Oe!==Ve))return this;if(Ce!==this._dur)return this.render(ue,de,he)}if(this._tTime=Ie,this._time=$e,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=Ue=(qe||this._ease)($e/Ce),this._from&&(this.ratio=Ue=1-Ue),$e&&!pe&&!de&&!Oe&&(_callback(this,"onStart"),this._tTime!==Ie))return this;for(Ne=this._pt;Ne;)Ne.r(Ue,Ne.d),Ne=Ne._next;Pt&&Pt.render(ue<0?ue:Pt._dur*Pt._ease($e/this._dur),de,he)||this._startAt&&(this._zTime=ue),this._onUpdate&&!de&&(xe&&_rewindStartAt(this,ue,de,he),_callback(this,"onUpdate")),this._repeat&&Oe!==Ve&&this.vars.onRepeat&&!de&&this.parent&&_callback(this,"onRepeat"),(Ie===this._tDur||!Ie)&&this._tTime===Ie&&(xe&&!this._onUpdate&&_rewindStartAt(this,ue,!0,!0),(ue||!Ce)&&(Ie===this._tDur&&this._ts>0||!Ie&&this._ts<0)&&_removeFromParent(this,1),!de&&!(xe&&!pe)&&(Ie||pe||ze)&&(_callback(this,Ie===_e?"onComplete":"onReverseComplete",!0),this._prom&&!(Ie<_e&&this.timeScale()>0)&&this._prom()))}return this},ie.targets=function(){return this._targets},ie.invalidate=function(ue){return(!ue||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(ue),le.prototype.invalidate.call(this,ue)},ie.resetTo=function(ue,de,he,pe,_e){_tickerActive||_ticker.wake(),this._ts||this.play();var Ce=Math.min(this._dur,(this._dp._time-this._start)*this._ts),xe;return this._initted||_initTween(this,Ce),xe=this._ease(Ce/this._dur),_updatePropTweens(this,ue,de,he,pe,xe,Ce,_e)?this.resetTo(ue,de,he,pe,1):(_alignPlayhead(this,0),this.parent||_addLinkedListItem(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},ie.kill=function(ue,de){if(de===void 0&&(de="all"),!ue&&(!de||de==="all"))return this._lazy=this._pt=0,this.parent?_interrupt(this):this;if(this.timeline){var he=this.timeline.totalDuration();return this.timeline.killTweensOf(ue,de,_overwritingTween&&_overwritingTween.vars.overwrite!==!0)._first||_interrupt(this),this.parent&&he!==this.timeline.totalDuration()&&_setDuration(this,this._dur*this.timeline._tDur/he,0,1),this}var pe=this._targets,_e=ue?toArray(ue):pe,Ce=this._ptLookup,xe=this._pt,Ie,$e,Ne,Oe,Fe,Ve,ze;if((!de||de==="all")&&_arraysMatch(pe,_e))return de==="all"&&(this._pt=0),_interrupt(this);for(Ie=this._op=this._op||[],de!=="all"&&(_isString(de)&&(Fe={},_forEachName(de,function(Ue){return Fe[Ue]=1}),de=Fe),de=_addAliasesToVars(pe,de)),ze=pe.length;ze--;)if(~_e.indexOf(pe[ze])){$e=Ce[ze],de==="all"?(Ie[ze]=de,Oe=$e,Ne={}):(Ne=Ie[ze]=Ie[ze]||{},Oe=de);for(Fe in Oe)Ve=$e&&$e[Fe],Ve&&((!("kill"in Ve.d)||Ve.d.kill(Fe)===!0)&&_removeLinkedListItem(this,Ve,"_pt"),delete $e[Fe]),Ne!=="all"&&(Ne[Fe]=1)}return this._initted&&!this._pt&&xe&&_interrupt(this),this},oe.to=function(ue,de){return new oe(ue,de,arguments[2])},oe.from=function(ue,de){return _createTweenType(1,arguments)},oe.delayedCall=function(ue,de,he,pe){return new oe(de,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:ue,onComplete:de,onReverseComplete:de,onCompleteParams:he,onReverseCompleteParams:he,callbackScope:pe})},oe.fromTo=function(ue,de,he){return _createTweenType(2,arguments)},oe.set=function(ue,de){return de.duration=0,de.repeatDelay||(de.repeat=0),new oe(ue,de)},oe.killTweensOf=function(ue,de,he){return _globalTimeline.killTweensOf(ue,de,he)},oe}(Animation);_setDefaults(Tween.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});_forEachName("staggerTo,staggerFrom,staggerFromTo",function(le){Tween[le]=function(){var oe=new Timeline,ie=_slice.call(arguments,0);return ie.splice(le==="staggerFromTo"?5:4,0,0),oe[le].apply(oe,ie)}});var _setterPlain=function le(oe,ie,ue){return oe[ie]=ue},_setterFunc=function le(oe,ie,ue){return oe[ie](ue)},_setterFuncWithParam=function le(oe,ie,ue,de){return oe[ie](de.fp,ue)},_setterAttribute=function le(oe,ie,ue){return oe.setAttribute(ie,ue)},_getSetter=function le(oe,ie){return _isFunction(oe[ie])?_setterFunc:_isUndefined(oe[ie])&&oe.setAttribute?_setterAttribute:_setterPlain},_renderPlain=function le(oe,ie){return ie.set(ie.t,ie.p,Math.round((ie.s+ie.c*oe)*1e6)/1e6,ie)},_renderBoolean=function le(oe,ie){return ie.set(ie.t,ie.p,!!(ie.s+ie.c*oe),ie)},_renderComplexString=function le(oe,ie){var ue=ie._pt,de="";if(!oe&&ie.b)de=ie.b;else if(oe===1&&ie.e)de=ie.e;else{for(;ue;)de=ue.p+(ue.m?ue.m(ue.s+ue.c*oe):Math.round((ue.s+ue.c*oe)*1e4)/1e4)+de,ue=ue._next;de+=ie.c}ie.set(ie.t,ie.p,de,ie)},_renderPropTweens=function le(oe,ie){for(var ue=ie._pt;ue;)ue.r(oe,ue.d),ue=ue._next},_addPluginModifier=function le(oe,ie,ue,de){for(var he=this._pt,pe;he;)pe=he._next,he.p===de&&he.modifier(oe,ie,ue),he=pe},_killPropTweensOf=function le(oe){for(var ie=this._pt,ue,de;ie;)de=ie._next,ie.p===oe&&!ie.op||ie.op===oe?_removeLinkedListItem(this,ie,"_pt"):ie.dep||(ue=1),ie=de;return!ue},_setterWithModifier=function le(oe,ie,ue,de){de.mSet(oe,ie,de.m.call(de.tween,ue,de.mt),de)},_sortPropTweensByPriority=function le(oe){for(var ie=oe._pt,ue,de,he,pe;ie;){for(ue=ie._next,de=he;de&&de.pr>ie.pr;)de=de._next;(ie._prev=de?de._prev:pe)?ie._prev._next=ie:he=ie,(ie._next=de)?de._prev=ie:pe=ie,ie=ue}oe._pt=he},PropTween=function(){function le(ie,ue,de,he,pe,_e,Ce,xe,Ie){this.t=ue,this.s=he,this.c=pe,this.p=de,this.r=_e||_renderPlain,this.d=Ce||this,this.set=xe||_setterPlain,this.pr=Ie||0,this._next=ie,ie&&(ie._prev=this)}var oe=le.prototype;return oe.modifier=function(ie,ue,de){this.mSet=this.mSet||this.set,this.set=_setterWithModifier,this.m=ie,this.mt=de,this.tween=ue},le}();_forEachName(_callbackNames+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(le){return _reservedProps[le]=1});_globals.TweenMax=_globals.TweenLite=Tween;_globals.TimelineLite=_globals.TimelineMax=Timeline;_globalTimeline=new Timeline({sortChildren:!1,defaults:_defaults,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});_config.stringFilter=_colorStringFilter;var _media=[],_listeners={},_emptyArray=[],_lastMediaTime=0,_contextID=0,_dispatch=function le(oe){return(_listeners[oe]||_emptyArray).map(function(ie){return ie()})},_onMediaChange=function le(){var oe=Date.now(),ie=[];oe-_lastMediaTime>2&&(_dispatch("matchMediaInit"),_media.forEach(function(ue){var de=ue.queries,he=ue.conditions,pe,_e,Ce,xe;for(_e in de)pe=_win$1.matchMedia(de[_e]).matches,pe&&(Ce=1),pe!==he[_e]&&(he[_e]=pe,xe=1);xe&&(ue.revert(),Ce&&ie.push(ue))}),_dispatch("matchMediaRevert"),ie.forEach(function(ue){return ue.onMatch(ue,function(de){return ue.add(null,de)})}),_lastMediaTime=oe,_dispatch("matchMedia"))},Context=function(){function le(ie,ue){this.selector=ue&&selector(ue),this.data=[],this._r=[],this.isReverted=!1,this.id=_contextID++,ie&&this.add(ie)}var oe=le.prototype;return oe.add=function(ie,ue,de){_isFunction(ie)&&(de=ue,ue=ie,ie=_isFunction);var he=this,pe=function(){var _e=_context,Ce=he.selector,xe;return _e&&_e!==he&&_e.data.push(he),de&&(he.selector=selector(de)),_context=he,xe=ue.apply(he,arguments),_isFunction(xe)&&he._r.push(xe),_context=_e,he.selector=Ce,he.isReverted=!1,xe};return he.last=pe,ie===_isFunction?pe(he,function(_e){return he.add(null,_e)}):ie?he[ie]=pe:pe},oe.ignore=function(ie){var ue=_context;_context=null,ie(this),_context=ue},oe.getTweens=function(){var ie=[];return this.data.forEach(function(ue){return ue instanceof le?ie.push.apply(ie,ue.getTweens()):ue instanceof Tween&&!(ue.parent&&ue.parent.data==="nested")&&ie.push(ue)}),ie},oe.clear=function(){this._r.length=this.data.length=0},oe.kill=function(ie,ue){var de=this;if(ie?function(){for(var pe=de.getTweens(),_e=de.data.length,Ce;_e--;)Ce=de.data[_e],Ce.data==="isFlip"&&(Ce.revert(),Ce.getChildren(!0,!0,!1).forEach(function(xe){return pe.splice(pe.indexOf(xe),1)}));for(pe.map(function(xe){return{g:xe._dur||xe._delay||xe._sat&&!xe._sat.vars.immediateRender?xe.globalTime(0):-1/0,t:xe}}).sort(function(xe,Ie){return Ie.g-xe.g||-1/0}).forEach(function(xe){return xe.t.revert(ie)}),_e=de.data.length;_e--;)Ce=de.data[_e],Ce instanceof Timeline?Ce.data!=="nested"&&(Ce.scrollTrigger&&Ce.scrollTrigger.revert(),Ce.kill()):!(Ce instanceof Tween)&&Ce.revert&&Ce.revert(ie);de._r.forEach(function(xe){return xe(ie,de)}),de.isReverted=!0}():this.data.forEach(function(pe){return pe.kill&&pe.kill()}),this.clear(),ue)for(var he=_media.length;he--;)_media[he].id===this.id&&_media.splice(he,1)},oe.revert=function(ie){this.kill(ie||{})},le}(),MatchMedia=function(){function le(ie){this.contexts=[],this.scope=ie,_context&&_context.data.push(this)}var oe=le.prototype;return oe.add=function(ie,ue,de){_isObject(ie)||(ie={matches:ie});var he=new Context(0,de||this.scope),pe=he.conditions={},_e,Ce,xe;_context&&!he.selector&&(he.selector=_context.selector),this.contexts.push(he),ue=he.add("onMatch",ue),he.queries=ie;for(Ce in ie)Ce==="all"?xe=1:(_e=_win$1.matchMedia(ie[Ce]),_e&&(_media.indexOf(he)<0&&_media.push(he),(pe[Ce]=_e.matches)&&(xe=1),_e.addListener?_e.addListener(_onMediaChange):_e.addEventListener("change",_onMediaChange)));return xe&&ue(he,function(Ie){return he.add(null,Ie)}),this},oe.revert=function(ie){this.kill(ie||{})},oe.kill=function(ie){this.contexts.forEach(function(ue){return ue.kill(ie,!0)})},le}(),_gsap={registerPlugin:function le(){for(var oe=arguments.length,ie=new Array(oe),ue=0;ue<oe;ue++)ie[ue]=arguments[ue];ie.forEach(function(de){return _createPlugin(de)})},timeline:function le(oe){return new Timeline(oe)},getTweensOf:function le(oe,ie){return _globalTimeline.getTweensOf(oe,ie)},getProperty:function le(oe,ie,ue,de){_isString(oe)&&(oe=toArray(oe)[0]);var he=_getCache(oe||{}).get,pe=ue?_passThrough:_numericIfPossible;return ue==="native"&&(ue=""),oe&&(ie?pe((_plugins[ie]&&_plugins[ie].get||he)(oe,ie,ue,de)):function(_e,Ce,xe){return pe((_plugins[_e]&&_plugins[_e].get||he)(oe,_e,Ce,xe))})},quickSetter:function le(oe,ie,ue){if(oe=toArray(oe),oe.length>1){var de=oe.map(function(Ie){return gsap.quickSetter(Ie,ie,ue)}),he=de.length;return function(Ie){for(var $e=he;$e--;)de[$e](Ie)}}oe=oe[0]||{};var pe=_plugins[ie],_e=_getCache(oe),Ce=_e.harness&&(_e.harness.aliases||{})[ie]||ie,xe=pe?function(Ie){var $e=new pe;_quickTween._pt=0,$e.init(oe,ue?Ie+ue:Ie,_quickTween,0,[oe]),$e.render(1,$e),_quickTween._pt&&_renderPropTweens(1,_quickTween)}:_e.set(oe,Ce);return pe?xe:function(Ie){return xe(oe,Ce,ue?Ie+ue:Ie,_e,1)}},quickTo:function le(oe,ie,ue){var de,he=gsap.to(oe,_merge((de={},de[ie]="+=0.1",de.paused=!0,de),ue||{})),pe=function(_e,Ce,xe){return he.resetTo(ie,_e,Ce,xe)};return pe.tween=he,pe},isTweening:function le(oe){return _globalTimeline.getTweensOf(oe,!0).length>0},defaults:function le(oe){return oe&&oe.ease&&(oe.ease=_parseEase(oe.ease,_defaults.ease)),_mergeDeep(_defaults,oe||{})},config:function le(oe){return _mergeDeep(_config,oe||{})},registerEffect:function le(oe){var ie=oe.name,ue=oe.effect,de=oe.plugins,he=oe.defaults,pe=oe.extendTimeline;(de||"").split(",").forEach(function(_e){return _e&&!_plugins[_e]&&!_globals[_e]&&_warn(ie+" effect requires "+_e+" plugin.")}),_effects[ie]=function(_e,Ce,xe){return ue(toArray(_e),_setDefaults(Ce||{},he),xe)},pe&&(Timeline.prototype[ie]=function(_e,Ce,xe){return this.add(_effects[ie](_e,_isObject(Ce)?Ce:(xe=Ce)&&{},this),xe)})},registerEase:function le(oe,ie){_easeMap[oe]=_parseEase(ie)},parseEase:function le(oe,ie){return arguments.length?_parseEase(oe,ie):_easeMap},getById:function le(oe){return _globalTimeline.getById(oe)},exportRoot:function le(oe,ie){oe===void 0&&(oe={});var ue=new Timeline(oe),de,he;for(ue.smoothChildTiming=_isNotFalse(oe.smoothChildTiming),_globalTimeline.remove(ue),ue._dp=0,ue._time=ue._tTime=_globalTimeline._time,de=_globalTimeline._first;de;)he=de._next,(ie||!(!de._dur&&de instanceof Tween&&de.vars.onComplete===de._targets[0]))&&_addToTimeline(ue,de,de._start-de._delay),de=he;return _addToTimeline(_globalTimeline,ue,0),ue},context:function le(oe,ie){return oe?new Context(oe,ie):_context},matchMedia:function le(oe){return new MatchMedia(oe)},matchMediaRefresh:function le(){return _media.forEach(function(oe){var ie=oe.conditions,ue,de;for(de in ie)ie[de]&&(ie[de]=!1,ue=1);ue&&oe.revert()})||_onMediaChange()},addEventListener:function le(oe,ie){var ue=_listeners[oe]||(_listeners[oe]=[]);~ue.indexOf(ie)||ue.push(ie)},removeEventListener:function le(oe,ie){var ue=_listeners[oe],de=ue&&ue.indexOf(ie);de>=0&&ue.splice(de,1)},utils:{wrap,wrapYoyo,distribute,random,snap,normalize:normalize$1,getUnit,clamp,splitColor,toArray,selector,mapRange,pipe,unitize,interpolate,shuffle},install:_install,effects:_effects,ticker:_ticker,updateRoot:Timeline.updateRoot,plugins:_plugins,globalTimeline:_globalTimeline,core:{PropTween,globals:_addGlobal,Tween,Timeline,Animation,getCache:_getCache,_removeLinkedListItem,reverting:function le(){return _reverting$1},context:function le(oe){return oe&&_context&&(_context.data.push(oe),oe._ctx=_context),_context},suppressOverwrites:function le(oe){return _suppressOverwrites=oe}}};_forEachName("to,from,fromTo,delayedCall,set,killTweensOf",function(le){return _gsap[le]=Tween[le]});_ticker.add(Timeline.updateRoot);_quickTween=_gsap.to({},{duration:0});var _getPluginPropTween=function le(oe,ie){for(var ue=oe._pt;ue&&ue.p!==ie&&ue.op!==ie&&ue.fp!==ie;)ue=ue._next;return ue},_addModifiers=function le(oe,ie){var ue=oe._targets,de,he,pe;for(de in ie)for(he=ue.length;he--;)pe=oe._ptLookup[he][de],pe&&(pe=pe.d)&&(pe._pt&&(pe=_getPluginPropTween(pe,de)),pe&&pe.modifier&&pe.modifier(ie[de],oe,ue[he],de))},_buildModifierPlugin=function le(oe,ie){return{name:oe,rawVars:1,init:function(ue,de,he){he._onInit=function(pe){var _e,Ce;if(_isString(de)&&(_e={},_forEachName(de,function(xe){return _e[xe]=1}),de=_e),ie){_e={};for(Ce in de)_e[Ce]=ie(de[Ce]);de=_e}_addModifiers(pe,de)}}}},gsap=_gsap.registerPlugin({name:"attr",init:function le(oe,ie,ue,de,he){var pe,_e,Ce;this.tween=ue;for(pe in ie)Ce=oe.getAttribute(pe)||"",_e=this.add(oe,"setAttribute",(Ce||0)+"",ie[pe],de,he,0,0,pe),_e.op=pe,_e.b=Ce,this._props.push(pe)},render:function le(oe,ie){for(var ue=ie._pt;ue;)_reverting$1?ue.set(ue.t,ue.p,ue.b,ue):ue.r(oe,ue.d),ue=ue._next}},{name:"endArray",init:function le(oe,ie){for(var ue=ie.length;ue--;)this.add(oe,ue,oe[ue]||0,ie[ue],0,0,0,0,0,1)}},_buildModifierPlugin("roundProps",_roundModifier),_buildModifierPlugin("modifiers"),_buildModifierPlugin("snap",snap))||_gsap;Tween.version=Timeline.version=gsap.version="3.12.5";_coreReady=1;_windowExists$1()&&_wake();_easeMap.Power0;_easeMap.Power1;_easeMap.Power2;_easeMap.Power3;_easeMap.Power4;_easeMap.Linear;_easeMap.Quad;_easeMap.Cubic;_easeMap.Quart;_easeMap.Quint;_easeMap.Strong;_easeMap.Elastic;_easeMap.Back;_easeMap.SteppedEase;_easeMap.Bounce;_easeMap.Sine;_easeMap.Expo;_easeMap.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var _win,_doc,_docElement,_pluginInitted,_tempDiv,_recentSetterPlugin,_reverting,_windowExists=function le(){return typeof window<"u"},_transformProps={},_RAD2DEG=180/Math.PI,_DEG2RAD=Math.PI/180,_atan2=Math.atan2,_bigNum=1e8,_capsExp=/([A-Z])/g,_horizontalExp=/(left|right|width|margin|padding|x)/i,_complexExp=/[\s,\(]\S/,_propertyAliases={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},_renderCSSProp=function le(oe,ie){return ie.set(ie.t,ie.p,Math.round((ie.s+ie.c*oe)*1e4)/1e4+ie.u,ie)},_renderPropWithEnd=function le(oe,ie){return ie.set(ie.t,ie.p,oe===1?ie.e:Math.round((ie.s+ie.c*oe)*1e4)/1e4+ie.u,ie)},_renderCSSPropWithBeginning=function le(oe,ie){return ie.set(ie.t,ie.p,oe?Math.round((ie.s+ie.c*oe)*1e4)/1e4+ie.u:ie.b,ie)},_renderRoundedCSSProp=function le(oe,ie){var ue=ie.s+ie.c*oe;ie.set(ie.t,ie.p,~~(ue+(ue<0?-.5:.5))+ie.u,ie)},_renderNonTweeningValue=function le(oe,ie){return ie.set(ie.t,ie.p,oe?ie.e:ie.b,ie)},_renderNonTweeningValueOnlyAtEnd=function le(oe,ie){return ie.set(ie.t,ie.p,oe!==1?ie.b:ie.e,ie)},_setterCSSStyle=function le(oe,ie,ue){return oe.style[ie]=ue},_setterCSSProp=function le(oe,ie,ue){return oe.style.setProperty(ie,ue)},_setterTransform=function le(oe,ie,ue){return oe._gsap[ie]=ue},_setterScale=function le(oe,ie,ue){return oe._gsap.scaleX=oe._gsap.scaleY=ue},_setterScaleWithRender=function le(oe,ie,ue,de,he){var pe=oe._gsap;pe.scaleX=pe.scaleY=ue,pe.renderTransform(he,pe)},_setterTransformWithRender=function le(oe,ie,ue,de,he){var pe=oe._gsap;pe[ie]=ue,pe.renderTransform(he,pe)},_transformProp="transform",_transformOriginProp=_transformProp+"Origin",_saveStyle=function le(oe,ie){var ue=this,de=this.target,he=de.style,pe=de._gsap;if(oe in _transformProps&&he){if(this.tfm=this.tfm||{},oe!=="transform")oe=_propertyAliases[oe]||oe,~oe.indexOf(",")?oe.split(",").forEach(function(_e){return ue.tfm[_e]=_get(de,_e)}):this.tfm[oe]=pe.x?pe[oe]:_get(de,oe),oe===_transformOriginProp&&(this.tfm.zOrigin=pe.zOrigin);else return _propertyAliases.transform.split(",").forEach(function(_e){return le.call(ue,_e,ie)});if(this.props.indexOf(_transformProp)>=0)return;pe.svg&&(this.svgo=de.getAttribute("data-svg-origin"),this.props.push(_transformOriginProp,ie,"")),oe=_transformProp}(he||ie)&&this.props.push(oe,ie,he[oe])},_removeIndependentTransforms=function le(oe){oe.translate&&(oe.removeProperty("translate"),oe.removeProperty("scale"),oe.removeProperty("rotate"))},_revertStyle=function le(){var oe=this.props,ie=this.target,ue=ie.style,de=ie._gsap,he,pe;for(he=0;he<oe.length;he+=3)oe[he+1]?ie[oe[he]]=oe[he+2]:oe[he+2]?ue[oe[he]]=oe[he+2]:ue.removeProperty(oe[he].substr(0,2)==="--"?oe[he]:oe[he].replace(_capsExp,"-$1").toLowerCase());if(this.tfm){for(pe in this.tfm)de[pe]=this.tfm[pe];de.svg&&(de.renderTransform(),ie.setAttribute("data-svg-origin",this.svgo||"")),he=_reverting(),(!he||!he.isStart)&&!ue[_transformProp]&&(_removeIndependentTransforms(ue),de.zOrigin&&ue[_transformOriginProp]&&(ue[_transformOriginProp]+=" "+de.zOrigin+"px",de.zOrigin=0,de.renderTransform()),de.uncache=1)}},_getStyleSaver=function le(oe,ie){var ue={target:oe,props:[],revert:_revertStyle,save:_saveStyle};return oe._gsap||gsap.core.getCache(oe),ie&&ie.split(",").forEach(function(de){return ue.save(de)}),ue},_supports3D,_createElement=function le(oe,ie){var ue=_doc.createElementNS?_doc.createElementNS((ie||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),oe):_doc.createElement(oe);return ue&&ue.style?ue:_doc.createElement(oe)},_getComputedProperty=function le(oe,ie,ue){var de=getComputedStyle(oe);return de[ie]||de.getPropertyValue(ie.replace(_capsExp,"-$1").toLowerCase())||de.getPropertyValue(ie)||!ue&&le(oe,_checkPropPrefix(ie)||ie,1)||""},_prefixes="O,Moz,ms,Ms,Webkit".split(","),_checkPropPrefix=function le(oe,ie,ue){var de=ie||_tempDiv,he=de.style,pe=5;if(oe in he&&!ue)return oe;for(oe=oe.charAt(0).toUpperCase()+oe.substr(1);pe--&&!(_prefixes[pe]+oe in he););return pe<0?null:(pe===3?"ms":pe>=0?_prefixes[pe]:"")+oe},_initCore=function le(){_windowExists()&&window.document&&(_win=window,_doc=_win.document,_docElement=_doc.documentElement,_tempDiv=_createElement("div")||{style:{}},_createElement("div"),_transformProp=_checkPropPrefix(_transformProp),_transformOriginProp=_transformProp+"Origin",_tempDiv.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",_supports3D=!!_checkPropPrefix("perspective"),_reverting=gsap.core.reverting,_pluginInitted=1)},_getBBoxHack=function le(oe){var ie=_createElement("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),ue=this.parentNode,de=this.nextSibling,he=this.style.cssText,pe;if(_docElement.appendChild(ie),ie.appendChild(this),this.style.display="block",oe)try{pe=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=le}catch{}else this._gsapBBox&&(pe=this._gsapBBox());return ue&&(de?ue.insertBefore(this,de):ue.appendChild(this)),_docElement.removeChild(ie),this.style.cssText=he,pe},_getAttributeFallbacks=function le(oe,ie){for(var ue=ie.length;ue--;)if(oe.hasAttribute(ie[ue]))return oe.getAttribute(ie[ue])},_getBBox=function le(oe){var ie;try{ie=oe.getBBox()}catch{ie=_getBBoxHack.call(oe,!0)}return ie&&(ie.width||ie.height)||oe.getBBox===_getBBoxHack||(ie=_getBBoxHack.call(oe,!0)),ie&&!ie.width&&!ie.x&&!ie.y?{x:+_getAttributeFallbacks(oe,["x","cx","x1"])||0,y:+_getAttributeFallbacks(oe,["y","cy","y1"])||0,width:0,height:0}:ie},_isSVG=function le(oe){return!!(oe.getCTM&&(!oe.parentNode||oe.ownerSVGElement)&&_getBBox(oe))},_removeProperty=function le(oe,ie){if(ie){var ue=oe.style,de;ie in _transformProps&&ie!==_transformOriginProp&&(ie=_transformProp),ue.removeProperty?(de=ie.substr(0,2),(de==="ms"||ie.substr(0,6)==="webkit")&&(ie="-"+ie),ue.removeProperty(de==="--"?ie:ie.replace(_capsExp,"-$1").toLowerCase())):ue.removeAttribute(ie)}},_addNonTweeningPT=function le(oe,ie,ue,de,he,pe){var _e=new PropTween(oe._pt,ie,ue,0,1,pe?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue);return oe._pt=_e,_e.b=de,_e.e=he,oe._props.push(ue),_e},_nonConvertibleUnits={deg:1,rad:1,turn:1},_nonStandardLayouts={grid:1,flex:1},_convertToUnit=function le(oe,ie,ue,de){var he=parseFloat(ue)||0,pe=(ue+"").trim().substr((he+"").length)||"px",_e=_tempDiv.style,Ce=_horizontalExp.test(ie),xe=oe.tagName.toLowerCase()==="svg",Ie=(xe?"client":"offset")+(Ce?"Width":"Height"),$e=100,Ne=de==="px",Oe=de==="%",Fe,Ve,ze,Ue;if(de===pe||!he||_nonConvertibleUnits[de]||_nonConvertibleUnits[pe])return he;if(pe!=="px"&&!Ne&&(he=le(oe,ie,ue,"px")),Ue=oe.getCTM&&_isSVG(oe),(Oe||pe==="%")&&(_transformProps[ie]||~ie.indexOf("adius")))return Fe=Ue?oe.getBBox()[Ce?"width":"height"]:oe[Ie],_round(Oe?he/Fe*$e:he/100*Fe);if(_e[Ce?"width":"height"]=$e+(Ne?pe:de),Ve=~ie.indexOf("adius")||de==="em"&&oe.appendChild&&!xe?oe:oe.parentNode,Ue&&(Ve=(oe.ownerSVGElement||{}).parentNode),(!Ve||Ve===_doc||!Ve.appendChild)&&(Ve=_doc.body),ze=Ve._gsap,ze&&Oe&&ze.width&&Ce&&ze.time===_ticker.time&&!ze.uncache)return _round(he/ze.width*$e);if(Oe&&(ie==="height"||ie==="width")){var Pt=oe.style[ie];oe.style[ie]=$e+de,Fe=oe[Ie],Pt?oe.style[ie]=Pt:_removeProperty(oe,ie)}else(Oe||pe==="%")&&!_nonStandardLayouts[_getComputedProperty(Ve,"display")]&&(_e.position=_getComputedProperty(oe,"position")),Ve===oe&&(_e.position="static"),Ve.appendChild(_tempDiv),Fe=_tempDiv[Ie],Ve.removeChild(_tempDiv),_e.position="absolute";return Ce&&Oe&&(ze=_getCache(Ve),ze.time=_ticker.time,ze.width=Ve[Ie]),_round(Ne?Fe*he/$e:Fe&&he?$e/Fe*he:0)},_get=function le(oe,ie,ue,de){var he;return _pluginInitted||_initCore(),ie in _propertyAliases&&ie!=="transform"&&(ie=_propertyAliases[ie],~ie.indexOf(",")&&(ie=ie.split(",")[0])),_transformProps[ie]&&ie!=="transform"?(he=_parseTransform(oe,de),he=ie!=="transformOrigin"?he[ie]:he.svg?he.origin:_firstTwoOnly(_getComputedProperty(oe,_transformOriginProp))+" "+he.zOrigin+"px"):(he=oe.style[ie],(!he||he==="auto"||de||~(he+"").indexOf("calc("))&&(he=_specialProps[ie]&&_specialProps[ie](oe,ie,ue)||_getComputedProperty(oe,ie)||_getProperty(oe,ie)||(ie==="opacity"?1:0))),ue&&!~(he+"").trim().indexOf(" ")?_convertToUnit(oe,ie,he,ue)+ue:he},_tweenComplexCSSString=function le(oe,ie,ue,de){if(!ue||ue==="none"){var he=_checkPropPrefix(ie,oe,1),pe=he&&_getComputedProperty(oe,he,1);pe&&pe!==ue?(ie=he,ue=pe):ie==="borderColor"&&(ue=_getComputedProperty(oe,"borderTopColor"))}var _e=new PropTween(this._pt,oe.style,ie,0,1,_renderComplexString),Ce=0,xe=0,Ie,$e,Ne,Oe,Fe,Ve,ze,Ue,Pt,qe,Et,kt;if(_e.b=ue,_e.e=de,ue+="",de+="",de==="auto"&&(Ve=oe.style[ie],oe.style[ie]=de,de=_getComputedProperty(oe,ie)||de,Ve?oe.style[ie]=Ve:_removeProperty(oe,ie)),Ie=[ue,de],_colorStringFilter(Ie),ue=Ie[0],de=Ie[1],Ne=ue.match(_numWithUnitExp)||[],kt=de.match(_numWithUnitExp)||[],kt.length){for(;$e=_numWithUnitExp.exec(de);)ze=$e[0],Pt=de.substring(Ce,$e.index),Fe?Fe=(Fe+1)%5:(Pt.substr(-5)==="rgba("||Pt.substr(-5)==="hsla(")&&(Fe=1),ze!==(Ve=Ne[xe++]||"")&&(Oe=parseFloat(Ve)||0,Et=Ve.substr((Oe+"").length),ze.charAt(1)==="="&&(ze=_parseRelative(Oe,ze)+Et),Ue=parseFloat(ze),qe=ze.substr((Ue+"").length),Ce=_numWithUnitExp.lastIndex-qe.length,qe||(qe=qe||_config.units[ie]||Et,Ce===de.length&&(de+=qe,_e.e+=qe)),Et!==qe&&(Oe=_convertToUnit(oe,ie,Ve,qe)||0),_e._pt={_next:_e._pt,p:Pt||xe===1?Pt:",",s:Oe,c:Ue-Oe,m:Fe&&Fe<4||ie==="zIndex"?Math.round:0});_e.c=Ce<de.length?de.substring(Ce,de.length):""}else _e.r=ie==="display"&&de==="none"?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue;return _relExp.test(de)&&(_e.e=0),this._pt=_e,_e},_keywordToPercent={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},_convertKeywordsToPercentages=function le(oe){var ie=oe.split(" "),ue=ie[0],de=ie[1]||"50%";return(ue==="top"||ue==="bottom"||de==="left"||de==="right")&&(oe=ue,ue=de,de=oe),ie[0]=_keywordToPercent[ue]||ue,ie[1]=_keywordToPercent[de]||de,ie.join(" ")},_renderClearProps=function le(oe,ie){if(ie.tween&&ie.tween._time===ie.tween._dur){var ue=ie.t,de=ue.style,he=ie.u,pe=ue._gsap,_e,Ce,xe;if(he==="all"||he===!0)de.cssText="",Ce=1;else for(he=he.split(","),xe=he.length;--xe>-1;)_e=he[xe],_transformProps[_e]&&(Ce=1,_e=_e==="transformOrigin"?_transformOriginProp:_transformProp),_removeProperty(ue,_e);Ce&&(_removeProperty(ue,_transformProp),pe&&(pe.svg&&ue.removeAttribute("transform"),_parseTransform(ue,1),pe.uncache=1,_removeIndependentTransforms(de)))}},_specialProps={clearProps:function le(oe,ie,ue,de,he){if(he.data!=="isFromStart"){var pe=oe._pt=new PropTween(oe._pt,ie,ue,0,0,_renderClearProps);return pe.u=de,pe.pr=-10,pe.tween=he,oe._props.push(ue),1}}},_identity2DMatrix=[1,0,0,1,0,0],_rotationalProperties={},_isNullTransform=function le(oe){return oe==="matrix(1, 0, 0, 1, 0, 0)"||oe==="none"||!oe},_getComputedTransformMatrixAsArray=function le(oe){var ie=_getComputedProperty(oe,_transformProp);return _isNullTransform(ie)?_identity2DMatrix:ie.substr(7).match(_numExp).map(_round)},_getMatrix=function le(oe,ie){var ue=oe._gsap||_getCache(oe),de=oe.style,he=_getComputedTransformMatrixAsArray(oe),pe,_e,Ce,xe;return ue.svg&&oe.getAttribute("transform")?(Ce=oe.transform.baseVal.consolidate().matrix,he=[Ce.a,Ce.b,Ce.c,Ce.d,Ce.e,Ce.f],he.join(",")==="1,0,0,1,0,0"?_identity2DMatrix:he):(he===_identity2DMatrix&&!oe.offsetParent&&oe!==_docElement&&!ue.svg&&(Ce=de.display,de.display="block",pe=oe.parentNode,(!pe||!oe.offsetParent)&&(xe=1,_e=oe.nextElementSibling,_docElement.appendChild(oe)),he=_getComputedTransformMatrixAsArray(oe),Ce?de.display=Ce:_removeProperty(oe,"display"),xe&&(_e?pe.insertBefore(oe,_e):pe?pe.appendChild(oe):_docElement.removeChild(oe))),ie&&he.length>6?[he[0],he[1],he[4],he[5],he[12],he[13]]:he)},_applySVGOrigin=function le(oe,ie,ue,de,he,pe){var _e=oe._gsap,Ce=he||_getMatrix(oe,!0),xe=_e.xOrigin||0,Ie=_e.yOrigin||0,$e=_e.xOffset||0,Ne=_e.yOffset||0,Oe=Ce[0],Fe=Ce[1],Ve=Ce[2],ze=Ce[3],Ue=Ce[4],Pt=Ce[5],qe=ie.split(" "),Et=parseFloat(qe[0])||0,kt=parseFloat(qe[1])||0,At,Dt,Lt,jt;ue?Ce!==_identity2DMatrix&&(Dt=Oe*ze-Fe*Ve)&&(Lt=Et*(ze/Dt)+kt*(-Ve/Dt)+(Ve*Pt-ze*Ue)/Dt,jt=Et*(-Fe/Dt)+kt*(Oe/Dt)-(Oe*Pt-Fe*Ue)/Dt,Et=Lt,kt=jt):(At=_getBBox(oe),Et=At.x+(~qe[0].indexOf("%")?Et/100*At.width:Et),kt=At.y+(~(qe[1]||qe[0]).indexOf("%")?kt/100*At.height:kt)),de||de!==!1&&_e.smooth?(Ue=Et-xe,Pt=kt-Ie,_e.xOffset=$e+(Ue*Oe+Pt*Ve)-Ue,_e.yOffset=Ne+(Ue*Fe+Pt*ze)-Pt):_e.xOffset=_e.yOffset=0,_e.xOrigin=Et,_e.yOrigin=kt,_e.smooth=!!de,_e.origin=ie,_e.originIsAbsolute=!!ue,oe.style[_transformOriginProp]="0px 0px",pe&&(_addNonTweeningPT(pe,_e,"xOrigin",xe,Et),_addNonTweeningPT(pe,_e,"yOrigin",Ie,kt),_addNonTweeningPT(pe,_e,"xOffset",$e,_e.xOffset),_addNonTweeningPT(pe,_e,"yOffset",Ne,_e.yOffset)),oe.setAttribute("data-svg-origin",Et+" "+kt)},_parseTransform=function le(oe,ie){var ue=oe._gsap||new GSCache(oe);if("x"in ue&&!ie&&!ue.uncache)return ue;var de=oe.style,he=ue.scaleX<0,pe="px",_e="deg",Ce=getComputedStyle(oe),xe=_getComputedProperty(oe,_transformOriginProp)||"0",Ie,$e,Ne,Oe,Fe,Ve,ze,Ue,Pt,qe,Et,kt,At,Dt,Lt,jt,_n,bn,vn,Tn,$n,wn,Cn,Sn,In,En,xn,kn,On,Mn,Un,zn;return Ie=$e=Ne=Ve=ze=Ue=Pt=qe=Et=0,Oe=Fe=1,ue.svg=!!(oe.getCTM&&_isSVG(oe)),Ce.translate&&((Ce.translate!=="none"||Ce.scale!=="none"||Ce.rotate!=="none")&&(de[_transformProp]=(Ce.translate!=="none"?"translate3d("+(Ce.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(Ce.rotate!=="none"?"rotate("+Ce.rotate+") ":"")+(Ce.scale!=="none"?"scale("+Ce.scale.split(" ").join(",")+") ":"")+(Ce[_transformProp]!=="none"?Ce[_transformProp]:"")),de.scale=de.rotate=de.translate="none"),Dt=_getMatrix(oe,ue.svg),ue.svg&&(ue.uncache?(In=oe.getBBox(),xe=ue.xOrigin-In.x+"px "+(ue.yOrigin-In.y)+"px",Sn=""):Sn=!ie&&oe.getAttribute("data-svg-origin"),_applySVGOrigin(oe,Sn||xe,!!Sn||ue.originIsAbsolute,ue.smooth!==!1,Dt)),kt=ue.xOrigin||0,At=ue.yOrigin||0,Dt!==_identity2DMatrix&&(bn=Dt[0],vn=Dt[1],Tn=Dt[2],$n=Dt[3],Ie=wn=Dt[4],$e=Cn=Dt[5],Dt.length===6?(Oe=Math.sqrt(bn*bn+vn*vn),Fe=Math.sqrt($n*$n+Tn*Tn),Ve=bn||vn?_atan2(vn,bn)*_RAD2DEG:0,Pt=Tn||$n?_atan2(Tn,$n)*_RAD2DEG+Ve:0,Pt&&(Fe*=Math.abs(Math.cos(Pt*_DEG2RAD))),ue.svg&&(Ie-=kt-(kt*bn+At*Tn),$e-=At-(kt*vn+At*$n))):(zn=Dt[6],Mn=Dt[7],xn=Dt[8],kn=Dt[9],On=Dt[10],Un=Dt[11],Ie=Dt[12],$e=Dt[13],Ne=Dt[14],Lt=_atan2(zn,On),ze=Lt*_RAD2DEG,Lt&&(jt=Math.cos(-Lt),_n=Math.sin(-Lt),Sn=wn*jt+xn*_n,In=Cn*jt+kn*_n,En=zn*jt+On*_n,xn=wn*-_n+xn*jt,kn=Cn*-_n+kn*jt,On=zn*-_n+On*jt,Un=Mn*-_n+Un*jt,wn=Sn,Cn=In,zn=En),Lt=_atan2(-Tn,On),Ue=Lt*_RAD2DEG,Lt&&(jt=Math.cos(-Lt),_n=Math.sin(-Lt),Sn=bn*jt-xn*_n,In=vn*jt-kn*_n,En=Tn*jt-On*_n,Un=$n*_n+Un*jt,bn=Sn,vn=In,Tn=En),Lt=_atan2(vn,bn),Ve=Lt*_RAD2DEG,Lt&&(jt=Math.cos(Lt),_n=Math.sin(Lt),Sn=bn*jt+vn*_n,In=wn*jt+Cn*_n,vn=vn*jt-bn*_n,Cn=Cn*jt-wn*_n,bn=Sn,wn=In),ze&&Math.abs(ze)+Math.abs(Ve)>359.9&&(ze=Ve=0,Ue=180-Ue),Oe=_round(Math.sqrt(bn*bn+vn*vn+Tn*Tn)),Fe=_round(Math.sqrt(Cn*Cn+zn*zn)),Lt=_atan2(wn,Cn),Pt=Math.abs(Lt)>2e-4?Lt*_RAD2DEG:0,Et=Un?1/(Un<0?-Un:Un):0),ue.svg&&(Sn=oe.getAttribute("transform"),ue.forceCSS=oe.setAttribute("transform","")||!_isNullTransform(_getComputedProperty(oe,_transformProp)),Sn&&oe.setAttribute("transform",Sn))),Math.abs(Pt)>90&&Math.abs(Pt)<270&&(he?(Oe*=-1,Pt+=Ve<=0?180:-180,Ve+=Ve<=0?180:-180):(Fe*=-1,Pt+=Pt<=0?180:-180)),ie=ie||ue.uncache,ue.x=Ie-((ue.xPercent=Ie&&(!ie&&ue.xPercent||(Math.round(oe.offsetWidth/2)===Math.round(-Ie)?-50:0)))?oe.offsetWidth*ue.xPercent/100:0)+pe,ue.y=$e-((ue.yPercent=$e&&(!ie&&ue.yPercent||(Math.round(oe.offsetHeight/2)===Math.round(-$e)?-50:0)))?oe.offsetHeight*ue.yPercent/100:0)+pe,ue.z=Ne+pe,ue.scaleX=_round(Oe),ue.scaleY=_round(Fe),ue.rotation=_round(Ve)+_e,ue.rotationX=_round(ze)+_e,ue.rotationY=_round(Ue)+_e,ue.skewX=Pt+_e,ue.skewY=qe+_e,ue.transformPerspective=Et+pe,(ue.zOrigin=parseFloat(xe.split(" ")[2])||!ie&&ue.zOrigin||0)&&(de[_transformOriginProp]=_firstTwoOnly(xe)),ue.xOffset=ue.yOffset=0,ue.force3D=_config.force3D,ue.renderTransform=ue.svg?_renderSVGTransforms:_supports3D?_renderCSSTransforms:_renderNon3DTransforms,ue.uncache=0,ue},_firstTwoOnly=function le(oe){return(oe=oe.split(" "))[0]+" "+oe[1]},_addPxTranslate=function le(oe,ie,ue){var de=getUnit(ie);return _round(parseFloat(ie)+parseFloat(_convertToUnit(oe,"x",ue+"px",de)))+de},_renderNon3DTransforms=function le(oe,ie){ie.z="0px",ie.rotationY=ie.rotationX="0deg",ie.force3D=0,_renderCSSTransforms(oe,ie)},_zeroDeg="0deg",_zeroPx="0px",_endParenthesis=") ",_renderCSSTransforms=function le(oe,ie){var ue=ie||this,de=ue.xPercent,he=ue.yPercent,pe=ue.x,_e=ue.y,Ce=ue.z,xe=ue.rotation,Ie=ue.rotationY,$e=ue.rotationX,Ne=ue.skewX,Oe=ue.skewY,Fe=ue.scaleX,Ve=ue.scaleY,ze=ue.transformPerspective,Ue=ue.force3D,Pt=ue.target,qe=ue.zOrigin,Et="",kt=Ue==="auto"&&oe&&oe!==1||Ue===!0;if(qe&&($e!==_zeroDeg||Ie!==_zeroDeg)){var At=parseFloat(Ie)*_DEG2RAD,Dt=Math.sin(At),Lt=Math.cos(At),jt;At=parseFloat($e)*_DEG2RAD,jt=Math.cos(At),pe=_addPxTranslate(Pt,pe,Dt*jt*-qe),_e=_addPxTranslate(Pt,_e,-Math.sin(At)*-qe),Ce=_addPxTranslate(Pt,Ce,Lt*jt*-qe+qe)}ze!==_zeroPx&&(Et+="perspective("+ze+_endParenthesis),(de||he)&&(Et+="translate("+de+"%, "+he+"%) "),(kt||pe!==_zeroPx||_e!==_zeroPx||Ce!==_zeroPx)&&(Et+=Ce!==_zeroPx||kt?"translate3d("+pe+", "+_e+", "+Ce+") ":"translate("+pe+", "+_e+_endParenthesis),xe!==_zeroDeg&&(Et+="rotate("+xe+_endParenthesis),Ie!==_zeroDeg&&(Et+="rotateY("+Ie+_endParenthesis),$e!==_zeroDeg&&(Et+="rotateX("+$e+_endParenthesis),(Ne!==_zeroDeg||Oe!==_zeroDeg)&&(Et+="skew("+Ne+", "+Oe+_endParenthesis),(Fe!==1||Ve!==1)&&(Et+="scale("+Fe+", "+Ve+_endParenthesis),Pt.style[_transformProp]=Et||"translate(0, 0)"},_renderSVGTransforms=function le(oe,ie){var ue=ie||this,de=ue.xPercent,he=ue.yPercent,pe=ue.x,_e=ue.y,Ce=ue.rotation,xe=ue.skewX,Ie=ue.skewY,$e=ue.scaleX,Ne=ue.scaleY,Oe=ue.target,Fe=ue.xOrigin,Ve=ue.yOrigin,ze=ue.xOffset,Ue=ue.yOffset,Pt=ue.forceCSS,qe=parseFloat(pe),Et=parseFloat(_e),kt,At,Dt,Lt,jt;Ce=parseFloat(Ce),xe=parseFloat(xe),Ie=parseFloat(Ie),Ie&&(Ie=parseFloat(Ie),xe+=Ie,Ce+=Ie),Ce||xe?(Ce*=_DEG2RAD,xe*=_DEG2RAD,kt=Math.cos(Ce)*$e,At=Math.sin(Ce)*$e,Dt=Math.sin(Ce-xe)*-Ne,Lt=Math.cos(Ce-xe)*Ne,xe&&(Ie*=_DEG2RAD,jt=Math.tan(xe-Ie),jt=Math.sqrt(1+jt*jt),Dt*=jt,Lt*=jt,Ie&&(jt=Math.tan(Ie),jt=Math.sqrt(1+jt*jt),kt*=jt,At*=jt)),kt=_round(kt),At=_round(At),Dt=_round(Dt),Lt=_round(Lt)):(kt=$e,Lt=Ne,At=Dt=0),(qe&&!~(pe+"").indexOf("px")||Et&&!~(_e+"").indexOf("px"))&&(qe=_convertToUnit(Oe,"x",pe,"px"),Et=_convertToUnit(Oe,"y",_e,"px")),(Fe||Ve||ze||Ue)&&(qe=_round(qe+Fe-(Fe*kt+Ve*Dt)+ze),Et=_round(Et+Ve-(Fe*At+Ve*Lt)+Ue)),(de||he)&&(jt=Oe.getBBox(),qe=_round(qe+de/100*jt.width),Et=_round(Et+he/100*jt.height)),jt="matrix("+kt+","+At+","+Dt+","+Lt+","+qe+","+Et+")",Oe.setAttribute("transform",jt),Pt&&(Oe.style[_transformProp]=jt)},_addRotationalPropTween=function le(oe,ie,ue,de,he){var pe=360,_e=_isString(he),Ce=parseFloat(he)*(_e&&~he.indexOf("rad")?_RAD2DEG:1),xe=Ce-de,Ie=de+xe+"deg",$e,Ne;return _e&&($e=he.split("_")[1],$e==="short"&&(xe%=pe,xe!==xe%(pe/2)&&(xe+=xe<0?pe:-360)),$e==="cw"&&xe<0?xe=(xe+pe*_bigNum)%pe-~~(xe/pe)*pe:$e==="ccw"&&xe>0&&(xe=(xe-pe*_bigNum)%pe-~~(xe/pe)*pe)),oe._pt=Ne=new PropTween(oe._pt,ie,ue,de,xe,_renderPropWithEnd),Ne.e=Ie,Ne.u="deg",oe._props.push(ue),Ne},_assign=function le(oe,ie){for(var ue in ie)oe[ue]=ie[ue];return oe},_addRawTransformPTs=function le(oe,ie,ue){var de=_assign({},ue._gsap),he="perspective,force3D,transformOrigin,svgOrigin",pe=ue.style,_e,Ce,xe,Ie,$e,Ne,Oe,Fe;de.svg?(xe=ue.getAttribute("transform"),ue.setAttribute("transform",""),pe[_transformProp]=ie,_e=_parseTransform(ue,1),_removeProperty(ue,_transformProp),ue.setAttribute("transform",xe)):(xe=getComputedStyle(ue)[_transformProp],pe[_transformProp]=ie,_e=_parseTransform(ue,1),pe[_transformProp]=xe);for(Ce in _transformProps)xe=de[Ce],Ie=_e[Ce],xe!==Ie&&he.indexOf(Ce)<0&&(Oe=getUnit(xe),Fe=getUnit(Ie),$e=Oe!==Fe?_convertToUnit(ue,Ce,xe,Fe):parseFloat(xe),Ne=parseFloat(Ie),oe._pt=new PropTween(oe._pt,_e,Ce,$e,Ne-$e,_renderCSSProp),oe._pt.u=Fe||0,oe._props.push(Ce));_assign(_e,de)};_forEachName("padding,margin,Width,Radius",function(le,oe){var ie="Top",ue="Right",de="Bottom",he="Left",pe=(oe<3?[ie,ue,de,he]:[ie+he,ie+ue,de+ue,de+he]).map(function(_e){return oe<2?le+_e:"border"+_e+le});_specialProps[oe>1?"border"+le:le]=function(_e,Ce,xe,Ie,$e){var Ne,Oe;if(arguments.length<4)return Ne=pe.map(function(Fe){return _get(_e,Fe,xe)}),Oe=Ne.join(" "),Oe.split(Ne[0]).length===5?Ne[0]:Oe;Ne=(Ie+"").split(" "),Oe={},pe.forEach(function(Fe,Ve){return Oe[Fe]=Ne[Ve]=Ne[Ve]||Ne[(Ve-1)/2|0]}),_e.init(Ce,Oe,$e)}});var CSSPlugin={name:"css",register:_initCore,targetTest:function le(oe){return oe.style&&oe.nodeType},init:function le(oe,ie,ue,de,he){var pe=this._props,_e=oe.style,Ce=ue.vars.startAt,xe,Ie,$e,Ne,Oe,Fe,Ve,ze,Ue,Pt,qe,Et,kt,At,Dt,Lt;_pluginInitted||_initCore(),this.styles=this.styles||_getStyleSaver(oe),Lt=this.styles.props,this.tween=ue;for(Ve in ie)if(Ve!=="autoRound"&&(Ie=ie[Ve],!(_plugins[Ve]&&_checkPlugin(Ve,ie,ue,de,oe,he)))){if(Oe=typeof Ie,Fe=_specialProps[Ve],Oe==="function"&&(Ie=Ie.call(ue,de,oe,he),Oe=typeof Ie),Oe==="string"&&~Ie.indexOf("random(")&&(Ie=_replaceRandom(Ie)),Fe)Fe(this,oe,Ve,Ie,ue)&&(Dt=1);else if(Ve.substr(0,2)==="--")xe=(getComputedStyle(oe).getPropertyValue(Ve)+"").trim(),Ie+="",_colorExp.lastIndex=0,_colorExp.test(xe)||(ze=getUnit(xe),Ue=getUnit(Ie)),Ue?ze!==Ue&&(xe=_convertToUnit(oe,Ve,xe,Ue)+Ue):ze&&(Ie+=ze),this.add(_e,"setProperty",xe,Ie,de,he,0,0,Ve),pe.push(Ve),Lt.push(Ve,0,_e[Ve]);else if(Oe!=="undefined"){if(Ce&&Ve in Ce?(xe=typeof Ce[Ve]=="function"?Ce[Ve].call(ue,de,oe,he):Ce[Ve],_isString(xe)&&~xe.indexOf("random(")&&(xe=_replaceRandom(xe)),getUnit(xe+"")||xe==="auto"||(xe+=_config.units[Ve]||getUnit(_get(oe,Ve))||""),(xe+"").charAt(1)==="="&&(xe=_get(oe,Ve))):xe=_get(oe,Ve),Ne=parseFloat(xe),Pt=Oe==="string"&&Ie.charAt(1)==="="&&Ie.substr(0,2),Pt&&(Ie=Ie.substr(2)),$e=parseFloat(Ie),Ve in _propertyAliases&&(Ve==="autoAlpha"&&(Ne===1&&_get(oe,"visibility")==="hidden"&&$e&&(Ne=0),Lt.push("visibility",0,_e.visibility),_addNonTweeningPT(this,_e,"visibility",Ne?"inherit":"hidden",$e?"inherit":"hidden",!$e)),Ve!=="scale"&&Ve!=="transform"&&(Ve=_propertyAliases[Ve],~Ve.indexOf(",")&&(Ve=Ve.split(",")[0]))),qe=Ve in _transformProps,qe){if(this.styles.save(Ve),Et||(kt=oe._gsap,kt.renderTransform&&!ie.parseTransform||_parseTransform(oe,ie.parseTransform),At=ie.smoothOrigin!==!1&&kt.smooth,Et=this._pt=new PropTween(this._pt,_e,_transformProp,0,1,kt.renderTransform,kt,0,-1),Et.dep=1),Ve==="scale")this._pt=new PropTween(this._pt,kt,"scaleY",kt.scaleY,(Pt?_parseRelative(kt.scaleY,Pt+$e):$e)-kt.scaleY||0,_renderCSSProp),this._pt.u=0,pe.push("scaleY",Ve),Ve+="X";else if(Ve==="transformOrigin"){Lt.push(_transformOriginProp,0,_e[_transformOriginProp]),Ie=_convertKeywordsToPercentages(Ie),kt.svg?_applySVGOrigin(oe,Ie,0,At,0,this):(Ue=parseFloat(Ie.split(" ")[2])||0,Ue!==kt.zOrigin&&_addNonTweeningPT(this,kt,"zOrigin",kt.zOrigin,Ue),_addNonTweeningPT(this,_e,Ve,_firstTwoOnly(xe),_firstTwoOnly(Ie)));continue}else if(Ve==="svgOrigin"){_applySVGOrigin(oe,Ie,1,At,0,this);continue}else if(Ve in _rotationalProperties){_addRotationalPropTween(this,kt,Ve,Ne,Pt?_parseRelative(Ne,Pt+Ie):Ie);continue}else if(Ve==="smoothOrigin"){_addNonTweeningPT(this,kt,"smooth",kt.smooth,Ie);continue}else if(Ve==="force3D"){kt[Ve]=Ie;continue}else if(Ve==="transform"){_addRawTransformPTs(this,Ie,oe);continue}}else Ve in _e||(Ve=_checkPropPrefix(Ve)||Ve);if(qe||($e||$e===0)&&(Ne||Ne===0)&&!_complexExp.test(Ie)&&Ve in _e)ze=(xe+"").substr((Ne+"").length),$e||($e=0),Ue=getUnit(Ie)||(Ve in _config.units?_config.units[Ve]:ze),ze!==Ue&&(Ne=_convertToUnit(oe,Ve,xe,Ue)),this._pt=new PropTween(this._pt,qe?kt:_e,Ve,Ne,(Pt?_parseRelative(Ne,Pt+$e):$e)-Ne,!qe&&(Ue==="px"||Ve==="zIndex")&&ie.autoRound!==!1?_renderRoundedCSSProp:_renderCSSProp),this._pt.u=Ue||0,ze!==Ue&&Ue!=="%"&&(this._pt.b=xe,this._pt.r=_renderCSSPropWithBeginning);else if(Ve in _e)_tweenComplexCSSString.call(this,oe,Ve,xe,Pt?Pt+Ie:Ie);else if(Ve in oe)this.add(oe,Ve,xe||oe[Ve],Pt?Pt+Ie:Ie,de,he);else if(Ve!=="parseTransform"){_missingPlugin(Ve,Ie);continue}qe||(Ve in _e?Lt.push(Ve,0,_e[Ve]):Lt.push(Ve,1,xe||oe[Ve])),pe.push(Ve)}}Dt&&_sortPropTweensByPriority(this)},render:function le(oe,ie){if(ie.tween._time||!_reverting())for(var ue=ie._pt;ue;)ue.r(oe,ue.d),ue=ue._next;else ie.styles.revert()},get:_get,aliases:_propertyAliases,getSetter:function le(oe,ie,ue){var de=_propertyAliases[ie];return de&&de.indexOf(",")<0&&(ie=de),ie in _transformProps&&ie!==_transformOriginProp&&(oe._gsap.x||_get(oe,"x"))?ue&&_recentSetterPlugin===ue?ie==="scale"?_setterScale:_setterTransform:(_recentSetterPlugin=ue||{})&&(ie==="scale"?_setterScaleWithRender:_setterTransformWithRender):oe.style&&!_isUndefined(oe.style[ie])?_setterCSSStyle:~ie.indexOf("-")?_setterCSSProp:_getSetter(oe,ie)},core:{_removeProperty,_getMatrix}};gsap.utils.checkPrefix=_checkPropPrefix;gsap.core.getStyleSaver=_getStyleSaver;(function(le,oe,ie,ue){var de=_forEachName(le+","+oe+","+ie,function(he){_transformProps[he]=1});_forEachName(oe,function(he){_config.units[he]="deg",_rotationalProperties[he]=1}),_propertyAliases[de[13]]=le+","+oe,_forEachName(ue,function(he){var pe=he.split(":");_propertyAliases[pe[1]]=de[pe[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");_forEachName("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(le){_config.units[le]="px"});gsap.registerPlugin(CSSPlugin);var gsapWithCSS=gsap.registerPlugin(CSSPlugin)||gsap;gsapWithCSS.core.Tween;const AppGsap=gsapWithCSS;class PBRData{constructor(){ve(this,"alpha"),ve(this,"aoMap"),ve(this,"aoMapIntensity"),ve(this,"baseColor"),ve(this,"baseMap"),ve(this,"displacementMap"),ve(this,"displacementScale"),ve(this,"materialId"),ve(this,"metalness"),ve(this,"metalnessMap"),ve(this,"name"),ve(this,"normalMap"),ve(this,"normalScale"),ve(this,"path"),ve(this,"previewUrl"),ve(this,"roughness"),ve(this,"roughnessMap")}}`${ShaderChunk.logdepthbuf_pars_vertex}${ShaderChunk.fog_pars_vertex}${ShaderChunk.logdepthbuf_vertex}${ShaderChunk.fog_vertex&&"vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );"}${ShaderChunk.fog_vertex}`;`${ShaderChunk.fog_pars_fragment}${ShaderChunk.logdepthbuf_pars_fragment}${ShaderChunk.logdepthbuf_fragment}${ShaderChunk.fog_fragment}`;class MateriaUtils{static changePBRMaterial(oe,ie,ue){let de=ie.path;this.changePBRMaterialBaseValue(oe,ie);let he=oe.material;he.map=this.changeTexture(de,ie.baseMap,ue),he.roughnessMap=this.changeTexture(de,ie.roughnessMap,ue),he.metalnessMap=this.changeTexture(de,ie.metalnessMap,ue);let pe=this.changeTexture(de,ie.aoMap,ue);if(pe){if(he.aoMap=pe,!oe.geometry.attributes.uv){let _e=oe.geometry.attributes.position.count,Ce=new BufferAttribute(new Float32Array(2*_e),2);for(let xe=0;xe<_e;xe++)Ce.setXY(xe,1,1);oe.geometry.computeTangents(),oe.geometry.setAttribute("uv",Ce)}oe.geometry.setAttribute("uv2",oe.geometry.attributes.uv)}he.normalMap=this.changeTexture(de,ie.normalMap,ue),he.normalMap,he.color.set(ie.baseColor),he.needsUpdate=!0}static changeMaterialMap(oe,ie,ue,de){let he=oe.material,pe=this.changeTexture("",ie,de);switch(ue){case"map":he.map=pe;break;case"roughnessMap":he.roughnessMap=pe;break;case"metalnessMap":he.metalnessMap=pe;break;case"aoMap":he.aoMap=pe;break;case"normalMap":he.normalMap=pe;break;case"displacementMap":he.displacementMap=pe;break}he.needsUpdate=!0}static changePBRMaterialBaseValue(oe,ie){let ue=oe.material,de=ie.alpha;this.changeAlpha(de,ue),ue.metalness=ie.metalness,ue.roughness=ie.roughness,ue.aoMapIntensity=ie.aoMapIntensity,ue.normalScale.set(ie.normalScale,-ie.normalScale),ue.color.set(ie.baseColor)}static clonePBR(oe){let ie=new PBRData;for(const ue in oe)ie[ue]=oe[ue];return ie}static changeScale(oe,ie,ue,de){ue&&(this.changeMeshScale(ue.map,ie,oe),this.changeMeshScale(ue.roughnessMap,ie,oe),this.changeMeshScale(ue.metalnessMap,ie,oe),this.changeMeshScale(ue.aoMap,ie,oe),this.changeMeshScale(ue.normalMap,ie,oe),this.changeMeshScale(ue.displacementMap,ie,oe),de&&(this.changeMeshScale(ue.map,ie,!oe),this.changeMeshScale(ue.roughnessMap,ie,!oe),this.changeMeshScale(ue.metalnessMap,ie,!oe),this.changeMeshScale(ue.aoMap,ie,!oe),this.changeMeshScale(ue.normalMap,ie,!oe),this.changeMeshScale(ue.displacementMap,ie,!oe)))}static changeRotate(oe,ie){ie&&(this.changeMeshRotate(ie.map,oe),this.changeMeshRotate(ie.roughnessMap,oe),this.changeMeshRotate(ie.metalnessMap,oe),this.changeMeshRotate(ie.aoMap,oe),this.changeMeshRotate(ie.normalMap,oe),this.changeMeshRotate(ie.displacementMap,oe))}static changeBaseColor(oe,ie){ie&&(oe?ie.color.set(oe):ie.color.set(16777215))}static changeAlpha(oe,ie){oe==1?(ie.transparent=!1,ie.side=FrontSide):(ie.transparent=!0,ie.side=DoubleSide),ie.opacity=oe}static changeNormalScale(oe,ie){ie.normalMap&&(ie.normalScale=new Vector2$1(oe,-oe),ie.needsUpdate=!0)}static changeOffset(oe,ie,ue,de){ue&&(this.changeMeshOffset(ue.map,ie,oe),this.changeMeshOffset(ue.roughnessMap,ie,oe),this.changeMeshOffset(ue.metalnessMap,ie,oe),this.changeMeshOffset(ue.aoMap,ie,oe),this.changeMeshOffset(ue.normalMap,ie,oe),this.changeMeshOffset(ue.displacementMap,ie,oe),de&&(this.changeMeshOffset(ue.map,ie,!oe),this.changeMeshOffset(ue.roughnessMap,ie,!oe),this.changeMeshOffset(ue.metalnessMap,ie,!oe),this.changeMeshOffset(ue.aoMap,ie,!oe),this.changeMeshOffset(ue.normalMap,ie,!oe),this.changeMeshOffset(ue.displacementMap,ie,!oe)))}static changeMaterialSize(oe,ie,ue,de,he,pe){oe&&(this.changeTextureSize(oe.map,ie,ue,de,he,pe),this.changeTextureSize(oe.roughnessMap,ie,ue,de,he,pe),this.changeTextureSize(oe.metalnessMap,ie,ue,de,he,pe),this.changeTextureSize(oe.aoMap,ie,ue,de,he,pe),this.changeTextureSize(oe.normalMap,ie,ue,de,he,pe),this.changeTextureSize(oe.displacementMap,ie,ue,de,he,pe))}static changeTextureSize(oe,ie,ue,de,he,pe){oe&&(oe.repeat.x=ie,oe.repeat.y=ue,oe.rotation=de,oe.offset.x=he,oe.offset.y=pe)}}ve(MateriaUtils,"changeTexture",(le,oe,ie)=>{if(oe!=""){let ue=new TextureLoader().load(le+oe,function(){ie&&ie(ue)});return ue.wrapS=RepeatWrapping,ue.wrapT=RepeatWrapping,ue.flipY=!1,ue}return ie&&ie(null),null}),ve(MateriaUtils,"changeMeshScale",(le,oe,ie)=>{le&&(ie?le.repeat.x=oe:le.repeat.y=oe)}),ve(MateriaUtils,"changeMeshRotate",(le,oe)=>{le&&(le.rotation=oe*Math.PI/180)}),ve(MateriaUtils,"changeMeshOffset",(le,oe,ie)=>{le&&(ie?le.offset.x=oe:le.offset.y=oe)});class Hold extends EventDispatcher{constructor(oe){super(),ve(this,"holdIntervalDelay"),ve(this,"_enabled",!0),ve(this,"_holding",!1),ve(this,"_intervalId",-1),ve(this,"_deltaTime",0),ve(this,"_elapsedTime",0),ve(this,"_lastTime",0),ve(this,"_holdStart",ie=>{if(!this._enabled||this._holding)return;this._deltaTime=0,this._elapsedTime=0,this._lastTime=performance.now(),this.dispatchEvent({type:"holdStart",deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:ie}),this._holding=!0;const ue=()=>{this._intervalId=this.holdIntervalDelay?window.setTimeout(ue,this.holdIntervalDelay):window.requestAnimationFrame(ue);const de=performance.now();this._deltaTime=de-this._lastTime,this._elapsedTime+=this._deltaTime,this._lastTime=performance.now(),this.dispatchEvent({type:"holding",deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:ie})};this._intervalId=this.holdIntervalDelay?window.setTimeout(ue,this.holdIntervalDelay):window.requestAnimationFrame(ue)}),ve(this,"_holdEnd",ie=>{if(!this._enabled||!this._holding)return;const ue=performance.now();this._deltaTime=ue-this._lastTime,this._elapsedTime+=this._deltaTime,this._lastTime=performance.now(),this.dispatchEvent({type:"holdEnd",deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:ie}),window.clearTimeout(this._intervalId),window.cancelAnimationFrame(this._intervalId),this._holding=!1}),this.holdIntervalDelay=oe}get enabled(){return this._enabled}set enabled(oe){this._enabled!==oe&&(this._enabled=oe,this._enabled||this._holdEnd())}get holding(){return this._holding}}class KeyboardKeyHold extends Hold{constructor(oe,ie){if(typeof oe!="string")return;super(ie),this._holdStart=this._holdStart.bind(this),this._holdEnd=this._holdEnd.bind(this);const ue=he=>{isInputEvent(he)||he.code===oe&&this._holdStart(he)},de=he=>{he.code===oe&&this._holdEnd(he)};document.addEventListener("keydown",ue),document.addEventListener("keyup",de)}}function isInputEvent(le){const oe=le.target;return oe.tagName==="INPUT"||oe.tagName==="SELECT"||oe.tagName==="TEXTAREA"||oe.isContentEditable}class PathAnimation{constructor(oe){ve(this,"paths"),ve(this,"_tmp"),ve(this,"_view"),ve(this,"name"),ve(this,"selIndex"),this._tmp=new Vector3$1,this.paths=[],this._view=oe,this.name="",this.selIndex=0}play(oe){if(this.paths.length<=1||this.paths.length==oe+1)return;let ie=[],ue=[];for(let xe=oe;xe<this.paths.length;xe++){const Ie=this.paths[xe];ie.push(Ie.position),ue.push(Ie.target)}const de=new CatmullRomCurve3$1(ie),he=new CatmullRomCurve3$1(ue),pe={value:0};let _e=0,Ce=1/(this.paths.length-1);this._paly(de,he,pe,_e,Ce,this.paths[0].duration,0)}_paly(oe,ie,ue,de,he,pe,_e){const Ce=this._tmp,xe=this._view.controls;this._view;const Ie=this;AppGsap.fromTo(ue,{value:de},{value:de+he,duration:pe,overwrite:!0,paused:!0,ease:"none",onUpdateParams:[ue],onUpdate({value:$e}){if(!this.isActive())return;oe.getPoint($e,Ce);const Ne=Ce.x,Oe=Ce.y,Fe=Ce.z;ie.getPoint($e,Ce);const Ve=Ce.x,ze=Ce.y,Ue=Ce.z;xe.setLookAt(Ne,Oe,Fe,Ve,ze,Ue,!1),xe.update(),xe.dispatchEvent({type:"control"})},onStart(){xe.enabled=!1},onComplete(){if(de+=he,de>=1){xe.enabled=!0;return}_e++,Ie._paly(oe,ie,ue,de,he,Ie.paths[_e].duration,_e)}}).play(0)}addPath(oe,ie){ie==null&&(ie=this._view.renderer.domElement.toDataURL("image/jpeg")),this.paths.push({position:this._view.controls.getPosition().clone(),target:this._view.controls.getTarget().clone(),duration:oe,url:ie})}}const fr=class xo{constructor(oe){ve(this,"_geometry"),ve(this,"_group"),ve(this,"_ruler"),ve(this,"_tempLabel"),ve(this,"_input"),ve(this,"_distance"),ve(this,"_view"),ve(this,"_show",!0),ve(this,"_edit",!0),this._group=new Object3D,this._geometry=new BufferGeometry,this._ruler=new LineSegments(this._geometry,xo.material),this._group.add(this._ruler),this._distance=0,this._view=oe}set show(oe){this._show==oe&&this._ruler,this._show=oe,this._group.visible=oe,oe?(this._group.add(this._tempLabel),this._view.scene.add(this._group)):(this._group.remove(this._tempLabel),this._view.scene.remove(this._group))}get show(){return this._show}get input(){return this._tempLabel||(this._tempLabel=this.createLabel(""),this._group.add(this._tempLabel)),this._input}get value(){var oe;return Number((oe=this._input)==null?void 0:oe.value)}get distance(){return this._distance}get edit(){return this._edit}set edit(oe){this._edit=oe}showRuler(oe,ie){this._geometry.setFromPoints([oe,ie]),this._geometry.attributes.position.needsUpdate=!0,this._geometry.computeBoundingSphere();let ue=oe.clone();ue.add(ie),ue.multiplyScalar(.5);let de=Math.round(oe.distanceTo(ie)*1e3)/1e3;this._distance=de,this._tempLabel||(this._tempLabel=this.createLabel(de.toString()),this._group.add(this._tempLabel)),this._tempLabel.position.set(ue.x,ue.y,ue.z),this._input.value=de.toString(),this.show=!0,this._input.disabled=this._edit,this._view.enableRender()}createLabel(oe){this._view.initCss2dRenderer();const ie=document.createElement("input");ie.type="text",ie.value=oe,ie.style.pointerEvents="auto",ie.style.color="#FFD700",ie.style.backgroundColor="rgba(0, 0, 0, 0.9)",ie.style.border="none",ie.style.borderRadius="2px",ie.style.fontSize="12px",ie.style.padding="2px 4px",ie.style.width="auto",ie.style.minWidth="30px",ie.style.maxWidth="80px",ie.style.outline="none",ie.style.textAlign="center",ie.style.fontFamily="Arial, sans-serif",ie.style.boxShadow="0 0 2px rgba(255, 215, 0, 0.5)";const ue=()=>{const de=ie.value,he=de.indexOf(".");let pe;he!==-1?pe=de.slice(0,Math.min(he+4,de.length)).length*7+8:pe=de.length*7+8,pe=Math.max(30,Math.min(pe,80)),ie.style.width=`${pe}px`};return ue(),ie.addEventListener("input",ue),ie.addEventListener("focus",function(){this.style.backgroundColor="rgba(0, 0, 0, 0.7)",this.style.boxShadow="0 0 4px rgba(255, 215, 0, 0.8)"}),ie.addEventListener("blur",function(){this.style.backgroundColor="rgba(0, 0, 0, 0.5)",this.style.boxShadow="0 0 2px rgba(255, 215, 0, 0.5)"}),this._input=ie,new CSS2DObject(ie)}dispose(){this.show=!1,this._geometry&&(this._geometry.dispose(),this._geometry=null),this._tempLabel&&(this._tempLabel.clear(),this._tempLabel=null),this._group&&(this._group.clear(),this._group=null),this._ruler&&(this._ruler.clear(),this._ruler=null),this._input&&(this._input=null)}};ve(fr,"material",new LineBasicMaterial({color:16766720,depthWrite:!0,depthTest:!1,transparent:!0}));let Ruler=fr;const po=class po extends EventEmitter{constructor(){super();no(this,"toolbarRef");no(this,"materialComponentRef");no(this,"glayoutRootRef");no(this,"_webView");no(this,"modelConfig");this.on("goHome",bindCaller(this,this.goHome)),this.on("isOrthogonal",bindCaller(this,this.isOrthogonal)),this.on("isSection",bindCaller(this,this.isSection)),this.on("changeOperation",bindCaller(this,this.changeOperation)),this.on("setExplosion",bindCaller(this,this.setExplosion)),this.on("isShowMap",bindCaller(this,this.isShowMap)),this.on("gisChanged",bindCaller(this,this.gisChanged)),this.on("setTreeDataByIds",bindCaller(this,this.setTreeDataByIds)),this.on("exportSVG",bindCaller(this,this.exportSVG)),this.on("exportPDF",bindCaller(this,this.exportPDF))}static get instance(){return this._instance==null&&(this._instance=new po),this._instance}get webView(){return this._webView}set webView(ie){this._webView=ie}gisChanged(ie){for(const ue of this._webView.app.allDocuments)ue.gisData=ie}exportSVG(){if(this._webView&&this._webView.app.activeDocument){const ie=this._webView.app.activeDocument;ie.exportSvg&&ie.exportSvg({name:"output.svg",pageSize:{width:400,height:400},blackWhiteMode:!1,exportHtmlElement:!0,lineWeight:.2})}}exportPDF(){if(this._webView&&this._webView.app.activeDocument){const ie=this._webView.app.activeDocument;ie.exportPdf&&ie.exportPdf({name:"output.pdf",pageSize:{width:420,height:297},blackWhiteMode:!1,lineWeight:.02})}}goHome(){this._webView&&this._webView.app.view.goHome()}isOrthogonal(ie){this._webView&&this._webView.app.view.setOrthogonal(ie)}isShowMap(ie){if(this._webView&&(this._webView.app.view.showMap=ie,ie)){for(const ue of this._webView.app.allDocuments)ue.gisData==null&&(ue.gisData=new GisData);this._webView.app.activeDocument&&this.emit("setGisData",this._webView.app.activeDocument.gisData)}}setExplosion(ie){this._webView&&this._webView.app.setExplosion(ie)}isSection(ie){if(this._webView){const ue=this._webView.app.activeDocument.boundingBox;if(ue){const de=ue.clone();de.expandByScalar(1.5),this._webView.app.view.setSection(ie,de)}}}changeOperation(ie){this._webView.runCommand(ie)}setTreeDataByIds(ie,ue){if(this._webView==null)return;let de=(pe,_e)=>{const Ce=this._webView.app.getElementByID(pe.id);Ce&&_e(Ce),pe.children&&pe.children.forEach(xe=>de(xe,_e))};if(ue.length==0){for(const pe of ie)de(pe,_e=>{_e.visible=!1});this._webView.app.enableRender();return}let he=new Set(ue);for(const pe of ie)de(pe,_e=>{he.has(_e.Id)?_e.visible=!0:_e.visible=!1});this._webView.app.enableRender()}};no(po,"_instance",null);let WebViewUI=po;const _hoisted_1$c={class:"dialog-footer"},_sfc_main$d=defineComponent({__name:"OpenTiles",setup(le,{expose:oe}){const ie=ref(!1),ue=ref("3dtiles/tileset.json"),de=()=>{ie.value=!1,WebViewUI.instance.emit("openTilesClick",ue.value)},he=()=>{ie.value=!1};return oe({dialogVisible:ie}),(pe,_e)=>{const Ce=ElInput,xe=ElFormItem,Ie=ElForm,$e=ElButton,Ne=ElDialog;return openBlock(),createBlock(Ne,{modelValue:ie.value,"onUpdate:modelValue":_e[1]||(_e[1]=Oe=>ie.value=Oe),title:"3Dtiles",width:"500px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_1$c,[createVNode($e,{onClick:he},{default:withCtx(()=>_e[2]||(_e[2]=[createTextVNode(" ")])),_:1}),createVNode($e,{type:"primary",onClick:de},{default:withCtx(()=>_e[3]||(_e[3]=[createTextVNode("")])),_:1})])]),default:withCtx(()=>[createVNode(Ie,{"label-width":"80px"},{default:withCtx(()=>[createVNode(xe,{label:"url"},{default:withCtx(()=>[createVNode(Ce,{modelValue:ue.value,"onUpdate:modelValue":_e[0]||(_e[0]=Oe=>ue.value=Oe)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),_export_sfc=(le,oe)=>{const ie=le.__vccOpts||le;for(const[ue,de]of oe)ie[ue]=de;return ie},OpenTiles=_export_sfc(_sfc_main$d,[["__scopeId","data-v-2d57c19f"]]),OpenTiles$1=Object.freeze(Object.defineProperty({__proto__:null,default:OpenTiles},Symbol.toStringTag,{value:"Module"})),_hoisted_1$b={class:"topnav"},_hoisted_2$a={title:"Import GLB from File"},_hoisted_3$7={title:"Import dxf from File"},_hoisted_4$5={title:"Import IFC from File"},_hoisted_5$4={title:"Import 3DM from File"},_hoisted_6$3={title:"Import FBX from File"},_sfc_main$c=defineComponent({__name:"App",setup(le){const oe=ref(null),ie=ref();onMounted(()=>{document.addEventListener("DOMContentLoaded",()=>{WebViewUI.instance.glayoutRootRef=oe,oe.value.loadGLLayout(prefinedLayouts.miniRow)})});const ue=(he,pe)=>{const Ce=pe.srcElement.files[0],xe=Ce.name;let Ie=URL.createObjectURL(Ce);WebViewUI.instance.emit(he,Ie,xe)},de=()=>{ie.value.dialogVisible=!0};return(he,pe)=>(openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$b,[pe[10]||(pe[10]=createBaseVNode("a",{href:"https://github.com/cowboy1997/Revit2GLTF"},"Cowboy1997",-1)),createBaseVNode("label",_hoisted_2$a,[pe[5]||(pe[5]=createTextVNode("GLB ")),createBaseVNode("input",{type:"file",accept:".glb",multiple:"",style:{display:"none"},onInput:pe[0]||(pe[0]=_e=>ue("openGLTFClick",_e))},null,32)]),createBaseVNode("a",{href:"#",onClick:de},"3dtiles"),createBaseVNode("label",_hoisted_3$7,[pe[6]||(pe[6]=createTextVNode("dwg/dxf ")),createBaseVNode("input",{type:"file",accept:".dxf,.dwg",style:{display:"none"},onInput:pe[1]||(pe[1]=_e=>ue("openCADClick",_e))},null,32)]),createBaseVNode("label",_hoisted_4$5,[pe[7]||(pe[7]=createTextVNode("IFC ")),createBaseVNode("input",{type:"file",accept:".ifc",style:{display:"none"},onInput:pe[2]||(pe[2]=_e=>ue("openIFCClick",_e))},null,32)]),createBaseVNode("label",_hoisted_5$4,[pe[8]||(pe[8]=createTextVNode("Rhino ")),createBaseVNode("input",{type:"file",accept:".3dm",style:{display:"none"},onInput:pe[3]||(pe[3]=_e=>ue("openRhinoClick",_e))},null,32)]),createBaseVNode("label",_hoisted_6$3,[pe[9]||(pe[9]=createTextVNode("FBX ")),createBaseVNode("input",{type:"file",accept:".fbx",style:{display:"none"},onInput:pe[4]||(pe[4]=_e=>ue("openFBXClick",_e))},null,32)])]),createVNode(_sfc_main$e,{ref_key:"glayoutRootRef",ref:oe,"glc-path":"../",style:{width:"100%",top:"25px",bottom:"0px",position:"absolute"}},null,512),createVNode(OpenTiles,{ref_key:"openTiles",ref:ie},null,512)]))}}),App=_export_sfc(_sfc_main$c,[["__scopeId","data-v-a38497dd"]]),app=createApp(App);app.use(installer);app.mount("#app");const OperationType={Base:"Base",MaterialEdit:"MaterialEdit",ModelEdit:"ModelEdit",Roam:"Roam",Measure:"Measure",Carousel:"Carousel"};class OperationBase{constructor(oe){no(this,"operationType");no(this,"webView");no(this,"selElement");no(this,"_isolateElement",null);no(this,"_lastPoint",{x:0,y:0});no(this,"_isMouseMoved",!1);no(this,"showProperty",oe=>{let ie=[];const ue=[];if(oe&&oe.userData){let de=[];for(let he in oe.userData)if(he!="Parameters"){if(he=="UniqueId"||he=="modelID")continue;let pe=oe.userData[he],_e={name:he,value:pe};_e.name=he,Array.isArray(pe)?_e.value=pe[0]:_e.value=pe,de.push(_e)}if(de.length>0&&(ie.push({name:"",attributes:de}),ue.push("")),oe.userData.Parameters)for(let he of oe.userData.Parameters)ie.push({name:he.GroupName,attributes:he.Parameters}),ue.push(he.GroupName)}WebViewUI.instance.emit("setAttributeData",ie,ue)});this.operationType=OperationType.Base,this.webView=oe}enter(){this.eventListener(!0),this.rePickElement()}quit(){this.eventListener(!1),this.rePickElement()}eventListener(oe){const ie=this.webView.app.canvas;oe?(ie.addEventListener("pointerdown",bindCaller(this,this.onMouseDown)),ie.addEventListener("mousemove",bindCaller(this,this.onMouseMove)),ie.addEventListener("pointerup",bindCaller(this,this.onMouseUp)),ie.addEventListener("contextmenu",bindCaller(this,this.onContextMenu)),ie.addEventListener("dblclick",bindCaller(this,this.onDoubleClick)),WebViewUI.instance.on("treeClickElement",bindCaller(this,this.selTeeClickElement))):(ie.removeEventListener("pointerdown",bindCaller(this,this.onMouseDown)),ie.removeEventListener("mousemove",bindCaller(this,this.onMouseMove)),ie.removeEventListener("pointerup",bindCaller(this,this.onMouseUp)),ie.removeEventListener("contextmenu",bindCaller(this,this.onContextMenu)),ie.removeEventListener("dblclick",bindCaller(this,this.onDoubleClick)),WebViewUI.instance.off("treeClickElement",bindCaller(this,this.selTeeClickElement)))}selTeeClickElement(oe){this.rePickElement();const ie=this.webView.app.getElementByID(oe);ie&&this.pickElement(ie)}onContextMenu(oe){oe.preventDefault(),this._isMouseMoved||this.showContextMenu(oe.clientX,oe.clientY,this.selElement),this._isMouseMoved=!1}onMouseDown(oe){this._lastPoint.x=oe.clientX,this._lastPoint.y=oe.clientY,this._isMouseMoved=!1}onMouseMove(oe){let ie=oe.clientX-this._lastPoint.x,ue=oe.clientY-this._lastPoint.y;(Math.abs(ie)>1||Math.abs(ue)>1)&&(this._isMouseMoved=!0)}onMouseUp(oe){if(oe.button==2||this._isolateElement!=null)return;let ie=oe.clientX-this._lastPoint.x,ue=oe.clientY-this._lastPoint.y;this.rePickElement(),Math.abs(ie)<=1&&Math.abs(ue)<=0&&(this.selElement=this.webView.app.getElementByEvent(oe)),this.selElement?this.pickElement(this.selElement):WebViewUI.instance.emit("pickElement",-1),this._lastPoint.x=-1,this._lastPoint.y=-1}onDoubleClick(oe){this.selElement&&this.fitElement(this.selElement)}pickElement(oe){oe?(this.selElement=oe,this.selElement&&(this.selElement.meshDatas==null||this.selElement.meshDatas.length==0)?this.selElement=null:(this.webView.app.view.selectPass.selectElement(this.selElement.Id),WebViewUI.instance.emit("pickElement",oe.Id)),this.showProperty(oe)):WebViewUI.instance.emit("pickElement",-1)}rePickElement(){this.selElement&&(this.selElement=null),WebViewUI.instance.emit("pickElement",-1),this.webView.app.view.selectPass.selectElement(null),this.webView.app.enableRender(),this.showProperty(null)}fitElement(oe){if(oe){const ie=oe.boundingBox.clone();this.webView.app.view.fitBox(ie)}}showContextMenu(oe,ie,ue){const de=document.getElementById("context-menu");de&&de.parentNode&&de.parentNode.removeChild(de);const he=document.createElement("div");he.id="context-menu",he.style.position="absolute",he.style.left=`${oe}px`,he.style.top=`${ie}px`,he.style.backgroundColor="#3B4453",he.style.color="#dddddd",he.style.boxShadow="0 2px 5px rgba(0,0,0,0.4)",he.style.borderRadius="3px",he.style.padding="4px 0",he.style.zIndex="1000",he.style.minWidth="120px",he.style.fontSize="12px";const pe=[""];ue!=null&&(pe.push(""),pe.push("()"),pe.push("()"),pe.push("")),pe.forEach($e=>{const Ne=document.createElement("div");if(Ne.textContent=$e,Ne.style.padding="6px 12px",Ne.style.cursor="pointer",Ne.style.transition="background-color 0.2s",Ne.addEventListener("mouseover",()=>{Ne.style.backgroundColor="rgba(0,0,0,0.5)"}),Ne.addEventListener("mouseout",()=>{Ne.style.backgroundColor="transparent"}),Ne.addEventListener("click",()=>{this.handleContextMenuOption($e,ue)}),he.appendChild(Ne),$e!==pe[pe.length-1]){const Oe=document.createElement("div");Oe.style.height="1px",Oe.style.backgroundColor="#555555",Oe.style.margin="2px 0",he.appendChild(Oe)}}),document.body.appendChild(he);const _e=window.innerWidth,Ce=window.innerHeight,xe=he.getBoundingClientRect();oe+xe.width>_e&&(he.style.left=`${_e-xe.width-5}px`),ie+xe.height>Ce&&(he.style.top=`${Ce-xe.height-5}px`);const Ie=$e=>{const Ne=document.getElementById("context-menu");Ne&&!Ne.contains($e.target)&&(Ne.parentNode&&Ne.parentNode.removeChild(Ne),document.removeEventListener("click",Ie))};requestAnimationFrame(()=>{document.addEventListener("click",Ie)})}handleContextMenuOption(oe,ie){const ue=document.getElementById("context-menu");switch(ue&&ue.parentNode&&ue.parentNode.removeChild(ue),oe){case"":this.fitElement(ie);break;case"":this.hideElement(ie);break;case"":this.showAllElement();break;case"()":this.isolateElement(ie,!1);break;case"()":this.isolateElement(ie,!0);break}}isolateElement(oe,ie){this.rePickElement(),this._isolateElement=oe,this.showProperty(oe);for(const ue of this.webView.app.allDocuments)for(const de of ue.getAllElements())de!=oe&&(ie?de.visible=!1:de.color="#ffffff20")}showAllElement(){for(const oe of this.webView.app.allDocuments)for(const ie of oe.getAllElements())ie.visible=!0,this._isolateElement!=null&&(ie.color=null);this._isolateElement=null}hideElement(oe){oe&&(oe.visible=!1)}}class MeasureOperation extends OperationBase{constructor(ie){super(ie);no(this,"_tempRulers");no(this,"_startPoint");this.operationType=OperationType.Measure,this._tempRulers=[],this._startPoint=null}eventListener(ie){const ue=this.webView.app.canvas;ie?(ue.addEventListener("pointerdown",bindCaller(this,this.onMouseDown)),ue.addEventListener("pointerup",bindCaller(this,this.onMouseUp)),ue.addEventListener("mousemove",bindCaller(this,this.onMouseMove)),WebViewUI.instance.on("treeClickElement",bindCaller(this,this.selTeeClickElement))):(ue.removeEventListener("pointerdown",bindCaller(this,this.onMouseDown)),ue.removeEventListener("pointerup",bindCaller(this,this.onMouseUp)),ue.removeEventListener("mousemove",bindCaller(this,this.onMouseMove)),WebViewUI.instance.on("treeClickElement",bindCaller(this,this.selTeeClickElement)))}enter(){super.enter(),this.rePickElement()}quit(){super.quit(),this.rePickElement(),this.clearRuler()}onMouseUp(ie){if(ie.button==2)return;let ue=ie.clientX-this._lastPoint.x,de=ie.clientY-this._lastPoint.y;if(Math.abs(ue)<=1&&Math.abs(de)<=0)if(this._startPoint==null){let he=this.webView.app.view.raycaster.getIntersectMesh(ie);if(he){let pe=new Ruler(this.webView.app.view);pe.edit=!1,this._tempRulers.push(pe),this._startPoint=he.intersectPoint}}else this.onMouseMove(ie),this._startPoint=null;this._lastPoint.x=-1,this._lastPoint.y=-1}onMouseMove(ie){if(super.onMouseMove(ie),this._startPoint!=null){let ue=this.webView.app.view.raycaster.getIntersectMesh(ie);if(ue){let de=this._tempRulers[this._tempRulers.length-1];de&&de.showRuler(this._startPoint,ue.intersectPoint)}}}onKeyDown(ie){(ie.code==="Escape"||ie.keyCode===27)&&this.clearRuler()}onContextMenu(ie){}clearRuler(){for(const ie of this._tempRulers)ie.dispose();this._tempRulers=[]}}class CarouselOperation extends OperationBase{constructor(oe){super(oe),this.operationType=OperationType.Carousel}enter(){}quit(){}}class MaterialEditOperation extends OperationBase{constructor(ie){super(ie);no(this,"selMeshData");no(this,"cachedCanvas");no(this,"processTexture",ie=>{if(ie==null||ie.image==null)return"no.png";const ue=this.cachedCanvas=this.cachedCanvas||document.createElement("canvas");return ue.width=32,ue.height=32,ue.getContext("2d").drawImage(ie.image,0,0,ue.width,ue.height),ue.toDataURL(ie.userData.mimeType)});this.operationType=OperationType.Carousel}enter(){super.enter(),this.showEnvironmentData(),this.webView.app.view.viewCube.show=!1,WebViewUI.instance.on("EnvironmentChange",bindCaller(this,this.setEnvironmentChange)),WebViewUI.instance.on("MaterialChange",bindCaller(this,this.setMaterialChange))}eventListener(ie){const ue=this.webView.app.canvas;ie?(ue.addEventListener("pointerdown",bindCaller(this,this.onMouseDown)),ue.addEventListener("mousemove",bindCaller(this,this.onMouseMove)),ue.addEventListener("pointerup",bindCaller(this,this.onMouseUp))):(ue.removeEventListener("pointerdown",bindCaller(this,this.onMouseDown)),ue.removeEventListener("mousemove",bindCaller(this,this.onMouseMove)),ue.removeEventListener("pointerup",bindCaller(this,this.onMouseUp)))}quit(){super.quit(),this.reset(),this.webView.app.view.viewCube.show=!0,WebViewUI.instance.off("EnvironmentChange",bindCaller(this,this.setEnvironmentChange)),WebViewUI.instance.off("MaterialChange",bindCaller(this,this.setMaterialChange))}showEnvironmentData(){var he,pe;const ie=this.webView.app,ue=ie.view,de={ambientLightColor:"#"+ue.ambientLight.color.getHexString(),ambientLightIntensity:ue.ambientLight.intensity,directionalLightColor:"#"+ue.directionalLight.color.getHexString(),directionalLightIntensity:ue.directionalLight.intensity,showBackground:ue.showBackground,showEnvironment:ue.showEnvironment,envPower:ie.getEmviormentParameter("envPower"),aoPower:ie.getEmviormentParameter("aoPower"),aoSmoothing:ie.getEmviormentParameter("aoSmoothing"),radianceIntensity:ie.getEmviormentParameter("radianceIntensity"),previewPath:(pe=(he=ue.scene.environment)==null?void 0:he.userData)==null?void 0:pe.previewPath,sunIntensity:ie.getEmviormentParameter("sunIntensity"),smoothingPower:ie.getEmviormentParameter("smoothingPower")};WebViewUI.instance.emit("showEnvironmentData",de)}setEnvironmentChange(ie,...ue){const de=this.webView.app,he=de.view;if(ie==="setEmviormentParameter")de.setEmviormentParameter(ue[0],ue[1]);else if(ie==="showEnvironmentChange")he.showEnvironment=ue[0];else if(ie==="showBackgroundChange")he.showBackground=ue[0];else if(ie==="ambientLightChange")he.ambientLight.color.set(ue[0]);else if(ie==="ambientLightIntensityInput")he.ambientLight.intensity=ue[0];else if(ie==="directionalLightChange")he.directionalLight.color.set(ue[0]);else if(ie==="directionalLightIntensityInput")he.directionalLight.intensity=ue[0];else if(ie==="changeHDR"){const pe=ue[0];ElMessage({message:"hdr",duration:1e3}),he.initEnvironment(pe.hdrUrl,{id:pe.id,previewPath:pe.previewUrl}).then(()=>{this.showEnvironmentData(),ElMessage({message:"",type:"success",duration:1e3})})}else if(ie==="MaterialLibDragend"){const pe=ue[0];if(this.selMeshData=he.raycaster.getIntersectMesh(event),this.selMeshData){let _e=()=>{de.enableRender(),WebViewUI.instance.materialComponentRef.value.dialogVisible&&this.showMaterialData(this.selMeshData)};MateriaUtils.changePBRMaterial(this.selMeshData.mesh,pe,_e)}}de.enableRender()}setMaterialChange(ie,...ue){const de=this.webView.app;if(this.selMeshData){const he=this.selMeshData.mesh.material;if(ie==="changeMap"){const pe=()=>{de.enableRender()};MateriaUtils.changeMaterialMap(this.selMeshData.mesh,ue[0],ue[1],pe)}else ie==="changeBaseColor"?MateriaUtils.changeBaseColor(ue[0],he):ie==="alphaInput"?MateriaUtils.changeAlpha(ue[0],he):ie==="baseNumber"?he[ue[0]]=ue[1]:ie==="normalMapInput"?MateriaUtils.changeNormalScale(ue[0],he):ie==="changeScale"?MateriaUtils.changeScale(ue[0],ue[1],he,ue[2]):ie==="changeRotate"?MateriaUtils.changeRotate(ue[0],he):ie==="changeOffset"&&MateriaUtils.changeOffset(ue[0],ue[1],he,ue[2]);he.needsUpdate=!0,de.enableRender()}}onMouseUp(ie){if(ie.button==2)return;const ue=ie.clientX-this._lastPoint.x,de=ie.clientY-this._lastPoint.y;if(Math.abs(ue)<=1&&Math.abs(de)<=0){const he=this.webView.app.view.raycaster.getIntersectMesh(ie);this.selMeshData=he,this.showMaterialData(he)}this.selMeshData?this.webView.app.view.selectPass.selectObjects([this.selMeshData.mesh]):this.webView.app.view.selectPass.selectObjects(null),this._lastPoint.x=-1,this._lastPoint.y=-1}reset(){WebViewUI.instance.materialComponentRef.value.dialogVisible=!1,this.webView.app.view.selectPass.selectObjects(null)}onKeyDown(ie){(ie.code==="Escape"||ie.keyCode===27)&&this.reset()}onContextMenu(ie){}showMaterialData(ie){if(ie){WebViewUI.instance.materialComponentRef.value.dialogVisible=!0;let ue=ie.mesh.material,de=null;ue.map&&(de={repeat:{x:ue.map.repeat.x,y:ue.map.repeat.y},rotation:ue.map.rotation*180/Math.PI,offset:{x:ue.map.offset.x,y:ue.map.offset.y}});const he={map:this.processTexture(ue.map),alpha:ue.transparent?ue.opacity:1,roughness:ue.roughness,roughnessMap:this.processTexture(ue.roughnessMap),metalness:ue.metalness,metalnessMap:this.processTexture(ue.metalnessMap),normalMap:this.processTexture(ue.normalMap),aoMap:this.processTexture(ue.aoMap),aoMapIntensity:ue.aoMapIntensity,displacementMap:this.processTexture(ue.displacementMap),normalScale:ue.normalScale.x,transform:de,baseColor:"#"+ue.color.getHexString(),name:ue.name};WebViewUI.instance.materialComponentRef.value.showMaterialData(he),this.webView.app.view.selectPass.selectObjects([ie.mesh])}else this.reset()}}class RoamOperation extends OperationBase{constructor(ie){super(ie);no(this,"_oldfar");no(this,"_oldfov");no(this,"keyDownEvents");no(this,"point");no(this,"curTarget");no(this,"firstPersonSpeed",.005);no(this,"collision",!1);no(this,"_gravity",!1);no(this,"_gravityIng",!1);no(this,"pathAnimation");this.operationType=OperationType.Roam}enter(){super.enter(),this.rePickElement(),this.setFirstPerson(!0),this._oldfar=this.webView.app.view.camera.far,this._oldfov=this.webView.app.view.camera.fov,this.webView.app.view.camera.far=1e4,this.webView.app.on("onBeforeRender",bindCaller(this,this.onBeforeRender)),WebViewUI.instance.on("updateRoamSettings",bindCaller(this,this.updateRoamSettings))}quit(){this.webView.app.view.camera.far=this._oldfar,this._oldfov!==this.webView.app.view.camera.fov&&(this.webView.app.view.camera.fov=this._oldfov,this.webView.app.view.raycaster.getDepthByGPU(null,0)),super.quit(),this.rePickElement(),this.setFirstPerson(!1),this.webView.app.off("onBeforeRender",bindCaller(this,this.onBeforeRender))}updateRoamSettings(ie){this.firstPersonSpeed=ie.roamSpeed/1e3,this._gravity!=ie.gravity&&this.setGravity(ie.gravity),this.collision=ie.collision,ie.fov!==this.webView.app.view.camera.fov&&(this.webView.app.view.camera.fov=ie.fov,this.webView.app.view.raycaster.getDepthByGPU(null,0),this.webView.app.enableRender())}setGravity(ie){ie?(this.keyDownEvents.get("KeyE").removeEventListener("holding",bindCaller(this,this.onKeyDown)),this.keyDownEvents.get("KeyQ").removeEventListener("holding",bindCaller(this,this.onKeyDown))):(this.keyDownEvents.get("KeyE").addEventListener("holding",bindCaller(this,this.onKeyDown)),this.keyDownEvents.get("KeyQ").addEventListener("holding",bindCaller(this,this.onKeyDown))),this.gravity(ie)}onBeforeRender(){!this._gravityIng&&this._gravity&&this.gravity(!0)}setFirstPerson(ie=!0){let ue=this.webView.app.view.controls;if(ie){if(this.keyDownEvents==null){let he=16.666;this.keyDownEvents=new Map,this.keyDownEvents.set("KeyW",new KeyboardKeyHold("KeyW",he)),this.keyDownEvents.set("KeyA",new KeyboardKeyHold("KeyA",he)),this.keyDownEvents.set("KeyS",new KeyboardKeyHold("KeyS",he)),this.keyDownEvents.set("KeyD",new KeyboardKeyHold("KeyD",he)),this.keyDownEvents.set("KeyQ",new KeyboardKeyHold("KeyQ",he)),this.keyDownEvents.set("KeyE",new KeyboardKeyHold("KeyE",he))}this.point==null&&(this.point=document.createElement("div"),this.point.style.position="absolute",this.point.style.background="#ff0000",this.point.style.top="50%",this.point.style.left="50%",this.point.style.width="10px",this.point.style.height="10px",this.point.style.border="2px",this.point.style.borderRadius="5px"),this.webView.app.view.goldenContainer.appendChild(this.point),ue.minDistance=ue.maxDistance=1e-6,ue.azimuthRotateSpeed=-.3,ue.polarRotateSpeed=-.3,ue.truckSpeed=10,ue.mouseButtons.wheel=CameraControls.ACTION.NONE,ue.mouseButtons.right=CameraControls.ACTION.ROTATE,ue.mouseButtons.left=CameraControls.ACTION.ROTATE,this.curTarget=ue.curTarget.clone();const de=this.webView.app.view.camera.position;ue.setOrbitPoint(de.x,de.y,de.z),ue.update();for(const he of this.keyDownEvents.values())he.addEventListener("holding",bindCaller(this,this.onKeyDown))}else{ue.minDistance=0,ue.maxDistance=1/0,ue.azimuthRotateSpeed=1,ue.polarRotateSpeed=1,ue.truckSpeed=2,ue.mouseButtons.wheel=CameraControls.ACTION.DOLLY,ue.mouseButtons.right=CameraControls.ACTION.ROTATE,ue.mouseButtons.left=CameraControls.ACTION.OFFSET,ue.setOrbitPoint(this.curTarget.x,this.curTarget.y,this.curTarget.z),ue.update();for(const de of this.keyDownEvents.values())de.removeEventListener("holding",bindCaller(this,this.onKeyDown));this.point&&this.webView.app.view.goldenContainer.removeChild(this.point)}}onKeyDown(ie){let ue=ie.deltaTime,de=ie.originalEvent.code;const he=this.firstPersonSpeed,pe=this.webView.app.view.raycaster,_e=this.webView.app.view.controls;switch(de){case"KeyA":if(this.collision){let Ce=pe.getDepthByGPU(_e.azimuthAngle+Math.PI/2,Math.PI/2);if(Ce!=-1&&Ce<=.5)return}_e.truck(-he*ue,0,!1);break;case"KeyD":if(this.collision){let Ce=pe.getDepthByGPU(_e.azimuthAngle-Math.PI/2,Math.PI/2);if(Ce!=-1&&Ce<=.5)return}_e.truck(he*ue,0,!1);break;case"KeyW":if(this.collision){let Ce=pe.getDepthByGPU(null,Math.PI/2);if(Ce!=-1&&Ce<=.6)return}_e.forward(he*ue,!1);break;case"KeyS":if(this.collision){let Ce=pe.getDepthByGPU(_e.azimuthAngle+Math.PI,Math.PI/2);if(Ce!=-1&&Ce<=.6)return}_e.forward(-he*ue,!1);break;case"KeyQ":_e.elevate(he*ue,!1);break;case"KeyE":_e.elevate(-he*ue,!1);break}_e.update(),this.webView.app.enableRender()}gravity(ie){if(this._gravity=ie,this._gravityIng||!this._gravity)return;let ue=this.webView.app.view.raycaster.getDepthByGPU(null,0);if(ue>1){let de=ue-1.7;if(Math.abs(de)<.001)return;let he=9.8,pe=Math.sqrt(2*Math.abs(de)/he);const _e=this.webView.app.view.controls,Ce={value:0},xe=this.webView.app,Ie=this;let $e=0;if(de<.5){_e.elevate(-de,!1),_e.update(),xe.enableRender();return}this.pathAnimation&&this.pathAnimation.kill(),this.pathAnimation=AppGsap.fromTo(Ce,{value:0},{value:pe,duration:pe,overwrite:!0,paused:!0,ease:"none",onUpdateParams:[Ce],onUpdate({value:Ne}){if(!this.isActive())return;let Oe=Ne;Ne=1/2*he*Oe*Oe;let Fe=-(Ne-$e);Fe!=0&&(_e.elevate(Fe,!1),_e.update(),xe.enableRender(),$e=Ne)},onStart(){Ie._gravityIng=!0,_e.enabled=!1},onComplete(){Ie._gravityIng=!1,_e.enabled=!0}}),this.pathAnimation.play(0)}}}class WebView extends EventEmitter{constructor(ie){super();no(this,"_app");no(this,"_container");no(this,"_allOperation");no(this,"_currentOperation");no(this,"_dwgWorker");this._container=ie;const ue={container:ie,backgroundColor:2172976};this._app=new AppContext(ue)}get app(){return this._app}get container(){return this._container}init(){this.initOperation(),this.initModel(),WebViewUI.instance.on("openGLTFClick",this.loadGLTFModel.bind(this)),WebViewUI.instance.on("openCADClick",this.loadCADModel.bind(this)),WebViewUI.instance.on("openTilesClick",this.loadTileModel.bind(this)),WebViewUI.instance.on("openIFCClick",this.loadIFCModel.bind(this)),WebViewUI.instance.on("openRhinoClick",this.loadRhionModel.bind(this)),WebViewUI.instance.on("openFBXClick",this.loadFBXModel.bind(this))}initModel(){let ie=new URLSearchParams(window.location.search||window.location.hash.substr(1));if(ie.has("model"))switch(ie.get("model")){case"1":this.loadGLTFModel("./glb/1.glb","rac_basic_sample_project");break;case"2":this.loadIFCModel("./ifc/Residential_Sample_Project.ifc","Residential_Sample_Project");break;case"3":this.loadDxfModel("./cad/rac_advanced_sample_project.dxf","test");break;case"4":this.loadTileModel("./3dtiles/tileset.json");break;case"5":this.loadRhionModel("./3dm/v5_dril.3dm","v5_dril");break;case"6":this.loadFBXModel("./fbx/GenericHMD.fbx","GenericHMD");break}}initOperation(){this._allOperation=new Map;const ie=new OperationBase(this);this._currentOperation=ie,this._allOperation.set(OperationType.Base,ie),ie.enter()}async loadCADModel(ie,ue){const de=ue.slice(ue.lastIndexOf(".")+1).split("?")[0].toLowerCase();return de==="dxf"?this.loadDxfModel(ie,ue):de==="dwg"?this.loadDWGModel(ie,ue):null}async loadDxfModel(ie,ue){this.onBeforeLoad();const de=ElLoading.service({text:"..."}),he={url:ie,format:ModelFormat.DXF,fontsUrls:["./fonts/simfang.ttf"],name:ue};return this._app.view.isView2D=!0,WebViewUI.instance.toolbarRef.value.is3DView=!1,this._app.loadModel(he).then(_e=>{const Ce=[],xe={id:0,name:"",children:Ce},Ie=_e.getAllLayer(),$e=[];for(const Ne of Ie){let Oe={id:Ne.Id,name:Ne.name,color:Ne.color};Ce.push(Oe),Ne.visible&&$e.push(Ne.Id)}WebViewUI.instance.emit("setTreeData",[xe],$e)}).catch(()=>{ElMessage.error(ue+"")}).finally(()=>{de.close()})}async loadDWGModel(ie,ue){return new Promise((de,he)=>{const pe=ElLoading.service({text:"dxg"});this._dwgWorker==null&&(this._dwgWorker=new Worker("lib/dwgApi/dwg2dxf.js")),this._dwgWorker.postMessage(ie),this._dwgWorker.onmessage=_e=>{if(URL.revokeObjectURL(ie),_e.data.status==0){const Ce=_e.data.url;pe.close(),this.loadDxfModel(Ce,ue).then(xe=>{de(xe)})}else he(_e.data.dxfData),pe.close(),ElMessage.error(ue+"")}})}async loadGLTFModel(ie,ue){const de={url:ie,format:ModelFormat.GLTF,dcoderPath:"./lib/draco/",name:ue};return this.loadCfg(de)}async loadRhionModel(ie,ue){const de={url:ie,format:ModelFormat.RHION,rhionPath:"./lib/rhino3dm/",name:ue};return this.loadCfg(de)}async loadFBXModel(ie,ue){const de={url:ie,format:ModelFormat.FBX,name:ue};return this.loadCfg(de)}loadCfg(ie){this._app.view.isView2D=!1,this.onBeforeLoad();const ue=ElLoading.service({text:""});WebViewUI.instance.toolbarRef.value.is3DView=!0;const de=this._app.loadModel(ie,he=>{const pe=Math.round(he.loaded/he.total*100);pe>=100?ue.setText("..."):ue.setText(" "+pe+"%")});return de.then(he=>{this.init3DModel(he)}).catch(()=>{ElMessage.error(name+"")}).finally(()=>{ue.close(),URL.revokeObjectURL(ie.url)}),de}async loadTileModel(ie){this.onBeforeLoad();const ue={url:ie,format:ModelFormat.TILES,dcoderPath:"./lib/draco/"};this._app.view.showMap=!0,this._app.view.isView2D=!1,WebViewUI.instance.toolbarRef.value.is3DView=!0,WebViewUI.instance.toolbarRef.value.isShowMapRef=!0;const de=this._app.loadModel(ue);return de.then(he=>{this.init3DModel(he)}).catch(()=>{ElMessage.error("")}),de}async loadIFCModel(ie,ue){this.onBeforeLoad();const de={url:ie,format:ModelFormat.IFC,webIFCPath:"./lib/web-ifc/",name:ue},he=ElLoading.service({text:""});this._app.view.showMap=!1,this._app.view.isView2D=!1,WebViewUI.instance.toolbarRef.value.is3DView=!0;const pe=this._app.loadModel(de);return pe.then(_e=>{he.close(),this.init3DModel(_e),URL.revokeObjectURL(ie)}).catch(()=>{URL.revokeObjectURL(ie),ElMessage.error(ue+"")}),pe}onBeforeLoad(){this.app.activeDocument&&this._app.closeModel(this.app.activeDocument),WebViewUI.instance.toolbarRef.value.isShowMapRef=!1,this._app.view.showMap=!1,WebViewUI.instance.emit("setTreeData",[],[]),WebViewUI.instance.emit("setAttributeData",[],[])}init3DModel(ie){let ue=(he,pe)=>{pe(he.id),he.children&&he.children.forEach(_e=>ue(_e,pe))};const de=[];ue(ie.modelTree,he=>{de.push(he)}),WebViewUI.instance.emit("setTreeData",[ie.modelTree],de)}closeModel(ie){this._app.closeModel(ie)}runCommand(ie){let ue=this._allOperation.get(ie);if(ue==null)switch(ie){case OperationType.Measure:ue=new MeasureOperation(this),this._allOperation.set(OperationType.Measure,ue);break;case OperationType.Carousel:ue=new CarouselOperation(this),this._allOperation.set(OperationType.Carousel,ue);break;case OperationType.Roam:ue=new RoamOperation(this),this._allOperation.set(OperationType.Roam,ue);break;case OperationType.MaterialEdit:ue=new MaterialEditOperation(this),this._allOperation.set(OperationType.MaterialEdit,ue);break}ue&&(this._currentOperation.quit(),this._currentOperation=ue,ue.enter(),this.app.enableRender())}}const _hoisted_1$a={class:"text"},_sfc_main$b={__name:"ImageButtonCheckbox",props:{iconComponent:{type:[String,Object],required:!0},text:{type:String,required:!0},modelValue:{type:Boolean,default:!1},isCheckbox:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","click"],setup(le,{emit:oe}){const ie=le,ue=oe,de=ref(ie.modelValue);watch(()=>ie.modelValue,pe=>{de.value=pe});const he=()=>{ie.disabled||(ie.isCheckbox&&(de.value=!de.value,ue("update:modelValue",de.value)),ue("click"))};return(pe,_e)=>{const Ce=ElIcon;return openBlock(),createElementBlock("div",{class:normalizeClass(["image-button-checkbox",{active:le.isCheckbox&&de.value,disabled:le.disabled}]),onClick:he},[createVNode(Ce,{size:16,class:"icon"},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(le.iconComponent)))]),_:1}),createBaseVNode("span",_hoisted_1$a,toDisplayString(le.text),1)],2)}}},ImageButtonCheckbox=_export_sfc(_sfc_main$b,[["__scopeId","data-v-6fec4127"]]),ImageButtonCheckbox$1=Object.freeze(Object.defineProperty({__proto__:null,default:ImageButtonCheckbox},Symbol.toStringTag,{value:"Module"})),_hoisted_1$9={class:"toolbar"},_hoisted_2$9={key:0,class:"map-inputs"},_hoisted_3$6={key:1,class:"slider-demo-block"},_hoisted_4$4={class:"toolbar-buttons"},_sfc_main$a=defineComponent({__name:"Toolbar",setup(__props,{expose:__expose}){const Carousel=defineAsyncComponent(()=>__vitePreload(()=>Promise.resolve().then(()=>Carousel$1),void 0,import.meta.url)),isFullScreenRef=ref(!1),isFullScreen=()=>{isFullScreenRef.value?document.documentElement.requestFullscreen():document.exitFullscreen()},isOrthogonalRef=ref(!1),isOrthogonal=()=>{WebViewUI.instance.emit("isOrthogonal",isOrthogonalRef.value)},isSectionRef=ref(!1),isSection=()=>{WebViewUI.instance.emit("isSection",isSectionRef.value)},isExplosionRef=ref(!1),explosionValue=ref(0),isExplosion=()=>{},resetExplosion=()=>{explosionValue.value=0,refreshExplosion()},refreshExplosion=()=>{WebViewUI.instance.emit("setExplosion",explosionValue.value)},isShowMapRef=ref(!1),isShowMap=()=>{WebViewUI.instance.emit("isShowMap",isShowMapRef.value)},longitude=ref(""),latitude=ref(""),altitude=ref(""),angle=ref(""),previousValues=reactive({longitude:"",latitude:"",altitude:"",angle:""}),onInputBlur=field=>{previousValues[field]!==eval(field).value&&(previousValues[field]=eval(field).value,emitGisChanged())},emitGisChanged=()=>{WebViewUI.instance.emit("gisChanged",{latitude:Number(latitude.value),longitude:Number(longitude.value),height:Number(altitude.value),rotation:Number(angle.value)})};onMounted(()=>{WebViewUI.instance.on("setGisData",le=>{longitude.value=le.longitude,latitude.value=le.latitude,altitude.value=le.height,angle.value=le.rotation,Object.assign(previousValues,{longitude:le.longitude,latitude:le.latitude,altitude:le.height,angle:le.rotation})})});const isMeasureRef=ref(!1),isMeasure=()=>{isMeasureRef.value?(isCaptureRef.value=!1,isRoamRef.value=!1,isMaterialEditRef.value=!1,WebViewUI.instance.emit("changeOperation",OperationType.Measure)):WebViewUI.instance.emit("changeOperation",OperationType.Base)},isCaptureRef=ref(!1),isCapture=()=>{isCaptureRef.value?(isMeasureRef.value=!1,isRoamRef.value=!1,isMaterialEditRef.value=!1,WebViewUI.instance.emit("changeOperation",OperationType.Carousel)):WebViewUI.instance.emit("changeOperation",OperationType.Base)},isRoamRef=ref(!1),isRoam=()=>{isRoamRef.value?(isMeasureRef.value=!1,isCaptureRef.value=!1,isMaterialEditRef.value=!1,WebViewUI.instance.emit("changeOperation",OperationType.Roam)):WebViewUI.instance.emit("changeOperation",OperationType.Base)},isMaterialEditRef=ref(!1),isMaterialEdit=()=>{isMaterialEditRef.value?(isMeasureRef.value=!1,isCaptureRef.value=!1,isRoamRef.value=!1,WebViewUI.instance.emit("changeOperation",OperationType.MaterialEdit)):WebViewUI.instance.emit("changeOperation",OperationType.Base)},is3DView=ref(!0);return __expose({isRoamRef,is3DView,isMaterialEditRef,isShowMapRef}),(le,oe)=>{const ie=ElInput,ue=ElSlider,de=ElIcon,he=ElButton;return openBlock(),createElementBlock("div",_hoisted_1$9,[withDirectives(createVNode(unref(Carousel),{style:{width:"100%"}},null,512),[[vShow,isCaptureRef.value]]),isShowMapRef.value?(openBlock(),createElementBlock("div",_hoisted_2$9,[createVNode(ie,{modelValue:longitude.value,"onUpdate:modelValue":oe[0]||(oe[0]=pe=>longitude.value=pe),placeholder:"",size:"small",onBlur:oe[1]||(oe[1]=pe=>onInputBlur("longitude"))},{prepend:withCtx(()=>oe[21]||(oe[21]=[createTextVNode("")])),_:1},8,["modelValue"]),createVNode(ie,{modelValue:latitude.value,"onUpdate:modelValue":oe[2]||(oe[2]=pe=>latitude.value=pe),placeholder:"",size:"small",onBlur:oe[3]||(oe[3]=pe=>onInputBlur("latitude"))},{prepend:withCtx(()=>oe[22]||(oe[22]=[createTextVNode("")])),_:1},8,["modelValue"]),createVNode(ie,{modelValue:altitude.value,"onUpdate:modelValue":oe[4]||(oe[4]=pe=>altitude.value=pe),placeholder:"",size:"small",onBlur:oe[5]||(oe[5]=pe=>onInputBlur("altitude"))},{prepend:withCtx(()=>oe[23]||(oe[23]=[createTextVNode("")])),_:1},8,["modelValue"]),createVNode(ie,{modelValue:angle.value,"onUpdate:modelValue":oe[6]||(oe[6]=pe=>angle.value=pe),placeholder:"",size:"small",onBlur:oe[7]||(oe[7]=pe=>onInputBlur("angle"))},{prepend:withCtx(()=>oe[24]||(oe[24]=[createTextVNode("")])),_:1},8,["modelValue"])])):createCommentVNode("",!0),isExplosionRef.value?(openBlock(),createElementBlock("div",_hoisted_3$6,[oe[25]||(oe[25]=createBaseVNode("span",{class:"demonstration"},"",-1)),createVNode(ue,{modelValue:explosionValue.value,"onUpdate:modelValue":oe[8]||(oe[8]=pe=>explosionValue.value=pe),onInput:refreshExplosion},null,8,["modelValue"]),createVNode(he,{text:"",onClick:resetExplosion},{default:withCtx(()=>[createVNode(de,null,{default:withCtx(()=>[createVNode(unref(refresh_default))]),_:1})]),_:1})])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_4$4,[createVNode(ImageButtonCheckbox,{iconComponent:unref(house_default),onClick:oe[9]||(oe[9]=pe=>unref(WebViewUI).instance.emit("goHome")),text:""},null,8,["iconComponent"]),createVNode(ImageButtonCheckbox,{modelValue:isFullScreenRef.value,"onUpdate:modelValue":oe[10]||(oe[10]=pe=>isFullScreenRef.value=pe),onClick:isFullScreen,iconComponent:unref(full_screen_default),text:"",isCheckbox:""},null,8,["modelValue","iconComponent"]),is3DView.value?(openBlock(),createBlock(ImageButtonCheckbox,{key:0,modelValue:isOrthogonalRef.value,"onUpdate:modelValue":oe[11]||(oe[11]=pe=>isOrthogonalRef.value=pe),onClick:isOrthogonal,iconComponent:unref(camera_default),text:"",isCheckbox:""},null,8,["modelValue","iconComponent"])):createCommentVNode("",!0),is3DView.value?(openBlock(),createBlock(ImageButtonCheckbox,{key:1,modelValue:isSectionRef.value,"onUpdate:modelValue":oe[12]||(oe[12]=pe=>isSectionRef.value=pe),onClick:isSection,iconComponent:unref(crop_default),text:"",isCheckbox:""},null,8,["modelValue","iconComponent"])):createCommentVNode("",!0),is3DView.value?(openBlock(),createBlock(ImageButtonCheckbox,{key:2,modelValue:isExplosionRef.value,"onUpdate:modelValue":oe[13]||(oe[13]=pe=>isExplosionRef.value=pe),onClick:isExplosion,iconComponent:unref(loading_default),text:"",isCheckbox:""},null,8,["modelValue","iconComponent"])):createCommentVNode("",!0),is3DView.value?(openBlock(),createBlock(ImageButtonCheckbox,{key:3,disabled:isExplosionRef.value,modelValue:isMeasureRef.value,"onUpdate:modelValue":oe[14]||(oe[14]=pe=>isMeasureRef.value=pe),onClick:isMeasure,iconComponent:unref(edit_pen_default),text:"",isCheckbox:""},null,8,["disabled","modelValue","iconComponent"])):createCommentVNode("",!0),is3DView.value?(openBlock(),createBlock(ImageButtonCheckbox,{key:4,modelValue:isRoamRef.value,"onUpdate:modelValue":oe[15]||(oe[15]=pe=>isRoamRef.value=pe),onClick:isRoam,iconComponent:unref(user_filled_default),text:"",isCheckbox:""},null,8,["modelValue","iconComponent"])):createCommentVNode("",!0),is3DView.value?(openBlock(),createBlock(ImageButtonCheckbox,{key:5,modelValue:isCaptureRef.value,"onUpdate:modelValue":oe[16]||(oe[16]=pe=>isCaptureRef.value=pe),onClick:isCapture,iconComponent:unref(video_camera_default),text:"",isCheckbox:""},null,8,["modelValue","iconComponent"])):createCommentVNode("",!0),is3DView.value?(openBlock(),createBlock(ImageButtonCheckbox,{key:6,modelValue:isMaterialEditRef.value,"onUpdate:modelValue":oe[17]||(oe[17]=pe=>isMaterialEditRef.value=pe),onClick:isMaterialEdit,iconComponent:unref(edit_default),text:"",isCheckbox:""},null,8,["modelValue","iconComponent"])):createCommentVNode("",!0),is3DView.value?(openBlock(),createBlock(ImageButtonCheckbox,{key:7,modelValue:isShowMapRef.value,"onUpdate:modelValue":oe[18]||(oe[18]=pe=>isShowMapRef.value=pe),onClick:isShowMap,iconComponent:unref(map_location_default),text:"",isCheckbox:""},null,8,["modelValue","iconComponent"])):createCommentVNode("",!0),is3DView.value?createCommentVNode("",!0):(openBlock(),createBlock(ImageButtonCheckbox,{key:8,iconComponent:unref(document_default),onClick:oe[19]||(oe[19]=pe=>unref(WebViewUI).instance.emit("exportSVG")),text:"svg"},null,8,["iconComponent"])),is3DView.value?createCommentVNode("",!0):(openBlock(),createBlock(ImageButtonCheckbox,{key:9,iconComponent:unref(printer_default),onClick:oe[20]||(oe[20]=pe=>unref(WebViewUI).instance.emit("exportPDF")),text:"pdf"},null,8,["iconComponent"]))])])}}}),Toolbar=_export_sfc(_sfc_main$a,[["__scopeId","data-v-78bdb7f6"]]),Toolbar$1=Object.freeze(Object.defineProperty({__proto__:null,default:Toolbar},Symbol.toStringTag,{value:"Module"})),_sfc_main$9=defineComponent({__name:"View",setup(le){const oe=ref(),ie=defineAsyncComponent(()=>__vitePreload(()=>Promise.resolve().then(()=>RoamControls$1),void 0,import.meta.url)),ue=ref(),de=defineAsyncComponent(()=>__vitePreload(()=>Promise.resolve().then(()=>MaterialEditMenu),void 0,import.meta.url)),he=defineAsyncComponent(()=>__vitePreload(()=>Promise.resolve().then(()=>MaterialComponentUI$1),void 0,import.meta.url)),pe=ref();ref(!1),onMounted(()=>{if(oe.value){WebViewUI.instance.toolbarRef=ue,WebViewUI.instance.materialComponentRef=pe;const Ce=new WebView(oe.value);Ce.init(),window.webView=Ce,WebViewUI.instance.webView=Ce}});const _e=(Ce,xe)=>{xe?Ce.stopPropagation():Ce.preventDefault()};return(Ce,xe)=>{var Ie,$e;return openBlock(),createElementBlock("div",{class:"container",ref_key:"containerRef",ref:oe,tabindex:"1",onDragover:xe[3]||(xe[3]=Ne=>_e(Ne,!1)),"element-loading-text":"..."},[(Ie=ue.value)!=null&&Ie.isRoamRef?(openBlock(),createBlock(unref(ie),{key:0,class:"roam-controls-wrapper"})):createCommentVNode("",!0),createVNode(Toolbar,{ref_key:"toolbarRef",ref:ue,onDragover:xe[0]||(xe[0]=Ne=>_e(Ne,!0))},null,512),($e=ue.value)!=null&&$e.isMaterialEditRef?(openBlock(),createBlock(unref(de),{key:1,onDragover:xe[1]||(xe[1]=Ne=>_e(Ne,!0))})):createCommentVNode("",!0),createVNode(unref(he),{ref_key:"materialComponentRef",ref:pe,onDragover:xe[2]||(xe[2]=Ne=>_e(Ne,!0))},null,512)],544)}}}),View=_export_sfc(_sfc_main$9,[["__scopeId","data-v-62884c39"]]),View$1=Object.freeze(Object.defineProperty({__proto__:null,default:View},Symbol.toStringTag,{value:"Module"})),_hoisted_1$8={class:"attributeView"},_hoisted_2$8={class:"gridtable"},_sfc_main$8=defineComponent({__name:"AttributeView",setup(le){const oe=ref([]),ie=ref([]);return WebViewUI.instance.on("setAttributeData",(ue,de)=>{oe.value=ue,ie.value=de}),(ue,de)=>{const he=ElCollapseItem,pe=ElCollapse,_e=ElScrollbar;return openBlock(),createElementBlock("div",_hoisted_1$8,[createVNode(_e,null,{default:withCtx(()=>[createVNode(pe,{modelValue:ie.value,"onUpdate:modelValue":de[0]||(de[0]=Ce=>ie.value=Ce)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(oe.value,(Ce,xe)=>(openBlock(),createBlock(he,{title:Ce.name,name:Ce.name},{default:withCtx(()=>[createBaseVNode("table",_hoisted_2$8,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Ce.attributes,Ie=>(openBlock(),createElementBlock("tr",null,[createBaseVNode("td",null,toDisplayString(Ie.name),1),createBaseVNode("td",null,toDisplayString(Ie.value),1)]))),256))])]),_:2},1032,["title","name"]))),256))]),_:1},8,["modelValue"])]),_:1})])}}}),AttributeView=_export_sfc(_sfc_main$8,[["__scopeId","data-v-73d4fb34"]]),AttributeView$1=Object.freeze(Object.defineProperty({__proto__:null,default:AttributeView},Symbol.toStringTag,{value:"Module"})),_hoisted_1$7={class:"demo-collapse"},_hoisted_2$7=["src"],_sfc_main$7=defineComponent({__name:"EnvironmentEdit",setup(le){const oe=defineAsyncComponent(()=>__vitePreload(()=>Promise.resolve().then(()=>HDRLib$1),void 0,import.meta.url)),ie=ref(),ue=ref(["",""]),de=ref("./no.png"),he=ref("#ffffff"),pe=ref(1),_e=ref(1),Ce=ref("#ffffff"),xe=ref(1),Ie=ref(1),$e=ref(1),Ne=ref(1),Oe=ref(1),Fe=ref(1),Ve=ref(!0),ze=ref(!1),Ue={aoPower:"aoPower",aoSmoothing:"aoSmoothing",aoMapGamma:"aoMapGamma",lightMapGamma:"lightMapGamma",lightMapSaturation:"lightMapSaturation",envPower:"envPower",roughnessPower:"roughnessPower",sunIntensity:"sunIntensity",mapContrast:"mapContrast",lightMapContrast:"lightMapContrast",smoothingPower:"smoothingPower",irradianceIntensity:"irradianceIntensity",radianceIntensity:"radianceIntensity"};WebViewUI.instance.on("showEnvironmentData",bn=>{Pt(bn)});const Pt=bn=>{bn.previewPath?de.value=bn.previewPath:de.value="./no.png",xe.value=bn.sunIntensity,Ie.value=bn.smoothingPower,Fe.value=bn.envPower,$e.value=bn.aoPower,Ne.value=bn.aoSmoothing,Oe.value=bn.radianceIntensity,he.value=bn.ambientLightColor,pe.value=bn.ambientLightIntensity,Ce.value=bn.directionalLightColor,_e.value=bn.directionalLightIntensity,ze.value=bn.showBackground,Ve.value=bn.showEnvironment},qe=()=>{ie.value.dialogVisible=!0},Et=()=>{WebViewUI.instance.emit("EnvironmentChange","showEnvironmentChange",Ve.value)},kt=()=>{WebViewUI.instance.emit("EnvironmentChange","showBackgroundChange",ze.value)},At=(bn,vn)=>{WebViewUI.instance.emit("EnvironmentChange","setEmviormentParameter",bn,vn)},Dt=bn=>{WebViewUI.instance.emit("EnvironmentChange","ambientLightChange",bn)},Lt=bn=>{WebViewUI.instance.emit("EnvironmentChange","ambientLightIntensityInput",bn)},jt=bn=>{WebViewUI.instance.emit("EnvironmentChange","directionalLightChange",bn)},_n=bn=>{WebViewUI.instance.emit("EnvironmentChange","directionalLightIntensityInput",bn)};return(bn,vn)=>{const Tn=ElSwitch,$n=ElFormItem,wn=ElSlider,Cn=ElForm,Sn=ElCollapseItem,In=ElColorPicker,En=ElCollapse;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$7,[createVNode(En,{modelValue:ue.value,"onUpdate:modelValue":vn[21]||(vn[21]=xn=>ue.value=xn)},{default:withCtx(()=>[createVNode(Sn,{title:"",name:""},{default:withCtx(()=>[createBaseVNode("img",{class:"environmentImg",src:de.value,onClick:qe},null,8,_hoisted_2$7),createVNode(Cn,{size:"small","label-position":"left","label-width":"100px",onSubmit:vn[14]||(vn[14]=withModifiers(()=>{},["prevent"])),style:{"margin-left":"10px","margin-right":"10px","margin-top":"30px","margin-bottom":"5px"}},{default:withCtx(()=>[createVNode($n,{label:""},{default:withCtx(()=>[createVNode(Tn,{modelValue:Ve.value,"onUpdate:modelValue":vn[0]||(vn[0]=xn=>Ve.value=xn),onChange:Et},null,8,["modelValue"])]),_:1}),createVNode($n,{label:""},{default:withCtx(()=>[createVNode(Tn,{modelValue:ze.value,"onUpdate:modelValue":vn[1]||(vn[1]=xn=>ze.value=xn),onChange:kt},null,8,["modelValue"])]),_:1}),createVNode($n,{label:""},{default:withCtx(()=>[createVNode(wn,{size:"small",min:-10,max:10,step:.01,"show-input":!0,modelValue:xe.value,"onUpdate:modelValue":vn[2]||(vn[2]=xn=>xe.value=xn),onInput:vn[3]||(vn[3]=xn=>At(Ue.sunIntensity,xe.value)),"show-input-controls":!1,class:"my-slider"},null,8,["modelValue"])]),_:1}),createVNode($n,{label:""},{default:withCtx(()=>[createVNode(wn,{size:"small",min:-10,max:10,step:.01,"show-input":!0,modelValue:Ie.value,"onUpdate:modelValue":vn[4]||(vn[4]=xn=>Ie.value=xn),onInput:vn[5]||(vn[5]=xn=>At(Ue.smoothingPower,Ie.value)),"show-input-controls":!1,class:"my-slider"},null,8,["modelValue"])]),_:1}),createVNode($n,{label:""},{default:withCtx(()=>[createVNode(wn,{size:"small",min:-20,max:20,step:.01,"show-input":!0,modelValue:Fe.value,"onUpdate:modelValue":vn[6]||(vn[6]=xn=>Fe.value=xn),onInput:vn[7]||(vn[7]=xn=>At(Ue.envPower,Fe.value)),"show-input-controls":!1,class:"my-slider"},null,8,["modelValue"])]),_:1}),createVNode($n,{label:"AO"},{default:withCtx(()=>[createVNode(wn,{size:"small",min:-5,max:5,step:.01,"show-input":!0,modelValue:$e.value,"onUpdate:modelValue":vn[8]||(vn[8]=xn=>$e.value=xn),onInput:vn[9]||(vn[9]=xn=>At(Ue.aoPower,$e.value)),"show-input-controls":!1,class:"my-slider"},null,8,["modelValue"])]),_:1}),createVNode($n,{label:"AO"},{default:withCtx(()=>[createVNode(wn,{size:"small",min:0,max:3,step:.01,"show-input":!0,modelValue:Ne.value,"onUpdate:modelValue":vn[10]||(vn[10]=xn=>Ne.value=xn),onInput:vn[11]||(vn[11]=xn=>At(Ue.aoSmoothing,Ne.value)),"show-input-controls":!1,class:"my-slider"},null,8,["modelValue"])]),_:1}),createVNode($n,{label:""},{default:withCtx(()=>[createVNode(wn,{size:"small",min:-50,max:50,step:.01,"show-input":!0,modelValue:Oe.value,"onUpdate:modelValue":vn[12]||(vn[12]=xn=>Oe.value=xn),onInput:vn[13]||(vn[13]=xn=>At(Ue.radianceIntensity,Oe.value)),"show-input-controls":!1,class:"my-slider"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),createVNode(Sn,{title:"",name:""},{default:withCtx(()=>[createVNode(Cn,{size:"small","label-position":"left","label-width":"100px",onSubmit:vn[17]||(vn[17]=withModifiers(()=>{},["prevent"])),style:{"margin-left":"10px","margin-right":"10px","margin-top":"5px","margin-bottom":"5px"}},{default:withCtx(()=>[createVNode($n,{label:""},{default:withCtx(()=>[createVNode(wn,{size:"small",min:0,max:10,step:.1,"show-input":!0,modelValue:pe.value,"onUpdate:modelValue":vn[15]||(vn[15]=xn=>pe.value=xn),onInput:Lt,"show-input-controls":!1,class:"my-slider"},null,8,["modelValue"])]),_:1}),createVNode($n,{label:""},{default:withCtx(()=>[createVNode(In,{modelValue:he.value,"onUpdate:modelValue":vn[16]||(vn[16]=xn=>he.value=xn),onActiveChange:Dt},null,8,["modelValue"])]),_:1})]),_:1}),createVNode(Cn,{size:"small","label-position":"left","label-width":"100px",onSubmit:vn[20]||(vn[20]=withModifiers(()=>{},["prevent"])),style:{"margin-left":"10px","margin-right":"10px","margin-top":"5px","margin-bottom":"5px"}},{default:withCtx(()=>[createVNode($n,{label:""},{default:withCtx(()=>[createVNode(wn,{size:"small",min:0,max:10,step:.1,"show-input":!0,modelValue:_e.value,"onUpdate:modelValue":vn[18]||(vn[18]=xn=>_e.value=xn),onInput:_n,"show-input-controls":!1,class:"my-slider"},null,8,["modelValue"])]),_:1}),createVNode($n,{label:""},{default:withCtx(()=>[createVNode(In,{modelValue:Ce.value,"onUpdate:modelValue":vn[19]||(vn[19]=xn=>Ce.value=xn),onActiveChange:jt},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),createVNode(unref(oe),{ref_key:"HDRLibRef",ref:ie},null,512)],64)}}}),EnvironmentEdit=_export_sfc(_sfc_main$7,[["__scopeId","data-v-b3223acf"]]),EnvironmentEdit$1=Object.freeze(Object.defineProperty({__proto__:null,default:EnvironmentEdit},Symbol.toStringTag,{value:"Module"})),_hoisted_1$6={class:"material-list-wrapper"},_hoisted_2$6={class:"material-list"},_hoisted_3$5={class:"material-item-wp"},_hoisted_4$3={class:"material-item"},_hoisted_5$3={class:"preview-img-wrap"},_hoisted_6$2=["alt","src","onDragend"],_hoisted_7$1={class:"title"},_hoisted_8$1={class:"pagination-container"},_sfc_main$6=defineComponent({__name:"MaterialLib",setup(le,{expose:oe}){let ie=[];const ue=ref([]);onMounted(()=>{ie.length==0&&fetch("./pbr/pbr.json").then(xe=>xe.json()).then(xe=>{if(xe&&xe.length>0)for(const Ie of xe)Ie.previewUrl=Ie.path+Ie.previewUrl;ie=xe,de.value=xe.length,pe(1)})});const de=ref(0),he=reactive({address:"",name:"",pageIndex:1,pageSize:20}),pe=xe=>{he.pageIndex=xe;let Ie=(he.pageIndex-1)*he.pageSize<0?0:(he.pageIndex-1)*he.pageSize,$e=he.pageIndex*he.pageSize>de.value?de.value:he.pageIndex*he.pageSize;ue.value=ie.slice(Ie,$e)},_e=xe=>{xe.preventDefault()},Ce=(xe,Ie)=>{WebViewUI.instance.emit("EnvironmentChange","MaterialLibDragend",Ie)};return oe({}),(xe,Ie)=>{const $e=ElScrollbar,Ne=ElPagination;return openBlock(),createElementBlock("div",_hoisted_1$6,[createVNode($e,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_2$6,[(openBlock(!0),createElementBlock(Fragment,null,renderList(ue.value,Oe=>(openBlock(),createElementBlock("div",{class:"material-item-container",key:Oe.materialId},[createBaseVNode("div",_hoisted_3$5,[createBaseVNode("div",_hoisted_4$3,[createBaseVNode("div",_hoisted_5$3,[createBaseVNode("img",{class:"previewImg",alt:Oe.name,src:Oe.previewUrl,draggable:!0,onDrag:Ie[0]||(Ie[0]=Fe=>_e(Fe)),onDragend:Fe=>Ce(Fe,Oe)},null,40,_hoisted_6$2),Ie[1]||(Ie[1]=createBaseVNode("div",{class:"preview-img-cover"},null,-1))])])]),createBaseVNode("div",_hoisted_7$1,toDisplayString(Oe.name),1)]))),128))])]),_:1}),createBaseVNode("div",_hoisted_8$1,[createVNode(Ne,{layout:"prev, pager, next","current-page":he.pageIndex,"page-size":he.pageSize,total:de.value,onCurrentChange:pe},null,8,["current-page","page-size","total"])])])}}}),MaterialLib=_export_sfc(_sfc_main$6,[["__scopeId","data-v-3f3e12d9"]]),MaterialLib$1=Object.freeze(Object.defineProperty({__proto__:null,default:MaterialLib},Symbol.toStringTag,{value:"Module"})),_hoisted_1$5={class:"editMenu"},_hoisted_2$5={class:"custom-tabs-label"},_hoisted_3$4={class:"custom-tabs-label"},_sfc_main$5=defineComponent({__name:"MaterialEditMenu",setup(le){const oe=ref("first");return(ie,ue)=>{const de=ElIcon,he=ElTooltip,pe=ElTabPane,_e=ElTabs;return openBlock(),createElementBlock("div",_hoisted_1$5,[createVNode(_e,{modelValue:oe.value,"onUpdate:modelValue":ue[0]||(ue[0]=Ce=>oe.value=Ce),type:"border-card","tab-position":"left"},{default:withCtx(()=>[createVNode(pe,{name:"first"},{label:withCtx(()=>[createVNode(he,{effect:"dark",content:"",placement:"right"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_2$5,[createVNode(de,null,{default:withCtx(()=>[createVNode(unref(opportunity_default))]),_:1})])]),_:1})]),default:withCtx(()=>[createVNode(EnvironmentEdit)]),_:1}),createVNode(pe,{name:"second"},{label:withCtx(()=>[createVNode(he,{effect:"dark",content:"",placement:"right"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_3$4,[createVNode(de,null,{default:withCtx(()=>[createVNode(unref(tickets_default))]),_:1})])]),_:1})]),default:withCtx(()=>[createVNode(MaterialLib)]),_:1})]),_:1},8,["modelValue"])])}}}),MaterialEditMenu=Object.freeze(Object.defineProperty({__proto__:null,default:_sfc_main$5},Symbol.toStringTag,{value:"Module"})),_hoisted_1$4={class:"card-container"},_hoisted_2$4=["src"],_hoisted_3$3={style:{padding:"10px"}},_sfc_main$4=defineComponent({__name:"HDRLib",setup(le,{expose:oe}){let ie=[];const ue=ref([]);onMounted(()=>{fetch("./hdr/hdr.json").then(xe=>xe.json()).then(xe=>{pe.value=xe.length,ie=xe,Ce(1)})});const de=(xe,Ie)=>{WebViewUI.instance.emit("EnvironmentChange","changeHDR",Ie)},he=ref(!1),pe=ref(0),_e=reactive({address:"",name:"",pageIndex:1,pageSize:20}),Ce=xe=>{_e.pageIndex=xe;let Ie=(_e.pageIndex-1)*_e.pageSize<0?0:(_e.pageIndex-1)*_e.pageSize,$e=_e.pageIndex*_e.pageSize>pe.value?pe.value:_e.pageIndex*_e.pageSize;ue.value=ie.slice(Ie,$e)};return oe({dialogVisible:he}),(xe,Ie)=>{const $e=ElCard,Ne=ElCol,Oe=ElRow,Fe=ElScrollbar,Ve=ElPagination,ze=ElDialog;return openBlock(),createBlock(ze,{modelValue:he.value,"onUpdate:modelValue":Ie[0]||(Ie[0]=Ue=>he.value=Ue),title:""},{default:withCtx(()=>[createVNode(Fe,{height:"540px"},{default:withCtx(()=>[createVNode(Oe,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(ue.value,(Ue,Pt)=>(openBlock(),createBlock(Ne,{key:Pt,span:8},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$4,[createVNode($e,{"body-style":{padding:"0"},shadow:"hover",onClick:qe=>de(qe,Ue)},{default:withCtx(()=>[createBaseVNode("img",{src:Ue.previewUrl,class:"image"},null,8,_hoisted_2$4),createBaseVNode("div",_hoisted_3$3,toDisplayString(Ue.name),1)]),_:2},1032,["onClick"])])]),_:2},1024))),128))]),_:1})]),_:1}),createVNode(Ve,{layout:"prev, pager, next","current-page":_e.pageIndex,"page-size":_e.pageSize,total:pe.value,onCurrentChange:Ce},null,8,["current-page","page-size","total"])]),_:1},8,["modelValue"])}}}),HDRLib=_export_sfc(_sfc_main$4,[["__scopeId","data-v-195d73bc"]]),HDRLib$1=Object.freeze(Object.defineProperty({__proto__:null,default:HDRLib},Symbol.toStringTag,{value:"Module"})),_hoisted_1$3={key:0,class:"materialData"},_hoisted_2$3={class:"selImg"},_hoisted_3$2=["src"],_hoisted_4$2={class:"materialBox"},_hoisted_5$2={class:"selImg"},_hoisted_6$1=["src"],_hoisted_7={class:"materialBox"},_hoisted_8={class:"selImg"},_hoisted_9=["src"],_hoisted_10={class:"materialBox"},_hoisted_11={class:"selImg"},_hoisted_12=["src"],_hoisted_13={class:"materialBox"},_hoisted_14={class:"selImg"},_hoisted_15=["src"],_hoisted_16={class:"materialBox"},_hoisted_17={class:"selImg"},_hoisted_18=["src"],_sfc_main$3=defineComponent({__name:"MaterialComponentUI",setup(le,{expose:oe}){const ie=reactive({name:"",baseColor:"",map:"./vite.svg",alpha:0,roughnessMap:"./vite.svg",roughness:0,metalnessMap:"./vite.svg",metalness:0,aoMap:"./vite.svg",aoMapIntensity:0,normalMap:"./vite.svg",normalScale:0,displacementMap:"./vite.svg",displacementScale:0,equaScale:!0,uScale:1,vScale:1,rotate:1,equaOffset:!0,xOffset:1,yOffset:1}),ue=ref(!1),de=ze=>{ie.name=ze.name,ie.map=ze.map,ie.alpha=ze.alpha,ie.roughness=ze.roughness,ie.roughnessMap=ze.roughnessMap,ie.metalness=ze.metalness,ie.metalnessMap=ze.metalnessMap,ie.normalMap=ze.normalMap,ie.aoMap=ze.aoMap,ie.aoMapIntensity=ze.aoMapIntensity,ie.displacementMap=ze.displacementMap,ie.normalScale=ze.normalScale,ze.transform&&(ie.uScale=ze.transform.repeat.x,ie.vScale=ze.transform.repeat.y,ie.rotate=ze.transform.rotation,ie.xOffset=ze.transform.offset.x,ie.yOffset=ze.transform.offset.y),ie.baseColor=ze.baseColor},he=ze=>{WebViewUI.instance.emit("MaterialChange","changeBaseColor",ze)},pe=(ze,Ue)=>{let Pt=ze.srcElement,qe=URL.createObjectURL(Pt.files[0]);ie[Ue]=qe,WebViewUI.instance.emit("MaterialChange","changeMap",qe,Ue)},_e=ze=>{WebViewUI.instance.emit("MaterialChange","alphaInput",ze)},Ce=ze=>{WebViewUI.instance.emit("MaterialChange","baseNumber","roughness",ze)},xe=ze=>{WebViewUI.instance.emit("MaterialChange","baseNumber","metalness",ze)},Ie=ze=>{WebViewUI.instance.emit("MaterialChange","baseNumber","aoMapIntensity",ze)},$e=ze=>{WebViewUI.instance.emit("MaterialChange","baseNumber","displacementScale",ze)},Ne=ze=>{WebViewUI.instance.emit("MaterialChange","normalMapInput",ze)},Oe=(ze,Ue)=>{ie.equaScale&&(ze?ie.vScale=Ue:ie.uScale=Ue),WebViewUI.instance.emit("MaterialChange","changeScale",ze,Ue,ie.equaScale)},Fe=ze=>{WebViewUI.instance.emit("MaterialChange","changeRotate",ze)},Ve=(ze,Ue)=>{ie.equaOffset&&(ze?ie.yOffset=Ue:ie.xOffset=Ue),WebViewUI.instance.emit("MaterialChange","changeOffset",ze,Ue,ie.equaOffset)};return oe({dialogVisible:ue,showMaterialData:de}),(ze,Ue)=>{const Pt=ElInput,qe=ElFormItem,Et=ElColorPicker,kt=ElSlider,At=ElSwitch,Dt=ElForm;return ue.value?(openBlock(),createElementBlock("div",_hoisted_1$3,[Ue[26]||(Ue[26]=createBaseVNode("div",{class:"materialData-header"},"  ",-1)),createVNode(Dt,{size:"small","label-position":"left","label-width":"100px",model:ie,style:{"margin-left":"10px","margin-right":"10px","margin-top":"15px","margin-bottom":"5px"}},{default:withCtx(()=>[createVNode(qe,{label:""},{default:withCtx(()=>[createVNode(Pt,{modelValue:ie.name,"onUpdate:modelValue":Ue[0]||(Ue[0]=Lt=>ie.name=Lt)},null,8,["modelValue"])]),_:1}),createVNode(qe,{label:""},{default:withCtx(()=>[createVNode(Et,{modelValue:ie.baseColor,"onUpdate:modelValue":Ue[1]||(Ue[1]=Lt=>ie.baseColor=Lt),onChange:Ue[2]||(Ue[2]=Lt=>he(ie.baseColor))},null,8,["modelValue"])]),_:1}),createVNode(qe,{label:""},{default:withCtx(()=>[createBaseVNode("div",_hoisted_2$3,[createBaseVNode("img",{src:ie.map,class:"myImg"},null,8,_hoisted_3$2),createBaseVNode("input",{type:"file",class:"file-input",accept:"image/*",onChange:Ue[3]||(Ue[3]=Lt=>pe(Lt,"map"))},null,32)])]),_:1}),createVNode(qe,{label:""},{default:withCtx(()=>[createVNode(kt,{modelValue:ie.alpha,"onUpdate:modelValue":Ue[4]||(Ue[4]=Lt=>ie.alpha=Lt),size:"small",min:0,max:1,step:.001,"show-input":!0,onInput:_e,"show-input-controls":!1,class:"my-slider"},null,8,["modelValue"])]),_:1}),createVNode(qe,{label:""},{default:withCtx(()=>[createBaseVNode("div",_hoisted_4$2,[createBaseVNode("div",_hoisted_5$2,[createBaseVNode("img",{src:ie.roughnessMap,class:"myImg"},null,8,_hoisted_6$1),createBaseVNode("input",{type:"file",class:"file-input",accept:"image/*",onChange:Ue[5]||(Ue[5]=Lt=>pe(Lt,"roughnessMap"))},null,32)]),createVNode(kt,{modelValue:ie.roughness,"onUpdate:modelValue":Ue[6]||(Ue[6]=Lt=>ie.roughness=Lt),size:"small",min:0,max:1,step:.001,"show-input":!0,onInput:Ce,"show-input-controls":!1,class:"my-slider"},null,8,["modelValue"])])]),_:1}),createVNode(qe,{label:""},{default:withCtx(()=>[createBaseVNode("div",_hoisted_7,[createBaseVNode("div",_hoisted_8,[createBaseVNode("img",{src:ie.metalnessMap,class:"myImg"},null,8,_hoisted_9),createBaseVNode("input",{type:"file",class:"file-input",accept:"image/*",onChange:Ue[7]||(Ue[7]=Lt=>pe(Lt,"metalnessMap"))},null,32)]),createVNode(kt,{modelValue:ie.metalness,"onUpdate:modelValue":Ue[8]||(Ue[8]=Lt=>ie.metalness=Lt),size:"small",min:0,max:1,step:.001,"show-input":!0,onInput:xe,"show-input-controls":!1,class:"my-slider"},null,8,["modelValue"])])]),_:1}),createVNode(qe,{label:""},{default:withCtx(()=>[createBaseVNode("div",_hoisted_10,[createBaseVNode("div",_hoisted_11,[createBaseVNode("img",{src:ie.aoMap,class:"myImg"},null,8,_hoisted_12),createBaseVNode("input",{type:"file",class:"file-input",accept:"image/*",onChange:Ue[9]||(Ue[9]=Lt=>pe(Lt,"aoMap"))},null,32)]),createVNode(kt,{modelValue:ie.aoMapIntensity,"onUpdate:modelValue":Ue[10]||(Ue[10]=Lt=>ie.aoMapIntensity=Lt),size:"small",min:0,max:1,step:.001,"show-input":!0,"show-input-controls":!1,class:"my-slider",onInput:Ie},null,8,["modelValue"])])]),_:1}),createVNode(qe,{label:""},{default:withCtx(()=>[createBaseVNode("div",_hoisted_13,[createBaseVNode("div",_hoisted_14,[createBaseVNode("img",{src:ie.normalMap,class:"myImg"},null,8,_hoisted_15),createBaseVNode("input",{type:"file",class:"file-input",accept:"image/*",onChange:Ue[11]||(Ue[11]=Lt=>pe(Lt,"normalMap"))},null,32)]),createVNode(kt,{modelValue:ie.normalScale,"onUpdate:modelValue":Ue[12]||(Ue[12]=Lt=>ie.normalScale=Lt),size:"small",min:-10,max:10,step:.001,"show-input":!0,"show-input-controls":!1,class:"my-slider",onInput:Ne},null,8,["modelValue"])])]),_:1}),createVNode(qe,{label:""},{default:withCtx(()=>[createBaseVNode("div",_hoisted_16,[createBaseVNode("div",_hoisted_17,[createBaseVNode("img",{src:ie.displacementMap,class:"myImg"},null,8,_hoisted_18),createBaseVNode("input",{type:"file",class:"file-input",accept:"image/*",onChange:Ue[13]||(Ue[13]=Lt=>pe(Lt,"displacementMap"))},null,32)]),createVNode(kt,{modelValue:ie.displacementScale,"onUpdate:modelValue":Ue[14]||(Ue[14]=Lt=>ie.displacementScale=Lt),size:"small",min:0,max:1,step:.001,"show-input":!0,"show-input-controls":!1,class:"my-slider",onInput:$e},null,8,["modelValue"])])]),_:1}),createVNode(qe,{label:"UV"},{default:withCtx(()=>[createVNode(At,{modelValue:ie.equaScale,"onUpdate:modelValue":Ue[15]||(Ue[15]=Lt=>ie.equaScale=Lt),"active-text":""},null,8,["modelValue"])]),_:1}),createVNode(qe,{label:"U"},{default:withCtx(()=>[createVNode(kt,{modelValue:ie.uScale,"onUpdate:modelValue":Ue[16]||(Ue[16]=Lt=>ie.uScale=Lt),size:"small",min:-10,max:10,step:.001,"show-input":!0,"show-input-controls":!1,class:"my-slider",onInput:Ue[17]||(Ue[17]=Lt=>Oe(!0,ie.uScale))},null,8,["modelValue"])]),_:1}),createVNode(qe,{label:"V"},{default:withCtx(()=>[createVNode(kt,{modelValue:ie.vScale,"onUpdate:modelValue":Ue[18]||(Ue[18]=Lt=>ie.vScale=Lt),size:"small",min:-10,max:10,step:.001,"show-input":!0,"show-input-controls":!1,class:"my-slider",onInput:Ue[19]||(Ue[19]=Lt=>Oe(!1,ie.vScale))},null,8,["modelValue"])]),_:1}),createVNode(qe,{label:"UV"}),createVNode(qe,{label:""},{default:withCtx(()=>[createVNode(kt,{modelValue:ie.rotate,"onUpdate:modelValue":Ue[20]||(Ue[20]=Lt=>ie.rotate=Lt),size:"small",min:0,max:360,step:.1,"show-input":!0,"show-input-controls":!1,class:"my-slider",onInput:Fe},null,8,["modelValue"])]),_:1}),createVNode(qe,{label:""},{default:withCtx(()=>[createVNode(At,{modelValue:ie.equaOffset,"onUpdate:modelValue":Ue[21]||(Ue[21]=Lt=>ie.equaOffset=Lt),"active-text":""},null,8,["modelValue"])]),_:1}),createVNode(qe,{label:""},{default:withCtx(()=>[createVNode(kt,{modelValue:ie.xOffset,"onUpdate:modelValue":Ue[22]||(Ue[22]=Lt=>ie.xOffset=Lt),size:"small",min:0,max:10,step:.01,"show-input":!0,"show-input-controls":!1,class:"my-slider",onInput:Ue[23]||(Ue[23]=Lt=>Ve(!0,ie.xOffset))},null,8,["modelValue"])]),_:1}),createVNode(qe,{label:""},{default:withCtx(()=>[createVNode(kt,{modelValue:ie.yOffset,"onUpdate:modelValue":Ue[24]||(Ue[24]=Lt=>ie.yOffset=Lt),size:"small",min:0,max:10,step:.01,"show-input":!0,"show-input-controls":!1,class:"my-slider",onInput:Ue[25]||(Ue[25]=Lt=>Ve(!1,ie.yOffset))},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])):createCommentVNode("",!0)}}}),MaterialComponentUI=_export_sfc(_sfc_main$3,[["__scopeId","data-v-dcc5f6b6"]]),MaterialComponentUI$1=Object.freeze(Object.defineProperty({__proto__:null,default:MaterialComponentUI},Symbol.toStringTag,{value:"Module"})),_hoisted_1$2={width:"20",height:"10",style:{"margin-right":"3px"}},_hoisted_2$2=["fill"],_sfc_main$2=defineComponent({__name:"ProjectView",setup(le){const oe={children:"children",label:"name"},ie=ref(434),ue=ref(),de=ref(),he=ref(),pe=ref(),_e=ref([0]);onMounted(()=>{ie.value=de.value.clientHeight,new ResizeObserver(()=>{ie.value=de.value.clientHeight}).observe(de.value)});const Ce=(Ie,$e)=>{let Ne=ue.value.getCheckedKeys();WebViewUI.instance.emit("setTreeDataByIds",[...he.value],Ne)},xe=Ie=>{Ie.id!=null&&WebViewUI.instance.emit("treeClickElement",Ie.id)};return WebViewUI.instance.on("setTreeData",(Ie,$e=[0])=>{pe.value=$e,he.value=Ie;const Ne=[];for(const Oe of Ie)Ne.push(Oe.id);_e.value=Ne}),WebViewUI.instance.on("pickElement",Ie=>{ue.value.setCurrentKey(Ie)}),(Ie,$e)=>{const Ne=ElTreeV2;return openBlock(),createElementBlock("div",{ref_key:"treeView",ref:de,class:"treeView"},[createVNode(Ne,{ref_key:"modelTree",ref:ue,height:ie.value,data:he.value,props:oe,onNodeClick:xe,onCheckChange:Ce,"node-key":"id","show-checkbox":"","default-expanded-keys":[0],"highlight-current":!0,"default-checked-keys":pe.value},{default:withCtx(({node:Oe,data:Fe})=>[Oe.data.color!=null?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(["prefix",{"is-leaf":Oe.isLeaf}])},[(openBlock(),createElementBlock("svg",_hoisted_1$2,[createBaseVNode("polygon",{points:"0,0 10,0 15,5 ,10,10 0,10",fill:Oe.data.color},null,8,_hoisted_2$2)]))],2)):createCommentVNode("",!0),createBaseVNode("span",null,toDisplayString(Oe.label),1)]),_:1},8,["height","data","default-checked-keys"])],512)}}}),ProjectView=_export_sfc(_sfc_main$2,[["__scopeId","data-v-ac6a9f59"]]),ProjectView$1=Object.freeze(Object.defineProperty({__proto__:null,default:ProjectView},Symbol.toStringTag,{value:"Module"})),_hoisted_1$1={class:"carouselMenu"},_hoisted_2$1={class:"menubuttons"},_hoisted_3$1={class:"scrollbar-flex-content"},_hoisted_4$1=["src"],_hoisted_5$1={class:"input-container"},_hoisted_6={class:"duration-input"},_sfc_main$1=defineComponent({__name:"Carousel",setup(le){const oe=ref([]),ie=ref("");let ue=0,de;onMounted(()=>{oe.value.length==0&&(ue=0,he())});const he=()=>{Ne(),$e(),ie.value=de.name,ue++},pe=(Fe,Ve)=>{let ze=Number(Fe.index);de=oe.value[ze]},_e=()=>{$e(),de&&(de.addPath(1),oe.value=[...oe.value],ie.value=de.name)},Ce=(Fe,Ve)=>{de=oe.value[Fe],de.selIndex=Ve;let ze=de.paths[de.selIndex];WebViewUI.instance.webView.app.view.flyTo(ze.position.x,ze.position.y,ze.position.z,ze.target.x,ze.target.y,ze.target.z)},xe=()=>{de.play(de.selIndex)},Ie=Fe=>{const Ve=oe.value.findIndex(ze=>ze.name===Fe);Ve!==-1&&(oe.value.splice(Ve,1),oe.value.length>0&&(ie.value=oe.value[0].name,de=oe.value[0])),oe.value.length==0&&(ue=0,he())},$e=()=>{de==null&&(de=new PathAnimation(WebViewUI.instance.webView.app.view),de.name=""+ue,oe.value.push(de))},Ne=()=>{de=null},Oe=(Fe,Ve,ze)=>{oe.value[Fe].paths[Ve].duration=ze};return(Fe,Ve)=>{const ze=ElButton,Ue=ElTooltip,Pt=ElInputNumber,qe=ElCard,Et=ElRadioButton,kt=ElRadioGroup,At=ElScrollbar,Dt=ElTabPane,Lt=ElTabs;return openBlock(),createElementBlock("div",_hoisted_1$1,[createBaseVNode("div",_hoisted_2$1,[createVNode(Ue,{effect:"dark",content:"",placement:"left"},{default:withCtx(()=>[createVNode(ze,{circle:"",size:"large",type:"info",style:{"margin-top":"7px"},onClick:he},{default:withCtx(()=>Ve[1]||(Ve[1]=[createTextVNode("  ")])),_:1})]),_:1}),createVNode(Ue,{effect:"dark",content:"",placement:"left"},{default:withCtx(()=>[createVNode(ze,{circle:"",size:"large",type:"info",style:{"margin-top":"7px","margin-left":"2px"},onClick:_e},{default:withCtx(()=>Ve[2]||(Ve[2]=[createTextVNode("  ")])),_:1})]),_:1}),createVNode(Ue,{effect:"dark",content:"",placement:"left"},{default:withCtx(()=>[createVNode(ze,{circle:"",size:"large",type:"info",style:{"margin-top":"7px","margin-left":"2px"},onClick:xe},{default:withCtx(()=>Ve[3]||(Ve[3]=[createTextVNode("  ")])),_:1})]),_:1})]),createVNode(Lt,{modelValue:ie.value,"onUpdate:modelValue":Ve[0]||(Ve[0]=jt=>ie.value=jt),onTabClick:pe,onTabRemove:Ie},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(oe.value,(jt,_n)=>(openBlock(),createBlock(Dt,{key:_n,label:jt.name,name:jt.name,closable:""},{default:withCtx(()=>[createVNode(At,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_3$1,[createVNode(kt,{modelValue:jt.selIndex,"onUpdate:modelValue":bn=>jt.selIndex=bn},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(jt.paths,(bn,vn)=>(openBlock(),createBlock(Et,{value:vn,key:vn,class:"scrollbar-demo-item",onChange:Tn=>Ce(_n,vn)},{default:withCtx(()=>[createVNode(qe,{"body-style":{padding:"0px"},shadow:"hover"},{default:withCtx(()=>[createBaseVNode("img",{class:"image",src:bn.url},null,8,_hoisted_4$1),createBaseVNode("div",_hoisted_5$1,[createBaseVNode("div",_hoisted_6,[Ve[4]||(Ve[4]=createBaseVNode("span",{class:"duration-label"},":",-1)),createVNode(Pt,{modelValue:bn.duration,"onUpdate:modelValue":Tn=>bn.duration=Tn,min:.1,step:.1,size:"small","controls-position":"right",onChange:Tn=>Oe(_n,vn,Tn)},null,8,["modelValue","onUpdate:modelValue","onChange"])])])]),_:2},1024)]),_:2},1032,["value","onChange"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),_:2},1024)]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])])}}}),Carousel=_export_sfc(_sfc_main$1,[["__scopeId","data-v-d5ef9995"]]),Carousel$1=Object.freeze(Object.defineProperty({__proto__:null,default:Carousel},Symbol.toStringTag,{value:"Module"})),_hoisted_1={class:"roam-controls"},_hoisted_2={class:"control-row"},_hoisted_3={class:"control-row"},_hoisted_4={class:"control-row"},_hoisted_5={class:"control-row"},_sfc_main=defineComponent({__name:"RoamControls",setup(le){const oe=ref(5),ie=ref(!1),ue=ref(!1),de=ref(45),he=()=>{WebViewUI.instance.emit("updateRoamSettings",{roamSpeed:oe.value,gravity:ie.value,collision:ue.value,fov:de.value}),window.document.body.focus()};return(pe,_e)=>{const Ce=ElSlider,xe=ElSwitch;return openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[_e[4]||(_e[4]=createBaseVNode("span",{class:"control-label"},"",-1)),createVNode(Ce,{modelValue:oe.value,"onUpdate:modelValue":_e[0]||(_e[0]=Ie=>oe.value=Ie),min:1,max:100,step:.1,"show-input":!0,"show-input-controls":!1,onChange:he},null,8,["modelValue"])]),createBaseVNode("div",_hoisted_3,[_e[5]||(_e[5]=createBaseVNode("span",{class:"control-label"},"",-1)),createVNode(xe,{modelValue:ie.value,"onUpdate:modelValue":_e[1]||(_e[1]=Ie=>ie.value=Ie),onChange:he,style:{zoom:"0.7"}},null,8,["modelValue"])]),createBaseVNode("div",_hoisted_4,[_e[6]||(_e[6]=createBaseVNode("span",{class:"control-label"},"",-1)),createVNode(xe,{modelValue:ue.value,"onUpdate:modelValue":_e[2]||(_e[2]=Ie=>ue.value=Ie),onChange:he,style:{zoom:"0.7"}},null,8,["modelValue"])]),createBaseVNode("div",_hoisted_5,[_e[7]||(_e[7]=createBaseVNode("span",{class:"control-label"},"",-1)),createVNode(Ce,{modelValue:de.value,"onUpdate:modelValue":_e[3]||(_e[3]=Ie=>de.value=Ie),min:4,max:89,step:1,"show-input":!0,"show-input-controls":!1,onChange:he},null,8,["modelValue"])])])}}}),RoamControls=_export_sfc(_sfc_main,[["__scopeId","data-v-e8307239"]]),RoamControls$1=Object.freeze(Object.defineProperty({__proto__:null,default:RoamControls},Symbol.toStringTag,{value:"Module"}));/*! @license DOMPurify 2.5.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.6/LICENSE */function _typeof$1(le){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(oe){return typeof oe}:function(oe){return oe&&typeof Symbol=="function"&&oe.constructor===Symbol&&oe!==Symbol.prototype?"symbol":typeof oe},_typeof$1(le)}function _setPrototypeOf(le,oe){return _setPrototypeOf=Object.setPrototypeOf||function(ue,de){return ue.__proto__=de,ue},_setPrototypeOf(le,oe)}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _construct(le,oe,ie){return _isNativeReflectConstruct()?_construct=Reflect.construct:_construct=function(de,he,pe){var _e=[null];_e.push.apply(_e,he);var Ce=Function.bind.apply(de,_e),xe=new Ce;return pe&&_setPrototypeOf(xe,pe.prototype),xe},_construct.apply(null,arguments)}function _toConsumableArray(le){return _arrayWithoutHoles(le)||_iterableToArray(le)||_unsupportedIterableToArray(le)||_nonIterableSpread()}function _arrayWithoutHoles(le){if(Array.isArray(le))return _arrayLikeToArray(le)}function _iterableToArray(le){if(typeof Symbol<"u"&&le[Symbol.iterator]!=null||le["@@iterator"]!=null)return Array.from(le)}function _unsupportedIterableToArray(le,oe){if(le){if(typeof le=="string")return _arrayLikeToArray(le,oe);var ie=Object.prototype.toString.call(le).slice(8,-1);if(ie==="Object"&&le.constructor&&(ie=le.constructor.name),ie==="Map"||ie==="Set")return Array.from(le);if(ie==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ie))return _arrayLikeToArray(le,oe)}}function _arrayLikeToArray(le,oe){(oe==null||oe>le.length)&&(oe=le.length);for(var ie=0,ue=new Array(oe);ie<oe;ie++)ue[ie]=le[ie];return ue}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var hasOwnProperty$1=Object.hasOwnProperty,setPrototypeOf$2=Object.setPrototypeOf,isFrozen=Object.isFrozen,getPrototypeOf$2=Object.getPrototypeOf,getOwnPropertyDescriptor$5=Object.getOwnPropertyDescriptor,freeze=Object.freeze,seal=Object.seal,create$3=Object.create,_ref=typeof Reflect<"u"&&Reflect,apply$3=_ref.apply,construct$1=_ref.construct;apply$3||(apply$3=function(oe,ie,ue){return oe.apply(ie,ue)});freeze||(freeze=function(oe){return oe});seal||(seal=function(oe){return oe});construct$1||(construct$1=function(oe,ie){return _construct(oe,_toConsumableArray(ie))});var arrayForEach=unapply(Array.prototype.forEach),arrayPop=unapply(Array.prototype.pop),arrayPush=unapply(Array.prototype.push),stringToLowerCase=unapply(String.prototype.toLowerCase),stringToString=unapply(String.prototype.toString),stringMatch=unapply(String.prototype.match),stringReplace=unapply(String.prototype.replace),stringIndexOf$2=unapply(String.prototype.indexOf),stringTrim$1=unapply(String.prototype.trim),regExpTest=unapply(RegExp.prototype.test),typeErrorCreate=unconstruct(TypeError);function unapply(le){return function(oe){for(var ie=arguments.length,ue=new Array(ie>1?ie-1:0),de=1;de<ie;de++)ue[de-1]=arguments[de];return apply$3(le,oe,ue)}}function unconstruct(le){return function(){for(var oe=arguments.length,ie=new Array(oe),ue=0;ue<oe;ue++)ie[ue]=arguments[ue];return construct$1(le,ie)}}function addToSet(le,oe,ie){var ue;ie=(ue=ie)!==null&&ue!==void 0?ue:stringToLowerCase,setPrototypeOf$2&&setPrototypeOf$2(le,null);for(var de=oe.length;de--;){var he=oe[de];if(typeof he=="string"){var pe=ie(he);pe!==he&&(isFrozen(oe)||(oe[de]=pe),he=pe)}le[he]=!0}return le}function clone(le){var oe=create$3(null),ie;for(ie in le)apply$3(hasOwnProperty$1,le,[ie])===!0&&(oe[ie]=le[ie]);return oe}function lookupGetter(le,oe){for(;le!==null;){var ie=getOwnPropertyDescriptor$5(le,oe);if(ie){if(ie.get)return unapply(ie.get);if(typeof ie.value=="function")return unapply(ie.value)}le=getPrototypeOf$2(le)}function ue(de){return null}return ue}var html$1$1=freeze(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),svg$1=freeze(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),svgFilters=freeze(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),svgDisallowed=freeze(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mathMl$1=freeze(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),mathMlDisallowed=freeze(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),text=freeze(["#text"]),html$3=freeze(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),svg=freeze(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),mathMl=freeze(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xml=freeze(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),MUSTACHE_EXPR=seal(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ERB_EXPR=seal(/<%[\w\W]*|[\w\W]*%>/gm),TMPLIT_EXPR=seal(/\${[\w\W]*}/gm),DATA_ATTR=seal(/^data-[\-\w.\u00B7-\uFFFF]/),ARIA_ATTR=seal(/^aria-[\-\w]+$/),IS_ALLOWED_URI=seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),IS_SCRIPT_OR_DATA=seal(/^(?:\w+script|data):/i),ATTR_WHITESPACE=seal(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),DOCTYPE_NAME=seal(/^html$/i),CUSTOM_ELEMENT=seal(/^[a-z][.\w]*(-[.\w]+)+$/i),getGlobal=function le(){return typeof window>"u"?null:window},_createTrustedTypesPolicy=function le(oe,ie){if(_typeof$1(oe)!=="object"||typeof oe.createPolicy!="function")return null;var ue=null,de="data-tt-policy-suffix";ie.currentScript&&ie.currentScript.hasAttribute(de)&&(ue=ie.currentScript.getAttribute(de));var he="dompurify"+(ue?"#"+ue:"");try{return oe.createPolicy(he,{createHTML:function(_e){return _e},createScriptURL:function(_e){return _e}})}catch{return null}};function createDOMPurify(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:getGlobal(),oe=function(Ln){return createDOMPurify(Ln)};if(oe.version="2.5.6",oe.removed=[],!le||!le.document||le.document.nodeType!==9)return oe.isSupported=!1,oe;var ie=le.document,ue=le.document,de=le.DocumentFragment,he=le.HTMLTemplateElement,pe=le.Node,_e=le.Element,Ce=le.NodeFilter,xe=le.NamedNodeMap,Ie=xe===void 0?le.NamedNodeMap||le.MozNamedAttrMap:xe,$e=le.HTMLFormElement,Ne=le.DOMParser,Oe=le.trustedTypes,Fe=_e.prototype,Ve=lookupGetter(Fe,"cloneNode"),ze=lookupGetter(Fe,"nextSibling"),Ue=lookupGetter(Fe,"childNodes"),Pt=lookupGetter(Fe,"parentNode");if(typeof he=="function"){var qe=ue.createElement("template");qe.content&&qe.content.ownerDocument&&(ue=qe.content.ownerDocument)}var Et=_createTrustedTypesPolicy(Oe,ie),kt=Et?Et.createHTML(""):"",At=ue,Dt=At.implementation,Lt=At.createNodeIterator,jt=At.createDocumentFragment,_n=At.getElementsByTagName,bn=ie.importNode,vn={};try{vn=clone(ue).documentMode?ue.documentMode:{}}catch{}var Tn={};oe.isSupported=typeof Pt=="function"&&Dt&&Dt.createHTMLDocument!==void 0&&vn!==9;var $n=MUSTACHE_EXPR,wn=ERB_EXPR,Cn=TMPLIT_EXPR,Sn=DATA_ATTR,In=ARIA_ATTR,En=IS_SCRIPT_OR_DATA,xn=ATTR_WHITESPACE,kn=CUSTOM_ELEMENT,On=IS_ALLOWED_URI,Mn=null,Un=addToSet({},[].concat(_toConsumableArray(html$1$1),_toConsumableArray(svg$1),_toConsumableArray(svgFilters),_toConsumableArray(mathMl$1),_toConsumableArray(text))),zn=null,Hn=addToSet({},[].concat(_toConsumableArray(html$3),_toConsumableArray(svg),_toConsumableArray(mathMl),_toConsumableArray(xml))),Rn=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Jn=null,Qn=null,_r=!0,Zn=!0,Gn=!1,Nn=!0,Dn=!1,jn=!0,ir=!1,Fn=!1,Kn=!1,mr=!1,yr=!1,Cr=!1,br=!0,Pr=!1,gr="user-content-",tr=!0,Sr=!1,Dr={},Lr=null,Ur=addToSet({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Xr=null,qr=addToSet({},["audio","video","img","source","image","track"]),Wn=null,wr=addToSet({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Vn="http://www.w3.org/1998/Math/MathML",sr="http://www.w3.org/2000/svg",nr="http://www.w3.org/1999/xhtml",Ar=nr,Wr=!1,Yn=null,Nr=addToSet({},[Vn,sr,nr],stringToString),Hr,Pn=["application/xhtml+xml","text/html"],An="text/html",Bn,or=null,xr=ue.createElement("form"),Er=function(Ln){return Ln instanceof RegExp||Ln instanceof Function},kr=function(Ln){or&&or===Ln||((!Ln||_typeof$1(Ln)!=="object")&&(Ln={}),Ln=clone(Ln),Hr=Pn.indexOf(Ln.PARSER_MEDIA_TYPE)===-1?Hr=An:Hr=Ln.PARSER_MEDIA_TYPE,Bn=Hr==="application/xhtml+xml"?stringToString:stringToLowerCase,Mn="ALLOWED_TAGS"in Ln?addToSet({},Ln.ALLOWED_TAGS,Bn):Un,zn="ALLOWED_ATTR"in Ln?addToSet({},Ln.ALLOWED_ATTR,Bn):Hn,Yn="ALLOWED_NAMESPACES"in Ln?addToSet({},Ln.ALLOWED_NAMESPACES,stringToString):Nr,Wn="ADD_URI_SAFE_ATTR"in Ln?addToSet(clone(wr),Ln.ADD_URI_SAFE_ATTR,Bn):wr,Xr="ADD_DATA_URI_TAGS"in Ln?addToSet(clone(qr),Ln.ADD_DATA_URI_TAGS,Bn):qr,Lr="FORBID_CONTENTS"in Ln?addToSet({},Ln.FORBID_CONTENTS,Bn):Ur,Jn="FORBID_TAGS"in Ln?addToSet({},Ln.FORBID_TAGS,Bn):{},Qn="FORBID_ATTR"in Ln?addToSet({},Ln.FORBID_ATTR,Bn):{},Dr="USE_PROFILES"in Ln?Ln.USE_PROFILES:!1,_r=Ln.ALLOW_ARIA_ATTR!==!1,Zn=Ln.ALLOW_DATA_ATTR!==!1,Gn=Ln.ALLOW_UNKNOWN_PROTOCOLS||!1,Nn=Ln.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Dn=Ln.SAFE_FOR_TEMPLATES||!1,jn=Ln.SAFE_FOR_XML!==!1,ir=Ln.WHOLE_DOCUMENT||!1,mr=Ln.RETURN_DOM||!1,yr=Ln.RETURN_DOM_FRAGMENT||!1,Cr=Ln.RETURN_TRUSTED_TYPE||!1,Kn=Ln.FORCE_BODY||!1,br=Ln.SANITIZE_DOM!==!1,Pr=Ln.SANITIZE_NAMED_PROPS||!1,tr=Ln.KEEP_CONTENT!==!1,Sr=Ln.IN_PLACE||!1,On=Ln.ALLOWED_URI_REGEXP||On,Ar=Ln.NAMESPACE||nr,Rn=Ln.CUSTOM_ELEMENT_HANDLING||{},Ln.CUSTOM_ELEMENT_HANDLING&&Er(Ln.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Rn.tagNameCheck=Ln.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ln.CUSTOM_ELEMENT_HANDLING&&Er(Ln.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Rn.attributeNameCheck=Ln.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ln.CUSTOM_ELEMENT_HANDLING&&typeof Ln.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Rn.allowCustomizedBuiltInElements=Ln.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Dn&&(Zn=!1),yr&&(mr=!0),Dr&&(Mn=addToSet({},_toConsumableArray(text)),zn=[],Dr.html===!0&&(addToSet(Mn,html$1$1),addToSet(zn,html$3)),Dr.svg===!0&&(addToSet(Mn,svg$1),addToSet(zn,svg),addToSet(zn,xml)),Dr.svgFilters===!0&&(addToSet(Mn,svgFilters),addToSet(zn,svg),addToSet(zn,xml)),Dr.mathMl===!0&&(addToSet(Mn,mathMl$1),addToSet(zn,mathMl),addToSet(zn,xml))),Ln.ADD_TAGS&&(Mn===Un&&(Mn=clone(Mn)),addToSet(Mn,Ln.ADD_TAGS,Bn)),Ln.ADD_ATTR&&(zn===Hn&&(zn=clone(zn)),addToSet(zn,Ln.ADD_ATTR,Bn)),Ln.ADD_URI_SAFE_ATTR&&addToSet(Wn,Ln.ADD_URI_SAFE_ATTR,Bn),Ln.FORBID_CONTENTS&&(Lr===Ur&&(Lr=clone(Lr)),addToSet(Lr,Ln.FORBID_CONTENTS,Bn)),tr&&(Mn["#text"]=!0),ir&&addToSet(Mn,["html","head","body"]),Mn.table&&(addToSet(Mn,["tbody"]),delete Jn.tbody),freeze&&freeze(Ln),or=Ln)},Rr=addToSet({},["mi","mo","mn","ms","mtext"]),Or=addToSet({},["foreignobject","annotation-xml"]),Mr=addToSet({},["title","style","font","a","script"]),$r=addToSet({},svg$1);addToSet($r,svgFilters),addToSet($r,svgDisallowed);var zr=addToSet({},mathMl$1);addToSet(zr,mathMlDisallowed);var Vr=function(Ln){var vr=Pt(Ln);(!vr||!vr.tagName)&&(vr={namespaceURI:Ar,tagName:"template"});var Ir=stringToLowerCase(Ln.tagName),Kr=stringToLowerCase(vr.tagName);return Yn[Ln.namespaceURI]?Ln.namespaceURI===sr?vr.namespaceURI===nr?Ir==="svg":vr.namespaceURI===Vn?Ir==="svg"&&(Kr==="annotation-xml"||Rr[Kr]):!!$r[Ir]:Ln.namespaceURI===Vn?vr.namespaceURI===nr?Ir==="math":vr.namespaceURI===sr?Ir==="math"&&Or[Kr]:!!zr[Ir]:Ln.namespaceURI===nr?vr.namespaceURI===sr&&!Or[Kr]||vr.namespaceURI===Vn&&!Rr[Kr]?!1:!zr[Ir]&&(Mr[Ir]||!$r[Ir]):!!(Hr==="application/xhtml+xml"&&Yn[Ln.namespaceURI]):!1},Fr=function(Ln){arrayPush(oe.removed,{element:Ln});try{Ln.parentNode.removeChild(Ln)}catch{try{Ln.outerHTML=kt}catch{Ln.remove()}}},jr=function(Ln,vr){try{arrayPush(oe.removed,{attribute:vr.getAttributeNode(Ln),from:vr})}catch{arrayPush(oe.removed,{attribute:null,from:vr})}if(vr.removeAttribute(Ln),Ln==="is"&&!zn[Ln])if(mr||yr)try{Fr(vr)}catch{}else try{vr.setAttribute(Ln,"")}catch{}},Xn=function(Ln){var vr,Ir;if(Kn)Ln="<remove></remove>"+Ln;else{var Kr=stringMatch(Ln,/^[\r\n\t ]+/);Ir=Kr&&Kr[0]}Hr==="application/xhtml+xml"&&Ar===nr&&(Ln='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ln+"</body></html>");var to=Et?Et.createHTML(Ln):Ln;if(Ar===nr)try{vr=new Ne().parseFromString(to,Hr)}catch{}if(!vr||!vr.documentElement){vr=Dt.createDocument(Ar,"template",null);try{vr.documentElement.innerHTML=Wr?kt:to}catch{}}var io=vr.body||vr.documentElement;return Ln&&Ir&&io.insertBefore(ue.createTextNode(Ir),io.childNodes[0]||null),Ar===nr?_n.call(vr,ir?"html":"body")[0]:ir?vr.documentElement:io},Tr=function(Ln){return Lt.call(Ln.ownerDocument||Ln,Ln,Ce.SHOW_ELEMENT|Ce.SHOW_COMMENT|Ce.SHOW_TEXT|Ce.SHOW_PROCESSING_INSTRUCTION|Ce.SHOW_CDATA_SECTION,null,!1)},Br=function(Ln){return Ln instanceof $e&&(typeof Ln.nodeName!="string"||typeof Ln.textContent!="string"||typeof Ln.removeChild!="function"||!(Ln.attributes instanceof Ie)||typeof Ln.removeAttribute!="function"||typeof Ln.setAttribute!="function"||typeof Ln.namespaceURI!="string"||typeof Ln.insertBefore!="function"||typeof Ln.hasChildNodes!="function")},Gr=function(Ln){return _typeof$1(pe)==="object"?Ln instanceof pe:Ln&&_typeof$1(Ln)==="object"&&typeof Ln.nodeType=="number"&&typeof Ln.nodeName=="string"},Zr=function(Ln,vr,Ir){Tn[Ln]&&arrayForEach(Tn[Ln],function(Kr){Kr.call(oe,vr,Ir,or)})},oo=function(Ln){var vr;if(Zr("beforeSanitizeElements",Ln,null),Br(Ln)||regExpTest(/[\u0080-\uFFFF]/,Ln.nodeName))return Fr(Ln),!0;var Ir=Bn(Ln.nodeName);if(Zr("uponSanitizeElement",Ln,{tagName:Ir,allowedTags:Mn}),Ln.hasChildNodes()&&!Gr(Ln.firstElementChild)&&(!Gr(Ln.content)||!Gr(Ln.content.firstElementChild))&&regExpTest(/<[/\w]/g,Ln.innerHTML)&&regExpTest(/<[/\w]/g,Ln.textContent)||Ir==="select"&&regExpTest(/<template/i,Ln.innerHTML)||Ln.nodeType===7||jn&&Ln.nodeType===8&&regExpTest(/<[/\w]/g,Ln.data))return Fr(Ln),!0;if(!Mn[Ir]||Jn[Ir]){if(!Jn[Ir]&&Yr(Ir)&&(Rn.tagNameCheck instanceof RegExp&&regExpTest(Rn.tagNameCheck,Ir)||Rn.tagNameCheck instanceof Function&&Rn.tagNameCheck(Ir)))return!1;if(tr&&!Lr[Ir]){var Kr=Pt(Ln)||Ln.parentNode,to=Ue(Ln)||Ln.childNodes;if(to&&Kr)for(var io=to.length,co=io-1;co>=0;--co){var uo=Ve(to[co],!0);uo.__removalCount=(Ln.__removalCount||0)+1,Kr.insertBefore(uo,ze(Ln))}}return Fr(Ln),!0}return Ln instanceof _e&&!Vr(Ln)||(Ir==="noscript"||Ir==="noembed"||Ir==="noframes")&&regExpTest(/<\/no(script|embed|frames)/i,Ln.innerHTML)?(Fr(Ln),!0):(Dn&&Ln.nodeType===3&&(vr=Ln.textContent,vr=stringReplace(vr,$n," "),vr=stringReplace(vr,wn," "),vr=stringReplace(vr,Cn," "),Ln.textContent!==vr&&(arrayPush(oe.removed,{element:Ln.cloneNode()}),Ln.textContent=vr)),Zr("afterSanitizeElements",Ln,null),!1)},Jr=function(Ln,vr,Ir){if(br&&(vr==="id"||vr==="name")&&(Ir in ue||Ir in xr))return!1;if(!(Zn&&!Qn[vr]&&regExpTest(Sn,vr))){if(!(_r&&regExpTest(In,vr))){if(!zn[vr]||Qn[vr]){if(!(Yr(Ln)&&(Rn.tagNameCheck instanceof RegExp&&regExpTest(Rn.tagNameCheck,Ln)||Rn.tagNameCheck instanceof Function&&Rn.tagNameCheck(Ln))&&(Rn.attributeNameCheck instanceof RegExp&&regExpTest(Rn.attributeNameCheck,vr)||Rn.attributeNameCheck instanceof Function&&Rn.attributeNameCheck(vr))||vr==="is"&&Rn.allowCustomizedBuiltInElements&&(Rn.tagNameCheck instanceof RegExp&&regExpTest(Rn.tagNameCheck,Ir)||Rn.tagNameCheck instanceof Function&&Rn.tagNameCheck(Ir))))return!1}else if(!Wn[vr]){if(!regExpTest(On,stringReplace(Ir,xn,""))){if(!((vr==="src"||vr==="xlink:href"||vr==="href")&&Ln!=="script"&&stringIndexOf$2(Ir,"data:")===0&&Xr[Ln])){if(!(Gn&&!regExpTest(En,stringReplace(Ir,xn,"")))){if(Ir)return!1}}}}}}return!0},Yr=function(Ln){return Ln!=="annotation-xml"&&stringMatch(Ln,kn)},Qr=function(Ln){var vr,Ir,Kr,to;Zr("beforeSanitizeAttributes",Ln,null);var io=Ln.attributes;if(io){var co={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:zn};for(to=io.length;to--;){vr=io[to];var uo=vr,lo=uo.name,mo=uo.namespaceURI;if(Ir=lo==="value"?vr.value:stringTrim$1(vr.value),Kr=Bn(lo),co.attrName=Kr,co.attrValue=Ir,co.keepAttr=!0,co.forceKeepAttr=void 0,Zr("uponSanitizeAttribute",Ln,co),Ir=co.attrValue,jn&&regExpTest(/((--!?|])>)|<\/(style|title)/i,Ir)){jr(lo,Ln);continue}if(!co.forceKeepAttr&&(jr(lo,Ln),!!co.keepAttr)){if(!Nn&&regExpTest(/\/>/i,Ir)){jr(lo,Ln);continue}Dn&&(Ir=stringReplace(Ir,$n," "),Ir=stringReplace(Ir,wn," "),Ir=stringReplace(Ir,Cn," "));var yo=Bn(Ln.nodeName);if(Jr(yo,Kr,Ir)){if(Pr&&(Kr==="id"||Kr==="name")&&(jr(lo,Ln),Ir=gr+Ir),Et&&_typeof$1(Oe)==="object"&&typeof Oe.getAttributeType=="function"&&!mo)switch(Oe.getAttributeType(yo,Kr)){case"TrustedHTML":{Ir=Et.createHTML(Ir);break}case"TrustedScriptURL":{Ir=Et.createScriptURL(Ir);break}}try{mo?Ln.setAttributeNS(mo,lo,Ir):Ln.setAttribute(lo,Ir),Br(Ln)?Fr(Ln):arrayPop(oe.removed)}catch{}}}}Zr("afterSanitizeAttributes",Ln,null)}},so=function qn(Ln){var vr,Ir=Tr(Ln);for(Zr("beforeSanitizeShadowDOM",Ln,null);vr=Ir.nextNode();)Zr("uponSanitizeShadowNode",vr,null),!oo(vr)&&(vr.content instanceof de&&qn(vr.content),Qr(vr));Zr("afterSanitizeShadowDOM",Ln,null)};return oe.sanitize=function(qn){var Ln=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},vr,Ir,Kr,to,io;if(Wr=!qn,Wr&&(qn="<!-->"),typeof qn!="string"&&!Gr(qn))if(typeof qn.toString=="function"){if(qn=qn.toString(),typeof qn!="string")throw typeErrorCreate("dirty is not a string, aborting")}else throw typeErrorCreate("toString is not a function");if(!oe.isSupported){if(_typeof$1(le.toStaticHTML)==="object"||typeof le.toStaticHTML=="function"){if(typeof qn=="string")return le.toStaticHTML(qn);if(Gr(qn))return le.toStaticHTML(qn.outerHTML)}return qn}if(Fn||kr(Ln),oe.removed=[],typeof qn=="string"&&(Sr=!1),Sr){if(qn.nodeName){var co=Bn(qn.nodeName);if(!Mn[co]||Jn[co])throw typeErrorCreate("root node is forbidden and cannot be sanitized in-place")}}else if(qn instanceof pe)vr=Xn("<!---->"),Ir=vr.ownerDocument.importNode(qn,!0),Ir.nodeType===1&&Ir.nodeName==="BODY"||Ir.nodeName==="HTML"?vr=Ir:vr.appendChild(Ir);else{if(!mr&&!Dn&&!ir&&qn.indexOf("<")===-1)return Et&&Cr?Et.createHTML(qn):qn;if(vr=Xn(qn),!vr)return mr?null:Cr?kt:""}vr&&Kn&&Fr(vr.firstChild);for(var uo=Tr(Sr?qn:vr);Kr=uo.nextNode();)Kr.nodeType===3&&Kr===to||oo(Kr)||(Kr.content instanceof de&&so(Kr.content),Qr(Kr),to=Kr);if(to=null,Sr)return qn;if(mr){if(yr)for(io=jt.call(vr.ownerDocument);vr.firstChild;)io.appendChild(vr.firstChild);else io=vr;return(zn.shadowroot||zn.shadowrootmod)&&(io=bn.call(ie,io,!0)),io}var lo=ir?vr.outerHTML:vr.innerHTML;return ir&&Mn["!doctype"]&&vr.ownerDocument&&vr.ownerDocument.doctype&&vr.ownerDocument.doctype.name&&regExpTest(DOCTYPE_NAME,vr.ownerDocument.doctype.name)&&(lo="<!DOCTYPE "+vr.ownerDocument.doctype.name+`>
`+lo),Dn&&(lo=stringReplace(lo,$n," "),lo=stringReplace(lo,wn," "),lo=stringReplace(lo,Cn," ")),Et&&Cr?Et.createHTML(lo):lo},oe.setConfig=function(qn){kr(qn),Fn=!0},oe.clearConfig=function(){or=null,Fn=!1},oe.isValidAttribute=function(qn,Ln,vr){or||kr({});var Ir=Bn(qn),Kr=Bn(Ln);return Jr(Ir,Kr,vr)},oe.addHook=function(qn,Ln){typeof Ln=="function"&&(Tn[qn]=Tn[qn]||[],arrayPush(Tn[qn],Ln))},oe.removeHook=function(qn){if(Tn[qn])return arrayPop(Tn[qn])},oe.removeHooks=function(qn){Tn[qn]&&(Tn[qn]=[])},oe.removeAllHooks=function(){Tn={}},oe}var purify=createDOMPurify();const purify_es=Object.freeze(Object.defineProperty({__proto__:null,default:purify},Symbol.toStringTag,{value:"Module"}));var check=function(le){return le&&le.Math===Math&&le},global$l=check(typeof globalThis=="object"&&globalThis)||check(typeof window=="object"&&window)||check(typeof self=="object"&&self)||check(typeof commonjsGlobal=="object"&&commonjsGlobal)||check(typeof commonjsGlobal=="object"&&commonjsGlobal)||function(){return this}()||Function("return this")(),objectGetOwnPropertyDescriptor={},fails$l=function(le){try{return!!le()}catch{return!0}},fails$k=fails$l,descriptors=!fails$k(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),fails$j=fails$l,functionBindNative=!fails$j(function(){var le=(function(){}).bind();return typeof le!="function"||le.hasOwnProperty("prototype")}),NATIVE_BIND$3=functionBindNative,call$j=Function.prototype.call,functionCall=NATIVE_BIND$3?call$j.bind(call$j):function(){return call$j.apply(call$j,arguments)},objectPropertyIsEnumerable={},$propertyIsEnumerable={}.propertyIsEnumerable,getOwnPropertyDescriptor$4=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor$4&&!$propertyIsEnumerable.call({1:2},1);objectPropertyIsEnumerable.f=NASHORN_BUG?function le(oe){var ie=getOwnPropertyDescriptor$4(this,oe);return!!ie&&ie.enumerable}:$propertyIsEnumerable;var createPropertyDescriptor$3=function(le,oe){return{enumerable:!(le&1),configurable:!(le&2),writable:!(le&4),value:oe}},NATIVE_BIND$2=functionBindNative,FunctionPrototype$2=Function.prototype,call$i=FunctionPrototype$2.call,uncurryThisWithBind=NATIVE_BIND$2&&FunctionPrototype$2.bind.bind(call$i,call$i),functionUncurryThis=NATIVE_BIND$2?uncurryThisWithBind:function(le){return function(){return call$i.apply(le,arguments)}},uncurryThis$o=functionUncurryThis,toString$b=uncurryThis$o({}.toString),stringSlice$7=uncurryThis$o("".slice),classofRaw$2=function(le){return stringSlice$7(toString$b(le),8,-1)},uncurryThis$n=functionUncurryThis,fails$i=fails$l,classof$8=classofRaw$2,$Object$4=Object,split=uncurryThis$n("".split),indexedObject=fails$i(function(){return!$Object$4("z").propertyIsEnumerable(0)})?function(le){return classof$8(le)==="String"?split(le,""):$Object$4(le)}:$Object$4,isNullOrUndefined$7=function(le){return le==null},isNullOrUndefined$6=isNullOrUndefined$7,$TypeError$f=TypeError,requireObjectCoercible$b=function(le){if(isNullOrUndefined$6(le))throw new $TypeError$f("Can't call method on "+le);return le},IndexedObject$1=indexedObject,requireObjectCoercible$a=requireObjectCoercible$b,toIndexedObject$5=function(le){return IndexedObject$1(requireObjectCoercible$a(le))},documentAll=typeof document=="object"&&document.all,isCallable$l=typeof documentAll>"u"&&documentAll!==void 0?function(le){return typeof le=="function"||le===documentAll}:function(le){return typeof le=="function"},isCallable$k=isCallable$l,isObject$b=function(le){return typeof le=="object"?le!==null:isCallable$k(le)},global$k=global$l,isCallable$j=isCallable$l,aFunction=function(le){return isCallable$j(le)?le:void 0},getBuiltIn$7=function(le,oe){return arguments.length<2?aFunction(global$k[le]):global$k[le]&&global$k[le][oe]},uncurryThis$m=functionUncurryThis,objectIsPrototypeOf=uncurryThis$m({}.isPrototypeOf),engineUserAgent=typeof navigator<"u"&&String(navigator.userAgent)||"",global$j=global$l,userAgent$3=engineUserAgent,process$4=global$j.process,Deno$1=global$j.Deno,versions=process$4&&process$4.versions||Deno$1&&Deno$1.version,v8=versions&&versions.v8,match,version;v8&&(match=v8.split("."),version=match[0]>0&&match[0]<4?1:+(match[0]+match[1]));!version&&userAgent$3&&(match=userAgent$3.match(/Edge\/(\d+)/),(!match||match[1]>=74)&&(match=userAgent$3.match(/Chrome\/(\d+)/),match&&(version=+match[1])));var engineV8Version=version,V8_VERSION$1=engineV8Version,fails$h=fails$l,global$i=global$l,$String$5=global$i.String,symbolConstructorDetection=!!Object.getOwnPropertySymbols&&!fails$h(function(){var le=Symbol("symbol detection");return!$String$5(le)||!(Object(le)instanceof Symbol)||!Symbol.sham&&V8_VERSION$1&&V8_VERSION$1<41}),NATIVE_SYMBOL$1=symbolConstructorDetection,useSymbolAsUid=NATIVE_SYMBOL$1&&!Symbol.sham&&typeof Symbol.iterator=="symbol",getBuiltIn$6=getBuiltIn$7,isCallable$i=isCallable$l,isPrototypeOf$3=objectIsPrototypeOf,USE_SYMBOL_AS_UID$1=useSymbolAsUid,$Object$3=Object,isSymbol$2=USE_SYMBOL_AS_UID$1?function(le){return typeof le=="symbol"}:function(le){var oe=getBuiltIn$6("Symbol");return isCallable$i(oe)&&isPrototypeOf$3(oe.prototype,$Object$3(le))},$String$4=String,tryToString$4=function(le){try{return $String$4(le)}catch{return"Object"}},isCallable$h=isCallable$l,tryToString$3=tryToString$4,$TypeError$e=TypeError,aCallable$9=function(le){if(isCallable$h(le))return le;throw new $TypeError$e(tryToString$3(le)+" is not a function")},aCallable$8=aCallable$9,isNullOrUndefined$5=isNullOrUndefined$7,getMethod$6=function(le,oe){var ie=le[oe];return isNullOrUndefined$5(ie)?void 0:aCallable$8(ie)},call$h=functionCall,isCallable$g=isCallable$l,isObject$a=isObject$b,$TypeError$d=TypeError,ordinaryToPrimitive$1=function(le,oe){var ie,ue;if(oe==="string"&&isCallable$g(ie=le.toString)&&!isObject$a(ue=call$h(ie,le))||isCallable$g(ie=le.valueOf)&&!isObject$a(ue=call$h(ie,le))||oe!=="string"&&isCallable$g(ie=le.toString)&&!isObject$a(ue=call$h(ie,le)))return ue;throw new $TypeError$d("Can't convert object to primitive value")},sharedStore={exports:{}},global$h=global$l,defineProperty$5=Object.defineProperty,defineGlobalProperty$3=function(le,oe){try{defineProperty$5(global$h,le,{value:oe,configurable:!0,writable:!0})}catch{global$h[le]=oe}return oe},globalThis$1=global$l,defineGlobalProperty$2=defineGlobalProperty$3,SHARED="__core-js_shared__",store$3=sharedStore.exports=globalThis$1[SHARED]||defineGlobalProperty$2(SHARED,{});(store$3.versions||(store$3.versions=[])).push({version:"3.37.1",mode:"global",copyright:" 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"});var sharedStoreExports=sharedStore.exports,store$2=sharedStoreExports,shared$4=function(le,oe){return store$2[le]||(store$2[le]=oe||{})},requireObjectCoercible$9=requireObjectCoercible$b,$Object$2=Object,toObject$4=function(le){return $Object$2(requireObjectCoercible$9(le))},uncurryThis$l=functionUncurryThis,toObject$3=toObject$4,hasOwnProperty=uncurryThis$l({}.hasOwnProperty),hasOwnProperty_1=Object.hasOwn||function le(oe,ie){return hasOwnProperty(toObject$3(oe),ie)},uncurryThis$k=functionUncurryThis,id$1=0,postfix=Math.random(),toString$a=uncurryThis$k(1 .toString),uid$2=function(le){return"Symbol("+(le===void 0?"":le)+")_"+toString$a(++id$1+postfix,36)},global$g=global$l,shared$3=shared$4,hasOwn$a=hasOwnProperty_1,uid$1=uid$2,NATIVE_SYMBOL=symbolConstructorDetection,USE_SYMBOL_AS_UID=useSymbolAsUid,Symbol$1=global$g.Symbol,WellKnownSymbolsStore=shared$3("wks"),createWellKnownSymbol=USE_SYMBOL_AS_UID?Symbol$1.for||Symbol$1:Symbol$1&&Symbol$1.withoutSetter||uid$1,wellKnownSymbol$i=function(le){return hasOwn$a(WellKnownSymbolsStore,le)||(WellKnownSymbolsStore[le]=NATIVE_SYMBOL&&hasOwn$a(Symbol$1,le)?Symbol$1[le]:createWellKnownSymbol("Symbol."+le)),WellKnownSymbolsStore[le]},call$g=functionCall,isObject$9=isObject$b,isSymbol$1=isSymbol$2,getMethod$5=getMethod$6,ordinaryToPrimitive=ordinaryToPrimitive$1,wellKnownSymbol$h=wellKnownSymbol$i,$TypeError$c=TypeError,TO_PRIMITIVE=wellKnownSymbol$h("toPrimitive"),toPrimitive$2=function(le,oe){if(!isObject$9(le)||isSymbol$1(le))return le;var ie=getMethod$5(le,TO_PRIMITIVE),ue;if(ie){if(oe===void 0&&(oe="default"),ue=call$g(ie,le,oe),!isObject$9(ue)||isSymbol$1(ue))return ue;throw new $TypeError$c("Can't convert object to primitive value")}return oe===void 0&&(oe="number"),ordinaryToPrimitive(le,oe)},toPrimitive$1=toPrimitive$2,isSymbol=isSymbol$2,toPropertyKey$3=function(le){var oe=toPrimitive$1(le,"string");return isSymbol(oe)?oe:oe+""},global$f=global$l,isObject$8=isObject$b,document$3=global$f.document,EXISTS$1=isObject$8(document$3)&&isObject$8(document$3.createElement),documentCreateElement$2=function(le){return EXISTS$1?document$3.createElement(le):{}},DESCRIPTORS$a=descriptors,fails$g=fails$l,createElement$1=documentCreateElement$2,ie8DomDefine=!DESCRIPTORS$a&&!fails$g(function(){return Object.defineProperty(createElement$1("div"),"a",{get:function(){return 7}}).a!==7}),DESCRIPTORS$9=descriptors,call$f=functionCall,propertyIsEnumerableModule=objectPropertyIsEnumerable,createPropertyDescriptor$2=createPropertyDescriptor$3,toIndexedObject$4=toIndexedObject$5,toPropertyKey$2=toPropertyKey$3,hasOwn$9=hasOwnProperty_1,IE8_DOM_DEFINE$1=ie8DomDefine,$getOwnPropertyDescriptor$1=Object.getOwnPropertyDescriptor;objectGetOwnPropertyDescriptor.f=DESCRIPTORS$9?$getOwnPropertyDescriptor$1:function le(oe,ie){if(oe=toIndexedObject$4(oe),ie=toPropertyKey$2(ie),IE8_DOM_DEFINE$1)try{return $getOwnPropertyDescriptor$1(oe,ie)}catch{}if(hasOwn$9(oe,ie))return createPropertyDescriptor$2(!call$f(propertyIsEnumerableModule.f,oe,ie),oe[ie])};var objectDefineProperty={},DESCRIPTORS$8=descriptors,fails$f=fails$l,v8PrototypeDefineBug=DESCRIPTORS$8&&fails$f(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),isObject$7=isObject$b,$String$3=String,$TypeError$b=TypeError,anObject$f=function(le){if(isObject$7(le))return le;throw new $TypeError$b($String$3(le)+" is not an object")},DESCRIPTORS$7=descriptors,IE8_DOM_DEFINE=ie8DomDefine,V8_PROTOTYPE_DEFINE_BUG$1=v8PrototypeDefineBug,anObject$e=anObject$f,toPropertyKey$1=toPropertyKey$3,$TypeError$a=TypeError,$defineProperty=Object.defineProperty,$getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,ENUMERABLE="enumerable",CONFIGURABLE$1="configurable",WRITABLE="writable";objectDefineProperty.f=DESCRIPTORS$7?V8_PROTOTYPE_DEFINE_BUG$1?function le(oe,ie,ue){if(anObject$e(oe),ie=toPropertyKey$1(ie),anObject$e(ue),typeof oe=="function"&&ie==="prototype"&&"value"in ue&&WRITABLE in ue&&!ue[WRITABLE]){var de=$getOwnPropertyDescriptor(oe,ie);de&&de[WRITABLE]&&(oe[ie]=ue.value,ue={configurable:CONFIGURABLE$1 in ue?ue[CONFIGURABLE$1]:de[CONFIGURABLE$1],enumerable:ENUMERABLE in ue?ue[ENUMERABLE]:de[ENUMERABLE],writable:!1})}return $defineProperty(oe,ie,ue)}:$defineProperty:function le(oe,ie,ue){if(anObject$e(oe),ie=toPropertyKey$1(ie),anObject$e(ue),IE8_DOM_DEFINE)try{return $defineProperty(oe,ie,ue)}catch{}if("get"in ue||"set"in ue)throw new $TypeError$a("Accessors not supported");return"value"in ue&&(oe[ie]=ue.value),oe};var DESCRIPTORS$6=descriptors,definePropertyModule$3=objectDefineProperty,createPropertyDescriptor$1=createPropertyDescriptor$3,createNonEnumerableProperty$5=DESCRIPTORS$6?function(le,oe,ie){return definePropertyModule$3.f(le,oe,createPropertyDescriptor$1(1,ie))}:function(le,oe,ie){return le[oe]=ie,le},makeBuiltIn$3={exports:{}},DESCRIPTORS$5=descriptors,hasOwn$8=hasOwnProperty_1,FunctionPrototype$1=Function.prototype,getDescriptor=DESCRIPTORS$5&&Object.getOwnPropertyDescriptor,EXISTS=hasOwn$8(FunctionPrototype$1,"name"),PROPER=EXISTS&&(function le(){}).name==="something",CONFIGURABLE=EXISTS&&(!DESCRIPTORS$5||DESCRIPTORS$5&&getDescriptor(FunctionPrototype$1,"name").configurable),functionName={EXISTS,PROPER,CONFIGURABLE},uncurryThis$j=functionUncurryThis,isCallable$f=isCallable$l,store$1=sharedStoreExports,functionToString=uncurryThis$j(Function.toString);isCallable$f(store$1.inspectSource)||(store$1.inspectSource=function(le){return functionToString(le)});var inspectSource$3=store$1.inspectSource,global$e=global$l,isCallable$e=isCallable$l,WeakMap$2=global$e.WeakMap,weakMapBasicDetection=isCallable$e(WeakMap$2)&&/native code/.test(String(WeakMap$2)),shared$2=shared$4,uid=uid$2,keys=shared$2("keys"),sharedKey$3=function(le){return keys[le]||(keys[le]=uid(le))},hiddenKeys$4={},NATIVE_WEAK_MAP=weakMapBasicDetection,global$d=global$l,isObject$6=isObject$b,createNonEnumerableProperty$4=createNonEnumerableProperty$5,hasOwn$7=hasOwnProperty_1,shared$1=sharedStoreExports,sharedKey$2=sharedKey$3,hiddenKeys$3=hiddenKeys$4,OBJECT_ALREADY_INITIALIZED="Object already initialized",TypeError$2=global$d.TypeError,WeakMap$1=global$d.WeakMap,set$1,get,has,enforce=function(le){return has(le)?get(le):set$1(le,{})},getterFor=function(le){return function(oe){var ie;if(!isObject$6(oe)||(ie=get(oe)).type!==le)throw new TypeError$2("Incompatible receiver, "+le+" required");return ie}};if(NATIVE_WEAK_MAP||shared$1.state){var store=shared$1.state||(shared$1.state=new WeakMap$1);store.get=store.get,store.has=store.has,store.set=store.set,set$1=function(le,oe){if(store.has(le))throw new TypeError$2(OBJECT_ALREADY_INITIALIZED);return oe.facade=le,store.set(le,oe),oe},get=function(le){return store.get(le)||{}},has=function(le){return store.has(le)}}else{var STATE=sharedKey$2("state");hiddenKeys$3[STATE]=!0,set$1=function(le,oe){if(hasOwn$7(le,STATE))throw new TypeError$2(OBJECT_ALREADY_INITIALIZED);return oe.facade=le,createNonEnumerableProperty$4(le,STATE,oe),oe},get=function(le){return hasOwn$7(le,STATE)?le[STATE]:{}},has=function(le){return hasOwn$7(le,STATE)}}var internalState={set:set$1,get,has,enforce,getterFor},uncurryThis$i=functionUncurryThis,fails$e=fails$l,isCallable$d=isCallable$l,hasOwn$6=hasOwnProperty_1,DESCRIPTORS$4=descriptors,CONFIGURABLE_FUNCTION_NAME$1=functionName.CONFIGURABLE,inspectSource$2=inspectSource$3,InternalStateModule$2=internalState,enforceInternalState=InternalStateModule$2.enforce,getInternalState$2=InternalStateModule$2.get,$String$2=String,defineProperty$4=Object.defineProperty,stringSlice$6=uncurryThis$i("".slice),replace$3=uncurryThis$i("".replace),join=uncurryThis$i([].join),CONFIGURABLE_LENGTH=DESCRIPTORS$4&&!fails$e(function(){return defineProperty$4(function(){},"length",{value:8}).length!==8}),TEMPLATE=String(String).split("String"),makeBuiltIn$2=makeBuiltIn$3.exports=function(le,oe,ie){stringSlice$6($String$2(oe),0,7)==="Symbol("&&(oe="["+replace$3($String$2(oe),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),ie&&ie.getter&&(oe="get "+oe),ie&&ie.setter&&(oe="set "+oe),(!hasOwn$6(le,"name")||CONFIGURABLE_FUNCTION_NAME$1&&le.name!==oe)&&(DESCRIPTORS$4?defineProperty$4(le,"name",{value:oe,configurable:!0}):le.name=oe),CONFIGURABLE_LENGTH&&ie&&hasOwn$6(ie,"arity")&&le.length!==ie.arity&&defineProperty$4(le,"length",{value:ie.arity});try{ie&&hasOwn$6(ie,"constructor")&&ie.constructor?DESCRIPTORS$4&&defineProperty$4(le,"prototype",{writable:!1}):le.prototype&&(le.prototype=void 0)}catch{}var ue=enforceInternalState(le);return hasOwn$6(ue,"source")||(ue.source=join(TEMPLATE,typeof oe=="string"?oe:"")),le};Function.prototype.toString=makeBuiltIn$2(function le(){return isCallable$d(this)&&getInternalState$2(this).source||inspectSource$2(this)},"toString");var makeBuiltInExports=makeBuiltIn$3.exports,isCallable$c=isCallable$l,definePropertyModule$2=objectDefineProperty,makeBuiltIn$1=makeBuiltInExports,defineGlobalProperty$1=defineGlobalProperty$3,defineBuiltIn$7=function(le,oe,ie,ue){ue||(ue={});var de=ue.enumerable,he=ue.name!==void 0?ue.name:oe;if(isCallable$c(ie)&&makeBuiltIn$1(ie,he,ue),ue.global)de?le[oe]=ie:defineGlobalProperty$1(oe,ie);else{try{ue.unsafe?le[oe]&&(de=!0):delete le[oe]}catch{}de?le[oe]=ie:definePropertyModule$2.f(le,oe,{value:ie,enumerable:!1,configurable:!ue.nonConfigurable,writable:!ue.nonWritable})}return le},objectGetOwnPropertyNames={},ceil=Math.ceil,floor$1=Math.floor,mathTrunc=Math.trunc||function le(oe){var ie=+oe;return(ie>0?floor$1:ceil)(ie)},trunc=mathTrunc,toIntegerOrInfinity$4=function(le){var oe=+le;return oe!==oe||oe===0?0:trunc(oe)},toIntegerOrInfinity$3=toIntegerOrInfinity$4,max$1=Math.max,min$5=Math.min,toAbsoluteIndex$1=function(le,oe){var ie=toIntegerOrInfinity$3(le);return ie<0?max$1(ie+oe,0):min$5(ie,oe)},toIntegerOrInfinity$2=toIntegerOrInfinity$4,min$4=Math.min,toLength$6=function(le){var oe=toIntegerOrInfinity$2(le);return oe>0?min$4(oe,9007199254740991):0},toLength$5=toLength$6,lengthOfArrayLike$3=function(le){return toLength$5(le.length)},toIndexedObject$3=toIndexedObject$5,toAbsoluteIndex=toAbsoluteIndex$1,lengthOfArrayLike$2=lengthOfArrayLike$3,createMethod$3=function(le){return function(oe,ie,ue){var de=toIndexedObject$3(oe),he=lengthOfArrayLike$2(de);if(he===0)return!le&&-1;var pe=toAbsoluteIndex(ue,he),_e;if(le&&ie!==ie){for(;he>pe;)if(_e=de[pe++],_e!==_e)return!0}else for(;he>pe;pe++)if((le||pe in de)&&de[pe]===ie)return le||pe||0;return!le&&-1}},arrayIncludes={includes:createMethod$3(!0),indexOf:createMethod$3(!1)},uncurryThis$h=functionUncurryThis,hasOwn$5=hasOwnProperty_1,toIndexedObject$2=toIndexedObject$5,indexOf$1=arrayIncludes.indexOf,hiddenKeys$2=hiddenKeys$4,push$2=uncurryThis$h([].push),objectKeysInternal=function(le,oe){var ie=toIndexedObject$2(le),ue=0,de=[],he;for(he in ie)!hasOwn$5(hiddenKeys$2,he)&&hasOwn$5(ie,he)&&push$2(de,he);for(;oe.length>ue;)hasOwn$5(ie,he=oe[ue++])&&(~indexOf$1(de,he)||push$2(de,he));return de},enumBugKeys$3=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],internalObjectKeys$1=objectKeysInternal,enumBugKeys$2=enumBugKeys$3,hiddenKeys$1=enumBugKeys$2.concat("length","prototype");objectGetOwnPropertyNames.f=Object.getOwnPropertyNames||function le(oe){return internalObjectKeys$1(oe,hiddenKeys$1)};var objectGetOwnPropertySymbols={};objectGetOwnPropertySymbols.f=Object.getOwnPropertySymbols;var getBuiltIn$5=getBuiltIn$7,uncurryThis$g=functionUncurryThis,getOwnPropertyNamesModule=objectGetOwnPropertyNames,getOwnPropertySymbolsModule=objectGetOwnPropertySymbols,anObject$d=anObject$f,concat$1=uncurryThis$g([].concat),ownKeys$4=getBuiltIn$5("Reflect","ownKeys")||function le(oe){var ie=getOwnPropertyNamesModule.f(anObject$d(oe)),ue=getOwnPropertySymbolsModule.f;return ue?concat$1(ie,ue(oe)):ie},hasOwn$4=hasOwnProperty_1,ownKeys$3=ownKeys$4,getOwnPropertyDescriptorModule=objectGetOwnPropertyDescriptor,definePropertyModule$1=objectDefineProperty,copyConstructorProperties$1=function(le,oe,ie){for(var ue=ownKeys$3(oe),de=definePropertyModule$1.f,he=getOwnPropertyDescriptorModule.f,pe=0;pe<ue.length;pe++){var _e=ue[pe];!hasOwn$4(le,_e)&&!(ie&&hasOwn$4(ie,_e))&&de(le,_e,he(oe,_e))}},fails$d=fails$l,isCallable$b=isCallable$l,replacement=/#|\.prototype\./,isForced$2=function(le,oe){var ie=data[normalize(le)];return ie===POLYFILL?!0:ie===NATIVE?!1:isCallable$b(oe)?fails$d(oe):!!oe},normalize=isForced$2.normalize=function(le){return String(le).replace(replacement,".").toLowerCase()},data=isForced$2.data={},NATIVE=isForced$2.NATIVE="N",POLYFILL=isForced$2.POLYFILL="P",isForced_1=isForced$2,global$c=global$l,getOwnPropertyDescriptor$3=objectGetOwnPropertyDescriptor.f,createNonEnumerableProperty$3=createNonEnumerableProperty$5,defineBuiltIn$6=defineBuiltIn$7,defineGlobalProperty=defineGlobalProperty$3,copyConstructorProperties=copyConstructorProperties$1,isForced$1=isForced_1,_export=function(le,oe){var ie=le.target,ue=le.global,de=le.stat,he,pe,_e,Ce,xe,Ie;if(ue?pe=global$c:de?pe=global$c[ie]||defineGlobalProperty(ie,{}):pe=global$c[ie]&&global$c[ie].prototype,pe)for(_e in oe){if(xe=oe[_e],le.dontCallGetSet?(Ie=getOwnPropertyDescriptor$3(pe,_e),Ce=Ie&&Ie.value):Ce=pe[_e],he=isForced$1(ue?_e:ie+(de?".":"#")+_e,le.forced),!he&&Ce!==void 0){if(typeof xe==typeof Ce)continue;copyConstructorProperties(xe,Ce)}(le.sham||Ce&&Ce.sham)&&createNonEnumerableProperty$3(xe,"sham",!0),defineBuiltIn$6(pe,_e,xe,le)}},global$b=global$l,classof$7=classofRaw$2,engineIsNode=classof$7(global$b.process)==="process",uncurryThis$f=functionUncurryThis,aCallable$7=aCallable$9,functionUncurryThisAccessor=function(le,oe,ie){try{return uncurryThis$f(aCallable$7(Object.getOwnPropertyDescriptor(le,oe)[ie]))}catch{}},isObject$5=isObject$b,isPossiblePrototype$1=function(le){return isObject$5(le)||le===null},isPossiblePrototype=isPossiblePrototype$1,$String$1=String,$TypeError$9=TypeError,aPossiblePrototype$1=function(le){if(isPossiblePrototype(le))return le;throw new $TypeError$9("Can't set "+$String$1(le)+" as a prototype")},uncurryThisAccessor=functionUncurryThisAccessor,isObject$4=isObject$b,requireObjectCoercible$8=requireObjectCoercible$b,aPossiblePrototype=aPossiblePrototype$1,objectSetPrototypeOf=Object.setPrototypeOf||("__proto__"in{}?function(){var le=!1,oe={},ie;try{ie=uncurryThisAccessor(Object.prototype,"__proto__","set"),ie(oe,[]),le=oe instanceof Array}catch{}return function(de,he){return requireObjectCoercible$8(de),aPossiblePrototype(he),isObject$4(de)&&(le?ie(de,he):de.__proto__=he),de}}():void 0),defineProperty$3=objectDefineProperty.f,hasOwn$3=hasOwnProperty_1,wellKnownSymbol$g=wellKnownSymbol$i,TO_STRING_TAG$2=wellKnownSymbol$g("toStringTag"),setToStringTag$4=function(le,oe,ie){le&&!ie&&(le=le.prototype),le&&!hasOwn$3(le,TO_STRING_TAG$2)&&defineProperty$3(le,TO_STRING_TAG$2,{configurable:!0,value:oe})},makeBuiltIn=makeBuiltInExports,defineProperty$2=objectDefineProperty,defineBuiltInAccessor$1=function(le,oe,ie){return ie.get&&makeBuiltIn(ie.get,oe,{getter:!0}),ie.set&&makeBuiltIn(ie.set,oe,{setter:!0}),defineProperty$2.f(le,oe,ie)},getBuiltIn$4=getBuiltIn$7,defineBuiltInAccessor=defineBuiltInAccessor$1,wellKnownSymbol$f=wellKnownSymbol$i,DESCRIPTORS$3=descriptors,SPECIES$3=wellKnownSymbol$f("species"),setSpecies$1=function(le){var oe=getBuiltIn$4(le);DESCRIPTORS$3&&oe&&!oe[SPECIES$3]&&defineBuiltInAccessor(oe,SPECIES$3,{configurable:!0,get:function(){return this}})},isPrototypeOf$2=objectIsPrototypeOf,$TypeError$8=TypeError,anInstance$1=function(le,oe){if(isPrototypeOf$2(oe,le))return le;throw new $TypeError$8("Incorrect invocation")},wellKnownSymbol$e=wellKnownSymbol$i,TO_STRING_TAG$1=wellKnownSymbol$e("toStringTag"),test$1={};test$1[TO_STRING_TAG$1]="z";var toStringTagSupport=String(test$1)==="[object z]",TO_STRING_TAG_SUPPORT=toStringTagSupport,isCallable$a=isCallable$l,classofRaw$1=classofRaw$2,wellKnownSymbol$d=wellKnownSymbol$i,TO_STRING_TAG=wellKnownSymbol$d("toStringTag"),$Object$1=Object,CORRECT_ARGUMENTS=classofRaw$1(function(){return arguments}())==="Arguments",tryGet=function(le,oe){try{return le[oe]}catch{}},classof$6=TO_STRING_TAG_SUPPORT?classofRaw$1:function(le){var oe,ie,ue;return le===void 0?"Undefined":le===null?"Null":typeof(ie=tryGet(oe=$Object$1(le),TO_STRING_TAG))=="string"?ie:CORRECT_ARGUMENTS?classofRaw$1(oe):(ue=classofRaw$1(oe))==="Object"&&isCallable$a(oe.callee)?"Arguments":ue},uncurryThis$e=functionUncurryThis,fails$c=fails$l,isCallable$9=isCallable$l,classof$5=classof$6,getBuiltIn$3=getBuiltIn$7,inspectSource$1=inspectSource$3,noop$1=function(){},construct=getBuiltIn$3("Reflect","construct"),constructorRegExp=/^\s*(?:class|function)\b/,exec$1=uncurryThis$e(constructorRegExp.exec),INCORRECT_TO_STRING=!constructorRegExp.test(noop$1),isConstructorModern=function le(oe){if(!isCallable$9(oe))return!1;try{return construct(noop$1,[],oe),!0}catch{return!1}},isConstructorLegacy=function le(oe){if(!isCallable$9(oe))return!1;switch(classof$5(oe)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return INCORRECT_TO_STRING||!!exec$1(constructorRegExp,inspectSource$1(oe))}catch{return!0}};isConstructorLegacy.sham=!0;var isConstructor$1=!construct||fails$c(function(){var le;return isConstructorModern(isConstructorModern.call)||!isConstructorModern(Object)||!isConstructorModern(function(){le=!0})||le})?isConstructorLegacy:isConstructorModern,isConstructor=isConstructor$1,tryToString$2=tryToString$4,$TypeError$7=TypeError,aConstructor$1=function(le){if(isConstructor(le))return le;throw new $TypeError$7(tryToString$2(le)+" is not a constructor")},anObject$c=anObject$f,aConstructor=aConstructor$1,isNullOrUndefined$4=isNullOrUndefined$7,wellKnownSymbol$c=wellKnownSymbol$i,SPECIES$2=wellKnownSymbol$c("species"),speciesConstructor$2=function(le,oe){var ie=anObject$c(le).constructor,ue;return ie===void 0||isNullOrUndefined$4(ue=anObject$c(ie)[SPECIES$2])?oe:aConstructor(ue)},NATIVE_BIND$1=functionBindNative,FunctionPrototype=Function.prototype,apply$2=FunctionPrototype.apply,call$e=FunctionPrototype.call,functionApply=typeof Reflect=="object"&&Reflect.apply||(NATIVE_BIND$1?call$e.bind(apply$2):function(){return call$e.apply(apply$2,arguments)}),classofRaw=classofRaw$2,uncurryThis$d=functionUncurryThis,functionUncurryThisClause=function(le){if(classofRaw(le)==="Function")return uncurryThis$d(le)},uncurryThis$c=functionUncurryThisClause,aCallable$6=aCallable$9,NATIVE_BIND=functionBindNative,bind$4=uncurryThis$c(uncurryThis$c.bind),functionBindContext=function(le,oe){return aCallable$6(le),oe===void 0?le:NATIVE_BIND?bind$4(le,oe):function(){return le.apply(oe,arguments)}},getBuiltIn$2=getBuiltIn$7,html$2=getBuiltIn$2("document","documentElement"),uncurryThis$b=functionUncurryThis,arraySlice$1=uncurryThis$b([].slice),$TypeError$6=TypeError,validateArgumentsLength$1=function(le,oe){if(le<oe)throw new $TypeError$6("Not enough arguments");return le},userAgent$2=engineUserAgent,engineIsIos=/(?:ipad|iphone|ipod).*applewebkit/i.test(userAgent$2),global$a=global$l,apply$1=functionApply,bind$3=functionBindContext,isCallable$8=isCallable$l,hasOwn$2=hasOwnProperty_1,fails$b=fails$l,html$1=html$2,arraySlice=arraySlice$1,createElement=documentCreateElement$2,validateArgumentsLength=validateArgumentsLength$1,IS_IOS$1=engineIsIos,IS_NODE$4=engineIsNode,set=global$a.setImmediate,clear=global$a.clearImmediate,process$3=global$a.process,Dispatch=global$a.Dispatch,Function$1=global$a.Function,MessageChannel=global$a.MessageChannel,String$1=global$a.String,counter=0,queue$3={},ONREADYSTATECHANGE="onreadystatechange",$location,defer,channel,port;fails$b(function(){$location=global$a.location});var run=function(le){if(hasOwn$2(queue$3,le)){var oe=queue$3[le];delete queue$3[le],oe()}},runner=function(le){return function(){run(le)}},eventListener=function(le){run(le.data)},globalPostMessageDefer=function(le){global$a.postMessage(String$1(le),$location.protocol+"//"+$location.host)};(!set||!clear)&&(set=function(oe){validateArgumentsLength(arguments.length,1);var ie=isCallable$8(oe)?oe:Function$1(oe),ue=arraySlice(arguments,1);return queue$3[++counter]=function(){apply$1(ie,void 0,ue)},defer(counter),counter},clear=function(oe){delete queue$3[oe]},IS_NODE$4?defer=function(le){process$3.nextTick(runner(le))}:Dispatch&&Dispatch.now?defer=function(le){Dispatch.now(runner(le))}:MessageChannel&&!IS_IOS$1?(channel=new MessageChannel,port=channel.port2,channel.port1.onmessage=eventListener,defer=bind$3(port.postMessage,port)):global$a.addEventListener&&isCallable$8(global$a.postMessage)&&!global$a.importScripts&&$location&&$location.protocol!=="file:"&&!fails$b(globalPostMessageDefer)?(defer=globalPostMessageDefer,global$a.addEventListener("message",eventListener,!1)):ONREADYSTATECHANGE in createElement("script")?defer=function(le){html$1.appendChild(createElement("script"))[ONREADYSTATECHANGE]=function(){html$1.removeChild(this),run(le)}}:defer=function(le){setTimeout(runner(le),0)});var task$1={set,clear},global$9=global$l,DESCRIPTORS$2=descriptors,getOwnPropertyDescriptor$2=Object.getOwnPropertyDescriptor,safeGetBuiltIn$1=function(le){if(!DESCRIPTORS$2)return global$9[le];var oe=getOwnPropertyDescriptor$2(global$9,le);return oe&&oe.value},Queue$2=function(){this.head=null,this.tail=null};Queue$2.prototype={add:function(le){var oe={item:le,next:null},ie=this.tail;ie?ie.next=oe:this.head=oe,this.tail=oe},get:function(){var le=this.head;if(le){var oe=this.head=le.next;return oe===null&&(this.tail=null),le.item}}};var queue$2=Queue$2,userAgent$1=engineUserAgent,engineIsIosPebble=/ipad|iphone|ipod/i.test(userAgent$1)&&typeof Pebble<"u",userAgent=engineUserAgent,engineIsWebosWebkit=/web0s(?!.*chrome)/i.test(userAgent),global$8=global$l,safeGetBuiltIn=safeGetBuiltIn$1,bind$2=functionBindContext,macrotask=task$1.set,Queue$1=queue$2,IS_IOS=engineIsIos,IS_IOS_PEBBLE=engineIsIosPebble,IS_WEBOS_WEBKIT=engineIsWebosWebkit,IS_NODE$3=engineIsNode,MutationObserver$1=global$8.MutationObserver||global$8.WebKitMutationObserver,document$2=global$8.document,process$2=global$8.process,Promise$1=global$8.Promise,microtask$1=safeGetBuiltIn("queueMicrotask"),notify$1,toggle,node$1,promise,then;if(!microtask$1){var queue$1=new Queue$1,flush=function(){var le,oe;for(IS_NODE$3&&(le=process$2.domain)&&le.exit();oe=queue$1.get();)try{oe()}catch(ie){throw queue$1.head&&notify$1(),ie}le&&le.enter()};!IS_IOS&&!IS_NODE$3&&!IS_WEBOS_WEBKIT&&MutationObserver$1&&document$2?(toggle=!0,node$1=document$2.createTextNode(""),new MutationObserver$1(flush).observe(node$1,{characterData:!0}),notify$1=function(){node$1.data=toggle=!toggle}):!IS_IOS_PEBBLE&&Promise$1&&Promise$1.resolve?(promise=Promise$1.resolve(void 0),promise.constructor=Promise$1,then=bind$2(promise.then,promise),notify$1=function(){then(flush)}):IS_NODE$3?notify$1=function(){process$2.nextTick(flush)}:(macrotask=bind$2(macrotask,global$8),notify$1=function(){macrotask(flush)}),microtask$1=function(le){queue$1.head||notify$1(),queue$1.add(le)}}var microtask_1=microtask$1,hostReportErrors$1=function(le,oe){try{arguments.length}catch{}},perform$3=function(le){try{return{error:!1,value:le()}}catch(oe){return{error:!0,value:oe}}},global$7=global$l,promiseNativeConstructor=global$7.Promise,engineIsDeno=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",IS_DENO$1=engineIsDeno,IS_NODE$2=engineIsNode,engineIsBrowser=!IS_DENO$1&&!IS_NODE$2&&typeof window=="object"&&typeof document=="object",global$6=global$l,NativePromiseConstructor$3=promiseNativeConstructor,isCallable$7=isCallable$l,isForced=isForced_1,inspectSource=inspectSource$3,wellKnownSymbol$b=wellKnownSymbol$i,IS_BROWSER=engineIsBrowser,IS_DENO=engineIsDeno,V8_VERSION=engineV8Version;NativePromiseConstructor$3&&NativePromiseConstructor$3.prototype;var SPECIES$1=wellKnownSymbol$b("species"),SUBCLASSING=!1,NATIVE_PROMISE_REJECTION_EVENT$1=isCallable$7(global$6.PromiseRejectionEvent),FORCED_PROMISE_CONSTRUCTOR$5=isForced("Promise",function(){var le=inspectSource(NativePromiseConstructor$3),oe=le!==String(NativePromiseConstructor$3);if(!oe&&V8_VERSION===66)return!0;if(!V8_VERSION||V8_VERSION<51||!/native code/.test(le)){var ie=new NativePromiseConstructor$3(function(he){he(1)}),ue=function(he){he(function(){},function(){})},de=ie.constructor={};if(de[SPECIES$1]=ue,SUBCLASSING=ie.then(function(){})instanceof ue,!SUBCLASSING)return!0}return!oe&&(IS_BROWSER||IS_DENO)&&!NATIVE_PROMISE_REJECTION_EVENT$1}),promiseConstructorDetection={CONSTRUCTOR:FORCED_PROMISE_CONSTRUCTOR$5,REJECTION_EVENT:NATIVE_PROMISE_REJECTION_EVENT$1,SUBCLASSING},newPromiseCapability$2={},aCallable$5=aCallable$9,$TypeError$5=TypeError,PromiseCapability=function(le){var oe,ie;this.promise=new le(function(ue,de){if(oe!==void 0||ie!==void 0)throw new $TypeError$5("Bad Promise constructor");oe=ue,ie=de}),this.resolve=aCallable$5(oe),this.reject=aCallable$5(ie)};newPromiseCapability$2.f=function(le){return new PromiseCapability(le)};var $$e=_export,IS_NODE$1=engineIsNode,global$5=global$l,call$d=functionCall,defineBuiltIn$5=defineBuiltIn$7,setPrototypeOf$1=objectSetPrototypeOf,setToStringTag$3=setToStringTag$4,setSpecies=setSpecies$1,aCallable$4=aCallable$9,isCallable$6=isCallable$l,isObject$3=isObject$b,anInstance=anInstance$1,speciesConstructor$1=speciesConstructor$2,task=task$1.set,microtask=microtask_1,hostReportErrors=hostReportErrors$1,perform$2=perform$3,Queue=queue$2,InternalStateModule$1=internalState,NativePromiseConstructor$2=promiseNativeConstructor,PromiseConstructorDetection=promiseConstructorDetection,newPromiseCapabilityModule$3=newPromiseCapability$2,PROMISE="Promise",FORCED_PROMISE_CONSTRUCTOR$4=PromiseConstructorDetection.CONSTRUCTOR,NATIVE_PROMISE_REJECTION_EVENT=PromiseConstructorDetection.REJECTION_EVENT,NATIVE_PROMISE_SUBCLASSING=PromiseConstructorDetection.SUBCLASSING,getInternalPromiseState=InternalStateModule$1.getterFor(PROMISE),setInternalState$1=InternalStateModule$1.set,NativePromisePrototype$1=NativePromiseConstructor$2&&NativePromiseConstructor$2.prototype,PromiseConstructor=NativePromiseConstructor$2,PromisePrototype=NativePromisePrototype$1,TypeError$1=global$5.TypeError,document$1=global$5.document,process$1=global$5.process,newPromiseCapability$1=newPromiseCapabilityModule$3.f,newGenericPromiseCapability=newPromiseCapability$1,DISPATCH_EVENT=!!(document$1&&document$1.createEvent&&global$5.dispatchEvent),UNHANDLED_REJECTION="unhandledrejection",REJECTION_HANDLED="rejectionhandled",PENDING=0,FULFILLED=1,REJECTED=2,HANDLED=1,UNHANDLED=2,Internal,OwnPromiseCapability,PromiseWrapper,nativeThen,isThenable=function(le){var oe;return isObject$3(le)&&isCallable$6(oe=le.then)?oe:!1},callReaction=function(le,oe){var ie=oe.value,ue=oe.state===FULFILLED,de=ue?le.ok:le.fail,he=le.resolve,pe=le.reject,_e=le.domain,Ce,xe,Ie;try{de?(ue||(oe.rejection===UNHANDLED&&onHandleUnhandled(oe),oe.rejection=HANDLED),de===!0?Ce=ie:(_e&&_e.enter(),Ce=de(ie),_e&&(_e.exit(),Ie=!0)),Ce===le.promise?pe(new TypeError$1("Promise-chain cycle")):(xe=isThenable(Ce))?call$d(xe,Ce,he,pe):he(Ce)):pe(ie)}catch($e){_e&&!Ie&&_e.exit(),pe($e)}},notify=function(le,oe){le.notified||(le.notified=!0,microtask(function(){for(var ie=le.reactions,ue;ue=ie.get();)callReaction(ue,le);le.notified=!1,oe&&!le.rejection&&onUnhandled(le)}))},dispatchEvent=function(le,oe,ie){var ue,de;DISPATCH_EVENT?(ue=document$1.createEvent("Event"),ue.promise=oe,ue.reason=ie,ue.initEvent(le,!1,!0),global$5.dispatchEvent(ue)):ue={promise:oe,reason:ie},!NATIVE_PROMISE_REJECTION_EVENT&&(de=global$5["on"+le])?de(ue):le===UNHANDLED_REJECTION&&hostReportErrors("Unhandled promise rejection",ie)},onUnhandled=function(le){call$d(task,global$5,function(){var oe=le.facade,ie=le.value,ue=isUnhandled(le),de;if(ue&&(de=perform$2(function(){IS_NODE$1?process$1.emit("unhandledRejection",ie,oe):dispatchEvent(UNHANDLED_REJECTION,oe,ie)}),le.rejection=IS_NODE$1||isUnhandled(le)?UNHANDLED:HANDLED,de.error))throw de.value})},isUnhandled=function(le){return le.rejection!==HANDLED&&!le.parent},onHandleUnhandled=function(le){call$d(task,global$5,function(){var oe=le.facade;IS_NODE$1?process$1.emit("rejectionHandled",oe):dispatchEvent(REJECTION_HANDLED,oe,le.value)})},bind$1=function(le,oe,ie){return function(ue){le(oe,ue,ie)}},internalReject=function(le,oe,ie){le.done||(le.done=!0,ie&&(le=ie),le.value=oe,le.state=REJECTED,notify(le,!0))},internalResolve=function(le,oe,ie){if(!le.done){le.done=!0,ie&&(le=ie);try{if(le.facade===oe)throw new TypeError$1("Promise can't be resolved itself");var ue=isThenable(oe);ue?microtask(function(){var de={done:!1};try{call$d(ue,oe,bind$1(internalResolve,de,le),bind$1(internalReject,de,le))}catch(he){internalReject(de,he,le)}}):(le.value=oe,le.state=FULFILLED,notify(le,!1))}catch(de){internalReject({done:!1},de,le)}}};if(FORCED_PROMISE_CONSTRUCTOR$4&&(PromiseConstructor=function(oe){anInstance(this,PromisePrototype),aCallable$4(oe),call$d(Internal,this);var ie=getInternalPromiseState(this);try{oe(bind$1(internalResolve,ie),bind$1(internalReject,ie))}catch(ue){internalReject(ie,ue)}},PromisePrototype=PromiseConstructor.prototype,Internal=function(oe){setInternalState$1(this,{type:PROMISE,done:!1,notified:!1,parent:!1,reactions:new Queue,rejection:!1,state:PENDING,value:void 0})},Internal.prototype=defineBuiltIn$5(PromisePrototype,"then",function(oe,ie){var ue=getInternalPromiseState(this),de=newPromiseCapability$1(speciesConstructor$1(this,PromiseConstructor));return ue.parent=!0,de.ok=isCallable$6(oe)?oe:!0,de.fail=isCallable$6(ie)&&ie,de.domain=IS_NODE$1?process$1.domain:void 0,ue.state===PENDING?ue.reactions.add(de):microtask(function(){callReaction(de,ue)}),de.promise}),OwnPromiseCapability=function(){var le=new Internal,oe=getInternalPromiseState(le);this.promise=le,this.resolve=bind$1(internalResolve,oe),this.reject=bind$1(internalReject,oe)},newPromiseCapabilityModule$3.f=newPromiseCapability$1=function(le){return le===PromiseConstructor||le===PromiseWrapper?new OwnPromiseCapability(le):newGenericPromiseCapability(le)},isCallable$6(NativePromiseConstructor$2)&&NativePromisePrototype$1!==Object.prototype)){nativeThen=NativePromisePrototype$1.then,NATIVE_PROMISE_SUBCLASSING||defineBuiltIn$5(NativePromisePrototype$1,"then",function(oe,ie){var ue=this;return new PromiseConstructor(function(de,he){call$d(nativeThen,ue,de,he)}).then(oe,ie)},{unsafe:!0});try{delete NativePromisePrototype$1.constructor}catch{}setPrototypeOf$1&&setPrototypeOf$1(NativePromisePrototype$1,PromisePrototype)}$$e({global:!0,constructor:!0,wrap:!0,forced:FORCED_PROMISE_CONSTRUCTOR$4},{Promise:PromiseConstructor});setToStringTag$3(PromiseConstructor,PROMISE,!1);setSpecies(PROMISE);var iterators={},wellKnownSymbol$a=wellKnownSymbol$i,Iterators$4=iterators,ITERATOR$5=wellKnownSymbol$a("iterator"),ArrayPrototype$1=Array.prototype,isArrayIteratorMethod$1=function(le){return le!==void 0&&(Iterators$4.Array===le||ArrayPrototype$1[ITERATOR$5]===le)},classof$4=classof$6,getMethod$4=getMethod$6,isNullOrUndefined$3=isNullOrUndefined$7,Iterators$3=iterators,wellKnownSymbol$9=wellKnownSymbol$i,ITERATOR$4=wellKnownSymbol$9("iterator"),getIteratorMethod$2=function(le){if(!isNullOrUndefined$3(le))return getMethod$4(le,ITERATOR$4)||getMethod$4(le,"@@iterator")||Iterators$3[classof$4(le)]},call$c=functionCall,aCallable$3=aCallable$9,anObject$b=anObject$f,tryToString$1=tryToString$4,getIteratorMethod$1=getIteratorMethod$2,$TypeError$4=TypeError,getIterator$1=function(le,oe){var ie=arguments.length<2?getIteratorMethod$1(le):oe;if(aCallable$3(ie))return anObject$b(call$c(ie,le));throw new $TypeError$4(tryToString$1(le)+" is not iterable")},call$b=functionCall,anObject$a=anObject$f,getMethod$3=getMethod$6,iteratorClose$1=function(le,oe,ie){var ue,de;anObject$a(le);try{if(ue=getMethod$3(le,"return"),!ue){if(oe==="throw")throw ie;return ie}ue=call$b(ue,le)}catch(he){de=!0,ue=he}if(oe==="throw")throw ie;if(de)throw ue;return anObject$a(ue),ie},bind=functionBindContext,call$a=functionCall,anObject$9=anObject$f,tryToString=tryToString$4,isArrayIteratorMethod=isArrayIteratorMethod$1,lengthOfArrayLike$1=lengthOfArrayLike$3,isPrototypeOf$1=objectIsPrototypeOf,getIterator=getIterator$1,getIteratorMethod=getIteratorMethod$2,iteratorClose=iteratorClose$1,$TypeError$3=TypeError,Result=function(le,oe){this.stopped=le,this.result=oe},ResultPrototype=Result.prototype,iterate$2=function(le,oe,ie){var ue=ie&&ie.that,de=!!(ie&&ie.AS_ENTRIES),he=!!(ie&&ie.IS_RECORD),pe=!!(ie&&ie.IS_ITERATOR),_e=!!(ie&&ie.INTERRUPTED),Ce=bind(oe,ue),xe,Ie,$e,Ne,Oe,Fe,Ve,ze=function(Pt){return xe&&iteratorClose(xe,"normal",Pt),new Result(!0,Pt)},Ue=function(Pt){return de?(anObject$9(Pt),_e?Ce(Pt[0],Pt[1],ze):Ce(Pt[0],Pt[1])):_e?Ce(Pt,ze):Ce(Pt)};if(he)xe=le.iterator;else if(pe)xe=le;else{if(Ie=getIteratorMethod(le),!Ie)throw new $TypeError$3(tryToString(le)+" is not iterable");if(isArrayIteratorMethod(Ie)){for($e=0,Ne=lengthOfArrayLike$1(le);Ne>$e;$e++)if(Oe=Ue(le[$e]),Oe&&isPrototypeOf$1(ResultPrototype,Oe))return Oe;return new Result(!1)}xe=getIterator(le,Ie)}for(Fe=he?le.next:xe.next;!(Ve=call$a(Fe,xe)).done;){try{Oe=Ue(Ve.value)}catch(Pt){iteratorClose(xe,"throw",Pt)}if(typeof Oe=="object"&&Oe&&isPrototypeOf$1(ResultPrototype,Oe))return Oe}return new Result(!1)},wellKnownSymbol$8=wellKnownSymbol$i,ITERATOR$3=wellKnownSymbol$8("iterator"),SAFE_CLOSING=!1;try{var called=0,iteratorWithReturn={next:function(){return{done:!!called++}},return:function(){SAFE_CLOSING=!0}};iteratorWithReturn[ITERATOR$3]=function(){return this},Array.from(iteratorWithReturn,function(){throw 2})}catch(le){}var checkCorrectnessOfIteration$1=function(le,oe){try{if(!oe&&!SAFE_CLOSING)return!1}catch{return!1}var ie=!1;try{var ue={};ue[ITERATOR$3]=function(){return{next:function(){return{done:ie=!0}}}},le(ue)}catch{}return ie},NativePromiseConstructor$1=promiseNativeConstructor,checkCorrectnessOfIteration=checkCorrectnessOfIteration$1,FORCED_PROMISE_CONSTRUCTOR$3=promiseConstructorDetection.CONSTRUCTOR,promiseStaticsIncorrectIteration=FORCED_PROMISE_CONSTRUCTOR$3||!checkCorrectnessOfIteration(function(le){NativePromiseConstructor$1.all(le).then(void 0,function(){})}),$$d=_export,call$9=functionCall,aCallable$2=aCallable$9,newPromiseCapabilityModule$2=newPromiseCapability$2,perform$1=perform$3,iterate$1=iterate$2,PROMISE_STATICS_INCORRECT_ITERATION$1=promiseStaticsIncorrectIteration;$$d({target:"Promise",stat:!0,forced:PROMISE_STATICS_INCORRECT_ITERATION$1},{all:function le(oe){var ie=this,ue=newPromiseCapabilityModule$2.f(ie),de=ue.resolve,he=ue.reject,pe=perform$1(function(){var _e=aCallable$2(ie.resolve),Ce=[],xe=0,Ie=1;iterate$1(oe,function($e){var Ne=xe++,Oe=!1;Ie++,call$9(_e,ie,$e).then(function(Fe){Oe||(Oe=!0,Ce[Ne]=Fe,--Ie||de(Ce))},he)}),--Ie||de(Ce)});return pe.error&&he(pe.value),ue.promise}});var $$c=_export,FORCED_PROMISE_CONSTRUCTOR$2=promiseConstructorDetection.CONSTRUCTOR,NativePromiseConstructor=promiseNativeConstructor,getBuiltIn$1=getBuiltIn$7,isCallable$5=isCallable$l,defineBuiltIn$4=defineBuiltIn$7,NativePromisePrototype=NativePromiseConstructor&&NativePromiseConstructor.prototype;$$c({target:"Promise",proto:!0,forced:FORCED_PROMISE_CONSTRUCTOR$2,real:!0},{catch:function(le){return this.then(void 0,le)}});if(isCallable$5(NativePromiseConstructor)){var method=getBuiltIn$1("Promise").prototype.catch;NativePromisePrototype.catch!==method&&defineBuiltIn$4(NativePromisePrototype,"catch",method,{unsafe:!0})}var $$b=_export,call$8=functionCall,aCallable$1=aCallable$9,newPromiseCapabilityModule$1=newPromiseCapability$2,perform=perform$3,iterate=iterate$2,PROMISE_STATICS_INCORRECT_ITERATION=promiseStaticsIncorrectIteration;$$b({target:"Promise",stat:!0,forced:PROMISE_STATICS_INCORRECT_ITERATION},{race:function le(oe){var ie=this,ue=newPromiseCapabilityModule$1.f(ie),de=ue.reject,he=perform(function(){var pe=aCallable$1(ie.resolve);iterate(oe,function(_e){call$8(pe,ie,_e).then(ue.resolve,de)})});return he.error&&de(he.value),ue.promise}});var $$a=_export,newPromiseCapabilityModule=newPromiseCapability$2,FORCED_PROMISE_CONSTRUCTOR$1=promiseConstructorDetection.CONSTRUCTOR;$$a({target:"Promise",stat:!0,forced:FORCED_PROMISE_CONSTRUCTOR$1},{reject:function le(oe){var ie=newPromiseCapabilityModule.f(this),ue=ie.reject;return ue(oe),ie.promise}});var anObject$8=anObject$f,isObject$2=isObject$b,newPromiseCapability=newPromiseCapability$2,promiseResolve$1=function(le,oe){if(anObject$8(le),isObject$2(oe)&&oe.constructor===le)return oe;var ie=newPromiseCapability.f(le),ue=ie.resolve;return ue(oe),ie.promise},$$9=_export,getBuiltIn=getBuiltIn$7,FORCED_PROMISE_CONSTRUCTOR=promiseConstructorDetection.CONSTRUCTOR,promiseResolve=promiseResolve$1;getBuiltIn("Promise");$$9({target:"Promise",stat:!0,forced:FORCED_PROMISE_CONSTRUCTOR},{resolve:function le(oe){return promiseResolve(this,oe)}});function asyncGeneratorStep(le,oe,ie,ue,de,he,pe){try{var _e=le[he](pe),Ce=_e.value}catch(xe){return void ie(xe)}_e.done?oe(Ce):Promise.resolve(Ce).then(ue,de)}function _asyncToGenerator(le){return function(){var oe=this,ie=arguments;return new Promise(function(ue,de){var he=le.apply(oe,ie);function pe(Ce){asyncGeneratorStep(he,ue,de,pe,_e,"next",Ce)}function _e(Ce){asyncGeneratorStep(he,ue,de,pe,_e,"throw",Ce)}pe(void 0)})}}var classof$3=classof$6,$String=String,toString$9=function(le){if(classof$3(le)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return $String(le)},anObject$7=anObject$f,regexpFlags$1=function(){var le=anObject$7(this),oe="";return le.hasIndices&&(oe+="d"),le.global&&(oe+="g"),le.ignoreCase&&(oe+="i"),le.multiline&&(oe+="m"),le.dotAll&&(oe+="s"),le.unicode&&(oe+="u"),le.unicodeSets&&(oe+="v"),le.sticky&&(oe+="y"),oe},fails$a=fails$l,global$4=global$l,$RegExp$2=global$4.RegExp,UNSUPPORTED_Y$2=fails$a(function(){var le=$RegExp$2("a","y");return le.lastIndex=2,le.exec("abcd")!==null}),MISSED_STICKY=UNSUPPORTED_Y$2||fails$a(function(){return!$RegExp$2("a","y").sticky}),BROKEN_CARET=UNSUPPORTED_Y$2||fails$a(function(){var le=$RegExp$2("^r","gy");return le.lastIndex=2,le.exec("str")!==null}),regexpStickyHelpers={BROKEN_CARET,MISSED_STICKY,UNSUPPORTED_Y:UNSUPPORTED_Y$2},objectDefineProperties={},internalObjectKeys=objectKeysInternal,enumBugKeys$1=enumBugKeys$3,objectKeys$1=Object.keys||function le(oe){return internalObjectKeys(oe,enumBugKeys$1)},DESCRIPTORS$1=descriptors,V8_PROTOTYPE_DEFINE_BUG=v8PrototypeDefineBug,definePropertyModule=objectDefineProperty,anObject$6=anObject$f,toIndexedObject$1=toIndexedObject$5,objectKeys=objectKeys$1;objectDefineProperties.f=DESCRIPTORS$1&&!V8_PROTOTYPE_DEFINE_BUG?Object.defineProperties:function le(oe,ie){anObject$6(oe);for(var ue=toIndexedObject$1(ie),de=objectKeys(ie),he=de.length,pe=0,_e;he>pe;)definePropertyModule.f(oe,_e=de[pe++],ue[_e]);return oe};var anObject$5=anObject$f,definePropertiesModule=objectDefineProperties,enumBugKeys=enumBugKeys$3,hiddenKeys=hiddenKeys$4,html=html$2,documentCreateElement$1=documentCreateElement$2,sharedKey$1=sharedKey$3,GT=">",LT="<",PROTOTYPE="prototype",SCRIPT="script",IE_PROTO$1=sharedKey$1("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(le){return LT+SCRIPT+GT+le+LT+"/"+SCRIPT+GT},NullProtoObjectViaActiveX=function(le){le.write(scriptTag("")),le.close();var oe=le.parentWindow.Object;return le=null,oe},NullProtoObjectViaIFrame=function(){var le=documentCreateElement$1("iframe"),oe="java"+SCRIPT+":",ie;return le.style.display="none",html.appendChild(le),le.src=String(oe),ie=le.contentWindow.document,ie.open(),ie.write(scriptTag("document.F=Object")),ie.close(),ie.F},activeXDocument,NullProtoObject=function(){try{activeXDocument=new ActiveXObject("htmlfile")}catch{}NullProtoObject=typeof document<"u"?document.domain&&activeXDocument?NullProtoObjectViaActiveX(activeXDocument):NullProtoObjectViaIFrame():NullProtoObjectViaActiveX(activeXDocument);for(var le=enumBugKeys.length;le--;)delete NullProtoObject[PROTOTYPE][enumBugKeys[le]];return NullProtoObject()};hiddenKeys[IE_PROTO$1]=!0;var objectCreate=Object.create||function le(oe,ie){var ue;return oe!==null?(EmptyConstructor[PROTOTYPE]=anObject$5(oe),ue=new EmptyConstructor,EmptyConstructor[PROTOTYPE]=null,ue[IE_PROTO$1]=oe):ue=NullProtoObject(),ie===void 0?ue:definePropertiesModule.f(ue,ie)},fails$9=fails$l,global$3=global$l,$RegExp$1=global$3.RegExp,regexpUnsupportedDotAll=fails$9(function(){var le=$RegExp$1(".","s");return!(le.dotAll&&le.test(`
`)&&le.flags==="s")}),fails$8=fails$l,global$2=global$l,$RegExp=global$2.RegExp,regexpUnsupportedNcg=fails$8(function(){var le=$RegExp("(?<a>b)","g");return le.exec("b").groups.a!=="b"||"b".replace(le,"$<a>c")!=="bc"}),call$7=functionCall,uncurryThis$a=functionUncurryThis,toString$8=toString$9,regexpFlags=regexpFlags$1,stickyHelpers$1=regexpStickyHelpers,shared=shared$4,create$2=objectCreate,getInternalState$1=internalState.get,UNSUPPORTED_DOT_ALL=regexpUnsupportedDotAll,UNSUPPORTED_NCG=regexpUnsupportedNcg,nativeReplace=shared("native-string-replace",String.prototype.replace),nativeExec=RegExp.prototype.exec,patchedExec=nativeExec,charAt$3=uncurryThis$a("".charAt),indexOf=uncurryThis$a("".indexOf),replace$2=uncurryThis$a("".replace),stringSlice$5=uncurryThis$a("".slice),UPDATES_LAST_INDEX_WRONG=function(){var le=/a/,oe=/b*/g;return call$7(nativeExec,le,"a"),call$7(nativeExec,oe,"a"),le.lastIndex!==0||oe.lastIndex!==0}(),UNSUPPORTED_Y$1=stickyHelpers$1.BROKEN_CARET,NPCG_INCLUDED=/()??/.exec("")[1]!==void 0,PATCH=UPDATES_LAST_INDEX_WRONG||NPCG_INCLUDED||UNSUPPORTED_Y$1||UNSUPPORTED_DOT_ALL||UNSUPPORTED_NCG;PATCH&&(patchedExec=function(oe){var ie=this,ue=getInternalState$1(ie),de=toString$8(oe),he=ue.raw,pe,_e,Ce,xe,Ie,$e,Ne;if(he)return he.lastIndex=ie.lastIndex,pe=call$7(patchedExec,he,de),ie.lastIndex=he.lastIndex,pe;var Oe=ue.groups,Fe=UNSUPPORTED_Y$1&&ie.sticky,Ve=call$7(regexpFlags,ie),ze=ie.source,Ue=0,Pt=de;if(Fe&&(Ve=replace$2(Ve,"y",""),indexOf(Ve,"g")===-1&&(Ve+="g"),Pt=stringSlice$5(de,ie.lastIndex),ie.lastIndex>0&&(!ie.multiline||ie.multiline&&charAt$3(de,ie.lastIndex-1)!==`
`)&&(ze="(?: "+ze+")",Pt=" "+Pt,Ue++),_e=new RegExp("^(?:"+ze+")",Ve)),NPCG_INCLUDED&&(_e=new RegExp("^"+ze+"$(?!\\s)",Ve)),UPDATES_LAST_INDEX_WRONG&&(Ce=ie.lastIndex),xe=call$7(nativeExec,Fe?_e:ie,Pt),Fe?xe?(xe.input=stringSlice$5(xe.input,Ue),xe[0]=stringSlice$5(xe[0],Ue),xe.index=ie.lastIndex,ie.lastIndex+=xe[0].length):ie.lastIndex=0:UPDATES_LAST_INDEX_WRONG&&xe&&(ie.lastIndex=ie.global?xe.index+xe[0].length:Ce),NPCG_INCLUDED&&xe&&xe.length>1&&call$7(nativeReplace,xe[0],_e,function(){for(Ie=1;Ie<arguments.length-2;Ie++)arguments[Ie]===void 0&&(xe[Ie]=void 0)}),xe&&Oe)for(xe.groups=$e=create$2(null),Ie=0;Ie<Oe.length;Ie++)Ne=Oe[Ie],$e[Ne[0]]=xe[Ne[1]];return xe});var regexpExec$2=patchedExec,$$8=_export,exec=regexpExec$2;$$8({target:"RegExp",proto:!0,forced:/./.exec!==exec},{exec});var call$6=functionCall,defineBuiltIn$3=defineBuiltIn$7,regexpExec$1=regexpExec$2,fails$7=fails$l,wellKnownSymbol$7=wellKnownSymbol$i,createNonEnumerableProperty$2=createNonEnumerableProperty$5,SPECIES=wellKnownSymbol$7("species"),RegExpPrototype$2=RegExp.prototype,fixRegexpWellKnownSymbolLogic=function(le,oe,ie,ue){var de=wellKnownSymbol$7(le),he=!fails$7(function(){var xe={};return xe[de]=function(){return 7},""[le](xe)!==7}),pe=he&&!fails$7(function(){var xe=!1,Ie=/a/;return le==="split"&&(Ie={},Ie.constructor={},Ie.constructor[SPECIES]=function(){return Ie},Ie.flags="",Ie[de]=/./[de]),Ie.exec=function(){return xe=!0,null},Ie[de](""),!xe});if(!he||!pe||ie){var _e=/./[de],Ce=oe(de,""[le],function(xe,Ie,$e,Ne,Oe){var Fe=Ie.exec;return Fe===regexpExec$1||Fe===RegExpPrototype$2.exec?he&&!Oe?{done:!0,value:call$6(_e,Ie,$e,Ne)}:{done:!0,value:call$6(xe,$e,Ie,Ne)}:{done:!1}});defineBuiltIn$3(String.prototype,le,Ce[0]),defineBuiltIn$3(RegExpPrototype$2,de,Ce[1])}ue&&createNonEnumerableProperty$2(RegExpPrototype$2[de],"sham",!0)},uncurryThis$9=functionUncurryThis,toIntegerOrInfinity$1=toIntegerOrInfinity$4,toString$7=toString$9,requireObjectCoercible$7=requireObjectCoercible$b,charAt$2=uncurryThis$9("".charAt),charCodeAt=uncurryThis$9("".charCodeAt),stringSlice$4=uncurryThis$9("".slice),createMethod$2=function(le){return function(oe,ie){var ue=toString$7(requireObjectCoercible$7(oe)),de=toIntegerOrInfinity$1(ie),he=ue.length,pe,_e;return de<0||de>=he?le?"":void 0:(pe=charCodeAt(ue,de),pe<55296||pe>56319||de+1===he||(_e=charCodeAt(ue,de+1))<56320||_e>57343?le?charAt$2(ue,de):pe:le?stringSlice$4(ue,de,de+2):(pe-55296<<10)+(_e-56320)+65536)}},stringMultibyte={codeAt:createMethod$2(!1),charAt:createMethod$2(!0)},charAt$1=stringMultibyte.charAt,advanceStringIndex$3=function(le,oe,ie){return oe+(ie?charAt$1(le,oe).length:1)},call$5=functionCall,anObject$4=anObject$f,isCallable$4=isCallable$l,classof$2=classofRaw$2,regexpExec=regexpExec$2,$TypeError$2=TypeError,regexpExecAbstract=function(le,oe){var ie=le.exec;if(isCallable$4(ie)){var ue=call$5(ie,le,oe);return ue!==null&&anObject$4(ue),ue}if(classof$2(le)==="RegExp")return call$5(regexpExec,le,oe);throw new $TypeError$2("RegExp#exec called on incompatible receiver")},call$4=functionCall,fixRegExpWellKnownSymbolLogic$2=fixRegexpWellKnownSymbolLogic,anObject$3=anObject$f,isNullOrUndefined$2=isNullOrUndefined$7,toLength$4=toLength$6,toString$6=toString$9,requireObjectCoercible$6=requireObjectCoercible$b,getMethod$2=getMethod$6,advanceStringIndex$2=advanceStringIndex$3,regExpExec$2=regexpExecAbstract;fixRegExpWellKnownSymbolLogic$2("match",function(le,oe,ie){return[function(de){var he=requireObjectCoercible$6(this),pe=isNullOrUndefined$2(de)?void 0:getMethod$2(de,le);return pe?call$4(pe,de,he):new RegExp(de)[le](toString$6(he))},function(ue){var de=anObject$3(this),he=toString$6(ue),pe=ie(oe,de,he);if(pe.done)return pe.value;if(!de.global)return regExpExec$2(de,he);var _e=de.unicode;de.lastIndex=0;for(var Ce=[],xe=0,Ie;(Ie=regExpExec$2(de,he))!==null;){var $e=toString$6(Ie[0]);Ce[xe]=$e,$e===""&&(de.lastIndex=advanceStringIndex$2(he,toLength$4(de.lastIndex),_e)),xe++}return xe===0?null:Ce}]});var uncurryThis$8=functionUncurryThis,toObject$2=toObject$4,floor=Math.floor,charAt=uncurryThis$8("".charAt),replace$1=uncurryThis$8("".replace),stringSlice$3=uncurryThis$8("".slice),SUBSTITUTION_SYMBOLS=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,SUBSTITUTION_SYMBOLS_NO_NAMED=/\$([$&'`]|\d{1,2})/g,getSubstitution$1=function(le,oe,ie,ue,de,he){var pe=ie+le.length,_e=ue.length,Ce=SUBSTITUTION_SYMBOLS_NO_NAMED;return de!==void 0&&(de=toObject$2(de),Ce=SUBSTITUTION_SYMBOLS),replace$1(he,Ce,function(xe,Ie){var $e;switch(charAt(Ie,0)){case"$":return"$";case"&":return le;case"`":return stringSlice$3(oe,0,ie);case"'":return stringSlice$3(oe,pe);case"<":$e=de[stringSlice$3(Ie,1,-1)];break;default:var Ne=+Ie;if(Ne===0)return xe;if(Ne>_e){var Oe=floor(Ne/10);return Oe===0?xe:Oe<=_e?ue[Oe-1]===void 0?charAt(Ie,1):ue[Oe-1]+charAt(Ie,1):xe}$e=ue[Ne-1]}return $e===void 0?"":$e})},apply=functionApply,call$3=functionCall,uncurryThis$7=functionUncurryThis,fixRegExpWellKnownSymbolLogic$1=fixRegexpWellKnownSymbolLogic,fails$6=fails$l,anObject$2=anObject$f,isCallable$3=isCallable$l,isNullOrUndefined$1=isNullOrUndefined$7,toIntegerOrInfinity=toIntegerOrInfinity$4,toLength$3=toLength$6,toString$5=toString$9,requireObjectCoercible$5=requireObjectCoercible$b,advanceStringIndex$1=advanceStringIndex$3,getMethod$1=getMethod$6,getSubstitution=getSubstitution$1,regExpExec$1=regexpExecAbstract,wellKnownSymbol$6=wellKnownSymbol$i,REPLACE=wellKnownSymbol$6("replace"),max=Math.max,min$3=Math.min,concat=uncurryThis$7([].concat),push$1=uncurryThis$7([].push),stringIndexOf$1=uncurryThis$7("".indexOf),stringSlice$2=uncurryThis$7("".slice),maybeToString=function(le){return le===void 0?le:String(le)},REPLACE_KEEPS_$0=function(){return"a".replace(/./,"$0")==="$0"}(),REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE=function(){return/./[REPLACE]?/./[REPLACE]("a","$0")==="":!1}(),REPLACE_SUPPORTS_NAMED_GROUPS=!fails$6(function(){var le=/./;return le.exec=function(){var oe=[];return oe.groups={a:"7"},oe},"".replace(le,"$<a>")!=="7"});fixRegExpWellKnownSymbolLogic$1("replace",function(le,oe,ie){var ue=REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE?"$":"$0";return[function(he,pe){var _e=requireObjectCoercible$5(this),Ce=isNullOrUndefined$1(he)?void 0:getMethod$1(he,REPLACE);return Ce?call$3(Ce,he,_e,pe):call$3(oe,toString$5(_e),he,pe)},function(de,he){var pe=anObject$2(this),_e=toString$5(de);if(typeof he=="string"&&stringIndexOf$1(he,ue)===-1&&stringIndexOf$1(he,"$<")===-1){var Ce=ie(oe,pe,_e,he);if(Ce.done)return Ce.value}var xe=isCallable$3(he);xe||(he=toString$5(he));var Ie=pe.global,$e;Ie&&($e=pe.unicode,pe.lastIndex=0);for(var Ne=[],Oe;Oe=regExpExec$1(pe,_e),!(Oe===null||(push$1(Ne,Oe),!Ie));){var Fe=toString$5(Oe[0]);Fe===""&&(pe.lastIndex=advanceStringIndex$1(_e,toLength$3(pe.lastIndex),$e))}for(var Ve="",ze=0,Ue=0;Ue<Ne.length;Ue++){Oe=Ne[Ue];for(var Pt=toString$5(Oe[0]),qe=max(min$3(toIntegerOrInfinity(Oe.index),_e.length),0),Et=[],kt,At=1;At<Oe.length;At++)push$1(Et,maybeToString(Oe[At]));var Dt=Oe.groups;if(xe){var Lt=concat([Pt],Et,qe,_e);Dt!==void 0&&push$1(Lt,Dt),kt=toString$5(apply(he,void 0,Lt))}else kt=getSubstitution(Pt,_e,qe,Et,Dt,he);qe>=ze&&(Ve+=stringSlice$2(_e,ze,qe)+kt,ze=qe+Pt.length)}return Ve+stringSlice$2(_e,ze)}]},!REPLACE_SUPPORTS_NAMED_GROUPS||!REPLACE_KEEPS_$0||REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE);var isObject$1=isObject$b,classof$1=classofRaw$2,wellKnownSymbol$5=wellKnownSymbol$i,MATCH$1=wellKnownSymbol$5("match"),isRegexp=function(le){var oe;return isObject$1(le)&&((oe=le[MATCH$1])!==void 0?!!oe:classof$1(le)==="RegExp")},isRegExp=isRegexp,$TypeError$1=TypeError,notARegexp=function(le){if(isRegExp(le))throw new $TypeError$1("The method doesn't accept regular expressions");return le},wellKnownSymbol$4=wellKnownSymbol$i,MATCH=wellKnownSymbol$4("match"),correctIsRegexpLogic=function(le){var oe=/./;try{"/./"[le](oe)}catch{try{return oe[MATCH]=!1,"/./"[le](oe)}catch{}}return!1},$$7=_export,uncurryThis$6=functionUncurryThisClause,getOwnPropertyDescriptor$1=objectGetOwnPropertyDescriptor.f,toLength$2=toLength$6,toString$4=toString$9,notARegExp$2=notARegexp,requireObjectCoercible$4=requireObjectCoercible$b,correctIsRegExpLogic$2=correctIsRegexpLogic,stringSlice$1=uncurryThis$6("".slice),min$2=Math.min,CORRECT_IS_REGEXP_LOGIC$1=correctIsRegExpLogic$2("startsWith"),MDN_POLYFILL_BUG$1=!CORRECT_IS_REGEXP_LOGIC$1&&!!function(){var le=getOwnPropertyDescriptor$1(String.prototype,"startsWith");return le&&!le.writable}();$$7({target:"String",proto:!0,forced:!MDN_POLYFILL_BUG$1&&!CORRECT_IS_REGEXP_LOGIC$1},{startsWith:function le(oe){var ie=toString$4(requireObjectCoercible$4(this));notARegExp$2(oe);var ue=toLength$2(min$2(arguments.length>1?arguments[1]:void 0,ie.length)),de=toString$4(oe);return stringSlice$1(ie,ue,ue+de.length)===de}});var wellKnownSymbol$3=wellKnownSymbol$i,create$1=objectCreate,defineProperty$1=objectDefineProperty.f,UNSCOPABLES=wellKnownSymbol$3("unscopables"),ArrayPrototype=Array.prototype;ArrayPrototype[UNSCOPABLES]===void 0&&defineProperty$1(ArrayPrototype,UNSCOPABLES,{configurable:!0,value:create$1(null)});var addToUnscopables$1=function(le){ArrayPrototype[UNSCOPABLES][le]=!0},fails$5=fails$l,correctPrototypeGetter=!fails$5(function(){function le(){}return le.prototype.constructor=null,Object.getPrototypeOf(new le)!==le.prototype}),hasOwn$1=hasOwnProperty_1,isCallable$2=isCallable$l,toObject$1=toObject$4,sharedKey=sharedKey$3,CORRECT_PROTOTYPE_GETTER=correctPrototypeGetter,IE_PROTO=sharedKey("IE_PROTO"),$Object=Object,ObjectPrototype=$Object.prototype,objectGetPrototypeOf=CORRECT_PROTOTYPE_GETTER?$Object.getPrototypeOf:function(le){var oe=toObject$1(le);if(hasOwn$1(oe,IE_PROTO))return oe[IE_PROTO];var ie=oe.constructor;return isCallable$2(ie)&&oe instanceof ie?ie.prototype:oe instanceof $Object?ObjectPrototype:null},fails$4=fails$l,isCallable$1=isCallable$l,isObject=isObject$b,getPrototypeOf$1=objectGetPrototypeOf,defineBuiltIn$2=defineBuiltIn$7,wellKnownSymbol$2=wellKnownSymbol$i,ITERATOR$2=wellKnownSymbol$2("iterator"),BUGGY_SAFARI_ITERATORS$1=!1,IteratorPrototype$2,PrototypeOfArrayIteratorPrototype,arrayIterator;[].keys&&(arrayIterator=[].keys(),"next"in arrayIterator?(PrototypeOfArrayIteratorPrototype=getPrototypeOf$1(getPrototypeOf$1(arrayIterator)),PrototypeOfArrayIteratorPrototype!==Object.prototype&&(IteratorPrototype$2=PrototypeOfArrayIteratorPrototype)):BUGGY_SAFARI_ITERATORS$1=!0);var NEW_ITERATOR_PROTOTYPE=!isObject(IteratorPrototype$2)||fails$4(function(){var le={};return IteratorPrototype$2[ITERATOR$2].call(le)!==le});NEW_ITERATOR_PROTOTYPE&&(IteratorPrototype$2={});isCallable$1(IteratorPrototype$2[ITERATOR$2])||defineBuiltIn$2(IteratorPrototype$2,ITERATOR$2,function(){return this});var iteratorsCore={IteratorPrototype:IteratorPrototype$2,BUGGY_SAFARI_ITERATORS:BUGGY_SAFARI_ITERATORS$1},IteratorPrototype$1=iteratorsCore.IteratorPrototype,create=objectCreate,createPropertyDescriptor=createPropertyDescriptor$3,setToStringTag$2=setToStringTag$4,Iterators$2=iterators,returnThis$1=function(){return this},iteratorCreateConstructor=function(le,oe,ie,ue){var de=oe+" Iterator";return le.prototype=create(IteratorPrototype$1,{next:createPropertyDescriptor(+!ue,ie)}),setToStringTag$2(le,de,!1),Iterators$2[de]=returnThis$1,le},$$6=_export,call$2=functionCall,FunctionName=functionName,isCallable=isCallable$l,createIteratorConstructor=iteratorCreateConstructor,getPrototypeOf=objectGetPrototypeOf,setPrototypeOf=objectSetPrototypeOf,setToStringTag$1=setToStringTag$4,createNonEnumerableProperty$1=createNonEnumerableProperty$5,defineBuiltIn$1=defineBuiltIn$7,wellKnownSymbol$1=wellKnownSymbol$i,Iterators$1=iterators,IteratorsCore=iteratorsCore,PROPER_FUNCTION_NAME$2=FunctionName.PROPER,CONFIGURABLE_FUNCTION_NAME=FunctionName.CONFIGURABLE,IteratorPrototype=IteratorsCore.IteratorPrototype,BUGGY_SAFARI_ITERATORS=IteratorsCore.BUGGY_SAFARI_ITERATORS,ITERATOR$1=wellKnownSymbol$1("iterator"),KEYS="keys",VALUES="values",ENTRIES="entries",returnThis=function(){return this},iteratorDefine=function(le,oe,ie,ue,de,he,pe){createIteratorConstructor(ie,oe,ue);var _e=function(Ue){if(Ue===de&&Ne)return Ne;if(!BUGGY_SAFARI_ITERATORS&&Ue&&Ue in Ie)return Ie[Ue];switch(Ue){case KEYS:return function(){return new ie(this,Ue)};case VALUES:return function(){return new ie(this,Ue)};case ENTRIES:return function(){return new ie(this,Ue)}}return function(){return new ie(this)}},Ce=oe+" Iterator",xe=!1,Ie=le.prototype,$e=Ie[ITERATOR$1]||Ie["@@iterator"]||de&&Ie[de],Ne=!BUGGY_SAFARI_ITERATORS&&$e||_e(de),Oe=oe==="Array"&&Ie.entries||$e,Fe,Ve,ze;if(Oe&&(Fe=getPrototypeOf(Oe.call(new le)),Fe!==Object.prototype&&Fe.next&&(getPrototypeOf(Fe)!==IteratorPrototype&&(setPrototypeOf?setPrototypeOf(Fe,IteratorPrototype):isCallable(Fe[ITERATOR$1])||defineBuiltIn$1(Fe,ITERATOR$1,returnThis)),setToStringTag$1(Fe,Ce,!0))),PROPER_FUNCTION_NAME$2&&de===VALUES&&$e&&$e.name!==VALUES&&(CONFIGURABLE_FUNCTION_NAME?createNonEnumerableProperty$1(Ie,"name",VALUES):(xe=!0,Ne=function(){return call$2($e,this)})),de)if(Ve={values:_e(VALUES),keys:he?Ne:_e(KEYS),entries:_e(ENTRIES)},pe)for(ze in Ve)(BUGGY_SAFARI_ITERATORS||xe||!(ze in Ie))&&defineBuiltIn$1(Ie,ze,Ve[ze]);else $$6({target:oe,proto:!0,forced:BUGGY_SAFARI_ITERATORS||xe},Ve);return Ie[ITERATOR$1]!==Ne&&defineBuiltIn$1(Ie,ITERATOR$1,Ne,{name:de}),Iterators$1[oe]=Ne,Ve},createIterResultObject$1=function(le,oe){return{value:le,done:oe}},toIndexedObject=toIndexedObject$5,addToUnscopables=addToUnscopables$1,Iterators=iterators,InternalStateModule=internalState,defineProperty=objectDefineProperty.f,defineIterator=iteratorDefine,createIterResultObject=createIterResultObject$1,DESCRIPTORS=descriptors,ARRAY_ITERATOR="Array Iterator",setInternalState=InternalStateModule.set,getInternalState=InternalStateModule.getterFor(ARRAY_ITERATOR),es_array_iterator=defineIterator(Array,"Array",function(le,oe){setInternalState(this,{type:ARRAY_ITERATOR,target:toIndexedObject(le),index:0,kind:oe})},function(){var le=getInternalState(this),oe=le.target,ie=le.index++;if(!oe||ie>=oe.length)return le.target=void 0,createIterResultObject(void 0,!0);switch(le.kind){case"keys":return createIterResultObject(ie,!1);case"values":return createIterResultObject(oe[ie],!1)}return createIterResultObject([ie,oe[ie]],!1)},"values"),values=Iterators.Arguments=Iterators.Array;addToUnscopables("keys");addToUnscopables("values");addToUnscopables("entries");if(DESCRIPTORS&&values.name!=="values")try{defineProperty(values,"name",{value:"values"})}catch(le){}var domIterables={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},documentCreateElement=documentCreateElement$2,classList=documentCreateElement("span").classList,DOMTokenListPrototype$1=classList&&classList.constructor&&classList.constructor.prototype,domTokenListPrototype=DOMTokenListPrototype$1===Object.prototype?void 0:DOMTokenListPrototype$1,global$1=global$l,DOMIterables=domIterables,DOMTokenListPrototype=domTokenListPrototype,ArrayIteratorMethods=es_array_iterator,createNonEnumerableProperty=createNonEnumerableProperty$5,setToStringTag=setToStringTag$4,wellKnownSymbol=wellKnownSymbol$i,ITERATOR=wellKnownSymbol("iterator"),ArrayValues=ArrayIteratorMethods.values,handlePrototype=function(le,oe){if(le){if(le[ITERATOR]!==ArrayValues)try{createNonEnumerableProperty(le,ITERATOR,ArrayValues)}catch{le[ITERATOR]=ArrayValues}if(setToStringTag(le,oe,!0),DOMIterables[oe]){for(var ie in ArrayIteratorMethods)if(le[ie]!==ArrayIteratorMethods[ie])try{createNonEnumerableProperty(le,ie,ArrayIteratorMethods[ie])}catch{le[ie]=ArrayIteratorMethods[ie]}}}};for(var COLLECTION_NAME in DOMIterables)handlePrototype(global$1[COLLECTION_NAME]&&global$1[COLLECTION_NAME].prototype,COLLECTION_NAME);handlePrototype(DOMTokenListPrototype,"DOMTokenList");function toPrimitive(le,oe){if(_typeof$2(le)!="object"||!le)return le;var ie=le[Symbol.toPrimitive];if(ie!==void 0){var ue=ie.call(le,oe||"default");if(_typeof$2(ue)!="object")return ue;throw new TypeError("@@toPrimitive must return a primitive value.")}return(oe==="string"?String:Number)(le)}function toPropertyKey(le){var oe=toPrimitive(le,"string");return _typeof$2(oe)=="symbol"?oe:oe+""}function _defineProperty(le,oe,ie){return(oe=toPropertyKey(oe))in le?Object.defineProperty(le,oe,{value:ie,enumerable:!0,configurable:!0,writable:!0}):le[oe]=ie,le}var aCallable=aCallable$9,toObject=toObject$4,IndexedObject=indexedObject,lengthOfArrayLike=lengthOfArrayLike$3,$TypeError=TypeError,REDUCE_EMPTY="Reduce of empty array with no initial value",createMethod$1=function(le){return function(oe,ie,ue,de){var he=toObject(oe),pe=IndexedObject(he),_e=lengthOfArrayLike(he);if(aCallable(ie),_e===0&&ue<2)throw new $TypeError(REDUCE_EMPTY);var Ce=le?_e-1:0,xe=le?-1:1;if(ue<2)for(;;){if(Ce in pe){de=pe[Ce],Ce+=xe;break}if(Ce+=xe,le?Ce<0:_e<=Ce)throw new $TypeError(REDUCE_EMPTY)}for(;le?Ce>=0:_e>Ce;Ce+=xe)Ce in pe&&(de=ie(de,pe[Ce],Ce,he));return de}},arrayReduce={left:createMethod$1(!1),right:createMethod$1(!0)},fails$3=fails$l,arrayMethodIsStrict$2=function(le,oe){var ie=[][le];return!!ie&&fails$3(function(){ie.call(null,oe||function(){return 1},1)})},$$5=_export,$reduce=arrayReduce.left,arrayMethodIsStrict$1=arrayMethodIsStrict$2,CHROME_VERSION=engineV8Version,IS_NODE=engineIsNode,CHROME_BUG=!IS_NODE&&CHROME_VERSION>79&&CHROME_VERSION<83,FORCED$1=CHROME_BUG||!arrayMethodIsStrict$1("reduce");$$5({target:"Array",proto:!0,forced:FORCED$1},{reduce:function le(oe){var ie=arguments.length;return $reduce(this,oe,ie,ie>1?arguments[1]:void 0)}});var $$4=_export,uncurryThis$5=functionUncurryThisClause,getOwnPropertyDescriptor=objectGetOwnPropertyDescriptor.f,toLength$1=toLength$6,toString$3=toString$9,notARegExp$1=notARegexp,requireObjectCoercible$3=requireObjectCoercible$b,correctIsRegExpLogic$1=correctIsRegexpLogic,slice=uncurryThis$5("".slice),min$1=Math.min,CORRECT_IS_REGEXP_LOGIC=correctIsRegExpLogic$1("endsWith"),MDN_POLYFILL_BUG=!CORRECT_IS_REGEXP_LOGIC&&!!function(){var le=getOwnPropertyDescriptor(String.prototype,"endsWith");return le&&!le.writable}();$$4({target:"String",proto:!0,forced:!MDN_POLYFILL_BUG&&!CORRECT_IS_REGEXP_LOGIC},{endsWith:function le(oe){var ie=toString$3(requireObjectCoercible$3(this));notARegExp$1(oe);var ue=arguments.length>1?arguments[1]:void 0,de=ie.length,he=ue===void 0?de:min$1(toLength$1(ue),de),pe=toString$3(oe);return slice(ie,he-pe.length,he)===pe}});var call$1=functionCall,uncurryThis$4=functionUncurryThis,fixRegExpWellKnownSymbolLogic=fixRegexpWellKnownSymbolLogic,anObject$1=anObject$f,isNullOrUndefined=isNullOrUndefined$7,requireObjectCoercible$2=requireObjectCoercible$b,speciesConstructor=speciesConstructor$2,advanceStringIndex=advanceStringIndex$3,toLength=toLength$6,toString$2=toString$9,getMethod=getMethod$6,regExpExec=regexpExecAbstract,stickyHelpers=regexpStickyHelpers,fails$2=fails$l,UNSUPPORTED_Y=stickyHelpers.UNSUPPORTED_Y,MAX_UINT32=4294967295,min=Math.min,push=uncurryThis$4([].push),stringSlice=uncurryThis$4("".slice),SPLIT_WORKS_WITH_OVERWRITTEN_EXEC=!fails$2(function(){var le=/(?:)/,oe=le.exec;le.exec=function(){return oe.apply(this,arguments)};var ie="ab".split(le);return ie.length!==2||ie[0]!=="a"||ie[1]!=="b"}),BUGGY="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;fixRegExpWellKnownSymbolLogic("split",function(le,oe,ie){var ue="0".split(void 0,0).length?function(de,he){return de===void 0&&he===0?[]:call$1(oe,this,de,he)}:oe;return[function(he,pe){var _e=requireObjectCoercible$2(this),Ce=isNullOrUndefined(he)?void 0:getMethod(he,le);return Ce?call$1(Ce,he,_e,pe):call$1(ue,toString$2(_e),he,pe)},function(de,he){var pe=anObject$1(this),_e=toString$2(de);if(!BUGGY){var Ce=ie(ue,pe,_e,he,ue!==oe);if(Ce.done)return Ce.value}var xe=speciesConstructor(pe,RegExp),Ie=pe.unicode,$e=(pe.ignoreCase?"i":"")+(pe.multiline?"m":"")+(pe.unicode?"u":"")+(UNSUPPORTED_Y?"g":"y"),Ne=new xe(UNSUPPORTED_Y?"^(?:"+pe.source+")":pe,$e),Oe=he===void 0?MAX_UINT32:he>>>0;if(Oe===0)return[];if(_e.length===0)return regExpExec(Ne,_e)===null?[_e]:[];for(var Fe=0,Ve=0,ze=[];Ve<_e.length;){Ne.lastIndex=UNSUPPORTED_Y?0:Ve;var Ue=regExpExec(Ne,UNSUPPORTED_Y?stringSlice(_e,Ve):_e),Pt;if(Ue===null||(Pt=min(toLength(Ne.lastIndex+(UNSUPPORTED_Y?Ve:0)),_e.length))===Fe)Ve=advanceStringIndex(_e,Ve,Ie);else{if(push(ze,stringSlice(_e,Fe,Ve)),ze.length===Oe)return ze;for(var qe=1;qe<=Ue.length-1;qe++)if(push(ze,Ue[qe]),ze.length===Oe)return ze;Ve=Fe=Pt}}return push(ze,stringSlice(_e,Fe)),ze}]},BUGGY||!SPLIT_WORKS_WITH_OVERWRITTEN_EXEC,UNSUPPORTED_Y);var raf$1={exports:{}},performanceNow={exports:{}};(function(){var le,oe,ie,ue,de,he;typeof performance<"u"&&performance!==null&&performance.now?performanceNow.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(performanceNow.exports=function(){return(le()-de)/1e6},oe=process.hrtime,le=function(){var pe;return pe=oe(),pe[0]*1e9+pe[1]},ue=le(),he=process.uptime()*1e9,de=ue-he):Date.now?(performanceNow.exports=function(){return Date.now()-ie},ie=Date.now()):(performanceNow.exports=function(){return new Date().getTime()-ie},ie=new Date().getTime())}).call(commonjsGlobal);var performanceNowExports=performanceNow.exports,now=performanceNowExports,root=typeof window>"u"?commonjsGlobal:window,vendors=["moz","webkit"],suffix="AnimationFrame",raf=root["request"+suffix],caf=root["cancel"+suffix]||root["cancelRequest"+suffix];for(var i$1=0;!raf&&i$1<vendors.length;i$1++)raf=root[vendors[i$1]+"Request"+suffix],caf=root[vendors[i$1]+"Cancel"+suffix]||root[vendors[i$1]+"CancelRequest"+suffix];if(!raf||!caf){var last=0,id=0,queue=[],frameDuration=1e3/60;raf=function(le){if(queue.length===0){var oe=now(),ie=Math.max(0,frameDuration-(oe-last));last=ie+oe,setTimeout(function(){var ue=queue.slice(0);queue.length=0;for(var de=0;de<ue.length;de++)if(!ue[de].cancelled)try{ue[de].callback(last)}catch(he){setTimeout(function(){throw he},0)}},Math.round(ie))}return queue.push({handle:++id,callback:le,cancelled:!1}),id},caf=function(le){for(var oe=0;oe<queue.length;oe++)queue[oe].handle===le&&(queue[oe].cancelled=!0)}}raf$1.exports=function(le){return raf.call(root,le)};raf$1.exports.cancel=function(){caf.apply(root,arguments)};raf$1.exports.polyfill=function(le){le||(le=root),le.requestAnimationFrame=raf,le.cancelAnimationFrame=caf};var rafExports=raf$1.exports;const requestAnimationFrame$1=getDefaultExportFromCjs(rafExports);var whitespaces$2=`	
\v\f\r \u2028\u2029\uFEFF`,uncurryThis$3=functionUncurryThis,requireObjectCoercible$1=requireObjectCoercible$b,toString$1=toString$9,whitespaces$1=whitespaces$2,replace=uncurryThis$3("".replace),ltrim=RegExp("^["+whitespaces$1+"]+"),rtrim=RegExp("(^|[^"+whitespaces$1+"])["+whitespaces$1+"]+$"),createMethod=function(le){return function(oe){var ie=toString$1(requireObjectCoercible$1(oe));return le&1&&(ie=replace(ie,ltrim,"")),le&2&&(ie=replace(ie,rtrim,"$1")),ie}},stringTrim={start:createMethod(1),end:createMethod(2),trim:createMethod(3)},PROPER_FUNCTION_NAME$1=functionName.PROPER,fails$1=fails$l,whitespaces=whitespaces$2,non="",stringTrimForced=function(le){return fails$1(function(){return!!whitespaces[le]()||non[le]()!==non||PROPER_FUNCTION_NAME$1&&whitespaces[le].name!==le})},$$3=_export,$trim=stringTrim.trim,forcedStringTrimMethod=stringTrimForced;$$3({target:"String",proto:!0,forced:forcedStringTrimMethod("trim")},{trim:function le(){return $trim(this)}});var rgbcolor=function(le){this.ok=!1,this.alpha=1,le.charAt(0)=="#"&&(le=le.substr(1,6)),le=le.replace(/ /g,""),le=le.toLowerCase();var oe={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};le=oe[le]||le;for(var ie=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(Ce){return[parseInt(Ce[1]),parseInt(Ce[2]),parseInt(Ce[3]),parseFloat(Ce[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(Ce){return[parseInt(Ce[1]),parseInt(Ce[2]),parseInt(Ce[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(Ce){return[parseInt(Ce[1],16),parseInt(Ce[2],16),parseInt(Ce[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(Ce){return[parseInt(Ce[1]+Ce[1],16),parseInt(Ce[2]+Ce[2],16),parseInt(Ce[3]+Ce[3],16)]}}],ue=0;ue<ie.length;ue++){var de=ie[ue].re,he=ie[ue].process,pe=de.exec(le);if(pe){var _e=he(pe);this.r=_e[0],this.g=_e[1],this.b=_e[2],_e.length>3&&(this.alpha=_e[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var Ce=this.r.toString(16),xe=this.g.toString(16),Ie=this.b.toString(16);return Ce.length==1&&(Ce="0"+Ce),xe.length==1&&(xe="0"+xe),Ie.length==1&&(Ie="0"+Ie),"#"+Ce+xe+Ie},this.getHelpXML=function(){for(var Ce=new Array,xe=0;xe<ie.length;xe++)for(var Ie=ie[xe].example,$e=0;$e<Ie.length;$e++)Ce[Ce.length]=Ie[$e];for(var Ne in oe)Ce[Ce.length]=Ne;var Oe=document.createElement("ul");Oe.setAttribute("id","rgbcolor-examples");for(var xe=0;xe<Ce.length;xe++)try{var Fe=document.createElement("li"),Ve=new RGBColor(Ce[xe]),ze=document.createElement("div");ze.style.cssText="margin: 3px; border: 1px solid black; background:"+Ve.toHex()+"; color:"+Ve.toHex(),ze.appendChild(document.createTextNode("test"));var Ue=document.createTextNode(" "+Ce[xe]+" -> "+Ve.toRGB()+" -> "+Ve.toHex());Fe.appendChild(ze),Fe.appendChild(Ue),Oe.appendChild(Fe)}catch{}return Oe}};const RGBColor$1=getDefaultExportFromCjs(rgbcolor);var $$2=_export,uncurryThis$2=functionUncurryThisClause,$indexOf=arrayIncludes.indexOf,arrayMethodIsStrict=arrayMethodIsStrict$2,nativeIndexOf=uncurryThis$2([].indexOf),NEGATIVE_ZERO=!!nativeIndexOf&&1/nativeIndexOf([1],1,-0)<0,FORCED=NEGATIVE_ZERO||!arrayMethodIsStrict("indexOf");$$2({target:"Array",proto:!0,forced:FORCED},{indexOf:function le(oe){var ie=arguments.length>1?arguments[1]:void 0;return NEGATIVE_ZERO?nativeIndexOf(this,oe,ie)||0:$indexOf(this,oe,ie)}});var $$1=_export,uncurryThis$1=functionUncurryThis,notARegExp=notARegexp,requireObjectCoercible=requireObjectCoercible$b,toString=toString$9,correctIsRegExpLogic=correctIsRegexpLogic,stringIndexOf=uncurryThis$1("".indexOf);$$1({target:"String",proto:!0,forced:!correctIsRegExpLogic("includes")},{includes:function le(oe){return!!~stringIndexOf(toString(requireObjectCoercible(this)),toString(notARegExp(oe)),arguments.length>1?arguments[1]:void 0)}});var classof=classofRaw$2,isArray$1=Array.isArray||function le(oe){return classof(oe)==="Array"},$=_export,uncurryThis=functionUncurryThis,isArray=isArray$1,nativeReverse=uncurryThis([].reverse),test=[1,2];$({target:"Array",proto:!0,forced:String(test)===String(test.reverse())},{reverse:function le(){return isArray(this)&&(this.length=this.length),nativeReverse(this)}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var t=function(le,oe){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ie,ue){ie.__proto__=ue}||function(ie,ue){for(var de in ue)Object.prototype.hasOwnProperty.call(ue,de)&&(ie[de]=ue[de])})(le,oe)};function r(le,oe){if(typeof oe!="function"&&oe!==null)throw new TypeError("Class extends value "+String(oe)+" is not a constructor or null");function ie(){this.constructor=le}t(le,oe),le.prototype=oe===null?Object.create(oe):(ie.prototype=oe.prototype,new ie)}function e(le){var oe="";Array.isArray(le)||(le=[le]);for(var ie=0;ie<le.length;ie++){var ue=le[ie];if(ue.type===_.CLOSE_PATH)oe+="z";else if(ue.type===_.HORIZ_LINE_TO)oe+=(ue.relative?"h":"H")+ue.x;else if(ue.type===_.VERT_LINE_TO)oe+=(ue.relative?"v":"V")+ue.y;else if(ue.type===_.MOVE_TO)oe+=(ue.relative?"m":"M")+ue.x+" "+ue.y;else if(ue.type===_.LINE_TO)oe+=(ue.relative?"l":"L")+ue.x+" "+ue.y;else if(ue.type===_.CURVE_TO)oe+=(ue.relative?"c":"C")+ue.x1+" "+ue.y1+" "+ue.x2+" "+ue.y2+" "+ue.x+" "+ue.y;else if(ue.type===_.SMOOTH_CURVE_TO)oe+=(ue.relative?"s":"S")+ue.x2+" "+ue.y2+" "+ue.x+" "+ue.y;else if(ue.type===_.QUAD_TO)oe+=(ue.relative?"q":"Q")+ue.x1+" "+ue.y1+" "+ue.x+" "+ue.y;else if(ue.type===_.SMOOTH_QUAD_TO)oe+=(ue.relative?"t":"T")+ue.x+" "+ue.y;else{if(ue.type!==_.ARC)throw new Error('Unexpected command type "'+ue.type+'" at index '+ie+".");oe+=(ue.relative?"a":"A")+ue.rX+" "+ue.rY+" "+ue.xRot+" "+ +ue.lArcFlag+" "+ +ue.sweepFlag+" "+ue.x+" "+ue.y}}return oe}function i(le,oe){var ie=le[0],ue=le[1];return[ie*Math.cos(oe)-ue*Math.sin(oe),ie*Math.sin(oe)+ue*Math.cos(oe)]}function a(){for(var le=[],oe=0;oe<arguments.length;oe++)le[oe]=arguments[oe];for(var ie=0;ie<le.length;ie++)if(typeof le[ie]!="number")throw new Error("assertNumbers arguments["+ie+"] is not a number. "+typeof le[ie]+" == typeof "+le[ie]);return!0}var n=Math.PI;function o(le,oe,ie){le.lArcFlag=le.lArcFlag===0?0:1,le.sweepFlag=le.sweepFlag===0?0:1;var ue=le.rX,de=le.rY,he=le.x,pe=le.y;ue=Math.abs(le.rX),de=Math.abs(le.rY);var _e=i([(oe-he)/2,(ie-pe)/2],-le.xRot/180*n),Ce=_e[0],xe=_e[1],Ie=Math.pow(Ce,2)/Math.pow(ue,2)+Math.pow(xe,2)/Math.pow(de,2);1<Ie&&(ue*=Math.sqrt(Ie),de*=Math.sqrt(Ie)),le.rX=ue,le.rY=de;var $e=Math.pow(ue,2)*Math.pow(xe,2)+Math.pow(de,2)*Math.pow(Ce,2),Ne=(le.lArcFlag!==le.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(ue,2)*Math.pow(de,2)-$e)/$e)),Oe=ue*xe/de*Ne,Fe=-de*Ce/ue*Ne,Ve=i([Oe,Fe],le.xRot/180*n);le.cX=Ve[0]+(oe+he)/2,le.cY=Ve[1]+(ie+pe)/2,le.phi1=Math.atan2((xe-Fe)/de,(Ce-Oe)/ue),le.phi2=Math.atan2((-xe-Fe)/de,(-Ce-Oe)/ue),le.sweepFlag===0&&le.phi2>le.phi1&&(le.phi2-=2*n),le.sweepFlag===1&&le.phi2<le.phi1&&(le.phi2+=2*n),le.phi1*=180/n,le.phi2*=180/n}function s(le,oe,ie){a(le,oe,ie);var ue=le*le+oe*oe-ie*ie;if(0>ue)return[];if(ue===0)return[[le*ie/(le*le+oe*oe),oe*ie/(le*le+oe*oe)]];var de=Math.sqrt(ue);return[[(le*ie+oe*de)/(le*le+oe*oe),(oe*ie-le*de)/(le*le+oe*oe)],[(le*ie-oe*de)/(le*le+oe*oe),(oe*ie+le*de)/(le*le+oe*oe)]]}var u,h$1=Math.PI/180;function c$1(le,oe,ie){return(1-ie)*le+ie*oe}function y(le,oe,ie,ue){return le+Math.cos(ue/180*n)*oe+Math.sin(ue/180*n)*ie}function p(le,oe,ie,ue){var de=1e-6,he=oe-le,pe=ie-oe,_e=3*he+3*(ue-ie)-6*pe,Ce=6*(pe-he),xe=3*he;return Math.abs(_e)<de?[-xe/Ce]:function(Ie,$e,Ne){var Oe=Ie*Ie/4-$e;if(Oe<-Ne)return[];if(Oe<=Ne)return[-Ie/2];var Fe=Math.sqrt(Oe);return[-Ie/2-Fe,-Ie/2+Fe]}(Ce/_e,xe/_e,de)}function m$1(le,oe,ie,ue,de){var he=1-de;return le*(he*he*he)+oe*(3*he*he*de)+ie*(3*he*de*de)+ue*(de*de*de)}(function(le){function oe(){return de(function(_e,Ce,xe){return _e.relative&&(_e.x1!==void 0&&(_e.x1+=Ce),_e.y1!==void 0&&(_e.y1+=xe),_e.x2!==void 0&&(_e.x2+=Ce),_e.y2!==void 0&&(_e.y2+=xe),_e.x!==void 0&&(_e.x+=Ce),_e.y!==void 0&&(_e.y+=xe),_e.relative=!1),_e})}function ie(){var _e=NaN,Ce=NaN,xe=NaN,Ie=NaN;return de(function($e,Ne,Oe){return $e.type&_.SMOOTH_CURVE_TO&&($e.type=_.CURVE_TO,_e=isNaN(_e)?Ne:_e,Ce=isNaN(Ce)?Oe:Ce,$e.x1=$e.relative?Ne-_e:2*Ne-_e,$e.y1=$e.relative?Oe-Ce:2*Oe-Ce),$e.type&_.CURVE_TO?(_e=$e.relative?Ne+$e.x2:$e.x2,Ce=$e.relative?Oe+$e.y2:$e.y2):(_e=NaN,Ce=NaN),$e.type&_.SMOOTH_QUAD_TO&&($e.type=_.QUAD_TO,xe=isNaN(xe)?Ne:xe,Ie=isNaN(Ie)?Oe:Ie,$e.x1=$e.relative?Ne-xe:2*Ne-xe,$e.y1=$e.relative?Oe-Ie:2*Oe-Ie),$e.type&_.QUAD_TO?(xe=$e.relative?Ne+$e.x1:$e.x1,Ie=$e.relative?Oe+$e.y1:$e.y1):(xe=NaN,Ie=NaN),$e})}function ue(){var _e=NaN,Ce=NaN;return de(function(xe,Ie,$e){if(xe.type&_.SMOOTH_QUAD_TO&&(xe.type=_.QUAD_TO,_e=isNaN(_e)?Ie:_e,Ce=isNaN(Ce)?$e:Ce,xe.x1=xe.relative?Ie-_e:2*Ie-_e,xe.y1=xe.relative?$e-Ce:2*$e-Ce),xe.type&_.QUAD_TO){_e=xe.relative?Ie+xe.x1:xe.x1,Ce=xe.relative?$e+xe.y1:xe.y1;var Ne=xe.x1,Oe=xe.y1;xe.type=_.CURVE_TO,xe.x1=((xe.relative?0:Ie)+2*Ne)/3,xe.y1=((xe.relative?0:$e)+2*Oe)/3,xe.x2=(xe.x+2*Ne)/3,xe.y2=(xe.y+2*Oe)/3}else _e=NaN,Ce=NaN;return xe})}function de(_e){var Ce=0,xe=0,Ie=NaN,$e=NaN;return function(Ne){if(isNaN(Ie)&&!(Ne.type&_.MOVE_TO))throw new Error("path must start with moveto");var Oe=_e(Ne,Ce,xe,Ie,$e);return Ne.type&_.CLOSE_PATH&&(Ce=Ie,xe=$e),Ne.x!==void 0&&(Ce=Ne.relative?Ce+Ne.x:Ne.x),Ne.y!==void 0&&(xe=Ne.relative?xe+Ne.y:Ne.y),Ne.type&_.MOVE_TO&&(Ie=Ce,$e=xe),Oe}}function he(_e,Ce,xe,Ie,$e,Ne){return a(_e,Ce,xe,Ie,$e,Ne),de(function(Oe,Fe,Ve,ze){var Ue=Oe.x1,Pt=Oe.x2,qe=Oe.relative&&!isNaN(ze),Et=Oe.x!==void 0?Oe.x:qe?0:Fe,kt=Oe.y!==void 0?Oe.y:qe?0:Ve;function At(On){return On*On}Oe.type&_.HORIZ_LINE_TO&&Ce!==0&&(Oe.type=_.LINE_TO,Oe.y=Oe.relative?0:Ve),Oe.type&_.VERT_LINE_TO&&xe!==0&&(Oe.type=_.LINE_TO,Oe.x=Oe.relative?0:Fe),Oe.x!==void 0&&(Oe.x=Oe.x*_e+kt*xe+(qe?0:$e)),Oe.y!==void 0&&(Oe.y=Et*Ce+Oe.y*Ie+(qe?0:Ne)),Oe.x1!==void 0&&(Oe.x1=Oe.x1*_e+Oe.y1*xe+(qe?0:$e)),Oe.y1!==void 0&&(Oe.y1=Ue*Ce+Oe.y1*Ie+(qe?0:Ne)),Oe.x2!==void 0&&(Oe.x2=Oe.x2*_e+Oe.y2*xe+(qe?0:$e)),Oe.y2!==void 0&&(Oe.y2=Pt*Ce+Oe.y2*Ie+(qe?0:Ne));var Dt=_e*Ie-Ce*xe;if(Oe.xRot!==void 0&&(_e!==1||Ce!==0||xe!==0||Ie!==1))if(Dt===0)delete Oe.rX,delete Oe.rY,delete Oe.xRot,delete Oe.lArcFlag,delete Oe.sweepFlag,Oe.type=_.LINE_TO;else{var Lt=Oe.xRot*Math.PI/180,jt=Math.sin(Lt),_n=Math.cos(Lt),bn=1/At(Oe.rX),vn=1/At(Oe.rY),Tn=At(_n)*bn+At(jt)*vn,$n=2*jt*_n*(bn-vn),wn=At(jt)*bn+At(_n)*vn,Cn=Tn*Ie*Ie-$n*Ce*Ie+wn*Ce*Ce,Sn=$n*(_e*Ie+Ce*xe)-2*(Tn*xe*Ie+wn*_e*Ce),In=Tn*xe*xe-$n*_e*xe+wn*_e*_e,En=(Math.atan2(Sn,Cn-In)+Math.PI)%Math.PI/2,xn=Math.sin(En),kn=Math.cos(En);Oe.rX=Math.abs(Dt)/Math.sqrt(Cn*At(kn)+Sn*xn*kn+In*At(xn)),Oe.rY=Math.abs(Dt)/Math.sqrt(Cn*At(xn)-Sn*xn*kn+In*At(kn)),Oe.xRot=180*En/Math.PI}return Oe.sweepFlag!==void 0&&0>Dt&&(Oe.sweepFlag=+!Oe.sweepFlag),Oe})}function pe(){return function(_e){var Ce={};for(var xe in _e)Ce[xe]=_e[xe];return Ce}}le.ROUND=function(_e){function Ce(xe){return Math.round(xe*_e)/_e}return _e===void 0&&(_e=1e13),a(_e),function(xe){return xe.x1!==void 0&&(xe.x1=Ce(xe.x1)),xe.y1!==void 0&&(xe.y1=Ce(xe.y1)),xe.x2!==void 0&&(xe.x2=Ce(xe.x2)),xe.y2!==void 0&&(xe.y2=Ce(xe.y2)),xe.x!==void 0&&(xe.x=Ce(xe.x)),xe.y!==void 0&&(xe.y=Ce(xe.y)),xe.rX!==void 0&&(xe.rX=Ce(xe.rX)),xe.rY!==void 0&&(xe.rY=Ce(xe.rY)),xe}},le.TO_ABS=oe,le.TO_REL=function(){return de(function(_e,Ce,xe){return _e.relative||(_e.x1!==void 0&&(_e.x1-=Ce),_e.y1!==void 0&&(_e.y1-=xe),_e.x2!==void 0&&(_e.x2-=Ce),_e.y2!==void 0&&(_e.y2-=xe),_e.x!==void 0&&(_e.x-=Ce),_e.y!==void 0&&(_e.y-=xe),_e.relative=!0),_e})},le.NORMALIZE_HVZ=function(_e,Ce,xe){return _e===void 0&&(_e=!0),Ce===void 0&&(Ce=!0),xe===void 0&&(xe=!0),de(function(Ie,$e,Ne,Oe,Fe){if(isNaN(Oe)&&!(Ie.type&_.MOVE_TO))throw new Error("path must start with moveto");return Ce&&Ie.type&_.HORIZ_LINE_TO&&(Ie.type=_.LINE_TO,Ie.y=Ie.relative?0:Ne),xe&&Ie.type&_.VERT_LINE_TO&&(Ie.type=_.LINE_TO,Ie.x=Ie.relative?0:$e),_e&&Ie.type&_.CLOSE_PATH&&(Ie.type=_.LINE_TO,Ie.x=Ie.relative?Oe-$e:Oe,Ie.y=Ie.relative?Fe-Ne:Fe),Ie.type&_.ARC&&(Ie.rX===0||Ie.rY===0)&&(Ie.type=_.LINE_TO,delete Ie.rX,delete Ie.rY,delete Ie.xRot,delete Ie.lArcFlag,delete Ie.sweepFlag),Ie})},le.NORMALIZE_ST=ie,le.QT_TO_C=ue,le.INFO=de,le.SANITIZE=function(_e){_e===void 0&&(_e=0),a(_e);var Ce=NaN,xe=NaN,Ie=NaN,$e=NaN;return de(function(Ne,Oe,Fe,Ve,ze){var Ue=Math.abs,Pt=!1,qe=0,Et=0;if(Ne.type&_.SMOOTH_CURVE_TO&&(qe=isNaN(Ce)?0:Oe-Ce,Et=isNaN(xe)?0:Fe-xe),Ne.type&(_.CURVE_TO|_.SMOOTH_CURVE_TO)?(Ce=Ne.relative?Oe+Ne.x2:Ne.x2,xe=Ne.relative?Fe+Ne.y2:Ne.y2):(Ce=NaN,xe=NaN),Ne.type&_.SMOOTH_QUAD_TO?(Ie=isNaN(Ie)?Oe:2*Oe-Ie,$e=isNaN($e)?Fe:2*Fe-$e):Ne.type&_.QUAD_TO?(Ie=Ne.relative?Oe+Ne.x1:Ne.x1,$e=Ne.relative?Fe+Ne.y1:Ne.y2):(Ie=NaN,$e=NaN),Ne.type&_.LINE_COMMANDS||Ne.type&_.ARC&&(Ne.rX===0||Ne.rY===0||!Ne.lArcFlag)||Ne.type&_.CURVE_TO||Ne.type&_.SMOOTH_CURVE_TO||Ne.type&_.QUAD_TO||Ne.type&_.SMOOTH_QUAD_TO){var kt=Ne.x===void 0?0:Ne.relative?Ne.x:Ne.x-Oe,At=Ne.y===void 0?0:Ne.relative?Ne.y:Ne.y-Fe;qe=isNaN(Ie)?Ne.x1===void 0?qe:Ne.relative?Ne.x:Ne.x1-Oe:Ie-Oe,Et=isNaN($e)?Ne.y1===void 0?Et:Ne.relative?Ne.y:Ne.y1-Fe:$e-Fe;var Dt=Ne.x2===void 0?0:Ne.relative?Ne.x:Ne.x2-Oe,Lt=Ne.y2===void 0?0:Ne.relative?Ne.y:Ne.y2-Fe;Ue(kt)<=_e&&Ue(At)<=_e&&Ue(qe)<=_e&&Ue(Et)<=_e&&Ue(Dt)<=_e&&Ue(Lt)<=_e&&(Pt=!0)}return Ne.type&_.CLOSE_PATH&&Ue(Oe-Ve)<=_e&&Ue(Fe-ze)<=_e&&(Pt=!0),Pt?[]:Ne})},le.MATRIX=he,le.ROTATE=function(_e,Ce,xe){Ce===void 0&&(Ce=0),xe===void 0&&(xe=0),a(_e,Ce,xe);var Ie=Math.sin(_e),$e=Math.cos(_e);return he($e,Ie,-Ie,$e,Ce-Ce*$e+xe*Ie,xe-Ce*Ie-xe*$e)},le.TRANSLATE=function(_e,Ce){return Ce===void 0&&(Ce=0),a(_e,Ce),he(1,0,0,1,_e,Ce)},le.SCALE=function(_e,Ce){return Ce===void 0&&(Ce=_e),a(_e,Ce),he(_e,0,0,Ce,0,0)},le.SKEW_X=function(_e){return a(_e),he(1,0,Math.atan(_e),1,0,0)},le.SKEW_Y=function(_e){return a(_e),he(1,Math.atan(_e),0,1,0,0)},le.X_AXIS_SYMMETRY=function(_e){return _e===void 0&&(_e=0),a(_e),he(-1,0,0,1,_e,0)},le.Y_AXIS_SYMMETRY=function(_e){return _e===void 0&&(_e=0),a(_e),he(1,0,0,-1,0,_e)},le.A_TO_C=function(){return de(function(_e,Ce,xe){return _.ARC===_e.type?function(Ie,$e,Ne){var Oe,Fe,Ve,ze;Ie.cX||o(Ie,$e,Ne);for(var Ue=Math.min(Ie.phi1,Ie.phi2),Pt=Math.max(Ie.phi1,Ie.phi2)-Ue,qe=Math.ceil(Pt/90),Et=new Array(qe),kt=$e,At=Ne,Dt=0;Dt<qe;Dt++){var Lt=c$1(Ie.phi1,Ie.phi2,Dt/qe),jt=c$1(Ie.phi1,Ie.phi2,(Dt+1)/qe),_n=jt-Lt,bn=4/3*Math.tan(_n*h$1/4),vn=[Math.cos(Lt*h$1)-bn*Math.sin(Lt*h$1),Math.sin(Lt*h$1)+bn*Math.cos(Lt*h$1)],Tn=vn[0],$n=vn[1],wn=[Math.cos(jt*h$1),Math.sin(jt*h$1)],Cn=wn[0],Sn=wn[1],In=[Cn+bn*Math.sin(jt*h$1),Sn-bn*Math.cos(jt*h$1)],En=In[0],xn=In[1];Et[Dt]={relative:Ie.relative,type:_.CURVE_TO};var kn=function(On,Mn){var Un=i([On*Ie.rX,Mn*Ie.rY],Ie.xRot),zn=Un[0],Hn=Un[1];return[Ie.cX+zn,Ie.cY+Hn]};Oe=kn(Tn,$n),Et[Dt].x1=Oe[0],Et[Dt].y1=Oe[1],Fe=kn(En,xn),Et[Dt].x2=Fe[0],Et[Dt].y2=Fe[1],Ve=kn(Cn,Sn),Et[Dt].x=Ve[0],Et[Dt].y=Ve[1],Ie.relative&&(Et[Dt].x1-=kt,Et[Dt].y1-=At,Et[Dt].x2-=kt,Et[Dt].y2-=At,Et[Dt].x-=kt,Et[Dt].y-=At),kt=(ze=[Et[Dt].x,Et[Dt].y])[0],At=ze[1]}return Et}(_e,_e.relative?0:Ce,_e.relative?0:xe):_e})},le.ANNOTATE_ARCS=function(){return de(function(_e,Ce,xe){return _e.relative&&(Ce=0,xe=0),_.ARC===_e.type&&o(_e,Ce,xe),_e})},le.CLONE=pe,le.CALCULATE_BOUNDS=function(){var _e=function(Ne){var Oe={};for(var Fe in Ne)Oe[Fe]=Ne[Fe];return Oe},Ce=oe(),xe=ue(),Ie=ie(),$e=de(function(Ne,Oe,Fe){var Ve=Ie(xe(Ce(_e(Ne))));function ze(xn){xn>$e.maxX&&($e.maxX=xn),xn<$e.minX&&($e.minX=xn)}function Ue(xn){xn>$e.maxY&&($e.maxY=xn),xn<$e.minY&&($e.minY=xn)}if(Ve.type&_.DRAWING_COMMANDS&&(ze(Oe),Ue(Fe)),Ve.type&_.HORIZ_LINE_TO&&ze(Ve.x),Ve.type&_.VERT_LINE_TO&&Ue(Ve.y),Ve.type&_.LINE_TO&&(ze(Ve.x),Ue(Ve.y)),Ve.type&_.CURVE_TO){ze(Ve.x),Ue(Ve.y);for(var Pt=0,qe=p(Oe,Ve.x1,Ve.x2,Ve.x);Pt<qe.length;Pt++)0<(En=qe[Pt])&&1>En&&ze(m$1(Oe,Ve.x1,Ve.x2,Ve.x,En));for(var Et=0,kt=p(Fe,Ve.y1,Ve.y2,Ve.y);Et<kt.length;Et++)0<(En=kt[Et])&&1>En&&Ue(m$1(Fe,Ve.y1,Ve.y2,Ve.y,En))}if(Ve.type&_.ARC){ze(Ve.x),Ue(Ve.y),o(Ve,Oe,Fe);for(var At=Ve.xRot/180*Math.PI,Dt=Math.cos(At)*Ve.rX,Lt=Math.sin(At)*Ve.rX,jt=-Math.sin(At)*Ve.rY,_n=Math.cos(At)*Ve.rY,bn=Ve.phi1<Ve.phi2?[Ve.phi1,Ve.phi2]:-180>Ve.phi2?[Ve.phi2+360,Ve.phi1+360]:[Ve.phi2,Ve.phi1],vn=bn[0],Tn=bn[1],$n=function(xn){var kn=xn[0],On=xn[1],Mn=180*Math.atan2(On,kn)/Math.PI;return Mn<vn?Mn+360:Mn},wn=0,Cn=s(jt,-Dt,0).map($n);wn<Cn.length;wn++)(En=Cn[wn])>vn&&En<Tn&&ze(y(Ve.cX,Dt,jt,En));for(var Sn=0,In=s(_n,-Lt,0).map($n);Sn<In.length;Sn++){var En;(En=In[Sn])>vn&&En<Tn&&Ue(y(Ve.cY,Lt,_n,En))}}return Ne});return $e.minX=1/0,$e.maxX=-1/0,$e.minY=1/0,$e.maxY=-1/0,$e}})(u||(u={}));var O,l=function(){function le(){}return le.prototype.round=function(oe){return this.transform(u.ROUND(oe))},le.prototype.toAbs=function(){return this.transform(u.TO_ABS())},le.prototype.toRel=function(){return this.transform(u.TO_REL())},le.prototype.normalizeHVZ=function(oe,ie,ue){return this.transform(u.NORMALIZE_HVZ(oe,ie,ue))},le.prototype.normalizeST=function(){return this.transform(u.NORMALIZE_ST())},le.prototype.qtToC=function(){return this.transform(u.QT_TO_C())},le.prototype.aToC=function(){return this.transform(u.A_TO_C())},le.prototype.sanitize=function(oe){return this.transform(u.SANITIZE(oe))},le.prototype.translate=function(oe,ie){return this.transform(u.TRANSLATE(oe,ie))},le.prototype.scale=function(oe,ie){return this.transform(u.SCALE(oe,ie))},le.prototype.rotate=function(oe,ie,ue){return this.transform(u.ROTATE(oe,ie,ue))},le.prototype.matrix=function(oe,ie,ue,de,he,pe){return this.transform(u.MATRIX(oe,ie,ue,de,he,pe))},le.prototype.skewX=function(oe){return this.transform(u.SKEW_X(oe))},le.prototype.skewY=function(oe){return this.transform(u.SKEW_Y(oe))},le.prototype.xSymmetry=function(oe){return this.transform(u.X_AXIS_SYMMETRY(oe))},le.prototype.ySymmetry=function(oe){return this.transform(u.Y_AXIS_SYMMETRY(oe))},le.prototype.annotateArcs=function(){return this.transform(u.ANNOTATE_ARCS())},le}(),T=function(le){return le===" "||le==="	"||le==="\r"||le===`
`},v=function(le){return 48<=le.charCodeAt(0)&&le.charCodeAt(0)<=57},f=function(le){function oe(){var ie=le.call(this)||this;return ie.curNumber="",ie.curCommandType=-1,ie.curCommandRelative=!1,ie.canParseCommandOrComma=!0,ie.curNumberHasExp=!1,ie.curNumberHasExpDigits=!1,ie.curNumberHasDecimal=!1,ie.curArgs=[],ie}return r(oe,le),oe.prototype.finish=function(ie){if(ie===void 0&&(ie=[]),this.parse(" ",ie),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return ie},oe.prototype.parse=function(ie,ue){var de=this;ue===void 0&&(ue=[]);for(var he=function($e){ue.push($e),de.curArgs.length=0,de.canParseCommandOrComma=!0},pe=0;pe<ie.length;pe++){var _e=ie[pe],Ce=!(this.curCommandType!==_.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),xe=v(_e)&&(this.curNumber==="0"&&_e==="0"||Ce);if(!v(_e)||xe)if(_e!=="e"&&_e!=="E")if(_e!=="-"&&_e!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(_e!=="."||this.curNumberHasExp||this.curNumberHasDecimal||Ce){if(this.curNumber&&this.curCommandType!==-1){var Ie=Number(this.curNumber);if(isNaN(Ie))throw new SyntaxError("Invalid number ending at "+pe);if(this.curCommandType===_.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>Ie)throw new SyntaxError('Expected positive number, got "'+Ie+'" at index "'+pe+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+pe+'"')}this.curArgs.push(Ie),this.curArgs.length===N[this.curCommandType]&&(_.HORIZ_LINE_TO===this.curCommandType?he({type:_.HORIZ_LINE_TO,relative:this.curCommandRelative,x:Ie}):_.VERT_LINE_TO===this.curCommandType?he({type:_.VERT_LINE_TO,relative:this.curCommandRelative,y:Ie}):this.curCommandType===_.MOVE_TO||this.curCommandType===_.LINE_TO||this.curCommandType===_.SMOOTH_QUAD_TO?(he({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),_.MOVE_TO===this.curCommandType&&(this.curCommandType=_.LINE_TO)):this.curCommandType===_.CURVE_TO?he({type:_.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===_.SMOOTH_CURVE_TO?he({type:_.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===_.QUAD_TO?he({type:_.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===_.ARC&&he({type:_.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!T(_e))if(_e===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(_e!=="+"&&_e!=="-"&&_e!==".")if(xe)this.curNumber=_e,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+pe+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+_e+'" at index '+pe+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,_e!=="z"&&_e!=="Z")if(_e==="h"||_e==="H")this.curCommandType=_.HORIZ_LINE_TO,this.curCommandRelative=_e==="h";else if(_e==="v"||_e==="V")this.curCommandType=_.VERT_LINE_TO,this.curCommandRelative=_e==="v";else if(_e==="m"||_e==="M")this.curCommandType=_.MOVE_TO,this.curCommandRelative=_e==="m";else if(_e==="l"||_e==="L")this.curCommandType=_.LINE_TO,this.curCommandRelative=_e==="l";else if(_e==="c"||_e==="C")this.curCommandType=_.CURVE_TO,this.curCommandRelative=_e==="c";else if(_e==="s"||_e==="S")this.curCommandType=_.SMOOTH_CURVE_TO,this.curCommandRelative=_e==="s";else if(_e==="q"||_e==="Q")this.curCommandType=_.QUAD_TO,this.curCommandRelative=_e==="q";else if(_e==="t"||_e==="T")this.curCommandType=_.SMOOTH_QUAD_TO,this.curCommandRelative=_e==="t";else{if(_e!=="a"&&_e!=="A")throw new SyntaxError('Unexpected character "'+_e+'" at index '+pe+".");this.curCommandType=_.ARC,this.curCommandRelative=_e==="a"}else ue.push({type:_.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=_e,this.curNumberHasDecimal=_e==="."}else this.curNumber+=_e,this.curNumberHasDecimal=!0;else this.curNumber+=_e;else this.curNumber+=_e,this.curNumberHasExp=!0;else this.curNumber+=_e,this.curNumberHasExpDigits=this.curNumberHasExp}return ue},oe.prototype.transform=function(ie){return Object.create(this,{parse:{value:function(ue,de){de===void 0&&(de=[]);for(var he=0,pe=Object.getPrototypeOf(this).parse.call(this,ue);he<pe.length;he++){var _e=pe[he],Ce=ie(_e);Array.isArray(Ce)?de.push.apply(de,Ce):de.push(Ce)}return de}}})},oe}(l),_=function(le){function oe(ie){var ue=le.call(this)||this;return ue.commands=typeof ie=="string"?oe.parse(ie):ie,ue}return r(oe,le),oe.prototype.encode=function(){return oe.encode(this.commands)},oe.prototype.getBounds=function(){var ie=u.CALCULATE_BOUNDS();return this.transform(ie),ie},oe.prototype.transform=function(ie){for(var ue=[],de=0,he=this.commands;de<he.length;de++){var pe=ie(he[de]);Array.isArray(pe)?ue.push.apply(ue,pe):ue.push(pe)}return this.commands=ue,this},oe.encode=function(ie){return e(ie)},oe.parse=function(ie){var ue=new f,de=[];return ue.parse(ie,de),ue.finish(de),de},oe.CLOSE_PATH=1,oe.MOVE_TO=2,oe.HORIZ_LINE_TO=4,oe.VERT_LINE_TO=8,oe.LINE_TO=16,oe.CURVE_TO=32,oe.SMOOTH_CURVE_TO=64,oe.QUAD_TO=128,oe.SMOOTH_QUAD_TO=256,oe.ARC=512,oe.LINE_COMMANDS=oe.LINE_TO|oe.HORIZ_LINE_TO|oe.VERT_LINE_TO,oe.DRAWING_COMMANDS=oe.HORIZ_LINE_TO|oe.VERT_LINE_TO|oe.LINE_TO|oe.CURVE_TO|oe.SMOOTH_CURVE_TO|oe.QUAD_TO|oe.SMOOTH_QUAD_TO|oe.ARC,oe}(l),N=((O={})[_.MOVE_TO]=2,O[_.LINE_TO]=2,O[_.HORIZ_LINE_TO]=1,O[_.VERT_LINE_TO]=1,O[_.CLOSE_PATH]=0,O[_.QUAD_TO]=4,O[_.SMOOTH_QUAD_TO]=2,O[_.CURVE_TO]=6,O[_.SMOOTH_CURVE_TO]=4,O[_.ARC]=7,O),call=functionCall,hasOwn=hasOwnProperty_1,isPrototypeOf=objectIsPrototypeOf,regExpFlags=regexpFlags$1,RegExpPrototype$1=RegExp.prototype,regexpGetFlags=function(le){var oe=le.flags;return oe===void 0&&!("flags"in RegExpPrototype$1)&&!hasOwn(le,"flags")&&isPrototypeOf(RegExpPrototype$1,le)?call(regExpFlags,le):oe},PROPER_FUNCTION_NAME=functionName.PROPER,defineBuiltIn=defineBuiltIn$7,anObject=anObject$f,$toString=toString$9,fails=fails$l,getRegExpFlags=regexpGetFlags,TO_STRING="toString",RegExpPrototype=RegExp.prototype,nativeToString=RegExpPrototype[TO_STRING],NOT_GENERIC=fails(function(){return nativeToString.call({source:"a",flags:"b"})!=="/a/b"}),INCORRECT_NAME=PROPER_FUNCTION_NAME&&nativeToString.name!==TO_STRING;(NOT_GENERIC||INCORRECT_NAME)&&defineBuiltIn(RegExpPrototype,TO_STRING,function(){var oe=anObject(this),ie=$toString(oe.source),ue=$toString(getRegExpFlags(oe));return"/"+ie+"/"+ue},{unsafe:!0});function _typeof(le){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(oe){return typeof oe}:_typeof=function(oe){return oe&&typeof Symbol=="function"&&oe.constructor===Symbol&&oe!==Symbol.prototype?"symbol":typeof oe},_typeof(le)}function _classCallCheck(le,oe){if(!(le instanceof oe))throw new TypeError("Cannot call a class as a function")}var mulTable=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],shgTable=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function getImageDataFromCanvas(le,oe,ie,ue,de){if(typeof le=="string"&&(le=document.getElementById(le)),!le||_typeof(le)!=="object"||!("getContext"in le))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var he=le.getContext("2d");try{return he.getImageData(oe,ie,ue,de)}catch(pe){throw new Error("unable to access image data: "+pe)}}function processCanvasRGBA(le,oe,ie,ue,de,he){if(!(isNaN(he)||he<1)){he|=0;var pe=getImageDataFromCanvas(le,oe,ie,ue,de);pe=processImageDataRGBA(pe,oe,ie,ue,de,he),le.getContext("2d").putImageData(pe,oe,ie)}}function processImageDataRGBA(le,oe,ie,ue,de,he){for(var pe=le.data,_e=2*he+1,Ce=ue-1,xe=de-1,Ie=he+1,$e=Ie*(Ie+1)/2,Ne=new BlurStack,Oe=Ne,Fe,Ve=1;Ve<_e;Ve++)Oe=Oe.next=new BlurStack,Ve===Ie&&(Fe=Oe);Oe.next=Ne;for(var ze=null,Ue=null,Pt=0,qe=0,Et=mulTable[he],kt=shgTable[he],At=0;At<de;At++){Oe=Ne;for(var Dt=pe[qe],Lt=pe[qe+1],jt=pe[qe+2],_n=pe[qe+3],bn=0;bn<Ie;bn++)Oe.r=Dt,Oe.g=Lt,Oe.b=jt,Oe.a=_n,Oe=Oe.next;for(var vn=0,Tn=0,$n=0,wn=0,Cn=Ie*Dt,Sn=Ie*Lt,In=Ie*jt,En=Ie*_n,xn=$e*Dt,kn=$e*Lt,On=$e*jt,Mn=$e*_n,Un=1;Un<Ie;Un++){var zn=qe+((Ce<Un?Ce:Un)<<2),Hn=pe[zn],Rn=pe[zn+1],Jn=pe[zn+2],Qn=pe[zn+3],_r=Ie-Un;xn+=(Oe.r=Hn)*_r,kn+=(Oe.g=Rn)*_r,On+=(Oe.b=Jn)*_r,Mn+=(Oe.a=Qn)*_r,vn+=Hn,Tn+=Rn,$n+=Jn,wn+=Qn,Oe=Oe.next}ze=Ne,Ue=Fe;for(var Zn=0;Zn<ue;Zn++){var Gn=Mn*Et>>>kt;if(pe[qe+3]=Gn,Gn!==0){var Nn=255/Gn;pe[qe]=(xn*Et>>>kt)*Nn,pe[qe+1]=(kn*Et>>>kt)*Nn,pe[qe+2]=(On*Et>>>kt)*Nn}else pe[qe]=pe[qe+1]=pe[qe+2]=0;xn-=Cn,kn-=Sn,On-=In,Mn-=En,Cn-=ze.r,Sn-=ze.g,In-=ze.b,En-=ze.a;var Dn=Zn+he+1;Dn=Pt+(Dn<Ce?Dn:Ce)<<2,vn+=ze.r=pe[Dn],Tn+=ze.g=pe[Dn+1],$n+=ze.b=pe[Dn+2],wn+=ze.a=pe[Dn+3],xn+=vn,kn+=Tn,On+=$n,Mn+=wn,ze=ze.next;var jn=Ue,ir=jn.r,Fn=jn.g,Kn=jn.b,mr=jn.a;Cn+=ir,Sn+=Fn,In+=Kn,En+=mr,vn-=ir,Tn-=Fn,$n-=Kn,wn-=mr,Ue=Ue.next,qe+=4}Pt+=ue}for(var yr=0;yr<ue;yr++){qe=yr<<2;var Cr=pe[qe],br=pe[qe+1],Pr=pe[qe+2],gr=pe[qe+3],tr=Ie*Cr,Sr=Ie*br,Dr=Ie*Pr,Lr=Ie*gr,Ur=$e*Cr,Xr=$e*br,qr=$e*Pr,Wn=$e*gr;Oe=Ne;for(var wr=0;wr<Ie;wr++)Oe.r=Cr,Oe.g=br,Oe.b=Pr,Oe.a=gr,Oe=Oe.next;for(var Vn=ue,sr=0,nr=0,Ar=0,Wr=0,Yn=1;Yn<=he;Yn++){qe=Vn+yr<<2;var Nr=Ie-Yn;Ur+=(Oe.r=Cr=pe[qe])*Nr,Xr+=(Oe.g=br=pe[qe+1])*Nr,qr+=(Oe.b=Pr=pe[qe+2])*Nr,Wn+=(Oe.a=gr=pe[qe+3])*Nr,Wr+=Cr,sr+=br,nr+=Pr,Ar+=gr,Oe=Oe.next,Yn<xe&&(Vn+=ue)}qe=yr,ze=Ne,Ue=Fe;for(var Hr=0;Hr<de;Hr++){var Pn=qe<<2;pe[Pn+3]=gr=Wn*Et>>>kt,gr>0?(gr=255/gr,pe[Pn]=(Ur*Et>>>kt)*gr,pe[Pn+1]=(Xr*Et>>>kt)*gr,pe[Pn+2]=(qr*Et>>>kt)*gr):pe[Pn]=pe[Pn+1]=pe[Pn+2]=0,Ur-=tr,Xr-=Sr,qr-=Dr,Wn-=Lr,tr-=ze.r,Sr-=ze.g,Dr-=ze.b,Lr-=ze.a,Pn=yr+((Pn=Hr+Ie)<xe?Pn:xe)*ue<<2,Ur+=Wr+=ze.r=pe[Pn],Xr+=sr+=ze.g=pe[Pn+1],qr+=nr+=ze.b=pe[Pn+2],Wn+=Ar+=ze.a=pe[Pn+3],ze=ze.next,tr+=Cr=Ue.r,Sr+=br=Ue.g,Dr+=Pr=Ue.b,Lr+=gr=Ue.a,Wr-=Cr,sr-=br,nr-=Pr,Ar-=gr,Ue=Ue.next,qe+=ue}}return le}var BlurStack=function le(){_classCallCheck(this,le),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function offscreen(){var{DOMParser:le}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},oe={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:le,createCanvas(ie,ue){return new OffscreenCanvas(ie,ue)},createImage(ie){return _asyncToGenerator(function*(){var ue=yield fetch(ie),de=yield ue.blob(),he=yield createImageBitmap(de);return he})()}};return(typeof DOMParser<"u"||typeof le>"u")&&Reflect.deleteProperty(oe,"DOMParser"),oe}function node(le){var{DOMParser:oe,canvas:ie,fetch:ue}=le;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:oe,fetch:ue,createCanvas:ie.createCanvas,createImage:ie.loadImage}}var index=Object.freeze({__proto__:null,offscreen,node});function compressSpaces(le){return le.replace(/(?!\u3000)\s+/gm," ")}function trimLeft(le){return le.replace(/^[\n \t]+/,"")}function trimRight(le){return le.replace(/[\n \t]+$/,"")}function toNumbers(le){var oe=(le||"").match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm)||[];return oe.map(parseFloat)}var allUppercase=/^[A-Z-]+$/;function normalizeAttributeName(le){return allUppercase.test(le)?le.toLowerCase():le}function parseExternalUrl(le){var oe=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(le)||[];return oe[2]||oe[3]||oe[4]}function normalizeColor(le){if(!le.startsWith("rgb"))return le;var oe=3,ie=le.replace(/\d+(\.\d+)?/g,(ue,de)=>oe--&&de?String(Math.round(parseFloat(ue))):ue);return ie}var attributeRegex=/(\[[^\]]+\])/g,idRegex=/(#[^\s+>~.[:]+)/g,classRegex=/(\.[^\s+>~.[:]+)/g,pseudoElementRegex=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,pseudoClassWithBracketsRegex=/(:[\w-]+\([^)]*\))/gi,pseudoClassRegex=/(:[^\s+>~.[:]+)/g,elementRegex=/([^\s+>~.[:]+)/g;function findSelectorMatch(le,oe){var ie=oe.exec(le);return ie?[le.replace(oe," "),ie.length]:[le,0]}function getSelectorSpecificity(le){var oe=[0,0,0],ie=le.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),ue=0;return[ie,ue]=findSelectorMatch(ie,attributeRegex),oe[1]+=ue,[ie,ue]=findSelectorMatch(ie,idRegex),oe[0]+=ue,[ie,ue]=findSelectorMatch(ie,classRegex),oe[1]+=ue,[ie,ue]=findSelectorMatch(ie,pseudoElementRegex),oe[2]+=ue,[ie,ue]=findSelectorMatch(ie,pseudoClassWithBracketsRegex),oe[1]+=ue,[ie,ue]=findSelectorMatch(ie,pseudoClassRegex),oe[1]+=ue,ie=ie.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[ie,ue]=findSelectorMatch(ie,elementRegex),oe[2]+=ue,oe.join("")}var PSEUDO_ZERO=1e-8;function vectorMagnitude(le){return Math.sqrt(Math.pow(le[0],2)+Math.pow(le[1],2))}function vectorsRatio(le,oe){return(le[0]*oe[0]+le[1]*oe[1])/(vectorMagnitude(le)*vectorMagnitude(oe))}function vectorsAngle(le,oe){return(le[0]*oe[1]<le[1]*oe[0]?-1:1)*Math.acos(vectorsRatio(le,oe))}function CB1(le){return le*le*le}function CB2(le){return 3*le*le*(1-le)}function CB3(le){return 3*le*(1-le)*(1-le)}function CB4(le){return(1-le)*(1-le)*(1-le)}function QB1(le){return le*le}function QB2(le){return 2*le*(1-le)}function QB3(le){return(1-le)*(1-le)}class Property{constructor(oe,ie,ue){this.document=oe,this.name=ie,this.value=ue,this.isNormalizedColor=!1}static empty(oe){return new Property(oe,"EMPTY","")}split(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:" ",{document:ie,name:ue}=this;return compressSpaces(this.getString()).trim().split(oe).map(de=>new Property(ie,ue,de))}hasValue(oe){var{value:ie}=this;return ie!==null&&ie!==""&&(oe||ie!==0)&&typeof ie<"u"}isString(oe){var{value:ie}=this,ue=typeof ie=="string";return!ue||!oe?ue:oe.test(ie)}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;var oe=this.getString();switch(!0){case oe.endsWith("px"):case/^[0-9]+$/.test(oe):return!0;default:return!1}}setValue(oe){return this.value=oe,this}getValue(oe){return typeof oe>"u"||this.hasValue()?this.value:oe}getNumber(oe){if(!this.hasValue())return typeof oe>"u"?0:parseFloat(oe);var{value:ie}=this,ue=parseFloat(ie);return this.isString(/%$/)&&(ue/=100),ue}getString(oe){return typeof oe>"u"||this.hasValue()?typeof this.value>"u"?"":String(this.value):String(oe)}getColor(oe){var ie=this.getString(oe);return this.isNormalizedColor||(this.isNormalizedColor=!0,ie=normalizeColor(ie),this.value=ie),ie}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(oe){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasValue())return 0;var[ue,de]=typeof oe=="boolean"?[void 0,oe]:[oe],{viewPort:he}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(he.computeSize("x"),he.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(he.computeSize("x"),he.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*he.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*he.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return this.getNumber()*15;case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case(this.isString(/%$/)&&de):return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*he.computeSize(ue);default:{var pe=this.getNumber();return ie&&pe<1?pe*he.computeSize(ue):pe}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():this.getNumber()*1e3:0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){var oe=this.getString(),ie=/#([^)'"]+)/.exec(oe);return ie&&(ie=ie[1]),ie||(ie=oe),this.document.definitions[ie]}getFillStyleDefinition(oe,ie){var ue=this.getDefinition();if(!ue)return null;if(typeof ue.createGradient=="function")return ue.createGradient(this.document.ctx,oe,ie);if(typeof ue.createPattern=="function"){if(ue.getHrefAttribute().hasValue()){var de=ue.getAttribute("patternTransform");ue=ue.getHrefAttribute().getDefinition(),de.hasValue()&&ue.getAttribute("patternTransform",!0).setValue(de.value)}return ue.createPattern(this.document.ctx,oe,ie)}return null}getTextBaseline(){return this.hasValue()?Property.textBaselineMapping[this.getString()]:null}addOpacity(oe){for(var ie=this.getColor(),ue=ie.length,de=0,he=0;he<ue&&(ie[he]===","&&de++,de!==3);he++);if(oe.hasValue()&&this.isString()&&de!==3){var pe=new RGBColor$1(ie);pe.ok&&(pe.alpha=oe.getNumber(),ie=pe.toRGBA())}return new Property(this.document,this.name,ie)}}Property.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};class ViewPort{constructor(){this.viewPorts=[]}clear(){this.viewPorts=[]}setCurrent(oe,ie){this.viewPorts.push({width:oe,height:ie})}removeCurrent(){this.viewPorts.pop()}getCurrent(){var{viewPorts:oe}=this;return oe[oe.length-1]}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(oe){return typeof oe=="number"?oe:oe==="x"?this.width:oe==="y"?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}}class Point{constructor(oe,ie){this.x=oe,this.y=ie}static parse(oe){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,[ue=ie,de=ie]=toNumbers(oe);return new Point(ue,de)}static parseScale(oe){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,[ue=ie,de=ue]=toNumbers(oe);return new Point(ue,de)}static parsePath(oe){for(var ie=toNumbers(oe),ue=ie.length,de=[],he=0;he<ue;he+=2)de.push(new Point(ie[he],ie[he+1]));return de}angleTo(oe){return Math.atan2(oe.y-this.y,oe.x-this.x)}applyTransform(oe){var{x:ie,y:ue}=this,de=ie*oe[0]+ue*oe[2]+oe[4],he=ie*oe[1]+ue*oe[3]+oe[5];this.x=de,this.y=he}}class Mouse{constructor(oe){this.screen=oe,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}isWorking(){return this.working}start(){if(!this.working){var{screen:oe,onClick:ie,onMouseMove:ue}=this,de=oe.ctx.canvas;de.onclick=ie,de.onmousemove=ue,this.working=!0}}stop(){if(this.working){var oe=this.screen.ctx.canvas;this.working=!1,oe.onclick=null,oe.onmousemove=null}}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(this.working){var{screen:oe,events:ie,eventElements:ue}=this,{style:de}=oe.ctx.canvas;de&&(de.cursor=""),ie.forEach((he,pe)=>{for(var{run:_e}=he,Ce=ue[pe];Ce;)_e(Ce),Ce=Ce.parent}),this.events=[],this.eventElements=[]}}checkPath(oe,ie){if(!(!this.working||!ie)){var{events:ue,eventElements:de}=this;ue.forEach((he,pe)=>{var{x:_e,y:Ce}=he;!de[pe]&&ie.isPointInPath&&ie.isPointInPath(_e,Ce)&&(de[pe]=oe)})}}checkBoundingBox(oe,ie){if(!(!this.working||!ie)){var{events:ue,eventElements:de}=this;ue.forEach((he,pe)=>{var{x:_e,y:Ce}=he;!de[pe]&&ie.isPointInBox(_e,Ce)&&(de[pe]=oe)})}}mapXY(oe,ie){for(var{window:ue,ctx:de}=this.screen,he=new Point(oe,ie),pe=de.canvas;pe;)he.x-=pe.offsetLeft,he.y-=pe.offsetTop,pe=pe.offsetParent;return ue.scrollX&&(he.x+=ue.scrollX),ue.scrollY&&(he.y+=ue.scrollY),he}onClick(oe){var{x:ie,y:ue}=this.mapXY(oe.clientX,oe.clientY);this.events.push({type:"onclick",x:ie,y:ue,run(de){de.onClick&&de.onClick()}})}onMouseMove(oe){var{x:ie,y:ue}=this.mapXY(oe.clientX,oe.clientY);this.events.push({type:"onmousemove",x:ie,y:ue,run(de){de.onMouseMove&&de.onMouseMove()}})}}var defaultWindow=typeof window<"u"?window:null,defaultFetch$1=typeof fetch<"u"?fetch.bind(void 0):null;class Screen{constructor(oe){var{fetch:ie=defaultFetch$1,window:ue=defaultWindow}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.ctx=oe,this.FRAMERATE=30,this.MAX_VIRTUAL_PIXELS=3e4,this.CLIENT_WIDTH=800,this.CLIENT_HEIGHT=600,this.viewPort=new ViewPort,this.mouse=new Mouse(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=ue,this.fetch=ie}wait(oe){this.waits.push(oe)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;var oe=this.waits.every(ie=>ie());return oe&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=oe,oe}setDefaults(oe){oe.strokeStyle="rgba(0,0,0,0)",oe.lineCap="butt",oe.lineJoin="miter",oe.miterLimit=4}setViewBox(oe){var{document:ie,ctx:ue,aspectRatio:de,width:he,desiredWidth:pe,height:_e,desiredHeight:Ce,minX:xe=0,minY:Ie=0,refX:$e,refY:Ne,clip:Oe=!1,clipX:Fe=0,clipY:Ve=0}=oe,ze=compressSpaces(de).replace(/^defer\s/,""),[Ue,Pt]=ze.split(" "),qe=Ue||"xMidYMid",Et=Pt||"meet",kt=he/pe,At=_e/Ce,Dt=Math.min(kt,At),Lt=Math.max(kt,At),jt=pe,_n=Ce;Et==="meet"&&(jt*=Dt,_n*=Dt),Et==="slice"&&(jt*=Lt,_n*=Lt);var bn=new Property(ie,"refX",$e),vn=new Property(ie,"refY",Ne),Tn=bn.hasValue()&&vn.hasValue();if(Tn&&ue.translate(-Dt*bn.getPixels("x"),-Dt*vn.getPixels("y")),Oe){var $n=Dt*Fe,wn=Dt*Ve;ue.beginPath(),ue.moveTo($n,wn),ue.lineTo(he,wn),ue.lineTo(he,_e),ue.lineTo($n,_e),ue.closePath(),ue.clip()}if(!Tn){var Cn=Et==="meet"&&Dt===At,Sn=Et==="slice"&&Lt===At,In=Et==="meet"&&Dt===kt,En=Et==="slice"&&Lt===kt;qe.startsWith("xMid")&&(Cn||Sn)&&ue.translate(he/2-jt/2,0),qe.endsWith("YMid")&&(In||En)&&ue.translate(0,_e/2-_n/2),qe.startsWith("xMax")&&(Cn||Sn)&&ue.translate(he-jt,0),qe.endsWith("YMax")&&(In||En)&&ue.translate(0,_e-_n)}switch(!0){case qe==="none":ue.scale(kt,At);break;case Et==="meet":ue.scale(Dt,Dt);break;case Et==="slice":ue.scale(Lt,Lt);break}ue.translate(-xe,-Ie)}start(oe){var{enableRedraw:ie=!1,ignoreMouse:ue=!1,ignoreAnimation:de=!1,ignoreDimensions:he=!1,ignoreClear:pe=!1,forceRedraw:_e,scaleWidth:Ce,scaleHeight:xe,offsetX:Ie,offsetY:$e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{FRAMERATE:Ne,mouse:Oe}=this,Fe=1e3/Ne;if(this.frameDuration=Fe,this.readyPromise=new Promise(qe=>{this.resolveReady=qe}),this.isReady()&&this.render(oe,he,pe,Ce,xe,Ie,$e),!!ie){var Ve=Date.now(),ze=Ve,Ue=0,Pt=()=>{Ve=Date.now(),Ue=Ve-ze,Ue>=Fe&&(ze=Ve-Ue%Fe,this.shouldUpdate(de,_e)&&(this.render(oe,he,pe,Ce,xe,Ie,$e),Oe.runEvents())),this.intervalId=requestAnimationFrame$1(Pt)};ue||Oe.start(),this.intervalId=requestAnimationFrame$1(Pt)}}stop(){this.intervalId&&(requestAnimationFrame$1.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(oe,ie){if(!oe){var{frameDuration:ue}=this,de=this.animations.reduce((he,pe)=>pe.update(ue)||he,!1);if(de)return!0}return!!(typeof ie=="function"&&ie()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render(oe,ie,ue,de,he,pe,_e){var{CLIENT_WIDTH:Ce,CLIENT_HEIGHT:xe,viewPort:Ie,ctx:$e,isFirstRender:Ne}=this,Oe=$e.canvas;Ie.clear(),Oe.width&&Oe.height?Ie.setCurrent(Oe.width,Oe.height):Ie.setCurrent(Ce,xe);var Fe=oe.getStyle("width"),Ve=oe.getStyle("height");!ie&&(Ne||typeof de!="number"&&typeof he!="number")&&(Fe.hasValue()&&(Oe.width=Fe.getPixels("x"),Oe.style&&(Oe.style.width="".concat(Oe.width,"px"))),Ve.hasValue()&&(Oe.height=Ve.getPixels("y"),Oe.style&&(Oe.style.height="".concat(Oe.height,"px"))));var ze=Oe.clientWidth||Oe.width,Ue=Oe.clientHeight||Oe.height;if(ie&&Fe.hasValue()&&Ve.hasValue()&&(ze=Fe.getPixels("x"),Ue=Ve.getPixels("y")),Ie.setCurrent(ze,Ue),typeof pe=="number"&&oe.getAttribute("x",!0).setValue(pe),typeof _e=="number"&&oe.getAttribute("y",!0).setValue(_e),typeof de=="number"||typeof he=="number"){var Pt=toNumbers(oe.getAttribute("viewBox").getString()),qe=0,Et=0;if(typeof de=="number"){var kt=oe.getStyle("width");kt.hasValue()?qe=kt.getPixels("x")/de:isNaN(Pt[2])||(qe=Pt[2]/de)}if(typeof he=="number"){var At=oe.getStyle("height");At.hasValue()?Et=At.getPixels("y")/he:isNaN(Pt[3])||(Et=Pt[3]/he)}qe||(qe=Et),Et||(Et=qe),oe.getAttribute("width",!0).setValue(de),oe.getAttribute("height",!0).setValue(he);var Dt=oe.getStyle("transform",!0,!0);Dt.setValue("".concat(Dt.getString()," scale(").concat(1/qe,", ").concat(1/Et,")"))}ue||$e.clearRect(0,0,ze,Ue),oe.render($e),Ne&&(this.isFirstRender=!1)}}Screen.defaultWindow=defaultWindow;Screen.defaultFetch=defaultFetch$1;var{defaultFetch}=Screen,DefaultDOMParser=typeof DOMParser<"u"?DOMParser:null;class Parser{constructor(){var{fetch:oe=defaultFetch,DOMParser:ie=DefaultDOMParser}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fetch=oe,this.DOMParser=ie}parse(oe){var ie=this;return _asyncToGenerator(function*(){return oe.startsWith("<")?ie.parseFromString(oe):ie.load(oe)})()}parseFromString(oe){var ie=new this.DOMParser;try{return this.checkDocument(ie.parseFromString(oe,"image/svg+xml"))}catch{return this.checkDocument(ie.parseFromString(oe,"text/xml"))}}checkDocument(oe){var ie=oe.getElementsByTagName("parsererror")[0];if(ie)throw new Error(ie.textContent);return oe}load(oe){var ie=this;return _asyncToGenerator(function*(){var ue=yield ie.fetch(oe),de=yield ue.text();return ie.parseFromString(de)})()}}class Translate{constructor(oe,ie){this.type="translate",this.point=null,this.point=Point.parse(ie)}apply(oe){var{x:ie,y:ue}=this.point;oe.translate(ie||0,ue||0)}unapply(oe){var{x:ie,y:ue}=this.point;oe.translate(-1*ie||0,-1*ue||0)}applyToPoint(oe){var{x:ie,y:ue}=this.point;oe.applyTransform([1,0,0,1,ie||0,ue||0])}}class Rotate{constructor(oe,ie,ue){this.type="rotate",this.angle=null,this.originX=null,this.originY=null,this.cx=0,this.cy=0;var de=toNumbers(ie);this.angle=new Property(oe,"angle",de[0]),this.originX=ue[0],this.originY=ue[1],this.cx=de[1]||0,this.cy=de[2]||0}apply(oe){var{cx:ie,cy:ue,originX:de,originY:he,angle:pe}=this,_e=ie+de.getPixels("x"),Ce=ue+he.getPixels("y");oe.translate(_e,Ce),oe.rotate(pe.getRadians()),oe.translate(-_e,-Ce)}unapply(oe){var{cx:ie,cy:ue,originX:de,originY:he,angle:pe}=this,_e=ie+de.getPixels("x"),Ce=ue+he.getPixels("y");oe.translate(_e,Ce),oe.rotate(-1*pe.getRadians()),oe.translate(-_e,-Ce)}applyToPoint(oe){var{cx:ie,cy:ue,angle:de}=this,he=de.getRadians();oe.applyTransform([1,0,0,1,ie||0,ue||0]),oe.applyTransform([Math.cos(he),Math.sin(he),-Math.sin(he),Math.cos(he),0,0]),oe.applyTransform([1,0,0,1,-ie||0,-ue||0])}}class Scale{constructor(oe,ie,ue){this.type="scale",this.scale=null,this.originX=null,this.originY=null;var de=Point.parseScale(ie);(de.x===0||de.y===0)&&(de.x=PSEUDO_ZERO,de.y=PSEUDO_ZERO),this.scale=de,this.originX=ue[0],this.originY=ue[1]}apply(oe){var{scale:{x:ie,y:ue},originX:de,originY:he}=this,pe=de.getPixels("x"),_e=he.getPixels("y");oe.translate(pe,_e),oe.scale(ie,ue||ie),oe.translate(-pe,-_e)}unapply(oe){var{scale:{x:ie,y:ue},originX:de,originY:he}=this,pe=de.getPixels("x"),_e=he.getPixels("y");oe.translate(pe,_e),oe.scale(1/ie,1/ue||ie),oe.translate(-pe,-_e)}applyToPoint(oe){var{x:ie,y:ue}=this.scale;oe.applyTransform([ie||0,0,0,ue||0,0,0])}}class Matrix{constructor(oe,ie,ue){this.type="matrix",this.matrix=[],this.originX=null,this.originY=null,this.matrix=toNumbers(ie),this.originX=ue[0],this.originY=ue[1]}apply(oe){var{originX:ie,originY:ue,matrix:de}=this,he=ie.getPixels("x"),pe=ue.getPixels("y");oe.translate(he,pe),oe.transform(de[0],de[1],de[2],de[3],de[4],de[5]),oe.translate(-he,-pe)}unapply(oe){var{originX:ie,originY:ue,matrix:de}=this,he=de[0],pe=de[2],_e=de[4],Ce=de[1],xe=de[3],Ie=de[5],$e=0,Ne=0,Oe=1,Fe=1/(he*(xe*Oe-Ie*Ne)-pe*(Ce*Oe-Ie*$e)+_e*(Ce*Ne-xe*$e)),Ve=ie.getPixels("x"),ze=ue.getPixels("y");oe.translate(Ve,ze),oe.transform(Fe*(xe*Oe-Ie*Ne),Fe*(Ie*$e-Ce*Oe),Fe*(_e*Ne-pe*Oe),Fe*(he*Oe-_e*$e),Fe*(pe*Ie-_e*xe),Fe*(_e*Ce-he*Ie)),oe.translate(-Ve,-ze)}applyToPoint(oe){oe.applyTransform(this.matrix)}}class Skew extends Matrix{constructor(oe,ie,ue){super(oe,ie,ue),this.type="skew",this.angle=null,this.angle=new Property(oe,"angle",ie)}}class SkewX extends Skew{constructor(oe,ie,ue){super(oe,ie,ue),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}}class SkewY extends Skew{constructor(oe,ie,ue){super(oe,ie,ue),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}}function parseTransforms(le){return compressSpaces(le).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function parseTransform(le){var[oe,ie]=le.split("(");return[oe.trim(),ie.trim().replace(")","")]}class Transform{constructor(oe,ie,ue){this.document=oe,this.transforms=[];var de=parseTransforms(ie);de.forEach(he=>{if(he!=="none"){var[pe,_e]=parseTransform(he),Ce=Transform.transformTypes[pe];typeof Ce<"u"&&this.transforms.push(new Ce(this.document,_e,ue))}})}static fromElement(oe,ie){var ue=ie.getStyle("transform",!1,!0),[de,he=de]=ie.getStyle("transform-origin",!1,!0).split(),pe=[de,he];return ue.hasValue()?new Transform(oe,ue.getString(),pe):null}apply(oe){for(var{transforms:ie}=this,ue=ie.length,de=0;de<ue;de++)ie[de].apply(oe)}unapply(oe){for(var{transforms:ie}=this,ue=ie.length,de=ue-1;de>=0;de--)ie[de].unapply(oe)}applyToPoint(oe){for(var{transforms:ie}=this,ue=ie.length,de=0;de<ue;de++)ie[de].applyToPoint(oe)}}Transform.transformTypes={translate:Translate,rotate:Rotate,scale:Scale,matrix:Matrix,skewX:SkewX,skewY:SkewY};let Element$1=class vo{constructor(oe,ie){var ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this.document=oe,this.node=ie,this.captureTextNodes=ue,this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!(!ie||ie.nodeType!==1)){if(Array.from(ie.attributes).forEach(_e=>{var Ce=normalizeAttributeName(_e.nodeName);this.attributes[Ce]=new Property(oe,Ce,_e.value)}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()){var de=this.getAttribute("style").getString().split(";").map(_e=>_e.trim());de.forEach(_e=>{if(_e){var[Ce,xe]=_e.split(":").map(Ie=>Ie.trim());this.styles[Ce]=new Property(oe,Ce,xe)}})}var{definitions:he}=oe,pe=this.getAttribute("id");pe.hasValue()&&(he[pe.getString()]||(he[pe.getString()]=this)),Array.from(ie.childNodes).forEach(_e=>{if(_e.nodeType===1)this.addChild(_e);else if(ue&&(_e.nodeType===3||_e.nodeType===4)){var Ce=oe.createTextNode(_e);Ce.getText().length>0&&this.addChild(Ce)}})}}getAttribute(oe){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ue=this.attributes[oe];if(!ue&&ie){var de=new Property(this.document,oe,"");return this.attributes[oe]=de,de}return ue||Property.empty(this.document)}getHrefAttribute(){for(var oe in this.attributes)if(oe==="href"||oe.endsWith(":href"))return this.attributes[oe];return Property.empty(this.document)}getStyle(oe){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,de=this.styles[oe];if(de)return de;var he=this.getAttribute(oe);if(he!=null&&he.hasValue())return this.styles[oe]=he,he;if(!ue){var{parent:pe}=this;if(pe){var _e=pe.getStyle(oe);if(_e!=null&&_e.hasValue())return _e}}if(ie){var Ce=new Property(this.document,oe,"");return this.styles[oe]=Ce,Ce}return de||Property.empty(this.document)}render(oe){if(!(this.getStyle("display").getString()==="none"||this.getStyle("visibility").getString()==="hidden")){if(oe.save(),this.getStyle("mask").hasValue()){var ie=this.getStyle("mask").getDefinition();ie&&(this.applyEffects(oe),ie.apply(oe,this))}else if(this.getStyle("filter").getValue("none")!=="none"){var ue=this.getStyle("filter").getDefinition();ue&&(this.applyEffects(oe),ue.apply(oe,this))}else this.setContext(oe),this.renderChildren(oe),this.clearContext(oe);oe.restore()}}setContext(oe){}applyEffects(oe){var ie=Transform.fromElement(this.document,this);ie&&ie.apply(oe);var ue=this.getStyle("clip-path",!1,!0);if(ue.hasValue()){var de=ue.getDefinition();de&&de.apply(oe)}}clearContext(oe){}renderChildren(oe){this.children.forEach(ie=>{ie.render(oe)})}addChild(oe){var ie=oe instanceof vo?oe:this.document.createElement(oe);ie.parent=this,vo.ignoreChildTypes.includes(ie.type)||this.children.push(ie)}matchesSelector(oe){var ie,{node:ue}=this;if(typeof ue.matches=="function")return ue.matches(oe);var de=(ie=ue.getAttribute)===null||ie===void 0?void 0:ie.call(ue,"class");return!de||de===""?!1:de.split(" ").some(he=>".".concat(he)===oe)}addStylesFromStyleDefinition(){var{styles:oe,stylesSpecificity:ie}=this.document;for(var ue in oe)if(!ue.startsWith("@")&&this.matchesSelector(ue)){var de=oe[ue],he=ie[ue];if(de)for(var pe in de){var _e=this.stylesSpecificity[pe];typeof _e>"u"&&(_e="000"),he>=_e&&(this.styles[pe]=de[pe],this.stylesSpecificity[pe]=he)}}}removeStyles(oe,ie){var ue=ie.reduce((de,he)=>{var pe=oe.getStyle(he);if(!pe.hasValue())return de;var _e=pe.getString();return pe.setValue(""),[...de,[he,_e]]},[]);return ue}restoreStyles(oe,ie){ie.forEach(ue=>{var[de,he]=ue;oe.getStyle(de,!0).setValue(he)})}isFirstChild(){var oe;return((oe=this.parent)===null||oe===void 0?void 0:oe.children.indexOf(this))===0}};Element$1.ignoreChildTypes=["title"];class UnknownElement extends Element$1{constructor(oe,ie,ue){super(oe,ie,ue)}}function wrapFontFamily(le){var oe=le.trim();return/^('|")/.test(oe)?oe:'"'.concat(oe,'"')}function prepareFontFamily(le){return typeof process>"u"?le:le.trim().split(",").map(wrapFontFamily).join(",")}function prepareFontStyle(le){if(!le)return"";var oe=le.trim().toLowerCase();switch(oe){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return oe;default:return/^oblique\s+(-|)\d+deg$/.test(oe)?oe:""}}function prepareFontWeight(le){if(!le)return"";var oe=le.trim().toLowerCase();switch(oe){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return oe;default:return/^[\d.]+$/.test(oe)?oe:""}}class Font{constructor(oe,ie,ue,de,he,pe){var _e=pe?typeof pe=="string"?Font.parse(pe):pe:{};this.fontFamily=he||_e.fontFamily,this.fontSize=de||_e.fontSize,this.fontStyle=oe||_e.fontStyle,this.fontWeight=ue||_e.fontWeight,this.fontVariant=ie||_e.fontVariant}static parse(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",ie=arguments.length>1?arguments[1]:void 0,ue="",de="",he="",pe="",_e="",Ce=compressSpaces(oe).trim().split(" "),xe={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return Ce.forEach(Ie=>{switch(!0){case(!xe.fontStyle&&Font.styles.includes(Ie)):Ie!=="inherit"&&(ue=Ie),xe.fontStyle=!0;break;case(!xe.fontVariant&&Font.variants.includes(Ie)):Ie!=="inherit"&&(de=Ie),xe.fontStyle=!0,xe.fontVariant=!0;break;case(!xe.fontWeight&&Font.weights.includes(Ie)):Ie!=="inherit"&&(he=Ie),xe.fontStyle=!0,xe.fontVariant=!0,xe.fontWeight=!0;break;case!xe.fontSize:Ie!=="inherit"&&([pe]=Ie.split("/")),xe.fontStyle=!0,xe.fontVariant=!0,xe.fontWeight=!0,xe.fontSize=!0;break;default:Ie!=="inherit"&&(_e+=Ie)}}),new Font(ue,de,he,pe,_e,ie)}toString(){return[prepareFontStyle(this.fontStyle),this.fontVariant,prepareFontWeight(this.fontWeight),this.fontSize,prepareFontFamily(this.fontFamily)].join(" ").trim()}}Font.styles="normal|italic|oblique|inherit";Font.variants="normal|small-caps|inherit";Font.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";class BoundingBox{constructor(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.NaN,ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.NaN,ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Number.NaN,de=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Number.NaN;this.x1=oe,this.y1=ie,this.x2=ue,this.y2=de,this.addPoint(oe,ie),this.addPoint(ue,de)}get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(oe,ie){typeof oe<"u"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=oe,this.x2=oe),oe<this.x1&&(this.x1=oe),oe>this.x2&&(this.x2=oe)),typeof ie<"u"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=ie,this.y2=ie),ie<this.y1&&(this.y1=ie),ie>this.y2&&(this.y2=ie))}addX(oe){this.addPoint(oe,null)}addY(oe){this.addPoint(null,oe)}addBoundingBox(oe){if(oe){var{x1:ie,y1:ue,x2:de,y2:he}=oe;this.addPoint(ie,ue),this.addPoint(de,he)}}sumCubic(oe,ie,ue,de,he){return Math.pow(1-oe,3)*ie+3*Math.pow(1-oe,2)*oe*ue+3*(1-oe)*Math.pow(oe,2)*de+Math.pow(oe,3)*he}bezierCurveAdd(oe,ie,ue,de,he){var pe=6*ie-12*ue+6*de,_e=-3*ie+9*ue-9*de+3*he,Ce=3*ue-3*ie;if(_e===0){if(pe===0)return;var xe=-Ce/pe;0<xe&&xe<1&&(oe?this.addX(this.sumCubic(xe,ie,ue,de,he)):this.addY(this.sumCubic(xe,ie,ue,de,he)));return}var Ie=Math.pow(pe,2)-4*Ce*_e;if(!(Ie<0)){var $e=(-pe+Math.sqrt(Ie))/(2*_e);0<$e&&$e<1&&(oe?this.addX(this.sumCubic($e,ie,ue,de,he)):this.addY(this.sumCubic($e,ie,ue,de,he)));var Ne=(-pe-Math.sqrt(Ie))/(2*_e);0<Ne&&Ne<1&&(oe?this.addX(this.sumCubic(Ne,ie,ue,de,he)):this.addY(this.sumCubic(Ne,ie,ue,de,he)))}}addBezierCurve(oe,ie,ue,de,he,pe,_e,Ce){this.addPoint(oe,ie),this.addPoint(_e,Ce),this.bezierCurveAdd(!0,oe,ue,he,_e),this.bezierCurveAdd(!1,ie,de,pe,Ce)}addQuadraticCurve(oe,ie,ue,de,he,pe){var _e=oe+.6666666666666666*(ue-oe),Ce=ie+2/3*(de-ie),xe=_e+1/3*(he-oe),Ie=Ce+1/3*(pe-ie);this.addBezierCurve(oe,ie,_e,xe,Ce,Ie,he,pe)}isPointInBox(oe,ie){var{x1:ue,y1:de,x2:he,y2:pe}=this;return ue<=oe&&oe<=he&&de<=ie&&ie<=pe}}class PathParser extends _{constructor(oe){super(oe.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=null,this.start=null,this.current=null,this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new Point(0,0),this.control=new Point(0,0),this.current=new Point(0,0),this.points=[],this.angles=[]}isEnd(){var{i:oe,commands:ie}=this;return oe>=ie.length-1}next(){var oe=this.commands[++this.i];return this.previousCommand=this.command,this.command=oe,oe}getPoint(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"x",ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y",ue=new Point(this.command[oe],this.command[ie]);return this.makeAbsolute(ue)}getAsControlPoint(oe,ie){var ue=this.getPoint(oe,ie);return this.control=ue,ue}getAsCurrentPoint(oe,ie){var ue=this.getPoint(oe,ie);return this.current=ue,ue}getReflectedControlPoint(){var oe=this.previousCommand.type;if(oe!==_.CURVE_TO&&oe!==_.SMOOTH_CURVE_TO&&oe!==_.QUAD_TO&&oe!==_.SMOOTH_QUAD_TO)return this.current;var{current:{x:ie,y:ue},control:{x:de,y:he}}=this,pe=new Point(2*ie-de,2*ue-he);return pe}makeAbsolute(oe){if(this.command.relative){var{x:ie,y:ue}=this.current;oe.x+=ie,oe.y+=ue}return oe}addMarker(oe,ie,ue){var{points:de,angles:he}=this;ue&&he.length>0&&!he[he.length-1]&&(he[he.length-1]=de[de.length-1].angleTo(ue)),this.addMarkerAngle(oe,ie?ie.angleTo(oe):null)}addMarkerAngle(oe,ie){this.points.push(oe),this.angles.push(ie)}getMarkerPoints(){return this.points}getMarkerAngles(){for(var{angles:oe}=this,ie=oe.length,ue=0;ue<ie;ue++)if(!oe[ue]){for(var de=ue+1;de<ie;de++)if(oe[de]){oe[ue]=oe[de];break}}return oe}}class RenderedElement extends Element$1{constructor(){super(...arguments),this.modifiedEmSizeStack=!1}calculateOpacity(){for(var oe=1,ie=this;ie;){var ue=ie.getStyle("opacity",!1,!0);ue.hasValue(!0)&&(oe*=ue.getNumber()),ie=ie.parent}return oe}setContext(oe){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!ie){var ue=this.getStyle("fill"),de=this.getStyle("fill-opacity"),he=this.getStyle("stroke"),pe=this.getStyle("stroke-opacity");if(ue.isUrlDefinition()){var _e=ue.getFillStyleDefinition(this,de);_e&&(oe.fillStyle=_e)}else if(ue.hasValue()){ue.getString()==="currentColor"&&ue.setValue(this.getStyle("color").getColor());var Ce=ue.getColor();Ce!=="inherit"&&(oe.fillStyle=Ce==="none"?"rgba(0,0,0,0)":Ce)}if(de.hasValue()){var xe=new Property(this.document,"fill",oe.fillStyle).addOpacity(de).getColor();oe.fillStyle=xe}if(he.isUrlDefinition()){var Ie=he.getFillStyleDefinition(this,pe);Ie&&(oe.strokeStyle=Ie)}else if(he.hasValue()){he.getString()==="currentColor"&&he.setValue(this.getStyle("color").getColor());var $e=he.getString();$e!=="inherit"&&(oe.strokeStyle=$e==="none"?"rgba(0,0,0,0)":$e)}if(pe.hasValue()){var Ne=new Property(this.document,"stroke",oe.strokeStyle).addOpacity(pe).getString();oe.strokeStyle=Ne}var Oe=this.getStyle("stroke-width");if(Oe.hasValue()){var Fe=Oe.getPixels();oe.lineWidth=Fe||PSEUDO_ZERO}var Ve=this.getStyle("stroke-linecap"),ze=this.getStyle("stroke-linejoin"),Ue=this.getStyle("stroke-miterlimit"),Pt=this.getStyle("stroke-dasharray"),qe=this.getStyle("stroke-dashoffset");if(Ve.hasValue()&&(oe.lineCap=Ve.getString()),ze.hasValue()&&(oe.lineJoin=ze.getString()),Ue.hasValue()&&(oe.miterLimit=Ue.getNumber()),Pt.hasValue()&&Pt.getString()!=="none"){var Et=toNumbers(Pt.getString());typeof oe.setLineDash<"u"?oe.setLineDash(Et):typeof oe.webkitLineDash<"u"?oe.webkitLineDash=Et:typeof oe.mozDash<"u"&&!(Et.length===1&&Et[0]===0)&&(oe.mozDash=Et);var kt=qe.getPixels();typeof oe.lineDashOffset<"u"?oe.lineDashOffset=kt:typeof oe.webkitLineDashOffset<"u"?oe.webkitLineDashOffset=kt:typeof oe.mozDashOffset<"u"&&(oe.mozDashOffset=kt)}}if(this.modifiedEmSizeStack=!1,typeof oe.font<"u"){var At=this.getStyle("font"),Dt=this.getStyle("font-style"),Lt=this.getStyle("font-variant"),jt=this.getStyle("font-weight"),_n=this.getStyle("font-size"),bn=this.getStyle("font-family"),vn=new Font(Dt.getString(),Lt.getString(),jt.getString(),_n.hasValue()?"".concat(_n.getPixels(!0),"px"):"",bn.getString(),Font.parse(At.getString(),oe.font));Dt.setValue(vn.fontStyle),Lt.setValue(vn.fontVariant),jt.setValue(vn.fontWeight),_n.setValue(vn.fontSize),bn.setValue(vn.fontFamily),oe.font=vn.toString(),_n.isPixels()&&(this.document.emSize=_n.getPixels(),this.modifiedEmSizeStack=!0)}ie||(this.applyEffects(oe),oe.globalAlpha=this.calculateOpacity())}clearContext(oe){super.clearContext(oe),this.modifiedEmSizeStack&&this.document.popEmSize()}}class PathElement extends RenderedElement{constructor(oe,ie,ue){super(oe,ie,ue),this.type="path",this.pathParser=null,this.pathParser=new PathParser(this.getAttribute("d").getString())}path(oe){var{pathParser:ie}=this,ue=new BoundingBox;for(ie.reset(),oe&&oe.beginPath();!ie.isEnd();)switch(ie.next().type){case PathParser.MOVE_TO:this.pathM(oe,ue);break;case PathParser.LINE_TO:this.pathL(oe,ue);break;case PathParser.HORIZ_LINE_TO:this.pathH(oe,ue);break;case PathParser.VERT_LINE_TO:this.pathV(oe,ue);break;case PathParser.CURVE_TO:this.pathC(oe,ue);break;case PathParser.SMOOTH_CURVE_TO:this.pathS(oe,ue);break;case PathParser.QUAD_TO:this.pathQ(oe,ue);break;case PathParser.SMOOTH_QUAD_TO:this.pathT(oe,ue);break;case PathParser.ARC:this.pathA(oe,ue);break;case PathParser.CLOSE_PATH:this.pathZ(oe,ue);break}return ue}getBoundingBox(oe){return this.path()}getMarkers(){var{pathParser:oe}=this,ie=oe.getMarkerPoints(),ue=oe.getMarkerAngles(),de=ie.map((he,pe)=>[he,ue[pe]]);return de}renderChildren(oe){this.path(oe),this.document.screen.mouse.checkPath(this,oe);var ie=this.getStyle("fill-rule");oe.fillStyle!==""&&(ie.getString("inherit")!=="inherit"?oe.fill(ie.getString()):oe.fill()),oe.strokeStyle!==""&&(this.getAttribute("vector-effect").getString()==="non-scaling-stroke"?(oe.save(),oe.setTransform(1,0,0,1,0,0),oe.stroke(),oe.restore()):oe.stroke());var ue=this.getMarkers();if(ue){var de=ue.length-1,he=this.getStyle("marker-start"),pe=this.getStyle("marker-mid"),_e=this.getStyle("marker-end");if(he.isUrlDefinition()){var Ce=he.getDefinition(),[xe,Ie]=ue[0];Ce.render(oe,xe,Ie)}if(pe.isUrlDefinition())for(var $e=pe.getDefinition(),Ne=1;Ne<de;Ne++){var[Oe,Fe]=ue[Ne];$e.render(oe,Oe,Fe)}if(_e.isUrlDefinition()){var Ve=_e.getDefinition(),[ze,Ue]=ue[de];Ve.render(oe,ze,Ue)}}}static pathM(oe){var ie=oe.getAsCurrentPoint();return oe.start=oe.current,{point:ie}}pathM(oe,ie){var{pathParser:ue}=this,{point:de}=PathElement.pathM(ue),{x:he,y:pe}=de;ue.addMarker(de),ie.addPoint(he,pe),oe&&oe.moveTo(he,pe)}static pathL(oe){var{current:ie}=oe,ue=oe.getAsCurrentPoint();return{current:ie,point:ue}}pathL(oe,ie){var{pathParser:ue}=this,{current:de,point:he}=PathElement.pathL(ue),{x:pe,y:_e}=he;ue.addMarker(he,de),ie.addPoint(pe,_e),oe&&oe.lineTo(pe,_e)}static pathH(oe){var{current:ie,command:ue}=oe,de=new Point((ue.relative?ie.x:0)+ue.x,ie.y);return oe.current=de,{current:ie,point:de}}pathH(oe,ie){var{pathParser:ue}=this,{current:de,point:he}=PathElement.pathH(ue),{x:pe,y:_e}=he;ue.addMarker(he,de),ie.addPoint(pe,_e),oe&&oe.lineTo(pe,_e)}static pathV(oe){var{current:ie,command:ue}=oe,de=new Point(ie.x,(ue.relative?ie.y:0)+ue.y);return oe.current=de,{current:ie,point:de}}pathV(oe,ie){var{pathParser:ue}=this,{current:de,point:he}=PathElement.pathV(ue),{x:pe,y:_e}=he;ue.addMarker(he,de),ie.addPoint(pe,_e),oe&&oe.lineTo(pe,_e)}static pathC(oe){var{current:ie}=oe,ue=oe.getPoint("x1","y1"),de=oe.getAsControlPoint("x2","y2"),he=oe.getAsCurrentPoint();return{current:ie,point:ue,controlPoint:de,currentPoint:he}}pathC(oe,ie){var{pathParser:ue}=this,{current:de,point:he,controlPoint:pe,currentPoint:_e}=PathElement.pathC(ue);ue.addMarker(_e,pe,he),ie.addBezierCurve(de.x,de.y,he.x,he.y,pe.x,pe.y,_e.x,_e.y),oe&&oe.bezierCurveTo(he.x,he.y,pe.x,pe.y,_e.x,_e.y)}static pathS(oe){var{current:ie}=oe,ue=oe.getReflectedControlPoint(),de=oe.getAsControlPoint("x2","y2"),he=oe.getAsCurrentPoint();return{current:ie,point:ue,controlPoint:de,currentPoint:he}}pathS(oe,ie){var{pathParser:ue}=this,{current:de,point:he,controlPoint:pe,currentPoint:_e}=PathElement.pathS(ue);ue.addMarker(_e,pe,he),ie.addBezierCurve(de.x,de.y,he.x,he.y,pe.x,pe.y,_e.x,_e.y),oe&&oe.bezierCurveTo(he.x,he.y,pe.x,pe.y,_e.x,_e.y)}static pathQ(oe){var{current:ie}=oe,ue=oe.getAsControlPoint("x1","y1"),de=oe.getAsCurrentPoint();return{current:ie,controlPoint:ue,currentPoint:de}}pathQ(oe,ie){var{pathParser:ue}=this,{current:de,controlPoint:he,currentPoint:pe}=PathElement.pathQ(ue);ue.addMarker(pe,he,he),ie.addQuadraticCurve(de.x,de.y,he.x,he.y,pe.x,pe.y),oe&&oe.quadraticCurveTo(he.x,he.y,pe.x,pe.y)}static pathT(oe){var{current:ie}=oe,ue=oe.getReflectedControlPoint();oe.control=ue;var de=oe.getAsCurrentPoint();return{current:ie,controlPoint:ue,currentPoint:de}}pathT(oe,ie){var{pathParser:ue}=this,{current:de,controlPoint:he,currentPoint:pe}=PathElement.pathT(ue);ue.addMarker(pe,he,he),ie.addQuadraticCurve(de.x,de.y,he.x,he.y,pe.x,pe.y),oe&&oe.quadraticCurveTo(he.x,he.y,pe.x,pe.y)}static pathA(oe){var{current:ie,command:ue}=oe,{rX:de,rY:he,xRot:pe,lArcFlag:_e,sweepFlag:Ce}=ue,xe=pe*(Math.PI/180),Ie=oe.getAsCurrentPoint(),$e=new Point(Math.cos(xe)*(ie.x-Ie.x)/2+Math.sin(xe)*(ie.y-Ie.y)/2,-Math.sin(xe)*(ie.x-Ie.x)/2+Math.cos(xe)*(ie.y-Ie.y)/2),Ne=Math.pow($e.x,2)/Math.pow(de,2)+Math.pow($e.y,2)/Math.pow(he,2);Ne>1&&(de*=Math.sqrt(Ne),he*=Math.sqrt(Ne));var Oe=(_e===Ce?-1:1)*Math.sqrt((Math.pow(de,2)*Math.pow(he,2)-Math.pow(de,2)*Math.pow($e.y,2)-Math.pow(he,2)*Math.pow($e.x,2))/(Math.pow(de,2)*Math.pow($e.y,2)+Math.pow(he,2)*Math.pow($e.x,2)));isNaN(Oe)&&(Oe=0);var Fe=new Point(Oe*de*$e.y/he,Oe*-he*$e.x/de),Ve=new Point((ie.x+Ie.x)/2+Math.cos(xe)*Fe.x-Math.sin(xe)*Fe.y,(ie.y+Ie.y)/2+Math.sin(xe)*Fe.x+Math.cos(xe)*Fe.y),ze=vectorsAngle([1,0],[($e.x-Fe.x)/de,($e.y-Fe.y)/he]),Ue=[($e.x-Fe.x)/de,($e.y-Fe.y)/he],Pt=[(-$e.x-Fe.x)/de,(-$e.y-Fe.y)/he],qe=vectorsAngle(Ue,Pt);return vectorsRatio(Ue,Pt)<=-1&&(qe=Math.PI),vectorsRatio(Ue,Pt)>=1&&(qe=0),{currentPoint:Ie,rX:de,rY:he,sweepFlag:Ce,xAxisRotation:xe,centp:Ve,a1:ze,ad:qe}}pathA(oe,ie){var{pathParser:ue}=this,{currentPoint:de,rX:he,rY:pe,sweepFlag:_e,xAxisRotation:Ce,centp:xe,a1:Ie,ad:$e}=PathElement.pathA(ue),Ne=1-_e?1:-1,Oe=Ie+Ne*($e/2),Fe=new Point(xe.x+he*Math.cos(Oe),xe.y+pe*Math.sin(Oe));if(ue.addMarkerAngle(Fe,Oe-Ne*Math.PI/2),ue.addMarkerAngle(de,Oe-Ne*Math.PI),ie.addPoint(de.x,de.y),oe&&!isNaN(Ie)&&!isNaN($e)){var Ve=he>pe?he:pe,ze=he>pe?1:he/pe,Ue=he>pe?pe/he:1;oe.translate(xe.x,xe.y),oe.rotate(Ce),oe.scale(ze,Ue),oe.arc(0,0,Ve,Ie,Ie+$e,!!(1-_e)),oe.scale(1/ze,1/Ue),oe.rotate(-Ce),oe.translate(-xe.x,-xe.y)}}static pathZ(oe){oe.current=oe.start}pathZ(oe,ie){PathElement.pathZ(this.pathParser),oe&&ie.x1!==ie.x2&&ie.y1!==ie.y2&&oe.closePath()}}class GlyphElement extends PathElement{constructor(oe,ie,ue){super(oe,ie,ue),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}}class TextElement extends RenderedElement{constructor(oe,ie,ue){super(oe,ie,new.target===TextElement?!0:ue),this.type="text",this.x=0,this.y=0,this.measureCache=-1}setContext(oe){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.setContext(oe,ie);var ue=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();ue&&(oe.textBaseline=ue)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(oe){if(this.type!=="text")return this.getTElementBoundingBox(oe);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(oe);var ie=null;return this.children.forEach((ue,de)=>{var he=this.getChildBoundingBox(oe,this,this,de);ie?ie.addBoundingBox(he):ie=he}),ie}getFontSize(){var{document:oe,parent:ie}=this,ue=Font.parse(oe.ctx.font).fontSize,de=ie.getStyle("font-size").getNumber(ue);return de}getTElementBoundingBox(oe){var ie=this.getFontSize();return new BoundingBox(this.x,this.y-ie,this.x+this.measureText(oe),this.y)}getGlyph(oe,ie,ue){var de=ie[ue],he=null;if(oe.isArabic){var pe=ie.length,_e=ie[ue-1],Ce=ie[ue+1],xe="isolated";if((ue===0||_e===" ")&&ue<pe-1&&Ce!==" "&&(xe="terminal"),ue>0&&_e!==" "&&ue<pe-1&&Ce!==" "&&(xe="medial"),ue>0&&_e!==" "&&(ue===pe-1||Ce===" ")&&(xe="initial"),typeof oe.glyphs[de]<"u"){var Ie=oe.glyphs[de];he=Ie instanceof GlyphElement?Ie:Ie[xe]}}else he=oe.glyphs[de];return he||(he=oe.missingGlyph),he}getText(){return""}getTextFromNode(oe){var ie=oe||this.node,ue=Array.from(ie.parentNode.childNodes),de=ue.indexOf(ie),he=ue.length-1,pe=compressSpaces(ie.textContent||"");return de===0&&(pe=trimLeft(pe)),de===he&&(pe=trimRight(pe)),pe}renderChildren(oe){if(this.type!=="text"){this.renderTElementChildren(oe);return}this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(oe),this.children.forEach((ue,de)=>{this.renderChild(oe,this,this,de)});var{mouse:ie}=this.document.screen;ie.isWorking()&&ie.checkBoundingBox(this,this.getBoundingBox(oe))}renderTElementChildren(oe){var{document:ie,parent:ue}=this,de=this.getText(),he=ue.getStyle("font-family").getDefinition();if(he){for(var{unitsPerEm:pe}=he.fontFace,_e=Font.parse(ie.ctx.font),Ce=ue.getStyle("font-size").getNumber(_e.fontSize),xe=ue.getStyle("font-style").getString(_e.fontStyle),Ie=Ce/pe,$e=he.isRTL?de.split("").reverse().join(""):de,Ne=toNumbers(ue.getAttribute("dx").getString()),Oe=$e.length,Fe=0;Fe<Oe;Fe++){var Ve=this.getGlyph(he,$e,Fe);oe.translate(this.x,this.y),oe.scale(Ie,-Ie);var ze=oe.lineWidth;oe.lineWidth=oe.lineWidth*pe/Ce,xe==="italic"&&oe.transform(1,0,.4,1,0,0),Ve.render(oe),xe==="italic"&&oe.transform(1,0,-.4,1,0,0),oe.lineWidth=ze,oe.scale(1/Ie,-1/Ie),oe.translate(-this.x,-this.y),this.x+=Ce*(Ve.horizAdvX||he.horizAdvX)/pe,typeof Ne[Fe]<"u"&&!isNaN(Ne[Fe])&&(this.x+=Ne[Fe])}return}var{x:Ue,y:Pt}=this;oe.fillStyle&&oe.fillText(de,Ue,Pt),oe.strokeStyle&&oe.strokeText(de,Ue,Pt)}applyAnchoring(){if(!(this.textChunkStart>=this.leafTexts.length)){var oe=this.leafTexts[this.textChunkStart],ie=oe.getStyle("text-anchor").getString("start"),ue=!1,de=0;ie==="start"&&!ue||ie==="end"&&ue?de=oe.x-this.minX:ie==="end"&&!ue||ie==="start"&&ue?de=oe.x-this.maxX:de=oe.x-(this.minX+this.maxX)/2;for(var he=this.textChunkStart;he<this.leafTexts.length;he++)this.leafTexts[he].x+=de;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}}adjustChildCoordinatesRecursive(oe){this.children.forEach((ie,ue)=>{this.adjustChildCoordinatesRecursiveCore(oe,this,this,ue)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(oe,ie,ue,de){var he=ue.children[de];he.children.length>0?he.children.forEach((pe,_e)=>{ie.adjustChildCoordinatesRecursiveCore(oe,ie,he,_e)}):this.adjustChildCoordinates(oe,ie,ue,de)}adjustChildCoordinates(oe,ie,ue,de){var he=ue.children[de];if(typeof he.measureText!="function")return he;oe.save(),he.setContext(oe,!0);var pe=he.getAttribute("x"),_e=he.getAttribute("y"),Ce=he.getAttribute("dx"),xe=he.getAttribute("dy"),Ie=he.getStyle("font-family").getDefinition(),$e=!!Ie&&Ie.isRTL;de===0&&(pe.hasValue()||pe.setValue(he.getInheritedAttribute("x")),_e.hasValue()||_e.setValue(he.getInheritedAttribute("y")),Ce.hasValue()||Ce.setValue(he.getInheritedAttribute("dx")),xe.hasValue()||xe.setValue(he.getInheritedAttribute("dy")));var Ne=he.measureText(oe);return $e&&(ie.x-=Ne),pe.hasValue()?(ie.applyAnchoring(),he.x=pe.getPixels("x"),Ce.hasValue()&&(he.x+=Ce.getPixels("x"))):(Ce.hasValue()&&(ie.x+=Ce.getPixels("x")),he.x=ie.x),ie.x=he.x,$e||(ie.x+=Ne),_e.hasValue()?(he.y=_e.getPixels("y"),xe.hasValue()&&(he.y+=xe.getPixels("y"))):(xe.hasValue()&&(ie.y+=xe.getPixels("y")),he.y=ie.y),ie.y=he.y,ie.leafTexts.push(he),ie.minX=Math.min(ie.minX,he.x,he.x+Ne),ie.maxX=Math.max(ie.maxX,he.x,he.x+Ne),he.clearContext(oe),oe.restore(),he}getChildBoundingBox(oe,ie,ue,de){var he=ue.children[de];if(typeof he.getBoundingBox!="function")return null;var pe=he.getBoundingBox(oe);return pe?(he.children.forEach((_e,Ce)=>{var xe=ie.getChildBoundingBox(oe,ie,he,Ce);pe.addBoundingBox(xe)}),pe):null}renderChild(oe,ie,ue,de){var he=ue.children[de];he.render(oe),he.children.forEach((pe,_e)=>{ie.renderChild(oe,ie,he,_e)})}measureText(oe){var{measureCache:ie}=this;if(~ie)return ie;var ue=this.getText(),de=this.measureTargetText(oe,ue);return this.measureCache=de,de}measureTargetText(oe,ie){if(!ie.length)return 0;var{parent:ue}=this,de=ue.getStyle("font-family").getDefinition();if(de){for(var he=this.getFontSize(),pe=de.isRTL?ie.split("").reverse().join(""):ie,_e=toNumbers(ue.getAttribute("dx").getString()),Ce=pe.length,xe=0,Ie=0;Ie<Ce;Ie++){var $e=this.getGlyph(de,pe,Ie);xe+=($e.horizAdvX||de.horizAdvX)*he/de.fontFace.unitsPerEm,typeof _e[Ie]<"u"&&!isNaN(_e[Ie])&&(xe+=_e[Ie])}return xe}if(!oe.measureText)return ie.length*10;oe.save(),this.setContext(oe,!0);var{width:Ne}=oe.measureText(ie);return this.clearContext(oe),oe.restore(),Ne}getInheritedAttribute(oe){for(var ie=this;ie instanceof TextElement&&ie.isFirstChild();){var ue=ie.parent.getAttribute(oe);if(ue.hasValue(!0))return ue.getValue("0");ie=ie.parent}return null}}class TSpanElement extends TextElement{constructor(oe,ie,ue){super(oe,ie,new.target===TSpanElement?!0:ue),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}getText(){return this.text}}class TextNode extends TSpanElement{constructor(){super(...arguments),this.type="textNode"}}let SVGElement$1=class extends RenderedElement{constructor(){super(...arguments),this.type="svg",this.root=!1}setContext(oe){var ie,{document:ue}=this,{screen:de,window:he}=ue,pe=oe.canvas;if(de.setDefaults(oe),pe.style&&typeof oe.font<"u"&&he&&typeof he.getComputedStyle<"u"){oe.font=he.getComputedStyle(pe).getPropertyValue("font");var _e=new Property(ue,"fontSize",Font.parse(oe.font).fontSize);_e.hasValue()&&(ue.rootEmSize=_e.getPixels("y"),ue.emSize=ue.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);var{width:Ce,height:xe}=de.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");var Ie=this.getAttribute("refX"),$e=this.getAttribute("refY"),Ne=this.getAttribute("viewBox"),Oe=Ne.hasValue()?toNumbers(Ne.getString()):null,Fe=!this.root&&this.getStyle("overflow").getValue("hidden")!=="visible",Ve=0,ze=0,Ue=0,Pt=0;Oe&&(Ve=Oe[0],ze=Oe[1]),this.root||(Ce=this.getStyle("width").getPixels("x"),xe=this.getStyle("height").getPixels("y"),this.type==="marker"&&(Ue=Ve,Pt=ze,Ve=0,ze=0)),de.viewPort.setCurrent(Ce,xe),this.node&&(!this.parent||((ie=this.node.parentNode)===null||ie===void 0?void 0:ie.nodeName)==="foreignObject")&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(oe),oe.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),Oe&&(Ce=Oe[2],xe=Oe[3]),ue.setViewBox({ctx:oe,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:de.viewPort.width,desiredWidth:Ce,height:de.viewPort.height,desiredHeight:xe,minX:Ve,minY:ze,refX:Ie.getValue(),refY:$e.getValue(),clip:Fe,clipX:Ue,clipY:Pt}),Oe&&(de.viewPort.removeCurrent(),de.viewPort.setCurrent(Ce,xe))}clearContext(oe){super.clearContext(oe),this.document.screen.viewPort.removeCurrent()}resize(oe){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:oe,ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,de=this.getAttribute("width",!0),he=this.getAttribute("height",!0),pe=this.getAttribute("viewBox"),_e=this.getAttribute("style"),Ce=de.getNumber(0),xe=he.getNumber(0);if(ue)if(typeof ue=="string")this.getAttribute("preserveAspectRatio",!0).setValue(ue);else{var Ie=this.getAttribute("preserveAspectRatio");Ie.hasValue()&&Ie.setValue(Ie.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(de.setValue(oe),he.setValue(ie),pe.hasValue()||pe.setValue("0 0 ".concat(Ce||oe," ").concat(xe||ie)),_e.hasValue()){var $e=this.getStyle("width"),Ne=this.getStyle("height");$e.hasValue()&&$e.setValue("".concat(oe,"px")),Ne.hasValue()&&Ne.setValue("".concat(ie,"px"))}}};class RectElement extends PathElement{constructor(){super(...arguments),this.type="rect"}path(oe){var ie=this.getAttribute("x").getPixels("x"),ue=this.getAttribute("y").getPixels("y"),de=this.getStyle("width",!1,!0).getPixels("x"),he=this.getStyle("height",!1,!0).getPixels("y"),pe=this.getAttribute("rx"),_e=this.getAttribute("ry"),Ce=pe.getPixels("x"),xe=_e.getPixels("y");if(pe.hasValue()&&!_e.hasValue()&&(xe=Ce),_e.hasValue()&&!pe.hasValue()&&(Ce=xe),Ce=Math.min(Ce,de/2),xe=Math.min(xe,he/2),oe){var Ie=4*((Math.sqrt(2)-1)/3);oe.beginPath(),he>0&&de>0&&(oe.moveTo(ie+Ce,ue),oe.lineTo(ie+de-Ce,ue),oe.bezierCurveTo(ie+de-Ce+Ie*Ce,ue,ie+de,ue+xe-Ie*xe,ie+de,ue+xe),oe.lineTo(ie+de,ue+he-xe),oe.bezierCurveTo(ie+de,ue+he-xe+Ie*xe,ie+de-Ce+Ie*Ce,ue+he,ie+de-Ce,ue+he),oe.lineTo(ie+Ce,ue+he),oe.bezierCurveTo(ie+Ce-Ie*Ce,ue+he,ie,ue+he-xe+Ie*xe,ie,ue+he-xe),oe.lineTo(ie,ue+xe),oe.bezierCurveTo(ie,ue+xe-Ie*xe,ie+Ce-Ie*Ce,ue,ie+Ce,ue),oe.closePath())}return new BoundingBox(ie,ue,ie+de,ue+he)}getMarkers(){return null}}class CircleElement extends PathElement{constructor(){super(...arguments),this.type="circle"}path(oe){var ie=this.getAttribute("cx").getPixels("x"),ue=this.getAttribute("cy").getPixels("y"),de=this.getAttribute("r").getPixels();return oe&&de>0&&(oe.beginPath(),oe.arc(ie,ue,de,0,Math.PI*2,!1),oe.closePath()),new BoundingBox(ie-de,ue-de,ie+de,ue+de)}getMarkers(){return null}}class EllipseElement extends PathElement{constructor(){super(...arguments),this.type="ellipse"}path(oe){var ie=4*((Math.sqrt(2)-1)/3),ue=this.getAttribute("rx").getPixels("x"),de=this.getAttribute("ry").getPixels("y"),he=this.getAttribute("cx").getPixels("x"),pe=this.getAttribute("cy").getPixels("y");return oe&&ue>0&&de>0&&(oe.beginPath(),oe.moveTo(he+ue,pe),oe.bezierCurveTo(he+ue,pe+ie*de,he+ie*ue,pe+de,he,pe+de),oe.bezierCurveTo(he-ie*ue,pe+de,he-ue,pe+ie*de,he-ue,pe),oe.bezierCurveTo(he-ue,pe-ie*de,he-ie*ue,pe-de,he,pe-de),oe.bezierCurveTo(he+ie*ue,pe-de,he+ue,pe-ie*de,he+ue,pe),oe.closePath()),new BoundingBox(he-ue,pe-de,he+ue,pe+de)}getMarkers(){return null}}class LineElement extends PathElement{constructor(){super(...arguments),this.type="line"}getPoints(){return[new Point(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new Point(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(oe){var[{x:ie,y:ue},{x:de,y:he}]=this.getPoints();return oe&&(oe.beginPath(),oe.moveTo(ie,ue),oe.lineTo(de,he)),new BoundingBox(ie,ue,de,he)}getMarkers(){var[oe,ie]=this.getPoints(),ue=oe.angleTo(ie);return[[oe,ue],[ie,ue]]}}class PolylineElement extends PathElement{constructor(oe,ie,ue){super(oe,ie,ue),this.type="polyline",this.points=[],this.points=Point.parsePath(this.getAttribute("points").getString())}path(oe){var{points:ie}=this,[{x:ue,y:de}]=ie,he=new BoundingBox(ue,de);return oe&&(oe.beginPath(),oe.moveTo(ue,de)),ie.forEach(pe=>{var{x:_e,y:Ce}=pe;he.addPoint(_e,Ce),oe&&oe.lineTo(_e,Ce)}),he}getMarkers(){var{points:oe}=this,ie=oe.length-1,ue=[];return oe.forEach((de,he)=>{he!==ie&&ue.push([de,de.angleTo(oe[he+1])])}),ue.length>0&&ue.push([oe[oe.length-1],ue[ue.length-1][1]]),ue}}class PolygonElement extends PolylineElement{constructor(){super(...arguments),this.type="polygon"}path(oe){var ie=super.path(oe),[{x:ue,y:de}]=this.points;return oe&&(oe.lineTo(ue,de),oe.closePath()),ie}}class PatternElement extends Element$1{constructor(){super(...arguments),this.type="pattern"}createPattern(oe,ie,ue){var de=this.getStyle("width").getPixels("x",!0),he=this.getStyle("height").getPixels("y",!0),pe=new SVGElement$1(this.document,null);pe.attributes.viewBox=new Property(this.document,"viewBox",this.getAttribute("viewBox").getValue()),pe.attributes.width=new Property(this.document,"width","".concat(de,"px")),pe.attributes.height=new Property(this.document,"height","".concat(he,"px")),pe.attributes.transform=new Property(this.document,"transform",this.getAttribute("patternTransform").getValue()),pe.children=this.children;var _e=this.document.createCanvas(de,he),Ce=_e.getContext("2d"),xe=this.getAttribute("x"),Ie=this.getAttribute("y");xe.hasValue()&&Ie.hasValue()&&Ce.translate(xe.getPixels("x",!0),Ie.getPixels("y",!0)),ue.hasValue()?this.styles["fill-opacity"]=ue:Reflect.deleteProperty(this.styles,"fill-opacity");for(var $e=-1;$e<=1;$e++)for(var Ne=-1;Ne<=1;Ne++)Ce.save(),pe.attributes.x=new Property(this.document,"x",$e*_e.width),pe.attributes.y=new Property(this.document,"y",Ne*_e.height),pe.render(Ce),Ce.restore();var Oe=oe.createPattern(_e,"repeat");return Oe}}class MarkerElement extends Element$1{constructor(){super(...arguments),this.type="marker"}render(oe,ie,ue){if(ie){var{x:de,y:he}=ie,pe=this.getAttribute("orient").getString("auto"),_e=this.getAttribute("markerUnits").getString("strokeWidth");oe.translate(de,he),pe==="auto"&&oe.rotate(ue),_e==="strokeWidth"&&oe.scale(oe.lineWidth,oe.lineWidth),oe.save();var Ce=new SVGElement$1(this.document,null);Ce.type=this.type,Ce.attributes.viewBox=new Property(this.document,"viewBox",this.getAttribute("viewBox").getValue()),Ce.attributes.refX=new Property(this.document,"refX",this.getAttribute("refX").getValue()),Ce.attributes.refY=new Property(this.document,"refY",this.getAttribute("refY").getValue()),Ce.attributes.width=new Property(this.document,"width",this.getAttribute("markerWidth").getValue()),Ce.attributes.height=new Property(this.document,"height",this.getAttribute("markerHeight").getValue()),Ce.attributes.overflow=new Property(this.document,"overflow",this.getAttribute("overflow").getValue()),Ce.attributes.fill=new Property(this.document,"fill",this.getAttribute("fill").getColor("black")),Ce.attributes.stroke=new Property(this.document,"stroke",this.getAttribute("stroke").getValue("none")),Ce.children=this.children,Ce.render(oe),oe.restore(),_e==="strokeWidth"&&oe.scale(1/oe.lineWidth,1/oe.lineWidth),pe==="auto"&&oe.rotate(-ue),oe.translate(-de,-he)}}}class DefsElement extends Element$1{constructor(){super(...arguments),this.type="defs"}render(){}}class GElement extends RenderedElement{constructor(){super(...arguments),this.type="g"}getBoundingBox(oe){var ie=new BoundingBox;return this.children.forEach(ue=>{ie.addBoundingBox(ue.getBoundingBox(oe))}),ie}}class GradientElement extends Element$1{constructor(oe,ie,ue){super(oe,ie,ue),this.attributesToInherit=["gradientUnits"],this.stops=[];var{stops:de,children:he}=this;he.forEach(pe=>{pe.type==="stop"&&de.push(pe)})}getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(oe,ie,ue){var de=this;this.getHrefAttribute().hasValue()&&(de=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(de));var{stops:he}=de,pe=this.getGradient(oe,ie);if(!pe)return this.addParentOpacity(ue,he[he.length-1].color);if(he.forEach(ze=>{pe.addColorStop(ze.offset,this.addParentOpacity(ue,ze.color))}),this.getAttribute("gradientTransform").hasValue()){var{document:_e}=this,{MAX_VIRTUAL_PIXELS:Ce,viewPort:xe}=_e.screen,[Ie]=xe.viewPorts,$e=new RectElement(_e,null);$e.attributes.x=new Property(_e,"x",-Ce/3),$e.attributes.y=new Property(_e,"y",-Ce/3),$e.attributes.width=new Property(_e,"width",Ce),$e.attributes.height=new Property(_e,"height",Ce);var Ne=new GElement(_e,null);Ne.attributes.transform=new Property(_e,"transform",this.getAttribute("gradientTransform").getValue()),Ne.children=[$e];var Oe=new SVGElement$1(_e,null);Oe.attributes.x=new Property(_e,"x",0),Oe.attributes.y=new Property(_e,"y",0),Oe.attributes.width=new Property(_e,"width",Ie.width),Oe.attributes.height=new Property(_e,"height",Ie.height),Oe.children=[Ne];var Fe=_e.createCanvas(Ie.width,Ie.height),Ve=Fe.getContext("2d");return Ve.fillStyle=pe,Oe.render(Ve),Ve.createPattern(Fe,"no-repeat")}return pe}inheritStopContainer(oe){this.attributesToInherit.forEach(ie=>{!this.getAttribute(ie).hasValue()&&oe.getAttribute(ie).hasValue()&&this.getAttribute(ie,!0).setValue(oe.getAttribute(ie).getValue())})}addParentOpacity(oe,ie){if(oe.hasValue()){var ue=new Property(this.document,"color",ie);return ue.addOpacity(oe).getColor()}return ie}}class LinearGradientElement extends GradientElement{constructor(oe,ie,ue){super(oe,ie,ue),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}getGradient(oe,ie){var ue=this.getGradientUnits()==="objectBoundingBox",de=ue?ie.getBoundingBox(oe):null;if(ue&&!de)return null;!this.getAttribute("x1").hasValue()&&!this.getAttribute("y1").hasValue()&&!this.getAttribute("x2").hasValue()&&!this.getAttribute("y2").hasValue()&&(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));var he=ue?de.x+de.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),pe=ue?de.y+de.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),_e=ue?de.x+de.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),Ce=ue?de.y+de.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return he===_e&&pe===Ce?null:oe.createLinearGradient(he,pe,_e,Ce)}}class RadialGradientElement extends GradientElement{constructor(oe,ie,ue){super(oe,ie,ue),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}getGradient(oe,ie){var ue=this.getGradientUnits()==="objectBoundingBox",de=ie.getBoundingBox(oe);if(ue&&!de)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");var he=ue?de.x+de.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),pe=ue?de.y+de.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),_e=he,Ce=pe;this.getAttribute("fx").hasValue()&&(_e=ue?de.x+de.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(Ce=ue?de.y+de.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));var xe=ue?(de.width+de.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),Ie=this.getAttribute("fr").getPixels();return oe.createRadialGradient(_e,Ce,Ie,he,pe,xe)}}class StopElement extends Element$1{constructor(oe,ie,ue){super(oe,ie,ue),this.type="stop";var de=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),he=this.getStyle("stop-opacity"),pe=this.getStyle("stop-color",!0);pe.getString()===""&&pe.setValue("#000"),he.hasValue()&&(pe=pe.addOpacity(he)),this.offset=de,this.color=pe.getColor()}}class AnimateElement extends Element$1{constructor(oe,ie,ue){super(oe,ie,ue),this.type="animate",this.duration=0,this.initialValue=null,this.initialUnits="",this.removed=!1,this.frozen=!1,oe.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new Property(oe,"values",null);var de=this.getAttribute("values");de.hasValue()&&this.values.setValue(de.getString().split(";"))}getProperty(){var oe=this.getAttribute("attributeType").getString(),ie=this.getAttribute("attributeName").getString();return oe==="CSS"?this.parent.getStyle(ie,!0):this.parent.getAttribute(ie,!0)}calcValue(){var{initialUnits:oe}=this,{progress:ie,from:ue,to:de}=this.getProgress(),he=ue.getNumber()+(de.getNumber()-ue.getNumber())*ie;return oe==="%"&&(he*=100),"".concat(he).concat(oe)}update(oe){var{parent:ie}=this,ue=this.getProperty();if(this.initialValue||(this.initialValue=ue.getString(),this.initialUnits=ue.getUnits()),this.duration>this.maxDuration){var de=this.getAttribute("fill").getString("remove");if(this.getAttribute("repeatCount").getString()==="indefinite"||this.getAttribute("repeatDur").getString()==="indefinite")this.duration=0;else if(de==="freeze"&&!this.frozen)this.frozen=!0,ie.animationFrozen=!0,ie.animationFrozenValue=ue.getString();else if(de==="remove"&&!this.removed)return this.removed=!0,ue.setValue(ie.animationFrozen?ie.animationFrozenValue:this.initialValue),!0;return!1}this.duration+=oe;var he=!1;if(this.begin<this.duration){var pe=this.calcValue(),_e=this.getAttribute("type");if(_e.hasValue()){var Ce=_e.getString();pe="".concat(Ce,"(").concat(pe,")")}ue.setValue(pe),he=!0}return he}getProgress(){var{document:oe,values:ie}=this,ue={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(ie.hasValue()){var de=ue.progress*(ie.getValue().length-1),he=Math.floor(de),pe=Math.ceil(de);ue.from=new Property(oe,"from",parseFloat(ie.getValue()[he])),ue.to=new Property(oe,"to",parseFloat(ie.getValue()[pe])),ue.progress=(de-he)/(pe-he)}else ue.from=this.from,ue.to=this.to;return ue}}class AnimateColorElement extends AnimateElement{constructor(){super(...arguments),this.type="animateColor"}calcValue(){var{progress:oe,from:ie,to:ue}=this.getProgress(),de=new RGBColor$1(ie.getColor()),he=new RGBColor$1(ue.getColor());if(de.ok&&he.ok){var pe=de.r+(he.r-de.r)*oe,_e=de.g+(he.g-de.g)*oe,Ce=de.b+(he.b-de.b)*oe;return"rgb(".concat(Math.floor(pe),", ").concat(Math.floor(_e),", ").concat(Math.floor(Ce),")")}return this.getAttribute("from").getColor()}}class AnimateTransformElement extends AnimateElement{constructor(){super(...arguments),this.type="animateTransform"}calcValue(){var{progress:oe,from:ie,to:ue}=this.getProgress(),de=toNumbers(ie.getString()),he=toNumbers(ue.getString()),pe=de.map((_e,Ce)=>{var xe=he[Ce];return _e+(xe-_e)*oe}).join(" ");return pe}}class FontElement extends Element$1{constructor(oe,ie,ue){super(oe,ie,ue),this.type="font",this.glyphs={},this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();var{definitions:de}=oe,{children:he}=this;for(var pe of he)switch(pe.type){case"font-face":{this.fontFace=pe;var _e=pe.getStyle("font-family");_e.hasValue()&&(de[_e.getString()]=this);break}case"missing-glyph":this.missingGlyph=pe;break;case"glyph":{var Ce=pe;Ce.arabicForm?(this.isRTL=!0,this.isArabic=!0,typeof this.glyphs[Ce.unicode]>"u"&&(this.glyphs[Ce.unicode]={}),this.glyphs[Ce.unicode][Ce.arabicForm]=Ce):this.glyphs[Ce.unicode]=Ce;break}}}render(){}}class FontFaceElement extends Element$1{constructor(oe,ie,ue){super(oe,ie,ue),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}}class MissingGlyphElement extends PathElement{constructor(){super(...arguments),this.type="missing-glyph",this.horizAdvX=0}}class TRefElement extends TextElement{constructor(){super(...arguments),this.type="tref"}getText(){var oe=this.getHrefAttribute().getDefinition();if(oe){var ie=oe.children[0];if(ie)return ie.getText()}return""}}class AElement extends TextElement{constructor(oe,ie,ue){super(oe,ie,ue),this.type="a";var{childNodes:de}=ie,he=de[0],pe=de.length>0&&Array.from(de).every(_e=>_e.nodeType===3);this.hasText=pe,this.text=pe?this.getTextFromNode(he):""}getText(){return this.text}renderChildren(oe){if(this.hasText){super.renderChildren(oe);var{document:ie,x:ue,y:de}=this,{mouse:he}=ie.screen,pe=new Property(ie,"fontSize",Font.parse(ie.ctx.font).fontSize);he.isWorking()&&he.checkBoundingBox(this,new BoundingBox(ue,de-pe.getPixels("y"),ue+this.measureText(oe),de))}else if(this.children.length>0){var _e=new GElement(this.document,null);_e.children=this.children,_e.parent=this,_e.render(oe)}}onClick(){var{window:oe}=this.document;oe&&oe.open(this.getHrefAttribute().getString())}onMouseMove(){var oe=this.document.ctx;oe.canvas.style.cursor="pointer"}}function ownKeys$2(le,oe){var ie=Object.keys(le);if(Object.getOwnPropertySymbols){var ue=Object.getOwnPropertySymbols(le);oe&&(ue=ue.filter(function(de){return Object.getOwnPropertyDescriptor(le,de).enumerable})),ie.push.apply(ie,ue)}return ie}function _objectSpread$2(le){for(var oe=1;oe<arguments.length;oe++){var ie=arguments[oe]!=null?arguments[oe]:{};oe%2?ownKeys$2(Object(ie),!0).forEach(function(ue){_defineProperty(le,ue,ie[ue])}):Object.getOwnPropertyDescriptors?Object.defineProperties(le,Object.getOwnPropertyDescriptors(ie)):ownKeys$2(Object(ie)).forEach(function(ue){Object.defineProperty(le,ue,Object.getOwnPropertyDescriptor(ie,ue))})}return le}class TextPathElement extends TextElement{constructor(oe,ie,ue){super(oe,ie,ue),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);var de=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(de)}getText(){return this.text}path(oe){var{dataArray:ie}=this;oe&&oe.beginPath(),ie.forEach(ue=>{var{type:de,points:he}=ue;switch(de){case PathParser.LINE_TO:oe&&oe.lineTo(he[0],he[1]);break;case PathParser.MOVE_TO:oe&&oe.moveTo(he[0],he[1]);break;case PathParser.CURVE_TO:oe&&oe.bezierCurveTo(he[0],he[1],he[2],he[3],he[4],he[5]);break;case PathParser.QUAD_TO:oe&&oe.quadraticCurveTo(he[0],he[1],he[2],he[3]);break;case PathParser.ARC:{var[pe,_e,Ce,xe,Ie,$e,Ne,Oe]=he,Fe=Ce>xe?Ce:xe,Ve=Ce>xe?1:Ce/xe,ze=Ce>xe?xe/Ce:1;oe&&(oe.translate(pe,_e),oe.rotate(Ne),oe.scale(Ve,ze),oe.arc(0,0,Fe,Ie,Ie+$e,!!(1-Oe)),oe.scale(1/Ve,1/ze),oe.rotate(-Ne),oe.translate(-pe,-_e));break}case PathParser.CLOSE_PATH:oe&&oe.closePath();break}})}renderChildren(oe){this.setTextData(oe),oe.save();var ie=this.parent.getStyle("text-decoration").getString(),ue=this.getFontSize(),{glyphInfo:de}=this,he=oe.fillStyle;ie==="underline"&&oe.beginPath(),de.forEach((pe,_e)=>{var{p0:Ce,p1:xe,rotation:Ie,text:$e}=pe;oe.save(),oe.translate(Ce.x,Ce.y),oe.rotate(Ie),oe.fillStyle&&oe.fillText($e,0,0),oe.strokeStyle&&oe.strokeText($e,0,0),oe.restore(),ie==="underline"&&(_e===0&&oe.moveTo(Ce.x,Ce.y+ue/8),oe.lineTo(xe.x,xe.y+ue/5))}),ie==="underline"&&(oe.lineWidth=ue/20,oe.strokeStyle=he,oe.stroke(),oe.closePath()),oe.restore()}getLetterSpacingAt(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.letterSpacingCache[oe]||0}findSegmentToFitChar(oe,ie,ue,de,he,pe,_e,Ce,xe){var Ie=pe,$e=this.measureText(oe,Ce);Ce===" "&&ie==="justify"&&ue<de&&($e+=(de-ue)/he),xe>-1&&(Ie+=this.getLetterSpacingAt(xe));var Ne=this.textHeight/20,Oe=this.getEquidistantPointOnPath(Ie,Ne,0),Fe=this.getEquidistantPointOnPath(Ie+$e,Ne,0),Ve={p0:Oe,p1:Fe},ze=Oe&&Fe?Math.atan2(Fe.y-Oe.y,Fe.x-Oe.x):0;if(_e){var Ue=Math.cos(Math.PI/2+ze)*_e,Pt=Math.cos(-ze)*_e;Ve.p0=_objectSpread$2(_objectSpread$2({},Oe),{},{x:Oe.x+Ue,y:Oe.y+Pt}),Ve.p1=_objectSpread$2(_objectSpread$2({},Fe),{},{x:Fe.x+Ue,y:Fe.y+Pt})}return Ie+=$e,{offset:Ie,segment:Ve,rotation:ze}}measureText(oe,ie){var{measuresCache:ue}=this,de=ie||this.getText();if(ue.has(de))return ue.get(de);var he=this.measureTargetText(oe,de);return ue.set(de,he),he}setTextData(oe){if(!this.glyphInfo){var ie=this.getText(),ue=ie.split(""),de=ie.split(" ").length-1,he=this.parent.getAttribute("dx").split().map(Et=>Et.getPixels("x")),pe=this.parent.getAttribute("dy").getPixels("y"),_e=this.parent.getStyle("text-anchor").getString("start"),Ce=this.getStyle("letter-spacing"),xe=this.parent.getStyle("letter-spacing"),Ie=0;!Ce.hasValue()||Ce.getValue()==="inherit"?Ie=xe.getPixels():Ce.hasValue()&&Ce.getValue()!=="initial"&&Ce.getValue()!=="unset"&&(Ie=Ce.getPixels());var $e=[],Ne=ie.length;this.letterSpacingCache=$e;for(var Oe=0;Oe<Ne;Oe++)$e.push(typeof he[Oe]<"u"?he[Oe]:Ie);var Fe=$e.reduce((Et,kt,At)=>At===0?0:Et+kt||0,0),Ve=this.measureText(oe),ze=Math.max(Ve+Fe,0);this.textWidth=Ve,this.textHeight=this.getFontSize(),this.glyphInfo=[];var Ue=this.getPathLength(),Pt=this.getStyle("startOffset").getNumber(0)*Ue,qe=0;(_e==="middle"||_e==="center")&&(qe=-ze/2),(_e==="end"||_e==="right")&&(qe=-ze),qe+=Pt,ue.forEach((Et,kt)=>{var{offset:At,segment:Dt,rotation:Lt}=this.findSegmentToFitChar(oe,_e,ze,Ue,de,qe,pe,Et,kt);qe=At,!(!Dt.p0||!Dt.p1)&&this.glyphInfo.push({text:ue[kt],p0:Dt.p0,p1:Dt.p1,rotation:Lt})})}}parsePathData(oe){if(this.pathLength=-1,!oe)return[];var ie=[],{pathParser:ue}=oe;for(ue.reset();!ue.isEnd();){var{current:de}=ue,he=de?de.x:0,pe=de?de.y:0,_e=ue.next(),Ce=_e.type,xe=[];switch(_e.type){case PathParser.MOVE_TO:this.pathM(ue,xe);break;case PathParser.LINE_TO:Ce=this.pathL(ue,xe);break;case PathParser.HORIZ_LINE_TO:Ce=this.pathH(ue,xe);break;case PathParser.VERT_LINE_TO:Ce=this.pathV(ue,xe);break;case PathParser.CURVE_TO:this.pathC(ue,xe);break;case PathParser.SMOOTH_CURVE_TO:Ce=this.pathS(ue,xe);break;case PathParser.QUAD_TO:this.pathQ(ue,xe);break;case PathParser.SMOOTH_QUAD_TO:Ce=this.pathT(ue,xe);break;case PathParser.ARC:xe=this.pathA(ue);break;case PathParser.CLOSE_PATH:PathElement.pathZ(ue);break}_e.type!==PathParser.CLOSE_PATH?ie.push({type:Ce,points:xe,start:{x:he,y:pe},pathLength:this.calcLength(he,pe,Ce,xe)}):ie.push({type:PathParser.CLOSE_PATH,points:[],pathLength:0})}return ie}pathM(oe,ie){var{x:ue,y:de}=PathElement.pathM(oe).point;ie.push(ue,de)}pathL(oe,ie){var{x:ue,y:de}=PathElement.pathL(oe).point;return ie.push(ue,de),PathParser.LINE_TO}pathH(oe,ie){var{x:ue,y:de}=PathElement.pathH(oe).point;return ie.push(ue,de),PathParser.LINE_TO}pathV(oe,ie){var{x:ue,y:de}=PathElement.pathV(oe).point;return ie.push(ue,de),PathParser.LINE_TO}pathC(oe,ie){var{point:ue,controlPoint:de,currentPoint:he}=PathElement.pathC(oe);ie.push(ue.x,ue.y,de.x,de.y,he.x,he.y)}pathS(oe,ie){var{point:ue,controlPoint:de,currentPoint:he}=PathElement.pathS(oe);return ie.push(ue.x,ue.y,de.x,de.y,he.x,he.y),PathParser.CURVE_TO}pathQ(oe,ie){var{controlPoint:ue,currentPoint:de}=PathElement.pathQ(oe);ie.push(ue.x,ue.y,de.x,de.y)}pathT(oe,ie){var{controlPoint:ue,currentPoint:de}=PathElement.pathT(oe);return ie.push(ue.x,ue.y,de.x,de.y),PathParser.QUAD_TO}pathA(oe){var{rX:ie,rY:ue,sweepFlag:de,xAxisRotation:he,centp:pe,a1:_e,ad:Ce}=PathElement.pathA(oe);return de===0&&Ce>0&&(Ce-=2*Math.PI),de===1&&Ce<0&&(Ce+=2*Math.PI),[pe.x,pe.y,ie,ue,_e,Ce,he,de]}calcLength(oe,ie,ue,de){var he=0,pe=null,_e=null,Ce=0;switch(ue){case PathParser.LINE_TO:return this.getLineLength(oe,ie,de[0],de[1]);case PathParser.CURVE_TO:for(he=0,pe=this.getPointOnCubicBezier(0,oe,ie,de[0],de[1],de[2],de[3],de[4],de[5]),Ce=.01;Ce<=1;Ce+=.01)_e=this.getPointOnCubicBezier(Ce,oe,ie,de[0],de[1],de[2],de[3],de[4],de[5]),he+=this.getLineLength(pe.x,pe.y,_e.x,_e.y),pe=_e;return he;case PathParser.QUAD_TO:for(he=0,pe=this.getPointOnQuadraticBezier(0,oe,ie,de[0],de[1],de[2],de[3]),Ce=.01;Ce<=1;Ce+=.01)_e=this.getPointOnQuadraticBezier(Ce,oe,ie,de[0],de[1],de[2],de[3]),he+=this.getLineLength(pe.x,pe.y,_e.x,_e.y),pe=_e;return he;case PathParser.ARC:{he=0;var xe=de[4],Ie=de[5],$e=de[4]+Ie,Ne=Math.PI/180;if(Math.abs(xe-$e)<Ne&&(Ne=Math.abs(xe-$e)),pe=this.getPointOnEllipticalArc(de[0],de[1],de[2],de[3],xe,0),Ie<0)for(Ce=xe-Ne;Ce>$e;Ce-=Ne)_e=this.getPointOnEllipticalArc(de[0],de[1],de[2],de[3],Ce,0),he+=this.getLineLength(pe.x,pe.y,_e.x,_e.y),pe=_e;else for(Ce=xe+Ne;Ce<$e;Ce+=Ne)_e=this.getPointOnEllipticalArc(de[0],de[1],de[2],de[3],Ce,0),he+=this.getLineLength(pe.x,pe.y,_e.x,_e.y),pe=_e;return _e=this.getPointOnEllipticalArc(de[0],de[1],de[2],de[3],$e,0),he+=this.getLineLength(pe.x,pe.y,_e.x,_e.y),he}}return 0}getPointOnLine(oe,ie,ue,de,he){var pe=arguments.length>5&&arguments[5]!==void 0?arguments[5]:ie,_e=arguments.length>6&&arguments[6]!==void 0?arguments[6]:ue,Ce=(he-ue)/(de-ie+PSEUDO_ZERO),xe=Math.sqrt(oe*oe/(1+Ce*Ce));de<ie&&(xe*=-1);var Ie=Ce*xe,$e=null;if(de===ie)$e={x:pe,y:_e+Ie};else if((_e-ue)/(pe-ie+PSEUDO_ZERO)===Ce)$e={x:pe+xe,y:_e+Ie};else{var Ne=0,Oe=0,Fe=this.getLineLength(ie,ue,de,he);if(Fe<PSEUDO_ZERO)return null;var Ve=(pe-ie)*(de-ie)+(_e-ue)*(he-ue);Ve/=Fe*Fe,Ne=ie+Ve*(de-ie),Oe=ue+Ve*(he-ue);var ze=this.getLineLength(pe,_e,Ne,Oe),Ue=Math.sqrt(oe*oe-ze*ze);xe=Math.sqrt(Ue*Ue/(1+Ce*Ce)),de<ie&&(xe*=-1),Ie=Ce*xe,$e={x:Ne+xe,y:Oe+Ie}}return $e}getPointOnPath(oe){var ie=this.getPathLength(),ue=0,de=null;if(oe<-5e-5||oe-5e-5>ie)return null;var{dataArray:he}=this;for(var pe of he){if(pe&&(pe.pathLength<5e-5||ue+pe.pathLength+5e-5<oe)){ue+=pe.pathLength;continue}var _e=oe-ue,Ce=0;switch(pe.type){case PathParser.LINE_TO:de=this.getPointOnLine(_e,pe.start.x,pe.start.y,pe.points[0],pe.points[1],pe.start.x,pe.start.y);break;case PathParser.ARC:{var xe=pe.points[4],Ie=pe.points[5],$e=pe.points[4]+Ie;if(Ce=xe+_e/pe.pathLength*Ie,Ie<0&&Ce<$e||Ie>=0&&Ce>$e)break;de=this.getPointOnEllipticalArc(pe.points[0],pe.points[1],pe.points[2],pe.points[3],Ce,pe.points[6]);break}case PathParser.CURVE_TO:Ce=_e/pe.pathLength,Ce>1&&(Ce=1),de=this.getPointOnCubicBezier(Ce,pe.start.x,pe.start.y,pe.points[0],pe.points[1],pe.points[2],pe.points[3],pe.points[4],pe.points[5]);break;case PathParser.QUAD_TO:Ce=_e/pe.pathLength,Ce>1&&(Ce=1),de=this.getPointOnQuadraticBezier(Ce,pe.start.x,pe.start.y,pe.points[0],pe.points[1],pe.points[2],pe.points[3]);break}if(de)return de;break}return null}getLineLength(oe,ie,ue,de){return Math.sqrt((ue-oe)*(ue-oe)+(de-ie)*(de-ie))}getPathLength(){return this.pathLength===-1&&(this.pathLength=this.dataArray.reduce((oe,ie)=>ie.pathLength>0?oe+ie.pathLength:oe,0)),this.pathLength}getPointOnCubicBezier(oe,ie,ue,de,he,pe,_e,Ce,xe){var Ie=Ce*CB1(oe)+pe*CB2(oe)+de*CB3(oe)+ie*CB4(oe),$e=xe*CB1(oe)+_e*CB2(oe)+he*CB3(oe)+ue*CB4(oe);return{x:Ie,y:$e}}getPointOnQuadraticBezier(oe,ie,ue,de,he,pe,_e){var Ce=pe*QB1(oe)+de*QB2(oe)+ie*QB3(oe),xe=_e*QB1(oe)+he*QB2(oe)+ue*QB3(oe);return{x:Ce,y:xe}}getPointOnEllipticalArc(oe,ie,ue,de,he,pe){var _e=Math.cos(pe),Ce=Math.sin(pe),xe={x:ue*Math.cos(he),y:de*Math.sin(he)};return{x:oe+(xe.x*_e-xe.y*Ce),y:ie+(xe.x*Ce+xe.y*_e)}}buildEquidistantCache(oe,ie){var ue=this.getPathLength(),de=ie||.25,he=oe||ue/100;if(!this.equidistantCache||this.equidistantCache.step!==he||this.equidistantCache.precision!==de){this.equidistantCache={step:he,precision:de,points:[]};for(var pe=0,_e=0;_e<=ue;_e+=de){var Ce=this.getPointOnPath(_e),xe=this.getPointOnPath(_e+de);!Ce||!xe||(pe+=this.getLineLength(Ce.x,Ce.y,xe.x,xe.y),pe>=he&&(this.equidistantCache.points.push({x:Ce.x,y:Ce.y,distance:_e}),pe-=he))}}}getEquidistantPointOnPath(oe,ie,ue){if(this.buildEquidistantCache(ie,ue),oe<0||oe-this.getPathLength()>5e-5)return null;var de=Math.round(oe/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[de]||null}}var dataUriRegex=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;class ImageElement extends RenderedElement{constructor(oe,ie,ue){super(oe,ie,ue),this.type="image",this.loaded=!1;var de=this.getHrefAttribute().getString();if(de){var he=de.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(de);oe.images.push(this),he?this.loadSvg(de):this.loadImage(de),this.isSvg=he}}loadImage(oe){var ie=this;return _asyncToGenerator(function*(){try{var ue=yield ie.document.createImage(oe);ie.image=ue}catch{}ie.loaded=!0})()}loadSvg(oe){var ie=this;return _asyncToGenerator(function*(){var ue=dataUriRegex.exec(oe);if(ue){var de=ue[5];ue[4]==="base64"?ie.image=atob(de):ie.image=decodeURIComponent(de)}else try{var he=yield ie.document.fetch(oe),pe=yield he.text();ie.image=pe}catch{}ie.loaded=!0})()}renderChildren(oe){var{document:ie,image:ue,loaded:de}=this,he=this.getAttribute("x").getPixels("x"),pe=this.getAttribute("y").getPixels("y"),_e=this.getStyle("width").getPixels("x"),Ce=this.getStyle("height").getPixels("y");if(!(!de||!ue||!_e||!Ce)){if(oe.save(),oe.translate(he,pe),this.isSvg){var xe=ie.canvg.forkString(oe,this.image,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:_e,scaleHeight:Ce});xe.document.documentElement.parent=this,xe.render()}else{var Ie=this.image;ie.setViewBox({ctx:oe,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:_e,desiredWidth:Ie.width,height:Ce,desiredHeight:Ie.height}),this.loaded&&(typeof Ie.complete>"u"||Ie.complete)&&oe.drawImage(Ie,0,0)}oe.restore()}}getBoundingBox(){var oe=this.getAttribute("x").getPixels("x"),ie=this.getAttribute("y").getPixels("y"),ue=this.getStyle("width").getPixels("x"),de=this.getStyle("height").getPixels("y");return new BoundingBox(oe,ie,oe+ue,ie+de)}}class SymbolElement extends RenderedElement{constructor(){super(...arguments),this.type="symbol"}render(oe){}}class SVGFontLoader{constructor(oe){this.document=oe,this.loaded=!1,oe.fonts.push(this)}load(oe,ie){var ue=this;return _asyncToGenerator(function*(){try{var{document:de}=ue,he=yield de.canvg.parser.load(ie),pe=he.getElementsByTagName("font");Array.from(pe).forEach(_e=>{var Ce=de.createElement(_e);de.definitions[oe]=Ce})}catch{}ue.loaded=!0})()}}class StyleElement extends Element$1{constructor(oe,ie,ue){super(oe,ie,ue),this.type="style";var de=compressSpaces(Array.from(ie.childNodes).map(pe=>pe.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")),he=de.split("}");he.forEach(pe=>{var _e=pe.trim();if(_e){var Ce=_e.split("{"),xe=Ce[0].split(","),Ie=Ce[1].split(";");xe.forEach($e=>{var Ne=$e.trim();if(Ne){var Oe=oe.styles[Ne]||{};if(Ie.forEach(ze=>{var Ue=ze.indexOf(":"),Pt=ze.substr(0,Ue).trim(),qe=ze.substr(Ue+1,ze.length-Ue).trim();Pt&&qe&&(Oe[Pt]=new Property(oe,Pt,qe))}),oe.styles[Ne]=Oe,oe.stylesSpecificity[Ne]=getSelectorSpecificity(Ne),Ne==="@font-face"){var Fe=Oe["font-family"].getString().replace(/"|'/g,""),Ve=Oe.src.getString().split(",");Ve.forEach(ze=>{if(ze.indexOf('format("svg")')>0){var Ue=parseExternalUrl(ze);Ue&&new SVGFontLoader(oe).load(Fe,Ue)}})}}})}})}}StyleElement.parseExternalUrl=parseExternalUrl;class UseElement extends RenderedElement{constructor(){super(...arguments),this.type="use"}setContext(oe){super.setContext(oe);var ie=this.getAttribute("x"),ue=this.getAttribute("y");ie.hasValue()&&oe.translate(ie.getPixels("x"),0),ue.hasValue()&&oe.translate(0,ue.getPixels("y"))}path(oe){var{element:ie}=this;ie&&ie.path(oe)}renderChildren(oe){var{document:ie,element:ue}=this;if(ue){var de=ue;if(ue.type==="symbol"&&(de=new SVGElement$1(ie,null),de.attributes.viewBox=new Property(ie,"viewBox",ue.getAttribute("viewBox").getString()),de.attributes.preserveAspectRatio=new Property(ie,"preserveAspectRatio",ue.getAttribute("preserveAspectRatio").getString()),de.attributes.overflow=new Property(ie,"overflow",ue.getAttribute("overflow").getString()),de.children=ue.children,ue.styles.opacity=new Property(ie,"opacity",this.calculateOpacity())),de.type==="svg"){var he=this.getStyle("width",!1,!0),pe=this.getStyle("height",!1,!0);he.hasValue()&&(de.attributes.width=new Property(ie,"width",he.getString())),pe.hasValue()&&(de.attributes.height=new Property(ie,"height",pe.getString()))}var _e=de.parent;de.parent=this,de.render(oe),de.parent=_e}}getBoundingBox(oe){var{element:ie}=this;return ie?ie.getBoundingBox(oe):null}elementTransform(){var{document:oe,element:ie}=this;return Transform.fromElement(oe,ie)}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}}function imGet(le,oe,ie,ue,de,he){return le[ie*ue*4+oe*4+he]}function imSet(le,oe,ie,ue,de,he,pe){le[ie*ue*4+oe*4+he]=pe}function m(le,oe,ie){var ue=le[oe];return ue*ie}function c(le,oe,ie,ue){return oe+Math.cos(le)*ie+Math.sin(le)*ue}class FeColorMatrixElement extends Element$1{constructor(oe,ie,ue){super(oe,ie,ue),this.type="feColorMatrix";var de=toNumbers(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{var he=de[0];de=[.213+.787*he,.715-.715*he,.072-.072*he,0,0,.213-.213*he,.715+.285*he,.072-.072*he,0,0,.213-.213*he,.715-.715*he,.072+.928*he,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{var pe=de[0]*Math.PI/180;de=[c(pe,.213,.787,-.213),c(pe,.715,-.715,-.715),c(pe,.072,-.072,.928),0,0,c(pe,.213,-.213,.143),c(pe,.715,.285,.14),c(pe,.072,-.072,-.283),0,0,c(pe,.213,-.213,-.787),c(pe,.715,-.715,.715),c(pe,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":de=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.matrix=de,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}apply(oe,ie,ue,de,he){for(var{includeOpacity:pe,matrix:_e}=this,Ce=oe.getImageData(0,0,de,he),xe=0;xe<he;xe++)for(var Ie=0;Ie<de;Ie++){var $e=imGet(Ce.data,Ie,xe,de,he,0),Ne=imGet(Ce.data,Ie,xe,de,he,1),Oe=imGet(Ce.data,Ie,xe,de,he,2),Fe=imGet(Ce.data,Ie,xe,de,he,3),Ve=m(_e,0,$e)+m(_e,1,Ne)+m(_e,2,Oe)+m(_e,3,Fe)+m(_e,4,1),ze=m(_e,5,$e)+m(_e,6,Ne)+m(_e,7,Oe)+m(_e,8,Fe)+m(_e,9,1),Ue=m(_e,10,$e)+m(_e,11,Ne)+m(_e,12,Oe)+m(_e,13,Fe)+m(_e,14,1),Pt=m(_e,15,$e)+m(_e,16,Ne)+m(_e,17,Oe)+m(_e,18,Fe)+m(_e,19,1);pe&&(Ve=0,ze=0,Ue=0,Pt*=Fe/255),imSet(Ce.data,Ie,xe,de,he,0,Ve),imSet(Ce.data,Ie,xe,de,he,1,ze),imSet(Ce.data,Ie,xe,de,he,2,Ue),imSet(Ce.data,Ie,xe,de,he,3,Pt)}oe.clearRect(0,0,de,he),oe.putImageData(Ce,0,0)}}class MaskElement extends Element$1{constructor(){super(...arguments),this.type="mask"}apply(oe,ie){var{document:ue}=this,de=this.getAttribute("x").getPixels("x"),he=this.getAttribute("y").getPixels("y"),pe=this.getStyle("width").getPixels("x"),_e=this.getStyle("height").getPixels("y");if(!pe&&!_e){var Ce=new BoundingBox;this.children.forEach(Fe=>{Ce.addBoundingBox(Fe.getBoundingBox(oe))}),de=Math.floor(Ce.x1),he=Math.floor(Ce.y1),pe=Math.floor(Ce.width),_e=Math.floor(Ce.height)}var xe=this.removeStyles(ie,MaskElement.ignoreStyles),Ie=ue.createCanvas(de+pe,he+_e),$e=Ie.getContext("2d");ue.screen.setDefaults($e),this.renderChildren($e),new FeColorMatrixElement(ue,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply($e,0,0,de+pe,he+_e);var Ne=ue.createCanvas(de+pe,he+_e),Oe=Ne.getContext("2d");ue.screen.setDefaults(Oe),ie.render(Oe),Oe.globalCompositeOperation="destination-in",Oe.fillStyle=$e.createPattern(Ie,"no-repeat"),Oe.fillRect(0,0,de+pe,he+_e),oe.fillStyle=Oe.createPattern(Ne,"no-repeat"),oe.fillRect(0,0,de+pe,he+_e),this.restoreStyles(ie,xe)}render(oe){}}MaskElement.ignoreStyles=["mask","transform","clip-path"];var noop=()=>{};class ClipPathElement extends Element$1{constructor(){super(...arguments),this.type="clipPath"}apply(oe){var{document:ie}=this,ue=Reflect.getPrototypeOf(oe),{beginPath:de,closePath:he}=oe;ue&&(ue.beginPath=noop,ue.closePath=noop),Reflect.apply(de,oe,[]),this.children.forEach(pe=>{if(!(typeof pe.path>"u")){var _e=typeof pe.elementTransform<"u"?pe.elementTransform():null;_e||(_e=Transform.fromElement(ie,pe)),_e&&_e.apply(oe),pe.path(oe),ue&&(ue.closePath=he),_e&&_e.unapply(oe)}}),Reflect.apply(he,oe,[]),oe.clip(),ue&&(ue.beginPath=de,ue.closePath=he)}render(oe){}}class FilterElement extends Element$1{constructor(){super(...arguments),this.type="filter"}apply(oe,ie){var{document:ue,children:de}=this,he=ie.getBoundingBox(oe);if(he){var pe=0,_e=0;de.forEach(Ue=>{var Pt=Ue.extraFilterDistance||0;pe=Math.max(pe,Pt),_e=Math.max(_e,Pt)});var Ce=Math.floor(he.width),xe=Math.floor(he.height),Ie=Ce+2*pe,$e=xe+2*_e;if(!(Ie<1||$e<1)){var Ne=Math.floor(he.x),Oe=Math.floor(he.y),Fe=this.removeStyles(ie,FilterElement.ignoreStyles),Ve=ue.createCanvas(Ie,$e),ze=Ve.getContext("2d");ue.screen.setDefaults(ze),ze.translate(-Ne+pe,-Oe+_e),ie.render(ze),de.forEach(Ue=>{typeof Ue.apply=="function"&&Ue.apply(ze,0,0,Ie,$e)}),oe.drawImage(Ve,0,0,Ie,$e,Ne-pe,Oe-_e,Ie,$e),this.restoreStyles(ie,Fe)}}}render(oe){}}FilterElement.ignoreStyles=["filter","transform","clip-path"];class FeDropShadowElement extends Element$1{constructor(oe,ie,ue){super(oe,ie,ue),this.type="feDropShadow",this.addStylesFromStyleDefinition()}apply(oe,ie,ue,de,he){}}class FeMorphologyElement extends Element$1{constructor(){super(...arguments),this.type="feMorphology"}apply(oe,ie,ue,de,he){}}class FeCompositeElement extends Element$1{constructor(){super(...arguments),this.type="feComposite"}apply(oe,ie,ue,de,he){}}class FeGaussianBlurElement extends Element$1{constructor(oe,ie,ue){super(oe,ie,ue),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}apply(oe,ie,ue,de,he){var{document:pe,blurRadius:_e}=this,Ce=pe.window?pe.window.document.body:null,xe=oe.canvas;xe.id=pe.getUniqueId(),Ce&&(xe.style.display="none",Ce.appendChild(xe)),processCanvasRGBA(xe,ie,ue,de,he,_e),Ce&&Ce.removeChild(xe)}}class TitleElement extends Element$1{constructor(){super(...arguments),this.type="title"}}class DescElement extends Element$1{constructor(){super(...arguments),this.type="desc"}}var elements={svg:SVGElement$1,rect:RectElement,circle:CircleElement,ellipse:EllipseElement,line:LineElement,polyline:PolylineElement,polygon:PolygonElement,path:PathElement,pattern:PatternElement,marker:MarkerElement,defs:DefsElement,linearGradient:LinearGradientElement,radialGradient:RadialGradientElement,stop:StopElement,animate:AnimateElement,animateColor:AnimateColorElement,animateTransform:AnimateTransformElement,font:FontElement,"font-face":FontFaceElement,"missing-glyph":MissingGlyphElement,glyph:GlyphElement,text:TextElement,tspan:TSpanElement,tref:TRefElement,a:AElement,textPath:TextPathElement,image:ImageElement,g:GElement,symbol:SymbolElement,style:StyleElement,use:UseElement,mask:MaskElement,clipPath:ClipPathElement,filter:FilterElement,feDropShadow:FeDropShadowElement,feMorphology:FeMorphologyElement,feComposite:FeCompositeElement,feColorMatrix:FeColorMatrixElement,feGaussianBlur:FeGaussianBlurElement,title:TitleElement,desc:DescElement};function ownKeys$1(le,oe){var ie=Object.keys(le);if(Object.getOwnPropertySymbols){var ue=Object.getOwnPropertySymbols(le);oe&&(ue=ue.filter(function(de){return Object.getOwnPropertyDescriptor(le,de).enumerable})),ie.push.apply(ie,ue)}return ie}function _objectSpread$1(le){for(var oe=1;oe<arguments.length;oe++){var ie=arguments[oe]!=null?arguments[oe]:{};oe%2?ownKeys$1(Object(ie),!0).forEach(function(ue){_defineProperty(le,ue,ie[ue])}):Object.getOwnPropertyDescriptors?Object.defineProperties(le,Object.getOwnPropertyDescriptors(ie)):ownKeys$1(Object(ie)).forEach(function(ue){Object.defineProperty(le,ue,Object.getOwnPropertyDescriptor(ie,ue))})}return le}function createCanvas(le,oe){var ie=document.createElement("canvas");return ie.width=le,ie.height=oe,ie}function createImage(le){return _createImage.apply(this,arguments)}function _createImage(){return _createImage=_asyncToGenerator(function*(le){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ie=document.createElement("img");return oe&&(ie.crossOrigin="Anonymous"),new Promise((ue,de)=>{ie.onload=()=>{ue(ie)},ie.onerror=(he,pe,_e,Ce,xe)=>{de(xe)},ie.src=le})}),_createImage.apply(this,arguments)}class Document{constructor(oe){var{rootEmSize:ie=12,emSize:ue=12,createCanvas:de=Document.createCanvas,createImage:he=Document.createImage,anonymousCrossOrigin:pe}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.canvg=oe,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=oe.screen,this.rootEmSize=ie,this.emSize=ue,this.createCanvas=de,this.createImage=this.bindCreateImage(he,pe),this.screen.wait(this.isImagesLoaded.bind(this)),this.screen.wait(this.isFontsLoaded.bind(this))}bindCreateImage(oe,ie){return typeof ie=="boolean"?(ue,de)=>oe(ue,typeof de=="boolean"?de:ie):oe}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){var{emSizeStack:oe}=this;return oe[oe.length-1]}set emSize(oe){var{emSizeStack:ie}=this;ie.push(oe)}popEmSize(){var{emSizeStack:oe}=this;oe.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(oe=>oe.loaded)}isFontsLoaded(){return this.fonts.every(oe=>oe.loaded)}createDocumentElement(oe){var ie=this.createElement(oe.documentElement);return ie.root=!0,ie.addStylesFromStyleDefinition(),this.documentElement=ie,ie}createElement(oe){var ie=oe.nodeName.replace(/^[^:]+:/,""),ue=Document.elementTypes[ie];return typeof ue<"u"?new ue(this,oe):new UnknownElement(this,oe)}createTextNode(oe){return new TextNode(this,oe)}setViewBox(oe){this.screen.setViewBox(_objectSpread$1({document:this},oe))}}Document.createCanvas=createCanvas;Document.createImage=createImage;Document.elementTypes=elements;function ownKeys(le,oe){var ie=Object.keys(le);if(Object.getOwnPropertySymbols){var ue=Object.getOwnPropertySymbols(le);oe&&(ue=ue.filter(function(de){return Object.getOwnPropertyDescriptor(le,de).enumerable})),ie.push.apply(ie,ue)}return ie}function _objectSpread(le){for(var oe=1;oe<arguments.length;oe++){var ie=arguments[oe]!=null?arguments[oe]:{};oe%2?ownKeys(Object(ie),!0).forEach(function(ue){_defineProperty(le,ue,ie[ue])}):Object.getOwnPropertyDescriptors?Object.defineProperties(le,Object.getOwnPropertyDescriptors(ie)):ownKeys(Object(ie)).forEach(function(ue){Object.defineProperty(le,ue,Object.getOwnPropertyDescriptor(ie,ue))})}return le}class Canvg{constructor(oe,ie){var ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.parser=new Parser(ue),this.screen=new Screen(oe,ue),this.options=ue;var de=new Document(this,ue),he=de.createDocumentElement(ie);this.document=de,this.documentElement=he}static from(oe,ie){var ue=arguments;return _asyncToGenerator(function*(){var de=ue.length>2&&ue[2]!==void 0?ue[2]:{},he=new Parser(de),pe=yield he.parse(ie);return new Canvg(oe,pe,de)})()}static fromString(oe,ie){var ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},de=new Parser(ue),he=de.parseFromString(ie);return new Canvg(oe,he,ue)}fork(oe,ie){var ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Canvg.from(oe,ie,_objectSpread(_objectSpread({},this.options),ue))}forkString(oe,ie){var ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Canvg.fromString(oe,ie,_objectSpread(_objectSpread({},this.options),ue))}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}render(){var oe=arguments,ie=this;return _asyncToGenerator(function*(){var ue=oe.length>0&&oe[0]!==void 0?oe[0]:{};ie.start(_objectSpread({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},ue)),yield ie.ready(),ie.stop()})()}start(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{documentElement:ie,screen:ue,options:de}=this;ue.start(ie,_objectSpread(_objectSpread({enableRedraw:!0},de),oe))}stop(){this.screen.stop()}resize(oe){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:oe,ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.documentElement.resize(oe,ie,ue)}}const index_es=Object.freeze(Object.defineProperty({__proto__:null,AElement,AnimateColorElement,AnimateElement,AnimateTransformElement,BoundingBox,CB1,CB2,CB3,CB4,Canvg,CircleElement,ClipPathElement,DefsElement,DescElement,Document,Element:Element$1,EllipseElement,FeColorMatrixElement,FeCompositeElement,FeDropShadowElement,FeGaussianBlurElement,FeMorphologyElement,FilterElement,Font,FontElement,FontFaceElement,GElement,GlyphElement,GradientElement,ImageElement,LineElement,LinearGradientElement,MarkerElement,MaskElement,Matrix,MissingGlyphElement,Mouse,PSEUDO_ZERO,Parser,PathElement,PathParser,PatternElement,Point,PolygonElement,PolylineElement,Property,QB1,QB2,QB3,RadialGradientElement,RectElement,RenderedElement,Rotate,SVGElement:SVGElement$1,SVGFontLoader,Scale,Screen,Skew,SkewX,SkewY,StopElement,StyleElement,SymbolElement,TRefElement,TSpanElement,TextElement,TextPathElement,TitleElement,Transform,Translate,UnknownElement,UseElement,ViewPort,compressSpaces,default:Canvg,getSelectorSpecificity,normalizeAttributeName,normalizeColor,parseExternalUrl,presets:index,toNumbers,trimLeft,trimRight,vectorMagnitude,vectorsAngle,vectorsRatio},Symbol.toStringTag,{value:"Module"}));export{_typeof$2 as _,__vitePreload as a,index_es as i,purify_es as p,unzlibSync$1 as u,zlibSync as z};
